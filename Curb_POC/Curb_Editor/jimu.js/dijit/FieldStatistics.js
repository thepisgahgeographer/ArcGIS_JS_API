// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/NodeList-manipulate dojo/when jimu/dijit/formSelect esri/lang jimu/dijit/Popup jimu/dijit/LoadingIndicator jimu/utils jimu/statisticsUtils".split(" "),function(n,p,g,c,k,q,r,D,E,t,F,u,v,G,l){return n([p],{statInfo:null,postMixInProperties:function(){this.nls=window.jimuNls.fieldStatistics;g.mixin(this.nls,window.jimuNls.common)},showContent:function(b){this.statInfo=b;0!==this.statInfo.fieldNames.length&&
(b=c.create("div",{className:"stat-container"},this.domNode),this._createFieldDom(b),1===this.statInfo.fieldNames.length&&(this.statInfo.fieldName=this.statInfo.fieldNames[0],this._showOneFieldStatContent(this.statInfo,b)))},showContentAsPopup:function(b){this.statInfo=b;this._statisticsPopup&&this._statisticsPopup.domNode&&this._statisticsPopup.close();this._statisticsPopup=null;this._statisticsPopup=new u({titleLabel:this.nls.statistics,content:this.domNode,width:270,height:265,buttons:[{label:this.nls.ok}]});
this.showContent(b)},_showOneFieldStatContent:function(b,a){if(l.isStatFromServer(this.statInfo)){var e=new v;e.placeAt(a);e.show()}l.getStatisticsResult(this.statInfo).then(g.hitch(this,function(d){e&&e.destroy();r(".esriAGOTableStatistics",a).remove();d=this._createStatContent(d);c.place(d,a)}))},_getFieldAliaseFromStatInfo:function(b){var a=this.statInfo.featureSet;(a=a&&a.fieldAliases)&&"undefined"!==typeof a[b]?a=a[b]:this.statInfo.layer?(a=k.filter(this.statInfo.layer.fields,function(e){return e.name===
b}),a=a[0]?a[0].alias:""):a=b;return a},_createFieldDom:function(b){if(1<this.statInfo.fieldNames.length){var a=c.create("div",{className:"header"},b);c.create("span",{innerHTML:this.nls.field+": "},a);var e=new t({options:this.statInfo.fieldNames.map(g.hitch(this,function(d){return{value:d,label:this._getFieldAliaseFromStatInfo(d)}})),style:{width:"150px"},"aria-label":this.nls.field});this.own(q(e,"change",g.hitch(this,function(d){this.statInfo.fieldName=d;this._showOneFieldStatContent(this.statInfo,
b)})));e.placeAt(a);this.statInfo.fieldName=this.statInfo.fieldNames[0];this._showOneFieldStatContent(this.statInfo,b)}else a=c.create("div",{className:"header",innerHTML:"\x3cspan\x3e"+this.nls.field+"\x3c/span\x3e: "+this._getFieldAliaseFromStatInfo(this.statInfo.fieldNames[0])},b);return a},_createStatContent:function(b){var a={},e="count sum min max ave stddev".split(" "),d;var h=c.create("div",{className:"esriAGOTableStatistics",innerHTML:""});c.create("div",{className:"hzLine",innerHTML:""},
h);var w=c.create("table",{className:"attrTable",tabindex:"0",innerHTML:"",style:{cellpadding:0,cellspacing:0}},h);for(f in b)b.hasOwnProperty(f)&&(a[f.toLowerCase()]=b[f]);var f=a.countfield;var x=a.sumfield||"";var y=a.minfield||"";var z=a.maxfield||"";b=a.avgfield||"";a=a.stddevfield||"";var A=c.create("tbody",{},w);var B=this;k.forEach([f,x,y,z,b,a],function(m,C){""!==m&&(d=c.create("tr",{valign:"top"},A),c.create("td",{"class":"attrName",innerHTML:B.nls[e[C]]},d),c.create("td",{"class":"attrValue",
innerHTML:m},d))});c.create("div",{className:"break",innerHTML:""},h);return h}})});