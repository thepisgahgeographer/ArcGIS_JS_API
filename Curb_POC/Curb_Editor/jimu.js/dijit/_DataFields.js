// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:jimu/dijit/templates/_DataFields.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"fieldsContent" class\x3d"fields-content"\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"btnUp" data-dojo-attach-event\x3d"onclick:_moveUp" class\x3d"jimu-icon jimu-icon-up" title\x3d"${nls.moveUp}"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"btnDown" data-dojo-attach-event\x3d"onclick:_moveDown" class\x3d"jimu-icon jimu-icon-down" title\x3d"${nls.moveDown}"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dojo/Evented dojo/text!./templates/_DataFields.html".split(" "),function(m,e,g,d,f,k,n,p,q,r){return m([n,q,p],{baseClass:"jimu-dijit-data-fields",templateString:r,isSingle:!1,postMixInProperties:function(){this.nls=e.clone(window.jimuNls.simpleTable)},postCreate:function(){this.inherited(arguments);this.own(k(this.domNode,"click",e.hitch(this,this._onDomClicked)))},
clear:function(){d.empty(this.fieldsContent);this.emit("change")},setSingleMode:function(){this.isSingle=!0;this._checkSingleMode()},setMultipleMode:function(){this.isSingle=!1},_checkSingleMode:function(a){if(this.isSingle){var b=f("input",this.domNode);b=g.filter(b,e.hitch(this,function(c){return c.checked}));0!==b.length&&(a||(a=b[0]),b=g.filter(b,e.hitch(this,function(c){return c!==a})),g.forEach(b,e.hitch(this,function(c){c.checked=!1})))}},setFields:function(a){this.clear();g.forEach(a,e.hitch(this,
function(b){var c=d.toDom('\x3cdiv class\x3d"field-item"\x3e\x3cinput type\x3d"checkbox" /\x3e\x3cspan class\x3d"jimu-ellipsis" /\x3e\x3c/div\x3e'),h=f("input",c)[0],l=f("span",c)[0];h.checked=!!b.checked;l.innerHTML=b.alias||b.name;l.title=b.alias||b.name;c.fieldName=b.name;d.place(c,this.fieldsContent);this.own(k(h,"change",e.hitch(this,function(){h.checked&&this._checkSingleMode(h);this.emit("change")})))}));this.emit("change")},selectFields:function(a,b){e.isArrayLike(a)&&(a=e.clone(a),a.reverse(),
g.forEach(a,e.hitch(this,function(c){if(c=this._getFieldItemDivByName(c))b||d.place(c,c.parentNode,"first"),f("input",c)[0].checked=!0})));this.emit("change")},getSelectedFieldNames:function(){var a=f(".field-item",this.fieldsContent),b=[];g.forEach(a,e.hitch(this,function(c){f("input",c)[0].checked&&b.push(c.fieldName)}));return b},_getFieldItemDivByName:function(a){var b=f(".field-item",this.fieldsContent);return g.filter(b,e.hitch(this,function(c){return c.fieldName===a}))[0]},_onDomClicked:function(a){a=
a.target||a.srcElement;if(d.isDescendant(a,this.fieldsContent)&&a!==this.fieldsContent){var b=a.tagName.toLowerCase(),c=null;d.hasClass(a,"field-item")?this._selectFieldItemDom(a):"span"===b?(c=a.parentNode,this._selectFieldItemDom(c)):"input"===b&&(c=a.parentNode,a.checked?this._selectFieldItemDom(c):d.removeClass(c,"selected"));this._updateHighLightIcons()}},_updateHighLightIcons:function(){var a=this._getSelectedFieldItemDiv();a&&d.hasClass(a,"selected")&&(a.previousSibling?d.addClass(this.btnUp,
"high-light"):d.removeClass(this.btnUp,"high-light"),a.nextSibling?d.addClass(this.btnDown,"high-light"):d.removeClass(this.btnDown,"high-light"))},_selectFieldItemDom:function(a){f(".field-item",this.fieldsContent).removeClass("selected");d.addClass(a,"selected")},_getSelectedFieldItemDiv:function(){var a=null,b=f(".field-item.selected",this.fieldsContent);0<b.length&&(a=b[0]);return a},_moveUp:function(){var a=this._getSelectedFieldItemDiv();a&&a.previousSibling&&d.place(a,a.previousSibling,"before");
this._updateHighLightIcons()},_moveDown:function(){var a=this._getSelectedFieldItemDiv();a&&a.nextSibling&&d.place(a,a.nextSibling,"after");this._updateHighLightIcons()}})});