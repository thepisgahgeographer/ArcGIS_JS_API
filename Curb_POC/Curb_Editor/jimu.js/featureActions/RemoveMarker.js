// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["dojo/_base/declare","../BaseFeatureAction","esri/layers/GraphicsLayer"],function(b,c,d){return b(c,{name:"RemoveMarker",iconClass:"icon-close",_markerLayer:null,isFeatureSupported:function(a){this._getMarkerLayer();return 0<a.features.length&&a.geometryType&&a.features[0]&&a.features[0].geometry&&!0===this._isFeatureInMarkerFeatureActionLayer(a)},onExecute:function(a){this._removeMarker(a)},_getMarkerLayer:function(){if(this.map.getLayer("marker-feature-action-layer"))this._markerLayer=this.map.getLayer("marker-feature-action-layer");
else if(this._markerLayer=new d({id:"marker-feature-action-layer"}),this.map.addLayer(this._markerLayer),this.map.snappingManager){var a=this.map.snappingManager.layerInfos;a.push({layer:this._markerLayer});this.map.snappingManager.setLayerInfos(a)}},_removeMarker:function(a){a=a.features[0];a._textSymbol&&this._markerLayer.remove(a._textSymbol);this._markerLayer.remove(a);this.map&&this.map.infoWindow&&this.map.infoWindow.hide()},_isFeatureInMarkerFeatureActionLayer:function(a){return a.features[0]&&
a.features[0]._graphicsLayer&&a.features[0]._graphicsLayer.id?"marker-feature-action-layer"===a.features[0]._graphicsLayer.id:!1}})});