// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define([],function(){function n(a,b){function f(c,l){var g,d,k="widgetOnScreen"===c;if(a[c]){if(a[c].groups)for(g=0;g<a[c].groups.length;g++){var e=a[c].groups[g];l(e,{index:g,isWidget:!1,groupId:e.id,isThemeWidget:!1,isOnScreen:k});if(a[c].groups[g].widgets)for(d=0;d<a[c].groups[g].widgets.length;d++){var m=a[c].groups[g].widgets[d];l(m,{index:d,isWidget:!0,groupId:e.id,isThemeWidget:m.uri&&-1<m.uri.indexOf("themes/"+a.theme.name),isOnScreen:k})}}if(a[c].widgets)for(g=0;g<a[c].widgets.length;g++)m=
a[c].widgets[g],l(a[c].widgets[g],{index:g,isWidget:!0,groupId:c,isThemeWidget:m.uri&&-1<m.uri.indexOf("themes/"+a.theme.name),isOnScreen:k})}}f("widgetOnScreen",b);f("widgetPool",b)}var h={},p="inPanel hasLocale hasStyle hasConfig hasUIFile hasSettingPage hasSettingUIFile hasSettingLocale hasSettingStyle keepConfigAfterMapSwitched isController hasVersionManager isThemeWidget supportMultiInstance mirrorIconForRTL".split(" ");h.visitElement=n;h.getConfigElementById=function(a,b){var f;if("map"===b)return a.map;
n(a,function(c){if(c.id===b)return f=c,!0});return f};h.getConfigElementByLabel=function(a,b){var f;if("map"===b)return a.map;n(a,function(c){if(c.label||c.name===b)return f=c,!0});return f};h.getConfigElementsByName=function(a,b){var f=[];if("map"===b)return[a.map];n(a,function(c){c.name===b&&f.push(c)});return f};h.getWidgetNameFromUri=function(a){a=a.split("/");a.pop();return a.pop()};h.getAmdFolderFromUri=function(a){a=a.split("/");a.pop();return a.join("/")+"/"};h.widgetProperties=p;h.processWidgetProperties=
function(a){"undefined"===typeof a.properties.isController&&(a.properties.isController=!1);"undefined"===typeof a.properties.isThemeWidget&&(a.properties.isThemeWidget=!1);"undefined"===typeof a.properties.hasVersionManager&&(a.properties.hasVersionManager=!1);"undefined"===typeof a.properties.mirrorIconForRTL&&(a.properties.mirrorIconForRTL=!1);p.forEach(function(b){"undefined"===typeof a.properties[b]&&(a.properties[b]=!0)})};h.getControllerWidgets=function(a){var b=[];a.visitElement(function(f){f.isController&&
b.push(f)});return b};h.addI18NLabelToManifest=function(a,b,f){function c(d,k){k[l]&&(a.i18nLabels[d]=k[l]);"theme"===a.category&&(a.layouts&&a.layouts.forEach(function(e){a["i18nLabels_layout_"+e.name]||(a["i18nLabels_layout_"+e.name]={});a["i18nLabels_layout_"+e.name][d]=k["_layout_"+e.name]}),a.styles&&a.styles.forEach(function(e){a["i18nLabels_style_"+e.name]||(a["i18nLabels_style_"+e.name]={});a["i18nLabels_style_"+e.name][d]=k["_style_"+e.name]}));"widget"===a.category&&a.featureActions&&a.featureActions.forEach(function(e){a["i18nLabels_featureAction_"+
e.name]||(a["i18nLabels_featureAction_"+e.name]={});a["i18nLabels_featureAction_"+e.name][d]=k["_featureAction_"+e.name]})}a.i18nLabels={};var l="widget"===a.category?"_widgetLabel":"_themeLabel";b&&b.root&&b.root[l]&&(a.i18nLabels.defaultLabel=b.root[l],"theme"===a.category&&(a.layouts&&a.layouts.forEach(function(d){a["i18nLabels_layout_"+d.name]={};a["i18nLabels_layout_"+d.name].defaultLabel=b.root["_layout_"+d.name]}),a.styles&&a.styles.forEach(function(d){a["i18nLabels_style_"+d.name]={};a["i18nLabels_style_"+
d.name].defaultLabel=b.root["_style_"+d.name]})),"widget"===a.category&&a.featureActions&&a.featureActions.forEach(function(d){a["i18nLabels_featureAction_"+d.name]={};a["i18nLabels_featureAction_"+d.name].defaultLabel=b.root["_featureAction_"+d.name]}));for(var g in f)c(g,f[g])};h.isHostedService=function(a){if(!a)return!1;var b=-1!==a.indexOf(".arcgis.com/");a=-1!==a.indexOf("//services")||-1!==a.indexOf("//tiles")||-1!==a.indexOf("//features");return b&&a};return h});