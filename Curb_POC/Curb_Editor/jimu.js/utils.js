// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/sniff dojo/_base/config dojo/io-query dojo/query dojo/NodeList-traverse dojo/Deferred dojo/promise/all dojo/on dojo/json dojo/cookie dojo/number dojo/date/locale dojo/i18n!dojo/cldr/nls/number dojox/encoding/base64 esri/lang moment/moment esri/arcgis/utils esri/dijit/PopupTemplate esri/SpatialReference esri/geometry/Extent esri/geometry/geometryEngine esri/geometry/Multipoint esri/geometry/Polyline esri/geometry/Polygon esri/geometry/webMercatorUtils esri/tasks/GeometryService esri/tasks/ProjectParameters esri/tasks/FeatureSet esri/symbols/PictureMarkerSymbol esri/urlUtils esri/request esri/tasks/query esri/tasks/QueryTask esri/graphicsUtils jimu/portalUrlUtils ./shared/utils ./accessibleUtils ./zoomToUtils libs/caja-html-sanitizer-minified".split(" "),
function(p,n,r,C,w,O,y,sa,v,aa,D,E,I,F,ba,ca,P,z,J,Q,K,da,ea,fa,ha,ia,R,ja,S,ka,T,la,x,A,ma,na,oa,G,L,pa,qa){function U(a,b){var c=a.match(/url\([^)]+\)/gi),d;if(null===c||""===b)return a;for(d=0;d<c.length;d++){var e=c[d].match(/(url\(["|']?)(.*)((?:['|"]?)\))/i);if(4<=e.length){var g=e[2];/^data:image\/.*;/.test(g)||(b.endWith("/")||(b+="/"),a=a.replace(e[1]+g+e[3],e[1]+b+g+e[3]))}}return a}function M(a,b){var c=Array.isArray(b),d=c&&[]||{};c?(a=a||[],d=d.concat(a),b.forEach(function(e,g){"undefined"===
typeof a[g]?d[g]=e:"object"===typeof e?d[g]=M(a[g],e):-1===a.indexOf(e)&&d.push(e)})):(a&&"object"===typeof a&&Object.keys(a).forEach(function(e){d[e]=a[e]}),Object.keys(b).forEach(function(e){d[e]="object"===typeof b[e]&&b[e]?a[e]?M(a[e],b[e]):b[e]:b[e]}));return d}function V(a,b){var c=a.map(function(g){return g.id});n.forEach(b,function(g){0>c.indexOf(g)&&a.push({id:g,widgets:[]})},this);var d=[];a=n.filter(a,function(g){return 0>b.indexOf(g.id)?(d.push(g),!1):!0},this);if(0===a.length)return[];
var e=a[a.length-1];n.forEach(d,function(g){e.widgets=e.widgets.concat(g.widgets)},this);return a=a.sort(function(g,h){return b.indexOf(g.id)-b.indexOf(h.id)})}function N(a,b,c){function d(g,h){return p.isArray(g[h.key])?g[h.key][h.index]:g[h.key]}b=function(g){var h=[];g.split("_").forEach(function(k){var l=!1;"--"===k.slice(k.length-2)&&(l=!0,k=k.slice(0,k.length-2));var m=k.search(/\[[0-9]+\]/);-1===m&&(m=k.length);h.push({key:k.slice(0,m),index:Number(k.slice(m+1,-1)),deleteFlag:l})});return h}(b);
for(var e=1;e<b.length-1;e++)if(a=d(a,b[e]),!a)return;if(b[b.length-1].deleteFlag)!0===c&&(p.isArray(a[b[b.length-1].key])?delete a[b[b.length-1].key][b[b.length-1].index]:delete a[b[b.length-1].key]);else if(p.isArray(a[b[b.length-1].key])){if(void 0===c)return a[b[b.length-1].key][b[b.length-1].index];a[b[b.length-1].key][b[b.length-1].index]=c}else{if(void 0===c)return a[b[b.length-1].key];a[b[b.length-1].key]=c}}function W(a,b,c){function d(k){k=f.template.getSearchRange(b,k,"]");var l=b.slice(k.firstPos,
k.lastPos);return-1!==k.firstPos?(l=b.slice(k.firstPos+l.indexOf("[")+1,k.lastPos-1),k=b.slice(k.lastPos+1),(l=f.getConfigElementById(a,l))?{object:l,key:"section_"+k,state:"isSection"}:{state:"deleted"}):{state:"isNotSection"}}var e=a,g=b=b.replace(/\//g,"_"),h=d("groups\\[.+\\]");if("deleted"!==h.state&&("isSection"===h.state&&(e=h.object,g=h.key),h=d("widgets\\[.+\\]"),"delete"!==h.state))return"isSection"===h.state&&(e=h.object,g=h.key),N(e,g,c)}var f={},X={geometryService:"http://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer"};
p.mixin(f,L);p.mixin(f,pa);p.mixin(f,qa);window.atob||(window.atob=function(a){a=P.decode(a);for(var b="",c=0,d=a.length;c<d;c++)b+=String.fromCharCode(a[c]);return b});window.btob||(window.btob=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(String.charCodeAt(a[c]));return P.encode(b)});var Y=[];require.on("error",function(a){n.forEach(Y,function(b){a.info[0]&&-1<a.info[0].indexOf(b.resKey)&&b.def.reject(a);for(var c in a.info)-1<c.indexOf(b.resKey)&&b.def.reject(a)})});f.checkError=function(a,
b){Y.push({resKey:a,def:b})};f.replacePlaceHolder=function(a,b){var c=E.stringify(a),d=c.match(/\$\{(\w)+\}/g);if(null===d)return a;for(a=0;a<d.length;a++){var e=d[a].match(/(\w)+/g)[0];b[e]&&(c=c.replace(d[a],b[e]))}return E.parse(c)};f.changeUnit=function(a){var b=Math.abs(a);a=Math.floor(b);var c=Math.floor(60*(b-a));b=(60*(60*(b-a)-c)).toFixed(2);return a+"\u00b0"+(10>c?"0"+c:c)+"'"+(10>b?"0"+b:b)+'"'};f.formatTime=function(a){var b=a/1E3;a=Math.floor(b/60);b=Number(b-60*a).toFixed(1);return(10>
a?"0"+a:a)+":"+(10>b?"0"+b:b)};f.parseTime=function(a){var b=/(\d{2,}):(\d{2})\.(\d{1})/;if(!b.test(a))return console.log("wrong time format."),-1;a=a.match(b);return 1E3*(60*parseInt(a[1],10)+parseInt(a[2],10)+parseInt(a[3],10)/10)};f.preloadImg=function(a,b){var c=[];c="string"===typeof a?[a]:a;n.forEach(c,function(d){(new Image).src=b?b+d:d})};f.setWABLogoDefaultAlt=function(a){if(a){a=y("img",a);for(var b=["img_1412759111499","img_1545621838463","img_1560482577021"],c=0,d=a.length;c<d;c++){var e=
a[c];-1<b.indexOf(r.getAttr(e,"id"))&&!r.getAttr(e,"alt")&&r.setAttr(e,"alt","ArcGIS Web AppBuilder.png")}}};var B=null;f.getImagesSize=function(a){var b=new v;if(!a||0!==a.indexOf("http"))return b.reject(),b;null===B&&(B=r.create("img",{id:"__test-image-size",style:{position:"absolute",left:"-9999px",top:"-9999px"}},document.body));var c=D(B,"load",function(){clearTimeout(d);d=null;c.remove();var e=r.getContentBox(B);1===e.w&&1===e.h||0===e.w||0===e.h?b.reject():b.resolve([e.w,e.h])},{}),d=setTimeout(function(){clearTimeout(d);
d=null;b.reject()},5E3);r.setAttr(B,"src",a);return b};f.getPositionStyle=function(a){var b={};if(!a)return b;a=p.clone(a);if(window.isRTL){if("undefined"!==typeof a.left&&"undefined"!==typeof a.right){var c=a.left;a.left=a.right;a.right=c}else"undefined"!==typeof a.left?(a.right=a.left,delete a.left):"undefined"!==typeof a.right&&(a.left=a.right,delete a.right);"undefined"!==typeof a.paddingLeft&&"undefined"!==typeof a.paddingRight?(c=a.paddingLeft,a.paddingLeft=a.paddingRight,a.paddingRight=c):
"undefined"!==typeof a.paddingLeft?(a.paddingRight=a.paddingLeft,delete a.paddingLeft):"undefined"!==typeof a.paddingRight&&(a.paddingLeft=a.paddingRight,delete a.paddingRight);"undefined"!==typeof a.marginLeft&&"undefined"!==typeof a.marginRight?(c=a.marginLeft,a.marginLeft=a.marginRight,a.marginRight=c):"undefined"!==typeof a.marginLeft?(a.marginRight=a.marginLeft,delete a.marginLeft):"undefined"!==typeof a.marginRight&&(a.marginLeft=a.marginRight,delete a.marginRight)}c="left top right bottom width height padding paddingLeft paddingRight paddingTop paddingBottom margin marginLeft marginRight marginTop marginBottom".split(" ");
for(var d=0;d<c.length;d++){var e=c[d];"number"===typeof a[e]?b[e]=a[e]+"px":"undefined"!==typeof a[e]?b[e]=a[e]:"padding"===e.substr(0,7)||"margin"===e.substr(0,7)?b[e]=0:b[e]="auto"}b.zIndex="undefined"===typeof a.zIndex?"auto":a.zIndex;return b};f.isEqual=function(a,b){function c(g,h){var k;if(null===g&&null===h||"undefined"===typeof g&&"undefined"===typeof h)return!0;if(null===g&&null!==h||null===h&&null!==g||"undefined"===typeof g&&"undefined"!==typeof h||"undefined"===typeof h&&"undefined"!==
typeof g)return!1;if(isNaN(g)&&isNaN(h)&&"number"===typeof g&&"number"===typeof h||g===h)return!0;if("function"===typeof g&&"function"===typeof h||g instanceof Date&&h instanceof Date||g instanceof RegExp&&h instanceof RegExp||g instanceof String&&h instanceof String||g instanceof Number&&h instanceof Number)return g.toString()===h.toString();if(-1<d.indexOf(g)||-1<e.indexOf(h))return!1;if(null!==h){for(k in h)if(h.hasOwnProperty(k)!==g.hasOwnProperty(k)||typeof h[k]!==typeof g[k])return!1;for(k in g){if(h.hasOwnProperty(k)!==
g.hasOwnProperty(k)||typeof h[k]!==typeof g[k])return!1;switch(typeof g[k]){case "object":case "function":d.push(g);e.push(h);if(!c(g[k],h[k]))return!1;d.pop();e.pop();break;default:if(!(isNaN(g[k])&&isNaN(h[k])&&"number"===typeof g[k]&&"number"===typeof h[k]||g[k]===h[k]))return!1}}}return!0}var d=[];var e=[];return c(a,b)?!0:!1};f.file={loadFileAPI:function(){var a=new v;a.resolve();return a},supportHTML5:function(){return window.File&&window.FileReader&&window.FileList&&window.Blob?!0:!1},supportFileAPI:function(){return C("safari")&&
6>C("safari")?!1:window.FileAPI&&window.FileAPI.readAsDataURL?!0:!1},isEnabledFlash:function(){var a=null;if(document.all)try{a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(b){a=null}else navigator.plugins&&0<navigator.plugins.length&&(a=navigator.plugins["Shockwave Flash"]);return!!a},containSeparator:function(a){return 0<=a.indexOf("/")?!0:0<=a.indexOf("\\")?!0:!1},getNameFromPath:function(a){var b="";b=0<=a.indexOf("/")?"/":"\\";a=a.split(b);return 0<a.length?a[a.length-1]:null},getFolderFromPath:function(a){return a.substr(0,
a.length-f.file.getNameFromPath(a).length)},readFile:function(a,b,c,d){if(this.supportHTML5()){var e=a.target.files[0];e&&(e.type.match(b)?e.size>=c?d({errCode:"exceed"}):(a=new FileReader,a.onload=function(h){d(null,e.name,h.target.result)},a.readAsDataURL(e)):d({errCode:"invalidType"}))}else if(this.supportFileAPI()){var g=window.FileAPI.getFiles(a);g[0].type.match(b)?g[0].size>=c?d({errCode:"exceed"}):window.FileAPI.readAsDataURL(g[0],function(h){h&&h.result?d(null,g[0].name,h.result):d({errCode:"readError"})}):
d({errCode:"invalidType"})}}};f.getUriInfo=function(a){var b={};var c=a.indexOf("/");a.substring(0,c);c=a.substring(0,a.lastIndexOf("/")+1);b.folderUrl=require(f.getRequireConfig()).toUrl(c);b.amdFolder=c;b.url=b.folderUrl;if(/^http(s)?:\/\//.test(a)||/^\/\//.test(a))b.isRemote=!0;return b};f.widgetJson=function(){var a={addManifest2WidgetJson:function(b,c){p.mixin(b,c.properties);b.name=c.name;b.label||(b.label=c.label);b.manifest=c;b.isRemote=c.isRemote;c.featureActions&&(b.featureActions=c.featureActions);
b.icon||(b.icon=c.icon);b.thumbnail||(b.thumbnail=c.thumbnail);b.folderUrl=c.folderUrl;b.amdFolder=c.amdFolder},removeManifestFromWidgetJson:function(b){if(b.manifest){for(var c in b.manifest.properties)b[c]=void 0;b.name=void 0;b.label=void 0;b.featureActions=void 0;b.manifest=void 0}},getUriFromItem:function(b){return b.url?a.getFolderUrlFromItem(b)+"Widget":null},getFolderUrlFromItem:function(b){if(!b.url)return null;b=/manifest\.json$/.test(b.url)?b.url.substring(0,b.url.length-13):/\/$/.test(b.url)?
b.url:b.url+"/";"https:"===window.location.protocol&&(b=b.replace(/^http:\/\//,"https://"));return b}};return a}();f.getRequireConfig=function(){if(jimuConfig){var a=[];jimuConfig.widgetsPackage&&(a=a.concat(jimuConfig.widgetsPackage));jimuConfig.themesPackage&&(a=a.concat(jimuConfig.themesPackage));jimuConfig.configsPackage&&(a=a.concat(jimuConfig.configsPackage));return{packages:a}}return{}};f.getTypeByGeometryType=function(a){var b="",c="esriGeometryLine esriGeometryCircularArc esriGeometryEllipticArc esriGeometryBezier3Curve esriGeometryPath esriGeometryPolyline".split(" "),
d=["esriGeometryRing","esriGeometryPolygon","esriGeometryEnvelope"];0<=["esriGeometryPoint","esriGeometryMultipoint"].indexOf(a)?b="point":0<=c.indexOf(a)?b="polyline":0<=d.indexOf(a)&&(b="polygon");return b};f.getSymbolTypeByGeometryType=function(a){var b=null;a=f.getTypeByGeometryType(a);"point"===a?b="marker":"polyline"===a?b="line":"polygon"===a&&(b="fill");return b};f.getServices=function(){return X};f.getArcGISDefaultGeometryService=function(){return new S(X.geometryService)};f.restoreToDefaultWebMapExtent=
function(a,b,c){var d=new v;if(!a||"esri.Map"!==a.declaredClass)return setTimeout(function(){d.reject("Invalid map.")},0),d;b=b&&b.itemInfo;if(!b)return setTimeout(function(){d.reject("Invalid itemInfo")},0),d;b=b.item&&b.item.extent;if(!b)return setTimeout(function(){d.reject("Invalid itemInfo.item.extent")}),d;var e=new da({wkid:4326});e=new ea(b[0][0],b[0][1],b[1][0],b[1][1],e);if(4326===parseInt(a.spatialReference.wkid,10))return a.setExtent(e);if(a.spatialReference.isWebMercator())return e=ja.geographicToWebMercator(e),
a.setExtent(e);b=new ka;b.geometries=[e];b.outSR=a.spatialReference;e=esriConfig&&esriConfig.defaults&&esriConfig.defaults.geometryService;e&&"esri.tasks.GeometryService"===e.declaredClass||(c&&"string"===typeof c&&p.trim(c)?(c=p.trim(c),e=new S(c)):e=f.getArcGISDefaultGeometryService());e.project(b).then(function(g){if(g=g&&g[0])return a.setExtent(g);d.reject("Invalid projected geometry.");return d},function(g){console.error(g);d.reject(g);return d});return d};f.getAncestorWindow=function(){for(var a=
window;a&&a.parent&&a!==a.parent;)a=a.parent;return a};f.getAncestorDom=function(a,b,c){if(a&&1===a.nodeType&&b&&"function"===typeof b){var d=100,e=document.body;c&&("number"===typeof c?(c=parseInt(c,10),0<c&&(d=c)):1===c.nodeType&&(e=c));for(c=0;a.parentNode&&c<d&&r.isDescendant(a.parentNode,e);){if(b(a.parentNode))return a.parentNode;a=a.parentNode;c++}}return null};f.bindClickAndDblclickEvents=function(a,b,c,d){var e=null;if(a&&1===a.nodeType&&b&&"function"===typeof b&&c&&"function"===typeof c){var g=
200;d&&"number"===typeof d&&(d=parseInt(d,10),0<d&&(g=d));var h=0;e=D(a,"click",function(k){h++;1===h?setTimeout(function(){1===h&&(h=0,b(k))},g):2===h&&(h=0,c(k))})}return e};f.isScrollToBottom=function(a){var b=r.getContentBox(a);return 1>a.scrollHeight-(a.scrollTop+b.h)};f.getAllItemTypes=function(){var a=[];a=a.concat(["Web Map","Web Scene","CityEngine Web Scene"]).concat("Feature Service;Map Service;Image Service;KML;WMS;Feature Collection;Feature Collection Template;Geodata Service;Globe Service".split(";")).concat(["Geometry Service",
"Geocoding Service","Network Analysis Service","Geoprocessing Service"]).concat(["Web Mapping Application","Mobile Application","Code Attachment","Operations Dashboard Add In","Operation View"]).concat("Symbol Set;Color Set;Shapefile;CSV;Service Definition;Document Link;Microsoft Word;Microsoft PowerPoint;Microsoft Excel;PDF;Image;Visio Document".split(";"));return a=a.concat("Map Document;Map Package;Tile Package;ArcPad Package;Explorer Map;Globe Document;Scene Document;Published Map;Map Template;Windows Mobile Package".split(";")).concat(["Layer",
"Layer Package","Explorer Layer"]).concat(["Geoprocessing Package","Geoprocessing Sample","Locator Package","Rule Package"]).concat("Workflow Manager Package;Desktop Application;Desktop Application Template;Code Sample;Desktop Add In;Explorer Add In".split(";"))};f.getItemQueryStringByTypes=function(a){var b="",c=f.getAllItemTypes();if(a&&0<a.length&&0<a.length){var d="";n.forEach(a,function(e,g){d+=' type:"'+e+'" ';g!==a.length-1&&(d+=" OR ")});b=" ( "+d+" ) ";c=a.concat(c);c=n.filter(c,function(e){return n.every(a,
function(g){return 0>g.toLowerCase().indexOf(e.toLowerCase())})});n.forEach(c,function(e){b+=' -type:"'+e+'" '})}return b};f.getItemQueryStringByTypeKeywords=function(a){var b="";a&&0<a.length&&(b=' typekeywords:"'+a.join(",")+'" ');return b};f.isNotEmptyString=function(a,b){var c=a&&"string"===typeof a;return c?b?c&&p.trim(a):!0:!1};f.isNotEmptyStringArray=function(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(!f.isNotEmptyString(d.value?d.value:d,b))return!1}return!0};f.isValidNumber=function(a){return"number"===
typeof a&&!isNaN(a)};f.isValidNumberArray=function(a){for(var b=0;b<a.length;b++){var c=a[b];c=c.value||0===c.value?c.value:c;if(!f.isValidNumber(c))return!1}return!0};f.isValidDate=function(a){if(a)try{var b=f.getDateByDateTimeStr(a);return!isNaN(b.getTime())}catch(c){return console.error(c),!1}else return!1};f.isObject=function(a){return a&&"object"===typeof a};f.createWebMap=function(a,b,c,d){a=G.getStandardPortalUrl(a);a=G.getBaseItemUrl(a);Q.arcgisUrl=a;return Q.createMap(b,c,d)};f.getRandomString=
function(){var a=Math.random().toString();return a=a.slice(2,a.length)};f._getDomainsByServerName=function(a){var b=a.split("."),c=b.length;return n.map(b,p.hitch(this,function(d,e){d=b.slice(e,c);var g="",h=d.length-1;n.forEach(d,p.hitch(this,function(k,l){g+=k;l!==h&&(g+=".")}));return g}))};f.removeCookie=function(a,b){var c=this._getDomainsByServerName(window.location.hostname);n.forEach(c,p.hitch(this,function(d){I(a,null,{expires:-1,path:b});I(a,null,{expires:-1,path:b,domain:d});I(a,null,{expires:-1,
path:b,domain:"."+d})}))};f.isLocaleChanged=function(a,b){return!a.startWith(b)};f.hashToObject=function(a){a=a.replace("#","");a=O.queryToObject(a);for(var b in a)if(a.hasOwnProperty(b))try{a[b]=E.parse(a[b])}catch(c){}return a};f.reCreateObject=function(a){function b(d){var e=[];d.forEach(function(g){Array.isArray(g)?e.push(b(g)):"object"===typeof g?e.push(c(g)):e.push(g)});return e}function c(d){var e={},g;for(g in d)d.hasOwnProperty(g)&&(null===d[g]?e[g]=null:Array.isArray(d[g])?e[g]=b(d[g]):
e[g]="object"===typeof d[g]?c(d[g]):d[g]);return e}return Array.isArray(a)?b(a):c(a)};f.setVerticalCenter=function(a){setTimeout(function(){var b=y(".jimu-vcenter-text",a),c,d;n.forEach(b,function(e){c=r.getContentBox(e).h;r.setStyle(e,{lineHeight:c+"px"})},this);b=y(".jimu-vcenter",a);n.forEach(b,function(e){c=r.getContentBox(e).h;d=r.getContentBox(y(e).parent()[0]).h;r.setStyle(e,{marginTop:(d-c)/2+"px"})},this)},10)};f.merge=M;f.loadStyleLink=function(a,b,c){var d=new v,e=require(f.getRequireConfig()).toUrl(b);
if(require.cache["url:"+e]){var g=require.cache["url:"+e];var h=e.split("/").pop();e=e.substr(0,e.length-h.length);g=U(g,e);a=c?r.create("style",{id:a,type:"text/css"},r.byId(c),"before"):r.create("style",{id:a,type:"text/css"},document.getElementsByTagName("head")[0]);a.styleSheet&&!a.sheet?a.styleSheet.cssText=g:a.appendChild(r.toDom(g));d.resolve("load");return d}g=c?r.create("link",{id:a,rel:"stylesheet",type:"text/css",href:e+"?wab_dv\x3d"+window.deployVersion},r.byId(c),"before"):r.create("link",
{id:a,rel:"stylesheet",type:"text/css",href:e+"?wab_dv\x3d"+window.deployVersion},document.getElementsByTagName("head")[0]);D(g,"load",function(){d.resolve("load")});var k=setInterval(function(){var l;if(n.some(document.styleSheets,function(m){if(m.href&&m.href.substr(m.href.indexOf(b),m.href.length)===b)return l=m,!0}))try{!d.isFulfilled()&&(l.cssRules&&l.cssRules.length||l.rules&&l.rules.length)&&d.resolve("load"),clearInterval(k)}catch(m){}},50);return d};f.changeLocation=function(a){window.history.pushState&&
window.history.pushState({path:a},"",encodeURI(a))};f.urlToObject=function(a){var b=null;-1===a.indexOf("#")?(b=x.urlToObject(a),b.hash=null):(a=a.split("#"),b=x.urlToObject(a[0]),b.hash=a[1]?-1<a[1].indexOf("\x3d")?O.queryToObject(a[1]):a[1]:null);return b};f.manifest=function(){function a(b){b.panels.forEach(function(c){c.uri="panels/"+c.name+"/Panel.js"});b.styles.forEach(function(c){c.uri="styles/"+c.name+"/style.css"});b.layouts.forEach(function(c){c.uri="layouts/"+c.name+"/config.json";c.icon=
"layouts/"+c.name+"/icon.png";c.RTLIcon="layouts/"+c.name+"/icon_rtl.png"})}return{addManifestProperies:function(b){b.icon||(b.icon=b.folderUrl+"images/icon.png?wab_dv\x3d"+window.deployVersion);b.thumbnail||(b.thumbnail=b.folderUrl+"images/thumbnail.png");"theme"===b.category?a(b):("undefined"!==typeof b["2D"]&&(b.support2D=b["2D"]),"undefined"!==typeof b["3D"]&&(b.support3D=b["3D"]),"undefined"===typeof b["2D"]&&"undefined"===typeof b["3D"]&&(b.support2D=!0),delete b["2D"],delete b["3D"],"undefined"===
typeof b.properties&&(b.properties={}),L.processWidgetProperties(b))},processManifestLabel:function(b,c){var d=c.split("-")[0];b.label=b.i18nLabels&&(b.i18nLabels[c]||b.i18nLabels[d]||b.i18nLabels.defaultLabel)||b.label||b.name;b.layouts&&n.forEach(b.layouts,function(e){var g="i18nLabels_layout_"+e.name;e.label=b[g]&&(b[g][c]||b[g].defaultLabel)||e.label||e.name});b.styles&&n.forEach(b.styles,function(e){var g="i18nLabels_style_"+e.name;e.label=b[g]&&(b[g][c]||b[g].defaultLabel)||e.label||e.name})},
addI18NLabel:function(b){var c=new v;if(b.i18nLabels)return c.resolve(b),c;b.i18nLabels={};if(b.properties&&!1===b.properties.hasLocale)return c.resolve(b),c;var d=b.isRemote?b.amdFolder+"nls/strings.js":b.amdFolder+"nls/strings";require(f.getRequireConfig(),["dojo/i18n!"+d],function(e){var g={};g[dojoConfig.locale]=e;L.addI18NLabelToManifest(b,null,g);c.resolve(b)});return c}}}();f.isNumberField=function(a){return 0<=["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle",
"esriFieldTypeDouble"].indexOf(a)};f.getTime=function(a){var b=a.getTimezoneOffset();b=0>b?"+"+Math.abs(b)/60:"-"+b/60;return a.getTime()+36E5*b};f.getUniqueValues=function(a,b,c,d,e){return function(){var g=new v,h={};d?(h.layerDefinition=d,e&&(h.fieldPopupInfo=e),g.resolve(h)):g=A({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(function(k){h.layerDefinition=k;return h},function(k){console.log("Error: ",k.message)});return g}().then(function(g){return f._getUniqueValues(a,
b,c,g.layerDefinition).then(function(h){return f._getValues(g.layerDefinition,g.fieldPopupInfo,b,h)})})};f._getValues=function(a,b,c,d){var e=[];e=f.getFieldInfoByFieldName(a.fields,c);var g=null,h=f.isNumberField(e.type),k="esriFieldTypeDate"===e.type?!0:!1;if(e){if(h)d=n.map(d,function(l){l=parseFloat(l);isNaN(l)&&(l=null);return l});else if(k)return e=n.map(d,p.hitch(this,function(l){var m=l,q=l;f.isValidDate(l)&&(m=f.getDateTimeStrByFieldInfo(l,b),q=f.localizeDateByFieldInfo(l,b));return{value:m,
label:q}}));a=f.getCodedValueListForCodedValueOrSubTypes(a,c);if(null!==a)for(g={},c=0;c<a.length;c++)g[a[c].value]=a[c].label}return e=n.map(d,function(l){var m=null;m=null===l||void 0===l?"\x3cNull\x3e":g&&g.hasOwnProperty(l)?g[l]:h?b?f.localizeNumberByFieldInfo(l,b):f.localizeNumber(l):k?f.localizeDateByFieldInfo(new Date(l),b):l;return{value:l,label:m}})};f._getUniqueValues=function(a,b,c,d){var e=new v;a=a.replace(/\/*$/g,"");c||(c="1\x3d1");e=/\/ImageServer$/gi.test(a);var g=-1<a.indexOf("MapServer/dynamicLayer");
e||g?e=f._getUniqueValuesByQueryTask(a,b,c):(e=f.getFieldInfoByFieldName(d.fields,b),e=0<f.getCodedValuesOrTypesCount(e,d)?f._getUniqueValuesByQueryTask(a,b,c):f._getUniqueValuesByGenerateRenderer(a,b,c));return e};f.getCodedValuesOrTypesCount=function(a,b){return a?b.typeIdField&&b.typeIdField.toUpperCase()===a.name.toUpperCase()&&b.types?b.types.length:(a=f._getAllCodedValue(b,a))?a.length:0:0};f._getUniqueValuesByQueryTask=function(a,b,c){var d=new ma;d.where=c;d.returnDistinctValues=!0;d.returnGeometry=
!1;d.outFields=[b];return(new na(a)).execute(d).then(function(e){var g=[];e.features&&0<e.features.length&&n.forEach(e.features,function(h){h&&h.attributes&&g.push(h.attributes[b])});return g})};f._getUniqueValuesByGenerateRenderer=function(a,b,c){var d=new v,e=a.split("?");a=1<e.length?e[0].replace(/\/*$/g,"")+"/generateRenderer?"+e[1]:a.replace(/\/*$/g,"")+"/generateRenderer";b=E.stringify({type:"uniqueValueDef",uniqueValueFields:[b]});A({url:a,content:{classificationDef:b,f:"json",where:c},handleAs:"json",
callbackParamName:"callback"}).then(p.hitch(this,function(g){var h=[];(g=g&&g.uniqueValueInfos)&&0<g.length&&(h=n.map(g,p.hitch(this,function(k){return k.value})));d.resolve(h)}),p.hitch(this,function(g){d.reject(g)}));return d};f.isCodedValuesSupportFilter=function(a,b){a=a.currentVersion?a:a.toJson().layerDefinition;var c=parseFloat(a.currentVersion);return b<=parseFloat(a.maxRecordCount)&&10.1<c};f.combineRadioCheckBoxWithLabel=function(a,b){var c=!1;if(a&&1===a.nodeType&&"input"===a.tagName.toLowerCase()){var d=
a.getAttribute("type")||"";d=d.toLowerCase();if("radio"===d||"checkbox"===d)c=!0}d=!1;b&&1===b.nodeType&&"label"===b.tagName.toLowerCase()&&(d=!0);c&&d&&(c=a.getAttribute("id"),c||(c="input_"+f.getRandomString(),a.setAttribute("id",c)),b.setAttribute("for",c),r.setStyle(b,"cursor","pointer"))};f.groupRadios=function(a,b){var c=[],d="radiogroup_"+f.getRandomString();n.forEach(a,function(e){e.name=d;b&&(e=D(e,"change",b),c.push(e))});return c};f.convertExtentToPolygon=function(a){var b=a.xmin,c=a.xmax,
d=a.ymin,e=a.ymax;return new R({rings:[[[b,e],[c,e],[c,d],[b,d],[b,e]]],spatialReference:a.toJson()})};f.combineGeometries=function(a){function b(q){var t={points:[],spatialReference:q[0].spatialReference.toJson()};n.forEach(q,function(u){"point"===u.type?t.points=t.points.concat([[u.x,u.y]]):"multipoint"===u.type&&(t.points=t.points.concat(u.points))});return new ha(t)}function c(q){var t={paths:[],spatialReference:q[0].spatialReference.toJson()};n.forEach(q,function(u){t.paths=t.paths.concat(u.paths)});
return new ia(t)}function d(q){var t={rings:[],spatialReference:q[0].spatialReference.toJson()};n.forEach(q,function(u){"polygon"===u.type?t.rings=t.rings.concat(u.rings):"extent"===u.type&&(u=f.convertExtentToPolygon(u),t.rings=t.rings.concat(u.rings))});return new R(t)}var e=null;if(a&&0<a.length)if(1===a.length)e=a[0];else{for(var g=null,h=null,k=null,l=null,m=0;m<a.length;m++){g=a[m];switch(g.type){case "point":case "multipoint":l="point";break;case "polyline":l="polyline";break;case "polygon":case "extent":l=
"polygon";break;default:return null}if(0===m)k=l;else if(k!==l)return null;if(m!==a.length-1&&(h=a[m+1],!g.spatialReference.equals(h.spatialReference)))return null}"point"===l?e=b(a):"polyline"===l?e=c(a):"polygon"===l&&(e=d(a))}return e};f.combineGeometriesByGraphics=function(a){var b=null;a&&0<a.length&&(a=n.map(a,function(c){return c.geometry}),b=f.combineGeometries(a));return b};f.isFeaturelayerUrlSupportQuery=function(a,b){var c=!1,d=/\/featureserver\//gi.test(a);a=/\/mapserver\//gi.test(a);
b=(b||"").toLowerCase();d?c=0<=b.indexOf("query"):a&&(c=0<=b.indexOf("data"));return c};f.isImageServiceSupportQuery=function(a){return 0<=(a||"").toLowerCase().indexOf("catalog")};f.isStringEndWith=function(a,b){return a.lastIndexOf(b)+b.length===a.length};f._localizeNumber=function(a,b){var c=(a.toString().split(".")[1]||"").length,d="";d=b&&isFinite(b.places)&&b.places;d=0<d||0<c?"#,###,###,##0.0"+Array.prototype.join.call({length:0<d?d+1:c},"0"):"#,###,###,##0";c={locale:b&&b.locale||w.locale,
pattern:d};p.mixin(c,b||{});try{return F.format(a,c)}catch(e){return console.error(e),a.toLocaleString()}};f.localizeNumber=function(a,b){if(!f.isNumberOrNumberString(a))return a;a=Number(a);var c=!1;0>a&&(c=!0,a=Math.abs(a));a=f._localizeNumber(a,b);c&&(a=window.isRTL?a+"-":"-"+a);return a};f.isLocalizedNumber=function(a){a=F.parse(a,{locale:w.locale});return isNaN(a)?!1:!isNaN(parseFloat(a))};f.parseNumberToUSENFormat=function(a){var b=F.parse(a,{locale:w.locale});return isNaN(b)?parseFloat(z.isDefined(a)&&
a.replace?a.replace(",","."):a):b};f.parseNumber=function(a,b){var c={locale:w.locale};p.mixin(c,b||{});try{return F.parse(a,c)}catch(d){return console.error(d),a}};f.localizeDate=function(a,b){var c={locale:w.locale,fullYear:!0};p.mixin(c,b||{});"ar"===w.locale&&"long"!==c.formatLength&&"full"!==c.formatLength&&(c.formatLength="long");try{return ba.format(a,c)}catch(d){return console.error(d),"date"===c.selector?a.toLocaleDateString():"time"===c.selector?a.toLocaleTimeString():a.toLocaleString()}};
f.localizeNumberByFieldInfo=function(a,b){var c=null;c=p.exists("format.places",b)&&b.format.places;c=f.localizeNumber(a,{places:c});return p.exists("format.digitSeparator",b)&&!b.format.digitSeparator?c.toString().replace(new RegExp("\\"+ca.group,"g"),""):c};f.localizeDateByFieldInfo=function(a,b){var c=null;try{var d={date:a instanceof Date?a.getTime():a},e=p.exists("format.dateFormat",b)?b.format.dateFormat:"longMonthDayYear";c=z.substitute(d,"${date}",{dateFormat:{properties:["date"],formatter:"DateFormat"+
K.prototype._dateFormats[e]}})}catch(g){console.error(g),c=a}return c};f.getDatePatternsByFormat=function(a){return K.prototype._dateFormatsJson[a]};f.localizeDateTimeByFieldInfo=function(a,b,c,d){var e={h:"h",m:"h:mm",s:"h:mm:ss"},g={h:"H",m:"H:mm",s:"H:mm:ss"},h=function(u,H,ra){u=f.getDatePatternsByFormat(u).datePattern;var Z=e[H];Z=ra||"h"===H?e[H]+" a":g[H];return"(datePattern: '"+u+"', timePattern: '"+Z+"', selector: 'date and time')"},k,l,m=null;try{var q={date:a instanceof Date?a.getTime():
a};if(p.exists("format.dateFormat",b)){var t=b.format.dateFormat;c?l=0<t.indexOf("Time")?h(t,d,0>t.indexOf("24")):h(t,d):k=t.split("ShortTime")[0].split("LongTime")[0]}else c?l=h("longMonthDayYear",d):k="longMonthDayYear";l=l?l:K.prototype._dateFormats[k];m=z.substitute(q,"${date}",{dateFormat:{properties:["date"],formatter:"DateFormat"+l}})}catch(u){console.error(u),m=a}return m};f.getDateTimeStr=function(a,b){b=b?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD";return J(a).format(b)};f.getDateByDateTimeStr=function(a){return J(a).toDate()};
f.getDateByDateTimeStrAndFormat=function(a,b){a=f.getDateByDateTimeStr(a);p.exists("format.dateFormat",b)&&(b=b.format.dateFormat,0<=b.indexOf("ShortTime")?a.setSeconds(0):0>b.indexOf("Time")&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0)));return a};f.getDateTimeStrByFieldInfo=function(a,b){var c="YYYY-MM-DD";p.exists("format.dateFormat",b)&&(b=b.format.dateFormat,0<=b.indexOf("LongTime")?c+=" HH:mm:ss":0<=b.indexOf("ShortTime")&&(c+=" HH:mm"));return J(a).format(c)};f.fieldFormatter={getFormattedUrl:function(a){if(a&&
"string"===typeof a){var b=a.indexOf("http:");-1===b&&(b=a.indexOf("https:"));if(-1<b&&-1===a.indexOf("href\x3d")){var c=a.indexOf(" ",b);-1===c&&(c=a.length);var d=-1<a.indexOf("\r\n",b)?a.indexOf("\r\n",b):-1<a.indexOf("\n",b)?a.indexOf("\n",b):c;c=d<c?d:c;d=a.substring(b,c);a=a.substring(0,b)+'\x3cA href\x3d"'+d+'" target\x3d"_blank"\x3e'+d+"\x3c/A\x3e"+a.substring(c,a.length)}}return null===a?"":a},getFormattedNumber:function(a,b){if("number"===typeof a){var c=(a.toString().split(".")[1]||"").length;
a=f.localizeNumberByFieldInfo(a,{format:{places:b&&"number"===typeof b.places?parseInt(b.places,10):c,digitSeparator:b&&b.digitSeparator}});return'\x3cspan class\x3d"jimu-numeric-value"\x3e'+(a||"")+"\x3c/span\x3e"}return a},getFormattedDate:function(a,b){if("number"===typeof a||a instanceof Date)a=f.localizeDateByFieldInfo(a,{format:b});return a||""},getCodedValue:function(a,b){if(a&&a.codedValues){for(var c=0,d=a.codedValues.length;c<d;c++){var e=a.codedValues[c];if(z.isDefined(b)&&p.exists("code",
e)&&b.toString()===e.code.toString())return e.name}return b}return b||null},getTypeName:function(a,b){for(var c=b.length,d=0;d<c;d++)if(a===b[d].id)return b[d].name;return a}};f.addRelativePathInCss=U;f.url={isAbsolute:function(a){return a?a.startWith("http")||a.startWith("/"):!1},removeQueryParamFromUrl:function(a,b){a=x.urlToObject(a);a.query&&delete a.query[b];b=a.path;for(var c in a.query)b=b===a.path?b+"?"+c+"\x3d"+a.query[c]:b+"\x26"+c+"\x3d"+a.query[c];return b},addQueryParamToUrl:function(a,
b,c){a=x.urlToObject(a);a.query||(a.query={});a.query[b]=c;b=a.path;for(var d in a.query)b=b===a.path?b+"?"+d+"\x3d"+a.query[d]:b+"\x26"+d+"\x3d"+a.query[d];return b},compareUrl:function(a,b){a=this.getUrlPath(a);b=this.getUrlPath(b);a=G.removeProtocol(a.toString().toLowerCase()).replace(/\/+/g,"/");b=G.removeProtocol(b.toString().toLowerCase()).replace(/\/+/g,"/");return a===b},getUrlPath:function(a){return x.urlToObject(a).path}};f.processUrlInWidgetConfig=function(a,b){if(a)return a.startWith("data:")||
a.startWith("http")||a.startWith("/")?a:a.startWith("${appPath}")?a.replace("${appPath}",window.appInfo.appPath):b+a};f.processUrlInAppConfig=function(a){if(a)return a.startWith("data:")||a.startWith("http")||a.startWith("/")?a:window.appInfo.appPath+a};f.getLocationUrlWithoutHashAndQueryParams=function(){var a=window.location,b=a.protocol+"//"+a.host+a.pathname;a=x.urlToObject(a.href);a.query&&a.query.apiurl&&(b=f.url.addQueryParamToUrl(b,"apiurl",a.query.apiurl));return b};f.getDefaultWebMapThumbnail=
function(){return require.toUrl("jimu/images/webmap.png")};f.invertColor=function(a){a=a.substring(1);3===a.length&&(a=a.slice(0,1)+a.slice(0,1)+a.slice(1,1)+a.slice(1,1)+a.slice(2,1)+a.slice(2,1));a=parseInt(a,16);return 7829367<a?"#000000":"#ffffff"};f.isLightColor=function(a){a=a.substring(1);3===a.length&&(a=a.slice(0,1)+a.slice(0,1)+a.slice(1,1)+a.slice(1,1)+a.slice(2,1)+a.slice(2,1));a=parseInt(a,16);return 7829367<a?!0:!1};f.mixinAppConfigPosition=function(a,b){var c=p.clone(a);if(!b)return c;
b=p.clone(b);var d=c.widgetOnScreen,e=b.widgetOnScreen;e&&e.widgets&&("[object Object]"===Object.prototype.toString.call(e.widgets)?n.forEach(d.widgets,function(g,h){h=g.uri?g.uri:"ph_"+h;e.widgets[h]&&e.widgets[h].position&&(e.widgets[h].position.relativeTo||(e.widgets[h].position.relativeTo="map"),g.position=e.widgets[h].position)},this):n.forEach(e.widgets,function(g,h){g.position&&!g.position.relativeTo&&(g.position.relativeTo="map");d.widgets[h]&&g.position&&(d.widgets[h].position=g.position)}));
e&&e.groups&&("[object Object]"===Object.prototype.toString.call(e.groups)?n.forEach(d.groups,function(g,h){h=g.label?g.label:"g_"+h;e.groups[h]&&e.groups[h].panel&&e.groups[h].panel.position&&(e.groups[h].panel.position.relativeTo||(e.groups[h].panel.position.relativeTo="map"),g.panel.position=e.groups[h].panel.position)},this):(a=a.layoutDefinition?a.layoutDefinition.manager:"jimu/layoutManagers/AbsolutePositionLayoutManager","jimu/layoutManagers/AbsolutePositionLayoutManager"===a?n.forEach(e.groups,
function(g,h){g.panel&&g.panel.position&&!g.panel.position.relativeTo&&(g.panel.position.relativeTo="map");d.groups[h]&&g.panel&&g.panel.position&&(d.groups[h].panel.position=g.panel.position)}):"jimu/layoutManagers/GridLayoutManager"===a&&(d.groups=V(d.groups,e.groups.map(function(g){return g.id})))));b.map&&b.map.position&&(c.map?c.map.position=b.map.position:c.map={position:b.map.position});b.widgetPool&&b.widgetPool.panel&&(b.widgetPool.panel.position&&!b.widgetPool.panel.position.relativeTo&&
(b.widgetPool.panel.position.relativeTo="map"),c.widgetPool.panel.position=b.widgetPool.panel.position);b.mobileLayout&&(c.mobileLayout=b.mobileLayout);return c};f.handleGridLayoutOnScreenGroupChange=V;f.template={groupIdentification:"groups\\[.+\\]",widgetIdentification:"widgets\\[.+\\]",getSearchRange:function(a,b,c){var d=-1;b=a.search(new RegExp(b));0<=b&&(a=a.slice(b,a.length),a=a.indexOf(c),d=b+a+c.length);return{firstPos:b,lastPos:d}},setConfigValue:function(a,b,c){N(a,b,c)},getConfigValue:function(a,
b){return N(a,b)},setConfigValueWithId:function(a,b,c){W(a,b,c)},getConfigValueWithId:function(a,b){return W(a,b)},getKeyInfo:function(a){var b=this.getWidgetIdByKey(a);if(null!==b)return{type:"widget",id:b};a=this.getGroupIdByKey(a);return null!==a?{type:"group",id:a}:{type:"unknow",id:null}},getWidgetIdByKey:function(a){var b=f.template.getSearchRange(a,f.template.widgetIdentification,"]");if(-1===b.firstPos)a=null;else{var c=a.slice(b.firstPos,b.lastPos);a=a.slice(b.firstPos+c.indexOf("[")+1,b.lastPos-
1)}return a},getGroupIdByKey:function(a){var b=f.template.getSearchRange(a,f.template.groupIdentification,"]");if(-1===b.firstPos)a=null;else{var c=a.slice(b.firstPos,b.lastPos);a=a.slice(b.firstPos+c.indexOf("[")+1,b.lastPos-1)}return a},getConfigedWidgetsByTemplateConfig:function(a){var b=[],c=f.template.widgetIdentification+"_config",d;n.forEach(a.configurationSettings,function(e){n.forEach(e.fields,function(g){g.fieldName&&(d=f.template.getSearchRange(g.fieldName,c,"]"),0<=d.firstPos&&(g=f.template.getWidgetIdByKey(g.fieldName),
-1===b.indexOf(g)&&b.push(g)))},this)},this);return b},mergeTemplateAppConfigToAppConfig:function(a,b,c){function d(k){var l=[];n.forEach(k,function(m){m&&l.push(m)},this);return l}var e=a.widgetOnScreen,g=a.portalUrl;b.values.webmap&&(a.map.itemId=b.values.webmap);c&&(a.map.portalUrl=g,b.values.app_title||(b.values.app_title=c.title),b.values.app_subtitle||(b.values.app_subtitle=c.snippet));for(var h in b.values)"webmap"!==h&&f.template.setConfigValueWithId(a,h,b.values[h]);a.widgetPool.widgets=
d(a.widgetPool.widgets);e.widgets=d(e.widgets);if(a.widgetPool.groups)for(b=0;b<a.widgetPool.groups.length;b++)a.widgetPool.groups[b].widgets=d(a.widgetPool.groups[b].widgets);if(e.groups)for(b=0;b<e.groups.length;b++)e.groups[b].widgets=d(e.groups[b].widgets);return a}};f.deleteMapOptions=function(a){a&&(delete a.extent,delete a.lods,delete a.center,delete a.scale,delete a.zoom,delete a.maxScale,delete a.maxZoom,delete a.minScale,delete a.minZoom)};f.sanitizeHTML=function(a){return a?html_sanitize(a,
function(b){return b},function(b){return b}):a};f.stripHTML=function(a){return a?-1<a.indexOf("\x3c")&&-1<a.indexOf("\x3e")?a.replace(/<(?:.|\s)*?>/g,""):a:a};f.encodeHTML=function(a){return String(a).replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26#39;")};f.removeSuffixSlashes=function(a){return a.replace(/\/*$/g,"")};f.getBestDisplayAttributes=function(a,b){var c={},d=null,e;for(e in a)d=f.getBestDisplayValue(e,a,b),c[e]=d;return c};
f.getBestDisplayValue=function(a,b,c){var d="",e=null;p.isArrayLike(c)?e=f.getFieldInfoByFieldName(c,a):"object"===typeof c&&c.name===a&&(e=c);e&&(d=b[a],"esriFieldTypeDate"===e.type?d&&(a=new Date(parseInt(d,10)),d=f._tryLocaleDate(a)):"number"===typeof d&&(e.domain&&"codedValue"===e.domain.type?n.some(e.domain.codedValues,function(g){if(g.code===d)return d=g.name,!0}):d=f._tryLocaleNumber(d)));if(null===d||void 0===d)d="";return d};f._getCodedValues=function(a){var b=null;(a=a.domain)&&"codedValue"===
a.type&&a.codedValues&&0<a.codedValues.length&&(b=a.codedValues,b=n.map(b,p.hitch(this,function(c){return{value:c.code,label:c.name}})));return b};f._getSubTypes=function(a){var b=null;a.subtypeField&&a.subtypes&&0<a.subtypes.length&&(b=n.map(a.subtypes,p.hitch(this,function(c){return{value:c.id,label:c.name}})));return b};f._getRenderTypes=function(a){var b=null;a.typeIdField&&a.types&&0<a.types.length&&(b=n.map(a.types,p.hitch(this,function(c){return{value:c.id,label:c.name}})));return b};f._getCodedValueOrSubtypes=
function(a,b,c){var d=f.getFieldInfoByFieldName(a.fields,b),e;return d?e=void 0!==c&&null!==c?f._getCodedValueBySubTypeId(a,b,c,d):f._getAllCodedValue(a,d):e};f._getDisplayValueForCodedValueOrSubtype=function(a,b,c,d){var e={isCodedValueOrSubtype:!1,displayValue:c+""};(a=f._getCodedValueOrSubtypes(a,b,d))&&0<a.length&&n.some(a,p.hitch(this,function(g){return g.value===c?(e={isCodedValueOrSubtype:!0,displayValue:g.label},!0):!1}));return e};f._deleteSubtypePropertiesTemp=function(a){delete a.subtypeField;
delete a.subtypes};f.getDisplayValueForCodedValueOrSubtype=function(a,b,c){f._deleteSubtypePropertiesTemp(a);var d=c[b],e,g=a.typeIdField;c.hasOwnProperty(g)&&(e=c[g]);(g=a.subtypeField)&&a.subtypes&&0<a.subtypes.length&&c.hasOwnProperty(g)&&(e=c[g]);d=f._getDisplayValueForCodedValueOrSubtype(a,b,d,e);a.typeIdField===b&&(d.displayValue=f._updateCodedValueListFromRender(a,[{value:c[b],label:d.displayValue}])[0].label);return d};f._getDisplayValueFromCodedValues=function(a,b){var c={isCodedValueOrSubtype:!1,
displayValue:a+""};b&&0<b.length&&n.some(b,p.hitch(this,function(d){return d.value===a?(c={isCodedValueOrSubtype:!0,displayValue:d.label},!0):!1}));c.value=a;return c};f.getDisplayValueForCodedValueOrSubtypeBatch=function(a,b,c){f._deleteSubtypePropertiesTemp(a);var d={},e=a.typeIdField,g=a.subtypeField,h=f.getFieldInfoByFieldName(a.fields,b);g&&a.subtypes&&0<a.subtypes.length?(d.subType=f._getSubTypes(a),e=g,d.all=f._getAllCodedValueNew(a,h)):(d.all=f._getAllCodedValue(a,h),d.subType=f._getRenderTypes(a));
if(d.subType&&0<d.subType.length){g=d.subType;for(var k in g){var l=g[k].value,m=f._getCodedValueBySubTypeId(a,b,l,h);d[l]=a.typeIdField===b?f._updateCodedValueListFromRender(a,m):m}}a.typeIdField===b&&(d.subType=f._updateCodedValueListFromRender(a,d.subType),d.all=f._updateCodedValueListFromRender(a,d.all));l=[];k=[];for(var q in c)l=c[q],g=l[b],e===b?l=d.subType:l.hasOwnProperty(e)?(l=l[e],l=d[l],l||(l=f._getCodedValues(h),a.typeIdField===b&&(l=f._updateCodedValueListFromRender(a,l)))):l=d.all,
g=f._getDisplayValueFromCodedValues(g,l),k.push(g);return k};f._getUniquCodedValue=function(a,b,c){a[b]?c!==a[b]&&(a[b]=a[b]+", "+c):a[b]=c;return a};f._getAllCodedValue=function(a,b){var c=b.name,d={},e=null,g=!0;if(a.typeIdField&&a.types&&0<a.types.length)n.map(a.types,p.hitch(this,function(m){m.domains&&m.domains[c]&&(m=m.domains[c],"inherited"===m.type?g&&(g=!1,m=f._getCodedValues(b),n.map(m,p.hitch(this,function(q){d=f._getUniquCodedValue(d,q.value,q.label)}))):m.codedValues&&0<m.codedValues.length&&
n.map(m.codedValues,p.hitch(this,function(q){d=f._getUniquCodedValue(d,q.code,q.name)})))})),e||(e=f._getCodedValues(b));else return this._getCodedValues(b);a=[];var h=f.isNumberField(b.type),k;for(k in d){var l=h?parseFloat(k):k;a.push({value:l,label:d[k]})}0<a.length&&(e=a);return e};f._getAllCodedValueNew=function(a,b){var c=b.name,d={},e=null,g=!0;if(a.subtypeField&&a.subtypes&&0<a.subtypes.length)n.map(a.subtypes,p.hitch(this,function(m){m.domains&&m.domains[c]&&(m=m.domains[c],"inherited"===
m.type?g&&(g=!1,m=f._getCodedValues(b),n.map(m,p.hitch(this,function(q){d=f._getUniquCodedValue(d,q.value,q.label)}))):m.codedValues&&0<m.codedValues.length&&n.map(m.codedValues,p.hitch(this,function(q){d=f._getUniquCodedValue(d,q.code,q.name)})))})),e||(e=f._getCodedValues(b));else return this._getCodedValues(b);a=[];var h=f.isNumberField(b.type),k;for(k in d){var l=h?parseFloat(k):k;a.push({value:l,label:d[k]})}0<a.length&&(e=a);return e};f._getCodedValueBySubTypeId=function(a,b,c,d){var e="typeIdField",
g="types";a.subtypeField&&a.subtypes&&0<a.subtypes.length&&(e="subtypeField",g="subtypes");var h=null;d=d?d:f.getFieldInfoByFieldName(a.fields,b);if(!d)return h;a[e]&&a[g]&&0<a[g].length?(n.map(a[g],p.hitch(this,function(k){if(k.id===c){if(b===a[e])return h=[{value:k.id,label:k.name}],!0;k.domains&&k.domains[b]?(k=k.domains[b],"inherited"===k.type?h=f._getCodedValues(d):k.codedValues&&0<k.codedValues.length&&(h=n.map(k.codedValues,p.hitch(this,function(l){return{value:l.code,label:l.name}})))):k.domains&&
(h=f._getCodedValues(d))}})),h||(h=f._getCodedValues(d))):h=f._getCodedValues(d);return h};f.getCodedValueListForCodedValueOrSubTypes=function(a,b,c){f._deleteSubtypePropertiesTemp(a);var d=null;d=f.getFieldInfoByFieldName(a.fields,b);if(c){var e=c[a.typeIdField];var g=c[a.subtypeField]}if(a.subtypeField&&a.subtypes&&0<a.subtypes.length)return b===a.subtypeField?(d=f._getSubTypes(a),void 0!==g&&(c=f._getDisplayValueFromCodedValues(g,d),d=[{value:c.value,label:c.displayValue}])):d=void 0===g?f._getAllCodedValueNew(a,
d):f._getCodedValueBySubTypeId(a,b,g,d),b===a.typeIdField&&(d=f._updateCodedValueListFromRender(a,d)),d;a.subtypeField="";a.subtypes=[];a.typeIdField&&a.typeIdField.toUpperCase()===b.toUpperCase()?(d=f._getRenderTypes(a),c&&void 0!==e&&null!==e&&(c=f._getDisplayValueFromCodedValues(e,d),d=[{value:c.value,label:c.displayValue}])):d=c&&void 0!==e&&null!==e?f._getCodedValueBySubTypeId(a,b,e,d):f._getAllCodedValue(a,d);b===a.typeIdField&&(d=f._updateCodedValueListFromRender(a,d));return d};f._verifyIfFieldIsSubtypeField=
function(a,b){var c={isSubtypeField:!1,subtypeField:""};if(a.subtypeField)return c={isSubtypeField:a.subtypeField===b.name,subtypeField:a.subtypeField};["esriFieldTypeSmallInteger","esriFieldTypeInteger"].indexOf(b.type)&&a.typeIdField===b.name&&a.types&&0<a.types.length&&(void 0===a.types[0].domains[b.name]?c={isSubtypeField:!0,subtypeField:b.name}:c.isSubtypeField=!1);return!1};f.getUniqueRendererByLayerDefinition=function(a){var b=null;a.drawingInfo&&a.drawingInfo.renderer&&"uniqueValue"===a.drawingInfo.renderer.type&&
(b=a.drawingInfo.renderer);return b};f.isUniqueReneredByLayerObject=function(a,b){return"uniqueValue"===a.type&&b&&b.field1===a.field1};f._getRenderValueLabelsForUnique=function(a){var b=null,c=null,d=f.getUniqueRendererByLayerDefinition(a);d?(b={},c=d.uniqueValueInfos):a.renderer&&(d=a.toJson().layerDefinition,d=f.getUniqueRendererByLayerDefinition(d),a=a.renderer.toJson(),f.isUniqueReneredByLayerObject(a,d)?(b={},c=a.uniqueValueInfos):d&&(b={},c=d.uniqueValueInfos));if(c)for(a=0;a<c.length;a++)d=
c[a],b[d.value]=d.label;return b};f._updateCodedValueListFromRender=function(a,b){if((a=f._getRenderValueLabelsForUnique(a))&&b)for(var c=0;c<b.length;c++){var d=b[c];a[d.value]&&(d.label=a[d.value])}return b};f.getDefaultPortalFieldInfo=function(a){var b=a.name;b={fieldName:b,label:a.alias||b,tooltip:"",visible:!1,format:null,stringFieldOption:"textbox"};switch(a.type){case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":b.format={places:0,digitSeparator:!0};break;case "esriFieldTypeSingle":case "esriFieldTypeDouble":b.format=
{places:2,digitSeparator:!0};break;case "esriFieldTypeDate":b.format={dateFormat:"longMonthDayYear"}}return b};f.getDefaultPopupInfo=function(a,b,c){var d=null;a&&a.fields&&(d={title:b,fieldInfos:[],description:null,showAttachments:!0,mediaInfos:[]},n.forEach(a.fields,function(e){var g=!1;c?n.some(c,p.hitch(this,function(h){return h&&e.name.toLowerCase()===h.toLowerCase()}))&&(g=!0):g=!0;g&&(g=this.getDefaultPortalFieldInfo(e),g.visible=!0,g.isEditable=e.editable,d.fieldInfos.push(g))},this));return d};
f._tryLocaleNumber=function(a){var b=f.localizeNumber(a);if(null===b||void 0===b)b=a;return b};f._tryLocaleDate=function(a){var b=f.localizeDate(a);b||(b=a.toLocaleDateString());return b};f.getFieldInfoByFieldName=function(a,b){var c=null;a&&0<a.length&&n.some(a,p.hitch(this,function(d){return d.name===b?(c=d,!0):!1}));return c};f.getDateFieldFormatByFieldName=function(a,b){if(a&&0<a.length)for(var c=0;c<a.length;c++){var d=a[c];if(d.fieldName===b){if(d.format&&d.format.dateFormat)return d.format.dateFormat;
break}}return""};f.completePopupFieldFromLayerField=function(a,b){if(!b)return a;for(var c in a){var d=a[c].name,e=!1,g;for(g in b)if(b[g].fieldName===d){e=!0;break}e||(d=f.getPopupFieldFromLayerField(a[c]),b.push(d))}return b};f.getPopupFieldFromLayerField=function(a){return{fieldName:a.name,isEditable:a.editable,label:a.alias,visible:a.visible?a.visible:!1,stringFieldOption:"esriFieldTypeString"===a.type?"textbox":null,tooltips:"",domain:a.domain?a.domain:null}};f.containsNonLatinCharacter=function(a){for(var b=
0;b<a.length;b++)if(255<a.charCodeAt(b))return!0;return!1};f.has=function(a){var b=C(a);if(b)return b;if("ie"===a.toLowerCase()){a=0;var c=/MSIE (\d+\.\d+);/.test(navigator.userAgent),d=!!navigator.userAgent.match(/Trident\/7.0/),e=navigator.userAgent.indexOf("rv:11.0");c&&(a=Number(RegExp.$1));-1!==navigator.appVersion.indexOf("MSIE 10")&&(a=10);d&&-1!==e&&(a=11);return 11===a&&11||b}if("edge"===a.toLowerCase())return navigator.userAgent.split("Edge/")[1]||b};f.detectUserAgent=function(){return window.userAgent};
f.isMobileUa=function(){return window.isMobileUa};f.inMobileSize=function(){var a=r.getMarginBox(document.body);if(a.w<=window.jimuConfig.breakPoints[0]||a.h<=window.jimuConfig.breakPoints[0])return r.addClass(window.jimuConfig.layoutId,"jimu-ismobile"),!0;r.removeClass(window.jimuConfig.layoutId,"jimu-ismobile");return!1};f.getObjectIdField=function(a){if(a.objectIdField)return a.objectIdField;a=a.fields;for(var b=0;b<a.length;b++){var c=a[b];if("esriFieldTypeOID"===c.type)return c.name}return null};
f.isNeedHttpsButNot=function(){var a=navigator.geolocation,b=window.hasOwnProperty("isSecureContext");return(b&&window.isSecureContext||!b&&"https:"===window.location.protocol)&&a?!1:!0};f.toFeatureSet=function(a){var b=new T;"[object Object]"===Object.prototype.toString.call(a)&&(a=[a]);b.features=a;if(0<a.length){var c;n.some(a,function(e){if(e.geometry)return c=e,!0});if(c){a=c.getLayer();var d={};a&&(b.displayFieldName=a.displayField,n.forEach(a.fields,p.hitch(this,function(e){var g=e.name;d[g]=
e.alias||g})),b.fieldAliases=d);b.geometryType=c.geometry.type;b.spatialReference=c.geometry.spatialReference}}return b};f.showValidationErrorTipForFormDijit=function(a){try{!a.validate()&&a.domNode&&a.focusNode&&(a.focusNode.focus(),setTimeout(p.hitch(this,function(){a.focusNode.blur()}),100))}catch(b){console.error(b)}};f.getFeatureLayerDefinition=function(a){var b=null,c=a.graphics;a.graphics=[];var d=a.toJson();a.graphics=c;d&&(b=d.layerDefinition);return b};f.simulateClickEvent=function(a){if(C("safari")){var b=
document.createEvent("MouseEvents");b.initEvent("click",!0,!0);a.dispatchEvent(b)}else a.click()};f.getFeatureSetByLayerAndFeatures=function(a,b){var c=new T;c.fields=p.clone(a.fields);c.features=b;c.geometryType=a.geometryType;c.fieldAliases={};n.forEach(c.fields,p.hitch(this,function(d){var e=d.name;c.fieldAliases[e]=d.alias||e}));return c};f.featureAction=function(){return{zoomTo:function(a,b,c){c||(c={});if(a&&b&&0<b.length){var d=n.every(b,function(e){return e&&e.spatialReference&&e.type});if(n.every(b,
function(e){return e&&e.geometry&&e.geometry.spatialReference&&e.geometry.type})||d)d&&(b=n.map(b,function(e){return{geometry:e}})),f.zoomToFeatureSet(a,{features:b},c.extentFactor)}},flash:function(a,b){function c(l,m){n.forEach(e,function(q,t){q.setSymbol(m?l:g[t]||h)})}function d(l){return function(){setTimeout(function(){c(k,!0);e[0]&&b&&b.redraw();setTimeout(function(){c(null,!1);e[0]&&b&&b.redraw();l()},200)},200)}}if(n.every(a||[],function(l){return l&&l.geometry})){var e=a;a=e[0];var g=n.map(e,
function(l){return l.symbol}),h=a.symbol||p.getObject("renderer.symbol",!1,b),k=null;b&&"esriGeometryPoint"===b.geometryType?k=new la(require.toUrl("jimu")+"/images/flash.gif",20,20):(k=p.clone(h))&&(k.outline?k.outline.setColor("#ffc500"):k.setColor("#ffc500"));a&&h&&k&&b&&("esriGeometryPoint"===b.geometryType?(c(k,!0),b.redraw(),setTimeout(function(){c(null,!1);b.redraw()},2E3)):d(d(d(function(){})))())}},panTo:function(a,b){n.every(b||[],function(c){return c&&c.geometry})&&(0<b.length?b=oa.graphicsExtent(b).getCenter():
(b=b[0].geometry,b="polyline"===b.type||"polygon"===b.type?b.getExtent().getCenter():"extent"===b.type?b.getCenter():"multipoint"===b.type?1<b.points.length?b.getExtent().getCenter():b.getPoint(0):b),a.centerAt(b))},showPopup:function(a,b){n.every(b||[],function(c){return c&&c.geometry})&&(a=a.infoWindow,a.setFeatures(b),b=b[0],"point"===b.geometry.type?a.show(b.geometry,{closetFirst:!0}):a.show(b.geometry.getExtent().getCenter(),{closetFirst:!0}))}}}();f.isInConfigOrPreviewWindow=function(){var a=
!1;try{a=!window.isBuilder&&window.parent&&window.parent!==window&&window.parent.isBuilder}catch(b){a=!1}return!!a};f.getAppHref=function(){var a="";return a=f.isInConfigOrPreviewWindow()?window.parent.location.href:window.location.href};f.getAppIdFromUrl=function(){var a=!0,b=f.getAppHref();if(-1!==b.indexOf("id\x3d")||-1!==b.indexOf("appid\x3d")||-1!==b.indexOf("apps"))a=!1;if(!0===a)return b;a=this.urlToObject(window.location.href);if(a.query&&(a.query.id||a.query.appid))return a.query.id||a.query.appid;
if(window.appInfo){if(window.appInfo.id)return window.appInfo.id;if(window.appInfo.appPath){if(a=window.appInfo.appPath.split("/"),a.length&&2<a.length)return a[a.length-2]}else console.error("CAN NOT getAppIdFromUrl")}};f.getEditorContentHeight=function(a,b,c){var d=new v;this._content=a;this._dom=b;this._domParam=c;var e=setTimeout(p.hitch(this,function(){clearTimeout(e);e=null;var g=0,h=this._domParam.contentWidth;try{var k=document.createElement("div");k.setAttribute("id","fakeContent");r.setStyle(k,
"background-size","contain");k.innerHTML=this._content;this._dom.appendChild(k);if(k){var l=y("img",k);l&&l.length&&l.style({maxWidth:h-20+"px"});r.setStyle(k,"position","absolute");r.setStyle(k,"width",h+"px");r.setStyle(k,"left","-99999px");r.setStyle(k,"top","-99999px");r.setStyle(k,"visibility","hidden");var m=r.getContentBox(k);m.h&&(g=m.h,g+=this._domParam.contentMarginTop+this._domParam.footerHeight+8)}}catch(q){console.error("can't getEditorContentHeight"+q),g=200}d.resolve(g)}),1500);return d};
f.getBase64Data=function(a){var b=new v;if(a&&a.startWith("data:image"))b.resolve(a);else try{A({url:a,handleAs:"arraybuffer"}).then(function(c){var d=new FileReader;d.onloadend=function(){b.resolve(d.result)};d.onerror=function(){b.resolve(null)};d.readAsDataURL(new Blob([c],{type:"image/png"}))},function(){b.resolve(null)})}catch(c){console.warn(c),b.resolve(null)}return b};f.getEditorTextColor=function(a,b){return{name:"dijit.editor.plugins.EditorTextColor",custom:{recordUID:f.getColorRecordName(a),
forceAttr:b}}};f.getEditorBackgroundColor=function(a){return{name:"dijit.editor.plugins.EditorBackgroundColor",custom:{recordUID:f.getColorRecordName(a)}}};f.getColorRecordName=function(a){return"wab_cr_"+(a||"")};f.b64toBlob=function(a,b,c){b=b||"";c=c||512;a=window.atob(a.replace(/^data:image\/(png|jpg|jpeg|gif);base64,/,""));for(var d=[],e=0;e<a.length;e+=c){for(var g=a.slice(e,e+c),h=Array(g.length),k=0;k<g.length;k++)h[k]=g.charCodeAt(k);g=new Uint8Array(h);d.push(g)}return new Blob(d,{type:b})};
f.subtractionArray=function(a,b){for(var c=a.length-1;0<=c;c--)for(var d=a[c],e=b.length-1;0<=e;e--)if(d===b[e]){a.splice(c,1);b.splice(e,1);break}return a};f.resourcesUrlToBlob=function(a){return A({url:a,handleAs:"blob"})};f.processItemResourceOfAppConfig=function(a,b){function c(l){var m=l.obj,q=l.key,t={obj:m,key:q};"number"===typeof l.i?(t.i=l.i,t.value=m[q][l.i]):t.value=m[q];return t}function d(l){for(var m in l)if("object"===typeof l[m])if(Array.isArray(l[m]))for(var q=l,t=m,u=0;u<q[t].length;u++)"string"===
typeof q[t][u]?e(q,t,u):"object"===typeof q[t][u]&&d(q[t][u]);else d(l[m]);else"string"===typeof l[m]&&e(l,m)}function e(l,m,q){"number"===typeof q?b.test(l[m][q])&&(k=b.func(c({obj:l,key:m,i:q})),"function"===typeof k.then?h.push(k):g.push(k)):b.test(l[m])&&(k=b.func(c({obj:l,key:m})),"function"===typeof k.then?h.push(k):g.push(k))}var g=[],h=[],k;d(a);return 0<h.length?aa(h).then(function(l){0<g.length&&(l=l.concat(g));return{appConfig:a,result:l}}):{appConfig:a,result:g}};f.isEsriDomain=function(a){return/^https?:\/\/(?:[\w\-_]+\.)+(?:esri|arcgis)\.com/.test(a)};
f.uniqueArray=function(a){for(var b=[],c=0;c<a.length;c++)-1===b.indexOf(a[c])&&b.push(a[c]);return b};f.isNotEmptyObject=function(a,b){return b?f.isObject(a)&&0<Object.keys(a).length&&Array.isArray(a):f.isObject(a)&&0<Object.keys(a).length};f.getMinOfArray=function(a){return Number(Math.min.apply(Math,a))};f.getDataSchemaFromLayerDefinition=function(a){var b=a.fields.filter(function(c){return"esriFieldTypeOID"===c.type});b=0<b.length?b[0]:null;return{geometryType:a.geometryType,fields:a.fields,displayField:a.displayField,
objectIdField:b,typeIdField:a.typeIdField}};f.isValidPointGeometry=function(a){return a&&"point"===a.type&&f.isTrueOrZero(a.x)&&f.isTrueOrZero(a.y)};f.isVaildPointGeometry=f.isValidPointGeometry;f.isNumberOrNumberString=function(a){return/^-?[1-9]\d*$/.test(a)||/^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$/.test(a)};f.convertNumberToPercentage=function(a,b,c){if(!f.isNumberOrNumberString(a))return a;"undefined"===typeof c&&(c=!0);"undefined"===typeof b&&(b=2);b={format:{places:b,digitSeparator:c}};
c=w.locale;c="ar"===c||"tr"===c;a=Number(a);var d=!1;0>a&&(d=!0,a=Math.abs(a));a=f.localizeNumberByFieldInfo(100*a,b);a=c?"%"+a:a+"%";d&&(a=window.isRTL?a+"-":"-"+a);return a};f.getClientFeaturesFromMap=function(a,b,c,d){var e=[],g=!1;if(b){c?0<b.getSelectedFeatures().length?(e=b.getSelectedFeatures(),g=!0):e=b.graphics:e=b.graphics;d&&(e=f.filterFeaturesByExtent(a.extent,e));if(e&&0<e.length){var h=f.getObjectIdField(b);h&&(a=e[0])&&a.attributes&&a.attributes.hasOwnProperty(h)&&e.sort(function(k,
l){k.attributes||(k.attributes={});l.attributes||(l.attributes={});k=k.attributes[h];l=l.attributes[h];return k<l?-1:k>l?1:0})}e.isSelectedFeatures=g;return e}};f.filterFeaturesByExtent=function(a,b){var c=a.normalize();return b=n.filter(b,p.hitch(this,function(d){try{if(d.geometry){var e="point"===d.geometry.type||"multipoint"===d.geometry;return n.some(c,p.hitch(this,function(g){return e?g.contains(d.geometry):fa.intersects(g,d.geometry)}))}}catch(g){console.error(g)}return!1}))};f.upperCaseString=
function(a){return a&&"string"===typeof a?a.toUpperCase():a};f.lowerCaseString=function(a){return a&&"string"===typeof a?a.toLowerCase():a};f.getSubstituteString=function(a,b){return z.substitute({value:a},b)};f.getUUID=function(){function a(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return a()+a()+"_"+a()+"_"+a()+"_"+a()+"_"+a()+a()+a()};f.getStyleColorInTheme=function(a){var b=new v;if(window&&window.isBuilder){var c="./stemapp/themes/";var d=window.appConfig}else c="./themes/",
d=window.getAppConfig();if(d&&d.theme.customStyles&&d.theme.customStyles.mainBackgroundColor)return b.resolve(d.theme.customStyles.mainBackgroundColor),b.promise;var e=d.theme.name,g=d.theme.styles[0];a&&(g=a);A({url:c+e+"/manifest.json",handleAs:"json"}).then(p.hitch(this,function(h){if(h&&h.styles){h=h.styles;for(var k=0;k<h.length;k++){var l=h[k];l.name===g&&b.resolve(l.styleColor)}}}),p.hitch(this,function(h){console.error(h);b.reject(null)}));return b.promise};f.themesHeaderLogoA11y=function(a,
b,c){a.logoLink?(r.setAttr(c.link,"href",a.logoLink),r.setAttr(c.link,"tabIndex",b),r.setAttr(c.link,"target","_blank"),r.setAttr(c.logo,"alt",a.logoLink),r.setStyle(c.icon,"cursor","pointer")):(r.setAttr(c.link,"href","javascript:void(0)"),r.setAttr(c.link,"tabIndex",-1),r.setAttr(c.link,"target",""),r.removeAttr(c.logo,"alt"),r.setAttr(c.logo,"role","presentation"),r.setStyle(c.icon,"cursor","default"));a.logoAlt&&r.setAttr(c.logo,"alt",a.logoAlt)};return f});