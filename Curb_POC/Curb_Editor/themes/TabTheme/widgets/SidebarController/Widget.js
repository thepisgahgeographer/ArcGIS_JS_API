// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"themes/TabTheme/a11y/SidebarController/Widget":function(){define("dojo/_base/lang dojo/on dojo/query dojo/Deferred dojo/_base/html jimu/utils dojo/keys dijit/a11yclick dijit/Tooltip".split(" "),function(q,k,n,g,r,m,e,p,t){return{a11y_init:function(){r.setAttr(this.domNode,"aria-label",this.nls._widgetLabel);this.a11y_useDoResizeNode();this.own(k(this.doResizeNode,p,q.hitch(this,function(){this._doResize()})))},a11y_nodeSelect:function(d,f){this.own(k(d,p,f))},a11y_nodeEscEvent:function(d){this.own(k(d,
"keydown",q.hitch(this,function(f){f.keyCode===e.ESCAPE&&(f.stopPropagation(),f.preventDefault(),this.doResizeNode.focus())})))},a11y_getIconNodeById:function(d){var f=!0===("block"===r.getStyle(this.maxStateNode,"display"))?this.maxStateNode:this.minStateNode;d=n('.title-node[settingId\x3d"'+d+'"]',f);if(0!==d.length)return d[0]},a11y_addTooltip:function(d,f){m.addTooltipByDomNode(t,d,f)},a11y_useDoResizeNode:function(){r.setAttr(this.doResizeNode,"tabindex",this.tabIndex)},a11y_ignoreDoResizeNode:function(){r.removeAttr(this.doResizeNode,
"tabindex")},a11y_resizeNodeAriaLabel:function(d){var f="e"===d?window.jimuNls.common.expand:window.jimuNls.common.collapse;f=f.replace("${value}",this.nls._widgetLabel);r.setAttr(this.doResizeNode,"aria-label",f);r.setAttr(this.doResizeNode,"aria-expanded","e"===d?"false":"true")},a11y_focusToItemInMoreTab:function(d){d&&(d=n(".other-group[data-widget-id\x3d'"+d+"']",this.otherGroupNode))&&d[0]&&d[0].focus&&d[0].focus()},a11y_switchNodeToClose:function(d){n(".title-node",this.domNode).removeClass("jimu-state-selected");
var f=this.appConfig.getConfigElementById(d);if(f)return!1===f.inPanel?(this.widgetManager.closeWidget(d),d=new g,d.resolve(),d):this.panelManager.closePanel(d+"_panel");d=new g;d.resolve();return d},a11y_moreTabCloseAriaLabel:function(d){r.setAttr(d,"title",window.jimuNls.common.close)},a11y_moreTabCloseEvent:function(d){this.own(k(d,"click",q.hitch(this,function(){this._hideOtherGroupPane();-1!==this.lastSelectedIndex&&this.selectTab(this.lastSelectedIndex)})));this.own(k(d,"keydown",q.hitch(this,
function(f){if(f.shiftKey&&f.keyCode===e.TAB)f.stopPropagation(),f.preventDefault(),this.a11y_moreTab_last&&this.a11y_moreTab_last.focus&&this.a11y_moreTab_last.focus();else if(f.keyCode===e.ENTER||f.keyCode===e.SPACE||f.keyCode===e.ESCAPE)f.stopPropagation(),this._hideOtherGroupPane(),n('.title-node[title\x3d"more"]',this.titleListNode)[0].focus()})))},a11y_moreTabEscapeEvent:function(d){this.own(k(d,"keydown",q.hitch(this,function(f){f.keyCode===e.ESCAPE&&(f.stopPropagation(),f.preventDefault(),
this.a11y_moreTab_close.focus())})))},a11y_cleanTabIndex_otherGroupPane:function(){this.a11y_moreTab_close&&r.removeAttr(this.a11y_moreTab_close,"tabindex");for(var d=n(".other-group",this.otherGroupNode),f=0,y=d.length;f<y;f++)r.removeAttr(d[f],"tabindex")},a11y_moreTabLastNodeTabEvent:function(){this.own(k(this.a11y_moreTab_last,"keydown",q.hitch(this,function(d){d.shiftKey||d.keyCode!==e.TAB||(d.stopPropagation(),d.preventDefault(),this.a11y_moreTab_close.focus())})))},a11y_moreTabInonEscEvent:function(d){this.own(k(d,
"keydown",q.hitch(this,function(f){f.keyCode===e.ESCAPE&&(f.stopPropagation(),f.preventDefault(),this.a11y_moreTab_close.focus())})))},a11y_getEventOps:function(d){var f={};"keyup"===d._origType&&(f.a11y_byKeyEvent=!0);return f}}})},"dojo/NodeList-fx":function(){define(["./query","./_base/lang","./aspect","./_base/fx","./fx"],function(q,k,n,g,r){q=q.NodeList;k.extend(q,{_anim:function(m,e,p){p=p||{};var t=r.combine(this.map(function(d){d={node:d};k.mixin(d,p);return m[e](d)}));return p.auto?t.play()&&
this:t},wipeIn:function(m){return this._anim(r,"wipeIn",m)},wipeOut:function(m){return this._anim(r,"wipeOut",m)},slideTo:function(m){return this._anim(r,"slideTo",m)},fadeIn:function(m){return this._anim(g,"fadeIn",m)},fadeOut:function(m){return this._anim(g,"fadeOut",m)},animateProperty:function(m){return this._anim(g,"animateProperty",m)},anim:function(m,e,p,t,d){var f=r.combine(this.map(function(y){return g.animateProperty({node:y,properties:m,duration:e||350,easing:p})}));t&&n.after(f,"onEnd",
t,!0);return f.play(d||0)}});return q})},"themes/TabTheme/widgets/SidebarController/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:themes/TabTheme/widgets/SidebarController/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"min-pane" data-dojo-attach-point\x3d"minStateNode"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"max-pane" data-dojo-attach-point\x3d"maxStateNode"\x3e\r\n    \x3cdiv class\x3d"title-list" data-dojo-attach-point\x3d"titleListNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"content-list" data-dojo-attach-point\x3d"contentListNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"other-group-pane" data-dojo-attach-point\x3d"otherGroupNode"\x3e\x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"tab-resizer jimu-widget-bg" data-dojo-attach-point\x3d"resizerNode"\x3e\r\n    \x3cdiv role\x3d"button" class\x3d"action-node jimu-float-trailing" data-dojo-attach-point\x3d"doResizeNode"\x3e\r\n      \x3cdiv class\x3d"left-arrow"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:themes/TabTheme/widgets/SidebarController/css/style.css":'.jimu-widget-sidebar-controller{overflow: hidden; outline-offset: -3px !important;}.jimu-widget-sidebar-controller .title-list{position: absolute; left: 0; right: 0; top: 0; height: 44px; border-top: 1px solid #3a3a3a; border-top: 1px solid rgba(255,255,255,0.08);}.jimu-widget-sidebar-controller .title-node{height: 44px; cursor: pointer; margin-top: -2px;}.jimu-widget-sidebar-controller .max-pane{position: absolute; top: 0; left: 0; right: 0; bottom: 26px; border: 1px solid #111111;}.jimu-widget-sidebar-controller .max-pane .title-node{}.jimu-widget-sidebar-controller .min-pane .title-node:nth-child(1){margin-top: -2px; border-top: 1px solid rgba(255, 255, 255, 0.08);}.jimu-widget-sidebar-controller .max-pane .title-node:nth-child(1){margin-left: 0;}.jimu-widget-sidebar-controller .title-node img{margin: 11px 29.62962962962963%; width: 40.74074074074074%; height: auto;}.jimu-widget-sidebar-controller .tab-indicator{width: 0px; height: 2px; margin: auto;}.jimu-widget-sidebar-controller .title-node:nth-child(1) .tab-indicator{background-color: #ec7655;}.jimu-widget-sidebar-controller .title-node:nth-child(2) .tab-indicator{background-color: #fac15a;}.jimu-widget-sidebar-controller .title-node:nth-child(3) .tab-indicator{background-color: #a3ca4b;}.jimu-widget-sidebar-controller .title-node:nth-child(4) .tab-indicator{background-color: #5eb4e6;}.jimu-widget-sidebar-controller .title-node:nth-child(5) .tab-indicator{background-color: #b996d5;}.jimu-widget-sidebar-controller .content-list{position: absolute; left: 0; top: 45px; right: 0; bottom: 0;}.jimu-widget-sidebar-controller .content-node{position: absolute; left: 0; right: 0; top: 0; bottom: 0; outline: 1px solid rgba(0,0,0, 0.3); border-top: 1px solid rgba(255,255,255, 0.08);}.jimu-widget-sidebar-controller .content-title-bg{position: absolute; left: 0; right: 0; top: -1px; height: 18px; opacity: 0.2;}.jimu-widget-sidebar-controller .content-title{position: absolute; left: 14px; top: 2px; color: #888; font: 10px Arial;}.jimu-widget-sidebar-controller .content-pane{position: absolute; left: 0; top: 18px; right: 0; bottom: 0; overflow: hidden;}.jimu-widget-sidebar-controller .content-pane .more-group-pane{position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden;}.jimu-widget-sidebar-controller .tab-resizer{left: 0; right: 0; bottom: 0; height: 24px; position: absolute; border: 1px solid #111111; border-top: 1px solid #333333; border-top: 1px solid rgba(255,255,255,0.08);}.jimu-widget-sidebar-controller .tab-resizer .action-node{width: 50px; overflow: hidden; height: 100%; cursor: pointer;}.jimu-widget-sidebar-controller .tab-resizer .action-node div{width: 11px; height: 24px; margin-left: auto; margin-right: auto; background-repeat: no-repeat; background-position: center;}.jimu-widget-sidebar-controller .tab-resizer .left-arrow{background-image: url(images/arrow_left.png);}.jimu-widget-sidebar-controller .tab-resizer .left-arrow:hover{background-image: url(images/arrow_left_hover.png);}.jimu-widget-sidebar-controller .tab-resizer .right-arrow{background-image: url(images/arrow_right.png);}.jimu-widget-sidebar-controller .tab-resizer .right-arrow:hover{background-image: url(images/arrow_right_hover.png);}.jimu-widget-sidebar-controller .min-pane{position: absolute; top: 0; bottom: 26px; left: 0; right: 0; border: 1px solid #111111;}.jimu-widget-sidebar-controller .other-group-pane{border: 1px solid #111111; border-left: none; position: absolute; left: 365px; top: 0; right: 0; bottom: 16px; overflow-y: auto;}.jimu-widget-sidebar-controller .other-group:hover{background-color: #333;}.jimu-widget-sidebar-controller .other-group-pane .jimu-state-active{background-color: #292929;}.jimu-widget-sidebar-controller .other-group-pane-title{width: 100%; height: 18px; position: relative;}.jimu-widget-sidebar-controller .other-group-pane-title .bg{position: absolute; left: 0; right: 0; top: 0; bottom: 0; border-bottom: 1px solid rgba(255,255,255,0.7); opacity: 0.3;}.jimu-widget-sidebar-controller .other-group-pane-title .text{position: absolute; left: 14px; top: 1px; color: white; font: 10px Arial;}.jimu-widget-sidebar-controller .other-group-pane-title .close{position: absolute; right: 5px; top: 3px; height: 11px; width: 35px; cursor: pointer; background: center center no-repeat url(images/close.png);}.jimu-widget-sidebar-controller .other-group{cursor: pointer; width: 100%; height: 45px; overflow: hidden;}.jimu-widget-sidebar-controller .other-group-icon{margin: 11px 24px; width: 22px; height: 22px;}.jimu-widget-sidebar-controller .other-group-title{margin: 15px 0; color: white; font: 12px Arial;}.jimu-widget-sidebar-controller .other-group-choose{margin: 15px 30px;}.jimu-widget-sidebar-controller .wp{border: 1px solid transparent;}.jimu-widget-sidebar-controller .wp-title{overflow: hidden;}.jimu-widget-sidebar-controller .wp-title .title-text{width: 57px; height: 20px; padding: 5px 13px; background-color: white; float: left; border-top-left-radius: 4px; color: #222; font: 12px Arial;}.jimu-widget-sidebar-controller .wp-title .title-angle{width: 21px; height: 20px; background: url(images/tab_triangle.png); float: left;}.jimu-widget-sidebar-controller .wp-pane{background-color: white; overflow: hidden; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-right-radius: 4px; position: relative;}.jimu-widget-sidebar-controller .min-pane .title-node:first-child{border-top: 1px solid #3a3a3a;}.jimu-widget-sidebar-controller .max-pane .title-node:first-child{margin-left: 0;}.jimu-widget-sidebar-controller .title-node:first-child .tab-indicator{background-color: #ec7655;}.jimu-widget-sidebar-controller .title-node:first-child+.title-node .tab-indicator{background-color: #fac15a;}.jimu-widget-sidebar-controller .title-node:first-child+.title-node+.title-node .tab-indicator{background-color: #a3ca4b;}.jimu-widget-sidebar-controller .title-node:first-child+.title-node+.title-node+.title-node .tab-indicator{background-color: #5eb4e6;}.jimu-widget-sidebar-controller .title-node:first-child+.title-node+.title-node+.title-node+.title-node .tab-indicator{background-color: #b996d5;}.jimu-widget-sidebar-controller .content-title-bg{filter: alpha(opacity\x3d12); -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d12)"; filter: progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d12);}.jimu-widget-sidebar-controller .other-group-pane-title .bg{filter: alpha(opacity\x3d30); -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d30)"; filter: progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d30);}.jimu-rtl .jimu-widget-sidebar-controller .other-group-pane-title .text{right: 14px; left: auto;}.jimu-rtl .jimu-widget-sidebar-controller .other-group-pane-title .close{left: 5px; right: auto;}.jimu-widget-sidebar-controller .title-node,.jimu-widget-sidebar-controller .right-arrow,.jimu-widget-sidebar-controller .left-arrow,.jimu-widget-sidebar-controller .other-group-pane .close,.jimu-widget-sidebar-controller .other-group-pane .other-group,.jimu-widget-sidebar-controller .tab-widget-frame .title,.jimu-widget-sidebar-controller .jimu-panel-content{outline-offset: -2px !important;}',
"*now":function(q){q(['dojo/i18n!*preload*themes/TabTheme/widgets/SidebarController/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/topic dojo/aspect dojo/query dojo/on dojo/mouse dojo/fx dojo/dom-geometry jimu/BaseWidget jimu/PoolControllerMixin jimu/utils ../../a11y/SidebarController/Widget dojo/keys dojo/NodeList-manipulate dojo/NodeList-fx".split(" "),function(q,k,n,g,r,m,e,p,t,d,f,y,z,v,A,B){q=q([y,z],{baseClass:"jimu-widget-sidebar-controller jimu-main-background",moveTopOnActive:!1,maxWidth:365,minWidth:55,animTime:200,stateNode:null,currentTab:null,
moreTab:!1,moreTabOpened:!1,currentOtherGroup:null,lastSelectedIndex:-1,constructor:function(){this.tabs=[]},postMixInProperties:function(){this.inherited(arguments);this.nls.more=this.nls.more||"more";this.nls.otherPanels=this.nls.otherPanels||"Other Panels"},startup:function(){this.inherited(arguments);var a=this.createTabs();""===a?this.widgetManager.minimizeWidget(this):(this.widgetManager.maximizeWidget(this),this.setOpenedIds([a]));this.a11y_init()},getOpenedIds:function(){this.inherited(arguments);
var a=[];this.currentTab&&this.currentTab.config&&this.currentTab.config.id?a.push(this.currentTab.config.id):this.currentOtherGroup&&this.currentOtherGroup.id&&a.push(this.currentOtherGroup.id);return a},setOpenedIds:function(a){this._openLastTab(a)},onMinimize:function(){this._resizeToMin();g.removeClass(this.domNode.parentNode,"sideBarDisplay");g.addClass(this.domNode.parentNode,"sideBarHidden")},onMaximize:function(){this._resizeToMax();g.removeClass(this.domNode.parentNode,"sideBarHidden");g.addClass(this.domNode.parentNode,
"sideBarDisplay")},getWidth:function(){var a=g.getContentBox(window.jimuConfig.layoutId);return.8*a.w>this.maxWidth?this.maxWidth:.8*a.w},resize:function(){"minimized"===this.windowState?this._resizeMinTitleNode():this._resizeToMax()},_resizePanels:function(){n.forEach(this.tabs,function(a){a.selected&&a.panel&&a.panel.resize()},this)},_resizeTitleNode:function(){var a=(this.getWidth()-2-21-72)/5;n.forEach(e(".title-node",this.maxStateNode),function(b){g.setStyle(b,"width",a+"px")},this)},_resizeMinTitleNode:function(){var a=
g.getContentBox(this.minStateNode),b=34;390>a.h&&(b=a.h/5-44);b+=2;n.forEach(e(".title-node",this.minStateNode),function(c){g.setStyle(c,"marginBottom",b+"px")},this)},setPosition:function(a){this.position=a;a=v.getPositionStyle(this.position);a.position="absolute";g.place(this.domNode,window.jimuConfig.layoutId);g.setStyle(this.domNode,a);this.started&&this.widgetManager.minimizeWidget(this)},createTabs:function(){var a=this.getAllConfigs(),b=[],c="";5>=a.length?(b=a,this.moreTab=!1):(b=a.splice(0,
4),this.moreTab=!0);n.forEach(b,function(h){this.createTab(h);!0===h.openAtStart&&(c=h.id)},this);this.moreTab&&(this.createTab({label:this.nls.more,flag:"more",icon:this.folderUrl+"images/more_tab_icon.png",groups:a}),""===c&&n.forEach(a,function(h){!0===h.openAtStart&&(c=h.id)}));return c},createTab:function(a){var b=this._createContentNode(a);a={title:this._createTitleNode(a),content:b,contentPane:e(".content-pane",b)[0],config:a,selected:!1,flag:a.flag,moreGroupWidgets:[],panels:[]};this.tabs.push(a);
return a},onSelect:function(a){var b=parseInt(e(a.currentTarget).attr("i")[0],10);this.selectTab(b,this.a11y_getEventOps(a))},selectTab:function(a,b){if(this.tabs[a].selected&&"more"!==this.tabs[a].flag)b.a11y_byKeyEvent&&v.focusFirstFocusNode(this.tabs[a].panels[0].domNode);else{if(void 0===this.tabs[this.getSelectedIndex()]||"more"!==this.tabs[this.getSelectedIndex()].flag)this.lastSelectedIndex=this.getSelectedIndex();this._showIndicator(a);var c=this._getIndicatorNodeByIndex(a).style("backgroundColor");
e(".content-title-bg",this.tabs[a].content).style({background:c});n.forEach(this.tabs,function(l,u){a===u?l.selected=!0:l.selected&&(l.selected=!1,l.panel&&this.panelManager.closePanel(l.panel))},this);if("more"===this.tabs[a].flag){if(b&&b.focusIdx)var h=b.focusIdx;this.showMoreTabContent(this.tabs[a],h)}else e(".content-node",this.domNode).style({display:"none"}),e(this.tabs[a].content).style({display:"block"}),0===e(".jimu-wc-tpc",this.tabs[a].content).length&&this.showTabContent(this.tabs[a]);
this._resizePanels()}},onAction:function(a,b){"highLight"===a&&b&&(b=e('div[settingid\x3d"'+b.widgetId+'"]',this.stateNode)[0],this._highLight(b));"removeHighLight"===a&&this._removeHighLight()},_openLastTab:function(a){if(a&&a.length&&0<a.length){var b=this.getAllConfigs(),c=n.map(b,function(h){return h&&h.id?h.id:null});n.forEach(a,k.hitch(this,function(h){h=c.indexOf(h);-1!==h&&(4>h?this.selectTab(h):this._addGroupToMoreTab(b[h]))}))}},_highLight:function(a){this.hlDiv&&this._removeHighLight();
if(a){var b=g.getMarginBox(a),c=g.getContentBox(a);a.parentElement.firstElementChild===a||window.isRTL||(b.l=b.l+b.w-c.w);this.hlDiv=g.create("div",{style:{position:"absolute",left:b.l+"px",top:b.t+"px",width:c.w+"px",height:c.h+"px"},"class":"icon-highlight"},a,"after")}},_removeHighLight:function(){this.hlDiv&&(g.destroy(this.hlDiv),this.hlDiv=null)},_getTitleNodeByIndex:function(a){return e(".title-node:nth-child("+(a+1)+")","maximized"===this.windowState?this.maxStateNode:this.minStateNode)},
_onMouseEnter:function(a){a=parseInt(e(a.currentTarget).attr("i")[0],10);"maximized"===this.windowState&&this.tabs[a].selected&&"more"!==this.tabs[a].flag||this._showIndicator(a)},_onMouseLeave:function(a){a=parseInt(e(a.currentTarget).attr("i")[0],10);"maximized"===this.windowState&&this.tabs[a].selected&&(this.moreTabOpened&&"more"===this.tabs[a].flag||!this.moreTabOpened&&"more"!==this.tabs[a].flag)||this._hideIndicator(a)},_getIndicatorNodeByIndex:function(a){return e(".tab-indicator",this._getTitleNodeByIndex(a)[0])},
_showIndicator:function(a){e(".tab-indicator",this.domNode).style({width:"0"});var b=g.getContentBox(this._getTitleNodeByIndex(a)[0]).w;this._getIndicatorNodeByIndex(a).animateProperty({properties:{width:b},duration:this.animTime,auto:!0})},_hideIndicator:function(a){this._getIndicatorNodeByIndex(a).animateProperty({properties:{width:0},duration:this.animTime,auto:!0})},getSelectedIndex:function(){var a=0;for(a=0;a<this.tabs.length;a++)if(this.tabs[a].selected)return a;return-1},showTabContent:function(a){var b=
a.config;this.showGroupContent(b,a);this.currentTab=!1===b.inPanel?null:a},showGroupContent:function(a,b){var c;a.widgets&&1<a.widgets.length&&e(".content-title",b.content).text(a.label);if(!1===a.inPanel)this.widgetManager.loadWidget(a).then(k.hitch(this,function(l){var u="more"===b.flag?"undefined":a.id;this._resizeToMin();u=this._getOffPanelPosition(u,this.widgetManager.getWidgetMarginBox(l));l.setPosition(u);this.widgetManager.openWidget(l);var w=this.a11y_getIconNodeById(a.id),x=a.id,C=m.after(l,
"onClose",k.hitch(this,function(){C.remove();w&&"more"!==b.flag?(this.a11y_switchNodeToClose(x),w.focus()):(this._hideOffPanelWidgets(),this.widgetManager.maximizeWidget(this),this.selectTab(4,{focusIdx:x}))}))}));else{var h=!!a.widgets;this.panelManager.showPanel(a).then(k.hitch(this,function(l){e(l.domNode).style(v.getPositionStyle({left:0,right:0,top:0,bottom:0}));"more"===b.flag?(c=e('.more-group-pane[label\x3d"'+a.label+'"]',b.contentPane),c.append(l.domNode)):e(b.contentPane).append(l.domNode);
-1===n.indexOf(b.panels,l)&&b.panels.push(l);b.panel=l;if(h)l.firstTitleNode.focus();else{var u=this.widgetManager.getWidgetById(l.config.id);u&&u.domNode&&setTimeout(k.hitch(this,function(){v.focusFirstFocusNode(u.domNode)}),50)}var w=this.a11y_getIconNodeById(a.id);this.own(p(l.domNode,"keydown",k.hitch(this,function(x){x.keyCode===B.ESCAPE&&(x.stopPropagation(),x.preventDefault(),w&&"more"!==b.flag?w.focus():this.showMoreTabContent(this.tabs[4],a.id))})))}))}},_getOffPanelPosition:function(a,b){var c=
{};a=e('div[settingid\x3d"'+a+'"]',this.stateNode)[0];a=f.position(a);c.top=a.y;window.isRTL?c.right=a.x-b.w-10:c.left=a.x+a.w+10;return c},showMoreTabContent:function(a,b){var c=a.config.groups,h=a=null;e(this.otherGroupNode).empty();this._createOtherGroupPaneTitle(b);n.forEach(c,function(l,u){var w={};u===c.length-1&&(w.isLastNode=!0);this._createMoreGroupNode(l,w)},this);window.isRTL?(a={left:this.getWidth()-this.minWidth,right:this.minWidth-this.getWidth()},h={left:0,right:this.minWidth}):(a=
{left:this.minWidth-this.getWidth(),right:this.getWidth()-this.minWidth},h={left:this.minWidth,right:0});a=d.combine([e(this.maxStateNode).animateProperty({properties:a,duration:this.animTime}),e(this.otherGroupNode).animateProperty({properties:h,duration:this.animTime})]);this.own(m.after(a,"onEnd",k.hitch(this,this.a11y_focusToItemInMoreTab,b)));a.play();this.moreTabOpened=!0;this.a11y_ignoreDoResizeNode()},_createOtherGroupPaneTitle:function(a){var b=g.create("div",{"class":"other-group-pane-title"},
this.otherGroupNode);g.create("div",{"class":"bg"},b);g.create("div",{"class":"text",innerHTML:this.nls.otherPanels},b);var c=g.create("div",{"class":"close",tabindex:this.tabIndex},b);this.a11y_moreTabCloseAriaLabel(c);this.a11y_moreTab_close=c;a||this.a11y_moreTab_close.focus();this.a11y_moreTabCloseEvent(c);this.a11y_moreTabEscapeEvent(b);return b},_createMoreGroupNode:function(a,b){var c=g.create("div",{"class":"other-group","data-widget-id":a.id,tabindex:this.tabIndex,"aria-label":v.stripHTML(a.label)},
this.otherGroupNode);g.create("img",{src:a.icon,"class":"other-group-icon jimu-float-leading"},c);g.create("div",{"class":"other-group-title jimu-float-leading",innerHTML:v.stripHTML(a.label)},c);var h=g.create("img",{"class":"other-group-choose jimu-float-trailing",style:{opacity:0},src:this.folderUrl+(window.isRTL?"images/arrow_choose_rtl.png":"images/arrow_choose.png")},c);this.a11y_addTooltip(c,a.label);b&&b.isLastNode&&(this.a11y_moreTab_last=c,this.a11y_moreTabLastNodeTabEvent());this.a11y_nodeSelect(c,
k.hitch(this,this._onOtherGroupClick,a));this.a11y_moreTabInonEscEvent(c);this.own(p(c,"mousedown",k.hitch(this,function(){e(c).addClass("jimu-state-active")})));this.own(p(c,"mouseup",k.hitch(this,function(){e(c).removeClass("jimu-state-active")})));this.own(p(c,t.enter,k.hitch(this,function(){e(h).style({opacity:1})})));this.own(p(c,t.leave,k.hitch(this,function(){e(h).style({opacity:0})})));return c},_hideOtherGroupPane:function(){var a=null;a=window.isRTL?{left:0-this.getWidth(),right:this.getWidth()}:
{left:this.getWidth(),right:0-this.getWidth()};d.combine([e(this.maxStateNode).animateProperty({properties:{left:0,right:0}}),e(this.otherGroupNode).animateProperty({properties:a})]).play();this.a11y_useDoResizeNode();this.a11y_cleanTabIndex_otherGroupPane();this.moreTabOpened=!1;(a=this.tabs[this.getSelectedIndex()])&&"more"===a.flag&&this._hideIndicator(this.getSelectedIndex())},_onOtherGroupClick:function(a){if(null===this.currentOtherGroup||this.currentOtherGroup.label!==a.label){var b=null;b=
window.isRTL?{left:this.getWidth(),right:0-this.getWidth()}:{left:0-this.getWidth(),right:this.getWidth()};b=d.combine([e(this.maxStateNode).animateProperty({properties:b,duration:this.animTime}),e(this.otherGroupNode).animateProperty({properties:{left:0,right:0},duration:this.animTime})]);this.own(m.after(b,"onEnd",k.hitch(this,this._addGroupToMoreTab,a)));b.play()}else this._addGroupToMoreTab(a)},_addGroupToMoreTab:function(a){var b=this.tabs[4];b.panel&&this.panelManager.closePanel(b.panel);e(".content-node",
this.domNode).style({display:"none"});e(b.content).style({display:"block"});if(null===this._getGroupFromMoreTab(b,a)){var c=g.create("div",{"class":"more-group-pane",label:a.label},b.contentPane);e(b.contentPane).append(c);b.moreGroupWidgets.push({glabel:a.label,widgets:[]})}this.currentTab=null;this.currentOtherGroup=a;this.showGroupContent(a,b);e(".more-group-pane",b.contentPane).style({display:"none"});e('.more-group-pane[label\x3d"'+a.label+'"]',b.contentPane).style({display:"block"});this._hideOtherGroupPane();
this._resizePanels()},_getGroupFromMoreTab:function(a,b){for(var c=0;c<a.moreGroupWidgets.length;c++)if(a.moreGroupWidgets[c].glabel===b.label)return a.moreGroupWidgets[c];return null},_createTitleNode:function(a){var b=(this.getWidth()-2-21-72)/5,c=a.label,h=a.icon;b=g.create("div",{role:"button",title:c,"class":"title-node jimu-float-leading jimu-leading-margin15",settingid:a.id,"aria-label":v.stripHTML(a.label),i:this.tabs.length,style:{width:b+"px"},tabindex:this.tabIndex},this.titleListNode);
g.create("div",{"class":"tab-indicator"},b);var l=g.create("img",{src:h},b);c=g.create("div",{title:c,"class":"title-node",role:"button",settingid:a.id,"aria-label":v.stripHTML(a.label),i:this.tabs.length,tabindex:this.tabIndex},this.minStateNode);g.create("div",{"class":"tab-indicator"},c);h=g.create("img",{src:h},c);window.isRTL&&a.mirrorIconForRTL&&g.addClass(l,"jimu-flipx");window.isRTL&&a.mirrorIconForRTL&&g.addClass(h,"jimu-flipx");this.a11y_addTooltip(b,a.label);this.a11y_nodeSelect(b,k.hitch(this,
this.onSelect));this.a11y_nodeEscEvent(b);this.own(p(b,t.enter,k.hitch(this,this._onMouseEnter)));this.own(p(b,t.leave,k.hitch(this,this._onMouseLeave)));this.a11y_addTooltip(c,a.label);this.a11y_nodeSelect(c,k.hitch(this,this._onMinIconClick,c));this.a11y_nodeEscEvent(c);this.own(p(c,t.enter,k.hitch(this,this._onMouseEnter)));this.own(p(c,t.leave,k.hitch(this,this._onMouseLeave)));return b},_onMinIconClick:function(a){a=e(a).attr("i")[0];var b=this.tabs[a],c=b.config;!1===c.inPanel?b.selected?(b.selected=
!1,this.widgetManager.closeWidget(c.id)):(this._hideOffPanelWidgets(),this.selectTab(parseInt(a,10))):(this._hideOffPanelWidgets(),this.widgetManager.maximizeWidget(this),this.selectTab(parseInt(a,10)))},_hideOffPanelWidgets:function(){n.forEach(this.tabs,function(a){"more"!==a.flag?a.config.inPanel||(a.selected=!1,this.widgetManager.closeWidget(a.config.id)):n.forEach(a.config.groups,function(b){b.inPanel||(a.selected=!1,this.widgetManager.closeWidget(b.id))},this)},this)},_createContentNode:function(a){var b=
g.create("div",{"class":"content-node"},this.contentListNode);g.create("div",{"class":"content-title-bg"},b);g.create("div",{"class":"content-title",innerHTML:v.stripHTML(a.widgets&&1<a.widgets.length?a.label:"")},b);g.create("div",{"class":"content-pane"},b);this.own(p(b,"click",k.hitch(this,function(){this.moreTabOpened&&(this._hideOtherGroupPane(),-1!==this.lastSelectedIndex&&this.selectTab(this.lastSelectedIndex))})));return b},_doResize:function(){"maximized"===this.windowState?this.widgetManager.minimizeWidget(this.id):
(this._hideOffPanelWidgets(),this.widgetManager.maximizeWidget(this.id))},_resizeToMin:function(){e(this.domNode).style("width",this.minWidth+"px");e(this.minStateNode).style("display","block");e(this.maxStateNode).style("display","none");this.currentTab&&this.currentTab.panel&&this.panelManager.closePanel(this.currentTab.panel);window.isRTL?e("div",this.doResizeNode).removeClass("right-arrow").addClass("left-arrow"):e("div",this.doResizeNode).removeClass("left-arrow").addClass("right-arrow");this.a11y_resizeNodeAriaLabel("e");
this._resizeMinTitleNode();r.publish("changeMapPosition",{left:this.minWidth});this.stateNode=this.minStateNode},_resizeToMax:function(){e(this.domNode).style("width",this.getWidth()+"px");this._resizeTitleNode();e(this.minStateNode).style("display","none");e(this.maxStateNode).style("display","block");window.isRTL?e("div",this.doResizeNode).removeClass("left-arrow").addClass("right-arrow"):e("div",this.doResizeNode).removeClass("right-arrow").addClass("left-arrow");this.a11y_resizeNodeAriaLabel("c");
this._resizePanels();r.publish("changeMapPosition",{left:this.getWidth()});this.currentTab&&this.showGroupContent(this.currentTab.config,this.currentTab);this.stateNode=this.maxStateNode}});q.extend(A);return q});