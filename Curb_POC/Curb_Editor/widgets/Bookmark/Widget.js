// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
/*
 Sortable 1.8.4 - MIT | git://github.com/SortableJS/Sortable.git */
require({cache:{"widgets/Bookmark/HeadBar":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on ./a11y/HeadBar dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./HeadBar.html".split(" "),function(y,A,p,g,B,v,H,T,E,f){y=A([H,T,E,y],{baseClass:"dojoDndSource dojoDndTarget dojoDndContainer",templateString:f,nls:null,map:null,bookmarksContainer:null,layout:null,editingName:!1,initMapState:null,postMixInProperties:function(){this.nls=
p.mixin(this.nls,window.jimuNls.common)},startup:function(){this.inherited(arguments);this.refreshUI();this.a11y_initEvents();this.own(B(this.filterInput,"blur",p.hitch(this,this.onFilterChange)));this.own(B(this.filterInput,"keyUp",p.hitch(this,this.onFilterChange)))},refreshUI:function(){this.editable?(g.addClass(this.domNode,"editable"),g.removeClass(this.addBtn,"hide")):(g.removeClass(this.domNode,"editable"),g.addClass(this.addBtn,"hide"));this._toggleLayoutBtnDisplay(this.layout.defaultMode);
!1!==this.editable||!0===this.layout.list&&!0===this.layout.cards?g.removeClass(this.domNode,"hide"):g.addClass(this.domNode,"hide")},_toggleLayoutBtnDisplay:function(u){g.addClass(this.listBtn,"hide");g.addClass(this.cardsBtn,"hide");"list"===u?this.listMode():this.cardsMode();!0===this.layout.list&&!0===this.layout.cards?("list"===u?g.removeClass(this.cardsBtn,"hide"):g.removeClass(this.listBtn,"hide"),g.addClass(this.displayMode,"two-modes")):g.removeClass(this.displayMode,"two-modes")},cardsMode:function(){g.removeClass(this.bookmarksContainer,
"list");g.addClass(this.bookmarksContainer,"cards");g.addClass(this.domNode,"list");g.removeClass(this.domNode,"cards");this.emit("layout-cards")},listMode:function(){g.removeClass(this.bookmarksContainer,"cards");g.addClass(this.bookmarksContainer,"list");g.addClass(this.domNode,"cards");g.removeClass(this.domNode,"list");this.emit("layout-list")},addingBookmark:function(){this.emit("add")},onFilterChange:function(){var u=this.filterInput.getValue();this.emit("filter-change",u)},onFilterBlur:function(){var u=
this.filterInput.getValue();this.emit("filter-blur",u)}});y.extend(v);return y})},"widgets/Bookmark/a11y/HeadBar":function(){define(["dojo/_base/lang","dojo/on","dijit/a11yclick"],function(y,A,p){return{a11y_initEvents:function(){this.own(A(this.addBtn,p,y.hitch(this,function(){this.addingBookmark()})));this.own(A(this.cardsBtn,p,y.hitch(this,function(g){this._toggleLayoutBtnDisplay("cards");this._isKeyEvent(g)&&this.listBtn&&this.listBtn.focus()})));this.own(A(this.listBtn,p,y.hitch(this,function(g){this._toggleLayoutBtnDisplay("list");
this._isKeyEvent(g)&&this.cardsBtn&&this.cardsBtn.focus()})))},_isKeyEvent:function(g){return g&&g._origType?!0:!1}}})},"widgets/Bookmark/WebmapBookmarks":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on esri/SpatialReference jimu/BaseWidget dijit/_TemplatedMixin ./utils libs/Sortable".split(" "),function(y,A,p,g,B,v,H,T,E,f,u){return A([T,E,y],{baseClass:"dojoDndSource dojoDndTarget dojoDndContainer bookmarker-nodes",templateString:"\x3cdiv\x3e\x3c/div\x3e",
nls:null,postCreate:function(){this.inherited(arguments);this.drawerHandle=g.create("div",{"class":"drawer-handle"},this.domNode);this.bookMarkerContainer=g.create("div",{"class":"webmap"},this.domNode)},startup:function(){this.inherited(arguments);this.config.syncMode&&(!1===this.config.syncMode.webmap&&!1===this.config.syncMode.custom?g.addClass(this.domNode,"hide"):g.removeClass(this.domNode,"hide"));this.sortableBookMarkerNodes=u.create(this.bookMarkerContainer,{sort:!1,disabled:!0,animation:100})},
refresh:function(){f.empty(this.bookmarks);this.bookmarks=[];this.config.syncMode&&!0===this.config.syncMode.webmap&&(this.bookmarks=f.readBookmarksInWebmap(this.map));var h=p.clone(this.config.bookmarks2D);B.forEach(h,function(q){q&&!0===this.config.syncMode.custom&&this.bookmarks.push(q)},this);f.updateBookmarks(this.bookmarks);this.displayBookmarks(this.bookmarks)},_onBookmarkClick:function(h){require(["esri/geometry/Extent"],p.hitch(this,function(q){if(!1!==h.isSaveExtent){var d=h.extent;d.spatialReference?
new H(d.spatialReference):new H({wkid:4326});this.map.setExtent(new q(d))}f.layerInfosRestoreState(h.isSaveLayers,h.layerOptions)}))},filter:function(h){f.filter(h,this.bookmarks)},displayBookmarks:function(h){f.empty(h,this.bookMarkerContainer);B.forEach(h,function(q){if(q){var d={editBtn:!1,changeImgBtn:!0,layerInfosIcon:f.isWithLayerInfos(q)};d=f.createBookMarkNode(q,this.nls,this.folderUrl,d,{editBtn:!1,deleteBtn:!1,renameBtn:!1,changeImgBtn:!1});q.itemNode=d;this.own(v(d,"thumbnail-click",p.hitch(this,
p.partial(this._onBookmarkClick,q))))}},this);h.forEach(p.hitch(this,function(q){q&&q.itemNode&&q.itemNode.domNode&&g.place(q.itemNode.domNode,this.bookMarkerContainer,"last")}))}})})},"widgets/Bookmark/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/html dojox/html/entities jimu/utils ./ItemNode libs/storejs/store jimu/LayerInfos/LayerInfos".split(" "),function(y,A,p,g,B,v,H,T){var E={_uID:0,getUID:function(){return E._uID++},findBookMark:function(f,u){var h=-1,q=null;A.some(u,
function(d,e){if(parseInt(d._uID,10)===parseInt(f._uID,10))return h=e,q=d,!0},this);return-1!==h?{bookmark:q,idx:h}:null},findBookMarkByUID:function(f,u){var h=-1,q=null;A.some(u,function(d,e){if(parseInt(d._uID,10)===parseInt(f,10))return h=e,q=d,!0},this);return-1!==h?{bookmark:q,idx:h}:null},findNextBookMarkByIdx:function(f,u){var h=null;f+1<=u.length-1&&(h=u[f+1]);return h},findBookMarkByNameAndExtent:function(f,u){var h=-1,q=null;A.some(u,function(d,e){if(d.name===f.name&&d.extent&&f.extent&&
d.extent.xmax===f.extent.xmax&&d.extent.xmin===f.extent.xmin&&d.extent.ymax===f.extent.ymax&&d.extent.ymin===f.extent.ymin)return h=e,q=d,!0},this);return-1!==h?{bookmark:q,idx:h}:null},isBookmarksDataEmpty:function(f){return Array.isArray(f)&&0===f.length?!0:!1},empty:function(f,u){var h=f;A.forEach(f,function(q){q&&q.itemNode&&q.itemNode.destroy()},this);f=[];f=h;u&&p.empty(u)},createBookMarkNode:function(f,u,h,q,d){h=f.thumbnail||"undefined"!==typeof f.thumbnail&&""!==f.thumbnail?B.processUrlInWidgetConfig(f.thumbnail,
h):B.processUrlInWidgetConfig("images/thumbnail_default.png",h);var e=E.getUID();f._uID=e;return new v({dataId:e,img:h,label:f.displayName||f.name,display:q,nls:u,a11y:d})},cloneBookmarksDataWithOutDom:function(f){var u=[];if("undefined"===typeof f)return u;f.forEach(y.hitch(this,function(h){h.itemNode&&h.itemNode.domNode&&(h=y.clone(h),delete h.itemNode,u.push(h))}));return u},readBookmarksInWebmap:function(f){var u=[];if(!f.itemInfo||!f.itemInfo.itemData||!f.itemInfo.itemData.bookmarks)return u;
A.forEach(f.itemInfo.itemData.bookmarks,function(h){h=y.mixin({},h);h.isInWebmap=!0;h.name=g.decode(h.name);u.push(h)},this);return u},filterBookmarkFromTarget:function(f,u){for(var h=[],q=0,d=f.length;q<d;q++){var e=f[q];E.findBookmarkByNameOrExtent(e,u)||h.push(e)}return h},findBookmarkByNameOrExtent:function(f,u){var h=-1,q=null;A.some(u,function(d,e){if((d.displayName||d.name)===(f.displayName||f.name)||d.extent&&f.extent&&d.extent.xmax===f.extent.xmax&&d.extent.xmin===f.extent.xmin&&d.extent.ymax===
f.extent.ymax&&d.extent.ymin===f.extent.ymin)return h=e,q=d,!0},this);return-1!==h?{bookmark:q,idx:h}:null},filter:function(f,u){u.forEach(function(h){"undefined"!==typeof f&&""!==f?-1!==(h.displayName||h.name).indexOf(f)?v.show(h):v.hide(h):v.show(h)})},getKeysKey:function(){return this.appConfig.map["3D"]?this.name+".3D":this.name+".2D"},getAutoRenameBeforeAdd:function(f,u,h){var q=0,d=new RegExp(/\((\d+)\){1}$/g);A.forEach(u,function(e){e&&"undefined"!==typeof e.name&&-1!==e.name.indexOf(f)&&("undefined"===
typeof h||!0===h&&f.length===e.name.length)&&(e=d.exec(e.displayName),null===e&&0===q?q=1:e&&"undefined"!==typeof e[1]&&e[1]>=q&&(q=parseInt(e[1],10)+1))});return 0===q?f:f+"("+q+")"},processDuplicateName:function(f){for(var u=[],h={},q=f.length-1;0<=q;q--){var d=f[q];if(!d||"undefined"===typeof d.name)return;var e=d.name;e in h?h[e]++:h[e]=0;if(0<h[e]){var t=e+"("+h[e]+")";t in h?(h[t]++,h[e]++):h[t]=0;d.displayName=0<h[t]?e+"("+h[e]+")":t;d._autoRename=!0}else d.displayName=e;u.push(d)}f=u},toogleCheckboxChecked:function(f){f&&
f.setValue&&f.setValue(!f.checked)},setCheckboxWithoutEvent:function(f,u){f&&f.check&&f.uncheck&&(!0===u?f.check(!0):f.uncheck(!0))},layerInfosRestoreState:function(f,u){var h=T.getInstanceSync(),q={};if(u&&f){for(var d in u)if(u.hasOwnProperty(d)){f=u[d];var e=!1;e="undefined"===typeof f.visible?f.selected:f.visible;q[d]={visible:e}}h.restoreState({layerOptions:q})}},getlayerInfos:function(){var f={},u=T.getInstanceSync();u&&u.traversal&&u.traversal(y.hitch(this,function(h){f[h.id]={visible:h.isVisible()}}));
return f},isWithLayerInfos:function(f){return f.layerOptions&&!1!==f.isSaveLayers?!0:!1},stringifyBookmarks:function(f){var u=[];A.forEach(f,function(h){h=y.mixin({},h);h.itemNode&&delete h.itemNode;u.push(h)},this);return u},parseBookmarks:function(f){return y.clone(f)},getKey:function(f){return"Bookmark.2D."+encodeURIComponent(B.getAppIdFromUrl())+"."+f},isConfigBefore5_3:function(f){return"undefined"===typeof f.syncMode||!0===f.needToUpdateFlag?!0:!1},getUpdateCacheKey:function(f){return"bookmark_cache_updated_"+
encodeURIComponent(E.getKey(f))},setUpdateCacheKey:function(f){H.set(E.getUpdateCacheKey(f),!0)},isCacheKeyUpdatedy:function(f){return H.get(E.getUpdateCacheKey(f))},setDefaultConfigForUpdate:function(f){f.needToUpdateFlag=!0;f.layout={cards:!0,list:!1,defaultMode:"cards"};f.editable=!0;Array.isArray(f.bookmarks2D)&&0<f.bookmarks2D.length?f.syncMode={webmap:!1,custom:!0}:f.syncMode={webmap:!0,custom:!0}},completeUpdateConfig:function(f){f.needToUpdateFlag&&delete f.needToUpdateFlag},updateBookmarks:function(f){for(var u=
0;u<f.length;u++)"undefined"===typeof f[u]&&(f.splice(u,1),u--);var h=/\/widgets\/Bookmark\/images\/thumbnail_default.png$/;A.forEach(f,function(q){"undefined"===typeof q.isSaveExtent&&(q.isSaveExtent=!0);q.thumbnail&&h.test(q.thumbnail)&&delete q.thumbnail},this)},getLayoutRecorderKey:function(){return"bookMarkLayout_"+encodeURIComponent(B.getAppIdFromUrl())},cleanLayoutRecorder:function(f){H.remove(E.getLayoutRecorderKey(f))},setLastLayout:function(f){H.set(E.getLayoutRecorderKey(),f)},getLastLayout:function(){return H.get(E.getLayoutRecorderKey())},
oldBookmarksBackup:'[{"displayName":"Greater Manchester or Greater Lincolnshire HAHAHAHA","name":"Greater Manchester or Greater Lincolnshire HAHAHAHA","extent":{"type":"extent","xmin":8997982.70263581,"ymin":2110475.6293307655,"xmax":14672667.682525788,"ymax":6024051.4775307495,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"Peterborough and Cambridgeshire HEHEHEHEHEH","name":"Peterborough and Cambridgeshire HEHEHEHEHEH","extent":{"type":"extent","xmin":9055621.33977054,"ymin":445965.34674161975,"xmax":14730306.319660518,"ymax":4359541.194941604,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"mentougou biejing china","name":"mentougou biejing china","extent":{"type":"extent","xmin":9502343.119353313,"ymin":3151483.465165457,"xmax":15177028.09924329,"ymax":7065059.313365442,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u51e4\u51f0\u7f6e\u5730\u4e09\u5143\u6865\u5317\u4eac\u4e2d\u56fd\u4e16\u754c\u592a\u9633\u7cfb\u5b87\u5b99","name":"\u51e4\u51f0\u7f6e\u5730\u4e09\u5143\u6865\u5317\u4eac\u4e2d\u56fd\u4e16\u754c\u592a\u9633\u7cfb\u5b87\u5b99","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u77ed\u4e2d\u6587","name":"\u77ed\u4e2d\u6587","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"short","name":"short","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u4e2d\u6587 English","name":"\u4e2d\u6587 English","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"Underneath the icons","name":"Underneath the icons","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u4e2d\u6587\u4e2d\u6587 \u5475\u5475","name":"\u4e2d\u6587\u4e2d\u6587 \u5475\u5475","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"eee RTL","name":"eee RTL","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false}]',
_testUpdateOldConfig:function(){return{bookmarks2D:[{extent:{spatialReference:{wkid:102100},xmax:-1656069.6628128502,xmin:-1.0861390956860503E7,ymax:1.510258315961978E7,ymin:-1119447.7364922247},name:"bm1",isInWebmap:!0,displayName:"bm1"},{extent:{spatialReference:{wkid:102100},xmax:-1656069.6628128502,xmin:-1.0861390956860503E7,ymax:1.510258315961978E7,ymin:-1119447.7364922247},name:"bm1",isInWebmap:!0,displayName:"bm1(1)"},{extent:{spatialReference:{wkid:102100},xmax:-3197863.7584074493,xmin:-1.3112899816301128E7,
ymax:1.1466459916526379E7,ymin:-4859686.568575533},name:"bm2",isInWebmap:!0,displayName:"bm2"},{extent:{spatialReference:{wkid:102100},xmax:-3767577.3201611056,xmin:-1.430429896767071E7,ymax:1.5120033300894285E7,ymin:-4622246.062418217},name:"Untitled",isInWebmap:!0,displayName:"Untitled"},{extent:{spatialReference:{wkid:102100},xmax:-4334684.982862408,xmin:-1.6556089386187213E7,ymax:1.6750523655935397E7,ymin:-5666212.383958025},name:"Untitled",isInWebmap:!0,displayName:"Untitled(1)"}],bookmarks3D:[],
flyTime:3E3}},_testSetOldCache:function(f){var u=[];A.forEach(f,function(h){var q="Bookmark.2D."+h.displayName;u.push(q);h=y.mixin({},h);h.itemNode&&delete h.itemNode;h._uID&&delete h._uID;try{H.set(q,h)}catch(d){alert("store error\x3d\x3d\x3e")}},this);H.set("Bookmark.2D",u)},_testSetOldCacheBookmark:function(){return JSON.parse('[{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-8273877.24778316,"xmin":-14295892.084200885,"ymax":6466269.8495007465,"ymin":2983187.344602761},"name":"bm1","isInWebmap":true,"displayName":"bm1"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-8004818.908219411,"xmin":-11015826.326428276,"ymax":5527011.645932751,"ymin":3785470.393483758},"name":"bm1","isInWebmap":true,"displayName":"bm1(1)"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-12874774.854323175,"xmin":-13627526.708875552,"ymax":4655629.523482032,"ymin":4220244.210369689},"name":"bm2","isInWebmap":true,"displayName":"bm2"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-11618761.605541585,"xmin":-14629769.023750449,"ymax":6691911.956998556,"ymin":4950370.704549563},"name":"bm3","isInWebmap":true,"displayName":"bm3"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-4317189.3003047705,"xmin":-16361218.973140221,"ymax":10449906.504800193,"ymin":3483741.495004222},"name":"bm4","isInWebmap":true,"displayName":"bm4"},{"name":"add-inRT-1","displayName":"add-inRT-1","extent":{"xmin":-14714155.502977258,"ymin":2694561.125798012,"xmax":-7855613.8290067855,"ymax":6754896.068305495,"spatialReference":{"wkid":102100,"latestWkid":3857}}},{"name":"add-inRT-2","displayName":"add-inRT-2","extent":{"xmin":-14714155.502977258,"ymin":2694561.125798012,"xmax":-7855613.8290067855,"ymax":6754896.068305495,"spatialReference":{"wkid":102100,"latestWkid":3857}}}]')}};
return E})},"widgets/Bookmark/ItemNode":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dijit/a11yclick jimu/BaseWidget dijit/_WidgetsInTemplateMixin ./a11y/ItemNode dojo/on dojo/query jimu/utils dojo/text!./ItemNode.html dojo/mouse dijit/form/ValidationTextBox".split(" "),function(y,A,p,g,B,v,H,T,E,f,u,h){var q={};q=A([v,H,y],{templateString:h,isSelected:!1,postMixInProperties:function(){this.nls=p.mixin(this.nls,window.jimuNls.common)},postCreate:function(){g.setAttr(this.domNode,
"data-id",u.sanitizeHTML(this.dataId));this.img&&g.setAttr(this.thumbnail,"src",this.img);this.nls&&(g.setAttr(this.deleteBtn,"title",this.nls.deleteBtnTip),g.setAttr(this.editBtn,"title",this.nls.editBtnTip),g.setAttr(this.changeImgBtn,"title",this.nls.changeThumbnailTip),g.setAttr(this.renameBtn,"title",this.nls.editBtnTip),g.setAttr(this.thumbnail,"title",this.nls.dragReorderTip),g.setAttr(this.layerInfosIcon,"title",this.nls.withVisibility));this.display&&(!1===this.display.selectedBtn&&g.addClass(this.selectedBtn,
"hide"),!1===this.display.editBtn&&g.addClass(this.editBtn,"hide"),!1===this.display.deleteBtn&&g.addClass(this.deleteBtn,"hide"),!1===this.display.renameBtn&&g.addClass(this.renameBtn,"hide"),!0===this.display.selectedBtn&&g.removeClass(this.selectedBtn,"hide"),!0===this.display.changeImgBtn&&g.removeClass(this.changeImgBtn,"hide"),!0===this.display.layerInfosIcon&&(g.removeClass(this.layerInfosIcon,"hide"),g.addClass(this.nodeBox,"with-layer-visibility")));this.a11y_display();this.nodeLabel.setValue(this.label);
this._updateLabelTooltips(this.label);this.own(E(this.selectedBtn,B,p.hitch(this,this.onSelected)));this.own(E(this.deleteBtn,B,p.hitch(this,this.onDelete)));this.own(E(this.editBtn,B,p.hitch(this,this.onEdit)));this.own(E(this.changeImgBtn,B,p.hitch(this,this.onChangeImg)));this.own(E(this.renameBtn,B,p.hitch(this,this.onRenameClick)));this.own(E(this.nodeBox,B,p.hitch(this,this.onNodeBoxClick)));this.own(E(this.dragMasker,"click",p.hitch(this,this.onNodeBoxClick)));!0===this.display.enableEditLabel?
(this.own(E(this.nodeLabel,B,p.hitch(this,this.onLabelClick))),this.own(E(this.nodeLabel,"change",p.hitch(this,this.onLabelChange))),this.own(E(this.nodeLabel,"blur",p.hitch(this,this.onLabelBlur)))):this.nodeLabel.setDisabled(!0);this.own(E(this.nodeLabel,"contextmenu",p.hitch(this,function(d){d.preventDefault()})));this.own(E(this.nodeBox,"contextmenu",p.hitch(this,function(d){d.preventDefault()})));this.a11y_initEvents()},onClick:function(){f(".jimu-img-node",this.getParent().domNode).removeClass("jimu-state-selected");
f(this.domNode).addClass("jimu-state-selected");this.emit("click")},onNodeBoxClick:function(d){d&&d.stopPropagation&&d.preventDefault&&(d.stopPropagation(),d.preventDefault());this.emit("thumbnail-click")},onLabelClick:function(d){d&&d.stopPropagation&&d.preventDefault&&(d.stopPropagation(),d.preventDefault());this.emit("label-click")},onLabelChange:function(d){this._updateLabelTooltips(d)},onLabelBlur:function(d){d&&d.stopPropagation&&d.preventDefault&&(d.stopPropagation(),d.preventDefault());d=
this.nodeLabel.get("value");this._updateLabelTooltips(d);this.emit("label-blur")},onSelected:function(d){d&&d.stopPropagation&&d.preventDefault&&(d.stopPropagation(),d.preventDefault());g.hasClass(this.domNode,"selected")?(g.removeClass(this.domNode,"selected"),this.isSelected=!1,!1!==d&&this.emit("unselected")):(g.addClass(this.domNode,"selected"),this.isSelected=!0,!1!==d&&this.emit("selected"))},onDelete:function(d){d&&d.stopPropagation&&d.preventDefault&&(d.stopPropagation(),d.preventDefault());
this.emit("delete")},onEdit:function(d){d&&d.stopPropagation&&d.preventDefault&&(d.stopPropagation(),d.preventDefault());this.emit("edit")},onChangeImg:function(d){d&&d.stopPropagation&&d.preventDefault&&(d.stopPropagation(),d.preventDefault());this.emit("change-img")},changeImg:function(d){g.setAttr(this.thumbnail,"src",d)},onRenameClick:function(d){d&&d.stopPropagation&&d.preventDefault&&(d.stopPropagation(),d.preventDefault());this.emit("rename")},highLight:function(){f(".jimu-img-node",this.getParent().domNode).removeClass("jimu-state-selected");
f(this.domNode).addClass("jimu-state-selected")},startup:function(){this.inherited(arguments)},destroy:function(){this.inherited(arguments);g.destroy(this.domNode)},_updateLabelTooltips:function(d){d&&(g.setAttr(this.nodeLabel,"title",d),this.dragMasker&&g.setAttr(this.dragMasker,"title",d),this.a11y_updateItemLabel(d))}});q.addFloatLeading=function(d){d.itemNode&&d.itemNode.domNode&&(f(".selected-btn",d.itemNode.domNode).forEach(function(e){g.addClass(e,"jimu-float-leading")}),f(".node-box",d.itemNode.domNode).forEach(function(e){g.addClass(e,
"jimu-float-leading")}),f(".node-label",d.itemNode.domNode).forEach(function(e){g.addClass(e,"jimu-float-leading")}),f(".close-btn",d.itemNode.domNode).forEach(function(e){g.addClass(e,"jimu-float-leading")}))};q.removeFloatLeading=function(d){d.itemNode&&d.itemNode.domNode&&(f(".selected-btn",d.itemNode.domNode).forEach(function(e){g.removeClass(e,"jimu-float-leading")}),f(".node-box",d.itemNode.domNode).forEach(function(e){g.removeClass(e,"jimu-float-leading")}),f(".node-label",d.itemNode.domNode).forEach(function(e){g.removeClass(e,
"jimu-float-leading")}),f(".close-btn",d.itemNode.domNode).forEach(function(e){g.removeClass(e,"jimu-float-leading")}))};q.toggleEditable=function(d){d.itemNode&&d.itemNode.nodeLabel&&(d.itemNode.nodeLabel.disabled?q.enableEditable(d):q.disableEditable(d))};q.disableEditable=function(){};q.enableEditable=function(){};q.focusLabel=function(d){d.itemNode&&d.itemNode.nodeLabel&&(d.itemNode.nodeLabel.focus(),d.itemNode.domNode&&g.addClass(d.itemNode.domNode,"a11y_hover"))};q.focusItem=function(d){d&&
d.itemNode&&d.itemNode.domNode&&d.itemNode.domNode.focus()};q.unSelected=function(d){d.itemNode&&d.itemNode&&(d=d.itemNode,g.removeClass(d.domNode,"selected"),d.isSelected=!1)};q.show=function(d){d&&d.itemNode&&(d=d.itemNode,g.removeClass(d.domNode,"hide"),d.isShow=!0)};q.hide=function(d){d&&d.itemNode&&(d=d.itemNode,g.addClass(d.domNode,"hide"),d.isShow=!1)};q.extend(T);return q})},"widgets/Bookmark/a11y/ItemNode":function(){define(["dojo/_base/lang","dojo/on","dojo/_base/html","dojo/keys"],function(y,
A,p,g){return{a11y_removeTabindex:function(B){p.removeAttr(B,"tabindex")},a11y_setTabindex:function(B,v){p.setAttr(B,"tabindex",v||0)},a11y_display:function(){this.a11y&&(!1===this.a11y.selectedBtn&&this.a11y_removeTabindex(this.selectedBtn),!1===this.a11y.editBtn&&this.a11y_removeTabindex(this.editBtn),!1===this.a11y.deleteBtn&&this.a11y_removeTabindex(this.deleteBtn),!1===this.a11y.renameBtn&&this.a11y_removeTabindex(this.renameBtn),!1===this.a11y.changeImgBtn&&this.a11y_removeTabindex(this.changeImgBtn))},
a11y_updateItemLabel:function(B){p.setAttr(this.domNode,"aria-label",B)},a11y_initEvents:function(){this.own(A(this.domNode,"keydown",y.hitch(this,function(B){var v=p.hasClass(B.target,"jimu-img-node");if(B.keyCode===g.ENTER&&v)this.onNodeBoxClick();this.a11y_checkFocus()})));this.own(A(this.domNode,"mouseout",y.hitch(this,function(){p.removeClass(this.domNode,"a11y_hover")})));this.own(A(this.domNode,"focus",y.hitch(this,function(){p.addClass(this.domNode,"a11y_hover")})))},a11y_focusToLabel:function(B){setTimeout(function(){B.focus()},
0)},a11y_focusToBtns:function(B){setTimeout(function(){B.focus()},0)},a11y_checkFocus:function(){setTimeout(y.hitch(this,function(){p.isDescendant(document.activeElement,this.domNode)||p.removeClass(this.domNode,"a11y_hover")}),50)}}})},"libs/Sortable":function(){!function(y){"function"==typeof define&&define.amd?define(y):"undefined"!=typeof module&&void 0!==module.exports?module.exports=y():window.Sortable=y()}(function(){function y(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be HTMLElement, not "+
{}.toString.call(a);this.el=a;this.options=b=Ba({},b);a[U]=this;var c={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ub(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,
easing:null,setData:function(m,r){m.setData("Text",r.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:ea(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==y.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5},l;for(l in c)l in b||(b[l]=c[l]);for(var k in vb(b),this)"_"===
k.charAt(0)&&"function"==typeof this[k]&&(this[k]=this[k].bind(this));(this.nativeDraggable=!b.forceFallback&&Mb)&&(this.options.touchStartThreshold=1);b.supportPointer?p(a,"pointerdown",this._onTapStart):(p(a,"mousedown",this._onTapStart),p(a,"touchstart",this._onTapStart));this.nativeDraggable&&(p(a,"dragover",this),p(a,"dragenter",this));ua.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||[])}function A(a,b,c,l){if(a){c=c||C;do{if(null!=b&&("\x3e"===b[0]&&a.parentNode===c&&L(a,
b.substring(1))||L(a,b))||l&&a===c)return a;if(a===c)break}while(a=(k=a).host&&k!==C&&k.host.nodeType?k.host:k.parentNode)}var k;return null}function p(a,b,c){a.addEventListener(b,c,wb)}function g(a,b,c){a.removeEventListener(b,c,wb)}function B(a,b,c){if(a&&b)if(a.classList)a.classList[c?"add":"remove"](b);else{var l=(" "+a.className+" ").replace(xb," ").replace(" "+b+" "," ");a.className=(l+(c?" "+b:"")).replace(xb," ")}}function v(a,b,c){var l=a&&a.style;if(l){if(void 0===c)return C.defaultView&&
C.defaultView.getComputedStyle?c=C.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in l||-1!==b.indexOf("webkit")||(b="-webkit-"+b);l[b]=c+("string"==typeof c?"":"px")}}function H(a){var b="";do{var c=v(a,"transform");c&&"none"!==c&&(b=c+" "+b)}while(a=a.parentNode);return window.DOMMatrix?new DOMMatrix(b):window.WebKitCSSMatrix?new WebKitCSSMatrix(b):window.CSSMatrix?new CSSMatrix(b):void 0}function T(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var l=a.length;
if(c)for(;b<l;b++)c(a[b],b);return a}return[]}function E(a,b,c,l,k,m,r,x,z){var D,I=(a=a||b[U]).options,J="on"+c.charAt(0).toUpperCase()+c.substr(1);!window.CustomEvent||fa||Ja?(D=C.createEvent("Event")).initEvent(c,!0,!0):D=new CustomEvent(c,{bubbles:!0,cancelable:!0});D.to=k||b;D.from=m||b;D.item=l||b;D.clone=K;D.oldIndex=r;D.newIndex=x;D.originalEvent=z;D.pullMode=Y?Y.lastPutMode:void 0;b&&b.dispatchEvent(D);I[J]&&I[J].call(a,D)}function f(a,b,c,l,k,m,r,x){var z,D,I=a[U],J=I.options.onMove;return!window.CustomEvent||
fa||Ja?(z=C.createEvent("Event")).initEvent("move",!0,!0):z=new CustomEvent("move",{bubbles:!0,cancelable:!0}),z.to=b,z.from=a,z.dragged=c,z.draggedRect=l,z.related=k||b,z.relatedRect=m||M(b),z.willInsertAfter=x,z.originalEvent=r,a.dispatchEvent(z),J&&(D=J.call(I,z,r)),D}function u(a){a.draggable=!1}function h(){db=!1}function q(a,b,c){for(var l=0,k=0,m=a.children;k<m.length;){if("none"!==m[k].style.display&&m[k]!==G&&m[k]!==n&&A(m[k],c.draggable,a,!1)){if(l===b)return m[k];l++}k++}return null}function d(a){for(a=
a.lastElementChild;a&&(a===G||"none"===a.style.display);)a=a.previousElementSibling;return a||null}function e(a){return w(n)<w(a)?1:-1}function t(a){a=a.tagName+a.className+a.src+a.href+a.textContent;for(var b=a.length,c=0;b--;)c+=a.charCodeAt(b);return c.toString(36)}function w(a,b){b=0;if(!a||!a.parentNode)return-1;for(;a&&(a=a.previousElementSibling);)"TEMPLATE"!==a.nodeName.toUpperCase()&&a!==K&&b++;return b}function L(a,b){if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);
if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(c){}return!1}function Z(a,b){return function(){if(!Ka){var c=arguments,l=this;Ka=Ca(function(){1===c.length?a.call(l,c[0]):a.apply(l,c);Ka=void 0},b)}}}function Ba(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function yb(a){return eb&&eb.dom?eb.dom(a).cloneNode(!0):zb?zb(a).clone(!0)[0]:a.cloneNode(!0)}function Ra(a){return Ca(a,0)}function M(a,b,c,l){if(a.getBoundingClientRect||a===ma){var k,m,r,x,z,D,I;if(I=
a!==ma&&a!==oa()?(m=(k=a.getBoundingClientRect()).top,r=k.left,x=k.bottom,z=k.right,D=k.height,k.width):(r=m=0,x=window.innerHeight,z=window.innerWidth,D=window.innerHeight,window.innerWidth),l&&a!==ma&&(c=c||a.parentNode,!fa)){do if(c&&c.getBoundingClientRect&&"none"!==v(c,"transform")){x=c.getBoundingClientRect();m-=x.top+ea(v(c,"border-top-width"));r-=x.left+ea(v(c,"border-left-width"));x=m+k.height;z=r+k.width;break}while(c=c.parentNode)}b&&a!==ma&&(b=(a=H(c||a))&&a.a,c=a&&a.d,a&&(x=(m/=c)+(D/=
c),z=(r/=b)+(I/=b)));return{top:m,left:r,bottom:x,right:z,width:I,height:D}}}function Ab(a,b){var c=va(a,!0);for(a=M(a)[b];c;){var l=M(c)[b];if(!("top"===b||"left"===b?l<=a:a<=l))return c;if(c===oa())break;c=va(c,!1)}return!1}function Bb(a){var b=0,c=0,l=oa();if(a){do{var k=H(a),m=k.d;b+=a.scrollLeft*k.a;c+=a.scrollTop*m}while(a!==l&&(a=a.parentNode))}return[b,c]}if("undefined"==typeof window||!window.document)return function(){throw Error("Sortable.js requires a window with a document");};var n,
Q,G,K,F,za,fb,Da,gb,hb,aa,da,Sa,Y,Ea,ib,jb,La,V,Ta,Fa,Ma,Na,Ua,O,Ga,N=[],kb=!1,Oa=!1,Va=!1,ua=[],Pa=!1,Wa=!1,lb=[],xb=/\s+/g,U="Sortable"+(new Date).getTime(),ma=window,C=ma.document,ea=ma.parseInt,Ca=ma.setTimeout,zb=ma.jQuery||ma.Zepto,eb=ma.Polymer,wb={capture:!1,passive:!1},fa=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),Ja=!!navigator.userAgent.match(/Edge/i),Cb=!!navigator.userAgent.match(/firefox/i),mb=!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i)||
navigator.userAgent.match(/android/i)),Xa=!!navigator.userAgent.match(/iP(ad|od|hone)/i),Db=Ja||fa?"cssFloat":"float",Mb="draggable"in C.createElement("div"),nb=function(){if(fa)return!1;var a=C.createElement("x");return a.style.cssText="pointer-events:auto","auto"===a.style.pointerEvents}(),db=!1,ob=!1,pa=Math.abs,Nb=Math.min,Ob=Math.max,Ya=[],ub=function(a,b){var c=v(a),l=ea(c.width)-ea(c.paddingLeft)-ea(c.paddingRight)-ea(c.borderLeftWidth)-ea(c.borderRightWidth),k=q(a,0,b);a=q(a,1,b);var m=k&&
v(k);b=a&&v(a);var r=m&&ea(m.marginLeft)+ea(m.marginRight)+M(k).width,x=b&&ea(b.marginLeft)+ea(b.marginRight)+M(a).width;return"flex"===c.display?"column"===c.flexDirection||"column-reverse"===c.flexDirection?"vertical":"horizontal":"grid"===c.display?1>=c.gridTemplateColumns.split(" ").length?"vertical":"horizontal":k&&"none"!==m.float?(c="left"===m.float?"left":"right",!a||"both"!==b.clear&&b.clear!==c?"horizontal":"vertical"):k&&("block"===m.display||"flex"===m.display||"table"===m.display||"grid"===
m.display||l<=r&&"none"===c[Db]||a&&"none"===c[Db]&&l<r+x)?"vertical":"horizontal"},va=function(a,b){if(!a||!a.getBoundingClientRect)return oa();var c=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var l=v(a);if(a.clientWidth<a.scrollWidth&&("auto"==l.overflowX||"scroll"==l.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==l.overflowY||"scroll"==l.overflowY)){if(!a||!a.getBoundingClientRect||a===C.body)break;if(c||b)return a;c=!0}}while(a=a.parentNode);return oa()},oa=function(){return fa?
C.documentElement:C.scrollingElement},Eb=function(a,b,c){a.scrollLeft+=b;a.scrollTop+=c},pb=Z(function(a,b,c,l){if(b.scroll){var k=c?c[U]:window,m=b.scrollSensitivity,r=b.scrollSpeed,x=a.clientX,z=a.clientY,D=oa(),I=!1;gb!==c&&(Za(),Da=b.scroll,hb=b.scrollFn,!0===Da&&(Da=va(c,!0),gb=Da));c=0;var J=Da;do{var R,ha,S,qa,ia,W,ja,P=J,ba=M(P);var wa=ba.top;var ra=ba.bottom;var sa=ba.left;var $a=ba.right,Ha=ba.width;ba=ba.height;if(R=P.scrollWidth,ha=P.scrollHeight,S=v(P),W=P.scrollLeft,ja=P.scrollTop,ia=
P===D?(qa=Ha<R&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),ba<ha&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(qa=Ha<R&&("auto"===S.overflowX||"scroll"===S.overflowX),ba<ha&&("auto"===S.overflowY||"scroll"===S.overflowY)),sa=qa&&(pa($a-x)<=m&&W+Ha<R)-(pa(sa-x)<=m&&!!W),wa=ia&&(pa(ra-z)<=m&&ja+ba<ha)-(pa(wa-z)<=m&&!!ja),!N[c])for(ra=0;ra<=c;ra++)N[ra]||(N[ra]={});N[c].vx==sa&&N[c].vy==wa&&N[c].el===P||(N[c].el=P,N[c].vx=sa,N[c].vy=wa,clearInterval(N[c].pid),
!P||0==sa&&0==wa||(I=!0,N[c].pid=setInterval(function(){l&&0===this.layer&&(y.active._emulateDragOver(!0),y.active._onTouchMove(V,!0));var ka=N[this.layer].vy?N[this.layer].vy*r:0,X=N[this.layer].vx?N[this.layer].vx*r:0;"function"==typeof hb&&"continue"!==hb.call(k,X,ka,a,V,N[this.layer].el)||Eb(N[this.layer].el,X,ka)}.bind({layer:c}),24)));c++}while(b.bubbleScroll&&J!==D&&(J=va(J,!1)));kb=I}},30),Za=function(){N.forEach(function(a){clearInterval(a.pid)});N=[]},vb=function(a){function b(k,m){return function(r,
x,z,D){var I=r.options.group.name&&x.options.group.name&&r.options.group.name===x.options.group.name;if(null==k&&(m||I))return!0;if(null==k||!1===k)return!1;if(m&&"clone"===k)return k;if("function"==typeof k)return b(k(r,x,z,D),m)(r,x,z,D);r=(m?r:x).options.group.name;return!0===k||"string"==typeof k&&k===r||k.join&&-1<k.indexOf(r)}}var c={},l=a.group;l&&"object"==typeof l||(l={name:l});c.name=l.name;c.checkPull=b(l.pull,!0);c.checkPut=b(l.put);c.revertClone=l.revertClone;a.group=c},Fb=function(a){n&&
n.parentNode&&n.parentNode[U]&&n.parentNode[U]._computeIsAligned(a)},Gb=function(a,b){for(;!b[U];)b=b.parentNode;return a===b},Hb=function(a,b,c){for(a=a.parentNode;a&&!a[U];)a=a.parentNode;a&&a[U][c](Ba(b,{artificialBubble:!0}))},Ib=function(){!nb&&G&&v(G,"display","none")},Jb=function(){!nb&&G&&v(G,"display","")};C.addEventListener("click",function(a){if(Va)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Va=!1},!0);var Ka,
qb=function(a){if(a=a.touches?a.touches[0]:a,n){a:{var b=a.clientX;for(var c=a.clientY,l=0;l<ua.length;l++)if(!d(ua[l])){var k=M(ua[l]),m=ua[l][U].options.emptyInsertThreshold,r=c>=k.top-m&&c<=k.bottom+m;if(b>=k.left-m&&b<=k.right+m&&r){b=ua[l];break a}}b=void 0}b&&b[U]._onDragOver({clientX:a.clientX,clientY:a.clientY,target:b,rootEl:b})}};return p(C,"dragover",qb),p(C,"mousemove",qb),p(C,"touchmove",qb),y.prototype={constructor:y,_computeIsAligned:function(a){var b;if(G&&!nb?(Ib(),b=C.elementFromPoint(a.clientX,
a.clientY),Jb()):b=a.target,b=A(b,this.options.draggable,this.el,!1),!ob&&n&&n.parentNode===this.el){for(var c,l,k,m,r,x,z,D,I=this.el.children,J=0;J<I.length;J++)A(I[J],this.options.draggable,this.el,!1)&&I[J]!==b&&(I[J].sortableMouseAligned=(c=a.clientX,l=a.clientY,k=I[J],m=this._getDirection(a,null),this.options,void 0,r=M(k),x="vertical"===m?r.left:r.top,z="vertical"===m?r.right:r.bottom,x<(D="vertical"===m?c:l)&&D<z));A(b,this.options.draggable,this.el,!0)||(Fa=null);ob=!0;Ca(function(){ob=!1},
30)}},_getDirection:function(a,b){return"function"==typeof this.options.direction?this.options.direction.call(this,a,b,n):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b,c=this,l=this.el,k=this.options,m=k.preventOnFilter,r=a.type,x=a.touches&&a.touches[0],z=(x||a).target,D=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||z,I=k.filter;if(function(J){Ya.length=0;J=J.getElementsByTagName("input");for(var R=J.length;R--;){var ha=J[R];ha.checked&&Ya.push(ha)}}(l),
!(fa&&!a.artificialBubble&&!Gb(l,z)||n||/mousedown|pointerdown/.test(r)&&0!==a.button||k.disabled||D.isContentEditable))if(z=A(z,k.draggable,l,!1)){if(fb!==z){if(b=w(z,k.draggable),"function"==typeof I){if(I.call(this,a,z,this))return E(c,D,"filter",z,l,l,b),void(m&&a.cancelable&&a.preventDefault())}else if(I&&(I=I.split(",").some(function(J){if(J=A(D,J.trim(),l,!1))return E(c,J,"filter",z,l,l,b),!0})))return void(m&&a.cancelable&&a.preventDefault());k.handle&&!A(D,k.handle,l,!1)||this._prepareDragStart(a,
x,z,b)}}else fa&&Hb(l,a,"_onTapStart")}},_handleAutoScroll:function(a,b){if(n&&this.options.scroll){var c=a.clientX,l=a.clientY,k=C.elementFromPoint(c,l),m=this;if(b||Ja||fa||mb){pb(a,m.options,k,b);var r=va(k,!0);!kb||Ea&&c===ib&&l===jb||(Ea&&clearInterval(Ea),Ea=setInterval(function(){if(n){var x=va(C.elementFromPoint(c,l),!0);x!==r&&(r=x,Za(),pb(a,m.options,r,b))}},10),ib=c,jb=l)}else{if(!m.options.bubbleScroll||va(k,!0)===oa())return void Za();pb(a,m.options,va(k,!1),!1)}}},_prepareDragStart:function(a,
b,c,l){var k,m=this,r=m.el,x=m.options,z=r.ownerDocument;c&&!n&&c.parentNode===r&&(F=r,Q=(n=c).parentNode,za=n.nextSibling,fb=c,Sa=x.group,aa=l,La={target:n,clientX:(b||a).clientX,clientY:(b||a).clientY},this._lastX=(b||a).clientX,this._lastY=(b||a).clientY,n.style["will-change"]="all",n.style.transition="",n.style.transform="",k=function(){m._disableDelayedDragEvents();!Cb&&m.nativeDraggable&&(n.draggable=!0);m._triggerDragStart(a,b);E(m,F,"choose",n,F,F,aa);B(n,x.chosenClass,!0)},x.ignore.split(",").forEach(function(D){T(n,
D.trim(),u)}),x.supportPointer?p(z,"pointerup",m._onDrop):(p(z,"mouseup",m._onDrop),p(z,"touchend",m._onDrop),p(z,"touchcancel",m._onDrop)),Cb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,n.draggable=!0),!x.delay||this.nativeDraggable&&(Ja||fa)?k():(p(z,"mouseup",m._disableDelayedDrag),p(z,"touchend",m._disableDelayedDrag),p(z,"touchcancel",m._disableDelayedDrag),p(z,"mousemove",m._delayedDragTouchMoveHandler),p(z,"touchmove",m._delayedDragTouchMoveHandler),x.supportPointer&&p(z,"pointermove",
m._delayedDragTouchMoveHandler),m._dragStartTimer=Ca(k,x.delay)))},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Ob(pa(a.clientX-this._lastX),pa(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){n&&u(n);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=this.el.ownerDocument;g(a,"mouseup",
this._disableDelayedDrag);g(a,"touchend",this._disableDelayedDrag);g(a,"touchcancel",this._disableDelayedDrag);g(a,"mousemove",this._delayedDragTouchMoveHandler);g(a,"touchmove",this._delayedDragTouchMoveHandler);g(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||("touch"==a.pointerType?a:null);!this.nativeDraggable||b?this.options.supportPointer?p(C,"pointermove",this._onTouchMove):p(C,b?"touchmove":"mousemove",this._onTouchMove):(p(n,"dragend",this),p(F,"dragstart",
this._onDragStart));try{C.selection?Ra(function(){C.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},_dragStarted:function(a,b){if(Oa=!1,F&&n){this.nativeDraggable&&(p(C,"dragover",this._handleAutoScroll),p(C,"dragover",Fb));var c=this.options;!a&&B(n,c.dragClass,!1);B(n,c.ghostClass,!0);v(n,"transform","");y.active=this;a&&this._appendGhost();E(this,F,"start",n,F,F,aa,void 0,b)}else this._nulling()},_emulateDragOver:function(a){if(V&&(this._lastX!==V.clientX||this._lastY!==
V.clientY||a)){this._lastX=V.clientX;this._lastY=V.clientY;Ib();for(var b=a=C.elementFromPoint(V.clientX,V.clientY);a&&a.shadowRoot;)b=a=a.shadowRoot.elementFromPoint(V.clientX,V.clientY);if(b){do{if(b[U]&&b[U]._onDragOver({clientX:V.clientX,clientY:V.clientY,target:a,rootEl:b})&&!this.options.dragoverBubble)break;a=b}while(b=b.parentNode)}n.parentNode[U]._computeIsAligned(V);Jb()}},_onTouchMove:function(a,b){if(La){var c=this.options,l=c.fallbackTolerance,k=c.fallbackOffset;c=a.touches?a.touches[0]:
a;var m=G&&H(G),r=G&&m&&m.a;m=G&&m&&m.d;var x=Xa&&O&&Bb(O);r=(c.clientX-La.clientX+k.x)/(r||1)+(x?x[0]-lb[0]:0)/(r||1);k=(c.clientY-La.clientY+k.y)/(m||1)+(x?x[1]-lb[1]:0)/(m||1);k=a.touches?"translate3d("+r+"px,"+k+"px,0)":"translate("+r+"px,"+k+"px)";if(!y.active&&!Oa){if(l&&Nb(pa(c.clientX-this._lastX),pa(c.clientY-this._lastY))<l)return;this._onDragStart(a,!0)}!b&&this._handleAutoScroll(c,!0);Ta=!0;V=c;v(G,"webkitTransform",k);v(G,"mozTransform",k);v(G,"msTransform",k);v(G,"transform",k);a.cancelable&&
a.preventDefault()}},_appendGhost:function(){if(!G){var a=this.options.fallbackOnBody?C.body:F,b=M(n,!0,a,!Xa),c=(v(n),this.options);if(Xa){for(O=a;"static"===v(O,"position")&&"none"===v(O,"transform")&&O!==C;)O=O.parentNode;if(O!==C){var l=M(O,!0);b.top-=l.top;b.left-=l.left}O!==C.body&&O!==C.documentElement?(O===C&&(O=oa()),b.top+=O.scrollTop,b.left+=O.scrollLeft):O=oa();lb=Bb(O)}B(G=n.cloneNode(!0),c.ghostClass,!1);B(G,c.fallbackClass,!0);B(G,c.dragClass,!0);v(G,"box-sizing","border-box");v(G,
"margin",0);v(G,"top",b.top);v(G,"left",b.left);v(G,"width",b.width);v(G,"height",b.height);v(G,"opacity","0.8");v(G,"position",Xa?"absolute":"fixed");v(G,"zIndex","100000");v(G,"pointerEvents","none");a.appendChild(G)}},_onDragStart:function(a,b){var c=this,l=a.dataTransfer,k=c.options;(K=yb(n)).draggable=!1;K.style["will-change"]="";this._hideClone();B(K,c.options.chosenClass,!1);c._cloneId=Ra(function(){c.options.removeCloneOnHide||F.insertBefore(K,n);E(c,F,"clone",n)});!b&&B(n,k.dragClass,!0);
b?(Va=!0,c._loopId=setInterval(c._emulateDragOver,50)):(g(C,"mouseup",c._onDrop),g(C,"touchend",c._onDrop),g(C,"touchcancel",c._onDrop),l&&(l.effectAllowed="move",k.setData&&k.setData.call(c,l,n)),p(C,"drop",c),v(n,"transform","translateZ(0)"));Oa=!0;c._dragStartId=Ra(c._dragStarted.bind(c,b,a));p(C,"selectstart",c);mb&&v(C.body,"user-select","none")},_onDragOver:function(a){function b(ca){return ca&&(I?D._hideClone():D._showClone(R),D&&(B(n,Y?Y.options.ghostClass:D.options.ghostClass,!1),B(n,x.ghostClass,
!0)),Y!==R&&R!==y.active?Y=R:R===y.active&&(Y=null),l&&R._animate(l,n),r&&S&&R._animate(S,r)),(r===n&&!n.animated||r===m&&!r.animated)&&(Fa=null),x.dragoverBubble||a.rootEl||r===C||(R._handleAutoScroll(a),n.parentNode[U]._computeIsAligned(a)),!x.dragoverBubble&&a.stopPropagation&&a.stopPropagation(),!0}function c(){E(R,F,"change",r,m,F,aa,w(n,x.draggable),a)}var l,k,m=this.el,r=a.target,x=this.options,z=x.group,D=y.active,I=Sa===z,J=x.sort,R=this;if(!db&&(!fa||a.rootEl||a.artificialBubble||Gb(m,r))){if(void 0!==
a.preventDefault&&a.cancelable&&a.preventDefault(),Ta=!0,r=A(r,x.draggable,m,!0),A(a.target,null,n,!0)||r.animated)return b(!1);if(r!==n&&(Va=!1),D&&!x.disabled&&(I?J||(k=!F.contains(n)):Y===this||(this.lastPutMode=Sa.checkPull(this,D,n,a))&&z.checkPut(this,D,n,a))){z=this._getDirection(a,r);if(l=M(n),k)return this._hideClone(),Q=F,za?F.insertBefore(n,za):F.appendChild(n),b(!0);if((k=d(m))&&(ka=a,X=z,ta=M(d(m)),na="vertical"===X?ka.clientY:ka.clientX,xa="vertical"===X?ka.clientX:ka.clientY,Aa="vertical"===
X?ta.bottom:ta.right,rb="vertical"===X?ta.left:ta.top,ab="vertical"===X?ta.right:ta.bottom,!("vertical"===X?ab+10<xa||xa<=ab&&Aa<na&&rb<=xa:Aa<na&&rb<xa||na<=Aa&&ab+10<xa)||k.animated)){if(r&&r!==n&&r.parentNode===m){var ha;na=0;xa=r.sortableMouseAligned;Aa=n.parentNode!==m;ka="vertical"===z?"top":"left";ta=(X=Ab(r,"top")||Ab(n,"top"))?X.scrollTop:void 0;if(Fa!==r&&(Na=null,ha=M(r)[ka],Pa=!1),ia=r,W=z,ja=(qa=n)===n&&Ga||M(qa),P=ia===n&&Ga||M(ia),ba="vertical"===W?ja.left:ja.top,wa="vertical"===W?
ja.right:ja.bottom,ra="vertical"===W?ja.width:ja.height,sa="vertical"===W?P.left:P.top,$a="vertical"===W?P.right:P.bottom,Ha="vertical"===W?P.width:P.height,Na=(ba===sa||wa===$a||ba+ra/2===sa+Ha/2)&&xa||Aa||X||x.invertSwap||"insert"===Na||"swap"===Na?("swap"!==Na&&(Wa=x.invertSwap||Aa),na=function(ca,Kb,Ia,sb,bb,Lb,Pb){var la=M(Kb);ca="vertical"===Ia?ca.clientY:ca.clientX;var ya="vertical"===Ia?la.height:la.width,Qa="vertical"===Ia?la.top:la.left;la="vertical"===Ia?la.bottom:la.right;var cb=M(n),
tb=!1;if(!Lb)if(Pb&&Ua<ya*sb)if(!Pa&&(1===Ma?Qa+ya*bb/2<ca:ca<la-ya*bb/2)&&(Pa=!0),Pa)tb=!0;else{if("vertical"===Ia?cb.top:cb.left,"vertical"===Ia?cb.bottom:cb.right,1===Ma?ca<Qa+Ua:la-Ua<ca)return-1*Ma}else if(Qa+ya*(1-sb)/2<ca&&ca<la-ya*(1-sb)/2)return e(Kb);return(tb=tb||Lb)&&(ca<Qa+ya*bb/2||la-ya*bb/2<ca)?Qa+ya/2<ca?1:-1:0}(a,r,z,x.swapThreshold,null==x.invertedSwapThreshold?x.swapThreshold:x.invertedSwapThreshold,Wa,Fa===r),"swap"):(na=e(r),"insert"),0===na)return b(!1);Ga=null;Ma=na;var S=M(Fa=
r);qa=r.nextElementSibling;ia=!1;W=f(F,m,n,l,r,S,a,ia=1===na);if(!1!==W)return 1!==W&&-1!==W||(ia=1===W),db=!0,Ca(h,30),I?D._hideClone():D._showClone(this),ia&&!qa?m.appendChild(n):r.parentNode.insertBefore(n,ia?qa:r),X&&Eb(X,0,ta-X.scrollTop),Q=n.parentNode,void 0===ha||Wa||(Ua=pa(ha-M(r)[ka])),c(),b(!0)}}else if(k&&m===a.target&&(r=k),r&&(S=M(r)),I?D._hideClone():D._showClone(this),!1!==f(F,m,n,l,r,S,a,!!r))return m.appendChild(n),Q=m,Ga=null,c(),b(!0);if(m.contains(n))return b(!1)}var qa,ia,W,
ja,P,ba,wa,ra,sa,$a,Ha,ka,X,ta,na,xa,Aa,rb,ab;return fa&&!a.rootEl&&Hb(m,a,"_onDragOver"),!1}},_animate:function(a,b){var c=this.options.animation;if(c){var l=M(b);if(b===n&&(Ga=l),1===a.nodeType&&(a=M(a)),a.left+a.width/2!==l.left+l.width/2||a.top+a.height/2!==l.top+l.height/2){var k=H(this.el),m=k&&k.a;k=k&&k.d;v(b,"transition","none");v(b,"transform","translate3d("+(a.left-l.left)/(m||1)+"px,"+(a.top-l.top)/(k||1)+"px,0)");b.offsetWidth;v(b,"transition","transform "+c+"ms"+(this.options.easing?
" "+this.options.easing:""));v(b,"transform","translate3d(0,0,0)")}"number"==typeof b.animated&&clearTimeout(b.animated);b.animated=Ca(function(){v(b,"transition","");v(b,"transform","");b.animated=!1},c)}},_offUpEvents:function(){var a=this.el.ownerDocument;g(C,"touchmove",this._onTouchMove);g(C,"pointermove",this._onTouchMove);g(a,"mouseup",this._onDrop);g(a,"touchend",this._onDrop);g(a,"pointerup",this._onDrop);g(a,"touchcancel",this._onDrop);g(C,"selectstart",this)},_onDrop:function(a){var b=
this.el,c=this.options;Pa=Wa=kb=Oa=!1;clearInterval(this._loopId);clearInterval(Ea);Za();clearTimeout(Ka);Ka=void 0;clearTimeout(this._dragStartTimer);clearTimeout(this._cloneId);clearTimeout(this._dragStartId);g(C,"mousemove",this._onTouchMove);this.nativeDraggable&&(g(C,"drop",this),g(b,"dragstart",this._onDragStart),g(C,"dragover",this._handleAutoScroll),g(C,"dragover",Fb));mb&&v(C.body,"user-select","");this._offUpEvents();a&&(Ta&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),
G&&G.parentNode&&G.parentNode.removeChild(G),(F===Q||Y&&"clone"!==Y.lastPutMode)&&K&&K.parentNode&&K.parentNode.removeChild(K),n&&(this.nativeDraggable&&g(n,"dragend",this),u(n),n.style["will-change"]="",B(n,Y?Y.options.ghostClass:this.options.ghostClass,!1),B(n,this.options.chosenClass,!1),E(this,F,"unchoose",n,Q,F,aa,null,a),F!==Q?(0<=(da=w(n,c.draggable))&&(E(null,Q,"add",n,Q,F,aa,da,a),E(this,F,"remove",n,Q,F,aa,da,a),E(null,Q,"sort",n,Q,F,aa,da,a),E(this,F,"sort",n,Q,F,aa,da,a)),Y&&Y.save()):
n.nextSibling!==za&&0<=(da=w(n,c.draggable))&&(E(this,F,"update",n,Q,F,aa,da,a),E(this,F,"sort",n,Q,F,aa,da,a)),y.active&&(null!=da&&-1!==da||(da=aa),E(this,F,"end",n,Q,F,aa,da,a),this.save())));this._nulling()},_nulling:function(){F=n=Q=G=za=K=fb=Da=gb=N.length=Ea=ib=jb=La=V=Ta=da=aa=Fa=Ma=Ga=Y=Sa=y.active=null;Ya.forEach(function(a){a.checked=!0});Ya.length=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":n&&(this._onDragOver(a),
a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a,b=[],c=this.el.children,l=0,k=c.length,m=this.options;l<k;l++)A(a=c[l],m.draggable,this.el,!1)&&b.push(a.getAttribute(m.dataIdAttr)||t(a));return b},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(l,k){k=c.children[k];A(k,this.options.draggable,c,!1)&&(b[l]=k)},this);a.forEach(function(l){b[l]&&(c.removeChild(b[l]),c.appendChild(b[l]))})},
save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return A(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];c[a]=b;"group"===a&&vb(c)},destroy:function(){var a=this.el;a[U]=null;g(a,"mousedown",this._onTapStart);g(a,"touchstart",this._onTapStart);g(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(g(a,"dragover",this),g(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),
function(b){b.removeAttribute("draggable")});this._onDrop();ua.splice(ua.indexOf(this.el),1);this.el=a=null},_hideClone:function(){K.cloneHidden||(v(K,"display","none"),K.cloneHidden=!0,K.parentNode&&this.options.removeCloneOnHide&&K.parentNode.removeChild(K))},_showClone:function(a){"clone"===a.lastPutMode?K.cloneHidden&&(F.contains(n)&&!this.options.group.revertClone?F.insertBefore(K,n):za?F.insertBefore(K,za):F.appendChild(K),this.options.group.revertClone&&this._animate(n,K),v(K,"display",""),
K.cloneHidden=!1):this._hideClone()}},p(C,"touchmove",function(a){(y.active||Oa)&&a.cancelable&&a.preventDefault()}),y.utils={on:p,off:g,css:v,find:T,is:function(a,b){return!!A(a,b,a,!1)},extend:Ba,throttle:Z,closest:A,toggleClass:B,clone:yb,index:w,nextTick:Ra,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:ub,getChild:q},y.create=function(a,b){return new y(a,b)},y.version="1.8.4",y})},"widgets/Bookmark/CustomBookmarks":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/sniff esri/SpatialReference jimu/BaseWidget dijit/_TemplatedMixin ./utils ./ItemNode jimu/dijit/ImageChooser libs/Sortable".split(" "),
function(y,A,p,g,B,v,H,T,E,f,u,h,q,d){return A([E,f,y],{baseClass:"dojoDndSource dojoDndTarget dojoDndContainer bookmarker-nodes",templateString:"\x3cdiv\x3e\x3c/div\x3e",nls:null,_CHANGING_IMG_BM:null,postCreate:function(){this.inherited(arguments);this.drawerHandle=g.create("div",{"class":"drawer-handle hide",innerHTML:"\x3cdiv class\x3d'separate-line'\x3e\x3c/div\x3e"},this.domNode);this.bookMarkerContainer=g.create("div",{"class":"custom editing"},this.domNode);this.imageChooserContainer=g.create("div",
{"class":"hide"},this.domNode)},startup:function(){this.inherited(arguments);var e=u.readBookmarksInWebmap(this.map);(!0===this.config.syncMode.webmap&&0<e.length||!0===this.config.syncMode.custom&&0<this.config.bookmarks2D.length)&&g.removeClass(this.drawerHandle,"hide");this.sortableBookMarkerNodes=d.create(this.bookMarkerContainer,{handle:".drag-masker",filter:".disable-drag .hide",sort:!0,disabled:!1,animation:100,onSort:p.hitch(this,function(){this.saveBookMarkersBySortable();this.emit("sort",
this.bookmarks)})});this.imageChooser=new q({cropImage:!1,showSelfImg:!0,goldenWidth:108,goldenHeight:71,maxSize:100,label:this.nls.selectFile,format:["image/gif","image/png","image/jpeg"]},this.imageChooserContainer);this.imageChooser.startup();this.own(v(this.imageChooser,"imageChange",p.hitch(this,"_onImageChange")))},toggleMobile:function(e){(this._IS_MOBILE=e)?this.sortableBookMarkerNodes.option("disabled",!0):this.sortableBookMarkerNodes.option("disabled",!1)},refresh:function(e){this.bookmarks=
e;u.updateBookmarks(this.bookmarks);this.displayBookmarks(this.bookmarks);this.toggleDrawer()},add:function(){var e=u.getAutoRenameBeforeAdd("bookmark",this.bookmarks),t={name:"bookmark",displayName:e,extent:this.map.extent.toJson(),isSaveLayers:this.config.isSaveLayerVisibility,isSaveExtent:!0};!0===this.config.isSaveLayerVisibility&&(t.layerOptions=u.getlayerInfos());"bookmark"!==e&&(t._autoRename=!0);this._doAddBookmark(t);this.bookmarks.unshift(t);t.itemNode&&t.itemNode.domNode&&g.place(t.itemNode.domNode,
this.bookMarkerContainer,"first");this.displayBookmarks(this.bookmarks);this.toggleDrawer();this.bookmarks.forEach(p.hitch(this,function(w,L){0===L?(h.enableEditable(w),h.focusLabel(w)):h.disableEditable(w)}));this.emit("added",this.bookmarks)},_doAddBookmark:function(e){var t={enableEditLabel:!0,editBtn:!1,changeImgBtn:!0,layerInfosIcon:u.isWithLayerInfos(e)};t=u.createBookMarkNode(e,this.nls,this.folderUrl,t);e.itemNode=t;this.own(v(t,"thumbnail-click",p.hitch(this,p.partial(this._onNodeBoxClick,
e))));this.own(v(t,"label-click",p.hitch(this,p.partial(this._onLebelClick,e))));this.own(v(t,"label-blur",p.hitch(this,p.partial(this._onLabelBlur,e))));this.own(v(t,"delete",p.hitch(this,p.partial(this._onBookmarkDeleteImmediately,e))));this.own(v(t,"change-img",p.hitch(this,p.partial(this._onBookmarkChangeImg,e))));this.own(v(t,"rename",p.hitch(this,p.partial(this._onRename,e))));return t},filter:function(e){this._LAST_FILTER_STR=e;u.filter(e,this.bookmarks)},displayBookmarks:function(e){u.empty(e,
this.bookMarkerContainer);B.forEach(e,function(t){t&&this._doAddBookmark(t)},this);e.forEach(p.hitch(this,function(t){t&&t.itemNode&&t.itemNode.domNode&&g.place(t.itemNode.domNode,this.bookMarkerContainer,"last")}))},saveBookMarkersBySortable:function(e){for(var t=this.sortableBookMarkerNodes.toArray(),w=[],L=0,Z=t.length;L<Z;L++){var Ba=u.findBookMarkByUID(t[L],this.bookmarks);Ba&&w.push(Ba.bookmark)}this.bookmarks=w;e&&e.isRefresh&&this.displayBookmarks(this.bookmarks)},_isListMode:function(){if(this.domNode){var e=
this.domNode.parentElement||this.domNode.parentNode;if(e)return g.hasClass(e,"list")}return!1},_onNodeBoxClick:function(e){require(["esri/geometry/Extent"],p.hitch(this,function(t){if(!1!==e.isSaveExtent){var w=e.extent;w.spatialReference?new T(w.spatialReference):new T({wkid:4326});this.map.setExtent(new t(w))}u.layerInfosRestoreState(e.isSaveLayers,e.layerOptions)}))},_onLebelClick:function(e){this._isListMode()||!0===this._IS_MOBILE?this._onNodeBoxClick(e):h.focusLabel(e)},_onLabelBlur:function(e){var t=
e.itemNode.nodeLabel.get("value");e.displayName=t;e.name=t;this.emit("label-blur",this.bookmarks);this.filter(this._LAST_FILTER_STR)},_onBookmarkDeleteImmediately:function(e){this.removeBookMarks([e])},removeBookMarks:function(e){for(var t=null,w=0,L=e.length;w<L;w++){var Z=u.findBookMark(e[w],this.bookmarks);Z&&Z.bookmark&&(Z.bookmark.itemNode&&Z.bookmark.itemNode.destroy(),t=u.findNextBookMarkByIdx(Z.idx,this.bookmarks),this.bookmarks.splice(Z.idx,1))}this.emit("delete",{bookmarks:this.bookmarks,
nextBookmark:t});this.toggleDrawer()},_onBookmarkChangeImg:function(e){this._CHANGING_IMG_BM=e;e=this.imageChooser.mask;if(H("safari")){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0);e.dispatchEvent(t)}else e.click()},_onImageChange:function(e){this._CHANGING_IMG_BM&&this._CHANGING_IMG_BM.itemNode&&(""!==e&&(this._CHANGING_IMG_BM.itemNode.changeImg(e),this._CHANGING_IMG_BM.thumbnail=e),this.emit("change-img",this.bookmarks))},_onRename:function(e){h.focusLabel(e)},toggleDrawer:function(){!0===
u.isBookmarksDataEmpty(this.bookmarks)?g.addClass(this.domNode,"hide"):g.removeClass(this.domNode,"hide")},hideDrawer:function(){g.addClass(this.bookMarkerContainer,"hide")},showDrawer:function(){g.removeClass(this.bookMarkerContainer,"hide")}})})},"widgets/Bookmark/a11y/Widget":function(){define(["dojo/query","dojo/_base/array","dojo/_base/html","jimu/utils","../ItemNode"],function(y,A,p,g,B){return{a11y_initFocusNodes:function(){var v=this._getFocusableNodes();v&&v.length&&(this._508_FIRST_FOCUS_NODE=
v[0],g.initFirstFocusNode(this.domNode,this._508_FIRST_FOCUS_NODE),0<v.length&&g.initLastFocusNode(this.domNode,v[v.length-1]))},a11y_focusAfterDelete:function(v){v&&v.itemNode&&v.itemNode.domNode?B.focusItem(v):this._508_FIRST_FOCUS_NODE.focus()},_getFocusableNodes:function(){var v=y('[tabindex $\x3d"0"]',this.domNode);return v=A.filter(v,function(H){return!p.hasClass(H,"dijitInputInner")&&(p.hasClass(H,"delete-btn")||"none"!==p.getStyle(H,"display"))},this)}}})},"widgets/Bookmark/_build-generate_module":function(){define(["dojo/text!./Widget.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Bookmark/HeadBar.html":'\x3cdiv class\x3d"header"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editableBtns" class\x3d"editable-btns"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"addBtn" class\x3d"add hide" title\x3d"${nls.labelBookmarkName}" tabindex\x3d"0" role\x3d"button"\x3e${nls.addBtn}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"oper-btns"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"filter" class\x3d"filter-container hide"\x3e\r\n\t\t\t\x3cdiv class\x3d"filter-input"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"filterInput" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n\t\t\t\t\tplaceHolder\x3d"${nls.searchBookmark}" required\x3d"false"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"search" data-dojo-attach-point\x3d"filterBtn" title\x3d"${nls.searchBookmark}"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3c!--\x3cdiv data-dojo-attach-point\x3d"commonFunBtns" class\x3d"common-fun-btns"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"syncBtn" class\x3d"head-btns sync-btn" title\x3d"${nls.syncTip}"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"backToInitBtn" class\x3d"head-btns back-to-init hide" title\x3d""\x3e\x3c/div\x3e--\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"displayMode" class\x3d"display-mode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"cardsBtn" class\x3d"head-btns cards hide" title\x3d"${nls.cardsTips}" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"listBtn" class\x3d"head-btns list hide" title\x3d"${nls.listTips}" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3c!--\x3cdiv data-dojo-attach-point\x3d"editBtns" class\x3d"edit-btns"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"renameBtn" class\x3d"head-btns rename" title\x3d"rename"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"deleteBtn" class\x3d"head-btns delete" title\x3d"delete"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e--\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/ItemNode.html":'\x3cdiv class\x3d"jimu-img-node jimu-float-leading clearFix" data-id\x3d"" tabindex\x3d"0" aria-label\x3d"" role\x3d"button"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"nodeBox" class\x3d"node-box verticalCenter no-user-select"\x3e\r\n\t\t\x3cimg data-dojo-attach-point\x3d"thumbnail" class\x3d"thumbnail" src\x3d""\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"nodeLabel" data-dojo-type\x3d"dijit/form/ValidationTextBox" required\x3d"true" data-dojo-props\x3d"trim:true"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"changeImgBtn" class\x3d"change-img-btn oper-btns no-user-select hide" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editBtn" class\x3d"edit-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"renameBtn" class\x3d"rename-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"deleteBtn" class\x3d"delete-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"dragMasker" class\x3d"drag-masker" tabindex\x3d"-1"\x3e\x3c/div\x3e\x3c!--for different browsers drag behavior--\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"layerInfosIcon" class\x3d"layer-info-icon icons no-user-select hide"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"selectedBtn" class\x3d"selected-btn oper-btns no-user-select hide"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/Widget.html":'\x3cdiv class\x3d""\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"headBarContainer" class\x3d"head-bar"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"bookmarksContainer" class\x3d"bookmarks-container cards"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"webmapBookmarksContainer"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"customBookmarksContainer"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c!--\r\n\t\x3cdiv data-dojo-attach-point\x3d"bookMarkerContainer" class\x3d"bookmarker-nodes cards"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editMenuContainer" class\x3d"edit-menu"\x3e\r\n\t\t\x3cdiv class\x3d"delete-btn edit-menu-btns" data-dojo-attach-point\x3d"deleteBtn" data-dojo-attach-event\x3d"onclick:_onEditMenuDelete"\x3e${nls.labelDelete}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"imageChooserContainer" class\x3d"hide"\x3e\x3c/div\x3e\r\n--\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/css/style.css":'.jimu-img-node{font-size: 12px; position: relative; float: left; color: #666; overflow: hidden;}.jimu-img-node .node-box{position: relative; border-radius: 4px; overflow: hidden;}.jimu-img-node img{width: 100%; height: 100%; cursor: pointer;}.jimu-img-node .node-label{height: 30px; text-align: center; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled{opacity: 1;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner {color: #000; opacity: 0.9;}.jimu-widget-bookmark .no-user-select{user-select: none; -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none;}.jimu-widget-bookmark .hide {display: none !important;}.jimu-widget-bookmark .clearFix {*overflow: hidden; *zoom: 1;}.jimu-widget-bookmark .clearFix:after {display: table; content: ""; width: 0; clear: both;}.jimu-widget-bookmark .verticalCenter{display: flex; align-items: center;}.jimu-widget-bookmark .jimu-img-node .node-box{margin: 0 auto; width: 100px; height: 60px;}.jimu-widget-bookmark .cards .jimu-img-node .drag-masker{width: 100px; height: 60px;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox {border: none; width: 100%; background-color: transparent;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField{background-color: transparent; width: 100%; overflow: hidden;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{white-space: nowrap; text-overflow: ellipsis; text-align: center;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitFocused{border:none !important; box-shadow: none; background-image: none;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitValidationTextBoxFocused{background-image: none;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitFocused .dijitInputInner{box-shadow: none; background: rgba(36, 181, 204, 0.2) !important;}.jimu-img-node .oper-btns{display: none; position: absolute; z-index: 10;}.jimu-img-node .icons{position: absolute; width: 20px; height: 20px; z-index: 10; background-color: #FFF;}.list .jimu-img-node .icons{display: none;}.editing .jimu-img-node .thumbnail{}.jimu-img-node .drag-masker{position: absolute; z-index: 5; top: 0; width: 100%; height: 60px; cursor: pointer;}.jimu-img-node .drag-masker:hover{background-color: transparent}.editing .jimu-img-node .oper-btns{width:20px; height:20px; cursor: pointer; background-color: rgba(0,0,0,0.5);}.editing .jimu-img-node .oper-btns:hover{background-color: rgba(0,0,0,0.7);}.editing .jimu-img-node .selected-btn{background: url("../images/btns/unselected.svg") no-repeat; left:0; top:0;}.editing .jimu-img-node.selected .selected-btn{background: url("../images/btns/selected.svg") no-repeat;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .delete-btn{cursor: pointer; top:0;}.jimu-rtl .jimu-widget-bookmark:not(.mobile) .jimu-img-node .delete-btn{right: auto;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .delete-btn::before{position: absolute; background-image: url("../images/btns/x.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.editing .jimu-img-node .edit-btn{right: 0; bottom: 30px;}.jimu-rtl .jimu-img-node .edit-btn{right: auto; left: 0;}.editing .jimu-img-node .edit-btn::before{position: absolute; display: block; background-image: url("../setting/css/images/btns/edit.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .rename-btn{display: none; top: 0px; left: 0px;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .rename-btn::before{position: absolute; display: block; background-image: url("../setting/css/images/btns/edit.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.editing .jimu-img-node .change-img-btn{right: calc((100% - 100px)/2); bottom: 30px;}.jimu-rtl .jimu-img-node .change-img-btn{right: auto; left: calc((100% - 100px)/2);}.editing .jimu-img-node .change-img-btn::before{position: absolute; background-image: url("../images/btns/change.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-img-node .layer-info-icon{left: calc((100% - 100px)/2); bottom: 30px;}.jimu-rtl .jimu-img-node .layer-info-icon{right: auto; right: calc((100% - 100px)/2);}.jimu-img-node .layer-info-icon::before{position: absolute; background-image: url("../images/btns/layer_infos.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-widget-bookmark .header {display: flex; align-items: center; justify-content: space-between; height: 30px; margin: 2px; margin-bottom: 15px;}.jimu-widget-bookmark .header .editable-btns,.jimu-widget-bookmark .header .common-fun-btns,.jimu-widget-bookmark .header .edit-btns,.jimu-widget-bookmark .header .common-fun-btns .display-mode{display: flex; align-items: center;}.jimu-widget-bookmark .header .common-fun-btns .display-mode {margin: 0 5px;}.jimu-widget-bookmark .header .two-modes .list{background: url("../images/btns/list.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .list:hover{background: url("../images/btns/list_selected.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .cards{background: url("../images/btns/cards.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .cards:hover{background: url("../images/btns/cards_selected.svg") no-repeat;}.jimu-widget-bookmark .adding .header .add{background: url("../images/btns/add_selected.svg") no-repeat;}.jimu-widget-bookmark .header .edit{background: url("../images/btns/edit.svg") no-repeat;}.jimu-widget-bookmark .editing .header .edit{background: url("../images/btns/edit_selected.svg") no-repeat;}.jimu-widget-bookmark .header .sync-btn{background: url("../images/btns/sync.svg") no-repeat;}.jimu-widget-bookmark .header .sync-btn.marked{background: url("../images/btns/sync.svg") no-repeat; background-color: red;}.jimu-widget-bookmark .header .back-to-init{background: url("../images/btns/backtoinit.svg") no-repeat;}.jimu-widget-bookmark .header .back-to-init.marked{background: url("../images/btns/backtoinit_selected.svg") no-repeat;}.jimu-widget-bookmark .header .rename{background: url("../images/btns/rename_selected.svg") no-repeat;}.jimu-widget-bookmark .header .rename.disable{background: url("../images/btns/rename.svg") no-repeat;}.jimu-widget-bookmark .header .delete{background: url("../images/btns/delete_selected.svg") no-repeat;}.jimu-widget-bookmark .header .delete.disable{background: url("../images/btns/delete.svg") no-repeat;}.jimu-widget-bookmark .header .edit-btns{display: none;}.jimu-widget-bookmark .editing .header .edit-btns{display: flex;}.jimu-widget-bookmark .header .common-fun-btns{display: flex;}.jimu-widget-bookmark .editing .header .common-fun-btns{display: none;}.bookmark-notice-popup{font-family: "Avenir Medium"; font-size: 12px;}.bookmark-notice-popup .tips{color: #000000; letter-spacing: 0;}.bookmark-notice-popup .check-box{position: absolute; bottom: 20px;}.bookmark-notice-popup .check-box .jimu-checkbox .label{font-size: 12px; color: #353535; letter-spacing: 0.3px;}.DartTheme .jimu-widget-bookmark .dijitTextBox{border: none !important;}.DartTheme .jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner {color: #FFF !important;}.jimu-widget-bookmark{width: 100%; height: 100%; overflow: hidden; position: relative;}.jimu-widget-bookmark .add-section{position: relative; height: 30px; margin-top: 7px; overflow: visible;}.jimu-widget-bookmark .input-bookmark-name{border-top-right-radius: 0; border-bottom-right-radius: 0; position: absolute; left: 0; top: 0; width: 100%;}.jimu-widget-bookmark .jimu-state-error{margin-top: 4px; visibility: hidden;}.jimu-widget-bookmark .bookmark-list{margin-bottom: 35px; width: 100%;}.jimu-widget-bookmark .play-section{overflow: hidden; margin-top: 20px; position: absolute; bottom: 0;}.jimu-widget-bookmark .jimu-btn{float: none; margin: auto; width: 100%;}.jimu-widget-bookmark .jimu-img-node{margin: 3px 0 8px 3px;}.jimu-rtl .jimu-widget-bookmark .jimu-img-node{margin: 3px 3px 8px 0;}.jimu-widget-bookmark .jimu-img-node .node-label{height: 2.7em; line-height: 16px; vertical-align: middle; padding: 0 5px; margin: 0 auto; width: 100px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;}.jimu-widget-bookmark .jimu-img-node .node-box{border-radius: 0; position: relative;}.jimu-widget-bookmark .jimu-img-node img{display: flex; width: 100%; height: 60px; opacity: 1; min-width: 80px;}.jimu-widget-bookmark .jimu-img-node.selected img{opacity: 0.4; transition: opacity .5s;}.jimu-widget-bookmark .cards .jimu-img-node:hover .dijitTextBox .dijitInputInner{color: #51B1FE !important;}.jimu-widget-bookmark .cards .jimu-img-node .drag-masker{left: 50%; transform: translate(-50%, 0%);}.jimu-widget-bookmark .cards .jimu-img-node .delete-btn{display: none; right:calc((100% - 100px)/2); justify-content: center; align-items: center;}.jimu-rtl .jimu-widget-bookmark .cards .jimu-img-node .delete-btn{right: auto; left: calc((100% - 100px)/2);}.jimu-widget-bookmark .cards .jimu-img-node.a11y_hover .delete-btn,.jimu-widget-bookmark .cards .jimu-img-node:hover .delete-btn{display: flex;}.jimu-widget-bookmark .cards .jimu-img-node .change-img-btn{display: none;}.jimu-widget-bookmark .cards .jimu-img-node.a11y_hover .change-img-btn,.jimu-widget-bookmark .cards .jimu-img-node:hover .change-img-btn{display: block;}.jimu-widget-bookmark .cards .jimu-img-node .dijitTextBox{max-width: 104px; width: 100%; margin: 0 auto; display: flex;}.jimu-widget-bookmark .list{}.jimu-widget-bookmark .list .jimu-img-node{width: calc(100% - 10px) !important; display: flex; height: 36px; margin-bottom: 8px;}.jimu-widget-bookmark .list .jimu-img-node:hover{background-color: #E2E2E2;}.DartTheme .jimu-widget-bookmark .list .jimu-img-node:hover{background-color: #444;}.jimu-widget-bookmark .list .node-box{height: 36px; width: 20px; margin: 0;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBoxFocused.dijitValidationTextBoxFocused{z-index: 99;}.jimu-widget-bookmark .list .node-box img{display: none;}.jimu-widget-bookmark .node-box:after{display: none;}.jimu-widget-bookmark .list .node-box:after{position: absolute; content: url(../images/btns/place.svg); display: block; height: 16px; top: 9px; left: 4px;}.jimu-widget-bookmark .list .with-layer-visibility.node-box:after{position: absolute; content: url(../images/btns/place_with_layer_visibility.svg); display: block; height: 16px; top: 9px; left: 4px;}.jimu-widget-bookmark .list .editing .node-box:after{top: 10px;}.jimu-rtl .jimu-widget-bookmark .list .node-box:after{left: auto; right: 3px;}.jimu-widget-bookmark .list.editing .node-box{display: none;}.jimu-widget-bookmark .list.editing .node-box:after{display: none;}.jimu-widget-bookmark .list.editing .jimu-img-node .node-box{margin: 0;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox{height: 36px;}.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField,.jimu-widget-bookmark .list .jimu-img-node .dijitTextBoxDisabled,.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputField{width: calc(100% - 70px); height: 100%;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputInner{height: 100%;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputInner{text-align: left;}.jimu-rtl .jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputInner{text-align: right;}.jimu-widget-bookmark .list.editing .head-btns{}.jimu-widget-bookmark .list .jimu-img-node .oper-btns{top: 8px;}.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .oper-btns{top: 8px;}.mobile .jimu-img-node .oper-btns{display: none;}.mobile .editing .jimu-img-node .oper-btns,.mobile .editing .jimu-img-node .oper-btns:hover,.jimu-widget-bookmark .list .editing .jimu-img-node .oper-btns,.jimu-widget-bookmark .list .editing .jimu-img-node .oper-btns:hover{background-color: transparent;}.mobile .editing .jimu-img-node .rename-btn:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .rename-btn:before{position: absolute; display: block; background-image: url(images/pencil.svg); background-size: 100%; width: 16px; height: 16px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.mobile .editing .jimu-img-node .rename-btn:hover:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .rename-btn:hover:before{background-image: url(images/pencil_hover.svg);}.mobile .editing .jimu-img-node .delete-btn:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .delete-btn:before{position: absolute; display: block; background-image: url(images/clear.svg); background-size: 100%; width: 16px; height: 16px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.mobile .editing .jimu-img-node .delete-btn:hover:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .delete-btn:hover:before{background-image: url(images/clear_hover.svg);}.mobile .editing .jimu-img-node .change-img-btn:before{position: absolute; display: block; background-image: url(images/change_img.svg); background-size: 100%; width: 16px; height: 16px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.mobile .editing .jimu-img-node .change-img-btn:hover:before{background-image: url(images/change_img_hover.svg);}.jimu-widget-bookmark .list.editing .jimu-img-node .selected-btn{position: relative; align-self: center;}.jimu-widget-bookmark .list.editing .jimu-img-node .close-btn{position: relative; background-color: green;}.jimu-widget-bookmark .list .jimu-img-node .delete-btn{left: auto; right: 15px; display: block;}.jimu-rtl .list .jimu-img-node .delete-btn{left: 15px; right: auto;}.jimu-widget-bookmark .list .jimu-img-node .change-img-btn{display: none;}.jimu-widget-bookmark .list .editing .jimu-img-node .rename-btn{display: block; left: auto; right: 50px;}.jimu-rtl .jimu-widget-bookmark .list .editing .jimu-img-node .rename-btn{left: 50px; right: auto;}.jimu-rtl .jimu-widget-bookmark .list .editing .jimu-img-node .change-img-btn{left: 85px; right: auto;}.jimu-widget-bookmark {position: relative; overflow: hidden;}.jimu-widget-bookmark .drawer-handle{width: 100%; display: flex; align-items: center; font-family: "Avenir Medium"; font-size: 14px; color: #000000; letter-spacing: 0.39px;}.jimu-widget-bookmark .drawer-handle .separate-line{margin: 10px 0 25px 0; border-top: 1px solid #eee; width: 100%;}.DartTheme .jimu-widget-bookmark .drawer-handle .separate-line{border-top: 1px solid #666;}.jimu-widget-bookmark .drop-down{display: flex; align-items: center; background: url(images/dropDown.svg) no-repeat; background-size: 6px 6px; width: 6px; height: 6px; cursor: pointer;}.jimu-widget-bookmark .drop-down.open{transform: rotate(0deg); -ms-transform: rotate(0deg); -moz-transform: rotate(0deg); -webkit-transform: rotate(0deg); -o-transform: rotate(0deg);}.jimu-widget-bookmark .drop-down{margin: 0 10px; transform: rotate(90deg); -ms-transform: rotate(90deg); -moz-transform: rotate(90deg); -webkit-transform: rotate(90deg); -o-transform: rotate(90deg);}.jimu-widget-bookmark .bookmarks-container{overflow-x: hidden; overflow-y: auto;}.jimu-widget-bookmark .bookmarker-nodes{overflow: inherit;}.jimu-widget-bookmark .dojoDndItemAnchor{padding: 0; border: none;}.jimu-widget-bookmark .header .oper-btns{width: 100%; height: 100%; display: flex; align-items: center; justify-content: flex-end;}.jimu-widget-bookmark .header .head-btns{width:16px; height:16px; margin: 4px; overflow: hidden; cursor: pointer;}.jimu-widget-bookmark .header .add{display: flex; align-items: center; justify-content: center; height:30px; min-width: 65px; padding: 0 10px; border: 1px solid #c7c7c7; color: #000; font-family: Avenir-Medium; font-size: 12px; cursor: pointer;}.jimu-widget-bookmark .header .add:hover{border: 1px solid #000;}.DartTheme .jimu-widget-bookmark .header .add{border: 1px solid #666; color: #FFF;}.DartTheme .jimu-widget-bookmark .header .add:hover{border: 1px solid #FFF;}.jimu-widget-bookmark .editable .header .filter-container{margin-left:20px;}.jimu-rtl .jimu-widget-bookmark .editable .header .filter-container{margin-left: auto; margin-right: 20px;}.jimu-widget-bookmark .header .filter-container{display: flex; position: relative; width: 100%; height: 100%; overflow: hidden;}.jimu-widget-bookmark .header .filter-container .filter-input{position: absolute; height: 30px; width: 100%;}.jimu-widget-bookmark .header .filter-container .dijitTextBox {width: 100%;}.jimu-widget-bookmark .header .filter-container .search{position: absolute; background: url(images/search.svg) no-repeat; background-size: contain; width: 16px; height: 16px; margin: 7px; right: 0; top: 0;}.jimu-rtl .jimu-widget-bookmark .header .filter-container .search{right: auto; left: 0;}.jimu-widget-bookmark .header .display-mode{margin: 0 10px;}.jimu-widget-bookmark:not(.mobile) .cards .header{margin-bottom: 25px;}.mobile.jimu-widget-bookmark {}.mobile.jimu-widget-bookmark .dojoDndSource:not(.editable) .header{height: 20px; margin-bottom: 5px;}.mobile.jimu-widget-bookmark .jimu-img-node{width:calc(100% - 10px) !important; display: flex; align-items: center; border-top: 1px solid rgba(230,230,230,0.5); margin-top: 0; margin-bottom: 0; padding: 4px 0;}.mobile.jimu-widget-bookmark .jimu-img-node .layer-info-icon {left: 0px; bottom: 9px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .layer-info-icon {left: auto; right: 0;}.DartTheme .mobile.jimu-widget-bookmark .jimu-img-node{border-top: 1px solid #333333}.mobile.jimu-widget-bookmark .jimu-img-node .drag-masker{width: 100%;}.mobile.jimu-widget-bookmark .cards .jimu-img-node .dijitTextBox{margin: 0; max-width: 100%;}.mobile.jimu-widget-bookmark .node-box{}.mobile.jimu-widget-bookmark .list.editing .node-box{display: flex;}.mobile.jimu-widget-bookmark .node-box img{max-height: 50px; max-width: 75px;}.mobile.jimu-widget-bookmark .editing .node-box{}.mobile.jimu-widget-bookmark .jimu-img-node .node-box{margin-left: 0; margin-right:10px;}.mobile.jimu-widget-bookmark .cards .jimu-img-node .node-box{min-width: 80px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .node-box{margin-left: 10px; margin-right:0;}.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField{max-width: 300px;}.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{text-align: left;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{text-align: right;}.mobile.jimu-widget-bookmark .drawer-handle .separate-line{margin-bottom: 0; border-top: 4px solid #F2F2F2;}.mobile.jimu-widget-bookmark {-webkit-touch-callout:none; -webkit-user-select:none; -khtml-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none;}.mobile.jimu-widget-bookmark .jimu-img-node .node-label{user-select: none; -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none;}.mobile.jimu-widget-bookmark .editing .jimu-img-node .selected-btn{position: relative; align-self: center;}.mobile.jimu-widget-bookmark .editing .jimu-img-node .close-btn{position: relative;}.mobile.jimu-widget-bookmark .jimu-img-node .change-img-btn {display: block; left: auto; right: 85px; bottom: auto;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .change-img-btn {left: 85px; right: auto;}.mobile.jimu-widget-bookmark .list .jimu-img-node .change-img-btn {display: none;}.mobile.jimu-widget-bookmark .jimu-img-node .rename-btn {display: block; left: auto; right: 50px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .rename-btn {left: 50px; right: auto;}.mobile.jimu-widget-bookmark .jimu-img-node .delete-btn {display: block; right: 15px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .delete-btn {left: 15px; right: auto;}',
"*now":function(y){y(['dojo/i18n!*preload*widgets/Bookmark/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html jimu/BaseWidget dojo/query dojo/on dojo/Deferred ./HeadBar ./WebmapBookmarks ./CustomBookmarks ./utils libs/storejs/store ./a11y/Widget".split(" "),function(y,A,p,g,B,v,H,T,E,f,u,h,q,d){y=y([B],{baseClass:"jimu-widget-bookmark dojoDndSource dojoDndTarget dojoDndContainer",name:"Bookmark",bookmarks:[],jimuNls:null,postMixInProperties:function(){this.jimuNls=window.jimuNls},startup:function(){this.inherited(arguments);h.isConfigBefore5_3(this.config)&&
h.setDefaultConfigForUpdate(this.config);this.headBar=new E({map:this.map,nls:this.nls,bookmarksContainer:this.bookmarksContainer,editMenuContainer:this.editMenuContainer,editable:this.config.editable,layout:this.config.layout},this.headBarContainer);this.headBar.startup();this.own(H(this.headBar,"add",A.hitch(this,function(){this.customBookmarks.add()})));this.own(H(this.headBar,"filter-change",A.hitch(this,function(e){this.webmapBookmarks.filter(e);this.customBookmarks.filter(e)})));this.webmapBookmarks=
new f({nls:this.nls,map:this.map,folderUrl:this.folderUrl,config:this.config},this.webmapBookmarksContainer);this.webmapBookmarks.startup();this.customBookmarks=new u({nls:this.nls,map:this.map,folderUrl:this.folderUrl,widgetId:this.id,config:this.config},this.customBookmarksContainer);this.customBookmarks.startup();this.own(H(this.customBookmarks,"sort",A.hitch(this,"_onSort")));this.own(H(this.customBookmarks,"change-img",A.hitch(this,"_onChangeImg")));this.own(H(this.customBookmarks,"delete",A.hitch(this,
"_onDelete")));this.own(H(this.customBookmarks,"label-blur",A.hitch(this,"_onLabelBlur")));this.own(H(this.customBookmarks,"added",A.hitch(this,"_onAdded")));this.resize()},_onLabelBlur:function(e){this.onBookmarksChange(e)},_onSort:function(e){this.onBookmarksChange(e)},_onChangeImg:function(e){this.onBookmarksChange(e)},_onDelete:function(e){var t=e.nextBookmark;this.onBookmarksChange(e.bookmarks);this.a11y_initFocusNodes();this.a11y_focusAfterDelete(t)},_onAdded:function(e){this.onBookmarksChange(e);
this.a11y_initFocusNodes()},onBookmarksChange:function(e){this._saveAllToLocalCache(e);this.resize()},onOpen:function(){this.webmapBookmarks.refresh();var e=this._getLocalCache();this.customBookmarks.refresh(e);this.resize();this.a11y_initFocusNodes()},destroy:function(){this.headBar&&(this.headBar.destroy(),this.headBar=null);this.webmapBookmarks&&(this.webmapBookmarks.destroy(),this.webmapBookmarks=null);this.customBookmarks&&(this.customBookmarks.destroy(),this.customBookmarks=null);this.inherited(arguments)},
onMinimize:function(){this.resize()},onMaximize:function(){this.resize()},resize:function(){window.appInfo.isRunInMobile?g.addClass(this.domNode,"mobile"):g.removeClass(this.domNode,"mobile");this.customBookmarks.toggleMobile(window.appInfo.isRunInMobile);var e=this.domNode.parentElement||this.domNode.parentNode;e&&(window.isRTL?g.setStyle(e,"padding-left","0"):g.setStyle(e,"padding-right","0"));this._getParentSize(e).then(A.hitch(this,function(t){var w=this.domNode;if(w){if(279<=t.w&&329>t.w)this._setNodeWidths(w,
130,100);else if(1>=Math.abs(t.w-330))this._setNodeWidths(w,100,100);else{var L=g.getMarginBox(w).w-20,Z=parseInt(L/100,10);0<Z&&(L=parseInt(L%100/Z,10),this._setNodeWidths(w,100+L,100))}this.setContainerHeight(t,e)}}))},_setNodeWidths:function(e,t,w){w+=4;t<w&&(t=w);v(".jimu-img-node",e).forEach(function(L){g.setStyle(L,"width",t+"px")})},getItemSize:function(){var e={};e.width=this.itemSize.width;e.height=this.itemSize.height;return e},setContainerWidth:function(e,t){g.setStyle(this.domNode,{width:(t.width+
2*this.hmargin)*Math.floor(e.w/(t.width+2*this.hmargin))+20+"px",margin:"0px auto"})},setContainerHeight:function(e,t){t=this._getDomHeight(".header",t);g.setStyle(this.bookmarksContainer,{height:e.h-t+"px"})},setItemPosition:function(e,t){var w={position:"relative",margin:this.vmargin+"px "+this.hmargin+"px"};0<=t.width&&(w.width=t.width+"px");0<=t.height&&(w.height=t.height+"px");g.setStyle(e.domNode,w);g.addClass(e.domNode,"jimu-float-leading")},_getDomHeight:function(e,t){var w=0;(e=v(e,t)[0])&&
(e=g.getMarginBox(e))&&e.h&&(w=e.h);return w},_getParentSize:function(e){var t=new T;setTimeout(A.hitch(this,function(){var w=g.getMarginBox(e),L=g.getPadExtents(e);w.h-=L.h;t.resolve(w)}),10);return t},_saveAllToLocalCache:function(e){var t=[];p.forEach(q.get(h.getKey(this.id)),function(w){q.remove(w)},this);p.forEach(e,function(w){var L=h.getKey(this.id)+"."+w.displayName;t.push(L);w=A.mixin({},w);w.itemNode&&delete w.itemNode;w._uID&&delete w._uID;try{q.set(L,w)}catch(Z){alert("localcache store error")}},
this);q.set(h.getKey(this.id),t)},_getLocalCache:function(){var e=this._getCacheByKeys(this._getOldKey()),t=this._getCacheByKeys(h.getKey(this.id)),w=this._getCacheUpdatedKey();0===t.length&&0<e.length&&!0!==q.get(w)&&(t=h.filterBookmarkFromTarget(e,this.config.bookmarks2D),this._saveAllToLocalCache(t),q.set(w,!0));return t},_getCacheUpdatedKey:function(){return h.getKey(this.id)+".BookmarkCacheUpdated"},_getCacheByKeys:function(e){var t=[];q.get(e)&&p.forEach(q.get(e),function(w){w.startWith(e)&&
(w=q.get(w),t.push(w))},this);return t},_getOldKey:function(){return this.appConfig.map["3D"]?this.name+".3D":this.name+".2D"}});y.extend(d);return y});