// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
/*
 Sortable 1.8.4 - MIT | git://github.com/SortableJS/Sortable.git */
require({cache:{"widgets/Bookmark/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/html dojox/html/entities jimu/utils ./ItemNode libs/storejs/store jimu/LayerInfos/LayerInfos".split(" "),function(E,C,v,y,u,r,z,D){var x={_uID:0,getUID:function(){return x._uID++},findBookMark:function(n,g){var d=-1,f=null;C.some(g,function(c,w){if(parseInt(c._uID,10)===parseInt(n._uID,10))return d=w,f=c,!0},this);return-1!==d?{bookmark:f,idx:d}:null},findBookMarkByUID:function(n,g){var d=-1,f=
null;C.some(g,function(c,w){if(parseInt(c._uID,10)===parseInt(n,10))return d=w,f=c,!0},this);return-1!==d?{bookmark:f,idx:d}:null},findNextBookMarkByIdx:function(n,g){var d=null;n+1<=g.length-1&&(d=g[n+1]);return d},findBookMarkByNameAndExtent:function(n,g){var d=-1,f=null;C.some(g,function(c,w){if(c.name===n.name&&c.extent&&n.extent&&c.extent.xmax===n.extent.xmax&&c.extent.xmin===n.extent.xmin&&c.extent.ymax===n.extent.ymax&&c.extent.ymin===n.extent.ymin)return d=w,f=c,!0},this);return-1!==d?{bookmark:f,
idx:d}:null},isBookmarksDataEmpty:function(n){return Array.isArray(n)&&0===n.length?!0:!1},empty:function(n,g){var d=n;C.forEach(n,function(f){f&&f.itemNode&&f.itemNode.destroy()},this);n=[];n=d;g&&v.empty(g)},createBookMarkNode:function(n,g,d,f,c){d=n.thumbnail||"undefined"!==typeof n.thumbnail&&""!==n.thumbnail?u.processUrlInWidgetConfig(n.thumbnail,d):u.processUrlInWidgetConfig("images/thumbnail_default.png",d);var w=x.getUID();n._uID=w;return new r({dataId:w,img:d,label:n.displayName||n.name,
display:f,nls:g,a11y:c})},cloneBookmarksDataWithOutDom:function(n){var g=[];if("undefined"===typeof n)return g;n.forEach(E.hitch(this,function(d){d.itemNode&&d.itemNode.domNode&&(d=E.clone(d),delete d.itemNode,g.push(d))}));return g},readBookmarksInWebmap:function(n){var g=[];if(!n.itemInfo||!n.itemInfo.itemData||!n.itemInfo.itemData.bookmarks)return g;C.forEach(n.itemInfo.itemData.bookmarks,function(d){d=E.mixin({},d);d.isInWebmap=!0;d.name=y.decode(d.name);g.push(d)},this);return g},filterBookmarkFromTarget:function(n,
g){for(var d=[],f=0,c=n.length;f<c;f++){var w=n[f];x.findBookmarkByNameOrExtent(w,g)||d.push(w)}return d},findBookmarkByNameOrExtent:function(n,g){var d=-1,f=null;C.some(g,function(c,w){if((c.displayName||c.name)===(n.displayName||n.name)||c.extent&&n.extent&&c.extent.xmax===n.extent.xmax&&c.extent.xmin===n.extent.xmin&&c.extent.ymax===n.extent.ymax&&c.extent.ymin===n.extent.ymin)return d=w,f=c,!0},this);return-1!==d?{bookmark:f,idx:d}:null},filter:function(n,g){g.forEach(function(d){"undefined"!==
typeof n&&""!==n?-1!==(d.displayName||d.name).indexOf(n)?r.show(d):r.hide(d):r.show(d)})},getKeysKey:function(){return this.appConfig.map["3D"]?this.name+".3D":this.name+".2D"},getAutoRenameBeforeAdd:function(n,g,d){var f=0,c=new RegExp(/\((\d+)\){1}$/g);C.forEach(g,function(w){w&&"undefined"!==typeof w.name&&-1!==w.name.indexOf(n)&&("undefined"===typeof d||!0===d&&n.length===w.name.length)&&(w=c.exec(w.displayName),null===w&&0===f?f=1:w&&"undefined"!==typeof w[1]&&w[1]>=f&&(f=parseInt(w[1],10)+1))});
return 0===f?n:n+"("+f+")"},processDuplicateName:function(n){for(var g=[],d={},f=n.length-1;0<=f;f--){var c=n[f];if(!c||"undefined"===typeof c.name)return;var w=c.name;w in d?d[w]++:d[w]=0;if(0<d[w]){var F=w+"("+d[w]+")";F in d?(d[F]++,d[w]++):d[F]=0;c.displayName=0<d[F]?w+"("+d[w]+")":F;c._autoRename=!0}else c.displayName=w;g.push(c)}n=g},toogleCheckboxChecked:function(n){n&&n.setValue&&n.setValue(!n.checked)},setCheckboxWithoutEvent:function(n,g){n&&n.check&&n.uncheck&&(!0===g?n.check(!0):n.uncheck(!0))},
layerInfosRestoreState:function(n,g){var d=D.getInstanceSync(),f={};if(g&&n){for(var c in g)if(g.hasOwnProperty(c)){n=g[c];var w=!1;w="undefined"===typeof n.visible?n.selected:n.visible;f[c]={visible:w}}d.restoreState({layerOptions:f})}},getlayerInfos:function(){var n={},g=D.getInstanceSync();g&&g.traversal&&g.traversal(E.hitch(this,function(d){n[d.id]={visible:d.isVisible()}}));return n},isWithLayerInfos:function(n){return n.layerOptions&&!1!==n.isSaveLayers?!0:!1},stringifyBookmarks:function(n){var g=
[];C.forEach(n,function(d){d=E.mixin({},d);d.itemNode&&delete d.itemNode;g.push(d)},this);return g},parseBookmarks:function(n){return E.clone(n)},getKey:function(n){return"Bookmark.2D."+encodeURIComponent(u.getAppIdFromUrl())+"."+n},isConfigBefore5_3:function(n){return"undefined"===typeof n.syncMode||!0===n.needToUpdateFlag?!0:!1},getUpdateCacheKey:function(n){return"bookmark_cache_updated_"+encodeURIComponent(x.getKey(n))},setUpdateCacheKey:function(n){z.set(x.getUpdateCacheKey(n),!0)},isCacheKeyUpdatedy:function(n){return z.get(x.getUpdateCacheKey(n))},
setDefaultConfigForUpdate:function(n){n.needToUpdateFlag=!0;n.layout={cards:!0,list:!1,defaultMode:"cards"};n.editable=!0;Array.isArray(n.bookmarks2D)&&0<n.bookmarks2D.length?n.syncMode={webmap:!1,custom:!0}:n.syncMode={webmap:!0,custom:!0}},completeUpdateConfig:function(n){n.needToUpdateFlag&&delete n.needToUpdateFlag},updateBookmarks:function(n){for(var g=0;g<n.length;g++)"undefined"===typeof n[g]&&(n.splice(g,1),g--);var d=/\/widgets\/Bookmark\/images\/thumbnail_default.png$/;C.forEach(n,function(f){"undefined"===
typeof f.isSaveExtent&&(f.isSaveExtent=!0);f.thumbnail&&d.test(f.thumbnail)&&delete f.thumbnail},this)},getLayoutRecorderKey:function(){return"bookMarkLayout_"+encodeURIComponent(u.getAppIdFromUrl())},cleanLayoutRecorder:function(n){z.remove(x.getLayoutRecorderKey(n))},setLastLayout:function(n){z.set(x.getLayoutRecorderKey(),n)},getLastLayout:function(){return z.get(x.getLayoutRecorderKey())},oldBookmarksBackup:'[{"displayName":"Greater Manchester or Greater Lincolnshire HAHAHAHA","name":"Greater Manchester or Greater Lincolnshire HAHAHAHA","extent":{"type":"extent","xmin":8997982.70263581,"ymin":2110475.6293307655,"xmax":14672667.682525788,"ymax":6024051.4775307495,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"Peterborough and Cambridgeshire HEHEHEHEHEH","name":"Peterborough and Cambridgeshire HEHEHEHEHEH","extent":{"type":"extent","xmin":9055621.33977054,"ymin":445965.34674161975,"xmax":14730306.319660518,"ymax":4359541.194941604,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"mentougou biejing china","name":"mentougou biejing china","extent":{"type":"extent","xmin":9502343.119353313,"ymin":3151483.465165457,"xmax":15177028.09924329,"ymax":7065059.313365442,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u51e4\u51f0\u7f6e\u5730\u4e09\u5143\u6865\u5317\u4eac\u4e2d\u56fd\u4e16\u754c\u592a\u9633\u7cfb\u5b87\u5b99","name":"\u51e4\u51f0\u7f6e\u5730\u4e09\u5143\u6865\u5317\u4eac\u4e2d\u56fd\u4e16\u754c\u592a\u9633\u7cfb\u5b87\u5b99","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u77ed\u4e2d\u6587","name":"\u77ed\u4e2d\u6587","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"short","name":"short","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u4e2d\u6587 English","name":"\u4e2d\u6587 English","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"Underneath the icons","name":"Underneath the icons","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u4e2d\u6587\u4e2d\u6587 \u5475\u5475","name":"\u4e2d\u6587\u4e2d\u6587 \u5475\u5475","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"eee RTL","name":"eee RTL","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false}]',
_testUpdateOldConfig:function(){return{bookmarks2D:[{extent:{spatialReference:{wkid:102100},xmax:-1656069.6628128502,xmin:-1.0861390956860503E7,ymax:1.510258315961978E7,ymin:-1119447.7364922247},name:"bm1",isInWebmap:!0,displayName:"bm1"},{extent:{spatialReference:{wkid:102100},xmax:-1656069.6628128502,xmin:-1.0861390956860503E7,ymax:1.510258315961978E7,ymin:-1119447.7364922247},name:"bm1",isInWebmap:!0,displayName:"bm1(1)"},{extent:{spatialReference:{wkid:102100},xmax:-3197863.7584074493,xmin:-1.3112899816301128E7,
ymax:1.1466459916526379E7,ymin:-4859686.568575533},name:"bm2",isInWebmap:!0,displayName:"bm2"},{extent:{spatialReference:{wkid:102100},xmax:-3767577.3201611056,xmin:-1.430429896767071E7,ymax:1.5120033300894285E7,ymin:-4622246.062418217},name:"Untitled",isInWebmap:!0,displayName:"Untitled"},{extent:{spatialReference:{wkid:102100},xmax:-4334684.982862408,xmin:-1.6556089386187213E7,ymax:1.6750523655935397E7,ymin:-5666212.383958025},name:"Untitled",isInWebmap:!0,displayName:"Untitled(1)"}],bookmarks3D:[],
flyTime:3E3}},_testSetOldCache:function(n){var g=[];C.forEach(n,function(d){var f="Bookmark.2D."+d.displayName;g.push(f);d=E.mixin({},d);d.itemNode&&delete d.itemNode;d._uID&&delete d._uID;try{z.set(f,d)}catch(c){alert("store error\x3d\x3d\x3e")}},this);z.set("Bookmark.2D",g)},_testSetOldCacheBookmark:function(){return JSON.parse('[{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-8273877.24778316,"xmin":-14295892.084200885,"ymax":6466269.8495007465,"ymin":2983187.344602761},"name":"bm1","isInWebmap":true,"displayName":"bm1"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-8004818.908219411,"xmin":-11015826.326428276,"ymax":5527011.645932751,"ymin":3785470.393483758},"name":"bm1","isInWebmap":true,"displayName":"bm1(1)"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-12874774.854323175,"xmin":-13627526.708875552,"ymax":4655629.523482032,"ymin":4220244.210369689},"name":"bm2","isInWebmap":true,"displayName":"bm2"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-11618761.605541585,"xmin":-14629769.023750449,"ymax":6691911.956998556,"ymin":4950370.704549563},"name":"bm3","isInWebmap":true,"displayName":"bm3"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-4317189.3003047705,"xmin":-16361218.973140221,"ymax":10449906.504800193,"ymin":3483741.495004222},"name":"bm4","isInWebmap":true,"displayName":"bm4"},{"name":"add-inRT-1","displayName":"add-inRT-1","extent":{"xmin":-14714155.502977258,"ymin":2694561.125798012,"xmax":-7855613.8290067855,"ymax":6754896.068305495,"spatialReference":{"wkid":102100,"latestWkid":3857}}},{"name":"add-inRT-2","displayName":"add-inRT-2","extent":{"xmin":-14714155.502977258,"ymin":2694561.125798012,"xmax":-7855613.8290067855,"ymax":6754896.068305495,"spatialReference":{"wkid":102100,"latestWkid":3857}}}]')}};
return x})},"widgets/Bookmark/ItemNode":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dijit/a11yclick jimu/BaseWidget dijit/_WidgetsInTemplateMixin ./a11y/ItemNode dojo/on dojo/query jimu/utils dojo/text!./ItemNode.html dojo/mouse dijit/form/ValidationTextBox".split(" "),function(E,C,v,y,u,r,z,D,x,n,g,d){var f={};f=C([r,z,E],{templateString:d,isSelected:!1,postMixInProperties:function(){this.nls=v.mixin(this.nls,window.jimuNls.common)},postCreate:function(){y.setAttr(this.domNode,
"data-id",g.sanitizeHTML(this.dataId));this.img&&y.setAttr(this.thumbnail,"src",this.img);this.nls&&(y.setAttr(this.deleteBtn,"title",this.nls.deleteBtnTip),y.setAttr(this.editBtn,"title",this.nls.editBtnTip),y.setAttr(this.changeImgBtn,"title",this.nls.changeThumbnailTip),y.setAttr(this.renameBtn,"title",this.nls.editBtnTip),y.setAttr(this.thumbnail,"title",this.nls.dragReorderTip),y.setAttr(this.layerInfosIcon,"title",this.nls.withVisibility));this.display&&(!1===this.display.selectedBtn&&y.addClass(this.selectedBtn,
"hide"),!1===this.display.editBtn&&y.addClass(this.editBtn,"hide"),!1===this.display.deleteBtn&&y.addClass(this.deleteBtn,"hide"),!1===this.display.renameBtn&&y.addClass(this.renameBtn,"hide"),!0===this.display.selectedBtn&&y.removeClass(this.selectedBtn,"hide"),!0===this.display.changeImgBtn&&y.removeClass(this.changeImgBtn,"hide"),!0===this.display.layerInfosIcon&&(y.removeClass(this.layerInfosIcon,"hide"),y.addClass(this.nodeBox,"with-layer-visibility")));this.a11y_display();this.nodeLabel.setValue(this.label);
this._updateLabelTooltips(this.label);this.own(x(this.selectedBtn,u,v.hitch(this,this.onSelected)));this.own(x(this.deleteBtn,u,v.hitch(this,this.onDelete)));this.own(x(this.editBtn,u,v.hitch(this,this.onEdit)));this.own(x(this.changeImgBtn,u,v.hitch(this,this.onChangeImg)));this.own(x(this.renameBtn,u,v.hitch(this,this.onRenameClick)));this.own(x(this.nodeBox,u,v.hitch(this,this.onNodeBoxClick)));this.own(x(this.dragMasker,"click",v.hitch(this,this.onNodeBoxClick)));!0===this.display.enableEditLabel?
(this.own(x(this.nodeLabel,u,v.hitch(this,this.onLabelClick))),this.own(x(this.nodeLabel,"change",v.hitch(this,this.onLabelChange))),this.own(x(this.nodeLabel,"blur",v.hitch(this,this.onLabelBlur)))):this.nodeLabel.setDisabled(!0);this.own(x(this.nodeLabel,"contextmenu",v.hitch(this,function(c){c.preventDefault()})));this.own(x(this.nodeBox,"contextmenu",v.hitch(this,function(c){c.preventDefault()})));this.a11y_initEvents()},onClick:function(){n(".jimu-img-node",this.getParent().domNode).removeClass("jimu-state-selected");
n(this.domNode).addClass("jimu-state-selected");this.emit("click")},onNodeBoxClick:function(c){c&&c.stopPropagation&&c.preventDefault&&(c.stopPropagation(),c.preventDefault());this.emit("thumbnail-click")},onLabelClick:function(c){c&&c.stopPropagation&&c.preventDefault&&(c.stopPropagation(),c.preventDefault());this.emit("label-click")},onLabelChange:function(c){this._updateLabelTooltips(c)},onLabelBlur:function(c){c&&c.stopPropagation&&c.preventDefault&&(c.stopPropagation(),c.preventDefault());c=
this.nodeLabel.get("value");this._updateLabelTooltips(c);this.emit("label-blur")},onSelected:function(c){c&&c.stopPropagation&&c.preventDefault&&(c.stopPropagation(),c.preventDefault());y.hasClass(this.domNode,"selected")?(y.removeClass(this.domNode,"selected"),this.isSelected=!1,!1!==c&&this.emit("unselected")):(y.addClass(this.domNode,"selected"),this.isSelected=!0,!1!==c&&this.emit("selected"))},onDelete:function(c){c&&c.stopPropagation&&c.preventDefault&&(c.stopPropagation(),c.preventDefault());
this.emit("delete")},onEdit:function(c){c&&c.stopPropagation&&c.preventDefault&&(c.stopPropagation(),c.preventDefault());this.emit("edit")},onChangeImg:function(c){c&&c.stopPropagation&&c.preventDefault&&(c.stopPropagation(),c.preventDefault());this.emit("change-img")},changeImg:function(c){y.setAttr(this.thumbnail,"src",c)},onRenameClick:function(c){c&&c.stopPropagation&&c.preventDefault&&(c.stopPropagation(),c.preventDefault());this.emit("rename")},highLight:function(){n(".jimu-img-node",this.getParent().domNode).removeClass("jimu-state-selected");
n(this.domNode).addClass("jimu-state-selected")},startup:function(){this.inherited(arguments)},destroy:function(){this.inherited(arguments);y.destroy(this.domNode)},_updateLabelTooltips:function(c){c&&(y.setAttr(this.nodeLabel,"title",c),this.dragMasker&&y.setAttr(this.dragMasker,"title",c),this.a11y_updateItemLabel(c))}});f.addFloatLeading=function(c){c.itemNode&&c.itemNode.domNode&&(n(".selected-btn",c.itemNode.domNode).forEach(function(w){y.addClass(w,"jimu-float-leading")}),n(".node-box",c.itemNode.domNode).forEach(function(w){y.addClass(w,
"jimu-float-leading")}),n(".node-label",c.itemNode.domNode).forEach(function(w){y.addClass(w,"jimu-float-leading")}),n(".close-btn",c.itemNode.domNode).forEach(function(w){y.addClass(w,"jimu-float-leading")}))};f.removeFloatLeading=function(c){c.itemNode&&c.itemNode.domNode&&(n(".selected-btn",c.itemNode.domNode).forEach(function(w){y.removeClass(w,"jimu-float-leading")}),n(".node-box",c.itemNode.domNode).forEach(function(w){y.removeClass(w,"jimu-float-leading")}),n(".node-label",c.itemNode.domNode).forEach(function(w){y.removeClass(w,
"jimu-float-leading")}),n(".close-btn",c.itemNode.domNode).forEach(function(w){y.removeClass(w,"jimu-float-leading")}))};f.toggleEditable=function(c){c.itemNode&&c.itemNode.nodeLabel&&(c.itemNode.nodeLabel.disabled?f.enableEditable(c):f.disableEditable(c))};f.disableEditable=function(){};f.enableEditable=function(){};f.focusLabel=function(c){c.itemNode&&c.itemNode.nodeLabel&&(c.itemNode.nodeLabel.focus(),c.itemNode.domNode&&y.addClass(c.itemNode.domNode,"a11y_hover"))};f.focusItem=function(c){c&&
c.itemNode&&c.itemNode.domNode&&c.itemNode.domNode.focus()};f.unSelected=function(c){c.itemNode&&c.itemNode&&(c=c.itemNode,y.removeClass(c.domNode,"selected"),c.isSelected=!1)};f.show=function(c){c&&c.itemNode&&(c=c.itemNode,y.removeClass(c.domNode,"hide"),c.isShow=!0)};f.hide=function(c){c&&c.itemNode&&(c=c.itemNode,y.addClass(c.domNode,"hide"),c.isShow=!1)};f.extend(D);return f})},"widgets/Bookmark/a11y/ItemNode":function(){define(["dojo/_base/lang","dojo/on","dojo/_base/html","dojo/keys"],function(E,
C,v,y){return{a11y_removeTabindex:function(u){v.removeAttr(u,"tabindex")},a11y_setTabindex:function(u,r){v.setAttr(u,"tabindex",r||0)},a11y_display:function(){this.a11y&&(!1===this.a11y.selectedBtn&&this.a11y_removeTabindex(this.selectedBtn),!1===this.a11y.editBtn&&this.a11y_removeTabindex(this.editBtn),!1===this.a11y.deleteBtn&&this.a11y_removeTabindex(this.deleteBtn),!1===this.a11y.renameBtn&&this.a11y_removeTabindex(this.renameBtn),!1===this.a11y.changeImgBtn&&this.a11y_removeTabindex(this.changeImgBtn))},
a11y_updateItemLabel:function(u){v.setAttr(this.domNode,"aria-label",u)},a11y_initEvents:function(){this.own(C(this.domNode,"keydown",E.hitch(this,function(u){var r=v.hasClass(u.target,"jimu-img-node");if(u.keyCode===y.ENTER&&r)this.onNodeBoxClick();this.a11y_checkFocus()})));this.own(C(this.domNode,"mouseout",E.hitch(this,function(){v.removeClass(this.domNode,"a11y_hover")})));this.own(C(this.domNode,"focus",E.hitch(this,function(){v.addClass(this.domNode,"a11y_hover")})))},a11y_focusToLabel:function(u){setTimeout(function(){u.focus()},
0)},a11y_focusToBtns:function(u){setTimeout(function(){u.focus()},0)},a11y_checkFocus:function(){setTimeout(E.hitch(this,function(){v.isDescendant(document.activeElement,this.domNode)||v.removeClass(this.domNode,"a11y_hover")}),50)}}})},"widgets/Bookmark/setting/Layout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/on dojo/text!./Layout.html ../utils".split(" "),function(E,C,v,y,u,r,z,D){return E([y,u],{templateString:z,
startup:function(){this.own(r(this.layoutCards_checkBox,"change",C.hitch(this,function(){this._fixLayoutModeByCheckBoxChanged("cards");this._keepLayoutSelected(this.layoutCards_checkBox)})));this.own(r(this.layoutList_checkBox,"change",C.hitch(this,function(){this._fixLayoutModeByCheckBoxChanged("list");this._keepLayoutSelected(this.layoutList_checkBox)})));this.own(r(this.layoutCards,"click",C.hitch(this,function(){D.toogleCheckboxChecked(this.layoutCards_checkBox);this._keepLayoutSelected(this.layoutCards_checkBox)})));
this.own(r(this.layoutList,"click",C.hitch(this,function(){D.toogleCheckboxChecked(this.layoutList_checkBox);this._keepLayoutSelected(this.layoutList_checkBox)})));this.own(r(this.layoutCards,"mouseover",C.hitch(this,function(){this._isCardAndListChecked()&&v.removeClass(this.cardsDefaultSetting,"transparent")})));this.own(r(this.layoutCards,"mouseout",C.hitch(this,function(){"list"===this.config.layout.defaultMode&&v.addClass(this.cardsDefaultSetting,"transparent")})));this.own(r(this.layoutList,
"mouseover",C.hitch(this,function(){this._isCardAndListChecked()&&v.removeClass(this.listDefaultSetting,"transparent")})));this.own(r(this.layoutList,"mouseout",C.hitch(this,function(){"cards"===this.config.layout.defaultMode&&v.addClass(this.listDefaultSetting,"transparent")})));this.own(r(this.cardsDefaultSetting,"click",C.hitch(this,function(x){x&&x.stopPropagation&&x.preventDefault&&(x.stopPropagation(),x.preventDefault());this._whetherToggleDefaultLayout("cards")&&(this.config.layout.defaultMode=
"cards",this._setDefault("cards"))})));this.own(r(this.listDefaultSetting,"click",C.hitch(this,function(x){x&&x.stopPropagation&&x.preventDefault&&(x.stopPropagation(),x.preventDefault());this._whetherToggleDefaultLayout("list")&&(this.config.layout.defaultMode="list",this._setDefault("list"))})));this.inherited(arguments)},setConfig:function(x){this.config.layout=x.layout;this.config.layout&&(!0===this.config.layout.cards&&this.layoutCards_checkBox.setValue(!0),!0===this.config.layout.list&&this.layoutList_checkBox.setValue(!0));
this._setDefault(this.config.layout.defaultMode)},getConfig:function(){this.config.layout.cards=!0===this.layoutCards_checkBox.checked?!0:!1;this.config.layout.list=!0===this.layoutList_checkBox.checked?!0:!1;return this.config.layout},_keepLayoutSelected:function(x){!1===this.layoutCards_checkBox.checked&&!1===this.layoutList_checkBox.checked&&D.toogleCheckboxChecked(x)},_setDefault:function(x){var n="";n="cards"===x?"list":"cards";v.removeClass(this[x+"DefaultSetting"],"transparent");var g=this[x+
"_makeAsDefault"];g&&v.addClass(g,"hide");(g=this[x+"_default"])&&v.removeClass(g,"hide");v.addClass(this[n+"DefaultSetting"],"transparent");(g=this[n+"_makeAsDefault"])&&v.removeClass(g,"hide");(g=this[n+"_default"])&&v.addClass(g,"hide");this._isCardAndListChecked()||(v.addClass(this[x+"DefaultSetting"],"transparent"),v.addClass(this[n+"DefaultSetting"],"transparent"))},_whetherToggleDefaultLayout:function(x){var n="cards"===x?this.layoutCards_checkBox:this.layoutList_checkBox;return("cards"===
x?"list":"cards")===this.config.layout.defaultMode&&!0===n.checked?!0:!1},_fixLayoutModeByCheckBoxChanged:function(x){this._isCardAndListChecked()?"list"===this.config.layout.defaultMode?v.removeClass(this.listDefaultSetting,"transparent"):v.removeClass(this.cardsDefaultSetting,"transparent"):(v.addClass(this.listDefaultSetting,"transparent"),v.addClass(this.cardsDefaultSetting,"transparent"));"cards"===x?!1===this.layoutCards_checkBox.checked&&!0===this.layoutList_checkBox.checked&&"cards"===this.config.layout.defaultMode&&
(this.config.layout.defaultMode="list",this._setDefault("list")):!1===this.layoutList_checkBox.checked&&!0===this.layoutCards_checkBox.checked&&"list"===this.config.layout.defaultMode&&(this.config.layout.defaultMode="cards",this._setDefault("cards"))},_isCardAndListChecked:function(){return!0===this.layoutCards_checkBox.getValue()&&!0===this.layoutList_checkBox.getValue()?!0:!1}})})},"widgets/Bookmark/setting/Sync":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/keys jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/on dojo/_base/html jimu/dijit/Popup jimu/dijit/Message ./Edit ./Import dojo/text!./Sync.html ../utils jimu/dijit/CheckBox libs/Sortable".split(" "),
function(E,C,v,y,u,r,z,D,x,n,g,d,f,c,w,F){return E([u,r],{templateString:f,map:null,edit:null,popup:null,popupState:"",editIndex:null,startup:function(){this.webMapBookmarksNodes=F.create(this.webMapBookMarkerContainer,{sort:!1,disabled:!0,animation:100});this.sortableBookMarkerNodes=F.create(this.custombookMarkerContainer,{handle:".drag-masker",sort:!0,disabled:!1,animation:100,onSort:C.hitch(this,function(){this.saveBookMarkersBySortable()})});this.isSyncWebmapCheckBox=new w({label:this.nls.alwaysSync,
checked:!1},this.isSyncWebmapNode);this.isSyncWebmapCheckBox.startup();this.isSyncCustomCheckBox=new w({label:this.nls.configCustom,checked:!1},this.isSyncCustomNode);this.isSyncCustomCheckBox.startup();this.own(z(this.isSyncWebmapCheckBox,"change",C.hitch(this,function(){!0===this.isSyncWebmapCheckBox.getValue()?this.showWebmapBookmarks():this.hideWebmapBookmarks()})));this.own(z(this.isSyncCustomCheckBox,"change",C.hitch(this,function(){!0===this.isSyncCustomCheckBox.getValue()?this.showCustomBookmarks():
this.hideCustomBookmarks()})));this.own(z(this.createNewBtn,"click",C.hitch(this,function(){this.onAddBookmarkClick()})));this.hideWebmapBookmarks();this.hideCustomBookmarks();this.inherited(arguments)},showWebmapBookmarks:function(){D.removeClass(this.webMapBookMarkerContainer,"hide");c.empty(this._bookmarksInWebmap);this._bookmarksInWebmap=c.readBookmarksInWebmap(this.map);this._bookmarksInWebmap=this.displayBookmarks({bookmarks:this._bookmarksInWebmap,syncMode:"webmap",bookmarksContainerNode:this.webMapBookMarkerContainer})},
hideWebmapBookmarks:function(){D.addClass(this.webMapBookMarkerContainer,"hide")},showCustomBookmarks:function(){D.removeClass(this.customBtns,"hide");D.removeClass(this.custombookMarkerContainer,"hide");"undefined"===typeof this._customBookmarks&&(c.empty(this._customBookmarks),this._customBookmarks=this.config.bookmarks2D,this._customBookmarks=this.displayBookmarks({bookmarks:this._customBookmarks,syncMode:"custom",bookmarksContainerNode:this.custombookMarkerContainer}))},hideCustomBookmarks:function(){D.addClass(this.customBtns,
"hide");D.addClass(this.custombookMarkerContainer,"hide")},destroy:function(){this.webMapBookmarksNodes&&this.webMapBookmarksNodes.destroy&&(this.webMapBookmarksNodes.destroy(),this.webMapBookmarksNodes=null);this.sortableBookMarkerNodes&&(this.sortableBookMarkerNodes.destroy(),this.sortableBookMarkerNodes=null);v.forEach(this._bookmarksInWebmap,function(K){K.itemNode&&K.itemNode.destroy()},this);this._bookmarksInWebmap=[];v.forEach(this._customBookmarks,function(K){K.itemNode&&K.itemNode.destroy()},
this);this._customBookmarks=[];this.inherited(arguments)},setConfig:function(K){this.config=K;!0===this.config.syncMode.webmap&&this.isSyncWebmapCheckBox.setValue(!0);!0===this.config.syncMode.custom&&this.isSyncCustomCheckBox.setValue(!0)},getConfig:function(){!0===this.isSyncWebmapCheckBox.getValue()?this.config.syncMode.webmap=!0:this.config.syncMode.webmap=!1;!0===this.isSyncCustomCheckBox.getValue()?this.config.syncMode.custom=!0:this.config.syncMode.custom=!1;var K=[];K=K.concat(this._customBookmarks);
return{syncMode:this.config.syncMode,bookmarks:K}},displayBookmarks:function(K){var A=K.bookmarks,N=K.syncMode,B=K.bookmarksContainerNode||this.custombookMarkerContainer;c.empty(A);var I={};I="webmap"===N?{editBtn:!1,selectedBtn:!1,deleteBtn:!1,renameBtn:!1}:{editBtn:!0,selectedBtn:!1,deleteBtn:!0,renameBtn:!1};v.forEach(A,function(Q){if(Q){I.layerInfosIcon=c.isWithLayerInfos(Q);var P=c.createBookMarkNode(Q,this.nls,this.folderUrl,I);Q.itemNode=P;this.own(z(P,"thumbnail-click",C.hitch(this,C.partial(this._onBookmarkClick,
Q))));this.own(z(P,"delete",C.hitch(this,C.partial(this._onBookmarkDeleteImmediately,Q))));this.own(z(P,"edit",C.hitch(this,C.partial(this._onBookmarkEdit,Q))))}},this);A.forEach(C.hitch(this,function(Q){Q&&Q.itemNode&&Q.itemNode.domNode&&D.place(Q.itemNode.domNode,B,"last")}));return A},saveBookMarkersBySortable:function(){for(var K=this.sortableBookMarkerNodes.toArray(),A=[],N=0,B=K.length;N<B;N++){var I=c.findBookMarkByUID(K[N],this._customBookmarks);I&&A.push(I.bookmark)}this._customBookmarks=
A;this.displayBookmarks({bookmarks:this._customBookmarks,syncMode:"custom"})},getBookmarkByName:function(K){for(var A=this._customBookmarks.length,N=0;N<A;N++)if(this._customBookmarks[N].displayName===K)return this.editIndex=N,this._customBookmarks[N]},onAddBookmarkClick:function(){this.popupState="ADD";this._openEdit(this.nls.addBookmark,{name:"",thumbnail:"",extent:this.map.extent.toJson()})},_onBookmarkEdit:function(K){this.popupState="EDIT";this._openEdit(this.nls.edit,K)},_onBookmarkDeleteImmediately:function(K){(K=
c.findBookMark(K,this._customBookmarks))&&K.bookmark&&(K.bookmark.itemNode&&K.bookmark.itemNode.destroy(),this._customBookmarks.splice(K.idx,1))},_openEdit:function(K,A){this.edit=new g({nls:this.nls,folderUrl:this.folderUrl,portalUrl:this.appConfig.map.portalUrl,itemId:this.appConfig.map.itemId,mapOptions:this.appConfig.map.mapOptions});this.edit.setConfig(A||{});this.popup=new x({titleLabel:K,autoHeight:!0,content:this.edit,container:"main-page",width:600,buttons:[{label:this.nls.ok,key:y.ENTER,
disable:!0,onClick:C.hitch(this,"_onEditOk",A)},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],key:y.ESCAPE}],onClose:C.hitch(this,"_onEditClose")});D.addClass(this.popup.domNode,"widget-setting-popup");this.edit.startup()},_onEditOk:function(K){var A=this.edit.getConfig(),N=null;if(A.name&&A.extent){"EDIT"===this.popupState&&(K=C.mixin(K,A));K=A.name;var B=c.getAutoRenameBeforeAdd(K,this._customBookmarks,!0);A.name=K;A.displayName=B;"ADD"===this.popupState?(this.addBookmark(A),N=!0):"EDIT"===
this.popupState&&(this.saveBookMarkersBySortable(),N=!0);N?(this.popup.close(),this.popupState="",this.editIndex=null,N=!1):(A=v.mark(N.repeatFields,C.hitch(this,function(I){return I&&I.name})),new n({message:this.nls[N.errorCode]+A.toString()}))}else new n({message:this.nls.warning})},_onEditClose:function(){this.popup=this.edit=null},addBookmark:function(K){var A=c.createBookMarkNode(K,this.nls,this.folderUrl,{editBtn:!0,changeImgBtn:!1});K.itemNode=A;this._customBookmarks.unshift(K);K.itemNode&&
K.itemNode.domNode&&D.place(K.itemNode.domNode,this.custombookMarkerContainer,"last");this.saveBookMarkersBySortable()},onImport:function(){this.importWidget=new d({nls:this.nls,map:this.map,folderUrl:this.folderUrl});this.popup=new x({titleLabel:this.nls.importTitle,autoHeight:!0,content:this.importWidget,container:"main-page",width:640,buttons:[{label:this.nls.ok,key:y.ENTER,disable:!0,onClick:C.hitch(this,"_onImportOk")},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],key:y.ESCAPE}],onClose:C.hitch(this,
"_onImportClose")});D.addClass(this.popup.domNode,"widget-setting-popup");this.importWidget.startup()},_onImportOk:function(){var K=this.importWidget.getConfig();v.forEach(K,function(A){this.addBookmark(A)},this);this.popup.close()},_onImportClose:function(){this.importWidget.destroy()}})})},"widgets/Bookmark/setting/Edit":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting esri/geometry/Extent jimu/dijit/ImageChooser ./ExtentAndLayersChooser jimu/dijit/LayerChooserFromMapLite jimu/utils ../utils dojo/text!./Edit.html jimu/dijit/CheckBox".split(" "),
function(E,C,v,y,u,r,z,D,x,n,g,d,f,c){return E([r,u],{baseClass:"jimu-Bookmark-Edit",ImageChooser:null,templateString:f,extent:{},portalUrl:null,itemId:null,isInWebmap:!1,mapOptions:null,layerOptions:null,postCreate:function(){this.inherited(arguments);this.imageChooser=new D({cropImage:!0,defaultSelfSrc:this.folderUrl+"images/thumbnail_default.png",showSelfImg:!0,format:[D.GIF,D.JPEG,D.PNG],goldenWidth:100,goldenHeight:60});this.saveLayers=new c({label:this.nls.savelayers,checked:!1},this.saveLayers);
this.own(y(this.saveLayers,"change",C.hitch(this,"_changeSetBtnStyle")));this.own(y(this.displayName,"change",C.hitch(this,"_onNameChange")));this.own(y(this.displayName,"keyUp",C.hitch(this,"_onNameChange")));v.addClass(this.imageChooser.domNode,"img-chooser");v.place(this.imageChooser.domNode,this.imageChooserBase,"replace")},startup:function(){this.displayName&&this.displayName.focusNode&&this.displayName.focusNode.focus&&this.displayName.focusNode.focus();this.inherited(arguments)},_changeSetBtnStyle:function(){this.saveLayers.getValue()?
v.removeClass(this.layerChooserContainer,"hide"):v.addClass(this.layerChooserContainer,"hide")},setConfig:function(w){w.displayName&&this.displayName.set("value",w.displayName);if(w.thumbnail){var F=g.processUrlInWidgetConfig(w.thumbnail,this.folderUrl);this.imageChooser.setDefaultSelfSrc(F)}w.isInWebmap&&(this.isInWebmap=!0);"undefined"===typeof w.isSaveExtent&&(w.isSaveExtent=!0);"undefined"===typeof w.isSaveLayers&&(w.isSaveLayers=!1);d.setCheckboxWithoutEvent(this.saveLayers,w.isSaveLayers);this._changeSetBtnStyle();
w.layerOptions&&(this.layerOptions=w.layerOptions);this.extentChooser||(F={portalUrl:this.portalUrl,itemId:this.itemId},this.config&&this.config.bookmark.extent&&(F.initExtent=new z(w.extent)),this.mapOptions&&this.mapOptions.lods&&(F.lods=this.mapOptions.lods),this.extentChooser=new x(F,this.extentChooserNode),this.extentChooser.createMap().then(C.hitch(this,function(K){this.layersChooser=new n({map:K,layerState:this.layerOptions,layerStateController:n.layerVisibilityStateController},this.layerChooser)})))},
getConfig:function(){var w=this.layersChooser.getState();return{displayName:this.displayName.get("value"),name:this.displayName.get("value"),extent:this.extentChooser.getExtent(),thumbnail:this.imageChooser.imageData,isInWebmap:this.isInWebmap,isSaveLayers:this.saveLayers.getValue(),layerOptions:w}},_onNameChange:function(){this._checkRequiredField()},_onExtentChange:function(w){this.currentExtent=w},_checkRequiredField:function(){this.displayName.get("value")?this.popup&&this.popup.enableButton(0):
this.popup&&this.popup.disableButton(0)}})})},"widgets/Bookmark/setting/ExtentAndLayersChooser":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/Deferred dijit/_WidgetBase dojo/Evented esri/geometry/Extent jimu/portalUrlUtils esri/dijit/Search jimu/dijit/LoadingShelter jimu/utils".split(" "),function(E,C,v,y,u,r,z,D,x,n,g,d){return E([r,z],{baseClass:"bookmark-extent-chooser",declaredClass:"bookmark.ExtentChooser",portalUrl:null,itemId:null,initExtent:null,bingMapsKey:"",
geometryServiceURL:null,shelter:null,postCreate:function(){this.inherited(arguments);!this.geometryServiceURL&&esriConfig.defaults.geometryService&&(this.geometryServiceURL=esriConfig.defaults.geometryService.url);this.geometryServiceURL||(this.geometryServiceURL=d.getServices().geometryService);this.shelter=new g({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this.shelter.show();this.mapNode=v.create("div",{style:{width:"100%",height:"100%"}},this.domNode);this.search=v.create("div",
{style:{position:"absolute",right:0,top:0}},this.mapNode);this.portalUrl&&this.itemId&&(this.portalUrl=x.getStandardPortalUrl(this.portalUrl))},createMap:function(){var f=new u,c={geometryServiceURL:this.geometryServiceURL,bingMapsKey:this.bingMapsKey};this.initExtent&&("esri.geometry.Extent"!==this.initExtent.declaredClass&&(this.initExtent=new D(this.initExtent)),c.mapOptions={extent:this.initExtent});this.lods&&("object"===typeof c.mapOptions?c.mapOptions.lods=this.lods:c.mapOptions={lods:this.lods});
d.createWebMap(this.portalUrl,this.itemId,this.mapNode,c).then(C.hitch(this,function(w){this.map=w.map;this.map.itemInfo=w.itemInfo;this.own(y(this.map,"extent-change",C.hitch(this,function(F){this.onExtentChange(F.extent)})));w=new n({map:this.map,enableLabel:!1,enableHighlight:!1,enableInfoWindow:!1},this.search);w.startup();this.own(y(w,"search-results",C.hitch(this,function(F){if(F&&F.results&&F.results[0]&&F.results[0][0]&&F.results[0][0].extent)this.onExtentChange(F.results[0][0].extent)})));
if(this.initExtent)this.onExtentChange(this.initExtent);else this.onExtentChange(this.map.extent);this.shelter.hide();this.emit("map-load",this.map);f.resolve(this.map)}),C.hitch(this,function(w){f.resolve(null);console.error(w)}));return f},getExtent:function(){return this.map&&this.map.extent},setExtent:function(f){if(this.map)return this.map.setExtent(f);var c=new u;setTimeout(C.hitch(this,function(){c.reject("map is null.")}),0);return c},restoreToDefaultWebMapExtent:function(){d.restoreToDefaultWebMapExtent(this.map,
this.map.webMapResponse,this.geometryServiceURL)},onExtentChange:function(f){this.emit("extent-change",f)}})})},"esri/dijit/Search":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented dojo/Deferred dojo/keys dojo/on dojo/query dojo/uacss dojo/regexp dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-style dojo/dom-construct dojo/date/locale dojo/i18n!../nls/jsapi dojo/text!./Search/templates/Search.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_FocusMixin dijit/a11yclick dijit/focus ../lang ../InfoTemplate ../kernel ../SpatialReference ../graphic ../promiseList ../symbols/PictureMarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/TextSymbol ../symbols/Font ../geometry/Point ../geometry/Extent ../geometry/normalizeUtils ../geometry/scaleUtils ../tasks/locator ../tasks/query ../Color ../styles/basic".split(" "),
function(E,C,v,y,u,r,z,D,x,n,g,d,f,c,w,F,K,A,N,B,I,Q,P,aa,ja,G,da,V,ha,Z,Ba,Ya,Ha,Za,$a,na,ta,Ca,k,q,T,U,fa,ra){function oa(a,e){a&&e&&(a._layer=e,a._sourceLayer=e)}C=C([B,I,Q,u],{declaredClass:"esri.dijit.Search",templateString:N,reHostedFS:/https?:\/\/services.*\.arcgis\.com/i,constructor:function(a,e){this.css={searchGroup:"searchGroup",searchInput:"searchInput",searchInputGroup:"searchInputGroup",searchBtn:"searchBtn",searchSubmit:"searchSubmit",searchIcon:"searchIcon esri-icon-search",searchButtonText:"searchButtonText",
searchToggle:"searchToggle",searchToggleIcon:"searchIcon esri-icon-down-arrow",searchMenu:"searchMenu",searchMenuHeader:"menuHeader",searchClear:"searchClear",searchClearIcon:"searchIcon esri-icon-close searchClose",searchSpinner:"searchIcon esri-icon-loading-indicator searchSpinner",searchSourceName:"sourceName",suggestionsMenu:"suggestionsMenu",sourcesMenu:"sourcesMenu",activeSource:"active",hasValue:"hasValue",hasButtonMode:"hasButtonMode",hasMultipleSources:"hasMultipleSources",showSuggestions:"showSuggestions",
showSources:"showSources",showNoResults:"showNoResults",searchLoading:"searchLoading",latLonHeader:"searchLatLongHeader",searchMoreResults:"moreResults",searchMoreResultsList:"resultsList",searchMoreResultsHeader:"moreHeader",searchMoreResultsItem:"moreItem",searchMoreResultsListHeader:"popupHeader",searchShowMoreResults:"showMoreResults",searchNoResultsMenu:"noResultsMenu",searchNoResultsBody:"noResultsBody",searchNoResultsHeader:"noResultsHeader",searchNoValueIcon:"noValueIcon esri-icon-notice-triangle",
searchNoValueText:"noValueText",searchNoResultsText:"noResultsText",searchExpandContainer:"searchExpandContainer",searchAnimateContainer:"searchAnimate",searchExpanded:"searchExpanded",searchCollapsed:"searchCollapsed",searchClearFloat:"searchClearFloat"};this._allIndex="all";this._objectIdIdentifier="_objectId";this._deferreds=[];this._sourceNames=[];this.defaultSource={locator:new T("//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"),singleLineFieldName:"SingleLine",outFields:["Addr_type",
"Match_addr","StAddr","City"],name:A.widgets.Search.main.esriLocatorName,localSearchOptions:{minScale:3E5,distance:5E4},placeholder:A.widgets.Search.main.placeholder,highlightSymbol:(new Ba(E.toUrl("./Search/images/search-pointer.png"),36,36)).setOffset(9,18)};this.options={map:null,theme:"arcgisSearch",visible:!0,value:"",allPlaceholder:"",sources:[this.defaultSource],activeSourceIndex:0,suggestionDelay:150,enableSourcesMenu:!0,enableSuggestionsMenu:!0,enableInfoWindow:!0,showInfoWindowOnSelect:!0,
enableSuggestions:!0,enableButtonMode:!1,autoNavigate:!0,autoSelect:!0,addLayersFromMap:!1,zoomScale:1E3,graphicsLayer:null,enableHighlight:!0,highlightGraphic:null,enableLabel:!1,labelSymbol:(new $a).setColor(new fa([181,56,46,.9])).setFont(new na("14px",na.STYLE_NORMAL,na.VARIANT_NORMAL,na.WEIGHT_BOLD,"Arial")),labelGraphic:null,infoTemplate:new G(A.widgets.Search.main.searchResult,'\x3cdiv class\x3d"${searchTheme}"\x3e\x3cdiv id\x3d"${searchMoreResultsId}" class\x3d"${searchMoreResults}"\x3e\x3cdiv class\x3d"${searchMoreResultsItem}"\x3e${searchResult}\x3c/div\x3e\x3cdiv\x3e${searchMoreResultsHtml}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
searchResults:null,suggestResults:null,selectedResult:null,magicKey:null,selectedFeatureId:null,expanded:!1,maxLength:128,maxResults:6,maxSuggestions:6,locationToAddressDistance:1500,minCharacters:3,enableSearchingAll:!0};a=v.mixin({},this.options,a);this.set(a);this._updateActiveSource();this._i18n=A;this._defaultSR=new V(4326);this.domNode=e},startup:function(){this.inherited(arguments);this.sources||(this.sources=[]);this._mapLoaded().then(v.hitch(this,this._init))},postCreate:function(){var a=
this;this.inherited(arguments);this._moreResultsId=this.id+"_more_results";this.own(D(this.submitNode,P,v.hitch(this,this._searchButton)));this.own(D(this.sourcesBtnNode,P,v.hitch(this,this._toggleSourcesMenu)));this.own(D(this.inputNode,P,v.hitch(this,this._inputClick)));this.own(D(this.clearNode,P,v.hitch(this,this._clearButton)));this.own(D(this.formNode,"submit",v.hitch(this,function(e){e.preventDefault();this._cancelSuggest();this.search()})));this.own(D(this.inputNode,"keyup",v.hitch(this,function(e){this._inputKey(e)})));
this.own(D(this.sourcesBtnNode,"keyup",v.hitch(this,function(e){this._sourceBtnKey(e)})));this.own(D(this.suggestionsNode,"li:click, li:keyup",function(e){a._suggestionsEvent(e,this)}));this.own(D(this.sourcesNode,"li:click, li:keyup",function(e){a._sourcesEvent(e,this)}));this.own(D(this.inputNode,"input, paste",v.hitch(this,function(){this._suggestDelay()})));this.map&&this.map.infoWindow&&this.map.infoWindow.domNode&&this.enableInfoWindow&&(this.own(D(this.map.infoWindow.domNode,"#"+this._moreResultsId+
"_show:click",v.hitch(this,function(e){this._showMoreResultsClick(e)}))),this.own(D(this.map.infoWindow.domNode,"#"+this._moreResultsId+"_list li a:click",v.hitch(this,function(e){this._moreResultsClick(e)}))),this.own(D(this.map.infoWindow.domNode,"#"+this._moreResultsId+" [data-switch-coordinates]:click",v.hitch(this,function(e){this._switchCoordinatesClick(e)}))));this.value&&this._checkStatus();this._hideMenus();this._updateVisible();this._insertSources(this.sources);this._setPlaceholder(this.activeSourceIndex);
this._updateButtonMode(this.enableButtonMode);this.toggle(this.expanded)},destroy:function(){this.clear();F.empty(this.domNode);this.inherited(arguments)},clear:function(){this.clearGraphics();f.get(this.inputNode,"value")&&f.set(this.inputNode,"value","");this._changeAttrValue("value","");this.set("searchResults",null);this.set("suggestResults",null);this.set("selectedResult",null);this.set("magicKey",null);this.set("selectedFeatureId",null);c.remove(this.containerNode,this.css.hasValue);f.set(this.clearNode,
"title","");this._hideMenus();this._closePopup();this._hideLoading();this.emit("clear-search")},show:function(){w.set(this.domNode,"display","block")},hide:function(){w.set(this.domNode,"display","none")},expand:function(){this.enableButtonMode&&(c.add(this.containerNode,this.css.searchExpanded),c.remove(this.containerNode,this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!0))},collapse:function(){this.enableButtonMode&&(c.remove(this.containerNode,this.css.searchExpanded),c.add(this.containerNode,
this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!1))},toggle:function(a){this.enableButtonMode&&("undefined"===typeof a&&(a=!this.expanded),a?this.expand():this.collapse())},search:function(a){var e=new r;this._mapLoaded().then(v.hitch(this,function(){this._searchDeferred(a).then(v.hitch(this,function(l){var h=l.results;this.set("searchResults",h);0===l.numResults&&(this._noResults(l.value),this._showNoResultsMenu());this._hideLoading();this.emit("search-results",l);this._selectFirstResult(h,
l.activeSourceIndex);e.resolve(h)}),v.hitch(this,function(l){e.reject(l)}))}));return e.promise},suggest:function(a){var e=new r;this._mapLoaded().then(v.hitch(this,function(){this._suggestDeferred(a).then(v.hitch(this,function(l){if(l){var h=l.results;this.set("suggestResults",h);this._insertSuggestions(h,l.value);this.emit("suggest-results",l);e.resolve(h)}}),v.hitch(this,function(l){e.reject(l)}))}));return e.promise},select:function(a){var e=this._getDefaultSymbol(a),l=this.labelSymbol,h=this.sources,
t=this.activeSourceIndex,M=this.enableHighlight,R=this.enableLabel,ka=this.autoNavigate,W=this.showInfoWindowOnSelect,ba=this.enableInfoWindow,S=this.infoTemplate,ia=a.feature?new ha(a.feature.toJson()):null,ua=ia?a.feature._sourceLayer:null;oa(ia,ua);if(t===this._allIndex){var sa=this._getSourceIndexOfResult(a);if(null!==sa){var la=h[sa];t=sa}}else la=h[t];la&&(la.hasOwnProperty("highlightSymbol")&&(e=la.highlightSymbol),la.hasOwnProperty("labelSymbol")&&(l=la.labelSymbol),la.hasOwnProperty("enableHighlight")&&
(M=la.enableHighlight),la.hasOwnProperty("enableLabel")&&(R=la.enableLabel),la.hasOwnProperty("autoNavigate")&&(ka=la.autoNavigate),la.hasOwnProperty("showInfoWindowOnSelect")&&(W=la.showInfoWindowOnSelect),la.hasOwnProperty("enableInfoWindow")&&(ba=la.enableInfoWindow),la.hasOwnProperty("infoTemplate")?S=la.infoTemplate:la.featureLayer&&la.featureLayer.infoTemplate&&(S=la.featureLayer.infoTemplate));this._hideMenus();this._hideLoading();if(ia){h=this.highlightGraphic;var ma=this.graphicsLayer;sa=
this.labelGraphic;var va=v.mixin({},ia.attributes,{searchTheme:this.theme,searchResult:this._searchResultHTML(a),searchMoreResults:this.css.searchMoreResults,searchMoreResultsItem:this.css.searchMoreResultsItem,searchMoreResultsId:this._moreResultsId,searchMoreResultsHtml:this._moreResultsHTML(a)}),ca=null;ba&&(ca=S);sa?(sa.setGeometry(ia.geometry),sa.setAttributes(va),sa.setSymbol(l),l&&"textsymbol"===l.type&&sa.symbol.setText(a.name)):(sa=new ha(ia.geometry,l,va),oa(sa,ua),l&&"textsymbol"===l.type&&
sa.symbol.setText(a.name),R&&(ma?ma.add(sa):this.map&&this.map.graphics&&this.map.graphics.add(sa)));h?(h.setGeometry(ia.geometry),h.setAttributes(va),h.setInfoTemplate(ca),h.setSymbol(e)):(h=new ha(ia.geometry,e,va,ca),oa(h,ua),M&&(ma?ma.add(h):this.map&&this.map.graphics&&this.map.graphics.add(h)));h&&h.symbol&&"textsymbol"===h.symbol.type&&h.symbol.setText(a.name);this.map&&this.map.infoWindow&&ba&&W&&(this.map.infoWindow.setFeatures([h]),e=this._getPointFromGeometry(h.geometry),this.map.infoWindow.show(e));
this.map&&ka&&a&&a.hasOwnProperty("extent")&&"function"===typeof this.map.setExtent&&this.map.setExtent(a.extent,!0);this.set("highlightGraphic",h);this.set("labelGraphic",sa)}this.set("selectedResult",a);this.emit("select-result",{result:a,source:la,sourceIndex:t})},focus:function(){aa.focus(this.inputNode)},blur:function(){this.inputNode.blur();aa.curNode&&aa.curNode.blur()},clearGraphics:function(){var a=this.highlightGraphic,e=this.graphicsLayer,l=this.labelGraphic;a&&(e?e.remove(a):this.map&&
this.map.graphics&&this.map.graphics.remove(a));l&&(e?e.remove(l):this.map&&this.map.graphics&&this.map.graphics.remove(l));this.set("labelGraphic",null);this.set("highlightGraphic",null)},_mapLoaded:function(){var a=new r;if(this.map)if(this.map.loaded)a.resolve();else D.once(this.map,"load",v.hitch(this,function(){a.resolve()}));else a.resolve();return a.promise},_init:function(){this._getMapLayers().then(v.hitch(this,function(){this.set("loaded",!0);this.emit("load")}))},_clearButton:function(){this.clear();
aa.focus(this.inputNode)},_error:function(a){return Error(this.declaredClass+" "+a)},_searchDeferred:function(a){var e=new r,l=this.value,h=this.activeSourceIndex;a&&a.hasOwnProperty("index")&&(h=a.index);this._showLoading();this._hideMenus();this._closePopup();this.clearGraphics();var t={magicKey:this.magicKey,text:l};a?"string"===typeof a?(t.text=a,a=this._searchQueries(t)):a="object"===typeof a&&a.hasOwnProperty("magicKey")?this._searchQueries(a):"object"===typeof a&&a.hasOwnProperty("geometry")?
this._searchQueries({geometry:a}):"object"===typeof a&&a.hasOwnProperty(this._objectIdIdentifier)?this._searchQueries(a):"object"===typeof a&&"point"===a.type?this._searchQueries({point:a}):a instanceof Array&&2===a.length?this._searchQueries({latlon:a}):this._searchQueries(t):a=this._searchQueries(t);a.always(v.hitch(this,function(M){M=this._formatResults(M,h,l);e.resolve(M)}));return e.promise},_suggestDeferred:function(a){var e=new r;this._deferreds.push(e);a||(a=this.value);var l=this.activeSourceIndex;
this._suggestQueries({text:a}).always(v.hitch(this,function(h){var t;if(h)for(var M=0;M<h.length;M++)h[M]&&(t=!0);t?(h=this._formatResults(h,l,a),e.resolve(h)):e.resolve()}));return e.promise},_getDefaultSymbol:function(a){var e;this.map&&(e=this.map.getBasemap());e||(e="topo");if(a&&a.feature&&a.feature.geometry)var l=a.feature.geometry.type;"polyline"===l?l="line":"circle"===l||"extent"===l?l="polygon":"multipoint"===l&&(l="point");if(l){if(a=ra.getSchemes({theme:"default",basemap:e,geometryType:l}))var h=
a.primaryScheme;if(h){h.color&&h.hasOwnProperty("opacity")&&(h.color.a=h.opacity);var t=h;a=h.color;h=h.size;switch(l){case "point":var M=new Ya;M.setColor(a);M.setSize(null!==h?h:t.size);l=new Ha;l.setColor(t.outline.color);l.setWidth(t.outline.width);M.setOutline(l);break;case "line":M=new Ha;M.setColor(a);M.setWidth(null!==h?h:t.width);break;case "polygon":M=new Za,M.setColor(a),l=new Ha,l.setColor(t.outline.color),l.setWidth(t.outline.width),M.setOutline(l)}t=M}}return t},_selectFirstResult:function(a,
e){if(this.autoSelect&&a){var l;e===this._allIndex?l=this._getFirstResult(a):a[e]&&a[e][0]&&(l=a[e][0]);l&&this.select(l)}},_getSourceIndexOfResult:function(a){var e=this.searchResults;if(e)for(var l in e)if(e[l]&&e[l].length)for(var h=0;h<e[l].length;h++)if(e[l][h]===a)return parseInt(l,10);return null},_getFirstResult:function(a){if(a)for(var e in a)if(a[e]&&a[e][0])return a[e][0];return!1},_onFocus:function(){this.map&&"function"===typeof this.map.disableKeyboardNavigation&&this.map.disableKeyboardNavigation();
this.emit("focus");this.inherited(arguments)},_onBlur:function(){this._hideMenus();this.map&&"function"===typeof this.map.enableKeyboardNavigation&&this.map.enableKeyboardNavigation();this.enableButtonMode&&this.loaded&&this.collapse();this.emit("blur");this.inherited(arguments)},_getMapLayers:function(){var a=new r;if(this.addLayersFromMap&&this.map){var e=[],l=this.map.graphicsLayerIds;if(l&&l.length){for(var h=0;h<l.length;h++){var t=this.map.getLayer(l[h]);t&&e.push(this._featureLayerLoaded(t))}Z(e).always(v.hitch(this,
function(M){for(var R,ka=this.sources,W=0;W<M.length;W++)M[W]&&M[W].loaded&&"Feature Layer"===M[W].type&&(ka.push({featureLayer:M[W],enableSuggestions:!0}),R=!0);R&&this.set("sources",ka);a.resolve()}))}else a.resolve()}else a.resolve();return a.promise},_switchCoordinatesClick:function(a){a.preventDefault();if(a=f.get(a.target,"data-switch-coordinates"))this._cancelSuggest(),this.set("value",a),this.search()},_moreResultsClick:function(a){a.preventDefault();var e=a.target;a=parseInt(f.get(e,"data-source-index"),
10);e=parseInt(f.get(e,"data-index"),10);var l=this.searchResults;l&&l[a]&&(a=l[a][e])&&this.select(a)},_showMoreResultsClick:function(a){a.preventDefault();if(a=d.byId(this._moreResultsId)){c.toggle(a,this.css.searchShowMoreResults);var e=d.byId(this._moreResultsId+"_show");e&&(c.contains(a,this.css.searchShowMoreResults)?f.set(e,"textContent",A.widgets.Search.main.hideMoreResults):f.set(e,"textContent",A.widgets.Search.main.showMoreResults))}},_featureLayerLoaded:function(a){var e=new r;if(a.loaded)e.resolve(a);
else if(a.loadError)e.reject(this._error("Layer failed to load."));else{var l=D.once(a,"load",v.hitch(this,function(){h.remove();e.resolve(a)}));var h=D.once(a,"error",v.hitch(this,function(){l.remove();e.reject(this._error("Layer could not be loaded."))}))}return e.promise},_getObjectSize:function(a){var e=0,l;for(l in a)a.hasOwnProperty(l)&&e++;return e},_sourcesEvent:function(a,e){var l=f.get(e,"data-index"),h=x("li",this.sourcesNode);e=y.indexOf(h,e);l!==this._allIndex&&(l=parseInt(l,10));"click"===
a.type||a.keyCode===z.ENTER?(this.set("activeSourceIndex",l),aa.focus(this.inputNode),this._hideSourcesMenu()):a.keyCode===z.UP_ARROW?(a.stopPropagation(),a.preventDefault(),a=e-1,0>a?aa.focus(this.sourcesBtnNode):aa.focus(h[a])):a.keyCode===z.DOWN_ARROW?(a.stopPropagation(),a.preventDefault(),a=e+1,a>=h.length?aa.focus(this.sourcesBtnNode):aa.focus(h[a])):a.keyCode===z.ESCAPE&&(this._hideSourcesMenu(),aa.focus(this.inputNode))},_suggestionsEvent:function(a,e){var l=f.get(e,"data-source-index"),h=
parseInt(f.get(e,"data-index"),10),t=x("li",this.suggestionsNode),M=this.sources;e=y.indexOf(t,e);l!==this._allIndex&&(l=parseInt(l,10));var R;this._clearQueryTimeout();"click"===a.type||a.keyCode===z.ENTER?((t=this.suggestResults)&&t[l]&&t[l][h]&&(R=t[l][h]),R&&(R.index=l,M[l].featureLayer?(l=M[l].featureLayer.objectIdField,R[this._objectIdIdentifier]=R.feature.attributes[l],this.set("value",this._getSuggestionName(R)),this.set("selectedFeatureId",R.feature.attributes[l])):R.magicKey&&R.text&&(this.set("value",
R.text),this.set("magicKey",R.magicKey)),this.search(R),aa.focus(this.inputNode))):a.keyCode===z.BACKSPACE||a.keyCode===z.DELETE?aa.focus(this.inputNode):a.keyCode===z.UP_ARROW?(a.stopPropagation(),a.preventDefault(),R=e-1,0>R?aa.focus(this.inputNode):aa.focus(t[R])):a.keyCode===z.DOWN_ARROW?(a.stopPropagation(),a.preventDefault(),R=e+1,R>=t.length?aa.focus(this.inputNode):aa.focus(t[R])):a.keyCode===z.ESCAPE&&(this._hideMenus(),aa.focus(this.inputNode))},_getResultName:function(a){var e;a.hasOwnProperty("name")&&
null!==a.name&&(e=a.name.toString());e||(e=A.widgets.Search.main.untitledResult);return e},_getSuggestionName:function(a){var e;a.hasOwnProperty("name")&&null!==a.name&&(e=a.name.toString());a=a.text||e;a||(a=A.widgets.Search.main.untitledResult);return a},_searchResultHTML:function(a){var e="";if(a.feature&&a.feature.attributes&&a.feature.attributes.Addr_type&&"LatLong"===a.feature.attributes.Addr_type){var l=a.name.split(" ");if(2===l.length){var h=l[0];var t=l[1]}t&&h?(a=parseFloat(h),t=parseFloat(t),
l=t+", "+a,e+='\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e',e+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+A.widgets.Search.main.lonlat+"\x3c/div\x3e",e=e+(a+", "+t)+'\x3c/div\x3e\x3cdiv class\x3d"'+(this.css.searchMoreResultsItem+'"\x3e'),a===t||90<a||-90>a||180<t||-180>t||(e+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+A.widgets.Search.main.reverseLonLatHeader+"\x3c/div\x3e",e+='\x3ca data-switch-coordinates\x3d"'+l+'" tabindex\x3d"0" href\x3d"#"\x3e'+l+"\x3c/a\x3e\x3c/div\x3e")):
e=a.name}else e=a.name;return e},_moreResultsHTML:function(a){var e="",l="",h=this.searchResults,t=this.sources,M=0;if(h){l+='\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e';l+='\x3ca href\x3d"#" id\x3d"'+this._moreResultsId+'_show"\x3e'+A.widgets.Search.main.showMoreResults+"\x3c/a\x3e";l=l+'\x3c/div\x3e\x3cdiv class\x3d"'+(this.css.searchMoreResultsList+'"\x3e');l+='\x3cdiv id\x3d"'+this._moreResultsId+'_list"\x3e';for(var R in h)if(h[R]){var ka=h[R].length;if(ka){var W=1===ka&&h[R][0]===
a;if(1<this._getObjectSize(h)&&!W){var ba=this._getSourceName(R);l+='\x3cdiv class\x3d"'+this.css.searchMoreResultsListHeader+'"\x3e'+ba+"\x3c/div\x3e"}if(ka&&!W){l+="\x3cul\x3e";ba=t[R].maxResults||this.maxResults;for(W=0;W<ka&&W<ba;++W)if(h[R][W]!==a){var S=this._getResultName(h[R][W]);l+='\x3cli\x3e\x3ca tabindex\x3d"0" data-index\x3d"'+W+'" data-source-index\x3d"'+R+'" href\x3d"#"\x3e'+S+"\x3c/a\x3e\x3c/li\x3e";M++}l+="\x3c/ul\x3e"}}}l+="\x3c/div\x3e\x3c/div\x3e"}M&&(e+=l);return e},_validField:function(a,
e){return a.getField(e)},_validFields:function(a,e){if(a&&e&&e.length){for(var l=0;l<e.length;l++)if(!this._validField(a,e[l]))return!1;return!0}return!1},_getCodedName:function(a,e){if(a&&a.length)for(var l=0,h=a.length;l<h;l++){var t=a[l];if(t.code===e)return t.name}},_getCodedValue:function(a,e,l){if(a&&a.length)for(var h=0,t=a.length;h<t;h++){var M=a[h],R=M.name,ka=e;l||(R=R.toLowerCase(),ka=ka.toLowerCase());if(R===ka)return M.code}return!1},_whereClause:function(a,e,l,h){var t=null;if(a){var M=
"";this.reHostedFS.test(e.url)&&this._containsNonLatinCharacter(a)&&(M="N");if(l&&l.length)for(var R=0,ka=l.length;R<ka;R++){var W="",ba=a.replace(/'/g,"''");W=l[R];var S=e.getField(W),ia=e.getDomain(W);ia&&"codedValue"===ia.type&&(ba=this._getCodedValue(ia.codedValues,ba,h));!1!==ba&&(S=S.type,"esriFieldTypeString"===S||"esriFieldTypeDate"===S?W=h?W+" \x3d "+M+"'"+ba+"'":"UPPER("+W+") LIKE "+M+"'%"+ba.toUpperCase()+"%'":"esriFieldTypeOID"===S||"esriFieldTypeSmallInteger"===S||"esriFieldTypeInteger"===
S||"esriFieldTypeSingle"===S||"esriFieldTypeDouble"===S?(ba=parseFloat(ba),W=isNaN(ba)?!1:W+" \x3d "+ba):W=W+" \x3d "+ba,W&&(t=t?t+" or ":"",t+=W))}}return t},_suggest:function(a){a||(a={index:this.activeSourceIndex,text:this.value});var e=new r,l=a.index,h=this.sources[l],t=this.enableSuggestions;h.hasOwnProperty("enableSuggestions")&&(t=h.enableSuggestions);var M=0;if(a.hasOwnProperty("text")&&a.text){var R=v.trim(a.text);M=a.text.length}a=h.minCharacters||this.minCharacters;if(t&&R&&M>=a&&this._supportsPagination(h)){var ka=
"";h.prefix&&(ka+=h.prefix);ka+=R;h.suffix&&(ka+=h.suffix);var W=this._defaultSR;this.map&&(W=this.map.spatialReference);t={};h.locator?(h.categories&&(t.categories=h.categories),h.locator.outSpatialReference=W,this.map&&h.localSearchOptions&&h.localSearchOptions.hasOwnProperty("distance")&&h.localSearchOptions.hasOwnProperty("minScale")&&(M=this._getScale(),!h.localSearchOptions.minScale||M&&M<=parseFloat(h.localSearchOptions.minScale))&&(t.location=this.map.extent.getCenter(),t.distance=h.localSearchOptions.distance),
t.text=ka,h.useMapExtent&&this.map&&this.map.extent&&(t.searchExtent=this.map.extent),h.searchExtent&&(t.searchExtent=h.searchExtent),t.maxSuggestions=h.maxSuggestions||this.maxSuggestions,h.sourceCountry&&(t.countryCode=h.sourceCountry),h.countryCode&&(t.countryCode=h.countryCode),h.locator.suggestLocations(t).then(v.hitch(this,function(ba){e.resolve(ba)}),v.hitch(this,function(ba){ba||(ba=this._error("Locator suggestLocations could not be performed."));e.reject(ba)}))):h.featureLayer?this._featureLayerLoaded(h.featureLayer).then(v.hitch(this,
function(){var ba=this._getDisplayField(h),S=h.searchFields||[ba],ia=[];h.suggestionTemplate?h.suggestionTemplate.replace(/(?:\$\{([^}]+)\})/g,function(ma,va){ia.push(va)}):ia=[ba];-1===y.indexOf(ia,h.featureLayer.objectIdField)&&ia.push(h.featureLayer.objectIdField);ba=this._validField(h.featureLayer,ba);var ua=this._validFields(h.featureLayer,ia),sa=this._validFields(h.featureLayer,S);if(ba&&ua&&sa){ba=new U;h.hasOwnProperty("suggestQueryParams")&&v.mixin(ba,h.suggestQueryParams);ba.outSpatialReference=
W;ba.returnGeometry=!1;ba.num=h.maxSuggestions||this.maxSuggestions;ba.outFields=ia;h.useMapExtent&&this.map&&this.map.extent&&(ba.geometry=this.map.extent);h.searchExtent&&(ba.geometry=h.searchExtent);if(S=this._whereClause(ka,h.featureLayer,S,!1)){ba.where=S;var la=!0}la?h.featureLayer.queryFeatures(ba,v.hitch(this,function(ma){var va;(ma=ma.features)&&(va=this._hydrateResults(ma,l,!0));e.resolve(va)}),v.hitch(this,function(ma){ma||(ma=this._error("FeatureLayer queryFeatures errored with suggestions"));
e.reject(ma)})):e.resolve()}else e.reject(this._error("Invalid FeatureLayer field"))})):e.reject(this._error("Invalid source"))}else e.resolve();return e.promise},_supportsPagination:function(a){var e;a.locator?e=!0:a.featureLayer&&a.featureLayer.advancedQueryCapabilities&&a.featureLayer.advancedQueryCapabilities.supportsPagination&&(e=!0);return e},_suggestQueries:function(a){var e=this.sources,l=this.activeSourceIndex,h=[];if(l===this._allIndex)for(l=0;l<e.length;l++){var t=a;t.index=l;t=this._suggest(t);
h.push(t)}else a.index=l,t=this._suggest(a),h.push(t);return Z(h)},_getPointFromGeometry:function(a){switch(a.type){case "extent":var e=a.getCenter();break;case "multipoint":e=a.getPoint(0);break;case "point":e=a;break;case "polygon":e=a.getCentroid();break;case "polyline":e=a.getPoint(0,0)}return e},_searchQueries:function(a){a.hasOwnProperty("index")||(a.index=this.activeSourceIndex);var e=[];if(a.index===this._allIndex)for(var l=this.sources,h=0;h<l.length;h++){var t=a;t.index=h;t=this._search(t);
e.push(t)}else a=this._search(a),e.push(a);return Z(e)},_searchButton:function(){this.enableButtonMode&&!this.expanded?(this.expand(),aa.focus(this.inputNode)):(this._cancelSuggest(),this.search())},_search:function(a){a||(a={text:this.value,magicKey:null,geometry:null,point:null,index:this.activeSourceIndex,latlon:null});this.selectedFeatureId&&(a.text=null,a[this._objectIdIdentifier]=this.selectedFeatureId);var e,l=new r,h=a.index,t=this.sources[h],M;a.hasOwnProperty("text")&&a.text&&(M=v.trim(a.text));
if(t){var R="";t.prefix&&!a.magicKey&&(R+=t.prefix);R+=M;t.suffix&&!a.magicKey&&(R+=t.suffix);var ka=this._defaultSR;this.map&&(ka=this.map.spatialReference);if(t.locator)if(a.hasOwnProperty("text")&&M){var W={};t.categories&&(W.categories=t.categories);t.locationType&&(W.locationType=t.locationType);ka&&(t.locator.outSpatialReference=ka);if(this.map&&t.localSearchOptions&&t.localSearchOptions.hasOwnProperty("distance")&&t.localSearchOptions.hasOwnProperty("minScale")){var ba=this._getScale();if(!t.localSearchOptions.minScale||
ba&&ba<=parseFloat(t.localSearchOptions.minScale))W.location=this.map.extent.getCenter(),W.distance=t.localSearchOptions.distance}W.address={};W.maxLocations=t.maxResults||this.maxResults;t.useMapExtent&&this.map&&this.map.extent&&(W.searchExtent=this.map.extent);t.searchExtent&&(W.searchExtent=t.searchExtent);t.sourceCountry&&(W.countryCode=t.sourceCountry);t.countryCode&&(W.countryCode=t.countryCode);a.magicKey&&(W.magicKey=a.magicKey);t.singleLineFieldName?W.address[t.singleLineFieldName]=R:W.address["Single Line Input"]=
R;t.outFields&&(W.outFields=t.outFields);t.locator.addressToLocations(W).then(v.hitch(this,function(S){S=this._hydrateResults(S,h,!1);l.resolve(S)}),v.hitch(this,function(S){S||(S=this._error("Locator addressToLocations could not be performed"));l.reject(S)}))}else a.geometry?(e=this._getPointFromGeometry(a.geometry.geometry))?this._reverseGeocodePoint(h,e).then(function(S){l.resolve(S)},function(S){l.reject(S)}):l.reject(this._error("Invalid point to reverse geocode")):a.point?this._reverseGeocodePoint(h,
a.point).then(function(S){l.resolve(S)},function(S){l.reject(S)}):a.latlon?(W=new ta(a.latlon,this._defaultSR),this._reverseGeocodePoint(h,W).then(function(S){l.resolve(S)},function(S){l.reject(S)})):a.hasOwnProperty("text")&&!M?l.resolve([]):l.reject(this._error("Invalid query type for Locator"));else t.featureLayer?this._featureLayerLoaded(t.featureLayer).then(v.hitch(this,function(){var S=this._getDisplayField(t),ia=t.searchFields||[S];S=this._validField(t.featureLayer,S);var ua=this._validFields(t.featureLayer,
ia);if(S&&ua){S=new U;t.hasOwnProperty("searchQueryParams")&&v.mixin(S,t.searchQueryParams);ka&&(S.outSpatialReference=ka,ua=this.map&&this.map.getMaxResolution()||1/q.getUnitValueForSR(ka))&&(S.maxAllowableOffset=ua);S.returnGeometry=!0;t.outFields&&(S.outFields=t.outFields);if(!a.hasOwnProperty(this._objectIdIdentifier)){this._supportsPagination(t)&&(S.num=t.maxResults||this.maxResults);t.useMapExtent&&this.map&&this.map.extent&&(S.geometry=this.map.extent);t.searchExtent&&(S.geometry=t.searchExtent);
var sa=t.exactMatch}a.hasOwnProperty("text")&&M?(ia=this._whereClause(R,t.featureLayer,ia,sa))?(S.where=ia,ia=!0):ia=!1:a.hasOwnProperty(this._objectIdIdentifier)?(S.objectIds=[a[this._objectIdIdentifier]],ia=!0):a.geometry?(S.geometry=a.geometry,ia=!0):a.point?(S.geometry=a.point,ia=!0):a.latlon?(e=new ta(a.latlon,this._defaultSR),S.geometry=e,ia=!0):(a.hasOwnProperty("text")&&!M?l.resolve([]):l.reject(this._error("Invalid query type for FeatureLayer")),ia=!1);ia?t.featureLayer.queryFeatures(S,v.hitch(this,
function(la){la=la.features;var ma;la&&(ma=this._hydrateResults(la,h,!1));l.resolve(ma)}),v.hitch(this,function(la){la||(la=this._error("FeatureLayer queryFeatures could not be performed"));l.reject(la)})):l.resolve()}else l.reject(this._error("Invalid FeatureLayer field"))})):l.reject(this._error("Invalid source"))}else l.reject(this._error("Source is undefined"));return l.promise},_clearQueryTimeout:function(){this._queryTimer&&clearTimeout(this._queryTimer)},_formatResults:function(a,e,l){l={activeSourceIndex:e,
value:l,numResults:0,numErrors:0,errors:null,results:null};var h={},t={};if(a)if(e===this._allIndex)for(e=0;e<a.length;e++)a[e]&&(a[e]instanceof Error?(h[e]=a[e],l.numErrors++):(t[e]=a[e],l.numResults+=a[e].length));else a[0]&&(a[0]instanceof Error?(h[e]=a[0],l.numErrors++):(t[e]=a[0],l.numResults+=a[0].length));l.numErrors&&(l.errors=h);l.numResults&&(l.results=t);return l},_reverseGeocodePoint:function(a,e){var l=new r,h=this.sources[a];if(e&&h){var t=h.locationToAddressDistance||this.locationToAddressDistance;
h.locator.outSpatialReference=this._defaultSR;this.map&&(h.locator.outSpatialReference=this.map.spatialReference);h.locator.locationToAddress(e,t,v.hitch(this,function(M){M=this._hydrateResults([M],a,!1);l.resolve(M)}),v.hitch(this,function(M){M||(M=this._error("Locator locationToAddress could not be performed"));l.reject(M)}))}else l.reject(this._error("No point or source defined for reverse geocoding"));return l.promise},_cancelDeferreds:function(){if(this._deferreds&&this._deferreds.length)for(var a=
0;a<this._deferreds.length;a++)this._deferreds[a].cancel(this.declaredClass+" cancelling request");this._deferreds=[]},_sourceBtnKey:function(a){if(a){var e=x("li",this.sourcesNode);a.keyCode===z.UP_ARROW?(a.stopPropagation(),a.preventDefault(),this._showSourcesMenu(),(a=e.length)&&aa.focus(e[a-1])):a.keyCode===z.DOWN_ARROW&&(a.stopPropagation(),a.preventDefault(),this._showSourcesMenu(),e[0]&&aa.focus(e[0]))}},_inputKey:function(a){if(a){var e=x("li",this.suggestionsNode),l=this.suggestResults;if(a.keyCode===
z.TAB||a.keyCode===z.ESCAPE)this._cancelSuggest(),this._hideMenus();else if(a.keyCode===z.UP_ARROW)a.stopPropagation(),a.preventDefault(),this._cancelSuggest(),l&&this._showSuggestionsMenu(),(a=e.length)&&aa.focus(e[a-1]);else if(a.keyCode===z.DOWN_ARROW)a.stopPropagation(),a.preventDefault(),this._cancelSuggest(),l&&this._showSuggestionsMenu(),e[0]&&aa.focus(e[0]);else{if(a.ctrlKey||a.metaKey||a.keyCode===z.copyKey||a.keyCode===z.LEFT_ARROW||a.keyCode===z.RIGHT_ARROW||a.keyCode===z.ENTER)return a;
this._suggestDelay()}}},_cancelSuggest:function(){this._cancelDeferreds();this._clearQueryTimeout()},_suggestDelay:function(){this._cancelSuggest();this._changeValue();this._queryTimer=setTimeout(v.hitch(this,function(){this.suggest()}),this.suggestionDelay)},_changeValue:function(){this.set("magicKey",null);this.set("selectedFeatureId",null);this._changeAttrValue("value",this.inputNode.value);this._checkStatus()},_inputClick:function(){this._hideSourcesMenu();this._hideNoResultsMenu()},_getSourceName:function(a){return this._sourceNames[a]},
_loadSources:function(a){a=y.filter(a,function(e){return!!e.featureLayer});a=y.map(a,function(e){return this._featureLayerLoaded(e.featureLayer)},this);return Z(a)},_createSourceNameMap:function(a){return this._loadSources(a).then(v.hitch(this,function(){var e=y.map(a,function(l){return l.name||l.featureLayer&&l.featureLayer.name||A.widgets.Search.main.untitledSource});this._preventDuplicateSourceNames(a,e);return e}))},_getDuplicateSourceNameIndexes:function(a){var e={},l=[];y.forEach(a,function(h,
t){e.hasOwnProperty(h)?(-1===l.indexOf(e[h])&&l.push(e[h]),l.push(t)):a.lastIndexOf(h)!==t&&(e[h]=t)});return l},_preventDuplicateSourceNames:function(a,e){if(e&&1<e.length){var l=this._getDuplicateSourceNameIndexes(e);y.forEach(l,function(h){e[h]+=this._getFieldsString(a[h])},this)}},_getFieldsString:function(a){var e="",l=a.featureLayer;if(l){a=a.searchFields||[this._getDisplayField(a)];for(var h=0;h<a.length;h++){e=0===h?e+": ":e+", ";var t=a[h],M=l.getFieldLabel(t);e+=M||t}}return e},_splitResult:function(a,
e){e=g.escapeString(e);return a.replace(new RegExp("(^|)("+e+")(|$)","ig"),"$1|$2|$3").split("|")},_insertSuggestions:function(a,e){if(this.enableSuggestionsMenu&&this.suggestionsNode){this._hideSourcesMenu();this._hideNoResultsMenu();var l=this.sources;if(a){var h=F.create("div");for(var t in a)if(a[t]&&a[t].length){var M=this._getSourceName(t);1<l.length&&this.activeSourceIndex===this._allIndex&&F.create("div",{className:this.css.searchMenuHeader,textContent:M},h);M=F.create("ul",{role:"menu"},
h);for(var R=l[t].maxSuggestions||this.maxSuggestions,ka=0;ka<a[t].length&&ka<R;++ka){var W=F.create("li",{"data-index":ka,"data-source-index":t,role:"menuitem",tabindex:0},M),ba=this._getSuggestionName(a[t][ka]);ba=this._splitResult(ba,e);for(var S=ba.length,ia=0;ia<S;ia++){var ua=ba[ia];ua.toLowerCase()===e.toLowerCase()?F.create("strong",{textContent:ua},W):(ua=document.createTextNode(ua),F.place(ua,W))}}}}h?(F.place(h,this.suggestionsNode,"only"),this._showSuggestionsMenu()):(F.empty(this.suggestionsNode),
this._hideSuggestionsMenu())}},_insertSources:function(a){if(this.enableSourcesMenu&&a&&1<a.length){var e,l=this.activeSourceIndex,h=F.create("ul",{role:"menu"});if(this.enableSearchingAll){var t="";l===this._allIndex&&(t="active");F.create("li",{"data-index":this._allIndex,role:"menuitem",className:t,tabIndex:0,textContent:A.widgets.Search.main.all},h)}for(e=0;e<a.length;e++){t="";e===l&&(t=this.css.activeSource);var M=this._getSourceName(e);F.create("li",{"data-index":e,role:"menuitem",className:t,
tabIndex:0,textContent:M},h)}c.add(this.containerNode,this.css.hasMultipleSources);F.place(h,this.sourcesNode,"only")}else c.remove(this.containerNode,this.css.hasMultipleSources),F.empty(this.sourcesNode)},_showLoading:function(){c.add(this.containerNode,this.css.searchLoading)},_hideLoading:function(){c.remove(this.containerNode,this.css.searchLoading)},_checkStatus:function(){this.value?(c.add(this.containerNode,this.css.hasValue),f.set(this.clearNode,"title",A.widgets.Search.main.clearButtonTitle)):
this.clear()},_closePopup:function(){this.enableInfoWindow&&this.map&&this.map.infoWindow&&this.map.infoWindow.hide()},_noResults:function(a){var e;a&&(e=v.trim(a));var l=F.create("div",{className:this.css.searchNoResultsBody});a&&e?(F.create("div",{className:this.css.searchNoResultsHeader,textContent:A.widgets.Search.main.noResults},l),F.create("div",{className:this.css.searchNoResultsText,textContent:ja.substitute({value:'"'+a+'"'},A.widgets.Search.main.noResultsFound)},l)):(a=F.create("div",{},
l),F.create("span",{"aria-hidden":"true",className:this.css.searchNoValueIcon},a),F.create("span",{className:this.css.searchNoValueText,textContent:A.widgets.Search.main.emptyValue},a));F.place(l,this.noResultsMenuNode,"only")},_hideMenus:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();this._hideNoResultsMenu()},_hideNoResultsMenu:function(){c.remove(this.containerNode,this.css.showNoResults)},_showNoResultsMenu:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();c.add(this.containerNode,
this.css.showNoResults)},_hideSourcesMenu:function(){c.remove(this.containerNode,this.css.showSources)},_hideSuggestionsMenu:function(){c.remove(this.containerNode,this.css.showSuggestions)},_showSourcesMenu:function(){this._hideSuggestionsMenu();this._hideNoResultsMenu();c.add(this.containerNode,this.css.showSources)},_showSuggestionsMenu:function(){this._hideSourcesMenu();this._hideNoResultsMenu();c.add(this.containerNode,this.css.showSuggestions)},_toggleSourcesMenu:function(){this._hideSuggestionsMenu();
this._hideNoResultsMenu();c.toggle(this.containerNode,this.css.showSources)},_getFirstStringField:function(a){if(a&&(a=a.fields)&&a.length)for(var e=0;e<a.length;e++){var l=a[e];if("esriFieldTypeString"===l.type)return l.name}return""},_getDisplayField:function(a){return a.displayField||a.featureLayer.displayField||this._getFirstStringField(a.featureLayer)},_validLocation:function(a){return a&&"number"===typeof a.x&&"number"===typeof a.y},_validExtent:function(a){return a&&"number"===typeof a.xmin&&
"number"===typeof a.ymin&&"number"===typeof a.xmax&&"number"===typeof a.ymax},_hydrateResult:function(a,e,l){var h={},t=this._defaultSR;e=this.sources[e];this.map&&(t=this.map.spatialReference);if(a.hasOwnProperty("text")&&a.hasOwnProperty("magicKey"))return a;if(a.hasOwnProperty("geometry")){var M=new ha(a.toJson());h.feature=M;(M=h.feature.geometry)&&M.setSpatialReference(t)}else if(a.hasOwnProperty("location")&&this._validLocation(a.location)){var R=new ta(a.location.x,a.location.y,t);M={};a.hasOwnProperty("attributes")&&
(M=a.attributes);a.hasOwnProperty("address")&&"object"===typeof a.address&&v.mixin(M,a.address);a.hasOwnProperty("score")&&(M.score=a.score);h.feature=new ha(R,null,M,null)}!h.feature&&l&&(M={},a.hasOwnProperty("attributes")&&(M=a.attributes),a.hasOwnProperty("score")&&(M.score=a.score),h.feature=new ha(null,null,M,null));if(h.feature){if(a.hasOwnProperty("extent")&&this._validExtent(a.extent))h.extent=new Ca(a.extent),h.extent.setSpatialReference(t);else if(h.feature&&h.feature.geometry)switch(h.feature.geometry.type){case "extent":h.extent=
h.feature.geometry;break;case "multipoint":h.extent=k.getDenormalizedExtent(h.feature.geometry);break;case "polygon":h.extent=k.getDenormalizedExtent(h.feature.geometry);break;case "polyline":h.extent=k.getDenormalizedExtent(h.feature.geometry);break;case "point":this.map?(t=this.zoomScale,e&&e.zoomScale&&(t=e.zoomScale),this._getScale()>t?h.extent=q.getExtentForScale(this.map,t).centerAt(h.feature.geometry):h.extent=this.map.extent.centerAt(h.feature.geometry)):h.extent=new Ca({xmin:h.feature.geometry.x-
.25,ymin:h.feature.geometry.y-.25,xmax:h.feature.geometry.x+.25,ymax:h.feature.geometry.y+.25,spatialReference:this._defaultSR})}else h.extent=null;h.name="";e.featureLayer?e.suggestionTemplate&&l?h.name=ja.substitute(a.attributes,e.suggestionTemplate):e.searchTemplate?h.name=ja.substitute(a.attributes,e.searchTemplate):(M=this._getDisplayField(e),l=e.featureLayer.getField(M),t=e.featureLayer.getDomain(M),M&&a.hasOwnProperty("attributes")&&a.attributes.hasOwnProperty(M)&&(a=a.attributes[M],t&&"codedValue"===
t.type?h.name=this._getCodedName(t.codedValues,a):l&&"esriFieldTypeDate"===l.type&&!isNaN(a)?h.name=K.format(new Date(a)):h.name=a)):a.address&&e.searchTemplate?h.name=ja.substitute(a.address,e.searchTemplate):a.hasOwnProperty("name")?h.name=a.name:a.hasOwnProperty("attributes")&&"object"===typeof a.attributes&&a.attributes.LongLabel?h.name=a.attributes.LongLabel:a.hasOwnProperty("attributes")&&"object"===typeof a.attributes&&a.attributes.Match_addr?(h.name=a.attributes.Match_addr,a.attributes.Addr_type&&
"POI"===a.attributes.Addr_type&&a.attributes.StAddr&&a.attributes.City?h.name+=" - "+a.attributes.StAddr+", "+a.attributes.City:a.attributes.Addr_type&&"POI"===a.attributes.Addr_type&&a.attributes.City&&(h.name+=" - "+a.attributes.City)):a.hasOwnProperty("address")&&"string"===typeof a.address?h.name=a.address:a.hasOwnProperty("address")&&"object"===typeof a.address&&a.address.hasOwnProperty("Address")?a.address.hasOwnProperty("Match_addr")?h.name=a.address.Match_addr:a.address.hasOwnProperty("Address")&&
(h.name=a.address.Address):h.feature&&h.feature.geometry&&(h.name=h.feature.geometry.x+","+h.feature.geometry.y);e.featureLayer&&h.feature&&oa(h.feature,e.featureLayer);return h}},_getScale:function(){var a;this.map&&"function"===typeof this.map.getScale&&(a=this.map.getScale());return a},_hydrateResults:function(a,e,l,h){h=[];var t=0;if(a&&a.length)for(t;t<a.length;t++){var M=this._hydrateResult(a[t],e,l);M&&h.push(M)}return h},_containsNonLatinCharacter:function(a){for(var e=0;e<a.length;e++)if(255<
a.charCodeAt(e))return!0;return!1},_setPlaceholder:function(a){var e="",l=this.sources[a];a===this._allIndex?e=this.allPlaceholder||A.widgets.Search.main.allPlaceholder:l&&l.placeholder&&(e=l.placeholder);var h=A.widgets.Search.main.all;l&&(h=this._getSourceName(a));f.set(this.sourceNameNode,"textContent",h);f.set(this.inputNode,"placeholder",e);f.set(this.inputNode,"title",e)},_updateActiveSource:function(){var a=this.sources,e=this.activeSourceIndex,l;a&&a[e]&&(l=a[e]);l?this.set("activeSource",
l):this.set("activeSource",null)},_updateVisible:function(){this.visible?this.show():this.hide()},_updateButtonMode:function(a){a?(c.toggle(this.containerNode,this.css.searchExpanded,this.expanded),c.toggle(this.containerNode,this.css.searchCollapsed,!this.expanded),c.add(this.containerNode,this.css.hasButtonMode)):(c.remove(this.containerNode,this.css.searchExpanded),c.remove(this.containerNode,this.css.searchCollapsed),c.remove(this.containerNode,this.css.hasButtonMode))},_setDefaultActiveSourceIndex:function(a){a&&
1===a.length||!this.enableSearchingAll?this.set("activeSourceIndex",0):this.set("activeSourceIndex",this._allIndex)},_setEnableSourcesMenuAttr:function(a){this._set("enableSourcesMenu",a);this._created&&this._insertSources(this.sources)},_setEnableSearchingAllAttr:function(a){this._set("enableSearchingAll",a);this._created&&(this._setDefaultActiveSourceIndex(this.sources),this._hideMenus(),this._insertSources(this.sources))},_setSourcesAttr:function(a){this._createSourceNameMap(a).then(v.hitch(this,
function(e){this._sourceNames=e;this._created&&(this._setDefaultActiveSourceIndex(a),this._hideMenus(),this._insertSources(a))}));this._set("sources",a)},_setAllPlaceholderAttr:function(a){this._set("allPlaceholder",a);this._created&&this._setPlaceholder(this.activeSourceIndex)},_setActiveSourceIndexAttr:function(a){this._set("activeSourceIndex",a);this._updateActiveSource();this._created&&(this._setPlaceholder(a),this._hideMenus(),this._insertSources(this.sources))},_setMaxLengthAttr:function(a){this._set("maxLength",
a);this._created&&f.set(this.inputNode,"maxLength",a)},_setValueAttr:function(a){this.set("magicKey",null);this.set("selectedFeatureId",null);this._set("value",a);this._created&&(f.set(this.inputNode,"value",a),this._checkStatus())},_setVisibleAttr:function(a){this._set("visible",a);this._created&&this._updateVisible()},_setEnableButtonModeAttr:function(a){this._set("enableButtonMode",a);this._created&&this._updateButtonMode(a)},_setThemeAttr:function(a){this._created&&(c.remove(this.domNode,this.theme),
c.add(this.domNode,a));this._set("theme",a)}});n("extend-esri")&&v.setObject("dijit.Search",C,da);return C})},"esri/tasks/locator":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ./Task ./AddressCandidate".split(" "),function(E,C,v,y,u,r,z,D,x,n,g){E=E(n,{declaredClass:"esri.tasks.Locator",_eventMap:{"address-to-locations-complete":["addresses"],"addresses-to-locations-complete":["addresses"],
"location-to-address-complete":["address"],"suggest-locations-complete":["suggestions"]},constructor:function(d){this._geocodeHandler=C.hitch(this,this._geocodeHandler);this._geocodeAddressesHandler=C.hitch(this,this._geocodeAddressesHandler);this._reverseGeocodeHandler=C.hitch(this,this._reverseGeocodeHandler);this.registerConnectEvents()},outSpatialReference:null,setOutSpatialReference:function(d){this.outSpatialReference=d},_geocodeHandler:function(d,f,c,w,F){try{var K=d.candidates;f=[];var A,
N=K.length,B=d.spatialReference,I;for(A=0;A<N;A++){var Q=K[A];if(I=Q.location)I.spatialReference=B;f[A]=new g(Q)}this._successHandler([f],"onAddressToLocationsComplete",c,F)}catch(P){this._errorHandler(P,w,F)}},_geocodeAddressesHandler:function(d,f,c,w,F){try{var K=d.locations;f=[];var A,N=K.length,B=d.spatialReference,I;for(A=0;A<N;A++){if(I=K[A].location)I.spatialReference=B;f[A]=new g(K[A])}this._successHandler([f],"onAddressesToLocationsComplete",c,F)}catch(Q){this._errorHandler(Q,w,F)}},addressToLocations:function(d,
f,c,w,F){var K;if(d.address){w=c;c=f;f=d.outFields;F=d.searchExtent;var A=d.countryCode;var N=d.magicKey;var B=d.distance;var I=d.categories;d.location&&this.normalization&&(K=d.location.normalize());var Q=d.locationType;var P=d.maxLocations;var aa=d.forStorage;d=d.address}F&&(F=F.shiftCentralMeridian());var ja=this.outSpatialReference;d=this._encode(C.mixin({},this._url.query,d,{f:"json",outSR:ja&&u.toJson(ja.toJson()),outFields:f&&f.join(",")||null,searchExtent:F&&u.toJson(F.toJson()),category:I&&
I.join(",")||null,countryCode:A||null,magicKey:N||null,distance:B||null,location:K||null,locationType:Q||null,maxLocations:P||null,forStorage:aa||null}));var G=this._geocodeHandler,da=this._errorHandler,V=new y(x._dfdCanceller);V._pendingDfd=D({url:this._url.path+"/findAddressCandidates",content:d,callbackParamName:"callback",load:function(ha,Z){G(ha,Z,c,w,V)},error:function(ha){da(ha,w,V)}});return V},suggestLocations:function(d){var f=new y(x._dfdCanceller);d.hasOwnProperty("location")&&this.normalization&&
(d.location=d.location.normalize());d.searchExtent&&(d.searchExtent=d.searchExtent.shiftCentralMeridian());d=this._encode(C.mixin({},this._url.query,{f:"json",text:d.text,maxSuggestions:d.maxSuggestions,searchExtent:d.searchExtent&&u.toJson(d.searchExtent.toJson()),category:d.categories&&d.categories.join(",")||null,countryCode:d.countryCode||null,location:d.location||null,distance:d.distance||null},{f:"json"}));d=D({url:this._url.path+"/suggest",content:d,callbackParamName:"callback"});f._pendingDfd=
d;d.then(C.hitch(this,function(c){c=c.suggestions||[];this.onSuggestLocationsComplete(c);f.resolve(c)}),C.hitch(this,function(c){this._errorHandler(c);f.reject(c)}));return f},addressesToLocations:function(d,f,c){var w=this.outSpatialReference,F=[],K=d.categories,A=d.locationType,N=d.countryCode;v.forEach(d.addresses,function(P,aa){F.push({attributes:P})});d=this._encode(C.mixin({},this._url.query,{category:K&&K.join(",")||null,locationType:A||null,sourceCountry:N||null},{addresses:u.toJson({records:F})},
{f:"json",outSR:w&&u.toJson(w.toJson())}));var B=this._geocodeAddressesHandler,I=this._errorHandler,Q=new y(x._dfdCanceller);Q._pendingDfd=D({url:this._url.path+"/geocodeAddresses",content:d,callbackParamName:"callback",load:function(P,aa){B(P,aa,f,c,Q)},error:function(P){I(P,c,Q)}});return Q},_reverseGeocodeHandler:function(d,f,c,w,F){try{var K=new g({address:d.address,location:d.location,score:100});this._successHandler([K],"onLocationToAddressComplete",c,F)}catch(A){this._errorHandler(A,w,F)}},
locationToAddress:function(d,f,c,w){d&&this.normalization&&(d=d.normalize());var F=this.outSpatialReference;d=this._encode(C.mixin({},this._url.query,{outSR:F&&u.toJson(F.toJson()),location:d&&u.toJson(d.toJson()),distance:f,f:"json"}));var K=this._reverseGeocodeHandler,A=this._errorHandler,N=new y(x._dfdCanceller);N._pendingDfd=D({url:this._url.path+"/reverseGeocode",content:d,callbackParamName:"callback",load:function(B,I){K(B,I,c,w,N)},error:function(B){A(B,w,N)}});return N},onSuggestLocationsComplete:function(){},
onAddressToLocationsComplete:function(){},onAddressesToLocationsComplete:function(){},onLocationToAddressComplete:function(){}});r("extend-esri")&&C.setObject("tasks.Locator",E,z);return E})},"esri/tasks/AddressCandidate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../geometry/Point"],function(E,C,v,y,u){E=E(null,{declaredClass:"esri.tasks.AddressCandidate",constructor:function(r){C.mixin(this,r);this.location=new u(this.location)}});v("extend-esri")&&C.setObject("tasks.AddressCandidate",
E,y);return E})},"esri/styles/basic":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","../kernel","../Color"],function(E,C,v,y,u){function r(g,d){if(g){var f={};f.color=new u(g.color);f.opacity=g.opacity||1;switch(d){case "point":f.outline={color:new u(g.outline.color),width:g.outline.width};f.size=g.size;break;case "line":f.width=g.width;break;case "polygon":f.outline={color:new u(g.outline.color),width:g.outline.width}}}return f}function z(g){if("esriGeometryPoint"===g||"esriGeometryMultipoint"===
g)g="point";else if("esriGeometryPolyline"===g)g="line";else if("esriGeometryPolygon"===g||"esriGeometryMultiPatch"===g)g="polygon";return g}var D={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},
pointSchemes:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,.25],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:1},size:8}]},dark:{primary:{color:[255,255,255,1],outline:{color:[92,92,92,.25],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:1},size:8},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:1},size:8}]}},lineSchemes:{light:{primary:{color:[77,
77,77,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,139,79,1],outline:{color:[255,255,255,.25],width:1},opacity:.8},secondary:[{color:[128,128,128,1],outline:{color:[255,255,255,.25],width:1},opacity:.8},{color:[255,255,255,1],outline:{color:[128,128,128,.25],width:1},opacity:.8}]},dark:{primary:{color:[227,
139,79,1],outline:{color:[92,92,92,.25],width:1},opacity:.8},secondary:[{color:[178,178,178,1],outline:{color:[92,92,92,.25],width:1},opacity:.8},{color:[26,26,26,1],outline:{color:[128,128,128,.25],width:1},opacity:.8}]}}}},x={};(function(){var g,d,f;for(g in D){var c=D[g];var w=c.basemapGroups;var F=x[g]={basemaps:[].concat(w.light).concat(w.dark),point:{},line:{},polygon:{}};for(d in w){var K=w[d];for(f=0;f<K.length;f++){var A=K[f];c.pointSchemes&&(F.point[A]=c.pointSchemes[d]);c.lineSchemes&&
(F.line[A]=c.lineSchemes[d]);c.polygonSchemes&&(F.polygon[A]=c.polygonSchemes[d])}}}})();var n={getAvailableThemes:function(g){var d=[],f;for(f in D){var c=D[f];var w=x[f];g&&-1===E.indexOf(w.basemaps,g)||d.push({name:c.name,label:c.label,description:c.description,basemaps:w.basemaps.slice(0)})}return d},getSchemes:function(g){var d=g.theme,f=g.basemap,c=z(g.geometryType);g=x[d];var w;(g=(g=g&&g[c])&&g[f])&&(w={primaryScheme:r(g.primary,c),secondarySchemes:E.map(g.secondary,function(F){return r(F,
c)})});return w},cloneScheme:function(g){if(g){var d=C.mixin({},g);d.color&&(d.color=new u(d.color));d.outline&&(d.outline={color:d.outline.color&&new u(d.outline.color),width:d.outline.width})}return d}};v("extend-esri")&&C.setObject("styles.basic",n,y);return n})},"jimu/dijit/LayerChooserFromMapLite":function(){define("dojo/on dojo/_base/declare dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/dijit/CheckBox jimu/dijit/LayerChooserFromMap jimu/LayerStructure".split(" "),function(E,
C,v,y,u,r,z,D,x){var n=C([D],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"treeSection" class\x3d"tree-section"\x3e\x3cul data-dojo-attach-point\x3d"treeUl" class\x3d"tree-ul tree-root-ul"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e',
map:null,layerStateController:null,layerState:null,customFilter:null,onlySelectLeafLayer:!1,displayLayerTypeIcon:!0,showTables:!0,viewMode:!1,onlyShowWebMapLayers:!1,layerStructure:null,_layerDatas:null,_eventHandles:null,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){u.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");u.addClass(this.domNode,"jimu-basic-layer-chooser-from-map-lite");this._layerDatas={};this._eventHandles=[];this.layerStructure=
this.map?x.createInstance(this.map):x.getInstance();this.layerInfosObj=this.layerStructure._layerInfos;this.layerState=this._clearLayerState(this.layerState)||{};this.layerStateController||(this.layerStateController=new n.LayerStateController);var g=this.customFilter?y.hitch(this,this.customFilter):y.hitch(this,this.filter);this.filter=D.andCombineFilters([this.basicFilter,g]);this._createTree()},_createTree:function(){if(this.onlyShowWebMapLayers){var g=this.layerStructure.getWebmapLayerNodes();
var d=this.layerStructure.getWebmapTableNodes()}else g=this.layerStructure.getLayerNodes(),d=this.layerStructure.getTableNodes();0<this._createLayerNodes(g.concat(this.showTables?d:[]),this.treeUl)&&(u.setStyle(this.errorTipSection,"display","none"),this.layerStateController.restoreState(this.layerState,this.layerStructure))},_createLayerNodes:function(g,d){var f=r.map(g,function(w){return this.filter(w._layerInfo)},this),c=0;v(f).then(y.hitch(this,function(w){r.forEach(w,function(F,K){F&&(this._createLayerNode(g[K],
d),c++)},this)}));return c},_createLayerNode:function(g,d){var f=u.create("li",{"class":"tree-node-li",id:"layerchooserlite-tree-node-li-"+g.id},d),c=u.create("div",{"class":"tree-node-div"},f);d=u.create("span",{"class":"tree-node-column-span collapse-span"},c);var w=u.create("span",{"class":"tree-node-column-span check-box-span"},c);w=u.create("div",{"class":"tree-node-column-div check-box-div"},w);var F=u.create("span",{"class":"tree-node-column-span icon-span "+(this.displayLayerTypeIcon?"display":
"")},c);var K=(K=this.layerState[g.id])?K.selected:this.layerStateController.getState(g);K=new z({checked:K},w);var A=u.create("span",{"class":"tree-node-column-span title-span",innerHTML:g.title},c),N=u.create("ul",{"class":"tree-ul tree-subnode-ul",style:"display:none; "},f);f={layerNode:g,layerNodeLi:f,layerNodeDiv:c,collapseSpan:d,iconSpan:F,checkBox:K,subLayerNodeUl:N,hasBeenOpened:!1};this._layerDatas[g.id]=f;g.isLeaf()||(u.addClass(d,"is-leaf"),u.addClass(A,"is-leaf"),g=E(d,"click",y.hitch(this,
this._onCollapse,f)),this._eventHandles.push(g),g=E(A,"click",y.hitch(this,this._onCollapse,f)),this._eventHandles.push(g),this.onlySelectLeafLayer&&(K.setStatus(!1),u.setStyle(w,"display","none")));!0===this.viewMode&&K.setStatus(!1);g=E(K.domNode,"click",y.hitch(this,this._onCheckBoxChange,f));this._eventHandles.push(g);this._setIconImage(f,!1);return f},_setIconImage:function(g,d){if(this.displayLayerTypeIcon){var f=g.layerNode,c=f.getLayerType(),w=f.getLayerObject();v({layerType:c,layerObject:w}).then(y.hitch(this,
function(F){if(F.layerType&&F.layerObject){var K={type:F.layerType,layerInfo:f._layerInfo};F=window.location.protocol+"//"+window.location.host+require.toUrl("jimu");(K=this._getIconInfo(K,d).imageName)&&u.setStyle(g.iconSpan,"background-image","url("+F+"/css/images/"+K+")")}}))}},_getCheckBoxValue:function(g){return g.getStatus()?g.getValue():!1},_clearLayerState:function(g){var d={};g&&this.layerStructure.traversal(y.hitch(this,function(f){g[f.id]&&(d[f.id]={selected:g[f.id].selected})}));return d},
_selectOrDeselectLayer:function(g,d){if(g=this._layerDatas[g])g.checkBox.setValue(d),this._onCheckBoxChange(g)},selectLayer:function(g){this._selectOrDeselectLayer(g,!0)},deselectLayer:function(g){this._selectOrDeselectLayer(g,!1)},getState:function(){var g=y.clone(this.layerState),d;for(d in this._layerDatas)this._layerDatas.hasOwnProperty(d)&&"function"!==typeof this._layerDatas[d]&&(this._getCheckBoxValue(this._layerDatas[d].checkBox)?g[d]={selected:!0}:g[d]={selected:!1});return g},restoreState:function(g){this.layerState=
this._clearLayerState(g);for(var d in this._layerDatas)if(this._layerDatas.hasOwnProperty(d)&&"function"!==typeof this._layerDatas[d]){var f=(g=this._layerDatas[d])&&g.checkBox,c=this.layerState[d];c?f.setValue(c.selected):f.setValue(this.layerStateController.getState(g.layerNode))}this.layerStateController.restoreState(this.layerState,this.layerStructure)},setViewMode:function(g){for(var d in this._layerDatas)if(this._layerDatas.hasOwnProperty(d)&&"function"!==typeof this._layerDatas[d]){var f=this._layerDatas[d];
f=f&&f.checkBox;!0===g?(this.viewMode=!0,f.setStatus(!1)):(this.viewMode=!1,f.setStatus(!0))}},getSelectedLayerNodes:function(){var g=[],d=this.getState(),f;for(f in d)if(d.hasOwnProperty(f)&&"function"!==typeof d[f]&&d[f].selected){var c=this.layerStructure.getNodeById(f);c&&g.push(c)}return g},getLoadedLayerNodes:function(){var g=[],d;for(d in this._layerDatas)if(this._layerDatas.hasOwnProperty(d)&&"function"!==typeof this._layerDatas[d]){var f=this.layerStructure.getNodeById(d);f&&g.push(f)}return g},
getLayerAssociateDomNodesById:function(g){var d=null;(g=this._layerDatas[g])&&(d={collapseIcon:g.collapseSpan,checkBox:g.checkBox.domNode,layerTypeIcon:g.iconSpan});return d},getSelectedItems:function(){var g=[];return g=r.map(this.getSelectedLayerNodes(),function(d){return{name:d.title,url:d.getUrl(),layerInfo:d._layerInfo}},this)},getAllItems:function(){return[]},_clear:function(){this._layerDatas={};r.forEach(this._eventHandles,function(g){g.remove()},this);this._eventHandles=[];u.empty(this.treeUl)},
destroy:function(){this._clear();this.map&&this.layerStructure.destroy();this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)},_onCollapse:function(g){var d="none"===u.getStyle(g.subLayerNodeUl,"display")?!0:!1;d?(u.setStyle(g.subLayerNodeUl,"display","block"),u.addClass(g.collapseSpan,"opened")):(u.setStyle(g.subLayerNodeUl,"display","none"),u.removeClass(g.collapseSpan,"opened"));this._setIconImage(g,d);g.hasBeenOpened||(this._createLayerNodes(g.layerNode.getSubNodes(),
g.subLayerNodeUl),g.hasBeenOpened=!0)},_onCheckBoxChange:function(g,d){this.layerStateController.setState(g.layerNode,this._getCheckBoxValue(g.checkBox));this.emit("selection-change",g.layerNode,this._getCheckBoxValue(g.checkBox));this._onTreeClick(g,d)},_onLayerInfosChanged:function(){this._createTree();this.emit("update")},_onLayerInfosIsShowInMapChanged:function(){this._createTree();this.emit("update")},_onTreeClick:function(g,d){g={name:g.layerNode.title||"",parent:null,layerInfo:g.layerNode._layerInfo,
type:null,layerClass:null,id:null,isLeaf:g.layerNode.isLeaf(),hasChildren:g.layerNode.isLeaf()?!1:!0};this.emit("tree-click",g,null,d)}});n.LayerStateController=C(null,{getState:function(g){return!0},setState:function(g,d){return this},restoreState:function(g,d){return this}});n.LayerVisibilityStateController=C(n.LayerStateController,{getState:function(g){return g.isToggledOn()},setState:function(g,d){g.toggle();return this},restoreState:function(g,d){var f={layerOptions:{}},c;for(c in g)g.hasOwnProperty(c)&&
"function"!==typeof g[c]&&(f.layerOptions[c]={visible:g[c].selected});d.restoreState(f);return this}});n.layerVisibilityStateController=new n.LayerVisibilityStateController;n.LayerLegendStateController=C(n.LayerStateController,{getState:function(g){return g.isShowLegend()}});n.layerLegendStateController=new n.LayerLegendStateController;return n})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(E,C,v,y,u,r,z,D,x,n,g,d,f,c,w,F,K,A){var N=v([y,u,r,C],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,onlyFilterCurrentLayerWhenAddItem:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);f.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new A({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=d.hitch(this,this.basicFilter);
this.filter=N.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(B){var I=new D;this.onlyShowVisible?I.resolve(B.isShowInMap()):I.resolve(!0);return I},filter:function(B){B=new D;B.resolve(!0);return B},getSelectedItems:function(){var B=this.tree.getSelectedItems();return c.map(B,d.hitch(this,function(I){return this.getHandledItem(I)}))},getAllItems:function(){var B=this.tree.getAllItems(),I=[];c.forEach(B,
d.hitch(this,function(Q){"root"!==Q.id&&(Q=this.getHandledItem(Q),I.push(Q))}));return I},getHandledItem:function(B){return{name:B.name,layerInfo:B.layerInfo}},_isLeafItem:function(B){return B.isLeaf},setCreateMapResponse:function(B){this.createMapResponse=B;K.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(d.hitch(this,function(I){this.layerInfosObj=I;this.own(E(this.layerInfosObj,"layerInfosChanged",d.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&
this.own(E(this.layerInfosObj,"layerInfosIsShowInMapChanged",d.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(B,I){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(B){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(B){this._clear();f.setStyle(this.errorTipSection,"display","block");var I=[];this.onlyShowWebMapLayers?(I=B.getLayerInfoArrayOfWebmap(),
I=I.concat(B.getTableInfoArrayOfWebmap())):(I=B.getLayerInfoArray(),I=I.concat(B.getTableInfoArray()));0!==I.length&&(f.setStyle(this.errorTipSection,"display","none"),c.forEach(I,d.hitch(this,function(Q){this._addDirectLayerInfo(Q)})))},_addDirectLayerInfo:function(B){B&&B.getLayerObject().then(d.hitch(this,function(){this._addItem("root",B)}),d.hitch(this,function(I){console.error(I)}))},_clear:function(){var B=this._store.query({parent:"root"});c.forEach(B,d.hitch(this,function(I){I&&"root"!==
I.id&&this._store.remove(I.id)}))},_addItem:function(B,I){var Q=null,P=I.getLayerType(),aa=this.filter(I);g({layerType:P,valid:aa}).then(d.hitch(this,function(ja){if(ja.valid){var G=d.hitch(this,function(Z,Ba){this._id++;Q={name:I.title||"",parent:B,layerInfo:I,type:ja.layerType,layerClass:I.layerObject.declaredClass,id:this._id.toString(),isLeaf:Z,hasChildren:Ba};this._store.add(Q)}),da=I.getSubLayers(),V=0===da.length,ha=!0;this.onlyFilterCurrentLayerWhenAddItem?(V&&(ha=!1),G(V,ha)):V?G(V,!1):(da=
c.map(da,d.hitch(this,function(Z){return this.filter(Z)})),g(da).then(d.hitch(this,function(Z){(Z=c.some(Z,function(Ba){return Ba}))&&G(V,Z)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var B=this._getRootItem();B=new z({data:[B],getChildren:function(I){return this.query({parent:I.id})}});this._store=new x(B);B=new n({store:this._store,query:{id:"root"},mayHaveChildren:d.hitch(this,this._mayHaveChildren)});this.tree=
new F({multiple:this.multiple,model:B,showRoot:!1,isLeafItem:d.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:d.hitch(this,function(I,Q){"root"!==I.id&&this._onTreeOpen(I,Q)}),onClick:d.hitch(this,function(I,Q,P){this._onTreeClick(I,Q,P);this.emit("tree-click",I,Q,P)}),getIconStyle:d.hitch(this,function(I,Q){var P=null;if(!I||"root"===I.id)return null;var aa={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},ja=window.location.protocol+
"//"+window.location.host+require.toUrl("jimu");if(I=this._getIconInfo(I,Q).imageName)aa.backgroundImage="url("+ja+"/css/images/"+I+")",P=aa;return P}),getIconClass:d.hitch(this,function(I,Q){return this._getIconInfo(I,Q).className}),getTooltip:d.hitch(this,function(I){return this.displayTooltipForTreeNode?I.layerInfo.title:""})});f.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(B){return B.hasChildren},_getIconInfo:function(B,
I){var Q="",P="";"ArcGISDynamicMapServiceLayer"===B.type||"ArcGISTiledMapServiceLayer"===B.type?I?(Q="mapserver_open.png",P="mapservice-layer-icon open"):(Q="mapserver_close.png",P="mapservice-layer-icon close"):"GroupLayer"===B.type?I?(Q="group_layer2.png",P="group-layer-icon open"):(Q="group_layer1.png",P="group-layer-icon close"):"FeatureLayer"===B.type?(B=w.getTypeByGeometryType(B.layerInfo.layerObject.geometryType),"point"===B?(Q="point_layer1.png",P="point-layer-icon"):"polyline"===B?(Q="line_layer1.png",
P="line-layer-icon"):"polygon"===B&&(Q="polygon_layer1.png",P="polygon-layer-icon")):"Table"===B.type?(Q="table.png",P="table-icon"):"ArcGISImageServiceLayer"===B.type||"ArcGISImageServiceVectorLayer"===B.type?(Q="image_layer.png",P="iamge-layer-icon"):I?(Q="mapserver_open.png",P="mapservice-layer-icon open"):(Q="mapserver_close.png",P="mapservice-layer-icon close");return{imageName:Q,className:P}},_onTreeOpen:function(B,I){if("root"!==B.id){var Q=[];I=[];Q=B.layerInfo.getSubLayers();B.checked||(this.shelter.show(),
I=c.map(Q,d.hitch(this,function(P){return P.getLayerObject()})),g(I).then(d.hitch(this,function(){this.domNode&&(c.forEach(Q,d.hitch(this,function(P){this._addItem(B.id,P)})),B.checked=!0,this.shelter.hide())}),d.hitch(this,function(P){console.error(P);this.shelter.hide()})))}},_onTreeClick:function(B,I,Q){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});N.createFilterByLayerType=function(B){d.isArrayLike(B)||
(B=[]);return function(I){var Q=new D;if(0===B.length)Q.resolve(!0);else{var P=[];I.traversal(function(aa){P.push(aa.getLayerType())});g(P).then(function(aa){for(var ja=0;ja<aa.length;ja++)for(var G=0;G<B.length;G++)if(aa[ja]===B[G]){Q.resolve(!0);return}Q.resolve(!1)},function(aa){console.error(aa);Q.reject(aa)})}return Q}};N.createFeaturelayerFilter=function(B,I,Q,P){var aa=["point","polyline","polygon"];B&&0<B.length?(B=c.filter(B,function(ja){return 0<=aa.indexOf(ja)}),0===B.length&&(B=aa)):B=
aa;return function(ja){var G=ja.getLayerType();ja=ja.getLayerObject();return g({layerType:G,layerObject:ja}).then(function(da){var V=da.layerType;da=da.layerObject;if("ArcGISDynamicMapServiceLayer"===V||"ArcGISTiledMapServiceLayer"===V||"GroupLayer"===V||"FeatureCollection"===V)return!0;if("FeatureLayer"===V){V=w.getTypeByGeometryType(da.geometryType);V=0<=c.indexOf(B,V);var ha=N._shouldPassStatisticsCheck(P,da);return da.url?(da=w.isFeaturelayerUrlSupportQuery(da.url,da.capabilities),V&&da&&ha):
I&&V}return"Table"===V?(V=w.isFeaturelayerUrlSupportQuery(da.url,da.capabilities),da=N._shouldPassStatisticsCheck(P,da),Q&&V&&da):!1})}};N.createImageServiceLayerFilter=function(B,I){return function(Q){var P=Q.getLayerType();Q=Q.getLayerObject();return g({layerType:P,layerObject:Q}).then(function(aa){var ja=aa.layerType,G=aa.layerObject;return"ArcGISImageServiceLayer"===ja||"ArcGISImageServiceVectorLayer"===ja?B?w.isImageServiceSupportQuery(aa.layerObject.capabilities)?I?N._shouldPassStatisticsCheck(I,
G):!0:!1:!0:!1})}};N._shouldPassStatisticsCheck=function(B,I){return B?(B=!1,B=I.advancedQueryCapabilities?!!I.advancedQueryCapabilities.supportsStatistics:!!I.supportsStatistics):!0};N.createQueryableLayerFilter=function(B){var I=N.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,B);B=N.createImageServiceLayerFilter(!0,B);return N.orCombineFilters([I,B])};N.andCombineFilters=function(B){return N._combineFilters(B,!0)};N.orCombineFilters=function(B){return N._combineFilters(B,!1)};N._combineFilters=
function(B,I){return function(Q){var P=new D,aa=c.map(B,function(ja){return ja(Q)});g(aa).then(function(ja){var G=!1;G=I?c.every(ja,function(da){return da}):c.some(ja,function(da){return da});P.resolve(G)},function(ja){console.error(ja);P.reject(ja)});return P}};return N})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(E,C,v,y,u,r,z){return v("dijit.tree.ObjectStoreModel",
z,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(D){u.mixin(this,D);this.childrenCache={}},getRoot:function(D,x){if(this.root)D(this.root);else{var n=this.store.query(this.query);n.then&&this.own(n);r(n,u.hitch(this,function(g){if(1!=g.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+g.length+" items, but must return exactly one");this.root=g[0];D(this.root);n.observe&&n.observe(u.hitch(this,function(d){this.onChange(d)}),!0)}),x)}},mayHaveChildren:function(){return!0},
getChildren:function(D,x,n){var g=this.store.getIdentity(D);if(this.childrenCache[g])r(this.childrenCache[g],x,n);else{var d=this.childrenCache[g]=this.store.getChildren(D);d.then&&this.own(d);d.observe&&this.own(d.observe(u.hitch(this,function(f,c,w){this.onChange(f);c!=w&&r(d,u.hitch(this,"onChildrenChange",D))}),!0));r(d,x,n)}},isItem:function(){return!0},getIdentity:function(D){return this.store.getIdentity(D)},getLabel:function(D){return D[this.labelAttr]},newItem:function(D,x,n,g){return this.store.put(D,
{parent:x,before:g})},pasteItem:function(D,x,n,g,d,f){var c=new y;if(x===n&&!g&&!f)return c.resolve(!0),c;x&&!g?this.getChildren(x,u.hitch(this,function(w){w=[].concat(w);var F=E.indexOf(w,D);w.splice(F,1);this.onChildrenChange(x,w);c.resolve(this.store.put(D,{overwrite:!0,parent:n,oldParent:x,before:f,isCopy:!1}))})):c.resolve(this.store.put(D,{overwrite:!0,parent:n,oldParent:x,before:f,isCopy:!0}));return c},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(E,C,v,y,u,r,z,D,x,n,g,d,f,c,w,F){var K=E([w._TreeNode,f],{templateString:y,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);r.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=r.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=r.toDom('\x3cinput type\x3d"checkbox" /\x3e');r.addClass(this.checkNode,"jimu-tree-check-node");r.place(this.checkNode,this.contentNode,
"first");this.own(g(this.checkNode,"click",u.hitch(this,this._onClick)));this.own(g(this.rowNode,"keydown",u.hitch(this,function(A,N){N.target=A;N.keyCode!==d.ENTER&&N.keyCode!==d.SPACE||this._onClick(N)},this.checkNode)));this.isLeaf?this.groupId?r.setStyle(this.checkNode,"display","none"):r.setStyle(this.checkNode,"display","inline"):r.setStyle(this.checkNode,"display","none");this.isLeaf?r.addClass(this.domNode,"jimu-tree-leaf-node"):r.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&
(this.checkNode.checked=!0,r.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,r.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(A){(A.target||A.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,A):this.tree._onClick(this,A)},_onChange:function(){this.isLeaf&&setTimeout(u.hitch(this,
function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return E([w,f],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+F.getRandomString()},postCreate:function(){this.inherited(arguments);r.addClass(this.domNode,"jimu-tree");this.own(n.before(this,"onClick",u.hitch(this,this._jimuBeforeClick)));
this.rootLoadingIndicator&&r.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0;r.setAttr(this.domNode,"tabindex",0)},removeItem:function(A){this.model.store.remove(A)},getAllItems:function(){var A=this.getAllTreeNodeWidgets();return z.map(A,u.hitch(this,function(N){var B=N.item;B.selected=N.checkNode.checked;return B}))},getSelectedItems:function(){var A=this.getAllTreeNodeWidgets();A=z.filter(A,u.hitch(this,function(N){return N.checkNode.checked}));return z.map(A,
u.hitch(this,function(N){return N.item}))},getFilteredItems:function(A){var N=this.getAllTreeNodeWidgets();N=z.map(N,u.hitch(this,function(B){var I=B.item;I.selected=B.checkNode.checked;return I}));return z.filter(N,u.hitch(this,function(B){return A(B)}))},getTreeNodeByItemId:function(A){for(var N=this._getAllTreeNodeDoms(),B=0;B<N.length;B++){var I=c.byNode(N[B]);if(I.item.id.toString()===A.toString())return I}return null},selectItem:function(A){(A=this.getTreeNodeByItemId(A))&&A.isLeaf&&this.selectNodeWidget(A)},
unselectItem:function(A){(A=this.getTreeNodeByItemId(A))&&A.isLeaf&&A.unselect()},getAllLeafTreeNodeWidgets:function(){var A=this.getAllTreeNodeWidgets();return z.filter(A,u.hitch(this,function(N){return N.isLeaf}))},getAllTreeNodeWidgets:function(){var A=this._getAllTreeNodeDoms();return z.map(A,u.hitch(this,function(N){return c.byNode(N)}))},isLeafItem:function(A){return A&&A.isLeaf},_getAllTreeNodeDoms:function(){return x(".dijitTreeNode",this.domNode)},_createTreeNode:function(A){A.isLeaf=this.isLeafItem(A.item);
this.multiple||(A.groupId=this.uniqueId);return new K(A)},_onTreeNodeSelect:function(A){this.emit("item-select",{item:A.item,treeNode:A})},_onTreeNodeUnselect:function(A){this.emit("item-unselect",{item:A.item,treeNode:A})},selectNodeWidget:function(A){this.multiple||this.unselectAllLeafNodeWidgets();A.select()},_jimuBeforeClick:function(A,N,B){N.isLeaf&&(r.hasClass(B.target||B.srcElement,"jimu-tree-check-node")||(this.multiple?N.toggleSelect():this.selectNodeWidget(N)));return arguments},_onCheckNodeClick:function(A,
N,B){!this.multiple&&N&&this.unselectAllLeafNodeWidgets();D.stop(B);this.focusNode(A);setTimeout(u.hitch(this,function(){N?this.selectNodeWidget(A):A.unselect();this.onClick(A.item,A,B)}),0)},unselectAllLeafNodeWidgets:function(){var A=this.getAllLeafTreeNodeWidgets();z.forEach(A,u.hitch(this,function(N){N.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(E,C,v,y,u,r,z,D,x,n,g,d,f,c,w,F,K,A,N,B,I,Q,P,aa,ja,G,da,V,ha,Z,Ba,Ya,Ha,Za,$a){function na(k){return F.delegate(k.promise||k,{addCallback:function(q){this.then(q)},addErrback:function(q){this.otherwise(q)}})}var ta=y("dijit._TreeNode",[ja,G,da,V,ha],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(k){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=k;this._set("label",k);f("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:Ba,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(k){var q=Math.max(k,0)*this.tree._nodePixelIndent+"px";n.set(this.domNode,
"backgroundPosition",q+" 0px");n.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",q);E.forEach(this.getChildren(),function(T){T.set("indent",k+1)});this._set("indent",k)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(k){var q=this.tree,T=q.model;q._v10Compat&&k===T.root&&(k=null);this._applyClassAndStyle(k,"icon","Icon");this._applyClassAndStyle(k,"label","Label");this._applyClassAndStyle(k,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(k,q,T){var U="_"+q+"Class";q+="Node";var fa=this[U];this[U]=this.tree["get"+T+"Class"](k,this.isExpanded);D.replace(this[q],this[U]||"",fa||"");n.set(this[q],this.tree["get"+T+"Style"](k,this.isExpanded)||{})},_updateLayout:function(){var k=this.getParent();k=!k||!k.rowNode||"none"==k.rowNode.style.display;D.toggle(this.domNode,"dijitTreeIsRoot",k);D.toggle(this.domNode,"dijitTreeIsLast",!k&&!this.getNextSibling())},_setExpando:function(k){var q=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];k=k?0:this.isExpandable?this.isExpanded?1:2:3;D.replace(this.expandoNode,q[k],q);this.expandoNodeText.innerHTML=["*","-","+","*"][k]},expand:function(){if(this._expandDeferred)return na(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");D.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var k=d.wipeIn({node:this.containerNode,duration:aa.defaultDuration}),q=this._expandDeferred=new u(function(){k.stop()});C.after(k,"onEnd",function(){q.resolve(!0)},!0);k.play();return na(q)},collapse:function(){if(this._collapseDeferred)return na(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");D.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var k=d.wipeOut({node:this.containerNode,duration:aa.defaultDuration}),q=this._collapseDeferred=new u(function(){k.stop()});C.after(k,"onEnd",
function(){q.resolve(!0)},!0);k.play();return na(q)},indent:0,setChildItems:function(k){var q=this.tree,T=q.model,U=[],fa=q.focusedChild,ra=this.getChildren();E.forEach(ra,function(oa){da.prototype.removeChild.call(this,oa)},this);this.defer(function(){E.forEach(ra,function(oa){if(!oa._destroyed&&!oa.getParent()){q.dndController.removeTreeNode(oa);(function t(h){var M=T.getIdentity(h.item),R=q._itemNodesMap[M];1==R.length?delete q._itemNodesMap[M]:(M=E.indexOf(R,h),-1!=M&&R.splice(M,1));E.forEach(h.getChildren(),
t)})(oa);if(q.persist){var a=E.map(oa.getTreePath(),function(h){return q.model.getIdentity(h)}).join("/"),e;for(e in q._openedNodes)e.substr(0,a.length)==a&&delete q._openedNodes[e];q._saveExpandedNodes()}q.lastFocusedChild&&!z.isDescendant(q.lastFocusedChild.domNode,q.domNode)&&delete q.lastFocusedChild;fa&&!z.isDescendant(fa.domNode,q.domNode)&&q.focus();oa.destroyRecursive()}})});this.state="Loaded";k&&0<k.length?(this.isExpandable=!0,E.forEach(k,function(oa){var a=T.getIdentity(oa),e=q._itemNodesMap[a];
if(e)for(var l=0;l<e.length;l++)if(e[l]&&!e[l].getParent()){var h=e[l];h.set("indent",this.indent+1);break}h||(h=this.tree._createTreeNode({item:oa,tree:q,isExpandable:T.mayHaveChildren(oa),label:q.getLabel(oa),labelType:q.model&&q.model.labelType||"text",tooltip:q.getTooltip(oa),ownerDocument:q.ownerDocument,dir:q.dir,lang:q.lang,textDir:q.textDir,indent:this.indent+1}),e?e.push(h):q._itemNodesMap[a]=[h]);this.addChild(h);(this.tree.autoExpand||this.tree._state(h))&&U.push(q._expandNode(h))},this),
E.forEach(this.getChildren(),function(oa){oa._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);k=r(U);this.tree._startPaint(k);return na(k)},getTreePath:function(){for(var k=this,q=[];k&&k!==this.tree.rootNode;)q.unshift(k.item),k=k.getParent();q.unshift(this.tree.rootNode.item);return q},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(k){this.inherited(arguments);var q=this.getChildren();0==
q.length&&(this.isExpandable=!1,this.collapse());E.forEach(q,function(T){T._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(k){this.labelNode.setAttribute("aria-selected",k?"true":"false");D.toggle(this.rowNode,"dijitTreeRowSelected",k)},focus:function(){Q.focus(this.focusNode)}});f("dojo-bidi")&&ta.extend({_setTextDirAttr:function(k){!k||this.textDir==k&&this._created||(this._set("textDir",k),this.applyTextDir(this.labelNode),E.forEach(this.getChildren(),
function(q){q.set("textDir",k)},this))}});var Ca=y("dijit.Tree",[ja,Z,G,ha],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:Ya,persist:!1,autoExpand:!1,dndController:$a,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,
checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(k,q){A.publish(this.id,F.mixin({tree:this,event:k},q||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new u;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var k=
this;this.own(K(this.containerNode,K.selector(".dijitTreeNode",N.enter),function(U){k._onNodeMouseEnter(P.byNode(this),U)}),K(this.containerNode,K.selector(".dijitTreeNode",N.leave),function(U){k._onNodeMouseLeave(P.byNode(this),U)}),K(this.containerNode,K.selector(".dijitTreeRow",I.press),function(U){k._onNodePress(P.getEnclosingWidget(this),U)}),K(this.containerNode,K.selector(".dijitTreeRow",I),function(U){k._onClick(P.getEnclosingWidget(this),U)}),K(this.containerNode,K.selector(".dijitTreeRow",
"dblclick"),function(U){k._onDblClick(P.getEnclosingWidget(this),U)}));this.model||this._store2model();this.own(C.after(this.model,"onChange",F.hitch(this,"_onItemChange"),!0),C.after(this.model,"onChildrenChange",F.hitch(this,"_onItemChildrenChange"),!0),C.after(this.model,"onDelete",F.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){F.isString(this.dndController)&&(this.dndController=F.getObject(this.dndController));for(var q={},T=0;T<this.dndParams.length;T++)this[this.dndParams[T]]&&
(q[this.dndParams[T]]=this[this.dndParams[T]]);this.dndController=new this.dndController(this,q)}this._load();this.onLoadDeferred=na(this.pendingCommandsPromise);this.onLoadDeferred.then(F.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;c.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var k={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(k.mayHaveChildren=
F.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&(k.getChildren=F.hitch(this,function(q,T,U){this.getItemChildren(this._v10Compat&&q===this.model.root?null:q,T,U)}));this.model=new Za(k);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(F.hitch(this,function(k){var q=this.rootNode=this.tree._createTreeNode({item:k,tree:this,isExpandable:!0,label:this.label||this.getLabel(k),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?
0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(q.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(q.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(q.containerNode.setAttribute("aria-labelledby",
this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),q.labelNode.setAttribute("role","presentation"),q.labelNode.removeAttribute("aria-selected"),q.containerNode.setAttribute("role","tree"),q.containerNode.setAttribute("aria-expanded","true"),q.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(q.domNode);k=this.model.getIdentity(k);this._itemNodesMap[k]?this._itemNodesMap[k].push(q):this._itemNodesMap[k]=[q];q._updateLayout();
this._expandNode(q).then(F.hitch(this,function(){this._destroyed||(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),F.hitch(this,function(k){console.error(this,": error loading root: ",k)}))},getNodesByItem:function(k){if(!k)return[];k=F.isString(k)?k:this.model.getIdentity(k);return[].concat(this._itemNodesMap[k])},_setSelectedItemAttr:function(k){this.set("selectedItems",[k])},_setSelectedItemsAttr:function(k){var q=this;return this.pendingCommandsPromise=
this.pendingCommandsPromise.always(F.hitch(this,function(){var T=E.map(k,function(fa){return!fa||F.isString(fa)?fa:q.model.getIdentity(fa)}),U=[];E.forEach(T,function(fa){U=U.concat(q._itemNodesMap[fa]||[])});this.set("selectedNodes",U)}))},_setPathAttr:function(k){return k.length?na(this.set("paths",[k]).then(function(q){return q[0]})):na(this.set("paths",[]).then(function(q){return q[0]}))},_setPathsAttr:function(k){function q(U,fa){var ra=U.shift(),oa=E.filter(fa,function(a){return a.getIdentity()==
ra})[0];if(oa)return U.length?T._expandNode(oa).then(function(){return q(U,oa.getChildren())}):oa;throw new Ca.PathError("Could not expand path at "+ra);}var T=this;return na(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return r(E.map(k,function(U){U=E.map(U,function(fa){return fa&&F.isObject(fa)?T.model.getIdentity(fa):fa});if(U.length)return q(U,[T.rootNode]);throw new Ca.PathError("Empty path");}))}).then(function(U){T.set("selectedNodes",U);return T.paths}))},_setSelectedNodeAttr:function(k){this.set("selectedNodes",
[k])},_setSelectedNodesAttr:function(k){this.dndController.setSelection(k)},expandAll:function(){function k(T){return q._expandNode(T).then(function(){var U=E.filter(T.getChildren()||[],function(fa){return fa.isExpandable});return r(E.map(U,k))})}var q=this;return na(k(this.rootNode))},collapseAll:function(){function k(T){var U=E.filter(T.getChildren()||[],function(fa){return fa.isExpandable});U=r(E.map(U,k));return!T.isExpanded||T==q.rootNode&&!q.showRoot?U:U.then(function(){return q._collapseNode(T)})}
var q=this;return na(k(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(k){return this.model.getLabel(k)},getIconClass:function(k,q){return!k||this.model.mayHaveChildren(k)?q?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(k,q){(k=this._getNext(q))&&k.isTreeNode&&this.focusNode(k)},
_onUpArrow:function(k,q){if(k=q.getPreviousSibling())for(q=k;q.isExpandable&&q.isExpanded&&q.hasChildren();)q=q.getChildren(),q=q[q.length-1];else if(k=q.getParent(),this.showRoot||k!==this.rootNode)q=k;q&&q.isTreeNode&&this.focusNode(q)},_onRightArrow:function(k,q){q.isExpandable&&!q.isExpanded?this._expandNode(q):q.hasChildren()&&(q=q.getChildren()[0])&&q.isTreeNode&&this.focusNode(q)},_onLeftArrow:function(k,q){q.isExpandable&&q.isExpanded?this._collapseNode(q):(k=q.getParent())&&k.isTreeNode&&
(this.showRoot||k!==this.rootNode)&&this.focusNode(k)},focusLastChild:function(){var k=this._getLast();k&&k.isTreeNode&&this.focusNode(k)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var k=this.rootNode;k.isExpanded;){var q=k.getChildren();if(!q.length)break;k=q[q.length-1]}return k},_getNext:function(k){if(k.isExpandable&&k.isExpanded&&k.hasChildren())return k.getChildren()[0];for(;k&&k.isTreeNode;){var q=k.getNextSibling();if(q)return q;
k=k.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(k,q){return z.isDescendant(k,q.expandoNode)||z.isDescendant(k,q.expandoNodeText)},_onNodePress:function(k,q){this.focusNode(k)},__click:function(k,q,T,U){var fa=this.isExpandoNode(q.target,k);k.isExpandable&&(T||fa)?this._onExpandoClick({node:k}):(this._publish("execute",{item:k.item,node:k,evt:q}),this[U](k.item,k,q),this.focusNode(k));q.stopPropagation();q.preventDefault()},_onClick:function(k,q){this.__click(k,q,
this.openOnClick,"onClick")},_onDblClick:function(k,q){this.__click(k,q,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(k){k=k.node;this.focusNode(k);k.isExpanded?this._collapseNode(k):this._expandNode(k)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(k){c.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(k)},_getRootOrFirstNode:function(){c.deprecated(this.declaredClass+
"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(k){k._expandNodeDeferred&&delete k._expandNodeDeferred;if("Loading"!=k.state&&k.isExpanded){var q=k.collapse();this.onClose(k.item,k);this._state(k,!1);this._startPaint(q);return q}},_expandNode:function(k){if(k._expandNodeDeferred)return k._expandNodeDeferred;var q=this.model,T=k.item,U=this;k._loadDeferred||(k.markProcessing(),k._loadDeferred=new u,q.getChildren(T,function(fa){k.unmarkProcessing();
k.setChildItems(fa).then(function(){k._loadDeferred.resolve(fa)})},function(fa){console.error(U,": error loading "+k.label+" children: ",fa);k._loadDeferred.reject(fa)}));q=k._loadDeferred.then(F.hitch(this,function(){var fa=k.expand();this.onOpen(k.item,k);this._state(k,!0);return fa}));this._startPaint(q);return q},focusNode:function(k){for(var q=[],T=this.domNode;T&&T.tagName&&"IFRAME"!==T.tagName.toUpperCase();T=T.parentNode)q.push({domNode:T.contentWindow||T,scrollLeft:T.scrollLeft||0,scrollTop:T.scrollTop||
0});this.focusChild(k);this.defer(function(){for(var U=0,fa=q.length;U<fa;U++)q[U].domNode.scrollLeft=q[U].scrollLeft,q[U].domNode.scrollTop=q[U].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(k){var q=this.model.getIdentity(k);if(q=this._itemNodesMap[q]){var T=this.getLabel(k),U=this.getTooltip(k);E.forEach(q,function(fa){fa.set({item:k,label:T,tooltip:U});fa._updateItemClasses(k)})}},_onItemChildrenChange:function(k,q){k=this.model.getIdentity(k);
(k=this._itemNodesMap[k])&&E.forEach(k,function(T){T.setChildItems(q)})},_onItemDelete:function(k){k=this.model.getIdentity(k);var q=this._itemNodesMap[k];q&&(E.forEach(q,function(T){this.dndController.removeTreeNode(T);var U=T.getParent();U&&U.removeChild(T);this.lastFocusedChild&&!z.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!z.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();T.destroyRecursive()},this),delete this._itemNodesMap[k])},
_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var k=v(this.cookieName);k&&E.forEach(k.split(","),function(q){this._openedNodes[q]=!0},this)}},_state:function(k,q){if(!this.persist)return!1;var T=E.map(k.getTreePath(),function(U){return this.model.getIdentity(U)},this).join("/");if(1===arguments.length)return this._openedNodes[T];q?this._openedNodes[T]=!0:delete this._openedNodes[T];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var k=
[],q;for(q in this._openedNodes)k.push(q);v(this.cookieName,k.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!F.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(k){k&&x.setMarginBox(this.domNode,k);this._nodePixelIndent=x.position(this.tree.indentDetector).w||
this._nodePixelIndent;this.expandChildrenDeferred.then(F.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(k){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var q=F.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});
B(k,q,q)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(k){return new ta(k)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});f("dojo-bidi")&&Ca.extend({_setTextDirAttr:function(k){k&&this.textDir!=k&&(this._set("textDir",
k),this.rootNode.set("textDir",k))}});Ca.PathError=g("TreePathError");Ca._TreeNode=ta;return Ca})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(E,C,v,y){return v("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(u){y.mixin(this,u);this.connects=[];u=this.store;if(!u.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");
u.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([C.after(u,"onNew",y.hitch(this,"onNewItem"),!0),C.after(u,"onDelete",y.hitch(this,"onDeleteItem"),!0),C.after(u,"onSet",y.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var u;u=this.connects.pop();)u.remove()},getRoot:function(u,r){this.root?u(this.root):this.store.fetch({query:this.query,onComplete:y.hitch(this,function(z){if(1!=z.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+z.length+
" items, but must return exactly one");this.root=z[0];u(this.root)}),onError:r})},mayHaveChildren:function(u){return E.some(this.childrenAttrs,function(r){return this.store.hasAttribute(u,r)},this)},getChildren:function(u,r,z){var D=this.store;if(D.isItemLoaded(u)){for(var x=[],n=0;n<this.childrenAttrs.length;n++){var g=D.getValues(u,this.childrenAttrs[n]);x=x.concat(g)}var d=0;this.deferItemLoadingUntilExpand||E.forEach(x,function(c){D.isItemLoaded(c)||d++});0==d?r(x):E.forEach(x,function(c,w){D.isItemLoaded(c)||
D.loadItem({item:c,onItem:function(F){x[w]=F;0==--d&&r(x)},onError:z})})}else{var f=y.hitch(this,arguments.callee);D.loadItem({item:u,onItem:function(c){f(c,r,z)},onError:z})}},isItem:function(u){return this.store.isItem(u)},fetchItemByIdentity:function(u){this.store.fetchItemByIdentity(u)},getIdentity:function(u){return this.store.getIdentity(u)},getLabel:function(u){return this.labelAttr?this.store.getValue(u,this.labelAttr):this.store.getLabel(u)},newItem:function(u,r,z){var D={parent:r,attribute:this.childrenAttrs[0]},
x;this.newItemIdAttr&&u[this.newItemIdAttr]?this.fetchItemByIdentity({identity:u[this.newItemIdAttr],scope:this,onItem:function(n){n?this.pasteItem(n,null,r,!0,z):(x=this.store.newItem(u,D))&&void 0!=z&&this.pasteItem(x,r,r,!1,z)}}):(x=this.store.newItem(u,D))&&void 0!=z&&this.pasteItem(x,r,r,!1,z)},pasteItem:function(u,r,z,D,x){var n=this.store,g=this.childrenAttrs[0];r&&E.forEach(this.childrenAttrs,function(f){if(n.containsValue(r,f,u)){if(!D){var c=E.filter(n.getValues(r,f),function(w){return w!=
u});n.setValues(r,f,c)}g=f}});if(z)if("number"==typeof x){var d=n.getValues(z,g).slice();d.splice(x,0,u);n.setValues(z,g,d)}else n.setValues(z,g,n.getValues(z,g).concat(u))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(u,r){r&&this.getChildren(r.item,y.hitch(this,function(z){this.onChildrenChange(r.item,z)}))},onDeleteItem:function(u){this.onDelete(u)},onSetItem:function(u,r){if(-1!=E.indexOf(this.childrenAttrs,r))this.getChildren(u,y.hitch(this,function(z){this.onChildrenChange(u,
z)}));else this.onChange(u)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(E,C,v,y,u){return C("dijit.tree.ForestStoreModel",u,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(r){this.root={store:this,root:!0,id:r.rootId,label:r.rootLabel,children:r.rootChildren}},mayHaveChildren:function(r){return r===this.root||this.inherited(arguments)},getChildren:function(r,z,D){r===
this.root?this.root.children?z(this.root.children):this.store.fetch({query:this.query,onComplete:y.hitch(this,function(x){this.root.children=x;z(x)}),onError:D}):this.inherited(arguments)},isItem:function(r){return r===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(r){if(r.identity==this.root.id){var z=r.scope||v.global;r.onItem&&r.onItem.call(z,this.root)}else this.inherited(arguments)},getIdentity:function(r){return r===this.root?this.root.id:this.inherited(arguments)},getLabel:function(r){return r===
this.root?this.root.label:this.inherited(arguments)},newItem:function(r,z,D){return z===this.root?(this.onNewRootItem(r),this.store.newItem(r)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(r,z,D,x,n){if(z===this.root&&!x)this.onLeaveRoot(r);this.inherited(arguments,[r,z===this.root?null:z,D===this.root?null:D,x,n]);if(D===this.root)this.onAddToRoot(r)},onAddToRoot:function(r){console.log(this,": item ",r," added to root")},onLeaveRoot:function(r){console.log(this,": item ",
r," removed from root")},_requeryTop:function(){var r=this.root.children||[];this.store.fetch({query:this.query,onComplete:y.hitch(this,function(z){this.root.children=z;if(r.length!=z.length||E.some(r,function(D,x){return z[x]!=D}))this.onChildrenChange(this.root,z)})})},onNewItem:function(r,z){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(r){-1!=E.indexOf(this.root.children,r)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(r,z,D,x){this._requeryTop();this.inherited(arguments)}})})},
"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(E,C,v,y,u,r,z,D,x,n,g){return C("dijit.tree._dndSelector",g,{constructor:function(){this.selection={};this.anchor=null;this.events.push(D(this.tree.domNode,x.press,y.hitch(this,"onMouseDown")),D(this.tree.domNode,x.release,y.hitch(this,"onMouseUp")),D(this.tree.domNode,x.move,y.hitch(this,
"onMouseMove")),D(this.tree.domNode,n.press,y.hitch(this,"onClickPress")),D(this.tree.domNode,n.release,y.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var d=[],f=this.selection,c;for(c in f)d.push(f[c]);return d},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(d,f){this.setSelection(this.getSelectedTreeNodes().concat([d]));f&&(this.anchor=d);return d},removeTreeNode:function(d){var f=
E.filter(this.getSelectedTreeNodes(),function(c){return!r.isDescendant(c.domNode,d.domNode)});this.setSelection(f);return d},isTreeNodeSelected:function(d){return d.id&&!!this.selection[d.id]},setSelection:function(d){var f=this.getSelectedTreeNodes();E.forEach(this._setDifference(f,d),y.hitch(this,function(c){c.setSelected(!1);this.anchor==c&&delete this.anchor;delete this.selection[c.id]}));E.forEach(this._setDifference(d,f),y.hitch(this,function(c){c.setSelected(!0);this.selection[c.id]=c}));this._updateSelectionProperties()},
_setDifference:function(d,f){E.forEach(f,function(c){c.__exclude__=!0});d=E.filter(d,function(c){return!c.__exclude__});E.forEach(f,function(c){delete c.__exclude__});return d},_updateSelectionProperties:function(){var d=this.getSelectedTreeNodes(),f=[],c=[];E.forEach(d,function(w){var F=w.getTreePath();c.push(w);f.push(F)},this);d=E.map(c,function(w){return w.item});this.tree._set("paths",f);this.tree._set("path",f[0]||[]);this.tree._set("selectedNodes",c);this.tree._set("selectedNode",c[0]||null);
this.tree._set("selectedItems",d);this.tree._set("selectedItem",d[0]||null)},onClickPress:function(d){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(d.target,this.current))){"mousedown"==d.type&&z.isLeft(d)&&d.preventDefault();var f="keydown"==d.type?this.tree.focusedChild:this.current;if(f){var c=u.getCopyKeyState(d),w=f.id;this.singular||d.shiftKey||!this.selection[w]?(this._doDeselect=!1,this.userSelect(f,c,d.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(d){this._doDeselect&&
(this._doDeselect=!1,this.userSelect("keyup"==d.type?this.tree.focusedChild:this.current,u.getCopyKeyState(d),d.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(d,f){if(d===f)return 0;if("sourceIndex"in document.documentElement)return d.sourceIndex-f.sourceIndex;if("compareDocumentPosition"in document.documentElement)return d.compareDocumentPosition(f)&2?1:-1;if(document.createRange){var c=doc.createRange();c.setStartBefore(d);
d=doc.createRange();d.setStartBefore(f);return c.compareBoundaryPoints(c.END_TO_END,d)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(d,f,c){if(this.singular)this.anchor==d&&f?this.selectNone():(this.setSelection([d]),this.anchor=d);else if(c&&this.anchor){f=this._compareNodes(this.anchor.rowNode,d.rowNode);c=this.anchor;0>f?f=c:(f=d,d=c);for(c=[];f!=d;)c.push(f),f=this.tree._getNext(f);c.push(d);this.setSelection(c)}else this.selection[d.id]&&
f?this.removeTreeNode(d):f?this.addTreeNode(d,!0):(this.setSelection([d]),this.anchor=d)},getItem:function(d){return{data:this.selection[d],type:["treeNode"]}},forInSelectedItems:function(d,f){f=f||v.global;for(var c in this.selection)d.call(f,this.getItem(c),c,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(E,C,v,y,u,r){return C("dijit.tree._dndContainer",null,{constructor:function(z,D){this.tree=
z;this.node=z.domNode;y.mixin(this,D);this.containerState="";v.add(this.node,"dojoDndContainer");this.events=[u(this.node,r.enter,y.hitch(this,"onOverEvent")),u(this.node,r.leave,y.hitch(this,"onOutEvent")),E.after(this.tree,"_onNodeMouseEnter",y.hitch(this,"onMouseOver"),!0),E.after(this.tree,"_onNodeMouseLeave",y.hitch(this,"onMouseOut"),!0),u(this.node,"dragstart, selectstart",function(x){x.preventDefault()})]},destroy:function(){for(var z;z=this.events.pop();)z.remove();this.node=this.parent=
null},onMouseOver:function(z){this.current=z},onMouseOut:function(){this.current=null},_changeState:function(z,D){var x="dojoDnd"+z;z=z.toLowerCase()+"State";v.replace(this.node,x+D,x+this[z]);this[z]=D},_addItemClass:function(z,D){v.add(z,"dojoDndItem"+D)},_removeItemClass:function(z,D){v.remove(z,"dojoDndItem"+D)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"widgets/Bookmark/setting/Import":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/utils ../utils ../ItemNode dojo/text!./Import.html libs/Sortable".split(" "),
function(E,C,v,y,u,r,z,D,x,n,g,d){return E([z,r],{baseClass:"jimu-Bookmark-Import",templateString:g,bookmarks:[],_selectedBookMarksNumber:0,postCreate:function(){this.inherited(arguments);this.sortableBookMarkerNodes=d.create(this.bookMarkerContainer,{handle:".drag-masker",sort:!1,disabled:!this._init_editing,animation:100});this.bookmarks=x.readBookmarksInWebmap(this.map);this.displayBookmarks(this.bookmarks);this.bookmarks&&0===this.bookmarks.length?v.addClass(this.bookmarksInWebmap,"hide"):v.addClass(this.noBookmark,
"hide");this.own(u(this.all,"change",C.hitch(this,function(){this._selectOrUnselectAll()})))},startup:function(){this.bookmarksInSetting&&this.bookmarksInSetting.forEach(C.hitch(this,function(f){if((f=x.findBookMarkByNameAndExtent(f,this.bookmarks))&&f.bookmark)f.bookmark.itemNode.onSelected()}))},getConfig:function(){var f=[];this.bookmarks.forEach(C.hitch(this,function(c){c.itemNode&&c.itemNode.domNode&&v.hasClass(c.itemNode.domNode,"selected")&&(delete c.itemNode,c=C.clone(c),f.push(c))}));return f},
_isSelectedAll:function(){return this.bookmarks.length===this._selectedBookMarksNumber},_selectOrUnselectAll:function(){this._isSelectedAll()?(this.bookmarks.forEach(C.hitch(this,function(f){f.itemNode&&f.itemNode.domNode&&v.hasClass(f.itemNode.domNode,"selected")&&v.removeClass(f.itemNode.domNode,"selected")})),this._selectedBookMarksNumber=0):this.bookmarks.forEach(C.hitch(this,function(f){f.itemNode&&f.itemNode.domNode&&!1===v.hasClass(f.itemNode.domNode,"selected")&&(v.addClass(f.itemNode.domNode,
"selected"),this._selectedBookMarksNumber++)}))},destroy:function(){y.forEach(this.bookmarks,function(f){f.itemNode&&f.itemNode.destroy()},this);this.bookmarks=[];this.sortableBookMarkerNodes&&(this.sortableBookMarkerNodes.destroy(),this.sortableBookMarkerNodes=null);this.inherited(arguments)},displayBookmarks:function(f){f.reverse();y.forEach(f,function(c,w){w=this._createBookMarkNode(c,w);c.itemNode=w},this);f.forEach(C.hitch(this,function(c){c.itemNode&&c.itemNode.domNode&&v.place(c.itemNode.domNode,
this.bookMarkerContainer,"first")}))},_createBookMarkNode:function(f,c){var w=f.thumbnail||"undefined"!==typeof f.thumbnail&&""!==f.thumbnail?D.processUrlInWidgetConfig(f.thumbnail,this.folderUrl):this.folderUrl+"images/thumbnail_default.png";f=new n({dataId:c,img:w,label:f.displayName||f.name,display:{selectedBtn:!0,editBtn:!1,deleteBtn:!1},nls:this.nls});this.own(u(f,"click",C.hitch(this,C.partial(this._onBookmarkClick,f))));this.own(u(f,"selected",C.hitch(this,C.partial(this._onBookmarkSelected,
f))));this.own(u(f,"unselected",C.hitch(this,C.partial(this._onBookmarkUnSelected,f))));return f},_onBookmarkClick:function(f){f.onSelected()},_onBookmarkSelected:function(){this._selectedBookMarksNumber++;this._isDisableOK()},_onBookmarkUnSelected:function(){this._selectedBookMarksNumber--;this._isDisableOK()},_isDisableOK:function(){this.popup&&(0<this._selectedBookMarksNumber?this.popup.enableButton(0):this.popup.disableButton(0),x.setCheckboxWithoutEvent(this.all,this._isSelectedAll()))}})})},
"libs/Sortable":function(){!function(E){"function"==typeof define&&define.amd?define(E):"undefined"!=typeof module&&void 0!==module.exports?module.exports=E():window.Sortable=E()}(function(){function E(b,m){if(!b||!b.nodeType||1!==b.nodeType)throw"Sortable: `el` must be HTMLElement, not "+{}.toString.call(b);this.el=b;this.options=m=B({},m);b[ma]=this;var p={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(b.nodeName)?
"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return yb(b,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(L,O){L.setData("Text",O.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:Fa(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",
fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==E.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5},J;for(J in p)J in m||(m[J]=p[J]);for(var H in zb(m),this)"_"===H.charAt(0)&&"function"==typeof this[H]&&(this[H]=this[H].bind(this));(this.nativeDraggable=!m.forceFallback&&Mb)&&(this.options.touchStartThreshold=1);m.supportPointer?v(b,"pointerdown",this._onTapStart):(v(b,"mousedown",this._onTapStart),
v(b,"touchstart",this._onTapStart));this.nativeDraggable&&(v(b,"dragover",this),v(b,"dragenter",this));S.push(this.el);m.store&&m.store.get&&this.sort(m.store.get(this)||[])}function C(b,m,p,J){if(b){p=p||ca;do{if(null!=m&&("\x3e"===m[0]&&b.parentNode===p&&A(b,m.substring(1))||A(b,m))||J&&b===p)return b;if(b===p)break}while(b=(H=b).host&&H!==ca&&H.host.nodeType?H.host:H.parentNode)}var H;return null}function v(b,m,p){b.addEventListener(m,p,Ab)}function y(b,m,p){b.removeEventListener(m,p,Ab)}function u(b,
m,p){if(b&&m)if(b.classList)b.classList[p?"add":"remove"](m);else{var J=(" "+b.className+" ").replace(la," ").replace(" "+m+" "," ");b.className=(J+(p?" "+m:"")).replace(la," ")}}function r(b,m,p){var J=b&&b.style;if(J){if(void 0===p)return ca.defaultView&&ca.defaultView.getComputedStyle?p=ca.defaultView.getComputedStyle(b,""):b.currentStyle&&(p=b.currentStyle),void 0===m?p:p[m];m in J||-1!==m.indexOf("webkit")||(m="-webkit-"+m);J[m]=p+("string"==typeof p?"":"px")}}function z(b){var m="";do{var p=
r(b,"transform");p&&"none"!==p&&(m=p+" "+m)}while(b=b.parentNode);return window.DOMMatrix?new DOMMatrix(m):window.WebKitCSSMatrix?new WebKitCSSMatrix(m):window.CSSMatrix?new CSSMatrix(m):void 0}function D(b,m,p){if(b){b=b.getElementsByTagName(m);m=0;var J=b.length;if(p)for(;m<J;m++)p(b[m],m);return b}return[]}function x(b,m,p,J,H,L,O,X,Y){var ea,pa=(b=b||m[ma]).options,qa="on"+p.charAt(0).toUpperCase()+p.substr(1);!window.CustomEvent||Ga||eb?(ea=ca.createEvent("Event")).initEvent(p,!0,!0):ea=new CustomEvent(p,
{bubbles:!0,cancelable:!0});ea.to=H||m;ea.from=L||m;ea.item=J||m;ea.clone=ha;ea.oldIndex=O;ea.newIndex=X;ea.originalEvent=Y;ea.pullMode=k?k.lastPutMode:void 0;m&&m.dispatchEvent(ea);pa[qa]&&pa[qa].call(b,ea)}function n(b,m,p,J,H,L,O,X){var Y,ea,pa=b[ma],qa=pa.options.onMove;return!window.CustomEvent||Ga||eb?(Y=ca.createEvent("Event")).initEvent("move",!0,!0):Y=new CustomEvent("move",{bubbles:!0,cancelable:!0}),Y.to=m,Y.from=b,Y.dragged=p,Y.draggedRect=J,Y.related=H||m,Y.relatedRect=L||P(m),Y.willInsertAfter=
X,Y.originalEvent=O,b.dispatchEvent(Y),qa&&(ea=qa.call(pa,Y,O)),ea}function g(b){b.draggable=!1}function d(){ob=!1}function f(b,m,p){for(var J=0,H=0,L=b.children;H<L.length;){if("none"!==L[H].style.display&&L[H]!==V&&L[H]!==G&&C(L[H],p.draggable,b,!1)){if(J===m)return L[H];J++}H++}return null}function c(b){for(b=b.lastElementChild;b&&(b===V||"none"===b.style.display);)b=b.previousElementSibling;return b||null}function w(b){return K(G)<K(b)?1:-1}function F(b){b=b.tagName+b.className+b.src+b.href+b.textContent;
for(var m=b.length,p=0;m--;)p+=b.charCodeAt(m);return p.toString(36)}function K(b,m){m=0;if(!b||!b.parentNode)return-1;for(;b&&(b=b.previousElementSibling);)"TEMPLATE"!==b.nodeName.toUpperCase()&&b!==ha&&m++;return m}function A(b,m){if(b)try{if(b.matches)return b.matches(m);if(b.msMatchesSelector)return b.msMatchesSelector(m);if(b.webkitMatchesSelector)return b.webkitMatchesSelector(m)}catch(p){}return!1}function N(b,m){return function(){if(!fb){var p=arguments,J=this;fb=bb(function(){1===p.length?
b.call(J,p[0]):b.apply(J,p);fb=void 0},m)}}}function B(b,m){if(b&&m)for(var p in m)m.hasOwnProperty(p)&&(b[p]=m[p]);return b}function I(b){return pb&&pb.dom?pb.dom(b).cloneNode(!0):Bb?Bb(b).clone(!0)[0]:b.cloneNode(!0)}function Q(b){return bb(b,0)}function P(b,m,p,J){if(b.getBoundingClientRect||b===va){var H,L,O,X,Y,ea,pa;if(pa=b!==va&&b!==Oa()?(L=(H=b.getBoundingClientRect()).top,O=H.left,X=H.bottom,Y=H.right,ea=H.height,H.width):(O=L=0,X=window.innerHeight,Y=window.innerWidth,ea=window.innerHeight,
window.innerWidth),J&&b!==va&&(p=p||b.parentNode,!Ga)){do if(p&&p.getBoundingClientRect&&"none"!==r(p,"transform")){X=p.getBoundingClientRect();L-=X.top+Fa(r(p,"border-top-width"));O-=X.left+Fa(r(p,"border-left-width"));X=L+H.height;Y=O+H.width;break}while(p=p.parentNode)}m&&b!==va&&(m=(b=z(p||b))&&b.a,p=b&&b.d,b&&(X=(L/=p)+(ea/=p),Y=(O/=m)+(pa/=m)));return{top:L,left:O,bottom:X,right:Y,width:pa,height:ea}}}function aa(b,m){var p=Ua(b,!0);for(b=P(b)[m];p;){var J=P(p)[m];if(!("top"===m||"left"===m?
J<=b:b<=J))return p;if(p===Oa())break;p=Ua(p,!1)}return!1}function ja(b){var m=0,p=0,J=Oa();if(b){do{var H=z(b),L=H.d;m+=b.scrollLeft*H.a;p+=b.scrollTop*L}while(b!==J&&(b=b.parentNode))}return[m,p]}if("undefined"==typeof window||!window.document)return function(){throw Error("Sortable.js requires a window with a document");};var G,da,V,ha,Z,Ba,Ya,Ha,Za,$a,na,ta,Ca,k,q,T,U,fa,ra,oa,a,e,l,h,t,M,R=[],ka=!1,W=!1,ba=!1,S=[],ia=!1,ua=!1,sa=[],la=/\s+/g,ma="Sortable"+(new Date).getTime(),va=window,ca=va.document,
Fa=va.parseInt,bb=va.setTimeout,Bb=va.jQuery||va.Zepto,pb=va.Polymer,Ab={capture:!1,passive:!1},Ga=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),eb=!!navigator.userAgent.match(/Edge/i),Cb=!!navigator.userAgent.match(/firefox/i),qb=!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/android/i)),hb=!!navigator.userAgent.match(/iP(ad|od|hone)/i),Db=eb||Ga?"cssFloat":"float",Mb="draggable"in ca.createElement("div"),rb=function(){if(Ga)return!1;
var b=ca.createElement("x");return b.style.cssText="pointer-events:auto","auto"===b.style.pointerEvents}(),ob=!1,sb=!1,Pa=Math.abs,Nb=Math.min,Ob=Math.max,ib=[],yb=function(b,m){var p=r(b),J=Fa(p.width)-Fa(p.paddingLeft)-Fa(p.paddingRight)-Fa(p.borderLeftWidth)-Fa(p.borderRightWidth),H=f(b,0,m);b=f(b,1,m);var L=H&&r(H);m=b&&r(b);var O=L&&Fa(L.marginLeft)+Fa(L.marginRight)+P(H).width,X=m&&Fa(m.marginLeft)+Fa(m.marginRight)+P(b).width;return"flex"===p.display?"column"===p.flexDirection||"column-reverse"===
p.flexDirection?"vertical":"horizontal":"grid"===p.display?1>=p.gridTemplateColumns.split(" ").length?"vertical":"horizontal":H&&"none"!==L.float?(p="left"===L.float?"left":"right",!b||"both"!==m.clear&&m.clear!==p?"horizontal":"vertical"):H&&("block"===L.display||"flex"===L.display||"table"===L.display||"grid"===L.display||J<=O&&"none"===p[Db]||b&&"none"===p[Db]&&J<O+X)?"vertical":"horizontal"},Ua=function(b,m){if(!b||!b.getBoundingClientRect)return Oa();var p=!1;do if(b.clientWidth<b.scrollWidth||
b.clientHeight<b.scrollHeight){var J=r(b);if(b.clientWidth<b.scrollWidth&&("auto"==J.overflowX||"scroll"==J.overflowX)||b.clientHeight<b.scrollHeight&&("auto"==J.overflowY||"scroll"==J.overflowY)){if(!b||!b.getBoundingClientRect||b===ca.body)break;if(p||m)return b;p=!0}}while(b=b.parentNode);return Oa()},Oa=function(){return Ga?ca.documentElement:ca.scrollingElement},Eb=function(b,m,p){b.scrollLeft+=m;b.scrollTop+=p},tb=N(function(b,m,p,J){if(m.scroll){var H=p?p[ma]:window,L=m.scrollSensitivity,O=
m.scrollSpeed,X=b.clientX,Y=b.clientY,ea=Oa(),pa=!1;Za!==p&&(jb(),Ha=m.scroll,$a=m.scrollFn,!0===Ha&&(Ha=Ua(p,!0),Za=Ha));p=0;var qa=Ha;do{var xa,Ia,ya,Qa,Ja,za,Ka,wa=qa,Da=P(wa);var Va=Da.top;var Ra=Da.bottom;var Sa=Da.left;var kb=Da.right,cb=Da.width;Da=Da.height;if(xa=wa.scrollWidth,Ia=wa.scrollHeight,ya=r(wa),za=wa.scrollLeft,Ka=wa.scrollTop,Ja=wa===ea?(Qa=cb<xa&&("auto"===ya.overflowX||"scroll"===ya.overflowX||"visible"===ya.overflowX),Da<Ia&&("auto"===ya.overflowY||"scroll"===ya.overflowY||
"visible"===ya.overflowY)):(Qa=cb<xa&&("auto"===ya.overflowX||"scroll"===ya.overflowX),Da<Ia&&("auto"===ya.overflowY||"scroll"===ya.overflowY)),Sa=Qa&&(Pa(kb-X)<=L&&za+cb<xa)-(Pa(Sa-X)<=L&&!!za),Va=Ja&&(Pa(Ra-Y)<=L&&Ka+Da<Ia)-(Pa(Va-Y)<=L&&!!Ka),!R[p])for(Ra=0;Ra<=p;Ra++)R[Ra]||(R[Ra]={});R[p].vx==Sa&&R[p].vy==Va&&R[p].el===wa||(R[p].el=wa,R[p].vx=Sa,R[p].vy=Va,clearInterval(R[p].pid),!wa||0==Sa&&0==Va||(pa=!0,R[p].pid=setInterval(function(){J&&0===this.layer&&(E.active._emulateDragOver(!0),E.active._onTouchMove(ra,
!0));var La=R[this.layer].vy?R[this.layer].vy*O:0,Aa=R[this.layer].vx?R[this.layer].vx*O:0;"function"==typeof $a&&"continue"!==$a.call(H,Aa,La,b,ra,R[this.layer].el)||Eb(R[this.layer].el,Aa,La)}.bind({layer:p}),24)));p++}while(m.bubbleScroll&&qa!==ea&&(qa=Ua(qa,!1)));ka=pa}},30),jb=function(){R.forEach(function(b){clearInterval(b.pid)});R=[]},zb=function(b){function m(H,L){return function(O,X,Y,ea){var pa=O.options.group.name&&X.options.group.name&&O.options.group.name===X.options.group.name;if(null==
H&&(L||pa))return!0;if(null==H||!1===H)return!1;if(L&&"clone"===H)return H;if("function"==typeof H)return m(H(O,X,Y,ea),L)(O,X,Y,ea);O=(L?O:X).options.group.name;return!0===H||"string"==typeof H&&H===O||H.join&&-1<H.indexOf(O)}}var p={},J=b.group;J&&"object"==typeof J||(J={name:J});p.name=J.name;p.checkPull=m(J.pull,!0);p.checkPut=m(J.put);p.revertClone=J.revertClone;b.group=p},Fb=function(b){G&&G.parentNode&&G.parentNode[ma]&&G.parentNode[ma]._computeIsAligned(b)},Gb=function(b,m){for(;!m[ma];)m=
m.parentNode;return b===m},Hb=function(b,m,p){for(b=b.parentNode;b&&!b[ma];)b=b.parentNode;b&&b[ma][p](B(m,{artificialBubble:!0}))},Ib=function(){!rb&&V&&r(V,"display","none")},Jb=function(){!rb&&V&&r(V,"display","")};ca.addEventListener("click",function(b){if(ba)return b.preventDefault(),b.stopPropagation&&b.stopPropagation(),b.stopImmediatePropagation&&b.stopImmediatePropagation(),ba=!1},!0);var fb,ub=function(b){if(b=b.touches?b.touches[0]:b,G){a:{var m=b.clientX;for(var p=b.clientY,J=0;J<S.length;J++)if(!c(S[J])){var H=
P(S[J]),L=S[J][ma].options.emptyInsertThreshold,O=p>=H.top-L&&p<=H.bottom+L;if(m>=H.left-L&&m<=H.right+L&&O){m=S[J];break a}}m=void 0}m&&m[ma]._onDragOver({clientX:b.clientX,clientY:b.clientY,target:m,rootEl:m})}};return v(ca,"dragover",ub),v(ca,"mousemove",ub),v(ca,"touchmove",ub),E.prototype={constructor:E,_computeIsAligned:function(b){var m;if(V&&!rb?(Ib(),m=ca.elementFromPoint(b.clientX,b.clientY),Jb()):m=b.target,m=C(m,this.options.draggable,this.el,!1),!sb&&G&&G.parentNode===this.el){for(var p,
J,H,L,O,X,Y,ea,pa=this.el.children,qa=0;qa<pa.length;qa++)C(pa[qa],this.options.draggable,this.el,!1)&&pa[qa]!==m&&(pa[qa].sortableMouseAligned=(p=b.clientX,J=b.clientY,H=pa[qa],L=this._getDirection(b,null),this.options,void 0,O=P(H),X="vertical"===L?O.left:O.top,Y="vertical"===L?O.right:O.bottom,X<(ea="vertical"===L?p:J)&&ea<Y));C(m,this.options.draggable,this.el,!0)||(a=null);sb=!0;bb(function(){sb=!1},30)}},_getDirection:function(b,m){return"function"==typeof this.options.direction?this.options.direction.call(this,
b,m,G):this.options.direction},_onTapStart:function(b){if(b.cancelable){var m,p=this,J=this.el,H=this.options,L=H.preventOnFilter,O=b.type,X=b.touches&&b.touches[0],Y=(X||b).target,ea=b.target.shadowRoot&&(b.path&&b.path[0]||b.composedPath&&b.composedPath()[0])||Y,pa=H.filter;if(function(qa){ib.length=0;qa=qa.getElementsByTagName("input");for(var xa=qa.length;xa--;){var Ia=qa[xa];Ia.checked&&ib.push(Ia)}}(J),!(Ga&&!b.artificialBubble&&!Gb(J,Y)||G||/mousedown|pointerdown/.test(O)&&0!==b.button||H.disabled||
ea.isContentEditable))if(Y=C(Y,H.draggable,J,!1)){if(Ya!==Y){if(m=K(Y,H.draggable),"function"==typeof pa){if(pa.call(this,b,Y,this))return x(p,ea,"filter",Y,J,J,m),void(L&&b.cancelable&&b.preventDefault())}else if(pa&&(pa=pa.split(",").some(function(qa){if(qa=C(ea,qa.trim(),J,!1))return x(p,qa,"filter",Y,J,J,m),!0})))return void(L&&b.cancelable&&b.preventDefault());H.handle&&!C(ea,H.handle,J,!1)||this._prepareDragStart(b,X,Y,m)}}else Ga&&Hb(J,b,"_onTapStart")}},_handleAutoScroll:function(b,m){if(G&&
this.options.scroll){var p=b.clientX,J=b.clientY,H=ca.elementFromPoint(p,J),L=this;if(m||eb||Ga||qb){tb(b,L.options,H,m);var O=Ua(H,!0);!ka||q&&p===T&&J===U||(q&&clearInterval(q),q=setInterval(function(){if(G){var X=Ua(ca.elementFromPoint(p,J),!0);X!==O&&(O=X,jb(),tb(b,L.options,O,m))}},10),T=p,U=J)}else{if(!L.options.bubbleScroll||Ua(H,!0)===Oa())return void jb();tb(b,L.options,Ua(H,!1),!1)}}},_prepareDragStart:function(b,m,p,J){var H,L=this,O=L.el,X=L.options,Y=O.ownerDocument;p&&!G&&p.parentNode===
O&&(Z=O,da=(G=p).parentNode,Ba=G.nextSibling,Ya=p,Ca=X.group,na=J,fa={target:G,clientX:(m||b).clientX,clientY:(m||b).clientY},this._lastX=(m||b).clientX,this._lastY=(m||b).clientY,G.style["will-change"]="all",G.style.transition="",G.style.transform="",H=function(){L._disableDelayedDragEvents();!Cb&&L.nativeDraggable&&(G.draggable=!0);L._triggerDragStart(b,m);x(L,Z,"choose",G,Z,Z,na);u(G,X.chosenClass,!0)},X.ignore.split(",").forEach(function(ea){D(G,ea.trim(),g)}),X.supportPointer?v(Y,"pointerup",
L._onDrop):(v(Y,"mouseup",L._onDrop),v(Y,"touchend",L._onDrop),v(Y,"touchcancel",L._onDrop)),Cb&&this.nativeDraggable&&(this.options.touchStartThreshold=4,G.draggable=!0),!X.delay||this.nativeDraggable&&(eb||Ga)?H():(v(Y,"mouseup",L._disableDelayedDrag),v(Y,"touchend",L._disableDelayedDrag),v(Y,"touchcancel",L._disableDelayedDrag),v(Y,"mousemove",L._delayedDragTouchMoveHandler),v(Y,"touchmove",L._delayedDragTouchMoveHandler),X.supportPointer&&v(Y,"pointermove",L._delayedDragTouchMoveHandler),L._dragStartTimer=
bb(H,X.delay)))},_delayedDragTouchMoveHandler:function(b){b=b.touches?b.touches[0]:b;Ob(Pa(b.clientX-this._lastX),Pa(b.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){G&&g(G);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var b=this.el.ownerDocument;y(b,"mouseup",this._disableDelayedDrag);y(b,"touchend",this._disableDelayedDrag);
y(b,"touchcancel",this._disableDelayedDrag);y(b,"mousemove",this._delayedDragTouchMoveHandler);y(b,"touchmove",this._delayedDragTouchMoveHandler);y(b,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(b,m){m=m||("touch"==b.pointerType?b:null);!this.nativeDraggable||m?this.options.supportPointer?v(ca,"pointermove",this._onTouchMove):v(ca,m?"touchmove":"mousemove",this._onTouchMove):(v(G,"dragend",this),v(Z,"dragstart",this._onDragStart));try{ca.selection?Q(function(){ca.selection.empty()}):
window.getSelection().removeAllRanges()}catch(p){}},_dragStarted:function(b,m){if(W=!1,Z&&G){this.nativeDraggable&&(v(ca,"dragover",this._handleAutoScroll),v(ca,"dragover",Fb));var p=this.options;!b&&u(G,p.dragClass,!1);u(G,p.ghostClass,!0);r(G,"transform","");E.active=this;b&&this._appendGhost();x(this,Z,"start",G,Z,Z,na,void 0,m)}else this._nulling()},_emulateDragOver:function(b){if(ra&&(this._lastX!==ra.clientX||this._lastY!==ra.clientY||b)){this._lastX=ra.clientX;this._lastY=ra.clientY;Ib();for(var m=
b=ca.elementFromPoint(ra.clientX,ra.clientY);b&&b.shadowRoot;)m=b=b.shadowRoot.elementFromPoint(ra.clientX,ra.clientY);if(m){do{if(m[ma]&&m[ma]._onDragOver({clientX:ra.clientX,clientY:ra.clientY,target:b,rootEl:m})&&!this.options.dragoverBubble)break;b=m}while(m=m.parentNode)}G.parentNode[ma]._computeIsAligned(ra);Jb()}},_onTouchMove:function(b,m){if(fa){var p=this.options,J=p.fallbackTolerance,H=p.fallbackOffset;p=b.touches?b.touches[0]:b;var L=V&&z(V),O=V&&L&&L.a;L=V&&L&&L.d;var X=hb&&t&&ja(t);
O=(p.clientX-fa.clientX+H.x)/(O||1)+(X?X[0]-sa[0]:0)/(O||1);H=(p.clientY-fa.clientY+H.y)/(L||1)+(X?X[1]-sa[1]:0)/(L||1);H=b.touches?"translate3d("+O+"px,"+H+"px,0)":"translate("+O+"px,"+H+"px)";if(!E.active&&!W){if(J&&Nb(Pa(p.clientX-this._lastX),Pa(p.clientY-this._lastY))<J)return;this._onDragStart(b,!0)}!m&&this._handleAutoScroll(p,!0);oa=!0;ra=p;r(V,"webkitTransform",H);r(V,"mozTransform",H);r(V,"msTransform",H);r(V,"transform",H);b.cancelable&&b.preventDefault()}},_appendGhost:function(){if(!V){var b=
this.options.fallbackOnBody?ca.body:Z,m=P(G,!0,b,!hb),p=(r(G),this.options);if(hb){for(t=b;"static"===r(t,"position")&&"none"===r(t,"transform")&&t!==ca;)t=t.parentNode;if(t!==ca){var J=P(t,!0);m.top-=J.top;m.left-=J.left}t!==ca.body&&t!==ca.documentElement?(t===ca&&(t=Oa()),m.top+=t.scrollTop,m.left+=t.scrollLeft):t=Oa();sa=ja(t)}u(V=G.cloneNode(!0),p.ghostClass,!1);u(V,p.fallbackClass,!0);u(V,p.dragClass,!0);r(V,"box-sizing","border-box");r(V,"margin",0);r(V,"top",m.top);r(V,"left",m.left);r(V,
"width",m.width);r(V,"height",m.height);r(V,"opacity","0.8");r(V,"position",hb?"absolute":"fixed");r(V,"zIndex","100000");r(V,"pointerEvents","none");b.appendChild(V)}},_onDragStart:function(b,m){var p=this,J=b.dataTransfer,H=p.options;(ha=I(G)).draggable=!1;ha.style["will-change"]="";this._hideClone();u(ha,p.options.chosenClass,!1);p._cloneId=Q(function(){p.options.removeCloneOnHide||Z.insertBefore(ha,G);x(p,Z,"clone",G)});!m&&u(G,H.dragClass,!0);m?(ba=!0,p._loopId=setInterval(p._emulateDragOver,
50)):(y(ca,"mouseup",p._onDrop),y(ca,"touchend",p._onDrop),y(ca,"touchcancel",p._onDrop),J&&(J.effectAllowed="move",H.setData&&H.setData.call(p,J,G)),v(ca,"drop",p),r(G,"transform","translateZ(0)"));W=!0;p._dragStartId=Q(p._dragStarted.bind(p,m,b));v(ca,"selectstart",p);qb&&r(ca.body,"user-select","none")},_onDragOver:function(b){function m(Ea){return Ea&&(pa?ea._hideClone():ea._showClone(xa),ea&&(u(G,k?k.options.ghostClass:ea.options.ghostClass,!1),u(G,X.ghostClass,!0)),k!==xa&&xa!==E.active?k=xa:
xa===E.active&&(k=null),J&&xa._animate(J,G),O&&ya&&xa._animate(ya,O)),(O===G&&!G.animated||O===L&&!O.animated)&&(a=null),X.dragoverBubble||b.rootEl||O===ca||(xa._handleAutoScroll(b),G.parentNode[ma]._computeIsAligned(b)),!X.dragoverBubble&&b.stopPropagation&&b.stopPropagation(),!0}function p(){x(xa,Z,"change",O,L,Z,na,K(G,X.draggable),b)}var J,H,L=this.el,O=b.target,X=this.options,Y=X.group,ea=E.active,pa=Ca===Y,qa=X.sort,xa=this;if(!ob&&(!Ga||b.rootEl||b.artificialBubble||Gb(L,O))){if(void 0!==b.preventDefault&&
b.cancelable&&b.preventDefault(),oa=!0,O=C(O,X.draggable,L,!0),C(b.target,null,G,!0)||O.animated)return m(!1);if(O!==G&&(ba=!1),ea&&!X.disabled&&(pa?qa||(H=!Z.contains(G)):k===this||(this.lastPutMode=Ca.checkPull(this,ea,G,b))&&Y.checkPut(this,ea,G,b))){Y=this._getDirection(b,O);if(J=P(G),H)return this._hideClone(),da=Z,Ba?Z.insertBefore(G,Ba):Z.appendChild(G),m(!0);if((H=c(L))&&(La=b,Aa=Y,Ta=P(c(L)),Na="vertical"===Aa?La.clientY:La.clientX,Wa="vertical"===Aa?La.clientX:La.clientY,ab="vertical"===
Aa?Ta.bottom:Ta.right,vb="vertical"===Aa?Ta.left:Ta.top,lb="vertical"===Aa?Ta.right:Ta.bottom,!("vertical"===Aa?lb+10<Wa||Wa<=lb&&ab<Na&&vb<=Wa:ab<Na&&vb<Wa||Na<=ab&&lb+10<Wa)||H.animated)){if(O&&O!==G&&O.parentNode===L){var Ia;Na=0;Wa=O.sortableMouseAligned;ab=G.parentNode!==L;La="vertical"===Y?"top":"left";Ta=(Aa=aa(O,"top")||aa(G,"top"))?Aa.scrollTop:void 0;if(a!==O&&(l=null,Ia=P(O)[La],ia=!1),Ja=O,za=Y,Ka=(Qa=G)===G&&M||P(Qa),wa=Ja===G&&M||P(Ja),Da="vertical"===za?Ka.left:Ka.top,Va="vertical"===
za?Ka.right:Ka.bottom,Ra="vertical"===za?Ka.width:Ka.height,Sa="vertical"===za?wa.left:wa.top,kb="vertical"===za?wa.right:wa.bottom,cb="vertical"===za?wa.width:wa.height,l=(Da===Sa||Va===kb||Da+Ra/2===Sa+cb/2)&&Wa||ab||Aa||X.invertSwap||"insert"===l||"swap"===l?("swap"!==l&&(ua=X.invertSwap||ab),Na=function(Ea,Kb,db,wb,mb,Lb,Pb){var Ma=P(Kb);Ea="vertical"===db?Ea.clientY:Ea.clientX;var Xa="vertical"===db?Ma.height:Ma.width,gb="vertical"===db?Ma.top:Ma.left;Ma="vertical"===db?Ma.bottom:Ma.right;var nb=
P(G),xb=!1;if(!Lb)if(Pb&&h<Xa*wb)if(!ia&&(1===e?gb+Xa*mb/2<Ea:Ea<Ma-Xa*mb/2)&&(ia=!0),ia)xb=!0;else{if("vertical"===db?nb.top:nb.left,"vertical"===db?nb.bottom:nb.right,1===e?Ea<gb+h:Ma-h<Ea)return-1*e}else if(gb+Xa*(1-wb)/2<Ea&&Ea<Ma-Xa*(1-wb)/2)return w(Kb);return(xb=xb||Lb)&&(Ea<gb+Xa*mb/2||Ma-Xa*mb/2<Ea)?gb+Xa/2<Ea?1:-1:0}(b,O,Y,X.swapThreshold,null==X.invertedSwapThreshold?X.swapThreshold:X.invertedSwapThreshold,ua,a===O),"swap"):(Na=w(O),"insert"),0===Na)return m(!1);M=null;e=Na;var ya=P(a=
O);Qa=O.nextElementSibling;Ja=!1;za=n(Z,L,G,J,O,ya,b,Ja=1===Na);if(!1!==za)return 1!==za&&-1!==za||(Ja=1===za),ob=!0,bb(d,30),pa?ea._hideClone():ea._showClone(this),Ja&&!Qa?L.appendChild(G):O.parentNode.insertBefore(G,Ja?Qa:O),Aa&&Eb(Aa,0,Ta-Aa.scrollTop),da=G.parentNode,void 0===Ia||ua||(h=Pa(Ia-P(O)[La])),p(),m(!0)}}else if(H&&L===b.target&&(O=H),O&&(ya=P(O)),pa?ea._hideClone():ea._showClone(this),!1!==n(Z,L,G,J,O,ya,b,!!O))return L.appendChild(G),da=L,M=null,p(),m(!0);if(L.contains(G))return m(!1)}var Qa,
Ja,za,Ka,wa,Da,Va,Ra,Sa,kb,cb,La,Aa,Ta,Na,Wa,ab,vb,lb;return Ga&&!b.rootEl&&Hb(L,b,"_onDragOver"),!1}},_animate:function(b,m){var p=this.options.animation;if(p){var J=P(m);if(m===G&&(M=J),1===b.nodeType&&(b=P(b)),b.left+b.width/2!==J.left+J.width/2||b.top+b.height/2!==J.top+J.height/2){var H=z(this.el),L=H&&H.a;H=H&&H.d;r(m,"transition","none");r(m,"transform","translate3d("+(b.left-J.left)/(L||1)+"px,"+(b.top-J.top)/(H||1)+"px,0)");m.offsetWidth;r(m,"transition","transform "+p+"ms"+(this.options.easing?
" "+this.options.easing:""));r(m,"transform","translate3d(0,0,0)")}"number"==typeof m.animated&&clearTimeout(m.animated);m.animated=bb(function(){r(m,"transition","");r(m,"transform","");m.animated=!1},p)}},_offUpEvents:function(){var b=this.el.ownerDocument;y(ca,"touchmove",this._onTouchMove);y(ca,"pointermove",this._onTouchMove);y(b,"mouseup",this._onDrop);y(b,"touchend",this._onDrop);y(b,"pointerup",this._onDrop);y(b,"touchcancel",this._onDrop);y(ca,"selectstart",this)},_onDrop:function(b){var m=
this.el,p=this.options;ia=ua=ka=W=!1;clearInterval(this._loopId);clearInterval(q);jb();clearTimeout(fb);fb=void 0;clearTimeout(this._dragStartTimer);clearTimeout(this._cloneId);clearTimeout(this._dragStartId);y(ca,"mousemove",this._onTouchMove);this.nativeDraggable&&(y(ca,"drop",this),y(m,"dragstart",this._onDragStart),y(ca,"dragover",this._handleAutoScroll),y(ca,"dragover",Fb));qb&&r(ca.body,"user-select","");this._offUpEvents();b&&(oa&&(b.cancelable&&b.preventDefault(),!p.dropBubble&&b.stopPropagation()),
V&&V.parentNode&&V.parentNode.removeChild(V),(Z===da||k&&"clone"!==k.lastPutMode)&&ha&&ha.parentNode&&ha.parentNode.removeChild(ha),G&&(this.nativeDraggable&&y(G,"dragend",this),g(G),G.style["will-change"]="",u(G,k?k.options.ghostClass:this.options.ghostClass,!1),u(G,this.options.chosenClass,!1),x(this,Z,"unchoose",G,da,Z,na,null,b),Z!==da?(0<=(ta=K(G,p.draggable))&&(x(null,da,"add",G,da,Z,na,ta,b),x(this,Z,"remove",G,da,Z,na,ta,b),x(null,da,"sort",G,da,Z,na,ta,b),x(this,Z,"sort",G,da,Z,na,ta,b)),
k&&k.save()):G.nextSibling!==Ba&&0<=(ta=K(G,p.draggable))&&(x(this,Z,"update",G,da,Z,na,ta,b),x(this,Z,"sort",G,da,Z,na,ta,b)),E.active&&(null!=ta&&-1!==ta||(ta=na),x(this,Z,"end",G,da,Z,na,ta,b),this.save())));this._nulling()},_nulling:function(){Z=G=da=V=Ba=ha=Ya=Ha=Za=R.length=q=T=U=fa=ra=oa=ta=na=a=e=M=k=Ca=E.active=null;ib.forEach(function(b){b.checked=!0});ib.length=0},handleEvent:function(b){switch(b.type){case "drop":case "dragend":this._onDrop(b);break;case "dragenter":case "dragover":G&&
(this._onDragOver(b),b.dataTransfer&&(b.dataTransfer.dropEffect="move"),b.cancelable&&b.preventDefault());break;case "selectstart":b.preventDefault()}},toArray:function(){for(var b,m=[],p=this.el.children,J=0,H=p.length,L=this.options;J<H;J++)C(b=p[J],L.draggable,this.el,!1)&&m.push(b.getAttribute(L.dataIdAttr)||F(b));return m},sort:function(b){var m={},p=this.el;this.toArray().forEach(function(J,H){H=p.children[H];C(H,this.options.draggable,p,!1)&&(m[J]=H)},this);b.forEach(function(J){m[J]&&(p.removeChild(m[J]),
p.appendChild(m[J]))})},save:function(){var b=this.options.store;b&&b.set&&b.set(this)},closest:function(b,m){return C(b,m||this.options.draggable,this.el,!1)},option:function(b,m){var p=this.options;if(void 0===m)return p[b];p[b]=m;"group"===b&&zb(p)},destroy:function(){var b=this.el;b[ma]=null;y(b,"mousedown",this._onTapStart);y(b,"touchstart",this._onTapStart);y(b,"pointerdown",this._onTapStart);this.nativeDraggable&&(y(b,"dragover",this),y(b,"dragenter",this));Array.prototype.forEach.call(b.querySelectorAll("[draggable]"),
function(m){m.removeAttribute("draggable")});this._onDrop();S.splice(S.indexOf(this.el),1);this.el=b=null},_hideClone:function(){ha.cloneHidden||(r(ha,"display","none"),ha.cloneHidden=!0,ha.parentNode&&this.options.removeCloneOnHide&&ha.parentNode.removeChild(ha))},_showClone:function(b){"clone"===b.lastPutMode?ha.cloneHidden&&(Z.contains(G)&&!this.options.group.revertClone?Z.insertBefore(ha,G):Ba?Z.insertBefore(ha,Ba):Z.appendChild(ha),this.options.group.revertClone&&this._animate(G,ha),r(ha,"display",
""),ha.cloneHidden=!1):this._hideClone()}},v(ca,"touchmove",function(b){(E.active||W)&&b.cancelable&&b.preventDefault()}),E.utils={on:v,off:y,css:r,find:D,is:function(b,m){return!!C(b,m,b,!1)},extend:B,throttle:N,closest:C,toggleClass:u,clone:I,index:K,nextTick:Q,cancelNextTick:function(b){return clearTimeout(b)},detectDirection:yb,getChild:f},E.create=function(b,m){return new E(b,m)},E.version="1.8.4",E})},"widgets/Bookmark/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Bookmark/ItemNode.html":'\x3cdiv class\x3d"jimu-img-node jimu-float-leading clearFix" data-id\x3d"" tabindex\x3d"0" aria-label\x3d"" role\x3d"button"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"nodeBox" class\x3d"node-box verticalCenter no-user-select"\x3e\r\n\t\t\x3cimg data-dojo-attach-point\x3d"thumbnail" class\x3d"thumbnail" src\x3d""\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"nodeLabel" data-dojo-type\x3d"dijit/form/ValidationTextBox" required\x3d"true" data-dojo-props\x3d"trim:true"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"changeImgBtn" class\x3d"change-img-btn oper-btns no-user-select hide" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editBtn" class\x3d"edit-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"renameBtn" class\x3d"rename-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"deleteBtn" class\x3d"delete-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"dragMasker" class\x3d"drag-masker" tabindex\x3d"-1"\x3e\x3c/div\x3e\x3c!--for different browsers drag behavior--\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"layerInfosIcon" class\x3d"layer-info-icon icons no-user-select hide"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"selectedBtn" class\x3d"selected-btn oper-btns no-user-select hide"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/setting/Layout.html":'\x3cdiv class\x3d"layout"\x3e\r\n  \x3cdiv class\x3d"title"\x3e${nls.displayBookmarksAs}\x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"content verticalCenter"\x3e\r\n    \x3cdiv type\x3d"checkbox" checked\x3d"false" class\x3d"checkbox"\r\n      data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"layoutCards_checkBox"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"label verticalCenter" data-dojo-attach-point\x3d"layoutCards" title\x3d"${nls.cardsTips}"\x3e\r\n      \x3cdiv class\x3d"layout-btns"\x3e\r\n        \x3cdiv class\x3d"cards"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      ${nls.cards}\r\n      \x3cdiv data-dojo-attach-point\x3d"cardsDefaultSetting" class\x3d"default-setting transparent"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"cards_makeAsDefault" class\x3d"set-default hide" title\x3d"${nls.makeAsDefault}"\x3e${nls.makeAsDefault}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"cards_default" class\x3d"default hide" title\x3d"${nls.default}"\x3e${nls.default}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv type\x3d"checkbox" checked\x3d"false" class\x3d"checkbox"\r\n      data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"layoutList_checkBox"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"label verticalCenter" data-dojo-attach-point\x3d"layoutList" title\x3d"${nls.listTips}"\x3e\r\n      \x3cdiv class\x3d"layout-btns"\x3e\r\n        \x3cdiv class\x3d"list"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      ${nls.list}\r\n      \x3cdiv data-dojo-attach-point\x3d"listDefaultSetting" class\x3d"default-setting transparent"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"list_makeAsDefault" class\x3d"set-default hide" title\x3d"${nls.makeAsDefault}"\x3e${nls.makeAsDefault}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"list_default" class\x3d"default hide" title\x3d"${nls.default}"\x3e${nls.default}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/Search/templates/Search.html":'\x3cdiv role\x3d"presentation" class\x3d"${theme}"\x3e\r\n  \x3cdiv role\x3d"presentation" class\x3d"${css.searchGroup}" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"expandNode" class\x3d"${css.searchExpandContainer}"\x3e\r\n      \x3cdiv class\x3d"${css.searchAnimateContainer}"\x3e\r\n        \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchIn}" id\x3d"${id}_menu_button" class\x3d"${css.searchBtn} ${css.searchToggle}" tabindex\x3d"0" data-dojo-attach-point\x3d"sourcesBtnNode"\x3e\r\n          \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchToggleIcon}"\x3e\x3c/span\x3e\x3cspan class\x3d"${css.searchSourceName}" data-dojo-attach-point\x3d"sourceNameNode"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"${css.searchInputGroup}"\x3e\r\n          \x3cform data-dojo-attach-point\x3d"formNode"\x3e\r\n            \x3cinput maxlength\x3d"${maxLength}" autocomplete\x3d"off" type\x3d"text" tabindex\x3d"0" class\x3d"${css.searchInput}" value\x3d"${value}" aria-haspopup\x3d"true" id\x3d"${id}_input" data-dojo-attach-point\x3d"inputNode" role\x3d"textbox"\x3e\r\n          \x3c/form\x3e\r\n          \x3cdiv role\x3d"button" class\x3d"${css.searchClear}" tabindex\x3d"0" data-dojo-attach-point\x3d"clearNode"\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchClearIcon}"\x3e\x3c/span\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchSpinner}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"suggestionsNode" class\x3d"${css.searchMenu} ${css.suggestionsMenu}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchButtonTitle}" class\x3d"${css.searchBtn} ${css.searchSubmit}" tabindex\x3d"0" data-dojo-attach-point\x3d"submitNode"\x3e\r\n      \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchIcon}"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"${css.searchButtonText}"\x3e${_i18n.widgets.Search.main.searchButtonTitle}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"sourcesNode" class\x3d"${css.searchMenu} ${css.sourcesMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"noResultsMenuNode" class\x3d"${css.searchMenu} ${css.searchNoResultsMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.searchClearFloat}"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/Bookmark/setting/Edit.html":'\x3cdiv class\x3d"edit-page jimu-widget-bookmark"\x3e\r\n  \x3cdiv class\x3d"info"\x3e\r\n    \x3cdiv class\x3d"image"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"imageChooserBase"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"text"\x3e\r\n      \x3cdiv class\x3d"lebel"\x3e\r\n        \x3cspan\x3e${nls.title}\x3c/span\x3e\x3cspan class\x3d"start"\x3e*\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"displayName" required\x3d"true" placeHolder\x3d${nls.title} data-dojo-props\x3d\'style:{width:"100%"}\' class\x3d"title"/\x3e\r\n      \x3cdiv class\x3d"tips"\x3e(${nls.thumbnailHint})\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"options"\x3e\r\n    \x3cdiv class\x3d"tips"\x3e${nls.extent}\x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"extent-chooser" data-dojo-attach-point\x3d"extentChooserNode"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"itmes btns"\x3e\r\n      \x3cdiv class\x3d"" data-dojo-attach-point\x3d"saveLayers"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"layerChooserContainer" class\x3d"layer-chooser-container"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"layerChooser"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/setting/Import.html":'\x3cdiv class\x3d"import jimu-widget-bookmark"\x3e\r\n  \x3cdiv class\x3d"import-tips"\x3e${nls.importFromWeb}\x3c/div\x3e\r\n\r\n  \x3cdiv data-dojo-attach-point\x3d"bookmarksInWebmap" class\x3d"bookmarks-in-webmap"\x3e\r\n    \x3cdiv class\x3d"select-all-cb"\x3e\r\n      \x3cdiv type\x3d"checkbox" checked\x3d"false" id\x3d"all" data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"all"\x3e\x3c/div\x3e\r\n      \x3clabel class\x3d"all-label" for\x3d"all"\x3e${nls.selectAll}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"bookMarkerContainer" class\x3d"bookmarker-container editing"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv data-dojo-attach-point\x3d"noBookmark" class\x3d"no-bookmark"\x3e${nls.noBookmarkInWebMap}\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/setting/Sync.html":'\x3cdiv class\x3d"sync"\x3e\r\n  \x3cdiv class\x3d"sync-setting-item"\x3e\r\n    \x3cdiv class\x3d"check" data-dojo-attach-point\x3d"isSyncWebmapNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"marks-table-div web-map" data-dojo-attach-point\x3d"webMapBookMarkerContainer"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"sync-setting-item"\x3e\r\n    \x3cdiv class\x3d"check" data-dojo-attach-point\x3d"isSyncCustomNode"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"customBtns" class\x3d"verticalCenter"\x3e\r\n      \x3c!--\x3cdiv class\x3d"custom-btns" data-dojo-attach-point\x3d"importBtn"\x3e${nls.import}\x3c/div\x3e--\x3e\r\n      \x3cdiv class\x3d"custom-btns create" data-dojo-attach-point\x3d"createNewBtn"\x3e${nls.create}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"marks-table-div custom editing" data-dojo-attach-point\x3d"custombookMarkerContainer"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/setting/Setting.html":'\x3cdiv class\x3d"jimu-widget-bookmark"\x3e\r\n  \x3cdiv class\x3d"layout" data-dojo-attach-point\x3d"layoutContainer"\x3e\x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"editable"\x3e\r\n    \x3c!--\x3cdiv class\x3d"title"\x3e${nls.bookmark}\x3c/div\x3e--\x3e\r\n    \x3cdiv class\x3d"check" data-dojo-attach-point\x3d"isEditableNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"editable"\x3e\r\n    \x3cdiv class\x3d"check save-layer" data-dojo-attach-point\x3d"isSaveLayers"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"" data-dojo-attach-point\x3d"syncContainer"\x3e\x3c/div\x3e\r\n  \x3c!--\r\n    \x3cdiv class\x3d\'bookmark-add jimu-float-leading jimu-leading-margin2\' data-dojo-attach-event\x3d"onclick: onAddBookmarkClick"\x3e\r\n      \x3cdiv class\x3d"add_mark_image"\x3e\x3c/div\x3e\u200b\r\n      \x3cdiv title\x3d"${nls.add}" class\x3d"add_mark_text"\x3e${nls.add}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    --\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/setting/css/style.css":'.jimu-img-node{font-size: 12px; position: relative; float: left; color: #666; overflow: hidden;}.jimu-img-node .node-box{position: relative; border-radius: 4px; overflow: hidden;}.jimu-img-node img{width: 100%; height: 100%; cursor: pointer;}.jimu-img-node .node-label{height: 30px; text-align: center; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled{opacity: 1;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner {color: #000; opacity: 0.9;}.jimu-widget-bookmark .no-user-select{user-select: none; -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none;}.jimu-widget-bookmark .hide {display: none !important;}.jimu-widget-bookmark .clearFix {*overflow: hidden; *zoom: 1;}.jimu-widget-bookmark .clearFix:after {display: table; content: ""; width: 0; clear: both;}.jimu-widget-bookmark .verticalCenter{display: flex; align-items: center;}.jimu-widget-bookmark .jimu-img-node .node-box{margin: 0 auto; width: 100px; height: 60px;}.jimu-widget-bookmark .cards .jimu-img-node .drag-masker{width: 100px; height: 60px;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox {border: none; width: 100%; background-color: transparent;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField{background-color: transparent; width: 100%; overflow: hidden;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{white-space: nowrap; text-overflow: ellipsis; text-align: center;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitFocused{border:none !important; box-shadow: none; background-image: none;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitValidationTextBoxFocused{background-image: none;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitFocused .dijitInputInner{box-shadow: none; background: rgba(36, 181, 204, 0.2) !important;}.jimu-img-node .oper-btns{display: none; position: absolute; z-index: 10;}.jimu-img-node .icons{position: absolute; width: 20px; height: 20px; z-index: 10; background-color: #FFF;}.list .jimu-img-node .icons{display: none;}.editing .jimu-img-node .thumbnail{}.jimu-img-node .drag-masker{position: absolute; z-index: 5; top: 0; width: 100%; height: 60px; cursor: pointer;}.jimu-img-node .drag-masker:hover{background-color: transparent}.editing .jimu-img-node .oper-btns{width:20px; height:20px; cursor: pointer; background-color: rgba(0,0,0,0.5);}.editing .jimu-img-node .oper-btns:hover{background-color: rgba(0,0,0,0.7);}.editing .jimu-img-node .selected-btn{background: url("../../images/btns/unselected.svg") no-repeat; left:0; top:0;}.editing .jimu-img-node.selected .selected-btn{background: url("../../images/btns/selected.svg") no-repeat;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .delete-btn{cursor: pointer; top:0;}.jimu-rtl .jimu-widget-bookmark:not(.mobile) .jimu-img-node .delete-btn{right: auto;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .delete-btn::before{position: absolute; background-image: url("../../images/btns/x.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.editing .jimu-img-node .edit-btn{right: 0; bottom: 30px;}.jimu-rtl .jimu-img-node .edit-btn{right: auto; left: 0;}.editing .jimu-img-node .edit-btn::before{position: absolute; display: block; background-image: url("images/btns/edit.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .rename-btn{display: none; top: 0px; left: 0px;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .rename-btn::before{position: absolute; display: block; background-image: url("images/btns/edit.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.editing .jimu-img-node .change-img-btn{right: calc((100% - 100px)/2); bottom: 30px;}.jimu-rtl .jimu-img-node .change-img-btn{right: auto; left: calc((100% - 100px)/2);}.editing .jimu-img-node .change-img-btn::before{position: absolute; background-image: url("../../images/btns/change.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-img-node .layer-info-icon{left: calc((100% - 100px)/2); bottom: 30px;}.jimu-rtl .jimu-img-node .layer-info-icon{right: auto; right: calc((100% - 100px)/2);}.jimu-img-node .layer-info-icon::before{position: absolute; background-image: url("../../images/btns/layer_infos.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-widget-bookmark .header {display: flex; align-items: center; justify-content: space-between; height: 30px; margin: 2px; margin-bottom: 15px;}.jimu-widget-bookmark .header .editable-btns,.jimu-widget-bookmark .header .common-fun-btns,.jimu-widget-bookmark .header .edit-btns,.jimu-widget-bookmark .header .common-fun-btns .display-mode{display: flex; align-items: center;}.jimu-widget-bookmark .header .common-fun-btns .display-mode {margin: 0 5px;}.jimu-widget-bookmark .header .two-modes .list{background: url("../../images/btns/list.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .list:hover{background: url("../../images/btns/list_selected.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .cards{background: url("../../images/btns/cards.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .cards:hover{background: url("../../images/btns/cards_selected.svg") no-repeat;}.jimu-widget-bookmark .adding .header .add{background: url("../../images/btns/add_selected.svg") no-repeat;}.jimu-widget-bookmark .header .edit{background: url("../../images/btns/edit.svg") no-repeat;}.jimu-widget-bookmark .editing .header .edit{background: url("../../images/btns/edit_selected.svg") no-repeat;}.jimu-widget-bookmark .header .sync-btn{background: url("../../images/btns/sync.svg") no-repeat;}.jimu-widget-bookmark .header .sync-btn.marked{background: url("../../images/btns/sync.svg") no-repeat; background-color: red;}.jimu-widget-bookmark .header .back-to-init{background: url("../../images/btns/backtoinit.svg") no-repeat;}.jimu-widget-bookmark .header .back-to-init.marked{background: url("../../images/btns/backtoinit_selected.svg") no-repeat;}.jimu-widget-bookmark .header .rename{background: url("../../images/btns/rename_selected.svg") no-repeat;}.jimu-widget-bookmark .header .rename.disable{background: url("../../images/btns/rename.svg") no-repeat;}.jimu-widget-bookmark .header .delete{background: url("../../images/btns/delete_selected.svg") no-repeat;}.jimu-widget-bookmark .header .delete.disable{background: url("../../images/btns/delete.svg") no-repeat;}.jimu-widget-bookmark .header .edit-btns{display: none;}.jimu-widget-bookmark .editing .header .edit-btns{display: flex;}.jimu-widget-bookmark .header .common-fun-btns{display: flex;}.jimu-widget-bookmark .editing .header .common-fun-btns{display: none;}.bookmark-notice-popup{font-family: "Avenir Medium"; font-size: 12px;}.bookmark-notice-popup .tips{color: #000000; letter-spacing: 0;}.bookmark-notice-popup .check-box{position: absolute; bottom: 20px;}.bookmark-notice-popup .check-box .jimu-checkbox .label{font-size: 12px; color: #353535; letter-spacing: 0.3px;}.DartTheme .jimu-widget-bookmark .dijitTextBox{border: none !important;}.DartTheme .jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner {color: #FFF !important;}.jimu-widget-bookmark-setting {height: 100%;}.jimu-widget-bookmark-setting .layout,.jimu-widget-bookmark-setting .editable{margin-bottom: 15px;}.jimu-widget-bookmark-setting .editable .tips{font-family: "Avenir Light"; font-size: 12px; color: #898989;}.jimu-widget-bookmark-setting .layout .title,.jimu-widget-bookmark-setting .editable .title{margin-bottom: 15px; font-size: 14px; color: #000000;}.jimu-widget-bookmark-setting .editable .save-layer{margin-left: 20px;}.jimu-rtl .jimu-widget-bookmark-setting .editable .save-layer{margin-right: 20px; margin-left: 0;}.jimu-widget-bookmark-setting .layout .content{}.jimu-widget-bookmark-setting .layout .label{margin-right: 40px; cursor: pointer;}.jimu-rtl .jimu-widget-bookmark-setting .layout .label{margin-left: 40px; margin-right: 0;}.jimu-widget-bookmark-setting .transparent{visibility: hidden;}.jimu-widget-bookmark-setting .default-setting{display: flex; align-items: center; justify-content: center; min-width: 100px; height: 20px; margin: 0 5px; cursor: pointer; background-color: #F3F3F3; font-size: 12px; text-align: center;}.jimu-widget-bookmark-setting .default-setting .default{color: #9B9B9B; padding: 2px 6px; cursor: default;}.jimu-widget-bookmark-setting .default-setting .set-default {width: 100%; height: 100%; padding: 0 10px; display: flex; align-items: center; justify-content: center; background-color: #24B5CC; color: #ffffff; cursor: pointer;}.jimu-widget-bookmark-setting .layout .content .checkbox{}.jimu-widget-bookmark-setting .layout .layout-btns{width:30px; height:30px; font-size: 14px; border: 1px solid #E2E2E2; margin:0 10px;}.jimu-widget-bookmark-setting .layout .layout-btns .cards{width: 16px; height: 16px; margin: 6px; background: url(../../images/btns/cards.svg) no-repeat;}.jimu-widget-bookmark-setting .layout .layout-btns .list{width: 16px; height: 16px; margin: 6px; background: url(../../images/btns/list.svg) no-repeat;}.jimu-widget-bookmark-setting .sync .check{margin-bottom: 15px;}.jimu-widget-bookmark-setting .sync label{font-family: "Avenir Medium"; font-size: 12px; color: #000000; letter-spacing: 0.3px;}.jimu-widget-bookmark-setting .sync .custom-btns{font-size: 14px; border: 1px solid #D6D6D6; height: 30px; width: 80px; text-align: center; line-height: 30px; cursor: pointer;}.jimu-widget-bookmark-setting .sync .custom-btns:hover{color: #FFF; background-color: #24B5CC;}.jimu-widget-bookmark-setting .sync .custom-btns.create{margin: 0 20px; margin-bottom: 15px;}.jimu-widget-bookmark-setting .bookmark-list{height: 100%; width: 100%; overflow: auto;}.jimu-widget-bookmark-setting .marks-table-div{width: 100%; height: 100%; overflow-x:hidden; overflow-y:auto; margin: 0 10px;}.jimu-widget-bookmark-setting .marks-table-div.editing{margin-top: 0;}.jimu-widget-bookmark-setting .bookmark-add{position:relative; width:100px; height:60px; padding:3px; text-align:center; color:#999999; font-size:10px; border:1px dotted gray; -webkit-border-radius:5px; -moz-border-radius:5px; -o-border-radius:5px; -ms-border-radius:5px; border-radius:5px; background-size:cover; margin-top: 5px; margin-left: 20px\\9;}.jimu-widget-bookmark-setting .bookmark-add .add_mark_image{display: block; position: absolute; left: 43px; top: 5px; width:14px; height:14px; background-position:center center; background-image:url(images/add_mark.png);}.jimu-widget-bookmark-setting .bookmark-add .add_mark_text{display: block; position: absolute; top: 25px; width: 100%; font-size: 12px; white-space: normal; height: 30px; width: 94px; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-bookmark-setting .bookmark-add:hover{cursor: pointer;}.jimu-widget-bookmark-setting .mark-item-div{position:relative; width:100px; height: 90px; font-size: 10px; margin-top: 5px;}.jimu-widget-bookmark-setting .mark-item-div .mark-item-bg{position:relative; width:100%; height:60px; line-height:28px; text-align:center; color:#999999; font-size:13px;}.jimu-widget-bookmark-setting .mark-item-div .mark-item-bg .mark-item-thumbnail{width:100%; height:100%;}.jimu-widget-bookmark-setting .mark-item-div .mark-item-bg.selected .mark-item-thumbnail{-webkit-box-sizing:content-box; -moz-box-sizing:content-box; -ms-box-sizing:content-box; -o-box-sizing:content-box; box-sizing:content-box;}.jimu-widget-bookmark-setting .mark-item-div .mark-item-bg .mark-item-detail-icon,.jimu-widget-bookmark-setting .mark-item-div .mark-item-bg .mark-item-delete-icon{display: none; position:absolute; width:20px; height:20px; background-color:rgba(0, 0, 0, 0.3); -webkit-border-radius:3px; -moz-border-radius:3px; -o-border-radius:3px; -ms-border-radius:3px; border-radius:3px; cursor:pointer;}.jimu-widget-bookmark-setting .mark-item-div .mark-item-bg .mark-item-detail-icon{right:2px; bottom:2px; background-repeat:no-repeat; background-position:center center; background-image:url(images/edit_mark.png);}.jimu-widget-bookmark-setting .mark-item-div .mark-item-bg .mark-item-detail-icon:hover,.jimu-widget-bookmark-setting .mark-item-div .mark-item-bg .mark-item-delete-icon:hover{background-color:rgba(0, 0, 0, 0.6);}.jimu-widget-bookmark-setting .mark-item-div .mark-item-bg:hover .mark-item-detail-icon,.jimu-widget-bookmark-setting .mark-item-div .mark-item-bg:hover .mark-item-delete-icon{display: block;}.jimu-widget-bookmark-setting .mark-item-div .mark-item-bg .mark-item-delete-icon{right:2px; top:2px; background-repeat:no-repeat; background-position:center center; background-image:url(images/delete_mark.png);}.jimu-widget-bookmark-setting .mark-item-div .mark-item-title-wapper{width:100%; text-align:center; color:#333333; font-size:12px; margin-bottom: 25px; overflow: hidden; height: 2.7em; line-height: 16px; padding: 0 5px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;}.jimu-Bookmark-Edit{height: 100%; overflow-y: auto;}.jimu-Bookmark-Edit .setting-table {margin: 5px 20px; border-spacing: 10px; border-collapse: separate;}.jimu-Bookmark-Edit .setting-table .img-chooser{width: 100px; height: 60px;}.jimu-Bookmark-Edit .input-table \x3e tbody \x3e tr \x3e .first{width:auto; text-align: left; padding-right:15px; white-space: nowrap; max-width: 108px; overflow: hidden; text-overflow: ellipsis;}.jimu-Bookmark-Edit .input-table \x3e tbody \x3e tr \x3e .second{width:660px;}.jimu-rtl .jimu-widget-bookmark-setting .mark-item-div .mark-item-bg .mark-item-delete-icon{right:auto; left: 2px;}.jimu-rtl .jimu-widget-bookmark-setting .mark-item-div .mark-item-bg .mark-item-detail-icon{right:auto; left: 2px;}.jimu-rtl .jimu-widget-bookmark-setting .bookmark-add{margin-left: auto; margin-right: 20px\\9;}.bookmark-extent-chooser .map{position: relative;}.jimu-widget-bookmark.import {min-height: 300px;}.jimu-widget-bookmark.import .import-tips{font-family: "Avenir Medium"; font-size: 14px; color: #161616;}.jimu-widget-bookmark.import .select-all-cb {margin: 10px 0; display: flex; align-items: center;}.jimu-widget-bookmark.import .all-label {font-size: 12px; color: #000000; letter-spacing: 0.3px; padding: 0 10px;}.jimu-widget-bookmark.import .bookmarker-container{overflow: auto;}.jimu-widget-bookmark.import .no-bookmark{font-size: 12px; color: #000000; letter-spacing: 0.3px; display: flex; min-height: 300px; align-items: center; justify-content: center;}.bookmark-extent-chooser .arcgisSearch{position: absolute; z-index: 1001; right: 5px; top: 5px;}.jimu-rtl .bookmark-extent-chooser .arcgisSearch{right: auto; left: 5px;}.jimu-widget-bookmark-setting .jimu-img-node,.import .jimu-img-node{width: 120px;}.jimu-widget-bookmark-setting .web-map .jimu-img-node .drag-masker{cursor: pointer;}.jimu-widget-bookmark-setting .custom .jimu-img-node .drag-masker{cursor: move;}.jimu-widget-bookmark-setting .jimu-img-node .drag-masker{left: 50%; transform: translate(-50%, 0%);}.jimu-widget-bookmark-setting .jimu-img-node .thumbnail{max-width: 100px; max-height: 60px;}.jimu-widget-bookmark-setting .editing .jimu-img-node .oper-btns{display: none;}.jimu-widget-bookmark-setting .editing .jimu-img-node:hover .oper-btns{display: flex; justify-content: center; align-items: center;}.jimu-widget-bookmark-setting .jimu-img-node .delete-btn{right:calc((100% - 100px)/2); top:0;}.jimu-rtl .jimu-widget-bookmark-setting .jimu-img-node .delete-btn{right: auto; left: calc((100% - 100px)/2);}.jimu-widget-bookmark-setting .jimu-img-node .edit-btn{right: calc((100% - 100px)/2); bottom: 31px;}.jimu-rtl .jimu-widget-bookmark-setting .jimu-img-node .edit-btn{right: auto; left: calc((100% - 100px)/2);}.jimu-widget-bookmark.edit-page {}.jimu-widget-bookmark.edit-page .info{display: flex;}.jimu-widget-bookmark.edit-page .info .image{width: 135px; height: 90px;}.jimu-widget-bookmark.edit-page .info .text{width:400px; margin-left: 10px;}.jimu-rtl .jimu-widget-bookmark.edit-page .info .text{margin-left: auto; margin-right: 10px;}.jimu-widget-bookmark.edit-page .info .text .lebel{font-family: "Avenir Medium"; font-size: 14px; color: #161616;}.jimu-widget-bookmark.edit-page .info .text .start{color: red; padding: 0 10px;}.jimu-widget-bookmark.edit-page .info .text .tips{font-size: 12px; color: #999999;}.jimu-widget-bookmark.edit-page .info .title{margin: 10px 0;}.jimu-widget-bookmark.edit-page .image .jimu-image-chooser{width: 135px; height: 80px;}.jimu-widget-bookmark.edit-page .jimu-image-chooser .hint .display-image{top: auto; left: auto; transform: none; width: 100% !important; height: 100% !important;}.jimu-widget-bookmark.edit-page .options{margin: 20px 0;}.jimu-widget-bookmark.edit-page .options .tips{margin-bottom: 10px;}.jimu-widget-bookmark.edit-page .options .itmes{display: flex; align-items: center; margin-top: 10px; margin-bottom: 10px;}.jimu-widget-bookmark.edit-page .options .itmes.btns{justify-content: space-between;}.jimu-widget-bookmark.edit-page .options .extent-chooser{height: 300px;}.jimu-widget-bookmark.edit-page .options .layer-chooser-container{max-height: 150px; overflow-y: scroll; border: 1px solid #d9dde0;}.jimu-widget-bookmark.edit-page .options .layer-chooser-container .jimu-basic-layer-chooser-from-map-lite {min-height: 24px;}.jimu-widget-bookmark.edit-page .options .layer-chooser-container .jimu-basic-layer-chooser-from-map-lite .tree-root-ul{border:none; -webkit-margin-before: 0; -webkit-margin-after: 0;}.layers-chooser-container .meun-box {position: absolute; z-index: 500; background-color: #fff; border: 1px solid #24B5CC; box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.50);}.layers-chooser-container .label {font-family: Avenir-Medium; font-size: 12px; color: #898989; letter-spacing: 0.33px;}.layers-chooser-container .label.enable {color: #FFF; background-color: #24B5CC;}.layers-chooser-container .selected {background-color: greenyellow;}',
"*now":function(E){E(['dojo/i18n!*preload*widgets/Bookmark/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/on ../utils ./Layout ./Sync jimu/dijit/CheckBox".split(" "),function(E,C,v,y,u,r,z,D,x){return E([C,v],{baseClass:"jimu-widget-bookmark-setting",startup:function(){this.inherited(arguments);this.layout=new z({nls:this.nls,config:this.config},this.layoutContainer);this.layout.startup();"undefined"===typeof this.config.editable&&(this.config.editable=!1);this.isEditableCheckBox=new x({label:this.nls.editable},
this.isEditableNode);this.isEditableCheckBox.startup();this.own(u(this.isEditableCheckBox,"change",y.hitch(this,"_onEditableChange")));this.isSaveLayersCheckBox=new x({label:this.nls.savelayers,checked:!1},this.isSaveLayers);this.isSaveLayersCheckBox.startup();this.sync=new D({nls:this.nls,folderUrl:this.folderUrl,appConfig:this.appConfig,map:this.map,config:this.config},this.syncContainer);this.sync.startup();this.setConfig(this.config)},_onEditableChange:function(n){n?this.isSaveLayersCheckBox.setStatus(!0):
(this.isSaveLayersCheckBox.setValue(!1),this.isSaveLayersCheckBox.setStatus(!1))},setConfig:function(n){this.config=n;this.updateConfigs();this.layout.setConfig(this.config);this.isEditableCheckBox.setValue(n.editable);this.isSaveLayersCheckBox.setValue(n.isSaveLayerVisibility);this._onEditableChange(n.editable);this.sync.setConfig(this.config)},getConfig:function(){var n=this.sync.getConfig();this.config.syncMode=n.syncMode;this.config.layout=this.layout.getConfig();this.config.editable=this.isEditableCheckBox.checked;
this.config.isSaveLayerVisibility=this.isSaveLayersCheckBox.checked;this.config.bookmarks2D=r.stringifyBookmarks(n.bookmarks);this.completeUpdateConfig();return this.config},destroy:function(){this.layout&&this.layout.destroy&&this.layout.destroy();this.sync&&this.layout.destroy&&this.sync.destroy();this.inherited(arguments)},updateConfigs:function(){r.isConfigBefore5_3(this.config)&&r.setDefaultConfigForUpdate(this.config);r.updateBookmarks(this.config.bookmarks2D)},completeUpdateConfig:function(){r.completeUpdateConfig(this.config)}})});