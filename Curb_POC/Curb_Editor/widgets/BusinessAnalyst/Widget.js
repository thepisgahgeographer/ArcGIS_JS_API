// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/BusinessAnalyst/BAWizard":function(){define("dojo/_base/array dojo/_base/declare dojo/on dojo/when esri/dijit/geoenrichment/_Wizard esri/geometry/webMercatorUtils ./CreateBuffersPage ./ErrorPage ./RunReportsPage ./SelectPointPolygonPage ./utils/GEUtil ./utils/GeocodeUtil".split(" "),function(t,q,l,k,f,e,a,b,d,c,g,h){return q([f],{selectedPoint:{tradeAreas:[]},selectedPolygon:{},selectedCountryID:"",availableCountries:[],drawnPolygonGraphic:null,name:"BusinessAnalystWizard",
baseClass:"jimu-widget-business-analyst-wizard",postCreate:function(){this.inherited(arguments);var m=this;k(g.checkCapabilities(this.appConfig),function(p){p.hasPrivilege&&p.geServiceConfigured&&p.dirRoutingServiceConfigured?(m.pages.SELECT_POINT_POLYGON=new c({map:m.map,nls:m.nls,wizard:m,config:m.config,onNext:function(){m._loadCreateBuffersPage()}}),m.pages.CREATE_BUFFERS=new a({map:m.map,nls:m.nls,wizard:m,config:m.config,onBack:function(){m._loadSelectPointPolygonPage()},onNext:function(){m._loadRunReportsPage()}}),
m.pages.CREATE_BUFFERS.startup(),m.pages.RUN_REPORTS=new d({map:m.map,nls:m.nls,wizard:m,appConfig:m.appConfig,config:m.config,onBack:function(){m.selectedPoint.geometry?m._loadCreateBuffersPage():m._loadSelectPointPolygonPage()}}),m.loadPage("SELECT_POINT_POLYGON"),m.own(l(m.map.infoWindow,"Show",function(){m._featureSelected()})),m.own(l(m.map.infoWindow,"Hide",function(){m._featureUnselected()})),m.own(l(m.map.infoWindow,"set-features",function(){m._featureSelected()})),m.own(l(m.map.infoWindow,
"selection-change",function(){m._featureSelected()})),m.selectedCountryID=m.config.defaultCountryID,k(g.getAvailableCountries(),function(n){m.availableCountries=n.countries;m.setSelectedCountry(m.selectedCountryID)}),m.map.infoWindow&&m.map.infoWindow.features&&0<m.map.infoWindow.features.length&&m._featureSelected()):(m.pages.ERROR_PAGE=new b({nls:m.nls,displayErrors:{gePrivilege:!p.hasPrivilege,geServiceNotConfigured:!p.geServiceConfigured,dirRoutingServiceNotConfigured:!p.dirRoutingServiceConfigured}}),
m.pages.ERROR_PAGE.startup(),m.loadPage("ERROR_PAGE"))})},startup:function(){},resize:function(){this.pages.SELECT_POINT_POLYGON&&this.pages.SELECT_POINT_POLYGON.resize()},clearSelectedPointBuffers:function(){var m=this;t.forEach(this.selectedPoint.tradeAreas,function(p){p&&p.graphic&&m.map.graphics.remove(p.graphic)});this.selectedPoint.tradeAreas=[]},clearSelectedPoint:function(){this.clearSelectedPointBuffers();this.map.graphics.remove(this.selectedPoint.pointGraphic);this.selectedPoint={tradeAreas:[]}},
clearSelectedPolygon:function(){this.selectedPolygon={};this.drawnPolygonGraphic&&(this.map.infoWindow.clearFeatures(),this.map.graphics.remove(this.drawnPolygonGraphic),this.drawnPolygonGraphic=null)},setSelectedCountry:function(m){var p=this;3==m.length?t.forEach(this.availableCountries,function(n){n.abbr3==m&&(p.selectedCountryID=n.id)}):2==m.length&&(this.selectedCountryID=m);this.pages.RUN_REPORTS.loadReportsInfographicsForCountry(this.selectedCountryID)},_loadSelectPointPolygonPage:function(){this.clearSelectedPoint();
this.clearSelectedPolygon();this.loadPage("SELECT_POINT_POLYGON");this.resize()},_loadCreateBuffersPage:function(){this.loadPage("CREATE_BUFFERS");this.pages.CREATE_BUFFERS.refresh()},_loadRunReportsPage:function(){this.loadPage("RUN_REPORTS");this.pages.RUN_REPORTS.refresh()},refreshPage:function(){this.currentPage&&this.currentPage.refresh&&this.currentPage.refresh()},_featureSelected:function(){var m=this,p=-1<this.map.infoWindow.selectedIndex&&this.map.infoWindow.features&&this.map.infoWindow.features[this.map.infoWindow.selectedIndex];
if(!p)this.clearSelectedPoint(),this.clearSelectedPolygon();else if((this.selectedPoint.geometry?this.selectedPoint.geometry:this.selectedPolygon.geometry)!==p.geometry)if(this.clearSelectedPoint(),this.clearSelectedPolygon(),"point"===p.geometry.type){this.selectedPoint.geometry=p.geometry;this.selectedPoint.locationName=this._getFeatureName(p);this.selectedPoint.attributes=p.attributes?p.attributes:{};var n=e.xyToLngLat(p.geometry.x,p.geometry.y);this.selectedPoint.long=n[0].toFixed(5);this.selectedPoint.lat=
n[1].toFixed(5);k(h.reverseGeocode({x:n[0],y:n[1]}),function(r){m.setSelectedCountry(r.address.CountryCode);m._loadCreateBuffersPage()})}else"polygon"==p.geometry.type?(this.selectedPolygon.geometry=p.geometry,this.selectedPolygon.locationName=this._getFeatureName(p),this.selectedPolygon.feature=p,n=p.geometry.getCentroid(),n=e.xyToLngLat(n.x,n.y),k(g.getCountryForPolygon(p.geometry,this.config,this.selectedCountryID),function(r){m.setSelectedCountry(r);m._loadRunReportsPage()})):m._loadSelectPointPolygonPage()},
_featureUnselected:function(){this.clearSelectedPoint();this.clearSelectedPolygon();this.pages.SELECT_POINT_POLYGON.search&&this.pages.SELECT_POINT_POLYGON.search.clear();this._loadSelectPointPolygonPage()},_getFeatureName:function(m){return m.getTitle()?m.getTitle():m._layer.displayField&&m.attributes[m._layer.displayField]?m.attributes[m._layer.displayField]:""}})})},"esri/dijit/geoenrichment/_Wizard":function(){define(["esri/declare","dojo/_base/lang","dojo/dom-construct","dijit/_WidgetBase","./utils/animation/AnimationHelper"],
function(t,q,l,k,f){return t("esri.dijit.geoenrichment._Wizard",k,{currentPage:null,currentPageId:null,_anim:null,pages:null,stacking:"stretch",constructor:function(){this.pages={};this._anim=new f},buildRendering:function(){this.domNode=l.create("div",{"class":"_Wizard_Root"})},loadPage:function(e){var a=this.pages[e],b=this.currentPage;a!==b&&(this._anim.finish(),b&&this._animPage("Anim_FadeOut").then(q.hitch(this.domNode,"removeChild",b.domNode)),this.currentPage=a,this.currentPageId=e,l.place(this.currentPage.domNode,
this.domNode,"first"),b&&this._animPage("Anim_FadeIn"),a._started||(a.set("stacking",this.stacking),a.startup()),a.resize())},_animPage:function(e){return this._anim.start([{node:this.currentPage.domNode,classes:[e,"Wizard_FadeAnim"]}])},resize:function(){this.currentPage&&this.currentPage.resize()},destroy:function(){for(var e in this.pages)this.hasOwnProperty(e)&&this.pages[e].destroyRecursive();this.pages={};this.inherited(arguments)}})})},"esri/declare":function(){define(["dojo/_base/declare",
"dojo/_base/lang","./extend"],function(t,q,l){return function(k,f,e){var a=q.isString(k);a?e.declaredClass=k:(e=f,f=k);f=t(f,e);a&&l(k,f);return f}})},"esri/extend":function(){define(["dojo/_base/lang","dojo/has","./kernel"],function(t,q,l){return function(k,f){q("extend-esri")&&(k=k.substring(k.indexOf(".")+1),t.setObject(k,f,l))}})},"esri/dijit/geoenrichment/utils/animation/AnimationHelper":function(){define("esri/declare dojo/_base/array dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/sniff dojo/on esri/dijit/geoenrichment/Deferred".split(" "),
function(t,q,l,k,f,e,a,b,d){var c=!(29>a("chrome")||23>a("ff")||6>a("safari")||10>a("ie"));var g=function(m,p){for(var n=function(y){var A=y.type;g=A;for(var C in r)C!==A&&(r[C].remove(),delete r[C]);p.apply(this,arguments)},r={},u=["animationend","webkitAnimationEnd"],v=0;v<u.length;v++)r[u[v]]=b(m,u[v],n);return{remove:function(){for(var y in r)r.hasOwnProperty(y)&&r[y].remove()}}};var h=t(null,{_oldNode:null,_targets:null,_deferred:null,start:function(m,p){this._oldNode=p;this._deferred=new d;
if(!c||!m.length||!m[0].node)return this.finish(),this._deferred.promise;this._targets=m;b.once(m[0].node,g,l.hitch(this,this.finish));for(p=0;p<m.length;p++){var n=m[p];k.add(n.node,n.classes);k.add(n.node,"Anim_Common")}return this._deferred.promise},finish:function(){if(this._targets){for(var m=0;m<this._targets.length;m++){var p=this._targets[m];p.node&&(k.remove(p.node,p.classes),k.remove(p.node,"Anim_Common"))}this._targets=null}this._oldNode&&(this.onNodePreDestroy(this._oldNode),f.destroy(this._oldNode),
this._oldNode=null);this._deferred.resolve()},onNodePreDestroy:function(m){}});return t(null,{progress:null,_items:null,_flySurfaceNode:null,_ltr:e.isBodyLtr(),constructor:function(m){this._flySurfaceNode=m;this._items=[]},start:function(m,p){var n=this,r=new h;r.onNodePreDestroy=function(u){n.onNodePreDestroy(u)};this._items.push(r);this.progress||(this.progress=new d);return r.start(m,p).then(l.hitch(this,this._onItemFinished,r))},_onItemFinished:function(m){m=q.indexOf(this._items,m);0<=m&&(this._items.splice(m,
1),0===this._items.length&&this.progress&&(this.progress.resolve(),this.progress=null))},finish:function(){for(var m=this._items;0<m.length;)m.pop().finish()},fly:function(m,p,n,r){r=r||m.cloneNode(!0);n||(n=["top",this._ltr?"left":"right"]);if(!c)return r;m=m.getBoundingClientRect();var u=this._flySurfaceNode.getBoundingClientRect();k.add(r,"Anim_FlyingObj");for(var v,y,A=0;A<n.length;A++){var C=n[A],E=m[C]-u[C];if("right"===C||"bottom"===C)E=-E;if("left"===C&&!this._ltr||"right"===C&&this._ltr)v=
C,y=E;r.style[C]=E+"px"}this._flySurfaceNode.appendChild(r);v&&(y+=m.width-r.getBoundingClientRect().width,r.style[v]=y+"px");this.start([{node:r,classes:[p]}],r);return r},onNodePreDestroy:function(m){}})})},"esri/dijit/geoenrichment/Deferred":function(){define(["dojo/Deferred"],function(t){return t})},"widgets/BusinessAnalyst/CreateBuffersPage":function(){define("dojo/_base/declare dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin esri/dijit/geoenrichment/_WizardPage esri/geometry/Polygon esri/symbols/SimpleFillSymbol esri/symbols/SimpleLineSymbol esri/Color esri/graphic ./utils/GEUtil ./utils/TravelModeUtil ./utils/ValidationUtil ./utils/SiteUtil dojo/text!./CreateBuffersPage.html jimu/dijit/TabContainer3 dijit/form/TextBox".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p,n,r){return t([l,q,f,k],{templateString:n,postCreate:function(){this.inherited(arguments);this.tab=new r({tabs:[{title:this.nls.rings,content:this.ringsContentPane},{title:this.nls.driveTime,content:this.driveTimeContentPane},{title:this.nls.walkTime,content:this.walkTimeContentPane}],selected:this.nls.rings});this.tab.placeAt(this.ringDtWtTabContainer);this.tab.startup();this._setConfigDefaults()},startup:function(){this.inherited(arguments)},refresh:function(){this._showHideTabs()},
_setConfigDefaults:function(){this._setRadii(this.config.ringDefaults,this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3);this.ringsBufferUnits.set("value",this.config.ringUnitDefault);this._setRadii(this.config.driveTimeDefaults,this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3);this.driveTimeBufferUnits.set("value",this.config.driveTimeUnitDefault);this._setRadii(this.config.walkTimeDefaults,this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3);
this.walkTimeBufferUnits.set("value",this.config.walkTimeUnitDefault)},_showHideTabs:function(){this.config.ringDisabled&&this.tab.removeTab(this.nls.rings);this.config.driveTimeDisabled&&this.tab.removeTab(this.nls.driveTime);this.config.walkTimeDisabled&&this.tab.removeTab(this.nls.walkTime);this.tab.getSelectedTitle()===this.nls.rings&&this.config.ringDisabled&&this.tab.selectTab(this.nls.driveTime);this.tab.getSelectedTitle()===this.nls.driveTime&&this.config.driveTimeDisabled&&this.tab.selectTab(this.nls.walkTime);
this.tab.getSelectedTitle()===this.nls.walkTime&&this.config.walkTimeDisabled&&this.tab.selectTab(this.nls.driveTime)},applyBuffer:function(){if(this._validateInput()){this.shelter.show();var u=this,v=[[16,59,143,1],[0,204,51,1],[204,51,0,1]],y=0,A={},C="",E="",F="",B=10,w;this.tab.getSelectedTitle()===this.nls.rings?(A.areaType="RingBuffer",A.bufferUnits=this.ringsBufferUnits.get("value"),F=this.ringsBufferUnits._getDisplayedValueAttr(),A.bufferRadii=this._getRadii(this.ringsBufferRadii1,this.ringsBufferRadii2,
this.ringsBufferRadii3),C=this.nls.ring):this.tab.getSelectedTitle()===this.nls.driveTime?(A.areaType="NetworkServiceArea",A.bufferUnits=this.driveTimeBufferUnits.get("value"),F=this.driveTimeBufferUnits._getDisplayedValueAttr(),A.bufferRadii=this._getRadii(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3),C=this.nls.driveTime,E="Driving "+("Minutes"===A.bufferUnits?"Time":"Distance"),B=(w=A.bufferRadii?p.getMaxRadiusInKilometers(A,!1):0)&&Math.max(1,Math.log(w/8)*
Math.LOG2E),B=w*Math.min(B,5)):(A.areaType="NetworkServiceArea",A.bufferUnits=this.walkTimeBufferUnits.get("value"),F=this.walkTimeBufferUnits._getDisplayedValueAttr(),A.bufferRadii=this._getRadii(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3),C=this.nls.walkTime,E="Walking "+("Minutes"===A.bufferUnits?"Time":"Distance"),B=(w=A.bufferRadii?p.getMaxRadiusInKilometers(A,!0):0)&&Math.max(1,Math.log(w/8)*Math.LOG2E),B=w*Math.min(B,3));var z=[];h.getTravelMode(E,B).then(function(H){H&&
(A.travelMode=H);g.createRingOrDriveTimes({geometry:u.wizard.selectedPoint.geometry,studyAreasOptions:A,sourceCountry:u.wizard.selectedCountryID}).then(function(G){u.wizard.clearSelectedPointBuffers();u.wizard.selectedPoint.areadesc2=C+u.nls.colon+" "+A.bufferRadii.join(", ")+" "+u.nls["headerDescription_"+F]+" "+u.nls.radii;G=G.results[0].value.FeatureSet[0].features.reverse();var I=A.bufferRadii.reverse(),L;for(L in G){var N=new e({rings:G[L].geometry.rings,spatialReference:{wkid:102100}});if(u.tab.getSelectedTitle()==
u.nls.rings)var O=new a(b.STYLE_SOLID,new b(b.STYLE_SOLID,new d(v[y]),2),new d([255,0,15,0]));else O=new d(v[y]),O.a=.5,O=new a(b.STYLE_SOLID,new b(b.STYLE_SOLID,new d(v[y]),2),O);N=new c(N,O);O={};O.graphic=N;O.name=u.wizard.selectedPoint.locationName+" - "+I[y]+" "+F;O.shortName=I[y]+" "+F;O.AREA_DESC=I[y]+" "+F;O.AREA_DESC2=C+u.nls.colon+" "+I[y]+" "+u.nls["headerDescription_"+F]+" "+u.nls.radius_lowercase;u.wizard.selectedPoint.tradeAreas.push(O);u.map.graphics.add(N);z.push(N);y++}u.wizard.selectedPoint.tradeAreas=
u.wizard.selectedPoint.tradeAreas.reverse();u.map.setExtent(u.wizard.selectedPoint.tradeAreas[u.wizard.selectedPoint.tradeAreas.length-1].graphic._extent);u.shelter.hide();u.onNext()},function(G){alert("Error: "+G);u.shelter.hide()})})}},backOnClick:function(){this.onBack()},_getRadii:function(u,v,y){u=u.get("value");v=v.get("value");y=y.get("value");var A=[];""!==u&&A.push(u);""!==v&&A.push(v);""!==y&&A.push(y);return A},_setRadii:function(u,v,y,A){0<u.length?v.set("value",u[0]):v.set("value","");
1<u.length?y.set("value",u[1]):y.set("value","");2<u.length?A.set("value",u[2]):A.set("value","")},_validateInput:function(){var u=!0;u=this.tab.getSelectedTitle()===this.nls.rings?m.validateInvalidValues(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,this.ringValidationErrorMessage,this.nls.thisEntryIsNotValid):this.tab.getSelectedTitle()===this.nls.driveTime?m.validateInvalidValues(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,this.driveTimeValidationErrorMessage,
this.nls.thisEntryIsNotValid):m.validateInvalidValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,this.walkTimeValidationErrorMessage,this.nls.thisEntryIsNotValid);return u?(u=this.tab.getSelectedTitle()===this.nls.rings?m.validateMinMaxValues(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,m.MIN_RINGS_VALUE,m.MAX_RINGS_VALUE,this.ringValidationErrorMessage,this.nls.invalidValueRing):this.tab.getSelectedTitle()===this.nls.driveTime?m.validateMinMaxValues(this.driveTimeBufferRadii1,
this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,m.MIN_DTWT_VALUE,m.MAX_DTWT_VALUE,this.driveTimeValidationErrorMessage,this.nls.invalidValueDTWT):m.validateMinMaxValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,m.MIN_DTWT_VALUE,m.MAX_DTWT_VALUE,this.walkTimeValidationErrorMessage,this.nls.invalidValueDTWT))?!0:!1:!1}})})},"esri/dijit/geoenrichment/_WizardPage":function(){define("esri/declare dojo/_base/lang dojo/string dojox/mvc/Templated ./Grid ./ProgressHandler dojo/text!./templates/_WizardPage.html".split(" "),
function(t,q,l,k,f,e,a){return t("esri.dijit.geoenrichment._WizardPage",k,{buttonsNode:null,_progressHandler:null,buildRendering:function(){var b=this.templateString;b&&"\ufeff"==b[0]&&(b=b.substr(1));this.templateString=l.substitute(a,{content:b});this.inherited(arguments);this.layoutGrid.rows=[f.AUTO,f.AUTO,f.AUTO]},resize:function(){this.layoutGrid.resize()},_setStackingAttr:function(b){switch(b){case "stretch":this.layoutGrid.rows[1]=f.STRETCH;break;case "stack":this.layoutGrid.rows[1]=f.STACK}},
showProgress:function(b,d){this._progressHandler||(this._progressHandler=new e(this.progressDiv,{queryNode:this.domNode}),this.own(this._progressHandler));b=this._progressHandler.showProgress(b,"string"==typeof d?d:"");d=d?"function"==typeof d?d:this[d]:null;"function"==typeof d&&b.then(q.hitch(this,d));return b},cancelProgress:function(b){this._progressHandler&&this._progressHandler.cancelProgress("string"==typeof b?b:"")}})})},"dojox/mvc/Templated":function(){define("dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin ./at".split(" "),
function(t,q,l,k,f){return t("dojox.mvc.Templated",[l,k,f],{bindings:null,startup:function(){var e=q.isFunction(this.bindings)&&this.bindings.call(this)||this.bindings,a;for(a in e){var b=this[a],d=e[a];if(b)for(var c in d)b.set(c,d[c]);else console.warn("Widget with the following attach point was not found: "+a)}this.inherited(arguments)}})})},"dojox/mvc/at":function(){define(["dojo/_base/kernel","dojo/_base/lang","./sync","./_atBindingExtension"],function(t,q,l){t.experimental("dojox.mvc");t=function(k,
f){return{atsignature:"dojox.mvc.at",target:k,targetProp:f,bindDirection:l.both,direction:function(e){this.bindDirection=e;return this},transform:function(e){this.converter=e;return this},equals:function(e){this.equalsCallback=e;return this}}};t.from=l.from;t.to=l.to;t.both=l.both;return q.setObject("dojox.mvc.at",t)})},"dojox/mvc/sync":function(){define(["dojo/_base/lang","dojo/_base/config","dojo/_base/array","dojo/has"],function(t,q,l,k){function f(d,c,g,h,m,p,n,r,u,v){if(!(g(u,r)||"*"==m&&0>l.indexOf(h.get("properties")||
[n],n)||"*"==m&&n in(v||{}))){g="*"==m?n:m;if(k("mvc-bindings-log-api"))var y=a(h,g,p,n);try{u=d?d(u,c):u}catch(A){k("mvc-bindings-log-api")&&console.log("Copy from"+y.join(" to ")+" was not done as an error is thrown in the converter.");return}k("mvc-bindings-log-api")&&console.log(y.reverse().join(" is being copied from: ")+" (Value: "+u+" from "+r+")");t.isFunction(h.set)?h.set(g,u):h[g]=u}}var e=t.getObject("dojox.mvc",!0);k.add("mvc-bindings-log-api",(q.mvc||{}).debugBindings);var a=k("mvc-bindings-log-api")?
function(d,c,g,h){return[[g.canConvertToLoggable||!g.declaredClass?g:g.declaredClass,h].join(":"),[d.canConvertToLoggable||!d.declaredClass?d:d.declaredClass,c].join(":")]}:"";q={from:1,to:2,both:3};var b=function(d,c,g,h,m){var p=(m||{}).converter;if(p){var n={source:d,target:g};var r=p.format&&t.hitch(n,p.format);var u=p.parse&&t.hitch(n,p.parse)}var v=[],y=[],A=t.mixin({},d.constraints,g.constraints);p=(m||{}).bindDirection||e.both;var C=(m||{}).equals||b.equals;if(k("mvc-bindings-log-api"))var E=
a(d,c,g,h);if("*"==h){if("*"!=c)throw Error("Unmatched wildcard is specified between source and target.");m=g.get("properties");if(!m){m=[];for(var F in g)g.hasOwnProperty(F)&&"_watchCallbacks"!=F&&m.push(F)}y=g.get("excludes")}else m=[c];p&e.from&&(t.isFunction(d.set)&&t.isFunction(d.watch)?v.push(d.watch.apply(d,("*"!=c?[c]:[]).concat([function(B,w,z){f(r,A,C,g,h,d,B,w,z,y)}]))):k("mvc-bindings-log-api")&&console.log(E.reverse().join(" is not a stateful property. Its change is not reflected to ")+
"."),l.forEach(m,function(B){if("*"!=h||!(B in(y||{}))){var w=t.isFunction(d.get)?d.get(B):d[B];f(r,A,C,g,"*"==h?B:h,d,B,void 0,w)}}));p&e.to&&(p&e.from||l.forEach(m,function(B){if("*"!=h||!(B in(y||{}))){var w=t.isFunction(g.get)?g.get(h):g[h];f(u,A,C,d,B,g,"*"==h?B:h,void 0,w)}}),t.isFunction(g.set)&&t.isFunction(g.watch)?v.push(g.watch.apply(g,("*"!=h?[h]:[]).concat([function(B,w,z){f(u,A,C,d,c,g,B,w,z,y)}]))):k("mvc-bindings-log-api")&&console.log(E.join(" is not a stateful property. Its change is not reflected to ")+
"."));k("mvc-bindings-log-api")&&console.log(E.join(" is bound to: "));F={};F.unwatch=F.remove=function(){for(var B=null;B=v.pop();)B.unwatch();k("mvc-bindings-log-api")&&console.log(E.join(" is unbound from: "))};return F};t.mixin(e,q);return t.setObject("dojox.mvc.sync",t.mixin(b,{equals:function(d,c){return d===c||"number"==typeof d&&isNaN(d)&&"number"==typeof c&&isNaN(c)||t.isFunction((d||{}).getTime)&&t.isFunction((c||{}).getTime)&&d.getTime()==c.getTime()||(t.isFunction((d||{}).equals)?d.equals(c):
t.isFunction((c||{}).equals)?c.equals(d):!1)}},q))})},"dojox/mvc/_atBindingExtension":function(){define(["dojo/_base/config","dojo/has","dijit/_WidgetBase","./atBindingExtension"],function(t,q,l,k){q.add("mvc-extension-per-widget",(t.mvc||{}).extensionPerWidget);q("mvc-extension-per-widget")||k(l.prototype)})},"dojox/mvc/atBindingExtension":function(){define("dojo/aspect dojo/_base/array dojo/_base/lang dijit/_WidgetBase ./_atBindingMixin dijit/registry".split(" "),function(t,q,l,k,f){return function(e){q.forEach(arguments,
function(a){a.dataBindAttr?console.warn("Detected a widget or a widget class that has already been applied data binding extension. Skipping..."):(l._mixin(a,f.mixin),t.before(a,"postscript",function(b,d){this._dbpostscript(b,d)}),t.before(a,"startup",function(){this._started||this._startAtWatchHandles()}),t.before(a,"destroy",function(){this._stopAtWatchHandles()}),t.around(a,"set",function(b){return function(d,c){return d==f.prototype.dataBindAttr?this._setBind(c):"dojox.mvc.at"==(c||{}).atsignature?
this._setAtWatchHandle(d,c):b.apply(this,l._toArray(arguments))}}))});return arguments}})},"dojox/mvc/_atBindingMixin":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/declare dojo/has dojo/Stateful ./resolve ./sync".split(" "),function(t,q,l,k,f,e,a){function b(m){try{var p=require("dijit/registry")}catch(r){return}for(m=m.domNode&&m.domNode.parentNode;m;){if(m=p.getEnclosingWidget(m)){var n=m._relTargetProp||"target";if((q.isFunction(m.get)?m.get(n):m[n])||n in m.constructor.prototype)return m}m=
m&&m.domNode.parentNode}}function d(m,p,n,r,u){function v(){y.Two&&y.Two.unwatch();delete y.Two;var F=A&&(q.isFunction(A.get)?A.get(C):A[C]),B=e(m,F);F=e(n,F);k("mvc-bindings-log-api")&&(!B||/^rel:/.test(m)&&!A)&&g(m,p);k("mvc-bindings-log-api")&&(!F||/^rel:/.test(n)&&!A)&&g(n,r);B&&F&&(!/^rel:/.test(m)&&!/^rel:/.test(n)||A)&&(B.set&&B.watch||"*"!=p?null==p?(q.isFunction(F.set)?F.set(r,B):F[r]=B,k("mvc-bindings-log-api")&&console.log("dojox/mvc/_atBindingMixin set "+B+" to: "+c(F,r))):y.Two=a(B,p,
F,r,u):k("mvc-bindings-log-api")&&g(m,p))}var y={},A=b(n),C=A&&A._relTargetProp||"target";v();if(A&&/^rel:/.test(m)||/^rel:/.test(n)&&q.isFunction(A.set)&&q.isFunction(A.watch))y.rel=A.watch(C,function(F,B,w){B!==w&&(k("mvc-bindings-log-api")&&console.log("Change in relative data binding target: "+A),v())});var E={};E.unwatch=E.remove=function(){for(var F in y)y[F]&&y[F].unwatch(),delete y[F]};return E}var c=k("mvc-bindings-log-api")?function(m,p){return[m._setIdAttr||!m.declaredClass?m:m.declaredClass,
p].join(":")}:"",g=k("mvc-bindings-log-api")?function(m,p){console.warn(p+" could not be resolved"+("string"==typeof m?" with "+m:"")+".")}:"",h={dataBindAttr:"data-mvc-bindings",_dbpostscript:function(m,p){p=this._refs=(m||{}).refs||{};for(var n in m)if("dojox.mvc.at"==(m[n]||{}).atsignature){var r=m[n];delete m[n];p[n]=r}r=new f;var u=this;r.toString=function(){return"[Mixin value of widget "+u.declaredClass+", "+(u.id||"NO ID")+"]"};r.canConvertToLoggable=!0;this._startAtWatchHandles(r);for(n in p)void 0!==
r[n]&&((m=m||{})[n]=r[n]);this._stopAtWatchHandles()},_startAtWatchHandles:function(m){this.canConvertToLoggable=!0;var p=this._refs;if(p){var n=this._atWatchHandles=this._atWatchHandles||{};this._excludes=null;for(var r in p)p[r]&&"*"!=r&&(n[r]=d(p[r].target,p[r].targetProp,m||this,r,{bindDirection:p[r].bindDirection,converter:p[r].converter,equals:p[r].equalsCallback}));"dojox.mvc.at"==(p["*"]||{}).atsignature&&(n["*"]=d(p["*"].target,p["*"].targetProp,m||this,"*",{bindDirection:p["*"].bindDirection,
converter:p["*"].converter,equals:p["*"].equalsCallback}))}},_stopAtWatchHandles:function(){for(var m in this._atWatchHandles)this._atWatchHandles[m].unwatch(),delete this._atWatchHandles[m]},_setAtWatchHandle:function(m,p){if("ref"==m)throw Error(this+": 1.7 ref syntax used in conjunction with 1.8 dojox/mvc/at syntax, which is not supported.");var n=this._atWatchHandles=this._atWatchHandles||{};n[m]&&(n[m].unwatch(),delete n[m]);this._excludes=this[m]=null;this._started?n[m]=d(p.target,p.targetProp,
this,m,{bindDirection:p.bindDirection,converter:p.converter,equals:p.equalsCallback}):this._refs[m]=p},_setBind:function(m){m=eval("({"+m+"})");for(var p in m){var n=m[p];"dojox.mvc.at"!=(n||{}).atsignature?console.warn(p+" in "+dataBindAttr+" is not a data binding handle."):this._setAtWatchHandle(p,n)}},_getExcludesAttr:function(){if(this._excludes)return this._excludes;var m=[],p;for(p in this._atWatchHandles)"*"!=p&&m.push(p);return m},_getPropertiesAttr:function(){if(this.constructor._attribs)return this.constructor._attribs;
var m=["onClick"].concat(this.constructor._setterAttrs);t.forEach(["id","excludes","properties","ref","binding"],function(p){p=t.indexOf(m,p);0<=p&&m.splice(p,1)});return this.constructor._attribs=m}};h[h.dataBindAttr]="";l=l("dojox/mvc/_atBindingMixin",null,h);l.mixin=h;return l})},"dojox/mvc/resolve":function(){define(["dojo/_base/lang","dijit/registry","dojo/Stateful"],function(t,q){return t.setObject("dojox.mvc.resolve",function(l,k){if("string"==typeof l){var f=l.match(/^(expr|rel|widget):(.*)$/)||
[];try{l="rel"==f[1]?t.getObject(f[2]||"",!1,k):"widget"==f[1]?q.byId(f[2]):t.getObject(f[2]||l,!1,k)}catch(e){}}return l})})},"esri/dijit/geoenrichment/Grid":function(){define(["../../declare","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dijit/layout/_LayoutWidget"],function(t,q,l,k,f){var e=t("esri.dijit.geoenrichment.Grid",[f],{_placeholder:null,layout:function(){var a=this.getChildren(),b=[],d;for(d=0;d<this.rows.length;d++)b.push(0);q.add(this.domNode,"Grid_Measure");var c=[];for(d=
0;d<a.length;d++){var g=a[d];var h=g.row;g=g.domNode;g.style.position="absolute";q.add(g,"GridCell_Measure");var m=g.scrollHeight;q.remove(g,"GridCell_Measure");g=m;c.push(g);g>b[h]&&(b[h]=g)}h=k.getContentBox(this.domNode).h;q.remove(this.domNode,"Grid_Measure");d=this.rows;for(g=c=0;g<b.length;g++)switch(d[g]){case e.AUTO:h-=b[g];break;case e.STRETCH:case e.STACK:c++}if(1<c)throw Error("Multiple rows with flexible heights are not supported");c=[0];for(g=0;g<b.length;g++){switch(d[g]){case e.AUTO:var p=
b[g];break;case e.STRETCH:p=h;break;case e.STACK:p=Math.min(h,b[g])}c.push(c[g]+p)}for(d=0;d<a.length;d++)g=a[d],h=g.row,b=c[h+1]-c[h],p=g.domNode.style,p.top=c[h]+"px",p.height=b+"px";this._placeholder||(this._placeholder=l.create("div",null,this.domNode));this._placeholder.style.height=c[c.length-1]+"px"}});e.AUTO="auto";e.STRETCH="stretch";e.STACK="stack";return e})},"esri/dijit/geoenrichment/ProgressHandler":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/when","dojo/dom-class",
"dojo/query"],function(t,q,l,k){return t(null,{progressNode:null,progressPromises:null,busyClass:null,errorClass:null,_allStates:null,constructor:function(f,e){e=e||{};this.busyClass=e.busyClass||"Wizard_Loading";this.errorClass=e.errorClass||"Wizard_Error";this._allStates=[this.busyClass,this.errorClass];var a=e.progressClass||"Wizard_Progress";f?(this.progressNode=f,l.add(this.progressNode,a)):e.queryNode&&(this.progressNode=k("."+a,e.queryNode)[0]);this.progressPromises={}},showProgress:function(f,
e){function a(){if(b.progressPromises[e]===f)return delete b.progressPromises[e],!0}e=e||"";f=q(f);if(f.isFulfilled())return this.progressPromises[e]&&(delete this.progressPromises[e],this._setState("done")),f;this.progressPromises[e]=f;var b=this;this._setState("busy");f.then(function(){a()&&b._setState("done")},function(d){a()&&("CancelError"==d.name?b._setState("done"):b._setState("error",d.toString()))});return f},cancelProgress:function(f){f=f||"";this.progressPromises[f]&&this.progressPromises[f].cancel()},
_setState:function(f,e){!this.progressNode||"done"==f&&Object.keys(this.progressPromises).length||(this.progressNode.innerHTML=e||"",l.remove(this.progressNode,this._allStates),"done"!=f&&l.add(this.progressNode,this[f+"Class"]))},destroy:function(){for(var f=Object.keys(this.progressPromises),e=0;e<f.length;e++)this.cancelProgress(f[e])}})})},"esri/dijit/geoenrichment/when":function(){define(["dojo/when"],function(t){return t})},"widgets/BusinessAnalyst/utils/GEUtil":function(){define("dojo/_base/array dojo/when esri/request ./GeocodeUtil esri/geometry/webMercatorUtils esri/dijit/geoenrichment/utils/FileUtil jimu/portalUtils".split(" "),
function(t,q,l,k,f,e,a){return{getAvailableCountries:function(){return a.getPortal(portalUrl).loadSelfInfo().then(function(b){return l({url:(b&&b.helperServices&&b.helperServices.geoenrichment&&b.helperServices.geoenrichment.url?b.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Countries",content:{appID:"webappbuilder",f:"json",langCode:"en-us"},handleAs:"json"})})},createRingOrDriveTimes:function(b){return a.getPortal(portalUrl).loadSelfInfo().then(function(d){return l({url:(d&&
d.helperServices&&d.helperServices.geoenrichment&&d.helperServices.geoenrichment.url?d.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Enrich",content:{appID:"webappbuilder",f:"json",langCode:"en-us",useData:JSON.stringify({sourceCountry:b.sourceCountry}),studyAreasOptions:JSON.stringify(b.studyAreasOptions),dataCollections:JSON.stringify(["GlobalIntersect"]),returnGeometry:!0,outSR:JSON.stringify({wkid:102100}),studyAreas:JSON.stringify([{geometry:b.geometry}]),
token:esri.id.credentials[0].token},handleAs:"json"})})},createReport:function(b){var d={appID:"webappbuilder",langCode:"en-us",report:"string"===typeof b.report?b.report:JSON.stringify(b.report),format:"pdf",f:"bin",token:esri.id.credentials[0].token,useData:JSON.stringify({sourceCountry:b.sourceCountry}),studyAreas:JSON.stringify(b.studyAreas),reportFields:JSON.stringify({locationname:b.locationName,latitude:b.lat,longitude:b.long,subtitle:"Prepared by Esri",areadesc2:b.areadesc2})};return a.getPortal(portalUrl).loadSelfInfo().then(function(c){return l({url:(c&&
c.helperServices&&c.helperServices.geoenrichment&&c.helperServices.geoenrichment.url?c.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/createReport",content:d,handleAs:"blob"}).then(function(g){return e.saveAs(g,b.reportDownloadName+".pdf")}).otherwise(function(g){alert("Error: "+g)})})},checkCapabilities:function(b){return a.getPortal(portalUrl).loadSelfInfo().then(function(d){var c=!1,g=!1,h=d&&d.user&&d.user.privileges,
m=d&&d.helperServices;d=m.geoenrichment&&m.geoenrichment.url;m=m.routingUtilities&&m.routingUtilities.url;var p=d?d:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";!window.isBuilder&&!b.mode&&b.appProxies&&0<b.appProxies.length&&t.some(b.appProxies,function(n){return p.toLowerCase()===n.sourceUrl.toLowerCase()})?g=c=!0:t.forEach(h,function(n){"premium:user:geoenrichment"===n?c=!0:"premium:user:networkanalysis"===n&&(g=!0)});return{hasPrivilege:c&&g,geServiceConfigured:!!d,
dirRoutingServiceConfigured:!!m}})},getCountryForPolygon:function(b,d,c){return a.getPortal(portalUrl).loadSelfInfo().then(function(g){return l({url:(g&&g.helperServices&&g.helperServices.geoenrichment&&g.helperServices.geoenrichment.url?g.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Enrich",content:{appID:"webappbuilder",f:"json",langCode:"en-us",dataCollections:JSON.stringify(["GlobalIntersect"]),outSR:JSON.stringify({wkid:102100}),
studyAreas:JSON.stringify([{geometry:b.toJson()}]),token:esri.id.credentials[0].token},handleAs:"json"}).then(function(h){if(h&&h.results&&1===h.results.length&&1===h.results[0].value.FeatureSet[0].features.length)return h.results[0].value.FeatureSet[0].features[0].attributes.sourceCountry;if(h&&h.results&&1===h.results.length&&1<h.results[0].value.FeatureSet[0].features.length){var m=b.getCentroid();m=f.xyToLngLat(m.x,m.y);var p=function(n){var r="";t.forEach(n,function(u){u.attributes.sourceCountry==
c&&(r=c)});if(r)return r;t.forEach(n,function(u){u.attributes.sourceCountry==d.defaultCountryID&&(r=defaultCountryID)});return r?r:n[0].attributes.sourceCountry};return q(k.reverseGeocode({x:m[0],y:m[1]})).then(function(n){return n&&n.address&&n.address.CountryCode?n.address.CountryCode:p(h.results[0].value.FeatureSet[0].features)}).otherwise(function(){return p(h.results[0].value.FeatureSet[0].features)})}return d.defaultCountryID})})},getGEProxyUrl:function(b){var d=!1;return a.getPortal(portalUrl).loadSelfInfo().then(function(c){geUrl=
c&&c.helperServices&&c.helperServices.geoenrichment&&c.helperServices.geoenrichment.url?c.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";!window.isBuilder&&!b.mode&&b.appProxies&&0<b.appProxies.length&&t.forEach(b.appProxies,function(g){geUrl.toLowerCase()===g.sourceUrl.toLowerCase()&&(d=g.proxyUrl)});return d})}}})},"widgets/BusinessAnalyst/utils/GeocodeUtil":function(){define(["esri/request","jimu/portalUtils"],function(t,q){return{reverseGeocode:function(l){return q.getPortal(portalUrl).loadSelfInfo().then(function(k){return t({url:(k&&
k.isPortal&&k.helperServices&&k.helperServices.geocode&&0<k.helperServices.geocode.length?k.helperServices.geocode[0].url:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer")+"/reverseGeocode",content:{appID:"webappbuilder",f:"json",langCode:"en-us",location:JSON.stringify({x:l.x,y:l.y}),distance:250},handleAs:"json"})})}}})},"esri/dijit/geoenrichment/utils/FileUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","./DataUtil","./ImageUtil"],
function(t,q,l,k){function f(){return new t.reject(Error("Saving not supported."))}var e=f,a=/[\\/:*?"<>|]/g,b={savingSupported:function(){return void 0!==window.Blob},saveTextFile:function(g,h,m,p){return b.savingSupported()?b.saveAs(new Blob([g],{type:m||"text/plain"}),h||"text.txt",p):f()},saveImageFile:function(g,h){if(b.savingSupported()){if("string"===typeof g){var m=k.base64DataFromDataURL(g);m=l.binaryStringToByteArray(atob(m)).buffer}else g instanceof ArrayBuffer&&(m=g);return b.saveAs(m?
l.arrayBuffersToBlob([m],"image/png"):g,h)}f()},_queue:[],_isSavePendingFlag:!1,_saveTimeoutH:null,saveAs:function(g,h,m){return m&&m.addDownloadIntervals?(m=new t,b._queue.push({blob:g,name:h||"download",dfd:m}),b._trySaveAsNext(),m.promise):e(g,b.validateName(h||"download"))},_trySaveAsNext:function(){if(b._queue.length&&!b._isSavePendingFlag){var g=b._queue.shift();b._isSavePendingFlag=!0;q(e(g.blob,b.validateName(g.name))).then(g.dfd.resolve,g.dfd.reject).always(function(){setTimeout(function(){b._isSavePendingFlag=
!1;b._trySaveAsNext()},100)})}},validateName:function(g){return String(g).trim().replace(a,"")}};if(!b.savingSupported())return b;if(window.navigator&&window.navigator.msSaveOrOpenBlob)return e=function(g,h){var m=new t;window.navigator.msSaveOrOpenBlob(g,h)?m.resolve():m.reject(Error("Failed to save or open downloaded file."));return m.promise},b;var d=window.URL||window.webkitURL;if("download"in window.document.createElement("a")){var c=function(g){if(void 0!==window.MouseEvent)var h=new MouseEvent("click",
{bubbles:!0,cancelable:!1});else h=document.createEvent("MouseEvent"),h.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null);g.dispatchEvent(h)};e=function(g,h){var m=new t,p=d.createObjectURL(g),n=window.document.createElement("a");n.href=p;n.download=h;c(n);setTimeout(function(){d.revokeObjectURL(p);n=null;m.resolve();m=null},1E3);return m.promise};return b}e=function(g,h){var m=new t;g=new File([g],h,{type:g.type});var p=d.createObjectURL(g);window.open(p,"_blank");setTimeout(function(){d.revokeObjectURL(p);
m.resolve()},1E3);return m.promise};return b})},"esri/dijit/geoenrichment/utils/DataUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(t,q){function l(a){return"string"==typeof a?{source:a,getLength:function(){return this.source.length},getByte:function(b){return this.source.charCodeAt(b)&255}}:window.ArrayBuffer&&a instanceof ArrayBuffer?{source:new Uint8Array(a),getLength:function(){return this.source.byteLength},getByte:function(b){return this.source[b]}}:
a}function k(a){for(var b=a.length,d=new Uint8Array(a.length),c=0;c<b;c++)d[c]=a.charCodeAt(c);return d}function f(a,b){a=new Uint8Array(a);b=Math.min(b,a.byteLength);for(var d="",c=0;c<b;c++)d+=String.fromCharCode(a[c]);return d}var e={arrayBufferFromBlob:function(a){var b=new t,d=new FileReader;d.onloadend=function(){d.error?b.reject(d.error):b.resolve(d.result)};d.readAsArrayBuffer(a);return b.promise},arrayBuffersToBlob:function(a,b){return new Blob(a,{type:b||"application/octet-stream"})},binaryStringFromByteSource:function(a){if("string"==
typeof a)return a;a=l(a);var b=a.getLength(),d=b%4;b-=d;for(var c="",g=0,h,m,p,n;g<b;)h=a.getByte(g++),m=a.getByte(g++),p=a.getByte(g++),n=a.getByte(g++),c+=String.fromCharCode(h,m,p,n);1==d?c+=String.fromCharCode(a.getByte(g)):2==d?c+=String.fromCharCode(a.getByte(g),a.getByte(g+1)):3==d&&(c+=String.fromCharCode(a.getByte(g),a.getByte(g+1),a.getByte(g+2)));return c},base64FromByteSource:function(a){a=l(a);var b=a.getLength(),d=b%3;b-=d;for(var c,g,h,m,p="",n=0;n<b;n+=3)m=a.getByte(n)<<16|a.getByte(n+
1)<<8|a.getByte(n+2),c=m>>18&63,g=m>>12&63,h=m>>6&63,m&=63,p+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m];1==d?(m=a.getByte(n),p+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m>>2&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m<<
4&63]+"\x3d\x3d"):2==d&&(m=a.getByte(n)<<8|a.getByte(n+1),p+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m>>10&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m>>4&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[m<<2&63]+"\x3d");return p},base64FromJson:function(a){return btoa(unescape(encodeURIComponent("string"===typeof a?a:JSON.stringify(a))))}};e.binaryStringToByteArray=k;e.base64ToByteArray=function(a){return k(atob(a))};e.getFirstBytes=
function(a,b){if("string"==typeof a)var d=a.substr(0,b);else if(window.ArrayBuffer&&a instanceof ArrayBuffer)d=f(a,b);else if(window.Blob&&a instanceof Blob){d=new t;var c=new FileReader;c.onloadend=function(){c.error?d.resolve(""):d.resolve(f(c.result,b))};c.readAsArrayBuffer(a.slice(0,b))}return q(d||"")};e.isBase64=function(a){return a&&0==a.length%4&&/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/]+$/.test(a.replace(/={0,2}$/,""))};e.base64ToJson=function(a){return JSON.parse(decodeURIComponent(escape(atob(a))))};
e.getContentType=function(a){a=e.getFileExtension(a);if(null===a)return null;switch(a){case "png":return"image/png";case "jpg":case "jpeg":return"image/jpeg";case "gif":return"image/gif";case "svg":return"image/svg+xml";case "json":return"application/json";case "txt":return"text/plain";case "xml":return"text/xml";default:return null}};e.getFileExtension=function(a){var b=a.lastIndexOf(".")+1;return b?a.substr(b).toLowerCase():null};return e})},"esri/dijit/geoenrichment/utils/ImageUtil":function(){define(["esri/dijit/geoenrichment/Deferred",
"esri/dijit/geoenrichment/when","./UrlUtil"],function(t,q,l){var k={base64DataToDataURL:function(f,e){if(/^data:image/.test(f))return f;e||(e=atob(f.substr(0,16)),e=k.getImageContentType(e));return"data:"+(e||"image/png")+";base64,"+f},getImageContentType:function(f){if("\u00ff\u00d8\u00ff"===f.substr(0,3)&&"JFIF"===f.substr(6,4))return"image/jpeg";if("\u0089PNG\r\n\u001a\n"===f.substr(0,8))return"image/png";if("GIF89a"===f.substr(0,6)||"GIF87a"===f.substr(0,6))return"image/gif"},base64DataFromDataURL:function(f){0==
f.indexOf("data:")&&(f=f.substr(f.indexOf(",")+1));return f},getBase64DataIndex:function(f){f=0==f.indexOf("data:")?f.indexOf(";base64,"):-1;return 0<f?f+8:0},getContentType:function(f){var e=k.getBase64DataIndex(f);return e?f.substring(5,e-8):null},checkBase64FileSize:function(f,e){return k.getBase64FileSize(f)<=e},getBase64FileSize:function(f){return.75*f.length},imageToDataURL:function(f,e){e=e||{};var a=document.createElement("canvas"),b=a.getContext("2d");a.width=e.width||f.width;a.height=e.height||
f.height;var d=e.opacity;null!=d&&!isNaN(d)&&0<=d&&1>d&&(b.globalAlpha=+d,e.format="image/png");(d=e.pos)?b.drawImage(f,d.x||0,d.y||0):b.drawImage(f,0,0,a.width,a.height);return a.toDataURL(e.format)},imageFromUrl:function(f,e){var a=new t,b=new Image;0!==f.indexOf("data:")&&e&&e.crossOrigin&&b.setAttribute("crossOrigin",e.crossOrigin);b.onload=function(){if(b.width&&b.height)a.resolve(b);else{var d=Error("Error of reading an image from URL.");e&&e.ignoreError?a.resolve(null):a.reject(d)}b.onload=
b.onerror=null};b.onerror=function(d){e&&e.ignoreError?a.resolve(null):a.reject(d);b.onload=b.onerror=null};f=require.toUrl(f);/^http:/i.test(f)&&/^https/i.test(window.location.protocol)&&(f=l.toHttpsUrl(f));b.src=f;return a.promise},scaleImage:function(f,e){if("string"===typeof f){var a=k.base64DataToDataURL(f),b=k.getContentType(a);a=k.imageFromUrl(a)}return q(a||f).then(function(d){var c=1,g=d.width,h=d.height;if(e.factor)c=e.factor;else if(e.maxDim)c=e.maxDim/Math.max(g,h);else if(e.imageDim){var m=
e.imageDim.w,p=e.imageDim.h;e.imageDim.preserveRatio?(c=Math.min(m/g,p/h),e.imageDim.reduceOnly&&1<c&&(c=1)):e.imageDim.reduceOnly?(g=Math.min(g,m),h=Math.min(h,p)):(g=m,h=p)}return k.imageToDataURL(d,{width:g*c,height:h*c,format:e.format||b,opacity:e.opacity})})},getImageViewType:function(f,e){return 1E3<=e?(f/=e,.025>=Math.abs(f-2)?"360":2<f?"pano":null):null}};return k})},"esri/dijit/geoenrichment/utils/UrlUtil":function(){define(["dojo/_base/url","esri/config","esri/kernel","esri/urlUtils","esri/arcgis/utils"],
function(t,q,l,k,f){var e={getDomain:function(b){if("string"!==typeof b)return null;b=b.replace(/^(http:\/\/|https:\/\/)/i,"");var d=b.indexOf("/");return 0>d?b:b.substr(0,d)},getPortalUrl:function(b){if("string"!==typeof b)return null;b=b.replace(/\?.*$/,"");var d=b.match(/^(.+)\/sharing(\/|$)/i);return d||(d=b.match(/^(.+)\/home$/i))?d[1]:(d=b.match(/^(.+)\/portal(\/|$)/i))?d[1]+"/portal":b},getProxyUrl:function(b){var d=q.defaults.io.proxyUrl;d&&!/^http/i.test(d)&&(d=k.getAbsoluteUrl(d));d&&b&&
(d=e.toHttpsUrl(d));return d},registerCORS:function(b){(b=e.getDomain(b))&&-1==q.defaults.io.corsEnabledServers.indexOf(b)&&q.defaults.io.corsEnabledServers.push(b);e._fixCORS()},_fixCORS:function(){q.defaults.io.corsEnabledServers=q.defaults.io.corsEnabledServers.filter(function(b){return b.indexOf&&0===b.indexOf("null://")?(console.log("WARNING: incorrect CORS URL detected: "+b),!1):!0})},indexOfQuery:function(b){var d=b.indexOf("?");0<=d&&(b=b.substr(d+1),/^(http:\/\/|https:\/\/)/i.test(b)&&(b=
b.indexOf("?"),d=0<=b?d+1+b:-1));return d},removeQuery:function(b){var d=e.indexOfQuery(b);return 0>d?b:b.substr(0,d)},addQueryPart:function(b,d){var c=0>e.indexOfQuery(b)?"?":"\x26";return b+c+d},getVariableValue:function(b,d){if(b&&"string"===typeof d){var c=k.urlToObject(b);if(c.query){var g={};Object.keys(c.query).forEach(function(h){g[h.toLowerCase()]=c.query[h]});return g[d.toLowerCase()]}}},addUrlVariable:function(b,d,c){d=encodeURIComponent(d);c=encodeURIComponent(c);return e.addQueryPart(b,
d+"\x3d"+c)},securePortsMap:{80:"443",8080:"8443"},toHttpUrl:function(b){return!b||/^http/i.test(b)?b:"http://"+b},toHttpsUrl:function(b){b&&(b=e.toHttpUrl(b));if(!b||!/^http:\/\//i.test(b))return b;var d=new t(b);b=b.replace(/^http/i,"https");var c=e.securePortsMap[d.port];c&&(b=b.replace(":"+d.port,":"+c));return b},combine:function(b,d){"number"===typeof d&&(d+="");if(d){if(/^(http:\/\/|https:\/\/)/i.test(d)||!b)return d;"/"!=d.charAt(0)&&(d="/"+d);if(1==d.length)return b;var c=b.length-1;"/"==
b.charAt(c)&&(b=b.substr(0,c));var g=k.urlToObject(b);b=e.removeQuery(b);c=b.length-d.length;0<=c&&b.substr(c).toLowerCase()==d.toLowerCase()&&(b=b.substr(0,c));b+=d;for(var h in g.query)e.addQueryPart(b,g.query[h])}return b},combineMulti:function(b){for(var d=b[0],c=1;c<b.length;c++)d=e.combine(d,b[c]);return d},openUrl:function(b,d){if(d)return window.open(b,"_blank");d=window.open();d.opener=null;d.referrer=null;d.location=b;return d},isPageRunOnWebService:function(){return/^http/i.test(window.location.protocol)},
getToken:function(b){return(b=b&&l.id.findCredential(b)||l.id.credentials[0])&&b.token}},a;e.getArcgisUrl=function(){return a};e.setArcgisUrl=function(b){b&&(a=b,f.arcgisUrl=e.combine(b,"/sharing/rest/content/items"))};return e})},"widgets/BusinessAnalyst/utils/TravelModeUtil":function(){define(["esri/request","jimu/portalUtils","dojo/_base/array","dojo/Deferred","dojo/when"],function(t,q,l,k,f){var e=null;return{getTravelMode:function(a,b){return f(this._getTravelModes(),function(d){var c="";l.forEach(d.results,
function(g){"supportedTravelModes"===g.paramName&&l.forEach(g.value.features,function(h){h.attributes&&h.attributes.Name===a&&(c=h.attributes.TravelMode)})});if(!c)return c;b=Number(b);if(!b||10>=b)return c;d=JSON.parse(c);d.simplificationTolerance=b;return JSON.stringify(d)})},_getTravelModes:function(){e||(e=new k,q.getPortal(portalUrl).loadSelfInfo().then(function(a){t({url:a.helperServices.routingUtilities.url+"/GetTravelModes/execute",content:{appID:"webappbuilder",f:"json",langCode:"en-us"},
handleAs:"json"}).then(function(b){e.resolve(b)})}));return e}}})},"widgets/BusinessAnalyst/utils/ValidationUtil":function(){define(["dojo/dom-class"],function(t){return{MIN_RINGS_VALUE:0,MAX_RINGS_VALUE:1E3,MIN_DTWT_VALUE:0,MAX_DTWT_VALUE:300,validateInvalidValues:function(q,l,k,f,e){var a=q.get("value"),b=l.get("value"),d=k.get("value"),c=!0;0<a.length&&null===this._tryParseFloat(a)?(c=!1,t.remove(f,"hidden"),f.innerHTML=e,t.add(q.domNode,"invalidValue")):t.remove(q.domNode,"invalidValue");0<b.length&&
null===this._tryParseFloat(b)?(c=!1,t.remove(f,"hidden"),f.innerHTML=e,t.add(l.domNode,"invalidValue")):t.remove(l.domNode,"invalidValue");0<d.length&&null===this._tryParseFloat(d)?(c=!1,t.remove(f,"hidden"),f.innerHTML=e,t.add(k.domNode,"invalidValue")):t.remove(k.domNode,"invalidValue");c&&t.add(f,"hidden");return c},validateMinMaxValues:function(q,l,k,f,e,a,b){var d=q.get("value"),c=l.get("value"),g=k.get("value"),h=!0;0<d.length?(d=parseFloat(d),d<f||d>e?(h=!1,t.remove(a,"hidden"),a.innerHTML=
b,t.add(q.domNode,"invalidValue")):t.remove(q.domNode,"invalidValue")):t.remove(q.domNode,"invalidValue");0<c.length?(d=parseFloat(c),d<f||d>e?(h=!1,t.remove(a,"hidden"),a.innerHTML=b,t.add(l.domNode,"invalidValue")):t.remove(l.domNode,"invalidValue")):t.remove(l.domNode,"invalidValue");0<g.length?(d=parseFloat(g),d<f||d>e?(h=!1,t.remove(a,"hidden"),a.innerHTML=b,t.add(k.domNode,"invalidValue")):t.remove(k.domNode,"invalidValue")):t.remove(k.domNode,"invalidValue");h&&t.add(a,"hidden");return h},
_tryParseFloat:function(q){var l=null;null!==q&&0<q.length&&(isNaN(q)||(l=parseFloat(q)));return l}}})},"widgets/BusinessAnalyst/utils/SiteUtil":function(){define(["esri/units","dojo/_base/array"],function(t,q){var l={testTimeUnits:function(f){return"Hours"===f||"Seconds"===f||"Minutes"===f}},k={};k[t.FEET]=.3048;k[t.YARDS]=.9144;k[t.METERS]=1;k[t.KILOMETERS]=1E3;k[t.MILES]=1609.3472186944373;k[t.NAUTICAL_MILES]=1852;k.Hours=6E4;k.Seconds=16.66666666666667;k.Minutes=1E3;k[t.SQUARE_FEET]=k[t.FEET]*
k[t.FEET];k[t.SQUARE_YARDS]=k[t.YARDS]*k[t.YARDS];k[t.SQUARE_METERS]=1;k[t.SQUARE_KILOMETERS]=k[t.KILOMETERS]*k[t.KILOMETERS];k[t.SQUARE_MILES]=k[t.MILES]*k[t.MILES];k[t.ACRES]=4046.8564224;k[t.HECTARES]=1E4;l.convertUnits=function(f,e,a){return f*(k[e]||0)/(a&&k[a]||1)};l.getMaxRadiusInKilometers=function(f,e){var a=0;f&&f.bufferRadii&&(q.forEach(f.bufferRadii,function(b){b>a&&(a=b)}),a=l.convertUnits(a,f.bufferUnits||t.MILES,t.KILOMETERS),e&&l.testTimeUnits(f.bufferUnits)&&(a/=12));return a};return l})},
"widgets/BusinessAnalyst/ErrorPage":function(){define(["dojo/_base/declare","dijit/_TemplatedMixin","dijit/_WidgetBase","esri/dijit/geoenrichment/_WizardPage","dojo/text!./ErrorPage.html"],function(t,q,l,k,f){return t([l,q,k],{templateString:f,postCreate:function(){this.inherited(arguments);var e=this.displayErrors;e.gePrivilege?this.noPermissionsErrorDiv.innerHTML=this.nls.noPermissions:this.noPermissionsErrorDiv.parentNode.removeChild(this.noPermissionsErrorDiv);e.geServiceNotConfigured||e.dirRoutingServiceNotConfigured?
this.servicesErrorDiv.innerHTML=e.geServiceNotConfigured?e.dirRoutingServiceNotConfigured?this.nls.geAndDirRoutingServicesNotConfigured:this.nls.geServiceNotConfigured:this.nls.dirRoutingServiceNotConfigured:this.servicesErrorDiv.parentNode.removeChild(this.servicesErrorDiv)},startup:function(){this.inherited(arguments)}})})},"widgets/BusinessAnalyst/RunReportsPage":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style dojo/query dojo/when dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin esri/geometry/webMercatorUtils esri/dijit/geoenrichment/SelectableTree esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GEUtil esri/dijit/geoenrichment/ReportPlayer/ReportPlayer esri/dijit/geoenrichment/ReportPlayer/PlayerResizeModes esri/dijit/geoenrichment/ReportPlayer/PlayerThemes esri/dijit/geoenrichment/ReportPlayer/DataProviderGE esri/dijit/geoenrichment/ReportPlayer/PlayerCommands esri/dijit/geoenrichment/_WizardPage esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ReportTemplateTypes ./utils/GEUtil ./utils/ReportUtil ./esriAnalystX/widgets/Selects/FilteringSelectTree dojo/text!./RunReportsPage.html jimu/dijit/TabContainer3 jimu/utils".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p,n,r,u,v,y,A,C,E,F,B,w,z,H){return q([c,d,A,g],{templateString:w,infographicsTabHidden:!1,reportsTabHidden:!1,_infograpicReports:null,_configForLightTheme:[{name:"DashboardTheme",style:"light"}],postCreate:function(){this.inherited(arguments);this.tab=new z({tabs:[{title:this.nls.infographics,content:this.infographicsContentPane},{title:this.nls.reports,content:this.reportsContentPane}],selected:this.nls.infographics});this.tab.placeAt(this.runReportTabContainer);
this.tab.startup()},startup:function(){this.inherited(arguments)},loadReportsInfographicsForCountry:function(G){var I=this;b(F.getAvailableClassicReports(G,this.config),function(L){var N=I._getSingleReportID(L),O=I._getCountryConfig(I.config,G);O&&O.defaultReportID&&(N=O.defaultReportID);I.filteredReportDropDown?I.filteredReportDropDown.set("tree",new m(L)):(I.filteredReportDropDown=new B({name:"filteredReportSelect",tree:new m(L),defaultExpand:N?I._getDefaultExpandedTreeForSelectedReport(L,N):I._getDefaultExpandedTree(L),
placeHolder:I.nls.selectReport,onChange:function(R){I._enableDisableButton(I.runReportBtn,R)}},I.reportFilteringSelectDropDownContainer),I.filteredReportDropDown.startup());N&&I.filteredReportDropDown.set("value",N);I.reportsTabHidden=I.config.reportsDisabled||!I._areReportsAvailable(L)});b(F.getAvailableInfographicReports(G,this.config),function(L){var N=I._getSingleReportID(L),O=I._getCountryConfig(I.config,G);O&&O.defaultInfographicID&&(N=O.defaultInfographicID);I.infographicDropDown?I.infographicDropDown.set("tree",
new m(L)):(I.infographicDropDown=new B({name:"filteredInfographicReportSelect",tree:new m(L),defaultExpand:N?I._getDefaultExpandedTreeForSelectedReport(L,N):I._getDefaultExpandedTree(L),placeHolder:I.nls.selectTemplate,onChange:function(R){I._enableDisableButton(I.runInfographicBtn,R)}},I.infographicDropDownContainer),I.infographicDropDown.startup());N&&I.infographicDropDown.set("value",N);I.infographicsTabHidden=I.config.infographicsDisabled||!I._areReportsAvailable(L);I._infograpicReports=L})},
_getCountryConfig:function(G,I){var L=-1;t.forEach(G.countryConfig,function(N,O){N.countryID==I&&(L=O)});return-1!=L?G.countryConfig[L]:null},_areReportsAvailable:function(G){if(0==G.length)return!1;var I=!1;t.forEach(G,function(L){0<L.children.length&&(I=!0)});return I},_getDefaultExpandedTree:function(G){if(0==G.length)return{esriReports:!0};var I={};I[G[0].value]=!0;return I},_getDefaultExpandedTreeForSelectedReport:function(G,I){if(0==G.length)return{esriReports:!0};returnVal={};t.forEach(G,function(L){t.forEach(L.children,
function(N){N.value===I&&(returnVal[L.value]=!0)})});return returnVal},_getSingleReportID:function(G){if(1!=G.length)return!1;var I=!1;t.forEach(G,function(L){1===L.children.length&&(I=L.children[0].value)});return I},refresh:function(){this._hideOrShowTabs()},_hideOrShowTabs:function(){this._hideOrShowTab(this.nls.infographics,this.infographicsTabHidden);this._hideOrShowTab(this.nls.reports,this.reportsTabHidden);this.infographicsTabHidden?this.tab.selectTab(this.nls.reports):this.tab.selectTab(this.nls.infographics)},
_hideOrShowTab:function(G,I){var L=a("td",this.tab.tabTr),N;t.some(L,function(O){if(O.label===G)return N=O,!0})&&e.set(N,"display",I?"none":"")},runInfographic:function(){if(!k.contains(this.runInfographicBtn,"jimu-state-disabled")){var G=this,I=this.infographicDropDown.get("value");this.reportPlayer&&this.reportPlayer.destroy();this.playerDiv&&f.destroy(this.playerDiv);this.playerDiv=f.create("div",null,document.body);var L=new v;this.config.exportInfographicsPrintOption&&L.registerCommand(y.PRINT);
this.config.exportInfographicsPDFOption&&L.registerCommand(y.PDF);this.config.exportInfographicsImageOption&&L.registerCommand(y.IMAGE);this.config.exportInfographicsDynamicHTMLOption&&L.registerCommand(y.DYNAMIC_HTML);var N=H.isMobileUa();this.reportPlayer=(new n({isSlidesView:N?!0:!1,theme:this._useLightTheme()?u.LIGHT:u.DARK,dataProvider:L,resizeMode:r.FIT_WINDOW,showCloseButton:!0,config:{esriDijitCssUrl:"https://js.arcgis.com/3.36/dijit/themes/claro/claro.css",esriCssUrl:"https://js.arcgis.com/3.36/esri/css/esri.css",
playerSourceRootUrl:"https://js.arcgis.com/3.36/"},onClose:function(){G.reportPlayer.destroy();f.destroy(G.playerDiv)}})).placeAt(this.playerDiv);var O=!0;L=new B({name:"filteredInfographicReportSelect",tree:new m(this._infograpicReports),defaultExpand:G._getDefaultExpandedTreeForSelectedReport(this._infograpicReports,I),placeHolder:G.nls.selectTemplate,value:I,onChange:function(S){O?O=!1:(G.infographicDropDown.set("value",S),R(S))}});this._useLightTheme()||k.add(this.reportPlayer.playerToolbar.domNode,
"jimu-main-background");L.startup();L.set("value",I);this.reportPlayer.playerToolbar.addInfographicsSelect(L);var R=function(S){var U=[];if(G.wizard.selectedPoint.long)t.forEach(G.wizard.selectedPoint.tradeAreas,function(da,X){var ea={};ea.name=da.name;ea.shortName=da.shortName;ea.feature=da.graphic;"undefined"===typeof ea.feature.attributes&&(ea.feature.attributes="undefined"!==typeof G.wizard.selectedPoint.attributes?G.wizard.selectedPoint.attributes:{});ea.feature.attributes.STORE_LONG=G.wizard.selectedPoint.long;
ea.feature.attributes.STORE_LAT=G.wizard.selectedPoint.lat;ea.feature.attributes.radiusIndex=X;U.push(ea)});else if(G.wizard.selectedPolygon.geometry){U=[];var Z={};G.isPolygonFIPS(G.wizard.selectedPolygon)?Z=G.GetFIPSAnalysisArea(G.wizard.selectedPolygon):(Z.name=G.wizard.selectedPolygon.locationName,Z.shortName=G.wizard.selectedPolygon.locationName,Z.feature=G.wizard.selectedPolygon.feature);U.push(Z)}G.reportPlayer.playReport({portalUrl:portalUrl,countryID:G.wizard.selectedCountryID,reportID:S,
analysisAreas:U})};b(E.getGEProxyUrl(this.appConfig),function(S){S&&(p.setGeoenrichmentUrl(S),p.getClient());R(I)})}},isPolygonFIPS:function(G){return G&&G.feature&&G.feature.attributes&&G.feature.attributes.FIPS||G&&G.feature&&G.feature.attributes&&G.feature.attributes.STATE_FIPS?!0:!1},GetFIPSAnalysisArea:function(G){var I={geographies:[]},L={sourceCountry:"US"},N="";if(G.feature.attributes.FIPS)switch(G.feature.attributes.FIPS.length){case 2:N="US.States";break;case 5:N="US.Counties";break;case 11:N=
"US.Tracts"}else G.feature.attributes.STATE_FIPS&&(N="US.States");L.levelId=N;L.id=G.feature.attributes.FIPS?G.feature.attributes.FIPS.toString():G.feature.attributes.STATE_FIPS.toString();L.attributes=G.feature.attributes;G=G.geometry.getCentroid();G=h.xyToLngLat(G.x,G.y);L.attributes.STORE_ID="0";L.attributes.STORE_LONG=G[0].toString();L.attributes.STORE_LAT=G[1].toString();I.geographies.push(L);return I},GetFIPSStudyArea:function(G){var I={sourceCountry:"US"},L="";if(G.feature.attributes.FIPS)switch(G.feature.attributes.FIPS.length){case 2:L=
"US.States";break;case 5:L="US.Counties";break;case 11:L="US.Tracts"}else G.feature.attributes.STATE_FIPS&&(L="US.States");I.layer=L;I.ids=[G.feature.attributes.FIPS?G.feature.attributes.FIPS.toString():G.feature.attributes.STATE_FIPS.toString()];I.attributes=G.feature.attributes;return I},_useLightTheme:function(){var G=!1,I=self.getAppConfig();t.forEach(this._configForLightTheme,function(L){I&&I.theme&&I.theme.name==L.name&&I.theme.styles&&0<I.theme.styles.length&&t.forEach(I.theme.styles,function(N){N==
L.style&&(G=!0)})});I&&I.theme&&I.theme.customStyles&&I.theme.customStyles.mainBackgroundColor&&"#FFFFFF"==I.theme.customStyles.mainBackgroundColor.toUpperCase()&&(G=!0);return G},runReport:function(){if(!k.contains(this.runReportBtn,"jimu-state-disabled")){k.add(this.runReportBtn,"jimu-state-disabled");this.shelter.show();var G=this;this.wizard.selectedPoint.long?this.runReportForPoint().then(function(){G.shelter.hide();k.remove(G.runReportBtn,"jimu-state-disabled")}).otherwise(function(){G.shelter.hide();
k.remove(G.runReportBtn,"jimu-state-disabled")}):this.wizard.selectedPolygon.geometry&&this.runReportForPolygon().then(function(){G.shelter.hide();k.remove(G.runReportBtn,"jimu-state-disabled")}).otherwise(function(){G.shelter.hide();k.remove(G.runReportBtn,"jimu-state-disabled")})}},_enableDisableButton:function(G,I){"string"===typeof I&&"None"!==I?k.remove(G,"jimu-state-disabled"):k.add(G,"jimu-state-disabled")},runReportForPoint:function(){var G=this,I={studyAreas:[]},L={featureSet:{fields:[{name:"OBJECTID",
alias:"Object ID",type:"esriFieldTypeOID"},{name:"STORE_ID",alias:"STORE_ID",type:"esriFieldTypeString",length:1,nullable:!0},{name:"STORE_LONG",alias:"STORE_LONG",type:"esriFieldTypeDouble"},{name:"STORE_LAT",alias:"STORE_LAT",type:"esriFieldTypeDouble"},{name:"AREA_DESC",alias:"AREA_DESC",type:"esriFieldTypeString",length:7,nullable:!0},{name:"AREA_DESC2",alias:"AREA_DESC2",type:"esriFieldTypeString",length:19,nullable:!0}],spatialReference:this.map.spatialReference.toJson(),geometryType:"esriGeometryPolygon",
features:[]}};t.forEach(this.wizard.selectedPoint.tradeAreas,function(N){var O={};O.geometry=N.graphic.geometry;N.graphic.attributes?O.attributes=N.graphic.attributes:G.wizard.selectedPoint.attributes&&(O.attributes=l.clone(G.wizard.selectedPoint.attributes));O.attributes||(O.attributes={});O.attributes.OBJECTID=1;O.attributes.STORE_ID="1";O.attributes.STORE_LONG=G.wizard.selectedPoint.long;O.attributes.STORE_LAT=G.wizard.selectedPoint.lat;O.attributes.AREA_DESC=N.AREA_DESC;O.attributes.AREA_DESC2=
N.AREA_DESC2;L.featureSet.features.push(O)});I.studyAreas.push(L);this.filteredReportDropDown.getSelectedItem().reportType!=C.STANDARD&&(I.areadesc2=this.wizard.selectedPoint.areadesc2);I.locationName=this.wizard.selectedPoint.locationName;I.lat=this.wizard.selectedPoint.lat;I.long=this.wizard.selectedPoint.long;I.sourceCountry=this.wizard.selectedCountryID;I.report=this.filteredReportDropDown.getSelectedItem().item?this.filteredReportDropDown.getSelectedItem().item:this.filteredReportDropDown.getSelectedItem().value;
I.reportDownloadName=this.filteredReportDropDown.getSelectedItem().label;return E.createReport(I)},runReportForPolygon:function(){var G={studyAreas:[]},I={};I=this.isPolygonFIPS(this.wizard.selectedPolygon)?this.GetFIPSStudyArea(this.wizard.selectedPolygon):{geometry:this.wizard.selectedPolygon.geometry.toJson()};this.wizard.selectedPolygon.feature&&this.wizard.selectedPolygon.feature.attributes&&(I.attributes=this.wizard.selectedPolygon.feature.attributes);G.studyAreas.push(I);G.locationName=this.wizard.selectedPolygon.locationName;
G.sourceCountry=this.wizard.selectedCountryID;G.report=this.filteredReportDropDown.getSelectedItem().item?this.filteredReportDropDown.getSelectedItem().item:this.filteredReportDropDown.getSelectedItem().value;G.reportDownloadName=this.filteredReportDropDown.getSelectedItem().label;return E.createReport(G)},backOnClick:function(){this.onBack()}})})},"esri/dijit/geoenrichment/SelectableTree":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented ./when dojo/store/util/QueryResults dojo/store/util/SimpleQueryEngine dstore/QueryResults".split(" "),
function(t,q,l,k,f,e,a,b){var d=function(c,g){this.storage=c;this.data=g};d.prototype={storage:null,data:null,filter:function(c){return this.storage._filter(this.data,c)},sort:function(c,g){return this.storage._sort(this.data,c,g)},fetch:function(){return this.storage._fetchRange(this.data)},fetchRange:function(c){return this.storage._fetchRange(this.data,c)},mayHaveChildren:function(c){return this.storage.mayHaveChildren(c)},getChildren:function(c){return this.storage.getChildren(c,{returnCollection:!0})}};
return t(k,{idProperty:"id",bindingProperty:null,autoIdentify:!0,queryEngine:a,isDstoreTree:!1,root:null,data:null,_hash:null,_autoId:null,storage:null,constructor:function(c,g){q.mixin(this,g);this.storage=this;this.root={children:c||[]};q.mixin(this._provideBinding(this.root),{deepness:-1,selectCount:0,leafCount:0});this._hash={};this.idProperty&&this.autoIdentify&&(this._autoId=1);this._initializeNode(this.root,0);this.data=this.root.children},_provideBinding:function(c){var g=this._getBinding(c);
g||(c[this.bindingProperty]=g={});return g},_getBinding:function(c){return this.bindingProperty?c[this.bindingProperty]:c},_initializeNode:function(c,g){var h=this._provideBinding(c);h.selected=!!h.selected;c.children?(h.selectCount=0,h.leafCount=0,l.forEach(c.children,function(m){this._registerNode(m);var p=this._provideBinding(m);p.parent=c;p.deepness=g;this._initializeNode(m,g+1);h.selectCount+=p.selectCount;h.leafCount+=p.leafCount},this),h.selectCount)?h.selectCount===h.leafCount&&(h.selected=
!0):h.selected=!1:("number"!==typeof h.leafCount&&(h.leafCount=1),h.selectCount=h.selected?h.leafCount:0)},isOwned:function(c,g){return g||c!==this.root?this.get(this.getIdentity(c))===c:!0},_registerNode:function(c){this._autoId&&void 0===c[this.idProperty]&&(c[this.idProperty]=this._autoId++);this.idProperty&&(this._hash[c[this.idProperty]]=c)},_unregisterNode:function(c){this.isOwned(c,!0)&&delete this._hash[c[this.idProperty]]},clear:function(){this.root.children.length&&(l.forEach(this.root.children,
function(c){this._unbindNode(c)},this),this.data=this.root.children=[])},destroy:function(){this.clear()},_unbindNode:function(c){c.children&&l.forEach(c.children,function(h){delete this._getBinding(h).parent;this._unbindNode(h)},this);this._unregisterNode(c);var g=this._getBinding(c);g.parent&&(this._incrementCounts(g.parent,-g.selectCount,-g.leafCount),delete g.parent);g!==c&&delete c[this.bindingProperty]},removeNodes:function(c,g){l.forEach(c&&c.slice(),function(h){if(this.isOwned(h,!0)){var m=
this._getBinding(h).parent,p=l.indexOf(m.children,h);0<=p&&m.children.splice(p,1);this._unbindNode(h)}},this);!g&&this.emit("updated")},addNodes:function(c,g,h){if(!g)g=this.root;else if(!this.isOwned(g)||!g.children)return!1;var m=this._getBinding(g).deepness+1,p=0,n=0;l.forEach(c,function(r){if(!this.isOwned(r)){g.children.push(r);this._registerNode(r);var u=this._provideBinding(r);u.parent=g;u.deepness=m;this._initializeNode(r,m+1);p+=u.selectCount;n+=u.leafCount}},this);this._incrementCounts(g,
p,n);!h&&this.emit("updated");return!0},select:function(c,g){return this.changeSelect(c,!0,g)},deselect:function(c){this.changeSelect(c,!1)},changeSelect:function(c,g,h){h=h||this.root.leafCount;var m=c&&this._getBinding(c);if(m){g=!!g;var p=(g?m.leafCount:0)-m.selectCount,n=0>p||this.root.selectCount+p<=h;if(!c.children)return n&&(m.selected=g,p&&this._incrementCounts(c,p)),n;n&&(m.selected=g);l.forEach(c.children,function(r){this.changeSelect(r,g,h)},this);return n}},_incrementCounts:function(c,
g,h){c=this._getBinding(c);c.selectCount+=g;h&&(c.leafCount+=h);c.selectCount?c.selectCount==c.leafCount&&(c.selected=!0):c.selected=!1;c.parent&&this._incrementCounts(c.parent,g,h)},getSelectionState:function(c){if(!this.isOwned(c))return!1;c=this._getBinding(c);return c.selectCount&&c.selectCount!=c.leafCount?"mixed":c.selected=!!c.selectCount},getSelectedNodes:function(c){return this.getDescendingNodes(this.root,!0,c)},getDescendingNodes:function(c,g,h){if(!this.isOwned(c))return[];var m=[];this._collectNodes(c.children,
m,g,h);return m},_collectNodes:function(c,g,h,m){l.forEach(c,function(p){var n=this._getBinding(p),r=null===h||void 0===h?n.leafCount:h?n.selectCount:n.leafCount-n.selectCount;r&&(!p.children||!m&&r==n.leafCount?g.push(p):this._collectNodes(p.children,g,h,m))},this)},inspectChildren:function(c,g,h,m){m&&(g=q.hitch(m,g));c=c||this.root;(c=c.children)&&h&&(c=c.slice(),c.sort(h));return l.every(c,function(p){var n=g(p);return null===n?!1:!1!==n&&p.children?this.inspectChildren(p,g,h):!0},this)},updateExpandedNodes:function(c,
g){for(var h in this._hash)this.updateExpand(this._hash[h],!!c[h]);this._updateOddEven(null,g)},updateExpand:function(c,g,h,m){if(c){var p=!1;c.children&&(c=this._getBinding(c),c.expanded!==g&&(p=!0,c.expanded=g));g={};p&&h&&this._updateOddEven(g,m);return g}},_updateOddEven:function(c,g){var h=1;this.inspectChildren(null,function(m){!1!==m.visible&&(h=1-h);var p=this._getBinding(m);c&&p.isOdd!==h&&(c[this.getIdentity(m)]=h);p.isOdd=h;return!(!m.children||!p.expanded)},g,this)},isOdd:function(c){return(c=
this._getBinding(c))&&c.isOdd},get:function(c){return this._hash[c]},getIdentity:function(c){return this.idProperty?c[this.idProperty]:null},query:function(c,g){return e(this._query(this.data,c,g))},_query:function(c,g,h){return this.queryEngine(g,h)(c)},filter:function(c){return this._filter(this.data,c)},_filter:function(c,g){c=this._query(c,g);return new d(this.storage,c)},sort:function(c,g){return this._sort(this.data,c,g)},_sort:function(c,g,h){"function"===typeof g?(c=c.slice(),c.sort(g)):(g=
Array.isArray(g)?g.map(function(m){return{attribute:m.property,descending:m.descending}}):[{attribute:g,descending:h}],c=this._query(c,{},{sort:g}));return new d(this.storage,c)},mayHaveChildren:function(c){return!!c.children},getChildren:function(c,g){var h=this.isOwned(c,!0)?c.children:null;c=this.isDstoreTree||g&&g.returnCollection;g=this.queryEngine({},c?null:g)(h||[]);return c?new d(this.storage,g):e(g)},fetch:function(){return this._fetchRange(this.data)},fetchRange:function(c){return this._fetchRange(this.data,
c)},_fetchRange:function(c,g){return b(f(g?c.slice(g.start,g.end):c.slice()),{totalLength:f(c.length)})}})})},"dstore/QueryResults":function(){define(["dojo/_base/lang","dojo/when"],function(t,q){function l(k,f){return q(this,function(e){for(var a=0,b=e.length;a<b;a++)k.call(f,e[a],a,e)})}return function(k,f){var e=f&&"totalLength"in f;if(k.then){k=t.delegate(k);var a=k.then(function(b){var d=e?f.totalLength:b.totalLength||b.length;b.totalLength=d;return!e&&d});k.totalLength=e?f.totalLength:a;k.response=
f&&f.response}else k.totalLength=e?f.totalLength:k.length;k.forEach=l;return k}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GEUtil":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojox/uuid/generateRandomUuid esri/kernel esri/request esri/urlUtils esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/requests/FileContent esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/UrlUtil ./stdGeographies/StdGeographiesModel".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p){function n(B){return C?C:(B=B&&a.id.findCredential(B)||a.id.credentials[0])&&B.token}function r(B,w){var z=d.urlToObject(B);w=q.mixin({f:"json",token:n(B),langCode:dojo.locale},z.query||{},w);for(var H in w)B=w[H],B instanceof g||B&&"object"===typeof B&&(w[H]=JSON.stringify("function"===typeof B.toJson?B.toJson():B));return{url:z.path,taskParams:w}}function u(B){F||(F=new v(A));return!B||F.initialized?F:F.initialize()}var v=t(null,{url:null,_geInfo:null,_capabilities:null,
_supportedOperations:null,constructor:function(B){this._capabilities={};this._supportedOperations={};this.url=B},_initDfd:null,initialized:!1,initialize:function(){var B=this;if(this._initDfd)return this._initDfd.promise;this._initDfd=new l;h.requestPublicFirst(r(this.url).url+"/Geoenrichment",{content:{f:"json"},handleAs:"json"},{retryOnAnyError:!0}).then(function(w){B.initWithJson(w)});return this._initDfd.promise},initWithJson:function(B){this._geInfo=B;this._capabilities={};this._supportedOperations=
{};B.capabilities&&B.capabilities.forEach(function(w){this._capabilities[w.toLowerCase()]=!0},this);B.supportedOperations&&B.supportedOperations.forEach(function(w){this._supportedOperations[w.toLowerCase()]=!0},this);this._initDfd=this._initDfd||new l;this._initDfd.resolve();this.initialized=!0},hasCapability:function(B){return!!this._capabilities[B.toLowerCase()]},addCapability:function(B){this._capabilities[B.toLowerCase()]=!0},supportsOperation:function(B){return!!this._supportedOperations[B.toLowerCase()]},
enrich:function(B){B=r(this.url,B);B.taskParams.AddDerivativeVariables="all";return b({url:B.url+"/Geoenrichment/Enrich",content:B.taskParams,handleAs:"json"}).then(function(w){return w.results[0].value.FeatureSet||[]})},stdGeographyQuery:function(B){B=r(this.url,B);return b({url:B.url+"/StandardGeographyQuery/execute",content:B.taskParams,handleAs:"json"}).then(function(w){return w.results[0].value.features||[]})},getDataCollections:function(B,w,z){z=r(this.url,z);return b({url:z.url+"/Geoenrichment/DataCollections/"+
B+(w?"/"+w:""),content:z.taskParams,handleAs:"json"}).then(function(H){return H.DataCollections})},getCountries:function(){var B=r(this.url);return b({url:B.url+"/Geoenrichment/Countries",content:B.taskParams,handleAs:"json"}).then(function(w){return w.countries})},getCountryInfo:function(B){var w=this,z=c.get("GEUtil.countries");if(!z[B]){var H=r(this.url);z[B]=b({url:H.url+"/Geoenrichment/Countries/"+B,content:H.taskParams,handleAs:"json"}).then(function(G){var I=G.countries[0],L={};return f(I.hierarchies.map(function(N){return k(w._getStdGeographyModel(B,
N.ID),function(O){L[N.ID]=O})})).then(function(){return{country:I,geographiesModels:L}})})}return z[B]},_getStdGeographyModel:function(B,w){var z=c.get("GEUtil.stdModels"),H=B+w;if(!z[H]){var G=r(this.url);z[H]=b({url:G.url+"/Geoenrichment/StandardGeographyLevels/"+B+"/"+w,content:G.taskParams,handleAs:"json"}).then(function(I){return new p({countryID:B,hierarchyID:w,levels:I.geographyLevels[0].hierarchies[0].levels})})}return z[H]},formatReport:function(B){B=r(this.url,B);return h.request({url:B.url,
urlSuffix:"Geoenrichment/FormatReport"},{handleAs:"bin",content:B.taskParams}).then(function(w){return w&&w.data&&"text/plain"===w.data.type?null:w})},getReports:function(B){var w=r(this.url);return b({url:w.url+"/Geoenrichment/reports/"+B,content:w.taskParams,handleAs:"json"}).then(function(z){return z.reports})},createReport:function(B){var w=r(this.url,B),z=e();!1===B.forStorage&&(c.get("GEUtil.tasks")[z]={taskName:"createReport",taskParams:q.clone(B)});return h.request({url:w.url,urlSuffix:"Geoenrichment/createReport"},
{handleAs:"xml"===B.format?"text":"bin",content:w.taskParams}).then(function(H){return{taskID:z,result:H}})},consumeCredits:function(B){var w=c.get("GEUtil.tasks")[B];if(w)return delete w.taskParams.forStorage,delete c.get("GEUtil.tasks")[B],this[w.taskName](w.taskParams)},getLayerInfos:function(B){var w=c.get("GEUtil.dataLayers");w[B]||(w[B]=this._getLayerInfos(B));return w[B]},_getLayerInfos:function(B){var w=r(this.url);return b({url:w.url+"/Geoenrichment/DataLayers/"+B,content:w.taskParams,handleAs:"json"}).then(function(z){return z&&
z.layers||[]}).otherwise(function(z){console.log(z);return[]})},getLayerInfo:function(B,w){var z=c.get("GEUtil.dataLayers"),H=B+"_"+w;z[H]||(z[H]=this._getLayerInfo(B,w));return z[H]},_getLayerInfo:function(B,w){var z=r(this.url);return b({url:z.url+"/Geoenrichment/DataLayers/"+B+"/"+w,content:z.taskParams,handleAs:"json"}).then(function(H){return H&&H.layer}).otherwise(function(H){console.log(H);return null})}}),y={},A,C,E=new l;y.setGeoenrichmentUrl=function(B,w){(A=B||A)&&m.registerCORS(A);C=w||
C;!E.promise.isFulfilled()&&E.resolve()};y.canMakeRequests=function(){return!!A};y.getInitPromise=function(){return E.promise};y.GEClient=v;var F;y.getClient=function(){return u()};y.initialize=function(){return k(u(!0))};y.initWithJson=function(B,w){y.setGeoenrichmentUrl(B);u().initWithJson(w)};y.enrich=function(B){return u().enrich(B)};y.stdGeographyQuery=function(B){return u().stdGeographyQuery(B)};y.getDataCollections=function(B,w,z){return u().getDataCollections(B,w,z)};y.formatReport=function(B){return u().formatReport(B)};
y.createReport=function(B){return u().createReport(B)};y.consumeCredits=function(B){return u().consumeCredits(B)};y.getLayerInfos=function(B){return u().getLayerInfos(B)};y.hasCapability=function(B){return k(u(!0),function(){return F&&F.hasCapability(B)})};y.addCapability=function(B){return u().addCapability(B)};y.supportsOperation=function(B){return k(u(!0),function(){return F&&F.supportsOperation(B)})};y.getCountryInfo=function(B){return u().getCountryInfo(B)};return y})},"esri/dijit/geoenrichment/promise/all":function(){define(["dojo/promise/all"],
function(t){return t})},"dojox/uuid/generateRandomUuid":function(){define(["./_base"],function(){dojox.uuid.generateRandomUuid=function(){function t(){for(var e=Math.floor(Math.random()%1*Math.pow(2,32)).toString(16);8>e.length;)e="0"+e;return e}var q=t(),l=t();l=l.substring(0,4)+"-4"+l.substring(5,8);var k=t();k="8"+k.substring(1,4)+"-"+k.substring(4,8);var f=t();return(q+"-"+l+"-"+k+f).toLowerCase()};return dojox.uuid.generateRandomUuid})},"dojox/uuid/_base":function(){define(["dojo/_base/kernel",
"dojo/_base/lang"],function(t){t.getObject("uuid",!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(q,l){if(!q)throw l||(l="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(l);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};
dojox.uuid.isValid=function(q){q=q.toString();var l=t.isString(q)&&36==q.length&&q==q.toLowerCase();if(l){q=q.split("-");l=5==q.length&&8==q[0].length&&4==q[1].length&&4==q[2].length&&4==q[3].length&&12==q[4].length;for(var k in q){var f=parseInt(q[k],16);l=l&&isFinite(f)}}return l};dojox.uuid.getVariant=function(q){if(!dojox.uuid._ourVariantLookupTable){var l=dojox.uuid.variant,k=[];k[0]=l.NCS;k[1]=l.NCS;k[2]=l.NCS;k[3]=l.NCS;k[4]=l.NCS;k[5]=l.NCS;k[6]=l.NCS;k[7]=l.NCS;k[8]=l.DCE;k[9]=l.DCE;k[10]=
l.DCE;k[11]=l.DCE;k[12]=l.MICROSOFT;k[13]=l.MICROSOFT;k[14]=l.UNKNOWN;k[15]=l.UNKNOWN;dojox.uuid._ourVariantLookupTable=k}q=q.toString();q=q.charAt(19);q=parseInt(q,16);dojox.uuid.assert(0<=q&&16>=q);return dojox.uuid._ourVariantLookupTable[q]};dojox.uuid.getVersion=function(q){dojox.uuid.assert(dojox.uuid.getVariant(q)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");q=q.toString();q=q.charAt(14);return parseInt(q,16)};dojox.uuid.getNode=function(q){dojox.uuid.assert(dojox.uuid.getVersion(q)==
dojox.uuid.version.TIME_BASED,"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");q=q.toString();return q.split("-")[4]};dojox.uuid.getTimestamp=function(q,l){dojox.uuid.assert(dojox.uuid.getVersion(q)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");q=q.toString();l||(l=null);switch(l){case "string":case String:return dojox.uuid.getTimestamp(q,Date).toUTCString();case "hex":var k=q.split("-");q=k[0];l=k[1];k=k[2];k=k.slice(1);q=k+l+q;dojox.uuid.assert(15==
q.length);return q;case null:case "date":case Date:return k=q.split("-"),q=parseInt(k[0],16),l=parseInt(k[1],16),k=(parseInt(k[2],16)&4095)<<16,k=4294967296*(k+l),k+=q,new Date(k/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+l)}};return dojox.uuid})},"esri/dijit/geoenrichment/utils/CacheUtil":function(){define([],function(){var t={},q={};t.get=function(l,k){var f=q[l];f||k||(f=q[l]={});return f};t.set=function(l,k){return q[l]=k};t.clear=
function(l,k){q={}};return t})},"esri/dijit/geoenrichment/utils/requests/FileContent":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/utils/DataUtil"],function(t,q){function l(f){return f?/^image\//.test(f)?"base64":/^text\//.test(f)?"text":/application\/json/.test(f)?"json":"bin":"bin"}var k=t(null,{data:null,filename:null,contentType:"application/octet-stream",contentTransferEncoding:"binary",constructor:function(f,e,a){this.data=f;e&&(this.contentType=e);a&&(this.contentTransferEncoding=
a)},getBase64Data:function(){return this.data?"base64"==this.contentTransferEncoding?this.data:q.base64FromByteSource(this.data):null},toString:function(){return this.filename||"\x3cunknown\x3e"}});k.fromArrayBuffer=function(f,e){return new k(q.binaryStringFromByteSource(f),e)};k.fromBlob=function(f,e){return q.arrayBufferFromBlob(f).then(function(a){return new k(q.binaryStringFromByteSource(a),e||f.type)})};k.fromFileData=function(f,e,a){a=a||q.getContentType(f);if("object"==typeof e&&window.ArrayBuffer&&
(e instanceof ArrayBuffer||e.buffer instanceof ArrayBuffer))e=q.binaryStringFromByteSource(e.buffer||e);else{var b=l(a);"json"==b&&"object"==typeof e&&(e=JSON.stringify(e));if("string"!=typeof e)throw Error("Wrong file data.");switch(b){case "base64":e=atob(e);break;case "text":case "json":e=unescape(encodeURIComponent(e))}}e=new k(e,a);e.filename=f;return e};k.getContentConversionType=l;return k})},"esri/dijit/geoenrichment/utils/requests/UniversalClient":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred dojo/request/xhr dojo/io-query dojo/sniff esri/dijit/geoenrichment/when esri/kernel esri/config esri/lang esri/urlUtils ../UrlUtil ./BinaryData ./FileContent ./MultipartDataBuilder ./ErrorUtil".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p,n){function r(C,E){if(E)this.reject(E);else{E=C.xhr;var F=E.getResponseHeader&&E.getResponseHeader("Content-Type");C.status=E.status;C.data=new h(E.response||E.responseBody||E.responseText,F);this.resolve(C)}}var u=0,v=f("safari"),y=function(C){"string"===typeof C?this.url=C:"object"===typeof C&&t.mixin(this,C)};y.prototype={url:null,preventCache:null,usePost:!1,timeout:0,multipartThreshold:0,useCommonAuth:!1,useProxy:!1,allowSSL:null,send:function(C,E){return this.sendUrlRequest(this.prepareUrlRequest(C,
E),"UniversalClient.send")},prepareUrlRequest:function(C,E){"string"===typeof C?C={urlSuffix:C}:C||(C={});E||(E={});var F=C.url||this.url;C=C.urlSuffix;F||(F=C,C=null);if(!F)throw Error("URL is missing.");var B=c.urlToObject(F);F=g.combine(B.path,C);C=B.query||{};"object"===typeof E.content&&(C=t.mixin(C,E.content));B=E.requireSSL;!0!==B&&!1===this.allowSSL&&(B=!1);!1!==B&&!0===this.allowSSL&&/^https/i.test(window.location.protocol)&&(B=!0);var w=this.getCredential(F,!0);w&&(C.token||!1===C.token||
(C.token=w.token),w.ssl&&!1!==B&&(B=!0));!0===B&&(F=g.toHttpsUrl(F));!1===C.token&&delete C.token;var z=E.handleAs||"json";"json"===z&&(C.f="json");w=(E.sendAs||(E.usePost||this.usePost||C.token?"post":"get")).toLowerCase();B="multipart"==w?!0:E.sendAs||E.sizeLimit?!1:null;var H=0,G=E.multipartThreshold||this.multipartThreshold;for(R in C){var I=C[R];if(I instanceof m)B=!0;else{var L=0,N=R.length;"object"===typeof I?E.allowMultipleValues&&Array.isArray(I)?C[R]=I.map(function(S){S="object"===typeof S?
JSON.stringify(S):S;L+=N+S+2;return S}):(C[R]=JSON.stringify(I),L+=N+C[R].length+2):L=N+(I?I.length:0)+2;!B&&0<G&&(H+=L)}}!1!==B&&0<G&&H>G&&(B=!0);if(E.useProxy||!c.hasSameOrigin(F,window.location.href)&&this.useProxy&&!E.hasOwnProperty("useProxy")){var O=g.getProxyUrl();O&&(F=O+"?"+F)}else c.getProxyRule(F)&&(F=c.getProxyRule(F).proxyUrl+"?"+F);var R=(R=E.hasOwnProperty("preventCache")?E.preventCache:this.preventCache)||null===R&&O||v?"_ts\x3d"+(new Date).getTime()+u++:"";O={handleAs:z};if(z=Number(d.isDefined(E.timeout)?
E.timeout:this.timeout))O.timeout=z;z="get"!==w||B;w=B?null:k.objectToQuery(C);z||(z=w.length+F.length+R.length+1>=b.defaults.io.postLength);O.method=z?"POST":"GET";O.headers={"X-Requested-With":null};O.headers["Content-Type"]="undefined"!==typeof E.contentType?E.contentType:"application/x-www-form-urlencoded; charset\x3dutf-8";B?(B=new p,B.addVariables(C),B.build(O)):z?O.data=w:w&&(F+="?"+w,R&&(F+="\x26"+R),R=null);!w&&R&&(F+="?"+R);return{url:F,options:O,sizeLimit:E.sizeLimit}},getCredential:function(C,
E){if(a.id){var F=a.id.findCredential(C);!F&&this.useCommonAuth&&(F="string"==typeof this.useCommonAuth?a.id.findCredential(this.useCommonAuth):a.id.credentials[0]);if(F){var B={token:F.token};E?B.ssl=F.ssl:B.url=F.ssl?g.toHttpsUrl(C):C;return B}}},sendUrlRequest:function(C,E){var F="string"===typeof C.options.data?C.options.data.length:null;if(C.sizeLimit&&F&&("function"===typeof C.sizeLimit?C.sizeLimit(F):F>C.sizeLimit))return(new q).reject(Error("SIZE_LIMIT_EXCEEDED"));E=E||"UniversalClient.sendUrlRequest";
var B=C.deferred||new q;if(F="bin"===C.options.handleAs)C.options.handleAs="blob";var w=l(C.url,C.options,!0);F&&(w.handleResponse=r);var z=this;w.then(function(H){H="json"===C.options.handleAs&&H&&n.parseError(H)||H;if(H instanceof Error){var G;!0===z.useCommonAuth&&498===H.code&&(G=y.handleInvalidTokenError(H));e(G)["finally"](function(){B.reject(H)})}else B.resolve(z._makeResponse(E,H))},function(H){B.reject(n.makeError(H))});return B.promise},requestToUrl:function(C){if(C.options.headers&&C.options.headers["Content-Type"]&&
0==C.options.headers["Content-Type"].indexOf("multipart/form-data"))return null;var E=C.url;if(C=C.options.data){if(E.length+C.length>=b.defaults.io.postLength)return null;E+="?"+C}return E},_makeResponse:function(C,E){return E}};y.makeError=n.makeError;y.handleInvalidTokenError=function(C){};var A=new y({useCommonAuth:!0,allowSSL:!0});y.request=function(C,E){return A.send(C,E).otherwise(function(F){var B=E&&E.content&&E.content.token;if(498!==F.code||null!=B)return(new q).reject(F);E=t.mixin({},
E);E.content=t.mixin({},E.content);E.content.token=!1;return A.send(C,E)})};y.requestPublicFirst=function(C,E,F){var B=t.mixin({},E);B.content=t.mixin({},E.content);B.content.token=!1;return A.send(C,B).otherwise(function(w){return F&&F.retryOnAnyError||499===w.code||403===w.code?A.send(C,E):(new q).reject(w)})};return y})},"esri/dijit/geoenrichment/utils/requests/BinaryData":function(){define(["dojo/_base/declare"],function(t){return t(null,{data:null,type:null,constructor:function(q,l){this.type=
l||q&&q.type||null;this.data=q}})})},"esri/dijit/geoenrichment/utils/requests/MultipartDataBuilder":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/request/util","esri/lang","./FileContent"],function(t,q,l,k,f){function e(d,c){for(var g in c){var h=d[g],m=c[g];h!==m&&(h&&"object"===typeof h&&m&&"object"===typeof m?m instanceof Date?d[g]=new Date(m):e(h,m):d[g]=m)}return d}var a=t(null,{data:null,constructor:function(d){this.data=d}}),b=l.parseArgs;l.parseArgs=function(d,c,g){c.data&&
c.data instanceof a&&(c.data=c.data.data,g=!0);return b(d,c,g)};l.deepCreate=function(d,c){if(c instanceof a)return new a(c.data);c=c||{};var g=q.delegate(d),h,m;for(h in d)(m=d[h])&&"object"===typeof m&&(g[h]=l.deepCreate(m,c[h]));return e(g,c)};return t(null,{addVariables:function(d){for(var c in d)this.addVariable(c,d[c])},addVariable:function(d,c){k.isDefined(c)&&(c instanceof f?this._writeFileContent(d,c):this._writeVariable(d,c.toString()))},build:function(d){this._writeBoundary(!0);d.data=
new a(this._prepareBinaryData());var c=d.headers||{};c["Content-Type"]="multipart/form-data; boundary\x3d"+this._dataProvider.boundary;d.headers=c;this._dataProvider=null},_prepareBinaryData:function(){var d=this._dataProvider.buffer;if(!window.Uint8Array)return d;for(var c=d.length,g=new Uint8Array(new ArrayBuffer(c)),h=0;h<c;h++)g[h]=d.charCodeAt(h);return g},_dataProvider:null,_getDataProvider:function(){if(!this._dataProvider){for(var d="",c=0;32>c;c++)d+=String.fromCharCode(Math.floor(97+25*
Math.random()));this._dataProvider={buffer:"",boundary:d}}return this._dataProvider},_writeVariable:function(d,c){this._writeBoundary();this._writeContentDisposition(d);this._writeLineBreak();this._writeData(this._toUTF8(c));this._writeLineBreak()},_writeFileContent:function(d,c){this._writeBoundary();this._writeContentDisposition(d,c.filename);c.contentType&&(this._writeData("Content-Type: "+c.contentType),this._writeLineBreak());c.contentTransferEncoding&&(this._writeData("Content-Transfer-Encoding: "+
c.contentTransferEncoding),this._writeLineBreak());this._writeLineBreak();this._writeData(c.data);this._writeLineBreak()},_writeBoundary:function(d){this._writeDoubleDash();this._writeData(this._getDataProvider().boundary);d?this._writeDoubleDash():this._writeLineBreak()},_writeContentDisposition:function(d,c){c=c?'"; filename\x3d"'+this._toUTF8(c.replace(/"/g,"'")):"";this._writeData('Content-Disposition: form-data; name\x3d"'+this._toUTF8(d)+c+'"');this._writeLineBreak()},_writeDoubleDash:function(){this._writeData("--")},
_writeLineBreak:function(){this._writeData("\r\n")},_writeData:function(d){this._getDataProvider().buffer+=d},_toUTF8:function(d){return unescape(encodeURIComponent(d))}})})},"esri/dijit/geoenrichment/utils/requests/ErrorUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","require"],function(t,q,l){function k(e){var a=new t;l(["./DataResource"],function(b){q((new b(e)).getFileContent(),a.resolve,a.reject)});return a.promise}var f={getErrorFromBin:function(e){var a=
/^text\/|^application\/json/;return e&&e.type&&!a.test(e.type)?null:q(e&&k(e),function(b){if(b){if(b.hasOwnProperty("contentType")&&!a.test(b.contentType))return null;try{var d=JSON.parse(decodeURIComponent(escape(b.data))),c=f.parseError(d);if(c)return c;if(d.messages&&d.messages.length){var g=d.messages[0];if("esriJobMessageTypeError"==g.type)return Error(g.description)}}catch(h){}}return Error("Binary data error.")})},parseError:function(e){var a;e.error?a=f.makeError(e.error):"error"===e.status&&
(a=f.makeError(e));a&&a.code&&null==a.httpCode&&(a.httpCode=a.code);return a},makeError:function(e){null==e?e=Error():"string"===typeof e&&(e={message:e});if(!(e instanceof Error)&&"object"===typeof e){var a=e;e=Error();a.code&&(e.code=a.code);a.message&&(e.message=a.message);a.details&&(e.details=a.details)}e.log=dojoConfig.isDebug;return e}};return f})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/stdGeographies/StdGeographiesModel":function(){define(["dojo/_base/declare"],
function(t){return t(null,{_levelsCache:null,_levels:null,constructor:function(q){this._initWithLevels(q.levels)},_initWithLevels:function(q){this._levels=q;this._levelsCache={};this._levels.forEach(function(l){delete l.description;this._levelsCache[l.id]=l;l.adminLevel&&(this._levelsCache[l.adminLevel]=l)},this)},getLevels:function(q){return q?this._levels.filter(function(l){return!l.isWholeCountry}):this._levels.slice()},getLevel:function(q){return this._levelsCache[q]},getLevelPluralName:function(q){return(q=
this.getLevel(q))?q.name||q.pluralName:null},toJson:function(){return{levels:this._levels}}})})},"esri/dijit/geoenrichment/ReportPlayer/ReportPlayer":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dojo/on dojo/keys dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin ./config ./playerSupports/_CommandSupport ./playerSupports/_LogoSupport ./playerSupports/_MapSupport ./playerSupports/_PageNavigationSupport ./playerSupports/_PrintSupport ./playerSupports/_ReportContainersSwitcher ./playerSupports/_SmartLayoutSupport ./playerSupports/_ZoomSupport ./playerSupports/_WaitingSupport ./supportClasses/PlayerConfigurator ./supportClasses/PlayerToFullScreenAnimator ./toolbar/PlayerToolbar ./ReportPlayerViewModel ./PlayerResizeModes ./PlayerThemes ./PlayerViewModes ./ReportPlayerState ./PlayerZoomBehaviors ./DataProviderGE ./dataProvider/commands/supportClasses/LayoutXMLBuilder esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/async/AsyncQueue dojo/text!./templates/ReportPlayer.html dojo/i18n!esri/nls/jsapi ./_devConfig".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p,n,r,u,v,y,A,C,E,F,B,w,z,H,G,I,L,N,O,R,S,U,Z,da,X,ea){X=X.geoenrichment.dijit.ReportPlayer.ReportPlayer;return t([d,c,h,m,p,r,u,v,y,n,A],{templateString:da,nls:X,isPlayer:!0,dataProvider:null,exportCommands:null,config:null,theme:void 0,viewMode:void 0,enableDataDrilling:!0,showToolbarInPopup:!1,showAreaTitle:void 0,showReportTitle:!1,scaleSlidesToFitWindow:void 0,showCloseButton:!1,showToFullScreenAnimation:!1,canAddMoreAreas:!1,areasSelectButtons:null,comparisonSettings:null,
resizeMode:void 0,printConfig:{subtitle:X.preparedByEsri,printDialogClass:"esri/dijit/geoenrichment/ReportPlayer/printing/PageOptionsDialog/PageOptionsDialog"},showProgressBar:!0,defaultZoomBehavior:void 0,nlsMap:null,isDataDrillingPlayer:!1,isPlayerOnServer:!1,_viewModel:null,_reportData:null,_analysisAreaIndex:0,_originalAreaViewMode:null,_showAllAreasSideBySide:!1,playerToolbar:null,postCreate:function(){this.config=q.mixin(g,this.config);if(g.isPlayerOnServer=this.isPlayerOnServer)g.maps.maxNumberOfMapsShownAtTheSameTime=
1E6,this.defaultZoomBehavior=I.RESET;this._viewModel=new (this._getViewModelClass());this._setUpDataProvider();C.configurePlayer(this);!this.isPlayerOnServer&&this._initToolbar();this._initContainerSwither();!this.isPlayerOnServer&&this._initSmartLayout();!this.isPlayerOnServer&&this._initCommands();!this.isPlayerOnServer&&this._initPageNavigationControls();!this.isPlayerOnServer&&this._initZoomControls();!this.isPlayerOnServer&&this._applyTheme();!this.isPlayerOnServer&&this._showError(!1);!this.isPlayerOnServer&&
this._initProgressController();R.isMobileDevice()&&(b.add(this.domNode,"esriGEReportPlayerMobile"),this._setUpMobileOrientationHandling());this._updateElementsVisibility()},_setUpDataProvider:function(){this.dataProvider=this.dataProvider||new L;this.exportCommands&&this.exportCommands.forEach(function(Q){this.dataProvider.registerCommand(Q)},this)},_orientationDfd:null,_setUpMobileOrientationHandling:function(){var Q=this;this.own(e(window,"orientationchange",function(){Q._orientationDfd&&Q._orientationDfd.resolve("cancel");
var W=Q._orientationDfd=new k;Q._showWaiting(W.promise,"orientationchange");W.promise.then(function(V){"cancel"!==V&&(Q._setViewMode(null),Q.refresh())});f(Q.getRenderPromise(),function(){O.delay(500).then(W.resolve,W.resolve)})}))},_getViewModelClass:function(){return B},_setViewMode:function(Q){C.configurePlayer(this,Q);this._refreshZoomControls()},_initToolbar:function(){var Q=this;this.playerToolbar=(new F({player:this,popupButtonDiv:this.playerAfterToolbarDiv,showToolbarInPopup:this.showToolbarInPopup,
showAreaTitle:this.showAreaTitle,stretchToolbarNode:!this.showToolbarInPopup&&(this.resizeMode===w.FIT_WINDOW?document.body:this.domNode),showCloseButton:this.showCloseButton,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onShowAnalysisAreaAt:function(W){Q.showAnalysisAreaAt(W)},onCompareAreasSideBySide:function(){Q.showAllAnalysisAreasSideBySide()},onShowPageAt:function(W){Q.showPageAt(W)},isScrollShown:function(){var W=Q.getCurrentReportContainer();return W&&W.isScrollShown&&
W.isScrollShown()},onClose:function(){Q._onClose()},onAddMoreAreas:function(){Q.onAddMoreAreas()},onRemoveAreas:function(W){Q.onAreasPreRemoved(W);W.forEach(function(ka){ka.hidden=!0});if(Q.viewMode===H.PANELS_IN_STACK_ALL)if(2>Q.getAnalysisAreas().filter(function(ka){return!ka.hidden}).length)Q._setAllAreasVisible(!1);else{var V={};W.forEach(function(ka){V[ka.index]=!1});Q.getCurrentReportContainer().setAreasVisibilityState(V,{append:!0});Q._updateAreaSelect()}else if(Q.getCurrentAnalysisArea().hidden){var fa=
Q.getAnalysisAreas().filter(function(ka){return!ka.hidden})[0];fa?Q.showAnalysisAreaAt(fa.index):Q.refresh()}else Q._updateAreaSelect();Q.onAreasRemoved(W)}})).placeAt(this.playerToolbarDiv);this.own(this.playerToolbar);this.showCloseButton&&this.own(e(window,"keyup",function(W){Q.getWaitingPromise()||G.isViewingDataDrillingZoom||G.isImageViewerShown||W.keyCode===a.ESCAPE&&Q._onClose()}))},_applyTheme:function(){b.remove(this.domNode,"playerThemeDark playerThemeLight");b.add(this.domNode,this.theme===
z.DARK?"playerThemeDark":"playerThemeLight");this.playerToolbar.setTheme(this.theme)},playReport:function(Q,W){return this._showWaiting(this._callAfterRendering("_doPlayReport",[Q,W]),"playReport")},_doPlayReport:function(Q,W){this.playerToolbar&&this.playerToolbar.closePopup();var V=this;this._showError(!1);this._progressController&&this._progressController.reset();this.showToFullScreenAnimation&&this.resizeMode===w.FIT_WINDOW&&E.animateTo(this);this.dataProvider._onCreateReportStarted=function(){V._viewModel.preInitialize()};
this._viewModel.reset();return f(this.dataProvider.getReportData(Q,{progressCallback:function(fa){V._progressController&&V._progressController.setLoadDataProgress(fa)}}),function(fa){if(V.viewMode===H.PANELS_IN_STACK_ALL){var ka=V.viewMode;1<fa.analysisAreas.length&&!fa.isMultiFeature?V._originalAreaViewMode||(V._showAllAreasSideBySide=!0,V._originalAreaViewMode=C.getDefaultViewMode(V)):(V._showAllAreasSideBySide=!1,ka=V._originalAreaViewMode||C.getDefaultViewMode(V));V._setViewMode(ka)}return V.setReportData(fa,
W)},function(fa){V._showError(fa)})},refresh:function(Q){return this._reportData&&f(this.setReportData(this._reportData,{waitUntilAllContentIsReady:!(!Q||!Q.waitUntilAllContentIsReady)}),function(){this.showPageAt(0);return this.resize()}.bind(this))},_isDataBeingSetFlag:!1,_notifyShownPendingFlag:!1,setReportData:function(Q,W){return this._showWaiting(this._callAfterRendering("_doSetReportData",[Q,W]),"setReportData")},setReportDataAndExport:function(Q,W){var V=this;if(Q.reportObject.isMultiFeature)return this.setReportData(Q,
{waitUntilAllContentIsReady:!0,disableAnimation:!0}).then(function(){return V.executeCommand(W.commandId,W.commandParams)});var fa=new k,ka=0,oa=[],D=function(){var J=V.dataProvider.reportDataToSingleAreaReportData(Q,{currentFeatureIndex:ka,reportTitle:Q.reportTitle,templateJson:Q.templateJson});V.setReportData(J,{waitUntilAllContentIsReady:!0,disableAnimation:!0}).then(function(){var M=q.mixin({},W.commandParams);M.pageNumerationInfo={startAreaIndex:ka,numAreas:Q.analysisAreas.length};return f(V.executeCommand(W.commandId,
M)).then(function(K){oa.push(K);++ka===Q.analysisAreas.length?fa.resolve(N.stitchDocuments(oa)):setTimeout(D)})})};D();return fa.promise},_doSetReportData:function(Q,W){var V=this;W=W||{};this._reportData=Q;ea.emulateErrors.playerError&&(Q=null);if(!Q||ea.emulateErrors.emptyDataProviderResponse)this._showError(!0);else{this._isDataBeingSetFlag=!0;G.isAnimationSuspended=!0;this.onSetReportDataStart();var fa=new k;this._viewModel.setAnimationAllowed(!W.disableAnimation);this._configureViewModel(Q);
(V.isPlayerOnServer?f():O.delay(0)).then(function(){if(1===Q.analysisAreas.length||Q.isMultiFeature)V._destroyAllContainers(),V._resetMapBuilder(),V._applyReportData({analysisAreaIndex:0,rerenderContent:!0}).then(fa.resolve,fa.reject);else{!1!==W._resetLoadedContents&&(V._destroyAllContainers(),V._resetMapBuilder());var ka=Q.analysisAreas.length-1,oa=function(){for(;0<=ka&&Q.analysisAreas[ka].hidden;)ka--;0>ka?fa.resolve():V._applyReportData({analysisAreaIndex:ka--,rerenderContent:!1,isFinalArea:0>
ka}).then(function(){(V.isPlayerOnServer?f():O.delay(0)).then(oa)},fa.reject)};oa()}});this._progressController&&this._progressController.setNumAreas(Q.analysisAreas.length);this._progressController&&this._progressController.setLoadDataProgress(1);return fa.promise.then(function(){return V._progressController&&V._progressController.finalize()}).otherwise(function(ka){V._showError(ka)}).always(function(){var ka=V.getCurrentReportContainer();if(ka&&ka.domNode)return(V.isPlayerOnServer?f():O.delay(300)).then(function(){V._isDataBeingSetFlag=
!1;V._notifyShownPendingFlag=!S.isNodeInLayout(V.domNode);G.isAnimationSuspended=V.isPlayerOnServer;V.onSetReportDataEnd();V._emitPendingResizedEvent();V._progressController&&V._progressController.reset();if(W.waitUntilAllContentIsReady)return V.getRenderPromise()})})}},showAnalysisAreaAt:function(Q){return this._callAfterRendering("_doShowAnalysisAreaAt",[Q])},_doShowAnalysisAreaAt:function(Q){var W=this;return f(this._setAllAreasVisible(!1),function(){if(W._analysisAreaIndex!==Q&&W.getAnalysisAreas()[Q]&&
!W.getAnalysisAreas()[Q].hidden)return W._applyReportData({analysisAreaIndex:Q,rerenderContent:!1})})},showAllAnalysisAreasSideBySide:function(){return this._callAfterRendering("_doShowAllAnalysisAreasSideBySide")},_doShowAllAnalysisAreasSideBySide:function(){return this._setAllAreasVisible(!0)},_setAllAreasVisible:function(Q){if(this._showAllAreasSideBySide!==Q)return Q?(this._showAllAreasSideBySide=!0,this._originalAreaViewMode=this.viewMode===H.PANELS_IN_STACK_ALL?C.getDefaultViewMode(this):this.viewMode,
this._setViewMode(H.PANELS_IN_STACK_ALL)):(this._showAllAreasSideBySide=!1,this._setViewMode(this._originalAreaViewMode),this._originalAreaViewMode=null),this.refresh()},_applyReportData:function(Q){var W=this;Q=Q||{};var V=this._reportData&&this._reportData.isMultiFeature?0:Q.analysisAreaIndex||0,fa=!1!==Q.rerenderContent;this._analysisAreaIndex=V;this._showError(!this._reportData);if(this._reportData)return f(this._viewModel.initialize(!this._reportData.reportObject.isGraphicReport,this.viewMode),
function(){return W._setReportContainer(fa)?W._doApplyTemplateJson({analysisAreaIndex:V,isFinalArea:Q.isFinalArea}):W._updateAreaSelect()})},_doApplyTemplateJson:function(Q){var W=this,V=this.getCurrentReportContainer(),fa=q.clone(this._reportData.templateJson);ea.emulateErrors.emptyTemplateJson&&(fa.sectionsTables.length=0);var ka=V.fromJson(fa,{waitUntilAllContentIsReady:!0,progressCallback:function(oa){W._progressController&&W._progressController.setProgressForAreaAt(oa,Q.analysisAreaIndex)},analysisAreaIndex:Q.analysisAreaIndex,
isFinalArea:Q.isFinalArea,renderSync:this.isPlayerOnServer});fa=V.getPagePromise?V.getPagePromise():ka;V=V.getContentPromise?V.getContentPromise():ka;this._registerContainerLoadPromise(V||fa);this._updateAreaSelect();return f(fa,function(){W._setCurrentContainerLoaded();W.showPageAt(W._currentPageIndex);return W.resize()})},_updateAreaSelect:function(){this.playerToolbar&&this.playerToolbar.updateAreaSelect({analysisAreas:this._reportData.analysisAreas,combinedAreasInfo:this._reportData.combinedAreasInfo,
currentAreaIndex:this._showAllAreasSideBySide?"all":this.getCurrentAnalysisAreaIndex(),isMultiFeature:this._reportData.isMultiFeature})},getReportData:function(){return this._reportData},getReportTitle:function(){return this._reportData&&this._reportData.reportTitle||""},getCurrentAnalysisAreaIndex:function(){return this._analysisAreaIndex},getCurrentAnalysisArea:function(){return this._reportData&&this._reportData.analysisAreas[this._analysisAreaIndex]},getAnalysisAreas:function(){return this._reportData&&
this._reportData.analysisAreas},reportDataToJson:function(Q){return this._showWaiting(this.dataProvider.reportDataToJson(this.getReportData(),Q),"reportDataToJson")},reportDataFromJson:function(Q,W){var V=this;this._showError(!1);return this._showWaiting(f(this.dataProvider.reportDataFromJson(Q),function(fa){return V.setReportData(fa,W)}),"reportDataFromJson")},_configureViewModel:function(Q){this._viewModel.setTheme(this._reportData.templateJson.theme);this._viewModel.enableDataDrilling=!this.isPlayerOnServer&&
this.enableDataDrilling;this._viewModel.setDynamicReportInfo({fieldData:this._reportData.fieldData,analysisAreas:this._reportData.analysisAreas,combinedAreasInfo:this._reportData.combinedAreasInfo,attachmentsStore:this._reportData.attachmentsStore,createMapFunc:q.hitch(this,this._createMap),reportObject:this._reportData.reportObject,isMultiFeature:this._reportData.isMultiFeature,isFixedDataMode:!this._reportData.config.geoenrichmentUrl,geClient:this._reportData.geClient,templateVariableProvider:this._reportData.templateVariableProvider,
countryID:this._reportData.config.countryID,hierarchy:this._reportData.config.hierarchy,templateJson:this._reportData.templateJson});this._viewModel.getDynamicImageFunc=q.hitch(this,this._getReportLogo)},notifyShown:function(){!this._isDataBeingSetFlag&&this._notifyShownPendingFlag&&(this.getCurrentReportContainer()&&this.getCurrentReportContainer().notifyShown(),this._notifyShownPendingFlag=!1)},_isErrorShown:!1,_showError:function(Q){this.errorViewDiv&&S.destroy(this.errorViewDiv);this.errorViewDiv=
null;S[Q?"hide":"show"](this.printableDivContainer);b[Q?"add":"remove"](this.domNode,"esriGEReportPlayerError");this._isErrorShown=!!Q;this._updateElementsVisibility();Q?(this.errorViewDiv=S.create("div",{"class":"esriGEReportPlayerErrorMessage",innerHTML:X.cantPlayReportError},this.domNode),this.playerToolbar&&this.playerToolbar.setErrorShown(!0),this._progressController&&this._progressController.reset(),console.log(Q),this.onError(Q)):this.playerToolbar&&this.playerToolbar.setErrorShown(!1)},isErrorShown:function(){return this._isErrorShown},
_updateElementsVisibility:function(){var Q=0<this._waitingCount?!1:this._reportData||this._isErrorShown,W=0<this._waitingCount||this._isErrorShown?!1:!0,V=0<this._waitingCount||this._isErrorShown?!1:!0;this.playerToolbarDiv&&(this.playerToolbarDiv.style.opacity=Q?"":"0.001");this.sidePageNavigator&&(this.sidePageNavigator.style.opacity=W?"":"0.001");this.reportContainerDiv.style.opacity=V?"":"0.001"},setPrintMode:function(Q){b[Q?"add":"remove"](this.domNode,"esriGEReportPlayerInPrinting")},resize:function(Q,
W){this._resize({width:Q,height:W});this._updatePageNavigator();this._updateZoomControls();this.playerToolbar&&this.playerToolbar.update()},_pendingResizeEvent:null,_emitResizedEvent:function(Q){this._pendingResizeEvent={isPaginating:!!Q};this._isDataBeingSetFlag||this._emitPendingResizedEvent()},_emitPendingResizedEvent:function(){this._pendingResizeEvent&&(this.onResized(this._pendingResizeEvent.isPaginating),this._pendingResizeEvent=null)},_onClose:function(){var Q;this.showToFullScreenAnimation&&
this.resizeMode===w.FIT_WINDOW&&(Q=E.animateFrom(this));f(Q,function(){this.onClose()}.bind(this))},getVisualState:function(){return{type:"reportPlayer",viewMode:this.viewMode,reportContainers:this.getAllReportContainers().map(function(Q){return Q.getVisualState&&Q.getVisualState()})}},setVisualState:function(Q){return this._callAfterRendering("_doSetVisualState",[Q])},_doSetVisualState:function(Q){var W=Q&&this.getAllReportContainers().map(function(V,fa){return V.setVisualState&&V.setVisualState(Q.reportContainers[fa])});
return l(W)},_renderQueue:null,getRenderPromise:function(){return this._renderQueue&&this._renderQueue.getPromise()},_registerContainerLoadPromise:function(Q){this._renderQueue=this._renderQueue||new Z;this._renderQueue.add(Q);this.playerToolbar&&this.playerToolbar.setContentLoadPromise(this.getRenderPromise())},_safeFuncCaller:null,_callAfterRendering:function(Q,W){if(this.isPlayerOnServer)return this[Q].apply(this,W);var V=this;this._safeFuncCaller=this._safeFuncCaller||{};this._safeFuncCaller[Q]=
function(){return V[Q].apply(V,W)};return f(this.getRenderPromise(),function(){return U.invoke(V._safeFuncCaller,Q)})},onSetReportDataStart:function(){},onSetReportDataEnd:function(){},onResized:function(Q){},onClose:function(){},onError:function(Q){},onAddMoreAreas:function(){},onAreasPreRemoved:function(Q){},onAreasRemoved:function(Q){},destroy:function(){this._destroyAllContainers();this.inherited(arguments)}})})},"esri/dijit/geoenrichment/ReportPlayer/config":function(){define(["esri/kernel"],
function(t){function q(l){l=l.split(".");return Number((Number(l[0])+Number(l[1])/100).toFixed(2))}t=Math.max(q("3.36"),q(t.version)).toFixed(2);return{jsapiVersion:t,esriDijitCssUrl:"https://js.arcgis.com/"+t+"/dijit/themes/claro/claro.css",esriCssUrl:"https://js.arcgis.com/"+t+"/esri/css/esri.css",playerSourceRootUrl:"https://js.arcgis.com/"+t+"/",configScriptText:null,env:"prod",isPlayerOnServer:!1,updateVariableInfoFromDataXml:!0,runReportTask:{cacheResult:!0,ignoreErrors:!0,secondAttempt:!0},
maps:{maxNumberOfMapsShownAtTheSameTime:6},charts:{showErrorIfHasUnavailableData:!1},tables:{leaveEmptyCellsUponError:!0,showUnavailableData:!0},createImageCommand:{skipSavingFile:!1},createPDFCommand:{skipSavingFile:!1,skipCreditConsumption:!1},createPlayerCommand:{loadMapPortalItems:!0,compressData:!1,prettifyDataJson:!1,skipCreditConsumption:!1},exportToExcel:{skipSavingFile:!1},modules:{exportCommands:!0,complexCellTooltips:!0,paths:{panoramicViewer:null}},generalization:{factor:-1,maxVerticesInAllFeatures:1E5,
numVerticesPerFeature:5E4}}})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_CommandSupport":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/PlayerCommands esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),function(t,q,l,k,f,e,a){return t(null,{_initCommands:function(){a.isMobileDevice()||!e.modules.exportCommands?this.playerToolbar.notifyCommandButtonsAdded():
k(this.dataProvider.getCommands&&this.dataProvider.getCommands(),function(b){this._createCommandButtons(b);this.playerToolbar&&this.playerToolbar.notifyCommandButtonsAdded()}.bind(this))},_lastNonPrintCommandId:null,_executeExportCallback:null,_executePrintCallback:null,_createCommandButtons:function(b){function d(m){var p=new l,n=new l;c.onCommandSettingsShown(p.promise);c._saveVisualState();k(c._getPrintableContainer({commandId:m,showDialog:!0}),function(r){if(r){var u=r.getSelectedCommandId();
u&&u!==f.PRINT&&(c._lastNonPrintCommandId=u);k(c._executeCommand(u,{printableContainer:r}),n.resolve,n.reject)}else k(c._applySavedVisualState(),function(){c.onCommandCanceled();n.resolve()})}).always(p.resolve);return n.promise}var c=this;if(b&&b.length){var g,h=b.filter(function(m){return m.id===f.PRINT?(g=m,!1):!0});h.length&&(this._executeExportCallback=function(){return d(c._lastNonPrintCommandId||h[0].id)},this._createCommandButton(h[0],this._executeExportCallback));g&&(this._executePrintCallback=
function(){return d(g.id)},this._createCommandButton(g,this._executePrintCallback))}},executeExport:function(){return this._executeExportCallback&&this._executeExportCallback()},executePrint:function(){return this._executePrintCallback&&this._executePrintCallback()},_createCommandButton:function(b,d){return this.playerToolbar&&this.playerToolbar.createCommandButton(b,d)},getCommandExportDialogSettings:function(){return this._getPrintDialogSettings()},executeCommand:function(b,d){d=d||{};this._saveVisualState();
var c=this._viewModel.dynamicReportInfo.fieldData;!this.isPlayerOnServer||b!==f.PDF&&b!==f.IMAGE||(d.exportSettings=q.mixin({},c.reportInfo&&c.reportInfo.exportSettings,d.exportSettings));var g=this;return k(this._getPrintableContainer({commandId:b,showDialog:!1,exportSettings:d.exportSettings}),function(h){return g._executeCommand(b,q.mixin({printableContainer:h},d))})},_executeCommand:function(b,d){function c(){k(g.dataProvider.executeCommand&&g.dataProvider.executeCommand(b,g,d,function(n){g.onCommandProgress(n)}),
m.resolve,m.reject)}var g=this,h=this._viewModel.dynamicReportInfo.fieldData;b!==f.PDF&&b!==f.DYNAMIC_HTML||!h.runReportTaskIDs||(d.creditsTaskIDs=h.runReportTaskIDs);var m=new l;this.isPlayerOnServer?c():setTimeout(c);var p=m.promise.then(function(n){return k(g._applySavedVisualState(),function(){return n})});this.onCommandStart(p,b);this._showWaiting(p,"executeCommand");p.always(function(){g.onCommandEnd(p)});return p},_visualStateMemo:null,_saveVisualState:function(){this._visualStateMemo=this.getVisualState()},
_applySavedVisualState:function(){var b=this;return this.setVisualState(this._visualStateMemo).then(function(){b._visualStateMemo=null})},onCommandSettingsShown:function(b){},onCommandCanceled:function(){},onCommandStart:function(b,d){},onCommandProgress:function(b){},onCommandEnd:function(b){}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerCommands":function(){define([],function(){var t={HTML:"createHTML",PDF:"createPDF",PRINT:"print",DYNAMIC_HTML:"createDynamicHTML",IMAGE:"createImage",EXCEL:"exportToExcel",
isSupported:function(q){for(var l in t)if(t[l]===q)return!0;return!1}};return t})},"esri/dijit/geoenrichment/utils/DeviceUtil":function(){define(["dojo/sniff","dojo/domReady!"],function(t){var q={},l=function(){var f=window,e=f.navigator.platform,a=f.navigator.userAgent,b={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!f.cordova&&!f.phonegap),phonegap:!(!f.cordova&&!f.phonegap),electron:!1,nwjs:!1},d=f.screen.width,c=
f.screen.height,g=a.match(/(Android);?[\s\/]+([\d.]+)?/),h=a.match(/(iPad).*OS\s([\d_]+)/),m=a.match(/(iPod)(.*OS\s([\d_]+))?/),p=!h&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),n=0<=a.indexOf("MSIE ")||0<=a.indexOf("Trident/"),r=0<=a.indexOf("Edge/"),u=0<=a.indexOf("Gecko/")&&0<=a.indexOf("Firefox/"),v="Win32"===e,y=0<=a.toLowerCase().indexOf("electron"),A="undefined"!==typeof nw&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.nw;e="MacIntel"===
e;var C="1024x1366 1366x1024 834x1194 1194x834 834x1112 1112x834 768x1024 1024x768".split(" ");!h&&e&&t("touch")&&0<=C.indexOf(d+"x"+c)&&((h=a.match(/(Version)\/([\d.]+)/))||(h=[0,1,"13_0_0"]),e=!1);b.ie=n;b.edge=r;b.firefox=u;g&&!v&&(b.os="android",b.osVersion=g[2],b.android=!0,b.androidChrome=0<=a.toLowerCase().indexOf("chrome"));if(h||p||m)b.os="ios",b.ios=!0;p&&!m&&(b.osVersion=p[2].replace(/_/g,"."),b.iphone=!0);h&&(b.osVersion=h[2].replace(/_/g,"."),b.ipad=!0);m&&(b.osVersion=m[3]?m[3].replace(/_/g,
"."):null,b.ipod=!0);b.ios&&b.osVersion&&0<=a.indexOf("Version/")&&"10"===b.osVersion.split(".")[0]&&(b.osVersion=a.toLowerCase().split("version/")[1].split(" ")[0]);b.webView=!(!(p||h||m)||!a.match(/.*AppleWebKit(?!.*Safari)/i)&&!f.navigator.standalone)||f.matchMedia&&f.matchMedia("(display-mode: standalone)").matches;b.webview=b.webView;b.standalone=b.webView;b.desktop=!(b.ios||b.android)||y||A;b.desktop&&(b.electron=y,b.nwjs=A,b.macos=e,b.windows=v,b.macos&&(b.os="macos"),b.windows&&(b.os="windows"));
b.pixelRatio=f.devicePixelRatio||1;return b}();q.device=l;q.isMobileDevice=function(){return!l.desktop};q.isPCWithTouchScreen=function(){return l.desktop&&t("touch")};q.isLandscape=function(){return 90===Math.abs(window.orientation)};var k=null;q.isWebLayout=function(){if(!k){var f=document.createElement("div");f.style="visibility:hidden;height:1in;width:1in;position:absolute;left: -100%;top:-100%;";document.body.appendChild(f);k=f.offsetHeight;f.parentNode.removeChild(f)}f=k;f*=7;var e=document.body.offsetWidth;
if(e>=f)return!0;var a=document.body.offsetHeight;return e>=a&&Math.sqrt(e*e+a*a)>=f?!0:!1};q.press=l.desktop?"mousedown":"touchstart";q.release=l.desktop?"mouseup":"touchend";q.click=l.desktop?"click":"touchend";q.clickOrRelease=l.desktop?"click, mouseup":"touchend";q.move=l.desktop?"mousemove":"touchmove";return q})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_LogoSupport":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/when","../core/annotations/supportClasses/DynamicBehaviors",
"../core/supportClasses/images/DefaultLogoLoader"],function(t,q,l,k){return t(null,{_getReportLogo:function(f,e,a){function b(){return q(d._reportData.attachmentsStore&&d._reportData.attachmentsStore.getImages(),function(c){return q(c&&c[0]&&c[0].getThumbnail(),function(g){return g||d._getDefaultLogo(e,a)})})}var d=this;switch(f){case l.ATTACHMENTS:return b();default:return this._getDefaultLogo(e,a)}},_getDefaultLogo:function(f,e){return this._reportData.customLogo||e||k.getDefaultLogo(this._viewModel.getDocumentDefaultStyles())}})})},
"esri/dijit/geoenrichment/ReportPlayer/core/annotations/supportClasses/DynamicBehaviors":function(){define([],function(){var t={ATTACHMENTS:"attachments",LOGO:"logo",toSupportedValue:function(q,l){return q===t.ATTACHMENTS?q:q||l?t.LOGO:null}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/images/DefaultLogoLoader":function(){define(["require","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/utils/ColorUtil"],function(t,q,l){return{_identifyDefaultLogoBackground:function(k){return!k||
l.isTransparent(k.backgroundColor)?"transparent":l.isLightColor(k.backgroundColor)?"light":"dark"},_loadLogo:function(k){var f=new q;t(["./"+k],function(e){f.resolve(e)});return f.promise},getDefaultLogo:function(k){switch(this._identifyDefaultLogoBackground(k)){case "light":return this._loadLogo("DefaultLogoGraphicReportDark");case "dark":return this._loadLogo("DefaultLogoGraphicReportLight");default:return this._loadLogo("DefaultLogoGraphicReportGeneric")}}}})},"esri/dijit/geoenrichment/utils/ColorUtil":function(){define(["dojo/_base/Color",
"dojox/color/_base","dojox/color/Palette"],function(t,q,l){function k(e,a,b){return Math.round((e&255)*(1-b)+(a&255)*b)}var f={toCSSColor:function(e,a,b){"string"!==typeof e||/^0x/i.test(e)||(e=t.fromString(e));if(e instanceof t)return a||1===e.a?e.toHex():e.toCss(!0);if(null==e||isNaN(e))return b?f.toCSSColor(b,a):"#000000";e="00000"+Number(e).toString(16);return"#"+e.substr(e.length-6)},toColor:function(e,a){return"object"===typeof e?(new t).setColor(e):t.fromString(f.toCSSColor(e,!1,a))},getCSSColorWithAlpha:function(e,
a){return f.toCSSColor(f.getColorWithAlpha(e,a))},getColorWithAlpha:function(e,a){e=(new t).setColor(e);e.a=a;return e},transform:function(e,a){var b=new l;b.colors=[new t(e)];return b.transform({use:void 0!==a.dl?"hsl":"hsv",dh:a.dh||0,ds:a.ds||0,dv:a.dv||0,dl:a.dl||0}).colors[0]},generateAnalogousColorScheme:function(e,a,b){return l.generators.analogous({base:e,high:a,low:b}).colors},applyColorHue:function(e,a){e=new q.Color(e);a=new q.Color(a);e=e.toHsl();var b=a.toHsl();e=q.fromHsl({h:e.h,s:0===
e.s?0:0===b.s?e.s:b.s,l:b.l});e.a=a.a;return e},getColorParams:function(e){e=new q.Color(e);var a=e.toHsv();a.l=e.toHsl().l;return a},generateGradient:function(e,a){e=e.map(f.toRGBColor);var b=[];if(0===e.length-1||1===a){e=e[0];for(var d=0;d<a;d++)b.push(e);return b}var c=1/(a-1);for(d=0;d<a;d++)b.push(f.getGradientRGBColor(e,d*c));return b},getGradientRGBColor:function(e,a,b){var d=e.length-1,c=1>d||0>=a?0:1<=a?d:-1;if(0<=c)return e[c];a*=d;c=Math.floor(a);c===d&&c--;return f.mixRGBColors(e[c],
e[c+1],a-c,b)},mixRGBColors:function(e,a,b,d){1<b?b=1:0>b&&(b=0);var c=k(e,a,b),g=k(e>>8,a>>8,b),h=k(e>>16,a>>16,b);return((d?k(e>>24,a>>24,b):0)<<24)+(h<<16)+(g<<8)+c},toRGBColor:function(e,a){e=f.toCSSColor(e,!0,a);return parseInt("0x"+e.substr(1))},getContrastColor:function(e,a,b,d){return f.isLightColor(e,d)?f.toColor(a,"#000000"):f.toColor(b,"#FFFFFF")},getHighlightColor:function(e,a){a=a||{};e=new q.Color(e);x=e.toHsl();if("darker"===a.method)x.l=50>x.l?x.l+30:x.l-20,0<x.s&&(x.s+=30);else{var b=
a.saturation||100,d=a.luminosity1||75;a=a.luminosity2||50;0===x.s?x.l=50>x.l?x.l+30:x.l-20:(x.s=b,x.l=x.l<a?d:x.l>d?a:x.l-a>d-x.l?a:d)}a=q.fromHsl(x);a.a=e.a;return a},getLightness:function(e){e=f.toRGBColor(e);return(299*(e>>16&255)+587*(e>>8&255)+114*(e&255))/1E3},isLightColor:function(e,a){return f.getLightness(e)>=(void 0===a?128:a)},colorsEqual:function(e,a){e instanceof t||(e=f.toColor(e));a instanceof t||(a=f.toColor(a));return e.a==a.a&&e.r==a.r&&e.g==a.g&&e.b==a.b},isTransparent:function(e){e=
f.toCSSColor(e);return"rgba(0,0,0,0)"===e.toLowerCase().replace(/\s/g,"")},generateRandomColor:function(e){function a(){return b+Math.round((d-b)*Math.random())}e=e||{};var b=e.min||0,d=e.max||255,c=e.randomizeAlpha?a():1;return e.grayScheme?(e=a(),new t([e,e,e,c])):new t([a(),a(),a(),c])}};return f})},"dojox/color/Palette":function(){define(["dojo/_base/lang","dojo/_base/array","./_base"],function(t,q,l){function k(d,c,g){var h=new l.Palette;h.colors=[];q.forEach(d.colors,function(m){h.colors.push(new l.Color({r:Math.min(255,
Math.max(0,"dr"==c?m.r+g:m.r)),g:Math.min(255,Math.max(0,"dg"==c?m.g+g:m.g)),b:Math.min(255,Math.max(0,"db"==c?m.b+g:m.b)),a:Math.min(1,Math.max(0,"da"==c?m.a+g:m.a))}))});return h}function f(d,c,g){var h=new l.Palette;h.colors=[];q.forEach(d.colors,function(m){m=m.toCmy();h.colors.push(l.fromCmy(Math.min(100,Math.max(0,"dc"==c?m.c+g:m.c)),Math.min(100,Math.max(0,"dm"==c?m.m+g:m.m)),Math.min(100,Math.max(0,"dy"==c?m.y+g:m.y))))});return h}function e(d,c,g){var h=new l.Palette;h.colors=[];q.forEach(d.colors,
function(m){m=m.toCmyk();h.colors.push(l.fromCmyk(Math.min(100,Math.max(0,"dc"==c?m.c+g:m.c)),Math.min(100,Math.max(0,"dm"==c?m.m+g:m.m)),Math.min(100,Math.max(0,"dy"==c?m.y+g:m.y)),Math.min(100,Math.max(0,"dk"==c?m.b+g:m.b))))});return h}function a(d,c,g){var h=new l.Palette;h.colors=[];q.forEach(d.colors,function(m){m=m.toHsl();h.colors.push(l.fromHsl(("dh"==c?m.h+g:m.h)%360,Math.min(100,Math.max(0,"ds"==c?m.s+g:m.s)),Math.min(100,Math.max(0,"dl"==c?m.l+g:m.l))))});return h}function b(d,c,g){var h=
new l.Palette;h.colors=[];q.forEach(d.colors,function(m){m=m.toHsv();h.colors.push(l.fromHsv(("dh"==c?m.h+g:m.h)%360,Math.min(100,Math.max(0,"ds"==c?m.s+g:m.s)),Math.min(100,Math.max(0,"dv"==c?m.v+g:m.v))))});return h}l.Palette=function(d){this.colors=[];d instanceof l.Palette?this.colors=d.colors.slice(0):d instanceof l.Color?this.colors=[null,null,d,null,null]:t.isArray(d)?this.colors=q.map(d.slice(0),function(c){return t.isString(c)?new l.Color(c):c}):t.isString(d)&&(this.colors=[null,null,new l.Color(d),
null,null])};t.extend(l.Palette,{transform:function(d){var c=k;if(d.use){var g=d.use.toLowerCase();0==g.indexOf("hs")?c="l"==g.charAt(2)?a:b:0==g.indexOf("cmy")&&(c="k"==g.charAt(3)?e:f)}else if("dc"in d||"dm"in d||"dy"in d)c="dk"in d?e:f;else if("dh"in d||"ds"in d)c="dv"in d?b:a;g=this;for(var h in d)"use"!=h&&(g=c(g,h,d[h]));return g},clone:function(){return new l.Palette(this)}});t.mixin(l.Palette,{generators:{analogous:function(d){var c=d.high||60,g=d.low||18;d=(t.isString(d.base)?new l.Color(d.base):
d.base).toHsv();var h=Math.max(10,95>=d.s?d.s+5:100-(d.s-95)),m=92<=d.v?d.v-9:Math.max(d.v+9,20),p=90>=d.v?Math.max(d.v+5,20):95+Math.ceil((d.v-90)/2),n=[h,1<d.s?d.s-1:21-d.s,d.s,h,h],r=[m,p,d.v,m,p];return new l.Palette(q.map([(d.h+g+360)%360,(d.h+Math.round(g/2)+360)%360,d.h,(d.h-Math.round(c/2)+360)%360,(d.h-c+360)%360],function(u,v){return l.fromHsv(u,n[v],r[v])}))},monochromatic:function(d){d=t.isString(d.base)?new l.Color(d.base):d.base;var c=d.toHsv(),g=9<c.s-30?c.s-30:c.s+30,h=c.s,m=20<c.v-
20?c.v-20:c.v+60,p=20<c.v-50?c.v-50:c.v+30;return new l.Palette([l.fromHsv(c.h,g,100-.8*(100-c.v)),l.fromHsv(c.h,h,p),d,l.fromHsv(c.h,g,p),l.fromHsv(c.h,h,m)])},triadic:function(d){d=t.isString(d.base)?new l.Color(d.base):d.base;var c=d.toHsv(),g=(c.h-157+360)%360,h=90<c.s?c.s-10:c.s+10,m=95<c.s?c.s-5:c.s+5,p=20<c.v-20?c.v-20:c.v+20,n=20<c.v-30?c.v-30:c.v+30,r=70<c.v-30?c.v-30:c.v+30;return new l.Palette([l.fromHsv((c.h+57+360)%360,20<c.s?c.s-10:c.s+10,c.v),l.fromHsv(c.h,h,n),d,l.fromHsv(g,h,p),l.fromHsv(g,
m,r)])},complementary:function(d){d=t.isString(d.base)?new l.Color(d.base):d.base;var c=d.toHsv(),g=360>2*c.h+137?2*c.h+137:Math.floor(c.h/2)-137,h=100-.9*(100-c.s),m=Math.min(100,c.s+20),p=20<c.v?c.v-30:c.v+30;return new l.Palette([l.fromHsv(c.h,Math.max(c.s-10,0),Math.min(100,c.v+30)),l.fromHsv(c.h,h,p),d,l.fromHsv(g,m,p),l.fromHsv(g,c.s,c.v)])},splitComplementary:function(d){var c=t.isString(d.base)?new l.Color(d.base):d.base,g=d.da||30;d=c.toHsv();var h=360>2*d.h+137?2*d.h+137:Math.floor(d.h/
2)-137,m=(h-g+360)%360;g=(h+g)%360;h=100-.9*(100-d.s);var p=Math.min(100,d.s+20),n=20<d.v?d.v-30:d.v+30;return new l.Palette([l.fromHsv(m,Math.max(d.s-10,0),Math.min(100,d.v+30)),l.fromHsv(m,h,n),c,l.fromHsv(g,p,n),l.fromHsv(g,d.s,d.v)])},compound:function(d){d=t.isString(d.base)?new l.Color(d.base):d.base;var c=d.toHsv(),g=360>2*c.h+18?2*c.h+18:Math.floor(c.h/2)-18,h=360>2*c.h+120?2*c.h+120:Math.floor(c.h/2)-120,m=360>2*c.h+99?2*c.h+99:Math.floor(c.h/2)-99,p=80<c.s-10?c.s-10:c.s+10,n=10<c.s-25?c.s-
25:c.s+25,r=80<c.v-20?c.v-20:c.v+20,u=Math.max(c.v,20);return new l.Palette([l.fromHsv(g,10<c.s-40?c.s-40:c.s+40,10<c.v-40?c.v-40:c.v+40),l.fromHsv(g,p,r),d,l.fromHsv(h,n,u),l.fromHsv(m,p,r)])},shades:function(d){d=t.isString(d.base)?new l.Color(d.base):d.base;var c=d.toHsv(),g=100==c.s&&0==c.v?0:c.s,h=20<=c.v-25?c.v-25:c.v+55,m=20<=c.v-75?c.v-75:c.v+5,p=Math.max(c.v-10,20);return new l.Palette([new l.fromHsv(c.h,g,20<c.v-50?c.v-50:c.v+30),new l.fromHsv(c.h,g,h),d,new l.fromHsv(c.h,g,m),new l.fromHsv(c.h,
g,p)])}},generate:function(d,c){if(t.isFunction(c))return c({base:d});if(l.Palette.generators[c])return l.Palette.generators[c]({base:d});throw Error("dojox.color.Palette.generate: the specified generator ('"+c+"') does not exist.");}});return l.Palette})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_MapSupport":function(){define(["require","dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(t,q,l,k){return q(null,{_initBuilderPromise:null,
_mapBuilder:null,_initMapBuilder:function(){var f=this;if(this._initBuilderPromise)return this._initBuilderPromise;var e=new l;t([f.isPlayerOnServer?"../core/supportClasses/map/ServerMapBuilder":"../core/supportClasses/map/MapBuilder"],function(a){f._mapBuilder=new a({getPlayerZoomScale:function(b){var d=f.getCurrentReportContainer();return d&&d.getPanelZoomScale?d.getPanelZoomScale(b):d&&d.getZoomInfo&&d.getZoomInfo().scale}});e.resolve()});return this._initBuilderPromise=e.promise},collectMaps:function(f){return this._mapBuilder?
f&&f.allAreas?this._mapBuilder.collectAllAreasMaps():this._mapBuilder.collectAreaMaps(this.getCurrentAnalysisAreaIndex()):[]},_resetMapBuilder:function(){this._mapBuilder&&this._mapBuilder.reset()},_createMap:function(f,e){e=e||{};return k(this._initMapBuilder(),function(){this._mapBuilder.setFallbackMapImageInfos(this._reportData.mapImageInfos);return this._mapBuilder.createMap(f,{reportData:this._reportData,areaIndex:e.areaIndex,defaultBasemapId:this._getDefaultBasemapId()||e.defaultBasemapId,defaultBasemapName:e.defaultBasemapName,
webMapId:e.webMapId,webMapName:e.webMapName,additionalLayerInfos:e.additionalLayerInfos,calculatorFieldName:e.calculatorFieldName,pinSymbolJson:e.pinSymbolJson,areaSymbolJsons:e.areaSymbolJsons,areaSymbolRamp:e.areaSymbolRamp,locatorPointsControllers:e.locatorPointsControllers,stdPolygonsControllers:e.stdPolygonsControllers,thisAreasHighlightController:e.thisAreasHighlightController,legendController:e.legendController,fieldData:this._viewModel.dynamicReportInfo.fieldData,geClient:this._viewModel.dynamicReportInfo.geClient,
countryID:this._viewModel.dynamicReportInfo.countryID,hierarchy:this._viewModel.dynamicReportInfo.hierarchy,waitForLoad:e.waitForLoad,extent:e.extent,attachmentsStore:this._viewModel.dynamicReportInfo.attachmentsStore,onPanContainer:function(a,b){}})}.bind(this))},_getDefaultBasemapId:function(){return null}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_PageNavigationSupport":function(){define("dojo/_base/declare dojo/on dojo/dom-class dojo/dom-geometry dojo/dom-style ../PlayerResizeModes ../PlayerViewModes esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,q,l,k,f,e,a,b,d,c){c=c.geoenrichment.dijit.ReportPlayer.ReportPlayer;return t(null,{_currentPageIndex:null,_initPageNavigationControls:function(){var g=this;q(this.prevPageButton,"click",function(){g._showPrevPage()});q(this.nextPageButton,"click",function(){g._showNextPage()});b.hide(this.sidePageNavigator);d.setTooltipToNode(this.prevPageButton,c.previousPage);d.setTooltipToNode(this.nextPageButton,c.nextPage)},showPageAt:function(g){this.viewMode!==a.FULL_PAGES||this.isPlayerOnServer||
(g=Math.max(0,g),this._currentPageIndex=g=Math.min(this.getCurrentReportContainer().getNumberOfPages()-1,g),this.getCurrentReportContainer().showPageAt(g),this._updatePageNavigator())},_updatePageNavigator:function(){if(this.playerToolbar){var g=this.getCurrentReportContainer()&&this.getCurrentReportContainer().getNumberOfPages&&this.viewMode===a.FULL_PAGES;this.playerToolbar.setPageControlsVisible(g);if(g){g=this.getCurrentReportContainer().getNumberOfPages();var h=1<g;h&&this._provideSideNavigationNodes();
b.display(this.sidePageNavigator,h);h&&(l[0===this._currentPageIndex?"add":"remove"](this.prevPageButton,"disabled"),l[this._currentPageIndex===g-1?"add":"remove"](this.nextPageButton,"disabled"),this.resizeMode===e.FIT_WINDOW&&(h=k.position(this.getCurrentReportContainer().stackContainer),f.set(this.sidePageNavigator,"left",Math.min(h.x+h.w+20,document.body.clientWidth-70)+"px"),f.set(this.sidePageNavigator,"top",Math.max(60,h.y+10)+"px")));this.playerToolbar.updatePageSelect(g,this._currentPageIndex)}else b.hide(this.sidePageNavigator)}},
_provideSideNavigationNodes:function(){var g=this;this.sidePageNavigator||(this.sidePageNavigator=b.create("div",{"class":"reportPlayer_sidePageNavigator"},this.domNode),this.prevPageButton=b.create("div",{"class":"reportPlayer_paginationArrowUp"},this.sidePageNavigator),this.nextPageButton=b.create("div",{"class":"reportPlayer_paginationArrowDown"},this.sidePageNavigator),q(this.prevPageButton,"click",function(){g._showPrevPage()}),q(this.nextPageButton,"click",function(){g._showNextPage()}),d.setTooltipToNode(this.prevPageButton,
c.previousPage),d.setTooltipToNode(this.nextPageButton,c.nextPage))},_showPrevPage:function(){0!==this._currentPageIndex&&(this._currentPageIndex--,this.showPageAt(this._currentPageIndex))},_showNextPage:function(){this._currentPageIndex!==this.getCurrentReportContainer().getNumberOfPages()-1&&(this._currentPageIndex++,this.showPageAt(this._currentPageIndex))}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerResizeModes":function(){define([],function(){var t={AUTO:"auto",FIT_WINDOW:"fitWindow",MANUAL:"manual",
isSupported:function(q){for(var l in t)if(t[l]===q)return!0;return!1},toSupportedValue:function(q){return t.isSupported(q)?q:t.FIT_WINDOW}};return t})},"esri/dijit/geoenrichment/ReportPlayer/PlayerViewModes":function(){define([],function(){var t={FULL_PAGES:"fullPages",PANELS_IN_SLIDES:"panelsInSlides",PANELS_IN_STACK:"panelsInStack",PANELS_IN_STACK_ALL:"panelsInStackAll",isSupported:function(q){for(var l in t)if(t[l]===q)return!0;return!1},toSupportedValue:function(q){return t.isSupported(q)?q:t.FULL_PAGES},
isMobileSupported:function(q){return q===t.PANELS_IN_SLIDES||q===t.PANELS_IN_STACK||q===t.PANELS_IN_STACK_ALL},isStackLike:function(q){return q===t.PANELS_IN_STACK||q===t.PANELS_IN_STACK_ALL},isStack:function(q){return q===t.PANELS_IN_STACK||q===t.PANELS_IN_STACK_ALL}};return t})},"esri/dijit/geoenrichment/utils/DomUtil":function(){define("dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/query esri/dijit/geoenrichment/Deferred dojo/domReady!".split(" "),function(t,
q,l,k,f,e,a){function b(n,r){Array.isArray(n)?n.forEach(r):r(n);return n}function d(n,r,u){var v=!1,y=function(A){!A||u&&!u(A)||(A.parentNode===r?v=!0:y(A.parentNode))};y(n);return v}function c(n){return!h.isHidden(n)&&"none"!==f.get(n,"display")&&!q.contains(n,"dijitHidden")}function g(){m||(m=l.create("div",{"class":"esriGEOffscreen"},document.body));return m}var h={isHidden:function(n){return n&&q.contains(n,"esriGEHidden")},hasVisibleChildren:function(n){if(!n||!n.children.length)return!1;for(var r=
0;r<n.children.length;r++)if(!h.isHidden(n.children[r]))return!0;return!1},hide:function(n){return h.addTag(n,"esriGEHidden")},show:function(n){return h.removeTag(n,"esriGEHidden")},display:function(n,r){return h[r?"show":"hide"](n)},addTag:function(n,r){return b(n,function(u){u&&q.add(u,r)})},removeTag:function(n,r){return b(n,function(u){u&&q.remove(u,r)})},getChildIndex:function(n,r){if(!n||!n.children||!r)return-1;for(var u=0;u<n.children.length;u++)if(n.children[u]===r)return u;return-1},isChildOf:function(n,
r){return d(n,r)},isNodeInLayout:function(n){return d(n,document.body,function(r){return c(r)})},isNodeVisible:function(n){return d(n,document.body,function(r){return c(r)&&"hidden"!==f.get(r,"visibility")})},isNodeOnscreen:function(n){return d(n,document.body,function(r){return!q.contains(r,"esriGEOffscreen")})},enableContent:function(n,r,u){if(n){u=u||{};var v=n.children.length-1;if(!(0>v||(v=n.children[v],q.contains(v,"esriGEDisabledContent")||(v=null),v&&n.removeChild(v),r)))return v=l.create("div",
{"class":"esriGEDisabledContent"+(u.overlayClass?" "+u.overlayClass:"")},n),u.textContent&&(v.textContent=u.textContent),!1!==u.fitParent&&(n=k[u.marginBox?"getMarginBox":"getContentBox"](n).h)&&f.set(v,{height:n+"px",marginTop:-n+"px"}),v}},enableContentAbsolute:function(n,r,u){if(n){u=u||{};var v=f.get(n,"position");"relative"===v||"absolute"===v||r||f.set(n,"position","relative");return h.enableContent(n,r,{overlayClass:"esriGEAbsoluteStretched"+(u.overlayClass?" "+u.overlayClass:"")+(u.isTransparent?
" esriGEDisabledContentTransparent":""),fitParent:!1,textContent:u.textContent})}}},m;h.hideNodeInBackground=function(n,r){if(n){if(n._hideNodeInBackgroundUndoController)return n._hideNodeInBackgroundUndoController;var u=l.create("div",null,n,"after"),v=l.create("div",{style:"position: absolute; left: 0px; top: 0px;"},g());l.place(n,v);r="DomUtil.hideNodeInBackground"+(r?"."+r:"");t.set(u,"_bg_memo_node",r);t.set(v,"_bg_temp_node",r);r={remove:function(){u&&(u.parentNode&&l.place(n,u,"replace"),l.destroy(u),
l.destroy(v),m.children.length||(l.destroy(m),m=null),u=null,delete n._hideNodeInBackgroundUndoController)}};return n._hideNodeInBackgroundUndoController=r}};h.showNodeFromBackground=function(n){n&&n._hideNodeInBackgroundUndoController&&n._hideNodeInBackgroundUndoController.remove()};h.noTransformPosition=function(n){function r(A){for(var C={x:0,y:0};A.offsetParent;)C.x+=A.offsetLeft,C.y+=A.offsetTop,A=A.offsetParent,C.x+=f.get(A,"borderLeftWidth"),C.y+=f.get(A,"borderTopWidth");return C}function u(A){return f.get(A,
"width")+f.get(A,"paddingLeft")+f.get(A,"paddingRight")+f.get(A,"borderLeftWidth")+f.get(A,"borderRightWidth")}function v(A){return f.get(A,"height")+f.get(A,"paddingTop")+f.get(A,"paddingBottom")+f.get(A,"borderTopWidth")+f.get(A,"borderBottomWidth")}if(n){if(n instanceof SVGElement&&n.getBBox){var y=(y=n.ownerSVGElement&&n.ownerSVGElement.parentNode)&&r(y);n=n.getBBox();return{x:(n.x||0)+y.x,y:(n.y||0)+y.y,w:n.width||0,h:n.height||0}}y=r(n);return{x:y.x,y:y.y,w:u(n),h:v(n)}}};h.getNodesBox=function(n,
r){if(!n||!n.length)return null;r=r||{};for(var u=1E6,v=-1E6,y=1E6,A=-1E6,C=0;C<n.length;C++){var E=n[C];E=r.ignoreTranformation?h.noTransformPosition(E):k.position(E);u=Math.min(u,E.x);y=Math.min(y,E.y);v=Math.max(v,E.x+E.w);A=Math.max(A,E.y+E.h)}n={x:u,y:y,w:v-u,h:A-y};r.originNode&&(r=r.ignoreTranformation?h.noTransformPosition(r.originNode):k.position(r.originNode),n.x-=r.x,n.y-=r.y);return n};h.traverseChildren=function(n,r){function u(v){if(v&&v.children)for(var y=0;y<v.children.length;y++){var A=
v.children[y];if(r(A))break;u(A)}}u(n)};h.scrollToListNode=function(n,r,u){var v=r.offsetTop+r.clientHeight,y=v-(n.scrollTop+n.clientHeight);0<y&&(n.scrollTop+=y);u&&(v-=r.clientHeight-u.offsetTop,y=n.scrollTop-v,0<y&&(n.scrollTop-=y))};var p;h.getScrollbarSize=function(){if(!p){var n=l.create("div",null,document.body);n.style.width="100px";n.style.height="100px";n.style.overflow="scroll";n.style.position="absolute";n.style.top="9999px";p={w:n.offsetWidth-n.clientWidth,h:n.offsetHeight-n.clientHeight};
l.destroy(n)}return p};h.hasScrollbars=function(n){var r=f.getComputedStyle(n);return{w:"scroll"===r.overflowX||n.offsetWidth>n.clientWidth&&"auto"===r.overflowX,h:"scroll"===r.overflowY||n.offsetHeight>n.clientHeight&&"auto"===r.overflowY}};h.getMeasureContext=function(n){n=n||{};n.style=n.style?n.style+" ":"";n.style+="display: inline-block; position: absolute; left: 0; top: 0;";return{div:l.create("div",n,document.body),measureText:function(r){this.div.innerHTML=r;r=k.getMarginBox(this.div);delete r.l;
delete r.t;return r},destroy:function(){l.destroy(this.div)}}};h.getTextBox=function(n,r){r=h.getMeasureContext(r);n=r.measureText(n);r.destroy();return n};h.getNodeFontFamily=function(n){return(n=f.get(n,"fontFamily")||f.getComputedStyle(n).fontFamily)&&n.replace(/'|"/g,"").split(",")[0]};h.getNodeFontSize=function(n){return f.toPixelValue(n,f.get(n,"fontSize"))};h.stealFocus=function(){var n=new a;try{var r=l.create("input",{type:"text",style:"position: absolute; left: 0px; top: 0px;"});l.place(r,
document.body);r.select();l.destroy(r)}catch(u){}setTimeout(n.resolve,0);return n.promise};h.getWindowBox=function(){for(var n=[],r=0,u=document.body.children.length;r<u;r++){var v=document.body.children[r];h.isHidden(v)||(h.hide(v),n.push(v))}r={w:document.body.clientWidth,h:document.body.clientHeight};n.forEach(function(y){h.show(y)});return r};h.isBodyLtr=function(){return"ltr"===(document.body.dir||"ltr").toLowerCase()};h.setAttribute=function(n,r,u){return 2===arguments.length?t.set(n,r):t.set(n,
r,u)};h.getAttribute=function(n,r,u){return 2===arguments.length?t.get(n,r):t.get(n,r,u)};h.addClass=function(n,r){q.add(n,r)};h.removeClass=function(n,r){q.remove(n,r||"")};h.toggleClass=function(n,r,u){q[u?"add":"remove"](n,r||"")};h.replaceClass=function(n,r,u){return q.replace(n,r,u)};h.containsClass=function(n,r){return q.contains(n,r)};h.getStyle=function(n,r){return f.get(n,r)};h.setStyle=function(n,r,u){return 2===arguments.length?f.set(n,r):f.set(n,r,u)};h.getStylePixelValue=function(n,r){n=
h.getStyle(n,r);return"number"===typeof n?n:parseFloat(n)||0};h.getComputedStyle=function(n){return n&&1===n.nodeType&&window.getComputedStyle(n)};h.position=function(n,r){return k.position(n,r)};h.getMarginBox=function(n,r){return k.getMarginBox(n,r)};h.getMarginExtents=function(n,r){return k.getMarginExtents(n,r)};h.getContentBox=function(n,r){return k.getContentBox(n,r)};h.getPadBorderExtents=function(n,r){return k.getPadBorderExtents(n,r)};h.getPadExtents=function(n,r){return k.getPadExtents(n,
r)};h.getBorderExtents=function(n,r){return k.getBorderExtents(n,r)};h.docScroll=function(){return k.docScroll()};h.create=function(n,r,u,v){return l.create(n,r,u,v)};h.toDom=function(n){return l.toDom(n)};h.place=function(n,r,u){return l.place(n,r,u)};h.empty=function(n){return l.empty(n)};h.destroy=function(n){return l.destroy(n)};h.query=function(n,r){n=e(n,r);r=[];for(var u=0,v=n.length;u<v;u++)r.push(n[u]);return r};return h})},"esri/dijit/geoenrichment/utils/TooltipUtil":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dojo/mouse dojo/sniff dijit/Tooltip dijit/place dojox/gfx ./DeviceUtil ./DnDUtil ./DomUtil ./MouseUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/domReady!".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p,n,r,u){function v(){}var y={},A=t(c._MasterTooltip,{_customClasses:null,_customStyle:null,_orientKey:null,addCustomClasses:function(z){z&&(l.add(this.domNode,z),this._customClasses=z)},setCustomStyle:function(z){this._customStyle=z},show:function(z,H,G,I,L,N,O){if(!this.aroundNode||this.aroundNode!==H||this.containerNode.innerHTML!=z)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{"string"===typeof z?this.containerNode.innerHTML=z:(this.containerNode.innerHTML=
"",k.place(z.domNode||z,this.containerNode));L&&this.set("textDir",L);this.containerNode.align=I?"right":"left";var R=g.around(this.domNode,H,G&&G.length?G:c.defaultPosition,!I,q.hitch(this,"orient")),S=R.aroundNodePos;"M"==R.corner.charAt(0)&&"M"==R.aroundCorner.charAt(0)?(this.connectorNode.style.top=S.y+(S.h-this.connectorNode.offsetHeight>>1)-R.y+"px",this.connectorNode.style.left=""):"M"==R.corner.charAt(1)&&"M"==R.aroundCorner.charAt(1)?this.connectorNode.style.left=S.x+(S.w-this.connectorNode.offsetWidth>>
1)-R.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");this._drawBackground();this.domNode.style.opacity="0";this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=H;this.onMouseEnter=N||v;this.onMouseLeave=O||v}},orient:function(z,H,G,I,L){this.connectorNode.style.top="";var N=I.h;I=I.w;z.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft",
"TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[this._orientKey=H+"-"+G];this.addCustomClasses(this._customClasses);this.domNode.style.width="auto";var O=f.position(this.domNode);O.w=Math.ceil(O.w);if(d("ie")||d("trident"))O.w+=2;f.setMarginBox(this.domNode,{w:Math.min(Math.max(I,1),O.w)});"B"==G.charAt(0)&&"B"==H.charAt(0)?(z=f.position(z),H=this.connectorNode.offsetHeight,
z.h>N?(this.connectorNode.style.top=N-(L.h+H>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(L.h/2-H/2,0),z.h-H)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");this._drawBackground();return Math.max(0,O.w-I)},_surface:null,_surfaceContainer:null,_drawBackground:function(){if(this._orientKey){var z=this.domNode.clientWidth,H=this.domNode.clientHeight,G=f.position(this.domNode),I=f.position(this.connectorNode),
L=f.position(this.containerNode);I.x-=G.x;I.y-=G.y;L.x-=G.x;L.y-=G.y;L.x+=1;L.y+=1;L.w-=2;L.h-=2;this._surface&&this._surface.destroy();this._surfaceContainer&&k.destroy(this._surfaceContainer);G=this._surfaceContainer=k.create("div",{"class":"esriGEAbsoluteStretched"},this.domNode,"first");G.style.pointerEvents="none";z=this._surface=h.createSurface(G,z,H);H=[{x:L.x,y:L.y},{x:L.x+L.w,y:L.y},{x:L.x+L.w,y:L.y+L.h},{x:L.x,y:L.y+L.h},{x:L.x,y:L.y}];G=I.x+I.w/2;I=I.y+I.h/2;switch(this._orientKey){case "BL-TL":case "BM-TM":case "BR-TR":L=
[{x:G-5,y:L.y},{x:G,y:I},{x:G+5,y:L.y}];H.splice.apply(H,[1,0].concat(L));break;case "ML-MR":case "BL-BR":L=[{x:L.x+L.w,y:I-5},{x:G,y:I},{x:L.x+L.w,y:I+5}];H.splice.apply(H,[2,0].concat(L));break;case "TM-BM":case "TL-BL":case "TR-BR":L=[{x:G+5,y:L.y+L.h},{x:G,y:I},{x:G-5,y:L.y+L.h}];H.splice.apply(H,[3,0].concat(L));break;case "MR-ML":case "BR-BL":L=[{x:L.x,y:I+5},{x:G,y:I},{x:L.x,y:I-5}],H.splice.apply(H,[4,0].concat(L))}L=z.createPolyline(H);I="function"===typeof this._customStyle?this._customStyle():
this._customStyle;L.setFill(I&&I.backgroundColor||"white").setStroke({color:"#d3d3d3",width:1,join:"round"});I&&I.color&&(this.containerNode.style.color=I.color)}}}),C={show:function(z,H,G,I,L){"string"===typeof G&&(G=[G]);G=G&&G.map(function(O){return{after:"after-centered",before:"before-centered"}[O]||O});var N=new A;L&&N.setCustomStyle(L);N.addCustomClasses(I);N.show(z,H,G);return N}};y.setTooltipToNode=function(z,H,G){function I(){!L&&y.showTooltipForNode(z,H,G)}G=G||{};if(z&&!u.isPlayerOnServer&&
(y.hideTooltipForNode(z),z.__setTooltipToNodeMouseEnterHandle&&z.__setTooltipToNodeMouseEnterHandle.remove(),H)){var L=!1;m.isMobileDevice()?z.__setTooltipToNodeMouseEnterHandle=p.addNoDragClickHandler(z,I):z.__setTooltipToNodeMouseEnterHandle=a(z,b.enter,I);G.showTooltip&&I();return{remove:function(){H=null;y.hideTooltipForNode(z)},suspend:function(){y.hideTooltipForNode(z);L=!0},resume:function(){L=!1},refresh:function(){z._shownTooltip&&I()}}}};y.showTooltipForNode=function(z,H,G){function I(){y.hideTooltipForNode(z);
var R=Array.isArray(G.classes)?G.classes.join(" "):G.classes;R=(R||"")+" esriGETooltip";G.notRestricted&&(R+=" notRestricted");z._shownTooltip=N=C.show(L,z,G.position||["after","before"],R,G.style)}G=G||{};if(z&&!u.isPlayerOnServer){z.title="";y.hideTooltipForNode(z);var L="function"==typeof H?H():H;if(L){"string"===typeof L&&G.textAlign&&(L="\x3cdiv class\x3d'"+("start"===G.textAlign?"esriGEStart":"end"===G.textAlign?"esriGEEnd":"")+"'\x3e"+L+"\x3c/div\x3e");l.add(z,"esriGESimpleTextTooltip");var N;
I();var O=y.hideTooltipForNode.bind(y,z);H=function(R,S){var U=setInterval(R,S);N.own({remove:function(){clearInterval(U)}})};m.isMobileDevice()?N.own(a(document.body,"touchstart",function(R){!r.isMouseOver(z,{event:R})&&O()})):N.own(a.once(z,b.leave,function(){!G.stayOnHover&&O()}));G.ignoreNodeRemoval||H(function(){!n.isNodeInLayout(z)&&O()},300);m.isMobileDevice()||(H(function(){G.stayOnHover&&r.isMouseOver(N.domNode)||r.isMouseOver(z)||O()},300),N.own(a(z,"click",function(R){G.hideOnClick?O():
!z._shownTooltip&&I()})),G.stayOnHover&&N.own(a(N.domNode,b.leave,O)));return z._shownTooltip}}};y.hideTooltipForNode=function(z){z&&z._shownTooltip&&(l.remove(z,"esriGESimpleTextTooltip"),z._shownTooltip.destroy(),delete z._shownTooltip)};var E,F;y.autoTooltip=function(z){u.isPlayerOnServer||a(z,".TrimWithEllipses:mouseover",function(){if(this!==E&&this.offsetWidth<this.scrollWidth){var H=function(){E=null;F&&(F.tooltip.destroy(),F.mouseOutH.remove(),F.mouseMoveH.remove(),F=null)};H();E=this;F={tooltip:C.show(E.textContent,
E,["above","below"]),mouseOutH:a.once(E,"mouseout, mousedown, touchstart",H),mouseMoveH:a(document.body,"mousemove",function(){r.isMouseOver(E)||H()})}}})};y.showClosableTooltip=function(z){var H="rtl"===document.dir&&"after"!==z.position||"rtl"!==document.dir&&"after"===z.position,G=B(z.message,z.tooltipClass,z.position,H);return w(G,z.node,z.timeout,H,z.onClosed)};y.removeClosableTooltip=function(z){z&&z._removeFunc&&z._removeFunc()};var B=function(z,H,G,I){function L(){var U=k.create("div",{"class":"esriGEClosableTooltipTip"},
O);l.add(U,I?"esriGEClosableTooltipTipRight":"esriGEClosableTooltipTipLeft")}function N(){R=k.create("div",{"class":"esriGEClosableTooltipBody"},O);k.create("div",{innerHTML:z,"class":"esriGEClosableTooltipLabel"},R);S=k.create("div",{"class":"esriGEClosableTooltipCloseButton"},R)}var O=k.create("div",{"class":"esriGEClosableTooltip esriGENonSelectable"+(H?" "+H:"")},document.body),R,S;"after"!==G?(N(),L()):(L(),N());O.style.position="fixed";return{tooltip:O,body:R,closeButton:S}},w=function(z,H,
G,I,L){function N(){var ea=f.position(H),Q=ea.x+";"+ea.y+";"+ea.w+";"+ea.h;Q!==O&&(O=Q,Q=f.getMarginBox(z.tooltip),e.set(z.tooltip,{left:(I?ea.x+ea.w:ea.x-Q.w)+"px",top:ea.y+ea.h/2-Q.h/2+"px"}))}var O;N();var R,S,U=function(){R&&clearTimeout(R);Z&&clearInterval(Z);da&&clearInterval(da);X&&X.remove();z.tooltip.parentNode&&z.tooltip.parentNode.removeChild(z.tooltip)};var Z=setInterval(function(){n.isNodeInLayout(H)&&H.parentNode||(S=!1,U());n.isNodeVisible(H)&&n.isNodeOnscreen(H)?(S=!0,n.show(z.tooltip)):
(S=!1,n.hide(z.tooltip))},0);var da=setInterval(function(){S&&N()},0);G&&(R=setTimeout(U,G));var X=a(z.closeButton,"click",function(){U();L&&L()});z.tooltip._removeFunc=U;return z.tooltip};y.showTooltipForNode(document.body,"Normal \x3cb\x3eBold\x3c/b\x3e \x3ci\x3eItalic\x3c/i\x3e",{});y.hideTooltipForNode(document.body);return y})},"esri/dijit/geoenrichment/utils/DnDUtil":function(){define(["dojo/on","dojo/sniff","./DeviceUtil","./KeyboardUtil"],function(t,q,l,k){var f={MOBILE_TOLERANCE:10,LONG_PRESS_TIMEOUT:500,
addNoDragClickHandler:function(e,a,b){b=b||{};return l.isMobileDevice()?f._addMobile(e,a,b):f._addPC(e,a,b)},_addPC:function(e,a,b){var d=b.tolerance||0,c,g,h=t(e,"mousedown",function(m){g&&g.remove();var p=m.clientX,n=m.clientY,r;c=t(document.body,"mousemove",function(u){if(!u.shiftKey&&!k.isCtrl(u)){var v=u.clientY;if(0<Math.abs(u.clientX-p)||0<Math.abs(v-n))r=!0}});g=t.once(document.body,"mouseup",function(u){c.remove();var v=u.clientX,y=u.clientY;!r&&Math.abs(v-p)<=d&&Math.abs(y-n)<=d&&a(u)})});
return{remove:function(){c&&c.remove();g&&g.remove();h&&h.remove()}}},_addMobile:function(e,a,b){function d(){g&&g.remove();h&&h.remove();m&&m.remove();clearTimeout(p)}var c=b.tolerance||f.MOBILE_TOLERANCE,g,h,m,p;var n=t(e,"touchstart",function(r){function u(A){return Math.abs(r.clientX-A.clientX)<c&&Math.abs(r.clientY-A.clientY)<c}d();var v;if(b.detectLongPress){var y;h=t(e,"touchmove",function(A){y=A});p=setTimeout(function(){u(y||r)&&(b.ignoreReleaseIfLongPressHappened&&(v=!0),b.longPressCallback(r))},
b.longPressTimeout||f.LONG_PRESS_TIMEOUT)}g=t.once(e,"touchend",function(A){!v&&u(A)&&a(A);d()});m=t.once(e,"touchcancel",d)});return{remove:function(){n&&n.remove();d()}}},addGlobalDragHanlder:function(e){function a(){b&&b.remove();d&&d.remove();c&&c.remove();g&&g.remove();h&&e.destroyDnDBox&&e.destroyDnDBox(h)}e.tolerance=0<e.tolerance?e.tolerance:5;var b,d,c,g,h;return t(e.node,e.downEventName||l.press,function(m){a();if(!e.onMouseDown||e.onMouseDown(m)){var p=m.clientX,n=m.clientY,r=p,u=n;b=t(document.body,
l.move,function(v){function y(){a();e.dragEnded&&e.dragEnded()}v.shiftKey||k.isCtrl(v)||!(Math.abs(p-v.clientX)>=e.tolerance||Math.abs(n-v.clientY)>=e.tolerance)||(b.remove(),e.dragStarted&&!e.dragStarted(v,v.clientX-r,v.clientY-u))||(r=v.clientX,u=v.clientY,h=e.createDnDBox&&e.createDnDBox(),d=t(document.body,l.move,function(A){e.dragMoved&&e.dragMoved(A,A.clientX-r,A.clientY-u,y);r=A.clientX;u=A.clientY}),c=t.once(document.body,q("ie")||q("trident")?"mouseup, touchend, click":"mouseup, touchend",
function(){y()}),g=t(document.body,"keyup",function(A){27==A.keyCode&&(a(),e.dragCanceled&&e.dragCanceled())}))});t.once(document.body,q("ie")||q("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){b.remove()})}})}};return f})},"esri/dijit/geoenrichment/utils/KeyboardUtil":function(){define(["dojo/on","dojo/sniff","./DomUtil"],function(t,q,l){var k={listenToKeyboardCombinationOverNode:function(f){return t(document.body,"keydown",function(e){if(!f.isCtrl||k.isCtrl(e))if(!f.isShift||
e.shiftKey)if(!f.isAlt||e.altKey)String.fromCharCode(e.keyCode).toLowerCase()!==f["char"]||f.node&&!l.isNodeInLayout(f.node)||f.callback(e)})},isCtrl:function(f){return q("mac")?f.metaKey:f.ctrlKey}};return k})},"esri/dijit/geoenrichment/utils/MouseUtil":function(){define("dojo/_base/lang dojo/on dojo/sniff dojo/touch dojo/dom-geometry ./DomUtil dojo/domReady!".split(" "),function(t,q,l,k,f,e){var a={_latestEvent:null,_setLatestEvent:function(g){a._latestEvent=g},_getLatestEvent:function(){return a._latestEvent}};
l("touch")?(q(document.body,k.press,function(g){a._setLatestEvent(c(g))}),q(document.body,k.move,function(g){a._setLatestEvent(c(g))})):q(document.body,"mousemove",function(g){a._setLatestEvent(c(g))});var b;q(document.body,"mousedown",function(){b||(b=!0,q.once(document.body,"mouseup, click",function(){b=!1}))});a.getCursorPosition=function(){return a._latestEvent};a.isMouseOver=function(g,h){var m=h&&h.event||a._latestEvent;if(!(g&&g.parentNode&&g.getBoundingClientRect&&m))return!1;if(h&&h.checkAllChildren){h=
t.mixin({},h);delete h.checkAllChildren;var p=!1;e.traverseChildren(g,function(n){if(a.isMouseOver(n,h))return p=!0});return p}return a.isMouseOverBox(f.position(g),h)};a.isMouseOverBox=function(g,h){if(!g)return!1;var m=h&&h.event||a._latestEvent;h&&h.ignoreBorderTolerance&&(h=h.ignoreBorderTolerance,g=t.mixin({},g),g.x+=h,g.y+=h,g.w-=2*h,g.h-=2*h);return g.x<=m.clientX&&g.x+g.w>=m.clientX&&g.y<=m.clientY&&g.y+g.h>=m.clientY};var d=function(g){if(g.touches){if(!g.touches.length)return g.changedTouches[0];
for(var h=g.touches[0].identifier,m,p=0;p<g.changedTouches.length;p++)if(g.changedTouches[p].identifier===h){m=g.changedTouches[p];break}return m||g.touches[0]}},c=function(g){var h=d(g);h&&(h.type=g.type);return h||g};a.fixTouchEvent=function(g){var h=d(g);h&&(g.screenX=h.screenX,g.screenY=h.screenY,g.clientX=h.clientX,g.clientY=h.clientY,g.pageX=h.pageX,g.pageY=h.pageY);return g};a.isBeingDragged=function(){return b};a.addOverOutHandler=function(g){function h(){clearTimeout(p);m&&m.remove()}var m,
p,n=q(g.node,"mouseover",function(r){function u(){a.isMouseOver(g.node)&&(g.onMouseOver(r),m=q(document.body,"mousemove",function(v){a.isMouseOver(g.node)||(h(),g.onMouseOut(v))}))}h();g.delayTimeout?p=setTimeout(u,g.delayTimeout):u()});return{remove:function(){n.remove();h()}}};a.addOutHandler=function(g,h){return q(document.body,"mousemove",function(m){a.isMouseOver(g,{checkAllChildren:!0})||h(m)})};return a})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_PrintSupport":function(){define(["require",
"dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","../ReportPlayerState"],function(t,q,l,k,f){function e(){var a=new l;t(["../printing/PrintableContainer"],function(b){a.resolve(b)});return a.promise}return q(null,{_getPrintableContainer:function(a){var b=this;f.isAnimationSuspended=!0;return b._showWaiting(e(),"loadPrintModules").then(function(d){var c=new d(b,b._viewModel);a.onShowWaiting=function(g){b._showWaiting(g,"initPrintContainer")};return k(c.initialize(a),
function(g){f.isAnimationSuspended=!1;return g?g:k(c.stop(),function(){return null})})})},_getPrintDialogSettings:function(){var a=this;return e().then(function(b){return(new b(a,a._viewModel)).getPrintDialogSettings()})}})})},"esri/dijit/geoenrichment/ReportPlayer/ReportPlayerState":function(){define([],function(){return{isImageViewerShown:!1,isViewingDataDrillingZoom:!1,isViewingDynamicSettings:!1,isAnimationSuspended:!1}})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_ReportContainersSwitcher":function(){define("dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct ../PlayerViewModes esri/dijit/geoenrichment/utils/DomUtil".split(" "),
function(t,q,l,k,f,e){var a={createContainer:function(c,g){var h=c.getCurrentAnalysisAreaIndex();c.viewMode===f.PANELS_IN_STACK_ALL&&(h=0);var m=g.getContainer(h);if(!m){switch(c.viewMode){case f.PANELS_IN_SLIDES:m=this._createPaginationReportContainer(c);break;case f.PANELS_IN_STACK:m=this._createStackReportContainer(c);break;case f.PANELS_IN_STACK_ALL:m=this._createStackReportContainerAll(c);break;default:m=this._createFullPageReportContainer(c)}m.isCurrentContainer=function(){return c.getCurrentReportContainer()===
m}}g.setContainer(m,h);return m},_createPaginationReportContainer:function(c){var g=c._viewModel;return g.layoutBuilder.createElement("reportContainerPagination",{viewModel:g,parentWidget:c,currentFeatureIndex:c.getCurrentAnalysisAreaIndex(),scaleSectionsToFit:c.scaleSlidesToFitWindow,onResized:function(h){c.playerToolbar.update();c._emitResizedEvent(h)},onPendingDataApplied:function(){c._emitResizedEvent()}},c.reportContainerDiv)},_createStackReportContainer:function(c){var g=c._viewModel,h={center:!0,
minRight:10,minBottom:10,minLeft:10,minTop:c.showToolbarInPopup?43:10};return g.layoutBuilder.createElement("reportContainerStack",{viewModel:g,parentWidget:c,currentFeatureIndex:c.getCurrentAnalysisAreaIndex(),isVertical:!0,renderOptions:h,onPendingDataApplied:function(){c._emitResizedEvent()}},c.reportContainerDiv)},_createStackReportContainerAll:function(c){var g=c._viewModel;return g.layoutBuilder.createElement("reportContainerStackAll",{viewModel:g,parentWidget:c,isVertical:!0,renderOptions:{center:!0,
minRight:10,minBottom:10,minLeft:10,minTop:c.showToolbarInPopup?43:0},comparisonSettings:c.comparisonSettings,onPendingDataApplied:function(){c._emitResizedEvent()},onSwitchToSingleAreaView:function(){c.showAnalysisAreaAt(0)}},c.reportContainerDiv)},_createFullPageReportContainer:function(c){var g=c._viewModel,h={viewModel:g,parentWidget:c,currentFeatureIndex:c.getCurrentAnalysisAreaIndex(),onPendingDataApplied:function(){c._emitResizedEvent()}};h.renderOptions={center:!0,minRight:10,minBottom:10,
minLeft:10,minTop:c.showToolbarInPopup?43:10};return g.layoutBuilder.createElement(c.getReportData().reportObject.isGraphicReport?"reportContainerGrid":"reportContainer",h,c.reportContainerDiv)}},b=t(null,{_containerInfos:null,constructor:function(){this._containerInfos=[]},getContainer:function(c){return this._getInfo(c,"container")},getContainers:function(){return this._containerInfos.map(function(c){return c.container})},getContainerIndex:function(c){return this.getContainers().indexOf(c)},setContainer:function(c,
g){q.set(c.domNode,"area-index",g);this._getInfo(g,null,c)},isLoaded:function(c){return this._getInfo(c,"loaded")},setLoaded:function(c){if(c=this._getInfo(c))c.loaded=!0},resetAllLoaded:function(){this._containerInfos.forEach(function(c){c.loaded=!1})},destroyAllContainers:function(){this._containerInfos.forEach(function(c){c.container.destroy()});this._containerInfos.length=0},_getInfo:function(c,g,h){var m=this._containerInfos[c];!m&&h&&(m=this._containerInfos[c]={container:h,loaded:!1});return g?
m&&m[g]:m}}),d=t(null,{_lastVisuals:null,reset:function(){this._lastVisuals=null},rememberCurrentContainerVisuals:function(c){this._lastVisuals=c?{scrollTop:c.getScrollableContainer&&c.getScrollableContainer().scrollTop||0,pageIndex:c.getCurrentPageIndex&&c.getCurrentPageIndex()||0,slideIndex:c.getCurrentSlideIndex&&c.getCurrentSlideIndex()||0,zoomInfo:c.getZoomInfo&&c.getZoomInfo()}:null},applyCurrentContainerVisuals:function(c){this._lastVisuals&&(c.getScrollableContainer&&(c.getScrollableContainer().scrollTop=
this._lastVisuals.scrollTop||0),c.showSlideAt&&c.showSlideAt(this._lastVisuals.slideIndex||0),c.showPageAt?c.showPageAt(this._lastVisuals.pageIndex||0):c.notifyShown(),c.setZoomInfo&&c.setZoomInfo(this._lastVisuals.zoomInfo))}});return t(null,{_containerDict:null,_visualsHelper:null,_initContainerSwither:function(){this._containerDict=new b;this._visualsHelper=new d},getCurrentReportContainer:function(){return this._currentReportContainer},getAllReportContainers:function(){return this._containerDict.getContainers()},
_destroyAllContainers:function(){this._containerDict.destroyAllContainers();this._currentReportContainer=null},_setReportContainer:function(c){c?this._resetLoadedFlags():this._visualsHelper.rememberCurrentContainerVisuals(this._currentReportContainer);this._switchToCurrentReportContainer();return!c&&this._containerDict.isLoaded(this.getCurrentAnalysisAreaIndex())?(this._resize({isPaginating:!0}),this._visualsHelper.applyCurrentContainerVisuals(this._currentReportContainer),!1):!0},_switchToCurrentReportContainer:function(){this._currentReportContainer&&
this._hideContainer(this._currentReportContainer);this._currentReportContainer=a.createContainer(this,this._containerDict);l.remove(this.domNode,"esriGEReportPlayerFullView esriGEReportPlayerPaginationView esriGEReportPlayerStackView");switch(this.viewMode){case f.PANELS_IN_SLIDES:l.add(this.domNode,"esriGEReportPlayerPaginationView");break;case f.PANELS_IN_STACK:l.add(this.domNode,"esriGEReportPlayerStackView");break;case f.PANELS_IN_STACK_ALL:l.add(this.domNode,"esriGEReportPlayerStackAllView");
break;default:l.add(this.domNode,"esriGEReportPlayerFullView")}this._showContainer(this._currentReportContainer);this._connectZoomToCurrentContainer();this.notifyShown()},_hideContainer:function(c){this.isPlayerOnServer||(c.__undoHideContainerHandle=e.hideNodeInBackground(c.domNode,"reportContainer_"+this._containerDict.getContainerIndex(c)),c.own(c.__undoHideContainerHandle))},_showContainer:function(c){!this.isPlayerOnServer&&c.__undoHideContainerHandle&&(c.__undoHideContainerHandle.remove(),delete c.__undoHideContainerHandle)},
_showAllContainers:function(){var c=this;this.getAllReportContainers().forEach(function(g){c._showContainer(g);c.reportContainerDiv.removeChild(g.domNode);k.place(g.domNode,c.reportContainerDiv)});return{undo:function(){c.getAllReportContainers().forEach(function(g){c._hideContainer(g)});c._switchToCurrentReportContainer()}}},_resetLoadedFlags:function(){this._visualsHelper.reset();this._containerDict.resetAllLoaded()},_setCurrentContainerLoaded:function(){this._visualsHelper.applyCurrentContainerVisuals(this._currentReportContainer);
this._containerDict.setLoaded(this.getCurrentAnalysisAreaIndex())}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_SmartLayoutSupport":function(){define("dojo/_base/declare dojo/dom-class dojo/on esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil ../PlayerResizeModes ../PlayerViewModes".split(" "),function(t,q,l,k,f,e,a){return t(null,{_width:0,_height:0,_measuredWinBox:null,_initSmartLayout:function(){var b=this;this.resizeMode===e.FIT_WINDOW&&this.own(l(window,
"resize, orientationchange",function(){setTimeout(function(){b._measuredWinBox=null;b.resize()})}));this._resize()},_resize:function(b){b=b||{};q.remove(this.domNode,"esriGEReportPlayerFullScreen esriGEReportPlayerAutoResize esriGEReportPlayerManualResize");switch(this.resizeMode){case e.FIT_WINDOW:return this._resize_fitWindow(b);case e.AUTO:return this._resize_auto(b);case e.MANUAL:return this._resize_manual(b)}},_resize_fitWindow:function(b){this._measuredWinBox=this._measuredWinBox||f.getWindowBox();
this._width=this._maxWidth=this._measuredWinBox.w;this._height=this._maxHeight=this._measuredWinBox.h;q.add(this.domNode,"esriGEReportPlayerFullScreen");this.domNode.style.width=this._width+"px";this.domNode.style.height=this._height+"px";this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight(this._maxHeight-this._getToolbarHeight()),this._currentReportContainer.resize(this._width,
this._height-this._getToolbarHeight()),this._emitResizedEvent(b.isPaginating))},_resize_auto:function(b){this._height=this._width=0;q.add(this.domNode,"esriGEReportPlayerAutoResize");this.domNode.style.width="auto";this.domNode.style.height="auto";this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight(this._maxHeight-this._getToolbarHeight()),
this._currentReportContainer.resize(0,0),this._emitResizedEvent(b.isPaginating))},_resize_manual:function(b){this._width=void 0!==b.width?b.width:this._width;this._height=void 0!==b.height?b.height:this._height;this._width&&this._height&&(this._maxWidth&&(this._width=Math.min(this._maxWidth,this._width)),this._maxHeight&&(this._height=Math.min(this._maxHeight,this._height)),q.add(this.domNode,"esriGEReportPlayerManualResize"),this.domNode.style.width=this._width+"px",this.domNode.style.height=this._height+
"px",this._currentReportContainer&&(this._currentReportContainer.setMaxWidth&&this._currentReportContainer.setMaxWidth(this._maxWidth||this._width),this._currentReportContainer.setMaxHeight&&this._currentReportContainer.setMaxHeight((this._maxHeight||this._height)-this._getToolbarHeight()),this._currentReportContainer.resize(this._width,this._height-this._getToolbarHeight()),this._emitResizedEvent(b.isPaginating)))},_getToolbarHeight:function(){if(this.showToolbarInPopup)return 0;var b=this.playerToolbar&&
0===this.playerToolbar.toolbarHolder.infographicsSelectDiv.children.length,d=!this.showAreaTitle,c=this._reportData&&(this._reportData.isMultiFeature||1===this._reportData.analysisAreas.length),g=this.viewMode===a.PANELS_IN_SLIDES,h=k.isMobileDevice();return b&&d&&c&&g&&h?0:50},_maxWidth:0,_maxHeight:0,setMaxWidth:function(b){this._maxWidth=b},setMaxHeight:function(b){this._maxHeight=b}})})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_ZoomSupport":function(){define(["dojo/_base/declare",
"dojo/aspect","../PlayerResizeModes","../PlayerViewModes","../PlayerZoomBehaviors"],function(t,q,l,k,f){return t(null,{_initZoomControls:function(){var e=this;this.playerToolbar.onZoomToFitPage=function(){e.getCurrentReportContainer().zoomToFitPage({showAnimation:!0})};this.playerToolbar.onZoomToFitPageWidth=function(){e.getCurrentReportContainer().zoomToFitPageWidth({showAnimation:!0})};this.playerToolbar.onZoomToFitPageHeight=function(){e.getCurrentReportContainer().zoomToFitPageHeight({showAnimation:!0})};
this.playerToolbar.onSetZoomPercent=function(a){e.getCurrentReportContainer().setZoomPercent(a,{showAnimation:!0})};this._refreshZoomControls()},_refreshZoomControls:function(){this.playerToolbar&&this.playerToolbar.setZoomSupportsInfo(this._getZoomSupportsInfo())},setBestZoom:function(){this._callZoomMethod("setBestZoom")},zoomToFitPage:function(){this._callZoomMethod("zoomToFitPage")},zoomToFitPageWidth:function(){this._callZoomMethod("zoomToFitPageWidth")},zoomToFitPageHeight:function(){this._callZoomMethod("zoomToFitPageHeight")},
resetZoom:function(){this._callZoomMethod("resetZoom")},_callZoomMethod:function(e){if(this._getZoomSupportsInfo().supported){var a=this.getCurrentReportContainer();a&&a[e]&&a[e]()}},_getZoomSupportsInfo:function(){var e={supported:!1,canFitPage:!1,canFitPageWidth:!1,canFitPageHeight:!1};this.viewMode!==k.PANELS_IN_SLIDES&&(e.supported=!0,this.resizeMode!==l.AUTO&&(e.canFitPage=!k.isStackLike(this.viewMode),e.canFitPageWidth=!0,e.canFitPageHeight=!1));return e},_updateZoomControls:function(){this._connectZoomToCurrentContainer();
this._applyDefaultZoomBehavior()},_reportContainerZoomChangedHandle:null,_connectZoomToCurrentContainer:function(){var e=this.getCurrentReportContainer();this._reportContainerZoomChangedHandle&&this._reportContainerZoomChangedHandle.remove();this._reportContainerZoomChangedHandle=e&&q.after(e,"onZoomChanged",function(){if(this.playerToolbar){var a=this.getCurrentReportContainer();a&&a.getZoomInfo&&this.playerToolbar.setZoomInfo(this.getCurrentReportContainer().getZoomInfo());this._updatePageNavigator();
this.playerToolbar.update()}}.bind(this));e&&e.own(this._reportContainerZoomChangedHandle)},_applyDefaultZoomBehavior:function(){var e=this._getZoomSupportsInfo();e.supported&&e.canFitPage&&this.defaultZoomBehavior===f.FIT_PAGE?this.zoomToFitPage():e.supported&&e.canFitPageWidth&&this.defaultZoomBehavior===f.FIT_PAGE_WIDTH?this.zoomToFitPageWidth():e.supported&&e.canFitPageHeight&&this.defaultZoomBehavior===f.FIT_PAGE_HEIGHT?this.zoomToFitPageHeight():this.resetZoom()}})})},"esri/dijit/geoenrichment/ReportPlayer/PlayerZoomBehaviors":function(){define([],
function(){var t={RESET:"reset",FIT_PAGE:"fitPage",FIT_PAGE_WIDTH:"fitPageWidth",FIT_PAGE_HEIGHT:"fitPageHeight",isSupported:function(q){for(var l in t)if(t[l]===q)return!0;return!1},toSupportedValue:function(q){return t.isSupported(q)?q:t.RESET}};return t})},"esri/dijit/geoenrichment/ReportPlayer/playerSupports/_WaitingSupport":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct ../PlayerResizeModes esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/WaitingUtil esri/dijit/geoenrichment/utils/progress/SmoothProgress".split(" "),
function(t,q,l,k,f,e,a,b,d,c){var g=t(null,{_dataProgress:0,_areaProgresses:null,_numAreas:0,constructor:function(h){q.mixin(this,h);this.reset()},reset:function(){this._dataProgress=0;this._areaProgresses={};this._fireProgress()},setLoadDataProgress:function(h){this._dataProgress=h;this._fireProgress()},setNumAreas:function(h){this._numAreas=h},setProgressForAreaAt:function(h,m){this._areaProgresses[m]=h;this._fireProgress()},finalize:function(){this.onChange(1);return a.delay(300)},_fireProgress:function(){var h=
.25*this._dataProgress,m=.75/this._numAreas,p;for(p in this._areaProgresses)h+=m*(this._areaProgresses[p]||0);h=Math.min(.999999,Math.max(0,h));this.onChange(h);this._printProgress()},_printProgress:function(){},onChange:function(h){}});return t(null,{_progressController:null,_initProgressController:function(){var h=this;this.showProgressBar&&(this._progressController=new g,(new c(this._progressController)).onChange=function(m){d.showProgressBar({value:m,node:h.domNode,position:"top"})})},_waitingCount:0,
_hideUndoHandle:null,_waitNode:null,getWaitingPromise:function(){return d.getProgressPromiseForNode(this._waitNode||this.domNode)},_showWaiting:function(h,m){var p=this;if(this.isPlayerOnServer)return h;this.onWaitingShown(h);return this.resizeMode!==e.FIT_WINDOW?(0===this._waitingCount++&&(this._updateElementsVisibility(),this._waitNode=f.create("div",{"class":"esriGEReportPlayerWaitingNode"},this.domNode.parentNode),this._waitNode.style.width=this.domNode.clientWidth?this.domNode.clientWidth+"px":
"",this._waitNode.style.height=this.domNode.clientHeight?this.domNode.clientHeight+"px":"",this._waitNode.style.position="relative",this._hideUndoHandle=b.hideNodeInBackground(this.domNode)),l(h)["finally"](function(){0===--p._waitingCount&&(p._hideUndoHandle.remove(),p._hideUndoHandle=null,f.destroy(p._waitNode),p._updateElementsVisibility())}),d.showProgressPromise(this._waitNode,h,{progressClass:"esriGEReportPlayerProgress"})):this._showWaitingFullScreen(h,m)},_showWaitingFullScreen:function(h,
m){return d.showProgressPromise(this.domNode,h,{progressClass:"esriGEReportPlayerProgress",onShowProgress:function(){this._waitingCount++;this._updateElementsVisibility()}.bind(this),onRemoveProgress:function(){if(this.domNode){this._waitingCount--;this._updateElementsVisibility();var p=this.getCurrentReportContainer();p&&!p.__isBeingAnimated&&(p.__isBeingAnimated=!0,p.domNode&&k.add(p.domNode,"esriGEReportPlayer_fadeIn1000"),p.notifyShown(),a.delay(1500).then(function(){p.__isBeingAnimated=!1;p.domNode&&
k.remove(p.domNode,"esriGEReportPlayer_fadeIn1000")}))}}.bind(this)})},onWaitingShown:function(h){}})})},"esri/dijit/geoenrichment/utils/DelayUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(t,q){return{delay:function(l,k,f){var e=new t;k="number"===typeof l?l:k;var a="function"===typeof l?l:null,b=f&&a&&a();setTimeout(function(){q(f?b:a&&a()).then(e.resolve,e.reject)},k||0);return e.promise}}})},"esri/dijit/geoenrichment/utils/WaitingUtil":function(){define("esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/ReportPlayer/config".split(" "),
function(t,q,l,k,f,e){var a={showProgress:function(b,d){e.isPlayerOnServer||b&&!b["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]&&(b["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]=l.create("div",{"class":"esriGEProgress esriGEProgressAbsolute "+(d||"")},b))},removeProgress:function(b){b&&b["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]&&(l.destroy(b["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"]),delete b["esri.dijit.geoenrichment.util.WaitingUtil.waitingDiv"])},
showProgressBar:function(b){var d=b.node;if(d){d._progressBar&&l.destroy(d._progressBar);delete d._progressBar;var c=Number(b.value);0>=c||isNaN(c)||(c=Math.min(c,1),d._progressBar=l.create("div",{"class":"esriGEWaitingMessageProgressBar esriGEWaitingMessageProgressBar_"+(b.position||"bottom")},d),f.set(d._progressBar,"width",k.position(d).w*c+"px"))}},showProgressPromise:function(b,d,c){if(!b)return d;c=c||{};void 0===b.__progressIndex&&(b.__progressIndex=0);0===b.__progressIndex&&(b.__progressDfd=
new t,a.showProgress(b,c.progressClass),c.onShowProgress&&c.onShowProgress());b.__progressIndex++;q(d)["finally"](function(){b.__progressIndex=Math.max(0,--b.__progressIndex);0===b.__progressIndex&&(b.__progressDfd&&b.__progressDfd.resolve(),delete b.__progressDfd,a.removeProgress(b),c.onRemoveProgress&&c.onRemoveProgress())});return d},getProgressPromiseForNode:function(b){return b&&b.__progressDfd&&b.__progressDfd.promise}};return a})},"esri/dijit/geoenrichment/utils/progress/SmoothProgress":function(){define(["dojo/_base/declare",
"dojo/aspect"],function(t,q){return t(null,{elasticTime:1E3,fireInterval:30,_intervalHandle:null,_progressHandle:null,_realProgress:0,_smoothProgress:0,_runAheadSpeed:2.5E-4,_currentSpeed:0,constructor:function(l){0<l.fireInterval&&(this.fireInterval=l.fireInterval);0<l.elasticTime&&(this.elasticTime=l.elasticTime);0<l.timeEstimate&&(this._runAheadSpeed=Math.min(this.fireInterval/l.timeEstimate,.5));var k=this;this._progressHandle=q.after(l,"onChange",function(f){1<=f?k._finalize():k._updateProgress(f)},
!0)},start:function(){this._updateProgress(0,!0)},_updateProgress:function(l,k){this._realProgress=Math.max(l,0);if(0===this._realProgress&&(this._smoothProgress=0,this._setIntervalHandle(!1),this.onChange(0),!k))return;this._setIntervalHandle(!0);this._currentSpeed=this._smoothProgress>=this._realProgress?this._runAheadSpeed:(this._realProgress-this._smoothProgress)*this.fireInterval/this.elasticTime},_setIntervalHandle:function(l){l!==!!this._intervalHandle&&(l?this._intervalHandle=setInterval(this._tryFireProgress.bind(this),
this.fireInterval):(clearInterval(this._intervalHandle),this._intervalHandle=null))},_tryFireProgress:function(){0!==this._currentSpeed&&(this._smoothProgress+=this._currentSpeed,this._smoothProgress=Math.min(1-this._runAheadSpeed,this._smoothProgress),this._smoothProgress>=this._realProgress&&(this._currentSpeed=this._runAheadSpeed),this.onChange(this._smoothProgress))},_finalize:function(){this._smoothProgress=this._realProgress=1;this.onChange(1)},onChange:function(l){},destroy:function(){this._progressHandle.remove();
this._setIntervalHandle(!1)}})})},"esri/dijit/geoenrichment/ReportPlayer/supportClasses/PlayerConfigurator":function(){define("../PlayerResizeModes ../PlayerZoomBehaviors ../PlayerThemes ../PlayerViewModes ../config esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),function(t,q,l,k,f,e){var a={configurePlayer:function(b,d){b._originalConfigurationSettings||(b.theme=b.theme&&l.toSupportedValue(b.theme)||l.DARK,b.viewMode=b.viewMode&&k.toSupportedValue(b.viewMode),b.resizeMode=b.resizeMode&&t.toSupportedValue(b.resizeMode)||
t.FIT_WINDOW,b.defaultZoomBehavior=b.defaultZoomBehavior&&q.toSupportedValue(b.defaultZoomBehavior),b._originalConfigurationSettings={viewMode:b.viewMode,defaultZoomBehavior:b.defaultZoomBehavior,scaleSlidesToFitWindow:b.scaleSlidesToFitWindow,showAreaTitle:b.showAreaTitle});b.viewMode=d||b._originalConfigurationSettings.viewMode||a.getDefaultViewMode(b);switch(b.viewMode){case k.FULL_PAGES:a._configure_fullPages(b);break;case k.PANELS_IN_SLIDES:a._configure_panelsInSlides(b);break;case k.PANELS_IN_STACK:a._configure_panelsInStack(b);
break;case k.PANELS_IN_STACK_ALL:a._configure_panelsInStackAll(b)}b._viewModel.setAnimationSuspended(b.viewMode===k.PANELS_IN_STACK_ALL);e.isMobileDevice()&&(f.modules.exportCommands=!1);f.modules.complexCellTooltips=b.viewMode===k.FULL_PAGES||b.viewMode===k.PANELS_IN_STACK_ALL},getDefaultViewMode:function(b){return e.isMobileDevice()&&!e.isWebLayout()?e.isLandscape()?k.PANELS_IN_SLIDES:k.PANELS_IN_STACK:k.FULL_PAGES},_configure_fullPages:function(b){b.showAreaTitle=!1!==b._originalConfigurationSettings.showAreaTitle;
b.scaleSlidesToFitWindow=!1;switch(b.resizeMode){case t.FIT_WINDOW:b.defaultZoomBehavior=b._originalConfigurationSettings.defaultZoomBehavior||(e.isMobileDevice()?q.FIT_PAGE_WIDTH:null)||q.FIT_PAGE;break;case t.AUTO:b.defaultZoomBehavior=q.RESET;break;case t.MANUAL:b.defaultZoomBehavior=b._originalConfigurationSettings.defaultZoomBehavior||q.FIT_PAGE}},_configure_panelsInSlides:function(b){b.showAreaTitle=!!b._originalConfigurationSettings.showAreaTitle;b.defaultZoomBehavior=null;switch(b.resizeMode){case t.FIT_WINDOW:b.scaleSlidesToFitWindow=
!1!==b._originalConfigurationSettings.scaleSlidesToFitWindow;break;case t.AUTO:b.scaleSlidesToFitWindow=!1;break;case t.MANUAL:b.scaleSlidesToFitWindow=!1!==b._originalConfigurationSettings.scaleSlidesToFitWindow}},_configure_panelsInStack:function(b){b.showAreaTitle=!!b._originalConfigurationSettings.showAreaTitle;b.scaleSlidesToFitWindow=!1;switch(b.resizeMode){case t.FIT_WINDOW:b.defaultZoomBehavior=q.FIT_PAGE_WIDTH;break;case t.AUTO:b.defaultZoomBehavior=q.RESET;break;case t.MANUAL:b.defaultZoomBehavior=
q.FIT_PAGE_WIDTH}},_configure_panelsInStackAll:function(b){b.showAreaTitle=!1!==b._originalConfigurationSettings.showAreaTitle;b.scaleSlidesToFitWindow=!1;switch(b.resizeMode){case t.FIT_WINDOW:b.defaultZoomBehavior=q.FIT_PAGE_WIDTH;break;case t.AUTO:b.defaultZoomBehavior=q.RESET;break;case t.MANUAL:b.defaultZoomBehavior=q.FIT_PAGE_WIDTH}},configurePlayerForCustomBuild:function(b,d){d=d||f;d.esriDijitCssUrl=b+"/dijit/themes/claro/claro.css";d.esriCssUrl=b+"/esri/css/esri.css";d.playerSourceRootUrl=
b+"/dojo/dojo.js";d.configScriptText='var dojoConfig \x3d { baseUrl: "'+b+'/", waitSeconds: 60, async: true, locale: typeof dojoConfig !\x3d\x3d "undefined" \x26\x26 dojoConfig.locale || null, packages: [{ name: "dojo", location: "./dojo" }, { name: "dijit", location: "./dijit" }, { name: "dojox", location: "./dojox" }, { name: "dgrid1", location: "./dgrid1" }, { name: "dstore", location: "./dstore" }, { name: "xstyle", location: "./xstyle" }, { name: "esri", location: "./esri" }, { name: "moment", location: "./moment", main: "moment/moment" }] }'}};
return a})},"esri/dijit/geoenrichment/ReportPlayer/PlayerThemes":function(){define([],function(){var t={LIGHT:"light",DARK:"dark",isSupported:function(q){for(var l in t)if(t[l]===q)return!0;return!1},toSupportedValue:function(q){return t.isSupported(q)?q:t.DARK}};return t})},"esri/dijit/geoenrichment/ReportPlayer/supportClasses/PlayerToFullScreenAnimator":function(){define(["esri/dijit/geoenrichment/utils/animation/AnimationUtil","esri/dijit/geoenrichment/utils/DelayUtil"],function(t,q){return{animateTo:function(l){if(!l._isAnimatedTo){l._isAnimatedTo=
!0;var k=t.animateResize({duration:300,domNode:l.domNode,startScaleX:.3,startScaleY:.3,fromOffset:{x:"c",y:"c"},toBox:{x:0,y:0,w:document.body.clientWidth,h:document.body.clientHeight}});t.animateFadeIn({domNode:l.domNode,duration:300});return k.then(function(){return q.delay(100)})}},animateFrom:function(l){if(l._isAnimatedTo){l._isAnimatedTo=!1;var k=t.animateResize({duration:300,domNode:l.domNode,endScaleX:.3,endScaleY:.3,toOffset:{x:"c",y:"c"},toBox:{x:(document.body.clientWidth-300)/2,y:(document.body.clientHeight-
200)/2,w:300,h:200}});t.animateFadeOut({domNode:l.domNode,duration:300});return k.then(function(){return q.delay(100)})}}}})},"esri/dijit/geoenrichment/utils/animation/AnimationUtil":function(){define(["dojo/dom-construct","dojo/dom-style","dojo/sniff","./Animator","esri/dijit/geoenrichment/utils/DomUtil"],function(t,q,l,k,f){var e={animateResize:function(a){function b(r){a.domNode=t.create("div",{"class":a.ghostClass},document.body);q.set(a.domNode,{width:r.w+"px",height:r.h+"px"})}function d(r,
u,v){var y=a.fromOffset.x,A=a.fromOffset.y;if("number"!==typeof y){var C=u.w*v.x;switch(y){case "l":y=0;break;case "r":y=(r.w||0)-C;break;default:y=((r.w||0)-C)/2}}if("number"!==typeof A)switch(C=u.h*v.y,A){case "t":A=0;break;case "b":A=(r.h||0)-C;break;default:A=((r.h||0)-C)/2}return{x:r.x+y,y:r.y+A}}function c(r,u,v){var y=a.toOffset.x,A=a.toOffset.y;if("number"!==typeof y){var C=r.w*v.x;switch(y){case "l":y=0;break;case "r":y=(u.w||0)-C;break;default:y=((u.w||0)-C)/2}}if("number"!==typeof A)switch(C=
r.h*v.y,A){case "t":A=0;break;case "b":A=(u.h||0)-C;break;default:A=((u.h||0)-C)/2}return{x:u.x+y,y:u.y+A}}var g=a.fromBox||(a.domFrom||a.domNode)&&f.noTransformPosition(a.domFrom||a.domNode);a.animateGhost&&b(g);var h=a.toBox||f.noTransformPosition(a.domTo);if(g&&h){var m=function(r,u){var v={x:a.startScaleX,y:a.startScaleY},y=0;"fit"===v.x&&(r.w?y=v.x=r.w/u.w:v.x=0);"fit"===v.y&&(r.h?y=Math.max(v.y=r.h/u.h,y):v.y=0);v.x=v.x||y||1;v.y=v.y||y||1;return v}(g,h),p=function(r,u){var v={x:a.endScaleX,
y:a.endScaleY},y=0;"fit"===v.x&&(u.w?y=v.x=u.w/r.w:v.x=0);"fit"===v.y&&(u.h?y=Math.max(v.y=u.h/r.h,y):v.y=0);v.x=v.x||y||1;v.y=v.y||y||1;return v}(g,h);a.fromOffset&&(g=d(g,h,m));a.toOffset&&(h=c(g,h,p));var n=l("webkit")?"webkitTransformOrigin":"transformOrigin";a.domNode.style[n]="0% 0%";return k.animateProperty({obj:a.domNode,duration:a.duration||250,properties:{__x:{start:g.x,end:h.x},__y:{start:g.y,end:h.y},__scaleX:{start:m.x||1,end:p.x},__scaleY:{start:m.y||1,end:p.y}},endFunction:function(){a.animateGhost&&
t.destroy(a.domNode);a.onEnd&&a.onEnd()},progressFunction:function(r,u){var v=l("webkit")?"webkitTransform":"transform";"__x"==r?a.domNode.style.left=u+"px":"__y"==r?a.domNode.style.top=u+"px":"__scaleX"==r?a.domNode.style[v]="scaleX("+u+") scaleY("+(a.domNode.__scaleY||1)+")":"__scaleY"==r&&(a.domNode.style[v]="scaleX("+(a.domNode.__scaleX||1)+") scaleY("+u+")")}}).promise}a.onEnd&&a.onEnd()},animateShrinkResize:function(a){a.endScaleX=a.endScaleX||.1;a.endScaleY=a.endScaleY||.05;return e.animateResize(a)},
animateFadeIn:function(a){return k.animateProperty({obj:a.domNode.style,duration:a.duration||250,properties:{opacity:{start:0,end:1}},endFunction:function(){a.onEnd&&a.onEnd()}}).promise},animateFadeOut:function(a){return k.animateProperty({obj:a.domNode.style,duration:a.duration||250,properties:{opacity:{start:1,end:0}},endFunction:function(){a.onEnd&&a.onEnd()}}).promise},animateSlide:function(a,b,d){var c=d.width;k.animateProperty({obj:a.style,duration:d.duration||250,properties:{left:{start:d.leftToRight?
0:-c,end:d.leftToRight?-c:0,units:"px"},right:{start:d.leftToRight?0:c,end:d.leftToRight?c:0,units:"px"}},endFunction:function(){d.onEnd&&d.onEnd()}});return k.animateProperty({obj:b.style,duration:d.duration||250,properties:{left:{start:d.leftToRight?c:0,end:d.leftToRight?0:c,units:"px"},right:{start:d.leftToRight?-c:0,end:d.leftToRight?0:-c,units:"px"}}}).promise},animateExpand:function(a,b,d){d=d||{};a.style.overflow="hidden";b&&f.show(a);var c=q.get(a,"height");return k.animateProperty({obj:a.style,
duration:d.duration,properties:{height:{start:b?0:c,end:b?c:0,units:"px"}},progressFunction:d.progressFunction,endFunction:function(){!b&&f.hide(a);q.set(a,"height","");q.set(a,"overflow","")}}).promise}};return e})},"esri/dijit/geoenrichment/utils/animation/Animator":function(){define(["esri/dijit/geoenrichment/Deferred","dojo/fx/easing","dojox/gfx/matrix"],function(t,q,l){function k(b){1>b.progress&&!b.isStopped?a.setTimeout(function(){if(b.isStopped)b.endFunction();else{var d=(new Date).getTime();
b.progress=1-(b.endTime-d)/b.duration;b.progress=Math.min(1,b.progress);f(b);k(b)}}):b.endFunction()}function f(b){for(var d in b.params.properties){var c=b.params.properties[d],g=c.easing?"function"===typeof c.easing?c.easing:q[c.easing]:null;g=g?g(b.progress):b.progress;var h=c.start+g*(c.end-c.start);b.obj[d]=c.units?h+c.units:h;b.progressFunction&&b.progressFunction(d,h,g)}}var e={},a={_funcs:null,setTimeout:function(b){var d=this;this._funcs?this._funcs.push(b):(this._funcs=[b],setTimeout(function(){var c=
d._funcs;d._funcs=null;c.forEach(function(g){g()})},33))}};e.animateProperty=function(b){var d={},c=new t;d.promise=c.promise;d.params=b;d.obj=b.obj||b.node||{};d.duration=void 0!==b.duration?b.duration:1E3;d.startTime=(new Date).getTime();d.endTime=d.startTime+d.duration;d.progress=0;d.endFunction=function(){b.endFunction&&b.endFunction();c.resolve()};d.progressFunction=b.progressFunction;d.stop=function(){d.isStopped=!0};f(d);k(d);return d};e.animateTransform=function(b){var d=b.shape;d.setTransform(null);
return e.animateProperty({duration:b.duration,properties:{p:{start:0,end:1,easing:b.easing}},progressFunction:function(c,g,h){var m,p,n,r;b.transform.forEach(function(u){var v=u.start[0]+(u.end[0]-u.start[0])*h,y=u.start[1]+(u.end[1]-u.start[1])*h;"translate"===u.name?(m=v,p=y):"scale"===u.name&&(n=v,r=y)});d.setTransform(new l.Matrix2D({dx:m,dy:p,xx:n,yy:r}))},endFunction:function(){d.setTransform(null);b.onEnd&&b.onEnd()}}).promise};return e})},"dojo/fx/easing":function(){define(["../_base/lang"],
function(t){var q={linear:function(l){return l},quadIn:function(l){return Math.pow(l,2)},quadOut:function(l){return l*(l-2)*-1},quadInOut:function(l){l*=2;return 1>l?Math.pow(l,2)/2:-1*(--l*(l-2)-1)/2},cubicIn:function(l){return Math.pow(l,3)},cubicOut:function(l){return Math.pow(l-1,3)+1},cubicInOut:function(l){l*=2;return 1>l?Math.pow(l,3)/2:(Math.pow(l-2,3)+2)/2},quartIn:function(l){return Math.pow(l,4)},quartOut:function(l){return-1*(Math.pow(l-1,4)-1)},quartInOut:function(l){l*=2;return 1>l?
Math.pow(l,4)/2:-.5*(Math.pow(l-2,4)-2)},quintIn:function(l){return Math.pow(l,5)},quintOut:function(l){return Math.pow(l-1,5)+1},quintInOut:function(l){l*=2;return 1>l?Math.pow(l,5)/2:(Math.pow(l-2,5)+2)/2},sineIn:function(l){return-1*Math.cos(Math.PI/2*l)+1},sineOut:function(l){return Math.sin(Math.PI/2*l)},sineInOut:function(l){return-1*(Math.cos(Math.PI*l)-1)/2},expoIn:function(l){return 0==l?0:Math.pow(2,10*(l-1))},expoOut:function(l){return 1==l?1:-1*Math.pow(2,-10*l)+1},expoInOut:function(l){if(0==
l)return 0;if(1==l)return 1;l*=2;if(1>l)return Math.pow(2,10*(l-1))/2;--l;return(-1*Math.pow(2,-10*l)+2)/2},circIn:function(l){return-1*(Math.sqrt(1-Math.pow(l,2))-1)},circOut:function(l){return Math.sqrt(1-Math.pow(l-1,2))},circInOut:function(l){l*=2;return 1>l?-.5*(Math.sqrt(1-Math.pow(l,2))-1):.5*(Math.sqrt(1-Math.pow(l-2,2))+1)},backIn:function(l){return Math.pow(l,2)*(2.70158*l-1.70158)},backOut:function(l){--l;return Math.pow(l,2)*(2.70158*l+1.70158)+1},backInOut:function(l){l*=2;if(1>l)return Math.pow(l,
2)*(3.5949095*l-2.5949095)/2;l-=2;return(Math.pow(l,2)*(3.5949095*l+2.5949095)+2)/2},elasticIn:function(l){if(0==l||1==l)return l;--l;return-1*Math.pow(2,10*l)*Math.sin(2*(l-.075)*Math.PI/.3)},elasticOut:function(l){return 0==l||1==l?l:Math.pow(2,-10*l)*Math.sin(2*(l-.075)*Math.PI/.3)+1},elasticInOut:function(l){if(0==l)return 0;l*=2;if(2==l)return 1;var k=.3*1.5,f=k/4;if(1>l)return--l,-.5*Math.pow(2,10*l)*Math.sin(2*(l-f)*Math.PI/k);--l;return.5*Math.pow(2,-10*l)*Math.sin(2*(l-f)*Math.PI/k)+1},bounceIn:function(l){return 1-
q.bounceOut(1-l)},bounceOut:function(l){return l<1/2.75?7.5625*Math.pow(l,2):l<2/2.75?7.5625*Math.pow(l-1.5/2.75,2)+.75:l<2.5/2.75?7.5625*Math.pow(l-2.25/2.75,2)+.9375:7.5625*Math.pow(l-2.625/2.75,2)+.984375},bounceInOut:function(l){return.5>l?q.bounceIn(2*l)/2:q.bounceOut(2*l-1)/2+.5}};t.setObject("dojo.fx.easing",q);return q})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/PlayerToolbar":function(){define("dojo/_base/declare dojo/on dojo/string esri/dijit/geoenrichment/when dojo/dom-class dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin ../PlayerCommands ../PlayerThemes ./Select ./AreasSelect ./ZoomSelect ./ToolbarArranger ./ZoomUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/PopupUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/text!../templates/PlayerToolbarHolder.html dojo/i18n!esri/nls/jsapi".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p,n,r,u,v,y,A,C,E,F){F=F.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var B=t([a,b],{templateString:E,nls:F,player:null,areaTitleFormatter:null,areaTitleMultiFormatter:null,showAreaTitle:!1,stretchToolbarNode:null,canAddMoreAreas:!1,areasSelectButtons:null,areasSelect:null,pageSelect:null,zoomSelect:null,_toolbarArranger:null,_infographicSelect:null,postCreate:function(){u.hide(this.commandButtonsContainer);this._toolbarArranger=new p({showAreaTitle:this.showAreaTitle,
stretchToolbarNode:this.stretchToolbarNode,domNode:this.domNode,infographicsSelectDiv:this.infographicsSelectDiv,areaTitleDiv:this.areaTitleDiv,areaTitleInnerDiv:this.areaTitleInnerDiv,rightSideControlsBlock:this.rightSideControlsBlock,areasSelectDiv:this.areasSelectDiv,zoomSelectDiv:this.zoomSelectDiv,pageSelectDiv:this.pageSelectDiv,commandButtonsContainer:this.commandButtonsContainer});this._initAreaSelect();this._initPageSelect();this._initZoomSelect();C.autoTooltip(this.domNode)},_initAreaSelect:function(){var w=
this;this.areasSelect=(new h({player:this.player,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onChange:function(z){w.onShowAnalysisAreaAt(z.value);w.onClosePopup()},onAddMoreAreas:function(){w.onAddMoreAreas();w.onClosePopup()},onRemoveAreas:function(z,H){w.onRemoveAreas(z);H&&w.onClosePopup()},onCompareAreasSideBySide:function(){w.onCompareAreasSideBySide();w.onClosePopup()},onStopComparison:function(z){w.onShowAnalysisAreaAt(z);w.onClosePopup()}})).placeAt(this.areasSelectDiv);
this.own(this.areasSelect)},updateAreaSelect:function(w){var z=w.analysisAreas,H=w.combinedAreasInfo,G=w.currentAreaIndex,I=w.isMultiFeature;this.areasSelect.buildAreaOptions(w);this.areasSelect.set("value",G);w=1<this.areasSelect.get("options").length&&!I;u[w?"show":"hide"](this.areasSelectDiv);this._toolbarArranger.syncRightSideVisibility();this.player.showReportTitle?500<document.body.clientWidth||!w?(this.infographicsSelectDiv.innerHTML="\x3cdiv class\x3d'TrimWithEllipses' style\x3d'max-width:"+
.4*document.body.clientWidth+"px;'\x3e"+this.player.getReportTitle()+"\x3c/div\x3e",this._toolbarArranger.showAreaTitle=!0):(this.infographicsSelectDiv.innerHTML="",this._toolbarArranger.showAreaTitle=!1):I?this.areaTitleMultiFormatter?this.areaTitleMultiFormatter(this.areaTitleInnerDiv,H):this._formatAreaTitleMulti(H):(z=z["all"===G?0:G],this.areaTitleFormatter?this.areaTitleFormatter(this.areaTitleInnerDiv,z):this._formatAreaTitle(z,G))},_formatAreaTitle:function(w,z){this.areaTitleInnerDiv.innerHTML=
"all"===z?F.allAreas:w.locationName||w.name},_formatAreaTitleMulti:function(w){this.areaTitleInnerDiv.innerHTML=w.locationName||w.name||w.shortName||""},_pageControlsVisible:!0,_initPageSelect:function(){var w=this;this.pageSelect=(new g({onChange:function(z){w.onShowPageAt(z.value);w.onClosePopup()}})).placeAt(this.pageSelectDiv);this.own(this.pageSelect)},setPageControlsVisible:function(w){this._pageControlsVisible=w;u[w?"show":"hide"](this.pageSelectDiv)},updatePageSelect:function(w,z){for(var H=
[],G=0;G<w;G++)H.push({label:l.substitute(F.pageIndex,{index:G+1}),value:G});this.pageSelect.set("options",H);this.pageSelect.set("value",z);u[this._pageControlsVisible&&1<w&&500<document.body.clientWidth?"show":"hide"](this.pageSelectDiv)},_initZoomSelect:function(){var w=this;this.zoomSelect=(new m({onChange:function(z){if(z.value===n.FIT_PAGE)w.onZoomToFitPage();else if(z.value===n.FIT_PAGE_WIDTH)w.onZoomToFitPageWidth();else if(z.value===n.FIT_PAGE_HEIGHT)w.onZoomToFitPageHeight();else w.onSetZoomPercent(z.value);
w.onClosePopup()}})).placeAt(this.zoomSelectDiv);this.own(this.zoomSelect)},setZoomSupportsInfo:function(w){u[w.supported?"show":"hide"](this.zoomSelectDiv);this._toolbarArranger.syncRightSideVisibility();this.zoomSelect.store.data.forEach(function(z){z.hidden=!1;z.value!==n.FIT_PAGE||w.canFitPage?z.value!==n.FIT_PAGE_WIDTH||w.canFitPageWidth?z.value!==n.FIT_PAGE_HEIGHT||w.canFitPageHeight||(z.hidden=!0):z.hidden=!0:z.hidden=!0})},setZoomInfo:function(w){w=w.isFitPageScale?n.FIT_PAGE:w.isFitPageWidthScale?
n.FIT_PAGE_WIDTH:w.isFitPageHeightScale?n.FIT_PAGE_HEIGHT:n.getClosestZoomAndUpdateOptions(100*w.scale,this.zoomSelect.get("options"));w!==this.zoomSelect.get("value")&&this.zoomSelect.set("value",w)},createCommandButton:function(w,z){return this.createCustomCommandButton({callback:z,buttonClass:w.id===d.PRINT?"playerPrintButton":"playerExportButton",tooltip:w.id===d.PRINT?F.printInfographic:F.exportInfographic,visibleOnError:!1})},createCustomCommandButton:function(w){u.show(this.commandButtonsContainer);
var z=e.create("div",{"class":"playerToolbar_commandButtonContainer dijitInline"},this.commandButtonsContainer,w.addFirst?"first":"last");z.__visibleOnError=w.visibleOnError;z=e.create("div",{"class":"playerToolbar_commandButton"},z);w.buttonClass&&f.add(z,w.buttonClass);w.tooltip&&C.setTooltipToNode(z,w.tooltip);q(z,"click",w.callback);return z},setTheme:function(w){f.remove(this.domNode,"playerThemeDark playerThemeLight");f.add(this.domNode,w===c.DARK?"playerThemeDark":"playerThemeLight");this.areasSelect.setTheme(w);
this.pageSelect.setTheme(w);this.zoomSelect.setTheme(w)},setErrorShown:function(w){if(w)for(u.hide([this.areaTitleDiv,this.areasSelectDiv,this.pageSelectDiv,this.zoomSelectDiv]),w=0;w<this.commandButtonsContainer.children.length;w++){var z=this.commandButtonsContainer.children[w];u[z.__visibleOnError?"show":"hide"](z)}},arrangeControls:function(){this._toolbarArranger.arrangeControls()},hasVisibleControls:function(){return this._toolbarArranger.hasVisibleControls()},addInfographicsSelect:function(w){this._infographicSelect=
w;w.placeAt(this.infographicsSelectDiv)},isMouseOver:function(){return y.isMouseOver(this.domNode)||this.areasSelect&&this.areasSelect.isMouseOver()||this.pageSelect&&this.pageSelect.isMouseOver()||this.zoomSelect&&this.zoomSelect.isMouseOver()||this._infographicSelect&&this._infographicSelect.isMouseOver&&this._infographicSelect.isMouseOver()},setContentLoadPromise:function(w){u.enableContentAbsolute(this.commandButtonsContainer,!1);u.enableContentAbsolute(this.infographicsSelectDiv,!1);k(w,function(){u.enableContentAbsolute(this.commandButtonsContainer,
!0);u.enableContentAbsolute(this.infographicsSelectDiv,!0)}.bind(this))},onShowPageAt:function(w){},onShowAnalysisAreaAt:function(w){},onCompareAreasSideBySide:function(){},onZoomToFitPage:function(){},onZoomToFitPageWidth:function(){},onZoomToFitPageHeight:function(){},onSetZoomPercent:function(w){},onClosePopup:function(){},onAddMoreAreas:function(){},onRemoveAreas:function(w){}});return t([a,b],{templateString:"\x3cdiv class\x3d'esriGEPlayerToolbarOuter'\x3e\x3c/div\x3e",player:null,popupButtonDiv:null,
areaTitleFormatter:null,areaTitleMultiFormatter:null,showToolbarInPopup:!1,showAreaTitle:!1,stretchToolbarNode:null,showCloseButton:!1,canAddMoreAreas:!1,areasSelectButtons:null,toolbarHolder:null,postCreate:function(){var w=this;this.inherited(arguments);this.toolbarHolder=(new B({player:this.player,showAreaTitle:this.showAreaTitle,stretchToolbarNode:this.stretchToolbarNode,canAddMoreAreas:this.canAddMoreAreas,areasSelectButtons:this.areasSelectButtons,onShowPageAt:function(z){w.onShowPageAt(z)},
onShowAnalysisAreaAt:function(z){w.onShowAnalysisAreaAt(z)},onCompareAreasSideBySide:function(){w.onCompareAreasSideBySide()},onZoomToFitPage:function(){w.onZoomToFitPage()},onZoomToFitPageWidth:function(){w.onZoomToFitPageWidth()},onZoomToFitPageHeight:function(){w.onZoomToFitPageHeight()},onSetZoomPercent:function(z){w.onSetZoomPercent(z)},onClosePopup:function(){w.closePopup()},onAddMoreAreas:function(){w.onAddMoreAreas()},onRemoveAreas:function(z){w.onRemoveAreas(z)}})).placeAt(this.domNode);
this.own(this.toolbarHolder)},updateAreaSelect:function(w){this.toolbarHolder.areaTitleFormatter=this.areaTitleFormatter;this.toolbarHolder.areaTitleMultiFormatter=this.areaTitleMultiFormatter;this.toolbarHolder.updateAreaSelect(w)},setPageControlsVisible:function(w){this.toolbarHolder.setPageControlsVisible(w)},updatePageSelect:function(w,z){this.toolbarHolder.updatePageSelect(w,z)},setZoomSupportsInfo:function(w){this.toolbarHolder.setZoomSupportsInfo(w)},setZoomInfo:function(w){this.toolbarHolder.setZoomInfo(w)},
createCommandButton:function(w,z){return this.toolbarHolder.createCommandButton(w,z)},setTheme:function(w){this.toolbarHolder.setTheme(w)},setErrorShown:function(w){this.toolbarHolder.setErrorShown(w);this._arrangeControls()},_arrangeControls:function(){u.show(this.domNode);this.toolbarHolder.arrangeControls();u[this.toolbarHolder.hasVisibleControls()?"show":"hide"]([this._popupButton,this.domNode])},_popupHandle:null,_popupButton:null,update:function(){v.invoke(this,"_doUpdateToolbar")},_doUpdateToolbar:function(){f[this.isScrollShown()?
"add":"remove"](this.popupButtonDiv,"playerToolbar_parentHasScroll");f[r.isMobileDevice()?"add":"remove"](this.popupButtonDiv,"isMobileDevice");f[r.isMobileDevice()?"add":"remove"](this.toolbarHolder.domNode,"isMobileDevice");this._resetToolbarNode();var w=A.isOpen(this.toolbarHolder);this._popupHandle&&this._popupHandle.remove();this._popupHandle=null;this.showToolbarInPopup?(this._popupButton=e.create("div",{"class":"dijitInline playerToolbar_outerButton playerToolbar_settingsButton"},this.popupButtonDiv,
"first"),this._popupHandle=A.makePopup(this.toolbarHolder,this,this._popupButton,{orient:["before","below"],openPopup:w})):e.place(this.toolbarHolder.domNode,this.domNode);this._arrangeControls()},_resetToolbarNode:function(){this.toolbarHolder.domNode.parentNode&&this.toolbarHolder.domNode.parentNode.removeChild(this.toolbarHolder.domNode);this.domNode.innerHTML="";this._popupButton&&e.destroy(this._popupButton);this._popupButton=null},closePopup:function(){this.showToolbarInPopup&&A.close(this.toolbarHolder)},
isScrollShown:function(){return!1},createCustomCommandButton:function(w){return this.toolbarHolder.createCustomCommandButton(w)},notifyCommandButtonsAdded:function(){if(this.showCloseButton)if(this.showToolbarInPopup){var w=e.create("div",{"class":"dijitInline playerToolbar_outerButton playerToolbar_closeButtonOuter"},this.popupButtonDiv);C.setTooltipToNode(w,F.close);q(w,"click",function(){this.onClose()}.bind(this))}else this.createCustomCommandButton({buttonClass:"playerToolbar_closeButton",tooltip:F.close,
callback:function(){this.closePopup();this.onClose()}.bind(this),visibleOnError:!0})},addInfographicsSelect:function(w){this.toolbarHolder.addInfographicsSelect(w)},isMouseOver:function(){return y.isMouseOver(this.domNode)||this.toolbarHolder.isMouseOver()},setContentLoadPromise:function(w){this.toolbarHolder.setContentLoadPromise(w)},onShowPageAt:function(w){},onShowAnalysisAreaAt:function(w){},onCompareAreasSideBySide:function(){},onZoomToFitPage:function(){},onZoomToFitPageWidth:function(){},onZoomToFitPageHeight:function(){},
onSetZoomPercent:function(w){},onClose:function(){},onAddMoreAreas:function(){},onRemoveAreas:function(w){}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/Select":function(){define(["dojo/_base/declare","dojo/dom-class","esri/dijit/geoenrichment/OnDemandSelect","../PlayerThemes"],function(t,q,l,k){return t(l,{"class":"esriGEOnDemandSelectNoBackground",listClass:"esriGEOnDemandSelectVeryTallList esriGEOnDemandSelectSpacedOut",allowRepetitiveSelection:!1,setTheme:function(f){q[f===k.DARK?"add":
"remove"](this.domNode,"esriGEOnDemandSelectWhite")}})})},"esri/dijit/geoenrichment/OnDemandSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/dom-construct dojo/dom-class dojo/dom-style dojo/dom-geometry dojo/store/Memory dijit/_WidgetBase dijit/_TemplatedMixin ./lists/FlowList ./lists/FlowListDefaultItemRenderer ./lists/_FlowListHoverSupport ./utils/DeviceUtil ./utils/DomUtil ./utils/MouseUtil ./utils/PopupUtil ./utils/TooltipUtil dojo/text!./templates/OnDemandSelect.html".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p,n,r,u,v,y){var A=t([g,m]),C={_currentSelect:null,_keyHandler:null,_mouseMoveHandler:null,_currentItemIndex:-1,_currentSearchLetter:null,setFocusedSelect:function(E){this._currentSelect=E;this._updateHandlers()},_updateHandlers:function(){var E=this;this._keyHandler&&this._keyHandler.remove();this._keyHandler=null;this._mouseMoveHandler&&this._mouseMoveHandler.remove();this._mouseMoveHandler=null;this._currentItemIndex=-1;this._currentSearchLetter=null;this._setNodeFocused(null);
this._currentSelect&&(this._keyHandler=l(document.body,"keyup",function(F){F=String.fromCharCode(F.keyCode);1===F.length&&(F=F.toLowerCase(),E._tryHighlightNextItemForKey(F))}),this._mouseMoveHandler=l(this._currentSelect.popupList.domNode,"mousemove",function(){E._setNodeFocused(null)}))},_tryHighlightNextItemForKey:function(E){E===this._currentSearchLetter?this._currentItemIndex++:this._currentItemIndex=0;this._currentSearchLetter=E;var F=this,B=this._currentSelect.store.query(function(z){return(z=
z[F._currentSelect.labelProperty])&&z.toLowerCase().charAt(0)===E});if(B.length){this._currentItemIndex>B.length-1&&(this._currentItemIndex=0);var w=(B=B[this._currentItemIndex])&&this._currentSelect.popupList.getItemNode(B);B&&this._currentSelect.popupList.scrollToItem(B);this._setNodeFocused(w)}},_currentFocusedNode:null,_setNodeFocused:function(E){this._currentFocusedNode&&(f.remove(this._currentFocusedNode,"listItemFocused"),this._currentFocusedNode=null);E&&(f.add(E,"listItemFocused"),this._currentFocusedNode=
E)}};return t([d,c],{templateString:y,value:null,popupList:null,listClass:null,placeHolderClass:"placeHolder",idProperty:"value",labelProperty:"label",options:null,store:null,itemRenderer:null,itemClass:null,placeHolder:null,requireSelection:!0,renderSelectionAsItem:!1,makePopupListWidthMatchOpenButtonWidth:!0,orient:null,noPopupOverflow:!1,stopOpenEventPropagation:!1,stopPopupInteractionEventPropagation:!0,onClickComponent:null,clearPopupOnClose:!0,detectItemHover:!1,hasSelectableItems:!0,allowRepetitiveSelection:!0,
labelTextToKeep:null,nodeToKeepAsSelected:null,openMouseEvent:null,toggleOnClick:!0,supportsKeyNavigation:!0,_closePopupOnChangeFunc:null,_lastPopupListScrollTop:0,postCreate:function(){var E=this;this.inherited(arguments);this._normalizeValue();this.labelTextToKeep?this.selectedLabel.innerHTML=this.labelTextToKeep:this.requireSelection||this._tryAssignPlaceholder();this.nodeToKeepAsSelected?this._updateSelection():n.hide(this.selectedItemHolder);this._createPopupList();this.own(this.popupList);this.listClass&&
f.add(this.popupList.domNode,this.listClass);this._popupCreationHandler=l(this.openButton,this.openMouseEvent||p.click,function(F){E.stopOpenEventPropagation&&("function"===typeof E.stopOpenEventPropagation?E.stopOpenEventPropagation(F):F.stopPropagation());E.openPopup()});this.popupList.startup();this._trySelectValue();l(this.popupList.domNode,p.clickOrRelease,function(F){E.stopPopupInteractionEventPropagation&&F.stopPropagation()});l(this.popupList.domNode,"scroll",function(F){E._lastPopupListScrollTop=
E.popupList.domNode.scrollTop});v.autoTooltip(this.domNode)},_createPopupList:function(){var E=this,F=this.itemRenderer||new h;this.popupList=new (this.detectItemHover?A:g)(q.mixin({"class":"esriGEOnDemandSelectFlowList",idProperty:this.idProperty,labelProperty:this.labelProperty,itemRenderer:F,itemClass:this.itemClass,stopMouseEventPropagation:this.stopPopupInteractionEventPropagation,hasSelectableItems:this.hasSelectableItems,allowRepetitiveSelection:this.allowRepetitiveSelection,onChange:function(){E._processOnChangeEvent()},
onItemHovered:function(B){E.onItemHovered(B)}},this._buildAdditionalPopupListProperties()))},_buildAdditionalPopupListProperties:function(){return null},_processOnChangeEvent:function(){if(this.popupList.selectedItem){var E=this.value,F=this.popupList.selectedItem;this.value=F[this.idProperty];this._updateSelection();this.onChange&&this.onChange({type:"change",value:this.value,previousValue:E,selectedItem:F})}this._closePopupOnChangeFunc&&!this._closePopupOnChangeFunc(this.value)||u.close(this.popupList)},
_makePopup:function(){if(this._popupCreationHandler){this._popupCreationHandler.remove();delete this._popupCreationHandler;var E=this;u.makePopup(this.popupList,this,this.openButton,{openMouseEvent:this.openMouseEvent,stopEventPropagation:this.stopOpenEventPropagation,toggleOnClick:this.toggleOnClick,wrapperClass:this.listClass?this.listClass.split(" ").map(function(F){return F+"Popup"}).join(" "):null,orient:this.orient,allowAutoOrientation:this.allowAutoOrientation,noOverflow:this.noPopupOverflow,
onClickComponent:this.onClickComponent,onPreShow:function(){E.onPopupListPreBuild();E.makePopupListWidthMatchOpenButtonWidth&&e.set(E.popupList.domNode,"minWidth",a.getContentBox(E.domNode).w+"px");E._updatePopupListStore();E.onPopupPreOpened()},onShow:function(){E.onPopupOpened();C.setFocusedSelect(E);E._onPopupOpened()},onClose:function(){E.onPopupClosed();C.setFocusedSelect(null);E.clearPopupOnClose&&E._clearPopup()},isMouseOver:function(){return E.isMouseOverList()}})}},_clearPopup:function(){this.popupList&&
this.popupList.clear&&this.popupList.clear()},_tryAssignPlaceholder:function(){if(this.placeHolder&&null===this.value)return this.selectedLabel.innerHTML=this.placeHolder,f.add(this.selectedLabel,this.placeHolderClass),!0;f.remove(this.selectedLabel,this.placeHolderClass);return!1},_normalizeValue:function(){null!==this.value&&(void 0===this.value?this.value=null:("string"===typeof this.value&&(this.value=this.value.trim()),String(this.value)||(this.value=null)))},trySelectValue:function(E){this.value=
E;this._normalizeValue();return this._trySelectValue()},_trySelectValue:function(){if(null!==this.value&&this._setValueAttr(this.value,!0))return!0;if(this.requireSelection){var E=this.store&&this.store.query();if(E&&E.length){var F=this;this.value&&E.some(function(B){return F.value===B[F.idProperty]})?this._setValueAttr(this.value,!0):this._setValueAttr(E[0][this.idProperty],!0)}}return!1},_setValueAttr:function(E,F){this.value=E;this._normalizeValue();if(!this.store||!this.popupList)return!1;var B=
this;(E=this.store.query(function(w){return w[B.idProperty]===B.value})[0])&&this.popupList.setSelectedItem(E);this._updateSelection(E);return!!E},_setOptionsAttr:function(E){this.options=E;this.store=this._createStore(E);this._updatePopupListStore();this._trySelectValue()},_setStoreAttr:function(E){this.options=(this.store=this._createStore(E))&&this.store.query();E.idProperty&&(this.idProperty=E.idProperty);this._updatePopupListStore();this._trySelectValue()},_createStore:function(E){return E instanceof
Array?new b({data:E,idProperty:this.idProperty}):E},_updatePopupListStore:function(){this.popupList&&(this.popupList.store&&this.popupList.store===this.store&&!this.clearPopupOnClose||this.popupList.setStore(this.store,!0),this.popupList.setSelectedItem(this.getSelectedItem()),this._lastPopupListScrollTop&&(this.popupList.domNode.scrollTop=this._lastPopupListScrollTop))},getSelectedItem:function(){if(!this.store)return null;var E=this.get("value"),F=this;return void 0!==E&&this.store.query(function(B){return B[F.idProperty]===
E})[0]},setSelectedItem:function(E){this.store&&this.popupList&&E&&this._setValueAttr(E[this.idProperty],!0)},getSelectedIndex:function(){var E=this,F=-1;if(this.store){var B=this.get("value");void 0!==B&&this.store.query().some(function(w,z){if(w[E.idProperty]==B)return F=z,!0})}return F},setSelectedIndex:function(E){this.setSelectedItem(this.store&&this.store.data[E])},_nodeToKeepAsSelectedPlacedFlag:!1,_updateSelection:function(E){E=E||this.getSelectedItem();this.nodeToKeepAsSelected?this._nodeToKeepAsSelectedPlacedFlag||
(n.hide(this.selectedLabel),n.show(this.selectedItemHolder),this.selectedItemHolder.innerHTML="",k.place(this.nodeToKeepAsSelected,this.selectedItemHolder),this._nodeToKeepAsSelectedPlacedFlag=!0):this.renderSelectionAsItem?(n.hide(this.selectedLabel),n.show(this.selectedItemHolder),this.selectedItemHolder.innerHTML="",E&&this.popupList.itemRenderer.createPresentation(E,!1,this.selectedItemHolder,this.popupList)):(n.hide(this.selectedItemHolder),this.labelTextToKeep?this.selectedLabel.innerHTML=this.labelTextToKeep:
(this.selectedLabel.innerHTML=E?E[this.labelProperty]:"",this.selectedLabel.innerHTML&&f.remove(this.selectedLabel,this.placeHolderClass),n[this.selectedLabel.innerHTML||this._tryAssignPlaceholder()?"show":"hide"](this.selectedLabel)))},refresh:function(){this.popupList.refresh();this._updateSelection()},isPopupOpen:function(){return u.isOpen(this.popupList)},openPopup:function(){this.isPopupOpen()||(this._makePopup(),u.open(this.popupList))},closePopup:function(){this._popupCreationHandler||u.close(this.popupList)},
refreshPopup:function(){this.isPopupOpen()&&u.refresh(this.popupList)},isMouseOver:function(E){return r.isMouseOver(this.domNode,{event:E})||this.isMouseOverList(E)},isMouseOverList:function(E){return this.popupList&&r.isMouseOver(this.popupList.domNode,{event:E})},onPopupListPreBuild:function(){},onPopupPreOpened:function(){},onPopupOpened:function(){},_onPopupOpened:function(){},onPopupClosed:function(){},onChange:function(E){},onItemHovered:function(E){},destroy:function(){this._popupCreationHandler&&
this._popupCreationHandler.remove();this.closePopup(this.popupList);this.popupList.destroy();this.inherited(arguments)}})})},"esri/dijit/geoenrichment/lists/FlowList":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on ../utils/DeviceUtil ../utils/DnDUtil ../utils/MouseUtil ../utils/TooltipUtil ./FlowListDefaultItemRenderer ../utils/PopupUtil dijit/_WidgetBase dijit/_TemplatedMixin".split(" "),function(t,q,l,k,f,e,a,b,d,c,g,h,m){var p=t([h,m],{templateString:"\x3cdiv class\x3d'esriGEFlowList esriGENonSelectable'\x3e\x3c/div\x3e",
idProperty:"value",labelProperty:"label",selectedIndex:-1,selectedItem:null,items:null,store:null,defaultItemRendererClass:c,itemRenderer:null,itemClass:null,itemClassSelected:null,keepScrollPosition:!1,allowRepetitiveSelection:!0,selectOnMouseDown:!1,noDragTolerance:0,selectionValidator:null,allowManualSelection:!0,stopMouseEventPropagation:!0,hasSelectableItems:!0,autoDetectUrlsInLabels:!1,storeItemsInInnerDiv:!1,_addedWrappers:null,_clickHandles:null,_valueOnCreation:null,_isCreated:!1,itemsDiv:null,
postCreate:function(){this.inherited(arguments);this.itemsDiv=this.storeItemsInInnerDiv?l.create("div",{"class":"esriGEFlowList_innerDiv"},this.domNode):this.domNode;this._clearHandlers();this._setUpItemRenderer();d.autoTooltip(this.domNode);this._isCreated=!0;this._valueOnCreation?this._setValueAttr(this._valueOnCreation):this.refresh()},_setUpItemRenderer:function(){this.itemRenderer||(this.itemRenderer=new this.defaultItemRendererClass);this.itemClass&&(this.itemRenderer.itemClass=this.itemClass);
this.itemClassSelected&&(this.itemRenderer.itemClassSelected=this.itemClassSelected)},_getValueAttr:function(){return this.selectedItem&&this.selectedItem[this.idProperty]},_setValueAttr:function(n){var r=this;if(this._isCreated){var u=this.items||this.store&&this.store.data;u&&u.some(function(v){if(v[r.idProperty]==n)return r.setSelectedItem(v),!0})}else this._valueOnCreation=n},_scrollTopMemo:0,memoScroll:function(){this._scrollTopMemo=this.domNode.scrollTop},applyScrollFromMemo:function(){this.domNode.scrollTop=
this._scrollTopMemo||0},_setItemsAttr:function(n){this.setItems(n)},setItems:function(n,r){this.keepScrollPosition&&this.memoScroll();this.clear();this.items=n;r||(this.items&&this._isCreated?(this._addItems(n),this._checkIfStillSelected(),this.keepScrollPosition&&this.applyScrollFromMemo()):this._checkIfStillSelected())},_checkIfStillSelected:function(){if(-1!=this.selectedIndex||this.selectedItem){var n=this;this._addedWrappers&&this._addedWrappers.some(function(r,u){return n._isItemSelected(r,
u)})||(this.selectedIndex=-1,this.selectedItem=null)}},refresh:function(){this.store?this.setStore(this.store):this.setItems(this.items)},setSelectedItem:function(n,r){this.hasSelectableItems&&(this.selectedItem=n,this.selectedIndex=-1,this.refresh(),r&&this._dispatchChangeEvent())},setSelectedIndex:function(n,r){this.hasSelectableItems&&(this.selectedIndex=n,this.selectedItem=null,this.refresh(),r&&this._dispatchChangeEvent())},getItemNode:function(n){var r;this._addedWrappers&&this._addedWrappers.some(function(u){if(u.itemRef===
n)return r=u.__itemPresentation,!0});return r},getItemByNode:function(n){var r;this._addedWrappers&&this._addedWrappers.some(function(u){if(u.__itemPresentation===n)return r=u.itemRef,!0});return r},getItemByValue:function(n){var r,u=this;this._addedWrappers&&this._addedWrappers.some(function(v){if(v[u.idProperty]===n)return r=v.itemRef,!0});return r},__selectedPresentation:null,_addItems:function(n){this._addedWrappers=this._addedWrappers||[];var r=this;n.forEach(function(u){var v=q.mixin({},u);
v.itemRef=u;r.__addWrapper(v)})},__addWrapper:function(n){var r=this._addedWrappers.length,u=this.itemRenderer.createPresentation(n.itemRef,this._isItemSelected(n,r),this.itemsDiv,this,n);u&&(u.index=r,u.item=n.itemRef,n.__itemPresentation=u,this._isItemSelected(n,r)&&(this.selectedItem=n.itemRef,this.selectedIndex=r,this.__selectedPresentation=u),this._addClickHandler(u),this._addedWrappers.push(n),n=this._addedWrappers.length-1,k.add(u,"listItem_"+n),k.add(u,"listItem_"+(0==n%2?"even":"odd")))},
_isItemSelected:function(n,r){return this.hasSelectableItems&&this._isItemClickable(n)?r==this.selectedIndex||n.itemRef===this.selectedItem?!0:n.itemRef&&this.selectedItem?(n=n.itemRef[this.idProperty],r=this.selectedItem[this.idProperty],void 0!==n&&n===r):!1:!1},_isItemClickable:function(n){return this.selectionValidator?this.selectionValidator(n):this._selectionValidatorDefault(n)},_selectionValidatorDefault:function(n){return!!n&&!n.isSeparator&&!1!==n.enabled},_addClickHandler:function(n){function r(){(u.allowRepetitiveSelection||
u.__selectedPresentation!=n)&&u._isItemClickable(n.item)&&(u.__selectedPresentation&&u.itemRenderer.selectPresentation&&u.itemRenderer.selectPresentation(u.__selectedPresentation,!1,u.__selectedPresentation.item),u.itemRenderer.selectPresentation&&u.itemRenderer.selectPresentation(n,u.hasSelectableItems,n.item),u.__selectedPresentation=n,u.selectedIndex=n.index,u.selectedItem=n.item,u._dispatchChangeEvent())}var u=this;if(this.allowManualSelection){var v=this.selectOnMouseDown||!this.noDragTolerance?
f(n,this.selectOnMouseDown?e.press:e.click,function(y){u.stopMouseEventPropagation&&y.stopPropagation();r()}):a.addNoDragClickHandler(n,r,{tolerance:this.noDragTolerance});this._clickHandles.push(v)}},_dispatchChangeEvent:function(){this.onChange({type:"change",selectedIndex:this.selectedIndex,selectedItem:this.selectedItem,value:this.selectedItem&&this.selectedItem[this.idProperty]})},clear:function(){this.__selectedPresentation=null;this._addedWrappers=this._addedWrappers||[],this._addedWrappers.forEach(function(n){n.destroyPresentation&&
n.destroyPresentation()});this._addedWrappers.length=0;this.itemsDiv&&(this.itemsDiv.innerHTML="");this._clearHandlers()},_clearHandlers:function(){this._clickHandles=this._clickHandles||[];this._clickHandles.forEach(function(n){n.remove()});this._clickHandles.length=0},scrollToItem:function(n){if(n=this.getItemNode(n))this.domNode.scrollTop=n.offsetTop},store:null,onDemandModeLoadStep:1E3,onDemandPopulateLimit:1E3,onDemandPopulatePeriod:200,_storeScrollHandler:null,_setStoreAttr:function(n){this.setStore(n)},
setStore:function(n){if(this.domNode)if(this.keepScrollPosition&&this._memoScroll(),this.clear(),this.idProperty=(this.store=n)&&n.idProperty,this.store&&this._isCreated){this._loadNextPart();this._checkIfStillSelected();this.keepScrollPosition&&this.applyScrollFromMemo();var r=this;this._storeScrollHandler=this._storeScrollHandler||f(this.domNode,"scroll",function(){var u=r._addedWrappers[r._addedWrappers.length-30];(u=u?u.__itemPresentation:null)&&u.offsetTop<r.domNode.scrollTop&&r._loadNextPart()})}else this._checkIfStillSelected()},
_loadNextPart:function(){if(this.store&&this.store.query().length!=this._addedWrappers.length){var n=this.store.query(null,{start:this._addedWrappers.length,count:this.onDemandModeLoadStep});delete n.total;this._addItems(n);n.length&&this._addedWrappers.length<this.onDemandPopulateLimit&&(n=this._loadNextPart.bind(this),setTimeout(n,this.onDemandPopulatePeriod))}},isMouseOver:function(n){return b.isMouseOver(this.domNode,{event:n})},onChange:function(n){},destroy:function(){this.clear();this.inherited(arguments)}});
p.createPopup=function(n){function r(){u||(u=new p({"class":n.listClass,itemRenderer:n.itemRenderer,items:n.options,onChange:function(v){n.onChange(v);!n.keepSelection&&u.setSelectedItem(null);g.close(u)}}),n.doNotOwn||n.wizard.own(u),n.isDeferred&&n.isDeferred(u));return u}var u;g.makePopup(n.isDeferred?r:r(),n.wizard,n.aroundNode,n.popupOptions||{});return u};return p})},"esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct ../utils/DomUtil ../utils/TooltipUtil ../utils/RegExpUtil ../utils/UrlUtil".split(" "),
function(t,q,l,k,f,e,a,b){return t(null,{itemClass:"",itemClassSelected:"",labelClass:"",createLabelNode:!1,createImageAfterLabel:!1,constructor:function(d){q.mixin(this,d)},createPresentation:function(d,c,g,h,m){if(d.isSeparator)return c=k.create("div",{"class":"flowList_listSeparator"},g),d.hidden&&f.hide(c),c;g=k.create("div",{"class":"listItem "+(this.itemClass||" ")+(d.itemClass||""),style:d.style},g);d.isLink&&l.add(g,"esriGELink");!1===d.enabled&&l.add(g,"disabled");this._createParts(d,g,h);
this._setTooltip(d,g,h);this.selectPresentation(g,c,d);d.hidden&&f.hide(g);return g},_setTooltip:function(d,c,g){d.tooltip&&g.own(e.setTooltipToNode(c,d.tooltip))},_createParts:function(d,c,g){if(this.createImageAfterLabel){this._createLabel(d,c,g);var h=!0}this._createImage(d,c,g);!h&&this._createLabel(d,c,g)},_createImage:function(d,c,g){if(c=this._createImageNode(d,c,g))d.imageClass&&l.add(c,d.imageClass),d.imageUrl&&(c.style="background-image: url("+d.imageUrl+");")},_createImageNode:function(d,
c,g){return c},_createLabel:function(d,c,g){if(this.createLabelNode)return c=k.create("div",{innerHTML:d[g.labelProperty],"class":"dijitInline TrimWithEllipses listItemLabel"},c),d.labelClass&&l.add(c,d.labelClass),this.labelClass&&l.add(c,this.labelClass),g.autoDetectUrlsInLabels&&this._tryConvertToUrls(c),c;d[g.labelProperty]&&(c.innerHTML=d[g.labelProperty],g.autoDetectUrlsInLabels&&this._tryConvertToUrls(c))},_tryConvertToUrls:function(d){var c=d.innerHTML.match(a.IS_URL_RE);if(c=c&&c[0])d.innerHTML=
d.innerHTML.replace(c,"\x3ca href\x3d'"+b.toHttpsUrl(c)+"' target\x3d'_blank'\x3e"+c+"\x3c/a\x3e")},selectPresentation:function(d,c,g){l[c?"add":"remove"](d,"listItemSelected "+this.itemClassSelected)}})})},"esri/dijit/geoenrichment/utils/RegExpUtil":function(){define([],function(){var t={createRegExp:function(b,d,c){b=t.trimText(b);return!b&&c?null:new RegExp(b,d)},trimText:function(b){return b?b.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,"").trim():""},replace:function(b,d,c){return null==b?"":(""+
b).replace(d,function(g){return c[g]||""})}},q=/&|<|>/g,l=/&|<|>|"|'/g,k={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26apos;"};t.encodeXML=function(b,d){return t.replace(b,d?l:q,k)};var f=/&amp;|&lt;|&gt;|&quot;|&apos;/g,e={"\x26amp;":"\x26","\x26lt;":"\x3c","\x26gt;":"\x3e","\x26quot;":'"',"\x26apos;":"'"};t.decodeXML=function(b){return t.replace(b,f,e)};t.IS_RICH_TEXT_RE=/<\w/;t.IS_URL_RE=/((www\.|http:\/\/|https:\/\/)[A-Za-z0-9_.\-~]+\.[A-Za-z0-9_.\-~/]+)|([A-Za-z0-9_.\-~]+\.com[A-Za-z0-9_.\-~/]*)/;
t.isRichText=function(b){return b&&t.IS_RICH_TEXT_RE.test(b)};t.isUrl=function(b){return b&&t.IS_URL_RE.test(b)};var a=/^[0-9a-fA-F]{32}$/;t.isId=function(b){return b&&a.test(b)};return t})},"esri/dijit/geoenrichment/utils/PopupUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/utils/onClickTouch dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/config dijit/popup dijit/place dijit/Viewport ./DeviceUtil ./DnDUtil ./MouseUtil dojo/domReady!".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p){function n(u){if(!u)return["below"];var v=[];u.forEach(function(y){var A=f.isBodyLtr();switch(y){case "before-alt":A=!A;case "after-alt":v.push(A?{aroundCorner:"BR",corner:"BL"}:{aroundCorner:"BL",corner:"BR"});v.push(A?{aroundCorner:"TR",corner:"TL"}:{aroundCorner:"TL",corner:"TR"});return}v.push(y)});return v}var r={makePopup:function(u,v,y,A){function C(O){if(A.overlay&&O._popupWrapper){var R=k.create("div",{"class":A.overlay.overlayClass});if(A.overlay.overlayParent)k.place(R,
A.overlay.overlayParent);else{k.place(R,H,"before");var S=e.get(O._popupWrapper,"zIndex");e.set(R,"zIndex",S)}O.__popupOverlay=R}}function E(O){O.__popupOverlay&&(k.destroy(O.__popupOverlay),O.__popupOverlay=null)}function F(O){G=!1;O.__bodyClickHandler&&O.__bodyClickHandler.remove();O.__bodyClickHandler=null;O.__popupWidgetOpenFlag=!1;E(O);A.onClose&&A.onClose()}function B(O){O&&A.stopEventPropagation&&O.stopPropagation();G||(G=!0,a(z||("function"==typeof u?u():u),function(R){z=R;z.domNode?(z.__openPopupWidgetFunc=
B,H=d.moveOffScreen(z),a(A.onPreShow&&A.onPreShow(),function(){var S=n(A.orient);if(H&&!1!==A.allowAutoOrientation){var U=S.indexOf("below");-1!==U&&-1===S.indexOf("above")&&S.splice(U+1,0,"above")}U=-1;if(-1!==S.indexOf("after")||-1!==S.indexOf("before")){U=g.getEffectiveBox(this.ownerDocument);var Z=f.position(y,!1);U=Math.floor(Math.max(Z.y+Z.h,U.h-Z.y))-10}A.noOverflow&&(z.baseClass="esriGENoOverflow "+z.baseClass);d.open({parent:v,popup:z,around:y,maxHeight:U,orient:S,onClose:function(){F(z)}});
A.suppressReposition&&clearTimeout(d._aroundMoveListener);A.noOverflow&&(z.baseClass=z.baseClass.replace("esriGENoOverflow ",""));H&&A.wrapperClass&&l.add(H,A.wrapperClass);z.__popupInfo=t.mixin({},d.getTopPopup());z.__popupInfo.orient=S;z.__popupInfo.around=y;E(z);C(z);A.onShow&&A.onShow(z);z.__popupWidgetOpenFlag=!0;N&&z.own&&z.own(N);z.__bodyClickHandler&&z.__bodyClickHandler.remove();if(!1!==A.closeOnClickOutside){var da="function"===typeof A.closeOnClickOutside?A.closeOnClickOutside:null;setTimeout(function(){z.__bodyClickHandler&&
z.__bodyClickHandler.remove();z.__bodyClickHandler=q(document.body,h.isMobileDevice()?h.press:w,function(X){G&&(p.fixTouchEvent(X),da&&!da(X)||p.isMouseOver(H)||A.isMouseOver&&A.isMouseOver()||z.isMouseOver&&z.isMouseOver()||z.__lockPopupWidgetFlag||r.close(z))})})}})):G=!1}))}if(u){if(b.isPlayerOnServer)return{remove:function(){}};A=A||{};var w=A.openMouseEvent?A.openMouseEvent:h.clickOrRelease,z="function"!==typeof u?u:null;if(z)var H=d.moveOffScreen(z);var G=!1;z&&(z.__openPopupWidgetFunc=B);if(!1!==
A.openOnMouseEvent){var I=B;if(A.toggleOnClick){var L;I=function(O){L=L||O.type;z?L===O.type&&r.toggle(z):B()}}var N=!1===A.onClickComponent?null:void 0!==A.noDragClickTolerance?m.addNoDragClickHandler(A.onClickComponent||y,I,{tolerance:A.noDragClickTolerance}):q(A.onClickComponent||y,w,I)}A.openPopup&&B();return{remove:function(){z&&"function"!==typeof z&&(r.close(z),F(z),z._popupWrapper&&(z.domNode&&z.domNode.parentNode===z._popupWrapper&&z._popupWrapper.removeChild(z.domNode),k.destroy(z._popupWrapper),
delete z._popupWrapper),delete z.__openPopupWidgetFunc,delete z.__popupWidgetOpenFlag);N&&N.remove()}}}},setLocked:function(u,v){u.__lockPopupWidgetFlag=v},open:function(u){u&&!u.__lockPopupWidgetFlag&&!u.__popupWidgetOpenFlag&&u.__openPopupWidgetFunc&&u.__openPopupWidgetFunc()},close:function(u){u&&!u.__lockPopupWidgetFlag&&d.close(u)},isOpen:function(u){return!(!u||!u.__popupWidgetOpenFlag)},toggle:function(u){r.isOpen(u)?r.close(u):r.open(u)},refresh:function(u){if(u){u=u.__popupInfo;var v=f.isBodyLtr();
u&&c.around(u.wrapper,u.around,u.orient,v)}},getWrapper:function(u){return u&&u._popupWrapper}};return r})},"esri/dijit/geoenrichment/utils/onClickTouch":function(){define(["dojo/_base/lang","dojo/on","dojo/sniff"],function(t,q,l){var k=l("touch");return t.mixin(function(f,e,a,b){if(k){switch(e){case "click":e="touchstart,click";break;case "mousedown":e="touchstart,mousedown";break;case "mouseup":e="touchend,mouseup";break;case "clickend":e="touchend,click";break;default:return q(f,e,a,b)}var d=!1;
return q(f,e,function(c){"touchstart"===c.type||"touchend"===c.type?(a.call(this,c),d=!0,setTimeout(function(){d=!1},500)):d||a.call(this,c)},b)}"clickend"===e&&(e="click");return q(f,e,a,b)},q)})},"esri/dijit/geoenrichment/lists/_FlowListHoverSupport":function(){define(["dojo/_base/declare","dojo/on","../utils/MouseUtil"],function(t,q,l){var k=t(null,{_list:null,_checkIntervalH:null,constructor:function(f){this._list=f},setHoveredItem:function(f){clearInterval(this._checkIntervalH);this._emitHoverEvent(f);
this._checkIntervalH=setInterval(function(){l.isMouseOver(f)||this.setHoveredItem(null)}.bind(this),100)},_emitHoverEvent:function(f){this._list.onItemHovered({type:"itemHover",index:f?f.index:-1,item:f?f.item:null,value:f?f.item[this._list.idProperty]:void 0})}});return t(null,{_mouseHelper:null,postCreate:function(){this._mouseHelper=new k(this);this.inherited(arguments)},_addClickHandler:function(f){this.inherited(arguments);this._clickHandles.push(q(f,"mouseover",function(){this._mouseHelper.setHoveredItem(f)}.bind(this)))},
onItemHovered:function(f){}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/AreasSelect":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct esri/dijit/geoenrichment/TriStateItem esri/dijit/geoenrichment/ToggleButton esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ../PlayerViewModes ./Select ./ComparisonSettings ../dataProvider/supportClasses/areas/AnalysisAreaUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/PopupUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p,n){n=n.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var r=t(a,{canRemoveAreas:!1,canMoveAreas:!1,wrapInCards:!1,nls:null,createPresentation:function(u,v,y,A){var C=this,E=this.inherited(arguments);if(u.isSeparator)return E;E.innerHTML="";if("all"===u.value){E.style.cursor="pointer";var F=k.create("div",{"class":"dijitInline esriGEReportPlayerToolbar_checkboxRoot"},E);(new e(F,{mode:"toggle"})).set("checked",this.isCompareAll());k.create("div",{"class":"dijitInline",
innerHTML:u.label},E);E.addEventListener("click",function(){if(C.isCompareAll())C.onStopComparison();else C.onCompareAreasSideBySide()});p.setTooltipToNode(E,this.isCompareAll()?this.nls.compareAreasSideBySideTooltipOff:this.nls.compareAreasSideBySideTooltipOn,{position:["before","after"]});return E}if("addAreas"===u.value)return E.style.cursor="pointer",k.create("div",{"class":"dijitInline esriGESpaceAfterBig esriGEReportPlayerToolbar_addMoreAreasIcon"},E),k.create("div",{"class":"dijitInline",innerHTML:u.label},
E),E.addEventListener("click",function(){C.onAddMoreAreas()}),E;if(u.isAdditional)return E.style.cursor="pointer",u.buttonInfo.imageClass&&k.create("div",{"class":"dijitInline esriGESpaceAfterBig "+u.buttonInfo.imageClass},E),k.create("div",{"class":"dijitInline",innerHTML:u.label},E),E.addEventListener("click",function(w){u.buttonInfo.callback(w);C.onClosePopup()}),u.buttonInfo.tooltip&&(F=k.create("div",{"class":"dijitInline esriGESpaceBeforeBig esriGEInfoIcon"},E),p.setTooltipToNode(F,u.buttonInfo.tooltip,
u.buttonInfo.tooltipParams)),u.buttonInfo.onCreated&&u.buttonInfo.onCreated(E),E;if(u.canSelect){F=k.create("div",{"class":"dijitInline esriGEReportPlayerToolbar_checkboxRoot"},E);var B=new f(F);B.autoToggle=!1;B.set("checked",u.selected);E.addEventListener("click",function(){u.selected=!u.selected;B.set("checked",u.selected);u.isGroup?u.children.forEach(function(w){w.selected=u.selected}):u.parent&&(u.parent.selected=u.parent.children.some(function(w){return w.selected}));C.onVisibilityChanged()})}this.canRemoveAreas&&
u.isHost&&(F=k.create("div",{"class":"esriGEFloatEnd esriGESpaceBeforeBig esriGEReportPlayerToolbar_removeAreaButton"},E),F.addEventListener("click",function(w){w.stopPropagation();C.onRemoveAreas(u.isArea?[u.analysisArea]:u.analysisAreas)}),p.setTooltipToNode(F,u.isGroup?this.nls.removeAreasFromInfographic:this.nls.removeAreaFromInfographic));this.canMoveAreas&&u.isHost&&this.isCompareAll()&&(F=k.create("div",{"class":"esriGEFloatEnd upDownArrowsBlock"},E),0<u.hostIndex&&k.create("div",{"class":"dijitInline upArrow"},
F).addEventListener("click",function(w){w.stopPropagation();C.onMoveUp(u)}),u.hostIndex<this.getNumHostItems()-1&&k.create("div",{"class":"dijitInline downArrow"},F).addEventListener("click",function(w){w.stopPropagation();C.onMoveDown(u)}));F=k.create("div",{"class":"dijitInline",innerHTML:u.label},E);u.parent&&(F.style.paddingLeft="20px");this.wrapInCards&&(u.isArea&&!u.parent?l.add(E,"areaCard_only"):u.isGroup?l.add(E,"areaCard_groupTop"):u.isArea&&l.add(E,u.parent.children.indexOf(u)===u.parent.children.length-
1?"areaCard_groupBottom":"areaCard_groupMiddle"));this.selectPresentation(E,v,u);return E},isCompareAll:function(){return!1},getNumHostItems:function(){return 0},onAddMoreAreas:function(){},onRemoveAreas:function(u){},onVisibilityChanged:function(){},onMoveUp:function(u){},onMoveDown:function(u){},onCompareAreasSideBySide:function(){},onStopComparison:function(){},onClosePopup:function(){}});return t(d,{"class":"dijitInline esriGEOnDemandSelectNoBackground",listClass:"esriGEOnDemandSelectVeryTallList800 esriGEOnDemandSelectSpacedOut esriGEReportPlayerToolbar_areasSelectList",
player:null,canAddMoreAreas:!1,areasSelectButtons:null,comparisonSettingsBlock:null,comparisonSettings:null,_nls:null,buildRendering:function(){var u=this;this.inherited(arguments);this._nls=q.mixin({},n,this.player.nlsMap);this.itemRenderer=new r({nls:this._nls,onAddMoreAreas:function(){u.onAddMoreAreas();u.closePopup()},onRemoveAreas:function(v){var y=2>=u._getNumHostItems();u.onRemoveAreas(v,y);y&&u.closePopup()},isCompareAll:function(){return u.player.viewMode===b.PANELS_IN_STACK_ALL},getNumHostItems:function(){return u._getNumHostItems()},
onVisibilityChanged:function(){var v={};u.get("options").forEach(function(y){y.isArea&&(v[y.analysisArea.index]=y.selected)});u.refresh();u.player.getCurrentReportContainer().setAreasVisibilityState(v,{append:!0})},onMoveUp:function(v){},onMoveDown:function(v){},onCompareAreasSideBySide:function(){u.onCompareAreasSideBySide();u.closePopup()},onStopComparison:function(){var v=-1;u.get("options").some(function(y){if(y.analysisArea&&!y.analysisArea.hidden)return v=y.analysisArea.index,!0});u.onStopComparison(v);
u.closePopup()},onClosePopup:function(){u.closePopup()}})},_buildAdditionalPopupListProperties:function(){var u=this;return{selectionValidator:function(v){return u.player.viewMode!==b.PANELS_IN_STACK_ALL&&!!v&&!v.isSeparator&&!1!==v.enabled}}},buildAreaOptions:function(u){var v=g.groupAreas(u),y=1<v.groupInfos.length&&!v.isOnlyAreasInOnlyGroup;this.itemRenderer.wrapInCards=y;this.itemRenderer.canRemoveAreas=y&&!h.isMobileDevice();this.itemRenderer.canMoveAreas=!1;var A=[],C=0;v.groupInfos.forEach(function(E,
F){if(E.isRealGroup){var B={isGroup:!0,isHost:!0,hostIndex:C++,label:E.label,value:"group_"+F,enabled:!1,analysisAreas:E.areas,children:[]};A.push(B)}E.areas.forEach(function(w){w={isArea:!0,label:w.shortName||w.name||"",value:w.index,analysisArea:w,parent:B,isHost:!B};w.isHost&&(w.hostIndex=C++);A.push(w);B&&B.children.push(w)})});v={isSeparator:!0};A.push(v);this.player.viewMode!==b.PANELS_IN_SLIDES&&(!h.isMobileDevice()&&1<u.analysisAreas.filter(function(E){return!E.hidden}).length&&A.push({label:this._nls.compareAreasSideBySide,
value:"all"}),this.canAddMoreAreas&&A.push({label:this._nls.addMoreAreas,value:"addAreas"}));this.areasSelectButtons&&this.areasSelectButtons.forEach(function(E){E.isVisible&&!E.isVisible()||A.push({label:E.label,value:E.id,isAdditional:!0,buttonInfo:E})});A[A.length-1]===v&&A.pop();this._updateTreeSelection(A);this.set("options",A);this._updateComparisonSettings()},_getNumHostItems:function(){var u=0;this.get("options").some(function(v){v.isHost&&u++});return u},onPopupListPreBuild:function(){this._updateTreeSelection()},
_updateTreeSelection:function(u){if(this.player.viewMode===b.PANELS_IN_STACK_ALL){var v=this.player.getCurrentReportContainer().getAreasVisibilityState();u=u||this.get("options");u.forEach(function(y){if(y.isGroup||y.isArea)y.canSelect=!0,y.isGroup?(y.children.forEach(function(A){A.selected=v[A.analysisArea.index]}),y.selected=y.children.some(function(A){return A.selected})):y.selected=v[y.analysisArea.index]})}},_updateComparisonSettings:function(){var u=this;this.comparisonSettings&&this.comparisonSettings.destroy();
this.comparisonSettings=null;this.comparisonSettingsBlock&&k.destroy(this.comparisonSettingsBlock);this.comparisonSettingsBlock=null;this.player.viewMode===b.PANELS_IN_STACK_ALL&&(this.comparisonSettingsBlock=k.create("div",{"class":"dijitInline esriGEClickable"},this.domNode.parentNode),k.create("div",{"class":"dijitInline esriGESpaceBeforeBig esriGEIcon16 esriGEReportPlayerToolbar_comparisonSettingsIcon"},this.comparisonSettingsBlock),m.makePopup(function(){u.comparisonSettings||(u.comparisonSettings=
new c({player:u.player,onChange:function(){u.player.getCurrentReportContainer().setComparisonSettings(u.comparisonSettings.getSettings())}}));u.comparisonSettings.setSettings(u.player.getCurrentReportContainer().getComparisonSettings());return u.comparisonSettings},this,this.comparisonSettingsBlock))},onAddMoreAreas:function(){},onRemoveAreas:function(u,v){},onCompareAreasSideBySide:function(){},onStopComparison:function(u){},destroy:function(){this.comparisonSettings&&this.comparisonSettings.destroy();
this.inherited(arguments)}})})},"esri/dijit/geoenrichment/TriStateItem":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/Stateful dojo/on dojo/dom-construct dojo/dom-class ./utils/DeviceUtil".split(" "),function(t,q,l,k,f,e,a,b){return t(k,{domNode:null,checkboxNode:null,checked:!1,disabled:!1,autoToggle:!0,_currentClass:null,_lastChecked:!1,constructor:function(d,c,g){var h=b.isMobileDevice()?"touchstart":"click";c=c||{};var m=c["class"];c["class"]=(m?m+" ":"")+"esriTriStateCheckBoxIcon";
if(m=c.label){if(d instanceof HTMLLabelElement)d.innerHTML="\x26nbsp;"+m;else{var p=c.labelAttrs||{};p.innerHTML="\x26nbsp;"+m;p=e.create("label",p);d&&e.place(p,d);d=p}c=l.mixin({},c);delete c.label;delete c.labelAttrs}this.checkboxNode=e.create("div",c,d,d instanceof HTMLLabelElement?"first":g);this._currentClass=this._composeClass();a.add(this.checkboxNode,this._currentClass);d instanceof HTMLLabelElement?(f(d,h,l.hitch(this,this._onClick)),a.add(d,"esriTriStateCheckBoxLabel")):f(this.checkboxNode,
h,l.hitch(this,this._onClick));this.domNode=m?d:this.checkboxNode},postscript:function(){},_onClick:function(d){this.disabled||(this.autoToggle&&this.toggle(),d.checked=this.checked,this.onClick(q.fix(d)))},onClick:function(d){},toggle:function(){this.set("checked",!this._lastChecked);return this.checked},_checkedSetter:function(d){d!==this.checked&&(this.checked="mixed"===d?d:this._lastChecked=!!d,this._updateClass())},_disabledSetter:function(d){this.disabled=!!d;this._updateClass()},_updateClass:function(){var d=
this._composeClass();d!==this._currentClass&&(a.replace(this.checkboxNode,d,this._currentClass),this._currentClass=d)},_composeClass:function(){var d="esriTriStateCheckBox"+("mixed"==this.checked?"Mixed":this.checked?"Checked":"");return this.disabled?d+"Disabled":d}})})},"esri/dijit/geoenrichment/ToggleButton":function(){define(["dojo/_base/declare","dojo/Stateful","dojo/on","dojo/dom-construct","dojo/dom-class"],function(t,q,l,k,f){return t(q,{domNode:null,checked:!1,disabled:!1,mode:"toggle",constructor:function(e,
a,b){a=a||{};var d=a["class"];this.checked=!!a.checked;this.mode=a.mode||"toggle";this.domNode=k.create("div",{"class":(d?d+" ":"")+"esriGEToggleButton"},e,b);this._updateClass();l(this.domNode,"click",function(c){this.disabled||(c.checked=this.toggle(),this.onClick(c))}.bind(this))},postscript:function(){},_checkedSetter:function(e){this.checked=!!e;this._updateClass()},_modeSetter:function(e){this.mode=e;this._updateClass()},_disabledSetter:function(e){this.disabled=e;this._updateClass()},_updateClass:function(){f.remove(this.domNode,
"checked unchecked switch toggle");f.add(this.domNode,"toggle"===this.mode?"toggle":"switch");f.add(this.domNode,this.checked?"checked":"unchecked");f[this.disabled?"add":"remove"](this.domNode,"disabled")},onClick:function(e){},toggle:function(){this.set("checked",!this.checked);return this.checked}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ComparisonSettings":function(){define("dojo/_base/declare esri/dijit/geoenrichment/TriStateItem dijit/_WidgetBase dijit/_TemplatedMixin esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/NodeLabelEditor esri/dijit/geoenrichment/utils/TooltipUtil dojo/text!../templates/ComparisonSettings.html dojo/i18n!esri/nls/jsapi".split(" "),
function(t,q,l,k,f,e,a,b,d){d=d.geoenrichment.dijit.ReportPlayer.PlayerToolbar;return t([l,k],{templateString:b,nls:d,player:null,showBackgroundImageCheckbox:null,splitPanelsCheckbox:null,postCreate:function(){var c=this;this.inherited(arguments);this.showBackgroundImageCheckbox=new q(this.showBackgroundImageLabel);this.showBackgroundImageCheckbox.onClick=function(){c._onChange()};this.splitPanelsCheckbox=new q(this.splitPanelsLabel);this.splitPanelsCheckbox.onClick=function(){c._update();c._onChange()};
a.setTooltipToNode(this.splitPanelsInfoIcon,d.splitPanelsTooltip);var g=this.player.nlsMap&&this.player.nlsMap.zoomPanelsTooltip||d.zoomPanelsTooltip;f[g?"show":"hide"](this.zoomPanelsInfoIcon);a.setTooltipToNode(this.zoomPanelsInfoIcon,g);this._initZoomControls();this._initZoomSplitControls()},_zoomEditor:null,_zoom:0,_initZoomControls:function(){var c=this;this._zoomEditor=new e({numericOnly:!0,onApply:function(g){c._setZoom(g)},onCancel:function(){c._updateZoomLabel()}});this.zoomLabel.addEventListener("click",
function(){c._zoomEditor.range={min:10,max:500};c._zoomEditor.editNodeLabel(c.zoomLabel,c._zoom)});this.zoomOutButton.addEventListener("click",function(){c._setZoom(Math.max(10,c._zoom-10))});this.zoomInButton.addEventListener("click",function(){c._setZoom(Math.min(500,c._zoom+10))});this.resetButton.addEventListener("click",function(){c._setZoom(100)})},_setZoom:function(c,g){c=Math.round(c);this._zoom!==c&&(this._zoom=c,this._updateZoomLabel(),this._update(),!g&&this._onChange())},_updateZoomLabel:function(){this.zoomLabel.innerHTML=
this._zoom+"%"},_zoomSplitEditor:null,_zoomSplit:0,_initZoomSplitControls:function(){var c=this;this._zoomSplitEditor=new e({numericOnly:!0,onApply:function(g){c._setZoomSplit(g)},onCancel:function(){c._updateZoomSplitLabel()}});this.zoomSplitLabel.addEventListener("click",function(){c._zoomSplitEditor.range={min:10,max:500};c._zoomSplitEditor.editNodeLabel(c.zoomSplitLabel,c._zoomSplit)});this.zoomOutSplitButton.addEventListener("click",function(){c._setZoomSplit(Math.max(10,c._zoomSplit-10))});
this.zoomInSplitButton.addEventListener("click",function(){c._setZoomSplit(Math.min(500,c._zoomSplit+10))});this.resetSplitButton.addEventListener("click",function(){c._setZoomSplit(100)})},_setZoomSplit:function(c,g){c=Math.round(c);this._zoomSplit!==c&&(this._zoomSplit=c,this._updateZoomSplitLabel(),this._update(),!g&&this._onChange())},_updateZoomSplitLabel:function(){this.zoomSplitLabel.innerHTML=this._zoomSplit+"%"},_update:function(){this.resetButton.style.visibility=100===this._zoom?"hidden":
"visible";this.resetSplitButton.style.visibility=100===this._zoomSplit?"hidden":"visible";f.hide([this.zoomBlock,this.zoomSplitBlock]);f.show(this.splitPanelsCheckbox.get("checked")?this.zoomSplitBlock:this.zoomBlock)},setSettings:function(c){this.showBackgroundImageCheckbox.set("checked",!c.hideBackgroundImage);this.splitPanelsCheckbox.set("checked",c.splitPanels);this._setZoom(100*(c.scale||1),!0);this._setZoomSplit(100*(c.scaleSplit||1),!0);this._update()},getSettings:function(){return{hideBackgroundImage:!this.showBackgroundImageCheckbox.get("checked"),
splitPanels:this.splitPanelsCheckbox.get("checked"),scale:this._zoom/100,scaleSplit:this._zoomSplit/100}},_onChange:function(){this._update();this.onChange()},onChange:function(){}})})},"esri/dijit/geoenrichment/utils/NodeLabelEditor":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/keys dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/ObjectUtil".split(" "),function(t,q,l,k,f,e,a,b,d){return t(null,{_textMemo:null,
_handlers:null,_textBox:null,_node:null,numericOnly:!1,range:null,keepLabelDimensions:!0,constructor:function(c){q.mixin(this,c)},editNodeLabel:function(c,g){var h=this;this._stopEdit();this._node=c;this._textMemo="string"===typeof g||"number"===typeof g?g:c.innerHTML;g=e.position(c).w;c.innerHTML="";this._textBox=f.create("input",{type:"text"},c);this._textBox.name="node-label";this._textBox.value=this._textMemo;this._textBox.focus();this._textBox.select();this.keepLabelDimensions&&a.set(this._textBox,
"width",g+"px");this._handlers=[l(document.body,"keyup",function(m){m.keyCode===k.ESCAPE?h._cancelEdit():m.keyCode===k.ENTER&&h._applyEdit()}),l(document.body,"click",function(){b.isMouseOver(c)||h._cancelEdit()})]},_checkCanApply:function(c){if(!this.numericOnly)return!0;c=d.parseNumber(c);return isNaN(c)||this.range&&void 0!==this.range.min&&this.range.min>c||this.range&&void 0!==this.range.max&&this.range.max<c?!1:!0},_applyEdit:function(){var c=this._textBox.value;this._checkCanApply(c)?(this._node.innerHTML=
c,this._stopEdit(),this.onApply(c)):this._cancelEdit()},_cancelEdit:function(){this._node.innerHTML=this._textMemo;this._stopEdit();this.onCancel()},_stopEdit:function(){this._handlers&&this._handlers.forEach(function(c){c.remove()});this._textMemo=this._handlers=null;f.destroy(this._textBox);this._node=this._textBox=null},onApply:function(c){},onCancel:function(){}})})},"esri/dijit/geoenrichment/utils/ObjectUtil":function(){define(["dojo/number","./DateUtil"],function(t,q){var l={};Math.log10=Math.log10||
function(f){return Math.log(f)*Math.LOG10E};l.populateObject=function(f,e,a){function b(d,c){function g(m){var p=d[m],n=c[m],r=p&&"object"===typeof p;void 0!==p&&(void 0===n?c[m]=p:n&&"object"===typeof n&&r?b(p,n):a&&(r?(n=c[m]={},b(p,n)):c[m]=d[m]))}if(d&&c&&!(Array.isArray(d)&&!Array.isArray(c)||Array.isArray(c)&&!Array.isArray(d)))if(Array.isArray(d))d.forEach(function(m,p){g(p)});else for(var h in d)g(h)}b(e,f);return f};l.filterByPattern=function(f,e){function a(d,c,g){for(var h in d){var m=
d[h],p=c[h];if(Array.isArray(m)){var n=m[0];if(p&&Array.isArray(p)){var r=g[h]=[];p.forEach(function(v){if(v&&"object"===typeof v){var y=Array.isArray(v)?[]:{};a(n,v,y);r.push(y)}})}}else if("object"===typeof m){if(p&&"object"===typeof p){var u=g[h]={};a(m,p,u)}}else void 0!==p&&(g[h]=p)}}var b={};a(e,f,b);return b};l.traverseObject=function(f,e){for(var a in f){var b=f[a];e(b,a,f);b&&"object"===typeof b&&l.traverseObject(b,e)}};l.copyOwnJsonProperties=function(f,e,a){e=e||{};for(var b in f){var d=
f[b];f.hasOwnProperty(b)&&"function"!=typeof d&&(d&&"object"==typeof d&&a&&(d=a(b,d)),void 0!==d&&(e[b]=d))}return e};l.removeUndefinedProperties=function(f){f&&Object.keys(f).forEach(function(e){void 0===f[e]&&delete f[e]});return f};l.getValue=function(f,e){if("string"!==typeof e)return f;e=e.split(".");for(var a=0;a<e.length;a++)f=f&&f[e[a]];return f};l.setValue=function(f,e,a){if("string"===typeof e&&(e=e.split("."),e.length)){for(var b=0;b<e.length-1;b++)f=f&&f[e[b]];f&&(f[e[e.length-1]]=a)}};
l.isNumber=function(f){return!isNaN(parseFloat(f))&&isFinite(f)};l.roundNumber=function(f,e){return"number"!==typeof f?f:parseFloat(f.toFixed(void 0!==e?e:0))};l.getBestPrecision=function(f){return 0===f?0:Math.max(0,Math.round(Math.log10(3E3/Math.abs(f))))};l.getPlaces=function(f,e){function a(h,m){var p=f.indexOf(h,b);if(0>p)return d;h=f.charAt(p+h.length);return!h||0>m.indexOf(h)?d:p-b}f=+f;if(isNaN(f))return-1;f+="";var b=f.indexOf(".")+1,d=b?f.length-b:0;if(2>=d||!e)return d;e=0;if(!+f.substr(0,
b-1))for(;"0"===f.charAt(b);)b++,e++,d--;for(var c=d-1;2<=c;c--){var g=Math.min(a("000000000000000".substr(0,c),"01234"),a("999999999999999".substr(0,c),"56789"));if(g!==d){d=g;break}}return d+e};l.formatNumber=function(f,e){e="number"===typeof e?{places:e}:e||{};var a=e.places,b={};0<=a?b.places=a:a=-1;b.locale=e.locale||q.getDateNumberLocale();f=t.format(f,b);if(e.noSeparator){b=l.getSeparator();var d;if(b)for(;0<=(d=f.indexOf(b));)f=f.substr(0,d)+f.substr(d+1)}if(e.preserveTrailingZeroes||0>=a||
!f)return f;for(e=f.length;0<a&&"0"==f.charAt(e-1);)e--,--a||e--;return f.substr(0,e)};l.formatNumberAsCurrency=function(f,e,a){return e?e.split(";")[0>f?1:0].replace("0",l.formatNumber(Math.abs(f),a)):l.formatNumber(f,a)};var k;l.getSeparator=function(){void 0===k&&(k=t.format(9999,{places:0}).replace(/9/g,""));return k};l.parseNumber=function(f,e,a,b){if(""===f)return"undefined"!==typeof a?a:NaN;if(null==f||"string"!==typeof f&&isNaN(f))return NaN;f=String(f);if(!f.trim())return void 0!==a?a:NaN;
a=t.parse(f,{strict:b,locale:q.getDateNumberLocale()});isNaN(a)&&f.trim().length&&(a=b?t.parse(f,{strict:b,locale:"en-US"}):Number(f));return isNaN(a)||void 0===e||0>e?a:t.round(a,e)};l.parsePercentOrCurrency=function(f,e,a,b,d){"string"===typeof f&&(f=f.replace("%",""),e&&(e=e.split(";")[0].replace("0",""),f=f.replace(e,"")));return l.parseNumber(f,a,b,d)};l.compareEqual=function(f,e,a){return void 0===a?f===e:Number(Number(f).toFixed(a))===Number(Number(e).toFixed(a))};return l})},"esri/dijit/geoenrichment/utils/DateUtil":function(){define(["dojo/date/locale",
"esri/moment"],function(t,q){var l={formatDate:function(k,f){k=l.objectToDate(k);f.locale=f.locale||l.getDateNumberLocale();return k?t.format(k,f):""},formatMoment:function(k,f){return(k=l.objectToTime(k))?q(k).format(f):""},formatDateShort:function(k){return l.formatMoment(k,"L")},formatDateTimeShort:function(k){return l.formatMoment(k,"L LT")},formatLiveTime:function(k){var f=l.formatMoment(k,"l, LT").replace(/\d\d\d\d/,function(e){return e.substr(2)});return f?f+" "+l.formatDate(k,{datePattern:"ZZZZ",
selector:"date"}):""},formatTypicalTime:function(k){return l.formatMoment(k,"ddd LT")},parseDateShort:function(k){return(k=+q(k,"L"))?new Date(k):null},getReportFooterDate:function(k){return t.format(k||new Date,{datePattern:"MMMM d, yyyy",selector:"date"})},getFullYear:function(){return(new Date).getFullYear()},objectToTime:function(k){if(!k)return null;k="string"===typeof k?new Date(k):k;return k.getTime?k.getTime():Number(k)||null},objectToDate:function(k){return k?k.getTime?k:new Date(k):null},
getDateNumberLocale:function(){return window.dojoConfig&&window.dojoConfig.extraLocale&&window.dojoConfig.extraLocale[0]||window.dojo.locale}};return l})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AnalysisAreaUtil":function(){define(["dojo/_base/lang","esri/geometry/webMercatorUtils","esri/dijit/geoenrichment/utils/CoordinateUtil"],function(t,q,l){var k={geometryToLatLong:function(f){var e=f.spatialReference.wkid;return e===l.WGS_84_WKID?{STORE_LONG:f.x,STORE_LAT:f.y}:
l.isWebMercator(e)?(f=q.xyToLngLat(f.x,f.y),{STORE_LONG:f[0],STORE_LAT:f[1]}):null},populateCombinedAreasInfo:function(f,e){var a={},b={};e.forEach(function(d){d.latitude&&(a[d.latitude]=1);d.longitude&&(b[d.longitude]=1)});f.name=f.name||e.map(function(d){return d.name}).join(", ");f.shortName=f.shortName||e.map(function(d){return d.shortName||d.name}).join(", ");f.description=f.description||e.map(function(d){return d.description||d.name}).join(", ");f.address=f.address||e.map(function(d){return d.address||
d.name}).join(", ");f.latitude=f.latitude||Object.keys(a).join(", ");f.longitude=f.longitude||Object.keys(b).join(", ");return f},groupAreas:function(f){function e(h){var m=h.locationName||h.name;return{isSingleAreaGroup:!0,label:m,hideGroupLabel:m===(h.shortName||h.name),areas:[h]}}var a=f.combinedAreasInfo&&f.combinedAreasInfo.groups||[],b=[],d=[],c={};f.analysisAreas.forEach(function(h){if((!f.filter||f.filter(h))&&!h.hidden)if(h.isGrouped){if(!c[h.groupIndex]){var m=a[h.groupIndex];m=c[h.groupIndex]=
{isRealGroup:!0,label:m.locationName||m.name,areas:[]};d.push(m);b.push(m)}c[h.groupIndex].areas.push(h)}else b.push(e(h))});if(1===b.length&&b[0].isRealGroup){b=b[0].areas.map(e);d.length=0;var g=!0}return{groupInfos:b,isOnlyAreasInOnlyGroup:g}},parseSites:function(f){if(f.sites){f.analysisAreas=[];f.sites.forEach(function(a){a.areas.forEach(function(b){f.analysisAreas.push(b)})});f.combinedAreasInfo={groups:f.sites.map(function(a){var b=t.mixin({},a);delete b.areas;delete b.attributes;delete b.notes;
delete b.images;b.indexes=a.areas.map(function(d){return f.analysisAreas.indexOf(d)});return b})};k.populateCombinedAreasInfo(f.combinedAreasInfo,f.sites);if(!f.attachmentsProvider||!f.attachmentsProvider.getAttributesForAreaAt){f.attachmentsProvider={};f.attachmentsProvider.supportsMultipleAreas=1<f.sites.length;var e=f.attachmentsProvider.areaAttachments=[];f.sites.forEach(function(a){a.areas.forEach(function(b){e.push({attributes:a.attributes,notes:a.notes,images:a.images})})})}delete f.sites}}};
return k})},"esri/dijit/geoenrichment/utils/CoordinateUtil":function(){define(["esri/geometry/webMercatorUtils","esri/geometry/jsonUtils"],function(t,q){var l={},k=[4326,102100,102113,3857];l.WGS_84_WKID=4326;l.WEB_MERCATOR_WKID=102100;l.getSupportedWKIDs=function(){return k.slice()};l.testSpatialReferenceWKID=function(f){f=k.indexOf(Number(f&&"object"===typeof f?f.wkid:f));return 0<=f?k[0===f?0:1]:0};l.isWebMercator=function(f){return 102100===l.testSpatialReferenceWKID(f)};l.isWGS84=function(f){return 4326===
l.testSpatialReferenceWKID(f)};l.getGeometryConverter=function(f,e){f=l.testSpatialReferenceWKID(f);e=l.testSpatialReferenceWKID(e);return f&&e&&f!==e?4326===f?t.geographicToWebMercator:t.webMercatorToGeographic:null};l.toWGS84=function(f){return l.toSpatialReference(f,4326)};l.toWebMercator=function(f){return l.toSpatialReference(f,102100)};l.toSpatialReference=function(f,e){f&&!f.toJson&&(f=q.fromJson(f));e=l.getGeometryConverter(f&&f.spatialReference,e);return null!=e?e(f):f};return l})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ZoomSelect":function(){define("dojo/_base/declare dojo/dom-construct esri/dijit/geoenrichment/lists/FlowListDefaultItemRenderer ./Select ./ZoomUtil esri/dijit/geoenrichment/utils/NodeLabelEditor dojo/i18n!esri/nls/jsapi".split(" "),
function(t,q,l,k,f,e,a){a=a.geoenrichment.dijit.ReportPlayer.PlayerToolbar;var b=t(l,{createPresentation:function(d,c,g,h){var m=this,p=this.inherited(arguments);if(d.isCustomZoom){p.innerHTML="";var n=q.create("div",{"class":"esriGELink",innerHTML:a.customZoom},p),r=new e({numericOnly:!0,onApply:function(u){m.onCustomZoomApplied(u);n.innerHTML=a.customZoom},onCancel:function(){n.innerHTML=a.customZoom}});n.addEventListener("click",function(){r.range={min:10,max:1E3};r.editNodeLabel(n,"")})}else this.selectPresentation(p,
c);return p},onCustomZoomApplied:function(d){}});return t(k,{listClass:"esriGEOnDemandSelectUnlimitedTallList esriGEOnDemandSelectSpacedOut",buildRendering:function(){var d=this;this.inherited(arguments);this.itemRenderer=new b({onCustomZoomApplied:function(c){d.set("value",c);d.onChange({value:c});d.closePopup()}})},postCreate:function(){this.inherited(arguments);var d=f.getOptions().slice();d.push({isCustomZoom:!0,enabled:!1});this.set("options",d);this.set("value",100)}})})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ZoomUtil":function(){define(["dojo/i18n!esri/nls/jsapi"],
function(t){var q={};t=t.geoenrichment.dijit.ReportPlayer.PlayerToolbar;q.FIT_PAGE="fitPage";q.FIT_PAGE_WIDTH="fitPageWidth";q.FIT_PAGE_HEIGHT="fitPageHeight";q.getOptions=function(){var l=[{value:q.FIT_PAGE,label:t.fitPage},{value:q.FIT_PAGE_WIDTH,label:t.fitPageWidth},{value:q.FIT_PAGE_HEIGHT,label:t.fitPageHeight}];[{value:400,label:"400%"},{value:200,label:"200%"},{value:150,label:"150%"},{value:125,label:"125%"},{value:100,label:"100%"},{value:90,label:"90%"},{value:80,label:"80%"},{value:70,
label:"70%"},{value:60,label:"60%"},{value:50,label:"50%"}].forEach(function(k){l.push({isCustom:!0,value:-1,label:""});l.push(k)});l.push({isCustom:!0,value:-1,label:""});return l};q.getClosestZoomAndUpdateOptions=function(l,k){k.forEach(function(b){b.isCustom&&(b.value=-1,b.hidden=!0)});var f=[];k.forEach(function(b){b.isCustom||"number"!==typeof b.value||f.push({option:b,value:b.value,score:l<b.value?l/b.value:b.value/l})});f.sort(function(b,d){return d.score-b.score});var e=f[0];if(1===e.score)return e.value;
var a=k.indexOf(e.option);k=k[a+(l>e.value?-1:1)];k.value=l;k.label=Math.round(l)+"%";k.hidden=!1;return k.value};return q})},"esri/dijit/geoenrichment/ReportPlayer/toolbar/ToolbarArranger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-style","esri/dijit/geoenrichment/utils/DomUtil"],function(t,q,l,k){return t(null,{showAreaTitle:!1,stretchToolbarNode:null,domNode:null,infographicsSelectDiv:null,areaTitleDiv:null,areaTitleInnerDiv:null,rightSideControlsBlock:null,areasSelectDiv:null,
zoomSelectDiv:null,pageSelectDiv:null,commandButtonsContainer:null,constructor:function(f){q.mixin(this,f)},arrangeControls:function(){k[0<this.infographicsSelectDiv.children.length?"show":"hide"](this.infographicsSelectDiv);k[this.showAreaTitle?"show":"hide"](this.areaTitleDiv);this.domNode.style.width="";this.areaTitleDiv.style.marginLeft="";this.areaTitleInnerDiv.style.maxWidth="";this.rightSideControlsBlock.style.position=this.stretchToolbarNode?"absolute":"static";this.stretchToolbarNode&&(this.domNode.style.width=
this.stretchToolbarNode.clientWidth+"px",this._processStretchSpecialCases(this.stretchToolbarNode));this.syncRightSideVisibility()},_processStretchSpecialCases:function(f){function e(b){return k.isHidden(b)?0:b.clientWidth+a(b)}function a(b){return k.isHidden(b)?0:l.get(b,"marginLeft")+l.get(b,"marginRight")}this.showAreaTitle&&(f=f.clientWidth,f-=e(this.infographicsSelectDiv),f-=e(this.rightSideControlsBlock),f-=e(this.areasSelectDiv),f-=a(this.areaTitleDiv),this.areaTitleInnerDiv.style.maxWidth=
f+"px",k.isHidden(this.infographicsSelectDiv)||k.isHidden(this.infographicsSelectDiv)||(this.areaTitleDiv.style.marginLeft=Math.min(f-this.areaTitleDiv.clientWidth,(this.domNode.clientWidth-this.areaTitleDiv.clientWidth)/2-e(this.infographicsSelectDiv))+"px"))},hasVisibleControls:function(){return[this.infographicsSelectDiv,this.areaTitleDiv,this.areasSelectDiv,this.pageSelectDiv,this.zoomSelectDiv,this.commandButtonsContainer].some(k.isNodeInLayout)},syncRightSideVisibility:function(){k.show(this.rightSideControlsBlock);
var f=[this.pageSelectDiv,this.zoomSelectDiv,this.commandButtonsContainer].some(k.isNodeInLayout);k[f?"show":"hide"](this.rightSideControlsBlock)}})})},"esri/dijit/geoenrichment/utils/InvokeUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(t,q){return{invoke:function(l,k,f,e,a){l.__invokeTimeoutIDs||(l.__invokeTimeoutIDs={});var b=l.__invokeTimeoutIDs[k];if(b){if(null==f||!1===e)return b.dfd.promise;clearTimeout(b.handle)}b||(b=l.__invokeTimeoutIDs[k]=
{dfd:new t});b.handle=setTimeout(function(){delete l.__invokeTimeoutIDs[k];q(a?l[k].apply(l,a):l[k](),function(d){b.dfd.resolve(d)},function(d){b.dfd.reject(d)})},f||0);return b.dfd.promise},hasPendingInvoke:function(l,k){return!(!l.__invokeTimeoutIDs||!l.__invokeTimeoutIDs[k])},cancelInvoke:function(l,k){l.__invokeTimeoutIDs&&l.__invokeTimeoutIDs[k]&&(clearTimeout(l.__invokeTimeoutIDs[k].handle),delete l.__invokeTimeoutIDs[k])}}})},"esri/dijit/geoenrichment/ReportPlayer/ReportPlayerViewModel":function(){define("dojo/_base/declare dojo/aspect esri/dijit/geoenrichment/promise/all ./core/layout/LayoutBuilder ./core/themes/ThemeLibrary ./core/themes/ReportThemes ./core/supportClasses/map/layers/locator/LocatorPointsController ./core/supportClasses/map/layers/std/StdPolygonsController ./core/supportClasses/map/layers/thisAreas/ThisAreasHighlightController ./core/supportClasses/EditorUnits ../utils/ColorUtil".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g){return t(null,{isReportPlayerViewModel:!0,isGraphicStyle:!1,layoutBuilder:null,dynamicReportInfo:null,enableDataDrilling:!1,preInitialize:function(){this.layoutBuilder=this.layoutBuilder||new k;return this.layoutBuilder.initCoreComponents()},initialize:function(h,m){this.preInitialize();return this.layoutBuilder[h?"initClassicComponents":"initGraphicComponents"](m)},_animationAllowed:!1,_animationSuspended:!1,isAnimationAllowed:function(){return this._animationAllowed&&
!this._animationSuspended},setAnimationAllowed:function(h){this._animationAllowed=h},setAnimationSuspended:function(h){this._animationSuspended=h},_theme:null,getCurrentTheme:function(h){return h||this._theme},setTheme:function(h){this._theme=h||f.getReportThemeById(e.GRAPHIC)},getTableDefaultStyles:function(h,m){h=this.getCurrentTheme(h).table.overrideStyles;return m?h[m]:h},getChartDefaultStyles:function(h){return this.getCurrentTheme(h).chart},getDocumentDefaultStyles:function(h){return this.getCurrentTheme(h).document},
getInfographicDefaultStyles:function(h){return this.getCurrentTheme(h).infographic},getStaticInfographicDefaultStyles:function(h){return(h=this.getInfographicDefaultStyles(h))&&h.staticInfographic},isLightDocumentTheme:function(h){return g.isLightColor(this.getCurrentTheme(h).document.backgroundColor)},setDynamicReportInfo:function(h){this.dynamicReportInfo=h;this.isGraphicStyle=h.reportObject.isGraphicReport},getDynamicImageFunc:function(h,m,p){},_locatorPointsControllers:null,getLocatorPointsController:function(h,
m){var p=h.calculatorName+"_"+m;this._locatorPointsControllers=this._locatorPointsControllers||{};var n=this._locatorPointsControllers[p];n||(n=this._locatorPointsControllers[p]=new a(h,this.dynamicReportInfo.fieldData,this.dynamicReportInfo.isMultiFeature,m),q.after(n,"destroy",function(){delete this._locatorPointsControllers[p]}.bind(this)));return n},_stdPolygonsControllers:null,getStdPolygonsController:function(h,m){this._stdPolygonsControllers=this._stdPolygonsControllers||{};var p=h+"_"+(m||
0),n=this._stdPolygonsControllers[p];n||(n=this._stdPolygonsControllers[p]=new b(h,this.dynamicReportInfo.fieldData,this.dynamicReportInfo.isMultiFeature,m),q.after(n,"destroy",function(){delete this._stdPolygonsControllers[p]}.bind(this)));return n},loadAllStdFeatures:function(){var h=[],m;for(m in this._stdPolygonsControllers)h.push(this._stdPolygonsControllers[m].loadAllFeatures());return l(h)},_thisAreasHighlightController:null,getThisAreasHighlightController:function(){this._thisAreasHighlightController||
(this._thisAreasHighlightController=new d,q.after(this._thisAreasHighlightController,"destroy",function(){this._thisAreasHighlightController=null}.bind(this)));return this._thisAreasHighlightController},_legendControllers:null,registerLegendController:function(h,m,p){this._legendControllers=this._legendControllers||{};var n=this._legendControllers[m]=this._legendControllers[m]||{};n[p]=h;var r=h.addCallback(function(u,v){if(v)for(var y in n)v=n[y],v!==h&&v.setLegendVisible(u)},"viewModel");return{remove:function(){delete n[p];
r.remove()}}},_benchmarkController:null,_benchmarkDisabled:!1,getBenchmarkController:function(){return!this._benchmarkDisabled&&this._benchmarkController},registerBenchmarkController:function(h){this._benchmarkController&&this._benchmarkController.destroy();this._benchmarkController=h;q.after(this._benchmarkController,"destroy",function(){this._benchmarkController=null}.bind(this))},isBenchmarkedArea:function(h){return this._benchmarkDisabled?!1:"number"===typeof h&&this._benchmarkController&&0<=
this._benchmarkController.getAreaIndex()&&this._benchmarkController.getAreaIndex()!==h},setBenchmarkDisabled:function(h){this._benchmarkDisabled=h},reset:function(){[this._locatorPointsControllers,this._stdPolygonsControllers].forEach(function(h){h&&Object.keys(h).forEach(function(m){(m=h[m])&&m.destroy()})});this._stdPolygonsControllers=this._locatorPointsControllers=null;this._thisAreasHighlightController&&this._thisAreasHighlightController.destroy();this._thisAreasHighlightController=null},canExportToExcel:function(){return!1},
exportToExcel:function(h){},prepareExportToExcelParameters:function(h){},getUnits:function(){return"px"},provideUnits:function(h){return c.provideUnits(h,this.getUnits())},roundForUnits:function(h){return c.round(h,this.getUnits())}})})},"esri/dijit/geoenrichment/ReportPlayer/core/layout/LayoutBuilder":function(){define(["dojo/_base/declare","dojo/_base/lang","esri/dijit/geoenrichment/Deferred","dojo/dom-construct"],function(t,q,l,k){return t(null,{_moduleMap:null,_getModulePaths:function(){return{core:{section:"esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionRenderer",
grid:"esri/dijit/geoenrichment/ReportPlayer/core/grid/AdjustableGrid",image:"esri/dijit/geoenrichment/ReportPlayer/core/annotations/image/ImageRenderer",chart:"esri/dijit/geoenrichment/ReportPlayer/core/charts/ChartRenderer",map:"esri/dijit/geoenrichment/ReportPlayer/core/map/MapRenderer"},classic:{reportContainer:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainer/ReportContainer"},graphicCore:{shape:"esri/dijit/geoenrichment/ReportPlayer/core/annotations/shape/ShapeRenderer",infographic:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicRenderer"},
graphic_fullPages:{reportContainerGrid:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerGrid/ReportContainerGrid"},graphic_panelsInSlides:{reportContainerPagination:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerPagination/ReportContainerPagination",infographicPage:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPage"},graphic_panelsInStack:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"},
graphic_panelsInStackAll:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",reportContainerStackAll:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStackAll",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"},graphic_panelsInRow:{reportContainerStack:"esri/dijit/geoenrichment/ReportPlayer/core/reportContainerStack/ReportContainerStack",infographicPageStack:"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicsPageStack"}}},
initCoreComponents:function(){var f=this._getModulePaths();return this._initPaths(q.mixin({},f.core,f.graphicCore))},initClassicComponents:function(){var f=this._getModulePaths();return this._initPaths(q.mixin({},f.core,f.classic))},initGraphicComponents:function(f){var e=this._getModulePaths();return this._initPaths(q.mixin({},e.core,e.graphicCore,e["graphic_"+f]||e.graphic_fullPages))},_initPaths:function(f){var e=this;this._moduleMap=this._moduleMap||{};var a=[],b;for(b in f)a.push({id:b,path:f[b]});
var d=new l;require(a.map(function(c){return c.path}),function(){for(var c=0;c<arguments.length;c++)e._moduleMap[a[c].id]=arguments[c];d.resolve()});return d.promise},createElement:function(f,e,a,b){switch(f){case "grid":case "reportContainer":case "reportContainerGrid":case "reportContainerPagination":case "reportContainerStack":case "reportContainerStackAll":case "infographicPage":case "infographicPageStack":return new this._moduleMap[f](e,a?k.create("div",null,a,b):void 0);case "section":return this._moduleMap.section.createSection(e,
a,b);case "emptySection":return this._moduleMap.section.createEmptySection(e,a,b);case "image":return this._moduleMap.image.createImageContainer(e);case "shape":return this._moduleMap.shape.createShapeContainer(e);case "chart":return this._moduleMap.chart.createChartPage(e);case "infographic":return this._moduleMap.infographic.createInfographicPage(e);case "map":return this._moduleMap.map.createMapContainer(e)}return!1},getClass:function(f){return this._moduleMap[f]}})})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeLibrary":function(){define("dojo/_base/lang ./PageBorderStyles ../charts/utils/ChartLineStyles ./ReportThemes ./ThemeUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/i18n!esri/nls/jsapi".split(" "),
function(t,q,l,k,f,e,a){function b(m){m=m||{};m=m.defaultFontFamilty||"Avenir Next";return{backgroundColor:"#FFFFFF",padding:5,icon:{backgroundColor:"#56a5d8"},highlightedIcon:{backgroundColor:"#D6851A"},iconBarBackground:{backgroundColor:"#AAAAAA",borderColor:"#AAAAAA"},titleLine:{color:"#A8A7A8"},titleStyle:{fontFamily:m,color:"#828282",fontSize:16,backgroundColor:"transparent"},variableLabelStyle:{fontFamily:m,color:"#56a5d8",fontSize:24,backgroundColor:"transparent"},variableLabelStyleHighlighted:{fontFamily:m,
fontSize:24},variableLabelStyleContrast:{fontFamily:m,fontSize:24},variableDescriptionStyle:{fontFamily:m,color:"#828282",fontSize:13,backgroundColor:"transparent"}}}function d(){return{style:q.ALL,lineStyle:"dashed",thickness:1,color:"#b2b2b2"}}function c(m){m=m||{};var p=m.defaultFontFamilty||"Avenir Next",n=m.defaultFontSize||13;return{document:{fontSize:n,fontFamily:p,backgroundImage:{data:null,position:"center",repeat:!1,scale:!0,opacity:1,size:null},border:d()},icon:{backgroundColor:"#56a5d8"},
highlightedIcon:{backgroundColor:"#D6851A"},table:{dataTablePadding:5,tooltip:{color:"#4c4c4c",backgroundColor:"#FFFFFF"},tooltipLink:{color:"#4c4c4c"}},chart:{renderSingleDataSeriesWithSameColor:!0,outlineStyle:l.SOLID,titleStyle:{fontFamily:p,fontSize:16},xAxis:{gridLinesStyle:l.SOLID,axisStyle:{fontFamily:p,fontSize:9},titleStyle:{fontFamily:p,fontSize:n}},yAxis:{gridLinesStyle:l.SOLID,baseLineStyle:l.SOLID,axisStyle:{fontFamily:p,fontSize:9},titleStyle:{fontFamily:p,fontSize:n}},dataLabelsStyle:{fontFamily:p,
fontSize:10},legendStyle:{fontFamily:p,fontSize:10},minMaxLegend:{titleStyle:{fontFamily:p,fontSize:10},minVariableLabelStyle:{fontFamily:p,fontSize:16},maxVariableLabelStyle:{fontFamily:p,fontSize:16}},icon:{backgroundColor:"#56a5d8"},line:{},column:{},bar:{},pie:{},donut:{},ring:{},pictureColumn:{},pictureBar:{},gauge:{dataLabelStyle:{fontFamily:p}},waffle:{dataValueStyle:{fontFamily:p,fontSize:30},dataLabelStyle:{fontFamily:p,fontSize:16}},tooltip:{color:"#4c4c4c",backgroundColor:"#FFFFFF"},tooltipLink:{color:"#4c4c4c"}},
infographic:{staticInfographic:b(m)}}}var g={DEFAULT_FONT_FAMILY_CLASSIC:"Verdana",DEFAULT_FONT_FAMILY_GRAPHIC:"Avenir Next",DEFAULT_FONT_SIZE_CLASSIC:10,DEFAULT_FONT_SIZE_GRAPHIC:13,CHART_DATA_FONT_SIZE:10,defaultStaticInfographic:b(),standardRamps:[{id:k.CLASSIC,colors:["#FFFFFF","#13729F","#DEA429"],additional:{table:{overrideStyles:{Default:{color:"#4C4C4C",backgroundColor:"#FFFFFF"},ReportTitle:{color:"#FFFFFF",backgroundColor:"#00436D"},TableHeader:{color:"#4C4C4C",backgroundColor:"#CCCCCC"},
GreyText:{color:"#AAAAAA",backgroundColor:"#FFFFFF"},BlueText:{color:"#00436D",backgroundColor:"#FFFFFF"},AlternatingRow:{color:"#4C4C4C",backgroundColor:"#EEEEEE"}}},chart:{renderSingleDataSeriesWithSameColor:!1,colors:"#13729F #DEA429 #6A9741 #A75523 #456E35 #D7DF22 #868686 #3C546D #829AB3 #DEDEDE #03406E #B1B1B1".split(" ")}}},{id:k.GRAPHIC,colors:["#FFFFFF","#56A5D8","#D6851A"],additional:{chart:{colors3series:["#56A5D8","#AED6F1","#2874A6"],colors:"#AED6F1 #85C1E9 #5DADE2 #3498DB #2E86C1 #2874A6 #21618C #1B4F72".split(" ")}}},
{id:"red",colors:["#d3d3d3","#8b4513","#ff4500"],additional:{chart:{colors3series:["#8b4513","#F1948A","#E74C3C"],colors:"#8b4513 #F1948A #EC7063 #E74C3C #CB4335 #B03A2E #943126 #78281F".split(" ")}}},{id:"dark",colors:["#6A6A6A","#FFFFFF","#EEEEEE"],additional:{chart:{colors3series:["#FFFFFF","#CACFD2","#A6ACAF"],colors:"#FFFFFF #D7DBDD #CACFD2 #BDC3C7 #A6ACAF #909497 #797D7F #626567 #4d4d4d #3e3e3e #262626".split(" ")}}},{id:"green",colors:["#556b2f","#90ee90","#ffffe0"],additional:{chart:{colors3series:["#E9F7EF",
"#A9DFBF","#27AE60"],colors:"#E9F7EF #A9DFBF #7DCEA0 #52BE80 #27AE60 #229954 #1E8449 #196F3D #145A32".split(" ")}}},{id:"green2",colors:["#FFFFFF","#0B7AC0","#35AC46"],additional:{chart:{colors3series:["#56A5D8","#AED6F1","#2874A6"],colors:"#56A5D8 #AED6F1 #85C1E9 #5DADE2 #3498DB #2E86C1 #2874A6 #21618C #1B4F72".split(" ")}}}]},h={};g.standardRamps.forEach(function(m){var p=t.mixin({},m.additional);p.id=m.id;var n=c({defaultFontFamilty:m.id===k.CLASSIC?"Verdana":"Avenir Next",defaultFontSize:m.id===
k.CLASSIC?10:13});f.applyThemeColorsToTheme({theme:n,colors:m.colors});e.populateObject(n,p,!0);g[m.id]=n;h[m.id]=n});g.TABLE_STYLES="Default ReportTitle TableHeader GreyText BlueText AlternatingRow".split(" ");g.getReportThemeById=function(m){return h[m]};g.isStandardTheme=function(m){return!!h[m]};g.getStandardThemes=function(){return Object.keys(h).map(function(m){return h[m]})};g.getDefaultStaticInfographicSettings=function(){return t.clone(g.defaultStaticInfographic)};g.getDefaultBorderSettings=
function(){return d()};g.getDefaultTheme=function(m){return c(m)};return g})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/PageBorderStyles":function(){define([],function(){var t={NONE:"none",ALL:"all",INNER_ONLY:"innerOnly",OUTER_ONLY:"outerOnly",HORIZONTAL_INNER_ONLY:"horizontalInnerOnly",VERTICAL_INNER_ONLY:"verticalInnerOnly",isSupported:function(q){for(var l in t)if(t[l]===q)return!0;return!1},toSupportedValue:function(q){return t.isSupported(q)?q:t.ALL}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartLineStyles":function(){define([],
function(){var t={SOLID:"Solid",DASHED:"Dashed",DOTTED:"Dotted",isSupported:function(q){for(var l in t)if(t[l]===q)return!0;return!1},toGFXValue:function(q,l){switch(q){case "Dashed":return 1>l?"LongDash":"Dash";case "Dotted":return 1>l?"Dash":"Dot";default:return"Solid"}}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ReportThemes":function(){define([],function(){return{GRAPHIC:"graphic",CLASSIC:"classic",COMPARISON:"comparison"}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeUtil":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/ColorUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],function(t,q,l){function k(b){var d=q.isLightColor(b);return q.transform(b,{dv:d?-7:7}).toHex()}var f={getPanelTitleColor:function(b){var d=q.isLightColor(b);return q.transform(b,{dv:d?-50:50}).toHex()},getChartElementBackgroundColor:function(b){var d=q.isLightColor(b);return q.transform(b,{dv:d?-13:13}).toHex()}},e={getThemeColors:function(b){return[b.document.backgroundColor,b.icon.backgroundColor,b.highlightedIcon.backgroundColor]},
generateChartColors:function(b,d,c){c=c||{};var g=c.gradientFactor||1,h=[d,q.transform(d,{dv:-20*g}).toHex(),q.transform(d,{dv:-40*g}).toHex(),q.transform(d,{dv:-50*g}).toHex(),q.transform(d,{dv:-55*g}).toHex(),q.transform(d,{dv:-60*g}).toHex(),q.transform(d,{dv:-65*g}).toHex(),q.transform(d,{dv:-70*g}).toHex()];if(c.numLighterColors)for(var m=0;m<c.numLighterColors;m++)h.unshift(q.transform(d,{dv:20*g*(m+1),ds:-20*(m+1)}).toHex());b&&b!==d&&h.unshift(b);var p={};return h.filter(function(n){return p[n]?
!1:p[n]=!0})},applyThemeColorsToTheme:function(b){var d=b.theme,c=b.colors,g=b.preserveForegroundColor,h=b.chartColors,m=b.colors3series;b=b.preprocessGeneratedThemeFunc;var p=c[0],n=c[1];c=c[2];var r=g&&d.chart&&d.chart.dataLabelsStyle&&d.chart.dataLabelsStyle.color||q.getContrastColor(p).toHex();g=g&&d.document.color||("#FFFFFF"===p.toUpperCase()?"#4C4C4C":r);var u=q.isLightColor(p),v=f.getChartElementBackgroundColor(p),y=f.getPanelTitleColor(p),A=q.transform(p,{dv:u?-33:33}).toHex(),C={overrideStyles:{Default:{color:g,
backgroundColor:"transparent"},TableHeader:{color:q.getContrastColor(n,void 0,void 0,200).toHex(),backgroundColor:n},AlternatingRow:{color:g,backgroundColor:q.transform(p,{dv:u?-7:7}).toHex()},ReportTitle:{color:c,backgroundColor:"transparent"},GreyText:{color:A,backgroundColor:"transparent"},BlueText:{color:"#56A5D8",backgroundColor:"transparent"}}},E={lineColor:r,gridLinesColor:r,gridStripesColor:k(p),gridStripesColorAlt:"transparent",axisStyle:{color:r},titleStyle:{color:r}},F={lineColor:r,gridLinesColor:r,
gridStripesColor:k(p),gridStripesColorAlt:"transparent",baseLineColor:r,axisStyle:{color:r},titleStyle:{color:r}};var B=q.isLightColor(p)?"#666666":"#BBBBBB";p={document:{color:g,backgroundColor:p,border:{color:A}},icon:{backgroundColor:n},highlightedIcon:{backgroundColor:c},table:C,chart:{backgroundColor:"transparent",outlineColor:void 0,titleStyle:{color:y},dataLabelsAltColor:r,dataLabelsStyle:{color:r},xAxis:E,yAxis:F,legendStyle:{color:r,backgroundColor:"transparent"},minMaxLegend:{titleStyle:{color:r}},
comparisonInfo:{lineColor:B},icon:{backgroundColor:n},ring:{ringBackground:{backgroundColor:v}},gauge:{dataLabelStyle:{color:n},othersColor:v,arrowIndicator:{lineColor:y,backgroundColor:y}},waffle:{dataValueStyle:{color:n},dataLabelStyle:{color:n},othersColor:v},columnBarBackground:{backgroundColor:v}},infographic:{backgroundColor:"transparent",agePyramid:{theme:u?"light":"common",male:{backgroundColor:n},female:{backgroundColor:c}},staticInfographic:{backgroundColor:"transparent",icon:{backgroundColor:n},
highlightedIcon:{backgroundColor:c},iconBarBackground:{},titleLine:{color:q.transform(p,{dv:u?-40:40}).toHex()},titleStyle:{color:y},variableLabelStyle:{color:n},variableLabelStyleHighlighted:{color:c},variableLabelStyleContrast:{color:p},variableDescriptionStyle:{color:q.transform(p,{dv:u?-50:50}).toHex()}}}};b&&b(p);l.populateObject(d,p,!0);d.chart.colors=h&&h.length?h:e.generateChartColors(n,c);d.chart.colors3series=m},applyTextStyleToTheme:function(b,d){function c(h,m){var p=t.mixin({},d);h&&
delete p.color;m||delete p.fontSize;return p}d=e.filterTextStyles(d);var g={document:c(!1,!0),table:{overrideStyles:{Default:c(!1,!0),TableHeader:c(!1,!0),AlternatingRow:c(!1,!0),ReportTitle:c(!1,!0),GreyText:c(!1,!0),BlueText:c(!1,!0)}},chart:{titleStyle:c(),dataLabelsStyle:c(),xAxis:{axisStyle:c(),titleStyle:c()},yAxis:{axisStyle:c(),titleStyle:c()},legendStyle:c(),minMaxLegend:{titleStyle:c(),minVariableLabelStyle:c(!0),maxVariableLabelStyle:c(!0)},gauge:{dataLabelStyle:c()},waffle:{dataValueStyle:c(),
dataLabelStyle:c()}},infographic:{staticInfographic:{titleStyle:c(),variableLabelStyle:c(),variableLabelStyleHighlighted:c(),variableLabelStyleContrast:c(),variableDescriptionStyle:c()}}};l.populateObject(b,g,!0)}},a={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,textDecoration:1,color:1};e.filterTextStyles=function(b){var d={},c;for(c in a){var g=b[c];void 0!==g&&(d[c]=g)}return d};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/locator/LocatorPointsController":function(){define("dojo/_base/declare dojo/on dijit/Destroyable ../../../../../dataProvider/supportClasses/data/AreaDataUtil ../../MapEventUtil esri/dijit/geoenrichment/utils/DeviceUtil".split(" "),
function(t,q,l,k,f,e){return t(l,{_info:null,_fieldData:null,_isMultiFeature:null,_calcDataArray:null,_currentFeatureIndex:null,_layerNames:null,constructor:function(a,b,d,c){this._info=a;this._fieldData=b;this._isMultiFeature=d;this._currentFeatureIndex=c;this._layerIndexes={};this._layerNames={};this._rendererJsons={};this._mapInfos={};this._graphicLayerInfos={}},_getCalculatorName:function(){return this._info.calculatorName},getVariableObjects:function(){return this._info.variableObjects},getLayerID:function(){return this._info.layerID},
getLayerUrl:function(){return this._info.layerUrl},getLayerName:function(a){return this._layerNames[a]||this._info.layerName},setLayerName:function(a,b){this._layerNames[a]=b},getCalculatorDataArray:function(){if(!this._calcDataArray)if(this._isMultiFeature){var a=k.combineAreaDataObjectCalculators(this._fieldData.areaData,this._getCalculatorName());this._calcDataArray=k.removeDuplicacatedCalcData(a.thisAreas.concat(a.comparisonLevels))}else this._calcDataArray=(a=k.getAreaDataObjectCalculator(this._fieldData.areaData[this._currentFeatureIndex],
this._getCalculatorName()))&&[a.data].concat(a.comparisonLevels);return this._calcDataArray},_rendererJsons:null,getRendererJson:function(a){return this._rendererJsons[a]},setRendererJson:function(a,b){this._rendererJsons[a]=b},_layerIndexes:null,getLayerIndex:function(a){return this._layerIndexes[a]},setLayerIndex:function(a,b){this._layerIndexes[a]=b},_mapInfos:null,getMapInfo:function(a){return this._mapInfos[a]},getMapInfos:function(){var a=[],b;for(b in this._mapInfos)a.push(this._mapInfos[b]);
return a},setMapInfo:function(a,b){this._mapInfos[a]=b},_getPointIndexForCellFunc:null,_getCellForPointAtFunc:null,_highlightedCell:null,setLocatorTableCallbacks:function(a){this._getPointIndexForCellFunc=a.getPointIndexForCellFunc;this._getCellForPointAtFunc=a.getCellForPointAtFunc},registerLocatorTable:function(a){var b=this,d;a.set("highlightRowsOnHover",!0);q(a.domNode,"mouseover,mousemove",function(){var c=a.getOverFieldCell();c&&c!==d&&(d=c,b._highlightGraphicForFieldCell(d))});q(a.domNode,
"mouseout",function(){b._highlightGraphicForFieldCell(null);d=null})},_highlightRowForGraphic:function(a,b){this._highlightedCell&&(this._highlightedCell.parentGrid&&this._highlightedCell.parentGrid.setCellRowHighlighted(this._highlightedCell,!1),this._highlightedCell=null);b&&this._getCellForPointAtFunc&&(a=a.getPointIndexForGraphicFunc(b),(a=this._getCellForPointAtFunc(a))&&a.parentGrid&&(a.parentGrid.setCellRowHighlighted(a,!0),this._highlightedCell=a))},_graphicLayerInfos:null,setLocatorPointsLayer:function(a,
b,d,c){this._unSetInfo(a);b={map:d,graphicsLayer:b,getPointIndexForGraphicFunc:c.getPointIndexForGraphicFunc,getGraphicForPointAtFunc:c.getGraphicForPointAtFunc,setGraphicHighlightedFunc:c.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null,overGraphic:null};this._graphicLayerInfos[a]=b;this._addLayerListeners(b)},_addLayerListeners:function(a){var b=this,d=a.map,c=a.graphicsLayer;a.layerMouseOverHandle=f.onLayerMouseOver(c,d,function(g){g.graphic&&
g.graphic._graphicsLayer===c&&a.overGraphic!==g.graphic&&((a.layerMouseOutHandle&&a.layerMouseOutHandle.remove(),a.layerMouseOutHandle=null,b._removeHighlight(a),a.overGraphic=g.graphic,b._highlightRowForGraphic(a,a.overGraphic),a.setGraphicHighlightedFunc(a.overGraphic,!0),e.isMobileDevice())?d.infoWindow&&(d.infoWindow.setFeatures([a.overGraphic]),d.infoWindow.show(g.mapPoint,{closestFirst:!0})):a.layerMouseOutHandle=q.once(c,"mouse-out",function(h){b._removeHighlight(a,!0)}))})},_highlightGraphicForFieldCell:function(a){for(var b in this._graphicLayerInfos){var d=
this._graphicLayerInfos[b];this._removeHighlight(d);if(a){var c=this._getPointIndexForCellFunc(a);if(c=d.getGraphicForPointAtFunc(c))d.setGraphicHighlightedFunc(c,!0),d.highlightedGraphic=c}}},_removeHighlight:function(a,b){this._highlightRowForGraphic(a,null);a.highlightedGraphic&&(a.setGraphicHighlightedFunc(a.highlightedGraphic,!1),a.highlightedGraphic=null);a.overGraphic&&a.setGraphicHighlightedFunc(a.overGraphic,!1);a.overGraphic=null;!b&&a.map.infoWindow&&a.map.infoWindow.hide()},setPointVisibleAt:function(a,
b){for(var d in this._graphicLayerInfos){var c=this._graphicLayerInfos[d].getGraphicForPointAtFunc(a);if(c)c[b?"show":"hide"]()}},_unSetInfo:function(a){var b=this._graphicLayerInfos[a];delete this._graphicLayerInfos[a];b&&(b.layerMouseOverHandle&&b.layerMouseOverHandle.remove(),b.layerMouseOutHandle&&b.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},
"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/AreaDataUtil":function(){define(["dojo/_base/lang","../../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil","../../../_devConfig"],function(t,q,l){var k={getAreaDataValue:function(f){function e(A){!1!==u&&(v=A[u]);void 0===v&&(v=A[b])}function a(){if(m)e(m);else{var A=c[g];A&&e(A.data)}}var b=f.fieldName,d=f.fieldData,c=f.areaDataObject,g=f.calculatorName,h=f.featureIndex,m=f.featureAttributes,p=f.ignoreMetadata,
n=f.isMultiFeature;if(!l.showAreaDataUtilUndefinedData&&b){var r=b.indexOf("."),u=!1;-1!==r&&(u=b.substr(r+1));g||-1===r||(g=b.substr(0,r));h=void 0===h?0:Number(h)||0;if((c=f.areaDataObject||d.areaData[h])||m){var v;n&&g===q.AREA_ATTRIBUTES_CALCULATOR_NAME&&!p&&d&&e(d.metadata);void 0===v&&a();if(g)return v;void 0===v&&!p&&d&&e(d.metadata);if(void 0===v&&!m)for(var y in c)if(e(c[y].data),void 0!==v)break;return v}}},getAreaDataObjectCalculator:function(f,e,a){if(!f)return null;var b=f[e];!b&&a&&
(b=f[e]=k.createCalculator());return b},createCalculator:function(f,e){return{data:f||{},comparisonLevels:e||[]}},combineAreaDataObjectCalculators:function(f,e,a){var b=[],d=[];f.forEach(function(c){if(c=k.getAreaDataObjectCalculator(c,e))b.push(c.data),d=d.concat(c.comparisonLevels)});a&&a.removeDuplicates&&(d=k.removeDuplicacatedCalcData(d));return{thisAreas:b,comparisonLevels:d}},removeDuplicacatedCalcData:function(f){if(!f.length)return f;var e=[],a={},b=Object.keys(f[0]);f.forEach(function(d){var c=
function(g){var h="";b.forEach(function(m){h+=g[m]+";"});return h}(d);a[c]||(a[c]=!0,e.push(d))});return e},setAreaDataValue:function(f,e,a,b,d){d=void 0===d?0:Number(d)||0;k.setAreaDataObjectValue(f,e,a[d],b)},setAreaDataObjectValue:function(f,e,a,b){a&&b&&null!==e&&void 0!==e&&(k.getAreaDataObjectCalculator(a,b,!0).data[f]=e)},mergeAreaData:function(f,e){e.forEach(function(a,b){(b=f[b])&&k.mergeAreaDataObjects(b,a)})},mergeAreaDataObjects:function(f,e){for(var a in f){var b=f[a],d=e[a];d?b.comparisonLevels.length!==
d.comparisonLevels.length?console.log("Error: can't merge calculators with different comparison levels!"):(t.mixin(d.data,b.data),b.comparisonLevels.forEach(function(c,g){t.mixin(d.comparisonLevels[g],c)})):e[a]=b}console.log("AreaDataUtil.js merging area data \x3d\x3e areaData");console.log(e)}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil":function(){define(["esri/dijit/geoenrichment/utils/MaskUtil","./FieldLibrary"],function(t,
q){var l={SCRIPT_PREFIX:"",DEFAULT_SCRIPT_NAME:"Custom",TOTAL_SCRIPT_NAME:"Total",AVG_SCRIPT_NAME:"Average",SCRIPT_PREFIX_RE:/^SCRIPT_/i,FIRST_SYMBOL_IS_NUMBER_RE:/^[0-9]/,DATA_COLLECTIONS_CALCULATOR_NAME:"dataCollectionsCalculator",MAPS_CALCULATOR_NAME:"mapsCalculator",UNITED_MAPS_CALCULATOR_NAME:"unitedMapsCalculator",AREA_ATTRIBUTES_CALCULATOR_NAME:"headers",ENRICHED_DATA_NO_LEVELS:"enrichFieldData_noLevels",SCRIPTS_CALCULATOR_NAME:"scripts",createFieldNameFromSource:function(k,f){if(!k)return"";
var e="";k.isSiteAttribute?e=k.attribute.name:k.isChartAttribute?e=k.id:k.isWebMap?e=k.webMapFieldName||k.fieldName:(k=(k.fullName||k).replace(/_|\.|\s/g,""),f=f||"n",k+="n"===f?"":"_"+f,l.FIRST_SYMBOL_IS_NUMBER_RE.test(k)&&(k="_"+k),e=k.toUpperCase());return l._validateName(e)},createFieldNameFromScript:function(k){k=k.name;l.SCRIPT_PREFIX_RE.test(k)&&(k=k.replace(l.SCRIPT_PREFIX_RE,""));return l._validateName(l.SCRIPT_PREFIX+k.replace(/\.|-/g,""))},_validateName:function(k){return l._checkXMLValidName(l._maskUnicodeInName(k))},
_XML_MASK_NAME_RE:/(_X)(\d\d\d\d)/i,_checkXMLValidName:function(k){return l._XML_MASK_NAME_RE.test(k)?k.replace(l._XML_MASK_NAME_RE,"$1_$2"):k},_XML_UNICODE_RE:/&#x|;/ig,_maskUnicodeInName:function(k){return t.maskWithUnicodeXML(k).replace(l._XML_UNICODE_RE,"")},renderScriptName:function(k){return k.replace(l.SCRIPT_PREFIX_RE,"")},provideQualifiedFieldInfoTemplateName:function(k,f){k&&(k.templateName=f?f+"."+k.name:k.isWebMap?l.AREA_ATTRIBUTES_CALCULATOR_NAME+"."+k.name:k.isSiteAttribute?l.AREA_ATTRIBUTES_CALCULATOR_NAME+
"."+k.name:l.DATA_COLLECTIONS_CALCULATOR_NAME+"."+k.name)},getCalculatorName:function(k){return k&&k.templateName&&k.templateName.substr(0,k.templateName.indexOf("."))},isAreaAttributesFieldInfo:function(k){return l.getCalculatorName(k)===l.AREA_ATTRIBUTES_CALCULATOR_NAME},updateCalculatorName:function(k,f){k&&(k.hasVariable||k.script)&&(k.templateName=f+k.templateName.substr(k.templateName.indexOf(".")))},refreshNameAndTemplateName:function(k){k.statefulName&&k.fullName&&(k.name=l.createFieldNameFromSource(k,
k.statefulName.charAt(0)),k.templateName=k.templateName.substr(0,k.templateName.lastIndexOf(".")+1)+k.name)},getFieldInfoAlias:function(k){return k?k.script?k.script.alias:k.hasVariable||k.isMissing?k.alias:q.getFieldLabel(k.name):null},getTemplateNameParts:function(k){if(!k)return null;var f=k.indexOf(".");return-1===f?{calcName:null,fieldName:k}:{calcName:k.substr(0,f),fieldName:k.substr(f+1)}}};return l})},"esri/dijit/geoenrichment/utils/MaskUtil":function(){define([],function(){function t(q,l){return"string"!==
typeof q?q:String(q).replace(/[^\x20-\x7f]/g,function(k){k=k.charCodeAt(0).toString(16).toUpperCase();return l(k)})}return{maskWithUnicode:function(q){return t(q,function(l){return"\\u000".substr(0,6-l.length)+l})},maskWithUnicodeXML:function(q){return t(q,function(l){return"\x26#x000".substr(0,7-l.length)+l+";"})},removeUnicode:function(q,l){return t(q,function(k){return l||""})},removeXMLMasks:function(q,l){return q.replace(/&#x.*?;/g,l||"")}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldLibrary":function(){define(["dojo/string",
"dojo/i18n!esri/nls/jsapi"],function(t,q){var l=q.geoenrichment.dijit.ReportPlayer.FieldInfoLabels;q=q.geoenrichment.dijit.ReportPlayer.FieldInfoPreview;l={_SPECIAL_HEADER_FIELDS_NAME_MAP:{SITE_NAME:"SiteName",STORE_ADDR:"SiteAddr",AREA_DESC2:"SiteDesc",STORE_LAT:"Latitude",STORE_LONG:"Longitude",AREA_ID:"AreaID",AREA_DESC:"AreaDesc",STORE_ID:"StoreID",RING:"Ring",STORE_NAME:"StoreName",GROUPCOUNT:"SummaryCount"},_ADDITIONAL_HEADER_FIELDS_MAP:{SITENOTE:"SiteNote",SITENOTE2:"SiteNote2",SITENOTE3:"SiteNote3",
SITENOTE4:"SiteNote4",SITENOTE5:"SiteNote5",SITENOTE6:"SiteNote6",SITENOTE7:"SiteNote7",SITENOTE8:"SiteNote8",SITENOTE9:"SiteNote9",SITENOTE10:"SiteNote10",SITENOTES:"SiteNotes",CHART_AREA_NAME:"ChartAreaName",CHART_SERIES_NAME:"ChartSeriesName",CHART_POINT_NAME:"ChartVariableName",CHART_POINT_VALUE:"ChartVariableValue"},_REPORT_VAR_FIELDS_MAP:{REPORTNAME:"Title",REPORTTITLE2:"Subtitle",CURRPAGE:"Page",COPYRIGHT:"Copyright",TRIALURLTEXT:"TrialUrlText",PHONENUMBER:"PhoneNumber",PRODUCTURL:"ProductUrl",
PRODUCTLABEL:"ProductLabel",SOURCE:"Source",CURRDATE:"Date",LOCATORSUMMARY:"LocatorSummary",CENSUSYEAR:"CensusYear",CURRENTYEAR:"CurrentYear",FUTUREYEAR:"FutureYear",LATITUDELABEL:"LatitudeLabel",LONGITUDELABEL:"LongitudeLabel",PAGEFORMAT:"PageFormat",BANDFROM0TO1UNIT2:"BandFrom0To1Unit2",RADIUS0UNIT1:"Radius0Unit1",AREADELIMITER:"AreaDelimiter",BANDREGIONFROM0TO1:"BandRegionFrom0To1",ET_AL:"ET_AL",LINEBUFFERSEGMENTFROM0TO1UNIT2RADIUS:"LineBufferSegmentFrom0To1Unit2Radius",LINEBUFFERRADIUS0UNIT1RADIUS:"LineBufferRadius0Unit1Radius",
RINGVALUE0UNIT1RADIUS:"RingValue0Unit1Radius",RINGSVALUES0UNIT1RADII:"RingsValues0Unit1Radii",RINGBUFFERBANDFROM0TO1UNIT2RADIUS:"RingBufferBandFrom0To1Unit2Radius",DRIVETIMEBANDFROM0TO1UNIT2RADIUS:"DriveTimeBandFrom0To1Unit2Radius",RINGBUFFERBANDSBANDS0UNIT1RADII:"RingBufferBandsBands0Unit1Radii",RINGBUFFERBANDRING0UNIT1RADIUS:"RingBufferBandRing0Unit1Radius",DRIVETIMEBANDBAND0UNIT1RADIUS:"DriveTimeBandBand0Unit1Radius",DRIVETIMESRINGS0UNIT1RADII:"DriveTimesRings0Unit1Radii",DRIVETIMERING0UNIT1RADIUS:"DriveTimeRing0Unit1Radius",
DRIVEDISTANCEVALUE0UNIT1RADIUS:"DriveDistanceValue0Unit1Radius",DRIVEDISTANCESRINGS0UNIT1RADII:"DriveDistancesRings0Unit1Radii",DRIVEDISTANCERING0UNIT1RADIUS:"DriveDistanceRing0Unit1Radius"},_SPECIAL_HEADER_FIELDS_NAME_MAP_BACK:{},_ADDITIONAL_HEADER_FIELDS_MAP_BACK:{},_REPORT_VAR_FIELDS_MAP_BACK:{},_PREVIEW:{Title:q.fieldPreviewTitle,Title_graphic:q.fieldPreviewTitleGraphic,Subtitle:q.fieldPreviewSubtitle,Date:q.fieldPreviewDate,Page:q.fieldPreviewPage,Count:q.fieldPreviewLocationsCount,Copyright:q.fieldPreviewCopyright,
TrialUrlText:q.fieldPreviewTrialUrlText,PhoneNumber:q.fieldPreviewPhoneNumber,ProductUrl:q.fieldPreviewProductUrl,ProductLabel:q.fieldPreviewProductLabel,Source:q.fieldPreviewSource,SITE_NAME:q.fieldPreviewSiteName,SITE_NAME_multi:q.fieldPreviewSiteNameMulti,STORE_LAT:q.fieldPreviewLat,STORE_LONG:q.fieldPreviewLong,AREA_DESC2:q.fieldPreviewAreaDesc2,STORE_ADDR:q.fieldPreviewStoreAddr,AREA_DESC:q.fieldPreviewAreaDesc,CHART_AREA_NAME:q.fieldPreview_chartArea,CHART_SERIES_NAME:q.fieldPreview_seriesName,
CHART_POINT_NAME:q.fieldPreview_pointName},_LABELS:{CHART_AREA_NAME:l.chartAreaName,CHART_SERIES_NAME:l.chartSeriesName,CHART_POINT_NAME:l.chartPointName,CHART_POINT_VALUE:l.chartPointValue},DATE_FIELD_NAME:"Date",DATE_FIELD_ALIAS:"Date",DATE_FIELD_DEFAULT_FORMAT:"d-MMMM dd, yyyy",GROUPCOUNT_FIELD_NAME:"SummaryCount",GROUPCOUNT_FIELD_ALIAS:"SummaryCount",LOCATORSUMMARY_FIELD_NAME:"LocatorSummary",LOCATORSUMMARY_FIELD_ALIAS:"LocatorSummary",SITENOTES_FIELD_NAME:"SiteNotes",SITENOTES_FIELD_ALIAS:"SiteNotes",
init:function(){for(var k in this._SPECIAL_HEADER_FIELDS_NAME_MAP)this._SPECIAL_HEADER_FIELDS_NAME_MAP_BACK[this._SPECIAL_HEADER_FIELDS_NAME_MAP[k].toUpperCase()]=k;for(k in this._ADDITIONAL_HEADER_FIELDS_MAP)this._ADDITIONAL_HEADER_FIELDS_MAP_BACK[this._ADDITIONAL_HEADER_FIELDS_MAP[k].toUpperCase()]=k;for(k in this._REPORT_VAR_FIELDS_MAP)this._REPORT_VAR_FIELDS_MAP_BACK[this._REPORT_VAR_FIELDS_MAP[k].toUpperCase()]=k},templateToUIHeader:function(k){k=k&&this.trimTemplateHeaderName(k).toUpperCase();
return this._SPECIAL_HEADER_FIELDS_NAME_MAP[k]||this._ADDITIONAL_HEADER_FIELDS_MAP[k]},qualifyTemplateHeaderName:function(k){return k&&0!==k.indexOf("headers.")?"headers."+k:k},trimTemplateHeaderName:function(k){if(!k)return k;0===k.indexOf("headers.")&&(k=k.substr(k.indexOf(".")+1));return k},templateToUIReportVar:function(k){k=k&&k.toUpperCase();return this._REPORT_VAR_FIELDS_MAP[k]},uiToTemplate:function(k){k=k&&k.toUpperCase();return this._SPECIAL_HEADER_FIELDS_NAME_MAP_BACK[k]||this._ADDITIONAL_HEADER_FIELDS_MAP_BACK[k]||
this._REPORT_VAR_FIELDS_MAP_BACK[k]},getPreview:function(k,f,e){k=this.trimTemplateHeaderName(k);if(!k)return null;f&&"Title"===k&&(k+="_graphic");e&&"SITE_NAME"===k&&(k+="_multi");return"SiteNotes"===k?q.fieldPreviewSiteNotes:0===k.indexOf("SiteNote")?t.substitute(q.fieldPreviewSiteNote,{index:k.replace("SiteNote","")||1}):this._PREVIEW[k]},hasField:function(k){return!!(this.uiToTemplate(k)||this.templateToUIHeader(k)||this.templateToUIReportVar(k))},isAdditionalHeadersField:function(k){k=k&&this.trimTemplateHeaderName(k).toUpperCase();
return this._ADDITIONAL_HEADER_FIELDS_MAP[k]},isChartAttribute:function(k){return this.isAdditionalHeadersField(k)&&-1!==k.toUpperCase().indexOf("CHART_")},getSiteNoteFieldNameAt:function(k){return"SiteNote"+(!k||1>=Number(k)?"":k)},getFieldLabel:function(k){k=k&&this.trimTemplateHeaderName(k).toUpperCase();return this._LABELS[k]},getReportVarSelfTagsMap:function(){return{Page:"currPage",Title:"reportName",Subtitle:"reportTitle2"}},getReportVarTextTagsMap:function(){var k=this.getReportVarSelfTagsMap(),
f={},e;for(e in this._REPORT_VAR_FIELDS_MAP){var a=this._REPORT_VAR_FIELDS_MAP[e];k[a]||(f[a]=a)}return f}};l.init();return l})},"esri/dijit/geoenrichment/ReportPlayer/_devConfig":function(){define([],function(){return{logData:!0,showAreaDataUtilUndefinedData:!1,createPlayerCommand:{saveDataJsonAsTextFile:!1,useTestBuild:!1,configUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/reportPlayer/config.js",baseUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release",
mainUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/dojo/dojo.js",esriDijitCssUrl:"https://js.arcgis.com/3.31/dijit/themes/claro/claro.css",esriCssUrl:"https://laci2.esri.com/jenkins/job/report-player-jsapi-pr/lastSuccessfulBuild/artifact/release/reportPlayer/reportPlayer.css"},createPDFCommand:{removeUnicodeChars:!1},preview:{bigValues:!1},charts:{enableEffects:!1},table:{printGridRefresh:!1},emulateErrors:{playerError:!1,contentErrors:!1,themeParseError:!1,
metadataParseError:!1,layoutParseError:0,reportContainerRenderError:!1,createReportError:!1,createReportNaN:!1,createReportNull:!1,getMapItemError:!1,emptyDataProviderResponse:!1,emptyTemplateJson:!1}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/MapEventUtil":function(){define(["dojo/on","dojo/sniff","esri/dijit/geoenrichment/utils/DeviceUtil"],function(t,q,l){return{onLayerMouseOver:function(k,f,e){var a=l.isMobileDevice();k=a?k:q("touch")?f:k;a=a?"mouse-over":q("touch")?"mouse-down, mouse-move":
"mouse-move";return t(k,a,e)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/std/StdPolygonsController":function(){define("dojo/_base/declare esri/dijit/geoenrichment/Deferred dojo/on esri/dijit/geoenrichment/promise/all dijit/Destroyable ../../MapEventUtil ../../../../comparison/ComparisonUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig".split(" "),function(t,q,l,k,f,e,a,b){return t(f,{currentFeatureIndex:null,_calculatorName:null,_fieldData:null,_isMultiFeature:null,
_hasRegisteredLayers:!1,_hasRegisteredInfographics:!1,constructor:function(d,c,g,h){this._calculatorName=d;this._fieldData=c;this._isMultiFeature=g;this.currentFeatureIndex=h;this._layerIndexes={};this._rendererJsons={};this._labelRendererJsons={};this._mapInfos={};this._graphicLayerInfos={};this._pendingLayerInfos={}},getCalculatorName:function(){return this._calculatorName},_rendererJsons:null,_labelRendererJsons:null,getRendererJson:function(d){return this._rendererJsons[d]},getLabelRendererJson:function(d){return this._labelRendererJsons[d]},
setRendererJson:function(d,c){this._rendererJsons[d]=c},setLabelRendererJson:function(d,c){this._labelRendererJsons[d]=c},_layerIndexes:null,getLayerIndex:function(d,c){var g=b.getGeographiesModel().getLevels(),h=-1;g.some(function(m,p){if(m.id===c)return h=p,!0});return this._layerIndexes[d]+h/g.length},setLayerIndex:function(d,c){this._layerIndexes[d]=c},_mapInfos:null,getMapInfo:function(d){return this._mapInfos[d]},getMapInfos:function(){var d=[],c;for(c in this._mapInfos)d.push(this._mapInfos[c]);
return d},setMapInfo:function(d,c){this._mapInfos[d]=c},_attributeFields:null,getAttributeFields:function(){return this._attributeFields},setAttributeFields:function(d){this._attributeFields=d},_shownFeatureAttributes:null,_featuresChangedHandlers:null,getShownFeatureAttributes:function(){return this._shownFeatureAttributes},setShownFeaturesChangedListener:function(d){var c=this;this._featuresChangedHandlers=this._featuresChangedHandlers||[];this._featuresChangedHandlers.push(d);return{remove:function(){var g=
c._featuresChangedHandlers;if(g){var h=g.indexOf(d);-1!==h&&g.splice(h,1)}}}},setShownFeatureAttributes:function(d){this._shownFeatureAttributes=d||[];this._featuresChangedHandlers&&this._featuresChangedHandlers.forEach(function(c){c()})},_allFeatureAttributes:null,_loadAllFeaturesHandlers:null,getAllFeatureAttributes:function(){return this._allFeatureAttributes||[]},setAllFeatureAttributes:function(d){this._allFeatureAttributes=d},setLoadAllFeaturesListener:function(d){var c=this;this._loadAllFeaturesHandlers=
this._loadAllFeaturesHandlers||[];this._loadAllFeaturesHandlers.push(d);return{remove:function(){var g=c._loadAllFeaturesHandlers;if(g){var h=g.indexOf(d);-1!==h&&g.splice(h,1)}}}},loadAllFeatures:function(){return this._loadAllFeaturesHandlers&&k(this._loadAllFeaturesHandlers.map(function(d){return d()}))},buildGeometryFieldName:function(d){return"__stdGeometry_"+d},saveGeometryInCalculatorData:function(d,c){a.copyValueToCalculatorData(d,{fieldName:c,fieldData:this._fieldData,isMultiFeature:this._isMultiFeature,
currentFeatureIndex:this.currentFeatureIndex,calculatorName:this._calculatorName})},provideGeometryFromCalculatorData:function(d,c){a.copyValueFromCalculatorData(d,{fieldName:c,fieldData:this._fieldData,isMultiFeature:this._isMultiFeature,currentFeatureIndex:this.currentFeatureIndex,calculatorName:this._calculatorName})},_highlightInfographicForAttributesFunc:null,_registerInfographicDfd:null,registerInfographic:function(d){this._highlightInfographicForAttributesFunc=d.highlightInfographicForAttributes;
this._registerInfographicDfd=new q;this._hasRegisteredLayers&&this._registerInfographicDfd.resolve();this._hasRegisteredInfographics||(this._hasRegisteredInfographics=!0,this._doRegisterLayers());return this._registerInfographicDfd.promise},_graphicLayerInfos:null,_pendingLayerInfos:null,setStdPolygonsLayer:function(d,c,g,h){this._unSetInfo(d);this._pendingLayerInfos[d]={map:g,graphicsLayer:c,getGraphicForAttributesFunc:h.getGraphicForAttributesFunc,setGraphicHighlightedFunc:h.setGraphicHighlightedFunc,
layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null};this._hasRegisteredInfographics&&this._doRegisterLayers();this._hasRegisteredLayers||(this._hasRegisteredLayers=!0,this._registerInfographicDfd&&this._registerInfographicDfd.resolve())},_doRegisterLayers:function(){for(var d in this._pendingLayerInfos){var c=this._pendingLayerInfos[d];this._graphicLayerInfos[d]=c;this._addLayerListeners(c)}this._pendingLayerInfos={}},_addLayerListeners:function(d){var c=this,g=d.graphicsLayer,
h;d.layerMouseOverHandle=e.onLayerMouseOver(g,d.map,function(m){m.graphic&&m.graphic._graphicsLayer===g&&h!==m.graphic&&(d.layerMouseOutHandle&&d.layerMouseOutHandle.remove(),d.layerMouseOutHandle=null,h&&d.setGraphicHighlightedFunc(h,!1),h=m.graphic,c._highlightInfographicForAttributesFunc(h.attributes),d.setGraphicHighlightedFunc(h,!0),d.layerMouseOutHandle=l.once(g,"mouse-out",function(p){c._highlightInfographicForAttributesFunc(null);h&&d.setGraphicHighlightedFunc(h,!1);h=null}))})},highlightGraphicForAttributes:function(d){for(var c in this._graphicLayerInfos){var g=
this._graphicLayerInfos[c];g.highlightedGraphic&&(g.setGraphicHighlightedFunc(g.highlightedGraphic,!1),g.highlightedGraphic=null);if(d){var h=g.getGraphicForAttributesFunc(d);h&&(g.setGraphicHighlightedFunc(h,!0),g.highlightedGraphic=h)}}},_unSetInfo:function(d){var c=this._graphicLayerInfos[d];delete this._graphicLayerInfos[d];c&&(c.layerMouseOverHandle&&c.layerMouseOverHandle.remove(),c.layerMouseOutHandle&&c.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));
this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},"esri/dijit/geoenrichment/ReportPlayer/core/comparison/ComparisonUtil":function(){define(["esri/dijit/geoenrichment/utils/ObjectUtil","../../dataProvider/supportClasses/data/AreaDataUtil","dojo/i18n!esri/nls/jsapi"],function(t,q,l){l=l.geoenrichment.dijit.ReportPlayer.ReportPlayer;var k={valueFormatFunction:function(f,e){return e&&e.isMissing?l.missingVariable:void 0===f||"string"===typeof f?f:t.formatNumber(f,{places:e.decimals,
preserveTrailingZeroes:!0})},copyValueToCalculatorData:function(f,e){var a=k._findAttrsInCalcData(e,f);a&&(a[e.fieldName]=f[e.fieldName])},copyValueFromCalculatorData:function(f,e){var a=k._findAttrsInCalcData(e,f);a&&(f[e.fieldName]=a[e.fieldName])},_findAttrsInCalcData:function(f,e){f=f.isMultiFeature?(f=q.combineAreaDataObjectCalculators(f.fieldData.areaData,f.calculatorName))&&f.comparisonLevels||[]:(f=q.getAreaDataObjectCalculator(f.fieldData.areaData[f.currentFeatureIndex],f.calculatorName))&&
f.comparisonLevels||[];var a;f.some(function(b){if(b.StdGeographyLevel&&b.StdGeographyLevel===e.StdGeographyLevel&&b.StdGeographyID===e.StdGeographyID)return a=b,!0});return a}};return k})},"esri/dijit/geoenrichment/ReportPlayer/countryConfig":function(){define(["./dataProvider/supportClasses/stdGeographies/StdGeographiesModel"],function(t){function q(){if(!k||!k.hierarchies)return"census";var d=k.hierarchies[0].ID;if(1==k.hierarchies.length)return d;if(k.defaultDatasetID)for(var c in k.hierarchies){var g=
k.hierarchies[c];if(g.datasets&&g.datasets.some(function(h){return h==k.defaultDatasetID})){d=g.ID;break}}return d}var l={},k;l.getCurrentCountry=function(){return k};l.getCountryID=function(){return k&&k.id};l.getCurrencySymbol=function(){return k&&k.currencySymbol||"$"};l.getCurrencyFormat=function(){if(k&&k.currencyFormat)return k.currencyFormat;var d=l.getCurrencySymbol();return d+"0;-"+d+"0"};l.setCountry=function(d){k=d};var f,e;l.getSingleUnits=function(){return f};l.getPluralUnits=function(){return e};
l.setSingleAndPluralUnits=function(d,c){f=d;e=c};var a;l.getHierarchyID=function(){return a};l.setHierarchyID=function(d){a=d||q()};var b;l.getGeographiesModel=function(){return b};l.setGeographiesModel=function(d){b=d};l.reset=function(){b=e=f=a=k=null};l.toJson=function(){return{country:{id:l.getCountryID(),currencySymbol:l.getCurrencySymbol(),currencyFormat:l.getCurrencyFormat()},hierarchy:a,geographiesModel:b&&b.toJson()}};l.fromJson=function(d){d&&(k=d.country,a=d.hierarchy,b=d.geographiesModel&&
new t(d.geographiesModel))};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/thisAreas/ThisAreasHighlightController":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/Deferred","dojo/on","dijit/Destroyable","../../MapEventUtil"],function(t,q,l,k,f){return t(k,{_hasRegisteredLayers:!1,_hasRegisteredTables:!1,constructor:function(e){this._graphicLayerInfos={};this._registerTableDfds=[];this._highlightTableForAreaIndexFuncs=[];this._pendingLayerInfos=
{}},_highlightTableForAreaIndexFuncs:null,_registerTableDfds:null,registerTable:function(e){this._highlightTableForAreaIndexFuncs.push(e.highlightTableForAreaIndex);e=new q;this._registerTableDfds.push(e);this._hasRegisteredLayers&&this._doRegisterTables();this._hasRegisteredTables||(this._hasRegisteredTables=!0,this._doRegisterLayers());return e.promise},_doRegisterTables:function(){this._registerTableDfds.forEach(function(e){e.resolve()});this._registerTableDfds.length=0},_graphicLayerInfos:null,
_pendingLayerInfos:null,setThisAreaLayer:function(e,a,b,d){this._unSetInfo(e);this._pendingLayerInfos[e]={graphicsLayer:a,areaIndex:d.thisAreaIndex,getGraphicForAreaIndexFunc:d.getGraphicForAreaIndexFunc,setGraphicHighlightedFunc:d.setGraphicHighlightedFunc,layerMouseOverHandle:null,layerMouseOutHandle:null,highlightedGraphic:null,map:b};this._hasRegisteredTables&&this._doRegisterLayers();this._hasRegisteredLayers||(this._hasRegisteredLayers=!0,this._doRegisterTables())},_doRegisterLayers:function(){for(var e in this._pendingLayerInfos){var a=
this._pendingLayerInfos[e];this._graphicLayerInfos[e]=a;this._addLayerListeners(a)}this._pendingLayerInfos={}},_addLayerListeners:function(e){var a=this,b=e.graphicsLayer,d;e.layerMouseOverHandle=f.onLayerMouseOver(b,e.map,function(c){c.graphic&&c.graphic._graphicsLayer===b&&d!==c.graphic&&(e.layerMouseOutHandle&&e.layerMouseOutHandle.remove(),e.layerMouseOutHandle=null,d&&e.setGraphicHighlightedFunc(d,!1),d=c.graphic,a._highlightTableForAreaIndexFuncs.forEach(function(g){g(e.areaIndex)}),e.setGraphicHighlightedFunc(d,
!0),e.layerMouseOutHandle=l.once(b,"mouse-out",function(g){a._highlightTableForAreaIndexFuncs.forEach(function(h){h(null)});d&&e.setGraphicHighlightedFunc(d,!1);d=null}))})},highlightGraphicForAreaIndex:function(e){for(var a in this._graphicLayerInfos){var b=this._graphicLayerInfos[a];b.highlightedGraphic&&(b.setGraphicHighlightedFunc(b.highlightedGraphic,!1),b.highlightedGraphic=null);var d=b.getGraphicForAreaIndexFunc(e);d&&(b.setGraphicHighlightedFunc(d,!0),b.highlightedGraphic=d)}},_unSetInfo:function(e){var a=
this._graphicLayerInfos[e];delete this._graphicLayerInfos[e];a&&(a.layerMouseOverHandle&&a.layerMouseOverHandle.remove(),a.layerMouseOutHandle&&a.layerMouseOutHandle.remove())},_unSetLayers:function(){Object.keys(this._graphicLayerInfos).forEach(this._unSetInfo.bind(this));this._graphicLayerInfos={}},destroy:function(){this._unSetLayers()}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/EditorUnits":function(){define(["esri/dijit/geoenrichment/utils/ObjectUtil","dojo/i18n!esri/nls/jsapi"],
function(t,q){q=q.geoenrichment.dijit.ReportPlayer.units;var l={},k=["px","pt","mm","cm","in"],f={px:0,pt:1,mm:1,cm:2,"in":2};l.getSupportedUnits=function(){return k};l.getShortName=function(e){return q.shortNames[e]};l.getLongName=function(e){return q.longNames[e]};l.getLongNameWithUnits=function(e){return q.longNamesWithUnits[e]};l.getPlaces=function(e){return f[e]||0};l.round=function(e,a){return t.roundNumber(e,l.getPlaces(a))};l.provideUnits=function(e,a){return e.replace("${units}",l.getShortName(a))};
return l})},"esri/dijit/geoenrichment/ReportPlayer/DataProviderGE":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/when esri/kernel ./dataProvider/_CommandSupport ./dataProvider/_SerializationSupport ./dataProvider/_ServerSerializationSupport ./dataProvider/supportClasses/areas/AnalysisAreaUtil ./dataProvider/supportClasses/areas/AnalysisAreaJsonUtil ./dataProvider/supportClasses/areas/AreasPreprocessor ./dataProvider/supportClasses/CustomReportsManager ./dataProvider/supportClasses/TemplateJsonLoader ./dataProvider/supportClasses/ReportDataProcessor ./dataProvider/supportClasses/GEUtil ./dataProvider/supportClasses/attachments/DefaultAttachmentsStore ./dataProvider/supportClasses/attachments/CustomAttachmentsStore ./dataProvider/supportClasses/data/VariablesUtil ./dataProvider/commands/mapToImage/MapToURLUtil ./core/themes/ThemeLibrary ./core/themes/ReportThemes esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/countryConfig esri/dijit/geoenrichment/utils/ProjectionUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p,n,r,u,v,y,A,C,E,F,B,w,z){return t([e,a,b],{analysisAreasLimit:-1,cacheTemplates:!0,printMapTaskUrl:null,resetReportItemsCache:!0,constructor:function(H){q.mixin(this,H)},_getAttachmentsStore:function(H){return(new r(H)).initialize()},_currentContext:null,getReportData:function(H,G){var I=this,L=G&&G.progressCallback||function(){},N=q.mixin({},H);N.portalUrl=z.getPortalUrl(N.portalUrl);E.isPlayerOnServer||z.setArcgisUrl(N.portalUrl);d.parseSites(N);F.reset();N.hierarchy||
N.analysisAreas.some(function(O){if(O.geographies&&O.geographies[0].hierarchy)return N.hierarchy=O.geographies[0].hierarchy,!0});I.resetReportItemsCache&&h.resetCache();I._currentContext=N;N.analysisAreas=c.areasFromJson(N.analysisAreas);N.combinedAreasInfo=N.combinedAreasInfo&&c.combinedAreasInfoFromJson(N.combinedAreasInfo)||{};d.populateCombinedAreasInfo(N.combinedAreasInfo,N.analysisAreas);N.fieldData={specialTradeAreaCalculatorName:null,runReportTaskIDs:null,metadata:{},areaData:[],errors:[],
reportInfo:null};return l([k(h.tryFindReportIdByAlias(N),function(O){N.reportID=O||N.reportID}),this._discoverPortal(N),function(){return N.variables&&k(v.preprocessVariables(N.variables,N.portalUrl),function(O){N.variables=O})}()]).then(function(){return k(g.preprocessAreas(N,{analysisAreasLimit:I.analysisAreasLimit}),function(){L(.25);setTimeout(function(){I._onCreateReportStarted()});var O=N.attachmentsProvider?u(N.attachmentsProvider):I._getAttachmentsStore(N.analysisAreas),R={initGE:n.initialize(),
countryInfo:n.getCountryInfo(N.countryID),attachmentsStore:O};N.reportID?(R.reportObject=h.getCustomReportByID(N),R.templateJsonInfo=m.getTemplateJsonByID(N,I.cacheTemplates),R.runReportResult=p.runReportAndGetData(N,O)):N.variables&&(R.reportObject=h.getFakeCustomReportByContext(N),R.templateJsonInfo=m.createTemplateJsonFromVariables(N),R.runReportResult=p.runReportFromVariables(N));return l(R).then(function(S){var U=S.reportObject,Z=S.attachmentsStore,da=S.templateJsonInfo.templateJson,X=S.templateJsonInfo.templateVariableProvider,
ea=S.runReportResult;L(.75);if(!da||!U||!N.fieldData)return null;F.setCountry(S.countryInfo.country);F.setHierarchyID(N.hierarchy);F.setGeographiesModel(S.countryInfo.geographiesModels[F.getHierarchyID()]);da.theme||(da.theme=A.getReportThemeById(U.isGraphicReport?C.GRAPHIC:C.CLASSIC));var Q={isMultiFeature:U.isMultiFeature&&1<N.analysisAreas.length,reportTitle:N.reportTitle||U.title,templateJson:da,reportObject:U,fieldData:N.fieldData,analysisAreas:N.analysisAreas,combinedAreasInfo:N.combinedAreasInfo,
reverseAnalysisAreasOnMap:N.reverseAnalysisAreasOnMap,attachmentsStore:Z,geClient:n.getClient(),templateVariableProvider:X,customLogo:N.customLogo,config:{portalUrl:N.portalUrl,geoenrichmentUrl:N.geoenrichmentUrl,geometryServiceUrl:N.geometryServiceUrl,printMapTaskUrl:N.printMapTaskUrl,countryID:N.countryID,hierarchy:N.hierarchy,reportID:N.reportID,variables:N.variables}};return k(p.applyRunReportAndGetDataResults(ea,Q),function(){L(1);return Q})})})})},_discoverPortal:function(H){return w.getPortalSelf(H.portalUrl).then(function(G){H.geoenrichmentUrl=
H.geoenrichmentUrl||G.helperServices.geoenrichment.url;var I=f.id.findCredential(H.portalUrl);n.setGeoenrichmentUrl(H.geoenrichmentUrl,I&&I.token);H.geometryServiceUrl=H.geometryServiceUrl||G.helperServices.geometry.url;B.setGeometryServiceUrl(H.geometryServiceUrl);H.printMapTaskUrl=H.printMapTaskUrl||G.helperServices.printTask.url;y.setPrintMapTaskUrl(H.printMapTaskUrl)})},reportDataToSingleAreaReportData:function(H,G){var I=G.currentFeatureIndex||0,L=q.mixin({},H.fieldData);L.areaData=[L.areaData[I]];
var N=[q.mixin({},H.analysisAreas[I])];g.removeGroupInfo(N);var O=H.attachmentsStore;return{isMultiFeature:!1,reportTitle:G.reportTitle,templateJson:G.templateJson,reportObject:H.reportObject,fieldData:L,analysisAreas:N,combinedAreasInfo:null,reverseAnalysisAreasOnMap:!1,attachmentsStore:O&&{getImages:function(){O.supportsMultipleAreas&&O.setCurrentAnalysisAreaIndex(I);return O.getImages()},getAttributes:function(){O.supportsMultipleAreas&&O.setCurrentAnalysisAreaIndex(I);return O.getAttributes()},
getNotes:function(){O.supportsMultipleAreas&&O.setCurrentAnalysisAreaIndex(I);return O.getNotes()}},geClient:H.geClient,templateVariableProvider:H.templateVariableProvider,config:H.config}},_getCurrentContext:function(){return this._currentContext},_onCreateReportStarted:function(){}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_CommandSupport":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ../PlayerCommands ./supportClasses/GEUtil esri/dijit/geoenrichment/ReportPlayer/config".split(" "),
function(t,q,l,k,f,e,a,b){var d={};return q(null,{_commands:null,_commandIndex:0,_initCommandsPromise:null,constructor:function(){this._commands={}},_initCommands:function(){var c=this;if(this._initCommandsPromise)return f(this._initCommandsPromise);var g=new k;if(b.modules.exportCommands)t(["./commands/CreateHTMLCommand","./commands/CreatePDFCommand","./commands/CreateImageCommand","./commands/PrintReportCommand","./commands/CreatePlayerCommand"],function(h,m,p,n,r){d[e.HTML]=h;d[e.PDF]=m;d[e.IMAGE]=
p;d[e.PRINT]=n;d[e.DYNAMIC_HTML]=r;a.getInitPromise().then(g.resolve)});else return g.resolve();g.promise.then(function(){c._initCommandsPromise=!0});return this._initCommandsPromise=g.promise},registerCommand:function(c,g,h){function m(n){if(!n.isBrowserSupported||n.isBrowserSupported())p._commands[c]||(p._commands[c]={index:p._commandIndex++,id:c,label:g||n.label,command:n})}var p=this;if(h)m(h);else return this._initCommands().then(function(){var n=d[c];n&&m(new n)})},getCommands:function(){return this._initCommands().then(function(){var c=
[],g=this._commands[e.PDF],h;for(h in this._commands)c.push(this._commands[h]);c.sort(function(m,p){return m.index-p.index});return(h=this._getCurrentContext())&&h.geoenrichmentUrl&&g?f(a.hasCapability("FormatInfographics"),function(m){m||(c=c.filter(function(p){return p!==g}));return c}):f(c)}.bind(this))},getCommandById:function(c){return this._commands[c]&&this._commands[c].command},executeCommand:function(c,g,h,m){return this._initCommands().then(function(){h=l.mixin({printMapTaskUrl:this.printMapTaskUrl},
h);return this._commands[c]&&this._commands[c].command&&this._commands[c].command.execute(g,h||{},m)}.bind(this))},executeCommandOnData:function(c,g,h,m){return this._initCommands().then(function(){h=l.mixin({printMapTaskUrl:this.printMapTaskUrl},h);return this._commands[c]&&this._commands[c].command&&this._commands[c].command.executeOnData(this,g,h||{},m)}.bind(this))}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_SerializationSupport":function(){define("require dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./supportClasses/areas/AnalysisAreaJsonUtil ./supportClasses/areas/AnalysisAreaUtil ../core/infographics/InfographicTypes ../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil esri/dijit/geoenrichment/ReportPlayer/countryConfig esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m){function p(){var C=new k;t("./supportClasses/attachments/AttachmentsStoreSerializer ./supportClasses/GEUtil ../core/supportClasses/templateJsonUtils/TemplateJsonSerializer ../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer ../core/infographics/utils/InfographicJsonUtil ../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../core/infographics/InfographicTypes ./commands/mapToImage/MapToURLUtil esri/dijit/geoenrichment/utils/ProjectionUtil".split(" "),
function(E,F,B,w,z,H,G,I,L){n=E;r=F;u=B;v=H;b=G;y=I;A=L;C.resolve()});return C.promise}var n,r,u,v,y,A;return q(null,{reportDataToJson:function(C,E){var F=this;E=E||{};var B=!1;d.processTemplateFieldInfos(C.templateJson,function(w){w.isInfographic&&w.infographicJson.type===b.ATTACHMENTS&&(B=!0)});return p().then(function(){return f(null,function(){return f(C.attachmentsStore&&n.getAttachmentsStoreJson(C.attachmentsStore,{numAreas:C.analysisAreas.length,saveImages:B}),function(w){var z=l.mixin({},
C.config);!1!==E.forceFixedDataMode&&delete z.geoenrichmentUrl;w={isMultiFeature:C.isMultiFeature,reportTitle:C.reportTitle,templateJson:u.serialize(C.templateJson),reportObject:F._prepareReportObjectJson(C.reportObject),fieldData:C.fieldData,analysisAreas:e.areasToJson(C.analysisAreas),combinedAreasInfo:C.combinedAreasInfo&&e.combinedAreasInfoToJson(C.combinedAreasInfo),reverseAnalysisAreasOnMap:C.reverseAnalysisAreasOnMap,attachmentsStore:w,templateVariableProvider:C.templateVariableProvider&&C.templateVariableProvider.toJson(),
config:z,countryConfig:c.toJson(),mapImageInfos:E.mapImageInfos,loadedMapPortalItems:E.loadedMapPortalItems,customLogo:C.customLogo};m.logData&&(console.log("_SerializationSupport.js \x3d\x3e reportDataJson"),console.log(w));return w})})})},_prepareReportObjectJson:function(C){var E={},F;for(F in C)C[F]&&"object"!==typeof C[F]&&(E[F]=C[F]);return E},reportDataFromJson:function(C){return p().then(function(){var E=C.fieldData;E.featureData&&(E.areaData=E.featureData.map(function(B){return{mainCalculator:{data:B}}}),
delete E.featureData);var F={isMultiFeature:C.isMultiFeature,reportTitle:C.reportTitle,templateJson:u.deserialize(C.templateJson),reportObject:C.reportObject,fieldData:E,analysisAreas:e.areasFromJson(C.analysisAreas),combinedAreasInfo:C.combinedAreasInfo&&e.combinedAreasInfoFromJson(C.combinedAreasInfo)||{},reverseAnalysisAreasOnMap:C.reverseAnalysisAreasOnMap,attachmentsStore:C.attachmentsStore&&n.getAttachmentsStoreFromJson(C.attachmentsStore),templateVariableProvider:C.templateVariableProvider&&
new v(C.templateVariableProvider),config:C.config||{},mapImageInfos:C.mapImageInfos,loadedMapPortalItems:C.loadedMapPortalItems,customLogo:C.customLogo};a.populateCombinedAreasInfo(F.combinedAreasInfo,F.analysisAreas);r.setGeoenrichmentUrl(null);E=!1;F.config.portalUrl&&h.setArcgisUrl(h.getPortalUrl(F.config.portalUrl));F.config.geometryServiceUrl?A.setGeometryServiceUrl(F.config.geometryServiceUrl):E=!0;F.config.printMapTaskUrl?y.setPrintMapTaskUrl(F.config.printMapTaskUrl):E=!0;c.fromJson(C.countryConfig);
return f(E&&g.tryConfigureServicesFromAGOLPublic()).then(function(){return F})})}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AnalysisAreaJsonUtil":function(){define(["esri/graphic","esri/dijit/PopupTemplate"],function(t,q){function l(e,a){if(!e)return null;e.getLayer()&&(e=new t(e.geometry,e.symbol,e.attributes,e.infoTemplate));e=e.toJson();a&&delete e.infoTemplate;return e}function k(e){if(!e)return null;if(e instanceof t)return e;var a=e.infoTemplate&&new q(e.infoTemplate);
delete e.infoTemplate;e=new t(e);a&&e.setInfoTemplate(a);return e}function f(e){var a={},b;for(b in e){var d=e[b];if("string"===typeof d||"number"===typeof d&&!isNaN(d))a[b]=d}return a}return{areasToJson:function(e,a){var b=a&&a.excludeInfoTemplate;return e.map(function(d){var c=f(d);c.feature=l(d.feature,b);c.location=d.location&&l(d.location,b);c.additionalFeatures=d.additionalFeatures&&d.additionalFeatures.map(function(g){return l(g,b)});c.geographies=d.geographies;c.buffer=d.buffer;c.featureServiceQueryInfos=
d.featureServiceQueryInfos;return c})},combinedAreasInfoToJson:function(e){var a=f(e);a.groups=e.groups&&e.groups.map(function(b){var d=f(b);d.indexes=b.indexes.slice();d.location=b.location&&l(b.location);d.additionalFeatures=b.additionalFeatures&&b.additionalFeatures.map(l);return d});return a},areasFromJson:function(e){return e.map(function(a){var b=f(a);b.feature=k(a.feature);b.location=a.location&&k(a.location);b.additionalFeatures=a.additionalFeatures&&a.additionalFeatures.map(k);b.geographies=
a.geographies;b.buffer=a.buffer;b.featureServiceQueryInfos=a.featureServiceQueryInfos;return b})},combinedAreasInfoFromJson:function(e){var a=f(e);a.groups=e.groups&&e.groups.map(function(b){var d=f(b);d.indexes=b.indexes.slice();d.location=b.location&&k(b.location);d.additionalFeatures=b.additionalFeatures&&b.additionalFeatures.map(k);return d});return a}}})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicTypes":function(){define(["dojo/_base/lang"],function(t){var q={STATIC:"static",
ATTACHMENTS:"attachments",AREA_DETAILS:"areaDetails",INTERESTING_FACTS:"interestingFacts",LOCATOR_TABLE:"locatorTable",COMPARISON_TABLE:"comparisonTable"},l={AGE_PYRAMID:"AgePyramid",ONE_VAR:"OneVar",RELATED_VARS:"RelatedVariables",TAPESTRY:"Tapestry",PRIZM5:"Prizm5"},k={},f;for(f in l)k[l[f]]=!0;t.mixin(q,l);var e={};for(f in q)e[q[f]]=!0;q.isDynamic=function(a){return k[a]};q.isSupported=function(a){return e[a]};q.isTableLike=function(a){return a===q.AREA_DETAILS||a===q.LOCATOR_TABLE||a===q.COMPARISON_TABLE};
q.fixTapestryNameToWidget=function(a){return"TapestryNEW"===a?"Tapestry":a};q.fixTapestryNameToData=function(a){return"Tapestry"===a?"TapestryNEW":a};q.supportsMultiFeature=function(a){return a===q.COMPARISON_TABLE||a===q.LOCATOR_TABLE||a===q.ATTACHMENTS||a===q.AREA_DETAILS};q.supportsComparison=function(a){return a===q.ONE_VAR||a===q.AGE_PYRAMID||a===q.RELATED_VARS||a===q.COMPARISON_TABLE};q.isDynamicWithFiltering=function(a){return a===q.ONE_VAR||a===q.AGE_PYRAMID||a===q.RELATED_VARS};return q})},
"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil":function(){define(["./_SectionJsonCollector","../../../infographics/InfographicTypes"],function(t,q){var l={},k={process:function(f,e,a,b,d){var c=b;b=function(g,h,m){g&&c.apply(this,arguments)};d={processLevel:e,objJson:a,processFunc:b,ignoreComparisonCalculators:d&&d.ignoreComparisonCalculators};f!==e||"field"===f&&"field"===e?"document"===f?k._processTemplateJson(a,d):"section"===f?k._processSectionJson(a,
d):"table"===f?k._processTableJson(a,d,null):"tableRow"===f?k._processTableDataObj(a,d,null):"field"===f&&k._processFieldInfo(a,d,null):b(a)},_processTemplateJson:function(f,e){f.sectionsTables?f.sectionsTables.forEach(function(a){k._processTableJson(a,e)}):t.collectSectionJsons(f,{saveParentInfo:!1,processFieldInfoFunc:function(a){"field"===e.processLevel&&e.processFunc(a)}}).forEach(function(a){k._processSectionJson(a,e)})},_processSectionJson:function(f,e){"section"===e.processLevel&&e.processFunc(f);
f.stack&&f.stack.forEach(function(a){"sectionElement"===e.processLevel&&e.processFunc(a);"table"===a.id&&k._processTableJson(a,e)})},_processTableJson:function(f,e,a){"table"===e.processLevel&&e.processFunc(f);f.data.data.forEach(function(b){"tableRow"===e.processLevel&&e.processFunc(b,a);k._processTableDataObj(b,e,a)});f.backgroundSectionJson&&k._processSectionJson(f.backgroundSectionJson,e);f.foregroundSectionJson&&k._processSectionJson(f.foregroundSectionJson,e);f.backgroundFloatingTablesSectionJson&&
k._processSectionJson(f.backgroundFloatingTablesSectionJson,e);f.foregroundFloatingTablesSectionJson&&k._processSectionJson(f.foregroundFloatingTablesSectionJson,e)},_processTableDataObj:function(f,e,a){if(f.fieldInfos)for(var b in f.fieldInfos)k._processFieldInfo(f.fieldInfos[b],e,a,"tableCell")},_processFieldInfo:function(f,e,a,b){if(f){"field"!==e.processLevel||e.skipVariables&&(f.hasVariable||f.script)||e.processFunc(f,a,b);f.triggerJson&&f.triggerJson.fieldInfo&&f.templateName!==f.triggerJson.fieldInfo.templateName&&
k._processFieldInfo(f.triggerJson.fieldInfo,e,f,"trigger");f.dataDrillingPanelInfo&&k._processSectionJson(f.dataDrillingPanelInfo.sectionJson,e);f.tooltipInfo&&f.tooltipInfo.fieldInfo&&k._processFieldInfo(f.tooltipInfo.fieldInfo,e,f,"fieldTooltip");f.linkFieldInfo&&k._processFieldInfo(f.linkFieldInfo,e,f,"linkFieldInfo");if(f.isRichText)for(var d in f.richTextJson.fieldInfos)k._processFieldInfo(f.richTextJson.fieldInfos[d],e,f,"richTextPart");f.isInfographic&&k._processInfographicFieldInfo(f,e);f.isChart&&
k._processChartFieldInfo(f,e);f.isReportSection&&f.sectionJson&&k._processSectionJson(f.sectionJson,e)}},_processInfographicFieldInfo:function(f,e){var a=f.infographicJson;switch(a.type){case q.STATIC:a.header&&k._processTableJson(a.header,e,f);a.variableTables&&a.variableTables.forEach(function(c){c.variable&&k._processFieldInfo(c.variable.fieldInfo,e,f,"staticInfographicVariable");c.description&&c.description.fieldInfo&&k._processFieldInfo(c.description.fieldInfo,e,f,"staticInfographicDescription")});
if(a.dataDrilling)for(var b in a.dataDrilling){var d=a.dataDrilling[b];d&&d.sectionJson&&k._processSectionJson(d.sectionJson,e)}break;case q.AGE_PYRAMID:case q.TAPESTRY:case q.PRIZM5:case q.RELATED_VARS:case q.ONE_VAR:!e.ignoreComparisonCalculators&&a.fieldInfos&&a.fieldInfos.forEach(function(c){k._processFieldInfo(c,e,f,"dynamicInfographicVariable")});break;case q.AREA_DETAILS:a.titleSectionJson&&k._processSectionJson(a.titleSectionJson,e,f);a.attributesSectionJson&&k._processSectionJson(a.attributesSectionJson,
e,f);a.notesSectionJson&&k._processSectionJson(a.notesSectionJson,e,f);break;case q.LOCATOR_TABLE:a.titleSectionJson&&k._processSectionJson(a.titleSectionJson,e);k._processSectionJson(a.headerSectionJson,e);k._processSectionJson(a.dataSectionJson,e);a.summarySectionJson&&k._processSectionJson(a.summarySectionJson,e);a.summaryFooterSectionJson&&k._processSectionJson(a.summaryFooterSectionJson,e);a.summarizeFractionField&&"object"===typeof a.summarizeFractionField&&k._processFieldInfo(a.summarizeFractionField,
e,f,"locatorFractionFieldInfo");break;case q.COMPARISON_TABLE:a.titleSectionJson&&k._processSectionJson(a.titleSectionJson,e),e.ignoreComparisonCalculators||k._processSectionJson(a.dataSectionJson,e)}},_processChartFieldInfo:function(f,e){var a=f.chartJson.visualProperties;a.chartIcons&&a.chartIcons.forEach(function(b){k._processFieldInfo(b,e,f,"chartIcon")});a.floatingIcons&&a.floatingIcons.forEach(function(b){k._processTableJson(b,e,f,"floatingIcon")});a.floatingTexts&&a.floatingTexts.forEach(function(b){k._processTableJson(b,
e,f,"floatingText")});e.ignoreComparisonCalculators&&f.chartJson.comparisonInfo&&(e=Object.assign({},e),e.skipVariables=!0);a.tooltip&&a.tooltip.fieldInfo&&k._processFieldInfo(a.tooltip.fieldInfo,e,f,"chartTooltip");f.chartJson.dataDrillingPanelInfo&&k._processSectionJson(f.chartJson.dataDrillingPanelInfo.sectionJson,e);f.chartJson.seriesItems.forEach(function(b){b.points.forEach(function(d){k._processFieldInfo(d.fieldInfo,e,f,"chartPointField");d.iconFieldInfo&&k._processFieldInfo(d.iconFieldInfo,
e,f,"chartPointIcon");d.captionFieldInfo&&k._processFieldInfo(d.captionFieldInfo,e,f,"chartPointCaption")})})}};l.DOCUMENT="document";l.SECTION="section";l.TABLE="table";l.SECTION_ELEMENT="sectionElement";l.TABLE_ROW="tableRow";l.FIELD="field";l.process=k.process;l.processTemplateFieldInfos=function(f,e,a){k.process("document","field",f,e,a)};l.processSectionFieldInfos=function(f,e,a){k.process("section","field",f,e,a)};l.processSectionElements=function(f,e){k.process("document","sectionElement",
f,e)};l.processTableFieldInfos=function(f,e,a){k.process("table","field",f,e,a)};l.processChartFieldInfos=function(f,e){f.seriesItems.forEach(function(d){d.points.forEach(function(c){c.fieldInfo&&e(c.fieldInfo,"series")})});var a=f.visualProperties.tooltip;if(a&&a.fieldInfo&&a.fieldInfo.isRichText)for(var b in a.fieldInfo.richTextJson.fieldInfos)e(a.fieldInfo.richTextJson.fieldInfos[b],"tooltip");f.dataDrillingPanelInfo&&l.processSectionFieldInfos(f.dataDrillingPanelInfo.sectionJson,function(d){e(d,
"dataDrilling")})};l.processDataDrillingPanelInfos=function(f,e){l.processTemplateFieldInfos(f,function(a){if(a.isInfographic&&a.infographicJson.dataDrilling)for(var b in a.infographicJson.dataDrilling){var d=a.infographicJson.dataDrilling[b];d&&e(d)}else a.isChart&&a.chartJson.dataDrillingPanelInfo?e(a.chartJson.dataDrillingPanelInfo):a.dataDrillingPanelInfo&&e(a.dataDrillingPanelInfo)})};l.hasMultiFeatureChart=function(f){var e=!1;l.processTemplateFieldInfos(f,function(a){a.isChart&&(e=e||a.chartJson&&
!!a.chartJson.isMultiFeatureChart)});return e};l.hasComparisonInfographicTable=function(f){var e=!1;l.processTemplateFieldInfos(f,function(a){a.isInfographic&&(e=e||a.infographicJson&&a.infographicJson.type===q.COMPARISON_TABLE)});return e};l.isGraphicReport=function(f){return!!f.sectionsTables};l.hasDynamicColumns=function(f){return l._checkTableAttributes(f,function(e){return 0<e.dynamicColumns})};l.hasDynamicRows=function(f){return l._checkTableAttributes(f,function(e){return 0<e.dynamicRows})};
l._checkTableAttributes=function(f,e){var a;l.isGraphicReport(f)?l.processTemplateFieldInfos(f,function(b){b.isReportSection&&b.sectionJson&&b.sectionJson.stack&&b.sectionJson.stack.some(function(d){if("table"===d.id&&d.attributes&&e(d.attributes))return a=!0})}):a=l.collectSectionJsons(f).some(function(b){return b.stack&&b.stack.some(function(d){return"table"===d.id&&d.attributes&&e(d.attributes)})});return a};l.hasMultiFeatureSections=function(f){return l.isGraphicReport(f)?l.hasMultiFeatureChart(f)||
l.hasDynamicColumns(f)||l.hasComparisonInfographicTable(f):!1};l.calcNumberOfMaps=function(f,e){var a=0;l.collectSectionJsons(f).forEach(function(b){a+=l.calcNumberOfMapsInSectionJson(b,e)});return a};l.calcNumberOfMapsInSectionJson=function(f,e){var a=0;f.stack&&f.stack.forEach(function(b){b.isMap&&(e&&e(b),a++)});l.processSectionFieldInfos(f,function(b){b.isMap&&(e&&e(b.mapJson),a++)});return a};l.calcNumberOfMapsInTableJson=function(f,e){var a=0;l.processTableFieldInfos(f,function(b){b.isReportSection&&
(a+=l.calcNumberOfMapsInSectionJson(b.sectionJson,e))});return a};l.collectSectionJsons=t.collectSectionJsons;l.getParentBox=t.getParentBox;l.setParentBox=t.setParentBox;l.getParentStyle=t.getParentStyle;return l})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/query/_SectionJsonCollector":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/MathUtil","esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil","../../tableJson/TableJsonUtil"],
function(t,q,l,k){var f={},e={provideParentInfo:function(d,c,g,h,m,p){a.collectStatistics(c);a:{switch(m){case "floating":var n=c.style.left+p.left;break a;case "page":n=a.calcX(c,g,h)+p.left;break a}n=void 0}a:{switch(m){case "floating":m=c.style.top+p.top;break a;case "page":m=a.calcY(c,g,h)+p.top;break a}m=void 0}d._parentBox={x:n,y:m,w:a.calcFullWidth(c,g,h),h:a.calcFullHeight(c,g,h)};c=h.field;g.style.fields=g.style.fields||{};g=(g.style.fields[c]=g.style.fields[c]||{}).backgroundColor;d._parentStyle=
{backgroundColor:g}},sanitize:function(d){a.sanitize(d)}},a={collectStatistics:function(d){if(!d._measureInfo){var c={},g={},h;d.data.columns.forEach(function(y){h&&(g[h.field]=y);h=y;c[y.field]=y});var m={},p={},n={},r={},u={},v={};d.data.data.forEach(function(y,A){d.data.columns.forEach(function(C,E){var F=u[E]||0,B=v[A]||0,w=a._getDataHeight(y,C.field);C=a._getFieldWidth(y,C);F+=w;B+=C;u[E]=F;v[A]=B;w=E+"_"+A;p[w]=F;m[w]=B;n[w]=m[E-1+"_"+A]||0;r[w]=p[E+"_"+(A-1)]||0})});d._measureInfo={xPositions:n,
yPositions:r,columnsHash:c,nextColumnHash:g}}},calcX:function(d,c,g){g=d.data.columns.indexOf(g);c=d.data.data.indexOf(c);return d._measureInfo.xPositions[g+"_"+c]||0},calcY:function(d,c,g){g=d.data.columns.indexOf(g);c=d.data.data.indexOf(c);return d._measureInfo.yPositions[g+"_"+c]||0},calcFullWidth:function(d,c,g){g=g.field;var h=a._getFieldWidth(c,d._measureInfo.columnsHash[g]),m=c.columnSpans&&c.columnSpans[g]||1;if(1<m)for(var p,n=0;n<m-1;n++)p=d._measureInfo.nextColumnHash[p?p.field:g],h+=
a._getFieldWidth(c,p);return h},_getFieldWidth:function(d,c){d.style.fields=d.style.fields||{};return(d.style.fields[c.field]=d.style.fields[c.field]||{}).width||c.style.width},calcFullHeight:function(d,c,g){g=g.field;var h=d.data.data.indexOf(c),m=a._getDataHeight(c,g);c=c.rowSpans&&c.rowSpans[g]||1;if(1<c)for(var p=h+1,n=0;n<c-1;n++)h=d.data.data[p++],m+=a._getDataHeight(h,g);return m},_getDataHeight:function(d,c){d.style.fields=d.style.fields||{};return(d.style.fields[c]=d.style.fields[c]||{}).height||
d.style.height},sanitize:function(d){delete d._measureInfo}},b={getIntersectingTableJsonsBehind:function(d,c,g,h,m){function p(v){var y=v.data.data[0].fieldInfos[v.data.columns[0].field];return l.isTextLikeCell(y)||l.isShapeCell(y)||l.isImageCell(y)?q.checkRectsIntersect([g,{x:v.style.left+c.left,y:v.style.top+c.top,w:k.getTableWidth(v),h:k.getTableHeight(v)}]):!1}function n(v){return q.checkRectsIntersect([g,{x:v.style.left+c.left,y:v.style.top+c.top,w:v.style.width,h:v.style.height}])}var r=[],
u=[];d.backgroundFloatingTablesSectionJson&&d.backgroundFloatingTablesSectionJson.stack.forEach(function(v,y){if(-1===h||m||h!==y)if("table"===v.id&&p(v)||"img"===v.id&&n(v))-1===h||m||h>y?r.push(v):u.push(v)});d.foregroundFloatingTablesSectionJson&&d.foregroundFloatingTablesSectionJson.stack.forEach(function(v,y){if(m&&h===y)return!0;if("table"===v.id&&p(v)||"img"===v.id&&n(v))m&&h>y?r.push(v):u.push(v)});return{elementJsonsBehind:r,elementJsonsAbove:u}}};f.collectSectionJsons=function(d,c){c=c||
{};var g=[];if(!d)return[];if(d.sections)return d.sections;if(!d.sectionsTables)return[];c.processSectionJson=c.processSectionJson||function(){};d.sectionsTables.forEach(function(h,m){var p={addBackground:function(){!1!==c.backgroundForeground&&h.backgroundSectionJson&&h.backgroundSectionJson.stack&&g.push(h.backgroundSectionJson)},addBackgroundTables:function(n){var r=[];!1!==c.floatingTables&&h.backgroundFloatingTablesSectionJson&&h.backgroundFloatingTablesSectionJson.stack.forEach(function(u,v){"table"===
u.id&&f._processTableJson(u,r,"floating",d.documentOptions,c,h,v,!1)});n&&r.reverse();r.forEach(function(u){c.processSectionJson(u,{pageIndex:m,source:"foreground",floatingIndex:u.__floatingIndex});delete u.__floatingIndex});g=g.concat(r)},addInGridSections:function(){var n=[];f._processTableJson(h,n,"page",d.documentOptions,c,h);n.forEach(function(r){c.processSectionJson(r,{pageIndex:m,source:"grid",index:r.__inGridIndex});delete r.__inGridIndex});g=g.concat(n)},addForegroundTables:function(n){var r=
[];!1!==c.floatingTables&&h.foregroundFloatingTablesSectionJson&&h.foregroundFloatingTablesSectionJson.stack.forEach(function(u,v){"table"===u.id&&f._processTableJson(u,r,"floating",d.documentOptions,c,h,v,!0)});n&&r.reverse();r.forEach(function(u){c.processSectionJson(u,{pageIndex:m,source:"foreground",floatingIndex:u.__floatingIndex});delete u.__floatingIndex});g=g.concat(r)},addForeground:function(){!1!==c.backgroundForeground&&h.foregroundSectionJson&&h.foregroundSectionJson.stack&&g.push(h.foregroundSectionJson)}};
c.topFirst?(p.addForeground(),p.addForegroundTables(!0),p.addInGridSections(),p.addBackgroundTables(!0),p.addBackground()):(p.addBackground(),p.addBackgroundTables(),p.addInGridSections(),p.addForegroundTables(),p.addForeground())});return g};f._processTableJson=function(d,c,g,h,m,p,n,r){d.data.data.forEach(function(u,v){u.fieldInfos&&d.data.columns.forEach(function(y,A){var C=u.fieldInfos[y.field];if(C&&C.sectionJson&&C.sectionJson.stack){m.processFieldInfoFunc&&m.processFieldInfoFunc(C);(!1!==m.saveParentInfo||
m.populateWithFloatingElementsBehind)&&e.provideParentInfo(C.sectionJson,d,u,y,g,h);if(m.populateWithFloatingElementsBehind){var E=t.clone(C.sectionJson),F;"page"===g?F=b.getIntersectingTableJsonsBehind(p,h,E._parentBox,-1,void 0):"floating"===g&&(F=b.getIntersectingTableJsonsBehind(p,h,E._parentBox,n,r));C=function(B){B=t.clone(B);B.isContextFloatingElement=!0;B.style.left=B.style.left+h.left-E._parentBox.x;if("table"===B.id)B.style.top=B.style.top+h.top-E._parentBox.y;else if("img"===B.id||"map"===
B.id)B.style.top=B.style.top+h.top-E._parentBox.y;return B};y=F.elementJsonsBehind.map(C);F=F.elementJsonsAbove.map(C);E.stack=y.concat(E.stack);E.stack=E.stack.concat(F);c.push(E)}else c.push(C.sectionJson);F=c[c.length-1];"page"===g?F.__inGridIndex=v*d.data.columns.length+A:F.__floatingIndex=n}})});e.sanitize(d)};f.getParentBox=function(d){return d&&d._parentBox};f.setParentBox=function(d,c){d._parentBox=c};f.getParentStyle=function(d){return d&&d._parentStyle};return f})},"esri/dijit/geoenrichment/utils/MathUtil":function(){define([],
function(){function t(e){return Array.isArray(e)?e:[e.x,e.y]}function q(e){return Array.isArray(e)?e:[e.x,e.y,e.x+e.w,e.y+e.h]}function l(e){return Array.isArray(e)?{x:e[0],y:e[1],w:e[2]-e[0],h:e[3]-e[1]}:e}function k(e){return[[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]],[e[0]+(e[2]-e[0])/2,e[1]+(e[3]-e[1])/2]]}var f={rotatePointAroundPoint:function(e,a,b){b=f.degToRad(b);var d=t(e),c=t(a);a=Math.cos(b)*(c[0]-d[0])-Math.sin(b)*(c[1]-d[1])+d[0];b=Math.sin(b)*(c[0]-d[0])+Math.cos(b)*(c[1]-d[1])+
d[1];return Array.isArray(e)?[a,b]:{x:a,y:b}},degToRad:function(e){return e*Math.PI/180},radToDeg:function(e){return 180*e/Math.PI},cosDeg:function(e){return Math.cos(f.degToRad(e))},sinDeg:function(e){return Math.sin(f.degToRad(e))},angleTo180_180Range:function(e){e=(e+180)%360;0>e&&(e=360+e);return e-180},angleTo0_360Range:function(e){e%=360;0>e&&(e=360+e);return e},calcVectorLength:function(e){var a=e[0]-e[2];e=e[1]-e[3];return Math.sqrt(a*a+e*e)},addPointToVector:function(e,a){a=t(a);e=e.slice();
e[0]+=a[0];e[1]+=a[1];e[2]+=a[0];e[3]+=a[1];return e},subtractPointFromVector:function(e,a){a=t(a);e=e.slice();e[0]-=a[0];e[1]-=a[1];e[2]-=a[0];e[3]-=a[1];return e},putVectorToOrigin:function(e){return f.subtractPointFromVector(e,[e[0],e[1]])},normalizeVector:function(e){e=f.putVectorToOrigin(e);var a=f.calcVectorLength(e);e[2]/=a;e[3]/=a;return e},calcDotProduct:function(e,a){e=f.putVectorToOrigin(e);a=f.putVectorToOrigin(a);return e[2]*a[2]+e[3]*a[3]},calcAngleBetweenVectors:function(e,a){e=f.normalizeVector(e);
a=f.normalizeVector(a);return Math.acos(f.calcDotProduct(e,a))},addLengthToVector:function(e,a){var b=f.calcVectorLength(e),d=[e[0],e[1]];e=f.normalizeVector(e);e[2]*=b+a;e[3]*=b+a;return f.addPointToVector(e,d)},rotateVectorAroundPoint:function(e,a,b){a=t(a);var d=f.rotatePointAroundPoint(a,[e[0],e[1]],b);e=f.rotatePointAroundPoint(a,[e[2],e[3]],b);return[d[0],d[1],e[0],e[1]]},toLineABC:function(e){var a=e[3]-e[1],b=e[0]-e[2];return[a,b,-a*e[0]-b*e[1]]},intersect2Lines:function(e,a){var b=f.toLineABC(e),
d=f.toLineABC(a);a=b[0];e=b[1];b=b[2];var c=d[0],g=d[1];d=d[2];var h=a*g-c*e;return 0===h?null:[(d*e-b*g)/h,(c*b-a*d)/h]},intersectLineWithRect:function(e,a){function b(p,n){(p=f.intersect2Lines(e,[p[0],p[1],n[0],n[1]]))&&f.isPointInRect(a,p)&&m.push(p)}var d=k(a),c=d[0],g=d[1],h=d[2];d=d[3];var m=[];b(c,g);b(g,h);b(h,d);b(d,c);if(2!==m.length)return null;c=[m[0][0],m[0][1],m[1][0],m[1][1]];return f.calcVectorLength(c)?c:null},isPointInRect:function(e,a){e=q(e);a=t(a);var b=e[2]-e[0],d=e[3]-e[1];
return!(a[0]<e[0]||a[0]>e[0]+b||a[1]<e[1]||a[1]>e[1]+d)},isRectInRect:function(e,a){return f.checkRectsIntersect([e,a])&&k(q(e)).every(function(b){return f.isPointInRect(a,b)})},checkRectsIntersect:function(e){e=e.map(q);return e.every(function(a){var b=k(a);return e.every(function(d){return a===d?!0:b.some(function(c){return f.isPointInRect(d,c)})||k(d).some(function(c){return f.isPointInRect(a,c)})})})},getRotatedRectBox:function(e,a){var b=!Array.isArray(e);e=q(e);var d=k(e);e=d[0];var c=d[1],
g=d[2],h=d[3];d=d[4];e=f.rotatePointAroundPoint(d,e,a);c=f.rotatePointAroundPoint(d,c,a);g=f.rotatePointAroundPoint(d,g,a);h=f.rotatePointAroundPoint(d,h,a);e=f.getPointsExtent([e,c,g,h]);return b?l(e):e},uniteRects:function(e){var a=!Array.isArray(e[0]);e=e.map(q);var b=[];e.forEach(function(d){b=b.concat(k(d))});e=f.getPointsExtent(b);return a?l(e):e},getPointsExtent:function(e){var a=!Array.isArray(e[0]),b=Infinity,d=-Infinity,c=Infinity,g=-Infinity;e.forEach(function(h){h=t(h);b=Math.min(b,h[0]);
d=Math.max(d,h[0]);c=Math.min(c,h[1]);g=Math.max(g,h[1])});e=[b,c,d,g];return a?l(e):e}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridDataUtil":function(){define(["dojo/_base/lang","../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary","esri/dijit/geoenrichment/utils/FieldUtil","esri/dijit/geoenrichment/utils/ObjectUtil","esri/dijit/geoenrichment/ReportPlayer/countryConfig"],function(t,q,l,k,f){var e={getFieldCellValue:function(a){return a.gridData&&a.gridData[a.column.field]},
setFieldCellContent:function(a,b){a.set("value",b);a.gridData[a.column.field]=b},clearFieldInfo:function(a,b){a.fieldInfos&&delete a.fieldInfos[b];a[b]="";e.setNumericDataValue(void 0,a,b)},getNumericCellValue:function(a){return e.getNumericDataValue(a.gridData,a.column.field)},setNumericCellValue:function(a,b){return e.setNumericDataValue(b,a.gridData,a.column.field)},getNumericDataValue:function(a,b){return a&&b&&a[b+"_numeric"]},setNumericDataValue:function(a,b,d){b[d+"_numeric"]=a},getRenderedValue:function(a,
b,d){var c={parentGrid:a,gridData:b,column:d};a=a._getCellRenderer().getRenderedContent(c);if(a.isUnavailableData)return{};if("number"!==typeof a.value||isNaN(a.value))"string"===typeof a.formattedValue&&(c=k.parsePercentOrCurrency(a.formattedValue,f.getCurrencyFormat()),isNaN(c)||(g=c));else var g=a.value;"number"!==typeof g&&(g=e.getNumericDataValue(b,d.field));return{numericValue:g,formattedValue:a.formattedValue}},isEmptyCell:function(a){return!a.get("value")&&!a.gridData[a.column.field]&&!e.getFieldInfo(a)},
hasSpans:function(a){return e.getColumnSpan(a)||e.getRowSpan(a)},getColumnSpan:function(a){return a&&a.gridData&&a.gridData.columnSpans&&a.gridData.columnSpans[a.column.field]},getRowSpan:function(a){return a&&a.gridData&&a.gridData.rowSpans&&a.gridData.rowSpans[a.column.field]},getDataColumnSpan:function(a,b){return a&&a.columnSpans&&a.columnSpans[b]},getDataRowSpan:function(a,b){return a&&a.rowSpans&&a.rowSpans[b]},getFieldInfo:function(a){return a&&a.gridData&&a.column&&a.gridData.fieldInfos&&
a.gridData.fieldInfos[a.column.field]},getGridFirstFieldInfo:function(a){return e.getFieldInfo(a.getFirstCell())},setFieldInfo:function(a,b){a.gridData&&(a.gridData.fieldInfos[a.column.field]=b)},provideFieldInfo:function(a){e.setFieldInfo(a,e.getFieldInfo(a)||{});return e.getFieldInfo(a)},getPreservableSettings:function(a){return{triggerJson:e.getConditionalFormatting(a),dataDrilling:e.getDataDrilling(a),tooltipInfo:e.getTooltipInfo(a)}},setPreservableSettings:function(a,b){e.setConditionalFormatting(a,
b&&b.triggerJson);e.setDataDrilling(a,b&&b.dataDrilling);e.setTooltipInfo(a,b&&b.tooltipInfo)},getCellStyle:function(a,b){if(!a||!a.gridData||!a.column)return null;var d=a.gridData.style&&a.gridData.style.fields&&a.gridData.style.fields[a.column.field];!d&&b&&(d={},e.setCellStyle(a,d));return d},getCellThemeStyle:function(a){return a&&a.gridData&&a.column?a.gridData.themeStyle&&a.gridData.themeStyle.fields[a.column.field]:null},setCellStyle:function(a,b){var d=a.gridData.style=a.gridData.style||{};
d.fields=d.fields||{};d.fields[a.column.field]=b},updateCellStyle:function(a,b){a=e.getCellStyle(a,!0);t.mixin(a,b)},copyFieldStyle:function(a,b,d){a=e.getCellStyle(a);b=e.getCellStyle(b,!0);for(var c in d)void 0!==a[c]&&(b[c]=a[c])},getFieldCellUrl:function(a){if(a.gridData&&a.gridData.urls&&a.column)return a.gridData.urls[a.column.field]},setFieldCellUrl:function(a,b){a.gridData&&a.column&&(a.gridData.urls=a.gridData.urls||{},void 0===b?delete a.gridData.urls[a.column.field]:a.gridData.urls[a.column.field]=
b)},getConditionalFormatting:function(a){return(a=e._toFieldInfo(a))&&a.triggerJson},setConditionalFormatting:function(a,b){var d=e.getFieldInfo(a);d.triggerJson=null;if(b){if(a=e.isVariableLikeFieldCell(a))b.fieldInfo=d;b.fieldInfo===d&&(b.fieldInfo=t.clone(b.fieldInfo),delete b.fieldInfo.triggerJson,a&&(delete b.fieldInfo.tooltipInfo,delete b.fieldInfo.dataDrillingPanelInfo))}d.triggerJson=b},getDataDrilling:function(a){return(a=e.getSourceFieldInfo(a))&&a.dataDrillingPanelInfo},setDataDrilling:function(a,
b){if(a=e.getSourceFieldInfo(a))a.dataDrillingPanelInfo=b},getTooltipInfo:function(a){return(a=e.getSourceFieldInfo(a))&&a.tooltipInfo},setTooltipInfo:function(a,b){if(a=e.getSourceFieldInfo(a))a.tooltipInfo=b},getSourceFieldInfo:function(a){var b=e._toFieldInfo(a);a=e.getConditionalFormatting(a);return b&&b.isImage?a&&a.fieldInfo:b},_toFieldInfo:function(a){return a?a.gridData?e.getFieldInfo(a):"object"===typeof a&&a:null},isReportSectionCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.isReportSection)},
isInfographicCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.isInfographic)},isChartCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.isChart)},isMapCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.isMap)},isImageCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.isImage)},isImageTriggerCell:function(a){a=e._toFieldInfo(a);return!!(a&&a.isImage&&a.triggerJson)},getImageTriggerFieldInfo:function(a){return(a=e._toFieldInfo(a))&&a.isImage&&a.triggerJson?a.triggerJson.fieldInfo:null},isShapeCell:function(a){a=
e._toFieldInfo(a);return!(!a||!a.isShape)},isEmptyShapeCell:function(a){a=(a=e._toFieldInfo(a))&&a.shapeJson;return!(!a||a.g&&a.g.length)},isPlaceholderShapeCell:function(a){a=(a=e._toFieldInfo(a))&&a.shapeJson;return!(!a||!a.isPlaceholder)},isTextLikeCell:function(a){return!e._toFieldInfo(a)||e.isRichTextCell(a)||e.isVariableLikeFieldCell(a)||e.isSpecialFieldCell(a)},isRichTextCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.isRichText)},isVariableLikeFieldCell:function(a){a=e._toFieldInfo(a);
return!(!a||!a.hasVariable&&!a.script&&"headers.CHART_POINT_VALUE"!==a.name&&"LocatorSummary"!==a.name)},isVariableFieldCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.hasVariable)},isScriptFieldCell:function(a){a=e._toFieldInfo(a);return!(!a||!a.script)},isUneditableScript:function(a){a=e._toFieldInfo(a);return!!(a&&a.script&&a.script.isUneditableScript)},isNumericVariableFieldCell:function(a){return(a=e._toFieldInfo(a))?a.hasVariable&&l.isNumericField(a)||a.script&&("Double"===a.script.type||
!a.script.isUneditableScript&&"String"!==a.script.type)||"headers.CHART_POINT_VALUE"===a.name||"LocatorSummary"===a.name?!0:!1:!1},isCalculatableNumericVariableFieldCell:function(a){return e.isNumericVariableFieldCell(a)},isStringVariableFieldCell:function(a){a=e._toFieldInfo(a);return!(!a||!(a.hasVariable&&"esriFieldTypeString"===a.type||a.script&&"String"===a.script.type))},isSpecialFieldCell:function(a){var b=e._toFieldInfo(a);return b&&("headers.CHART_POINT_VALUE"===b.name||"LocatorSummary"===
b.name||!e.isVariableLikeFieldCell(a)&&q.hasField(b.name))}};return e})},"esri/dijit/geoenrichment/utils/FieldUtil":function(){define([],function(){function t(f){return("string"===typeof f?f:f&&f.type)||""}var q={isNumericField:function(f){switch(t(f)){case "esriFieldTypeSmallInteger":case "esriFieldTypeInteger":return"i";case "esriFieldTypeSingle":case "esriFieldTypeDouble":return"f"}return!1},isStringField:function(f){return"esriFieldTypeString"==t(f)||!1},isDateField:function(f){return"esriFieldTypeDate"==
t(f)||!1}},l=/DISTANCE$/;q.isDistanceField=function(f){return l.test(t(f))};var k=/^(SHAPE__Area|SHAPE__Length)$/i;q.canShowField=function(f,e){if(!f||!f.name||"esriFieldTypeOID"===f.type)return!1;if("esriFieldTypeDate"===f.type)return"d";var a=q.isNumericField(f)||q.isStringField(f);if("f"===a&&!1===f.editable&&k.test(f.name))return null;void 0===e&&(e=/^(OBJECTID|OID|FID)$/i);return e&&e.test(f.name)?!1:!0===a?"s":a};q.createFieldInfo=function(f){var e=q.canShowField(f);f={fieldName:f.name,label:f.alias||
f.name,isEditable:!!f.editable,visible:!!e};switch(e){case "i":f.format={places:0,digitSeparator:!0};break;case "f":f.format={digitSeparator:!0};break;case "s":f.stringFieldOption="textbox"}return f};return q})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/tableJson/TableJsonUtil":function(){define(["dojo/_base/lang","../templateJsonUtils/fieldInfo/FieldInfoBuilder","../templateJsonUtils/fieldInfo/FieldLibrary","../../grid/coreUtils/GridDataUtil","esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes"],
function(t,q,l,k,f){var e={createTable:function(a){var b=a.numColumns,d=a.numRows,c=a.width,g=a.widths,h=a.style,m=a.attributes&&a.attributes.fixedColumns,p=a.attributes&&a.attributes.dynamicColumns;if(c)if(g)g=g.map(function(E){return c*Number(E.replace("%",""))/100});else{var n=c/b;g=[];for(var r=0;r<b;r++)g.push(n)}if(g)c||isNaN(Number(g[0]))||(c=0,g.forEach(function(E){c+=E}));else for(n=Number(100/b).toFixed(3)+"%",g=[],r=0;r<b;r++)g.push(n);n=[];for(r=0;r<b;r++)n.push({field:"field"+r,style:{width:g[r]}});
g=[];for(var u=!0,v=a.height?a.height/d:a.rowHeight||15.07,y=0;y<d;y++){var A={style:{height:v,fields:{}},fieldInfos:{}};for(r=0;r<b;r++){var C="field"+r;!1!==a.useDefaultTheme&&(A.style.fields[C]=t.mixin({horizontalAlign:0===r?"left":"right",overrideStyle:0===y?1<d?!1!==a.useDefaultHeaderTheme?"TableHeader":"Default":void 0:u?"AlternatingRow":"Default"},a.cellParams));p&&r>=m&&0===y&&(A.fieldInfos[C]=q.createFieldInfoFromSpecialFieldName("AREA_DESC"));a.processTableCell&&a.processTableCell(A,C,y,
r,a)}g.push(A);u=!u}return{id:"table",attributes:t.mixin({},a.attributes),style:t.mixin({width:c||772.33},h),data:{columns:n,data:g}}},createSingleCellTable:function(a){a=a||{};var b=e.createTable({numColumns:1,numRows:1,attributes:a.attributes,useDefaultTheme:!1});e.modifyTableJson(b,0,0,a);return b},modifyTableJson:function(a,b,d,c){b=a.data.data[b];d=a.data.columns[d];var g=d.field;c.text&&(b[g]=c.text);c.fieldInfo&&(b.fieldInfos[g]=c.fieldInfo);c.cellStyle&&(b.style.fields[g]=c.cellStyle);c.columnSpan&&
(b.columnSpans=b.columnSpans||{},b.columnSpans[g]=c.columnSpan);c.rowSpan&&(b.rowSpans=b.rowSpans||{},b.rowSpans[g]=c.rowSpan);b.themeStyle=c.themeStyle;c.width&&(a.style.width=c.width,d.style.width=c.width);c.height&&(b.style.height=c.height);void 0!==c.left&&(a.style.left=c.left);void 0!==c.top&&(a.style.top=c.top)},getTableWidth:function(a){return a.style.width},getTableHeight:function(a){var b=0;a.data.data.forEach(function(d){b+=d.style?d.style.height:0});return b},calcTableBox:function(a){return{x:a.style.left||
0,y:a.style.top||0,w:e.getTableWidth(a),h:e.getTableHeight(a)}},createDetailsSection:function(a){return{type:f.DETAILS,stack:[e.createTable(a)]}},createDetailsSectionForFieldInfos:function(a,b){return{type:f.DETAILS,stack:[function(){var d=e.createTable(t.mixin({numColumns:2,numRows:a.length+1},b));d.data.data.forEach(function(c,g){0===g?c.field0=a[0].hasVariable?a[0].fieldCategory:"":(g=a[g-1],c.field0=g.script?g.script.alias:g.hasVariable?g.alias:l.getFieldLabel(g.name)||"",c.fieldInfos.field1=
g)});e.provideSpaceAfter(d);return d}()]}},createDetailsSectionForFieldInfoGroups:function(a,b){return{type:f.DETAILS,stack:[function(){var d=e.createTable(t.mixin({numColumns:a.length+1,numRows:a[0].length+1},b));d.data.data.forEach(function(c,g){d.data.columns.forEach(function(h,m){0!==m&&(0===g?c[h.field]=a[m-1][0].fieldCategory||"":(m=a[m-1][g-1],c.field0=c.field0||(m.script?m.script.alias:m.alias),c.fieldInfos[h.field]=m))})});e.provideSpaceAfter(d);return d}()]}},provideSpaceAfter:function(a,
b){a.style.spaceAfter=Math.max(b||0,90-15.07*a.data.data.length)},applyDefaultStyling:function(a){var b=!0;a.data.data.forEach(function(d,c){a.data.columns.forEach(function(g){d.style.fields[g.field].overrideStyle=0===c?"TableHeader":b?"AlternatingRow":void 0});b=!b})},setTableHeaderStyle:function(a){if(a.style)for(var b in a.style.fields)(a.style.fields[b]=a.style.fields[b]||{}).overrideStyle="TableHeader"},DEFAULT_ROW_HEIGHT:15.07,isEmptyTable:function(a){return a.isGrid?!a.columns||!a.columns.length||
!a.store||!a.store.data.length:a.data?!a.data.columns||!a.data.columns.length||!a.data.data||!a.data.data.length:!1},isSingleCelledTable:function(a){return a.isGrid?a.store&&1===a.store.data.length&&a.columns&&1===a.columns.length:a.data?1===a.data.columns.length&&1===a.data.data.length:!1},isMultiDataTable:function(a){return a.isGrid?1<a.columns.length||2<a.store.data.length:a.data?1<a.data.columns.length||2<a.data.data.length:!1},getTableSubtype:function(a){if(!e.isSingleCelledTable(a))return null;
a=e.getFirstFieldInfo(a);return k.isTextLikeCell(a)?"isTextLike":a.isImage?a.triggerJson?"isImage.hasConditionalStyling":"isImage":a.isShape?"isShape":null},getFirstFieldInfo:function(a){return a.isGrid?a.store.data[0].fieldInfos&&a.store.data[0].fieldInfos[a.columns[0].field]:a.data.data[0].fieldInfos&&a.data.data[0].fieldInfos[a.data.columns[0].field]},tableJsonHasInfographic:function(a){return!!e.getTableJsonInfographic(a)},getTableJsonInfographic:function(a){var b;a.data.data.some(function(d){if(d.fieldInfos)for(var c in d.fieldInfos){var g=
d.fieldInfos[c];if(g&&g.isInfographic)return b=g.infographicJson,!0}});return b},getTableJsonFirstFieldInfo:function(a){return a.data.data[0].fieldInfos[a.data.columns[0].field]},tableJsonHasChart:function(a){return a.data.data.some(function(b){if(b.fieldInfos)for(var d in b.fieldInfos){var c=b.fieldInfos[d];if(c&&c.isChart)return!0}})}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder":function(){define(["./utils","dojo/i18n!esri/nls/jsapi"],
function(t,q){function l(b){Object.keys(b).forEach(function(d){var c=b[d];void 0!==c&&null!==c||delete b[d]})}q=q.geoenrichment.dijit.ReportPlayer.ReportPlayer;var k={NUMBER:"n/",createFieldInfoFromCalculator:function(b,d,c){if(!b)return null;b=(d="function"===typeof b.getDescriptionWithType?b:null)?d.variable:b;var g=c&&c.format,h=c&&c.autoformatCurrency,m=c&&c.additionalText,p=c&&c.calculatorName,n=c&&c.defaultDistanceUnits;c=c&&c.summaryType;var r=d&&d.getToggleGroup&&d.getToggleGroup();c={alias:d?
d.getDescriptionWithType()||d.getAliasWithType():b.description||b.alias,hasVariable:!0,variableID:b.id,fullName:b.fullName,fieldCategory:b.fieldCategory,vintage:b.vintage,type:b.type,statefulName:r?r.value:"n/"+b.fullName,summaryType:c};d=d?d.getCalcType().charAt(0):"n";c.name=t.name.createFieldNameFromSource(b,d);g?t.format.setFieldInfoFormat(c,g):(c.decimals=b.precision,c.showCurrency=!(!h||"n"!==d||!b.units||"CURRENCY"!==b.units.toUpperCase()),c.showPercent=!c.showCurrency&&("p"===d||"n"===d&&
b.units&&"PCT"===b.units.toUpperCase()),c.useThousandsSeparator=!0);b.isWebMap&&(c.isWebMap=!0,c.webMapFieldName=b.fieldName,c.webMapField=b.fieldInfo,c.webMapId=b.webMapId,c.layerUrl=b.layerUrl,!g&&b.fieldInfo&&b.fieldInfo.format&&(c.decimals=b.fieldInfo.format.places,c.useThousandsSeparator=!1!==b.fieldInfo.format.digitSeparator));b.customDataCollection&&(c.isCustomDataCollection=!0,c.customDataCollectionId=b.customDataCollection.id,c.customDataCollectionUrl=b.customDataCollection.url,c.customDataCollectionPortalUrl=
b.customDataCollection.portalUrl);b.isSiteAttribute&&(c.isSiteAttribute=!0,c.attribute=b.attribute,c.type=b.attribute.type,!g&&0<b.attribute.places&&(c.decimals=b.attribute.places));b.isDataLayerAttribute&&(c.isDataLayerAttribute=!0,c.layerID=b.layerID,c.layerUrl=b.layerUrl,c.layerName=b.layerName,c.attribute=b.attribute,c.type=b.attribute.type,!g&&0<b.attribute.decimals&&(c.decimals=b.attribute.decimals),"DISTANCE"===b.attribute.name&&(c.units=b.attribute.units||n||"esriMiles"));"string"===typeof m&&
(c.additionalText=m);c.usedFields=b.usedFields;c.expressionText=b.expressionText;t.name.provideQualifiedFieldInfoTemplateName(c,p);l(c);return c},fieldInfoToVariable:function(b){if(!b.hasVariable)return null;var d={id:b.variableID,fullName:b.fullName,fieldCategory:b.fieldCategory,vintage:b.vintage,type:b.type,precision:b.decimals,usedFields:b.usedFields,expressionText:b.expressionText};b.isWebMap&&(d.isWebMap=!0,d.fieldName=b.webMapFieldName,d.fieldInfo=b.webMapField,d.webMapId=b.webMapId,d.layerUrl=
b.layerUrl);b.isSiteAttribute&&(d.isSiteAttribute=!0,d.attribute=b.attribute);return d},createFieldInfoFromScript:function(b,d){var c=d&&d.format,g=d&&d.additionalText;d=d&&d.calculatorName;b=b||{};b.name=b.name||t.name.DEFAULT_SCRIPT_NAME;b.alias=b.alias||q.scriptNameDefault;b.decimals=Number(b.decimals)||0;var h={};h.name=t.name.createFieldNameFromScript(b);t.name.provideQualifiedFieldInfoTemplateName(h,d);h.script=b;c?t.format.setFieldInfoFormat(h,c):(h.decimals=Number(b.decimals),h.showCurrency=
!1,h.showPercent=!1,h.useThousandsSeparator=!0);"string"===typeof g&&(h.additionalText=g);l(h);return h},createFieldInfoFromImage:function(b,d){return{isImage:!0,imageJson:b,triggerJson:d}},createFieldInfoFromMap:function(b){return{isMap:!0,mapJson:b}},createFieldInfoFromShape:function(b){return{isShape:!0,shapeJson:b}},createFieldInfoFromChart:function(b){return{isChart:!0,chartJson:b}},createFieldInfoFromInfographic:function(b){return{isInfographic:!0,infographicJson:b}},createFieldInfoFromSection:function(b){return{isReportSection:!0,
sectionJson:b}},createFieldInfoFromMissingVariable:function(b,d){return{name:b&&b.substr(b.indexOf(".")+1),templateName:b,isMissing:!0,alias:d}},createFieldInfoForUnsupportedContent:function(){return{isUnsupportedContent:!0}}},f=/^\[\w+\]$/,e=/\[\w+\]/;k.createFieldInfoFromLabel=function(b,d){if("string"!==typeof b)return null;b=b.trim();var c=f.test(b);if(!d||c){if(!c)return null;b=b.replace(/\[|\]/g,"").toUpperCase();return k.createFieldInfoFromSpecialFieldName(t.fields.uiToTemplate(b))}return e.test(b)?
t.richText.createFieldInfoFromRenderedXMLString(b):null};k.createFieldInfoFromSpecialFieldName=function(b,d){if("string"!==typeof b)return null;b=t.fields.trimTemplateHeaderName(b);b=b.toUpperCase();if("GROUPCOUNT"===b)var c={name:t.fields.GROUPCOUNT_FIELD_NAME,alias:t.fields.GROUPCOUNT_FIELD_ALIAS,type:"esriFieldTypeInteger"};else"LOCATORSUMMARY"===b?(c={name:t.fields.LOCATORSUMMARY_FIELD_NAME,alias:t.fields.LOCATORSUMMARY_FIELD_ALIAS,type:"esriFieldTypeDouble",templateName:t.fields.LOCATORSUMMARY_FIELD_NAME},
d&&Object.assign(c,t.format.processFieldInfoTagAttributes({m:"string"===typeof d?d:t.format.buildFormatStringFromObject(d)}))):"CURRDATE"===b?c={name:t.fields.DATE_FIELD_NAME,alias:t.fields.DATE_FIELD_ALIAS,format:d||t.fields.DATE_FIELD_DEFAULT_FORMAT}:"SITENOTES"===b?c={name:t.fields.qualifyTemplateHeaderName(t.fields.SITENOTES_FIELD_NAME),alias:t.fields.SITENOTES_FIELD_ALIAS,type:"esriFieldTypeString"}:0===b.indexOf("SITENOTE")&&(c=t.fields.getSiteNoteFieldNameAt(b.replace("SITENOTE","")),c={name:t.fields.qualifyTemplateHeaderName(c),
alias:c,type:"esriFieldTypeString"});if(c)return c;var g=t.fields.templateToUIHeader(b);g?(c={name:t.fields.qualifyTemplateHeaderName(b),alias:g,type:"esriFieldTypeString"},t.fields.isChartAttribute(b)&&(c.isChartAttribute=!0),"CHART_POINT_VALUE"===b&&(c.type="esriFieldTypeDouble",c.decimals=0,c.useThousandsSeparator=!0,d&&t.format.setFieldInfoFormat(c,d))):(d=t.fields.templateToUIReportVar(b))&&(c={name:d,alias:d,type:"esriFieldTypeString"});c&&(c.templateName=c.name);return c};var a=/_P$/i;k.isFieldInfoInPercentState=
function(b){return b?b.statefulName&&("p"===b.statefulName.charAt(0)||a.test(b.statefulName))||b.alias&&-1!==b.alias.indexOf("(%)"):!1};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/utils":function(){define(["esri/dijit/geoenrichment/Deferred","require"],function(t,q){var l={},k;l.init=function(){if(k)return k.promise;k=new t;q("./FieldInfoBuilder ./FieldInfoFormatUtil ./FieldInfoNameUtil ./FieldInfoRenderer ./RichTextJsonUtil ./FieldLibrary".split(" "),
function(f,e,a,b,d,c){l.builder=f;l.format=e;l.name=a;l.renderer=b;l.richText=d;l.fields=c;k.resolve()});return k.promise};l.init();return l})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes":function(){define([],function(){return{PAGE_HEADER:"PageHeader",DETAILS_HEADER:"DetailsHeader",DETAILS:"Details",GROUP:"Group",PAGE_FOOTER:"PageFooter",REPORT_FOOTER:"ReportFooter",DATA_SOURCE:"DataSource",EMPTY:"empty",INFOGRAPHIC_HEADER:"InfographicHeader",INFOGRAPHIC_VARIABLE:"InfographicVariable",
INFOGRAPHIC_BACKGROUND:"InfographicBackground",INFOGRAPHIC_FOREGROUND:"InfographicForeground",INFOGRAPHIC_ATTRIBUTES:"InfographicAttributes",INFOGRAPHIC_NOTES:"InfographicNotes",INFOGRAPHIC_SUMMARY:"InfographicSummary",INFOGRAPHIC_SUMMARY_FOOTER:"InfographicSummaryFooter",TABLE_BACKGROUND:"TableBackground",TABLE_FOREGROUND:"TableForeground",TABLE_BACKGROUND_FLOATING_PANELS:"BackgroundFloatingPanels",TABLE_FOREGROUND_FLOATING_PANELS:"ForegroundFloatingPanels",TABLE_FLOATING_PANELS:"FloatingPanels"}})},
"esri/dijit/geoenrichment/utils/PortalUtil":function(){define("dojo/_base/lang esri/kernel esri/request ./requests/EveryRequest ./requests/UniversalClient ../ReportPlayer/dataProvider/commands/mapToImage/MapToURLUtil ./CacheUtil ./ProjectionUtil ./UrlUtil".split(" "),function(t,q,l,k,f,e,a,b,d){var c={query:function(g,h,m,p){h=h||{};m=m||"results";p=p||100;var n="number"===typeof h.num?h.num:-1,r=h.num=0>n||h.num>p?p:h.num;h.start=h.start||1;return g(h).then(function(u){var v=u[m],y=u.total-h.start+
1;0<=n&&y>n&&(y=n);y-=r;if(0>=y)return u;h.num=r;for(var A=[];0<y;)h.start+=r,A.push(g.bind(null,t.mixin({},h))),y-=r;return k(A,{stopOnError:!0}).then(function(C){C.forEach(function(E){Array.prototype.push.apply(v,E[m])});return u})})},queryCommon:function(g,h){return c.query(function(m){var p=q.id.findCredential(g)||q.id.credentials[0];return l({url:g,content:t.mixin({f:"json",token:p?p.token:void 0},h,m),handleAs:"json"},{usePost:!0})}).then(function(m){return m.results})},getPortalSelf:function(g){return f.requestPublicFirst(d.combine(g,
"sharing/rest/portals/self"),{})},getDefaultBasemaps:function(g){var h=a.get("PortalUtil.basemaps");h[g]||(h[g]=c.getPortalSelf(g).then(function(m){return f.request(d.combine(g,"sharing/rest/community/groups"),{content:{q:m.useVectorBasemaps?m.vectorBasemapGalleryGroupQuery:m.basemapGalleryGroupQuery,f:"json"},handleAs:"json"}).then(function(p){return(p=p.results[0])?f.request(d.combine(g,"sharing/rest/search"),{content:{q:"group:"+p.id+' AND type:"web map"',num:100,f:"json"},handleAs:"json"}).then(function(n){return n.results}):
null})}));return h[g]},tryConfigureServicesFromAGOLPublic:function(){return c.getPortalSelf("https://www.arcgis.com").then(function(g){if(g=g&&g.helperServices)g.geometry&&b.setGeometryServiceUrl(g.geometry.url),g.printTask&&e.setPrintMapTaskUrl(g.printTask.url)}).otherwise(function(g){console.log(g)})}};return c})},"esri/dijit/geoenrichment/utils/requests/EveryRequest":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(t,q,l){var k=
t(null,{requests:null,results:null,requestCount:0,chunkSize:0,stopOnError:!1,onProgress:null,index:0,completeCount:0,executeCount:0,isExecuting:!1,dfd:null,constructor:function(f,e,a,b,d){this.requests=f;this.results=e;this.requestCount=this.requests.length;this.chunkSize=Math.max(a,0);this.stopOnError=b;this.onProgress=d},execute:function(){this.isExecuting=!0;for(this.dfd=new q;this.tryStartNextRequest(););return this.dfd.promise},tryStartNextRequest:function(){if(!this.isExecuting)return!1;if(this.index==
this.requestCount&&!this.executeCount)return this.isExecuting=!1,this.dfd.resolve(this.results),!1;if(this.index==this.requestCount||this.executeCount==this.chunkSize)return!1;var f=this.requests[this.index++];this.executeCount++;var e=f.request;"function"===typeof e&&(e=e());var a=this,b=!0;l(e,function(d){a.processResult(d,f.key,d instanceof Error,b)},function(d){a.processResult(d,f.key,!0,b)});b=!1;return!0},processResult:function(f,e,a,b){if(this.isExecuting)if(a&&this.stopOnError)this.isExecuting=
!1,this.onProgress&&this.onProgress(1),this.dfd.reject(f);else if(this.results[e]=f,this.completeCount++,this.executeCount--,this.onProgress&&this.onProgress(this.completeCount/this.requestCount),!b)for(;this.tryStartNextRequest(););}});return function(f,e){var a=!1,b=10,d=null;"boolean"===typeof e?a=e:e&&("number"===typeof e.chunkSize&&(b=e.chunkSize),"boolean"===typeof e.stopOnError&&(a=e.stopOnError),"function"===typeof e.onProgress&&(d=e.onProgress));var c=[];if(Array.isArray(f)){var g=[];f.forEach(function(m,
p){c.push({key:p,request:m})})}else for(var h in f)g={},c.push({key:h,request:f[h]});return(new k(c,g,b,a,d)).execute()}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/commands/mapToImage/MapToURLUtil":function(){define("require dojo/_base/declare esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojo/dom-style esri/dijit/geoenrichment/utils/DataUtil esri/dijit/geoenrichment/utils/ImageInfoUtil esri/dijit/geoenrichment/utils/RegExpUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),
function(t,q,l,k,f,e,a,b,d,c){function g(){var E=new l;t("esri/tasks/PrintTask esri/tasks/PrintParameters esri/tasks/PrintTemplate esri/layers/GraphicsLayer ./DotDensityToImageUtil ./LegendToLayerUtil".split(" "),function(F,B,w,z,H,G){m=B;p=w;n=z;r=H;u=G;h=q(F,{returnJson:!1,mapName:null,_execute:function(){this.returnJson&&(this.printGp.submitJob=this.printGp.execute=function(I,L){I="data:application/json;base64,"+a.base64FromJson(I.Web_Map_as_JSON);L([{value:{url:I}}]);return(new l).resolve()});
return this.inherited(arguments)},_getPrintDefinition:function(I,L){var N=this.inherited(arguments);this.returnJson&&this.mapName&&(N.title=this.mapName);console.log(N);return N},_createOperationalLayers:function(I,L){var N=this.inherited(arguments);if(L.__legendLayerId){var O=N.filter(function(R){return R.id===L.__legendLayerId})[0];N.splice(N.indexOf(O),1);N.push(O)}return N},_createFeatureCollection:function(I,L,N,O){var R=this.inherited(arguments);this.returnJson&&R&&("esri.layers.FeatureLayer"===
I.declaredClass||"esri.layers.StreamLayer"===I.declaredClass||"esri.layers.GraphicsLayer"===I.declaredClass)&&R.featureCollection.layers.forEach(function(S){S.layerDefinition.name=I.arcgisProps&&I.arcgisProps.title||I._titleForLegend||I.name||I.id;S.layerDefinition.name=d.decodeXML(S.layerDefinition.name);S.layerDefinition.objectIdField="OBJECTID";S.layerDefinition.fields=[{name:"OBJECTID",type:"esriFieldTypeOID"}];var U={OBJECTID:1},Z=/[^\w]/g,da;S.featureSet.features.forEach(function(X,ea){X.attributes=
X.attributes||{};X.attributes.OBJECTID=ea+1+"";X.attributes.__nameField||(X.attributes.Name=d.decodeXML(X.attributes.Name||S.layerDefinition.name),da="Name");ea=X.attributes.__fieldAliases;for(var Q in X.attributes)if(0!==Q.indexOf("__")){var W=Q,V=X.attributes[Q];"string"===typeof V&&(V=d.decodeXML(V));var fa=ea&&ea[Q];(fa=fa&&fa.replace(Z,"_"))&&void 0===X.attributes[fa]&&(X.attributes[fa]=V,W=fa);X.attributes.__nameField===Q&&(da=W);U[Q]||(U[Q]=1,S.layerDefinition.fields.push({name:W,type:"string"===
typeof V?"esriFieldTypeString":"esriFieldTypeDouble"}))}});S.layerDefinition.displayField=da});return R},_convertSvgSymbol:function(I){return I}});E.resolve()});return E.promise}var h,m,p,n,r,u,v,y={setPrintMapTaskUrl:function(E){v=E;c.registerCORS(E)},mapToURL:function(E,F,B,w){var z=y._getUrlForMap(E);if(z)return z;z=g().then(function(){return y._replaceDotDensityLayersWithPictureMarkers(E).then(function(H){return k(F&&u.legendToGraphicsLayer(F,E,B),function(G){G&&E.addLayer(G);return k(y._runPrintTask(E,
B,G,w),function(I){G&&E.removeLayer(G);y._rollbackReplacing(E,H);var L=new l;setTimeout(function(){L.resolve(I.url)},100);return L.promise})})})});y._putUrlToCache(E,z);return z},_replaceDotDensityLayersWithPictureMarkers:function(E){var F=[];for(i=0;i<E.graphicsLayerIds.length;i++)layer=E.getLayer(E.graphicsLayerIds[i]),layer.loaded&&layer.visible&&r.isDotDensity(layer)&&F.push(y._createGraphicsLayerFromDotDensityLayer(i,layer,E));return f(F)},_createGraphicsLayerFromDotDensityLayer:function(E,F,
B){return r.createPictureMarkersFromDotDensityLayer(F,B.extent,B).then(function(w){if(!w)return null;var z=new n;w.map(function(H){z.add(H)});B.addLayer(z,E);F.visible=!1;return{addedLayer:z,hiddenLayer:F}}).otherwise(function(w){console.log(w);return null})},_runPrintTask:function(E,F,B,w){function z(){var H=new h(v);H.returnJson=w&&w.replaceWithJson;H.mapName=w&&w.mapName;var G=new m;G.map=E;var I=new p;I.exportOptions={width:3.125*e.get(F,"width"),height:3.125*e.get(F,"height"),dpi:300};I.format=
"png32";I.showAttribution=!1;I.forceFeatureAttributes=!0;I.__legendLayerId=B&&B.id;G.template=I;return H.execute(G)}return k(z(),function(H){return H},function(H){console.log(H);return k(z(),function(G){return G},function(G){console.log(G);return z()})})},_rollbackReplacing:function(E,F){F.forEach(function(B){B&&B.addedLayer&&E.removeLayer(B.addedLayer);B&&B.hiddenLayer&&(B.hiddenLayer.visible=!0)})},urlToSrc:function(E,F){return F&&F.saveImagesAsDataUrl?b.getRemoteImageDataUrl(E,{sizeLimit:1500}):
E}},A,C=0;y.enableCaching=function(){A={}};y.clearCaching=function(){A=null};y._putUrlToCache=function(E,F){A&&F&&(E.__mapToImageUtilKey=C++,A[E.__mapToImageUtilKey]=F)};y._getUrlForMap=function(E){return A&&A[E.__mapToImageUtilKey]};return y})},"esri/dijit/geoenrichment/utils/ImageInfoUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/when","./CacheUtil","./ImageUtil","./UrlUtil"],function(t,q,l,k,f){var e=/^data:/i,a={getImageInfo:function(b,d,c){var g=c&&c.sizeLimit||1E5,h=l.get("ImageInfoUtil"),
m=b+(c&&c.crossOrigin||"");h[m]||(h[m]=k.imageFromUrl(b,c).then(function(p){var n=k.imageToDataURL(p),r={dataUrl:n,contentType:k.getContentType(n),width:p.width,height:p.height};setTimeout(function(){h[m]=r});return r}));return q(h[m],function(p){p=t.mixin({},p);d&&(p.filename=d&&d.replace(/\.\w+$/,".png").toLowerCase());return function(n){return q(a._processDataUrl(n,g),function(r){if(r&&r.dataUrl){var u=t.mixin({},n);u.dataUrl=r.dataUrl;u.width*=r.factor;u.height*=r.factor;return q(u)}return q(n)})}(p)})},
ensureDataUrlForRemoveImage:function(b,d){return!b||e.test(b)?b:a.getRemoteImageDataUrl(b,d)},getRemoteImageDataUrl:function(b,d){function c(p,n){return a.getImageInfo(p?m+"?"+b:b,null,{crossOrigin:n}).then(function(r){return q(a._processDataUrl(r,h),function(u){return u&&u.dataUrl||u})})}function g(){console.log("Failed to get data for URL: "+b);return b}if(!b)return b;var h=d&&d.sizeLimit||1E5,m=f.getProxyUrl();return c(!1,"anonymous").otherwise(function(){return c(!1,null)}).otherwise(function(){return m?
c(!0,"anonymous"):g()}).otherwise(function(){return c(!0,null)}).otherwise(g)},_processDataUrl:function(b,d){var c=Math.max(b.width,b.height);if(c<=d)return b.dataUrl;var g=d/c;return q(k.scaleImage(b.dataUrl,{factor:g}),function(h){return{dataUrl:h,factor:g}})}};return a})},"esri/dijit/geoenrichment/utils/ProjectionUtil":function(){define("esri/dijit/geoenrichment/Deferred esri/SpatialReference esri/geometry/jsonUtils esri/dijit/geoenrichment/utils/CoordinateUtil esri/dijit/geoenrichment/utils/PolygonUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/requests/EveryRequest".split(" "),
function(t,q,l,k,f,e,a,b){function d(u){return u&&u.spatialReference||u instanceof q&&u||u&&new q(u)||new q(k.WEB_MERCATOR_WKID)}function c(u,v){var y=[];try{for(var A=0;A<u.length;A++)y.push(k.toSpatialReference(u[A],v))}catch(C){console.log(C)}return(new t).resolve(y)}function g(u,v){function y(z){F.push(function(){return h(E,z,C,v)})}var A=u[0],C=l.getJsonType(A),E={outSR:v.wkid||v.toJson(),inSR:A.spatialReference.wkid||A.spatialReference.toJson()},F=[],B=0,w=[];1==u.length?w.push(A):u.forEach(function(z){var H=
f.getNumberOfPoints(z);B+=H;if(1E4<B){var G=[];w.length?(G.push(z),B=H):(w.push(z),B=0);y(w);w=G}else w.push(z)});w.length&&y(w);return b(F,{stopOnError:!0}).then(function(z){for(var H=z[0],G=1;G<z.length;G++)H=H.concat(z[G]);return H},function(z){console.log(z);return[]})}function h(u,v,y,A){u.geometries=m(v);return r("project",u).then(function(C){return p(C.geometries,y,A)})}function m(u){var v=u.map(function(y){y=y.toJson();delete y.spatialReference;return y});return{geometryType:l.getJsonType(u[0]),
geometries:v}}function p(u,v,y){var A=l.getGeometryType(v),C=y.toJson();return u.map(function(E){E.spatialReference=C;return new A(E)})}var n={},r;n.setGeometryServiceUrl=function(u){e.registerCORS(u);r=function(v,y){return a.requestPublicFirst({url:u,urlSuffix:v},{content:y})}};n.setGeometryRequest=function(u){r=u};n.getSpatialReference=d;n.projectGeometries=function(u,v){var y=d(v);v=Array.isArray(u)?u:[u];if(!v.length)return(new t).resolve(u);var A={},C=v.slice(),E=0;v=v.filter(function(F,B){if(F.spatialReference&&
F.spatialReference.wkid!==y.wkid)return A[B]=E++,!0});return v.length?(k.testSpatialReferenceWKID(y)&&k.testSpatialReferenceWKID(v[0].spatialReference)?c(v,y):g(v,y)).then(function(F){C.forEach(function(B,w){void 0!==A[w]&&(C[w]=F[A[w]])});return Array.isArray(u)?C:C[0]}):(new t).resolve(u)};n.unionGeometries=function(u){var v=d(u[0].spatialReference);u={sr:v.wkid||v.toJson(),geometries:m(u)};return r("union",u).then(function(y){return p([y.geometry],y.geometryType,v)[0]})};n.geometriesToJson=m;n.geometriesFromJson=
p;return n})},"esri/dijit/geoenrichment/utils/PolygonUtil":function(){define([],function(){var t={getNumberOfPoints:function(q){if(!q)return 0;Array.isArray(q)||(q=[q]);var l=0;q.forEach(function(k){l+=t.getGeometryPointCount(k.geometry||k)});return l},getGeometryPointCount:function(q){if(!q)return 0;var l=0,k=q.rings||q.paths;!k&&q.points&&(k=[q.points]);k?k.forEach(function(f){l+=f&&f.length||0}):l+="x"in q?1:2;return l}};return t})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/_ServerSerializationSupport":function(){define("dojo/_base/declare esri/dijit/geoenrichment/when esri/dijit/geoenrichment/utils/ImageUtil ./supportClasses/ReportDataProcessor ./supportClasses/tasks/parsers/DataXMLParser ./supportClasses/areas/AnalysisAreaUtil ./supportClasses/areas/AnalysisAreaJsonUtil ./supportClasses/areas/AreasPreprocessor ./supportClasses/GEUtil ../core/supportClasses/ReportTemplateTypes ../core/conversion/PortalToEditorConverter ../core/supportClasses/map/WebMapJsonUtil ../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil ./supportClasses/attachments/AttachmentsStoreSerializer ../core/supportClasses/templateJsonUtils/TemplateJsonSerializer ../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../core/conversion/portalToEditorUtils/metadata/MetadataFromDataBuilder ../countryConfig".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p,n,r,u,v){return t(null,{reportDataToServerData:function(y){return null},reportDataFromServerData:function(y,A){function C(N){F.some(function(O){return"metadata.xml"===O.name})||F.push({name:"metadata.xml",data:u.recoverMetadataFromAreaData(I.areaData,N)})}function E(N){y.sites=[];var O={},R=1;I.areaData.forEach(function(S){S=S.headers&&S.headers.data||{};var U=S.SITE_NAME||S.STORE_NAME,Z=S.STORE_ID||"unclassified."+R++;"number"!==typeof O[Z]&&(O[Z]=y.sites.length,
y.sites.push({locationName:U,name:null,shortName:null,description:null,address:S.STORE_ADDR,latitude:S.STORE_LAT,longitude:S.STORE_LONG,areas:[]}));y.sites[O[Z]].areas.push({locationName:U,name:S.AREA_DESC?U+" ("+S.AREA_DESC+")":U,shortName:S.AREA_DESC,description:S.AREA_DESC2,address:S.STORE_ADDR,latitude:S.STORE_LAT,longitude:S.STORE_LONG,feature:{attributes:{STORE_ID:S.STORE_ID,AREA_ID:S.AREA_ID}}})});y.sites.forEach(function(S){var U=!1;S.shortName=S.areas.map(function(da){return U=!!da.shortName,
da.shortName}).join(", ");U&&(S.name=S.locationName+" ("+S.shortName+")");var Z=S.areas.map(function(da){return da.description});S.description=1<Z.length?Z[0]===Z[1]?Z[0]:Z.join(", "):Z[0]||""});I.reportInfo.sites&&I.reportInfo.sites.forEach(function(S,U){if(U=y.sites[U])U.attributes=S.attributes,U.notes=S.notes,U.images=S.images,U.images&&U.images.forEach(function(Z){function da(X){return(X=N[X])&&l.base64DataToDataURL(X,"image/png")}Z.url=da(Z.url);Z.thumbnail=da(Z.thumbnail)})})}v.reset();var F=
y.reportItem.resources,B;if(!Array.isArray(F)){var w=F;F=[];for(var z in w)F.push({name:z,data:w[z]})}F.forEach(function(N){"theme.css"===N.name&&(N.name="theme.css.txt")});var H=F.filter(function(N){return"report.xml"===N.name})[0],G=F.filter(function(N){return"data.xml"===N.name})[0],I;(function(){var N=/.*\.(png|jpg|jpeg)$/i,O=/(.*\.(json)$)|(^maps\/.*\.(png)$)/i,R={},S={};F.forEach(function(X){N.test(X.name)&&(R[X.name]=X.data,"logo.png"===X.name&&(B=l.base64DataToDataURL(X.data,"image/png")));
O.test(X.name)&&(-1!==X.data.indexOf("operationalLayers")?S[X.name]=h.processWebMapJson(X.name,X.data):S[X.name]=X.data)});var U={},Z=H.data.match(/<section[^<>]*query=("|').+?("|').*?>/g);Z&&Z.forEach(function(X){X=X.replace(/.*?query=("|')/,"");X=X.replace(/("|').*/,"");U[X]=1});var da={};I=f.parse(G.data,function(X,ea,Q){return(X=S[ea])?da[Q]=X:R[ea]||ea});C({map:da,locator:U});E(R)})();var L=new r;return q(function(N){var O=H.data.indexOf("\x3csection"),R={isGraphicReport:H.data.indexOf("\x3ctable")<
O,isMultiFeature:!1,defaultComparisonZoom:null,type:c.STANDARD,portalJson:{files:F}};return q(g.provideEditorJson(R,{variableProvider:N}),function(){R.templateJson=n.deserialize(R.templateJson);R.isMultiFeature=m.hasMultiFeatureSections(R.templateJson);delete R.portalJson;return R})}(L),function(N){e.parseSites(y);var O=a.areasFromJson(y.analysisAreas),R=y.combinedAreasInfo&&a.combinedAreasInfoFromJson(y.combinedAreasInfo)||{},S=y.attachmentsProvider&&p.getAttachmentsStoreFromJson(y.attachmentsProvider),
U={isMultiFeature:N.isMultiFeature&&1<O.length,reportTitle:null,templateJson:N.templateJson,reportObject:N,fieldData:{specialTradeAreaCalculatorName:null,runReportTaskIDs:null,metadata:{},areaData:[],errors:[],reportInfo:null},analysisAreas:O,combinedAreasInfo:R,reverseAnalysisAreasOnMap:!0,attachmentsStore:S,templateVariableProvider:L,customLogo:B,config:{}};e.populateCombinedAreasInfo(U.combinedAreasInfo,U.analysisAreas);b.provideAreasIndexes(U);d.setGeoenrichmentUrl(null);A&&A.forEach(function(Z){switch(Z){case "Maps":d.addCapability("FormatInfographicsMaps");
break;case "ImageUrls":d.addCapability("FormatInfographicsImageUrls")}});return q(k.applyRunReportAndGetDataResults(I,U)).then(function(){return U})})}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ReportDataProcessor":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred ./tasks/EnrichAreasTask ./tasks/RunReportTask ./data/AreaCalculatorsUtil ./data/VariablesUtil ./CustomReportsManager ./stdGeographies/StdGeographiesModel esri/dijit/geoenrichment/utils/DateUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldLibrary ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../core/supportClasses/templateJsonUtils/query/TemplateJsonQueryUtil ../../core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer ../../core/infographics/utils/InfographicJsonUtil ../../config ../../countryConfig".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p,n,r,u){return{runReportAndGetData:function(v,y){return q([b.getCustomReportByID(v),y]).then(function(A){var C=A[0];A=A[1];return(new f).execute({portalUrl:v.portalUrl,analysisAreas:v.analysisAreas,countryID:v.countryID,hierarchy:v.hierarchy,report:{reportID:C.reportID,portalUrl:C.templateData.getPortalUrl(!0),modified:C.modified,isMultiFeature:C.isMultiFeature},attachmentsStore:A,cacheResult:r.runReportTask.cacheResult}).then(function(E){return{taskIDs:E.taskIDs,
areaData:E.areaData,reportInfo:E.reportInfo}},function(E){v.fieldData.errors.push(E);return(new l).reject(E)})})},runReportFromVariables:function(v){var y={};v.variables.fullNames.forEach(function(A){var C=h.createFieldNameFromSource(A);y[A.substr(A.indexOf(".")+1)]=C});return(new k).enrichAreas({portalUrl:v.portalUrl,analysisAreas:v.analysisAreas,countryID:v.countryID,hierarchy:v.hierarchy,fields:a.convertForEnrich(v.variables),comparisonLevels:v.comparisonLevels||n.getDefaultLevels()}).then(function(A){var C=
v.analysisAreas.map(function(){return{}});e.addEnrichFeatures(A,y,h.DATA_COLLECTIONS_CALCULATOR_NAME,C);return{areaData:C}},function(A){v.fieldData.errors.push(A);return(new l).reject(A)})},applyRunReportAndGetDataResults:function(v,y){if(v&&v.areaData){var A=y.templateJson;y.fieldData.specialTradeAreaCalculatorName=A.metadata&&A.metadata.specialTradeAreaCalculatorName;delete A.metadata;y.fieldData.runReportTaskIDs=v.taskIDs;y.fieldData.areaData=v.areaData;(y.fieldData.reportInfo=v.reportInfo)&&this._populateReportDataFromReportInfo(v.reportInfo,
y);this._reportDataFromAreas(y.analysisAreas,y.fieldData.areaData);this._reportDataFromReport(y.reportObject,y.fieldData,y.combinedAreasInfo);return this._populateReportDataFromAttachmentsStore(y)}},_populateReportDataFromReportInfo:function(v,y){y.reportTitle=y.reportObject.title=y.reportTitle||v.Title||"";v.country&&!u.getCurrentCountry()&&(u.setCountry(v.country),u.setHierarchyID(null));v.stdLevels&&!u.getGeographiesModel()&&u.setGeographiesModel(new d({levels:v.stdLevels}));if(r.updateVariableInfoFromDataXml||
r.isPlayerOnServer){var A=v.variables;m.processTemplateFieldInfos(y.templateJson,function(C){if(C.hasVariable&&C.variableID&&C.templateName){var E=C.templateName.indexOf("."),F=C.templateName.substr(0,E);E=C.templateName.substr(E+1);(F=A[F]&&A[F][E])&&F.alias&&(C.alias=F.alias,C=y.templateVariableProvider.get(C.templateName))&&(C.alias=F.alias,F.vintage&&(C.vintage=F.vintage),F.source&&(C.source=F.source))}})}v=p.collectVariablesStats(y.templateJson);if(v=y.templateVariableProvider.getVariablesDataVintageDescription({usedVariablesCache:v}))y.reportObject.dataVintageDescription=
v},_populateReportDataFromAttachmentsStore:function(v){var y=v.attachmentsStore,A=[];v.analysisAreas.forEach(function(C,E){y.supportsMultipleAreas&&y.setCurrentAnalysisAreaIndex(E);A.push(t(y.getNotes(),function(F){if(F&&F.length){var B={attributes:{}};B.attributes[g.SITENOTES_FIELD_NAME]=F.map(function(w){return w.text}).join("\x3cbr/\x3e\x3cbr/\x3e");F.forEach(function(w,z){B.attributes[g.getSiteNoteFieldNameAt(z+1)]=w.text});(F=v.fieldData.areaData[E])&&e.addFeatureAttributesCalculator(B,F)}}));
A.push(t(y.getAttributes(),function(F){if(!F||!F.length)return null;var B={attributes:{}};F.forEach(function(w){B.attributes[w.name]=w});(F=v.fieldData.areaData[E])&&e.addFeatureAttributesCalculator(B,F)}))});return q(A)},_reportDataFromAreas:function(v,y){v.forEach(function(A,C){if(C=y[C])e.addFeatureAttributesCalculator(A.feature,C),e.addAreaInfoCalculator(A,C)})},_reportDataFromReport:function(v,y,A){var C=y.metadata;v&&!C.Title&&(C.Title=v.title);C.Subtitle=y.reportInfo&&y.reportInfo.Subtitle||
"";C.Source=v.dataVintageDescription||"Esri";C.Date=c.getReportFooterDate();C.Copyright="\u00a9 "+c.getFullYear()+" Esri";C.ProductLabel="";C.ProductUrl="";C.PhoneNumber="";C.TrialUrlText="";v.isMultiFeature&&(C.SITE_NAME=A.locationName||A.name,C.STORE_NAME=A.locationName||A.name,C.AREA_DESC2=A.description||A.name,C.STORE_ADDR=A.address)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/EnrichAreasTask":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all esri/kernel esri/SpatialReference esri/tasks/FeatureSet esri/geometry/Point ../GEUtil ../areas/AnalysisAreaUtil ../attachments/AttributesUtil ../../../core/supportClasses/map/Projector ../../../countryConfig esri/dijit/geoenrichment/utils/CoordinateUtil".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p){function n(r){return(r=r&&f.id.findCredential(r)||f.id.credentials[0])&&r.token}return t(null,{enrichAreas:function(r){var u={};return l(this._analysisAreasToStudyAreas(r.analysisAreas,r.countryID,r.comparisonLevels),function(v){u.studyAreas=v;r.report?u.analysisVariables=[{itemid:r.report.reportID,url:r.report.portalUrl,token:n(r.portalUrl),outFields:["*"]}]:r.fields&&(u.analysisVariables=r.fields);return this._doRunTask(u,r,"enrich")}.bind(this)).then(this._handleFeatureSetsRequest.bind(this))},
createReport:function(r){var u={f:"bin",format:"xml",reportfields:{}};u.report={itemid:r.report.reportID,url:r.report.portalUrl,token:n(r.portalUrl)};return l(this._analysisAreasToStudyAreas(r.analysisAreas,r.countryID,null,r.getAttributes),function(v){u.studyAreas=v;return this._doRunTask(u,r,"createReport")}.bind(this))},_analysisAreasToStudyAreas:function(r,u,v,y){var A=this;v=v&&v.map(function(C){return{layer:C}});return k(r.map(function(C,E){if(C.geographies&&C.geographies.length){var F=A._studyAreaFromGeographies(C.geographies,
u,!0);C.feature&&C.feature.attributes&&(F.attributes=q.mixin({},F.attributes,C.feature.attributes))}else F={attributes:q.mixin({},C.feature.attributes),geometry:C.feature.geometry.toJson()};v&&(F.comparisonLevels=v);return k([A._getStorePointForArea(C),y&&y(C)]).then(function(B){var w=B[0];B=B[1];F.attributes=F.attributes||{};w&&(F.attributes.STORE_LAT=F.attributes.STORE_LAT||w.STORE_LAT,F.attributes.STORE_LONG=F.attributes.STORE_LONG||w.STORE_LONG);F.attributes.STORE_ID=E+"";B&&B.forEach(function(z){F.attributes[z.name]=
g.formatAttributeValueForStudyArea(z)});return F})}))},_getStorePointForArea:function(r){if(r=r.location&&r.location.geometry||r.buffer&&r.buffer.point){r=r instanceof b?r:new b(r);var u=c.geometryToLatLong(r);return u?u:l(h.projectGeometries(r,new e(p.WGS_84_WKID)),function(v){return c.geometryToLatLong(v)})}},createFeatureForGeographies:function(r,u){return this._createFeaturesForGeographies(r,u,!0).then(function(v){return v[0]})},createFeaturesForGeographies:function(r,u){return this._createFeaturesForGeographies(r,
u,!1)},_createFeaturesForGeographies:function(r,u,v){r={returnGeometry:!0,outSR:u.outSR||new e(p.WEB_MERCATOR_WKID),studyAreas:v?[this._studyAreaFromGeographies(r,u.countryID,!0,u.generalizationLevel)]:r.map(function(y){return this._studyAreaFromGeographies([y],u.countryID,!1,u.generalizationLevel)},this),dataCollections:["GlobalIntersect"]};return this._doRunTask(r,u,"enrich").then(this._handleFeatureSetsRequest.bind(this))},_studyAreaFromGeographies:function(r,u,v,y){var A={sourceCountry:u,layer:null,
ids:null},C=null,E=[],F;r.forEach(function(B){if(!B||!B.id)throw Error("Wrong geography.");var w=B.levelId;if(w)if(!C)C=w;else if(v&&C!==w)throw Error("Geographies have different level IDs.");E.push(B.id);B.sourceCountry&&(A.sourceCountry=B.sourceCountry);B.hierarchy&&(A.hierarchy=B.hierarchy);B.attributes&&(F=q.mixin(F||{},B.attributes))});A.layer=C;A.ids=v?[E.join(",")]:E;A.attributes=F;A.generalizationlevel=y;return A},createFeaturesForBuffer:function(r,u){u=u||{};var v={bufferUnits:r.units,bufferRadii:r.radii||
[r.radius],areaType:r.areaType||"RingBuffer"};"NetworkServiceArea"===v.areaType&&(v.travelMode=r.travelMode,v.networkOptions=r.networkOptions);r=r.point||r.polyline;v={returnGeometry:!0,outSR:u.outSR||r.spatialReference||new e(p.WEB_MERCATOR_WKID),dataCollections:["GlobalIntersect"],studyAreasOptions:v,studyAreas:[{geometry:r.toJson?r.toJson():r}]};return this._doRunTask(v,u,"enrich").then(this._handleFeatureSetsRequest.bind(this))},createFeaturesForBuffers:function(r,u){function v(C){var E=C.point||
C.polyline;return JSON.stringify(E.toJson?E.toJson():E)+";"+C.units+";"+C.areaType+";"+C.travelMode+";"+JSON.stringify(C.networkOptions)}var y={},A=[];r.forEach(function(C){var E=v(C),F=y[E],B=!1;if(F){var w=C.radii||[C.radius];F.radii.some(function(z){return-1!==w.indexOf(z)})&&(F=null,B=!0)}F||(F=q.clone(C),B||(y[E]=F),delete F.radius,F.radii=[],A.push(F));C.radii?F.radii=F.radii.concat(C.radii):F.radii.push(C.radius)});return k(A.map(function(C){return this.createFeaturesForBuffer(C,u)},this)).then(function(C){var E=
[];C.forEach(function(F){E=E.concat(F)});return E})},_doRunTask:function(r,u,v){r=q.mixin({useData:{sourceCountry:u.countryID,hierarchy:u.hierarchy||m.getHierarchyID()},forStorage:!1},r);return d[v](r)},_handleFeatureSetsRequest:function(r){return(new a(r[0])).features}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttributesUtil":function(){define(["dojo/_base/lang","esri/layers/CodedValueDomain","esri/dijit/geoenrichment/utils/DateUtil","esri/dijit/geoenrichment/utils/ObjectUtil"],
function(t,q,l,k){var f={composeAttributesFromFieldInfos:function(e,a){return e&&e.filter(function(b){return b.visible}).map(function(b){var d=b.fieldName,c=b.label,g=b.format&&b.format.places,h=b.format&&b.format.digitSeparator,m=b.format&&b.format.dateFormat,p=a[b.fieldName];b=(b=b.format)&&b.dateFormat?"esriFieldTypeDate":b&&void 0!==b.places?0<b.places?"esriFieldTypeDouble":"esriFieldTypeInteger":"esriFieldTypeString";return{name:d,alias:c,places:g,digitSeparator:h,dateFormat:m,value:p,type:b,
domain:null,length:void 0}})},formatAttributeValue:function(e,a){a=a||{};var b=a.hasOwnProperty("unavailableDataValue")?a.unavailableDataValue:"";if(!e||null===e.value||void 0===e.value)return b;if(!a.skipFormattedValue&&e.formattedValue&&e.formattedValue!==b)return e.formattedValue;var d=e.domain&&"codedValue"===e.domain.type?new q(e.domain):null;d?(a=d.getName(e.value))||(a=e.value+""):"esriFieldTypeString"===e.type?a=e.value:"esriFieldTypeDate"===e.type?a=l.formatDateShort(e.value):(a=a.format,
a=k.formatNumber(e.value,{places:a&&void 0!==a.decimals?a.decimals:e.places,noSeparator:a&&void 0!==a.useThousandsSeparator?!a.useThousandsSeparator:!1===e.digitSeparator,preserveTrailingZeroes:!0}));return null===a||void 0===a?b:a},formatAttributeValueForStudyArea:function(e){var a;e&&null!==e.value&&void 0!==e.value||(a=!0);a||(a=e.domain&&"codedValue"===e.domain.type||"esriFieldTypeDate"===e.type);return a?f.formatAttributeValue(e):e.value},getAttributeTypeForStudyArea:function(e){return"esriFieldTypeDate"===
e.type?"esriFieldTypeString":e.type},attributeToJson:function(e){return{name:e.name,alias:e.alias,type:e.type,value:e.value,domain:e.domain&&(e.domain.toJson?e.domain.toJson():t.clone(e.domain)),places:e.places,digitSeparator:e.digitSeparator,dateFormat:e.dateFormat,length:e.length}},attributeFromJson:function(e){return{name:e.name,alias:e.alias,type:e.type,value:e.value,domain:e.domain,places:e.places,digitSeparator:e.digitSeparator,dateFormat:e.dateFormat,length:e.length}}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/Projector":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/utils/ProjectionUtil"],function(t,q,l,k,f){function e(a,b){return f.projectGeometries(a,b)}t=t(null,{_pendingInfos:null,_isBusy:!1,constructor:function(){this._pendingInfos=[]},addForProjection:function(a,b){if(this._isBusy)throw Error("Can't interrupt the current projection process.");a=a&&a.geometry||a;var d=new q;this._pendingInfos.push({geom:a,mapOrSR:b,dfd:d,index:this._pendingInfos.length});
return d.promise},project:function(){function a(p){var n=c[p];return l(e(n.geoms,n.mapOrSR),function(r){r.forEach(function(u,v){v=n.indexMap[v];h[v]=u;d[v].resolve(u)})})}var b=this;if(this._isBusy)throw Error("Can't interrupt the current projection process.");this._isBusy=!0;var d=[],c={};this._pendingInfos.forEach(function(p){d.push(p.dfd);var n=p.geom.type+";"+p.geom.spatialReference.wkid+";"+f.getSpatialReference(p.mapOrSR).wkid;n=c[n]=c[n]||{geoms:[],indexMap:{},mapOrSR:p.mapOrSR};n.geoms.push(p.geom);
n.indexMap[n.geoms.length-1]=p.index});this._pendingInfos.length=0;var g=[],h=[],m;for(m in c)g.push(a(m));return k(g).then(function(){b._isBusy=!1;return h})}});t.needProject=function(a,b){a=a&&a.geometry||a;return a.spatialReference&&a.spatialReference.wkid!==f.getSpatialReference(b).wkid};t.projectGeometries=e;return t})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/RunReportTask":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./parsers/DataXMLParser ./EnrichAreasTask ../areas/AnalysisAreaJsonUtil esri/dijit/geoenrichment/utils/ArrayUtil esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h){var m={_getCache:function(){return c.get("CreateReportResultCache")},_buildKey:function(n){return[n.countryID,n.hierarchy,JSON.stringify(b.areasToJson(n.analysisAreas,{excludeInfoTemplate:!0})),n.report.reportID,n.report.portalUrl,n.report.modified].join("_")},getCopy:function(n){n=this._buildKey(n);return(n=this._getCache()[n])&&q.clone(n)},copyAndPut:function(n,r){n=this._buildKey(n);this._getCache()[n]=r&&q.clone(r)},getResults:function(){var n=[],r;for(r in this._getCache())n.push(this._getCache()[r]);
return n}},p={execute:function(n){var r=n.cacheResult&&m.getCopy(n);if(r)return f(r);r=d.splitArrayToBunches(n.analysisAreas,10);var u;return l(r.map(function(v){function y(){var A=q.mixin({},n,{analysisAreas:v});A.getAttributes=function(C){if(!n.attachmentsStore)return null;if(!n.attachmentsStore.supportsMultipleAreas&&u)return u;n.attachmentsStore.supportsMultipleAreas&&n.attachmentsStore.setCurrentAnalysisAreaIndex(n.analysisAreas.indexOf(C));return f(n.attachmentsStore.getAttributes(),function(E){u=
u||E;return E})};return(new a).createReport(A).then(function(C){var E=C&&C.taskID;C=C&&C.result;try{h.emulateErrors.createReportError&&(C={error:{message:"Error test: something crashed on the server!"}});if(C&&"object"===typeof C)var F=C.error;if(!F&&"string"===typeof C&&-1!==C.indexOf("{"))try{var B=JSON.parse(C);F=B&&B.error}catch(z){}if(F)if(g.runReportTask.ignoreErrors)C=[];else return(new k).reject(F);var w=e.parse(C);return{taskID:E,areaData:w.areaData,reportInfo:w.reportInfo,originalXML:C,
error:F}}catch(z){return(new k).reject(z)}})}return f(y(),function(A){return!A||A.error?g.runReportTask.secondAttempt?y():A:A},function(A){return g.runReportTask.secondAttempt?y():(new k).reject(A)})})).then(function(v){var y={taskIDs:[],areaData:[],reportInfo:null,originalXMLs:[],errors:[]};v.forEach(function(A){y.taskIDs.push(A.taskID);y.originalXMLs.push(A.originalXML);A.error&&y.errors.push(A.error);y.areaData=y.areaData.concat(A.areaData);y.reportInfo=A.reportInfo});n.cacheResult&&!y.errors.length&&
m.copyAndPut(n,y);return y})}};t=t(null,{execute:function(n){console.log("Creating a new report...");return p.execute(n)}});t.CreateReportResultCache=m;return t})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/DataXMLParser":function(){define("esri/units esri/dijit/geoenrichment/utils/FieldUtil esri/dijit/geoenrichment/utils/JsonXmlConverter ../../data/AreaDataUtil ../../../../core/supportClasses/DocumentOptions ./AttrUtil esri/dijit/geoenrichment/ReportPlayer/config esri/dijit/geoenrichment/ReportPlayer/_devConfig".split(" "),
function(t,q,l,k,f,e,a,b){function d(p){return p.innerHTML?p.innerHTML:p.tags&&p.tags.length&&p.tags[0].text||""}function c(p){var n={Title:null,Subtitle:null,country:null,hierarchyId:null,exportSettings:null};p.tags&&p.tags.forEach(function(r){"ReportTitle"===r.name&&(n.Title=d(r));"ReportTitle2"===r.name&&(n.Subtitle=d(r));if("CurrencyFormat"===r.name){r=d(r);var u=r.split(";")[0].replace("0","").trim();n.country={id:null,currencySymbol:u,currencyFormat:r}}else if("ReportLayout"===r.name){var v=
n.exportSettings={};r.tags&&r.tags.forEach(function(y){if("Options"===y.name&&y.attributes)v.addHeader=!!y.attributes.header,v.addDataSource=!!y.attributes.dataSource,v.addFooter=!!y.attributes.footer;else if("Page"===y.name&&y.attributes){v.pageSettings={};var A=y.attributes;if(A.width&&A.height&&A.units){y=Number(A.width);var C=Number(A.height);if(A=A.units===t.MILLIMETERS?"mm":A.units===t.CENTIMETERS?"cm":A.units===t.INCHES?"in":A.units===t.POINTS?"pt":null)v.pageSettings.pagesize=f.combineCustomSizeString(y,
C,A)}else A.size&&A.orientation&&(v.pageSettings.pagesize=A.size.toLowerCase(),v.pageSettings.orientation=A.orientation.toLowerCase())}})}});n.exportSettings&&n.Subtitle&&(n.exportSettings.reportSubtitle=n.Subtitle);return n}function g(p){function n(y){y.tags&&y.tags.forEach(function(A,C){C=A.attributes&&A.attributes.STORE_ID||C+"";var E=v[C];E||(E={attributes:null,notes:null,images:null},v[C]=E,u.sites.push(E));A.tags&&A.tags.forEach(function(F){"Attributes"===F.name&&F.tags&&(E.attributes=F.tags.map(function(B){return{name:B.attributes.Name,
alias:B.attributes.Alias,type:B.attributes.Type,value:q.isNumericField(B.attributes.Type)?Number(B.attributes.Value):B.attributes.Value}}));"Notes"===F.name&&F.tags&&(E.notes=F.tags&&F.tags.map(function(B){return{text:B.attributes.Text}}));"Images"===F.name&&F.tags&&(E.images=F.tags&&F.tags.map(function(B){return{url:B.attributes.Source,thumbnail:B.attributes.Thumbnail,description:B.attributes.Description,imageViewType:null}}))})})}function r(y){var A;u.stdLevels=y.tags&&y.tags.map(function(C,E){A=
A||C.attributes.Id.substr(0,C.attributes.Id.indexOf("."));return{id:C.attributes.Id,name:C.attributes.Caption,isWholeCountry:C.attributes.IsWholeCountry||0===E}});"US"===A&&(u.countrId="US");"CAN"===A&&(u.countrId="CA")}var u={sites:[],stdLevels:null,countrId:null},v={};p.tags&&p.tags.forEach(function(y){"StudyAreas"===y.name?n(y):"StandardGeographyLevels"===y.name&&r(y)});return u}function h(p,n){function r(C){if(C=function(F){var B={},w,z;F.tags.forEach(function(I){var L=d(I),N=L,O=A[F.name][I.name];
"string"===(O&&O.type)?L=String(L):(L=Number(L),isNaN(L)&&(L=N),b.emulateErrors.createReportNaN&&(L=NaN),b.emulateErrors.createReportNull&&(L=null));n&&(L=n(I.name,L,F.name));void 0===B[I.name]&&(B[I.name]=L);"AREA_ID"===I.name&&(H=L);"IDFNDFIELD"===I.name&&(w=L);"STORE_ID"===I.name&&(z=L)});var H=H||w;if(!H&&!z)return null;var G;!H&&z&&(G=Number(z));H&&void 0===v[H]&&(v[H]=y++);e.cleanUpAttrs(B,a.isPlayerOnServer?{STORE_ID:1,AREA_ID:1}:null);return{name:F.name,attrs:B,areaIndex:void 0!==G?G:v[H]}}(C)){var E=
u[C.areaIndex]=u[C.areaIndex]||{};E[C.name]?E[C.name].comparisonLevels.push(C.attrs):E[C.name]=k.createCalculator(C.attrs)}}var u=[],v={},y=0,A;p.tags[0].tags.forEach(function(C){"xs:schema"===C.name?A=m.parseSchema(C):r(C)});return{areaData:u,schemaParseResult:A}}var m={parseSchema:function(p){var n={};p.tags.forEach(function(r){"xs:element"===r.name&&r.attributes&&"ReportData"===r.attributes.name&&l.queryJson(r,"xs:element").filter(function(u){return!!u.tags}).forEach(function(u){var v=n[u.attributes.name]=
{};l.queryJson(u,"xs:element").forEach(function(y){v[y.attributes.name]={type:"xs:string"===y.attributes.type?"string":"number",alias:y.attributes["msdata:Caption"]||"",vintage:y.attributes["msdata:Vintage"]||"",source:y.attributes["msdata:Source"]||""}})})});return n}};return{parse:function(p,n){return this._parseDataXmlJson(l.parseXml(p,{saveInnerHTML:!0}),n)},_parseDataXmlJson:function(p,n){if(!p||!p.tags||2>p.tags.length)return[];var r,u,v,y;p.tags.forEach(function(A){"ReportInfo"===A.name?r=
c(A):"ReportArea"===A.name?u=g(A):"ReportData"===A.name&&(A=h(A,n),y=A.areaData,v=A.schemaParseResult)});b.logData&&(console.log("DataXMLPareser.js \x3d\x3e areaData:"),console.log(y));u&&(r.country.id=u.countrId,r.sites=u.sites,r.stdLevels=u.stdLevels);r.variables=v;return{reportInfo:r,areaData:y}}}})},"esri/dijit/geoenrichment/utils/JsonXmlConverter":function(){define(["dojo/_base/declare","./RegExpUtil"],function(t,q){function l(d,c,g,h){return b(g,h)+"\x3c"+d+(c?a(c):"")+"\x3e"+(h?"\n":"")}function k(d,
c,g){return b(c,g)+"\x3c/"+d+"\x3e"+(g?"\n":"")}function f(d,c,g,h){return b(g,h)+"\x3c"+d+(c?a(c):"")+" /\x3e"+(h?"\n":"")}function e(d,c,g){d=q.encodeXML(d,!1);return b(c,g)+d+(g?"\n":"")}function a(d){var c="",g;for(g in d){var h=d[g];Array.isArray(h)&&(h=h.join(";"));void 0===h||null===h||""===h||"number"===typeof h&&isNaN(h)||(c+=" "+g+'\x3d"'+q.encodeXML(h,!0)+'"')}return c}function b(d,c){if(!c)return"";c="";for(var g=0;g<d;g++)c+="     ";return c}return t(null,{parseJson:function(d,c){function g(p,
n){p.text||"#text"===p.name?m+=e(p.text,n,h):p.name&&(p.tags&&p.tags.length?(m+=l(p.name,p.attributes,n,h),p.tags&&p.tags.forEach(function(r){g(r,n+1)}),m+=k(p.name,n,h)):m+=f(p.name,p.attributes,n,h))}var h=c&&c.prettify,m="";c&&c.addDocumentOptions&&(m+='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e');g(d,0);return m=decodeURIComponent(encodeURIComponent(m).replace("%19",""))},parseXml:function(d,c){function g(u,v){u.name=v.nodeName;c.saveInnerHTML&&(u.innerHTML=v.innerHTML);if(v.attributes&&
v.attributes.length){u.attributes={};for(var y=0;y<v.attributes.length;y++){var A=v.attributes[y],C=A.value;if(!0===C||"true"===C)C=!0;else if(!1===C||"false"===C)C=!1;else if(h&&C){var E=Number(C);isNaN(E)||(C=E)}u.attributes[A.nodeName]=C}}if(v.childNodes&&v.childNodes.length)for(u.tags=[],y=0;y<v.childNodes.length;y++){if(C=A=v.childNodes[y],"#text"!==C.nodeName||(m?C.nodeValue.trim():C.nodeValue))C={},u.tags.push(C),g(C,A)}else"#text"===v.nodeName&&(delete u.name,u.text=q.decodeXML(v.nodeValue))}
c=c||{};var h=c.parseNumbers,m=c.ignoreWhiteSpacedTextNodes;m=void 0===m?!0:m;var p={};d=(new DOMParser).parseFromString(d,"text/xml").childNodes;for(var n=0;n<d.length;n++)if(1===d[n].nodeType){var r=d[n];break}r&&g(p,r);return p},queryTopJson:function(d,c){return this.queryJson(d,c,!0)},queryJson:function(d,c,g){function h(p,n){p.tags&&p.tags.forEach(function(r){(c.test?c.test(r.name):r.name===c)&&m.push(r);g&&0===n||h(r,n+1)})}var m=[];h(d,0);return m},traverseJson:function(d,c){function g(m){h||
(!0===c(m)?h=!0:m.tags&&m.tags.forEach(g))}var h=!1;g(d)},getInnerHTML:function(d){return d.innerHTML?d.innerHTML.trim():this.parseJson(d).replace(/^<[^<]*>/,"").replace(/<\/[^<]*>$/,"").trim()},_IS_RICH_RE:/<.+>.*<\/.+>|<br\s*\/>|<\/br>/,_UNRICH_RE:/<.*?>/g,isRichText:function(d){return(d=String(d))&&this._IS_RICH_RE.test(d)},unrichHTML:function(d){if(!d)return"";d=q.decodeXML(String(d).trim()).replace(this._UNRICH_RE,"");0===d.indexOf("\x3c")&&-1!==d.indexOf("\x3e")&&(d="");return d}})()})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/PageUnitsConverter","../themes/ThemeLibrary"],function(t,q,l){var k={},f={a:[[841,1189],[594,841],[420,594],[297,420],[210,297],[148,210],[105,148],[74,105],[52,74],[37,52],[26,37]],b:[[1E3,1414],[707,1E3],[500,707],[353,500],[250,353],[176,250],[125,176],[88,125],[62,88],[44,62],[31,44]],c:[[917,1297],[648,917],[458,648],[324,458],[229,324],[162,229],[114,162],[81,114],[57,81],[40,57],[28,40]],letter:[216,279],legal:[216,356],tabloid:[279,432],ledger:[432,279]};k.PAPER_SIZES=
f;var e={};"a3 a4 a5 b4 b5 c4 c5 letter legal tabloid ledger".split(" ").forEach(function(a){var b=2===a.length?f[a[0]][a[1]]:f[a];e[a]={portrait:{w:q.mmToIn(b[0]),h:q.mmToIn(b[1])},landscape:{w:q.mmToIn(b[1]),h:q.mmToIn(b[0])}}});k.SIZE_TYPE_TO_DIM_HASH=e;k.hasStandardSize=function(a){return e[a]};k.getSupportedPageSizes=function(){var a=[],b;for(b in f)1===b.length?f[b].forEach(function(d,c){a.push(b+c)}):a.push(b);return a};k.getPageDim=function(a,b,d){e[a]?a=e[a][b||"portrait"]:(a=a.split("x"),
a={w:q.ptToIn(Number(a[0])),h:q.ptToIn(Number(a[1]))});d&&(a=t.clone(a),q.roundNDigitsObj(a,d.places));return a};k.getPageBox=function(a){if(!a)return null;var b=k.getPageDim(a.pagesize,a.orientation),d=q.inToPx(b.w);b=q.inToPx(b.h);return{w:d,h:b,contentW:d-(a.left||0)-(a.right||0),contentH:b-(a.top||0)-(a.bottom||0)}};k.combineCustomSizeString=function(a,b,d){return q.convert(a,d,"pt",5)+"x"+q.convert(b,d,"pt",5)};k.getDefaultDocumentOptions=function(a){return t.mixin({pagesize:"letter",orientation:"portrait",
left:21.07,right:22.6,top:19.2,bottom:9.6,align:"left",lineSpacing:1.12,fontSize:10,fontFamily:l.DEFAULT_FONT_FAMILY_CLASSIC},a)};k.getDefaultDocumentOptionsGraphicReport=function(a){return t.mixin({pagesize:"letter",orientation:"landscape",left:21.07,right:22.6,top:19.2,bottom:9.6,align:"left",fontSize:10,fontFamily:l.DEFAULT_FONT_FAMILY_GRAPHIC},a)};k.getClosestStandrdSizes=function(a,b){function d(m){var p=m.w/c.w;m=m.h/c.h;return Math.max(1-(1<p?1/p:p),1-(1<m?1/m:m))}b=void 0===b?.4:b;var c=k.getPageDim(a.pagesize,
a.orientation);a=[];for(var g in e){var h=e[g];a.push({pagesize:g,orientation:"portrait",score:d(h.portrait)});a.push({pagesize:g,orientation:"landscape",score:d(h.landscape)})}a=a.filter(function(m){return m.score<=b});a.sort(function(m,p){return m.score-p.score});return a};k.tryGetStandardPageSize=function(a,b){function d(n){var r="portrait"===b?1:0;return n["portrait"===b?0:1]===g&&n[r]===h}if(k.SIZE_TYPE_TO_DIM_HASH[a])return a;var c=a.split("x"),g=q.convert(Number(c[0]),"pt","mm",0),h=q.convert(Number(c[1]),
"pt","mm",0),m;for(m in k.PAPER_SIZES)if(c=k.PAPER_SIZES[m],1===m.length){if(c.some(function(n,r){if(d(n))return p=m+r,!0}))break}else if(d(c)){var p=m;break}return p||a};return k})},"esri/dijit/geoenrichment/utils/PageUnitsConverter":function(){define(["dojo/_base/lang"],function(t){function q(f,e,a){a&&(f=t.mixin({},f));for(var b in f){var d=f[b];null!==d&&""!==d&&"boolean"!=typeof d&&("object"==typeof d?f[b]=q(d,e,a):(d=Number(d),isNaN(d)||(f[b]=e(d))))}return f}var l={},k="px pt mm cm in twip".split(" ");
k.forEach(function(f){k.forEach(function(e){if(f!==e){var a=f+"To"+e.charAt(0).toUpperCase()+e.substr(1);l[a]=function(b,d){return l.convert(b,f,e,void 0!==d?d:5)}}})});l.convert=function(f,e,a,b){f=Number(f)||0;switch(e){case "in":f*=72;break;case "px":f*=.75;break;case "mm":f=f/25.4*72;break;case "cm":f=f/2.54*72;break;case "twip":f/=20}switch(a){case "in":f/=72;break;case "px":f/=.75;break;case "mm":f=f/72*25.4;break;case "cm":f=f/72*2.54;break;case "twip":f=Math.round(20*f)}void 0!==b&&(f=l.roundNDigits(f,
b));return f};l.pxToPtObj=function(f,e){return q(f,l.pxToPt,!e)};l.ptToPxObj=function(f,e){return q(f,l.ptToPx,!e)};l.roundNDigits=function(f,e){return Number(Number(f).toFixed(e))};l.roundNDigitsObj=function(f,e){for(var a in f){var b=f[a];"object"==typeof b?l.roundNDigitsObj(b,e):f[a]=l.roundNDigits(b,e)}};return l})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/AttrUtil":function(){define([],function(){var t={},q="ID OBJECTID AREA_ID STORE_ID HasData aggregationMethod sourceCountry radiusIndex".split(" ");
t.cleanUpAttrs=function(l,k){l&&q.forEach(function(f){k&&k[f]||delete l[f]})};return t})},"esri/dijit/geoenrichment/utils/ArrayUtil":function(){define(["dojo/_base/array"],function(t){var q={},l={}.toString();q.arraysEqual=function(k,f){if(!k&&!f)return!0;if(!k||!f||k.length!==f.length)return!1;for(var e=0;e<k.length;e++)if(k[e]!==f[e])return!1;return!0};q.composeIdentityFunction=function(k,f){var e="function"===typeof k?k:k?function(a){return a[k]}:function(a){return a};return function(a){return(a=
e(a))&&a.toString?a.toString():f&&void 0===a?a:String(a)}};q.removeDuplicates=function(k,f){var e=[],a={};f=q.composeIdentityFunction(f,!0);t.forEach(k,function(b,d){var c=f(b);c===l&&(void 0===b["__ArrayUtil.js_uniqueKey__"]&&(b["__ArrayUtil.js_uniqueKey__"]="__ArrayUtil.js_uniqueKey__"+d),c=b["__ArrayUtil.js_uniqueKey__"]);void 0===c||c in a||(a[c]=b,e.push(b))});return e};q.splitArrayToBunches=function(k,f){f=f||100;for(var e=[],a,b=0,d=k.length;b<d;b++)a&&a.length!==f||(a=[],e.push(a)),a.push(k[b]);
return e};return q})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/AreaCalculatorsUtil":function(){define(["./AreaDataUtil","../../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil","../tasks/parsers/FeatureSetParser"],function(t,q,l){return{addFeatureAttributesCalculator:function(k,f,e){e=e||q.AREA_ATTRIBUTES_CALCULATOR_NAME;for(var a in k.attributes)t.setAreaDataObjectValue(a,k.attributes[a],f,e)},addAreaInfoCalculator:function(k,f,e){e=e||q.AREA_ATTRIBUTES_CALCULATOR_NAME;
t.setAreaDataObjectValue("SITE_NAME",k.locationName||k.name,f,e);t.setAreaDataObjectValue("STORE_NAME",k.locationName||k.name,f,e);t.setAreaDataObjectValue("AREA_DESC",k.shortName||k.name,f,e);t.setAreaDataObjectValue("AREA_DESC2",k.description||k.name,f,e);t.setAreaDataObjectValue("AREA_DESC3",k.description||k.name,f,e);t.setAreaDataObjectValue("STORE_ADDR",k.address||"",f,e);t.setAreaDataObjectValue("STORE_LAT",k.latitude||"",f,e);t.setAreaDataObjectValue("STORE_LONG",k.longitude||"",f,e)},addEnrichFeatures:function(k,
f,e,a){var b={},d={},c;for(c in f)b[c.toLowerCase()]=f[c],d[c.toUpperCase()]=f[c];k=l.parse(k,e||q.ENRICHED_DATA_NO_LEVELS,function(g){return f[g]||b[g.toLowerCase()]||d[g.toUpperCase()]});t.mergeAreaData(k,a)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/tasks/parsers/FeatureSetParser":function(){define(["./AttrUtil"],function(t){var q={ID_FIELDS:["ID","AREA_ID","IDFNDFIELD"],KNOWN_ATTRIBUTES:{StdGeographyLevel:1,StdGeographyName:1,StdGeographyID:1},parse:function(l,k,f){if(!l)return[];
l=l.features||l;if(!l.length)return[];var e=[],a={},b=0;l.forEach(function(d){var c=d.attributes[q.ID_FIELDS[0]]||d.attributes[q.ID_FIELDS[1]];if(c){void 0===a[c]&&(a[c]=b++);var g={},h;for(h in d.attributes){var m=q.KNOWN_ATTRIBUTES[h]?h:f?f(h):h;m&&(g[m]=d.attributes[h])}t.cleanUpAttrs(g);d={name:k,attrs:g,areaIndex:a[c]}}else d=null;d&&(c=e[d.areaIndex]=e[d.areaIndex]||{},c[d.name]?c[d.name].comparisonLevels.push(d.attrs):c[d.name]={data:d.attrs,comparisonLevels:[]})});console.log("FeatureSetPareser.js \x3d\x3e areaData:");
console.log(e);return e}};return q})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/data/VariablesUtil":function(){define(["../dataCollections/DataCollectionsLoader"],function(t){var q={preprocessVariables:function(l,k){var f=q.convertForEnrich(q._splitVariables(l)).filter(function(e){return e.itemid});return t.loadCustomDataVariables(f,{forceLowerCase:!0,portalUrl:k}).then(function(e){return q._splitVariables(l,e)})},_splitVariables:function(l,k){var f=[],e={};l.forEach(function(a){"string"===
typeof a?f.push(a.toLowerCase()):a&&a.outFields&&a.outFields.forEach(function(b,d){d=a.itemid+"."+b;d=d.toLowerCase();f.push(d);e[d]={itemid:a.itemid,url:a.url,token:a.token,variable:k?k.fullNameToVariableCache[d]:{id:b}}})});return{fullNames:f,customDataMapping:e}},convertForEnrich:function(l){var k={},f=[];l.fullNames.forEach(function(e){var a=l.customDataMapping[e];a?(e=k[a.itemid],e||(e={itemid:a.itemid,url:a.url,token:a.token,outFields:[]},e.url||delete e.url,e.token||delete e.token),e.outFields.push(a.variable.id),
k[e.itemid]||(k[e.itemid]=e,f.push(e))):f.push(e)});return f}};return q})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/dataCollections/DataCollectionsLoader":function(){define("esri/dijit/geoenrichment/promise/all ../GEUtil ../ReportTemplateData esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/JsonXmlConverter esri/dijit/geoenrichment/utils/UrlUtil".split(" "),function(t,q,l,k,f,e){return{canLoad:function(){return q.canMakeRequests()},loadVariables:function(a){var b=
k.get("DataCollectionsLoader"),d="*"===a.outFields,c=d?["*"]:a.outFields,g=a.countryID+";"+a.hierarchy+";"+c.join(";")+";"+!!a.forceLowerCase;b[g]||(d||(c=c.slice(),-1===c.indexOf("id")&&c.push("id")),b[g]=q.getDataCollections(a.countryID,a.hierarchy,{f:"json",outFields:d?"*":JSON.stringify(c),suppressNullValues:!0,AddDerivativeVariables:"all"}).then(function(h){var m={dataCollections:h,idToVariableCache:{},fullNameToVariableCache:{}};h.forEach(function(p){p.data.forEach(function(n){function r(y){return a.forceLowerCase?
y.toLowerCase():y}function u(y){if(d)return Object.keys(y).length;var A=0;c.forEach(function(C){void 0!==y[C]&&A++});return A}var v=m.idToVariableCache[r(n.id)];if(!v||u(n)>u(v))m.idToVariableCache[r(n.id)]=n;m.fullNameToVariableCache[r(p.dataCollectionID+"."+n.id)]=n})});return m}));return b[g]},loadCustomDataVariables:function(a,b){b=b||{};var d={idToVariableCache:{},fullNameToVariableCache:{}};return t(a.map(function(c){var g=e.combineMulti([c.url||b.portalUrl,"sharing/rest/content/items",c.itemid,
"resources/metadata.xml"]);return l.loadResource(g,c.token||e.getToken(b.portalUrl)).then(function(h){var m=f.parseXml(h.data);h=[];var p=f.queryJson(m,"Fields")[0];p&&(h=h.concat(f.queryJson(p,"Field")));(m=f.queryJson(m,"CalculatedFields")[0])&&(h=h.concat(f.queryJson(m,"Script")));h.forEach(function(n){function r(u){return b.forceLowerCase?u.toLowerCase():u}n=n.attributes;n={id:n.Name,fullName:c.itemid+"."+n.Name,alias:n.Alias,description:n.Alias,type:"esriFieldType"+n.Type,precision:n.Precision?
Number(n.Precision):void 0,vintage:n.Vintage};d.idToVariableCache[r(n.id)]=n;d.fullNameToVariableCache[r(n.fullName)]=n})})})).then(function(){return d})}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/ReportTemplateData":function(){define("dojo/_base/declare dojo/_base/lang dojo/request/xhr esri/dijit/geoenrichment/promise/all esri/kernel esri/request esri/urlUtils esri/dijit/geoenrichment/utils/DataUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/UrlUtil esri/dijit/geoenrichment/utils/requests/FileContent esri/dijit/geoenrichment/utils/requests/UniversalClient".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h){function m(p,n){var r=p.substr(p.lastIndexOf("/")+1),u=a.getProxyRule(p);return l(u&&u.proxyUrl?u.proxyUrl+"?"+p:p,{method:"POST",handleAs:"arraybuffer",data:"token\x3d"+n,headers:{"X-Requested-With":null,"Content-Type":"application/x-www-form-urlencoded; charset\x3dutf-8"}}).then(function(v){var y=!/\.xml$|\.txt$|\.json$/i.test(r);return{name:r,data:y?b.base64FromByteSource(v):decodeURIComponent(escape(b.binaryStringFromByteSource(v)))}})}t=t(null,{id:null,_portalUrl:null,
_baseUrl:null,constructor:function(p,n){this.id=p.id;this._portalUrl=n;this._baseUrl=c.combine(this._portalUrl,"sharing/rest")},getFiles:function(){var p=this;return this._getResources().then(function(n){var r=[];n.map(function(u){u=u.resource;"thumbnail.png"!==u&&r.push(p.getFileByName(u))});return k(r)})},getFileByName:function(p){return m(this.getItemResourceUrl(p,!1),this._getToken())},getItemResourceUrl:function(p,n){p=this._baseUrl+"/"+this._contentItemPath(this.id+"/resources/"+p);return n?
c.addQueryPart(p,"token\x3d"+this._getToken()):p},updateFile:function(p,n){var r=this;return h.request({url:this._baseUrl,urlSuffix:"content/items/"+this.id}).then(function(u){var v=g.fromFileData(p,n);return h.request({url:r._baseUrl,urlSuffix:"content/users/"+u.owner+"/"+u.ownerFolder+"/items/"+r.id+"/updateResources"},{content:{file:v,filename:p}})})},_contentItemPath:function(p){return"content/items/"+p},_getToken:function(){var p=f.id.findCredential(this._portalUrl)||f.id.credentials[0];return p&&
p.token},_getResources:function(){var p=this;return d.query(function(n){return e({url:p._baseUrl+"/"+p._contentItemPath(p.id+"/resources"),content:q.mixin({f:"json",token:p._getToken()},n),handleAs:"json"},{usePost:!0})},null,"resources").then(function(n){return n.resources})},getPortalUrl:function(p){return p?/[^:]+:\/\/(.+)$/i.exec(this._portalUrl)[1]:this._portalUrl}});t.loadResource=m;return t})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/CustomReportsManager":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when ./PortalManager ./ReportTemplateData ./StandardGraphicReportTemplates esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/PortalUtil esri/dijit/geoenrichment/utils/PortalQueryUtil esri/dijit/geoenrichment/utils/UrlUtil ../../config ../../countryConfig".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h){var m={TEMPLATE_TYPE:"Report Template",PLAYER_STANDARD_INFOGRAPHIC_TYPEKEYWORD:"esriReportPlayerStandardInfographic",STANDARD_INFOGRAPHIC_TYPEKEYWORD:"esriWebStandardInfographicReport",GALLERY_INFOGRAPHIC_TYPEKEYWORD:"esriWebGalleryInfographicReport",MOBILE_INFOGRAPHIC_TYPEKEYWORD:"esriMobileFactsInfographicReport",GALLERY_INFOGRAPHIC_USER:"esri_reports",resetCache:function(){a.set("CustomReportsManager",{})},_getCache:function(){return a.get("CustomReportsManager")},
getCustomReports:function(p){var n=this,r=c.getPortalUrl(p.portalUrl);return l(k.getSignedInPortal(r),function(u){u=u.user.username;u={q:d.combineQueryString({type:"Report Template",typeKeywords:p.typeKeywords,owner:!p.publicOnly&&u}),sortField:"modified",sortOrder:"desc"};return b.queryCommon(c.combine(r,"sharing/rest/search"),u).then(function(v){v=v.map(function(y){return n.prepareCustomReportFromItem(y,r,p)});return n._getCountryReports(v,p.countryID)})})},_getCountryReports:function(p,n){return p&&
("*"===n?p:p.filter(function(r){return!r.countries||r.countries.split(",").some(function(u){return n===u.trim()})}))},prepareCustomReportFromItem:function(p,n,r){function u(y){return"string"===typeof y?"true"===y:!!y}var v=t.mixin({},p.properties||p.details);v.isGraphicReport=u(v.isGraphicReport);v.isMultiFeature=u(v.isMultiFeature);v.reportID=p.id;n={title:p.title,templateData:n&&new f(p,n),modified:p.modified instanceof Date?p.modified.getTime():p.modified};r&&r.attachItemProperty&&(n[r.attachItemProperty]=
p);t.mixin(n,v);return n},getCustomReportByID:function(p){var n=this,r=this._getCache()[p.reportID];if(r)return r;var u=c.getPortalUrl(p.portalUrl);return this._getCache()[p.reportID]=l(k.getSignedInPortal(u),function(v){return v.user.getItem(p.reportID).then(function(y){return y&&n.prepareCustomReportFromItem(y,u,p)})}).otherwise(function(v){delete n._getCache()[p.reportID];return p.ignoreError?null:(new q).reject(v)})},tryFindReportIdByAlias:function(p){var n=this,r=e.aliasToID(p.countryID,p.reportID);
if(null==r)return null;var u=c.getPortalUrl(p.portalUrl);return l(r&&this.getCustomReportByID({reportID:r,portalUrl:u,ignoreError:!0,attachItemProperty:p.attachItemProperty}),function(v){return v?v&&(p.returnObject?v:v.reportID):l(n.getCustomReports({portalUrl:u,countryID:p.countryID,typeKeywords:"esriReportPlayerStandardInfographic",publicOnly:!0,attachItemProperty:p.attachItemProperty}),function(y){function A(z){z=z.split(".");return Number((Number(z[0])+Number(z[1])/100).toFixed(2))}var C=A(g.jsapiVersion),
E,F,B=-Infinity,w=Infinity;y.forEach(function(z){if(z.playerAlias===p.reportID){var H=A(z.jsapiVersion);C>=H&&H>B&&(B=H,E=z);C<H&&H<w&&(w=H,F=z)}});y=E||F;p.strictVersionCheck&&y&&y.jsapiVersion!==g.jsapiVersion&&(y=null);return y&&(p.returnObject?y:y.reportID)})})},itemUpdated:function(p){delete this._getCache()[p]},getFakeCustomReportByContext:function(p){return{title:"Generic template",type:"esriReportTemplateStandard",coverage:p.countryID,countries:p.countryID,hierarchy:p.hierarchy||h.getHierarchyID(),
isGraphicReport:!0,isMultiFeature:!1,reportID:null}}};m.resetCache();return m})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/PortalManager":function(){define(["dojo/Deferred","dojo/on","esri/dijit/geoenrichment/when","esri/arcgis/Portal","../../../utils/CacheUtil"],function(t,q,l,k,f){return{getSignedInPortal:function(e){var a=f.get("PortalManager.portal");if(!a[e]){var b=new k.Portal(e),d=new t;q(b,"load",function(){if(b.user)return a[e]={user:new k.PortalUser({portal:b,credential:{userId:b.user.username,
server:b.url,token:"",expires:9999999999999,creationTime:9999999999999,scope:"portal",resources:[b.portalUrl]}}),portal:b},d.resolve(a[e]);a[e]=l(b.signIn(),function(c){d.resolve({user:c,portal:b});return{user:c,portal:b}})});return d.promise}return a[e]}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/StandardGraphicReportTemplates":function(){define(["dojo/_base/lang","../../config","dojo/i18n!esri/nls/jsapi"],function(t,q,l){function k(){return a?a:a={"3.25":{"US.census":[{id:"e2a6868f979f4e37896b631581ae4918",
alias:"demographic-summary"},{id:"88420f4a98bb45cbacacbad67e23266e",alias:"key-facts"},{id:"efb6bee0a80d4801887ec4cf73aa67fc",alias:"marketing-profile"},{id:"12867e4a89d5461fbbe3b9c6c181993a",alias:"at-risk-population"},{id:"6637be1fbddf4e948fbd09ce6a7a7888",alias:"portrait-property-flyer"},{id:"02c1124e916847249aa91b9ce48c2552",alias:"skyscraper"},{id:"3afd4c5089584b089af5b0037d74a9d1",alias:"transportation-to-work"},{id:"a696eae378974ed5a63510fa70bed011",alias:"health-care"},{id:"c931fc6ebdb440189a8bc6bd34115807",
alias:"executive-summary-call-outs"},{id:"96096c8afa4847dea936942b1f89acb5",alias:"tapestry-profile"},{id:"7a20b92b48cc4e63bf7ba956295de948",alias:"nearby-restaurants"}],"CA.census":[{id:"6c467040a8a64c33972045cf091bca5b",alias:"key-facts"}],"*.census":[{id:"11c4cec3c0d34c4aa51cd8877e2db4ef",alias:"key-facts"}]},"3.26":{"US.census":[{id:"a5161c2ca50d44429daf2bf9dbe73eb5",alias:"demographic-summary"},{id:"693269bfbf6c4851901a3c9c56550294",alias:"key-facts"},{id:"aceee34210e748ba95cb9cae21e196b9",alias:"marketing-profile"},
{id:"a7936c5ce77c4d698140db21ab1a7858",alias:"at-risk-population"},{id:"8d42e32b12154bc580af89483c208d56",alias:"portrait-property-flyer"},{id:"7be44b15e29847a383906aac5699cf00",alias:"skyscraper"},{id:"537230b385fb45d9a8d6e59265e36fbf",alias:"transportation-to-work"},{id:"89c6ff4d96de4acaa024b7a408f186b0",alias:"health-care"},{id:"0fa71e0a74294e7b8265e4cd507c7d17",alias:"executive-summary-call-outs"},{id:"f2754d21223a491798dbc0ef2c71858f",alias:"tapestry-profile"},{id:"866e6a839ee348dfae5a8ee9bdafbfc0",
alias:"nearby-restaurants"},{id:"f808dfceddd149ff85a9d8825d4e5a5f",alias:"multi-ring-comparison"}],"CA.census":[{id:"f982018306a34cc58756ce0ed78c6b0c",alias:"key-facts"},{id:"c47fa8d040364abe80d288bb606da576",alias:"multi-ring-comparison"}],"*.census":[{id:"3813621424fc4443af1dcecab65be89c",alias:"key-facts"},{id:"dd1fa81faaf94541831cae16788393ab",alias:"multi-ring-comparison"}]},"3.27":{"US.census":[{id:"3c6959a7c7c4450f9bdcc7063c9023d5",alias:"demographic-summary"},{id:"4cc0a5e007d946d5909524fcf80bc666",
alias:"key-facts"},{id:"fb9b9a501c974540a52ab6d1027a8bcc",alias:"marketing-profile"},{id:"b0f05d5926d6444da40d6bf0c5c9846e",alias:"at-risk-population"},{id:"5cf609b26ce24633a2edc58d7ebeb3fd",alias:"portrait-property-flyer"},{id:"686d7af60bcb410db051ec8465889231",alias:"skyscraper"},{id:"a79a099ab7be4c34a9b0b28831b1aa9c",alias:"transportation-to-work"},{id:"6f64bb63647246dcb5d268fc301614f6",alias:"health-care"},{id:"99e919a7e9fd4fa2b55779f0dc118da8",alias:"executive-summary-call-outs"},{id:"f32b961757f347e2976ba011ee20cb13",
alias:"tapestry-profile"},{id:"a266260cc3ec46c1b66c86f263feb8e4",alias:"nearby-restaurants"},{id:"dab290529fd44063a2d83e03a8dc49eb",alias:"multi-ring-comparison"},{id:"1499719e83754c81ae1477223c0dde39",alias:"property-details"},{id:"9c441f80f80348c8b5b747e2cf2a2ccd",alias:"employment-overview"},{id:"bb59cd9292ec47a0928900c5fb9c17b8",alias:"office-market-profile"},{id:"6f75892c4a5f4f5ba3d0edb4d8a0b13b",alias:"health-care-and-insurance"},{id:"a7524b019e1f482493e43f32ab9568a0",alias:"demographic-profile"},
{id:"45d528a3865547bb89792d4517db2e7a",alias:"commute-profile"},{id:"acf5c12b54b64550ad7f582c9c97ed28",alias:"target-market-summary"},{id:"489d923d29d44c2681171a590fb37742",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"91d1e8c9d0ea482b9947dfe4bdfbe0ba",alias:"key-facts"},{id:"e05eb227df9b4ceba0ace202b1d0c1e2",alias:"multi-ring-comparison"}],"NL.NLD_4orange":[{id:"77e9461032b24e47b6c6b643cf02381f",alias:"housing-profile"},{id:"b80fd38e5f43448da530521832e0dfba",alias:"insurance-profile"},
{id:"d36520d68d8e449c9f300be0e800f698",alias:"media-profile"},{id:"bad567fdf36e48e9a5108b66c96bf0ae",alias:"personicx-segmentation"},{id:"5726fe6cad4c491a863eff64e538231c",alias:"spending-profile"}],"JP.EsriJapan":[{id:"e4bd37bb10c74798a3600ca7484846ac",alias:"base-demographic-profile"},{id:"a5d7db5138644a9e95d9af1b40b31bb9",alias:"demographic-comparison-profile"},{id:"205b45f626f84650a1ca948be4f97411",alias:"future-population-profile"},{id:"ee12a9d9a2e04fb6b93628f075719bc9",alias:"population-households-profile"},
{id:"3f857a2a8d14488abfcec383197e5a0b",alias:"consumer-spending-profile"},{id:"77369125467c4c9a8f3b9a628eda3347",alias:"base-demographic-profile-ja"},{id:"08abfdb8b8174846bd3723f094a88d86",alias:"demographic-comparison-profile-ja"},{id:"e5db2ced023d4c53a0ef9fe231d7fd15",alias:"future-population-profile-ja"},{id:"4c55f8ddb53345298e59bccfeb45e489",alias:"population-households-profile-ja"},{id:"24c8ef9a8c5d45c78791a84445eed29d",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"7aa819f9816a494ab28ab7604553f488",
alias:"base-demographic-profile"},{id:"710051b492c3481a83e01bd6bf3dd3bf",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3d046bf33ce04b598afd391a0dd195c9",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"d8b9f282034d47db808175fef56a15e2",alias:"at-risk-population"},{id:"eab5646a29324a6282db3b8ca47bf2b3",alias:"commute-profile"},{id:"ed6b5a0736aa4e04862a1a4307c608cc",alias:"demographic-summary"},{id:"a4c64a9006544751ad18ce75a401112e",alias:"health-care-and-insurance"},{id:"96d00aefd766428394d6ee6698a56591",
alias:"coronavirus-impact-planning"}],"*.census":[{id:"365d52e6bac147a68a12eee229eb9b6b",alias:"key-facts"},{id:"0f7d2ba850fa40579cae1342001d80d7",alias:"multi-ring-comparison"}]},"3.28":{"US.census":[{id:"45cb423066194f5f98c6f4ff81124db3",alias:"demographic-summary"},{id:"98d5848a944b4787b2ca038256c7878d",alias:"key-facts"},{id:"879849b937ec4eb0bef31ff2861251f2",alias:"marketing-profile"},{id:"456d7a22adc8439a93d4164ed3846243",alias:"at-risk-population"},{id:"c7e01c953c7e4b70a46ca6408c3ed000",alias:"portrait-property-flyer"},
{id:"34330a47546f412d9d09632347da11d3",alias:"skyscraper"},{id:"d349b23334454274ab2a7a20a0a9a55d",alias:"transportation-to-work"},{id:"02086fe6b92b4ff5a9a7a8d172540fc9",alias:"health-care"},{id:"5d8b51e2b27b4832b193d9932bc6f862",alias:"executive-summary-call-outs"},{id:"1b07c48d4b58423990023b43150d7e99",alias:"tapestry-profile"},{id:"c21dd81cd9064649a4bb454530f12790",alias:"nearby-restaurants"},{id:"4d8c102ca7324d09931cfe65ab3a1168",alias:"multi-area-comparison"},{id:"9ed3b5dba02d4b46a3e063c8405fd0cc",
alias:"property-details"},{id:"db0606e41ee7485f88122069e74a9b6b",alias:"employment-overview"},{id:"2a43c204c1dd4a758087372d7d7d786b",alias:"office-market-profile"},{id:"f59a3621583d44bbafa14035c2ae3947",alias:"health-care-and-insurance"},{id:"ad58f06a480c4b16aadcff789f543cca",alias:"demographic-profile"},{id:"bd7390ab31dc485489733d22475db0ed",alias:"commute-profile"},{id:"38eab30d7e6840da869fee264ca9fc40",alias:"target-market-summary"},{id:"03b420681f6a466fb14e254669583244",alias:"coronavirus-impact-planning"}],
"CA.census":[{id:"6c0a945e91d44640a08776e5bed1b297",alias:"key-facts"},{id:"7464708f379b463c8eec8aed1315989f",alias:"multi-area-comparison"},{id:"425150e63a5346659721bfc0be94511b",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"e602295128e34ea2b2b50a1aa04253bf",alias:"housing-profile"},{id:"3d0f7e63256b43a59fcf037502380685",alias:"insurance-profile"},{id:"fbc685a8837945eb82cde447acfda982",alias:"media-profile"},{id:"da063bf765e341708fad9eeec07b09c7",alias:"personicx-segmentation"},{id:"5003049227804e5cba6ad3bfdbf2dba7",
alias:"spending-profile"}],"JP.EsriJapan":[{id:"bd9685651f484488ba24c2838a6a9000",alias:"base-demographic-profile"},{id:"f36b1cc0b9d84ea4b4db1742e875ff80",alias:"demographic-comparison-profile"},{id:"99a48ec44af94af290ab0e6d691a31c7",alias:"future-population-profile"},{id:"b29af5c2e6754f61ba38ad3128668095",alias:"population-households-profile"},{id:"d568dd78527c462e83eb68cb9ca02f09",alias:"consumer-spending-profile"},{id:"a29c9143bd044dad9475e6b6ee292e46",alias:"base-demographic-profile-ja"},{id:"3bb56ea4c4bd4a2aaa124e2e3a0fad60",
alias:"demographic-comparison-profile-ja"},{id:"28ef1772bd884db5ae8885731318e503",alias:"future-population-profile-ja"},{id:"7896c8adf89e4f47ab6e0acc7759a1cd",alias:"population-households-profile-ja"},{id:"6c28a650baaa40cda26f4fb372b14d0f",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"31cf6eac0339433f8b4b5f8b62e47554",alias:"base-demographic-profile"},{id:"ccf6bc8472ae4ca8852fec621197fec3",alias:"household-profile"}],"ES.ESP_AIS":[{id:"5b60de05c1694a78b6b6ce8e10a48cd4",alias:"base-demographic-profile"}],
"PR.PRI_ACS_2020":[{id:"f1d79448541642648293f4b75d7b595a",alias:"at-risk-population"},{id:"7943a0c2f1ca4cad967bb0bfeb8af3a4",alias:"commute-profile"},{id:"ef0579311aac4d14a771389f23263445",alias:"demographic-summary"},{id:"4edd44657989475493ca92a69e80f08c",alias:"health-care-and-insurance"},{id:"c440f0c671264732b16c39f6326a5987",alias:"coronavirus-impact-planning"}],"*.census":[{id:"5886dbf41f984a0a8ec4eb4b5e231584",alias:"key-facts"},{id:"41727f86773c4cf2a37fd99446ea83fc",alias:"multi-area-comparison"}]},
"3.29":{"US.census":[{id:"368e2bf603fb42c4aa3dac0fce50cdf8",alias:"demographic-summary"},{id:"a32be4a9e51d4affa4cc1ddc812cb629",alias:"key-facts"},{id:"df985e2579004a3292c3d00615d53c39",alias:"marketing-profile"},{id:"8c56287427f84ae8b59142fc5bf1df4c",alias:"at-risk-population"},{id:"d95e40c3c93d480ab4d1d0b0adbbc5d4",alias:"portrait-property-flyer"},{id:"f989f9b820cd44d390187402447051b4",alias:"skyscraper"},{id:"0d322ac073584079a8cd6a1bda981fe7",alias:"transportation-to-work"},{id:"2b9f186425844ec390584b739ffca026",
alias:"health-care"},{id:"3e9ccce6cca64e70be19ed789de5f290",alias:"executive-summary-call-outs"},{id:"2a812da4de404ceba3969472d32c42e7",alias:"tapestry-profile"},{id:"2cc25f7b5f194012b39c90b5f9bdb8d3",alias:"nearby-restaurants"},{id:"72d1e9e4cdf94bf9a2020f8214bef9ca",alias:"multi-area-comparison"},{id:"27034d31ab124b9bbe4e63b7df2a0d90",alias:"property-details"},{id:"4a59e329df06480eaa534513eb15f465",alias:"employment-overview"},{id:"d4fe343c4d6f4bea840a715f5b033d2d",alias:"office-market-profile"},
{id:"cb2224cc9cb24ce288da729f0650ebf0",alias:"health-care-and-insurance"},{id:"484825ed241c49d58eaf718d46772051",alias:"demographic-profile"},{id:"afee0a2eb16e46cc9bc61b5d82133249",alias:"commute-profile"},{id:"1d32fabd95b446e99049aa0a04f5508e",alias:"target-market-summary"},{id:"783847f3f03f402d855985b45a8bf2df",alias:"population-trends"},{id:"83aef26e61ca41da9b269c06cc418d79",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"73f1c835b1624ff0b29a6a364f7ba6dc",alias:"key-facts"},{id:"84b05aed2d2f478eb6bb1e4749811cf1",
alias:"multi-area-comparison"},{id:"ea0737e1e7554c5caf2be381c28369cc",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"3d8cb941742d4fffbaca48c65b4bd5b5",alias:"housing-profile"},{id:"f126395e7bcc494899cfc1a13a34be1f",alias:"insurance-profile"},{id:"8da901e5729e457683f2e4f7081b1bda",alias:"media-profile"},{id:"f9ba90b373a245e1b8fd14a027cf1ba5",alias:"personicx-segmentation"},{id:"81fc53b93a0c4269848ce2ae22ec19e2",alias:"spending-profile"}],"JP.EsriJapan":[{id:"79b2394ea50d44f3b4c1b4bdabed6cc2",alias:"base-demographic-profile"},
{id:"9e824283a8954639ab0c0ac237b9e14d",alias:"demographic-comparison-profile"},{id:"f5812c2f542644368c0ff34eef7b731c",alias:"future-population-profile"},{id:"b51d7dde64c34a9796418c1788a6762d",alias:"population-households-profile"},{id:"48a993403d30431784b7bf47a06e4261",alias:"consumer-spending-profile"},{id:"531c59f55de646d5a78fef6c903a678f",alias:"base-demographic-profile-ja"},{id:"cf553f2090a64662a1f9efa8a355964c",alias:"demographic-comparison-profile-ja"},{id:"321150c8ac1049fc9cd253cb12c0b0bc",
alias:"future-population-profile-ja"},{id:"e0d6dea7667c47b49f159c207fc311e9",alias:"population-households-profile-ja"},{id:"ba5f50bd617e4519a9322ec24b9cd5b1",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"60ec4173caac4f87a831447d5bf7b450",alias:"base-demographic-profile"},{id:"98d3d99aadba47a8ab53b0dcd4eebf22",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3978b02fbc354acca14d4e959fa5b531",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"e2141ddd911c4aadb403db1e858edb51",alias:"at-risk-population"},
{id:"78360505668743e0a39ac0d085612dfa",alias:"commute-profile"},{id:"f296deceb6204f85853ac85e98ba3552",alias:"demographic-summary"},{id:"8a1c4d55a77c4cf9805cec380727fc5a",alias:"health-care-and-insurance"},{id:"8dd9de996ba0491d82a2ee8f01cd55b0",alias:"coronavirus-impact-planning"}],"*.census":[{id:"5645a1d6023c4d8a9d02943ad57a7ab2",alias:"key-facts"},{id:"e29f56b6d67447e08a45d08981db987c",alias:"multi-area-comparison"}]},"3.30":{"US.census":[{id:"981382ffe90c40bbb60318b1ce338ba4",alias:"demographic-summary"},
{id:"f62dec6c9750496796fdc0619c4c107f",alias:"key-facts"},{id:"f737236a8b644f1597a4457862fa169c",alias:"marketing-profile"},{id:"4746caa1254e4d93af121ce74e9aa8d6",alias:"at-risk-population"},{id:"0bcd882dd7a34fd39ace173243534df0",alias:"portrait-property-flyer"},{id:"4a340b8e642945f6bb7a381d07fb26b6",alias:"skyscraper"},{id:"3e2a42b2d03e42cf91e9727f67273ec3",alias:"transportation-to-work"},{id:"c26e9577d48b4499a07b75215c97c394",alias:"health-care"},{id:"cbc348e601104d0c9bbe971c0297142a",alias:"executive-summary-call-outs"},
{id:"d65aaa42b9824864b40eb1a75f2e4cbd",alias:"tapestry-profile"},{id:"d6242e8dd02142bdb98b85f094d5cd9b",alias:"nearby-restaurants"},{id:"aed9e00873fa4010881daaa90e7e8d71",alias:"multi-area-comparison"},{id:"eb0e0df0856e43cdb874f96945c566ac",alias:"property-details"},{id:"e29ebec17c2c4f42a1a929c40163bb90",alias:"employment-overview"},{id:"b84d0f0f5c69461ea52ce2702f7327d6",alias:"office-market-profile"},{id:"5eba537af36e4490869917ee888bacc4",alias:"health-care-and-insurance"},{id:"afb01a3f91374f65ba4c6be9229f2c15",
alias:"demographic-profile"},{id:"8074d1bbbfed4858bb24400a0c7bf224",alias:"commute-profile"},{id:"33621d85b1df4547851c904aaa7d44d2",alias:"target-market-summary"},{id:"440170eaae5240e79abbb0bb7de22b27",alias:"population-trends"},{id:"0576deee38714cc69357de9675ab39ae",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"e054928366604fc7b401dcb4a343cd4c",alias:"key-facts"},{id:"986bc92490234c2697d5771b9771166e",alias:"multi-area-comparison"},{id:"52233708250449bc84f906d86616cace",alias:"prizm-profile"}],
"NL.NLD_4orange":[{id:"22a86d0f982d4b10934f32129f2674f9",alias:"housing-profile"},{id:"9811b2babd5f4283822782867476b92c",alias:"insurance-profile"},{id:"59957cc0524344449fc6035053bb6c4a",alias:"media-profile"},{id:"2511035fed0140b8a7eb7ec7240e41eb",alias:"personicx-segmentation"},{id:"defc390648e543508be22704f1db659c",alias:"spending-profile"}],"JP.EsriJapan":[{id:"91a180442f614c4d96fb40e33aa30948",alias:"base-demographic-profile"},{id:"e7415b6c9ff74922850851eac65ddbc6",alias:"demographic-comparison-profile"},
{id:"12e9eb63e4834d3681e15196bfc64642",alias:"future-population-profile"},{id:"291cc1bc2cee455483c96f50e5916f1d",alias:"population-households-profile"},{id:"217c72b7d0534ebc81658c71917c3e15",alias:"consumer-spending-profile"},{id:"48d5baf8e5574abda8fd776219fa0eb6",alias:"base-demographic-profile-ja"},{id:"01a7a0cbacf948b3b715e4f6c55aa5f2",alias:"demographic-comparison-profile-ja"},{id:"0317412d6fb541c9b4067923e314cad3",alias:"future-population-profile-ja"},{id:"0c826ce1e2de415aa2f7af3e615b1fe8",alias:"population-households-profile-ja"},
{id:"201211e23758432db4a841dae8ba9428",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"ec6477ce41fa464fb38a360cad0d3da3",alias:"base-demographic-profile"},{id:"e53b2c145f544efaa7d7b4e802c3d747",alias:"household-profile"}],"ES.ESP_AIS":[{id:"4483924cb42043ec85486c58e61a99ef",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"7e3b955c4d904624b4cea5d015e693a0",alias:"at-risk-population"},{id:"8927492627124fd0845de8c0dc02bd3f",alias:"commute-profile"},{id:"a308a300f3b4482ea57b4ea4a54ea5ef",
alias:"demographic-summary"},{id:"5800acd3784e4a6d88e3228e1af1164f",alias:"health-care-and-insurance"},{id:"d40e2ba95fec40c6ad68ceddde4e160b",alias:"coronavirus-impact-planning"}],"*.census":[{id:"b9d1ca815d9a4a3ab35196ec299f0917",alias:"key-facts"},{id:"6f6d601c2eef4bd1a87baa2652e7bb0b",alias:"multi-area-comparison"}]},"3.31":{"US.census":[{id:"784d0b69c02c4cac862b89b0e44cd8fb",alias:"demographic-summary"},{id:"f1bb3a222fab470dbb96a79a51496b2b",alias:"key-facts"},{id:"1780d5b264734757b86e4655d779b213",
alias:"at-risk-population"},{id:"8c34121585894e91a50c493c360912f0",alias:"skyscraper"},{id:"1c314d9d06844d44b408caba6099b56b",alias:"executive-summary-call-outs"},{id:"4ee838a250084c9bad84f094895c793c",alias:"tapestry-profile"},{id:"dfba27ac04694513aee257cdd185c8c2",alias:"nearby-restaurants"},{id:"d7cfb836282747199cf0febea42627cc",alias:"multi-area-comparison"},{id:"3a34213116a340a0bbd0d463025444a2",alias:"property-details"},{id:"b277b8572469425fa54c5506c3dbcdf3",alias:"employment-overview"},{id:"eaf35c41f5714f48a1aa61fcbd6ae05f",
alias:"office-market-profile"},{id:"688f86931cc345f796154717dc6d0a15",alias:"health-care-and-insurance"},{id:"cb4edb43a1ae473ca651388b5c3fa54f",alias:"demographic-profile"},{id:"49224c10d4ac4c7ab0f8e016165ce235",alias:"commute-profile"},{id:"db67445e4dfa4b6c8c1e5fd30b229c92",alias:"target-market-summary"},{id:"6c9360bfec9041ddba0f03440cb446ca",alias:"population-trends"},{id:"2ae07567c78847abacb14773ffe9dede",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"0704defc6960439ea5b9c484af15eb4c",
alias:"key-facts"},{id:"ee01fe05db964878bc6fb627e55dc9b1",alias:"multi-area-comparison"},{id:"a426bb6d944a46658640aee2ba480866",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"710037ca0f024ec5abbe4cf9fecad23f",alias:"housing-profile"},{id:"83bc643ea48344c892a8e9636e3677dd",alias:"insurance-profile"},{id:"53f63e3a9e854a8fa5e2c0222df6f848",alias:"media-profile"},{id:"ca9d66bf4bf940918129d0d5c97e0b50",alias:"personicx-segmentation"},{id:"ab19f90750fd469aa702f961b12eaee8",alias:"spending-profile"}],"JP.EsriJapan":[{id:"7f7c37e8f1fa4ab18b88368c12058eff",
alias:"base-demographic-profile"},{id:"25a71f196b7e4db182be346264b442dd",alias:"demographic-comparison-profile"},{id:"e1075eaada7744a59ecabfc445dcd877",alias:"future-population-profile"},{id:"8e2746d993584a7d94d0e66ca6dabdaa",alias:"population-households-profile"},{id:"bc9b91d7ae2c41a5bdece1d322ef6b88",alias:"consumer-spending-profile"},{id:"4f4736d5b2f842faaee83c57417c56b6",alias:"base-demographic-profile-ja"},{id:"bc400448bf3347619349cb7d4ccb3d87",alias:"demographic-comparison-profile-ja"},{id:"00ad3ad05e384d7ea764b356a950356d",
alias:"future-population-profile-ja"},{id:"db94d6af598f48778c4471f9fa0d6e4f",alias:"population-households-profile-ja"},{id:"c5f602a9d6714dd6bd6a2b720eced874",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"b0cd9df36d0747ecac2bc34f055f5583",alias:"base-demographic-profile"},{id:"1751ab1998db4e6fb79f484069605cfd",alias:"household-profile"}],"ES.ESP_AIS":[{id:"3d17356c9a5549dbaa4096365e7eb703",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"7923818907d248ff8dcd7a5941e89b57",alias:"at-risk-population"},
{id:"c0b28d710379405eac4ecb6a64d817b4",alias:"commute-profile"},{id:"4b64ec164a3d4830ae8a4cedf067f55a",alias:"demographic-summary"},{id:"5e47986d4c4644a29a28c92c077919f2",alias:"health-care-and-insurance"},{id:"11c43309216b4d4a8fbd9a03cbcc22ec",alias:"coronavirus-impact-planning"}],"*.census":[{id:"f2d46b136acc46e2a2220388ddc43be0",alias:"key-facts"},{id:"228155af0095410c961cc82f33cdcf49",alias:"multi-area-comparison"}]},"3.32":{"US.census":[{id:"2ff58abf55554be4b19006c1e607afaa",alias:"demographic-summary"},
{id:"a19b321e3adc441886e706bb9704005c",alias:"key-facts"},{id:"f1e3b0c93e1d44e299eb0b752f93b7db",alias:"at-risk-population"},{id:"3bbc96da4ca142c7b80b082b0f986110",alias:"skyscraper"},{id:"1302184a2f584b86943b6c51d40acace",alias:"executive-summary-call-outs"},{id:"58035dcee74b4875bcd951b9174155d1",alias:"tapestry-profile"},{id:"4da5867dfda046ddb4b82ab01b7cb568",alias:"nearby-restaurants"},{id:"4498b9e35665480cafe3985f788ca61d",alias:"multi-area-comparison"},{id:"83a11d5f38f84e709ff1e24786e963b4",
alias:"property-details"},{id:"0a0354d2d0d842d8bd8e05d40545fc5b",alias:"employment-overview"},{id:"400924aa9d5f4bee8b9dd0c0af21dfbb",alias:"office-market-profile"},{id:"0a502ea9be8a43fdb6cd2fb5ff7503bc",alias:"health-care-and-insurance"},{id:"6147ac21718149a69ce15831f12181ed",alias:"demographic-profile"},{id:"4cdaddd947064ca690ebc06eec06ea57",alias:"commute-profile"},{id:"a8fe08a9c5114260a2a6f7ca436d36f6",alias:"target-market-summary"},{id:"34a17e1fceb646228e94089ec5e0890f",alias:"population-trends"},
{id:"eb5d984d78364a6596cd97e0bf7901a5",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"5f6e17f3729145959fb38ed2cd508970",alias:"key-facts"},{id:"c86709cbd72043708e09e4a641adfbd0",alias:"multi-area-comparison"},{id:"bd9e3a17678843d4b1fa0716af91c231",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"470686f333d140c7b516294465eea037",alias:"housing-profile"},{id:"ab11f2f11ea3439197769a8189451bea",alias:"insurance-profile"},{id:"f0e6736d0f364d4b88ea613746e57c81",alias:"media-profile"},{id:"bfe0814bc0604a8faa48d01b026ef7a5",
alias:"personicx-segmentation"},{id:"bd1d4c7be5ad41ae909267b5e9c5f2dc",alias:"spending-profile"}],"JP.EsriJapan":[{id:"b9dcbb9f31fd4be7bd96a2f89ce66a1c",alias:"base-demographic-profile"},{id:"830ddad066c14c0dad27367a1b2ef132",alias:"demographic-comparison-profile"},{id:"7574f89d591f432da6ffdb94dcfdac52",alias:"future-population-profile"},{id:"ec8785d4c9cb446394e07fa7dd8451fd",alias:"population-households-profile"},{id:"9ac85d73187548b2bb0d0b4a73f88199",alias:"consumer-spending-profile"},{id:"e99eee823684452fbe564fe42dac9535",
alias:"base-demographic-profile-ja"},{id:"8598d6a8550d46aebd3fd598ceaefae7",alias:"demographic-comparison-profile-ja"},{id:"fdf81ddffb374e3f898006ffa59e259e",alias:"future-population-profile-ja"},{id:"f2468c2fef314427bd0865b460ef554f",alias:"population-households-profile-ja"},{id:"a96f28fb67024109b7c33161f3c9b308",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"40a5ba79d1204e78ac6deaa633ccd59b",alias:"base-demographic-profile"},{id:"2e647098c613476bbd92b1e07331cb86",alias:"household-profile"}],
"ES.ESP_AIS":[{id:"7d82cae4b3fc4575bab56ec82f51c368",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"aa65005b75ba4e158afe63baa4bc5fe2",alias:"at-risk-population"},{id:"292a269a813e4d7797baf88a76c11a8c",alias:"commute-profile"},{id:"b1d50628f2484689b9e39d49fc2e16a0",alias:"demographic-summary"},{id:"64839b7a81be45e287e805afc145652e",alias:"health-care-and-insurance"},{id:"44be3c42b70c4aee840fdeb4656b7922",alias:"coronavirus-impact-planning"}],"*.census":[{id:"ce57630d5cc24759809dd54bc1f82c91",
alias:"key-facts"},{id:"c48ee0f58c8645bf8d689eb0db2d2936",alias:"multi-area-comparison"}]},"3.33":{"US.census":[{id:"55689c3ee7c1490e83accae002a8d164",alias:"demographic-summary"},{id:"173e40bebc9d426a8e4680242acafea4",alias:"key-facts"},{id:"218eba57314e476ba16d1d5d40bb0182",alias:"at-risk-population"},{id:"3d470c82d8664e34b5026675596a7a87",alias:"skyscraper"},{id:"b9381f481f9f417f9647e0a2c8686979",alias:"executive-summary-call-outs"},{id:"d2800b578d1c4dd38ac95ce36882d881",alias:"tapestry-profile"},
{id:"d9d8109c537943a78a24d65110291b43",alias:"nearby-restaurants"},{id:"2e835e58629a4f1e8192a729792b638f",alias:"multi-area-comparison"},{id:"6f3c32ed18834a4ea34b200e32ad7c33",alias:"property-details"},{id:"6b1267be3fcb401bbcb49afd221713cf",alias:"employment-overview"},{id:"67e6efc15cb142c2a7cc30a48a59c769",alias:"office-market-profile"},{id:"9d8b447adc634228b24deb315107c0f0",alias:"health-care-and-insurance"},{id:"e45f96db738140869981b7443b6e2658",alias:"demographic-profile"},{id:"88d896eada3340dc8f8f1a2406bd48f9",
alias:"commute-profile"},{id:"61492956f89a43ee86d245fca92858a2",alias:"target-market-summary"},{id:"91de69dede414856892dfdd94d2c4bab",alias:"population-trends"},{id:"ee9c6fdc902e4ea09509e4d1bf1582b5",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"dfb663da790248fe89504c662c42aae3",alias:"key-facts"},{id:"9873fcafe7194fcf9dffa8bbb8e001a1",alias:"multi-area-comparison"},{id:"4766ad797ef84968be4b4d0d54b98416",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"2212ff30c72143e6bcd9b8f26b01c47f",alias:"housing-profile"},
{id:"c5efcef364ac4d8f82a6d54010ff75c7",alias:"insurance-profile"},{id:"e00894c000a94c42aefce551fe4e48c2",alias:"media-profile"},{id:"9d1da1c80e93407cb94589cee43a0f5a",alias:"personicx-segmentation"},{id:"578199262aa646bf8b0713f3f2160af6",alias:"spending-profile"}],"JP.EsriJapan":[{id:"00bd747c0e48477d8df692848560a8a2",alias:"base-demographic-profile"},{id:"8ac4bd99dd1848dc98967419ab8d299c",alias:"demographic-comparison-profile"},{id:"88f94b5e3b6d414d913957b46e9f8394",alias:"future-population-profile"},
{id:"41864cea64f3432a90006eb9a1f97608",alias:"population-households-profile"},{id:"44333ddcda38473d9a24010ed387eda7",alias:"consumer-spending-profile"},{id:"c35ebbeffb3b47fc9bbe3fc6283aaa7b",alias:"base-demographic-profile-ja"},{id:"6c8a565d12954927b83daaad81409a25",alias:"demographic-comparison-profile-ja"},{id:"fcba5d5750514c9c93b2cb5222609d98",alias:"future-population-profile-ja"},{id:"7ad858351b6b4268b791b6cc24bf4e0f",alias:"population-households-profile-ja"},{id:"7d94fec6df6b4bff9ad14f5b711f18c6",
alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"571f323738c44d5a8b85d6d1e78d9c52",alias:"base-demographic-profile"},{id:"ef7624e051b6407488d8ad59b7979fc4",alias:"household-profile"}],"ES.ESP_AIS":[{id:"46e9329c7b2042fa84dfc1444f7decc0",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"0cb7ba4d407640ff967829ae7dd39396",alias:"at-risk-population"},{id:"7598826f28124abf9134801a607d56ce",alias:"commute-profile"},{id:"848c5cc8a4284065a0055b047a106adf",alias:"demographic-summary"},
{id:"ecfc8db522004ea6848667e43589efd9",alias:"health-care-and-insurance"},{id:"4685d4c6c51e4ef392bdab89c0af8979",alias:"coronavirus-impact-planning"}],"*.census":[{id:"e4d3d1675d0044089f98a0f85ea16c8b",alias:"key-facts"},{id:"33b6e27f43644811b8a58f15c0832a67",alias:"multi-area-comparison"}]},"3.34":{"US.census":[{id:"13cd4abfa97e43b9a5f9d4ddcb43f492",alias:"demographic-summary"},{id:"8861429ac06948f79cdcaaadb39d597f",alias:"key-facts"},{id:"1056cbef133f49a18409a192fbdc221a",alias:"at-risk-population"},
{id:"25145b3ca4284dcc999c8d05182588cd",alias:"skyscraper"},{id:"7db2109b9f844be48f3e9154e992699f",alias:"executive-summary-call-outs"},{id:"f43c00c7b10241c097fb71fd5acf1ec2",alias:"tapestry-profile"},{id:"5fb04926a70345c18d6e21d9972ea347",alias:"nearby-restaurants"},{id:"fdd0406e7815402cbf70716c68f4f7d6",alias:"multi-area-comparison"},{id:"7b716975146743b3a56762befaca71ad",alias:"property-details"},{id:"2c0be4fe4d7245e39b4afd9b8eb607a9",alias:"employment-overview"},{id:"c7f42910bc4b49209835e333c6078e71",
alias:"office-market-profile"},{id:"7517a7a0409d42748c7ad94f81322bc2",alias:"health-care-and-insurance"},{id:"9919270d8b4846cb86761103def73e76",alias:"demographic-profile"},{id:"0bb0cc183ae145febbf3585518eeaae6",alias:"commute-profile"},{id:"27853eda823e4574b0666d533ba39061",alias:"target-market-summary"},{id:"1df7c5b56b6e431982ef2da037c081c8",alias:"population-trends"},{id:"aaf4cc69e58f43ea87a0c1e493431dd8",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"3a2fb82b034d48bbb9474f8c158c32a8",
alias:"key-facts"},{id:"100f5b4d3cca46b38fd651e39cce97b1",alias:"multi-area-comparison"},{id:"41f7b7cfe9cb490593ace88aa627c6ca",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"f5b0ec07181f4b58a01ee0ca1df8201a",alias:"housing-profile"},{id:"a5e0b9b228da4ba5baaa5811c57f6552",alias:"insurance-profile"},{id:"5d24250e3cc14b0db3b3f9884462efbf",alias:"media-profile"},{id:"f216c6574ae0453c951e66ee8fb6b20f",alias:"personicx-segmentation"},{id:"267c816948334e72ab9ed94253790e22",alias:"spending-profile"}],"JP.EsriJapan":[{id:"434e01eacc8e432c8400f5a5aef6f3e4",
alias:"base-demographic-profile"},{id:"c44be13f1f8e412288e58048136681d6",alias:"demographic-comparison-profile"},{id:"35c0c12ce88645e7b7cbc0ffe73af85d",alias:"future-population-profile"},{id:"e87fb84cffaa49dba14b104d5b994aa5",alias:"population-households-profile"},{id:"31a4988db08c41d6b9ce755b21ea0b26",alias:"consumer-spending-profile"},{id:"bf9f0203a4c14d03823beadb3f7ac043",alias:"base-demographic-profile-ja"},{id:"fdbe0d4286ab419981bc80a96b46bdb1",alias:"demographic-comparison-profile-ja"},{id:"7541a90960e345308f73e99e4da5c0a8",
alias:"future-population-profile-ja"},{id:"f17ecec5cb8d4baeab7af68e1e9ce683",alias:"population-households-profile-ja"},{id:"ddaf4fb6c09447f6beaf4218139bfa20",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"80c74804e91440f08695ba11456f96af",alias:"base-demographic-profile"},{id:"eb49e7ee98f04e1e914a4ce29bbfc7d3",alias:"household-profile"}],"ES.ESP_AIS":[{id:"2e82d587530548569ad792556044342b",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"b473aa30469e4e2eabcca3da3f306e94",alias:"at-risk-population"},
{id:"4e91594fb4fe4bf3be24380408f1b0c6",alias:"commute-profile"},{id:"321c818398684510ac62e3403ad6628f",alias:"demographic-summary"},{id:"1c3d60191b12460ca9a23dfcbce0c1db",alias:"health-care-and-insurance"},{id:"5e6d78b1c4aa4168b7a3af5751d92261",alias:"coronavirus-impact-planning"}],"*.census":[{id:"530b6aa054664166a7a3ab5f1e82e19b",alias:"key-facts"},{id:"4b8ddef8e8f0406ea9b0a6c3d062186a",alias:"multi-area-comparison"}]},"3.35":{"US.census":[{id:"167425f5e12d421eb5784cd3681eab45",alias:"demographic-summary"},
{id:"a1ab8710e1104385941825fe772d58fa",alias:"key-facts"},{id:"b3103dee1c994fa0916bd2b5c8ad2cab",alias:"at-risk-population"},{id:"0d261009a37247b4913266bc7093fedb",alias:"skyscraper"},{id:"2e7b01260b7840c196f30be52bf0b57e",alias:"executive-summary-call-outs"},{id:"f47aebc28aa64c7f924053a8c1ee16bd",alias:"tapestry-profile"},{id:"36e6e303ebd943d4aa55604ba7dc0bc0",alias:"nearby-restaurants"},{id:"2f6307fad95f43b193ac74f236fa82d3",alias:"multi-area-comparison"},{id:"1ac99acae7cf44c182727aca1387acc9",
alias:"property-details"},{id:"33cb09681a2147a5a07ae801596568c3",alias:"employment-overview"},{id:"8abaef7ba033448693dc6e6db55667c7",alias:"office-market-profile"},{id:"d29fcd15f66f46edad86499675b0ec03",alias:"health-care-and-insurance"},{id:"e631e96f389b4075bc249c01d7f4d1b7",alias:"demographic-profile"},{id:"f97c7b4c8bf84390ad5a5807fb6ca417",alias:"commute-profile"},{id:"c9aef7db1d56495eaf0765e1f3a2d87d",alias:"target-market-summary"},{id:"b0f42ee46e80440cbb567a9a754ba7d4",alias:"population-trends"},
{id:"ac36af7d86b74071a1cff5dc11f52ae8",alias:"coronavirus-impact-planning"}],"CA.census":[{id:"e1b06b3915bc4e9ba702a604931390f2",alias:"key-facts"},{id:"aabeb118af9d4d0ba61177b82ff20e6c",alias:"multi-area-comparison"},{id:"d91115c92b96414b8bebd5d5bee75feb",alias:"prizm-profile"}],"NL.NLD_4orange":[{id:"dc94c7a6946a49b5a2f3997a1d751b5d",alias:"housing-profile"},{id:"caaaf49e014840a2a7b2497a970fabc0",alias:"insurance-profile"},{id:"67e0ad06a076477d81f853755fe34fd9",alias:"media-profile"},{id:"2b777fe129f149e9830fa5659d83d164",
alias:"personicx-segmentation"},{id:"109338143a024b8eb70a1afcad567363",alias:"spending-profile"}],"JP.EsriJapan":[{id:"1f22c748ad5441a197c4c35ec3b88c6e",alias:"base-demographic-profile"},{id:"3321fc47d60b465bbf1f8312a2656c9d",alias:"demographic-comparison-profile"},{id:"44f656e0dd634f248501030bec1e4e56",alias:"future-population-profile"},{id:"10bee112cd5c452db06145cc97739272",alias:"population-households-profile"},{id:"9d50b931700f4d7e8bfff04362baf2b7",alias:"consumer-spending-profile"},{id:"6f15e753e76741e5b11443d987f9e31b",
alias:"base-demographic-profile-ja"},{id:"c89ff30c389b4af28c5e95d56b8b8a2b",alias:"demographic-comparison-profile-ja"},{id:"82cf4d90d4444a9fab0db12c38398ddb",alias:"future-population-profile-ja"},{id:"de0f4294ae8548f8852d3cfc44689262",alias:"population-households-profile-ja"},{id:"aa60be09466d494dab06b7fd3f227838",alias:"consumer-spending-profile-ja"}],"DE.DEU_Nexiga":[{id:"f65d4ab5669541eb82f8cfa44892076d",alias:"base-demographic-profile"},{id:"8f24b985758840bc865eb510c3a096c4",alias:"household-profile"}],
"ES.ESP_AIS":[{id:"19973b06ff48411cbe8da96db2201889",alias:"base-demographic-profile"}],"PR.PRI_ACS_2020":[{id:"08263fc5aa27402284ad1dd80de03ffe",alias:"at-risk-population"},{id:"1386ceb53e0741428b78182d5ad1295c",alias:"commute-profile"},{id:"52ca001ddcf54d4eab0bbc476a962486",alias:"demographic-summary"},{id:"79480fbe1f5048b69bc0611a2828d74b",alias:"health-care-and-insurance"},{id:"4a9c5dbf1ee6480bbed9a48bdb8aa2ed",alias:"coronavirus-impact-planning"}],"TH.EsriThailand":[{id:"1b202dbb81d7436c91dbd98f7f16da74",
alias:"demographic-by-gender"},{id:"a7575375c72244e3819a694bf6dcbd52",alias:"key-facts-circle"},{id:"d446734d5e3e4d13a4c1aebdd9497793",alias:"population-profile"}],"*.census":[{id:"de0d25e45d4549439c440d9f893afe18",alias:"key-facts"},{id:"19f9971696f74bae8c8fd383a61abac3",alias:"multi-area-comparison"}]}}}function f(c){var g=k();c=c||q.jsapiVersion;c=g[c]||g["3.35"];g={};for(var h in c){var m={};c[h].forEach(function(n){m[n.alias]=n.id});var p=h.substr(0,h.indexOf("."));g[p]=m}return g}function e(c,
g){g=f(g);return t.mixin({},g["*"],g[c])}l=l.geoenrichment.dijit.ReportPlayer.StandardTemplates;var a,b={"demographic-summary":l.demographicSummary,"key-facts":l.keyFacts,"marketing-profile":l.marketingProfile,"at-risk-population":l.atRiskPopulation,"portrait-property-flyer":l.portraitPropertyFlyer,skyscraper:l.skyscraper,"transportation-to-work":l.transportationToWork,"health-care":l.healthCare,"executive-summary-call-outs":l.executiveSummaryCallOuts,"tapestry-profile":l.tapestryProfile,"nearby-restaurants":l.nearbyRestaurants,
"multi-area-comparison":l.multiAreaComparison,"property-details":l.propertyDetails,"employment-overview":l.employmentOverview,"office-market-profile":l.officeMarketProfile,"health-care-and-insurance":l.healthCareAndInsuranceStatistics,"demographic-profile":l.demographicProfile,"commute-profile":l.commuteProfile,"target-market-summary":l.targetMarketSummary,"population-trends":l.populationTrends,"coronavirus-impact-planning":l.coronavirusImpactPlanning,"prizm-profile":l.prizmProfile,"housing-profile":l.housingProfile,
"insurance-profile":l.insuranceProfile,"media-profile":l.mediaProfile,"personicx-segmentation":l.personicxSegmentation,"spending-profile":l.spendingProfile,"base-demographic-profile":l.baseDemographicProfile,"demographic-comparison-profile":l.demographicComparisonProfile,"future-population-profile":l.futurePopulationProfile,"population-households-profile":l.populationHouseholdsProfile,"consumer-spending-profile":l.consumerSpendingProfile,"base-demographic-profile-ja":"\u57fa\u672c\u7d71\u8a08\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb",
"demographic-comparison-profile-ja":"\u4eba\u53e3\u7d71\u8a08\u6bd4\u8f03\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","future-population-profile-ja":"\u5c06\u6765\u4eba\u53e3\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","population-households-profile-ja":"\u4eba\u53e3\u30fb\u4e16\u5e2f\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","consumer-spending-profile-ja":"\u6d88\u8cbb\u984d\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb","household-profile":l.householdProfile},d={portalUrl:"http://www.arcgis.com",user:"esri_reports",query:"http://www.arcgis.com/home/search.html?q\x3downer%3Aesri_reports",
aliasToID:function(c,g,h){return e(c,h)[g]},aliasToLabel:function(c){return b[c]},getAliases:function(c,g){c=Object.keys(e(c,g));c.sort(function(h,m){return h.localeCompare(m)});return c},getListOptions:function(c,g){return d.getAliases(c,g).map(function(h){return{value:d.aliasToID(c,h,g),label:b[h]}})},getSupportedCountries:function(c){return Object.keys(f(c)).map(function(g){return"*"===g?"AU":g})},getLibrary:function(){var c=t.clone(k()),g;for(g in c){var h=c[g];h["AU.census"]=h["*.census"];delete h["*.census"]}return c}};
return d})},"esri/dijit/geoenrichment/utils/PortalQueryUtil":function(){define([],function(){var t={combineQueryString:function(q){var l="";q.type&&(l+='type:"'+q.type+'"');q.typeKeywords?l=Array.isArray(q.typeKeywords[0])?l+(" typekeywords:("+q.typeKeywords.map(function(k){return t.combineTypeKeywords(k)}).join(" OR ")+")"):l+(" typekeywords:"+t.combineTypeKeywords(q.typeKeywords,q.typeKeywordsNot)):q.typeKeywordsNot&&(l+=" typekeywords:"+t.combineTypeKeywords(null,q.typeKeywordsNot));q.owner&&(l+=
" owner:"+q.owner);q.isShared&&(l+=q.orgId?" ((orgid:"+q.orgId+' AND access:"public") OR access:"shared" OR access:"org")':' (access:"shared" OR access:"org")');q.ownerNot&&(l+=" NOT owner:"+q.ownerNot);return l},combineTypeKeywords:function(q,l){q=q?t._combineArray(q):"";return l?(l=t._combineArray(l," OR "),"("+q+" NOT "+l+")"):q},_combineArray:function(q,l){var k="string"===typeof q?q:1===q.length?q[0]:null;return k?"("===k.charAt(0)||'"'===k.charAt(0)?k:'"'+k+'"':"("+q.map(function(f){return'"'+
f+'"'}).join(l||" ")+")"}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonAnalyzer":function(){define(["./query/TemplateJsonQueryUtil"],function(t){return{collectVariablesStats:function(q){var l={};t.processTemplateFieldInfos(q,function(k){k.infographicJson&&k.infographicJson.variables?k.infographicJson.variables.forEach(function(f){l[f]=1}):k.hasVariable&&(k.usedMapTos?k.usedMapTos.forEach(function(f){l[f]=1}):k.fullName&&(l[k.fullName]=1))});
return l},collectMapItemIdsAndNames:function(q){var l={},k={};t.calcNumberOfMaps(q,function(a){a.defaultBasemapId&&(l[a.defaultBasemapId]=1);a.defaultBasemapName&&(k[a.defaultBasemapName]=1);a.webMapId&&(l[a.webMapId]=1);a.webMapName&&(k[a.webMapName]=1)});q=[];for(var f in l)q.push(f);var e=[];for(f in k)e.push(f);return{itemIds:q,mapNames:e}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/infographics/utils/InfographicJsonUtil":function(){define(["esri/dijit/geoenrichment/config","esri/dijit/geoenrichment/utils/ArrayUtil"],
function(t,q){var l={getDefaultLevels:function(){var k=t.levels.slice();k.push(t.highestLevel);return k},getLevels:function(k){k=k.levels&&k.levels.length?k.levels:l.getDefaultLevels();return q.removeDuplicates(k)},getSubLevels:function(k){k=l.getLevels(k);k.pop();return k},getHighestLevel:function(k){k=l.getLevels(k);return k[k.length-1]},setLevels:function(k,f){f=q.removeDuplicates(f||[]);k.levels=f.length?f:l.getDefaultLevels()},getDataDrilling:function(k,f){"string"!==typeof f&&(f=(f=k.variableTables&&
k.variableTables[f])&&f.variable.fieldInfo&&f.variable.fieldInfo.templateName);return k.dataDrilling&&k.dataDrilling[f]},setDataDrilling:function(k,f,e){f&&(k.dataDrilling=k.dataDrilling||{},e?k.dataDrilling[f]=e:delete k.dataDrilling[f])},validateDataDrilling:function(k){var f=k.dataDrilling;if(f){var e={};k.variableTables.forEach(function(a){a.variable&&a.variable.fieldInfo&&a.variable.fieldInfo.templateName&&(e[a.variable.fieldInfo.templateName]=!0)});Object.keys(f).forEach(function(a){e[a]||delete f[a]})}},
analyzeVariables:function(k){k=k.fieldInfos?k.fieldInfos.map(function(b){return b.fullName}):k.variables;if(1===k.length&&-1!==k[0].indexOf(".*"))return{dataCollectionID:k[0].substr(0,k[0].indexOf("."))};var f={},e,a;k.forEach(function(b,d){f[b.substr(0,b.indexOf("."))]=1;e=b.substr(b.indexOf(".")+1);a=b});return{dataCollectionID:1===Object.keys(f).length?Object.keys(f)[0]:null,variableID:1===k.length?e:null,fullName:1===k.length?a:null}}};return l})},"esri/dijit/geoenrichment/config":function(){define(["esri/urlUtils"],
function(t){t=t.getProtocolForWebResource();return{portalUrl:t+"//arcgis.com",server:t+"//geoenrich.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer",levels:["Admin3","Admin2"],highestLevel:"Admin1",locatorUrl:t+"//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",addressFormat:"${Address}, ${City}, ${Region} ${Postal}"}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/AreasPreprocessor":function(){define("dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all dojo/string esri/graphic esri/symbols/jsonUtils ./FeatureNameUtil ../tasks/EnrichAreasTask esri/dijit/geoenrichment/utils/GeometryUtil esri/dijit/geoenrichment/ReportPlayer/config dojo/i18n!esri/nls/jsapi".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g){var h={preprocessAreas:function(r,u){u=u||{};r.analysisAreas=r.analysisAreas.filter(function(v){return v.feature&&v.feature.geometry&&"polygon"===v.feature.geometry.type||v.geographies&&v.geographies.length||v.buffer});-1!==u.analysisAreasLimit&&(u.analysisAreasLimit=u.analysisAreasLimit||20,r.analysisAreas.length=Math.min(r.analysisAreas.length,u.analysisAreasLimit));h.provideAreasIndexes(r);r.analysisAreas.forEach(function(v){v.feature&&!v.feature.attributes&&(v.feature.attributes=
{})});r.analysisAreas.forEach(function(v){v.name=v.name||v.shortName;if(!v.name&&v.feature){var y=a.guessFeatureName(v.feature);y&&(v.name=v.shortName=y)}});return q(m.generalize(r.analysisAreas),function(){return l([p.provideGeographyFeatures(r),n.provideBufferFeatures(r)])})},provideAreasIndexes:function(r){var u=r.combinedAreasInfo.groups,v=u&&u.length;r.analysisAreas.forEach(function(y,A){y.index=A;u&&(u.forEach(function(C,E){-1!==C.indexes.indexOf(A)&&(y.isGrouped=!0,y.groupIndex=E)}),"number"!==
typeof y.groupIndex&&(y.isGrouped=!1,y.groupIndex=v++))})},removeGroupInfo:function(r){r.forEach(function(u){delete u.isGrouped;delete u.groupIndex})}},m={generalize:function(r){var u=[],v=[];r.forEach(function(y,A){!y.feature||y.geographies&&y.geographies.length||(u.push(y.feature),v.push(A))});return q(function(y){function A(w){var z=0;w.geometry.rings.forEach(function(H){z+=H.length});return z}var C=d.needGeneralizeGeometry(y,c.generalization.factor,c.generalization.maxVerticesInAllFeatures,c.generalization.numVerticesPerFeature);
if(C){var E=!0;var F=[];y=y.map(function(w){F.push(A(w));return new f(w.geometry,w.symbol,w.attributes)});var B=d.generalizeGeometry(y,C,c.generalization.numVerticesPerFeature,!0)}return q(B,function(){E&&(console.log("Generalize features:"),y.forEach(function(w,z){console.log("#"+z+" "+F[z]+" \x3d\x3e "+A(w))}));return y})}(u),function(y){v.forEach(function(A){r[A].feature=y.shift()})})}},p={provideGeographyFeatures:function(r){return l(r.analysisAreas.map(function(u){if(!u.feature&&u.geographies&&
u.geographies.length)return(new b).createFeatureForGeographies(u.geographies,{countryID:r.countryID,hierarchy:r.hierarchy}).then(function(v){u.feature=v;u.name=u.name||u.feature.attributes.StdGeographyName;u.description=u.description||g.geoenrichment.dijit.ReportPlayer.ReportPlayer.geography;u.address=u.address||u.name;u.geographies[0].attributes&&t.mixin(u.feature.attributes,u.geographies[0].attributes);if(v=u.geographies[0].symbol)v=v.toJson?v:e.fromJson(v),u.feature.setSymbol(v)})}))}},n={provideBufferFeatures:function(r){var u=
this,v=r.analysisAreas.filter(function(A){return!A.feature&&A.buffer}),y=v.map(function(A){return A.buffer});return(new b).createFeaturesForBuffers(y,{countryID:r.countryID}).then(function(A){A.forEach(function(C,E){E=v[E];E.feature=C;u._applyBufferParamsToArea(E)})})},_applyBufferParamsToArea:function(r){var u=r.buffer;if(!r.name){var v=g.geoenrichment.dijit.bufferTitle.pointRing;v[u.units]&&(r.name=k.substitute(v[u.units],{radius:u.radius}))}r.description=r.description||"Ring";u.attributes&&t.mixin(r.feature.attributes,
u.attributes);if(u=u.symbol)u=u.toJson?u:e.fromJson(u),r.feature.setSymbol(u)}};return h})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/areas/FeatureNameUtil":function(){define([],function(){return{_nameScores:[/^name$/i,/^title$/i,/(^name)|(name$)/i,/(^title)|(title$)/i],guessFeatureName:function(t){var q=Object.keys(t.attributes),l;this._nameScores.some(function(k){return q.some(function(f){if(k.test(f))return l=f,!0})});return t.attributes[l]||""}}})},"esri/dijit/geoenrichment/utils/GeometryUtil":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/geometry/Polygon esri/workers/WorkerClient ./PolygonUtil ./GeometryUtil_base".split(" "),
function(t,q,l,k,f,e){function a(d,c,g){var h=new q,m=new k("./mutableWorker",function(){m.importScripts(["../dijit/geoenrichment/utils/GeometryUtil_worker","../dijit/geoenrichment/utils/GeometryUtil_base"]).then(function(){m.postMessage({rings:d,maxAllowableOffset:g}).then(function(p){var n=p.rings;c.forEach(function(r){for(var u=r.source.length=0;u<r.count;u++)r.source.push(n.shift())});h.resolve();m.terminate()})})},!0);return h.promise}var b=t.mixin({},e);b.calculateMaxAllowableOffset=function(d,
c,g){"number"!==typeof c&&(c=1);c*=d.extent.getWidth()/d.width;g&&(c*=Math.min(g.getWidth()/d.extent.getWidth(),g.getHeight()/d.extent.getHeight()));return c};b.getNumberOfPoints=f.getNumberOfPoints;b.needGeneralizeGeometry=function(d,c,g,h){if(!d||!c)return!1;h=h||(g?g/10:500);g=g||5E3;Array.isArray(d)||(d=[d]);var m=0>c,p=0,n=Math.abs(c)/100,r=0,u=0,v;d.forEach(function(y){y=y.geometry||y;if(!y.rings||!y.getExtent)return!1;var A=y.getExtent();if(A=A.getWidth()*A.getHeight())A=Math.sqrt(A),y=b.getNumberOfPoints(y),
r+=y,u=Math.max(u,y),m&&(p=Math.max(p,A*n)),v||(v=m?r>g:y*c>4*A)});return v&&u>h?p||c:0};b.generalizeGeometry=function(d,c,g,h){if(!d||!c||0>c)return!1;g=g||500;Array.isArray(d)||(d=[d]);var m=[],p=[];d.map(function(n){var r=n.geometry||n;if(r!=n&&r.rings){n.geometry=new l;n.geometry.setSpatialReference(r.spatialReference);var u=n.geometry.rings}u&&r.rings.forEach(function(v){u.push(v.slice())});b.getNumberOfPoints(r)>g&&(n=u||r.rings,m=m.concat(n),p.push({source:n,count:n.length}))});if(h&&window.Worker)return a(m,
p,c);m.forEach(function(n){(new b.RingInfo(n)).generalize(c,.8)})};return b})},"esri/workers/WorkerClient":function(){define("dojo/Evented dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/request ../sniff ../kernel ../urlUtils require".split(" "),function(t,q,l,k,f,e,a,b,d){var c=window.Blob||window.webkitBlob||window.mozBlob,g=window.URL||window.webkitURL||window.mozURL;t=q([t],{declaredClass:"esri.workers.WorkerClient",worker:null,returnDeferreds:!1,_queue:null,constructor:function(h,m,p){this._isIE=
e("ie");this.returnDeferreds=!!p;this._queue={};this._acceptMessage=k.hitch(this,this._acceptMessage);this._errorMessage=k.hitch(this,this._errorMessage);h&&this.setWorker(h,k.hitch(this,function(n){this.worker=n;m(n)}))},setWorker:function(h,m){if(h instanceof Array){var p=h;h=p.shift()}var n=this._getUrl(h);n=b.normalize(n);h=!b.hasSameOrigin(n,location.href);if(!1===n)return console.log("Can not resolve worker path"),!1;if(this.worker){var r=this.worker;r.removeEventListener("message",this._acceptMessage,
!1);r.removeEventListener("error",this._errorMessage,!1);r.terminate();r=null}if(h){h=this._getUrl("./mutableWorker",!0);try{this._getRemoteText(h,k.hitch(this,function(u){u=g.createObjectURL(new c([u],{type:"text/javascript"}));m(this._createWorker(u,n))}))}catch(u){try{h=b.getProxyUrl(h).path+"?"+encodeURI(h),this._useProxy=!0,m(this._createWorker(h,p))}catch(v){return console.log("Can not create worker"),!1}}}else setTimeout(k.hitch(this,function(){m(this._createWorker(n,p))}),0)},_createWorker:function(h,
m){h=new Worker(h);h.addEventListener("message",this._acceptMessage,!1);h.addEventListener("error",this._errorMessage,!1);this.worker=h;m&&this.importScripts(m);return h},postMessage:function(h,m){if(h instanceof Array||"object"!=typeof h)h={data:h};var p=Math.floor(64E9*Math.random()).toString(36);h.msgId=p;p=this._queue[p]=new l;this.worker?(m?this.worker.postMessage(h,m):this.worker.postMessage(h),this.emit("start-message",{target:this,message:h})):p.reject({message:"No worker was set."});return this.returnDeferreds?
p:p.promise||p},terminate:function(){var h=Object.keys(this._queue);this.worker&&this.worker.terminate();for(var m=h.length-1;0<=m;m--)this._queue[h[m]].cancel("terminated"),delete this._queue[h[m]]},addWorkerCallback:function(h,m){var p=this._getUrl(h,!0);!1===p?(m=new l,m.reject({message:"Could not load text from "+h})):(m=this.postMessage({action:"add-callback",url:p,cbName:m||"main"}),m.then(k.hitch(this,function(n){n.target=this;this.emit("callback-added",n)})));return m},importScripts:function(h){Array.isArray(h)||
(h=[h]);h=h.map(function(m){m=this._getUrl(m,!0);this._useProxy&&!b.hasSameOrigin(m,location.href)&&(m=b.getProxyUrl(m).path+"?"+encodeURI(m));return m},this);h=this.postMessage({action:"import-script",url:h});h.then(k.hitch(this,function(m){m.target=this;this.emit("scripts-imported",m)}));return h},_acceptMessage:function(h){var m=h.data,p=m.msgId;if(m.status&&"debug"==m.status)console[m.showAs||"debug"](m);else if(p&&p in this._queue){var n=this._queue[p];"progress"==m.status?n.progress(h.data):
("error"==m.status?n.reject(h.data):n.resolve(h.data),delete this._queue[p])}this.emit("message",{message:h.data,event:h,target:this})},_errorMessage:function(h){this.onerror||this.onError?this.onerror?this.onerror(h):this.onError(h):console.log("Worker Error: "+h.message+"\nIn "+h.filename+" on "+h.lineno)},_getUrl:function(h,m){if(!h)return console.error("can not resolve empty path"),!1;h.match(/\.js$/)||(h+=".js");h=d.toUrl(h);return m?b.getAbsoluteUrl(h):h},_getRemoteText:function(h,m){(h=this._getUrl(h))&&
f.get(h,{sync:!1,handleAs:"text",headers:{"X-Requested-With":"","Content-Type":"text/plain"}}).then(function(p){m(p)})},_startBlobWorker:function(){var h=this._xdSource;h||(h=this._getUrl("./mutableWorker"),h=new c(["if(!self._mutable){importScripts('"+h+"');}"],{type:"text/javascript"}),h=this._xdSource=g.createObjectURL(h));try{return new Worker(h)}catch(m){return console.log(m.message),!1}}});e("extend-esri")&&k.setObject("workers.WorkerClient",t,a);return t})},"esri/dijit/geoenrichment/utils/GeometryUtil_base":function(){(function(t){function q(b,
d){var c=b.length;if(3>c)return 0;d||(d=b[0]);var g=d[0];d=d[1];var h=b[c-1];c=h[0]-g;for(var m=h[1]-d,p=0,n=0,r=b.length;n<r;n++){h=b[n];var u=h[0]-g;h=h[1]-d;p+=u*m-c*h;c=u;m=h}return p/2}var l={};l.calculateRingArea=q;l.calculateRingCentroid=function(b,d){var c=b.length;if(!c)return null;d||(d=b[0]);var g=d[0];d=d[1];var h=0,m=0,p=0;if(2<c){var n=b[c-1];c=n[0]-g;for(var r=n[1]-d,u=0,v=b.length;u<v;u++){n=b[u];var y=n[0]-g;n=n[1]-d;var A=y*r-c*n;h+=A;m+=(c+y)*A;p+=(r+n)*A;c=y;r=n}}0==h?m=p=0:(m/=
3*h,p/=3*h);return[g+m,d+p]};l.INTERIOR=1;l.EXTERIOR=-1;l.BOUNDARY=0;l.createRingInfo=function(b,d){return new e(b,d)};l.createSegmentCoordinates=function(b){return new a(null,0,0,b)};var k=function(b){return function(){for(var d in b){var c=b[d];this[d]="function"===typeof c?c.bind(this):c}b.ctr.bind(this).apply(this,arguments)}},f=k({xmin:null,ymin:null,xmax:null,ymax:null,spatialReference:null,ctr:function(b,d,c,g,h){this.xmin=b;this.ymin=d;this.xmax=c;this.ymax=g;this.spatialReference=h},printOut:function(){console.log([this.xmin,
this.xmax,this.ymin,this.ymax].join(" "))}}),e=k({ring:null,origin:null,area:0,clockwise:!1,extent:null,_coords:null,ctr:function(b,d){this.ring=b;this.origin=d;b=this.ring.length-1;if(!(0>b)){if(!b)b++;else if(this.ring[b][0]!=this.ring[0][0]||this.ring[b][1]!=this.ring[0][1])b++,this.ring.push(this.ring[0].slice());var c=0,g=0;d=!d;this.extent=new f(this.ring[0][0],this.ring[0][1],this.ring[0][0],this.ring[0][1]);for(var h=0;h<b;h++){var m=this.ring[h],p=m[0];d&&(c+=p);p<this.extent.xmin?this.extent.xmin=
p:p>this.extent.xmax&&(this.extent.xmax=p);p=m[1];d&&(g+=p);p<this.extent.ymin?this.extent.ymin=p:p>this.extent.ymax&&(this.extent.ymax=p)}d&&(this.origin=[c/b,g/b]);this.area=q(this.ring,this.origin);0>=this.area?this.area=-this.area:this.clockwise=!0}},setDirection:function(b){this.clockwise==!b&&(this.ring.reverse(),this.clockwise=!this.clockwise,this._coords=null)},testPoint:function(b,d){b=this.getRingCoordinates(d).testPoint(b[0]-this.origin[0],b[1]-this.origin[1]);return this.clockwise?b:-b},
generalize:function(b,d,c){function g(I,L,N){y=I;A=L;if(N||F<v)v=b,C=y-r,E=A-r,F=Math.sqrt(C*C+E*E),F>b*d?(C/=F,E/=F):F=0;v*=d}function h(){if(!F)return!0;var I=m.dx,L=m.dy,N=Math.sqrt(I*I+L*L);return N-I*C-L*E>=.9*N}d=d||.75;var m=this.getRingCoordinates(b),p=m.xs,n=m.ys,r=p[0],u=n[0],v,y,A,C,E,F=0,B=p.length-1;g(p[B],n[B],!0);for(var w=this,z=this.clockwise?function(I){w.ring.splice(I,1)}:function(I){w.ring.splice(-I-1,1)};0<B--&&4<p.length;){var H=p[B],G=n[B];m.setSegment(r,u,H,G)&&m.testPointOnTouch(y,
A,v)&&h()?(p.splice(B+1,1),n.splice(B+1,1),z(B+1),g(H,G)):(r=y,u=A,g(H,G,!0))}this._coords=null;c&&(this.area=q(this.ring,this.origin),this.clockwise||(this.area=-this.area))},getRingCoordinates:function(b,d){if(d)return new a(this.ring,d[0],d[1],b,this.extent,this.clockwise);this._coords&&this._coords.eps==b||(this._coords=new a(this.ring,this.origin[0],this.origin[1],b,this.extent,this.clockwise));return this._coords}});l.RingInfo=e;var a=k({xs:null,ys:null,extent:null,eps:NaN,dx:null,dy:null,_sx:null,
_sy:null,ctr:function(b,d,c,g,h,m){this.xs=[];this.ys=[];b||(b=[]);void 0===d&&(d=0);void 0===c&&(c=0);void 0===g&&(g=0);this.eps=Math.max(g,0);h&&(g=this.eps/2,this.extent=new f(h.xmin-d-g,h.ymin-c-g,h.xmax-d+g,h.ymax-c+g));var p=b.length-1;if(!(0>p))for(h=p?b[p][0]==b[0][0]&&b[p][1]==b[0][1]?p:p+1:1,g=m?1:-1,m=m?0:p;h--;m+=g)p=b[m],this.xs.push(p[0]-d),this.ys.push(p[1]-c)},testPoint:function(b,d){if(!this._pointBelongsToExtent(b,d))return-1;var c=this.xs.length,g=!1;this.dy=this.ys[0]-this.ys[c-
1];if(0==this.dy){for(g=c;1<g--&&(this.dy=this.ys[g]-this.ys[g-1],0==this.dy););if(0==this.dy)return 0}g=0<this.dy;for(var h=0,m=this.xs[0],p=this.ys[0],n,r,u=1;u<=c;u++,m=n,p=r)if(r=u==c?0:u,n=this.xs[r],r=this.ys[r],this.setSegment(m,p,n,r)){var v=p-d,y=r-d,A=!1;0>v&&(v=-v,y=-y,A=!0);if(!(v>this.eps&&y>this.eps)){if(this.testPointOnTouch(b,d,this.eps))return 0;0==v?0!==y&&(0>y&&(g=!g),b<m&&g&&h++):0==y?g=A:0>y&&b<m+this.dx/this.dy*(d-p)&&h++}}return 0!=h%2?1:-1},testPointOnTouch:function(b,d,c){var g=
this.findIntersectionDelta(b,d,b-this.dy,d+this.dx);b=this._sx+g*this.dx-b;d=this._sy+g*this.dy-d;return b*b+d*d<=c*c},_pointBelongsToExtent:function(b,d){return b>=this.extent.xmin&&b<=this.extent.xmax&&d>=this.extent.ymin&&d<=this.extent.ymax},setSegment:function(b,d,c,g){this._sx=b;this.dx=c-b;this._sy=d;this.dy=g-d;return 0!=this.dx||0!=this.dy},findIntersectionDelta:function(b,d,c,g,h){void 0===h&&(h=!0);c-=b;g-=d;var m=this.dy*c-this.dx*g;if(0==m)return 0;var p=b-this._sx,n=d-this._sy,r=n*c-
p*g;p=h?0:n*this.dx-p*this.dy;0>m&&(m=-m,r=-r,p=-p);return h||(p=0>p?0:p<m?p/m:1,this.testPointOnTouch(b+p*c,d+p*g,this.eps))?0>=r?0:r<m?r/m:1:-1},addPointOfSegmentAt:function(b){this.xs.push(this._sx+b*this.dx);this.ys.push(this._sy+b*this.dy)}});l.RingCoordinates=a;t.document?define(function(){return l}):t.GeometryUtil_base=l})(this)},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ReportTemplateTypes":function(){define([],function(){return{STANDARD:"esriReportTemplateStandard",MULTICOLUMN:"esriReportTemplateMultiColumn",
MAP:"esriReportTemplateMapReport",FUSION:"esriReportTemplateFusion"}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/PortalToEditorConverter":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/config ./portalToEditorUtils/layout/LayoutParser ./portalToEditorUtils/metadata/MetadataParser ./portalToEditorUtils/ImageCollector ./portalToEditorUtils/parsers/Parsers ./portalToEditorUtils/variables/PlayerVariableProvider ../supportClasses/DefaultStyles ../supportClasses/images/ImageDataHolder ../themes/conversion/CssParser esri/dijit/geoenrichment/utils/async/AsyncQueue esri/dijit/geoenrichment/utils/DelayUtil".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h){return{provideEditorJson:function(m,p){function n(){function C(w,z,H){return t(p.preProcessFile&&p.preProcessFile(w,z,r),function(G){if(!1!==G)return t(H&&H(),function(){return p.postProcessFile&&p.postProcessFile(w,z,r)})})}if(u&&u.files&&u.files){var E=p.filesToProcess||["theme.css.txt","metadata.xml","report.xml"],F={"theme.css.txt":function(w){return C(w,"theme.css.txt",function(){r.theme=c.fromCssText(w.data,p)})},"metadata.xml":function(w){return C(w,"metadata.xml",
function(){return k.parseMetadataXML(w,r,p)})},"report.xml":function(w){return C(w,"report.xml",function(){return l.parseReportXML({report:m,parsers:e,file:w,templateJson:r,variableProvider:p.variableProvider,useVariableProviderToCollectOnly:p.useVariableProviderToCollectOnly,tableDefaultStyles:p.tableDefaultStyles,processFileName:y,putImageData:function(z,H){z=y(z);H=H||v[z];d.putImageData(z,H);return H},log:A,queryMetaDataFunc:function(z){return p.queryMetaDataFunc&&p.queryMetaDataFunc(z,r)},postProcessChartJson:function(z,
H){p.postProcessChartJson&&p.postProcessChartJson(r,z,H)},postProcessMapJson:function(z,H){p.postProcessMapJson&&p.postProcessMapJson(r,z,H)},postProcessInfographicJson:function(z,H){p.postProcessInfographicJson&&p.postProcessInfographicJson(r,z,H)},postProcessTableInSection:function(z,H){p.postProcessTableInSection&&p.postProcessTableInSection(r,z,H)}})})},generic:function(w,z){return C(w,z)}},B=new g;E.forEach(function(w){var z=u.files.filter(function(G){return G.name===w})[0],H=z&&(F[w]||F.generic);
H&&B.add(function(){return t(q.isPlayerOnServer?t():h.delay(50)).then(function(){return H(z,w)}).otherwise(function(G){r.metadata.parseErrors.push(G);console.log(G)})})});return B.getPromise()}}p=p||{};p.variableProvider=p.variableProvider||new a;p.tableDefaultStyles=p.tableDefaultStyles||new b;var r={documentOptions:{},metadata:{specialTradeAreaCalculatorName:null,parseErrors:[],mapImageInfosHash:{},comparisonCalculatorsHash:{},locatorCalculatorsHash:{}},theme:null},u=m.portalJson,v={};p.getImageData=
function(C){return v[y(C)]};var y=function(C){return C?C.toLowerCase():""},A=p.log||function(C){};return t(e.initialize(),function(){return t(f.collectImageResources(u,v,y),function(){for(var C in v)d.putImageData(C,v[C]);return t(n(),function(){r.metadata.parseErrors.length||(m.templateJson=r)})})})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/LayoutParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./GraphicReportSectionsParser",
"./ClassicReportSectionsParser"],function(t,q,l){return{parseReportXML:function(k){k.log(k.file.data);var f=t.parseXml(k.file.data);k.parsers.getParser("document").parseDocument(f,k);k.report.isGraphicReport?(k.templateJson.sectionsTables=[],q.parseSectionsGraphic(f,k)):(k.templateJson.sections=[],l.parseSectionsClassic(f,k))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/GraphicReportSectionsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter"],
function(t){return{parseSectionsGraphic:function(q,l){t.queryTopJson(q,"table").forEach(function(k){try{l.templateJson.sectionsTables.push(l.parsers.getParser("section").parseTable(k,l,{fixTableWidthsForPage:!0}))}catch(f){console.log(f)}})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/layout/ClassicReportSectionsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(t){return{parseSectionsClassic:function(q,l){t.queryTopJson(q,"section").forEach(function(k){l.templateJson.sections.push(l.parsers.getParser("section").parseSection(k,
l,{fixTableWidthsForPage:!0}))});this._splitSections(l)},_splitSections:function(q){q=q.templateJson;var l=[];q.sections.forEach(function(k){function f(){e={type:k.type,stack:[]};l.push(e)}var e;f();k.stack.forEach(function(a){if("hr"===a.id){var b=!!e.stack.length;e.stack.push(a);b&&f()}else"table"===a.id?(e.stack.some(function(d){return"table"===d.id})&&f(),e.stack.push(a)):"pageBreak"===a.id?(e.stack.length&&f(),e.stack.push(a),f()):e.stack.push(a)})});l=l.filter(function(k){return!!k.stack.length});
q.sections=l}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/MetadataParser":function(){define("esri/dijit/geoenrichment/promise/all esri/dijit/geoenrichment/utils/JsonXmlConverter ./DataCollectionsCalculatorsParser ./ScriptsCalculatorsParser ./LocatorCalculatorsParser ./map/MapCalculatorsParser ./TradeAreaCalculatorsParser".split(" "),function(t,q,l,k,f,e,a){return{parseMetadataXML:function(b,d,c){c.log&&c.log(b.data);var g=q.parseXml(b.data);if(g&&g.tags)return t([a.parseTradeAreaCalculators(g,
d,c),l.parseDataCollectionsCalculators(g,d,c),k.parseScriptsCalculators(g,d,c),f.parseLocatorCalculators(g,d,c)]).then(function(){return e.parseMapCalculators(g,d,c)})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/DataCollectionsCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector","../../../../_devConfig"],function(t,q,l){return{parseDataCollectionsCalculators:function(k,f,e){t.queryJson(k,"DataCollections").forEach(function(a){var b=
t.queryJson(a,"ComparisonLevel");if(l.emulateErrors.metadataParseError)throw Error("Error test: something crashed during the parsing of the metadata!");if(e.variableProvider.isPlayerOnly||b.length)var d=q.getObjects(a);b.length&&(a={calculatorName:a.attributes.Name,levels:b.map(function(c){return c.attributes.Name}).filter(function(c){return!e.validateGeographyLevelFunc||e.validateGeographyLevelFunc(c)}),variableObjects:d.variableObjects},f&&(f.metadata.comparisonCalculatorsHash[a.calculatorName]=
a));e.variableProvider.isPlayerOnly&&(d.variableObjects.forEach(function(c){e.variableProvider.addVariable(c)}),d.scriptObjects.forEach(function(c){e.variableProvider.addScriptVariable(c)}))})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/VariableScriptCollector":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","../variables/VariableUtil"],function(t,q){var l={getObjects:function(k,f){f=l._getVariableInfo(k,f);k=l._getScriptObjects(k,
f.fieldNameToVariableCache);return{variables:f.variables,variableObjects:f.variableObjects,scriptObjects:k}},_getVariableInfo:function(k,f){var e=[];t.queryJson(k,f?/^(RawFields|Fields)$/:"Fields").forEach(function(c){e=e.concat(t.queryJson(c,/^(Field|PortalField)$/))});var a=[],b=[],d={};e.forEach(function(c){a.push(c.attributes.MapTo);if(c=q.fieldTagToVariable(c,k.attributes.Name))d[c.fieldName]=c,b.push(c)});return{variables:a,variableObjects:b,fieldNameToVariableCache:d}},_getScriptObjects:function(k,
f){var e=t.queryJson(k,"Scripts"===k.name?"Fields":"CalculatedFields")[0];e=e&&t.queryJson(e,"Script")||[];"Scripts"===k.name&&(e=e.filter(function(a){return!("STORE_ID"===a.attributes.Name||"AREA_ID"===a.attributes.Name)}));return e.map(function(a){var b=q.scriptTagToVariable(a,k.attributes.Name);b.usedFields&&(b.usedMapTos=[],b.usedFields.forEach(function(d){var c=f[d];c?c.usedMapTos?b.usedMapTos=b.usedMapTos.concat(c.usedMapTos):b.usedMapTos.push(c.fullName):console.log("Error parsing used fields for "+
d)}),f[b.fieldName]=b);return b})}};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/variables/VariableUtil":function(){define([],function(){var t={getType:function(q,l){return q?0===q.indexOf("esriFieldType")?q:"esriFieldType"+q:l},fieldTagToVariable:function(q,l){return q.attributes.MapTo&&"AREA_ID"!==q.attributes.Name?{id:q.attributes.MapTo.substr(q.attributes.MapTo.lastIndexOf(".")+1),fullName:q.attributes.MapTo,alias:q.attributes.Alias,fieldName:q.attributes.Name,
precision:Number(q.attributes.Decimals)||0,calculatorName:l,templateName:l+"."+q.attributes.Name,type:t.getType(q.attributes.Type,q.attributes.Decimals?"esriFieldTypeDouble":"esriFieldTypeString"),vintage:null,source:null}:null},scriptTagToVariable:function(q,l){return{id:q.attributes.Name,fullName:l+"."+q.attributes.Name,fieldName:q.attributes.Name,alias:q.attributes.Alias,precision:Number(q.attributes.Decimals)||0,usedFields:q.attributes.usedFields?q.attributes.usedFields.split(","):[],usedMapTos:null,
expressionText:q.tags[0].text,calculatorName:l,templateName:l+"."+q.attributes.Name,type:t.getType(q.attributes.Type,q.attributes.Decimals?"esriFieldTypeDouble":"esriFieldTypeString")}}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/ScriptsCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./VariableScriptCollector"],function(t,q){return{parseScriptsCalculators:function(l,k,f){t.queryJson(l,"Scripts").forEach(function(e){f.variableProvider.isPlayerOnly&&
(e=q.getObjects(e),e.variableObjects.forEach(function(a){f.variableProvider.addVariable(a)}),e.scriptObjects.forEach(function(a){f.variableProvider.addScriptVariable(a)}))})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/LocatorCalculatorsParser":function(){define(["esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/utils/JsonXmlConverter","../variables/VariableUtil"],function(t,q,l,k){return{parseLocatorCalculators:function(f,
e,a){f=l.queryJson(f,"Locator");return t(f.map(function(b){var d=[];l.queryJson(b,/^(PointFields|Fields)$/).forEach(function(h){d=d.concat(l.queryJson(h,/^(Field|Direction|Distance)$/))});var c=[];d.forEach(function(h){"Direction"===h.name?h.attributes.MapTo="DIRECTION":"Distance"===h.name&&(h.attributes.MapTo="DISTANCE");(h=k.fieldTagToVariable(h,b.attributes.Name))&&c.push(h)});var g={calculatorName:b.attributes.Name,variableObjects:c,layerID:null,layerUrl:null,layerName:b.attributes.LayerName};
b.attributes.Points&&0===b.attributes.Points.indexOf("std:")?g.layerID=b.attributes.Points.replace("std:",""):g.layerUrl=b.attributes.Layer;e.metadata.locatorCalculatorsHash[b.attributes.Name]=g;a.variableProvider.isPlayerOnly&&c.forEach(function(h){a.variableProvider.addVariable(h)});return q(!a.validateLocatorCalculator||a.validateLocatorCalculator(g.layerID,g.layerUrl),function(h){g.isValid=h})}))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MapCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter",
"./MetadataToRendererParser","./MapTagsUtil","esri/dijit/geoenrichment/utils/ImageUtil"],function(t,q,l,k){var f={parseMapCalculators:function(e,a,b){t.queryJson(e,"Maps").forEach(function(d){t.queryJson(d,"Map").forEach(function(c){var g=f._parsePortalLayers(c),h=f._parseStudyAreas(c);g={fieldName:c.attributes.Name,width:Number(c.attributes.Width),height:Number(c.attributes.Height),defaultBasemapId:g.defaultBasemapId,defaultBasemapName:g.defaultBasemapName,webMapId:g.webMapId,webMapName:g.webMapName,
additionalLayerInfos:f._parseAdditionalLayers(c,a),pinSymbolJson:f._parseSiteLayerPinSymbol(c,b),areaSymbolJsons:h.symbolJsons,areaSymbolRamp:h.ramp,mapScale:Number(c.attributes.Scale)||null};a&&(a.metadata.mapImageInfosHash[d.attributes.Name+"."+c.attributes.Name]=g)})})},_parsePortalLayers:function(e){var a;e=t.queryJson(e,"Layer").filter(function(b){return!(!b.attributes.PortalItemId&&!b.attributes.MapName)});1<e.length&&(a=e.shift());e=e.shift();return{defaultBasemapId:a&&a.attributes.PortalItemId,
defaultBasemapName:a&&a.attributes.MapName,webMapId:e&&e.attributes.PortalItemId,webMapName:e&&e.attributes.MapName}},_parseAdditionalLayers:function(e,a){var b=[];t.queryJson(e,/^(Layer|LocatorResultsLayer|ComparisonResultsLayer)$/).filter(function(d){return!!d.attributes.ServiceUrl||"LocatorResultsLayer"===d.name||"ComparisonResultsLayer"===d.name}).forEach(function(d){if(d.attributes.ServiceUrl)b.push({url:d.attributes.ServiceUrl});else if("LocatorResultsLayer"===d.name){var c=d.tags&&d.tags.filter(function(h){return"Renderer"===
h.name})[0],g=a.metadata.locatorCalculatorsHash[d.attributes.CalculatorName];g&&g.isValid&&b.push({isLocatorLayer:!0,layerName:d.attributes.LayerName,calculatorName:d.attributes.CalculatorName,calculatorInfo:g,rendererJson:c&&q.parseRendererJson(c)})}else"ComparisonResultsLayer"===d.name&&((c=(c=d.tags&&d.tags.filter(function(h){return"Renderer"===h.name})[0])&&q.parseRendererJson(c))&&"esriTS"===c.uniqueValueInfos[0].symbol.type?b[b.length-1].labelRendererJson=c:(g=(g=d.tags&&d.tags.filter(function(h){return"LabelingInfo"===
h.name})[0])&&q.parseLabelRendererJson(g),b.push({isComparisonLayer:!0,calculatorName:d.attributes.CalculatorName,rendererJson:c,labelRendererJson:g})))});return b.length&&b},_parseSiteLayerPinSymbol:function(e,a){var b;if(e=t.queryJson(e,"SiteLayer")[0])if((e=t.queryJson(e,"Symbol")[0])&&"Image"===e.attributes.Type)(a=a.getImageData(e.attributes.Name))&&(b={type:"esriPMS",contentType:k.getContentType(a),imageData:k.base64DataFromDataURL(a),url:e.attributes.Url,width:Number(e.attributes.Width),height:Number(e.attributes.Height),
angle:Number(e.attributes.Angle)||0,xoffset:Number(e.attributes.XOffset)||0,yoffset:Number(e.attributes.YOffset)||0});else if(e&&"Marker"===e.attributes.Type){b=(b=t.queryJson(e,"Fill")[0])&&t.queryJson(b,"Color")[0];var d=(a=t.queryJson(e,"Outline")[0])&&t.queryJson(a,"Color")[0];b={type:"esriSMS",style:"esriSMS"+(e.attributes.Style||"Circle"),size:Number(e.attributes.Size),angle:Number(e.attributes.Angle)||0,xoffset:Number(e.attributes.XOffset)||0,yoffset:Number(e.attributes.YOffset)||0,color:l.parseColorTag(b),
outline:a&&{type:"esriSLS",color:l.parseColorTag(d),style:"esriSLS"+(a.attributes.Style||"Solid"),width:void 0===a.attributes.Width?0:Number(a.attributes.Width)}}}return b},_parseStudyAreas:function(e){var a=(e=t.queryJson(e,"StudyAreasLayer")[0])&&t.queryTopJson(e,"SymbolsPalette")[0];e=(a&&t.queryTopJson(a,"Symbol")||[]).map(f._parseAreaSymbol);var b=a&&t.queryTopJson(a,"SymbolRamp")[0],d;b&&(a=t.queryTopJson(b,"First")[0],b=t.queryTopJson(b,"Last")[0],a=a&&t.queryTopJson(a,"Symbol")[0],b=b&&t.queryTopJson(b,
"Symbol")[0],a&&b&&(d=[a,b].map(f._parseAreaSymbol)));return{ramp:d,symbolJsons:e}},_parseAreaSymbol:function(e){var a=t.queryJson(e,"Fill")[0];a=a&&t.queryJson(a,"Color")[0];var b=(e=t.queryJson(e,"Outline")[0])&&t.queryJson(e,"Color")[0];return{type:"esriSFS",style:"esriSFSSolid",color:l.parseColorTag(a)||[0,0,0,1],outline:e&&{type:"esriSLS",color:l.parseColorTag(b),style:"esriSLS"+(e.attributes.Style||"Solid"),width:void 0===e.attributes.Width?0:Number(e.attributes.Width)}}}};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MetadataToRendererParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlTypedConverter",
"esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(t,q){return{parseRendererJson:function(l){return t.parseXml(q.parseJson(l))},parseLabelRendererJson:function(l){return{type:"uniqueValue",field1:"StdGeographyLevel",uniqueValueInfos:t.parseXml(q.parseJson(l)).map(function(k){return{value:k.where.match(/StdGeographyLevel='(.*?)'/)[1],symbol:k.symbol}})}}}})},"esri/dijit/geoenrichment/utils/JsonXmlTypedConverter":function(){define(["dojo/_base/declare","./RegExpUtil"],function(t,q){return t(null,
{parseJson:function(l,k){function f(d,c){if("string"===typeof d)b+="\x3c"+c+' type\x3d"string"\x3e'+q.encodeXML(d,!1)+"\x3c/"+c+"\x3e";else if("number"===typeof d)b+="\x3c"+c+' type\x3d"number"\x3e'+d+"\x3c/"+c+"\x3e";else if("boolean"===typeof d)b+="\x3c"+c+' type\x3d"boolean"\x3e'+d+"\x3c/"+c+"\x3e";else if(Array.isArray(d))e(d,c);else if(d&&"object"===typeof d){b+="\x3c"+c+' type\x3d"object"\x3e';for(var g in d)f(d[g],g);b+="\x3c/"+c+"\x3e"}}function e(d,c){b+="\x3c"+c+' type\x3d"array"\x3e';d.forEach(function(g){f(g,
"item")});b+="\x3c/"+c+"\x3e"}var a=k&&k.rootName||"root",b="";k&&k.addDocumentOptions&&(b+='\x3c?xml version\x3d"1.0" encoding\x3d"utf-8"?\x3e');f(l,a);return b=decodeURIComponent(encodeURIComponent(b).replace("%19",""))},parseXml:function(l){function k(g){if(!g.attributes)return null;for(var h=0;h<g.attributes.length;h++){var m=g.attributes[h];if("type"===m.name)return m.value}return null}function f(g,h){if(h.childNodes)for(var m=0,p=h.childNodes.length;m<p;m++){var n=h.childNodes[m],r=e(n);void 0!==
r&&(g[n.nodeName]=r)}return g}function e(g){var h=k(g);if(g.nodeName&&h)switch(h){case "string":return g.childNodes[0]?q.decodeXML(g.childNodes[0].nodeValue):"";case "number":return Number(g.childNodes[0].nodeValue);case "boolean":return"true"===g.childNodes[0].nodeValue;case "object":return f({},g);case "array":return a([],g)}}function a(g,h){if(h.childNodes)for(var m=0,p=h.childNodes.length;m<p;m++)g[m]=e(h.childNodes[m]);return g}var b;l=(new DOMParser).parseFromString(l,"text/xml").childNodes;
for(var d=0;d<l.length;d++)if(1===l[d].nodeType){var c=l[d];break}c&&(l=k(c),"object"===l?f(b={},c):"array"===l&&a(b=[],c));return b}})()})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/MapTagsUtil":function(){define([],function(){return{parseColorTag:function(t){if(!t)return null;t=t.attributes;return[Number(t.Red)||0,Number(t.Green)||0,Number(t.Blue)||0,t.Transparency?255*(1-Number(t.Transparency)/100):255]}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/TradeAreaCalculatorsParser":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter",
"./VariableScriptCollector","../../../supportClasses/templateJsonUtils/fieldInfo/FieldLibrary"],function(t,q,l){return{parseTradeAreaCalculators:function(k,f,e){k=t.queryJson(k,"SpecialTradeAreaFields");f.metadata.specialTradeAreaCalculatorName=k[0]&&k[0].attributes&&k[0].attributes.Name;k.forEach(function(a){e.variableProvider.isPlayerOnly&&q.getObjects(a,!0).variableObjects.forEach(function(b){b.alias=b.alias||l.getFieldLabel(b.id);e.variableProvider.addVariable(b)})})}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/ImageCollector":function(){define(["esri/dijit/geoenrichment/when",
"esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/utils/DataUtil","esri/dijit/geoenrichment/utils/ImageUtil","esri/dijit/geoenrichment/utils/ImageInfoUtil"],function(t,q,l,k,f){return{collectImageResources:function(e,a,b){function d(g){return t(f.getImageInfo(a[g],g),null,function(){/\.svg$/.test(g)||delete a[g]})}e&&e.files&&e.files.forEach(function(g){var h=l.getContentType(g.name);h&&"image/"===h.substr(0,6)&&(a[b(g.name)]=k.base64DataToDataURL(g.data,h))});e=[];for(var c in a)e.push(d(c));
return q(e)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/Parsers":function(){define(["esri/dijit/geoenrichment/Deferred","require"],function(t,q){var l={},k={},f;l.initialize=function(){if(f)return f.promise;f=new t;q("./DocumentParser ./ChartConverterPtoE ./InfographicConverterPtoE ./SectionParser ./FieldParser ./FilterParser ./SortingParser ../../../supportClasses/templateJsonUtils/fieldInfo/utils".split(" "),function(e,a,b,d,c,g,h,m){k.document=e;k.chart=
a;k.infographic=b;k.section=d;k.field=c;k.filter=g;k.sorting=h;m.init().then(f.resolve)});return f.promise};l.getParser=function(e){return k[e]};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/variables/PlayerVariableProvider":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/string","dojo/i18n!esri/nls/jsapi"],function(t,q,l,k){k=k.geoenrichment.dijit.ReportPlayer.Variables;var f=t(null,{variable:null,constructor:function(e){this.variable=e},calculate:function(e){return 0},
getCalcType:function(){return"n/"},getAliasWithType:function(){return this.variable.alias},getDescriptionWithType:function(){return this.variable.alias},getDecimals:function(){return this.variable.precision||0}});return t(null,{isPlayerOnly:!0,_fieldNameToVariableCache:null,_templateNameToVariableCache:null,constructor:function(e){this._templateNameToVariableCache=e&&e.templateNameToVariableCache||{};this._fieldNameToVariableCache={};for(var a in this._templateNameToVariableCache)e=this._templateNameToVariableCache[a],
this._fieldNameToVariableCache[e.fieldName]=e},get:function(e){return this._templateNameToVariableCache[e]||this._fieldNameToVariableCache[e]},toCalculator:function(e){return(e=this.get(e))&&new f(e)},addVariable:function(e){this._fieldNameToVariableCache[e.fieldName]=e;this._templateNameToVariableCache[e.templateName]=e},addScriptVariable:function(e){this._fieldNameToVariableCache[e.fieldName]=e;this._templateNameToVariableCache[e.templateName]=e},getVariables:function(){return Object.keys(this._fieldNameToVariableCache).map(function(e){return this._fieldNameToVariableCache[e]},
this)},getVariablesDataVintageDescription:function(e){var a={},b={},d={};this.getVariables().forEach(function(g){g.fullName&&(d[g.fullName.toLowerCase()]=g)});for(var c in e.usedVariablesCache)if(e=d[c.toLowerCase()])e.vintage&&(b[e.vintage]=1),e.source&&(a[e.source]=1);if(!Object.keys(a).length&&!Object.keys(b).length)return"";c=[];Object.keys(a).length&&c.push(l.substitute(k.sourcePattern,{source:Object.keys(a).join(", ")}));Object.keys(b).length&&c.push(l.substitute(k.vintagePattern,{vintage:Object.keys(b).join(", ")}));
return c.join(" ")},toJson:function(){return{templateNameToVariableCache:q.clone(this._templateNameToVariableCache)}}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DefaultStyles":function(){define(["dojo/_base/declare","dojo/_base/lang","esri/dijit/geoenrichment/utils/ColorUtil"],function(t,q,l){return t(null,{_styles:null,_stylesArray:null,constructor:function(k){this._styles={Default:{color:"#4C4C4C",backgroundColor:"#FFFFFF"}};q.mixin(this._styles,k);this._stylesArray=[];for(var f in this._styles)this._stylesArray.push(f)},
getStyle:function(k){return this._styles[k]},getStylesArray:function(){return this._stylesArray},tryApplyStyle:function(k,f,e){if(f=this.getStyle(f))for(var a in f)e&&void 0!==k[a]||(k[a]=f[a])},findDefaultStyle:function(k){var f,e=this;this.getStylesArray().some(function(a){var b=e.getStyle(a),d;for(d in b){if(!k[d])return!1;if("color"===d||"backgroundColor"===d){if(!l.colorsEqual(k[d],b[d]))return!1}else if(k[d]!==b[d])return!1}f=a;return!0});return f}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/images/ImageDataHolder":function(){define(["esri/dijit/geoenrichment/utils/CacheUtil"],
function(t){function q(){return t.get("ImageDataHolder.imageData")}function l(){return t.get("ImageDataHolder.fileNameToOriginal")}return{putImageData:function(k,f){if("string"===typeof k&&f){var e=k.toLowerCase();l()[e]=k;q()[e]=f}else console.error("Invalid image filename or data!")},getImageData:function(k){return"string"!==typeof k?null:q()[k.toLowerCase()]},findFileNameByData:function(k){var f=q(),e;for(e in f)if(k===f[e])return l()[e];return null}}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/conversion/CssParser":function(){define(["../PageBorderStyles",
"../ThemeUpdateUtil","../../../_devConfig"],function(t,q,l){var k={"font-size":"fontSize","font-family":"fontFamily","font-style":"fontStyle","font-weight":"fontWeight","text-decoration":"textDecoration",color:"color","background-color":"backgroundColor",opacity:"opacity",url:"data","background-position":"position","background-repeat":"repeat","background-size":"scale"},f={colors:1,colors3series:1};return{fromCssText:function(e){function a(p){var n=g;p.split("@").forEach(function(r){n=n[r]=n[r]||
{}});return n}function b(p,n){if(n.borderStyle||n.border)if(p.border={},p.border.style=t.toSupportedValue(n.borderStyle),"string"===typeof n.border){var r=n.border.split(" ");3===r.length&&(p.border.thickness=Number(r[0].replace("px","")),p.border.lineStyle=r[1],p.border.color=r[2])}for(var u in n)if("border"!==u&&"borderStyle"!==u){r=n[u];var v=u;var y=r,A=p;"font-size"===v?(A[k[v]]=d(y.replace("px","")),v=!0):"background-repeat"===v?(A[k[v]]=d("repeat"===y),v=!0):"background-size"===v?(A[k[v]]=
d("contain"===y||"cover"===y),A.size="auto"===y?null:y,v=!0):v=!1;v||(p[k[u]||u]=d(r))}}function d(p){if(void 0===p||null===p||"null"===p||"undefined"===p)return"";if("true"===p)return!0;if("false"===p)return!1;if(!0===p)return!0;if(!1===p)return!1;var n=Number(p);return isNaN(n)?p:n}function c(p){if(l.emulateErrors.themeParseError)throw Error("Error test: something crashed during the parsing of the theme!");if("object"===typeof p)for(var n in p){var r=p[n];if(f[n]){var u=[],v=Object.keys(r);if(v.length){var y=
v.every(function(A){return-1!==A.indexOf("_")});v.forEach(function(A,C){u[y?A.split("_")[1]:C]=r[A]})}p[n]=u}else c(r)}}var g={};e=e.replace(/\r?\n|\r/g,"");e=e.replace(/(\w|\d)_(\w|\d)/g,"$1@$2");e=e.replace("data:","dataM");e=e.replace(";base64","Mbase64");var h=function(){var p={};(e.match(/\..*?\}/g)||[]).forEach(function(n){var r=n.substring(1,n.indexOf("{")).trim(),u={};n.substring(n.indexOf("{")+1,n.indexOf("}")).trim().split(";").forEach(function(v){if(v=v.trim()){v=v.split(":");var y=v[1].trim();
y=y.replace("dataM","data:");y=y.replace("Mbase64",";base64");u[v[0].trim()]=y}});p[r]=u});return p}(),m;for(m in h)b(a(m),h[m]);delete g.themeMetadata;c(g);q.populateMissingStyles(g);return g}}})},"esri/dijit/geoenrichment/ReportPlayer/core/themes/ThemeUpdateUtil":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/ObjectUtil","./ThemeLibrary","./ThemeUtil"],function(t,q,l,k){return{populateMissingStyles:function(f){if(f){f.table&&f.table.overrideStyles||(f.table={overrideStyles:t.mixin({},
f.table)});f.icon||(f.icon=t.clone(f.infographic.staticInfographic.icon),f.highlightedIcon=t.clone(f.infographic.staticInfographic.highlightedIcon));f.chart.icon||(f.chart.icon=t.clone(f.infographic.staticInfographic.icon));f.chart.xAxis.lineColor||(f.chart.xAxis.lineColor=f.chart.xAxis.axisStyle.color,f.chart.yAxis.lineColor=f.chart.yAxis.axisStyle.color);var e=k.getThemeColors(f),a=f.chart.colors.slice(),b=f.chart.colors3series&&f.chart.colors3series.slice(),d=l.getDefaultTheme({defaultFontFamilty:f.document.fontFamily,
defaultFontSize:f.document.fontSize});k.applyThemeColorsToTheme({theme:d,colors:e,chartColors:a,colors3series:b});q.populateObject(f,d,!1)}}}})},"esri/dijit/geoenrichment/utils/async/AsyncQueue":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when dijit/Destroyable ../DelayUtil".split(" "),function(t,q,l,k,f,e){var a=t(f,{_lastPromise:null,_isFinished:!1,_isDestroyed:!1,_lastDfd:null,_lastResult:null,constructor:function(b){q.mixin(this,
b)},add:function(b,d){d=d||{};var c=this;if(!this._isDestroyed){this._lastDfd||(this.onStarted(),this._lastDfd=new l);this._isFinished=!1;var g=function(){var m=function(){if(!c._isDestroyed)try{return"function"===typeof b?b():b}catch(n){return(new l).reject(n)}},p=0<=d.delayBefore?function(){return e.delay(m,d.delayBefore)}:m;return(0<=d.delayAfter?function(){return k(p(),function(n){return e.delay(function(){return n},d.delayAfter)})}:p)()};!this._lastPromise||this._lastPromise.isFulfilled()?this._lastPromise=
k(g()):this._lastPromise=k(this._lastPromise).then(g);var h=this._lastPromise;k(h,function(m){h!==c._lastPromise||c._isDestroyed||c._isFinished||h&&!h.isFulfilled()||(c._isFinished=!0,c._lastDfd.resolve(m),c._lastResult=m,c._lastDfd=null,c.onFinished(m))},this._lastDfd.reject);return this.getPromise()}},getPromise:function(){return this._isDestroyed?null:this._lastDfd&&this._lastDfd.promise||this._lastResult},isFinished:function(){return this._isFinished},isDestroyed:function(){return this._isDestroyed},
destroy:function(){this._isDestroyed=!0},onStarted:function(){},onFinished:function(b){}});a.executeFunctions=function(b,d,c){c=c||{};var g=new a,h=[];b.forEach(function(m,p){g.add(function(){return k(m(),function(n){h.push(n);return n})},{delayBefore:0===p?void 0:d})});c.onQueueReady&&c.onQueueReady(g);return k(g.getPromise(),function(m){return c.collectResults?h:m})};a.processArrayInBatches=function(b,d){function c(){if(b.length){for(var h=[],m=0;m<d.batchSize&&b.length;m++)h.push(b.shift());d.processBatch?
d.callback(h):h.forEach(d.callback);setTimeout(c,d.timeout||0)}else g.resolve()}b=b.slice();var g=new l;c();return g.promise};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/WebMapJsonUtil":function(){define([],function(){return{processWebMapJson:function(t,q){function l(f,e,a){f=f.featureCollection.layers[0].featureSet.features[0];f.attributes=f.attributes||{};f.attributes[e]=a}var k=JSON.parse(q);k.operationalLayers.forEach(function(f){var e=f.featureCollection&&f.featureCollection.layers&&
1===f.featureCollection.layers.length?f.featureCollection.layers[0].id:void 0;"string"===typeof e&&0===e.indexOf("SiteLayer")?(f.isSiteLayer=!0,(e=0===e.indexOf("SiteLayer.")?e.replace("SiteLayer.",""):void 0)&&l(f,"STORE_ID",e)):"string"===typeof e&&0===e.indexOf("StudyAreasLayer.")?(f.isSiteLayer=!0,l(f,"AREA_ID",e.replace("StudyAreasLayer.",""))):"string"===typeof e&&0===e.indexOf("LocatorResultsLayer.")?(f.isLocatorLayer=!0,f.calculatorName=e.replace("LocatorResultsLayer.","")):"string"===typeof e&&
0===e.indexOf("ComparisonResultsLayer.")?(f.isComparisonLayer=!0,f.calculatorName=e.replace("ComparisonResultsLayer.","")):f.isOtherLayer=!0});return{fileName:t,originalString:q,webMapJson:k}}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttachmentsStoreSerializer":function(){define("esri/dijit/geoenrichment/when esri/dijit/geoenrichment/promise/all ./AttributesUtil ./NotesUtil ./CustomAttachmentsStore esri/dijit/geoenrichment/utils/ImageInfoUtil".split(" "),
function(t,q,l,k,f,e){return{getAttachmentsStoreJson:function(a,b){function d(r){if(b.noCache)return r;h=h||{};for(var u in h)if(h[u]===r)return u;u="image_"+g++;h[u]=r;return u}function c(){return q([b.saveImages&&a.getImages(),a.getAttributes(),a.getNotes()]).then(function(r){var u=r[0]||[],v=r[1]||[],y=r[2]||[];return q(u.map(function(A){return q([t(A.getThumbnail(),function(C){return e.ensureDataUrlForRemoveImage(C)}),t(A.getUrl(),function(C){return e.ensureDataUrlForRemoveImage(C)})]).then(function(C){A.__thumbnail=
d(C[0]);A.__url=d(C[1])})})).then(function(){return{images:u.map(function(A){var C=A.__thumbnail,E=A.__url;delete A.__thumbnail;delete A.__url;return{description:A.description,thumbnail:C,url:E,filename:A.filename,imageViewType:A.imageViewType}}),attributes:v.map(function(A){return l.attributeToJson(A)}),notes:y.map(function(A){return k.noteToJson(A)})}})})}if(!a)return null;var g=0,h,m=[],p=[];if(a.supportsMultipleAreas)for(var n=0;n<b.numAreas;n++)a.setCurrentAnalysisAreaIndex(n),p.push(t(c(),function(r){m.push(r)}));
else p.push(t(c(),function(r){m.push(r)}));return q(p).then(function(){return{supportsMultipleAreas:a.supportsMultipleAreas,areaAttachments:m,imageDataCache:h}})},getAttachmentsStoreFromJson:function(a){return a&&new f(a)}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/NotesUtil":function(){define([],function(){return{noteToJson:function(t){return{text:t.text}},noteFromJson:function(t){return{text:t.text}}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/CustomAttachmentsStore":function(){define(["dojo/_base/declare",
"esri/dijit/geoenrichment/when"],function(t,q){var l={fromJson:function(k){function f(e){return k.imageDataCache&&k.imageDataCache[e]||e}k.areaAttachments=k.areaAttachments||k.areaAttachements;delete k.areaAttachements;return{getImagesForAreaAt:function(e){e=k.supportsMultipleAreas?e:0;return(k.areaAttachments[e]&&(k.areaAttachments[e].images||k.areaAttachments[e].attachments)||[]).map(function(a){return{description:a.description,filename:a.filename,imageViewType:a.imageViewType,getThumbnail:function(){return f(a.thumbnail)},
getUrl:function(){return f(a.url)}}})},getAttributesForAreaAt:function(e){e=k.supportsMultipleAreas?e:0;return k.areaAttachments[e]&&k.areaAttachments[e].attributes||[]},getNotesForAreaAt:function(e){e=k.supportsMultipleAreas?e:0;return k.areaAttachments[e]&&k.areaAttachments[e].notes||[]}}}};return t(null,{supportsMultipleAreas:!1,_currentAreaIndex:0,_provider:null,constructor:function(k){(this._provider=k.getAttachmentsForAreaAt||k.getImagesForAreaAt||k.getAttributesForAreaAt||k.getNotesForAreaAt?
k:l.fromJson(k))&&this._provider.getAttachmentsForAreaAt&&(k.getImagesForAreaAt=function(f){return k.getAttachmentsForAreaAt(f)});this.supportsMultipleAreas=k.supportsMultipleAreas},initialize:function(){},getImages:function(){function k(e){e.forEach(function(a){!a.getUrl&&a.getAttachmentUrl&&(a.getUrl=function(){return a.getAttachmentUrl()})})}var f=this._provider.getImagesForAreaAt?this._provider.getImagesForAreaAt(this._currentAreaIndex):[];return f?Array.isArray(f)?(k(f),f):q(f,function(e){k(e);
return e}):f},getAttributes:function(){return this._provider.getAttributesForAreaAt?this._provider.getAttributesForAreaAt(this._currentAreaIndex):[]},getNotes:function(){return this._provider.getNotesForAreaAt?this._provider.getNotesForAreaAt(this._currentAreaIndex):[]},setCurrentAnalysisAreaIndex:function(k){this._currentAreaIndex=k}})})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonSerializer":function(){define(["./query/TemplateJsonQueryUtil","../images/ImageDataHolder",
"../conditionalStyling/ConditionalStyleUtil"],function(t,q,l){return{serialize:function(k){this._attachImagesToTemplateJson(k);return k},_attachImagesToTemplateJson:function(k){function f(a){var b=q.getImageData(a);b&&(e[a]=b)}var e={};t.processTemplateFieldInfos(k,function(a){a.isImage?(f(a.imageJson.fileName),a.triggerJson&&l.collectImageFileNames(a.triggerJson).forEach(f)):a.isInfographic&&a.infographicJson.variableTables&&a.infographicJson.variableTables.forEach(function(b){b.image&&f(b.image.imageJson.fileName)})});
t.processSectionElements(k,function(a){"img"===a.id&&f(a.fileName)});k.imageData=e},deserialize:function(k){this._takeImagesFromTemplateJson(k);return k},_takeImagesFromTemplateJson:function(k){for(var f in k.imageData)q.putImageData(f,k.imageData[f]);delete k.imageData}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/conditionalStyling/ConditionalStyleUtil":function(){define(["esri/dijit/geoenrichment/utils/PageUnitsConverter"],function(t){var q={},l={FontSize:"fontSize",FontColor:"fontColor",
FontFamily:"fontFamily",ForeColor:"color",BackColor:"backgroundColor"},k={},f;for(f in l)k[l[f]]=f;q.getConditionalStyle=function(a,b){return(a=q.getMatchedCase(a,b))?q.styleFromSetters(a.setters):null};q.getMatchedCase=function(a,b){if(null!==a&&""!==a&&(a=Number(a),b&&!isNaN(a))){var d;b.cases.some(function(c){if(q._checkValueMatchesCase(a,c))return d=c,!0});return d}};q._checkValueMatchesCase=function(a,b){function d(c,g,h){switch(g){case "\x3d":return c===h;case "\x3c":return c<h;case "\x3e":return c>
h;case "\x3c\x3d":return c<=h;case "\x3e\x3d":return c>=h}return!1}return b.compareInfos.length&&b.compareInfos.every(function(c){return d(a,c.operator,Number(c.value))})};q.styleFromSetters=function(a){if(!a)return null;var b={};a.forEach(function(d){l[d.property]&&(b[l[d.property]]=d.value);"IsBold"===d.property&&(b.fontWeight="True"===d.value?"bold":"normal");"IsItalic"===d.property&&(b.fontStyle="True"===d.value?"italic":"normal");"IsUnderlined"===d.property&&(b.textDecoration="True"===d.value?
"underline":"none")});t.ptToPxObj(b);return b};q.settersFromStyle=function(a){var b=[];a=t.pxToPtObj(a,!0);for(var d in a){var c=k[d],g=a[d];!c||"string"!==typeof g&&isNaN(g)||b.push({property:c,value:g});"fontWeight"===d?b.push({property:"IsBold",value:"bold"===g?"True":"False"}):"fontStyle"===d?b.push({property:"IsItalic",value:"italic"===g?"True":"False"}):"textDecoration"===d&&b.push({property:"IsUnderlined",value:"underline"===g?"True":"False"})}return b};q.processImageJsonForTrigger=function(a,
b,d){var c=q.getMatchedCase(b,d);c||d.cases.some(function(g){if("default"===g.compareInfos[0].value)return c=g,!0});c&&(a.fileName=c.setters[0].value)};q.getStatistics=function(a){var b=Infinity,d=-Infinity,c,g,h;a&&a.cases.forEach(function(m){m.compareInfos&&m.compareInfos.forEach(function(p){var n=Number(p.value);isNaN(n)||(n<b&&(b=n,g="\x3c"===p.operator||"\x3c\x3d"===p.operator),n>d&&(d=n,h="\x3e"===p.operator||"\x3e\x3d"===p.operator),c=!0)})});return c&&-1E12<b&&1E12>b&&-1E12<d&&1E12>d?{min:b,
max:d,canFallBelowMin:g,canFallAboveMax:h}:null};var e=/\.png$/i;q.collectImageFileNames=function(a){var b=[];a&&a.cases&&a.cases.forEach(function(d){d.setters&&d.setters.forEach(function(c){"Source"===c.property&&e.test(c.value)&&b.push(c.value)})});return b};return q})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/MetadataFromDataBuilder":function(){define(["esri/dijit/geoenrichment/utils/JsonXmlConverter","./map/RendererToMetadataConverter"],function(t,q){var l=
{},k={STORE_ID:1,AREA_ID:1,StdGeographyName:1,StdGeographyID:1,StdGeographyLevel:1};l.recoverMetadataFromAreaData=function(f,e){f=f[0];var a={name:"DataCollection",tags:[{name:"Calculators",tags:[]}]},b={},d;for(d in f){var c=f[d].data,g=f[d].comparisonLevels,h=e.map[d],m=!!h;h=m&&"object"===typeof h&&h.webMapJson||null;var p=e.locator[d];p={name:m?"Maps":p?"Locator":"DataCollections",attributes:{Name:d},tags:[]};a.tags[0].tags.push(p);var n=[];if(m)for(var r in c){if(!k[r]){var u={name:"Map",attributes:{Name:r},
tags:[{name:"Layers",tags:[]}]};h&&h.operationalLayers.forEach(function(A){if(A.isLocatorLayer){var C={name:"LocatorResultsLayer",attributes:{CalculatorName:A.calculatorName},tags:[q.convertRendererJson(A.featureCollection.layers[0].layerDefinition.drawingInfo.renderer)]};b[A.calculatorName]=A.featureCollection.layers[0].title;u.tags[0].tags.push(C)}A.isComparisonLayer&&(C=A.featureCollection.layers[0].layerDefinition.drawingInfo,A={name:"ComparisonResultsLayer",attributes:{CalculatorName:A.calculatorName},
tags:[q.convertRendererJson(C.renderer)]},C.labelingInfo&&A.tags.push(q.convertLabelingInfo(C.labelingInfo)),u.tags[0].tags.push(A))});n.push(u)}}else for(r in c)n.push({name:"Field",attributes:{Name:r,Alias:r,MapTo:"DC."+r,Type:"number"===typeof c[r]?"Double":"String"}});p.tags.push({name:"Fields",tags:n});if(g&&g.length){var v=[],y={};g.forEach(function(A){A.StdGeographyLevel&&!y[A.StdGeographyLevel]&&(y[A.StdGeographyLevel]=1,v.push(A.StdGeographyLevel))});v.length&&p.tags.push({name:"ComparisonLevels",
tags:v.map(function(A){return{name:"ComparisonLevel",attributes:{Name:A}}})})}}a.tags[0].tags.forEach(function(A){if("Locator"===A.name){var C=b[A.attributes.Name];C&&(A.attributes.LayerName=C)}});return t.parseJson(a)};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/metadata/map/RendererToMetadataConverter":function(){define(["dojo/_base/lang","esri/dijit/geoenrichment/utils/JsonXmlTypedConverter","esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(t,
q,l){var k={convertRendererJson:function(f){switch(f.type){case "simple":"esriPMS"===f.symbol.type&&(f=t.clone(f),delete f.symbol.url)}return l.parseXml(q.parseJson(f,{rootName:"Renderer"}))},convertLabelRendererJson:function(f){f=f.uniqueValueInfos.map(function(e){return{labelExpressionInfo:{expression:"$feature.StdGeographyName"},where:"StdGeographyLevel\x3d'"+e.value+"'",labelPlacement:"esriServerPolygonPlacementAlwaysHorizontal",symbol:e.symbol}});return k.convertLabelingInfo(f)},convertLabelingInfo:function(f){return l.parseXml(q.parseJson(f,
{rootName:"LabelingInfo"}))}};return k})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/TemplateJsonLoader":function(){define("dojo/_base/lang esri/dijit/geoenrichment/Deferred esri/dijit/geoenrichment/when esri/dijit/geoenrichment/utils/CacheUtil ./CustomReportsManager ./GenericTemplateGenerator ./dataCollections/DataCollectionsLoader ../../core/conversion/PortalToEditorConverter ../../core/conversion/portalToEditorUtils/variables/PlayerVariableProvider ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoNameUtil ../../core/conversion/portalToEditorUtils/parsers/_FieldInfoBuilder".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g){var h={_getCache:function(){return k.get("TemplateJsonLoader")},getCachedTemplateJsonPromise:function(m,p){m=m+";"+p.reportID;return(m=this._getCache()[m])&&m.modified===p.modified?m.promise.then(function(n){return{templateJson:t.clone(n.templateJson),templateVariableProvider:n.templateVariableProvider}}):null},putCachedTemplateJsonPromise:function(m,p,n){p=p+";"+n.reportID;this._getCache()[p]={modified:n.modified,promise:m}}};return{getTemplateJsonByID:function(m,
p){var n=this,r=new q;l(f.getCustomReportByID(m),function(u){if(u){var v=p&&h.getCachedTemplateJsonPromise(m.countryID,u);v?v.then(r.resolve,r.reject):(v=n._loadCustomReportData(u).then(function(){var y=new d;return l(b.provideEditorJson(u,{variableProvider:y}),function(){var A=u.templateJson;u.portalJson=null;u.templateJson=null;return{templateJson:A,templateVariableProvider:y}})}),p?(h.putCachedTemplateJsonPromise(v,m.countryID,u),h.getCachedTemplateJsonPromise(m.countryID,u).then(r.resolve,r.reject)):
v.then(r.resolve,r.reject))}else r.reject("Can't find a report")},r.reject);return r.promise},_loadCustomReportData:function(m){m.portalJson=null;return m.templateData.getFiles().then(function(p){m.portalJson={files:p}})},createTemplateJsonFromVariables:function(m){return a.loadVariables({countryID:m.countryID,outFields:["description","precision","type","vintage"],forceLowerCase:!0}).then(function(p){var n=new d,r=p.fullNameToVariableCache;p=m.variables.fullNames.map(function(u){var v=c.createFieldNameFromSource(u),
y=m.variables.customDataMapping[u];y=y?y.variable:r[u];u={id:y.id.toLowerCase(),fullName:u,alias:y.description,fieldName:v,precision:y.precision,calculatorName:c.DATA_COLLECTIONS_CALCULATOR_NAME,templateName:c.DATA_COLLECTIONS_CALCULATOR_NAME+"."+v,type:y.type,vintage:y.vintage};n.addVariable(u);return g.getCalculatorOrScriptFieldInfo(u.templateName,{variableProvider:n})});return{templateJson:e.generateTemplatesFromFieldInfos(p,{comparisonLevels:m.comparisonLevels}),templateVariableProvider:n}})}}})},
"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/GenericTemplateGenerator":function(){define("../../core/supportClasses/templateJsonUtils/BlankTemplateJsonUtil ../../core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder ../../core/supportClasses/tableJson/TableJsonUtil ../../core/sections/sectionUtils/SectionJsonUtil ../../core/infographics/InfographicTypes ../../core/infographics/utils/InfographicJsonUtil".split(" "),function(t,q,l,k,f,e){var a={},b={calcNumRowsColumns:function(g){var h=
2>=g?1:6>=g?2:12>=g?3:Math.ceil(g/4);var m=1===g?1:4>=g?2:9>=g?3:4;return{numRows:h,numColumns:m,numVarsInLastRow:m-(h*m-g),lastRowCellIndexes:null,lastRowCellWidths:null}}},d={mergeLastRow:function(g,h,m){2===h.numColumns?1===h.numVarsInLastRow&&(l.modifyTableJson(g,h.numRows-1,0,{columnSpan:2}),h.lastRowCellWidths=[2*m]):3===h.numColumns?1===h.numVarsInLastRow?(l.modifyTableJson(g,h.numRows-1,0,{columnSpan:3}),h.lastRowCellWidths=[3*m]):2===h.numVarsInLastRow&&(l.modifyTableJson(g,h.numRows-1,0,
{cellStyle:{width:1.5*m}}),l.modifyTableJson(g,h.numRows-1,1,{columnSpan:2,cellStyle:{width:.5*m}}),h.lastRowCellWidths=[1.5*m,1.5*m]):4===h.numColumns&&(1===h.numVarsInLastRow?(l.modifyTableJson(g,h.numRows-1,0,{columnSpan:4}),h.lastRowCellWidths=[4*m]):2===h.numVarsInLastRow?(l.modifyTableJson(g,h.numRows-1,0,{columnSpan:2}),l.modifyTableJson(g,h.numRows-1,2,{columnSpan:2}),h.lastRowCellIndexes=[0,2],h.lastRowCellWidths=[2*m,2*m]):3===h.numVarsInLastRow&&(l.modifyTableJson(g,h.numRows-1,0,{cellStyle:{width:4*
m/3}}),l.modifyTableJson(g,h.numRows-1,1,{columnSpan:2,cellStyle:{width:2*m/3}}),l.modifyTableJson(g,h.numRows-1,2,{cellStyle:{width:2*m/3}}),l.modifyTableJson(g,h.numRows-1,3,{cellStyle:{width:4*m/3}}),h.lastRowCellIndexes=[0,1,3],h.lastRowCellWidths=[4*m/3,4*m/3,4*m/3]))}},c={insertNextPanel:function(g,h,m){void 0===h.currentRowIndex&&(h.currentRowIndex=0,h.currentColumnIndex=0);var p=h.currentRowIndex===h.numRows-1;g.data.data[h.currentRowIndex].fieldInfos["field"+(p&&h.lastRowCellIndexes?h.lastRowCellIndexes[h.currentColumnIndex]:
h.currentColumnIndex)]=m(p&&h.lastRowCellWidths&&h.lastRowCellWidths[h.currentColumnIndex]);h.currentColumnIndex++;h.currentColumnIndex>h.numColumns-1&&(h.currentColumnIndex=0,h.currentRowIndex++)}};a.generateTemplatesFromFieldInfos=function(g){var h=b.calcNumRowsColumns(g.length),m=t.createBlankTemplate({elementWidth:500,elementHeight:250,layout:{numRows:h.numRows,numColumns:h.numColumns}}),p=m.sectionsTables[0];d.mergeLastRow(p,h,500);g.forEach(function(n){c.insertNextPanel(p,h,function(r){var u=
a._createInfographicJson(n,r||500,250);r=l.createSingleCellTable({width:r||500,height:250,fieldInfo:q.createFieldInfoFromInfographic(u)});return q.createFieldInfoFromSection(k.wrapInDetailsSectionJson(r))})});return m};a._createInfographicJson=function(g,h,m){return{type:f.ONE_VAR,title:g.alias,style:{width:h,height:m},levels:e.getDefaultLevels(),fieldInfos:[g],calcData:{calculatorName:g.templateName.substr(0,g.templateName.indexOf(".")),variables:[g.fullName]}}};return a})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/BlankTemplateJsonUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions",
"./TemplateJsonModificationUtil"],function(t,q){return{createBlankTemplate:function(l){var k={},f=l.documentOptions||t.getDefaultDocumentOptionsGraphicReport();f.pagesize=t.combineCustomSizeString(f.left+f.right+l.layout.numColumns*l.elementWidth,f.top+f.bottom+l.layout.numRows*l.elementHeight,"px");k.documentOptions=f;f={style:{width:l.layout.numColumns*l.elementWidth},data:{columns:[],data:[]}};for(var e=0;e<l.layout.numColumns;e++)f.data.columns.push({field:"field"+e,style:{width:l.elementWidth}});
for(e=0;e<l.layout.numRows;e++)f.data.data.push({style:{height:l.elementHeight},fieldInfos:{}});k.sectionsTables=[f];q.adjustDocumentOptions(k);return k}}})},"esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/TemplateJsonModificationUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions","esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutCalculator"],function(t,q){var l={},k={getJsonStat:function(e){var a=0,b=
0,d=[];e.sectionsTables.forEach(function(c){var g=0;c.data.columns.forEach(function(m){g+=f.getFieldWidth(c,c.data.data[0],m)});a=Math.max(a,g);var h=0;c.data.data.forEach(function(m){h+=f.getDataHeight(c,m,c.data.columns[0])});b=Math.max(b,h);d.push({totalW:g,totalH:h})});return{tableInfos:d,totalWMax:a,totalHMax:b}}},f={getFieldWidth:function(e,a,b){return q.getFieldWidth({looseResize:!0},a,b)||b.style.width},getDataHeight:function(e,a,b){return q.getDataHeight({looseResize:!0},a,b.field)},getAverageFieldWidth:function(e,
a){var b=0;e.data.data.forEach(function(d){b+=f.getFieldWidth(e,d,a)});return b/e.data.data.length},getAverageDataHeight:function(e,a){var b=0;e.data.columns.forEach(function(d){b+=f.getDataHeight(e,a,d)});return b/e.data.columns.length}};l.adjustDocumentOptions=function(e){if(e.documentOptions){var a=k.getJsonStat(e);a.totalWMax&&a.totalHMax&&!isNaN(a.totalWMax)&&!isNaN(a.totalHMax)&&(e=e.documentOptions,e.pagesize=t.combineCustomSizeString(e.left+e.right+a.totalWMax,e.top+e.bottom+a.totalHMax,"px"),
(a=t.getClosestStandrdSizes(e)[0])&&.001>a.score&&a.orientation===e.orientation&&(e.pagesize=a.pagesize))}};l.JsonStatCollector=k;l.DataUtil=f;return l})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridLayoutCalculator":function(){define("dojo/_base/lang ./gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil ./gridLayoutCalcUtils/GridElementBoxCalculator ./gridLayoutCalcUtils/GridCellNodePlacer ./gridLayoutCalcUtils/rows/GridLayoutRowsCalculator ./gridLayoutCalcUtils/columns/GridLayoutColumnsCalculator ./gridLayoutCalcUtils/GridLayoutSnapper ../../supportClasses/tableJson/TableJsonUtil".split(" "),
function(t,q,l,k,f,e,a,b){var d={};l.calculator=d;d.markAsDirty=q.markAsDirty;d.fieldToColumn=q.fieldToColumn;d.dataIdToData=q.dataIdToData;d.getSpannedColumns=q.getSpannedColumns;d.recalcRows=f.recalcRows;d.recalcColumns=e.recalcColumns;d.recalcColumnsTableJson=e.recalcColumnsTableJson;d.recalcRowsToFitHeight=f.recalcRowsToFitHeight;d.adjustColumnWidth=e.adjustColumnWidth;d.getAffectedCellsForColumnAdjust=e.getAffectedCells;d.adjustRowHeight=f.adjustRowHeight;d.getAffectedCellsForRowAdjust=f.getAffectedCells;
d.recalcGridWidth=e.recalcGridWidth;d.calcFieldWidth=e.calcFieldWidth;d.getFieldWidth=e.getFieldWidth;d.setFieldWidth=e.setFieldWidth;d.calcDataHeight=f.calcDataHeight;d.getDataHeight=f.getDataHeight;d.setDataHeight=f.setDataHeight;d.autoSnapLayout=a.autoSnapLayout;d.positionCells=k.positionCells;d.calcFeatureCount=function(c,g,h){return(c-g)/h};d.calcRingIndexForCell=function(c){var g=c.parentGrid;if(!g)return-1;if(g.getNumDynamicRows())return void 0!==c.gridData.currentFeatureIndex?c.gridData.currentFeatureIndex:
c.gridData.index-g.getNumFixedRows();var h=g.getNumFixedColumns();return c.column.index<h?-1:Math.floor((c.column.index-h)/g.getNumDynamicColumns())};d.trimColumnsForNumberOfFeatures=function(c){for(var g=c.viewModel.dynamicReportInfo.fieldData.areaData.length,h=d.recalcGridWidth(c),m=0,p=0;p<c.getNumFixedColumns();p++)m+=c.columns[p].style.width;h-=m;m=d.calcFeatureCount(c.columns.length,c.getNumFixedColumns(),c.getNumDynamicColumns())-g;if(!(0>m)){var n=c.columns.slice();p=n.length=c.getNumFixedColumns();
for(var r=[],u=0;c.columns[p];){for(var v=0;v<g;v++){var y=c.columns[p++];u+=y.style.width;r.push(y)}p+=m}var A=h/u;r.forEach(function(C){C.style.width*=A});c.columns=n.concat(r)}};d.adjustRowsForNumberOfFeatures=function(c){var g=c.viewModel.dynamicReportInfo.fieldData.areaData.length;if(!(1>=g)){var h=c.store.data[c.getNumFixedRows()];h.currentFeatureIndex=0;for(var m=1;m<g;m++){var p=t.clone(h);p.currentFeatureIndex=m;c.store.data.push(p)}b.applyDefaultStyling({data:{data:c.store.data,columns:c.columns}})}};
return d})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridLayoutCalculatorQueryUtil":function(){define([],function(){var t={markAsDirty:function(q){q._fieldToColumnHash=null;q._dataIdToDataHash=null},_calcGridHashes:function(q){q._fieldToColumnHash={};q.columns.forEach(function(l){q._fieldToColumnHash[l.field]=l});q._dataIdToDataHash={};q.store.data.forEach(function(l){q._dataIdToDataHash[l.id]=l})},fieldToColumn:function(q,l){q._fieldToColumnHash||t._calcGridHashes(q);
return q._fieldToColumnHash&&q._fieldToColumnHash[l]},dataIdToData:function(q,l){q._dataIdToDataHash||t._calcGridHashes(q);return q._dataIdToDataHash&&q._dataIdToDataHash[l]},getSpannedColumns:function(q,l,k){var f=[];if(1>k)return[];var e;q.columns.some(function(a){if(e||a.field===l)f.push(a),e=!0;if(f.length===k)return!0});return f},getColumnSpannedFields:function(q,l,k){var f=null,e=l.fieldToRowSpanSourceDataIndex&&l.fieldToRowSpanSourceDataIndex[k];l=void 0!==e?q.store.data[e]:l;l=l.columnSpans&&
l.columnSpans[k];if(1<l)for(f=[],k=t.fieldToColumn(q,k),e=k=q.columns.indexOf(k);e<k+l;e++)f.push(q.columns[e].field);return f},getRowSpannedData:function(q,l,k){var f=null;k=l.fieldToColumnSpanSourceField&&l.fieldToColumnSpanSourceField[k]||k;k=l.rowSpans&&l.rowSpans[k];if(1<k){f=[];for(var e=l=q.store.data.indexOf(l);e<l+k;e++)f.push(q.store.data[e])}return f},getMovableData:function(q,l,k){return(l=l.movableIndexHashVertical&&l.movableIndexHashVertical[k])&&q.store.data[l]},getMovableColumn:function(q,
l,k){return(l=l.movableFieldsHashHorizontal&&l.movableFieldsHashHorizontal[k])&&t.fieldToColumn(q,l)}};return t})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridElementBoxCalculator":function(){define([],function(){function t(l,k,f,e,a){function b(p){return e&&void 0!==e.places?Number(p.toFixed(e.places)):p}if(!k||!f)return null;var d=q.calculator[a?"getFieldWidth":"calcFieldWidth"](l,k,f);a=q.calculator[a?"getDataHeight":"calcDataHeight"](l,k,f);for(var c=0,g=
0,h=q.calculator.fieldToColumn(l,f),m=0;m<h.index;m++)c+=q.calculator.getFieldWidth(l,k,l.columns[m].field);for(m=0;m<k.index;m++)g+=q.calculator.getDataHeight(l,l.store.data[m],f);return{x:b(c),y:b(g),w:b(d),h:b(a)}}var q={calculator:null,calcCellBox:function(l,k){return t(l.parentGrid,l.gridData,l.column.field,k,!1)},calcDataBox:function(l,k,f,e){return t(l,k,f,e,!0)}};return q})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridCellNodePlacer":function(){define(["./rows/GridLayoutRowsCalculator",
"./columns/GridLayoutColumnsCalculator"],function(t,q){return{positionCells:function(l){var k={},f={},e={},a={};if(l.store.data.length){l.store.data.forEach(function(g,h){l.columns.forEach(function(m,p){var n=e[p]||0,r=a[h]||0,u=t.getDataHeight(l,g,m.field);m=q.getFieldWidth(l,g,m.field);n+=u;r+=m;f[p+"_"+h]=n;k[p+"_"+h]=r;e[p]=n;a[h]=r})});l.getFieldCells().forEach(function(g){g.domNode.style.left=(k[g.column.index-1+"_"+g.gridData.index]||0)+"px";g.domNode.style.top=(f[g.column.index+"_"+(g.gridData.index-
1)]||0)+"px"});var b=0,d;for(d in e)b=Math.max(b,e[d]);var c=0;for(d in a)c=Math.max(c,a[d]);l.mainNode.style.width=c+"px";l.mainNode.style.height=b+"px";l.domNode.style.width=c+"px";l.domNode.style.height=b+"px";l._width=c;l._height=b}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/GridLayoutRowsCalculator":function(){define(["./RowsProcessor","./RowsScaler","./RowDataUtil","./RowModifier"],function(t,q,l,k){var f={};f.recalcRows=t.recalcRows;f.recalcRowsToFitHeight=
q.recalcRowsToFitHeight;f.adjustRowHeight=k.adjustRowHeight;f.getAffectedCells=k.getAffectedCells;f.getDataHeight=l.getDataHeight;f.setDataHeight=l.setDataHeight;f.calcDataHeight=l.calcDataHeight;return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowsProcessor":function(){define(["dojox/uuid/generateRandomUuid","./RowDataUtil","../GridLayoutCalculatorQueryUtil"],function(t,q,l){function k(e,a){var b=[],d,c=0;a&&Object.keys(a).forEach(function(g){l.fieldToColumn(e,
g)?c++:delete a[g]});c&&e.columns.some(function(g){if(d||a[g.field])b.push(g),d=!0;a[g.field]&&c--;if(!c)return!0});return b}function f(e,a){var b=[],d,c=0;a&&Object.keys(a).forEach(function(g){l.dataIdToData(e,g)?c++:delete a[g]});c&&e.store.data.some(function(g){if(d||a[g.id])b.push(g),d=!0;a[g.id]&&c--;if(!c)return!0});return b}return{recalcRows:function(e){var a={};e.columns.forEach(function(g,h){a[g.field]=h});var b;e.store.data.forEach(function(g,h){g.index=h;g.style=g.style||{};g.style.fields=
g.style.fields||{};void 0===g.id&&(g.id=t());void 0===g.style.height&&(g.style.height=e.layoutDefaults.defaultRowHeight);delete g.excludedIndexHorizontal;delete g.movableFieldsHashHorizontal;delete g.fieldToColumnSpanSourceField;if(g.columnSpans){g.excludedIndexHorizontal={};g.movableFieldsHashHorizontal={};g.fieldToColumnSpanSourceField={};g._columnSpans=g._columnSpans||{};for(b in g.columnSpans){h=g._columnSpans[b];var m={};h=h?k(e,h):l.getSpannedColumns(e,b,g.columnSpans[b]);1<h.length&&(h.forEach(function(n){m[n.field]=
!0;n.field!==b&&(g.excludedIndexHorizontal[a[n.field]]=!0,g.fieldToColumnSpanSourceField[n.field]=b)}),g.movableFieldsHashHorizontal[b]=h[h.length-1].field);g.columnSpans[b]=h.length;g._columnSpans[b]=m}var p=0;Object.keys(g.columnSpans).forEach(function(n){2>g.columnSpans[n]?(delete g.columnSpans[n],delete g._columnSpans[n]):p++});p||(delete g.columnSpans,delete g._columnSpans)}delete g.excludedIndexVertical;delete g.movableIndexHashVertical;delete g.fieldToRowSpanSourceDataIndex;g.fieldInfos=g.fieldInfos||
{}});e.store.data.forEach(function(g,h){if(g.rowSpans)for(b in g._rowSpans=g._rowSpans||{},g.rowSpans){var m=g._rowSpans[b],p={};p[g.id]=!0;var n=a[b],r=g.rowSpans[b];if(m)m=f(e,m);else{m=[];for(var u=h;u<h+r;u++)m.push(e.store.data[u])}1<m.length&&(m.forEach(function(v){if(v.id!==g.id){v.excludedIndexVertical=v.excludedIndexVertical||{};v.excludedIndexVertical[n]=!0;v.fieldToRowSpanSourceDataIndex=v.fieldToRowSpanSourceDataIndex||{};v.fieldToRowSpanSourceDataIndex[b]=g.index;var y=g.columnSpans&&
g.columnSpans[b];if(y)for(var A=1;A<y;A++)v.excludedIndexVertical[n+A]=!0,v.fieldToRowSpanSourceDataIndex[e.columns[n+A].field]=g.index}p[v.id]=!0}),g.movableIndexHashVertical=g.movableIndexHashVertical||{},g.movableIndexHashVertical[b]=h+m.length-1);g.rowSpans[b]=m.length;g._rowSpans[b]=p}});e.store.data.forEach(function(g,h){if(g.rowSpans){for(b in g.rowSpans)g.rowSpans[b]=Math.min(g.rowSpans[b],e.store.data.length-h);var m=0;Object.keys(g.rowSpans).forEach(function(p){2>g.rowSpans[p]?(delete g.rowSpans[p],
g._rowSpans&&delete g._rowSpans[p]):m++});m||(delete g.rowSpans,delete g._rowSpans)}});e.store.data.forEach(function(g,h){g.fieldInfos&&Object.keys(g.fieldInfos).forEach(function(m){void 0===a[m]&&delete g.fieldInfos[m]});g.style&&g.style.fields&&Object.keys(g.style.fields).forEach(function(m){void 0===a[m]&&delete g.style.fields[m]})});if(e.looseResize){e.store.data.forEach(function(g){e.columns.some(function(h){q.getDataHeightOwn(e,g,h.field)||q.setDataHeight(e,g,h.field,g.style.height)})});var d=
e.store.data[e.store.data.length-1],c=q.recalcGridHeight(e);e.columns.some(function(g){var h=0;e.store.data.forEach(function(p){h+=q.getDataHeightOwn(e,p,g.field)});var m=c-h;0!==m&&q.setDataHeight(e,d,g.field,q.getDataHeightOwn(e,d,g.field)+m)})}q.recalcGridHeight(e)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowDataUtil":function(){define(["../GridLayoutCalculatorQueryUtil"],function(t){var q={getDataHeight:function(l,k,f){return l.looseResize?q.getDataHeightOwn(l,
k,f)||k.style.height||0:k.style.height||0},getDataHeightOwn:function(l,k,f){if(l.looseResize)return k.style.fields=k.style.fields||{},(k.style.fields[f]=k.style.fields[f]||{}).height},setDataHeight:function(l,k,f,e,a){l.looseResize?(a?t.getColumnSpannedFields(l,k,f)||[f]:[f]).forEach(function(b){k.style.fields=k.style.fields||{};(k.style.fields[b]=k.style.fields[b]||{}).height=e}):k.style.height=e},calcDataHeight:function(l,k,f,e){var a=0,b=k.rowSpans&&k.rowSpans[f];if(1<b)for(var d=k.index;d<k.index+
b;d++)d!==e&&(a+=q.getDataHeight(l,l.store.data[d],f));else a=q.getDataHeight(l,k,f);return a},recalcGridHeight:function(l){l._height=0;var k=l.columns[0].field;l.store.data.forEach(function(f){l._height+=q.getDataHeight(l,f,k)});return l._height}};return q})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowsScaler":function(){define(["./RowDataUtil"],function(t){return{recalcRowsToFitHeight:function(q,l){function k(a){a.forEach(function(b){q.columns.some(function(d,
c){if(!q.looseResize&&c)return!0;t.setDataHeight(q,b,d.field,t.getDataHeight(q,b,d.field)*e)})})}var f=t.recalcGridHeight(q),e=l/f;1!==e&&(k(q.store.data),q._getSavedOriginalData()&&k(q._getSavedOriginalData()),t.recalcGridHeight(q))}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/RowModifier":function(){define(["../GridLayoutCalculatorQueryUtil","./RowDataUtil","./_RowModifierLoose","./_RowModifierNormal"],function(t,q,l,k){var f={},e={checkHeightLimit:function(d,
c,g,h){if(d.getMaxHeight()){var m=0;d.store.data.forEach(function(p){p!==c&&(m+=q.getDataHeight(d,p,g))});h=Math.min(d.getMaxHeight()-m,h)}return h}},a={findDataToMove:function(d,c,g,h){var m=t.getMovableData(d,c,g);m&&(d=q.calcDataHeight(d,c,g,m.index),h-=d);return{data:m||c,height:h}}},b={finalResizeGridCells:function(d){d.getFieldCells().forEach(function(c){c.setHeight(q.calcDataHeight(d,c.gridData,c.column.field))})}};f.adjustRowHeight=function(d,c,g,h){h=e.checkHeightLimit(d,c,g,h);c=a.findDataToMove(d,
c,g,h);(d.looseResize?l:k).adjustRowHeight(d,c.data,g,c.height);b.finalResizeGridCells(d)};f.getAffectedCells=function(d,c,g){return d.looseResize?l.getAffectedCells(d,a.findDataToMove(d,c,g).data,g):null};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/_RowModifierLoose":function(){define("dojo/_base/lang dojox/uuid/generateRandomUuid ../GridLayoutCalculatorQueryUtil ../GridElementBoxCalculator ./RowDataUtil ../../GridQueryUtil".split(" "),function(t,
q,l,k,f,e){var a={collectRowBoxes:function(g,h){for(var m=[],p=0;p<g.columns.length;){var n=g.columns[p],r=this._createEmptyBox();n=l.getColumnSpannedFields(g,h,n.field)||[n.field];r.elements=this._getFieldsElements(g,h,n);this._measureBox(r);var u=m[m.length-1];u&&(u.nextSibling=r,r.prevSibling=u);m.push(r);p+=n.length}return m},_createEmptyBox:function(){return{id:q(),box:null,elements:[],overlappingBoxes:[],overlappingBoxesCache:{},prevSibling:null,nextSibling:null}},_getFieldsElements:function(g,
h,m){var p=[];m.forEach(function(n){n={data:h,dataIndex:h.index,field:n,box:k.calcDataBox(g,h,n,{places:2})};p.push(n)});return p},_measureBox:function(g){var h=0;g.elements.forEach(function(m){h+=m.box.w});g.box={x:g.elements[0].box.x,y:g.elements[0].box.y,h:g.elements[0].box.h,w:h}},mergeBoxesForBottomRow:function(g){var h=this._createEmptyBox();g.forEach(function(m){m.elements.forEach(function(p){h.elements.push({data:null,field:p.field,box:t.clone(p.box)})})});this._measureBox(h);h.box.h=1E6;
return[h]},getBoxAtField:function(g,h){return g.filter(function(m){return m.elements[0].field===h})[0]}},b={buildInfluenceTree:function(g,h,m){function p(n,r){(r?h:g).forEach(function(u){var v;if(v=!u.overlappingBoxesCache[n.id]){v=n.box;var y=u.box;v=!(v.x+.5>=y.x+y.w||v.x+v.w<=y.x+.5)}v&&(n.overlappingBoxes.push(u),n.overlappingBoxesCache[u.id]=!0)});n.overlappingBoxes.forEach(function(u){p(u,!r)})}m=a.getBoxAtField(g,m);p(m,!0);return m}},d={applyForce:function(g,h,m){function p(r,u){var v=r.elements[0];
v.data&&f.setDataHeight(g,v.data,v.field,f.getDataHeight(g,v.data,v.field)+(u?-1:1)*n,!0);r.overlappingBoxes.forEach(function(y){p(y,!u)})}var n=this._checkDelta(g,h,m);p(h,!1)},_checkDelta:function(g,h,m){function p(u,v){0!==r&&(v?0>r||(r=Math.min(r,u.box.h-n),u.prevSibling&&(r=Math.min(r,u.prevSibling.box.y+u.prevSibling.box.h-n-u.box.y)),u.nextSibling&&(r=Math.min(r,u.nextSibling.box.y+u.nextSibling.box.h-n-u.box.y))):0<r||(r=Math.max(r,-(u.box.h-n)),u.prevSibling&&(r=Math.max(r,-(u.box.y+u.box.h-
(u.prevSibling.box.y+n)))),u.nextSibling&&(r=Math.max(r,-(u.box.y+u.box.h-(u.nextSibling.box.y+n))))),u.overlappingBoxes.forEach(function(y){p(y,!v)}))}var n=g.layoutDefaults.rowMinHeight;m=Math.max(m,n);var r=m-h.box.h;p(h,!1);return r}},c={_getInluencedStartBox:function(g,h,m){var p=g.store.data[h.index+1];h=a.collectRowBoxes(g,h);g=p?a.collectRowBoxes(g,p):a.mergeBoxesForBottomRow(h);return b.buildInfluenceTree(h,g,m)},getAffectedCells:function(g,h,m){function p(r){if(r.elements[0].data){var u=
e.querySingleCell(g,{rowIndex:r.elements[0].data.index,columnField:r.elements[0].field,considerSpans:!0});u&&n.push(u)}r.overlappingBoxes.forEach(p)}var n=[];h=this._getInluencedStartBox(g,h,m);p(h);return n},adjustRowCell:function(g,h,m,p){h=this._getInluencedStartBox(g,h,m);d.applyForce(g,h,p)}};return{adjustRowHeight:function(g,h,m,p){c.adjustRowCell(g,h,m,p)},getAffectedCells:function(g,h,m){return c.getAffectedCells(g,h,m)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/GridQueryUtil":function(){define(["dojo/dom-geometry",
"./GridDataUtil","esri/dijit/geoenrichment/utils/ArrayUtil","esri/dijit/geoenrichment/utils/DomUtil","esri/dijit/geoenrichment/utils/MouseUtil"],function(t,q,l,k,f){var e={querySingleCell:function(a,b){b.fieldCell&&(b={rowId:b.fieldCell.rowId,columnId:b.fieldCell.columnId});var d;a.getFieldCells().some(function(p){if(p.parentGrid&&p.column&&p.gridData&&!(p.columnId!==b.columnId&&p.column.index!==b.columnIndex&&p.column.field!==b.columnField||p.rowId!==b.rowId&&p.gridData.index!==b.rowIndex))return d=
p,!0});if(d)return d;if(b.considerSpans){var c=e.queryColumn(a,b),g=e.queryData(a,b);if(!c||!g)return null;var h=c.index,m=g.index;a.store.data.some(function(p){return a.columns.some(function(n){var r=n.index,u=n.index+(p.columnSpans&&p.columnSpans[n.field]||0),v=p.index;n=p.index+(p.rowSpans&&p.rowSpans[n.field]||0);if(r<=h&&u>=h&&v<=m&&n>=m)return d=e.querySingleCell(a,{columnIndex:r,rowIndex:v}),!0})})}return d},queryColumn:function(a,b){var d;a.columns.some(function(c){if(c.id===b.columnId||c.index===
b.columnIndex||c.field===b.columnField)return d=c,!0});return d},queryData:function(a,b){var d;a.store.data.some(function(c){if(c.id===b.rowId||c.index===b.rowIndex)return d=c,!0});return d},queryCells:function(a,b){if(b.fieldCell){var d=[],c=b.rowSpan||1,g=b.columnSpan||1;if(b=e.querySingleCell(a,b))for(var h=b.gridData.index;h<b.gridData.index+c;h++)for(var m=b.column.index;m<b.column.index+g;m++){var p=e.querySingleCell(a,{rowIndex:h,columnIndex:m});p&&d.push(p)}return d}return this.queryCellsInArray(a.getFieldCells(),
b)},queryCellsInArray:function(a,b){var d=[];if(!Object.keys(b).length)return d;a.forEach(function(c,g){void 0!==b.cellIndex&&g!==b.cellIndex||void 0!==b.cellIndexes&&-1===b.cellIndexes.indexOf(g)||void 0!==b.columnId&&c.columnId!==b.columnId||void 0!==b.columnIds&&-1===b.columnIds.indexOf(c.columnId)||void 0!==b.columnIndex&&c.column.index!==b.columnIndex||void 0!==b.columnIndexes&&-1===b.columnIndexes.indexOf(c.column.index)||void 0!==b.columnField&&c.column.field!==b.columnField||void 0!==b.columnFields&&
-1===b.columnFields.indexOf(c.column.field)||void 0!==b.rowId&&c.rowId!==b.rowId||void 0!==b.rowIds&&-1===b.rowIds.indexOf(c.rowId)||void 0!==b.rowIndex&&c.gridData.index!==b.rowIndex||void 0!==b.rowIndexes&&-1===b.rowIndexes.indexOf(c.gridData.index)||d.push(c)});return d},getTitleCell:function(a){var b=e.querySingleCell(a,{rowIndex:0,columnIndex:0});if(b&&!q.getFieldInfo(b)&&(1===a.columns.length||q.getColumnSpan(b)===a.columns.length))return b},isDynamicFieldCell:function(a,b){return a._dynamicBindings&&
a._dynamicBindings[b.column.field]},getDynamicallyBoundColumns:function(a,b){return a._dynamicBindings&&a._dynamicBindings[b.field]},getDynamicallyBoundFieldCells:function(a,b){if(b.column){var d=a._dynamicBindings&&a._dynamicBindings[b.column.field];if(!d)return null;var c=[];d.forEach(function(g){(g=g&&e.querySingleCell(a,{columnId:g.id,rowId:b.rowId}))&&c.push(g)});return c}},getAllBoundCells:function(a,b,d){var c=[],g={};b&&b.forEach(function(h){if((!d||d(h))&&!g[h.uniqueId]){g[h.uniqueId]=!0;
var m=e.getDynamicallyBoundFieldCells(a,h);m?m.forEach(function(p){c.push(p);g[p.uniqueId]=!0}):c.push(h)}});return l.removeDuplicates(c,"uniqueId")},trimDynamicBindings:function(a,b){var d=[],c={};b&&b.forEach(function(g){var h=e.getDynamicallyBoundFieldCells(a,g);h&&h.length?(c[h[0].uniqueId]||d.push(h[0]),h.forEach(function(m){c[m.uniqueId]=!0})):d.push(g)});return d},collectFieldInfos:function(a,b){var d=[];b=b||{};var c=b.fieldCells||a.getFieldCells();b.trimDynamicBinding&&c&&(c=e.trimDynamicBindings(a,
c));c&&c.forEach(function(g){(g=q.getFieldInfo(g))&&d.push(g)});return d},cellHasFloatingTableParent:function(a){function b(d){return d.isSection&&d.isDataDrillingView?!1:d.isFloatingTable?!0:d.parentWidget?b(d.parentWidget):!1}return a&&a.parentGrid?b(a.parentGrid):!1},isMouseOver:function(a){return f.isMouseOverBox(e.getBBox(a))},getOverFieldCell:function(a,b){b=b||{};var d=b.cellFilter||function(){return!0},c;a.getForegroundFloatingCells({topFirst:!0}).some(function(g){if(d(g)&&g.isMouseOver())return c=
g,!0});c||a.getFieldCells().some(function(g){if(d(g)&&g.isMouseOver())return c=g,!0});c||a.getBackgroundFloatingCells({topFirst:!0}).some(function(g){if(d(g)&&g.isMouseOver())return c=g,!0});return c},getBBox:function(a,b){var d=a.isSingleCelledTable()&&a.getFirstCell().getAngle();return"number"===typeof d&&0!==d?a.getFirstCell().getBBox(b):b&&b.noTransformation?k.noTransformPosition(a.domNode):t.position(a.domNode)}};return e})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/rows/_RowModifierNormal":function(){define(["./RowDataUtil"],
function(t){return{adjustRowHeight:function(q,l,k,f){var e=q.layoutDefaults.rowMinHeight;f=Math.max(f,e);var a=f-t.getDataHeight(q,l,k);if(q.keepGridHeightWhenResized){var b=q.store.data[l.index+1];b&&(a=t.getDataHeight(q,b,k)-a,a<e&&(f-=e-a,a=e),t.setDataHeight(q,b,k,a,!0))}t.setDataHeight(q,l,k,f,!0)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/GridLayoutColumnsCalculator":function(){define(["./ColumnDataUtil","./ColumnModifier","./ColumnsProcessor"],
function(t,q,l){var k={};k.recalcColumns=l.recalcColumns;k.recalcColumnsTableJson=l.recalcColumnsTableJson;k.adjustColumnWidth=q.adjustColumnWidth;k.getAffectedCells=q.getAffectedCells;k.getFieldWidth=t.getFieldWidth;k.setFieldWidth=t.setFieldWidth;k.calcFieldWidth=t.calcFieldWidth;k.recalcGridWidth=t.recalcGridWidth;return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnDataUtil":function(){define(["../GridLayoutCalculatorQueryUtil"],function(t){var q=
{getFieldWidth:function(l,k,f){var e="string"===typeof f?t.fieldToColumn(l,f):f;f=e?e.field:"string"===typeof f?f:null;return l.looseResize?q.getFieldWidthOwn(l,k,f)||e&&e.style.width||0:e&&e.style.width||0},getFieldWidthOwn:function(l,k,f){if(l.looseResize)return k.style.fields=k.style.fields||{},(k.style.fields[f]=k.style.fields[f]||{}).width},setFieldWidth:function(l,k,f,e,a){var b="string"===typeof f?t.fieldToColumn(l,f):f,d=b?b.field:"string"===typeof f?f:null;l.looseResize?(a?t.getRowSpannedData(l,
k,d)||[k]:[k]).forEach(function(c){c.style.fields=c.style.fields||{};(c.style.fields[d]=c.style.fields[d]||{}).width=e}):b&&(b.style.width=e)},calcFieldWidth:function(l,k,f,e){var a=0;1<(k.columnSpans&&k.columnSpans[f])?t.getSpannedColumns(l,f,k.columnSpans[f]).forEach(function(b){e!==b.field&&(a+=q.getFieldWidth(l,k,b.field))}):a=q.getFieldWidth(l,k,f);return a},recalcGridWidth:function(l){l._width=0;var k=l.store.data[0];l.columns.forEach(function(f){l._width+=q.getFieldWidth(l,k,f.field)});return l._width},
getAllowedWidth:function(l){return l.fitParentWhenResized?l.getAllowedWidthFromParent():l.getAllowedWidth()}};return q})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnModifier":function(){define(["../GridLayoutCalculatorQueryUtil","./ColumnDataUtil","./_ColumnModifierNormal","./_ColumnModifierLoose"],function(t,q,l,k){var f={},e={getColumnToChange:function(d,c,g,h){var m=t.getMovableColumn(d,c,g.field);m&&(d=q.calcFieldWidth(d,c,g.field,m.field),h-=
d);return{column:m||g,width:h}}},a={finalResizeGridCells:function(d){d.getFieldCells().forEach(function(c){c.setWidth(q.calcFieldWidth(d,c.gridData,c.column.field))});q.recalcGridWidth(d)}},b={recalcToStick:function(d){var c=d.columns[d.columns.length-1];d.store.data.some(function(g,h){if(!d.looseResize&&h)return!0;var m=0;d.columns.forEach(function(p){p!==c&&(m+=q.getFieldWidth(d,g,p.field))});q.setFieldWidth(d,g,c.field,q.getAllowedWidth(d)-m)})}};f.adjustColumnWidth=function(d,c,g,h){g=e.getColumnToChange(d,
c,g,h);(d.looseResize?k:l).adjustColumnWidth(d,c,g.column,g.width);d.stickToRight&&b.recalcToStick(d);a.finalResizeGridCells(d)};f.getAffectedCells=function(d,c,g){return d.looseResize?k.getAffectedCells(d,c,e.getColumnToChange(d,c,g).column):null};return f})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/_ColumnModifierNormal":function(){define(["./ColumnDataUtil"],function(t){var q={},l={adjustColumnWidth:function(k,f,e,a,b){function d(r,u){return t.setFieldWidth(k,
f,r.field,u,!0)}var c=k.layoutDefaults.columnMinWidth,g=function(){if(!e)return null;var r=t.getFieldWidth(k,f,e.field);void 0!==b&&(a=r+b);a=Math.max(c,a);var u,v=0,y=!1;k.columns.forEach(function(C){v+=t.getFieldWidth(k,f,C.field);y&&!u?u=C:C===e&&(y=!0)});var A=t.getAllowedWidth(k)-(v-r);return isNaN(A)?null:{width:a,widthMemo:r,maxAllowedColumnWidth:A,nextColumn:u}}();if(g){a=g.width;var h=g.widthMemo,m=g.maxAllowedColumnWidth,p=(g=g.nextColumn)&&t.getFieldWidth(k,f,g.field);h=a-h;var n=0;k.keepGridWidthWhenResized?
(g&&(h=p-h,h<c&&(a-=c-h,h=c),h<p&&(m+=p-h),d(g,h)),d(e,Math.min(m,a))):(g&&m<a&&p>c?(d(e,a),n=m-a):d(e,Math.min(m,a)),0!==n&&l.adjustColumnWidth(k,f,g,null,n))}}};q.adjustColumnWidth=function(k,f,e,a){l.adjustColumnWidth(k,f,e,a)};return q})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/_ColumnModifierLoose":function(){define("dojo/_base/lang dojox/uuid/generateRandomUuid ../GridLayoutCalculatorQueryUtil ../GridElementBoxCalculator ./ColumnDataUtil ../../GridQueryUtil".split(" "),
function(t,q,l,k,f,e){var a={collectColumnBoxes:function(g,h){for(var m=[],p=0;p<g.store.data.length;){var n=g.store.data[p],r=this._createEmptyBox();n=l.getRowSpannedData(g,n,h.field)||[n];r.elements=this._getSpannedDataElements(g,h,n);this._measureBox(r);var u=m[m.length-1];u&&(u.nextSibling=r,r.prevSibling=u);m.push(r);p+=n.length}return m},_createEmptyBox:function(){return{id:q(),box:null,elements:[],overlappingBoxes:[],overlappingBoxesCache:{},prevSibling:null,nextSibling:null}},_getSpannedDataElements:function(g,
h,m){var p=[];m.forEach(function(n){n={data:n,dataIndex:n.index,field:h.field,box:k.calcDataBox(g,n,h.field)};p.push(n)});return p},_measureBox:function(g){var h=0;g.elements.forEach(function(m){h+=m.box.h});g.box={x:g.elements[0].box.x,y:g.elements[0].box.y,w:g.elements[0].box.w,h:h}},mergeBoxesForRightColumn:function(g){var h=this._createEmptyBox();g.forEach(function(m){m.elements.forEach(function(p){h.elements.push({data:p.data,field:null,box:t.clone(p.box)})})});this._measureBox(h);h.box.w=1E6;
return[h]},getBoxAtDataIndex:function(g,h){return g.filter(function(m){return m.elements[0].dataIndex===h})[0]}},b={buildInfluenceTree:function(g,h,m){function p(n,r){(r?h:g).forEach(function(u){var v;if(v=!u.overlappingBoxesCache[n.id]){v=n.box;var y=u.box;v=!(v.y+.5>=y.y+y.h||v.y+v.h<=y.y+.5)}v&&(n.overlappingBoxes.push(u),n.overlappingBoxesCache[u.id]=!0)});n.overlappingBoxes.forEach(function(u){p(u,!r)})}m=a.getBoxAtDataIndex(g,m.index);p(m,!0);return m}},d={applyForce:function(g,h,m){function p(r,
u){var v=r.elements[0];v.field&&f.setFieldWidth(g,v.data,v.field,f.getFieldWidth(g,v.data,v.field)+(u?-1:1)*n,!0);r.overlappingBoxes.forEach(function(y){p(y,!u)})}var n=this._checkDelta(g,h,m);p(h,!1)},_checkDelta:function(g,h,m){function p(v,y){0!==r&&(y?0>r||(r=Math.min(r,v.box.w-n),v.prevSibling&&(r=Math.min(r,v.prevSibling.box.x+v.prevSibling.box.w-n-v.box.x)),v.nextSibling&&(r=Math.min(r,v.nextSibling.box.x+v.nextSibling.box.w-n-v.box.x))):0<r||(r=Math.max(r,-(v.box.w-n)),v.prevSibling&&(r=Math.max(r,
-(v.box.x+v.box.w-(v.prevSibling.box.x+n)))),v.nextSibling&&(r=Math.max(r,-(v.box.x+v.box.w-(v.nextSibling.box.x+n))))),v.overlappingBoxes.forEach(function(A){p(A,!y)}))}var n=g.layoutDefaults.columnMinWidth;m=Math.max(m,n);var r=m-h.box.w;if(0<r&&h.elements[0].field===g.columns[g.columns.length-1].field){var u=0;g.columns.forEach(function(v){u+=f.getFieldWidth(g,h.elements[0].data,v.field)});r=Math.min(r,f.getAllowedWidth(g)-u)}p(h,!1);return r}},c={_getInluencedStartBox:function(g,h,m){var p=g.columns[m.index+
1];m=a.collectColumnBoxes(g,m);g=p?a.collectColumnBoxes(g,p):a.mergeBoxesForRightColumn(m);return b.buildInfluenceTree(m,g,h)},getAffectedCells:function(g,h,m){function p(r){if(r.elements[0].data){var u=e.querySingleCell(g,{rowIndex:r.elements[0].data.index,columnField:r.elements[0].field,considerSpans:!0});u&&n.push(u)}r.overlappingBoxes.forEach(p)}var n=[];h=this._getInluencedStartBox(g,h,m);p(h);return n},adjustColumnCell:function(g,h,m,p){h=this._getInluencedStartBox(g,h,m);d.applyForce(g,h,p)}};
return{adjustColumnWidth:function(g,h,m,p){c.adjustColumnCell(g,h,m,p)},getAffectedCells:function(g,h,m){return c.getAffectedCells(g,h,m)}}})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/columns/ColumnsProcessor":function(){define(["dojox/uuid/generateRandomUuid","./ColumnDataUtil"],function(t,q){function l(f){f._dynamicBindings={};if(f.getNumDynamicColumns()){for(var e=f.getNumDynamicColumns(),a=f.getNumFixedColumns(),b=0;b<a;b++)f.columns[b].isFixed=!0;b=[];for(var d=
0;d<e;d++){for(var c=a,g=[];c<f.columns.length;){var h=f.columns[c+d];h.isDynamic=!0;g.push(h);c+=e}b.push(g)}b.forEach(function(m){m.forEach(function(p){f._dynamicBindings[p.field]=m})})}}var k={recalcColumns:function(f,e){var a=e&&e.resetWidth,b=e&&e.columnsToPreserve,d=e&&e.stickToRight,c=e&&e.newWidth,g=e&&e.rightOffsetWeight;e=e&&e._isJson;var h={},m=0;f.columns.every(function(A,C){if(!A.style||!A.style.width||isNaN(A.style.width)||"number"!==typeof A.style.width)return m=0,!1;m+=A.style.width;
h[C]=A.style.width;return!0});var p=c?c:d?f.getAllowedWidth():m?Math.min(m,f._width):f._width;p-=0<g?p*g:0;var n=p/f.columns.length,r=p;if(b){var u=b.length*n,v=0;b.forEach(function(A){v+=A.style.width});b.forEach(function(A){A.style.width=u/v*A.style.width/r*100+"%"})}f.columns.forEach(function(A,C,E){A.index=C;A.style=A.style||{};if("number"!==typeof A.style.width||a)if(C===E.length-1)A.style.width=r;else{var F=A.style.width;"string"===typeof F&&-1!==F.indexOf("%")?A.style.width=parseFloat(F.substr(0,
F.length-1))/100*p:A.style.width=n}r-=A.style.width;C===E.length-1&&0>r&&(A.style.width+=r);void 0===A.id&&(A.id=t())});if(f.looseResize){f.columns.some(function(A,C){var E=h[C]?A.style.width/h[C]:void 0;f.store.data.forEach(function(F){var B=q.getFieldWidthOwn(f,F,A.field);B?E&&1!==E&&q.setFieldWidth(f,F,A.field,B*E):q.setFieldWidth(f,F,A.field,A.style.width)})});var y=f.columns[f.columns.length-1].field;f.store.data.forEach(function(A){var C=0;f.columns.some(function(F){C+=q.getFieldWidthOwn(f,
A,F.field)});var E=p-C;0!==E&&q.setFieldWidth(f,A,y,q.getFieldWidthOwn(f,A,y)+E)})}e||(l(f),q.recalcGridWidth(f));return p},recalcColumnsTableJson:function(f){k.recalcColumns(f.data,{resetWidth:!0,newWidth:f.style.width,_isJson:!0})}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/gridLayoutCalcUtils/GridLayoutSnapper":function(){define(["dojo/_base/lang","./rows/RowDataUtil","./columns/ColumnDataUtil","./GridElementBoxCalculator"],function(t,q,l,k){return{autoSnapLayout:function(f){function e(){var p=
[];f.store.data.forEach(function(n){f.columns.forEach(function(r){p.push(t.mixin({id:n.index+"_"+r.field,data:n,dataIndex:n.index,column:r,field:r.field},k.calcDataBox(f,n,r.field)))})});return p}if(f.looseResize)for(var a=f.store.data.length*f.columns.length,b={},d=0;d<a;d++){var c=e(),g=c[d],h=g.x+g.w,m=g.y+g.h;b[g.id]=!0;c.forEach(function(p){if(!b[p.id]){var n=h-(p.x+p.w);.5>=Math.abs(n)&&l.setFieldWidth(f,p.data,p.field,p.w+n);n=m-(p.y+p.h);.5>=Math.abs(n)&&q.setDataHeight(f,p.data,p.field,p.h+
n)}})}}}})},"esri/dijit/geoenrichment/ReportPlayer/core/sections/sectionUtils/SectionJsonUtil":function(){define(["esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder","esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes","../../supportClasses/tableJson/TableJsonUtil"],function(t,q,l){var k={wrapInDetailsSectionJson:function(f,e){f=Array.isArray(f)?f:[f];var a=f.some(function(b){return"table"===b.id&&b.attributes&&(0<b.attributes.dynamicColumns||
0<b.attributes.dynamicRows)});return{type:e||(a?q.GROUP:q.DETAILS),stack:f}},createSectionJsonFromInfographicJson:function(f,e,a){f=l.createSingleCellTable({width:e,height:a,fieldInfo:t.createFieldInfoFromInfographic(f)});return k.wrapInDetailsSectionJson(f)},getSectionJsonInfographic:function(f){var e;f.stack&&f.stack.some(function(a){e="table"===a.id&&l.getTableJsonInfographic(a);return!!e});return e},getSectionJsonInfographicTable:function(f){var e;f.stack&&f.stack.some(function(a){if("table"===
a.id&&l.getTableJsonInfographic(a))return e=a,!0});return e},calcSectionJsonBox:function(f){var e,a;function b(g){e=Math.min(e,g.l);d=Math.min(d,g.t);a=Math.max(a,g.l+g.w);c=Math.max(c,g.t+g.h)}var d=e=Infinity;var c=a=0;f.stack&&f.stack.forEach(function(g){switch(g.id){case "table":var h=0;g.data.data.forEach(function(m){h+=m.style.height});b({l:g.style.left||0,t:g.style.top||0,w:g.style.width,h:h});break;case "img":case "map":b({l:g.style.left||0,t:g.style.top||0,w:g.style.width,h:g.style.height})}});
f=f.style||{};return{x:f.left,y:f.top,w:f.width||e+a,h:f.height||d+c,contentLeft:e,contentTop:d,contentW:a-e,contentH:c-d}}};return k})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/_FieldInfoBuilder":function(){define(["../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder","dojo/i18n!esri/nls/jsapi"],function(t,q){q=q.geoenrichment.dijit.ReportPlayer.ReportPlayer;return{getCalculatorOrScriptFieldInfo:function(l,k,f){if(!l)return null;if(k.variableProvider.isPlayerOnly&&
!k.useVariableProviderToCollectOnly){var e=k.variableProvider.toCalculator(l);if(!e)return console.log("Can't create a dummy calculator for \x3d\x3e "+l),null;f=f||{};f.calculatorName=e.variable.calculatorName;l=t.createFieldInfoFromCalculator(e,k.variableProvider,f);l.name=e.variable.fieldName;l.templateName=e.variable.templateName;return l}e=k.queryMetaDataFunc(l);var a=l.substr(0,l.indexOf("."));f=f||{};f.calculatorName=a;if(e)return e.isScript?t.createFieldInfoFromScript(e,f):t.createFieldInfoFromCalculator(e,
k.variableProvider,f);f=t.createFieldInfoFromMissingVariable(l);k.variableProvider.isPlayerOnly&&(e=k.variableProvider.toCalculator(l),f.alias=e&&e.variable.alias);f.alias=f.alias?f.alias+" ("+q.missingVariable+")":q.missingVariable;return f}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/DefaultAttachmentsStore":function(){define(["dojo/_base/declare","esri/dijit/geoenrichment/promise/all","esri/dijit/geoenrichment/when","./WebMapAttachmentStore"],function(t,q,
l,k){return t(null,{supportsMultipleAreas:!0,_analysisAreas:null,_currentAreaIndex:-1,_webMapStores:null,constructor:function(f){this._analysisAreas=f},initialize:function(){var f=this;this._webMapStores={};return q(this._analysisAreas.map(function(e,a){if(e=e.feature||e.location||e.additionalFeatures&&e.additionalFeatures[0])return(f._webMapStores[a]=new k(e)).initialize()})).then(function(){return f})},_callStoreMethod:function(f){var e=this._webMapStores[this._currentAreaIndex];return e?l(e[f](),
function(a){return a?a.slice():[]}):[]},getImages:function(){return this._callStoreMethod("getImages")},getAttributes:function(){return this._callStoreMethod("getAttributes")},getNotes:function(){return this._callStoreMethod("getNotes")},setCurrentAnalysisAreaIndex:function(f){this._currentAreaIndex=f}})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/WebMapAttachmentStore":function(){define("dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttributesUtil esri/dijit/geoenrichment/utils/requests/UniversalClient esri/dijit/geoenrichment/utils/CacheUtil esri/dijit/geoenrichment/utils/ImageUtil ./AttachmentsUtil".split(" "),
function(t,q,l,k,f,e,a,b){var d={getThumbnail:function(c){var g=e.get("WebMapAttachmentStore");g[c.url]||(g[c.url]=this._getDataURL(c));return g[c.url]},_getDataURL:function(c){return 0===c.url.indexOf("data:")?c.url:f.request(c.url).then(function(g){return g&&g.Attachment&&a.base64DataToDataURL(g.Attachment,c.contentType)}).otherwise(function(){return null})}};return t(null,{supportsMultipleAreas:!1,_attachmentInfos:null,_feature:null,_fieldInfos:null,_attributes:null,constructor:function(c,g){this._feature=
c;this._attachmentInfos=g},initialize:function(){this._tryGetFieldInfosAndAttributes();return l(this._attachmentInfos||this._tryGetAttachmentInfos()).always(function(){return!!this._attachmentInfos}.bind(this))},_tryGetFieldInfosAndAttributes:function(){var c=this._feature.getLayer();this._fieldInfos=(c=this._feature.infoTemplate||c&&c.infoTemplate)&&c.info.fieldInfos||[];this._attributes=q.mixin({},this._feature.attributes)},_tryGetAttachmentInfos:function(){return l(b.getFeatureAttachmentInfos(this._feature),
function(c){this._attachmentInfos=c}.bind(this))},getImages:function(){return this._attachmentInfos?this._attachmentInfos.map(function(c){return{getThumbnail:function(){return d.getThumbnail(c)},getUrl:function(){return c.url}}}):[]},getAttributes:function(){return k.composeAttributesFromFieldInfos(this._fieldInfos,this._attributes)},getNotes:function(){return[]},setCurrentAnalysisAreaIndex:null})})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttachmentsUtil":function(){define([],
function(){return{getFeatureAttachmentInfos:function(t){var q=t.getLayer();if(q&&q.hasAttachments&&q.queryAttachmentInfos&&q.objectIdField)return q.queryAttachmentInfos(t.attributes[q.objectIdField])}}})},"esri/dijit/geoenrichment/ReportPlayer/dataProvider/commands/supportClasses/LayoutXMLBuilder":function(){define("dojo/_base/lang esri/dijit/geoenrichment/utils/JsonXmlConverter esri/dijit/geoenrichment/ReportPlayer/core/conversion/reportingEngine/converters/DocumentConverter esri/dijit/geoenrichment/ReportPlayer/core/conversion/ConversionUtil esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/DocumentOptions esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes".split(" "),
function(t,q,l,k,f,e){return{buildLayoutXML:function(a){var b=l.buildDocumentTag({addDefaultQuery:!0,report:{templateJson:{documentOptions:t.mixin({},a.documentOptions,{left:0,right:0,top:0,bottom:0})}}}).documentTag,d=f.getPageBox(a.documentOptions),c=k.pxToPt(d.w),g=k.pxToPt(d.h);a.svgStrings.forEach(function(m,p){b.tags.push({name:"section",attributes:{type:e.DETAILS},tags:[{name:"img",attributes:{left:0,top:0,width:c,height:g},tags:[{text:"__svgString__"+p+"__svgString__"}]}]});p<a.svgStrings.length-
1&&b.tags.push({name:"pageBreak"})});var h=q.parseJson(b);a.svgStrings.forEach(function(m,p){h=h.replace("__svgString__"+p+"__svgString__",m)});return h},stitchDocuments:function(a){if(!a||!a.length)return null;var b=a[0],d=b.substr(0,b.indexOf("\x3csection")),c="";a.forEach(function(g,h){c+=g.replace(d,"").replace("\x3c/HTMLextReport\x3e","")+(h<a.length-1?"\x3cpageBreak /\x3e":"")});return d+c+"\x3c/HTMLextReport\x3e"}}})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/reportingEngine/converters/DocumentConverter":function(){define(["../../ConversionUtil",
"../ReportingEnginePageSizeCompatibilityUtil"],function(t,q){var l={buildDocumentTag:function(k){var f=k.report,e=f.templateJson.documentOptions,a={name:"HTMLextReport",attributes:{version:"10.1",pagesize:q.getReportingEnginePageSize(e.pagesize,e.orientation),orientation:e.orientation,left:t.pxToPt(e.left),right:t.pxToPt(e.right),top:t.pxToPt(e.top),bottom:t.pxToPt(e.bottom),style:t.composeStyleString(l.buildDocumentStyle(k)),comparisonZoom:f.defaultComparisonZoom||void 0},tags:[]};k.addDefaultQuery&&
a.tags.push({name:"queries",tags:[{name:"query",attributes:{name:"default",table:"headers"}}]});k.report.isGraphicReport||a.tags.push({name:"def",attributes:{align:e.align,lineSpacing:e.lineSpacing}});f.templateJson.tooltipInfo&&(f.templateJson.tooltipInfo.table||f.templateJson.tooltipInfo.chart)&&(k={name:"tooltip",tags:[]},a.tags.push(k),(e=f.templateJson.tooltipInfo.table)&&k.tags.push({name:"table",attributes:{value:e.value||void 0,alias:e.alias||void 0,expression:e.expression||void 0,conditional:e.conditional||
void 0}}),(f=f.templateJson.tooltipInfo.chart)&&k.tags.push({name:"chart",attributes:{title:f.title||void 0,value:f.value||void 0,weight:f.weight||void 0,min:f.min||void 0,max:f.max||void 0,avg:f.avg||void 0,conditional:f.conditional||void 0}}));return{documentTag:a}},buildDocumentStyle:function(k){k=k.report.templateJson.documentOptions;return{fontSize:t.pxToPt(k.fontSize),fontFamily:k.fontFamily}}};return l})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/ConversionUtil":function(){define(["dojo/_base/lang",
"esri/dijit/geoenrichment/utils/PageUnitsConverter","esri/dijit/geoenrichment/utils/ColorUtil"],function(t,q,l){var k={};t.mixin(k,q);var f={"font-size":"fontSize","line-height":"lineHeight","font-family":"fontFamily","font-style":"fontStyle","font-weight":"fontWeight","text-decoration":"textDecoration",color:"color","background-color":"backgroundColor"},e={},a;for(a in f)e[f[a]]=a;k.splitTrim=function(c,g,h){c=String(c).split(g).map(function(m){return m.trim()});return h?c.filter(function(m){return!!m}):
c};k.parseStyleString=function(c){var g={};k.splitTrim(c||"",";",!0).forEach(function(h){var m=k.splitTrim(h,":");if(h=f[m[0]])m=m[1],"rgba(0, 0, 0, 0)"===m&&(m="transparent"),g[h]=m});return g};k.composeStyleString=function(c,g){g=g&&g.addPx;var h="",m;for(m in c){var p=e[m];if(p){var n=c[m];n&&("backgroundColor"===m&&(n=l.toCSSColor(n)),h+=p+":"+n+(g&&g[p]?"px;":";"))}}return h};k.removeZeroProperties=function(c){Object.keys(c).forEach(function(g){0===Number(c[g])&&delete c[g]});return c};var b=
{valign:{center:"middle"}},d={valign:{middle:"center"}};k.getPropValuePtoE=function(c,g){return b[c]&&b[c][g]||g};k.getPropValueEtoP=function(c,g){return d[c]&&d[c][g]||g};k.KEY_OPERATOR_RE=/^(!=|>=|<=|<|>|=)/;k.ONE_FIELD_KEY_TEST=/^(default|(<|>|<=|>=|!=|=|)(-?\d+\.\d+|-?\d+))$/;k.KEY_INTERVAL_SEPARATOR=";";return k})},"esri/dijit/geoenrichment/ReportPlayer/core/conversion/reportingEngine/ReportingEnginePageSizeCompatibilityUtil":function(){define(["../../supportClasses/DocumentOptions"],function(t){var q=
{},l={a4:1,letter:1};q.getReportingEnginePageSize=function(k,f){return l[k]?k:(f=t.SIZE_TYPE_TO_DIM_HASH[k]&&t.SIZE_TYPE_TO_DIM_HASH[k][f])?t.combineCustomSizeString(f.w,f.h,"in"):k};return q})},"widgets/BusinessAnalyst/utils/ReportUtil":function(){define("dojo/Deferred dojo/promise/all dojo/when dojo/_base/array esri/request jimu/portalUtils dojo/i18n!../nls/strings".split(" "),function(t,q,l,k,f,e,a){STANDARD_INFOGRAPHIC_TYPEKEYWORD="esriReportPlayerStandardInfographic";return{_ownedCachedCustomReports:null,
_sharedCachedCustomReports:null,_cachedCountryClassicReports:[],_cachedInfographicReports:null,_countryInitDfds:[],getAvailableClassicReports:function(b,d){var c=this,g=[],h=new t,m;d&&k.forEach(d.countryConfig,function(u){b==u.countryID&&(m=u)});m||(m={countryID:b,allowEsriReports:!0,allowAllEsriReports:!0,allowEsriInfographics:!0,allowAllEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,allowAllOrgReports:!0,allowAllOrgInfographics:!0,
defaultInfographicID:"",defaultReportID:"",enabledEsriReports:[],enabledOrgReports:[],enabledEsriInfographics:[],enabledOrgInfographics:[]});var p=null,n=null,r=null;l(this._initReports(b),function(){if(!d||m.allowAllEsriReports||c._hasEnabledReports(c._cachedCountryClassicReports[b],m.enabledEsriReports))p=g.length,g.push({value:"esriReports",label:a.esriReports,children:[]});if(!d||m.allowAllOrgReports&&c._hasReportsForCountry(c._ownedCachedCustomReports,b)||c._hasEnabledReportsForCountry(c._ownedCachedCustomReports,
b,m.enabledOrgReports))n=g.length,g.push({value:"myReports",label:a.myReports,children:[]});if(!d||m.allowAllOrgReports&&c._hasReportsForCountry(c._sharedCachedCustomReports,b)||c._hasEnabledReportsForCountry(c._sharedCachedCustomReports,b,m.enabledOrgReports))r=g.length,g.push({value:"sharedReports",label:a.sharedReports,children:[]});(m.allowAllEsriReports||c._hasEnabledReports(c._cachedCountryClassicReports[b],m.enabledEsriReports))&&c._cachedCountryClassicReports[b]&&0<c._cachedCountryClassicReports[b].length&&
k.forEach(c._cachedCountryClassicReports[b],function(y){(m.allowAllEsriReports||m.enabledEsriReports.includes(y.reportID))&&g[p].children.push(c._formatClassicReportsForDropDown(y))});var u=["esriWebInfographicReport","esriWebSingleInfographic","esriWebBlankInfographic","esriWebHiddenInfographic","esriWebComparisonReport"];(m.allowAllOrgReports&&c._hasReportsForCountry(c._ownedCachedCustomReports,b)||c._hasEnabledReportsForCountry(c._ownedCachedCustomReports,b,m.enabledOrgReports))&&k.forEach(c._ownedCachedCustomReports,
function(y){y.properties.countries.includes(b)&&(m.allowAllOrgReports||m.enabledOrgReports.includes(y.id))&&(y.typeKeywords.some(function(A){return 0<=u.indexOf(A)})||g[n].children.push(c._formatClassicReportsForDropDown(y)))});(m.allowAllOrgReports&&c._hasReportsForCountry(c._sharedCachedCustomReports,b)||c._hasEnabledReportsForCountry(c._sharedCachedCustomReports,b,m.enabledOrgReports))&&k.forEach(c._sharedCachedCustomReports,function(y){y.properties.countries.includes(b)&&(m.allowAllOrgReports||
m.enabledOrgReports.includes(y.id))&&(y.typeKeywords.some(function(A){return 0<=u.indexOf(A)})||g[r].children.push(c._formatClassicReportsForDropDown(y)))});var v=function(y,A){y=y.label.toUpperCase();A=A.label.toUpperCase();var C=0;y>A?C=1:y<A&&(C=-1);return C};0<g.length&&g[0].children.sort(v);1<g.length&&g[1].children.sort(v);2<g.length&&g[2].children.sort(v);h.resolve(g)});return h},_hasEnabledReports:function(b,d){return b&&d?k.some(b,function(c){return d.includes(c.reportID)}):!1},_hasReportsForCountry:function(b,
d){return b&&d?k.some(b,function(c){return c.properties.countries.includes(d)}):!1},_hasEnabledReportsForCountry:function(b,d,c){return b&&d&&c?k.some(b,function(g){return g.properties.countries.includes(d)?c.includes(g.id):!1}):!1},_formatClassicReportsForDropDown:function(b){return b.metadata?{label:b.metadata.title,value:b.reportID,reportType:b.metadata.type}:{label:b.title,value:b.id,reportType:b.properties.type,item:{itemid:b.id,url:portalUrl,token:esri.id.credentials[0].token}}},getAvailableInfographicReports:function(b,
d){var c=this,g=[],h=new t,m;d&&k.forEach(d.countryConfig,function(u){b==u.countryID&&(m=u)});m||(m={countryID:b,allowEsriReports:!0,allowAllEsriReports:!0,allowEsriInfographics:!0,allowAllEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,allowAllOrgReports:!0,allowAllOrgInfographics:!0,defaultInfographicID:"",defaultReportID:"",enabledEsriReports:[],enabledOrgReports:[],enabledEsriInfographics:[],enabledOrgInfographics:[]});var p=null,n=
null,r=null;l(this._initReports(b),function(){if(!d||m.allowAllEsriInfographics||c._hasEnabledInfographics(c._cachedInfographicReports,m.enabledEsriInfographics))p=g.length,g.push({value:"esriReports",label:a.esriInfographics,children:[]});if(!d||m.allowAllOrgInfographics&&0<c._ownedCachedCustomReports.length||c._hasEnabledInfographics(c._ownedCachedCustomReports,m.enabledOrgInfographics))n=g.length,g.push({value:"myReports",label:a.myInfographics,children:[]});if(!d||m.allowAllOrgInfographics&&0<
c._sharedCachedCustomReports.length||c._hasEnabledInfographics(c._sharedCachedCustomReports,m.enabledOrgInfographics))r=g.length,g.push({value:"sharedReports",label:a.sharedInfographics,children:[]});(m.allowAllEsriInfographics||c._hasEnabledInfographics(c._cachedInfographicReports,m.enabledEsriInfographics))&&k.forEach(c._cachedInfographicReports,function(v){v.properties.countries.includes(b)&&(m.allowAllEsriInfographics||m.enabledEsriInfographics.includes(v.id))&&g[p].children.push(c._formatInfographicReportsForDropDown(v))});
(m.allowAllOrgInfographics&&0<c._ownedCachedCustomReports.length||c._hasEnabledInfographics(c._ownedCachedCustomReports,m.enabledOrgInfographics))&&k.forEach(c._ownedCachedCustomReports,function(v){v.properties.countries.includes(b)&&(m.allowAllOrgInfographics||m.enabledOrgInfographics.includes(v.id))&&(v.typeKeywords.includes("esriWebInfographicReport")||c._isOldPortalInfographic(v))&&g[n].children.push(c._formatInfographicReportsForDropDown(v))});(m.allowAllOrgInfographics&&0<c._sharedCachedCustomReports.length||
c._hasEnabledInfographics(c._sharedCachedCustomReports,m.enabledOrgInfographics))&&k.forEach(c._sharedCachedCustomReports,function(v){v.properties.countries.includes(b)&&(m.allowAllOrgInfographics||m.enabledOrgInfographics.includes(v.id))&&(v.typeKeywords.includes("esriWebInfographicReport")||c._isOldPortalInfographic(v))&&g[r].children.push(c._formatInfographicReportsForDropDown(v))});var u=function(v,y){v=v.label.toUpperCase();y=y.label.toUpperCase();var A=0;v>y?A=1:v<y&&(A=-1);return A};0<g.length&&
g[0].children.sort(u);1<g.length&&g[1].children.sort(u);2<g.length&&g[2].children.sort(u);h.resolve(g)});return h},_hasEnabledInfographics:function(b,d){return k.some(b,function(c){return d.includes(c.id)})},_isOldPortalInfographic:function(b){return b.properties&&b.properties.isHidden&&"true"===b.properties.isHidden?!1:b.properties&&b.properties.isGraphicReport&&"true"===b.properties.isGraphicReport?!0:!1},_formatInfographicReportsForDropDown:function(b){return{label:b.title,value:b.id}},_initReports:function(b){var d=
[],c=this;if(this._countryInitDfds[b])return this._countryInitDfds[b];this._countryInitDfds[b]=new t;var g=function(h,m){return f(h).then(function(p){k.forEach(p.results,function(n){m.push(n)});if(-1!=p.nextStart)return h.content.start=p.nextStart,g(h,m)},function(p){alert(p)})};e.getPortal(portalUrl).loadSelfInfo().then(function(h){var m=h&&h.helperServices&&h.helperServices.geoenrichment&&h.helperServices.geoenrichment.url?h.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";
c._cachedCountryClassicReports[b]||d.push(f({url:m+"/Geoenrichment/reports/"+b,content:{appID:"webappbuilder",f:"json",langCode:"en-us"}}).then(function(p){c._cachedCountryClassicReports[b]=p.reports},function(p){alert(p)}));c._cachedInfographicReports||(c._cachedInfographicReports=[],d.push(g({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:"typekeywords:(esriWebStandardInfographicReport)"}},c._cachedInfographicReports)));
c._ownedCachedCustomReports||(c._ownedCachedCustomReports=[],d.push(g({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) owner:'+esri.id.credentials[0].userId}},c._ownedCachedCustomReports)));c._sharedCachedCustomReports||(c._sharedCachedCustomReports=[],d.push(g({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",
start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:shared type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId}},c._sharedCachedCustomReports)),d.push(g({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:org type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId}},
c._sharedCachedCustomReports)),h&&h.appInfo&&h.appInfo.orgId&&d.push(g({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:public type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId+" orgid: "+h.id}},c._sharedCachedCustomReports)));0===d.length?c._countryInitDfds[b].resolve():q(d).then(function(){c._countryInitDfds[b].resolve()})});return this._countryInitDfds[b]}}})},
"widgets/BusinessAnalyst/esriAnalystX/widgets/Selects/FilteringSelectTree":function(){define(["dojo/_base/declare","./FilteringSelect","esri/dijit/geoenrichment/SelectableTree","../../widgets/SelectableTreeGrid/SelectableTreeGrid","xstyle/css!./css/FilteringSelect.css"],function(t,q,l,k){function f(a,b){var d=[];a.forEach(function(c){c.children.forEach(function(g){var h={};h[b.idProperty]=g[b.idProperty];h[b.labelProperty]=g[b.labelProperty];h.__item=g;d.push(h)})});return d}function e(a,b,d){var c=
{};b.forEach(function(h){c[h[d.idProperty]]=h});var g=[];a.forEach(function(h){var m=h.children.filter(function(n){return c[n[d.idProperty]]});if(m.length){var p={};p[d.idProperty]=h[d.idProperty];p[d.labelProperty]=h[d.labelProperty];p.children=m.map(function(n){var r={};r[d.idProperty]=n[d.idProperty];r[d.labelProperty]=n[d.labelProperty];return r});g.push(p)}});return{treeData:g,idsHash:c}}k=t(k,{showRootCheckbox:!1,showCheckboxColumn:!1,enableRowSelection:!0,expandOnNodeClick:!0,baseTree:null,
hostWidget:null,defaultExpand:null,_firstTimeExpand:!0,getLabel:function(a,b){return a[this.labelProperty]},onRowsSelected:function(a,b){a=a&&a[0];b=b&&b[0];a&&!a.children&&(b.setAttribute("item",a[this.idProperty]),this.onChange(b))},createOptions:function(a,b,d){a=e(this.baseTree.data,a,this);this.items=a.idsHash;this.tree.clear();if(this._firstTimeExpand){this._firstTimeExpand=!1;if(this.defaultExpand)var c=Object.assign({},this.defaultExpand);else{c={};var g=this;a.treeData.forEach(function(h){c[h[g.idProperty]]=
!0})}this.grid._expanded=c}this.tree.addNodes(a.treeData);this.refresh()},getHighlightedOption:function(){},highlightFirstOption:function(){},highlightLastOption:function(){},clearResultList:function(){this.tree.clear()},onChange:function(a){}});t=t(q,{dropDownClass:k,tree:null,autoComplete:!1,defaultExpand:null,postCreate:function(){this.inherited(arguments);this.tree&&this.setItems(this._getStoreItemsFromTree())},_setTreeAttr:function(a){this.tree=a;this._isCreated&&this.setItems(this._getStoreItemsFromTree());
this.dropDown&&(this.dropDown.baseTree=this.tree)},_getStoreItemsFromTree:function(){return f(this.tree.data,this)},_startSearch:function(a){if(!this.dropDown){var b=this.id+"_popup";this.dropDown=new this.dropDownClass({gridClass:"esriMapsAnalystXSelectableTreeGrid esriMapsAnalystXFilteringSelect_treeGrid",onChange:function(){return this._selectOption.apply(this,arguments)}.bind(this),id:b,dir:this.dir,textDir:this.textDir,tree:new l([],{idProperty:this.idProperty}),idProperty:this.idProperty,labelProperty:this.labelProperty,
baseTree:this.tree,hostWidget:this,defaultExpand:this.defaultExpand})}this.inherited(arguments)},_openResultList:function(){this.inherited(arguments);this.dropDown&&this.dropDown.refresh()},getSelectedItem:function(){var a=this.inherited(arguments);return a&&a.__item}});t.NONE_ID=q.NONE_ID;return t})},"widgets/BusinessAnalyst/esriAnalystX/widgets/Selects/FilteringSelect":function(){define("dojo/_base/declare dojo/store/Memory dojo/query dojo/dom-class dojo/dom-style dojo/dom-geometry dijit/form/FilteringSelect dijit/form/_ComboBoxMenu ../../dijit/tooltips/TooltipUtil dojo/i18n!../../../nls/strings xstyle/css!./css/FilteringSelect.css".split(" "),
function(t,q,l,k,f,e,a,b,d,c){var g=t(q,{filtered:!1,noneItem:null,get:function(h){return"None"==h?this.noneItem:this.inherited(arguments)},query:function(h,m){var p=this.inherited(arguments);this.filtered=p.length!=this.data.length;return p}});q=t(b,{baseClass:"dijitComboBoxMenu",idProperty:"value",postCreate:function(){this.inherited(arguments);d.autoTooltip(this.domNode)},_createMenuItem:function(){var h=this.inherited(arguments);h.className+=" TrimWithEllipses";return h},selectItem:function(h){if(this.items){for(var m=
-1,p=0;p<this.items.length;p++)if(this.items[p][this.idProperty]==h){m=p;break}if(!(0>m))for(h=this.containerNode.children,p=0;p<h.length;p++){var n=h[p];if("none"!=n.style.display&&n.getAttribute("item")==m){this.selectLastNode();this.set("selected",n,!0);break}}}}});t=t(a,{forceWidth:!1,autoWidth:!1,selectOnClick:!0,idProperty:"value",labelProperty:"label",placeHolder:null,dropDownClass:q,options:null,_assignedStore:null,_isCreated:!1,postMixInProperties:function(){this.searchAttr=this.labelAttr=
this.labelProperty;var h={};h[this.idProperty]="None";h[this.labelAttr]=this.placeHolder||c.None;this.set("store",new g({idProperty:this.idProperty,noneItem:h}));this.inherited(arguments)},_startSearch:function(){this.inherited(arguments);this.dropDown.idProperty=this.idProperty;this.dropDown.labelProperty=this.labelProperty},postCreate:function(){this.inherited(arguments);d.autoTooltip(this.domNode);(this.options||this._assignedStore)&&this.setItems(this.options||this._assignedStore.data);k.add(this.domNode,
"esriMapsAnalystXFilteringSelect");this._isCreated=!0},_onFocus:function(){this._updateTrimWithEllipses(!0);this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this._updateTrimWithEllipses(!1)},_updateTrimWithEllipses:function(h){var m=l(".dijitInputInner",this.domNode)[0];if(m)k[h?"remove":"add"](m,"TrimWithEllipses")},_setStoreAttr:function(h){h instanceof g?(this.store=h,this.inherited(arguments)):(this._assignedStore=h,this._isCreated&&this.setItems(this._assignedStore.data))},
_setOptionsAttr:function(h){this.options=h;this._isCreated&&this.setItems(this.options)},setItems:function(h,m){this.store.setData(h);this.closeDropDown();this.dropDown&&this.dropDown.clearResultList();h=this.get("value");m=m||"None";this.set("value",m);m==h&&this.emit("Change");this._updateTrimWithEllipses(this.get("focused"))},_openResultList:function(h,m,p){var n=e.getContentBox(this.domNode).w;f.set(this.dropDown.domNode,"width",n+"px");this.inherited(arguments);this.store.filtered||this.dropDown.selectItem&&
this.dropDown.selectItem(this.get("value"))},_setBlurValue:function(){var h=this.get("displayedValue");"undefined"==typeof this.item&&(this.item=null,this.set("displayedValue",h));this.value!=this._lastValueReported&&this._handleOnChange(this.value,!0);this._refreshState();this.focusNode.removeAttribute("aria-activedescendant")},getSelectedItem:function(){var h=this;return this.store.data.filter(function(m){return m[h.idProperty]==h.get("value")})[0]}});t.NONE_ID="None";return t})},"widgets/BusinessAnalyst/esriAnalystX/dijit/tooltips/TooltipUtil":function(){define("dojo/dom-construct dojo/dom-style dojo/dom-geometry dojo/dom-class dojo/query dojo/on dojox/gfx dojo/sniff dojo/aspect dojox/uuid/generateRandomUuid dijit/Tooltip ../utils/DomUtil ../utils/MouseUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/domReady!".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p){function n(){F&&(F.isMultilineContainer?A.hideTooltipForNode(F):(clearInterval(F.__autoTooltipInLayoutCheckHandle),delete F.__autoTooltipInLayoutCheckHandle,g.hide(F)),F=null)}function r(B,w){w=w||"";var z=t.create("div",{class:"esriMapsAnalystXValidationTooltip"+w},document.body);!w&&t.create("div",{class:"esriMapsAnalystXValidationTooltipTip"+w},z);t.create("div",{innerHTML:B,class:"esriMapsAnalystXValidationTooltipBody"+w},z);q.set(z,"position","fixed");return z}
function u(B,w){function z(){B&&(document.body.removeChild(B),I.forEach(function(L){L.remove()}),B=I=null)}w=w.textbox||w;var H=l.getMarginBox(B),G=l.position(w);"rtl"===document.dir?q.set(B,{left:G.x-H.w+"px",top:G.y+G.h/2-H.h/2+"px"}):q.set(B,{left:G.x+G.w+"px",top:G.y+G.h/2-H.h/2+"px"});var I=[e(document.body,"mousedown, keydown",z),e(w,"blur",z)];return{remove:z}}function v(B,w,z){function H(){var O=t.create("div",{class:"esriMapsAnalystXClosableTooltipTip"},I);k.add(O,"right"===z?"esriMapsAnalystXClosableTooltipTipRight":
"esriMapsAnalystXClosableTooltipTipLeft")}function G(){L=t.create("div",{class:"esriMapsAnalystXClosableTooltipBody"},I);t.create("div",{innerHTML:B,class:"esriMapsAnalystXClosableTooltipLabel"},L);N=t.create("div",{class:"esriMapsAnalystXClosableTooltipCloseButton esriMapsAnalystXCloseWindow esriMapsAnalystXCloseWindowWhite"},L)}w={class:"esriMapsAnalystXClosableTooltip "+(w||"")};w.id=c();var I=t.create("div",w,document.body),L,N;"right"!==z?(G(),H()):(H(),G());q.set(I,"position","fixed");return{tooltip:I,
body:L,closeButton:N}}function y(B,w,z,H){var G=l.getMarginBox(B.tooltip),I=l.position(w);"rtl"===document.dir&&"right"!==H||"rtl"!==document.dir&&"right"===H?q.set(B.tooltip,{left:I.x+I.w+"px",top:I.y+I.h/2-G.h/2+"px"}):q.set(B.tooltip,{left:I.x-G.w+"px",top:I.y+I.h/2-G.h/2+"px"});var L,N=function(){L&&clearTimeout(L);O&&clearInterval(O);R&&R.remove();B.tooltip.parentNode===document.body&&document.body.removeChild(B.tooltip)};var O=setInterval(function(){h.isNodeInLayout(w)||N();h.isNodeVisible(w)?
h.show(B.tooltip):h.hide(B.tooltip)},300);z&&(L=setTimeout(N,z));var R=e(B.closeButton,"click",function(){N()});B.tooltip._removeFunc=N;return B.tooltip}var A={},C={};A.hideTooltipForNode=p.hideTooltipForNode;A.setTooltipToNode=p.setTooltipToNode;A.createTooltip=function(B,w,z){var H={orientation:l.isBodyLtr(document)?"right":"left",offset:{x:15,y:0}};w&&(H.innerHTML=w);z&&(H=Object.assign(H,z));H.id=c();H.toMouseCursor&&(H.mouseEvent=m.getCursorPosition(),delete H.toMouseCursor);w=H.mouseEvent;delete H.mouseEvent;
z=H.htmlFragment;delete H.htmlFragment;var G=H.widget;delete H.widget;var I=H.orientation;delete H.orientation;var L=H.offset;delete H.offset;var N=H.horizontalOffset;delete H.horizontalOffset;var O=t.create("div",H,B?B.container:document.body);z?t.place(z,O):G&&G.placeAt(O);q.set(O,"position","fixed");var R=l.getMarginBox(O),S=function(U,Z){var da=U.touches?event.touches[0].clientX:U.clientX;U=U.touches?event.touches[0].clientY:U.clientY;var X,ea,Q=L.x,W=L.y;"left"===I?0>da-R.w-Q&&(X="right"):da+
R.w+Q>document.body.clientWidth&&(X="left");U+R.h+W>document.body.clientHeight&&(ea="above");X=X||I;q.set(O,{left:Z?Z+"px":da+("left"===X?-R.w-Q:Q)+"px",top:U+("above"===ea?-R.h-W:W)+"px"});O.style.display=""};w&&S(w,N);H=[];H.push(e(B?B:document.body,B?"mouse-move, mousemove":"mousemove, touchmove",function(U){S(U,N)}));H.push(e(B?B:document.body,B?"mouse-out, mouseout":"mouseout, touchend",function(U){O.style.display="none"}));B={};B.handlers=H;B.tooltip=O;C[O.id]=B;return O};A.removeTooltip=function(B){if(B){B=
"string"===typeof B?B:B.id;var w=C[B];delete C[B];w&&(w.handlers.forEach(function(z){z.remove()}),t.destroy(w.tooltip))}};var E={};A.registerTooltipForSlider=function(B,w,z,H){var G={offsetX:0,offsetY:0,class:"esriMapsAnalystXTooltip"};w&&(G=Object.assign(G,w));G.id=c();var I=t.create("div",G,document.body);I.style.display="none";q.set(I,"position","fixed");var L=!1,N=function(R,S){if(!L){L=!0;I.style.display="";I.innerHTML=S();var U=l.getMarginBox(I),Z=l.position(R);q.set(I,{left:Z.x+Z.w/2-U.w/2+
G.offsetX+"px",top:Z.y-U.h-5+G.offsetY+"px"});var da=[];da.push(d.after(B,"onChange",function(){I.innerHTML=S();Z=l.position(R);q.set(I,{left:Z.x+Z.w/2-U.w/2+"px",top:Z.y-U.h-5+"px"})}));var X=function(){I.style.display="none";da.forEach(function(Q){Q.remove()});L=!1},ea=!1;da.push(e(R,"mousedown, mouseDown, mouse-down",function(){ea=!0;da.push(e(document,"mouseup, mouseUp, mouse-up",function(){X()}))}));da.push(e(R,"mouseout, mouseOut, mouse-out",function(){ea||X()}))}};w=[];w.push(e(B.sliderHandle,
"mouseover, mouseOver, mouse-over",function(){H&&B.isSliderDisabled&&B.isSliderDisabled()||N(B.sliderHandle,function(){var R=H?B.get("value")[0]:B.get("value");return z?z(R):R})}));H&&w.push(e(B.sliderHandleMax,"mouseover, mouseOver, mouse-over",function(){B.isSliderDisabled&&B.isSliderDisabled()||N(B.sliderHandleMax,function(){return z?z(B.get("value")[1]):B.get("value")[1]})}));w.push(d.before(B,"destroy",function(){A.unregisterTooltipForSlider(B)}));B.tooltipId=I.id;var O={};O.tooltip=I;O.handlers=
w;E[I.id]=O};A.unregisterTooltipForSlider=function(B){var w=E[B.tooltipId];w&&(w.handlers.forEach(function(z){z.remove()}),t.destroy(w.tooltip));delete E[B.tooltipId];delete B.tooltipId};var F=null;A.autoTooltip=function(B,w,z){"string"===typeof w&&(w=w.split(" ").filter(function(G){return G&&!!G.trim().length}));w=w||[];w.push("TrimWithEllipses");z=z||[];z.push("esriMapsAnalystXInfoIcon");for(var H=0;H<w.length;H++)e(B,"."+w[H]+":mouseover, "+w[H]+":touchstart, ",function(G){this!==F&&this.offsetWidth<
this.scrollWidth&&!this.noAutoTooltip&&(G=getComputedStyle(this).width,G=Number(G.substr(0,G.length-2)),0>G-Math.round(G)&&this.offsetWidth==this.scrollWidth-1||(n(),F=this,G=F.autoTooltip||F.textContent||F.value,F.title&&(G+=" ("+F.title+")"),G&&g.show(G,F,["above","below"]),e.once(F,"mouseout, touchstart, touchout",function(){n()}),F.__autoTooltipInLayoutCheckHandle=setInterval(function(){h.isNodeInLayout(F)||n()},500)))});if(b("touch"))for(H=0;H<z.length;H++)e(B,"."+z[H]+":touchstart ",function(G){this!==
F&&(F=this,F.title&&(g.show(F.title,F,["above","below"]),e.once(F,"touchstart, touchout",function(){g.hide(F);F=null})))})};A.addAutoTooltipsToTabContainer=function(B){f(".tabLabel",B.domNode).forEach(function(w){k.add(w,"TrimWithEllipses")});A.autoTooltip(B)};A.setMultilineText=function(B,w,z,H){z=z||2;w=w.trim();H=H||["above","below"];k.remove(B,"TrimWithEllipses");B.style.overflow="hidden";B.innerHTML="";for(var G=w,I=!1;G;){z--;var L=t.create("div",null,B);L.style.overflow="hidden";L.style.whiteSpace=
"nowrap";for(var N=G;N;)if(L.textContent=N,L.offsetWidth<L.scrollWidth-1)N=(N=N.match(/^(.*[^\s]+)\s+[^\s]+$/))&&N[1]||"";else break;!N||!z&&N!==G?(L.textContent=G,G="",L.style.textOverflow="ellipsis",I=!0):G=G.substr(N.length).trim()}I&&A.setTooltipToNode(B,function(){n();F=B;F.isMultilineContainer=!0;return w},{position:H})};A.showErrorTip=function(B,w){return u(r(w),B.domNode||B)};A.showNewStyleErrorTip=function(B,w,z){return u(r(w,"NewStyle"+(z?" esriMapsAnalystXWarningStyle":"")),B.domNode||
B)};A.showAlertTooltip=function(B){B&&B.node&&B.message&&(g.show(B.message,B.node,B.position||["above","below"]),setTimeout(function(){g.hide(B.node)},B.timeout||5E3))};A.showClosableTooltip=function(B){var w=v(B.message,B.tooltipClass,B.position);return y(w,B.component,B.timeout,B.position)};A.removeClosableTooltip=function(B){B&&B._removeFunc&&B._removeFunc()};A.showClosableTooltipOnVerticalBracket=function(B){var w=B.below||B.above,z=l.position(B.above,!0),H=l.position(w,!0),G="rtl"!==document.dir?
"start"===B.direction:"end"===B.direction,I=z.x+z.w*(G?0:1);z=z.y;var L=H.y+H.h,N=t.create("div",{class:"esriMapsAnalystFlexibleTooltip_tooltip esriMapsAnalystXNonSelectable"},document.body),O=t.create("div",{class:"esriMapsAnalystFlexibleTooltip_surfaceContainer"},N);H={};I={top:z-2,left:I+(G?-3:3),height:L-z+4,width:10};for(var R in I)H[R]=I[R]+"px";q.set(N,H);var S=a.createSurface(O,I.width,I.height);S.clear();S.createPolyline([{x:G?I.width:0,y:0},{x:G?0:I.width,y:0},{x:G?0:I.width,y:I.height},
{x:G?I.width:0,y:I.height}]).setStroke({color:"#6E6E6E",width:6});B.component=N;G=v(B.message,B.tooltipClass,B.position);var U=function(){clickHandler&&clickHandler.remove();Z&&clearInterval(Z);S&&S.clear();t.destroy(O);t.destroy(N)},Z=setInterval(function(){h.isNodeInLayout(w)||U();h.isNodeVisible(w)?q.set(N,"visibility","visible"):q.set(N,"visibility","hidden")},300);B.timeout&&setTimeout(U,B.timeout);clickHandler=e(G.closeButton,"click",U);tooltip=y(G,B.component,B.timeout,B.position);var da=tooltip._removeFunc;
tooltip._removeFunc=function(){da();U()};return tooltip};return A})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DomUtil":function(){define("dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/on ../../utils/ObjectUtil esri/dijit/geoenrichment/utils/DomUtil".split(" "),function(t,q,l,k,f,e,a){var b=Object.assign({},a);b.select=function(d){return b.addTag(d,"selected")};b.unselect=function(d){return b.removeTag(d,"selected")};b.floatStart=function(d){return b.addTag(d,"esriMapsAnalystXFloatStart")};
b.floatEnd=function(d){return b.addTag(d,"esriMapsAnalystXFloatEnd")};b.addSpacer=function(d,c){d=t.create("div",{"class":"esriMapsAnalystXSpacer",innerHTML:"\x26nbsp;"},d);if(c)b[c](d);return d};b.getAndUpdateNumber=function(d,c){if(!d)return NaN;var g=d.get&&d.set;void 0===c&&(c=0);var h=e.parseNumber(g?d.get("value"):d.value,c);isNaN(h)||(g?d.set("value",e.formatNumber(h,c)):d.value=e.formatNumber(h,c));return h};b.getAndUpdateString=function(d){if(!d)return null;if(d.get&&d.set){var c=d.get("value").trim();
d.set("value",c)}else c=d.value.trim(),d.value=c;return c};b.getScreenScaleFactor=function(){return b.getTextBox("",{style:"width: 72pt; height: 72pt"}).w/96};b.positionAtCenter=function(d,c){if(d&&c){var g=q.position(d);c=q.position(c);g.w&&g.h&&c.w&&c.h&&l.set(d,{left:(c.w-g.w)/2+"px",top:(c.h-g.h)/2+"px"})}};b.showAroundOverlay=function(d,c){c=c||{};b.removeAroundOverlay(d);var g={w:"width",h:"height",l:"left",t:"top",r:"right",b:"bottom"},h=q.position(d);if(c.viewPortContainer){var m=q.position(c.viewPortContainer),
p=h.x,n=h.y;h.x=Math.max(h.x,m.x);h.w-=h.x-p;h.y=Math.max(h.y,m.y);h.h-=h.y-n;h.w=Math.min(h.w,m.x+m.w-h.x);h.h=Math.min(h.h,m.y+m.h-h.y)}d.__aroundOverlays=(c.placeInNode?[{l:0,t:-h.y,w:h.w,h:h.y},{l:h.w,t:-h.y,w:document.body.clientWidth-(h.x+h.w),h:document.body.clientHeight},{l:0,t:h.h,w:h.w,h:document.body.clientHeight-(h.y+h.h)},{l:-h.x,t:-h.y,w:h.x,h:document.body.clientHeight}]:[{l:h.x,t:0,w:h.w,h:h.y},{w:document.body.clientWidth-(h.x+h.w),r:0,t:0,b:0},{l:h.x,h:document.body.clientHeight-
(h.y+h.h),w:h.w,b:0},{l:0,t:0,w:h.x,b:0}]).map(function(u){var v=t.create("div",{"class":c.overlayClass||"esriMapsAnalystXNodeAroundOverlay"},c.placeInNode?d:document.body),y={position:"absolute"},A;for(A in g)void 0!==u[A]&&(y[g[A]]=Math.round(u[A])+"px");l.set(v,y);return v});h=function(){b.removeAroundOverlay(d)};c.removeOnClick&&(d.__aroundOverlaysRemoveHandle=f.once(document.body,"click",h));d.__aroundOverlaysResizeHandle=f(window,"resize",function(){b.showAroundOverlay(d,c)});var r;d.__aroundOverlaysSetIntervalHandle=
setInterval(function(){if(r){var u=q.position(d);u.x==r.x&&u.y==r.y&&u.w==r.w&&u.h==r.h||b.showAroundOverlay(d,c)}else r=q.position(d)},50);return{remove:h}};b.removeAroundOverlay=function(d){d.__aroundOverlays&&d.__aroundOverlays.forEach(function(c){t.destroy(c)});delete d.__aroundOverlays;d.__aroundOverlaysRemoveHandle&&d.__aroundOverlaysRemoveHandle.remove();delete d.__aroundOverlaysRemoveHandle;d.__aroundOverlaysResizeHandle&&d.__aroundOverlaysResizeHandle.remove();delete d.__aroundOverlaysResizeHandle;
clearInterval(d.__aroundOverlaysSetIntervalHandle);delete d.__aroundOverlaysSetIntervalHandle};b.getDocumentStyleDeclaration=function(d){function c(m){try{var p=m.rules||m.cssRules}catch(r){p=null}if(p)for(m=0;m<p.length;m++){var n=p[m];if(n.styleSheet){if(n=c(n.styleSheet))return n}else if(n.selectorText==d)return n.style}}for(var g=0;g<document.styleSheets.length;g++){var h=c(document.styleSheets[g]);if(h)return h}return null};b.getNodeFontFamily=function(d){return(d=l.get(d,"fontFamily")||l.getComputedStyle(d)["font-family"])?
d.replace(/'|"/g,"").split(",")[0]:d};b.getNodeFontSize=function(d){return l.toPixelValue(d,l.get(d,"fontSize"))};b.listenToNodeAdded=function(d,c,g){if(b.isNodeInLayout(d))c();else{d.__listenToNodeAddedHandle&&d.__listenToNodeAddedHandle.remove();var h=setInterval(function(){b.isNodeInLayout(d)&&(d.__listenToNodeAddedHandle&&d.__listenToNodeAddedHandle.remove(),c())},g||100);d.__listenToNodeAddedHandle={remove:function(){clearInterval(h);delete d.__listenToNodeAddedHandle}};return d.__listenToNodeAddedHandle}};
b.isNodeVisible=function(d){return b.isChildOf(d,document.body,function(c){return!k.contains(c,"dijitHidden")&&"hidden"!=l.get(c,"visibility")})};b.enableHyperlink=function(d,c){c?k.replace(d,"esriMapsAnalystXLink","esriMapsAnalystXLinkDisabled"):k.replace(d,"esriMapsAnalystXLinkDisabled","esriMapsAnalystXLink")};return b})},"widgets/BusinessAnalyst/esriAnalystX/utils/ObjectUtil":function(){define(["../../baUtil/ObjectUtil","esri/dijit/geoenrichment/utils/ObjectUtil","esri/dijit/geoenrichment/utils/SortUtil"],
function(t,q,l){var k=Object.assign({},t,q,l);k.getPrototypeOf=function(f){try{return Object.getPrototypeOf?Object.getPrototypeOf(f):f.__proto__||f.constructor&&f.constructor.prototype}catch(e){return null}};k.isJson=function(f){return"object"===typeof f&&k.getPrototypeOf(f)===Object.prototype};k.copyJson=function(f){return void 0===f||null===f?null:JSON.parse(JSON.stringify({object:f})).object};k.convert=function(f,e,a){var b=e||function(){};e=b(f);if("undefined"!==typeof e)return e;if(Array.isArray(f)){var d=
[];f.forEach(function(m){d.push(k.convert(m,b,a))},this);return d}if(!k.isJson(f))return f;e={};for(var c in f){var g=f[c],h=a?b(c):c;"undefined"===typeof h&&(h=c);e[h]=k.convert(g,b,a)}return e};k.getDeepCopy=function(f){return k.convert(f)};k.getRange=function(f,e,a){e="function"===typeof e?e.bind(null==a?null:a):null;var b,d;for(d in f)if(a=f[d],a=Number(null===e?a:e(a,d)),!isNaN(a))if(void 0===c)var c=b=a;else c=Math.min(c,a),b=Math.max(b,a);return void 0===c?{}:{min:c,max:b}};k.removeEmptyObjects=
function(f){function e(b){b&&"object"===typeof b&&Object.keys(b).forEach(function(d){var c=b[d];!c||"object"!==typeof c||Array.isArray(c)||Object.keys(c).length?e(c):(a=!0,delete b[d])})}for(var a=!0;a;)a=!1,e(f);return f};k.removeValues=function(f,e){function a(b){b&&"object"===typeof b&&Object.keys(b).forEach(function(d){e(d,b[d])?a(b[d]):delete b[d]})}a(f);return f};k.isEqual=function(f,e){if(null===f||"object"!==typeof f||null===e||"object"!==typeof e)return f===e;if(Object.keys(f).length!==Object.keys(e).length)return!1;
var a={},b;for(b in f)a[b]=!0;for(b in e)if(void 0!==a[b])delete a[b];else return!1;for(b in f)if(!k.isEqual(f[b],e[b]))return!1;return!0};k.getObject=function(f,e){if(!e)return f;e=e.split(".");for(var a=0;a<e.length;a++)f=f&&f[e[a]];return f};k.formatNumber=function(f,e){e="number"===typeof e?{places:e}:e||{};if(null==e.places||0>e.places)e.places=k.getPlaces(f,!0),e.maxPlaces&&e.places>e.maxPlaces&&(e.places=e.maxPlaces);return q.formatNumber(f,e)};k.getPlaces=function(f,e){function a(h,m){var p=
f.indexOf(h,b);if(0>p)return d;h=f.charAt(p+h.length);return!h||0>m.indexOf(h)?d:p-b}f=+f;if(isNaN(f))return-1;f+="";var b=f.indexOf(".")+1,d=b?f.length-b:0;if(2>=d||!e)return d;e=0;if(!+f.substr(0,b-1))for(;"0"===f.charAt(b);)b++,e++,d--;for(var c=d-1;2<=c;c--){var g=Math.min(a("000000000000000".substr(0,c),"01234"),a("999999999999999".substr(0,c),"56789"));if(g!==d){d=g;break}}return d+e};return k})},"widgets/BusinessAnalyst/baUtil/ObjectUtil":function(){define(["require","exports"],function(t,
q){function l(k,f){for(var e=0,a=Object.keys(f);e<a.length;e++){var b=a[e];"object"!==typeof k[b]||null===k[b]||"object"!==typeof f[b]||null===f[b]?k[b]=f[b]:Array.isArray(k[b])?Array.isArray(f[b])?k[b].concat(f[b]):k[b]=f[b]:Array.isArray(f[b])?k[b]=f[b]:l(k[b],f[b])}}return{map:function(k,f,e){void 0!==e&&(f=f.bind(e));if("object"!==typeof k)throw Error("Object or array expected");if(Array.isArray(k)){e=[];for(var a=0,b=k.length;a<b;a++)e.push(f(k[a],a));return e}e={};a=0;for(b=Object.keys(k);a<
b.length;a++){var d=b[a];Object.hasOwnProperty.call(k,d)&&(e[d]=f(k[d],d))}return e},deepAssign:function(k){for(var f=[],e=1;e<arguments.length;e++)f[e-1]=arguments[e];for(e=0;e<f.length;e++)l(k,f[e]);return k}}})},"esri/dijit/geoenrichment/utils/SortUtil":function(){define([],function(){function t(f,e,a,b){f=void 0===f||null===f;return f!=(void 0===e||null===e)?(e=f?-1:1,(void 0===b?a:b)?-e:e):f?0:null}function q(f){var e=/^(.+)\s([1-9]\d*)$/.exec(f);return e?{base:e[1],number:e[2]}:/^[1-9]\d*$/.test(f)?
{base:"",number:+f}:{base:f,number:0}}var l={NEWEST:"newest",OLDEST:"oldest",ALPHABETICAL:"alphabetical",UNALPHABETICAL:"unalphabetical",compareNumeric:function(f,e,a,b){b=t(f,e,a,b);if(null!==b)return b;f=Number(f);e=Number(e);b=f>e?1:f<e?-1:0;return a?-b:b},compareString:function(f,e,a,b){b=t(f,e,a,b);if(null!==b)return b;f=String(f);e=String(e);b=f.localeCompare(e);return a?-b:b}},k=/^(.+)\s([1-9]\d*)(\D*)$/;l.compareNames=function(f,e,a,b){var d=q("string"===typeof f?f.toLowerCase():f),c=q("string"===
typeof e?e.toLowerCase():e),g=null;if(d.base===c.base)g=l.compareNumeric(d.number,c.number,a,b);else{var h=k.exec(d.base);if(h){var m=k.exec(c.base);m&&h[1]===m[1]&&h[3]===m[3]&&(g=l.compareNumeric(h[2],m[2],a,b))}null===g&&(g=l.compareString(d.base,c.base,a,b))}return g||l.compareString(f,e,a,b)};l.compare=function(f,e,a,b){var d=t(f,e,a,b);if(null!==d)return d;d=typeof f;typeof e!=d&&(d="");switch(d){case "number":case "boolean":break;case "object":f=f.valueOf();e=e.valueOf();break;default:return l.compareString(f,
e,a,b)}d=f>e?1:f<e?-1:0;return a?-d:d};return l})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/MouseUtil":function(){define(["dojo/dom-geometry","esri/dijit/geoenrichment/utils/MouseUtil"],function(t,q){var l;q.unitTesting_setCursorOverNode=function(k){k=t.position(k);q.unitTesting_setCursorPosition(k.x+k.w/2,k.y+k.h/2)};q.unitTesting_setCursorPosition=function(k,f){q._latestEvent={clientX:k,pageX:k,clientY:f,pageY:f}};q.unitTesting_lockPosition=function(k){l=k};q.unitTesting_shiftMousePosition=
function(k,f){q.unitTesting_setCursorPosition(q._latestEvent.clientX+(k||0),q._latestEvent.clientY+(f||0))};q._setLatestEvent=function(k){l||(q._latestEvent=k)};return q})},"widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/SelectableTreeGrid":function(){define("dojo/_base/declare dojo/aspect dojo/Evented dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query dijit/Tooltip dijit/_WidgetBase ../../dijit/_TemplatedMixin dgrid/OnDemandGrid dgrid/tree esri/dijit/geoenrichment/utils/KeyboardUtil esri/dijit/geoenrichment/TriStateItem ../../dijit/utils/DgridUtil ../../dijit/utils/DomUtil ../../dijit/utils/MouseUtil ../../dijit/tooltips/TooltipUtil dojo/text!./templates/SelectableTreeGrid.html xstyle/css!./css/SelectableTreeGrid.css".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p,n,r,u,v,y,A){var C=t(null,{_selectedRowInfos:null,_lastSelectedRowInfo:null,_outsideHandler:null,_isSelectionFrozen:!1,keepSelectionOnOutsideClick:!1,_previouslySelectedRowsByNode:null,constructor:function(){this._previouslySelectedRowsByNode=new WeakMap},buildRendering:function F(){this._selectedRowInfos={};this.inherited(F,arguments)},postCreate:function B(){this.inherited(B,arguments);k.add(this.domNode,"esriMapsAnalystXNonSelectable")},_reselectSingleNode:function(B){this.selectSingleRow(this._previouslySelectedRowsByNode.get(B),
B)},selectSingleRow:function(B,w){this.unselectAllRows();this._selectRow(B,w)},_selectRow:function(B,w){k.add(B,this.selectedRowClass);k.add(B,"row-level-"+this._getNodeLevel(w));var z=this.tree.getIdentity(w),H={row:B,node:w,nodeId:z,index:w.parent&&w.parent.children.indexOf(w)};this._lastSelectedRowInfo=this._selectedRowInfos[z]=H;this._previouslySelectedRowsByNode.set(w,B);var G=this;this._outsideHandler=this._outsideHandler||a(document.body,"click",function(){v.isMouseOver(G.domNode)||G._isSelectionFrozen||
G.keepSelectionOnOutsideClick||G.unselectAllRows()})},_unselectRow:function(B,w){delete this._selectedRowInfos[this.tree.getIdentity(w)];k.remove(B,this.selectedRowClass)},unselectAllRows:function(){for(var B in this._selectedRowInfos)k.remove(this._selectedRowInfos[B].row,this.selectedRowClass);this._selectedRowInfos={};this._lastSelectedRowInfo=null;this._outsideHandler&&this._outsideHandler.remove();this._outsideHandler=null},getSelectedRowNodes:function(){return this._getSelectedNodesRows().nodes},
selectRowNodes:function(B){var w=this;B&&B.forEach(function(z){var H=w.grid.row(z);H&&H.element&&w._selectRow(H.element,z)})},freezeRowSelection:function(){this._isSelectionFrozen=!0},unfreezeRowSelection:function(){this._isSelectionFrozen=!1},_getSelectedNodesRows:function(){var B=[],w=[],z=[],H;for(H in this._selectedRowInfos)z.push(this._selectedRowInfos[H]);z.sort(function(G,I){return G.index-I.index});z.forEach(function(G){B.push(G.node);w.push(G.row)});return{nodes:B,rows:w}},_emitSelectedRowsEvent:function(){var B=
this._getSelectedNodesRows();if(B.nodes.length)this.onRowsSelected(B.nodes,B.rows)}});return t([c,g,l,C],{templateString:A,tree:null,grid:null,gridClass:"",highlightSelected:!0,firstColumns:null,additionalColumns:null,showRootCheckbox:!0,showCheckboxColumn:!0,showHeader:!0,labelColumnField:"label",gridParams:null,keepContentUnderScroll:void 0,hideInvisibleExpandoIcons:!1,expandOnNodeClick:!1,checkLimit:0,checkLimitMessage:null,checkLimitMessageTimeout:5E3,handleMultipleCheck:!1,enableRowSelection:!1,
enableMultipleRowSelection:!1,allowSelectionFromManyParents:!1,selectedRowFilter:null,selectedRowClass:"row-selected",enableHeaderLabelToggleClick:!0,defaultExpand:null,fitParentSize:!1,renderAllRows:!1,rowPostProcessor:null,_rootCheckbox:null,_checkboxes:null,_lastCheckedNode:null,updateSelectionCountDiv:function(B,w){},getLabel:function(B,w){return B.label},postCreate:function w(){this.inherited(w,arguments);this._createGrid()},resize:function(){this.grid.resize();this._updateCheckboxState(this._rootCheckbox);
for(var w in this._checkboxes)this._updateCheckboxState(this._checkboxes[w]);this._emitSelectionChanged()},setWidth:function(w){this.grid&&this.grid.domNode&&e.set(this.grid.domNode,"width",w+"px")},setHeight:function(w){this.grid&&this.grid.domNode&&e.set(this.grid.domNode,"height",w+"px")},row:function(w){return this.grid.row(w)},cell:function(w){return this.grid.cell(w)},_labelColumn:null,_createGrid:function(){var w=this;this._checkboxes={};var z={label:this.getLabel(this.tree.root,!0),sortable:!1,
field:this.labelColumnField,renderCell:this._renderLabel.bind(this),renderHeaderCell:this._renderLabelHeader.bind(this,this.tree.root)},H;if(this.additionalColumns&&this.additionalColumns.length&&(H=this.additionalColumns.filter(function(I){return I.field===w.labelColumnField})[0])){for(var G in z)void 0===H[G]&&(H[G]=z[G]);z=H}z.indentWidth=z.indentWidth||16;this._labelColumn=z=this._prepareTreeColumn(z);G=[];this.firstColumns&&(G=G.concat(this.firstColumns));this.showCheckboxColumn&&G.push({label:"",
field:"checkbox",sortable:!1,renderCell:this._renderCheckboxForColumn.bind(this),renderHeaderCell:this._renderCheckboxForColumn.bind(this,this.tree.root)});H||G.push(z);this.additionalColumns&&(G=G.concat(this.additionalColumns));z=["esriMapsAnalystXSelectableTreeGrid"];this.gridClass&&z.push(this.gridClass);this.fitParentSize&&z.push("fitParentSize");z=Object.assign({class:z.join(" "),keepScrollPosition:!0,store:this.tree,columns:G},this.gridParams);this.grid=this._createGridObject(z,this.gridContainer);
this.own(this.grid);this.grid._expanded=this.defaultExpand||this.grid._expanded||{};r.oddEvenFix(this.grid);this.own(a(this.tree,"updated",this._onStoreUpdated.bind(this)));this._addKeepScrollHandlers();this._addGridHandlers();this.renderAllRows&&(this.grid.minRowsPerPage=1E4,this.grid.maxRowsPerPage=10250);this.grid.startup();y.autoTooltip(this.domNode);this.showHeader||k.add(this.domNode,"esriMapsAnalystXGridNoHeader");a(this.grid.domNode,".dgrid-expando-icon:click,.dgrid-content .dgrid-column-labelColumn:dblclick,.dgrid-content .dgrid-column-labelColumn:keydown",
function(I){(I=w.grid.row(I))&&w.onExpandChangedUser(I.data)})},_createGridObject:function(w,z){return new h(w,z)},onRowInserted:function(w,z){},_addGridHandlers:function(){function w(H,G){z.enableRowSelection&&G.parent&&(!z.selectedRowFilter||z.selectedRowFilter(G))&&(k.add(H,"esriMapsAnalystXClickable"),a(H,"click",function(I){setTimeout(function(){if(!z._isSelectionFrozen){if(I.shiftKey&&z.enableMultipleRowSelection){if(z._lastSelectedRowInfo&&z._lastSelectedRowInfo.row.parentNode&&z._lastSelectedRowInfo.node.parent===
G.parent){var L=u.getChildIndex(z._lastSelectedRowInfo.row.parentNode,z._lastSelectedRowInfo.row),N=u.getChildIndex(H.parentNode,H),O=L<=N?z._lastSelectedRowInfo.row:H;L=L<=N?H:z._lastSelectedRowInfo.row;N=O;if(O.id!==L.id){do{O=z.grid.row(N).data;z._selectRow(N,O);if(N.id===L.id)break;N=N.nextSibling}while(N)}}else z.selectSingleRow(H,G);u.stealFocus()}else p.isCtrl(I)&&z.enableMultipleRowSelection?z._lastSelectedRowInfo&&z._lastSelectedRowInfo.row.parentNode&&z._lastSelectedRowInfo.node.parent===
G.parent||z.allowSelectionFromManyParents?z._selectedRowInfos[G.id]?z._unselectRow(H,G):z._selectRow(H,G):z.selectSingleRow(H,G):z.selectSingleRow(H,G);z._emitSelectedRowsEvent()}})}))}var z=this;this.own(q.after(this.grid,"insertRow",function(H){var G=H&&z.grid._rowIdToObject[H.id];if(H){if(G&&z.hideInvisibleExpandoIcons&&(!G.children||!G.children.length)){var I=b(".dgrid-expando-icon",H)[0];I&&(I.style.width="0")}u[G&&!1===G.visible?"hide":"show"](H);w(H,G)}G&&(z._updateRowHighlighting(G,H),z.onRowInserted(H,
G));z.rowPostProcessor&&z.rowPostProcessor(H,G);return H}))},_addKeepScrollHandlers:function(){function w(H){if(!z.grid.contentNode)return H;if(z.fitParentSize){var G=u.hasScrollbars(z.grid.bodyNode);z.grid.headerNode.style[z.isLeftToRight()?"right":"left"]=G.w?"":"0px";z._lastContentWidth=z.grid.contentNode.style.width||z._lastContentWidth||"";z.grid.contentNode.style.width=G.h?z._lastContentWidth:""}else z.keepContentUnderScroll?z.grid.contentNode.style.width=z.grid.headerNode.firstChild.offsetWidth+
"px":!1===z.keepContentUnderScroll&&(z.grid.contentNode.style.width="");return H}var z=this;if(this.fitParentSize||void 0!==this.keepContentUnderScroll)q.before(this.grid,"refresh",function(){z.hideCheckLimitMessage();z._lastCheckedNode=null}),q.after(this.grid,"resize",w),q.after(this.grid,"refresh",w)},_getNodeLevel:function(w){var z=-1;for(w=w&&w.parent;w;)z++,w=w.parent;return z},_prepareTreeColumn:function(w){return this._wrapTreeColumn(m(w))},_wrapTreeColumn:function(w){return w},_onStoreUpdated:function(){this._checkboxes=
{};this._refreshGrid();this._rootCheckbox&&this._updateCheckboxState(this._rootCheckbox);this._emitSelectionChanged()},_emitSelectionChanged:function(w){var z=this.tree.root.selectCount;this.updateSelectionCountDiv(this.selectionCounter,z);this.emit("SelectionChanged",{selected:z,toggledTreeNode:w})},refresh:function(){this._refreshGrid();this.refreshCheckboxes()},_isRefreshSuspended:!1,setRefreshSuspended:function(w){this._isRefreshSuspended=w},_refreshGrid:function(){if(!this._isRefreshSuspended){var w=
this.grid.getScrollPosition();this.grid.refresh();this.grid.scrollTo(w);for(var z in this._selectedRowInfos)this.grid.row(this._selectedRowInfos[z].node).element&&this._selectRow(this.grid.row(this._selectedRowInfos[z].node).element,this._selectedRowInfos[z].node)}},getScrollPosition:function(){return this.grid&&this.grid.getScrollPosition()},setScrollPosition:function(w){return this.grid&&this.grid.scrollTo(w)},_renderCheckbox:function(w){if(!w.leafCount&&w!==this.tree.root||!this.showCheckboxColumn||
!1===w.selectable&&void 0===w.indepSelection)return document.createTextNode("");var z=new n(null,{class:"esriStyleInTable"});z.autoToggle=!1;z.node=w;this._updateCheckboxState(z,w);!1===w.enabled&&z.set("disabled",!0);w===this.tree.root?(this._rootCheckbox=z,u[this.showRootCheckbox?"show":"hide"](z.domNode)):this._checkboxes[this.tree.getIdentity(w)]=z;z.onClick=this._onCheckboxClick.bind(this,w,z);return z},_renderCheckboxForColumn:function(w){return(w=this._renderCheckbox(w))&&w.domNode},refreshCheckboxes:function(){this._rootCheckbox&&
this._updateCheckboxState(this._rootCheckbox);for(var w in this._checkboxes)this._updateCheckboxState(this._checkboxes[w])},clearLastCheckInfo:function(){this._lastCheckedNode=null},_onCheckboxClick:function(w,z,H){H.stopPropagation();this.hideCheckLimitMessage();var G=this.handleMultipleCheck&&("function"!==typeof this.handleMultipleCheck||this.handleMultipleCheck(w));G&&H.shiftKey&&this._tryToggleMultipleNodes(this._lastCheckedNode,w,z||H)?this._lastCheckedNode=w:(this._lastCheckedNode=G?w:null,
this._toggleNodeSelection(w,z||H),this.refreshCheckboxes())},_tryToggleMultipleNodes:function(w,z,H){if(!w||w===z||w.parent!==z.parent)return!1;var G=z.parent.children,I=G.indexOf(w);z=G.indexOf(z);w=I<z?1:-1;var L=[],N=[];for(I+=w;;I+=w){var O=G[I];((void 0===O.indepSelection?O.selected:O.indepSelection)?L:N).push(O);if(I===z)break}L.forEach(function(R){this._toggleNodeSelection(R,H)},this);N.every(function(R){return this._toggleNodeSelection(R,H)},this);this.refreshCheckboxes();return!0},_toggleNodeSelection:function(w,
z){var H=void 0===w.indepSelection?!w.selected:!w.indepSelection;if(H&&this.checkLimit){var G=this.getSelectedNodes().length,I="function"===typeof this.checkLimit?this.checkLimit(this.tree,G):this.checkLimit;if(G>=I)if(void 0===w.indepSelection&&w.children&&!1!==this.tree.getSelectionState(w))H=!1;else return this.showCheckLimitMessage(z),!1}G=!0;void 0===w.indepSelection?(G=this.tree.changeSelect(w,H,I),!G&&this.showCheckLimitMessage(z)):w.indepSelection=H;this._emitSelectionChanged(w);return G},
_checkLimitHandler:null,showCheckLimitMessage:function(w){if(this.checkLimitMessage){var z=w&&(w.domNode||w.target);z&&(d.show(this.checkLimitMessage,z,["above","below"]),w=function(){z&&d.hide(z);z=null},setTimeout(w,this.checkLimitMessageTimeout),this._checkLimitHandler=w,this.onCheckLimitReached(w))}},hideCheckLimitMessage:function(){this._checkLimitHandler&&this._checkLimitHandler();this._checkLimitHandler=null},onCheckLimitReached:function(w){},_updateCheckboxState:function(w){if(w){var z=this._getNodeSelection(w.node);
w.set("checked",z);this._updateRowHighlighting(w.node,null,z)}},_getNodeSelection:function(w){return void 0!==w.indepSelection?w.indepSelection:this.tree.getSelectionState(w)},_updateRowHighlighting:function(w,z,H){this.highlightSelected&&w&&(H=void 0!==H?H:this._getNodeSelection(w),(z=z||this.grid&&this.row(w).element)&&(!0!==H||void 0===w.indepSelection&&!1===w.selectable?k.remove(z,"selected"):k.add(z,"selected")))},_renderLabel:function(w,z,H){z=this._renderLabelNode(w,H);this._provideLabelClickAction(z,
H,w);return z},_provideLabelClickAction:function(w,z,H){var G=this.expandOnNodeClick&&H.children?H.children.length&&(w=z,function(){this.toggleExpand(H);this.onExpandChangedUser(H)}.bind(this)):!1!==H.enabled&&this.showCheckboxColumn?this._onCheckboxClick.bind(this,H,null):null;G&&(k.add(w,"esriMapsAnalystXClickable"),a(w,"click",function(I){I.stopPropagation();G(I)}))},_renderLabelNode:function(w){return f.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(w)})},
_renderLabelHeader:function(w){var z=f.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(w)||this._labelColumn&&this._labelColumn.label||""});this.enableHeaderLabelToggleClick&&this.showRootCheckbox&&(k.add(z,"esriMapsAnalystXClickable"),a(z,"click",this._onCheckboxClick.bind(this,w,null)));return z},onRowsSelected:function(w,z){},isNodeSelected:function(w){return w&&(w.selected||w.indepSelection)},getSelectedNodes:function(){var w=this.tree.getSelectedNodes(!1),
z=this._getIndepSelectedNodes();return w.concat(z)},_getIndepSelectedNodes:function(){function w(H){H&&(H.indepSelection&&z.push(H),H.children&&H.children.forEach(w))}var z=[];w(this.tree.root);return z},getSelectedState:function(){if(!this.tree)return null;var w={normalSelection:{},indepSelection:{}},z=this.tree.getSelectedNodes(!1);z&&z.forEach(function(H){w.normalSelection[H.id]=!0});(z=this._getIndepSelectedNodes())&&z.forEach(function(H){w.indepSelection[H.id]=!0});return w},setSelectedState:function(w){if(this.tree){this.tree.changeSelect(this.tree.root,
!1);if(w){for(var z in w.normalSelection){var H=this.tree.get(z);H&&this.tree.changeSelect(H,!0)}for(z in w.indepSelection)if(H=this.tree.get(z))H.indepSelection=!0}this.refreshCheckboxes()}},setNodeSelected:function(w,z,H){w&&(void 0!==w.indepSelection?w.indepSelection=z:this.tree.changeSelect(w,z),!1!==H&&this.refreshCheckboxes())},isExpanded:function(w){w="string"===typeof w?w:w[this.tree.idProperty];return this.grid._expanded&&this.grid._expanded[w]},setExpanded:function(w,z,H){w="string"==typeof w?
w:w[this.tree.idProperty];void 0!==w&&(!1!==H?(H=this.grid.row(w))&&H.element&&this.grid.expand(w,z):this.grid._expanded[w]=z)},toggleExpand:function(w){this.setExpanded(w,!this.isExpanded(w))},getExpandedState:function(){return Object.assign({},this.grid._expanded)},setExpandedState:function(w){this.grid._expanded=w||{}},onExpandChangedUser:function(w){},destroy:function(){this.unselectAllRows();this.inherited(arguments)}})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_TemplatedMixin":function(){define(["dojo/_base/declare",
"dijit/_TemplatedMixin","./_EscapeValueMixin"],function(t,q,l){return t([q,l],{})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_EscapeValueMixin":function(){define(["dojo/_base/declare"],function(t){return t(null,{_escapeValue:function(q){return q.replace(/"/g,"\x26quot;")}})})},"dgrid/tree":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/_base/lang dojo/query dojo/on dojo/aspect ./util/has-css3 ./Grid dojo/has!touch?./util/touch put-selector/put".split(" "),function(t,
q,l,k,f,e,a,b,d,c,g){function h(n,r,u,v){v=this.grid.isRTL?"right":"left";var y=".dgrid-expando-icon";r&&(y+=".ui-icon.ui-icon-triangle-1-"+(u?"se":"e"));n=g("div"+y+"[style\x3dmargin-"+v+": "+n*(this.indentWidth||9)+"px; float: "+v+"]");n.innerHTML="\x26nbsp;";return n}function m(n){var r=this,u=this.style.height;u&&(this.style.display="0px"==u?"none":"block");n&&(g(this,".dgrid-tree-resetting"),setTimeout(function(){g(r,"!dgrid-tree-resetting")}));this.style.height=""}function p(n){var r=n.renderCell||
d.defaultRenderCell,u,v;n||(n={});n.shouldExpand=n.shouldExpand||function(y,A,C){return C};a.after(n,"init",function(){var y=n.grid,A=".dgrid-content .dgrid-column-"+n.id,C=[];y.cleanEmptyObservers=!1;if(!y.store)throw Error("dgrid tree column plugin requires a store to operate.");n.renderExpando||(n.renderExpando=h);C.push(y.on(n.expandOn||".dgrid-expando-icon:click,"+A+":dblclick,"+A+":keydown",function(E){var F=y.row(E);y.store.mayHaveChildren&&!y.store.mayHaveChildren(F.data)||"keydown"==E.type&&
32!=E.keyCode||"dblclick"==E.type&&v&&1<v.count&&F.id==v.id&&-1<E.target.className.indexOf("dgrid-expando-icon")||y.expand(F);-1<E.target.className.indexOf("dgrid-expando-icon")&&(v&&v.id==y.row(E).id?v.count++:v={id:y.row(E).id,count:1})}));b("touch")&&C.push(y.on(c.selector(A,c.dbltap),function(){y.expand(this)}));y._expanded||(y._expanded={});C.push(a.after(y,"insertRow",function(E){var F=this.row(E);n.shouldExpand(F,u,this._expanded[F.id])&&this.expand(E,!0,!0);return E}));C.push(a.before(y,"removeRow",
function(E,F){if(E=E.connected)f("\x3e.dgrid-row",E).forEach(function(B){y.removeRow(B,!0)}),F||g(E,"!")}));n.collapseOnRefresh&&C.push(a.after(y,"cleanup",function(){this._expanded={}}));y._calcRowHeight=function(E){var F=E.connected;return E.offsetHeight+(F?F.offsetHeight:0)};y.expand=function(E,F,B){var w=E.element?E:y.row(E),z=b("transitionend");E=new l;var H=E.promise;E.resolve();E=w.element;E=-1<E.className.indexOf("dgrid-expando-icon")?E:f(".dgrid-expando-icon",E)[0];B=B||!1===n.enableTransitions;
if(E&&E.mayHaveChildren&&(B||F!==!!this._expanded[w.id])){var G=void 0===F?!this._expanded[w.id]:F;g(E,".ui-icon-triangle-1-"+(G?"se":"e")+"!ui-icon-triangle-1-"+(G?"e":"se"));F=w.element;var I=F.connected,L={originalQuery:this.query};if(!I){I=L.container=F.connected=g(F,"+div.dgrid-tree-container");var N=function(S){return y.store.getChildren(w.data,S)};n.allowDuplicates&&(L.parentId=w.id);"level"in E&&(N.level=E.level);H=H.then(function(){if(y.renderQuery)return y.renderQuery(N,L);var S=g(I,"div"),
U=y.renderArray(N(L),S,"level"in N?{queryLevel:N.level}:{});l.when(U,function(){g(S,"!")});return U});z?e(I,z,m):m.call(I)}I.hidden=!G;var O=I.style;if(!z||B)O.display=G?"block":"none",O.height="";else{if(G){O.display="block";var R=I.scrollHeight;O.height="0px"}else g(I,".dgrid-tree-resetting"),O.height=I.scrollHeight+"px";setTimeout(function(){g(I,"!dgrid-tree-resetting");O.height=G?R?R+"px":"auto":"0px"})}G?this._expanded[w.id]=!0:delete this._expanded[w.id]}return H};a.after(n,"destroy",function(){q.forEach(C,
function(E){E.remove()});delete y.expand;delete y._calcRowHeight})});n.renderCell=function(y,A,C,E){var F=n.grid,B=Number(E&&E.queryLevel)+1,w=!F.store.mayHaveChildren||F.store.mayHaveChildren(y),z=E.parentId;B=u=isNaN(B)?0:B;F=n.renderExpando(B,w,F._expanded[(z?z+"-":"")+F.store.getIdentity(y)],y);F.level=B;F.mayHaveChildren=w;(y=r.call(n,y,A,C,E))&&y.nodeType?(g(C,F),g(C,y)):C.insertBefore(F,C.firstChild)};return n}p.defaultRenderExpando=h;k.getObject("dgrid.tree",!0);return dgrid.tree=p})},"dgrid/util/has-css3":function(){define(["dojo/has"],
function(t){function q(k,f){k=k.style;var e;if(f in k)return!0;f=f.slice(0,1).toUpperCase()+f.slice(1);for(e=l.length;e--;)if(l[e]+f in k)return l[e];return!1}var l=["ms","O","Moz","Webkit"];t.add("css-transitions",function(k,f,e){return q(e,"transitionProperty")});t.add("css-transforms",function(k,f,e){return q(e,"transform")});t.add("css-transforms3d",function(k,f,e){return q(e,"perspective")});t.add("transitionend",function(){var k=t("css-transitions");return k?!0===k?"transitionend":{ms:"MSTransitionEnd",
O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[k]:!1});return t})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DgridUtil":function(){define(["dojo/aspect","dojo/dom-class","dojo/query","../../utils/ArrayUtil"],function(t,q,l,k){function f(d,c,g){if(void 0===g){var h=d._rowIdToObject[c.id];h&&(g=(d=d.store)&&d.isOdd&&d.isOdd(h))}0!==g&&1!==g||q.replace(c,b[g],b[1-g])}function e(d,c,g){var h=d.store;if(h&&h.updateExpand){g=h.updateExpand(c.data,g,!0,d.getSortingFunction());
for(var m in g)c=d.row(h.get(m)),c.element&&f(d,c.element,g[m])}}var a=["ui-icon-triangle-1-e","ui-icon-triangle-1-se"],b=["dgrid-row-even","dgrid-row-odd"];return{createExpando:function(d){q.add(d,"dgrid-expando-icon ui-icon ui-icon-triangle-1-e esriMapsAnalystXClickable");return{expando:d,update:function(c){c=c?1:0;q.replace(d,a[c],a[1-c])}}},oddEvenFix:function(d){d.expand&&(d.getSortingFunction=function(){var c=this.get("sort");return c&&c.length?k.getSorting(c):null},t.after(d,"insertRow",function(c){f(d,
c);return c}),t.before(d,"refresh",function(){var c=d.store;c&&c.updateExpandedNodes&&c.updateExpandedNodes(d._expanded,d.getSortingFunction())}),t.around(d,"expand",function(c){return function(g,h){var m=g.element?g:d.row(g);void 0===h&&(h=!d._expanded[m.id]);!0===h&&e(d,m,!0);var p=c.apply(this,arguments);!1===h&&e(d,m,!1);return p}}),t.around(d,"adjustRowIndices",function(c){return function(){var g=d.store;g&&g.updateExpandedNodes&&g.updateExpand&&g.isOdd||c.apply(this,arguments)}}))},makeContentNeverGoUnderScroll:function(d){function c(){var g=
d.headerNode.firstChild,h=d.contentNode;h&&g&&g.offsetWidth!==h.offsetWidth&&(h.style.width="",g.style.width="",g.style.width=h.offsetWidth+"px")}t.after(d,"resize",c);t.after(d,"refresh",c);t.after(d,"expand",function(g){setTimeout(c,100);setTimeout(c,300);return g})},inlineSortArrow:function(d,c,g){c=k.arrayToObject(k.listToArray(c));t.after(d,"updateSortArrow",function(h,m){if((m=h[0]&&h[0].attribute)&&c[m]){var p=(m=d._sortNode||d._findSortArrowParent(m))&&l(".dgrid-sort-arrow",m)[0];h=h[0].descending;
if(p){p.remove();q.remove(m,"dgrid-sort-down dgrid-sort-up");var n=g?l(g,m)[0]:m.lastChild.append?m.lastChild:m;n.append||(n=m);q.add(n,h?"dgrid-sort-down":"dgrid-sort-up");n.append(p)}}},!0)}}})},"widgets/BusinessAnalyst/esriAnalystX/utils/ArrayUtil":function(){define("require exports ../../baUtil/array dojo/store/util/SimpleQueryEngine ./ObjectUtil esri/dijit/geoenrichment/utils/ArrayUtil".split(" "),function(t,q,l,k,f,e){function a(c,g){c.some(function(h,m){g.func(h,m,g,c);if(g.stop)return!0});
return g}function b(c){var g=c.split(" "),h=g[1];c={};switch(g[0]){case "max":c.result=-Infinity;g=function(m,p,n){n.result=Math.max(n.result,f.getObject(m,h))};break;case "min":c.result=Infinity;g=function(m,p,n){n.result=Math.min(n.result,f.getObject(m,h))};break;case "sum":c.result=0;g=function(m,p,n){n.result+=f.getObject(m,h)};break;case "random":c.result=void 0;g=function(m,p,n,r){n.result=r[Math.round((r.length-1)*Math.random())];n.stop=!0};break;default:throw Error("Unsupported query.");}c.func=
g;return c}var d={getSorting:function(c,g){if(!c)return f.compare;if("function"===typeof c)return c;var h=Array.isArray(c)?c:c.sort||[c];var m={};"string"===typeof g&&(g=[g]);Array.isArray(g)?g.forEach(function(p){m[p]=f.compareNames}):g&&(m=g);return function(p,n){for(var r=void 0,u=0;r=h[u];u++){var v=p[r.attribute],y=n[r.attribute];if(v=(m[r.attribute]||(m["*"]?m["*"].bind(null,r.attribute):f.compare))(v,y,!1,!1,p,n))return r.descending?-v:v}return 0}},sort:function(c,g,h){return c.sort(d.getSorting(g,
h))},sortIndices:function(c,g,h){c=l.map(c,function(p,n){return{value:p,index:n}});var m=d.getSorting(g,h);c.sort(function(p,n){return m(p.value,n.value)});return l.map(c,function(p){return p.index})},getQueryEngine:function(c,g){return function(h,m){m&&m.sort&&(m=Object.assign({},m),m.sort=d.getSorting(m.sort,c));return(g||k)(h,m)}},objectToArray:function(c,g){void 0===g&&(g=null);var h=[],m=g?function(r){return c[r]?c[r][g]:void 0}:function(r){return c[r]},p;for(p in c){var n=m(p);"undefined"!==
typeof n&&h.push(n)}return h},arrayToObject:function(c,g){var h={},m=e.composeIdentityFunction(g);l.forEach(c,function(p){h[m(p)]=p});return h},composeIdentityFunction:e.composeIdentityFunction,removeDuplicates:e.removeDuplicates,splitArrayToBunches:e.splitArrayToBunches,contains:function(c,g){return-1!==l.indexOfLoose(c,g)},remove:function(c,g){g=l.indexOfLoose(c,g);-1!==g&&c.splice(g,1);return-1!==g},merge:function(c,g){c=c||[];null!=g&&Array.prototype.push.apply(c,g);return c},listToArray:function(c,
g){if(null==c)return[];void 0===g&&(g=",");c="string"===typeof c?c.split(g):c.slice();for(g=0;g<c.length;g++)"string"===typeof c[g]&&(c[g]=c[g].trim());return c},reorderArray:function(c,g){var h=c.length,m=0,p=Array(h),n={},r={},u;for(u in g){var v=Math.round(u);if(0<=v&&v<h&&!n[v]){var y=Math.round(g[u]);0<=y&&y<h&&!r[y]&&(p[y]=c[v],n[v]=1,r[y]=1,m++)}}m!==h&&(p=p.filter(function(A,C){return r[C]}),c.forEach(function(A,C){!n[C]&&p.push(A)}));return p},mapIndices:function(c,g,h,m){m=null==m?null:
m;if(1===c)h.call(m,0,Math.floor(g/2));else{g=(g-1)/(c-1);for(var p=0;p<c;p++)h.call(m,p,Math.floor(.5+p*g))}},moveElement:function(c,g,h,m){var p=Array.isArray(g)?g:[g];if(-1!==p.indexOf(h))return c.slice();var n=[];c.forEach(function(r){-1===p.indexOf(r)&&(r==h?"before"===m?(p.forEach(function(u){n.push(u)}),n.push(h)):"after"===m&&(n.push(h),p.forEach(function(u){n.push(u)})):n.push(r))});return n},min:function(c,g){var h=c.length;switch(h){case 0:return null;case 1:return c[0];default:for(var m=
c[0],p=g(m),n=0,r=1;r<h;r++){var u=g(c[r]);p>u&&(m=c[r],p=u,n=r)}return{key:n,value:m,comparisonValue:p}}},max:function(c,g){var h=c.length;switch(h){case 0:return null;case 1:return c[0];default:for(var m=c[0],p=g(m),n=0,r=1;r<h;r++){var u=g(c[r]);p<u&&(m=c[r],p=u,n=r)}return{key:n,value:m,comparisonValue:p}}},query:function(c,g){if("object"===typeof g)return a(c,g);if("string"===typeof g)return g=b(g),a(c,g).result},everyEqualProperty:function(c,g){if(2>c.length)return!0;var h;return!c.some(function(m,
p){if(0===p)h=m[g];else if(h!==m[g])return!0})}};return d})},"widgets/BusinessAnalyst/baUtil/array":function(){define(["require","exports"],function(t,q){var l=Array.prototype,k={every:function(f,e,a){return null==f?!0:"string"===typeof f?l.every.call(f.split(""),e,a):l.every.call(f,e,a)},some:function(f,e,a){return null==f?!1:"string"===typeof f?l.some.call(f.split(""),e,a):l.some.call(f,e,a)},forEach:function(f,e,a){if(null!=f)return"string"===typeof f?l.forEach.call(f.split(""),e,a):l.forEach.call(f,
e,a)},map:function(f,e,a){return null==f?[]:"string"===typeof f?l.map.call(f.split(""),e,a):l.map.call(f,e,a)},filter:function(f,e,a){return null==f?[]:"string"===typeof f?l.filter.call(f.split(""),e,a):l.filter.call(f,e,a)},indexOf:function(f,e){return null==f?-1:"string"===typeof f?l.indexOf.call(f.split(""),e):l.indexOf.call(f,e)},indexOfLoose:function(f,e){if(null==f||void 0===f.length)return-1;if("string"===typeof f)return k.indexOfLoose(f.split(""),e);for(var a=0,b=f.length;a<b;a++)if(f[a]==
e)return a;return-1},lastIndexOf:function(f,e){return null==f?-1:"string"===typeof f?l.lastIndexOf.call(f.split(""),e):l.lastIndexOf.call(f,e)},lastIndexOfLoose:function(f,e){if(null==f||void 0===f.length)return-1;if("string"===typeof f)return k.lastIndexOfLoose(f.split(""),e);for(var a=f.length-1;0<=a;a--)if(f[a]==e)return a;return-1}};return k})},"widgets/BusinessAnalyst/SelectPointPolygonPage":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/dom-class dojo/dom-style dojo/on dojo/query dojo/when dijit/_TemplatedMixin dijit/_WidgetBase esri/Color esri/dijit/Search esri/dijit/geoenrichment/_WizardPage esri/geometry/webMercatorUtils esri/graphic esri/InfoTemplate esri/symbols/PictureMarkerSymbol esri/symbols/SimpleFillSymbol esri/symbols/SimpleLineSymbol esri/toolbars/draw jimu/dijit/EditorXssFilter jimu/utils dojo/text!./SelectPointPolygonPage.html ./utils/GeocodeUtil".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p,n,r,u,v,y,A,C,E,F,B){return t([c,d,m],{templateString:F,polygonActive:!1,freehandPolygonActive:!1,postCreate:function(){this.inherited(arguments);var w=this;this.config.firstPageText=C.getInstance().sanitize(this.config.firstPageText);this.config.searchTextBoxOption?(this.search=(new h({map:this.map})).placeAt(this.searchContainer),this.search.activeSource.outFields.push("country"),this.own(e(this.search,"select-result",function(){w._loadSearchResult()}))):(k.remove(this.activatePinButton,
"esriBusinessAnalystButtonSearchPadding"),k.remove(this.activatePolygonButton,"esriBusinessAnalystButtonSearchPadding"),k.remove(this.activateFreehandPolygonButton,"esriBusinessAnalystButtonSearchPadding"));this.config.dropPinOption?this.own(e(this.activatePinButton,"click",function(){w._onActivatePinButtonClick()})):f.set(this.activatePinButton,"display","none");this.config.drawPolygonOption?this.own(e(this.activatePolygonButton,"click",function(){w._onActivatePolygonButtonClick()})):f.set(this.activatePolygonButton,
"display","none");this.config.drawFreehandPolygonOption?this.own(e(this.activateFreehandPolygonButton,"click",function(){w._onActivateFreehandPolygonButtonClick()})):f.set(this.activateFreehandPolygonButton,"display","none")},startup:function(){this.resize();this._started||k.add(this.layoutGrid.domNode,"business-analyst-search-suggestions-overflow")},_loadSearchResult:function(){this.wizard.selectedPoint.geometry=this.search.selectedResult.feature.geometry;this.wizard.selectedPoint.locationName=this.search.selectedResult.name;
var w=p.xyToLngLat(this.search.selectedResult.feature.geometry.x,this.search.selectedResult.feature.geometry.y);this.wizard.selectedPoint.long=w[0].toFixed(5);this.wizard.selectedPoint.lat=w[1].toFixed(5);this.wizard.setSelectedCountry(this.search.selectedResult.feature.attributes.country);this.onNext()},_onActivatePinButtonClick:function(){this._executeHandler?(this._deactivate(),this._deactivatePolygon(),this._deactivateFreehandPolygon()):(this._deactivatePolygon(),this._deactivateFreehandPolygon(),
this._setActive())},_setActive:function(){this._executeHandler||(k.add(this.activatePinButton,"esriBusinessAnalystPressedButton"),this.map.setInfoWindowOnClick(!1),this.map.setMapCursor("default"),this.map.disablePan(),this._executeHandler=e(this.map,"click",this._addPoint.bind(this)))},_deactivate:function(){this._executeHandler&&(k.remove(this.activatePinButton,"esriBusinessAnalystPressedButton"),this.map.setInfoWindowOnClick(!0),this.map.enablePan(),this._executeHandler.remove(),this._executeHandler=
null)},_addPoint:function(w){if(this._executeHandler){this._deactivate();var z=p.xyToLngLat(w.mapPoint.x,w.mapPoint.y),H=this;b(B.reverseGeocode({x:z[0],y:z[1]}),function(G){var I=new u("https://js.arcgis.com/3.28/esri/dijit/Search/images/search-pointer.png",36,36);H.wizard.selectedPoint.pointGraphic=new n(w.mapPoint,I);H.map.graphics.add(H.wizard.selectedPoint.pointGraphic);H.map.centerAndZoom(w.mapPoint,12);H.wizard.selectedPoint.geometry=w.mapPoint;H.wizard.selectedPoint.locationName=G&&G.address&&
G.address.LongLabel?G.address.LongLabel:"";H.wizard.setSelectedCountry(G.address.CountryCode);H.wizard.selectedPoint.long=z[0].toFixed(5);H.wizard.selectedPoint.lat=z[1].toFixed(5);H.onNext()})}},_onActivatePolygonButtonClick:function(){this.polygonActive?(this._deactivatePolygon(),this._deactivate(),this._deactivateFreehandPolygon()):(this._deactivate(),this._deactivateFreehandPolygon(),this._setActivePolygon())},_setActivePolygon:function(){this.polygonActive||(k.add(this.activatePolygonButton,
"esriBusinessAnalystPressedButton"),this.polygonActive=!0,this.toolbar||(this.toolbar=new A(this.map),this.toolbar.on("draw-end",l.hitch(this,this._addPolygon))),this.map.disablePan(),this.map.setInfoWindowOnClick(!1),this.toolbar.activate("polygon"))},_deactivatePolygon:function(){this.polygonActive&&(k.remove(this.activatePolygonButton,"esriBusinessAnalystPressedButton"),this.toolbar&&(this.toolbar.deactivate(),this.map.enablePan(),this.map.setInfoWindowOnClick(!0)),this.polygonActive=!1)},_onActivateFreehandPolygonButtonClick:function(){this.freehandPolygonActive?
(this._deactivateFreehandPolygon(),this._deactivate(),this._deactivatePolygon()):(this._deactivate(),this._deactivatePolygon(),this._setActiveFreehandPolygon())},_setActiveFreehandPolygon:function(){this.freehandPolygonActive||(k.add(this.activateFreehandPolygonButton,"esriBusinessAnalystPressedButton"),this.freehandPolygonActive=!0,this.toolbar||(this.toolbar=new A(this.map),this.toolbar.on("draw-end",l.hitch(this,this._addPolygon))),this.map.disablePan(),this.map.setInfoWindowOnClick(!1),this.toolbar.activate("freehandpolygon"))},
_deactivateFreehandPolygon:function(){this.freehandPolygonActive&&(k.remove(this.activateFreehandPolygonButton,"esriBusinessAnalystPressedButton"),this.toolbar&&(this.toolbar.deactivate(),this.map.enablePan(),this.map.setInfoWindowOnClick(!0)),this.freehandPolygonActive=!1)},_addPolygon:function(w){this._deactivate();this._deactivatePolygon();this._deactivateFreehandPolygon();var z=new v(v.STYLE_SOLID,new y(y.STYLE_SOLID,new g([199,55,36,1]),2),new g([199,55,36,.5]));w=new n(w.geometry,z);w.attributes=
{title:this.nls.customPolygon};z=new r;z.title="${title}";z.content=" ";z.info={};z.info.fieldInfos=[];w.setInfoTemplate(z);this.map.graphics.add(w);this.map.infoWindow.setFeatures([w]);this.map.infoWindow.show(this.map.toScreen(w.geometry.getExtent().getCenter()));this.map.infoWindow.removeActions("addMarker");this.wizard.drawnPolygonGraphic=w},resize:function(){this._resizeContentImg()},_resizeContentImg:function(){var w=document.activeElement;q.empty(this.contentContainer);var z=q.toDom(this.config.firstPageText);
q.place(z,this.contentContainer);this.contentContainer.nodeType&&1===this.contentContainer.nodeType&&((z=a("img",this.contentContainer))&&z.length&&z.forEach(l.hitch(this,function(H){"undefined"!==typeof H.complete&&!1===H.complete?this.own(e(H,"load",l.hitch(this,function(){this._resizeImg(H)}))):this._resizeImg(H)})),z=E.getFocusNodesInDom(this.domNode),z.length&&(E.initFirstFocusNode(this.domNode,z[0]),E.initLastFocusNode(this.domNode,z[z.length-1])),this.isOpen||q.isDescendant(w,this.domNode))&&
(w=E.getFirstFocusNode(this.domNode),E.isAutoFocusFirstNodeWidget(this)&&w.focus(),this.isOpen=!1)},_resizeImg:function(w){var z=q.getContentBox(this.contentContainer),H=q.getContentBox(w);H&&H.w&&H.w>=z.w&&q.setStyle(w,{maxWidth:z.w-20+"px",maxHeight:z.h-40+"px"})}})})},"esri/dijit/Search":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented dojo/Deferred dojo/keys dojo/on dojo/query dojo/uacss dojo/regexp dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-style dojo/dom-construct dojo/date/locale dojo/i18n!../nls/jsapi dojo/text!./Search/templates/Search.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_FocusMixin dijit/a11yclick dijit/focus ../lang ../InfoTemplate ../kernel ../SpatialReference ../graphic ../promiseList ../symbols/PictureMarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/TextSymbol ../symbols/Font ../geometry/Point ../geometry/Extent ../geometry/normalizeUtils ../geometry/scaleUtils ../tasks/locator ../tasks/query ../Color ../styles/basic".split(" "),
function(t,q,l,k,f,e,a,b,d,c,g,h,m,p,n,r,u,v,y,A,C,E,F,B,w,z,H,G,I,L,N,O,R,S,U,Z,da,X,ea,Q,W,V,fa,ka){function oa(D,J){D&&J&&(D._layer=J,D._sourceLayer=J)}q=q([A,C,E,f],{declaredClass:"esri.dijit.Search",templateString:y,reHostedFS:/https?:\/\/services.*\.arcgis\.com/i,constructor:function(D,J){this.css={searchGroup:"searchGroup",searchInput:"searchInput",searchInputGroup:"searchInputGroup",searchBtn:"searchBtn",searchSubmit:"searchSubmit",searchIcon:"searchIcon esri-icon-search",searchButtonText:"searchButtonText",
searchToggle:"searchToggle",searchToggleIcon:"searchIcon esri-icon-down-arrow",searchMenu:"searchMenu",searchMenuHeader:"menuHeader",searchClear:"searchClear",searchClearIcon:"searchIcon esri-icon-close searchClose",searchSpinner:"searchIcon esri-icon-loading-indicator searchSpinner",searchSourceName:"sourceName",suggestionsMenu:"suggestionsMenu",sourcesMenu:"sourcesMenu",activeSource:"active",hasValue:"hasValue",hasButtonMode:"hasButtonMode",hasMultipleSources:"hasMultipleSources",showSuggestions:"showSuggestions",
showSources:"showSources",showNoResults:"showNoResults",searchLoading:"searchLoading",latLonHeader:"searchLatLongHeader",searchMoreResults:"moreResults",searchMoreResultsList:"resultsList",searchMoreResultsHeader:"moreHeader",searchMoreResultsItem:"moreItem",searchMoreResultsListHeader:"popupHeader",searchShowMoreResults:"showMoreResults",searchNoResultsMenu:"noResultsMenu",searchNoResultsBody:"noResultsBody",searchNoResultsHeader:"noResultsHeader",searchNoValueIcon:"noValueIcon esri-icon-notice-triangle",
searchNoValueText:"noValueText",searchNoResultsText:"noResultsText",searchExpandContainer:"searchExpandContainer",searchAnimateContainer:"searchAnimate",searchExpanded:"searchExpanded",searchCollapsed:"searchCollapsed",searchClearFloat:"searchClearFloat"};this._allIndex="all";this._objectIdIdentifier="_objectId";this._deferreds=[];this._sourceNames=[];this.defaultSource={locator:new W("//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"),singleLineFieldName:"SingleLine",outFields:["Addr_type",
"Match_addr","StAddr","City"],name:v.widgets.Search.main.esriLocatorName,localSearchOptions:{minScale:3E5,distance:5E4},placeholder:v.widgets.Search.main.placeholder,highlightSymbol:(new N(t.toUrl("./Search/images/search-pointer.png"),36,36)).setOffset(9,18)};this.options={map:null,theme:"arcgisSearch",visible:!0,value:"",allPlaceholder:"",sources:[this.defaultSource],activeSourceIndex:0,suggestionDelay:150,enableSourcesMenu:!0,enableSuggestionsMenu:!0,enableInfoWindow:!0,showInfoWindowOnSelect:!0,
enableSuggestions:!0,enableButtonMode:!1,autoNavigate:!0,autoSelect:!0,addLayersFromMap:!1,zoomScale:1E3,graphicsLayer:null,enableHighlight:!0,highlightGraphic:null,enableLabel:!1,labelSymbol:(new U).setColor(new fa([181,56,46,.9])).setFont(new Z("14px",Z.STYLE_NORMAL,Z.VARIANT_NORMAL,Z.WEIGHT_BOLD,"Arial")),labelGraphic:null,infoTemplate:new z(v.widgets.Search.main.searchResult,'\x3cdiv class\x3d"${searchTheme}"\x3e\x3cdiv id\x3d"${searchMoreResultsId}" class\x3d"${searchMoreResults}"\x3e\x3cdiv class\x3d"${searchMoreResultsItem}"\x3e${searchResult}\x3c/div\x3e\x3cdiv\x3e${searchMoreResultsHtml}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
searchResults:null,suggestResults:null,selectedResult:null,magicKey:null,selectedFeatureId:null,expanded:!1,maxLength:128,maxResults:6,maxSuggestions:6,locationToAddressDistance:1500,minCharacters:3,enableSearchingAll:!0};D=l.mixin({},this.options,D);this.set(D);this._updateActiveSource();this._i18n=v;this._defaultSR=new G(4326);this.domNode=J},startup:function(){this.inherited(arguments);this.sources||(this.sources=[]);this._mapLoaded().then(l.hitch(this,this._init))},postCreate:function(){var D=
this;this.inherited(arguments);this._moreResultsId=this.id+"_more_results";this.own(b(this.submitNode,F,l.hitch(this,this._searchButton)));this.own(b(this.sourcesBtnNode,F,l.hitch(this,this._toggleSourcesMenu)));this.own(b(this.inputNode,F,l.hitch(this,this._inputClick)));this.own(b(this.clearNode,F,l.hitch(this,this._clearButton)));this.own(b(this.formNode,"submit",l.hitch(this,function(J){J.preventDefault();this._cancelSuggest();this.search()})));this.own(b(this.inputNode,"keyup",l.hitch(this,function(J){this._inputKey(J)})));
this.own(b(this.sourcesBtnNode,"keyup",l.hitch(this,function(J){this._sourceBtnKey(J)})));this.own(b(this.suggestionsNode,"li:click, li:keyup",function(J){D._suggestionsEvent(J,this)}));this.own(b(this.sourcesNode,"li:click, li:keyup",function(J){D._sourcesEvent(J,this)}));this.own(b(this.inputNode,"input, paste",l.hitch(this,function(){this._suggestDelay()})));this.map&&this.map.infoWindow&&this.map.infoWindow.domNode&&this.enableInfoWindow&&(this.own(b(this.map.infoWindow.domNode,"#"+this._moreResultsId+
"_show:click",l.hitch(this,function(J){this._showMoreResultsClick(J)}))),this.own(b(this.map.infoWindow.domNode,"#"+this._moreResultsId+"_list li a:click",l.hitch(this,function(J){this._moreResultsClick(J)}))),this.own(b(this.map.infoWindow.domNode,"#"+this._moreResultsId+" [data-switch-coordinates]:click",l.hitch(this,function(J){this._switchCoordinatesClick(J)}))));this.value&&this._checkStatus();this._hideMenus();this._updateVisible();this._insertSources(this.sources);this._setPlaceholder(this.activeSourceIndex);
this._updateButtonMode(this.enableButtonMode);this.toggle(this.expanded)},destroy:function(){this.clear();r.empty(this.domNode);this.inherited(arguments)},clear:function(){this.clearGraphics();m.get(this.inputNode,"value")&&m.set(this.inputNode,"value","");this._changeAttrValue("value","");this.set("searchResults",null);this.set("suggestResults",null);this.set("selectedResult",null);this.set("magicKey",null);this.set("selectedFeatureId",null);p.remove(this.containerNode,this.css.hasValue);m.set(this.clearNode,
"title","");this._hideMenus();this._closePopup();this._hideLoading();this.emit("clear-search")},show:function(){n.set(this.domNode,"display","block")},hide:function(){n.set(this.domNode,"display","none")},expand:function(){this.enableButtonMode&&(p.add(this.containerNode,this.css.searchExpanded),p.remove(this.containerNode,this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!0))},collapse:function(){this.enableButtonMode&&(p.remove(this.containerNode,this.css.searchExpanded),p.add(this.containerNode,
this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!1))},toggle:function(D){this.enableButtonMode&&("undefined"===typeof D&&(D=!this.expanded),D?this.expand():this.collapse())},search:function(D){var J=new e;this._mapLoaded().then(l.hitch(this,function(){this._searchDeferred(D).then(l.hitch(this,function(M){var K=M.results;this.set("searchResults",K);0===M.numResults&&(this._noResults(M.value),this._showNoResultsMenu());this._hideLoading();this.emit("search-results",M);this._selectFirstResult(K,
M.activeSourceIndex);J.resolve(K)}),l.hitch(this,function(M){J.reject(M)}))}));return J.promise},suggest:function(D){var J=new e;this._mapLoaded().then(l.hitch(this,function(){this._suggestDeferred(D).then(l.hitch(this,function(M){if(M){var K=M.results;this.set("suggestResults",K);this._insertSuggestions(K,M.value);this.emit("suggest-results",M);J.resolve(K)}}),l.hitch(this,function(M){J.reject(M)}))}));return J.promise},select:function(D){var J=this._getDefaultSymbol(D),M=this.labelSymbol,K=this.sources,
P=this.activeSourceIndex,T=this.enableHighlight,ba=this.enableLabel,ia=this.autoNavigate,aa=this.showInfoWindowOnSelect,ca=this.enableInfoWindow,Y=this.infoTemplate,ha=D.feature?new I(D.feature.toJson()):null,na=ha?D.feature._sourceLayer:null;oa(ha,na);if(P===this._allIndex){var la=this._getSourceIndexOfResult(D);if(null!==la){var ja=K[la];P=la}}else ja=K[P];ja&&(ja.hasOwnProperty("highlightSymbol")&&(J=ja.highlightSymbol),ja.hasOwnProperty("labelSymbol")&&(M=ja.labelSymbol),ja.hasOwnProperty("enableHighlight")&&
(T=ja.enableHighlight),ja.hasOwnProperty("enableLabel")&&(ba=ja.enableLabel),ja.hasOwnProperty("autoNavigate")&&(ia=ja.autoNavigate),ja.hasOwnProperty("showInfoWindowOnSelect")&&(aa=ja.showInfoWindowOnSelect),ja.hasOwnProperty("enableInfoWindow")&&(ca=ja.enableInfoWindow),ja.hasOwnProperty("infoTemplate")?Y=ja.infoTemplate:ja.featureLayer&&ja.featureLayer.infoTemplate&&(Y=ja.featureLayer.infoTemplate));this._hideMenus();this._hideLoading();if(ha){K=this.highlightGraphic;var ma=this.graphicsLayer;
la=this.labelGraphic;var pa=l.mixin({},ha.attributes,{searchTheme:this.theme,searchResult:this._searchResultHTML(D),searchMoreResults:this.css.searchMoreResults,searchMoreResultsItem:this.css.searchMoreResultsItem,searchMoreResultsId:this._moreResultsId,searchMoreResultsHtml:this._moreResultsHTML(D)}),qa=null;ca&&(qa=Y);la?(la.setGeometry(ha.geometry),la.setAttributes(pa),la.setSymbol(M),M&&"textsymbol"===M.type&&la.symbol.setText(D.name)):(la=new I(ha.geometry,M,pa),oa(la,na),M&&"textsymbol"===M.type&&
la.symbol.setText(D.name),ba&&(ma?ma.add(la):this.map&&this.map.graphics&&this.map.graphics.add(la)));K?(K.setGeometry(ha.geometry),K.setAttributes(pa),K.setInfoTemplate(qa),K.setSymbol(J)):(K=new I(ha.geometry,J,pa,qa),oa(K,na),T&&(ma?ma.add(K):this.map&&this.map.graphics&&this.map.graphics.add(K)));K&&K.symbol&&"textsymbol"===K.symbol.type&&K.symbol.setText(D.name);this.map&&this.map.infoWindow&&ca&&aa&&(this.map.infoWindow.setFeatures([K]),J=this._getPointFromGeometry(K.geometry),this.map.infoWindow.show(J));
this.map&&ia&&D&&D.hasOwnProperty("extent")&&"function"===typeof this.map.setExtent&&this.map.setExtent(D.extent,!0);this.set("highlightGraphic",K);this.set("labelGraphic",la)}this.set("selectedResult",D);this.emit("select-result",{result:D,source:ja,sourceIndex:P})},focus:function(){B.focus(this.inputNode)},blur:function(){this.inputNode.blur();B.curNode&&B.curNode.blur()},clearGraphics:function(){var D=this.highlightGraphic,J=this.graphicsLayer,M=this.labelGraphic;D&&(J?J.remove(D):this.map&&this.map.graphics&&
this.map.graphics.remove(D));M&&(J?J.remove(M):this.map&&this.map.graphics&&this.map.graphics.remove(M));this.set("labelGraphic",null);this.set("highlightGraphic",null)},_mapLoaded:function(){var D=new e;if(this.map)if(this.map.loaded)D.resolve();else b.once(this.map,"load",l.hitch(this,function(){D.resolve()}));else D.resolve();return D.promise},_init:function(){this._getMapLayers().then(l.hitch(this,function(){this.set("loaded",!0);this.emit("load")}))},_clearButton:function(){this.clear();B.focus(this.inputNode)},
_error:function(D){return Error(this.declaredClass+" "+D)},_searchDeferred:function(D){var J=new e,M=this.value,K=this.activeSourceIndex;D&&D.hasOwnProperty("index")&&(K=D.index);this._showLoading();this._hideMenus();this._closePopup();this.clearGraphics();var P={magicKey:this.magicKey,text:M};D?"string"===typeof D?(P.text=D,D=this._searchQueries(P)):D="object"===typeof D&&D.hasOwnProperty("magicKey")?this._searchQueries(D):"object"===typeof D&&D.hasOwnProperty("geometry")?this._searchQueries({geometry:D}):
"object"===typeof D&&D.hasOwnProperty(this._objectIdIdentifier)?this._searchQueries(D):"object"===typeof D&&"point"===D.type?this._searchQueries({point:D}):D instanceof Array&&2===D.length?this._searchQueries({latlon:D}):this._searchQueries(P):D=this._searchQueries(P);D.always(l.hitch(this,function(T){T=this._formatResults(T,K,M);J.resolve(T)}));return J.promise},_suggestDeferred:function(D){var J=new e;this._deferreds.push(J);D||(D=this.value);var M=this.activeSourceIndex;this._suggestQueries({text:D}).always(l.hitch(this,
function(K){var P;if(K)for(var T=0;T<K.length;T++)K[T]&&(P=!0);P?(K=this._formatResults(K,M,D),J.resolve(K)):J.resolve()}));return J.promise},_getDefaultSymbol:function(D){var J;this.map&&(J=this.map.getBasemap());J||(J="topo");if(D&&D.feature&&D.feature.geometry)var M=D.feature.geometry.type;"polyline"===M?M="line":"circle"===M||"extent"===M?M="polygon":"multipoint"===M&&(M="point");if(M){if(D=ka.getSchemes({theme:"default",basemap:J,geometryType:M}))var K=D.primaryScheme;if(K){K.color&&K.hasOwnProperty("opacity")&&
(K.color.a=K.opacity);var P=K;D=K.color;K=K.size;switch(M){case "point":var T=new O;T.setColor(D);T.setSize(null!==K?K:P.size);M=new R;M.setColor(P.outline.color);M.setWidth(P.outline.width);T.setOutline(M);break;case "line":T=new R;T.setColor(D);T.setWidth(null!==K?K:P.width);break;case "polygon":T=new S,T.setColor(D),M=new R,M.setColor(P.outline.color),M.setWidth(P.outline.width),T.setOutline(M)}P=T}}return P},_selectFirstResult:function(D,J){if(this.autoSelect&&D){var M;J===this._allIndex?M=this._getFirstResult(D):
D[J]&&D[J][0]&&(M=D[J][0]);M&&this.select(M)}},_getSourceIndexOfResult:function(D){var J=this.searchResults;if(J)for(var M in J)if(J[M]&&J[M].length)for(var K=0;K<J[M].length;K++)if(J[M][K]===D)return parseInt(M,10);return null},_getFirstResult:function(D){if(D)for(var J in D)if(D[J]&&D[J][0])return D[J][0];return!1},_onFocus:function(){this.map&&"function"===typeof this.map.disableKeyboardNavigation&&this.map.disableKeyboardNavigation();this.emit("focus");this.inherited(arguments)},_onBlur:function(){this._hideMenus();
this.map&&"function"===typeof this.map.enableKeyboardNavigation&&this.map.enableKeyboardNavigation();this.enableButtonMode&&this.loaded&&this.collapse();this.emit("blur");this.inherited(arguments)},_getMapLayers:function(){var D=new e;if(this.addLayersFromMap&&this.map){var J=[],M=this.map.graphicsLayerIds;if(M&&M.length){for(var K=0;K<M.length;K++){var P=this.map.getLayer(M[K]);P&&J.push(this._featureLayerLoaded(P))}L(J).always(l.hitch(this,function(T){for(var ba,ia=this.sources,aa=0;aa<T.length;aa++)T[aa]&&
T[aa].loaded&&"Feature Layer"===T[aa].type&&(ia.push({featureLayer:T[aa],enableSuggestions:!0}),ba=!0);ba&&this.set("sources",ia);D.resolve()}))}else D.resolve()}else D.resolve();return D.promise},_switchCoordinatesClick:function(D){D.preventDefault();if(D=m.get(D.target,"data-switch-coordinates"))this._cancelSuggest(),this.set("value",D),this.search()},_moreResultsClick:function(D){D.preventDefault();var J=D.target;D=parseInt(m.get(J,"data-source-index"),10);J=parseInt(m.get(J,"data-index"),10);
var M=this.searchResults;M&&M[D]&&(D=M[D][J])&&this.select(D)},_showMoreResultsClick:function(D){D.preventDefault();if(D=h.byId(this._moreResultsId)){p.toggle(D,this.css.searchShowMoreResults);var J=h.byId(this._moreResultsId+"_show");J&&(p.contains(D,this.css.searchShowMoreResults)?m.set(J,"textContent",v.widgets.Search.main.hideMoreResults):m.set(J,"textContent",v.widgets.Search.main.showMoreResults))}},_featureLayerLoaded:function(D){var J=new e;if(D.loaded)J.resolve(D);else if(D.loadError)J.reject(this._error("Layer failed to load."));
else{var M=b.once(D,"load",l.hitch(this,function(){K.remove();J.resolve(D)}));var K=b.once(D,"error",l.hitch(this,function(){M.remove();J.reject(this._error("Layer could not be loaded."))}))}return J.promise},_getObjectSize:function(D){var J=0,M;for(M in D)D.hasOwnProperty(M)&&J++;return J},_sourcesEvent:function(D,J){var M=m.get(J,"data-index"),K=d("li",this.sourcesNode);J=k.indexOf(K,J);M!==this._allIndex&&(M=parseInt(M,10));"click"===D.type||D.keyCode===a.ENTER?(this.set("activeSourceIndex",M),
B.focus(this.inputNode),this._hideSourcesMenu()):D.keyCode===a.UP_ARROW?(D.stopPropagation(),D.preventDefault(),D=J-1,0>D?B.focus(this.sourcesBtnNode):B.focus(K[D])):D.keyCode===a.DOWN_ARROW?(D.stopPropagation(),D.preventDefault(),D=J+1,D>=K.length?B.focus(this.sourcesBtnNode):B.focus(K[D])):D.keyCode===a.ESCAPE&&(this._hideSourcesMenu(),B.focus(this.inputNode))},_suggestionsEvent:function(D,J){var M=m.get(J,"data-source-index"),K=parseInt(m.get(J,"data-index"),10),P=d("li",this.suggestionsNode),
T=this.sources;J=k.indexOf(P,J);M!==this._allIndex&&(M=parseInt(M,10));var ba;this._clearQueryTimeout();"click"===D.type||D.keyCode===a.ENTER?((P=this.suggestResults)&&P[M]&&P[M][K]&&(ba=P[M][K]),ba&&(ba.index=M,T[M].featureLayer?(M=T[M].featureLayer.objectIdField,ba[this._objectIdIdentifier]=ba.feature.attributes[M],this.set("value",this._getSuggestionName(ba)),this.set("selectedFeatureId",ba.feature.attributes[M])):ba.magicKey&&ba.text&&(this.set("value",ba.text),this.set("magicKey",ba.magicKey)),
this.search(ba),B.focus(this.inputNode))):D.keyCode===a.BACKSPACE||D.keyCode===a.DELETE?B.focus(this.inputNode):D.keyCode===a.UP_ARROW?(D.stopPropagation(),D.preventDefault(),ba=J-1,0>ba?B.focus(this.inputNode):B.focus(P[ba])):D.keyCode===a.DOWN_ARROW?(D.stopPropagation(),D.preventDefault(),ba=J+1,ba>=P.length?B.focus(this.inputNode):B.focus(P[ba])):D.keyCode===a.ESCAPE&&(this._hideMenus(),B.focus(this.inputNode))},_getResultName:function(D){var J;D.hasOwnProperty("name")&&null!==D.name&&(J=D.name.toString());
J||(J=v.widgets.Search.main.untitledResult);return J},_getSuggestionName:function(D){var J;D.hasOwnProperty("name")&&null!==D.name&&(J=D.name.toString());D=D.text||J;D||(D=v.widgets.Search.main.untitledResult);return D},_searchResultHTML:function(D){var J="";if(D.feature&&D.feature.attributes&&D.feature.attributes.Addr_type&&"LatLong"===D.feature.attributes.Addr_type){var M=D.name.split(" ");if(2===M.length){var K=M[0];var P=M[1]}P&&K?(D=parseFloat(K),P=parseFloat(P),M=P+", "+D,J+='\x3cdiv class\x3d"'+
this.css.searchMoreResultsItem+'"\x3e',J+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+v.widgets.Search.main.lonlat+"\x3c/div\x3e",J=J+(D+", "+P)+'\x3c/div\x3e\x3cdiv class\x3d"'+(this.css.searchMoreResultsItem+'"\x3e'),D===P||90<D||-90>D||180<P||-180>P||(J+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+v.widgets.Search.main.reverseLonLatHeader+"\x3c/div\x3e",J+='\x3ca data-switch-coordinates\x3d"'+M+'" tabindex\x3d"0" href\x3d"#"\x3e'+M+"\x3c/a\x3e\x3c/div\x3e")):J=D.name}else J=D.name;
return J},_moreResultsHTML:function(D){var J="",M="",K=this.searchResults,P=this.sources,T=0;if(K){M+='\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e';M+='\x3ca href\x3d"#" id\x3d"'+this._moreResultsId+'_show"\x3e'+v.widgets.Search.main.showMoreResults+"\x3c/a\x3e";M=M+'\x3c/div\x3e\x3cdiv class\x3d"'+(this.css.searchMoreResultsList+'"\x3e');M+='\x3cdiv id\x3d"'+this._moreResultsId+'_list"\x3e';for(var ba in K)if(K[ba]){var ia=K[ba].length;if(ia){var aa=1===ia&&K[ba][0]===D;if(1<this._getObjectSize(K)&&
!aa){var ca=this._getSourceName(ba);M+='\x3cdiv class\x3d"'+this.css.searchMoreResultsListHeader+'"\x3e'+ca+"\x3c/div\x3e"}if(ia&&!aa){M+="\x3cul\x3e";ca=P[ba].maxResults||this.maxResults;for(aa=0;aa<ia&&aa<ca;++aa)if(K[ba][aa]!==D){var Y=this._getResultName(K[ba][aa]);M+='\x3cli\x3e\x3ca tabindex\x3d"0" data-index\x3d"'+aa+'" data-source-index\x3d"'+ba+'" href\x3d"#"\x3e'+Y+"\x3c/a\x3e\x3c/li\x3e";T++}M+="\x3c/ul\x3e"}}}M+="\x3c/div\x3e\x3c/div\x3e"}T&&(J+=M);return J},_validField:function(D,J){return D.getField(J)},
_validFields:function(D,J){if(D&&J&&J.length){for(var M=0;M<J.length;M++)if(!this._validField(D,J[M]))return!1;return!0}return!1},_getCodedName:function(D,J){if(D&&D.length)for(var M=0,K=D.length;M<K;M++){var P=D[M];if(P.code===J)return P.name}},_getCodedValue:function(D,J,M){if(D&&D.length)for(var K=0,P=D.length;K<P;K++){var T=D[K],ba=T.name,ia=J;M||(ba=ba.toLowerCase(),ia=ia.toLowerCase());if(ba===ia)return T.code}return!1},_whereClause:function(D,J,M,K){var P=null;if(D){var T="";this.reHostedFS.test(J.url)&&
this._containsNonLatinCharacter(D)&&(T="N");if(M&&M.length)for(var ba=0,ia=M.length;ba<ia;ba++){var aa="",ca=D.replace(/'/g,"''");aa=M[ba];var Y=J.getField(aa),ha=J.getDomain(aa);ha&&"codedValue"===ha.type&&(ca=this._getCodedValue(ha.codedValues,ca,K));!1!==ca&&(Y=Y.type,"esriFieldTypeString"===Y||"esriFieldTypeDate"===Y?aa=K?aa+" \x3d "+T+"'"+ca+"'":"UPPER("+aa+") LIKE "+T+"'%"+ca.toUpperCase()+"%'":"esriFieldTypeOID"===Y||"esriFieldTypeSmallInteger"===Y||"esriFieldTypeInteger"===Y||"esriFieldTypeSingle"===
Y||"esriFieldTypeDouble"===Y?(ca=parseFloat(ca),aa=isNaN(ca)?!1:aa+" \x3d "+ca):aa=aa+" \x3d "+ca,aa&&(P=P?P+" or ":"",P+=aa))}}return P},_suggest:function(D){D||(D={index:this.activeSourceIndex,text:this.value});var J=new e,M=D.index,K=this.sources[M],P=this.enableSuggestions;K.hasOwnProperty("enableSuggestions")&&(P=K.enableSuggestions);var T=0;if(D.hasOwnProperty("text")&&D.text){var ba=l.trim(D.text);T=D.text.length}D=K.minCharacters||this.minCharacters;if(P&&ba&&T>=D&&this._supportsPagination(K)){var ia=
"";K.prefix&&(ia+=K.prefix);ia+=ba;K.suffix&&(ia+=K.suffix);var aa=this._defaultSR;this.map&&(aa=this.map.spatialReference);P={};K.locator?(K.categories&&(P.categories=K.categories),K.locator.outSpatialReference=aa,this.map&&K.localSearchOptions&&K.localSearchOptions.hasOwnProperty("distance")&&K.localSearchOptions.hasOwnProperty("minScale")&&(T=this._getScale(),!K.localSearchOptions.minScale||T&&T<=parseFloat(K.localSearchOptions.minScale))&&(P.location=this.map.extent.getCenter(),P.distance=K.localSearchOptions.distance),
P.text=ia,K.useMapExtent&&this.map&&this.map.extent&&(P.searchExtent=this.map.extent),K.searchExtent&&(P.searchExtent=K.searchExtent),P.maxSuggestions=K.maxSuggestions||this.maxSuggestions,K.sourceCountry&&(P.countryCode=K.sourceCountry),K.countryCode&&(P.countryCode=K.countryCode),K.locator.suggestLocations(P).then(l.hitch(this,function(ca){J.resolve(ca)}),l.hitch(this,function(ca){ca||(ca=this._error("Locator suggestLocations could not be performed."));J.reject(ca)}))):K.featureLayer?this._featureLayerLoaded(K.featureLayer).then(l.hitch(this,
function(){var ca=this._getDisplayField(K),Y=K.searchFields||[ca],ha=[];K.suggestionTemplate?K.suggestionTemplate.replace(/(?:\$\{([^}]+)\})/g,function(ma,pa){ha.push(pa)}):ha=[ca];-1===k.indexOf(ha,K.featureLayer.objectIdField)&&ha.push(K.featureLayer.objectIdField);ca=this._validField(K.featureLayer,ca);var na=this._validFields(K.featureLayer,ha),la=this._validFields(K.featureLayer,Y);if(ca&&na&&la){ca=new V;K.hasOwnProperty("suggestQueryParams")&&l.mixin(ca,K.suggestQueryParams);ca.outSpatialReference=
aa;ca.returnGeometry=!1;ca.num=K.maxSuggestions||this.maxSuggestions;ca.outFields=ha;K.useMapExtent&&this.map&&this.map.extent&&(ca.geometry=this.map.extent);K.searchExtent&&(ca.geometry=K.searchExtent);if(Y=this._whereClause(ia,K.featureLayer,Y,!1)){ca.where=Y;var ja=!0}ja?K.featureLayer.queryFeatures(ca,l.hitch(this,function(ma){var pa;(ma=ma.features)&&(pa=this._hydrateResults(ma,M,!0));J.resolve(pa)}),l.hitch(this,function(ma){ma||(ma=this._error("FeatureLayer queryFeatures errored with suggestions"));
J.reject(ma)})):J.resolve()}else J.reject(this._error("Invalid FeatureLayer field"))})):J.reject(this._error("Invalid source"))}else J.resolve();return J.promise},_supportsPagination:function(D){var J;D.locator?J=!0:D.featureLayer&&D.featureLayer.advancedQueryCapabilities&&D.featureLayer.advancedQueryCapabilities.supportsPagination&&(J=!0);return J},_suggestQueries:function(D){var J=this.sources,M=this.activeSourceIndex,K=[];if(M===this._allIndex)for(M=0;M<J.length;M++){var P=D;P.index=M;P=this._suggest(P);
K.push(P)}else D.index=M,P=this._suggest(D),K.push(P);return L(K)},_getPointFromGeometry:function(D){switch(D.type){case "extent":var J=D.getCenter();break;case "multipoint":J=D.getPoint(0);break;case "point":J=D;break;case "polygon":J=D.getCentroid();break;case "polyline":J=D.getPoint(0,0)}return J},_searchQueries:function(D){D.hasOwnProperty("index")||(D.index=this.activeSourceIndex);var J=[];if(D.index===this._allIndex)for(var M=this.sources,K=0;K<M.length;K++){var P=D;P.index=K;P=this._search(P);
J.push(P)}else D=this._search(D),J.push(D);return L(J)},_searchButton:function(){this.enableButtonMode&&!this.expanded?(this.expand(),B.focus(this.inputNode)):(this._cancelSuggest(),this.search())},_search:function(D){D||(D={text:this.value,magicKey:null,geometry:null,point:null,index:this.activeSourceIndex,latlon:null});this.selectedFeatureId&&(D.text=null,D[this._objectIdIdentifier]=this.selectedFeatureId);var J,M=new e,K=D.index,P=this.sources[K],T;D.hasOwnProperty("text")&&D.text&&(T=l.trim(D.text));
if(P){var ba="";P.prefix&&!D.magicKey&&(ba+=P.prefix);ba+=T;P.suffix&&!D.magicKey&&(ba+=P.suffix);var ia=this._defaultSR;this.map&&(ia=this.map.spatialReference);if(P.locator)if(D.hasOwnProperty("text")&&T){var aa={};P.categories&&(aa.categories=P.categories);P.locationType&&(aa.locationType=P.locationType);ia&&(P.locator.outSpatialReference=ia);if(this.map&&P.localSearchOptions&&P.localSearchOptions.hasOwnProperty("distance")&&P.localSearchOptions.hasOwnProperty("minScale")){var ca=this._getScale();
if(!P.localSearchOptions.minScale||ca&&ca<=parseFloat(P.localSearchOptions.minScale))aa.location=this.map.extent.getCenter(),aa.distance=P.localSearchOptions.distance}aa.address={};aa.maxLocations=P.maxResults||this.maxResults;P.useMapExtent&&this.map&&this.map.extent&&(aa.searchExtent=this.map.extent);P.searchExtent&&(aa.searchExtent=P.searchExtent);P.sourceCountry&&(aa.countryCode=P.sourceCountry);P.countryCode&&(aa.countryCode=P.countryCode);D.magicKey&&(aa.magicKey=D.magicKey);P.singleLineFieldName?
aa.address[P.singleLineFieldName]=ba:aa.address["Single Line Input"]=ba;P.outFields&&(aa.outFields=P.outFields);P.locator.addressToLocations(aa).then(l.hitch(this,function(Y){Y=this._hydrateResults(Y,K,!1);M.resolve(Y)}),l.hitch(this,function(Y){Y||(Y=this._error("Locator addressToLocations could not be performed"));M.reject(Y)}))}else D.geometry?(J=this._getPointFromGeometry(D.geometry.geometry))?this._reverseGeocodePoint(K,J).then(function(Y){M.resolve(Y)},function(Y){M.reject(Y)}):M.reject(this._error("Invalid point to reverse geocode")):
D.point?this._reverseGeocodePoint(K,D.point).then(function(Y){M.resolve(Y)},function(Y){M.reject(Y)}):D.latlon?(aa=new da(D.latlon,this._defaultSR),this._reverseGeocodePoint(K,aa).then(function(Y){M.resolve(Y)},function(Y){M.reject(Y)})):D.hasOwnProperty("text")&&!T?M.resolve([]):M.reject(this._error("Invalid query type for Locator"));else P.featureLayer?this._featureLayerLoaded(P.featureLayer).then(l.hitch(this,function(){var Y=this._getDisplayField(P),ha=P.searchFields||[Y];Y=this._validField(P.featureLayer,
Y);var na=this._validFields(P.featureLayer,ha);if(Y&&na){Y=new V;P.hasOwnProperty("searchQueryParams")&&l.mixin(Y,P.searchQueryParams);ia&&(Y.outSpatialReference=ia,na=this.map&&this.map.getMaxResolution()||1/Q.getUnitValueForSR(ia))&&(Y.maxAllowableOffset=na);Y.returnGeometry=!0;P.outFields&&(Y.outFields=P.outFields);if(!D.hasOwnProperty(this._objectIdIdentifier)){this._supportsPagination(P)&&(Y.num=P.maxResults||this.maxResults);P.useMapExtent&&this.map&&this.map.extent&&(Y.geometry=this.map.extent);
P.searchExtent&&(Y.geometry=P.searchExtent);var la=P.exactMatch}D.hasOwnProperty("text")&&T?(ha=this._whereClause(ba,P.featureLayer,ha,la))?(Y.where=ha,ha=!0):ha=!1:D.hasOwnProperty(this._objectIdIdentifier)?(Y.objectIds=[D[this._objectIdIdentifier]],ha=!0):D.geometry?(Y.geometry=D.geometry,ha=!0):D.point?(Y.geometry=D.point,ha=!0):D.latlon?(J=new da(D.latlon,this._defaultSR),Y.geometry=J,ha=!0):(D.hasOwnProperty("text")&&!T?M.resolve([]):M.reject(this._error("Invalid query type for FeatureLayer")),
ha=!1);ha?P.featureLayer.queryFeatures(Y,l.hitch(this,function(ja){ja=ja.features;var ma;ja&&(ma=this._hydrateResults(ja,K,!1));M.resolve(ma)}),l.hitch(this,function(ja){ja||(ja=this._error("FeatureLayer queryFeatures could not be performed"));M.reject(ja)})):M.resolve()}else M.reject(this._error("Invalid FeatureLayer field"))})):M.reject(this._error("Invalid source"))}else M.reject(this._error("Source is undefined"));return M.promise},_clearQueryTimeout:function(){this._queryTimer&&clearTimeout(this._queryTimer)},
_formatResults:function(D,J,M){M={activeSourceIndex:J,value:M,numResults:0,numErrors:0,errors:null,results:null};var K={},P={};if(D)if(J===this._allIndex)for(J=0;J<D.length;J++)D[J]&&(D[J]instanceof Error?(K[J]=D[J],M.numErrors++):(P[J]=D[J],M.numResults+=D[J].length));else D[0]&&(D[0]instanceof Error?(K[J]=D[0],M.numErrors++):(P[J]=D[0],M.numResults+=D[0].length));M.numErrors&&(M.errors=K);M.numResults&&(M.results=P);return M},_reverseGeocodePoint:function(D,J){var M=new e,K=this.sources[D];if(J&&
K){var P=K.locationToAddressDistance||this.locationToAddressDistance;K.locator.outSpatialReference=this._defaultSR;this.map&&(K.locator.outSpatialReference=this.map.spatialReference);K.locator.locationToAddress(J,P,l.hitch(this,function(T){T=this._hydrateResults([T],D,!1);M.resolve(T)}),l.hitch(this,function(T){T||(T=this._error("Locator locationToAddress could not be performed"));M.reject(T)}))}else M.reject(this._error("No point or source defined for reverse geocoding"));return M.promise},_cancelDeferreds:function(){if(this._deferreds&&
this._deferreds.length)for(var D=0;D<this._deferreds.length;D++)this._deferreds[D].cancel(this.declaredClass+" cancelling request");this._deferreds=[]},_sourceBtnKey:function(D){if(D){var J=d("li",this.sourcesNode);D.keyCode===a.UP_ARROW?(D.stopPropagation(),D.preventDefault(),this._showSourcesMenu(),(D=J.length)&&B.focus(J[D-1])):D.keyCode===a.DOWN_ARROW&&(D.stopPropagation(),D.preventDefault(),this._showSourcesMenu(),J[0]&&B.focus(J[0]))}},_inputKey:function(D){if(D){var J=d("li",this.suggestionsNode),
M=this.suggestResults;if(D.keyCode===a.TAB||D.keyCode===a.ESCAPE)this._cancelSuggest(),this._hideMenus();else if(D.keyCode===a.UP_ARROW)D.stopPropagation(),D.preventDefault(),this._cancelSuggest(),M&&this._showSuggestionsMenu(),(D=J.length)&&B.focus(J[D-1]);else if(D.keyCode===a.DOWN_ARROW)D.stopPropagation(),D.preventDefault(),this._cancelSuggest(),M&&this._showSuggestionsMenu(),J[0]&&B.focus(J[0]);else{if(D.ctrlKey||D.metaKey||D.keyCode===a.copyKey||D.keyCode===a.LEFT_ARROW||D.keyCode===a.RIGHT_ARROW||
D.keyCode===a.ENTER)return D;this._suggestDelay()}}},_cancelSuggest:function(){this._cancelDeferreds();this._clearQueryTimeout()},_suggestDelay:function(){this._cancelSuggest();this._changeValue();this._queryTimer=setTimeout(l.hitch(this,function(){this.suggest()}),this.suggestionDelay)},_changeValue:function(){this.set("magicKey",null);this.set("selectedFeatureId",null);this._changeAttrValue("value",this.inputNode.value);this._checkStatus()},_inputClick:function(){this._hideSourcesMenu();this._hideNoResultsMenu()},
_getSourceName:function(D){return this._sourceNames[D]},_loadSources:function(D){D=k.filter(D,function(J){return!!J.featureLayer});D=k.map(D,function(J){return this._featureLayerLoaded(J.featureLayer)},this);return L(D)},_createSourceNameMap:function(D){return this._loadSources(D).then(l.hitch(this,function(){var J=k.map(D,function(M){return M.name||M.featureLayer&&M.featureLayer.name||v.widgets.Search.main.untitledSource});this._preventDuplicateSourceNames(D,J);return J}))},_getDuplicateSourceNameIndexes:function(D){var J=
{},M=[];k.forEach(D,function(K,P){J.hasOwnProperty(K)?(-1===M.indexOf(J[K])&&M.push(J[K]),M.push(P)):D.lastIndexOf(K)!==P&&(J[K]=P)});return M},_preventDuplicateSourceNames:function(D,J){if(J&&1<J.length){var M=this._getDuplicateSourceNameIndexes(J);k.forEach(M,function(K){J[K]+=this._getFieldsString(D[K])},this)}},_getFieldsString:function(D){var J="",M=D.featureLayer;if(M){D=D.searchFields||[this._getDisplayField(D)];for(var K=0;K<D.length;K++){J=0===K?J+": ":J+", ";var P=D[K],T=M.getFieldLabel(P);
J+=T||P}}return J},_splitResult:function(D,J){J=g.escapeString(J);return D.replace(new RegExp("(^|)("+J+")(|$)","ig"),"$1|$2|$3").split("|")},_insertSuggestions:function(D,J){if(this.enableSuggestionsMenu&&this.suggestionsNode){this._hideSourcesMenu();this._hideNoResultsMenu();var M=this.sources;if(D){var K=r.create("div");for(var P in D)if(D[P]&&D[P].length){var T=this._getSourceName(P);1<M.length&&this.activeSourceIndex===this._allIndex&&r.create("div",{className:this.css.searchMenuHeader,textContent:T},
K);T=r.create("ul",{role:"menu"},K);for(var ba=M[P].maxSuggestions||this.maxSuggestions,ia=0;ia<D[P].length&&ia<ba;++ia){var aa=r.create("li",{"data-index":ia,"data-source-index":P,role:"menuitem",tabindex:0},T),ca=this._getSuggestionName(D[P][ia]);ca=this._splitResult(ca,J);for(var Y=ca.length,ha=0;ha<Y;ha++){var na=ca[ha];na.toLowerCase()===J.toLowerCase()?r.create("strong",{textContent:na},aa):(na=document.createTextNode(na),r.place(na,aa))}}}}K?(r.place(K,this.suggestionsNode,"only"),this._showSuggestionsMenu()):
(r.empty(this.suggestionsNode),this._hideSuggestionsMenu())}},_insertSources:function(D){if(this.enableSourcesMenu&&D&&1<D.length){var J,M=this.activeSourceIndex,K=r.create("ul",{role:"menu"});if(this.enableSearchingAll){var P="";M===this._allIndex&&(P="active");r.create("li",{"data-index":this._allIndex,role:"menuitem",className:P,tabIndex:0,textContent:v.widgets.Search.main.all},K)}for(J=0;J<D.length;J++){P="";J===M&&(P=this.css.activeSource);var T=this._getSourceName(J);r.create("li",{"data-index":J,
role:"menuitem",className:P,tabIndex:0,textContent:T},K)}p.add(this.containerNode,this.css.hasMultipleSources);r.place(K,this.sourcesNode,"only")}else p.remove(this.containerNode,this.css.hasMultipleSources),r.empty(this.sourcesNode)},_showLoading:function(){p.add(this.containerNode,this.css.searchLoading)},_hideLoading:function(){p.remove(this.containerNode,this.css.searchLoading)},_checkStatus:function(){this.value?(p.add(this.containerNode,this.css.hasValue),m.set(this.clearNode,"title",v.widgets.Search.main.clearButtonTitle)):
this.clear()},_closePopup:function(){this.enableInfoWindow&&this.map&&this.map.infoWindow&&this.map.infoWindow.hide()},_noResults:function(D){var J;D&&(J=l.trim(D));var M=r.create("div",{className:this.css.searchNoResultsBody});D&&J?(r.create("div",{className:this.css.searchNoResultsHeader,textContent:v.widgets.Search.main.noResults},M),r.create("div",{className:this.css.searchNoResultsText,textContent:w.substitute({value:'"'+D+'"'},v.widgets.Search.main.noResultsFound)},M)):(D=r.create("div",{},
M),r.create("span",{"aria-hidden":"true",className:this.css.searchNoValueIcon},D),r.create("span",{className:this.css.searchNoValueText,textContent:v.widgets.Search.main.emptyValue},D));r.place(M,this.noResultsMenuNode,"only")},_hideMenus:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();this._hideNoResultsMenu()},_hideNoResultsMenu:function(){p.remove(this.containerNode,this.css.showNoResults)},_showNoResultsMenu:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();p.add(this.containerNode,
this.css.showNoResults)},_hideSourcesMenu:function(){p.remove(this.containerNode,this.css.showSources)},_hideSuggestionsMenu:function(){p.remove(this.containerNode,this.css.showSuggestions)},_showSourcesMenu:function(){this._hideSuggestionsMenu();this._hideNoResultsMenu();p.add(this.containerNode,this.css.showSources)},_showSuggestionsMenu:function(){this._hideSourcesMenu();this._hideNoResultsMenu();p.add(this.containerNode,this.css.showSuggestions)},_toggleSourcesMenu:function(){this._hideSuggestionsMenu();
this._hideNoResultsMenu();p.toggle(this.containerNode,this.css.showSources)},_getFirstStringField:function(D){if(D&&(D=D.fields)&&D.length)for(var J=0;J<D.length;J++){var M=D[J];if("esriFieldTypeString"===M.type)return M.name}return""},_getDisplayField:function(D){return D.displayField||D.featureLayer.displayField||this._getFirstStringField(D.featureLayer)},_validLocation:function(D){return D&&"number"===typeof D.x&&"number"===typeof D.y},_validExtent:function(D){return D&&"number"===typeof D.xmin&&
"number"===typeof D.ymin&&"number"===typeof D.xmax&&"number"===typeof D.ymax},_hydrateResult:function(D,J,M){var K={},P=this._defaultSR;J=this.sources[J];this.map&&(P=this.map.spatialReference);if(D.hasOwnProperty("text")&&D.hasOwnProperty("magicKey"))return D;if(D.hasOwnProperty("geometry")){var T=new I(D.toJson());K.feature=T;(T=K.feature.geometry)&&T.setSpatialReference(P)}else if(D.hasOwnProperty("location")&&this._validLocation(D.location)){var ba=new da(D.location.x,D.location.y,P);T={};D.hasOwnProperty("attributes")&&
(T=D.attributes);D.hasOwnProperty("address")&&"object"===typeof D.address&&l.mixin(T,D.address);D.hasOwnProperty("score")&&(T.score=D.score);K.feature=new I(ba,null,T,null)}!K.feature&&M&&(T={},D.hasOwnProperty("attributes")&&(T=D.attributes),D.hasOwnProperty("score")&&(T.score=D.score),K.feature=new I(null,null,T,null));if(K.feature){if(D.hasOwnProperty("extent")&&this._validExtent(D.extent))K.extent=new X(D.extent),K.extent.setSpatialReference(P);else if(K.feature&&K.feature.geometry)switch(K.feature.geometry.type){case "extent":K.extent=
K.feature.geometry;break;case "multipoint":K.extent=ea.getDenormalizedExtent(K.feature.geometry);break;case "polygon":K.extent=ea.getDenormalizedExtent(K.feature.geometry);break;case "polyline":K.extent=ea.getDenormalizedExtent(K.feature.geometry);break;case "point":this.map?(P=this.zoomScale,J&&J.zoomScale&&(P=J.zoomScale),this._getScale()>P?K.extent=Q.getExtentForScale(this.map,P).centerAt(K.feature.geometry):K.extent=this.map.extent.centerAt(K.feature.geometry)):K.extent=new X({xmin:K.feature.geometry.x-
.25,ymin:K.feature.geometry.y-.25,xmax:K.feature.geometry.x+.25,ymax:K.feature.geometry.y+.25,spatialReference:this._defaultSR})}else K.extent=null;K.name="";J.featureLayer?J.suggestionTemplate&&M?K.name=w.substitute(D.attributes,J.suggestionTemplate):J.searchTemplate?K.name=w.substitute(D.attributes,J.searchTemplate):(T=this._getDisplayField(J),M=J.featureLayer.getField(T),P=J.featureLayer.getDomain(T),T&&D.hasOwnProperty("attributes")&&D.attributes.hasOwnProperty(T)&&(D=D.attributes[T],P&&"codedValue"===
P.type?K.name=this._getCodedName(P.codedValues,D):M&&"esriFieldTypeDate"===M.type&&!isNaN(D)?K.name=u.format(new Date(D)):K.name=D)):D.address&&J.searchTemplate?K.name=w.substitute(D.address,J.searchTemplate):D.hasOwnProperty("name")?K.name=D.name:D.hasOwnProperty("attributes")&&"object"===typeof D.attributes&&D.attributes.LongLabel?K.name=D.attributes.LongLabel:D.hasOwnProperty("attributes")&&"object"===typeof D.attributes&&D.attributes.Match_addr?(K.name=D.attributes.Match_addr,D.attributes.Addr_type&&
"POI"===D.attributes.Addr_type&&D.attributes.StAddr&&D.attributes.City?K.name+=" - "+D.attributes.StAddr+", "+D.attributes.City:D.attributes.Addr_type&&"POI"===D.attributes.Addr_type&&D.attributes.City&&(K.name+=" - "+D.attributes.City)):D.hasOwnProperty("address")&&"string"===typeof D.address?K.name=D.address:D.hasOwnProperty("address")&&"object"===typeof D.address&&D.address.hasOwnProperty("Address")?D.address.hasOwnProperty("Match_addr")?K.name=D.address.Match_addr:D.address.hasOwnProperty("Address")&&
(K.name=D.address.Address):K.feature&&K.feature.geometry&&(K.name=K.feature.geometry.x+","+K.feature.geometry.y);J.featureLayer&&K.feature&&oa(K.feature,J.featureLayer);return K}},_getScale:function(){var D;this.map&&"function"===typeof this.map.getScale&&(D=this.map.getScale());return D},_hydrateResults:function(D,J,M,K){K=[];var P=0;if(D&&D.length)for(P;P<D.length;P++){var T=this._hydrateResult(D[P],J,M);T&&K.push(T)}return K},_containsNonLatinCharacter:function(D){for(var J=0;J<D.length;J++)if(255<
D.charCodeAt(J))return!0;return!1},_setPlaceholder:function(D){var J="",M=this.sources[D];D===this._allIndex?J=this.allPlaceholder||v.widgets.Search.main.allPlaceholder:M&&M.placeholder&&(J=M.placeholder);var K=v.widgets.Search.main.all;M&&(K=this._getSourceName(D));m.set(this.sourceNameNode,"textContent",K);m.set(this.inputNode,"placeholder",J);m.set(this.inputNode,"title",J)},_updateActiveSource:function(){var D=this.sources,J=this.activeSourceIndex,M;D&&D[J]&&(M=D[J]);M?this.set("activeSource",
M):this.set("activeSource",null)},_updateVisible:function(){this.visible?this.show():this.hide()},_updateButtonMode:function(D){D?(p.toggle(this.containerNode,this.css.searchExpanded,this.expanded),p.toggle(this.containerNode,this.css.searchCollapsed,!this.expanded),p.add(this.containerNode,this.css.hasButtonMode)):(p.remove(this.containerNode,this.css.searchExpanded),p.remove(this.containerNode,this.css.searchCollapsed),p.remove(this.containerNode,this.css.hasButtonMode))},_setDefaultActiveSourceIndex:function(D){D&&
1===D.length||!this.enableSearchingAll?this.set("activeSourceIndex",0):this.set("activeSourceIndex",this._allIndex)},_setEnableSourcesMenuAttr:function(D){this._set("enableSourcesMenu",D);this._created&&this._insertSources(this.sources)},_setEnableSearchingAllAttr:function(D){this._set("enableSearchingAll",D);this._created&&(this._setDefaultActiveSourceIndex(this.sources),this._hideMenus(),this._insertSources(this.sources))},_setSourcesAttr:function(D){this._createSourceNameMap(D).then(l.hitch(this,
function(J){this._sourceNames=J;this._created&&(this._setDefaultActiveSourceIndex(D),this._hideMenus(),this._insertSources(D))}));this._set("sources",D)},_setAllPlaceholderAttr:function(D){this._set("allPlaceholder",D);this._created&&this._setPlaceholder(this.activeSourceIndex)},_setActiveSourceIndexAttr:function(D){this._set("activeSourceIndex",D);this._updateActiveSource();this._created&&(this._setPlaceholder(D),this._hideMenus(),this._insertSources(this.sources))},_setMaxLengthAttr:function(D){this._set("maxLength",
D);this._created&&m.set(this.inputNode,"maxLength",D)},_setValueAttr:function(D){this.set("magicKey",null);this.set("selectedFeatureId",null);this._set("value",D);this._created&&(m.set(this.inputNode,"value",D),this._checkStatus())},_setVisibleAttr:function(D){this._set("visible",D);this._created&&this._updateVisible()},_setEnableButtonModeAttr:function(D){this._set("enableButtonMode",D);this._created&&this._updateButtonMode(D)},_setThemeAttr:function(D){this._created&&(p.remove(this.domNode,this.theme),
p.add(this.domNode,D));this._set("theme",D)}});c("extend-esri")&&l.setObject("dijit.Search",q,H);return q})},"esri/tasks/locator":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ./Task ./AddressCandidate".split(" "),function(t,q,l,k,f,e,a,b,d,c,g){t=t(c,{declaredClass:"esri.tasks.Locator",_eventMap:{"address-to-locations-complete":["addresses"],"addresses-to-locations-complete":["addresses"],
"location-to-address-complete":["address"],"suggest-locations-complete":["suggestions"]},constructor:function(h){this._geocodeHandler=q.hitch(this,this._geocodeHandler);this._geocodeAddressesHandler=q.hitch(this,this._geocodeAddressesHandler);this._reverseGeocodeHandler=q.hitch(this,this._reverseGeocodeHandler);this.registerConnectEvents()},outSpatialReference:null,setOutSpatialReference:function(h){this.outSpatialReference=h},_geocodeHandler:function(h,m,p,n,r){try{var u=h.candidates;m=[];var v,
y=u.length,A=h.spatialReference,C;for(v=0;v<y;v++){var E=u[v];if(C=E.location)C.spatialReference=A;m[v]=new g(E)}this._successHandler([m],"onAddressToLocationsComplete",p,r)}catch(F){this._errorHandler(F,n,r)}},_geocodeAddressesHandler:function(h,m,p,n,r){try{var u=h.locations;m=[];var v,y=u.length,A=h.spatialReference,C;for(v=0;v<y;v++){if(C=u[v].location)C.spatialReference=A;m[v]=new g(u[v])}this._successHandler([m],"onAddressesToLocationsComplete",p,r)}catch(E){this._errorHandler(E,n,r)}},addressToLocations:function(h,
m,p,n,r){var u;if(h.address){n=p;p=m;m=h.outFields;r=h.searchExtent;var v=h.countryCode;var y=h.magicKey;var A=h.distance;var C=h.categories;h.location&&this.normalization&&(u=h.location.normalize());var E=h.locationType;var F=h.maxLocations;var B=h.forStorage;h=h.address}r&&(r=r.shiftCentralMeridian());var w=this.outSpatialReference;h=this._encode(q.mixin({},this._url.query,h,{f:"json",outSR:w&&f.toJson(w.toJson()),outFields:m&&m.join(",")||null,searchExtent:r&&f.toJson(r.toJson()),category:C&&C.join(",")||
null,countryCode:v||null,magicKey:y||null,distance:A||null,location:u||null,locationType:E||null,maxLocations:F||null,forStorage:B||null}));var z=this._geocodeHandler,H=this._errorHandler,G=new k(d._dfdCanceller);G._pendingDfd=b({url:this._url.path+"/findAddressCandidates",content:h,callbackParamName:"callback",load:function(I,L){z(I,L,p,n,G)},error:function(I){H(I,n,G)}});return G},suggestLocations:function(h){var m=new k(d._dfdCanceller);h.hasOwnProperty("location")&&this.normalization&&(h.location=
h.location.normalize());h.searchExtent&&(h.searchExtent=h.searchExtent.shiftCentralMeridian());h=this._encode(q.mixin({},this._url.query,{f:"json",text:h.text,maxSuggestions:h.maxSuggestions,searchExtent:h.searchExtent&&f.toJson(h.searchExtent.toJson()),category:h.categories&&h.categories.join(",")||null,countryCode:h.countryCode||null,location:h.location||null,distance:h.distance||null},{f:"json"}));h=b({url:this._url.path+"/suggest",content:h,callbackParamName:"callback"});m._pendingDfd=h;h.then(q.hitch(this,
function(p){p=p.suggestions||[];this.onSuggestLocationsComplete(p);m.resolve(p)}),q.hitch(this,function(p){this._errorHandler(p);m.reject(p)}));return m},addressesToLocations:function(h,m,p){var n=this.outSpatialReference,r=[],u=h.categories,v=h.locationType,y=h.countryCode;l.forEach(h.addresses,function(F,B){r.push({attributes:F})});h=this._encode(q.mixin({},this._url.query,{category:u&&u.join(",")||null,locationType:v||null,sourceCountry:y||null},{addresses:f.toJson({records:r})},{f:"json",outSR:n&&
f.toJson(n.toJson())}));var A=this._geocodeAddressesHandler,C=this._errorHandler,E=new k(d._dfdCanceller);E._pendingDfd=b({url:this._url.path+"/geocodeAddresses",content:h,callbackParamName:"callback",load:function(F,B){A(F,B,m,p,E)},error:function(F){C(F,p,E)}});return E},_reverseGeocodeHandler:function(h,m,p,n,r){try{var u=new g({address:h.address,location:h.location,score:100});this._successHandler([u],"onLocationToAddressComplete",p,r)}catch(v){this._errorHandler(v,n,r)}},locationToAddress:function(h,
m,p,n){h&&this.normalization&&(h=h.normalize());var r=this.outSpatialReference;h=this._encode(q.mixin({},this._url.query,{outSR:r&&f.toJson(r.toJson()),location:h&&f.toJson(h.toJson()),distance:m,f:"json"}));var u=this._reverseGeocodeHandler,v=this._errorHandler,y=new k(d._dfdCanceller);y._pendingDfd=b({url:this._url.path+"/reverseGeocode",content:h,callbackParamName:"callback",load:function(A,C){u(A,C,p,n,y)},error:function(A){v(A,n,y)}});return y},onSuggestLocationsComplete:function(){},onAddressToLocationsComplete:function(){},
onAddressesToLocationsComplete:function(){},onLocationToAddressComplete:function(){}});e("extend-esri")&&q.setObject("tasks.Locator",t,a);return t})},"esri/tasks/AddressCandidate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../geometry/Point"],function(t,q,l,k,f){t=t(null,{declaredClass:"esri.tasks.AddressCandidate",constructor:function(e){q.mixin(this,e);this.location=new f(this.location)}});l("extend-esri")&&q.setObject("tasks.AddressCandidate",t,k);return t})},
"esri/styles/basic":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has","../kernel","../Color"],function(t,q,l,k,f){function e(g,h){if(g){var m={};m.color=new f(g.color);m.opacity=g.opacity||1;switch(h){case "point":m.outline={color:new f(g.outline.color),width:g.outline.width};m.size=g.size;break;case "line":m.width=g.width;break;case "polygon":m.outline={color:new f(g.outline.color),width:g.outline.width}}}return m}function a(g){if("esriGeometryPoint"===g||"esriGeometryMultipoint"===
g)g="point";else if("esriGeometryPolyline"===g)g="line";else if("esriGeometryPolygon"===g||"esriGeometryMultiPatch"===g)g="polygon";return g}var b={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},
pointSchemes:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,255,.25],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:1},size:8}]},dark:{primary:{color:[255,255,255,1],outline:{color:[92,92,92,.25],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:1},size:8},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:1},size:8}]}},lineSchemes:{light:{primary:{color:[77,
77,77,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,139,79,1],outline:{color:[255,255,255,.25],width:1},opacity:.8},secondary:[{color:[128,128,128,1],outline:{color:[255,255,255,.25],width:1},opacity:.8},{color:[255,255,255,1],outline:{color:[128,128,128,.25],width:1},opacity:.8}]},dark:{primary:{color:[227,
139,79,1],outline:{color:[92,92,92,.25],width:1},opacity:.8},secondary:[{color:[178,178,178,1],outline:{color:[92,92,92,.25],width:1},opacity:.8},{color:[26,26,26,1],outline:{color:[128,128,128,.25],width:1},opacity:.8}]}}}},d={};(function(){var g,h,m;for(g in b){var p=b[g];var n=p.basemapGroups;var r=d[g]={basemaps:[].concat(n.light).concat(n.dark),point:{},line:{},polygon:{}};for(h in n){var u=n[h];for(m=0;m<u.length;m++){var v=u[m];p.pointSchemes&&(r.point[v]=p.pointSchemes[h]);p.lineSchemes&&
(r.line[v]=p.lineSchemes[h]);p.polygonSchemes&&(r.polygon[v]=p.polygonSchemes[h])}}}})();var c={getAvailableThemes:function(g){var h=[],m;for(m in b){var p=b[m];var n=d[m];g&&-1===t.indexOf(n.basemaps,g)||h.push({name:p.name,label:p.label,description:p.description,basemaps:n.basemaps.slice(0)})}return h},getSchemes:function(g){var h=g.theme,m=g.basemap,p=a(g.geometryType);g=d[h];var n;(g=(g=g&&g[p])&&g[m])&&(n={primaryScheme:e(g.primary,p),secondarySchemes:t.map(g.secondary,function(r){return e(r,
p)})});return n},cloneScheme:function(g){if(g){var h=q.mixin({},g);h.color&&(h.color=new f(h.color));h.outline&&(h.outline={color:h.outline.color&&new f(h.outline.color),width:h.outline.width})}return h}};l("extend-esri")&&q.setObject("styles.basic",c,k);return c})},"jimu/dijit/EditorXssFilter":function(){define("dojo/_base/declare dojo/_base/array dijit/_WidgetBase dojo/_base/lang dojo/Evented libs/arcgis-html-sanitizer/arcgis-html-sanitizer".split(" "),function(t,q,l,k,f,e){var a=null,b=t([l,f],
{baseClass:"jimu-editor-xss-filter",declaredClass:"jimu.dijit.EditorXssFilter",sanitizer:null,xss:null,whiteList:{},graphicsWhiteList:{},postCreate:function(){this.whiteList=this._getWhiteList();this.sanitizer=new e({whiteList:this.whiteList,safeAttrValue:k.hitch(this,function(d,c,g,h){return"style"===c?this.xss.friendlyAttrValue(g).replace(/"/g,"'"):"img"===d&&"src"===c?this.xss.escapeAttrValue(g):this.xss.safeAttrValue(d,c,g,h)}),onTag:k.hitch(this,function(d,c,g){if(g.isWhite&&this._isInWhiteList(d,
this.graphicsWhiteList))return c}),onIgnoreTagAttr:k.hitch(this,function(d,c,g,h){if("data-"===c.substr(0,5))return c+'\x3d"'+this.xss.escapeAttrValue(g)+'"'}),onIgnoreTag:k.hitch(this,function(d,c,g){if("o:"===d.substr(0,2)||"!--[if"===d||"!--[endif]--"===d)return c})},!0);this.xss=this.sanitizer.xss},sanitize:function(d){return this.sanitizer.sanitize(d)},_getWhiteList:function(){var d="title height width class style font-family id align text-align".split(" "),c={div:d,h1:d,h2:d,h3:d,h4:d,h5:d,
h6:d,span:d,p:d,s:d,strong:d,em:d,u:d,ol:d,ul:d,li:d,a:["href","target"].concat(d),img:["src","alt","border"].concat(d),blockquote:d,font:["face","size","color"].concat(d),pre:d,code:d,b:d,i:d,wbr:d,video:"autoplay controls loop muted poster preload".split(" ").concat(d),audio:["autoplay","controls","loop","muted","preload"].concat(d),source:["media","src","type"].concat(d),table:["cellpadding","cellspacing","border"].concat(d),tbody:[].concat(d),tr:["valign"].concat(d),td:["valign","colspan","rowspan",
"nowrap"].concat(d),th:["valign","colspan","rowspan","nowrap"].concat(d),hr:d,html:d,title:d,link:["rel","href"],style:["type"].concat(d),body:d};this.graphicsWhiteList={animate:[],animateMotion:[],animateTransform:[],circle:[],clipPath:[],"color-profile":[],defs:[],desc:[],discard:[],ellipse:[],feBlend:[],feColorMatrix:[],feComponentTransfer:[],feComposite:[],feConvolveMatrix:[],feDiffuseLighting:[],feDisplacementMap:[],feDistantLight:[],feDropShadow:[],feFlood:[],feFuncA:[],feFuncB:[],feFuncG:[],
feFuncR:[],feGaussianBlur:[],feImage:[],feMerge:[],feMergeNode:[],feMorphology:[],feOffset:[],fePointLight:[],feSpecularLighting:[],feSpotLight:[],feTile:[],feTurbulence:[],filter:[],foreignObject:[],g:[],hatch:[],hatchpath:[],line:[],linearGradient:[],marker:[],mask:[],mesh:[],meshgradient:[],meshpatch:[],meshrow:[],metadata:[],mpath:[],path:[],pattern:[],polygon:[],polyline:[],radialGradient:[],rect:[],set:[],solidcolor:[],stop:[],svg:[],switch:[],symbol:[],text:[],textPath:[],title:[],tspan:[],
use:[],view:[],object:[],canvas:d};return this._extendObjectOfArrays([c,{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size",
"face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],
ul:[],video:"autoplay controls loop preload src height width".split(" ")},this.graphicsWhiteList])},_extendObjectOfArrays:function(d){var c={};q.forEach(d,function(g){var h=Object.keys(g);q.forEach(h,function(m){Array.isArray(g[m])&&Array.isArray(c[m])?c[m]=c[m].concat(g[m]):c[m]=g[m]},this)},this);return c},_isInWhiteList:function(d,c){c=Object.keys(c);var g=!1;q.forEach(c,function(h){d===h&&(g=!0)},this);return g}});b.getInstance=function(){null===a&&(a=new b);return a};return b})},"widgets/BusinessAnalyst/_build-generate_module":function(){define(["dojo/text!./Widget.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:esri/dijit/geoenrichment/templates/_WizardPage.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv data-dojo-type\x3d"esri/dijit/geoenrichment/Grid" data-dojo-attach-point\x3d"layoutGrid"  class\x3d"Grid"\x3e\r\n        ${content}\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/BusinessAnalyst/CreateBuffersPage.html":'\x3cdiv\x3e\r\n\t\x3cdiv\x3e${nls.addRingsDtWt}\x3c/div\x3e\r\n\t\x3cbr\x3e\r\n    \x3cdiv style\x3d"width: 350 px; height: 110px"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"ringDtWtTabContainer" style\x3d"width: 100%; height: 110px;"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"ringsContentPane" title\x3d"${nls.rings}" style\x3d"margin-top: 15px;"\x3e\r\n\t\t\t\t${nls.radius}\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 1" data-dojo-attach-point\x3d"ringsBufferRadii1"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 3" data-dojo-attach-point\x3d"ringsBufferRadii2"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 5" data-dojo-attach-point\x3d"ringsBufferRadii3"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"ringsBufferUnits"\x3e\r\n\t\t\t\t\t\x3coption value\x3d"esriMiles" selected\x3d"selected"\x3e${nls.miles}\x3c/option\x3e\r\n\t\t\t\t\t\x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"ringValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3ca href\x3d"https://doc.arcgis.com/en/arcgis-online/reference/credits.htm" target\x3d"_blank" class\x3d"esriFloatTrailing esriSmallFont" style\x3d"position: absolute; right: 0px; top: 94px;"\x3e${nls.creditInformation}\x3c/a\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"driveTimeContentPane" title\x3d"${nls.driveTime}" style\x3d"margin-top: 15px;"\x3e\r\n\t\t\t\t${nls.time}\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 5" data-dojo-attach-point\x3d"driveTimeBufferRadii1"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 10" data-dojo-attach-point\x3d"driveTimeBufferRadii2"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 15" data-dojo-attach-point\x3d"driveTimeBufferRadii3"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"driveTimeBufferUnits"\x3e\r\n\t\t\t\t\t\x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n\t\t\t\t\t\x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n\t\t\t\t\t\x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"driveTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3ca href\x3d"https://doc.arcgis.com/en/arcgis-online/reference/credits.htm" target\x3d"_blank" class\x3d"esriFloatTrailing esriSmallFont" style\x3d"position: absolute; right: 0px; top: 94px;"\x3e${nls.creditInformation}\x3c/a\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"walkTimeContentPane" title\x3d"${nls.walkTime}" style\x3d"margin-top: 15px;"\x3e\r\n\t\t\t\t${nls.time}\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 5" data-dojo-attach-point\x3d"walkTimeBufferRadii1"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 10" data-dojo-attach-point\x3d"walkTimeBufferRadii2"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 42px;" data-dojo-props\x3d"value: 15" data-dojo-attach-point\x3d"walkTimeBufferRadii3"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"walkTimeBufferUnits"\x3e\r\n\t\t\t\t\t\x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n\t\t\t\t\t\x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n\t\t\t\t\t\x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"walkTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3ca href\x3d"https://doc.arcgis.com/en/arcgis-online/reference/credits.htm" target\x3d"_blank" class\x3d"esriFloatTrailing esriSmallFont" style\x3d"position: absolute; right: 0px; top: 94px;"\x3e${nls.creditInformation}\x3c/a\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv style\x3d"margin-top: 10px;" class\x3d"jimu-btn jimu-btn-vacation"  data-dojo-attach-point\x3d"backBtn" data-dojo-attach-event\x3d"onclick:backOnClick"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3cdiv style\x3d"margin-top: 10px;" class\x3d"jimu-btn"  data-dojo-attach-point\x3d"createBufferBtn" data-dojo-attach-event\x3d"onclick:applyBuffer"\x3e${nls.apply}\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/ErrorPage.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"noPermissionsErrorDiv"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"servicesErrorDiv"\r\n\x3c/div\x3e\r\n',"url:esri/dijit/geoenrichment/templates/OnDemandSelect.html":'\x3cdiv class\x3d"esriGEOnDemandSelect"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"openButton" class\x3d"onDemandSelect_openButton"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"arrow" class\x3d"onDemandSelect_arrow"\x3e\x26nbsp;\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"selectedLabel" class\x3d"onDemandSelect_selectedLabel TrimWithEllipses"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"selectedItemHolder" class\x3d"onDemandSelect_selectedItem TrimWithEllipses"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/ComparisonSettings.html":'\x3cdiv class\x3d"esriGEReportPlayerToolbar_comparisonSettings esriGENonSelectable"\x3e\r\n    \x3cdiv class\x3d"esriGERow20" data-dojo-attach-point\x3d"showBackgroundImageBlock"\x3e\r\n        ${nls.comparisonSettings}\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"esriGESpaceBefore20"\x3e\r\n        \x3cdiv class\x3d"esriGERow20" data-dojo-attach-point\x3d"showBackgroundImageBlock"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"showBackgroundImageLabel"\x3e\x26nbsp;${nls.showBackgroundImage}\x3c/label\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20"\x3e\r\n            \x3cdiv class\x3d"dijitInline"\x3e\r\n                \x3clabel data-dojo-attach-point\x3d"splitPanelsLabel"\x3e\x26nbsp;${nls.splitPanels}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceBeforeBig esriGEInfoIcon" data-dojo-attach-point\x3d"splitPanelsInfoIcon"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20"\x3e\r\n            \x3cdiv class\x3d"dijitInline"\x3e${nls.zoomPanels}\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceBeforeBig esriGEInfoIcon" data-dojo-attach-point\x3d"zoomPanelsInfoIcon"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20 esriGESpaceBefore20" data-dojo-attach-point\x3d"zoomBlock"\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomOutButton esriGEIcon16" data-dojo-attach-point\x3d"zoomOutButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomLabel" data-dojo-attach-point\x3d"zoomLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomInButton esriGEIcon16" data-dojo-attach-point\x3d"zoomInButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGELink comparisonSettings_resetLink" data-dojo-attach-point\x3d"resetButton"\x3e${nls.reset}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"esriGERow20 esriGESpaceBefore20" data-dojo-attach-point\x3d"zoomSplitBlock"\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomOutButton esriGEIcon16" data-dojo-attach-point\x3d"zoomOutSplitButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomLabel" data-dojo-attach-point\x3d"zoomSplitLabel"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGESpaceAfterBig comparisonSettings_zoomInButton esriGEIcon16" data-dojo-attach-point\x3d"zoomInSplitButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"dijitInline esriGELink comparisonSettings_resetLink" data-dojo-attach-point\x3d"resetSplitButton"\x3e${nls.reset}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/PlayerToolbarHolder.html":'\x3cdiv class\x3d"esriGEPlayerToolbar"\x3e\r\n\r\n    \x3c!--left--\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"infographicsSelectDiv" class\x3d"dijitInline playerToolbar_infographicsSelectDiv"\x3e\x3c/div\x3e\r\n    \r\n    \x3c!--center--\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"areaTitleDiv" class\x3d"dijitInline playerToolbar_areaTitleDiv"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"areaTitleInnerDiv" class\x3d"dijitInline playerToolbar_areaTitleInnerDiv TrimWithEllipses"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"areasSelectDiv" class\x3d"dijitInline playerToolbar_areasSelectDiv"\x3e\x3c/div\x3e\r\n\r\n    \x3c!--right--\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"rightSideControlsBlock" class\x3d"dijitInline playerToolbar_rightSideControlsBlock"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"zoomSelectDiv" class\x3d"dijitInline dijitInline playerToolbar_zoomSelectDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"pageSelectDiv" class\x3d"dijitInline dijitInline playerToolbar_pageSelectDiv"\x3e\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"commandButtonsContainer" class\x3d"dijitInline playerToolbar_commandButtonsContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/geoenrichment/ReportPlayer/templates/ReportPlayer.html":'\x3cdiv class\x3d"esriGEReportPlayer esriGENonSelectable"\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"printBackgroundView" class\x3d"esriGEAbsoluteStretched"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"normalViewDiv"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"playerToolbarDiv"\x3e\x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"printableDivContainer" class\x3d"reportPalyer_printableDivContainer"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"printableDiv" class\x3d"reportPalyer_printableDiv"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"reportContainerDiv"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"reportPlayer_sidePageNavigator" data-dojo-attach-point\x3d"sidePageNavigator"\x3e\r\n            \x3cdiv class\x3d"reportPlayer_paginationArrowUp" data-dojo-attach-point\x3d"prevPageButton"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"reportPlayer_paginationArrowDown" data-dojo-attach-point\x3d"nextPageButton"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv data-dojo-attach-point\x3d"playerAfterToolbarDiv" class\x3d"reportPlayer_playerAfterToolbarDiv"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/templates/SelectableTreeGrid.html":'\x3cdiv class\x3d"esriMapsAnalystXNonSelectable"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"gridContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"selectionCounter" class\x3d"esriMapsAnalystXSelectableTreeCounter"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/BusinessAnalyst/RunReportsPage.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"business-analyst-run-reports-page" style\x3d"width: 350 px; height: 150px"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"runReportTabContainer" style\x3d"width: 100%; height: 155px;"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"infographicsContentPane" title\x3d"${nls.infographics}" style\x3d"overflow-y: hidden"\x3e\r\n\t\t\t\t\x3cdiv style\x3d"margin-top: 15px;"\x3e\r\n\t\t\t\t\t\x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"infographicDropDownContainer"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cbr /\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"jimu-btn runReportButton jimu-state-disabled" data-dojo-attach-point\x3d"runInfographicBtn" data-dojo-attach-event\x3d"onclick:runInfographic"\x3e${nls.runInfographic}\x3c/div\x3e\r\n\t\t\t\t\t\x3ca href\x3d"https://doc.arcgis.com/en/arcgis-online/reference/credits.htm" target\x3d"_blank" class\x3d"esriFloatTrailing esriSmallFont"\x3e${nls.creditInformation}\x3c/a\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"reportsContentPane" title\x3d"${nls.reports}" style\x3d"overflow-y: hidden"\x3e\r\n\t\t\t\t\x3cdiv style\x3d"margin-top: 15px;"\x3e\r\n\t\t\t\t\t\x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"reportFilteringSelectDropDownContainer"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cbr /\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"jimu-btn runReportButton jimu-state-disabled" data-dojo-attach-point\x3d"runReportBtn" data-dojo-attach-event\x3d"onclick:runReport"\x3e${nls.runReport}\x3c/div\x3e\r\n\t\t\t\t\t\x3ca href\x3d"https://doc.arcgis.com/en/arcgis-online/reference/credits.htm" target\x3d"_blank" class\x3d"esriFloatTrailing esriSmallFont"\x3e${nls.creditInformation}\x3c/a\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cbr\x3e\r\n\t\x3cdiv class\x3d"jimu-btn jimu-btn-vacation" data-dojo-attach-point\x3d"backBtn" data-dojo-attach-event\x3d"onclick:backOnClick"\x3e${nls.back}\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/Search/templates/Search.html":'\x3cdiv role\x3d"presentation" class\x3d"${theme}"\x3e\r\n  \x3cdiv role\x3d"presentation" class\x3d"${css.searchGroup}" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"expandNode" class\x3d"${css.searchExpandContainer}"\x3e\r\n      \x3cdiv class\x3d"${css.searchAnimateContainer}"\x3e\r\n        \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchIn}" id\x3d"${id}_menu_button" class\x3d"${css.searchBtn} ${css.searchToggle}" tabindex\x3d"0" data-dojo-attach-point\x3d"sourcesBtnNode"\x3e\r\n          \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchToggleIcon}"\x3e\x3c/span\x3e\x3cspan class\x3d"${css.searchSourceName}" data-dojo-attach-point\x3d"sourceNameNode"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"${css.searchInputGroup}"\x3e\r\n          \x3cform data-dojo-attach-point\x3d"formNode"\x3e\r\n            \x3cinput maxlength\x3d"${maxLength}" autocomplete\x3d"off" type\x3d"text" tabindex\x3d"0" class\x3d"${css.searchInput}" value\x3d"${value}" aria-haspopup\x3d"true" id\x3d"${id}_input" data-dojo-attach-point\x3d"inputNode" role\x3d"textbox"\x3e\r\n          \x3c/form\x3e\r\n          \x3cdiv role\x3d"button" class\x3d"${css.searchClear}" tabindex\x3d"0" data-dojo-attach-point\x3d"clearNode"\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchClearIcon}"\x3e\x3c/span\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchSpinner}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"suggestionsNode" class\x3d"${css.searchMenu} ${css.suggestionsMenu}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchButtonTitle}" class\x3d"${css.searchBtn} ${css.searchSubmit}" tabindex\x3d"0" data-dojo-attach-point\x3d"submitNode"\x3e\r\n      \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchIcon}"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"${css.searchButtonText}"\x3e${_i18n.widgets.Search.main.searchButtonTitle}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"sourcesNode" class\x3d"${css.searchMenu} ${css.sourcesMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"noResultsMenuNode" class\x3d"${css.searchMenu} ${css.searchNoResultsMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.searchClearFloat}"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/SelectPointPolygonPage.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"contentContainer"\x3e\x3c/div\x3e\r\n    \x3cbr\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"searchContainer" class\x3d"esriBusinessAnalystSearchContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv tabindex\x3d"0" role\x3d"button" data-dojo-attach-point\x3d"activatePinButton" title\x3d"${nls.addPoint}" class\x3d"esriBusinessAnalystButton esriBusinessAnalystPinButton esriBusinessAnalystButtonSearchPadding" data-blur-on-click\x3d"true" \x3e\x3c/div\x3e\r\n    \x3cdiv tabindex\x3d"1" role\x3d"button" data-dojo-attach-point\x3d"activatePolygonButton" title\x3d"${nls.addPolygon}" class\x3d"esriBusinessAnalystButton esriBusinessAnalystPolygonButton esriBusinessAnalystButtonSearchPadding" data-blur-on-click\x3d"true" \x3e\x3c/div\x3e\r\n    \x3cdiv tabindex\x3d"2" role\x3d"button" data-dojo-attach-point\x3d"activateFreehandPolygonButton" title\x3d"${nls.addFreehandPolygon}" class\x3d"esriBusinessAnalystButton esriBusinessAnalystFreehandPolygonButton esriBusinessAnalystButtonSearchPadding" data-blur-on-click\x3d"true" \x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/Widget.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"wizardContainer"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/BusinessAnalyst/css/style.css":'.esriBusinessAnalystButton {background: #fff; border: 1px solid #c5c5c5; color: #555; -webkit-border-radius: 3px; -moz-border-radius: 3px; -ms-border-radius: 3px; -o-border-radius: 3px; border-radius: 3px; font-size: 12px; line-height: 12px; -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.125); -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.125); box-shadow: 0 1px 2px rgba(0, 0, 0, 0.125); -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; -webkit-user-select: none; -moz-user-select: none; user-select: none; -webkit-transition: all .05s linear; -moz-transition: all .05s linear; -o-transition: all .05s linear; transition: all .05s linear; padding: 5px 10px; text-align: center; text-transform: uppercase; cursor: pointer; letter-spacing: 1px; position: relative; -webkit-font-smoothing: antialiased; width: 34px; height: 34px; background-repeat: no-repeat; background-position: center; margin-left: 1px;}.esriBusinessAnalystPressedButton {box-shadow: inset 0px 1px 1px rgba(0, 0, 0, 0.2);}.esriBusinessAnalystPressedButton,.esriBusinessAnalystPressedButton:hover{background-color: #DDE8F2;}.esriBusinessAnalystButtonSearchPadding {top: 22px;}.esriBusinessAnalystPinButton {float: left; margin-right: 10px; background-image: url("../../../jimu.js/css/images/draw_point.png");}.esriBusinessAnalystPolygonButton {float: left; background-size: 45px 45px; margin-right: 10px; background-image: url("../../../jimu.js/css/images/draw_polygon.png");}.esriBusinessAnalystFreehandPolygonButton {float: left; background-image: url("../../../jimu.js/css/images/draw_freehand_polygon.png");}.esriGETooltip {box-sizing: initial !important;}.esriGEPlayerToolbar.playerThemeDark {background-color: inherit !important;}.runReportButton {display: block; margin-top: 15px; width: max-content;}.jimu-btn.runReportButton.jimu-state-disabled {cursor: default;}.jimu-widget-business-analyst .tabs {font-family: "Avenir Light"; color: #000000; height: 100%;} .jimu-widget-business-analyst .tabs .tab-description {margin: 10px 0;} .jimu-widget-business-analyst .jimu-tab3\x3e.control\x3e.tab{background-color: #fff; border-top: 0; border-left: 0; border-right: 0; border-bottom: 1px solid #dedede; color:#898989; font-family: "Avenir Medium"; font-size: 14px;} .jimu-widget-business-analyst .jimu-tab3 .tab-item-td.jimu-state-active {border-bottom: 3px solid #24b5cc; font-family: "Avenir Heavy"; color: #000000;} .DashboardTheme .jimu-widget-business-analyst .jimu-tab3 .tab-item-td.jimu-state-active {color: #FFFFFF;} .DashboardTheme.light .jimu-widget-business-analyst .jimu-tab3 .tab-item-td.jimu-state-active {color: #000000;} .jimu-widget-business-analyst .tabs .titles {font-weight: bold; font-family: "Avenir Medium"; font-size: 14px; margin: 20px 0 10px 0;} .jimu-widget-business-analyst .tabs .hide{display: none;} .jimu-widget-business-analyst .tabs .indent{margin-left: 20px; margin-top: 10px;} .jimu-widget-business-analyst .tabs .unit-item{margin: 15px 5px 5px 5px; line-height: 18px; height: 18px; vertical-align: middle;} .jimu-widget-business-analyst .tabs .clearFix {*overflow: hidden; *zoom: 1;} .jimu-widget-business-analyst .tabs .clearFix:after {display: table; content: ""; width: 0; clear: both;} .jimu-widget-business-analyst .tabs .view{height: 100%; overflow-y: auto;} .jimu-widget-business-analyst .tabs .jimu-tab3\x3e.jimu-viewstack{padding-bottom: 30px;} .claro .jimu-widget-business-analyst .dijitTextBox, .claro .esriGEReportPlayer .esriGEPlayerToolbar .dijitTextBox {height: 30px;} .claro .jimu-widget-business-analyst .ui-icon {background-image: inherit;} .business-analyst-search-suggestions-overflow {overflow: visible !important;} .claro .jimu-widget-business-analyst .arcgisSearch .searchClear {top: 2px;} .jimu-widget-business-analyst .validationErrorMessage {color: #FF0000; margin-top: 10px;} .jimu-widget-business-analyst .validationErrorMessage.hidden {display: none;} .jimu-widget-business-analyst .invalidValue {outline: 3px solid #FF0000;} .jimu-widget-business-analyst .business-analyst-run-reports-page .dijitTextBox, .esriGEReportPlayer .playerToolbar_infographicsSelectDiv .dijitTextBox {width: 20em;}',
"*now":function(t){t(['dojo/i18n!*preload*widgets/BusinessAnalyst/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define(["dojo/_base/declare","dojo/dom-class","dojo/query","jimu/BaseWidget","./BAWizard"],function(t,q,l,k,f){return t([k],{name:"BusinessAnalyst",baseClass:"jimu-widget-business-analyst",reportDropDown:null,infographicDropDown:null,tradeAreaGraphics:[],selectedPoint:{tradeAreas:[]},postCreate:function(){this.inherited(arguments);this.initializeNewConfigValues();this.baWizard=(new f({appConfig:this.appConfig,map:this.map,nls:this.nls,config:this.config})).placeAt(this.wizardContainer)},startup:function(){this.baWizard.resize();
l(".jimu-widget-business-analyst").parents(".jimu-widget-frame.jimu-container")[0]&&q.add(l(".jimu-widget-business-analyst").parents(".jimu-widget-frame.jimu-container")[0],"business-analyst-search-suggestions-overflow");l(".jimu-widget-business-analyst").parents(".jimu-panel.jimu-on-screen-widget-panel")[0]&&q.add(l(".jimu-widget-business-analyst").parents(".jimu-panel.jimu-on-screen-widget-panel")[0],"business-analyst-search-suggestions-overflow")},resize:function(){this.baWizard&&this.baWizard.resize()},
onClose:function(){this.baWizard._featureUnselected()},onOpen:function(){this.baWizard.refreshPage()},initializeNewConfigValues:function(){"undefined"===typeof this.config.exportInfographicsPrintOption&&(this.config.exportInfographicsPrintOption=!0);"undefined"===typeof this.config.exportInfographicsImageOption&&(this.config.exportInfographicsImageOption=!0);"undefined"===typeof this.config.exportInfographicsPDFOption&&(this.config.exportInfographicsPDFOption=!0);"undefined"===typeof this.config.exportInfographicsDynamicHTMLOption&&
(this.config.exportInfographicsDynamicHTMLOption=!0);"undefined"===typeof this.config.firstPageText&&(this.config.firstPageText="\x3cbr\x3e\x3cdiv\x3e"+this.nls.widgetDescription+"\x3c/div\x3e\x3cbr\x3e\x3cdiv\x3e"+this.nls.selectPointOrPolygon+"\x3c/div\x3e");"undefined"===typeof this.config.searchTextBoxOption&&(this.config.searchTextBoxOption=!0);"undefined"===typeof this.config.dropPinOption&&(this.config.dropPinOption=!0);"undefined"===typeof this.config.drawPolygonOption&&(this.config.drawPolygonOption=
!0);"undefined"===typeof this.config.drawFreehandPolygonOption&&(this.config.drawFreehandPolygonOption=!0)}})});