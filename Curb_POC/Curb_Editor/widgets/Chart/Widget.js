// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/StatisticsChart":function(){define("dojo/on dojo/Evented dojo/Deferred dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dijit/popup dijit/_WidgetBase dijit/TooltipDialog dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/StatisticsChart.html esri/lang esri/graphic esri/symbols/jsonUtils esri/layers/FeatureLayer jimu/utils jimu/clientStatisticsUtils jimu/dijit/Chart jimu/dijit/_StatisticsChartSettings dojo/keys dijit/focus jimu/dijit/LoadingIndicator".split(" "),
function(H,n,y,v,k,r,p,a,c,e,h,b,d,f,l,t,z,B,x,D,F,I,K,L,A){return v([h,d,f,n],{baseClass:"jimu-dijit-statistics-chart",templateString:l,theme:"light",noMoreThanOneChartClassName:"no-more-than-one-chart",hasTitleClassName:"has-title",charts:null,paramsDijits:null,tooltipDialogs:null,currentChartIndex:-1,tempGraphics:null,maxPreviewFeaturesCount:20,tooltipColor:"green",floatNumberFieldDecimalPlace:null,popupFieldInfosObj:null,config:null,features:null,featureLayer:null,map:null,fontColor:"#333333",
isBigPreview:!1,showSettingIcon:!1,showZoomIcon:!1,zoomToFeaturesWhenClick:!1,initialChartIndex:0,postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart;k.mixin(this.nls,window.jimuNls.common);this.charts=[];this.paramsDijits=[];this.tooltipDialogs=[];this.isBigPreview&&(this.showZoomIcon=!1)},postCreate:function(){this.inherited(arguments);this.showSettingIcon?(this.own(H(document.body,"click",k.hitch(this,this._onDocumentBodyClick))),this.own(H(this.settingsIcon,"keydown",k.hitch(this,
function(g){g.keyCode===L.ENTER?this._onSettingsIconClicked():g.keyCode===L.TAB&&g.shiftKey&&(g.preventDefault(),A.focus(this.pagingUl))})))):p.destroy(this.settingsIcon);this.showZoomIcon?(this.own(H(this.zoominIcon,"click",k.hitch(this,function(){this.emit("zoomin")}))),this.own(H(this.zoominIcon,"keydown",k.hitch(this,function(g){g.keyCode===L.ENTER&&this.emit("zoomin")})))):p.destroy(this.zoominIcon);this.isBigPreview&&(this.chartRealContainer.style.maxHeight="auto",p.addClass(this.domNode,"big-preview"));
this.zoominIcon.title=this.nls.enlarge;this.settingsIcon.title=this.nls.setting;p.addClass(this.domNode,this.noMoreThanOneChartClassName)},destroy:function(){this.clear();this.inherited(arguments)},resize:function(g,m){if(0<g||"string"===typeof g&&0<g.length)this.domNode.style.width=g;if(0<m||"string"===typeof m&&0<m.length)this.domNode.style.height=m;this._resize()},resizeByParent:function(){this.domNode.style.width="100%";this.domNode.style.height="100%";this._resize()},_resize:function(){this._calculateChartBox();
0<=this.currentChartIndex&&this._showChart(this.currentChartIndex)},createServerStatisticsCharts:function(g,m,q){var u=g.fields,w={type:"Table",fields:[]},C=k.clone(q),G=q.mode;"category"===G?(C.valueFields=[],w.fields=r.map(q.valueFields,k.hitch(this,function(J){var E=q.operation;"average"===E&&(E="avg");var M=J+"_"+D.upperCaseString(E);J=J+"_"+D.upperCaseString(E);C.valueFields.push(M);return{name:M,type:"esriFieldTypeDouble",alias:J}})),r.some(u,k.hitch(this,function(J){return J.name===q.categoryField?
(w.fields.push(J),!0):!1}))):"count"===G?(C.mode="feature",C.labelField=q.categoryField,g=g.fields[0].name+"_count",C.valueFields=[g],r.some(u,k.hitch(this,function(J){return J.name===q.categoryField?(w.fields.push(J),!0):!1})),w.fields.push({name:g,type:"esriFieldTypeInteger",alias:this.nls.count})):"field"===G&&(C.valueFields=[],w.fields=r.map(q.valueFields,k.hitch(this,function(J){var E=q.operation;"average"===E&&(E="avg");var M=J+"_"+D.upperCaseString(E);J=J+"_"+D.upperCaseString(E);C.valueFields.push(M);
return{name:M,type:"esriFieldTypeDouble",alias:J}})));return this._getLoadedLayer(w).then(k.hitch(this,function(J){this._createChartsAsync({featureLayer:J,features:m,config:C})}))},createClientCharts:function(g,m,q,u,w){w&&(this.featureLayerForChartSymbologyChart=w);return this._getLoadedLayer(g).then(k.hitch(this,function(C){this._createChartsAsync({featureLayer:C,features:m,config:q,popupFieldInfosObj:u})}))},_getLoadedLayer:function(g){var m=new y,q=null;q="string"===typeof g?new x(g):"esri.layers.FeatureLayer"===
g.declaredClass?g:new x({layerDefinition:k.clone(g),featureSet:null});q.loaded?m.resolve(q):this.own(H(q,"load",k.hitch(this,function(){m.resolve(q)})));return m},_createChartsAsync:function(g){setTimeout(k.hitch(this,function(){this._createCharts(g)}),0)},_createCharts:function(g){try{this.loading.hide();this.clear();var m=!1;g.features&&(m=!!g.features.isSelectedFeatures,g.features=r.filter(g.features,k.hitch(this,function(E){return!!E.attributes})));this.config=g.config;this.features=g.features;
this.featureLayer=g.featureLayer;this.popupFieldInfosObj=g.popupFieldInfosObj?g.popupFieldInfosObj:{};this.config.highLightColor||(this.config.highLightColor=m?"#ff0000":"#00ffff");this._calculateDecimalPlaceForFloatField();this.chartTitle.innerHTML=D.stripHTML(this.config.name||"");this.chartTitle.title=this.chartTitle.innerHTML;this.chartTitle.title?p.addClass(this.domNode,this.hasTitleClassName):p.removeClass(this.domNode,this.hasTitleClassName);if(this.config.description){p.setStyle(this.descriptionContainer,
"display","block");var q=D.stripHTML(this.config.description);this.descriptionContainer.innerHTML=q;this.descriptionContainer.title=q}else this.descriptionContainer.innerHTML="",this.descriptionContainer.title="",p.setStyle(this.descriptionContainer,"display","none");1>=g.config.types.length?p.addClass(this.domNode,this.noMoreThanOneChartClassName):p.removeClass(this.domNode,this.noMoreThanOneChartClassName);var u=this._calculateChartBox(),w=u.w+"px",C=u.h+"px",G={};(g.config&&g.config.types||[]).forEach(function(E){if(E=
E&&E.type)"column"===E?G.column=this.nls.columnChart:"bar"===E?G.bar=this.nls.barChart:"line"===E?G.line=this.nls.lineChart:"pie"===E&&(G.pie=this.nls.pieChart)}.bind(this));var J=r.map(g.config.types,k.hitch(this,function(E){var M=p.create("div",{"class":"chart-div",style:{width:w,height:C}},this.chartRealContainer),N=E.type,O=p.toDom("\x3cli class\x3d'paging-li'\x3e\x3ca tabindex\x3d'0' role\x3d'link' aria-label\x3d'"+G[N]+"'class\x3d'paging-a'\x3e\x3c/a\x3e\x3c/li\x3e");p.place(O,this.pagingUl);
E=E.display;E.backgroundColor||(E.backgroundColor="transparent");E.hasOwnProperty("showLegend")||(E.showLegend=!1);E.legendTextColor||(E.legendTextColor=this.fontColor);"pie"===N?(E.hasOwnProperty("showDataLabel")||(E.showDataLabel=!0),E.dataLabelColor||(E.dataLabelColor=this.fontColor)):(E.hasOwnProperty("showHorizontalAxis")||(E.showHorizontalAxis=!0),E.horizontalAxisTextColor||(E.horizontalAxisTextColor=this.fontColor),E.hasOwnProperty("showVerticalAxis")||(E.showVerticalAxis=!0),E.verticalAxisTextColor||
(E.verticalAxisTextColor=this.fontColor));return M}));m=null;"feature"===this.config.mode?m=this._createFeatureModeCharts(g,J):"category"===this.config.mode?m=this._createCategoryModeCharts(g,J):"count"===this.config.mode?m=this._createCountModeCharts(g,J):"field"===this.config.mode&&(m=this._createFieldModeCharts(g,J));this.charts=m.charts;this.paramsDijits=m.paramsDijits;this.tooltipDialogs=r.map(this.paramsDijits,k.hitch(this,function(E){var M=p.create("div");E.placeAt(M);return new b({content:M})}));
g=0;0<=this.initialChartIndex&&this.charts.length>=this.initialChartIndex+1&&(g=this.initialChartIndex);this._showChart(g)}catch(E){console.error(E)}},_calculateChartBox:function(){var g=!!this.config.description,m=p.getContentBox(this.domNode).h,q=m;0<this.resultsHeader.clientHeight&&(q=p.getMarginBox(this.resultsHeader),q=m-q.h);var u=0;g&&(u=parseInt(.15*m,10),q-=u);g=60;q<g&&(g=q);p.setStyle(this.leftArrow,"height",g+"px");p.setStyle(this.rightArrow,"height",g+"px");p.setStyle(this.chartRealContainer,
"height",q+"px");p.setStyle(this.descriptionContainer,"max-height",u+"px");p.setStyle(this.faildRenderInfo,"height",q+"px");return p.getContentBox(this.chartRealContainer)},_calculateDecimalPlaceForFloatField:function(){this.floatNumberFieldDecimalPlace={};var g=[];this.config.labelField&&g.push(this.config.labelField);this.config.categoryField&&g.push(this.config.categoryField);this.config.valueFields&&(g=g.concat(this.config.valueFields));var m=r.filter(g,k.hitch(this,function(u){return this._isFloatNumberField(u)})),
q={};r.forEach(m,k.hitch(this,function(u){q[u]=[]}));(g=this.features)&&0<g.length&&r.forEach(g,k.hitch(this,function(u){var w=u.attributes;w&&r.forEach(m,k.hitch(this,function(C){var G=w[C];"number"===typeof G&&q[C].push(G)}))}));r.forEach(m,k.hitch(this,function(u){this.floatNumberFieldDecimalPlace[u]=0;var w=q[u];if(0<w.length)try{var C=this._getBestDecimalPlace(w);this.floatNumberFieldDecimalPlace[u]=C}catch(G){this.floatNumberFieldDecimalPlace[u]=0,console.error(G)}this.popupFieldInfosObj&&(w=
this.popupFieldInfosObj[u])&&w.format&&0<=w.format.places&&(this.floatNumberFieldDecimalPlace[u]=w.format.places)}))},_onDocumentBodyClick:function(g){if(0<=this.currentChartIndex&&this.tooltipDialogs){var m=this.tooltipDialogs[this.currentChartIndex];if(m){var q=!!m.isOpendNow;this._hideAllTooltipDialogs();var u=g.target||g.srcElement;u===this.leftArrow||u===this.rightArrow||p.hasClass(u,"paging-a")||p.hasClass(u,"paging-li")||(u===this.settingsIcon?q?this._hideTooltipDialog(m):this._showTooltipDialog(m):
(g=u===m.domNode,u=p.isDescendant(u,m.domNode),g||u?q?this._showTooltipDialog(m):this._hideTooltipDialog(m):this._hideTooltipDialog(m)))}else this._hideAllTooltipDialogs()}else this._hideAllTooltipDialogs()},_onSettingsIconClicked:function(){var g=this.tooltipDialogs[this.currentChartIndex];g&&(g.isOpendNow?(this._hideTooltipDialog(g),A.focus(this.settingsIcon)):(this._showTooltipDialog(g),(g=this.paramsDijits[this.currentChartIndex])&&A.focus(g.domNode)))},clear:function(){this.featureLayer=this.features=
this.config=null;this.chartTitle.innerHTML="";this.chartTitle.title="";this.currentChartIndex=-1;this.popupFieldInfosObj=this.floatNumberFieldDecimalPlace=null;a("li",this.pagingUl).removeClass("selected");this.charts||(this.charts=[]);this.paramsDijits||(this.paramsDijits=[]);this.tooltipDialogs||(this.tooltipDialogs=[]);for(var g=0;g<this.charts.length;g++)this.charts[g]&&this.charts[g].destroy(),this.charts[g]=null,this.paramsDijits[g]&&this.paramsDijits[g].destroy(),this.paramsDijits[g]=null,
this.tooltipDialogs[g]&&this.tooltipDialogs[g].destroy(),this.tooltipDialogs[g]=null;this.charts=[];this.paramsDijits=[];this.tooltipDialogs=[];p.empty(this.pagingUl);p.empty(this.chartRealContainer);p.empty(this.descriptionContainer);p.addClass(this.domNode,this.noMoreThanOneChartClassName)},_showFialdRenderInfo:function(){p.addClass(this.chartSection,"render-faild")},_hideFialdRenderInfo:function(){p.removeClass(this.chartSection,"render-faild")},_showChart:function(g){this.currentChartIndex=-1;
var m=a(".chart-div",this.chartRealContainer);m.style({display:"none"});var q=a("li",this.pagingUl);q.removeClass("selected");if(!(0>g)){if(m=m[g])this.currentChartIndex=g,p.setStyle(m,"display","block");(q=q[g])&&p.addClass(q,"selected");this.charts&&0<this.charts.length&&(q=this.charts[g])&&this._handlePieChartDisplay(q);if(!this.isBigPreview&&(q=null,this.charts&&0<this.charts.length&&(q=this.charts[g]))){g=this._calculateChartBox();var u=p.getContentBox(m);if(g.w!==u.w||g.h!==u.h)this.loading.show(),
u=g.w+"px",g=g.h+"px",p.setStyle(m,"width",u),p.setStyle(m,"height",g),q.resize(u,g),this.loading.hide()}}},_handlePieChartDisplay:function(g){var m=!1;g&&g.config&&"pie"===g.config.type&&(g=g.config.labels)&&150<g.length&&(m=!0);m?this._showFialdRenderInfo():this._hideFialdRenderInfo()},_hideAllTooltipDialogs:function(){this.tooltipDialogs&&0<this.tooltipDialogs.length&&r.forEach(this.tooltipDialogs,k.hitch(this,function(g){this._hideTooltipDialog(g)}))},_hideTooltipDialog:function(g){g&&(e.close(g),
g.isOpendNow=!1)},_showTooltipDialog:function(g){g&&(e.open({popup:g,around:this.settingsIcon}),g.isOpendNow=!0)},_onPagingUlKeydown:function(g){g.keyCode!==L.TAB||g.shiftKey||(g.preventDefault(),A.focus(this.settingsIcon));if(g.keyCode===L.RIGHT_ARROW||g.keyCode===L.DOWN_ARROW)this._onRightArrowClicked(g),this._focusPagingLink();if(g.keyCode===L.LEFT_ARROW||g.keyCode===L.UP_ARROW)this._onLeftArrowClicked(g),this._focusPagingLink()},_focusPagingLink:function(){var g=a(".paging-li:nth-child("+(this.currentChartIndex+
1)+")",this.pagingUl)[0];(g=g&&g.firstChild)&&A.focus(g)},_onPagingUlClicked:function(g){g.stopPropagation();this._hideAllTooltipDialogs();g=g.target||g.srcElement;if("a"===g.tagName.toLowerCase()){var m=a("a",this.pagingUl);g=r.indexOf(m,g);0<=g&&this._showChart(g)}},_onLeftArrowClicked:function(g){g.stopPropagation();this._hideAllTooltipDialogs();g=(this.currentChartIndex-1+this.charts.length)%this.charts.length;0<=g&&this._showChart(g)},_onLeftArrowKeydown:function(g){g.keyCode===L.ENTER&&this._onLeftArrowClicked(g)},
_onRightArrowClicked:function(g){g.stopPropagation();this._hideAllTooltipDialogs();g=(this.currentChartIndex+1+this.charts.length)%this.charts.length;0<=g&&this._showChart(g)},_onRightArrowKeydown:function(g){g.keyCode===L.ENTER&&this._onRightArrowClicked(g)},_getHighLightMarkerSymbol:function(){var g=B.fromJson({color:[255,255,255,0],size:18,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSSquare",outline:{color:[0,0,128,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}});g.setSize(30);
g.outline.setColor(new c(this.config.highLightColor));return g},_getHighLightLineSymbol:function(g){var m=B.fromJson({color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"});m.setColor(new c(g||this.config.highLightColor));return m},_getDefaultHighLightFillSymbol:function(){var g=B.fromJson({color:[0,255,255,128],outline:{color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"});g.outline.setColor(new c(this.config.highLightColor));return g},
_getVisualVariableByType:function(g,m){return m&&(m=r.filter(m,function(q){return q.type===g&&!q.target}),m.length)?m[0]:null},_getSymbolByRenderer:function(g,m){var q=this._getDefaultHighLightFillSymbol(),u=this._getVisualVariableByType("colorInfo",g.visualVariables);if(u){if(g=g.getColor(m,{colorInfo:u}))g=k.clone(g),q.setColor(g)}else q=g.getSymbol(m);return q},_getHighLightFillSymbol:function(g,m,q){var u=null,w=m.symbol;u=g.renderer;!w&&u&&(w=this._getSymbolByRenderer(u,m));w&&"function"===typeof w.setOutline?
(u=B.fromJson(w.toJson()),m=1.5,w.outline&&0<w.outline.width&&(m=w.outline.width+1),q=this._getHighLightLineSymbol(q?"#ff0000":this.config.highLightColor),q.setWidth(m),u.setOutline(q)):u=this._getDefaultHighLightFillSymbol();return u},_zoomToGraphics:function(g){if(this.map&&this.featureLayer&&this.featureLayer.visible){var m;g&&0<g.length&&(m=r.filter(g,function(q){q=q.geometry;return"point"!==q.type?!0:D.isVaildPointGeometry(q)}.bind(this)));if(m&&0<m.length){g=D.toFeatureSet(m);try{D.zoomToFeatureSet(this.map,
g)}catch(q){console.error(q)}}}},_removeTempGraphics:function(){if(this.featureLayer&&this.tempGraphics&&0<this.tempGraphics.length)for(;0<this.tempGraphics.length;)this.featureLayer.remove(this.tempGraphics[0]),this.tempGraphics.splice(0,1);this.tempGraphics=null},_mouseOverChartItem:function(g){this._removeTempGraphics();r.forEach(g,k.hitch(this,function(w){w._originalSymbol=w.symbol}));if(this.featureLayer&&this.featureLayer.getMap()&&this.featureLayer.visible){var m=D.getTypeByGeometryType(this.featureLayer.geometryType),
q=null;if("point"===m)q=this._getHighLightMarkerSymbol(),this.tempGraphics=[],r.forEach(g,k.hitch(this,function(w){w=new z(w.geometry,q);this.tempGraphics.push(w);this.featureLayer.add(w)}));else if("polyline"===m)q=this._getHighLightLineSymbol(),r.forEach(g,k.hitch(this,function(w){w.setSymbol(q)}));else if("polygon"===m){var u=this.featureLayer.getSelectedFeatures()||[];r.forEach(g,k.hitch(this,function(w){var C=0<=u.indexOf(w);C=this._getHighLightFillSymbol(this.featureLayer,w,C);w.setSymbol(C)}));
this.features.length!==g.length&&"polygon"===m&&(r.forEach(g,k.hitch(this,function(w){this.featureLayer.remove(w)})),r.forEach(g,k.hitch(this,function(w){this.featureLayer.add(w)})))}}},_mouseOutChartItem:function(g){this._removeTempGraphics();r.forEach(g,k.hitch(this,function(m){m.setSymbol(m._originalSymbol||null)}))},_isNumber:function(g){return"[object number]"===Object.prototype.toString.call(g).toLowerCase()},_tryLocaleNumber:function(g,m){var q=g;if(t.isDefined(g)&&isFinite(g))try{if(m&&this._isNumberField(m)){var u=
this.popupFieldInfosObj[m];var w=u&&k.exists("format.places",u)?D.localizeNumberByFieldInfo(g,u):D.localizeNumber(g)}else w=g;"string"===typeof w&&(q=w)}catch(C){console.error(C)}return q+""},_getBestDisplayValue:function(g,m){var q=this._tryLocaleNumber(m,g);if(this.featureLayer.typeIdField===g){var u=this.featureLayer.types;if(u&&0<u.length&&(u=r.filter(u,k.hitch(this,function(w){return w.id===m})),0<u.length))return q=u[0].name}(g=this._getFieldInfo(g))&&g.domain&&(g=g.domain.codedValues)&&0<g.length&&
r.some(g,function(w){return w.code===m?(q=w.name,!0):!1});return q},_getFieldAliasArray:function(g){return r.map(g,k.hitch(this,function(m){return this._getFieldAlias(m)}))},_getFieldAlias:function(g){var m=g;(g=this._getFieldInfo(g))&&(m=g.alias||m);return m},_getFieldInfo:function(g){if(this.featureLayer)for(var m=this.featureLayer.fields,q=0;q<m.length;q++)if(m[q].name===g)return m[q];return null},_isNumberField:function(g){var m=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle",
"esriFieldTypeDouble"];return r.some(this.featureLayer.fields,k.hitch(this,function(q){return q.name===g&&0<=m.indexOf(q.type)}))},_isFloatNumberField:function(g){var m=["esriFieldTypeSingle","esriFieldTypeDouble"];return r.some(this.featureLayer.fields,k.hitch(this,function(q){return q.name===g&&0<=m.indexOf(q.type)}))},_isDateField:function(g){return(g=this._getFieldInfo(g))?"esriFieldTypeDate"===g.type:!1},_getBestDecimalPlace:function(g){var m=0,q={};r.forEach(g,function(C){C=C.toString().split(".");
var G=null;1===C.length?G=0:2===C.length&&(G=C[1].length);null!==G&&(q[G]=void 0===q[G]?1:q[G]+1)});g=null;for(var u in q){u=parseInt(u,10);var w=q[u];g?w>g.value&&(g={key:u,value:w}):g={key:u,value:w}}g&&(m=parseInt(g.key,10));return m},_getFloatNumberFieldDecimalPlace:function(g){var m=0;this.floatNumberFieldDecimalPlace&&(g=this.floatNumberFieldDecimalPlace[g],"number"===typeof g&&(m=g));return m},_getBestValueForFloatNumberField:function(g,m){m=this._getFloatNumberFieldDecimalPlace(m);g=g.toFixed(m);
return parseFloat(g)},_getColors:function(g,m){var q=[];g=k.clone(g);if(2===g.colors.length)q=this._createGradientColors(g.colors[0],g.colors[g.colors.length-1],m);else{for(var u=Math.ceil(m/g.colors.length),w=0;w<u;w++)q=q.concat(g.colors);q=q.slice(0,m)}return q},_createGradientColors:function(g,m,q){var u=[];g=new c(g);var w=new c(m);m=(w.r-g.r)/q;var C=(w.g-g.g)/q;w=(w.b-g.b)/q;for(var G=new c,J=0,E=0,M=0,N=0;N<q;N++)J=parseInt(g.r+m*N,10),E=parseInt(g.g+C*N,10),M=parseInt(g.b+w*N,10),G.setColor([J,
E,M]),u.push(G.toHex());return u},_createParamsDijit:function(g,m,q){g=new K({isInWidget:this.map?!0:!1,type:g,config:m});this.own(H(g.domNode,"keydown",k.hitch(this,function(u){u.keyCode===L.ESCAPE&&this._onSettingsIconClicked()})));g._updateLegendDisplayByMode(q);return g},_createJimuChart:function(g,m,q,u,w){var C=w.type,G=this._createParamsDijit(C,w.display,m),J=G.getConfig();J&&k.mixin(w.display,J);var E=this._getBasicChartOptionsByStatisticsInfo(m,q,u,C);this._udpateJimuChartDisplayOptions(E,
w);var M=new I({chartDom:g,config:{type:C||"column",labels:[],series:[{data:[]}]}});M.placeAt(g);M.resize();M.updateConfig(E);this._bindChartEvent(M,m,u);this.showSettingIcon&&this.own(H(G,"change",k.hitch(this,function(){G.showShelter();if(M){var N=G.getConfig();k.mixin(w.display,N);this._udpateJimuChartDisplayOptions(E,w);M.updateConfig(E)}G.hideShelter()})));return[M,G]},_udpateJimuChartDisplayOptions:function(g,m){var q=m.type;m=m.display;this._settingAxisDisplay(g,m,q);g.type=q;g.dataZoom=["inside",
"slider"];g.confine=!0;g.backgroundColor=m.backgroundColor;g.color=m.colors;var u={show:m.showLegend,textStyle:{}};m.legendTextColor&&(u.textStyle.color=m.legendTextColor);m.legendTextSize&&(u.textStyle.fontSize=m.legendTextSize);g.legend=u;u={show:m.showDataLabel,textStyle:{}};m.dataLabelColor&&(u.textStyle.color=m.dataLabelColor);m.dataLabelSize&&(u.textStyle.fontSize=m.dataLabelSize);g.dataLabel=u;"pie"===q&&(g.innerRadius=m.innerRadius);return g},_settingAxisDisplay:function(g,m,q){if(!(0>["column",
"bar","line"].indexOf(q))){var u={show:m.showHorizontalAxis,textStyle:{}};m.horizontalAxisTextColor&&(u.textStyle.color=m.horizontalAxisTextColor);m.horizontalAxisTextSize&&(u.textStyle.fontSize=m.horizontalAxisTextSize);g.xAxis=u;u={show:m.showVerticalAxis,textStyle:{}};m.verticalAxisTextColor&&(u.textStyle.color=m.verticalAxisTextColor);m.verticalAxisTextSize&&(u.textStyle.fontSize=m.verticalAxisTextSize);g.yAxis=u;m.stack||(m.stack=!1);if("column"===q||"bar"===q||"line"===q&&m.area)g.stack=m.stack;
"line"!==q||m.area||(m.area=!1);"line"===q&&(g.area=m.area);g.axisPointer=!0;g.scale=!1}},_getBasicChartOptionsByStatisticsInfo:function(g,m,q,u){return"feature"===g||"category"===g?this._getCategoryModeChartOptionsByStatisticsInfo(m,q,u):"count"===g?this._getCountModeChartOptionsByStatisticsInfo(q,u):"field"===g?this._getFieldModeChartOptionByStatisticsInfo(q,u):null},_bindChartEvent:function(g,m,q){if(this.map&&0!==q.length){var u=k.hitch(this,function(C){if("series"===C.componentType){var G=null;
if("field"===m)G=this.features;else{var J=q[C.dataIndex];J&&(G=J.dataFeatures)}G&&("mouseover"===C.type?this._mouseOverChartItem(G):"mouseout"===C.type?this._mouseOutChartItem(G):"click"===C.type&&this.zoomToFeaturesWhenClick&&this._zoomToGraphics(G))}}),w=[{name:"mouseover",callback:u},{name:"mouseout",callback:u}];this.zoomToFeaturesWhenClick&&w.push({name:"click",callback:u});r.forEach(w,k.hitch(this,function(C){g.chart.on(C.name,C.callback)}))}},_createFeatureModeCharts:function(g,m){var q=[],
u=[],w=g.config,C={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:g.features,labelField:w.labelField,valueFields:w.valueFields,sortOrder:w.sortOrder,maxLabels:w.maxLabels,useLayerSymbology:w.useLayerSymbology};this.featureLayerForChartSymbologyChart&&(C.featureLayerForChartSymbologyChart=this.featureLayerForChartSymbologyChart);var G=F.getFeatureModeStatisticsInfo(C);r.forEach(w.types,k.hitch(this,function(J,E){try{var M=this._createJimuChart(m[E],"feature",
C,G,J);q.push(M[0]);u.push(M[1])}catch(N){console.error(N)}}));return{charts:q,paramsDijits:u}},_createCategoryModeCharts:function(g,m){var q=[],u=[],w=g.config,C={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:g.features,categoryField:w.categoryField,valueFields:w.valueFields,operation:g.config.operation,sortOrder:w.sortOrder,dateConfig:w.dateConfig,maxLabels:w.maxLabels,nullValue:w.nullValue,useLayerSymbology:w.useLayerSymbology,splitField:w.splitField};this.featureLayerForChartSymbologyChart&&
(C.featureLayerForChartSymbologyChart=this.featureLayerForChartSymbologyChart);var G=F.getCategoryModeStatisticsInfo(C);r.forEach(w.types,k.hitch(this,function(J,E){try{var M=this._createJimuChart(m[E],"category",C,G,J);q.push(M[0]);u.push(M[1])}catch(N){console.error(N)}}));return{charts:q,paramsDijits:u}},_getSplitedSeriesForCategoryOrCountMode:function(g,m){var q={type:m,labels:[],series:[]},u=[];g.forEach(function(C){if(C=C.splitedValueFields)C=C.map(function(G){return G.field}),u=u.concat(C)});
var w=D.uniqueArray(u);q.series=r.map(w,k.hitch(this,function(C){for(var G=[],J=0;J<g.length;J++)G[J]=null;return{name:C,type:m,data:G}}));r.forEach(g,k.hitch(this,function(C,G){var J="";C.category?J=C.category:C.fieldValue&&(J=C.fieldValue);q.labels.push(J);C.splitedValueFields.forEach(function(E){q.series.forEach(function(M){if(M.name===E.field)if("undefined"!==typeof C.color){var N=this._getSerieData(C,E.value);M.data[G]=N}else M.data[G]=E.value}.bind(this))}.bind(this))}));return q},_getCategoryModeChartOptionsByStatisticsInfo:function(g,
m,q){g=this._getFieldAliasArray(g.valueFields);var u=null;u={type:q,labels:[],series:[]};u.series=r.map(g,k.hitch(this,function(w){return{name:w,type:q,data:[]}}));r.forEach(m,k.hitch(this,function(w){u.labels.push(w.category);for(var C=0;C<w.valueFields.length;C++){var G=w.valueFields[C];"undefined"!==typeof w.color?(G=this._getSerieData(w,G),u.series[C].data.push(G)):u.series[C].data.push(G)}}));return u},_getSeriesOfRadar:function(g){g=g.map(function(m){return{name:m.category,value:m.valueFields}});
return[{type:"radar",data:g}]},_isAllFalseColor:function(g){return g.every(function(m){return!m.color})},_getSerieData:function(g,m){g.color||(g.color="transparent");return{value:m,itemStyle:{normal:{color:g.color},emphasis:{color:g.color}}}},_createCountModeCharts:function(g,m){var q=[],u=[],w=g.config,C={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:g.features,categoryField:w.categoryField,sortOrder:w.sortOrder,dateConfig:w.dateConfig,maxLabels:w.maxLabels,
useLayerSymbology:w.useLayerSymbology,splitField:w.splitField};this.featureLayerForChartSymbologyChart&&(C.featureLayerForChartSymbologyChart=this.featureLayerForChartSymbologyChart);var G=F.getCountModeStatisticsInfo(C);r.forEach(w.types,k.hitch(this,function(J,E){try{var M=this._createJimuChart(m[E],"count",C,G,J);q.push(M[0]);u.push(M[1])}catch(N){console.error(N)}}));return{charts:q,paramsDijits:u}},_getCountModeChartOptionsByStatisticsInfo:function(g,m){var q={type:m,labels:[],series:[{name:"",
type:m,data:[]}]};r.forEach(g,k.hitch(this,function(u){var w=u.count;q.labels.push(u.fieldValue);"undefined"!==typeof u.color?(u=this._getSerieData(u,w),q.series[0].data.push(u)):q.series[0].data.push(w)}));return q},_createFieldModeCharts:function(g,m){var q=[],u=[],w=g.config,C={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:g.features,valueFields:w.valueFields,operation:w.operation,sortOrder:w.sortOrder,maxLabels:w.maxLabels,nullValue:w.nullValue},G=F.getFieldModeStatisticsInfo(C);
r.forEach(w.types,k.hitch(this,function(J,E){try{var M=this._createJimuChart(m[E],"field",C,G,J);q.push(M[0]);u.push(M[1])}catch(N){console.error(N)}}));return{charts:q,paramsDijits:u}},_getFieldModeChartOptionByStatisticsInfo:function(g,m){var q={type:m,labels:[],series:[{name:"",type:m,data:[]}]};r.forEach(g,k.hitch(this,function(u){var w=this._getFieldAlias(u.label);q.labels.push(w);q.series[0].data.push(u.value)}));return q}})})},"jimu/clientStatisticsUtils":function(){define(["dojo/_base/lang",
"moment/moment","./_chartHelpUtils","jimu/utils","libs/moment/twix"],function(H,n,y,v){window.makeTwix&&window.makeTwix(n);return{getClietStatisticsData:function(k){var r=k.mode;if("feature"===r)return this.getFeatureModeStatisticsData(k);if("category"===r)return this.getCategoryModeStatisticsData(k);if("count"===r)return this.getCountModeStatisticsData(k);if("field"===r)return this.getFieldModeStatisticsData(k)},sortClientStatisticsData:function(k,r,p){return this.sortStatisticsData(k,r.mode,r.sortOrder,
r.clusterField,r.valueFields,p)},getDataForMaxLabels:function(k,r){return k&&k.length&&"number"===typeof r&&0<r&&r<k.length?k.slice(0,r):k},getFeatureModeStatisticsData:function(k){var r=k.features,p=k.clusterField,a=k.valueFields;k=void 0!==k.showNullLabelData?k.showNullLabelData:!0;var c=this.separateFeaturesWhetherFieldValueNull(p,r);r=c.notNullLabelFeatures;c=c.nullLabelFeatures;r=k?r.concat(c):r;k=[];return k=r.map(function(e){var h=e.attributes,b=h&&h[p];b=this.convertingNullOrUndefinedAsPlaceholders(b);
e={label:b,values:[],features:[e]};e.values=a.map(function(d){return h[d]});return e}.bind(this))},getCategoryModeStatisticsData:function(k){function r(f){var l=[],t=null;for(z in f){t=f[z];var z=this.keepFieldValueType(z,t.type,e);var B=this.calcValuesByFeaturesForCatetoryMode(a,t,p,c,b);l.push({label:z,values:B,features:t.features,unit:t.unit})}return l}var p=k.hasStatisticsed,a=k.valueFields,c=k.operation,e=k.dateConfig,h=void 0!==k.showNullLabelData?k.showNullLabelData:!0,b=k.nullValue,d=[];d=
this.getCluseringObj(k.clusterField,k.features,e);k=d.nullLabel;d=r.call(this,d.notNullLabel);k=r.call(this,k);return d=h?d.concat(k):d},getCountModeStatisticsData:function(k){function r(h){var b=[],d=null;for(l in h){d=h[l];var f=this.calcValuesByFeaturesForCountMode(d,e);var l=this.keepFieldValueType(l,d.type,p);b.push({label:l,values:f,features:d.features,unit:d.unit})}return b}var p=k.dateConfig,a=void 0!==k.showNullLabelData?k.showNullLabelData:!0,c=[],e=k.hasStatisticsed&&!p;c=this.getCluseringObj(k.clusterField,
k.features,p);k=c.nullLabel;c=r.call(this,c.notNullLabel);k=r.call(this,k);return c=a?c.concat(k):c},calcValuesByFeaturesForCountMode:function(k,r){return r?k.features.map(function(p){var a=(p=p.attributes)&&p.STAT_COUNT;"undefined"===typeof a&&(a=p.stat_count);return a}.bind(this)):[k.count]},getFieldModeStatisticsData:function(k){var r=k.hasStatisticsed,p=k.features,a=k.operation,c=k.nullValue,e=[];return e=k.valueFields.map(H.hitch(this,function(h){var b=this.getValuesByValueFieldForFieldMode(h,
p,r,a);b=this.calcValueByOperation(b,a,c);return{label:h,values:[b]}}))},getValueFromAttributes:function(k,r,p,a){if(k)return p="average"===p?"avg":p,a?(a=v.upperCaseString(r+"_"+p),a=k[a],"undefined"===typeof a&&(a=v.lowerCaseString(r+"_"+p),a=k[a])):a=k[r],a},getValuesByValueFieldForFieldMode:function(k,r,p,a){return r.map(H.hitch(this,function(c){return this.getValueFromAttributes(c.attributes,k,a,p)}))},sortStatisticsData:function(k,r,p,a,c,e){function h(d,f,l){if("category"===f)if(l.isLabelAxis)l.isLabelAxis&&
(t=d.label);else if(l.field||1!==d.values.length){l=c.indexOf(l.field);var t=d.values[l]}else t=d.values[0];else if("count"===f)t=d.label,t=l.isLabelAxis?t:d.values[0];else if("field"===f)t=l.isLabelAxis?d.label:d.values[0];else if("feature"===f){var z=l.field;d&&d.features&&d.features[0]&&(f=d.features[0].attributes)&&(l.isLabelAxis?t=f[a]:z?t=f[z]:d.values.length&&(t=d.values[0]))}return t}if(!p)return k;var b=p.isAsc;if(!Array.isArray(k))return k;k.sort(function(d,f){d=h(d,r,p);f=h(f,r,p);if(p.isLabelAxis&&
e&&"field"!==r){var l={};l[a]=d;l=v.getDisplayValueForCodedValueOrSubtype(e,a,l);var t={};t[a]=f;t=v.getDisplayValueForCodedValueOrSubtype(e,a,t);l.isCodedValueOrSubtype&&t.isCodedValueOrSubtype&&(d=l.displayValue,f=t.displayValue)}"_NULL\x26UNDEFINED_"===d&&(d=Infinity);"_NULL\x26UNDEFINED_"===f&&(f=Infinity);v.isNumberOrNumberString(d)&&(d=Number(d));v.isNumberOrNumberString(f)&&(f=Number(f));l=d>f?b:!b;Infinity===d?l=b:Infinity===f&&(l=!b);t=0;d!==f&&(t=l?1:-1);return t}.bind(this));return k},
convertingNullOrUndefinedAsPlaceholders:function(k){return null===k||void 0===k?"_NULL\x26UNDEFINED_":k},keepFieldValueType:function(k,r,p){"number"===r&&(k=Number(k));p&&"_NULL\x26UNDEFINED_"!==k&&(k=Number(k));return k},calcValuesByFeaturesForCatetoryMode:function(k,r,p,a,c){return k.map(function(e){e=this.getValuesByValueFieldForCategoryMode(e,r.features,p,a);return this.calcValueByOperation(e,a,c)}.bind(this))},getValuesByValueFieldForCategoryMode:function(k,r,p,a){return r.map(H.hitch(this,function(c){return this.getValueFromAttributes(c.attributes,
k,a,p)}))},_isNumber:function(k){return"[object number]"===Object.prototype.toString.call(k).toLowerCase()},_getDateUnit:function(k,r){var p=r;"automatic"===r&&(r=n(k[0]).local(),k=n(k[1]).local(),k=Math.round(k.diff(r,"minute",!0)),0<=k&&1>=k?p="second":1<k&&60>=k?p="minute":60<k&&1440>=k?p="hour":1440<k&&43200>=k?p="day":43200<k&&518400>=k?p="month":518400<k&&(p="year"));return p},_getTimeRange:function(k,r){var p=k.map(H.hitch(this,function(a){return(a=a.attributes)&&a[r]}));p=p.filter(function(a){return!!a});
k=Math.min.apply(Math,p);p=Math.max.apply(Math,p);return[k,p]},_getTimeTwixs:function(k,r,p){if(0>"year quarter month day hour minute second automatic".split(" ").indexOf(p))return console.log("Invaild data formatter: "+p),!1;k=this._getTimeRange(k,r);if(k[0]===k[1])return!1;p=this._getDateUnit(k,p);r=this.getStartTimeByUnit(k[0],p);r=n(r).local();k=n(k[1]).local();k=r.twix(k).split(1,p);r={startValue:k[k.length-1].end().valueOf(),endValue:Infinity};k.push(r);return{twixs:k,dateUnit:p}},getCluseringObj:function(k,
r,p){var a={},c={};p?(k=this.getClusteringObjForDateType(k,r,p),a=k.notNullLabel,c=k.nullLabel):(a=this.separateFeaturesWhetherFieldValueNull(k,r),r=a.nullLabelFeatures,a=this.getClusteringObjByField(a.notNullLabelFeatures,k),c=this.getClusteringObjByField(r,k));return{notNullLabel:a,nullLabel:c}},calcValueByOperation:function(k,r,p){if(k&&1===k.length){if(!p)return k[0];if(!this._isNumber(k[0]))return 0}if(0!==k.length){var a=0;"max"===r?a=-Infinity:"min"===r&&(a=Infinity);k=p?k.map(function(e){this._isNumber(e)||
(e=0);return e}.bind(this)):k.filter(function(e){return this._isNumber(e)}.bind(this));var c=0;k.forEach(H.hitch(this,function(e){c++;"average"===r||"sum"===r?a+=e:"max"===r?a=Math.max(a,e):"min"===r&&(a=Math.min(a,e))}));0<c?"average"===r&&(a/=c):a=null}else a=null;return a},getClusteringObjByField:function(k,r){var p={};k.forEach(H.hitch(this,function(a){var c=a.attributes;c=c&&c[r];var e=typeof c;c=this.convertingNullOrUndefinedAsPlaceholders(c);var h=null;p.hasOwnProperty(c)?(h=p[c],h.features.push(a),
h.count++):(h={count:1,features:[a],type:e},p[c]=h)}));return p},_removeNaNDataItem:function(k){return k.filter(function(r){var p=!1;r=r.category;"number"===typeof r&&(p=isNaN(r));return!p})},separateFeaturesWhetherFieldValueNull:function(k,r){var p=[],a=[];Array.isArray(r)&&(a=r.filter(function(c){var e=c.attributes;e=e&&e[k];if(null===e||void 0===e)p.push(c);else return!0}));return{nullLabelFeatures:p,notNullLabelFeatures:a}},getStartTimeByUnit:function(k,r){return n(k).startOf(r).utc().valueOf()},
_mosaicFieldNameWithOperatorAndUpper:function(k,r){return v.upperCaseString(k+"_"+r)},_mosaicFieldNameWithOperatorAndLower:function(k,r){return v.lowerCaseString(k+"_"+r)},getClusteringObjForDateType:function(k,r,p){function a(x,D,F){x[D]?(x=x[D],x.count+=F.count,x.features=x.features.concat(F.features)):x[D]=F}function c(x,D,F,I){D=Number(D);I=this.getStartTimeByUnit(D,I);x[I]?(x=x[I],x.count+=F.count,x.features=x.features.concat(F.features)):(F.originTime=D,x[I]=F)}function e(x,D,F){F[x[0].attributes[D]]=
{count:1,features:x};return F}var h=this.separateFeaturesWhetherFieldValueNull(k,r),b=h.notNullLabelFeatures;r={};r=this.getClusteringObjByField(h.nullLabelFeatures,k);h={};if(1===b.length)h=e.call(this,b,k,h,p);else if(0!==b.length){var d=this._getTimeTwixs(b,k,p.minPeriod);if(d){var f={},l=d.dateUnit;d.twixs.forEach(function(x){var D="undefined"!==typeof x.startValue?x.startValue:x.start().valueOf(),F="undefined"!==typeof x.endValue?x.endValue:x.end().valueOf(),I={unit:l,count:0,features:[]};b.forEach(H.hitch(this,
function(K){var L=K.attributes;L=L&&L[k];L>=D&&L<F&&(I.features.push(K),I.count++)}));p.isNeedFilled?a.call(this,f,D,I):0<I.count&&a.call(this,f,D,I)}.bind(this));d={};var t;for(t in f)if(f.hasOwnProperty(t)){var z=f[t];c.call(this,d,t,z,l)}for(t in d)if(d.hasOwnProperty(t)){z=d[t];var B=z.originTime;delete z.originTime;h[B]=z}}else h=e.call(this,b,k,h,p)}return{notNullLabel:h,nullLabel:r}},_mapOptions:function(k,r){"feature"===r?(r=k.labelField,delete k.labelField,k.clusterField=r,k.showNullLabelData=
!0):"category"===r?(r=k.categoryField,delete k.categoryField,k.clusterField=r,k.showNullLabelData=!0):"count"===r?(r=k.categoryField,delete k.categoryField,k.clusterField=r):"field"===r&&(k.showNullLabelData=!0);return k},_mapDataItemForStatisticsChart:function(k,r){var p,a,c;return k.map(function(e){p=e.label;delete e.label;a=e.values;delete e.values;c=e.features;delete e.features;"feature"===r?(e.category=p,e.valueFields=a,e.dataFeatures=c):"category"===r?(e.category=p,e.valueFields=a,e.dataFeatures=
c):"count"===r?(e.fieldValue=p,e.count=a[0],e.dataFeatures=c):"field"===r&&(e.label=p,e.value=a[0]);return e})},getFeatureModeStatisticsInfo:function(k){var r=new y({featureLayer:k.layerDefinition,popupInfo:k.popupFieldInfosObj});k=this._mapOptions(k,"feature");var p=k.clusterField,a=this.getFeatureModeStatisticsData(k);a=this.sortStatisticsData(a,"feature",k.sortOrder,p);a=this.getDataForMaxLabels(a,k.maxLabels);a=r.getBestLabelDisplay(a,p,"feature");a=r.keepStatisticsDataBestDecimalPlace(k,a,"feature");
return this._mapDataItemForStatisticsChart(a,"feature")},getCategoryModeStatisticsInfo:function(k){var r=new y({featureLayer:k.layerDefinition,popupInfo:k.popupFieldInfosObj});k=this._mapOptions(k,"category");var p=k.clusterField,a=this.getCategoryModeStatisticsData(k);a=this.sortStatisticsData(a,"category",k.sortOrder,null,k.valueFields);a=this._removeNaNDataItem(a);a=this.getDataForMaxLabels(a,k.maxLabels);a=r.getBestLabelDisplay(a,p,"category");a=r.keepStatisticsDataBestDecimalPlace(k,a,"category");
return this._mapDataItemForStatisticsChart(a,"category")},getCountModeStatisticsInfo:function(k){var r=new y({featureLayer:k.layerDefinition,popupInfo:k.popupFieldInfosObj});k=this._mapOptions(k,"count");var p=k.clusterField,a=this.getCountModeStatisticsData(k);a=this.sortStatisticsData(a,"count",k.sortOrder);a=this.getDataForMaxLabels(a,k.maxLabels);a=r.getBestLabelDisplay(a,p,"count");return this._mapDataItemForStatisticsChart(a,"count")},getFieldModeStatisticsInfo:function(k){var r=new y({featureLayer:k.layerDefinition,
popupInfo:k.popupFieldInfosObj});k=this._mapOptions(k,"category");var p=this.getFieldModeStatisticsData(k);p=this.sortStatisticsData(p,"field",k.sortOrder);p=this.getDataForMaxLabels(p,k.maxLabels);p=r.getBestLabelDisplay(p,null,"field");p=r.keepStatisticsDataBestDecimalPlace(k,p,"field");return this._mapDataItemForStatisticsChart(p,"field")}}})},"jimu/_chartHelpUtils":function(){define("dojo/_base/declare jimu/utils dojo/_base/lang dojo/_base/config dojo/_base/Color ./_dateFormat moment/moment esri/lang esri/graphic esri/layers/GraphicsLayer esri/symbols/jsonUtils".split(" "),
function(H,n,y,v,k,r,p,a,c,e,h){return H(null,{constructor:function(b){b&&y.mixin(this,b);this.popupInfo||(this.popupInfo={});this.featureLayer||(this.featureLayer={});this._cachePlaces={}},setLayerFeatureLayer:function(b){this.featureLayer=b;this.map&&((b=this.map.getLayer("chart_highLight_GraphicLayer"))?this.graphicLayer=b:(this.graphicLayer=new e({id:"chart_highLight_GraphicLayer"}),this.map.addLayer(this.graphicLayer)),this.graphicLayer.clear())},setLayerObject:function(b){this.layerObject=b},
setSymbolLayer:function(b){this.symbolLayer=b},setPopupInfo:function(b){this.popupInfo=b},setMap:function(b){this.map=b},getBestLabelDisplay:function(b,d,f){if("feature"===f)return this.betterDataCategoryForFeatureMode(b,d);if("category"===f||"count"===f)return this.betterDataCategoryForCategoryCountMode(b,d);if("field"===f)return this.betterDataCategoryForFieldMode(b)},betterDataCategoryForFeatureMode:function(b,d){b.forEach(y.hitch(this,function(f){f.label=this.getBestDisplayValue(d,f.label)}));
return b},betterDataCategoryForFieldMode:function(b){b.forEach(y.hitch(this,function(d){d.label=this.getFieldAlias(d.label)}));return b},betterDataCategoryForCategoryCountMode:function(b,d){b.forEach(y.hitch(this,function(f){f.label="undefined"!==typeof f.unit?this.getCategoryDisplayForDateUnit(f.label,f.unit):this.getBestDisplayValue(d,f.label)}));return b},keepStatisticsDataBestDecimalPlace:function(b,d,f){if("count"===f)return d;var l=b.valueFields,t=b.operation,z=b.hasStatisticsed;this.cacheDecimalPlace(l,
b.features,this.popupInfo,t,z);"feature"===f||"category"===f?d.forEach(y.hitch(this,function(B){B.originalValues=y.clone(B.values);l.forEach(y.hitch(this,function(x,D){var F=B.values[D];F=this.formatedValueDecimalplace(x,F,t,z);B.values[D]=F}))})):"field"===f&&l.forEach(y.hitch(this,function(B){d.some(y.hitch(this,function(x){if(x.label===B){var D=x.values[0];D=this.formatedValueDecimalplace(B,D,t,z);x.values[0]=D;return!0}return!1}))}));return d},formatedValueDecimalplace:function(b,d,f,l){this.isIntegerNumberField(b)&&
"average"===f?d=this.handleValueMaxDecimalplaces(d,6):this.isFloatNumberField(b)&&(b=this.getFieldDecimalPlaceFromCache(b),d=this.formatValuePlaces(d,b),l&&!this.popupInfo&&(d=this.handleValueMaxDecimalplaces(d,6)));return d},isIntegerNumberField:function(b){if(!this.featureLayer||!this.featureLayer.fields)return!1;var d=["esriFieldTypeSmallInteger","esriFieldTypeInteger"];return this.featureLayer.fields.some(y.hitch(this,function(f){return f.name===b&&0<=d.indexOf(f.type)}))},formatValuePlaces:function(b,
d){return"number"!==typeof d||!b&&0!==b?b:b.toFixed(d)},handleValueMaxDecimalplaces:function(b,d){b=Number(b);if("number"!==typeof b)return b;var f=0,l=b.toString().split(".");1===l.length?f=0:2===l.length&&(f=l[1].length);return 0<f?(f>d&&(f=d),b=b.toFixed(f),parseFloat(b)):b},getFieldDecimalPlaceFromCache:function(b){var d;this._cachePlaces&&(b=this._cachePlaces[b],"number"===typeof b&&(d=b));return d},getValueFromAttributes:function(b,d,f,l){if(b)return f="average"===f?"avg":f,l?(l=n.upperCaseString(d+
"_"+f),l=b[l],"undefined"===typeof l&&(l=n.lowerCaseString(d+"_"+f),l=b[l])):l=b[d],l},cacheDecimalPlace:function(b,d,f,l,t){this._cachePlaces={};if(b&&b.length){var z=b.filter(y.hitch(this,function(x){return this.isFloatNumberField(x)})),B={};z.forEach(y.hitch(this,function(x){B[x]=[]}));d&&0<d.length&&d.forEach(y.hitch(this,function(x){var D=x.attributes;D&&z.forEach(y.hitch(this,function(F){var I=this.getValueFromAttributes(D,F,l,t);"number"===typeof I&&B[F].push(I)}))}));z.forEach(y.hitch(this,
function(x){var D=this.getFieldInfoFromPopupInfo(f,x);this._cachePlaces[x]=0;var F=B[x];if(0<F.length)try{var I=this.getBestDecimalPlaceForArrayValues(F);this._cachePlaces[x]=I}catch(K){this._cachePlaces[x]=0,console.error(K)}f&&((D=this.getPlacesFromPopupFieldInfo(D))||0===D)&&(this._cachePlaces[x]=D)}))}},getBestDecimalPlaceForArrayValues:function(b){var d=0,f={};b.forEach(function(z){z=z.toString().split(".");var B=null;1===z.length?B=0:2===z.length&&(B=z[1].length);null!==B&&(f[B]=void 0===f[B]?
1:f[B]+1)});b=null;for(var l in f){l=parseInt(l,10);var t=f[l];b?t>b.value&&(b={key:l,value:t}):b={key:l,value:t}}b&&(d=parseInt(b.key,10));return d},getFieldInfoFromPopupInfo:function(b,d){var f=null;return b&&b.fieldInfos?f=b.fieldInfos.filter(function(l){return l.fieldName===d})[0]:f},getPlacesFromPopupFieldInfo:function(b){return b&&b.format&&b.format.places},getAliasFromPopupInfo:function(b,d){var f=d;if(!b||!b.fieldInfos)return f;(b=b.fieldInfos)&&0<b.length&&b.some(function(l){if(l.fieldName===
d)return f=l.label,!0});return f},isFloatNumberField:function(b){if(!this.featureLayer||!this.featureLayer.fields)return!1;var d=["esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(y.hitch(this,function(f){return f.name===b&&0<=d.indexOf(f.type)}))},isNumberField:function(b){if(!this.featureLayer||!this.featureLayer.fields)return!1;var d=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(y.hitch(this,
function(f){return f.name===b&&0<=d.indexOf(f.type)}))},isDateField:function(b){return(b=this.getFieldInfo(b))?"esriFieldTypeDate"===b.type:!1},getFieldInfo:function(b){if(this.featureLayer)for(var d=this.featureLayer.fields,f=0;f<d.length;f++)if(d[f].name===b)return d[f];return null},getFieldAliasArray:function(b){return b.map(y.hitch(this,function(d){return this.getFieldAlias(d)}))},getBestDisplayValue:function(b,d){if("_NULL\x26UNDEFINED_"===d)return"null";if(this.isDateField(b))return this.formatedDateByPopupInfoOrLocal(b,
d);var f={};f[b]=d;f=n.getDisplayValueForCodedValueOrSubtype(this.layerObject||this.featureLayer,b,f);f.isCodedValueOrSubtype?d=f.displayValue:this.isNumberField(b)&&(b=this.getFieldInfoFromPopupInfo(this.popupInfo,b),d=n.localizeNumberByFieldInfo(d,b));return d},formatedDateByPopupInfoOrLocal:function(b,d,f){f||(f=this.popupInfo);a:{if(f&&a.isDefined(f.fieldInfos))for(var l=0,t=f.fieldInfos.length;l<t;l++){var z=f.fieldInfos[l];if(z.fieldName===b){b=z.format;break a}}b=null}d=Number(d);return n.fieldFormatter.getFormattedDate(d,
b)},getDisplayValForNumberCodedValueSubTypes:function(b,d){var f=this.tryLocaleNumber(d,b);if(this.featureLayer&&this.featureLayer.typeIdField===b){var l=this.featureLayer.types;if(l&&0<l.length&&(l=l.filter(y.hitch(this,function(t){return t.id===d})),0<l.length))return f=l[0].name}(b=this.getFieldInfo(b))&&b.domain&&(b=b.domain.codedValues)&&0<b.length&&b.some(function(t){return t.code===d?(f=t.name,!0):!1});return f},tryLocaleNumber:function(b,d){var f=b;if(a.isDefined(b)&&isFinite(b))try{if(d&&
this.isNumberField(d)){var l=this.popupInfo[d];var t=l&&y.exists("format.places",l)?n.localizeNumberByFieldInfo(b,l):n.localizeNumber(b)}else t=b;"string"===typeof t&&(f=t)}catch(z){console.error(z)}return f+""},getCategoryDisplayForDateUnit:function(b,d){if(!d)return b;b=Number(b);return this._getFormatteredDate(b,d)},_getFormatteredDate:function(b,d){var f=this._getDateTemplate(d);0<=["year","quarter","month","day"].indexOf(d)?f=n.localizeDate(new Date(b),{selector:"date",datePattern:f.date}):(d=
n.localizeDate(new Date(b),{selector:"date",datePattern:f.date}),b=p(b).format(f.time),f=d+f.connector+b);return f},_getDateTemplate:function(b){var d=r[v.locale];(d=d||{},d.date)||(d.date={"short":"short"});d&&!d.time&&(d.time={medium:"HH:mm:ss a"});d&&!d.connector&&(d.connector=" ");d&&!d.sNoDay&&(d.sNoDay="MMM, y");var f={};"year"===b?f.date="y":"quarter"===b?f.date="y q":"month"===b?f.date=d.date.sNoDay:"day"===b?f.date=d.date["short"]:"hour"===b?(f.date=d.date["short"],f.time="HH a",f.connector=
d.connector):"minute"===b?(f.date=d.date["short"],f.time="HH:mm a",f.connector=d.connector):"second"===b&&(f.date=d.date["short"],f.time=d.time.medium,f.connector=d.connector);return f},_getSymbolLayerGraphics:function(b,d){if(!this.symbolLayer)return null;if(!this.symbolLayer.refreshInterval&&this.symbolGraphics&&!1===this.symbolGraphics.filterByExtent&&!1===this.symbolGraphics.useSelection)return this.symbolGraphics.graphics;var f=null;this.map&&this.symbolLayer&&(f=n.getClientFeaturesFromMap(this.map,
this.symbolLayer,d,!!b));this.symbolGraphics={filterByExtent:b,useSelection:d,graphics:f};return f},_isContainAttr:function(b,d){if("object"!==typeof d||"object"!==typeof d)return!1;var f=!0;Object.keys(d).some(function(l){return d[l]!==b[l]?(f=!1,!0):!1});return f},_getFeaturesByAttr:function(b,d){if(d){var f=null;d.some(function(l){return this._isContainAttr(l.attributes,b)?(f=l,!0):!1}.bind(this));return f}},_getFeaturesByClusterfield:function(b,d,f,l){var t=this._getSymbolLayerGraphics(f);if(t)return f=
null,b=this.clientStatisticsUtils.getCluseringObj(b,t,l),(d=y.mixin(b.notNullLabel,b.nullLabel)[d])&&d.features&&d.features.length&&(f=d.features),f},_getFeatureForSerieData:function(b,d,f){var l=d.clusterField,t=d.mode,z=d.filterByExtent;d=d.useSelection;var B={};B[l]=b.name;if("feature"===t)return this._getFeatureBySerieDataItem(b,l,f,z,d);if("category"===t||"count"===t)return new c(null,null,B)},_getFeatureBySerieDataItem:function(b,d,f,l,t){var z={};z[d]=b.name;z[f]=Number("undefined"!==typeof b.originValue?
b.originValue:b.value);b=this._getSymbolLayerGraphics(l,t);return this._getFeaturesByAttr(z,b)},_getFeatureBycsuDataItem:function(b,d,f,l,t,z){var B={};B[d]=b.label;b=b.originalValues||b.values;B[f]=Number(b&&b[l]);f=this._getSymbolLayerGraphics(t,z);return this._getFeaturesByAttr(B,f)},bindChartEvent:function(b,d,f){var l=d.filterByExtent,t=d.useSelection,z=d.clusterField,B=d.valueFields,x=null;"undefined"!==d.dateConfig&&(x=d.dateConfig);this.highLightColor=d.highLightColor||"#00ffff";var D=d.mode;
if(this.map&&0!==f.length){d=y.hitch(this,function(I){if("series"===I.componentType){var K=null,L=this._getSymbolLayerGraphics(l,t);if("field"===D)K=L;else if(L=f[I.dataIndex])if("feature"===D){var A=I.seriesIndex,g=B[A];if(!g)return;(L=this._getFeatureBycsuDataItem(L,z,g,A,l,t))&&(K=[L])}else L=L.label,"undefined"!==typeof L&&(K=this._getFeaturesByClusterfield(z,L,l,x));K&&"mouseover"===I.type&&this.graphicLayer&&(this._mouseoverFeatures=K,this._mouseOverChartItem(K))}});var F=y.hitch(this,function(){this._mouseoverFeatures&&
this.graphicLayer&&(this._mouseOutChartItem(this._mouseoverFeatures),this._mouseoverFeatures=null)});[{name:"mouseover",callback:d},{name:"mouseout",callback:F}].forEach(y.hitch(this,function(I){b.chart.off(I.name);b.chart.on(I.name,y.hitch(this,function(K){"mouseover"===K.type?(this._hasTriggerMouseoverEvent||(this._hasTriggerMouseoverEvent=!0,I.callback(K)),setTimeout(y.hitch(this,function(){this._hasTriggerMouseoverEvent=!1},500))):"mouseout"===K.type&&I.callback(K)}))}))}},_createHighLightFeatures:function(b,
d){b.forEach(y.hitch(this,function(f){f=new c(f.geometry,d);this.graphicLayer.add(f)}))},_mouseOverChartItem:function(b){if(this.featureLayer&&this.featureLayer.getMap()&&this.featureLayer.visible){var d=n.getTypeByGeometryType(this.featureLayer.geometryType);b.forEach(y.hitch(this,function(t){t._originalSymbol=t.symbol}));var f=null;if("point"===d)f=this._getHighLightMarkerSymbol(),this._createHighLightFeatures(b,f);else if("polyline"===d)f=this._getHighLightLineSymbol(this.highLightColor),this._createHighLightFeatures(b,
f);else if("polygon"===d){var l=this.featureLayer.getSelectedFeatures()||[];b.forEach(y.hitch(this,function(t){var z=0<=l.indexOf(t);z=this._getHighLightFillSymbol(this.featureLayer,t,z);t=new c(t.geometry,z);this.graphicLayer.add(t)}))}}},_mouseOutChartItem:function(){this.graphicLayer&&this.graphicLayer.clear()},_getHighLightMarkerSymbol:function(){var b=h.fromJson({color:[255,255,255,0],size:18,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSSquare",outline:{color:[0,0,128,255],width:.75,
type:"esriSLS",style:"esriSLSSolid"}});b.setSize(30);b.outline.setColor(new k(this.highLightColor));return b},_getHighLightLineSymbol:function(b){var d=h.fromJson({color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"});d.setColor(new k(b||this.highLightColor));return d},_getDefaultHighLightFillSymbol:function(){var b=h.fromJson({color:[0,255,255,128],outline:{color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"});b.outline.setColor(new k(this.highLightColor));
return b},_getSymbolByRenderer:function(b,d){var f=this._getDefaultHighLightFillSymbol(),l=this.getVisualVariableByType("colorInfo",b.visualVariables);if(l){if(b=b.getColor(d,{colorInfo:l}))b=y.clone(b),f.setColor(b)}else f=b.getSymbol(d);return f},getVisualVariableByType:function(b,d){return d&&(d=d.filter(function(f){return f.type===b&&!f.target}),d.length)?d[0]:null},_getHighLightFillSymbol:function(b,d,f){var l=null,t=d.symbol;l=b.renderer;!t&&l&&(t=this._getSymbolByRenderer(l,d));t&&"function"===
typeof t.setOutline?(l=h.fromJson(t.toJson()),d=1.5,t.outline&&0<t.outline.width&&(d=t.outline.width+1),f=this._getHighLightLineSymbol(f?"#ff0000":"#00ffff"),f.setWidth(d),l.setOutline(f)):l=this._getDefaultHighLightFillSymbol();return l},_isNumberField:function(b){var d=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(y.hitch(this,function(f){return f.name===b&&0<=d.indexOf(f.type)}))},getFieldAlias:function(b){var d;
this.popupInfo&&(d=this.getAliasFromPopupInfo(this.popupInfo,b));d||(d=b,(b=this.getFieldInfo(b))&&b.alias&&(d=b.alias));return d},_removeDuplicateElementForObjArray:function(b){if(!Array.isArray(b))return b;var d=[];d.push(b[0]);b.forEach(function(f){d.some(function(l){return n.isEqual(l,f)})||d.push(f)});return d},assigneeSettingColor:function(b,d,f){if(!d||!d.length)return d;var l=b.seriesStyle;if(!l)return d;"layerSymbol"===l.type?d=this._assigneeStyleLayerSymbolColor(d,f):"series"===l.type?d=
this._assigneeStyleSeriesColor(b,d):"custom"===l.type&&(d=this._assigneeStyleCustomColor(b,d));return d},_assigneeStyleCustomColor:function(b,d){b=b.seriesStyle;if(!b||!b.customColor)return d;var f=b.customColor;b=f.categories;f=f.others;if(!(b&&b.length||f&&f.length))return d;f&&f.length&&this._setCustomOthersColor(f,d);b&&b.length&&this._setCustomCategoriesColor(b,d)},_setCustomCategoriesColor:function(b,d){d.forEach(function(f){(f=f.data)&&f.length&&f.forEach(function(l){if("undefined"!==typeof l.name){var t=
this._getMatchingCustomColor(l.name,b);this.setColorToDataItem(l,t)}}.bind(this))}.bind(this))},_getMatchingCustomColor:function(b,d){var f=!1;if(!d||!d.length)return f;(d=d.filter(function(l){return l.id===b})[0])&&d.color&&(f=d.color);return f},_getMatchingCustomLabel:function(b,d){var f=!1;if(!d||!d.length)return f;(d=d.filter(function(l){return l.id===b})[0])&&d.label&&(f=d.label);return f},_setCustomOthersColor:function(b,d){this._setOtherColorForCustomColor(b,d);this._setNullLabelColorForCustomColor(b,
d)},_setOtherColorForCustomColor:function(b,d){(b=b.filter(function(f){return"others"===f.id})[0])&&b.color&&this.setColorToAllSerieDataItem(d,b.color)},_setNullLabelColorForCustomColor:function(b,d){if((b=b.filter(function(l){return"null"===l.id})[0])&&b.color){var f=b.color;d.forEach(function(l){(l=l.data)&&l.length&&l.forEach(function(t){t.name&&"_NULL\x26UNDEFINED_"===t.name&&this.setColorToDataItem(t,f)}.bind(this))}.bind(this))}},_assigneeStyleSeriesColor:function(b,d){var f=b.seriesStyle;if(!f||
!f.styles||!f.styles[0])return d;var l=b.mode,t=b.area;return d.map(function(z){var B=null,x=z.type;if("field"===l)"line"===x?(B=f.styles[0].style,z=this._setStyleToSerie(B,z,t)):(x=z.data)&&x[0]&&(z.data=x.map(function(D){B=this._getMatchingStyle(D.name,f);return this.setStyleToSerieDataItem(B,D)}.bind(this)));else if("column"===x||"bar"===x||"line"===x)"count"===l?(B=f.styles[0].style,z=this._setStyleToSerie(B,z,t)):"undefined"!==typeof z.name&&(B=this._getMatchingStyle(z.name,f))&&(z=this._setStyleToSerie(B,
z,t));return z}.bind(this))},_assigneeStyleLayerSymbolColor:function(b,d){b.forEach(function(f){var l=f.name;(f=f.data)&&f.length&&f.forEach(function(t){var z=[this._getFeatureForSerieData(t,d,l)];if(z=this._getSymbolColorForDataItem(z))t.itemStyle={color:z}}.bind(this))}.bind(this))},_setStyleToSerie:function(b,d,f){d.itemStyle||(d.itemStyle={});b&&"undefined"!==typeof b.color&&(Array.isArray(b.color)?d.itemStyle.color=b.color[0]:d.itemStyle.color=b.color);b&&"undefined"!==typeof b.opacity&&(f?(d.areaStyle||
(d.areaStyle={}),d.areaStyle.opacity=1-parseFloat(b.opacity/10)):d.itemStyle.opacity=1-parseFloat(b.opacity/10));return d},_getMatchingStyle:function(b,d){var f=null;d=d.styles;if(!d||!d[0]||""===b)return f;d.forEach(function(l){l.name===b&&(f=l.style)});return f},_getSymbolColorForDataItem:function(b){var d=!1;if(!this.symbolLayer)return d;b=b&&b[0];return b?d=this._getColorForFeature(this.symbolLayer.renderer,b):d},_getColorForFeature:function(b,d){var f=!1,l=this.getVisualVariableByType("colorInfo",
b.visualVariables);l?(b=b.getColor(d,{colorInfo:l}))&&(f=this._convertToEchartsRbga(b)):(b=b.getSymbol(d))&&"undefined"!==typeof b.color&&(f=this._convertToEchartsRbga(b.color));return f},_convertToEchartsRbga:function(b){if(!b||"undefined"===typeof b.r)return b;b=window.JSON.parse(window.JSON.stringify(b));var d="rgba("+(b.r+",");d+=b.g+",";d+=b.b+",";return d+=b.a+")"},getColors:function(b,d){var f=[];if(2===b.length)f=this._createGradientColors(b[0],b[b.length-1],d);else{for(var l=Math.ceil(d/
b.length),t=0;t<l;t++)f=f.concat(b);f=f.slice(0,d)}return f},_createGradientColors:function(b,d,f){var l=[];b=new k(b);var t=new k(d);d=(t.r-b.r)/f;var z=(t.g-b.g)/f;t=(t.b-b.b)/f;for(var B=new k,x=0,D=0,F=0,I=0;I<f;I++)x=parseInt(b.r+d*I,10),D=parseInt(b.g+z*I,10),F=parseInt(b.b+t*I,10),B.setColor([x,D,F]),l.push(B.toHex());return l},setStyleToSerieDataItem:function(b,d){d.itemStyle||(d.itemStyle={});b&&"undefined"!==typeof b.color&&(Array.isArray(b.color)?d.itemStyle.color=b.color[0]:d.itemStyle.color=
b.color);b&&"undefined"!==typeof b.opacity&&(d.itemStyle.opacity=1-parseFloat(b.opacity/10));return d},setColorToSerie:function(b,d){if(!b||"object"!==typeof b||Array.isArray(b))return b;b.itemStyle||(b.itemStyle={});d&&(b.itemStyle.color=d)},setColorToDataItem:function(b,d){if(!b||"object"!==typeof b)return b;b.itemStyle||(b.itemStyle={});d&&(b.itemStyle.color=d)},setColorToAllSerieDataItem:function(b,d){b.forEach(function(f){(f=f.data)&&f.length&&f.forEach(function(l){this.setColorToDataItem(l,
d)}.bind(this))}.bind(this))},_updateDataItemNameForCustom:function(b,d,f){if("undefined"!==typeof b.name){var l=b.name;"_NULL\x26UNDEFINED_"===b.name&&d?l=d:(d=this._getMatchingCustomLabel("undefined"!==typeof b.originName?b.originName:b.name,f))&&(l=d);b.name=l}return l},_updateSerieDataItemName:function(b,d,f){var l=b.name,t=l;t=b.unit&&l?this.getCategoryDisplayForDateUnit(l,b.unit):"field"!==d?this.getBestDisplayValue(f,l):this.getFieldAlias(l);b.name=t;b.originName=l;return t},updateChartSeriesDisplayName:function(b,
d,f){var l=f.clusterField,t=f.mode;f=b.series;var z=[];d=d.seriesStyle;var B;f.forEach(function(F,I){F.name&&(F.name=this.getFieldAlias(F.name));(F=F.data)&&F.length&&F.forEach(function(K,L){B=this._updateSerieDataItemName(K,t,l);0===I&&(z[L]=B)}.bind(this))}.bind(this));if("custom"===d.type){if((d=d.customColor)&&d.categories&&d.categories.length){var x=d.categories;d=d.others||[];if((d=d.filter(function(F){return"null"===F.id})[0])&&d.label)var D=d.label}f.forEach(function(F,I){(F=F.data)&&F.length&&
F.forEach(function(K,L){B=this._updateDataItemNameForCustom(K,D,x);0===I&&(z[L]=B)}.bind(this))}.bind(this))}b.labels=null;b.labels=z}})})},"jimu/_dateFormat":function(){define([],function(){return{ar:{date:{"short":"d/M/y",medium:"dd/MM/y","long":"d MMMM. y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"M/y"},time:{"short":"h:mm a",medium:"h:mm:ss a"}},bs:{date:{"short":"d.M.yy.",medium:"d. MMM. y.","long":"d. MMMM y.",onlyDate:"d. MMM.",mNoDay:"MMM. y.",sNoDay:"M.yy"}},cs:{date:{"short":"dd.MM.yy",medium:"d. M. y",
onlyDate:"d. M.",mNoDay:"M. y",sNoDay:"MM.yy"}},da:{date:{"short":"dd/MM/y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM/y"}},de:{date:{"short":"dd.MM.yy",medium:"dd.MM.y",onlyDate:"dd.MM."},connector:" , ",mNoDay:"MM.y",sNoDay:"MM.yy"},el:{date:{"short":"d/M/yy",medium:"d MMM y",onlyDate:"d MMM"},connector:" , ",mNoDay:"MMM y",sNoDay:"M/yy"},en:{date:{"short":"M/d/yy",medium:"MMM d, y",onlyDate:"MMM d",mNoDay:"MMM, y",sNoDay:"M/yy"}},es:{date:{"short":"d/M/yy",
medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},et:{date:{"short":"d.MM.y",medium:"d. MMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"H:mm",medium:"H:mm:ss"}},fi:{date:{"short":"d.M.y",medium:"d.M.y",onlyDate:"d.M.",mNoDay:"M.y",sNoDay:"M.y"},connector:" 'klo' "},fr:{date:{"short":"dd/MM/y",medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/y"},connector:" '\u00e0' "},he:{date:{"short":"dd/MM/yy",medium:"d '\u05d1'MMM y",onlyDate:"d '\u05d1'MMM",mNoDay:"'\u05d1'MMM y",
sNoDay:"MM/yy"},connector:" , "},hr:{date:{"short":"d.M.y",medium:"d. MMM y.",onlyDate:"d. MMM",mNoDay:"MMM y.",sNoDay:"M.y"}},id:{"short":"dd/MM/yy",date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/yy"}},it:{date:{medium:"dd MMM y","long":"d MMMM y",onlyDate:"dd MMM",mNoDay:"MMM y",sNoDay:"MM/yy"},connector:" , "},ja:{date:{medium:"y/MM/dd",onlyDate:"MM/dd",mNoDay:"y/MM",sNoDay:"y/MM"},time:{"short":"a h:mm",medium:"a h:mm:ss"}},ko:{date:{medium:"y. M. d.",onlyDate:"M. d.",mNoDay:"y. M.",
sNoDay:"yy. M."}},lt:{date:{medium:"y-MM-dd","long":"y 'm'. MMMM d 'd'.",onlyDate:"MM-dd",mNoDay:"y-MM",sNoDay:"y-MM"},time:{medium:"HH:mm:ss"}},lv:{date:{"short":"dd.MM.y",medium:"y. 'gada' d. MMM.","long":"y. 'gada' d. MMMM",onlyDate:"d. MMM.",mNoDay:"y. 'gada' MMM.",sNoDay:"MM.y"}},nb:{date:{"short":"dd.MM.y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"HH:mm",medium:"HH:mm:ss"},connector:" , "},nl:{date:{medium:"d MMM y",onlyDate:"d MMM",
mNoDay:"MMM y",sNoDay:"MM-yy"}},pl:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},"pt-br":{date:{"short":"dd/MM/y",medium:"d 'de' MMM 'de' y",onlyDate:"d 'de' MMM",mNoDay:"MMM 'de' y",sNoDay:"MM/y"}},"pt-pt":{date:{medium:"dd/MM/y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"MM/yy"}},ro:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},ru:{date:{"short":"dd.MM.y",medium:"d MMM y '\u0433.'",onlyDate:"d MMM",mNoDay:"MMM y '\u0433.'",
sNoDay:"MM.y"},connector:" , "},sr:{date:{medium:"dd.MM.y.",onlyDate:"dd.MM.",mNoDay:"MM.y.",sNoDay:"M.yy."},time:{"short":"HH:mm",medium:"HH:mm:ss"}},sv:{date:{medium:"d MMM. y",onlyDate:"d MMM.",mNoDay:"MMM. y",sNoDay:"y-MM"}},th:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},tr:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"}},vi:{date:{"short":"dd/MM/y",medium:"d MMM, y","long":"'Ng\u00e0y' dd 'th\u00e1ng' MM 'n\u0103m' y",onlyDate:"d MMM",mNoDay:"MMM, y",
sNoDay:"MM/y"},time:{"short":"hh:mm a",medium:"hh:mm:ss a"},connector:" , "},"zh-cn":{date:{"short":"y/M/d",medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}},"zh-hk":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"M/y"}},"zh-tw":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}}}})},"libs/moment/twix":function(){(function(){var H=
[].slice;var n="undefined"!==typeof module&&null!==module&&null!=module.exports&&"function"===typeof require;var y=function(k){return"[object Array]"===Object.prototype.toString.call(k)};var v=function(k){if(null==k)throw Error("Can't find moment");var r=function(){function p(a,c,e,h){var b;null==h&&(h={});"string"!==typeof e&&(h=null!=e?e:{},e=null);"boolean"===typeof h&&(h={allDay:h});this._oStart=k(a,e,h.parseStrict);this._oEnd=k(c,e,h.parseStrict);this.allDay=null!=(b=h.allDay)?b:!1;this._mutated()}
p._extend=function(){var a,c;var e=arguments[0];var h=2<=arguments.length?H.call(arguments,1):[];var b=0;for(c=h.length;b<c;b++){var d=h[b];for(a in d)"undefined"!==typeof d[a]&&(e[a]=d[a])}return e};p.prototype.start=function(){return this._start.clone()};p.prototype.end=function(){return this._end.clone()};p.prototype.isSame=function(a){return this._start.isSame(this._end,a)};p.prototype.length=function(a,c){null==c&&(c=!1);return this._displayEnd.diff(this._start,a,c)};p.prototype.count=function(a){var c=
this.start().startOf(a);return this.end().startOf(a).diff(c,a)+1};p.prototype.countInner=function(a){var c=this._inner(a);var e=c[0];c=c[1];return e>=c?0:c.diff(e,a)};p.prototype.iterate=function(a,c,e){var h=this._prepIterateInputs(a,c,e);a=h[0];c=h[1];e=h[2];var b=this.start().startOf(c);var d=this.end().startOf(c);this.allDay&&(d=d.add(1,"d"));h=function(f){return function(){return!f.allDay&&b<=d&&(!e||!b.isSame(d)||f._end.hours()>e)||f.allDay&&b<d}}(this);return this._iterateHelper(c,b,h,a)};
p.prototype.iterateInner=function(a,c){c=this._prepIterateInputs(a,c);a=c[0];c=c[1];var e=this._inner(c,a);var h=e[0];var b=e[1];return this._iterateHelper(c,h,function(){return h<b},a)};p.prototype.humanizeLength=function(){return this.allDay?this.isSame("d")?"all day":this._start.from(this.end().add(1,"d"),!0):this._start.from(this._end,!0)};p.prototype.asDuration=function(a){a=this._end.diff(this._start);return k.duration(a)};p.prototype.isPast=function(){return this._lastMilli<k()};p.prototype.isFuture=
function(){return this._start>k()};p.prototype.isCurrent=function(){return!this.isPast()&&!this.isFuture()};p.prototype.contains=function(a){k.isMoment(a)||(a=k(a));return this._start<=a&&this._lastMilli>=a};p.prototype.isEmpty=function(){return this._start.isSame(this._displayEnd)};p.prototype.overlaps=function(a){return this._displayEnd.isAfter(a._start)&&this._start.isBefore(a._displayEnd)};p.prototype.engulfs=function(a){return this._start<=a._start&&this._displayEnd>=a._displayEnd};p.prototype.union=
function(a){var c=this.allDay&&a.allDay;return new p(this._start<a._start?this._start:a._start,this._lastMilli>a._lastMilli?c?this._end:this._displayEnd:c?a._end:a._displayEnd,c)};p.prototype.intersection=function(a){var c=this.allDay&&a.allDay;return new p(this._start>a._start?this._start:a._start,this._lastMilli<a._lastMilli?c?this._end:this._displayEnd:c?a._end:a._displayEnd,c)};p.prototype.xor=function(){var a,c,e;var h=1<=arguments.length?H.call(arguments,0):[];var b=0;var d=null;var f=[];var l=
function(){var D;var F=[];var I=0;for(D=h.length;I<D;I++)e=h[I],e.allDay&&F.push(e);return F}().length===h.length;var t=[];var z=[this].concat(h);var B=c=0;for(a=z.length;c<a;B=++c){var x=z[B];t.push({time:x._start,i:B,type:0});t.push({time:x._displayEnd,i:B,type:1})}t=t.sort(function(D,F){return D.time-F.time});B=0;for(x=t.length;B<x;B++)c=t[B],1===c.type&&--b,b===c.type&&(d=c.time),b===(c.type+1)%2&&(d&&((a=f[f.length-1])&&a._end.isSame(d)?(a._oEnd=c.time,a._mutated()):(a=l?c.time.clone().subtract(1,
"d"):c.time,d=new p(d,a,l),d.isEmpty()||f.push(d))),d=null),0===c.type&&(b+=1);return f};p.prototype.difference=function(){var a;var c=1<=arguments.length?H.call(arguments,0):[];var e=this.xor.apply(this,c).map(function(d){return function(f){return d.intersection(f)}}(this));var h=[];c=0;for(a=e.length;c<a;c++){var b=e[c];!b.isEmpty()&&b.isValid()&&h.push(b)}return h};p.prototype.split=function(){var a,c,e,h,b;var d=1<=arguments.length?H.call(arguments,0):[];var f=e=this.start();k.isDuration(d[0])?
a=d[0]:!k.isMoment(d[0])&&!y(d[0])&&"object"===typeof d[0]||"number"===typeof d[0]&&"string"===typeof d[1]?a=k.duration(d[0],d[1]):b=y(d[0])?d[0]:d;b&&(b=function(){var z;var B=[];var x=0;for(z=b.length;x<z;x++)h=b[x],B.push(k(h));return B}(),b=function(){var z;var B=[];var x=0;for(z=b.length;x<z;x++)c=b[x],c.isValid()&&c>=e&&B.push(c);return B}().sort(function(z,B){return z.valueOf()-B.valueOf()}));if(a&&0===a.asMilliseconds()||b&&0===b.length)return[this];var l=[];var t=0;for(d=this._displayEnd;e<
d&&(null==b||b[t]);)f=a?e.clone().add(a):b[t].clone(),f=k.min(d,f),e.isSame(f)||l.push(k.twix(e,f)),e=f,t+=1;!f.isSame(this._displayEnd)&&b&&l.push(k.twix(f,this._displayEnd));return l};p.prototype.divide=function(a){return this.split(this.length()/a,"ms").slice(0,+(a-1)+1||9E9)};p.prototype.isValid=function(){return this._start.isValid()&&this._end.isValid()&&this._start<=this._displayEnd};p.prototype.equals=function(a){return a instanceof p&&this.allDay===a.allDay&&this._start.valueOf()===a._start.valueOf()&&
this._end.valueOf()===a._end.valueOf()};p.prototype.toString=function(){return"{start: "+this._start.format()+", end: "+this._end.format()+", allDay: "+(this.allDay?"true":"false")+"}"};p.prototype.toArray=function(a,c,e){a=this.iterate(a,c,e);for(c=[];a.hasNext();)c.push(a.next());return c};p.prototype.simpleFormat=function(a,c){var e={allDay:"(all day)",template:p.formatTemplate};p._extend(e,c||{});a=e.template(this._start.format(a),this._end.format(a));this.allDay&&e.allDay&&(a+=" "+e.allDay);
return a};p.prototype.format=function(a){var c;if(this.isEmpty())return"";var e={groupMeridiems:!0,spaceBeforeMeridiem:!0,showDayOfWeek:!1,hideTime:!1,hideYear:!1,implicitMinutes:!0,implicitDate:!1,implicitYear:!0,yearFormat:"YYYY",monthFormat:"MMM",weekdayFormat:"ddd",dayFormat:"D",meridiemFormat:"A",hourFormat:this._start.localeData()._longDateFormat.LT[0],minuteFormat:"mm",allDay:"all day",explicitAllDay:!1,lastNightEndsAt:0,template:p.formatTemplate};p._extend(e,a||{});a=[];var h=e.hourFormat&&
"h"===e.hourFormat[0];var b=this._start.localeData()._longDateFormat.L;var d=b.indexOf("M")<b.indexOf("D");var f=0<e.lastNightEndsAt&&!this.allDay&&this.end().startOf("d").valueOf()===this.start().add(1,"d").startOf("d").valueOf()&&12<this._start.hours()&&this._end.hours()<e.lastNightEndsAt;var l=!e.hideDate&&(!e.implicitDate||this.start().startOf("d").valueOf()!==k().startOf("d").valueOf()||!(this.isSame("d")||f));b=!(this.allDay||e.hideTime);this.allDay&&this.isSame("d")&&(e.implicitDate||e.explicitAllDay)&&
a.push({name:"all day simple",fn:function(){return e.allDay},pre:" ",slot:0});!l||e.hideYear||e.implicitYear&&this._start.year()===k().year()&&this.isSame("y")||a.push({name:"year",fn:function(K){return K.format(e.yearFormat)},pre:d?", ":" ",slot:4});b&&l&&a.push({name:"month-date",fn:function(K){return K.format(d?e.monthFormat+" "+e.dayFormat:e.dayFormat+" "+e.monthFormat)},ignoreEnd:function(){return f},pre:" ",slot:2});!b&&l&&a.push({name:"month",fn:function(K){return K.format(e.monthFormat)},
pre:" ",slot:d?2:3});!b&&l&&a.push({name:"date",fn:function(K){return K.format(e.dayFormat)},pre:" ",slot:d?3:2});l&&e.showDayOfWeek&&a.push({name:"day of week",fn:function(K){return K.format(e.weekdayFormat)},pre:" ",slot:1});e.groupMeridiems&&h&&!this.allDay&&!e.hideTime&&a.push({name:"meridiem",fn:function(K){return K.format(e.meridiemFormat)},slot:6,pre:e.spaceBeforeMeridiem?" ":""});this.allDay||e.hideTime||a.push({name:"time",fn:function(K){var L=0===K.minutes()&&e.implicitMinutes&&h?K.format(e.hourFormat):
K.format(e.hourFormat+":"+e.minuteFormat);!e.groupMeridiems&&h&&(e.spaceBeforeMeridiem&&(L+=" "),L+=K.format(e.meridiemFormat));return L},slot:5,pre:", "});var t=[];var z=[];var B=[];var x=!0;var D=function(K){return function(L){var A=L.fn(K._start);var g=L.ignoreEnd&&L.ignoreEnd()?A:L.fn(K._end);var m={format:L,value:function(){return A}};if(g===A&&x)return B.push(m);x&&(x=!1,B.push({format:{slot:L.slot,pre:""},value:function(){return e.template(I(t),I(z,!0).trim())}}));t.push(m);return z.push({format:L,
value:function(){return g}})}}(this);l=0;for(c=a.length;l<c;l++)b=a[l],D(b);var F=!0;var I=function(K,L){var A;var g=!0;var m="";var q=K.sort(function(w,C){return w.format.slot-C.format.slot});K=0;for(A=q.length;K<A;K++){var u=q[K];F||(m=g&&L?m+" ":m+u.format.pre);m+=u.value();g=F=!1}return m};return I(B)};p.prototype._iterateHelper=function(a,c,e,h){return{next:function(){if(e()){var b=c.clone();c.add(h,a);return b}return null},hasNext:e}};p.prototype._prepIterateInputs=function(){var a,c,e;var h=
1<=arguments.length?H.call(arguments,0):[];if("number"===typeof h[0])return h;if("string"===typeof h[0]){var b=h.shift();var d=null!=(c=h.pop())?c:1;h.length&&(a=null!=(e=h[0])?e:!1)}k.isDuration(h[0])&&(b="ms",d=h[0].as(b));return[d,b,a]};p.prototype._inner=function(a,c){null==a&&(a="ms");null==c&&(c=1);var e=this.start();var h=this._displayEnd.clone();e>e.clone().startOf(a)&&e.startOf(a).add(c,a);h<h.clone().endOf(a)&&h.startOf(a);var b=e.twix(h).asDuration(a).get(a);h.subtract(b%c,a);return[e,
h]};p.prototype._mutated=function(){this._start=this.allDay?this._oStart.clone().startOf("d"):this._oStart;this._lastMilli=this.allDay?this._oEnd.clone().endOf("d"):this._oEnd;this._end=this.allDay?this._oEnd.clone().startOf("d"):this._oEnd;return this._displayEnd=this.allDay?this._end.clone().add(1,"d"):this._end};return p}();r._extend(k.locale(),{_twix:r.defaults});r.formatTemplate=function(p,a){return p+" - "+a};k.twix=function(){return function(p,a,c){c.prototype=p.prototype;c=new c;p=p.apply(c,
a);return Object(p)===p?p:c}(r,arguments,function(){})};k.fn.twix=function(){return function(p,a,c){c.prototype=p.prototype;c=new c;p=p.apply(c,a);return Object(p)===p?p:c}(r,[this].concat(H.call(arguments)),function(){})};k.fn.forDuration=function(p,a){return new r(this,this.clone().add(p),a)};k.duration.fn&&(k.duration.fn.afterMoment=function(p,a){return new r(p,k(p).clone().add(this),a)},k.duration.fn.beforeMoment=function(p,a){return new r(k(p).clone().subtract(this),p,a)});return k.twixClass=
r};if(n)return module.exports=v(require("moment/moment"));this.moment?this.Twix=v(this.moment):"undefined"!==typeof moment&&null!==moment&&(this.Twix=v(moment));this.makeTwix=v}).call(this)},"jimu/dijit/Chart":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/_base/html dojo/Evented libs/echarts/echarts jimu/utils ./_chartUtils ./_Gauge ./_ChartOptionFactory libs/echarts/light libs/echarts/dark".split(" "),function(H,n,y,v,k,r,p,a,c,e){return H([n,k],{baseClass:"jimu-dijit-chart",
templateString:"\x3cdiv\x3e\x3c/div\x3e",declaredClass:"jimu.dijit.chart",config:null,postCreate:function(){this.inherited(arguments);this._initChart()},updateConfig:function(h){if(!h||!this.chart)return!1;var b=this.chart.getOption(),d=this._isSameNumberSeriesItems(b,h);b=!this.preview&&d?this.getDatazoomRatio(b):null;this.config=h;this._specialThemeByConfig(h);d=this._chartFactory(h);this.chart.setOption(d,!0);this._settingByGrid(h,d,b);return!0},_settingByGrid:function(h,b,d){if("gauge"===h.type)return this._resetGaugePosition(h);
var f=this.chartUtils.getAxisZeroPosition();h.layout=this.chartUtils.calcDefaultLayout(h);this.chartUtils.isAxisChart(h)&&(b=this.chartUtils.settingGrid(b,h),b=this.chartUtils.settingDataZoom(b,h,f,d));b=this.chartUtils.settingChartLayout(b,h);this.chart.setOption(b,!1)},_resetGaugePosition:function(h){this._resetGaugeGrid(h);this._resetGaugeGraphic(h)},setConfig:function(h){if(!h)return!1;this.config=h;this._specialThemeByConfig(this.config);this.clear();var b=this._chartFactory(this.config);this.chart.setOption(b,
!0);this._setAixsGrid(h,b);this._resetGaugePosition(h,b);return!0},destroy:function(){this._offEvents();this.clear();this.inherited(arguments)},_chartFactory:function(h){return this.option=this.chartOptionFactory.produceOption(h)},bindEvents:function(h){this.chart&&h.events&&h.events.length&&(this._offEvents(),h.events.forEach(y.hitch(this,function(b){this.chart.on(b.name,b.callback)})))},_offEvents:function(){this.config.events&&this.config.events[0]&&this.config.events.forEach(y.hitch(this,function(h){this.chart.off(h.name)}))},
getDataURL:function(){if(this.chart)return this.chart.getDataURL()},clear:function(){this.chart&&this.chart.clear()},resize:function(h,b){this.chart&&(v.setStyle(this.domNode,{width:h||"100%",height:b||"100%"}),this.chart.resize(),this._resetGaugePosition(this.config))},getDatazoomRatio:function(h){return(h=h&&h.dataZoom&&h.dataZoom[0])?[h.start,h.end]:null},_isSameNumberSeriesItems:function(h,b){return(h&&h.series&&h.series[0]&&h.series[0].data&&h.series[0].data.length)===(b&&b.series&&b.series[0]&&
b.series[0].data&&b.series[0].data.length)},_resizeDataZoom:function(){var h=this.option,b=this.config;if(h&&b){var d=this.chartUtils.getAxisZeroPosition();h=this.chartUtils.settingDataZoom(h,b,d);this.chart.setOption(h)}},_setAixsGrid:function(h,b){this.chartUtils.isAxisChart(h)&&(b=this.chartUtils.settingGrid(b,h),this.chart.setOption(b,!1))},_resetGaugeGraphic:function(h){"gauge"===h.type&&this.gauge.resetGraphic(h)},_resetGaugeGrid:function(h){"gauge"===h.type&&this.gauge.resetGrid(h)},_specialChartTheme:function(){this.chart&&
(this.chart._theme.tooltip.axisPointer={type:"cross",label:{show:!0,precision:2,formatter:function(h){return"number"===typeof h.value?(h=parseFloat(h.value).toFixed(2),this.chartUtils.tryLocaleNumber(h)):h.value}.bind(this)},lineStyle:{color:"#27727B",type:"dashed"},crossStyle:{color:"#27727B"},shadowStyle:{color:"rgba(200,200,200,0.3)"}},this.chart._theme.valueAxis||(this.chart._theme.valueAxis={}),this.chart._theme.valueAxis.axisLabel||(this.chart._theme.valueAxis.axisLabel={}),this.chart._theme.valueAxis.axisLabel.formatter=
function(h){return p.localizeNumber(h)})},_specialThemeByConfig:function(h){this._initChartTheme();h.color&&h.color[0]&&(this.chart._theme.color=h.color);this.chart._theme.tooltip.confine=!0;var b="percent"===h.stack;this.chart._theme.tooltip.formatter=function(d){return this.chartUtils.handleToolTip(d,null,!1,b)}.bind(this)},_initChartTheme:function(){this.chart&&(this.chart._theme||(this.chart._theme={}),this.chart._theme.tooltip||(this.chart._theme.tooltip={}),this.chart._theme.valueAxis||(this.chart._theme.valueAxis=
{}),this.chart._theme.valueAxis.axisLabel||(this.chart._theme.valueAxis.axisLabel={}))},_initChart:function(){this.chart=r.init(this.domNode,this.config&&this.config.theme||"light");this.chartUtils=new a({chart:this.chart});this.gauge=new c({chart:this.chart,chartUtils:this.chartUtils});this.chartOptionFactory=new e({chart:this.chart,gauge:this.gauge,chartUtils:this.chartUtils});this._specialChartTheme(this.config)}})})},"jimu/dijit/_chartUtils":function(){define("dojo/_base/declare jimu/utils esri/lang dojo/_base/lang libs/echarts/echarts dojo/i18n!dojo/cldr/nls/number".split(" "),
function(H,n,y,v,k,r){var p={curved:{name:"",type:"gauge",center:["50%","60%"],startAngle:200,endAngle:-20,axisLine:{lineStyle:{color:[[.31,"#5CB4CA"],[1,"#E5E5E5"]],shadowColor:"rgba(0, 0, 0, 0.5)",shadowBlur:0}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{distance:-52,textStyle:{color:"#000"}},pointer:{length:"65%",width:5},itemStyle:{opacity:.7},detail:{show:!0,offsetCenter:[0,"68%"],textStyle:{color:"#24B5CC"}},title:{show:!1},data:[{value:0}],animationEasingUpdate:"bounceOut",animationDurationUpdate:500},
vertical:{yAxis:{show:!0,offset:-10,type:"value",interval:1,scale:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal"}},splitLine:{show:!1}},xAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{color:"#E5E5E5"},barGap:"-100%",data:[100],z:1},{name:"",type:"bar",barWidth:30,label:{show:!0,position:"insideTopLeft",offset:[30,-15],textStyle:{}},
data:[{value:40,label:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},itemStyle:{}}],itemStyle:{color:"#24B5CC"},z:10}]},horizontal:{xAxis:{show:!0,offset:-27,type:"value",scale:!1,interval:1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:[]},
series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{color:"#E5E5E5"},barGap:"-100%",data:[100],z:1},{name:"",type:"bar",barWidth:30,label:{show:!0,position:"top",offset:[20,0],textStyle:{}},data:[{value:40,label:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},itemStyle:{}}],itemStyle:{color:"#24B5CC"},z:10}]}};return H([],{constructor:function(a){this.chart=a&&a.chart;this.horIconUrl="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjdweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA3IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3NS4wMDAwMDAsIC0yOTcuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNTAwMDAwLCAxNzAuNTQzODAzKSByb3RhdGUoLTE4MC4wMDAwMDApIHRyYW5zbGF0ZSgtMi41MDAwMDAsIC0xNzAuNTQzODAzKSAiIHBvaW50cz0iNSAxNzAuNTQzODAzIC0xLjcwNTMwMjU3ZS0xMyAxNzQuMDQzODAzIC0xLjY5NjQyMDc4ZS0xMyAxNjcuMDQzODAzIj48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
this.verIconUrl="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI4cHgiIHZpZXdCb3g9IjAgMCA1IDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3Ni4wMDAwMDAsIC0zMjQuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwLjYyODk1MiwgMTcwLjQ1ODY1NCkgcm90YXRlKC05MC4wMDAwMDApIHRyYW5zbGF0ZSgtMzAuNjI4OTUyLCAtMTcwLjQ1ODY1NCkgIiBwb2ludHM9IjMzLjEyODk1MjMgMTcwLjQ1ODY1NCAyOC4xMjg5NTIzIDE3My45NTg2NTQgMjguMTI4OTUyMyAxNjYuOTU4NjU0Ij48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
this.verIconUrlRTL="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI3cHgiIHZpZXdCb3g9IjAgMCA1IDciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkFydGJvYXJkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIxLjAwMDAwMCwgLTQ0Ny4wMDAwMDApIiBmaWxsPSIjOTM5MzkzIj4NCiAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJUcmlhbmdsZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIzLjUwMDAwMCwgNDUwLjUwMDAwMCkgcm90YXRlKC0xODAuMDAwMDAwKSB0cmFuc2xhdGUoLTEyMy41MDAwMDAsIC00NTAuNTAwMDAwKSAiIHBvaW50cz0iMTI2IDQ1MC41IDEyMSA0NTQgMTIxIDQ0NyI+PC9wb2x5Z29uPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+";
a=v.clone(p);this.curved=a.curved;this.vertical=a.vertical;this.horizontal=a.horizontal;this.unitDistance=23;this.defultGrid={top:10,bottom:10,left:10,right:10,containLabel:!0}},getAxisZeroPosition:function(){if(!this.chart)return!1;try{var a=this.chart.convertToPixel({xAxisIndex:0,yAxisIndex:0},[0,0])}catch(b){}if(!a)return{};var c=a[0];a=a[1];var e=this.chart.getHeight(),h=this.chart.getWidth();return{left:c,right:h-c,top:a,bottom:e-a}},getTextWidth:function(a,c){if(!a&&0!==a)return 0;var e=(this.getTextWidth.canvas||
(this.getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");e.font=c;return e.measureText(a).width},getHeightByFontSize:function(a){a=Math.round(a);if("number"!==typeof a||6>a||40<a)return 0;var c=0;a-=6;switch(!0){case 7>=a:c=1*a;break;case 8<=a&&11>=a:c=a-1+2;break;case 12<=a&&15>=a:c=a-2+4;break;case 16<=a&&19>=a:c=a-3+6;break;case 20<=a&&21>=a:c=a-4+8;break;case 22<=a&&23>=a:c=a-5+8;break;case 24<=a&&27>=a:c=a-6+10;break;case 28<=a&&31>=a:c=a-7+12;break;case 32<=a&&34>=a:c=a-
8+14}return 8+c},tryLocaleNumber:function(a){var c=a;if(y.isDefined(a)&&isFinite(a))try{var e=n.localizeNumber(a);"string"===typeof e&&(c=e)}catch(h){console.error(h)}return c+""},isStrictNaN:function(a){return"number"===typeof a&&isNaN(a)},isNumberString:function(a){if(!a)return!1;a=Number(a);return"number"!==typeof a||isNaN(a)?!1:!0},isLocaleNumberString:function(a){if(!a)return!1;if(this.isNumberString(a))return!0;a=a.replace(new RegExp("\\"+r.group,"g"),"");return this.isNumberString(a)?!0:!1},
localizeNumberForDigitSeparator:function(a,c){if(!this.isLocaleNumberString(a))return a;var e=new RegExp("\\"+r.group,"g");return a.toString().match(e)?c?a:a.toString().replace(e,""):this._localizeNumberForDigitSeparator(a,c)},_localizeNumberForDigitSeparator:function(a,c){a=n.localizeNumber(a);return!1===c?a.toString().replace(new RegExp("\\"+r.group,"g"),""):a},isAxisChart:function(a){return"column"===a.type||"bar"===a.type||"line"===a.type},isBaseChartType:function(a){return this.isAxisChart(a)||
"pie"===a.type},_getTooltipDisplayValue:function(a,c){"number"===typeof Number(a)&&(a=c?n.convertNumberToPercentage(a):this.tryLocaleNumber(a));return a},generateToolTip:function(a,c,e,h,b){var d="";d=e?'\x3cdiv class\x3d"tooltip-tr reverse"\x3e':'\x3cdiv class\x3d"tooltip-tr"\x3e';e="";a.color&&"auto"!==a.color&&(e='\x3cdiv class\x3d"colorEl marginRight5" style\x3d"background-color:'+n.encodeHTML(a.color)+'"\x3e\x3c/div\x3e');d+=e;e="";"radar"!==a.seriesType&&this._isVaildValue(a.seriesName)?e=a.seriesName:
this._isVaildValue(b)&&(e=b);d=""===e?d+("\x3cdiv\x3e"+e+"\x3c/div\x3e"):d+("\x3cdiv\x3e"+e+"\x3c/div\x3e\x3cdiv\x3e : \x3c/div\x3e");b="null";this._isNotZeroBoolean(c)?b=c:this._isVaildValue(a.value)&&(b=a.value);d+="\x3cdiv\x3e"+this._getTooltipDisplayValue(b,h)+"\x3c/div\x3e";"pie"===a.seriesType&&(a=a.percent,a=this._isVaildValue(a)?a/100:0,d+='\x3cdiv class\x3d"space-left"\x3e('+n.convertNumberToPercentage(a)+")\x3c/div\x3e");return d+"\x3c/div\x3e"},handleToolTip:function(a,c,e,h,b){var d='\x3cdiv class\x3d"tooltip-div"\x3e';
Array.isArray(a)||(a=[a]);this._isVaildValue(a[0].name)&&(d+='\x3cdiv class\x3d"tr"\x3e'+a[0].name+"\x3c/div\x3e");a.forEach(function(f){d="radar"!==f.seriesType?d+this.generateToolTip(f,c,e,h,b):d+this._handleRadarTooltip(f,e,h,b)}.bind(this));return d+="\x3c/div\x3e"},_handleRadarTooltip:function(a,c,e,h){var b="";(a.value||[]).forEach(function(d,f){b+=this.generateToolTip(a,d,c,e,h[f])}.bind(this));return b},_isVaildValue:function(a){return"%00-"===encodeURI(a)?!1:this._isNotZeroBoolean(a)},_isNotZeroBoolean:function(a){return 0===
a?!0:!!a},settingAdvanceOption:function(a,c){c.advanceOption&&("object"===typeof c.advanceOption?v.mixin(a,c.advanceOption):"function"===typeof c.advanceOption&&c.advanceOption(a));return a},settingColor:function(a,c){c.color&&c.color[0]&&(a.color=c.color);return a},settingToolTip:function(a,c){var e=c.type;a.tooltip||(a.tooltip={});e={confine:!0,trigger:"radar"===e||"pie"===e?"item":"axis",axisPointer:"pie"!==e?{type:"line"===e?"cross":"shadow",snap:!0}:{type:""}};c=c.tooltip||e;a.tooltip.confine=
c.confine?c.confine:e.confine;a.tooltip.trigger=c.trigger?c.trigger:e.trigger;a.tooltip.axisPointer=c.axisPointer?c.axisPointer:e.axisPointer;return a},settingDataZoom:function(a,c,e,h){return this.isAxisChart(c)&&c.series&&c.series.length?c.dataZoom&&c.dataZoom.length?a=this._settingDataZoom(c,a,e,h):(a.dataZoom=[],a):a},_settingDataZoom:function(a,c,e,h){if(!this.chart)return c;var b=this.chart.getWidth(),d=a.series[0].data.length,f=a.series.length;d=a.stack?d:d*f;if(!d||!b)return c.dataZoom=[],
c;b="bar"!==a.type?window.isRTL?e.left:b-e.left-c.grid.right:e.top;var l=20>b/d;e=a.dataZoomOption&&a.dataZoomOption.mode||"AUTO";var t=0,z=100;h?(t=Number(h[0]),z=Number(h[1])):"AUTO"===e&&(t=0,z=b/(20*d),z=parseFloat(100*z,10).toFixed(3),z=100<z?100:z,z=0===z?.01:z);h=[];var B="bar"===a.type?"yAxisIndex":"xAxisIndex";h=a.dataZoom.map(v.hitch(this,function(x){x={type:x,show:l};x[B]=[0];x.start=t;x.end=z;x.showDataShadow=!1;x.realtime=!1;return x}));c.dataZoom=h;return c},mockChartDataWhenNoData:function(a){a&&
Array.isArray(a.labels)&&0===a.labels.length&&a.labels.push("");a&&Array.isArray(a.series)&&0<a.series.length&&a.series.forEach(function(c){c&&Array.isArray(c.data)&&0===c.data.length&&c.data.push(0)});return a},settingDefaultGrid:function(a){a.grid=v.clone(this.defultGrid);return a},settingGrid:function(a,c){if(!this.isAxisChart(c))return a;a.grid.containLabel=c.yAxis&&c.yAxis.show;var e=c.layout;if(!e||!e.length)return a;var h=0,b=0,d=0,f=0,l=1;e.forEach(function(x){x=x.layout&&x.layout.position;
if("xAixsName"===name||"yAixsName"===name)l=.7;"t"===x?h+=l:"b"===x?b+=l:"l"===x?d+=l:"r"===x&&(f+=l)}.bind(this));var t=v.clone(this.defultGrid);e=t.top||0;var z=t.bottom||0,B=t.left||0;t=t.right||0;e+=this.unitDistance*h;z+=this.unitDistance*b;B+=this.unitDistance*d;t+=this.unitDistance*f;c.yAxis&&!c.yAxis.show&&(z+=this.unitDistance);a.grid.top=e;a.grid.bottom=z;a.grid.left=B;a.grid.right=t;a=this._settingxAxisNameGap(a,c);return a=this._settingGridForMarkName(a,c)},_settingGridForMarkName:function(a,
c){var e=c.markLine,h=c.markArea,b=[],d=[];e&&e.data&&e.data.length&&e.data.forEach(function(f){this._hasEndPosName(f)&&b.push(f.name+"");this._hasStartPosName(f)&&d.push(f.name+"")}.bind(this));h&&h.data&&h.data.length&&h.data.forEach(function(f){f=f[0];this._hasOutRightAxisName(c.type,f)&&b.push(f.name+"");this._hasOutLeftAxisName(c.type,f)&&d.push(f.name+"")}.bind(this));if(!b.length&&!d.length)return a;if("bar"===c.type)return a.grid.top+=15,a;e=this._getyAxisLabelWidth(c);h=this._getMaxLengthString(b);
h=this.getTextWidth(h,"normal 12px sans-serif");window.isRTL?a.grid.left+=h:a.grid.right+=h;h=this._getMaxLengthString(d);h=this.getTextWidth(h,"normal 12px sans-serif");h-=e;if(0>=h)return a;h+=10;window.isRTL?a.grid.right=h:a.grid.left=h;return a},_getyAxisLabelWidth:function(a){var c=a&&a.yAxis;return c&&c.show?(a=this._getMaxData(a))||0===a?this.getTextWidth(a,"normal "+(c&&c.textStyle&&c.textStyle.fontSize||12)+"px sans-serif"):0:0},_getMaxData:function(a){if((a=a.series)&&a.length)return a=
a.map(function(c){if((c=c.data)&&c.length)return c.map(function(e){if("number"===typeof e)var h=e;else e&&"undefined"!==typeof e.value&&(h=e.value);return h=parseInt(h,10)})}).map(function(c){if(c.length)return Math.max.apply(Math,c)}),a.length&&Math.max.apply(Math,a)},_getMaxLengthString:function(a){return a.sort(function(c,e){c=this.getTextWidth(c);e=this.getTextWidth(e);return e-c}.bind(this))[0]},_hasOutRightAxisName:function(a,c){var e=c.name||0===c.name;c=c.label;var h=window.isRTL?"eft":"ight";
a=c&&c.position&&-1<c.position.indexOf("bar"===a?"op":h);c=c&&c.position&&-1<c.position.indexOf("inside");return e&&a&&!c},_hasOutLeftAxisName:function(a,c){var e=c.name||0===c.name;c=c.label;var h=window.isRTL?"ight":"eft";a=c&&c.position&&-1<c.position.indexOf("bar"===a?"op":h);c=c&&c.position&&-1<c.position.indexOf("inside");return e&&a&&!c},_hasEndPosName:function(a){var c=a.label;c=!c||!c.position||"end"===c.position;return(a.name||0===a.name)&&c},_hasStartPosName:function(a){var c=a.label;c=
!c||!c.position||"start"===c.position;return(a.name||0===a.name)&&c},_settingxAxisNameGap:function(a,c){if(!this.isAxisChart(c)||!a.xAxis)return a;c=this.getHeightByFontSize(c.xAxis&&c.xAxis.textStyle&&c.xAxis.textStyle.fontSize||12);a.xAxis.nameGap=10+c;return a},calcDefaultLayout:function(a){if(this.isBaseChartType(a)){var c=a.legend,e=a.xAxis,h=null;a=a.type;"pie"!==a&&(h="bar"!==a?{name:"dataZoom",layout:{position:"t",inner:!1}}:{name:"dataZoom",layout:{position:window.isRTL?"l":"r",inner:!1}});
a=null;c&&c.show&&(a={name:"legend",layout:{position:"b",inner:!1}});c=null;e&&e.show&&"undefined"!==typeof e.name&&(c={name:"xAxisName",layout:{position:"b",inner:!1}},a&&(c.layout.inner=!0));e=[];a&&e.push(a);h&&e.push(h);c&&e.push(c);return e.length&&e}},settingRenderOption:function(a,c){if("curved"===c.shape)return a.animationThreshold=99999999,a.hoverLayerThreshold=99999,a.progressiveThreshold=99999,a;a.hoverLayerThreshold=500;a.progressiveThreshold=500;a.progressive=100;a.animationThreshold=
500;return a},settingBackgroundColor:function(a,c){c.backgroundColor&&(a.backgroundColor=c.backgroundColor);return a},settingAxisChartAxis:function(a,c){var e=c.xAxis,h=c.yAxis,b={nameLocation:"center"},d={nameLocation:"center"};"column"===c.type||"line"===c.type&&c.labels?(b.data=c.labels,b.type="category",d.type="value"):"bar"===c.type&&c.labels&&(d.data=c.labels,d.type="category",b.type="value");if(e){b.name=e.name;b.show=!!e.show;b.axisLabel||(b.axisLabel={});e.textStyle&&(b.axisLabel=e.textStyle);
e.nameTextStyle&&(b.nameTextStyle=e.nameTextStyle);var f=e.format;f&&("int"===f.type?b.minInterval=1:"float"===f.type&&(b.minInterval=0),"undefined"!==typeof f.digitSeparator&&(b.axisLabel.formatter=function(t){return this.localizeNumberForDigitSeparator(t,f.digitSeparator)}.bind(this)))}if(h){d.show=!!h.show;h.textStyle&&(d.axisLabel=h.textStyle);var l=h.format;l&&("int"===l.type?d.minInterval=1:"float"===l.type&&(d.minInterval=0),"undefined"!==typeof l.digitSeparator&&(d.axisLabel.formatter=function(t){return this.localizeNumberForDigitSeparator(t,
l.digitSeparator)}.bind(this)))}a.xAxis=b;a.yAxis=d;return a},settingRadar:function(a,c){if("radar"!==c.type)return a;a.radar={nameGap:6,radius:"70%"};a.radar.axisLabel={show:!0,formatter:function(){}};c.radarShape&&(a.radar.shape=c.radarShape);c.indicator?(this._handleRadarIndicator(c),a.radar.indicator=c.indicator):console.error("No radar indicator");return a},_handleRadarIndicator:function(a){var c=a.series[0].data,e=[];a.indicator.forEach(function(h,b){if("undefined"!==typeof h.max)return h;e=
c.map(function(f){e.push(f.value[b])});var d=Math.max.apply(Math,e);h.max=d})},settingArea:function(a,c){if("line"!==c.type||!c.area)return a;a.series=a.series.map(function(e){e.areaStyle||(e.areaStyle={});"undefined"===typeof e.areaStyle.opacity&&(e.areaStyle.opacity=.4);e.sthisoth=!0;e.smoothMonotone="x";return e});return a},_mockNegativeValue:function(a){return a&&a[0]&&a[0].data?a.map(function(c){c.data=c.data.map(function(e,h){var b=0===h%2;e&&"undefined"!==typeof e.value?(h=e.value,h=Number(h),
e.value=b?-h:h):(h=Number(e),e=-(b?-h:h));return e});return c}):a},hasNegativeValue:function(a){if((a=a.series)&&a[0]&&a[0].data)return a.some(function(c){return c.data.some(function(e){e=e&&"undefined"!==typeof e.value?e.value:e;e=Number(e);return"number"===typeof e&&0>e})})},allNegativeValue:function(a){return(a=a.series)&&a[0]&&a[0].data?a.every(function(c){return c.data.every(function(e){e=e&&e.value?e.value:e;e=Number(e);return"number"===typeof e&&0>e})}):!1},settingStack:function(a,c){c=this._stackForPercent(c);
if("percent"===c.stack){var e=this.hasNegativeValue(c),h=this.allNegativeValue(c),b=0,d=1;e&&(b=-1,h&&(d=0));"bar"===c.type?(a.xAxis.max=d,a.xAxis.min=b):(a.yAxis.max=d,a.yAxis.min=b)}c.stack&&(a.series=a.series.map(function(f){f.stack="stack";return f}));return a},_stackForPercent:function(a){if("percent"!==a.stack)return a;var c=[];a.series.forEach(function(b){v.clone(b.data).forEach(function(d,f){c[f]||(c[f]=[]);(d=d&&"undefined"!==typeof d.value?d.value:d)||(d=0);c[f].push(d)})});var e=[];c.forEach(function(b,
d){e[d]||(e[d]=0);b.forEach(function(f){e[d]+=Math.abs(f)})});var h=c.map(function(b,d){return b.map(function(f){return 0===e[d]?null:0<=f?Math.abs(f)/e[d]:-Math.abs(f)/e[d]})});a.series=a.series.map(function(b,d){var f=v.clone(b.data);f=f.map(function(l,t){if(!l)return l;"undefined"!==typeof l.value?l.value=h[t][d]:l=h[t][d];return l});b.data=f;return b});return a},settingLegend:function(a,c){var e=c.legend;if(!e)return a.legend={show:!1},a;var h={show:e.show,type:"scroll",itemHeight:11,orient:"horizontal",
pageButtonPosition:"end",pageTextStyle:{color:"#939393"}};e.textStyle&&(h.textStyle=e.textStyle);h.formatter=function(b){b=b||"";return 25<b.length?k.format.truncateText(b,140,null,"\u2026"):b};h.tooltip={show:!0,confine:!1,formatter:function(b){b=b&&b.name||"";if(!(25>=b.length))return b}};a.legend=h;return a=this._handleLegendRTL(a,c)},_handleLegendRTL:function(a,c){if(!c.legend)return a;c={};window.isRTL?(c.x="right",c.pageButtonPosition="start"):(c.x="left",c.pageButtonPosition="end");a.legend=
v.mixin(a.legend,c);return a},settingScale:function(a,c){if(!c.scale)return a;if("bar"===c.type)a.xAxis.scale=!0;else if("line"===c.type||"column"===c.type)a.yAxis.scale=!0;return a},pieChartAvoidLegendLabelOverLap:function(a,c){if("pie"!==c.type)return a;var e=c.dataLabel&&c.dataLabel.show?.75:.85;c.legend&&c.legend.show&&(e-=.12);a.series[0].radius[1]=100*e+"%";return a},settingChartLayout:function(a,c){if(!this.isBaseChartType(c))return a;(c=c.layout)&&c.length&&c.forEach(function(e){this._assigneeLayout(a,
e)}.bind(this));return a},avoidAdjoiningColorSameForPie:function(a,c){if("pie"!==c.type||!a.color||2>=a.color.length)return a;a.series&&a.series[0]&&a.series.forEach(v.hitch(this,function(e){var h=e.data.length;0===(h-1)%a.color.length&&(e=e.data[h-1],e.itemStyle||(e.itemStyle={}),e.itemStyle.color||(e.itemStyle.color=a.color[1]))}));return a},_assigneeLayout:function(a,c){var e=c.name;if("xAxisName"!==e&&"yAxisName"!==e){var h=c.layout;c=this._getOperateObjByProperty(a,e);if(!c)return a;var b=this._getSubPosition(h&&
h.subPosition),d=h&&h.position;h=h&&h.inner;var f={};"l"===d?f.left=h?this.unitDistance+this.defultGrid.left-5:this.defultGrid.left-5:"r"===d?f.right=h?this.unitDistance+this.defultGrid.right-5:this.defultGrid.right-5:"t"===d?f.top=h?this.defultGrid.top+this.unitDistance-5:this.defultGrid.top-5:"b"===d&&(f.bottom=h?this.unitDistance+this.defultGrid.bottom-5:this.defultGrid.bottom-5);v.mixin(c,f);v.mixin(c,b);this._specialLegend(c,e,d);this._specialSliderDataZoom(c,e,d);return a}},_getSubPosition:function(a){if("l"===
a)return{left:this.defultGrid.left-5,right:"auto"};if("r"===a)return{right:this.defultGrid.right-5,left:"auto"};if("t"===a)return{top:this.defultGrid.top-5,bottom:"auto"};if("b"===a)return{bottom:this.defultGrid.bottom-5,top:"auto"}},_specialLegend:function(a,c,e){"legend"===c&&(a.orient="l"===e||"r"===e?"vertical":"horizontal")},_specialSliderDataZoom:function(a,c,e){"dataZoom"===c&&("l"===e||"r"===e?(a.orient="vertical",a.width=15):(a.orient="horizontal",a.height=15))},_getOperateObjByProperty:function(a,
c){if("dataZoom"===c)return this._getSliderDataZoom(a);if("legend"===c)return a.legend},_getSliderDataZoom:function(a){var c=null;(a=a.dataZoom)&&a.length&&a.some(function(e){return"slider"===e.type?(c=e,!0):!1});return c},settingAxisSeries:function(a,c){a=this._setTypeToSeries(a,c);a.series=c.series;return a},settingMarks:function(a,c){a=this.settingMarkLine(a,c);return a=this.settingMarkArea(a,c)},settingMarkLine:function(a,c){(c=c.markLine)&&c.data&&(c.silent=!0,c.data.forEach(function(e){e.label||
(e.label={show:!1,position:"end"});"undefined"!==typeof e.name&&(e.label.show=!0,e.label.formatter=e.name)}),a.series[0].markLine=v.clone(c));return a},settingMarkArea:function(a,c){c.markArea&&(this._handleMarkAreaRTL(c.markArea),c.markArea.silent=!0,a.series[0].markArea=c.markArea);return a},_handleMarkAreaRTL:function(a){window.isRTL&&a&&a.data&&a.data.length&&a.data.forEach(function(c){var e=(c=c&&c[0]&&c[0].label)&&c.position;e&&("left"===e?e="right":"right"===e?e="left":"insideLeft"===e?e="insideRight":
"insideRight"===e&&(e="insideLeft"),c.position=e)})},_settingSeriesDataLabel:function(a,c){c=c.dataLabel;if(!c)return a;var e={};e.show=!!c.show;"undefined"!==typeof c.textStyle&&(e.textStyle=c.textStyle);a.series.forEach(function(h){h.label=e});return a},settingRadarSeries:function(a,c){a=this._setTypeToSeries(a,c);a.series=c.series.map(v.hitch(this,function(e){e.data=this._handleSeriesDataForPieLikeType(e,c);return e=this._settingRaderSerie(e,c)}));return a},_settingRaderSerie:function(a,c){if("radar"!==
a.type)return a;var e=c.indicator.map(function(h){return h.name});a.tooltip={};a.tooltip.formatter=function(h){return this.handleToolTip(h,null,!1,!1,e)};return a},settingFunnelSeries:function(a,c){a=this._setTypeToSeries(a,c);a.series=c.series.map(v.hitch(this,function(e){e.data=this._handleSeriesDataForPieLikeType(e,c);return e=this._settingFunnelSerie(e,c)}));return a},_settingFunnelSerie:function(a,c){if("funnel"!==a.type)return a;a.minSize="0%";a.maxSize="100%";a.min=c.min.value;a.max=c.max.value;
a.sort=c.funnelSort||"descending";return a},settingPieSeries:function(a,c){a=this._setTypeToSeries(a,c);a.series=c.series.map(v.hitch(this,function(e){e.data=this._handleSeriesDataForPieLikeType(e,c);return e=this._settingPieSerie(e,c)}));return a},_settingPieSerie:function(a,c){if("pie"!==a.type)return a;var e=c.dataLabel&&c.dataLabel.show;a.selectedMode="single";a.selectedOffset=10;a.hoverOffset=5;a.radius=[0,"70%"];a.labelLine={show:!0,length:5,length2:5};a.labelLine.show="undefined"===typeof c.labelLine?
!0:c.labelLine;e||(a.labelLine.show=!1);"number"===typeof c.innerRadius&&(0>c.innerRadius&&(c.innerRadius=0),60<c.innerRadius&&(c.innerRadius=60),a.radius[0]=c.innerRadius+"%");"rose"===c.pieMode&&(a.roseType=c.roseType||"radius");return a=this._absoluteValueForPieChart(a)},_absoluteValueForPieChart:function(a){if(!a||!a.data||!a.data[0])return a;a.data=a.data.map(function(c){"number"===typeof c?c=Math.abs(c):"object"===typeof c&&"number"===typeof c.value&&(c.value=Math.abs(c.value));return c});return a},
_handleSeriesDataForPieLikeType:function(a,c){return a.data.map(v.hitch(this,function(e,h){var b={};e||"number"===typeof e?(b.value="undefined"!==typeof e.value?e.value:e,e.itemStyle&&(b.itemStyle||(b.itemStyle={}),b.itemStyle=v.mixin(b.itemStyle,e.itemStyle))):b.value=e;b.name=c.labels[h]||"";return b}))},_setTypeToSeries:function(a,c){var e=c.series;if(!e)return a;e.forEach(function(h){h.type||(h.type=c.type);h.type="column"===c.type?"bar":c.type});return a},splitAxisStackColumn:function(a,c){var e=
a.series;if(!e||!e.length)return a;var h;e.some(function(f){f=f.data;if(!f||!f.length)return!0;f.some(function(l){if(l&&l.itemStyle&&"undefined"!==typeof l.itemStyle.color&&"line"!==c.type)return h=c.stack?"stack":"single",!0;h=!1})});var b=0;"single"===h?b=.1:"stack"===h&&(b=1);var d="";"stack"===h&&(d="#fff",c.backgroundColor&&"transparent"!==c.backgroundColor&&(d=c.backgroundColor));a.series=a.series.map(function(f){if("bar"===f.type||"pie"===f.type)f.itemStyle||(f.itemStyle={}),f.emphasis||(f.emphasis=
{}),f.itemStyle.borderWidth=b,f.emphasis.borderWidth=b,d?(f.itemStyle.borderColor=d,f.emphasis.borderColor=d):(f.itemStyle.borderColor="transparent",f.emphasis.borderColor="transparent");return f});return a},preProcessConfig:function(a,c){c.min=c.min||{value:0,format:{digitSeparator:!0}};c.max=c.max||{value:1E3,format:{digitSeparator:!0}};return a},settingLabelColor:function(a,c){var e="#000";c.gaugeOption&&c.gaugeOption.labelColor&&(e=c.gaugeOption.labelColor);"curved"===c.shape?a.series[0].axisLabel.textStyle.color=
e:"horizontal"===c.shape?a.xAxis.axisLabel.textStyle.color=e:"vertical"===c.shape&&(a.yAxis.axisLabel.textStyle.color=e);return a},settingValueStyle:function(a,c){var e=c.gaugeOption&&c.gaugeOption.valueStyle,h=e&&e.textStyle;e=e&&e.formatter;h&&v.mixin("curved"===c.shape?a.series[0].detail.textStyle:a.series[1].data[0].label.textStyle,h);e&&("curved"===c.shape?a.series[0].detail.formatter=e:a.series[1].data[0].label.formatter=e);return a},settingGaugeColumnColor:function(a,c){var e=c.gaugeOption&&
c.gaugeOption.bgColor;c=c.gaugeOption&&c.gaugeOption.columnColor;e&&(a.series[0].itemStyle.color=e);c&&(a.series[1].data[0].itemStyle.color=c);return a},initHorizontalOption:function(a){v.mixin(a,this.horizontal);return a},setHorizontalGrid:function(a){a.grid={top:"middle",height:90,left:"10%",right:"10%",containLabel:!0};return a},settingHorizontalAxis:function(a,c){a.xAxis.max=c.max.value;a.xAxis.min=c.min.value;a.xAxis.scale=!0;return a},settingHorizontalSeries:function(a,c){var e=a.series;if(!e||
!e.length)return a;var h=e[1];e[0].data[0]=c.max.value;a=this._handleValueDisplayForColumnGauge(a,c);h.data[0].name=c.labels&&c.labels[0]||"";h.name=c.series[0].name||"";return a},settingHorizontalGaugeRTL:function(a){if(!window.isRTL)return a;a.series[1].label.offset=[-20,0];a.xAxis.inverse=!0;a.yAxis.position="right";return a},initVerticalOption:function(a){v.mixin(a,this.vertical);return a},setVerticalGrid:function(a){a.grid={left:"middle",width:60,top:"10%",bottom:"10%",containLabel:!0};a.grid.left=
this._getGridLeftOfVerticalGauge();return a},settingVerticalAxis:function(a,c){a.yAxis.max=c.max.value;a.yAxis.min=c.min.value;return a},settingVerticalSeries:function(a,c){var e=a.series;if(!e||!e.length)return a;var h=e[1];e[0].data[0]=c.max.value;a=this._handleValueDisplayForColumnGauge(a,c);h.data[0].name=c.labels&&c.labels[0]||"";h.name=c.series[0].name||"";return a},settingVerticalGaugeRTL:function(a,c){if(!window.isRTL)return a;var e=(c.series[0].data[0]+"").length-1;c.gaugeOption&&c.gaugeOption.valueStyle&&
"undefined"!==typeof c.gaugeOption.valueStyle.decimalPlaces&&(e+=c.gaugeOption.valueStyle.decimalPlaces);a.series[1].label.offset=[-17-9*e,-15];a.xAxis.inverse=!0;a.yAxis.position="right";return a},initCurvedOption:function(a){a.series=[this.curved];return a},settingCurvedTooltip:function(a){a.tooltip.formatter=function(c){return this.handleToolTip(c,null,!1)}.bind(this);return a},settingCurvedSeries:function(a,c){var e=a.series&&a.series[0];if(!e)return a;var h=c.max.value,b=c.min.value;e.min=b;
e.max=h;var d=c.series&&c.series[0]&&c.series[0].data&&c.series[0].data[0];d=d||0;e.data[0].value=d;h=d<=b?0:d>=h?1:parseFloat((d-b)/(h-b)).toFixed(2);e.axisLine.lineStyle.color[0][0]=h;if(h=c.labels&&c.labels[0])e.data[0].name=h;e.name=c.series[0]&&c.series[0].name||"";e.axisLine.lineStyle.width=30;a.series=[e];return a},settingCurvedGaugeColor:function(a,c){var e=a.series&&a.series[0];c.gaugeOption&&(c.gaugeOption.bgColor&&(e.axisLine.lineStyle.color[1][1]=c.gaugeOption.bgColor),c.gaugeOption.columnColor&&
(e.axisLine.lineStyle.color[0][1]=c.gaugeOption.columnColor,e.itemStyle.color=c.gaugeOption.columnColor));return a},settingCurvedTargets:function(a,c){if(!a.series)return a;a.series[0].splitNumber=1E3;a.series[0].axisTick.splitNumber=1;a.series[0].axisTick.show=!1;var e=this._getTargetValues(c);return a=this._showTargetsForCurved(a,c,e)},createTargetGraphic:function(a){var c=a.shape,e=[];if("vertical"!==c&&"horizontal"!==c)return e;var h="#000";a.gaugeOption&&a.gaugeOption.labelColor&&(h=a.gaugeOption.labelColor);
var b,d=a.min.value,f=a.max.value;a=this._getTargetValues(a);var l=a.range;a.values.forEach(function(t){if(!(t.value>f||t.value<d)){b=this._calcGraphicPosition(t.value,c);var z=b.top,B=b.textLeft,x=this._createGraphic(b.graphicLeft,z,t,h,"image",c);t=this._createGraphic(B,z,t,h,"text",c);e.push(x);e.push(t)}}.bind(this));l.forEach(function(t){t.value>f||t.value<d||(b=this._calcGraphicPosition(t.value,c),t=this._createGraphic(b.textLeft,b.top,t,h,"text",c),e.push(t))}.bind(this));return e},_calcGraphicPosition:function(a,
c){if("vertical"===c){var e=this.chart.convertToPixel({xAxisIndex:0},0);e=parseFloat(e,10).toFixed(2);e=Number(e);window.isRTL&&(e+=40);var h=e-26;var b=window.isRTL?h+11:h-11-6*(a.toString().length-1);e=this._getyAxisValueTop(a);e-=2}else"horizontal"===c&&(e=this.chart.convertToPixel({yAxisIndex:0},0),e=parseInt(e,10),e=Number(e)+16,h=this._getxAxisValueLeft(a),a=6*(a.toString().length-2),b=h,0<a&&(b=h-a));return{top:e,graphicLeft:h,textLeft:b}},_createGraphic:function(a,c,e,h,b,d){var f=this.horIconUrl;
"vertical"===d&&(f=window.isRTL?this.verIconUrlRTL:this.verIconUrl);var l=null;"image"===b?l={z:10,type:"image",$action:"merge",id:"wab_gid_image-"+n.getRandomString(),left:a,style:{image:f,width:10,height:10},silent:!0,top:c}:"text"===b&&(e=this.localizeNumberForDigitSeparator(e.value,e.format&&e.format.digitSeparator),l={z:10,type:"text",$action:"merge",id:"wab_gid_text-"+n.getRandomString(),left:a,style:{text:e,fill:h,font:"normal 11px sans-serif"},silent:!0});"text"===b&&(l.top="vertical"===d?
c-2:c+11);return l},updateGridForVerticalGauge:function(a){if("gauge"===a.type&&"vertical"===a.shape)return{left:this._getGridLeftOfVerticalGauge(),width:60,top:"10%",bottom:"10%"}},_getTargetValues:function(a){var c=a.gaugeOption&&a.gaugeOption.showTargetValueLabel,e=a.gaugeOption&&a.gaugeOption.showDataRangeLabel,h=a.gaugeOption&&a.gaugeOption.targetValue,b=a.min;a=a.max;var d={values:[],range:[]};h&&c&&h.forEach(function(f){d.values.push(f)});e&&(0>d.values.indexOf(b.value)&&(d.range[0]=b),0>d.values.indexOf(a.value)&&
(d.range[1]=a));return d},_showTargetsForCurved:function(a,c,e){var h=e.values.concat(e.range),b=(c.max.value-c.min.value)/1E3;h.sort(function(d,f){return d.value-f.value});a.series[0].axisLabel.formatter=v.hitch(this,function(d){var f,l;h.forEach(function(t){"undefined"===typeof f&&t.value>=d&&t.value<d+b&&(f=t.value,l=t.format)});"number"===typeof f&&(f=this.localizeNumberForDigitSeparator(f,l&&l.digitSeparator));return f});return a},_handleValueDisplayForColumnGauge:function(a,c){var e=c.min.value,
h=c.max.value;var b=c.series[0].data[0];c=b>=h?h:b<=e?e:b;a.tooltip.formatter=function(d){return this.handleToolTip(d,b,!1)}.bind(this);a.series[1].data[0].value=c;return a},_getGridLeftOfVerticalGauge:function(){return this.chart.getWidth()/2-30},_getxAxisValueLeft:function(a){a=this.chart.convertToPixel({xAxisIndex:0},a);return parseFloat(a,10)-4},_getyAxisValueTop:function(a){a=this.chart.convertToPixel({yAxisIndex:0},a);return parseFloat(a,10)}})})},"jimu/dijit/_Gauge":function(){define(["dojo/_base/declare"],
function(H){return H([],{constructor:function(n){this.chart=n.chart;this.chartUtils=n.chartUtils},produceOption:function(n,y){n=this.chartUtils.preProcessConfig(n,y);"curved"===y.shape?n=this.setCurvedGaugeOption(n,y):"vertical"===y.shape?n=this.setVerticalGaugeOption(n,y):"horizontal"===y.shape?n=this.setHorizontalGaugeOption(n,y):console.error("invaild gauge shape");n=this.chartUtils.settingLabelColor(n,y);return n=this.chartUtils.settingValueStyle(n,y)},setCurvedGaugeOption:function(n,y){n=this.chartUtils.initCurvedOption(n);
n=this.chartUtils.settingCurvedSeries(n,y);n=this.chartUtils.settingCurvedTooltip(n,y);n=this.chartUtils.settingCurvedGaugeColor(n,y);return n=this.chartUtils.settingCurvedTargets(n,y)},setVerticalGaugeOption:function(n,y){n=this.chartUtils.initVerticalOption(n,this.vertical);n=this.chartUtils.setVerticalGrid(n);n=this.chartUtils.settingVerticalAxis(n,y);n=this.chartUtils.settingVerticalSeries(n,y);n=this.chartUtils.settingGaugeColumnColor(n,y);return n=this.chartUtils.settingVerticalGaugeRTL(n,y)},
setHorizontalGaugeOption:function(n,y){n=this.chartUtils.initHorizontalOption(n,this.horizontal);n=this.chartUtils.setHorizontalGrid(n);n=this.chartUtils.settingHorizontalAxis(n,y);n=this.chartUtils.settingHorizontalSeries(n,y);n=this.chartUtils.settingGaugeColumnColor(n,y);return n=this.chartUtils.settingHorizontalGaugeRTL(n,y)},resetGraphic:function(n){if("horizontal"===n.shape||"vertical"===n.shape)n=this.chartUtils.createTargetGraphic(n),this.clearGraphic(),this.chart.setOption({graphic:n}),this.cacheGraphic=
null,this.cacheGraphic=n},clearGraphic:function(){this.cacheGraphic&&(this.cacheGraphic.forEach(function(n){n.$action="remove"}),this.chart.setOption({graphic:this.cacheGraphic}))},resetGrid:function(n){("horizontal"===n.shape||"vertical"===n.shape)&&(n=this.chartUtils.updateGridForVerticalGauge(n))&&this.chart.setOption({grid:n})}})})},"jimu/dijit/_ChartOptionFactory":function(){define(["dojo/_base/declare"],function(H){return H([],{constructor:function(n){this.chart=n.chart;this.gauge=n.gauge;this.chartUtils=
n.chartUtils},produceOption:function(n){if(n&&n.type){var y=n.type,v={};v=this.setCommonOption(v,n);this.chartUtils.isAxisChart(n)?v=this.setAxisChartOption(v,n):"pie"===y?v=this.setPieChartOption(v,n):"funnel"===y?v=this.setFunnelChartOption(v,n):"radar"===y?v=this.setRadarChartOption(v,n):n.shape&&(v=this.setGaugeChartOption(v,n));return v=this.chartUtils.settingAdvanceOption(v,n)}},setPieChartOption:function(n,y){n=this.chartUtils.settingPieSeries(n,y);n=this.chartUtils._settingSeriesDataLabel(n,
y);n=this.chartUtils.pieChartAvoidLegendLabelOverLap(n,y);return n=this.chartUtils.avoidAdjoiningColorSameForPie(n,y)},setGaugeChartOption:function(n,y){return n=this.gauge.produceOption(n,y)},setFunnelChartOption:function(n,y){return n=this.chartUtils.settingFunnelSeries(n,y)},setRadarChartOption:function(n,y){n=this.chartUtils.settingRadar(n,y);return n=this.chartUtils.settingRadarSeries(n,y)},setAxisChartOption:function(n,y){n=this.chartUtils.settingDefaultGrid(n,y);n=this.chartUtils.settingAxisChartAxis(n,
y);n=this.chartUtils.settingAxisSeries(n,y);n=this.chartUtils.settingMarks(n,y);n=this.chartUtils._settingSeriesDataLabel(n,y);n=this.chartUtils.splitAxisStackColumn(n,y);n=this.chartUtils.settingStack(n,y);n=this.chartUtils.settingArea(n,y);return n=this.chartUtils.settingScale(n,y)},setCommonOption:function(n,y){this.chart._theme||(this.chart._theme={});n=this.chartUtils.settingRenderOption(n,y);n=this.chartUtils.settingBackgroundColor(n,y);n=this.chartUtils.settingColor(n,y);n=this.chartUtils.settingToolTip(n,
y);return n=this.chartUtils.settingLegend(n,y)}})})},"libs/echarts/light":function(){(function(H,n){"function"===typeof define&&define.amd?define(["exports","./echarts"],n):"object"===typeof exports&&"string"!==typeof exports.nodeName?n(exports,require("./echarts")):n({},H.echarts)})(this,function(H,n){n?n.registerTheme("light",{color:"#2ec7c9 #b6a2de #5ab1ef #ffb980 #d87a80 #8d98b3 #e5cf0d #97b552 #95706d #dc69aa #07a2a4 #9a7fd1 #588dd5 #f5994e #c05050 #59678c #c9ab00 #7eb00a #6f5553 #c14089".split(" "),
textStyle:{},title:{textStyle:{color:"#008acd"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"6",symbol:"circle",smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},itemStyle:{normal:{color:"#686868"},emphasis:{color:"#686868"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},
axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},
toolbox:{iconStyle:{normal:{borderColor:"#2ec7c9"},emphasis:{borderColor:"#18a4a6"}}},legend:{textStyle:{color:"#333333"}},tooltip:{axisPointer:{lineStyle:{color:"#008acd",width:"1"},crossStyle:{color:"#008acd",width:"1"}}},dataZoom:{backgroundColor:"#F4F4F4",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#E0E0E0",handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",
handleColor:"#777777",handleSize:"100%",borderColor:"#F4F4F4",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"libs/echarts/dark":function(){(function(H,n){"function"===typeof define&&define.amd?define(["exports","./echarts"],n):"object"===typeof exports&&"string"!==typeof exports.nodeName?n(exports,require("./echarts")):n({},H.echarts)})(this,function(H,n){n?n.registerTheme("dark",{color:"#fc97af #87f7cf #f7f494 #72ccff #f7c5a0 #d4a4eb #d2f5a6 #76f2f2".split(" "),
textStyle:{},title:{textStyle:{color:"#ffffff"},subtextStyle:{color:"#dddddd"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#1E5F6F"]]}},itemStyle:{normal:{color:"#D9D9D9"},emphasis:{color:"#D9D9D9"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},
axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)",
"rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},tooltip:{axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},dataZoom:{backgroundColor:"#525252",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#737373",handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",
handleColor:"#BDBDBD",handleSize:"100%",borderColor:"#525252",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"jimu/dijit/_StatisticsChartSettings":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dojo/on dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_StatisticsChartSettings.html dijit/ColorPalette jimu/dijit/CheckBox".split(" "),
function(H,n,y,v,k,r,p,a,c,e,h,b,d,f){return H([c,e,h,a],{baseClass:"jimu-dijit-statistics-chart-settings",templateString:b,colors:{c1:"#5d9cd3 #eb7b3a #a5a5a5 #febf29 #4673c2 #72ad4c".split(" "),c2:"#5d9cd3 #a5a5a5 #4673c2 #285f8f #636363 #274577".split(" "),c3:"#eb7b3a #febf29 #72ad4c #9c4618 #987214 44682e".split(" "),c4:"#72ad4c #4673c2 #febf29 #44682e #274577 #987214".split(" "),g1:["#43729b","#c4d5ea"],g2:["#ac5928","#f5ccbf"],g3:["#787878","#d8d8d8"],g4:["#bb8b1b","#fee1be"],g5:["#30538d",
"#c0c9e3"],g6:["#517e36","#c9dbc2"],g7:["#c4d5ea","#43729b"],g8:["#f5ccbf","#ac5928"],g9:["#d8d8d8","#787878"],g10:["#fee1be","#bb8b1b"],g11:["#c0c9e3","#30538d"],g12:["#c9dbc2","#517e36"]},palette:null,defaultSingleColor:"#5d9cd3",multiColorValue:"c1",imagesUrl:window.require.toUrl("jimu/css/images/chart/"),isInWidget:!1,type:"",singleColor:!1,config:null,postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart},postCreate:function(){this.inherited(arguments);this._initSelf();this.isInWidget&&
this._bindEvents();this.own(p(this.multiColorSection,"click",n.hitch(this,function(l){l=l.target||l.srcElement;if(v.hasClass(l,"multi-color")&&!v.hasClass(l,"selected")){var t=this.multiColorValue;this._selectMultiColorDiv(l);t!==l.colorValue&&this.isInWidget&&this._configChange()}})))},_initSelf:function(){this.config=n.clone(this.config);this.cbxAxisX=new f({label:this.nls.horizontalAxis});this.cbxAxisX.placeAt(this.divAxisX);this.cbxAxisY=new f({label:this.nls.verticalAxis});this.cbxAxisY.placeAt(this.divAxisY);
this.cbxLegend=new f({label:this.nls.legend});this.cbxLegend.placeAt(this.divLegend);this.cbxPieLabel=new f({label:this.nls.dataLabels});this.cbxPieLabel.placeAt(this.divPieLabel);this._setSingleColorForColorDiv(this.defaultSingleColor);this.palette=new d({palette:"7x10",cellClass:"cursor:pointer",style:{width:"220px"},onChange:n.hitch(this,function(l){var t=this._getSingleColorFromColorDiv();this._setSingleColorForColorDiv(l);this.isInWidget&&t!==l&&this._configChange()})});this.palette.placeAt(this.paletteContainer);
this.palette.startup();y.forEach(["c1","c2","c3","c4"],n.hitch(this,function(l){v.create("div",{"class":"multi-color colorful "+l,tabindex:"0"},this.colorfulContainer).colorValue=l}));y.forEach("g1 g2 g3 g4 g5 g6 g7 g8 g9 g10 g11 g12".split(" "),n.hitch(this,function(l){v.create("div",{"class":"multi-color monochromatic "+l,tabindex:"0"},this.monochromaticContainer).colorValue=l}));this._setMultiColorValue("c1");"pie"===this.type?(this.singleColor=!1,v.setStyle(this.divAxisX,"display","none"),v.setStyle(this.divAxisY,
"display","none")):v.setStyle(this.divPieLabel,"display","none");this.reset();this.config&&this.setConfig(this.config)},_updateLegendDisplayByMode:function(l){if("pie"===this.type)this._showLegendCbx=!0,v.setStyle(this.divLegend,"display","");else if("column"===this.type||"bar"===this.type||"line"===this.type)if("count"===l||"field"===l)v.setStyle(this.divLegend,"display","none"),this._showLegendCbx=!1;else if("feature"===l||"category"===l)this._showLegendCbx=!0,v.setStyle(this.divLegend,"display",
"")},_bindEvents:function(){this.own(p(this.cbxLegend,"change",n.hitch(this,this._configChange)));"pie"===this.type?this.own(p(this.cbxPieLabel,"change",n.hitch(this,this._configChange))):(this.own(p(this.cbxAxisX,"change",n.hitch(this,this._configChange))),this.own(p(this.cbxAxisY,"change",n.hitch(this,this._configChange))))},setConfig:function(l){this.reset();this.cbxAxisX.setValue(!1===l.showHorizontalAxis?!1:!0);this.cbxAxisY.setValue(!1===l.showVerticalAxis?!1:!0);this.cbxPieLabel.setValue(!1===
l.showDataLabel?!1:!0);this.cbxLegend.setValue(!1===l.showLegend?!1:!0);l=n.clone(l.colors||[]);(this.singleColor=1===l.length&&"pie"!==this.type)?this.showSingleColor(l[0]):this.showMultiColor(l)},getConfig:function(){var l={colors:[]};"pie"===this.type?(l.colors=this.colors[this._getMultiColorValue()],2===l.colors.length&&(l.colors=this._createHexColors(l.colors[0],l.colors[1],6)),l.showDataLabel=this.cbxPieLabel.checked):(l.showHorizontalAxis=this.cbxAxisX.checked,l.showVerticalAxis=this.cbxAxisY.checked,
l.colors=this.singleColor?[this._getSingleColorFromColorDiv()]:this.colors[this._getMultiColorValue()]);this._showLegendCbx&&(l.showLegend=this.cbxLegend.checked);return l},_setSingleColorForColorDiv:function(l){v.setStyle(this.colorDiv,"backgroundColor",l);this.colorDiv.bgHex=l},_getSingleColorFromColorDiv:function(){return this.colorDiv.bgHex},_setMultiColorValue:function(l){(l=k("."+l,this.multiColorSection))&&0<l.length&&this._selectMultiColorDiv(l[0])},_selectMultiColorDiv:function(l){k(".multi-color",
this.multiColorSection).removeClass("selected");v.addClass(l,"selected");this.multiColorValue=l.colorValue},_getMultiColorValue:function(){return this.multiColorValue},reset:function(){"pie"===this.type?this.cbxPieLabel.setValue(!0):(this.cbxAxisX.setValue(!0),this.cbxAxisY.setValue(!0));this.singleColor?this.showSingleColor():this.showMultiColor()},showSingleColor:function(l){"pie"===this.type?this.singleColor=!1:(this.singleColor=!0,v.setStyle(this.singleColorSection,"display","block"),v.setStyle(this.multiColorSection,
"display","none"),l&&this._setSingleColorForColorDiv(l))},showMultiColor:function(l){this.singleColor=!1;v.setStyle(this.singleColorSection,"display","none");v.setStyle(this.multiColorSection,"display","block");if(l&&0<l.length){var t=null,z=!1,B;for(B in this.colors)if(t=this.colors[B],z=!1,t.length===l.length&&(z=y.every(t,n.hitch(this,function(x,D){x=new r(x);D=new r(l[D]);return x.toHex().toLowerCase()===D.toHex().toLowerCase()})))){this._setMultiColorValue(B);break}}},showShelter:function(){v.setStyle(this.shelter,
"display","block")},hideShelter:function(){v.setStyle(this.shelter,"display","none")},_configChange:function(){var l=this.getConfig();this.emit("change",l)},_createHexColors:function(l,t,z){var B=[];l=r.fromHex(l);var x=r.fromHex(t);t=(x.r-l.r)/(z-1);var D=(x.g-l.g)/(z-1);x=(x.b-l.b)/(z-1);for(var F=null,I=0;I<z;I++)F=new r,F.r=Math.floor(l.r+t*I),F.g=Math.floor(l.g+D*I),F.b=Math.floor(l.b+x*I),B.push(F.toHex());return B}})})},"widgets/Chart/Query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred esri/tasks/query esri/tasks/QueryTask jimu/utils jimu/dijit/Message".split(" "),
function(H,n,y,v,k,r,p,a){function c(){return{url:"",layerInfo:null,limit:1E4,spatialReference:null,queryType:-1,objectIdField:"",query:{maxRecordCount:1E3,where:"",geometry:null,relationship:k.SPATIAL_REL_INTERSECTS,outFields:["*"],nextIndex:0,allCount:0,objectIds:[],features:[]}}}H=H(null,{currentAttrs:null,constructor:function(e){this.currentAttrs=c();this.currentAttrs.url=e.url;this.currentAttrs.layerInfo=e.layerInfo;this.currentAttrs.spatialReference=e.spatialReference;this.currentAttrs.query.where=
e.where;this.currentAttrs.query.geometry=e.geometry;this.currentAttrs.query.maxRecordCount=e.layerInfo.maxRecordCount||1E3;this.currentAttrs.queryType=this._getQueryType(e.layerInfo);this.currentAttrs.objectIdField=p.getObjectIdField(e.layerInfo);e.relationship&&(this.currentAttrs.query.relationship=e.relationship);e.outFields&&(this.currentAttrs.query.outFields=e.outFields);if(0<e.limit||e.limit>this.currentAttrs.query.maxRecordCount)this.currentAttrs.limit=e.limit},getFeatures:function(){var e=
new v;e=this.currentAttrs.query.where;var h=this.currentAttrs.query.geometry,b=this.currentAttrs.query.relationship;return e=2===this.currentAttrs.queryType?this._getAllFeatures_SupportObjectIds(e,h,b):this._getAllFeatures_NotSupportObjectIds(e,h,b)},_getQueryType:function(e){var h=-1;return h=this._isSupportObjectIds(e)?2:3},_isSupportObjectIds:function(e){var h=0;e.currentVersion&&(h=parseFloat(e.currentVersion));return 10<=h||e.hasOwnProperty("typeIdField")},_getAllFeatures_SupportObjectIds:function(e,
h,b){return this._queryIds(e,h,b).then(n.hitch(this,function(d){if(!(d&&0<d.length))return this.currentAttrs.query.allCount=0,{status:1,count:0,features:[]};var f=d.length;this.currentAttrs.query.allCount=f;this.currentAttrs.query.objectIds=d;this.currentAttrs.query.nextIndex=0;return f>this.currentAttrs.query.maxRecordCount?this._isContinue().then(n.hitch(this,function(l){return l?this._onResultsScroll_SupportObjectIds():{status:-1,count:f,features:[]}})):this._onResultsScroll_SupportObjectIds()}))},
_isContinue:function(){var e=new v,h=window.jimuNls.queryFeatures,b=new a({message:h.tooManyFeaturesTip+" "+h.askForContinue,buttons:[{label:window.jimuNls.common.continue1,onClick:n.hitch(this,function(){e.resolve(!0);b.close()})},{label:window.jimuNls.common.cancel,onClick:n.hitch(this,function(){e.resolve(!1);b.close()})}]});return e},_onResultsScroll_SupportObjectIds:function(){var e=new v,h=this.currentAttrs.query.objectIds,b=this.currentAttrs.query.allCount,d=this.currentAttrs.query.nextIndex,
f=this.currentAttrs.query.maxRecordCount,l=this.currentAttrs.query.relationship;if(d>=b)return e.resolve({status:1,count:b,features:this.currentAttrs.query.features}),e;h=h.slice(d,d+Math.min(h.length-d,f));return 0===h.length?(e.resolve({status:1,count:b,features:this.currentAttrs.query.features}),e):this._queryByObjectIds(h,!0,l).then(n.hitch(this,function(t){t=t.features;this.currentAttrs.query.nextIndex+=t.length;this.currentAttrs.query.features=this.currentAttrs.query.features.concat(t);return this._onResultsScroll_SupportObjectIds()}))},
_getAllFeatures_NotSupportObjectIds:function(e,h,b){return this._doQuery_NotSupportObjectIds(e,h,b).then(n.hitch(this,function(d){return{status:1,count:d.length,features:d}}))},_doQuery_NotSupportObjectIds:function(e,h,b){var d=new v;this._query(e,h,!0,b).then(n.hitch(this,function(f){f=f.features;this.currentAttrs.query.allCount=f.length;d.resolve(f)}),n.hitch(this,function(f){console.error(f);d.reject(f)}));return d},_getOutputFields:function(){return["*"]},_query:function(e,h,b,d){var f=new k;
f.where=e;h&&(f.geometry=h);f.outSpatialReference=this.currentAttrs.spatialReference;f.returnGeometry=!!b;f.spatialRelationship=d;f.outFields=this._getOutputFields();return(new r(this.currentAttrs.url)).execute(f)},_queryIds:function(e,h,b){var d=new k;d.where=e;h&&(d.geometry=h);d.returnGeometry=!1;d.spatialRelationship=b;d.outSpatialReference=this.currentAttrs.spatialReference;return(new r(this.currentAttrs.url)).executeForIds(d)},_queryByObjectIds:function(e,h,b){var d=new v,f=new k;f.returnGeometry=
!!h;f.outSpatialReference=this.currentAttrs.spatialReference;f.outFields=this._getOutputFields();f.objectIds=e;f.spatialRelationship=b;(new r(this.currentAttrs.url)).execute(f).then(n.hitch(this,function(l){d.resolve(l)}),n.hitch(this,function(l){if(400===l.code){var t=this.currentAttrs.objectIdField,z="",B=e.length;y.forEach(e,n.hitch(this,function(x,D){z+=t+" \x3d "+x;D!==B-1&&(z+=" OR ")}));this._query(z,null,h,b).then(n.hitch(this,function(x){d.resolve(x)}),n.hitch(this,function(x){d.reject(x)}))}else d.reject(l)}));
return d}});H.getCleanCurrentAttrsTemplate=c;return H})},"widgets/Chart/a11y/Widget":function(){define(["dojo/keys","dojo/_base/html","dijit/focus"],function(H,n,y){return{_onChartListKeydown:function(v){v.keyCode===H.ENTER&&this._enterIntoChartTr(v.target||v.srcElement)},_onChartParamsKeydown:function(v){v.keyCode===H.ESCAPE&&(v.stopPropagation(),y.focus(this.paramsBack))},_onBtnParamsBackKeydown:function(v){v.keyCode===H.ENTER&&this._onBtnParamsBackClicked()},_onClearBtnKeydown:function(v){var k=
"none"!==n.getStyle(this.chartParams,"display"),r="none"!==n.getStyle(this.chartResults,"display");v.keyCode===H.ESCAPE&&(v.stopPropagation(),k?y.focus(this.paramsBack):r&&y.focus(this.backOptions));v.keyCode!==H.TAB||v.shiftKey||(k?(v.preventDefault(),y.focus(this.btnApply)):r&&(v.preventDefault(),y.focus(this.resultsContainer)));v.keyCode===H.ENTER&&this._onBtnClearAllClicked()},_onApplyBtnKeydown:function(v){v.keyCode===H.ENTER&&this._onBtnApplyClicked()},_onChartResultsKeydown:function(v){v.keyCode===
H.ESCAPE&&(v.stopPropagation(),y.focus(this.backOptions))},_onResultsBackKeydown:function(v){v.keyCode===H.ENTER&&this._onBtnResultsBackClicked()}}})},"widgets/Chart/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/StatisticsChart.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"results-header" data-dojo-attach-point\x3d"resultsHeader" style\x3d"margin-bottom:15px;"\x3e\r\n\t\t\x3cdiv tabindex\x3d"0" class\x3d"chart-title jimu-float-leading" data-dojo-attach-point\x3d"chartTitle"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"paging-section jimu-float-leading"\x3e\r\n\t\t\t\x3cul tabindex\x3d"0" data-dojo-attach-point\x3d"pagingUl" data-dojo-attach-event\x3d"onclick:_onPagingUlClicked, onkeydown:_onPagingUlKeydown"\x3e\x3c/ul\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-float-trailing"\x3e\r\n\t\t\t\x3cdiv role\x3d"button" tabindex\x3d"0" class\x3d"settings jimu-float-leading" data-dojo-attach-point\x3d"settingsIcon"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv role\x3d"button" tabindex\x3d"0" class\x3d"zoomin jimu-float-trailing" data-dojo-attach-point\x3d"zoominIcon"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"chartSection" class\x3d"chart-section"\x3e\r\n\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%;height:100%;table-layout:fixed;"\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"arrow-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.previous}" class\x3d"chart-section-item left-arrow arrow" data-dojo-attach-point\x3d"leftArrow" data-dojo-attach-event\x3d"onclick:_onLeftArrowClicked, onkeydown:_onLeftArrowKeydown"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"content-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item chart-container" data-dojo-attach-point\x3d"chartContainer"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"chart-real-container" data-dojo-attach-point\x3d"chartRealContainer"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv tabindex\x3d"0" class\x3d"description-container" data-dojo-attach-point\x3d"descriptionContainer"\x3e/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"fiald-render-info" data-dojo-attach-point\x3d"faildRenderInfo"\x3e\r\n\t\t\t\t\t\t\t${nls.fieldDisplayChartTip}\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"arrow-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.next}" class\x3d"chart-section-item right-arrow arrow" data-dojo-attach-point\x3d"rightArrow" data-dojo-attach-event\x3d"onclick:_onRightArrowClicked, onkeydown:_onRightArrowKeydown"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_StatisticsChartSettings.html":'\x3cdiv tabIndex\x3d"0"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divAxisX" class\x3d"setting-item"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divAxisY" class\x3d"setting-item"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divLegend" class\x3d"setting-item"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divPieLabel" class\x3d"setting-item"\x3e\x3c/div\x3e\r\n\t\x3cdiv\x3e\r\n\t\t\x3cdiv tabindex\x3d"0" aria-label\x3d"${nls.color}" class\x3d"color-tip"\x3e${nls.color}\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"singleColorSection" class\x3d"single-color-section"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorDiv" class\x3d"single-color-div"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"paletteContainer" class\x3d"palette-container"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"multiColorSection" class\x3d"multi-color-section"\x3e\r\n\t\t\t\x3cdiv class\x3d"colorful-section"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorfulContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"monochromatic-section"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"monochromaticContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"shelter" data-dojo-attach-point\x3d"shelter"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Chart/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"chart-widget-content"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"chartList" class\x3d"chart-step chart-list"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"chartsNode" class\x3d"charts firstFocusNode" tabindex\x3d"0" data-a11y-label-by\x3d"chart-execute-tip"\x3e\r\n        \x3cdiv class\x3d"execute-tip" data-a11y-label-id\x3d"chart-execute-tip"\x3e\r\n          ${nls.executeChartTip}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"charts-table-container"\x3e\r\n          \x3ctable data-dojo-attach-event\x3d"onclick:_onChartListClicked, onkeydown:_onChartListKeydown" cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"charts-table" onselectstart\x3d"return false;"\x3e\r\n            \x3ccolgroup\x3e\r\n              \x3ccol width\x3d"14px"\x3e\x3c/col\x3e\r\n              \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n              \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n            \x3c/colgroup\x3e\r\n            \x3ctbody data-dojo-attach-point\x3d"chartsTbody"\x3e\r\n            \x3c/tbody\x3e\r\n          \x3c/table\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"invalidConfigNode" class\x3d"invalid-config"\x3e\r\n        \x3cdiv class\x3d"error"\x3e\r\n          ${nls.invalidConfig}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"noChartTipSection" class\x3d"no-chart-tip"\x3e\r\n        ${nls.noneChartTip}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"chartParams" data-dojo-attach-event\x3d"onkeydown: _onChartParamsKeydown" class\x3d"chart-step chart-params" style\x3d"display: none;"\x3e\r\n      \x3cdiv class\x3d"step-head chart-params-head"\x3e\r\n        \x3cdiv class\x3d"step-title params-title" data-a11y-label-id\x3d"chart-chart-params"\x3e${nls.chartParams}\x3c/div\x3e\r\n        \x3cdiv class\x3d"operations"\x3e\r\n          \x3cdiv role\x3d"button" aria-label\x3d"${nls.backCharts}" tabindex\x3d"0" data-dojo-attach-point\x3d"paramsBack" class\x3d"params-back jimu-float-leading" data-dojo-attach-event\x3d"onclick:_onBtnParamsBackClicked, onkeydown:_onBtnParamsBackKeydown"\x3e\r\n            \x3cdiv class\x3d"back-icon"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"back-tip"\x3e${nls.charts}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" aria-label\x3d"${nls.apply}" tabindex\x3d"0" class\x3d"apply jimu-float-trailing" data-dojo-attach-point\x3d"btnApply" data-dojo-attach-event\x3d"onclick:_onBtnApplyClicked, onkeydown:_onApplyBtnKeydown"\x3e${nls.apply}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"params-container" tabindex\x3d"0" data-a11y-label-by\x3d"chart-chart-params" data-dojo-attach-point\x3d"paramsContainer"\x3e\r\n        \x3cdiv class\x3d"spatial-section" style\x3d"margin-top:20px; margin-bottom:20px;"\x3e\r\n          \x3cdiv class\x3d"use-spatial-div" data-dojo-attach-point\x3d"cbxUseSpatialDiv"\x3e\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"selectSpatialDiv" class\x3d"select-spatial"\x3e\r\n            \x3cdiv class\x3d"special-tr"\x3e\r\n              \x3cdiv class\x3d"radio-div"\x3e\r\n                \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" data-label-id\x3d"chart-params-map-extent" data-dojo-attach-point\x3d"cbxUseMapExtent" data-dojo-attach-event\x3d"change:_onCbxUseMapExtentClicked" checked/\x3e\r\n              \x3c/div\x3e\r\n              \x3clabel data-label-for\x3d"chart-params-map-extent"\x3e${nls.useCurrentMapExtent}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"special-tr"\x3e\r\n              \x3cdiv class\x3d"radio-div"\x3e\r\n                \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" data-label-id\x3d"chart-params-draw-graphic" data-dojo-attach-point\x3d"cbxDrawGraphic" data-dojo-attach-event\x3d"change:_onCbxDrawGraphicClicked"/\x3e\r\n              \x3c/div\x3e\r\n              \x3clabel data-label-for\x3d"chart-params-draw-graphic"\x3e${nls.drawGraphicOnMap}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"draw-graphic" data-dojo-attach-point\x3d"drawBoxDiv"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"chartResults" data-dojo-attach-event\x3d"onkeydown: _onChartResultsKeydown" class\x3d"chart-step chart-results" style\x3d"display: none;"\x3e\r\n      \x3cdiv class\x3d"step-head chart-results-head"\x3e\r\n        \x3cdiv class\x3d"step-title results-title" data-a11y-label-id\x3d"chart-chart-result"\x3e${nls.chartResults}\x3c/div\x3e\r\n        \x3cdiv class\x3d"operations"\x3e\r\n          \x3cdiv role\x3d"button" data-dojo-attach-point\x3d"backOptions" tabindex\x3d"0" aria-label\x3d"${nls.backOptions}" class\x3d"params-back jimu-float-leading" data-dojo-attach-event\x3d"onclick:_onBtnResultsBackClicked, onkeydown:_onResultsBackKeydown"\x3e\r\n            \x3cdiv class\x3d"back-icon"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"back-tip" data-dojo-attach-point\x3d"btnResultsBack"\x3e${nls.chartParams}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv tabindex\x3d"0" class\x3d"results-container" data-dojo-attach-point\x3d"resultsContainer" data-a11y-label-by\x3d"chart-chart-result"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"btn-section"\x3e\r\n      \x3c!-- aria-disabled\x3d"true" aria-pressed\x3d"true"  --\x3e\r\n    \x3cdiv role\x3d"button" aria-label\x3d"${nls.clearCharts}" tabindex\x3d"0" data-dojo-attach-point\x3d"btnClearAll" data-dojo-attach-event\x3d"onclick:_onBtnClearAllClicked, onkeydown:_onClearBtnKeydown" class\x3d"jimu-btn jimu-priority-secondary btn-clear-all lastFocusNode" title\x3d"${nls.clearResults}"\x3e${nls.clearResults}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Chart/css/style.css":".jimu-widget-chart .charts:focus,.jimu-widget-chart .params-container:focus,.jimu-widget-chart .params-back:focus,.jimu-widget-chart .apply:focus,.jimu-widget-chart .results-container:focus,.jimu-widget-chart .params-back:focus,.jimu-widget-chart .spatial-section .jimu-checkbox:focus,.jimu-widget-chart .btn-clear-all:focus{outline-offset: -2px !important;}.ie-gte-10 .jimu-widget-chart .btn-section .btn-clear-all {margin-bottom: 2px;} .ie-gte-10 .jimu-widget-chart \x3e .chart-widget-content \x3e .chart-list \x3e .charts{width: 99%; height: 99%; left: 2px; top: 2px;}.ie-gte-10 .jimu-widget-chart .spatial-section .jimu-checkbox {margin-left: 2px;}.jimu-rtl .ie-gte-10 .jimu-widget-chart .spatial-section .jimu-checkbox {margin-left: 0; margin-right: 2px;}.ie-gte-10 .jimu-widget-chart .apply {margin: 2px;}.ie-gte-10 .jimu-widget-chart .params-back {margin: 2px;}.ie-gte-10 .jimu-widget-chart \x3e .chart-widget-content \x3e .chart-params \x3e .params-container,.ie-gte-10 .jimu-widget-chart \x3e .chart-widget-content \x3e .chart-results \x3e .results-container {width: 99%; left: 2px;}.ie-gte-10 .jimu-widget-chart \x3e .chart-widget-content \x3e .chart-results \x3e .results-container {overflow: hidden;}.jimu-widget-chart{position: relative; width: 100%; height: 100%; min-width: 222px; min-height: 237px; overflow-x: hidden;}.jimu-widget-chart .chart-widget-content{position: absolute; width: 100%; left: 0; right: 0; height: auto; top: 0; bottom: 53px;}.jimu-widget-chart .btn-section{position: absolute; width: 100%; left: 0; right: 0; bottom: 0; height: auto; text-align: center;}.jimu-widget-chart .btn-section .btn-clear-all{margin-left: auto; margin-right: auto; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-chart .chart-step{position: absolute; width: 100%; height: 100%; top: 0;}.jimu-widget-chart .chart-list{left: 0;}.jimu-widget-chart .chart-list .charts{position: absolute; width: 100%; height: 100%; left: 0; top: 0; overflow-y: auto;}.jimu-widget-chart .chart-list .charts .execute-tip{line-height: 20px;}.jimu-widget-chart .chart-list .charts .charts-table-container{width: 100%; margin-top: 15px;}.jimu-widget-chart .chart-list .charts .charts-table{width: 99%; border-collapse: collapse; table-layout: fixed; margin-left: auto; margin-right: auto;}.jimu-widget-chart .chart-list .charts .charts-table td{height: 30px; line-height: 30px; cursor: pointer;}.jimu-widget-chart .chart-list .charts .charts-table tr *{cursor: pointer;}.jimu-widget-chart .chart-list .charts .charts-table .second-td{color: #686868; font-size: 12px;}.jimu-widget-chart .chart-list .charts .charts-table .chart-name-div{width: 100%; overflow: hidden; text-overflow: ellipsis; height: 100%;}.jimu-widget-chart .chart-list .charts .charts-table .third-td .arrow{background-repeat: no-repeat; background-position: center; background-image: url(images/arrow_right1.png); width: 100%; height: 100%;}.jimu-rtl .jimu-widget-chart .chart-list .charts .charts-table .third-td .arrow{background-image: url(images/rtl_arrow_right1.png);}.jimu-widget-chart .charts-table .jimu-table-row.jimu-state-active .third-td .arrow{background-image: url(images/arrow_right2.png);}.jimu-rtl .jimu-widget-chart .charts-table .jimu-table-row.jimu-state-active .third-td .arrow{background-image: url(images/rtl_arrow_right2.png);}.jimu-widget-chart .charts-table .jimu-table-row:hover .third-td .arrow{background-image: url(images/arrow_right2.png);}.jimu-rtl .jimu-widget-chart .charts-table .jimu-table-row:hover .third-td .arrow{background-image: url(images/rtl_arrow_right2.png);}.jimu-widget-chart .chart-list .invalid-config{display: none; position: absolute; width: 100%; height: 100%; left: 0; top: 0;}.jimu-widget-chart .chart-list .no-chart-tip{display: none; line-height: 20px;}.jimu-widget-chart .step-head{position: relative; width: 100%; height: 30px; line-height: 30px;}.jimu-widget-chart .step-title{position: absolute; width: 100%; height: 100%; left: 0; top: 0; text-align: center; font-size: 14px; color: #86909c;}.jimu-widget-chart .step-head .operations{position: absolute; width: 100%; height: 100%; left: 0; right: 0; top: 0;}.jimu-widget-chart .step-head .operations .params-back{color: blue; cursor: pointer; height: 100%; white-space: nowrap; padding: 0 5px;}.jimu-widget-chart .step-head .operations .params-back \x3e *{display: inline-block; vertical-align: middle;}.jimu-widget-chart .step-head .operations .params-back .back-icon{width: 8px; height: 100%; background-repeat: no-repeat; background-position: center center; background-image: url(images/arrow_left.png); margin-right: 5px;}.jimu-rtl .jimu-widget-chart .step-head .operations .params-back .back-icon{background-image: url(images/rtl_arrow_left.png); margin-right: 0; margin-left: 5px;}.jimu-widget-chart .step-head .operations .params-back .back-tip{height: 100%; color: #51b1fe;}.jimu-widget-chart .chart-params{left: 100%;}.jimu-widget-chart .chart-params-head .operations .apply{cursor: pointer; height: 100%; color: #51b1fe; padding: 0 5px;}.jimu-widget-chart .params-container{position: absolute; width: 100%; left: 0; top: 40px; bottom: 0; overflow-y: auto;}.jimu-widget-chart .params-container .spatial-section .use-spatial-div .jimu-checkbox {width: 100%;}.jimu-widget-chart .params-container .spatial-section .use-spatial-div .jimu-checkbox \x3e .label {width: 90%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-chart .chart-params .draw-graphic{margin-top: 5px; margin-left: 5px;}.jimu-rtl .jimu-widget-chart .chart-params .draw-graphic{margin-left: 0; margin-right: 5px;}.jimu-widget-chart .chart-params .select-spatial{margin-left: 7px; margin-top: 7px;}.jimu-rtl .jimu-widget-chart .chart-params .select-spatial{margin-left: 0; margin-right: 7px;}.jimu-widget-chart .chart-params .select-spatial .special-tr {display: flex; height: 30px; align-items: center;}.jimu-widget-chart .chart-params .select-spatial .radio-div {display: inline-flex; width: 30px; height: 30px; align-items: center; justify-content: center;}.jimu-widget-chart .chart-results{left: 200%;}.jimu-widget-chart .chart-results .results-container{position: absolute; width: 100%; left: 0; top: 50px; bottom: 0; overflow-x: hidden; overflow-y: auto;}",
"*now":function(H){H(['dojo/i18n!*preload*widgets/Chart/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/query dojo/_base/html dojo/_base/array dojo/_base/fx dojo/on dijit/focus dijit/_WidgetsInTemplateMixin jimu/BaseWidget jimu/dijit/Message jimu/dijit/DrawBox jimu/dijit/CheckBox jimu/utils jimu/filterUtils esri/layers/FeatureLayer esri/renderers/SimpleRenderer esri/symbols/jsonUtils jimu/dijit/StatisticsChart ./Query jimu/LayerInfos/LayerInfos jimu/ServiceDefinitionManager jimu/dijit/Popup ./a11y/Widget jimu/dijit/LoadingIndicator dijit/form/RadioButton".split(" "),function(H,
n,y,v,k,r,p,a,c,e,h,b,d,f,l,t,z,B,x,D,F,I,K,L){H=H([e,c],{name:"Chart",baseClass:"jimu-widget-chart",isValidConfig:!1,currentAttrs:null,tempResultLayer:null,previewArgs:null,previewPopup:null,layerInfosObj:null,constructor:function(){this.cachePopUpInfos={}},_resetCurrentAttrs:function(){this.currentAttrs={chartTr:null,config:null,layerInfo:null}},postMixInProperties:function(){this.inherited(arguments);this.isRenderIdForAttrs=!0;this.nls.colorful=this.nls.colorful||"Colorful";this.nls.monochromatic=
this.nls.monochromatic||"Monochromatic";this.nls.clearResults=window.jimuNls.drawBox.clear;this.layerInfosObj=F.getInstanceSync();this.serviceDefinitionManager=I.getInstance();this.config&&(this._setUrlForConfig(),this._updateConfig())},_updateConfig:function(){this.config&&this.config.charts&&0<this.config.charts.length&&k.forEach(this.config.charts,n.hitch(this,function(A){this._rebuildFilter(A.url,A.filter)}))},_setUrlForConfig:function(){this.config&&this.config.charts&&0<this.config.charts.length&&
k.forEach(this.config.charts,n.hitch(this,function(A){if(A.webMapLayerId){var g=this.layerInfosObj.getLayerOrTableInfoById(A.webMapLayerId);g&&(A.url=g.getUrl())}}))},_rebuildFilter:function(A,g){try{if(g){delete g.expr;var m=new l;m.isHosted=f.isHostedService(A);m.getExprByFilterObj(g)}}catch(q){console.log(q)}},postCreate:function(){this.inherited(arguments);this.cbxUseSpatial=new d({label:this.nls.useSpatialFilter});this.cbxUseSpatial.placeAt(this.cbxUseSpatialDiv);this.own(p(this.cbxUseSpatial,
"change",function(){this._onCbxUseSpatialClicked()}.bind(this)));this._initDrawBox();this._initPreview();this._initSelf()},onOpen:function(){this.tempResultLayer&&this.tempResultLayer.show()},onDeActive:function(){this.drawBox.deactivate()},onClose:function(){this.tempResultLayer&&this.tempResultLayer.hide();this._hideInfoWindow();this.drawBox.clear();this.inherited(arguments)},resize:function(){var A="BoxTheme"===this.appConfig.theme.name?1100:100;setTimeout(n.hitch(this,function(){this._updatePreviewHeight();
this.preview.resize()}),A)},destroy:function(){this._clickClearButton(!0);this.inherited(arguments)},_isConfigValid:function(){return this.config&&"object"===typeof this.config},_initDrawBox:function(){this.drawBox=new b({types:["point","polyline","polygon"],map:this.map,showClear:!0,keepOneGraphic:!0});this.drawBox.placeAt(this.drawBoxDiv);this.drawBox.startup()},_createBigPreview:function(){if(this.previewArgs){var A=document.body.clientWidth-40,g=document.body.clientHeight-40;if(!(100>A||100>g)){var m=
this._getDefaultFontColor(),q=0;this.preview&&0<=this.preview.currentChartIndex&&(q=this.preview.currentChartIndex);var u=new x({map:this.map,fontColor:m,isBigPreview:!0,showSettingIcon:!0,showZoomIcon:!1,zoomToFeaturesWhenClick:!0,initialChartIndex:q,style:"width:100%;height:100%;"});this.previewPopup=new K({width:A,height:g,titleLabel:this.nls._widgetLabel,content:u,onClose:n.hitch(this,function(){u.destroy();this.previewPopup=u=null})});var w=this._getPopupFieldInfo()||{};setTimeout(n.hitch(this,
function(){u.createClientCharts(this.preview.featureLayer,this.preview.features,this.preview.config,w)}),100)}}},_getPopupFieldInfo:function(){var A=null;if(this.currentAttrs.config&&"undefined"!==typeof this.currentAttrs.config.webMapLayerId){var g=this.currentAttrs.config.webMapLayerId;if("undefined"!==typeof this.cachePopUpInfos[g])A=this.cachePopUpInfos[g];else{var m=this.layerInfosObj.getLayerInfoById(g);m&&(A=m.getPopupInfo())&&(this.cachePopUpInfos[g]=A)}}return A},_initPreview:function(){var A=
this._getDefaultFontColor();this.preview=new x({map:this.map,fontColor:A,isBigPreview:!1,showSettingIcon:!0,showZoomIcon:!0,zoomToFeaturesWhenClick:!0});this.preview.placeAt(this.resultsContainer);this.preview.startup();this.own(p(this.preview,"zoomin",n.hitch(this,this._createBigPreview)))},_getDefaultFontColor:function(){var A="#333333";"DashboardTheme"!==this.appConfig.theme.name||"default"!==this.appConfig.theme.styles[0]&&"style3"!==this.appConfig.theme.styles[0]?"DartTheme"===this.appConfig.theme.name&&
(A="#fff"):A="#fff";return A},_initSelf:function(){var A="Chart_"+f.getRandomString();this.cbxUseMapExtent.set("name",A);this.cbxDrawGraphic.set("name",A);(this.isValidConfig=this._isConfigValid())?(A=this.config.charts,0===A.length?(v.setStyle(this.chartsNode,"display","none"),v.setStyle(this.noChartTipSection,"display","block")):k.forEach(A,n.hitch(this,function(g,m){var q=g.name,u=v.toDom('\x3ctr tabindex\x3d"0" class\x3d"single-chart jimu-table-row"\x3e\x3ctd class\x3d"first-td"\x3e\x3c/td\x3e\x3ctd class\x3d"second-td"\x3e\x3cdiv class\x3d"chart-name-div"\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd class\x3d"third-td"\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e');
y(".chart-name-div",u)[0].innerHTML=f.stripHTML(q);v.place(u,this.chartsTbody);u.singleConfig=g;0===m%2?v.addClass(u,"even"):v.addClass(u,"odd")}))):(v.setStyle(this.chartsNode,"display","none"),v.setStyle(this.invalidConfigNode,{display:"block",left:0}))},_clickClearButton:function(A){this._hideInfoWindow();this.drawBox.clear();this._removeTempResultLayer();this._clearResultPage();A||this._fromCurrentPageToChartList();a.focus(this.chartsNode)},_slide:function(A,g,m){v.setStyle(A,"display","block");
v.setStyle(A,"left",g+"%");r.animateProperty({node:A,properties:{left:{start:g,end:m,units:"%"}},duration:500,onEnd:n.hitch(this,function(){v.setStyle(A,"left",m);0===m?v.setStyle(A,"display","block"):v.setStyle(A,"display","none")})}).play()},_onChartListClicked:function(A){A=f.getAncestorDom(A.target||A.srcElement,n.hitch(this,function(g){return v.hasClass(g,"single-chart")}),10);this._enterIntoChartTr(A)},_enterIntoChartTr:function(A){if(A){var g=A.singleConfig;this._resetCurrentAttrs();this.currentAttrs.chartTr=
A;this.currentAttrs.config=n.clone(g);this.currentAttrs.layerInfo=this.currentAttrs.chartTr.layerInfo;y("tr.single-chart",this.chartsTbody).removeClass("jimu-state-active");v.addClass(this.currentAttrs.chartTr,"jimu-state-active");var m=n.hitch(this,function(){this.currentAttrs.layerInfo=this.currentAttrs.chartTr.layerInfo;this._fromChartListToChartParams()});this.currentAttrs.chartTr.layerInfo?m():(this.shelter.show(),A=null,this.currentAttrs.config&&"undefined"!==typeof this.currentAttrs.config.webMapLayerId&&
(A=this.layerInfosObj.getLayerInfoById(this.currentAttrs.config.webMapLayerId)),A?A.getServiceDefinition().then(n.hitch(this,function(q){this.domNode&&(this.shelter.hide(),this.currentAttrs.chartTr.layerInfo=q,this.currentAttrs.layerInfo=this.currentAttrs.chartTr.layerInfo,m())}),n.hitch(this,function(q){console.error(q);if(this.domNode){this.shelter.hide();var u="";q&&403===q.httpCode&&(u=this.nls.noPermissionsMsg);this._showQueryErrorMsg(u)}})):this.serviceDefinitionManager.getServiceDefinition(this.currentAttrs.config.url).then(n.hitch(this,
function(q){this.domNode&&(this.shelter.hide(),this.currentAttrs.chartTr.layerInfo=q,this.currentAttrs.layerInfo=this.currentAttrs.chartTr.layerInfo,m())}),n.hitch(this,function(q){console.error(q);if(this.domNode){this.shelter.hide();var u="";q&&403===q.httpCode&&(u=this.nls.noPermissionsMsg);this._showQueryErrorMsg(u)}})))}},_fromCurrentPageToChartList:function(){v.setStyle(this.chartList,"display","block");"block"===v.getStyle(this.chartParams,"display")?(this._slide(this.chartList,-100,0),this._slide(this.chartParams,
0,100)):"block"===v.getStyle(this.chartResults,"display")&&(this._slide(this.chartList,-100,0),this._slide(this.chartResults,0,100))},_onCbxUseSpatialClicked:function(){this.cbxUseSpatial.checked?v.setStyle(this.selectSpatialDiv,"display","block"):v.setStyle(this.selectSpatialDiv,"display","none");this.cbxUseMapExtent.checked?this._onCbxUseMapExtentClicked():this._onCbxDrawGraphicClicked();this._resetDrawBox()},_onCbxUseMapExtentClicked:function(){this.cbxUseMapExtent.checked&&(this._resetDrawBox(),
v.setStyle(this.drawBoxDiv,"display","none"))},_onCbxDrawGraphicClicked:function(){this.cbxDrawGraphic.checked&&v.setStyle(this.drawBoxDiv,"display","block")},_onBtnClearAllClicked:function(){0!==this.chartsTbody.childElementCount&&this._clickClearButton("none"!==this.chartList.style.display)},_resetDrawBox:function(){this.drawBox.deactivate();this.drawBox.clear()},_resetChartParamsPage:function(){this.cbxUseSpatial.setValue(!1);this._onCbxUseSpatialClicked();this._resetDrawBox()},_fromChartListToChartParams:function(){this._resetChartParamsPage();
var A=this.chartParams,g=this.chartResults;v.setStyle(this.chartList,{left:0,display:"block"});v.setStyle(A,{left:"100%",display:"block"});v.setStyle(g,"display","none");this._slide(this.chartList,0,-100);this._slide(A,100,0);a.focus(this.cbxUseSpatial.domNode)},_onBtnParamsBackClicked:function(){this._resetDrawBox();v.setStyle(this.chartList,"display","block");v.setStyle(this.chartParams,"display","block");v.setStyle(this.chartResults,"display","none");this._slide(this.chartList,-100,0);this._slide(this.chartParams,
0,100);a.focus(this.chartsNode)},_onBtnApplyClicked:function(){this._clearResultPage();var A=this.currentAttrs.config.filter.expr,g=null;if(this.cbxUseSpatial.checked){if(this.cbxUseMapExtent.checked)g=this.map.extent;else{var m=this.drawBox.drawLayer.graphics;0<m.length&&(g=m[0].geometry)}if(!g){new h({message:this.nls.specifySpatialFilterMsg});return}}this.tempResultLayer&&this.map.removeLayer(this.tempResultLayer);this.tempResultLayer=null;this._createChartResultLayer();this._resetDrawBox();v.setStyle(this.chartList,
"display","none");v.setStyle(this.chartParams,"display","block");v.setStyle(this.chartResults,"display","block");this._slide(this.chartParams,0,-100);this._slide(this.chartResults,100,0);a.focus(this.resultsContainer);var q=this.currentAttrs.config;m=[];var u=q.mode;"feature"===u?(m=n.clone(q.valueFields),0>m.indexOf(q.labelField)&&m.push(q.labelField)):"category"===u?(m=n.clone(q.valueFields),0>m.indexOf(q.categoryField)&&m.push(q.categoryField)):"count"===u?m=[q.categoryField]:"field"===u&&(m=n.clone(q.valueFields));
this.shelter.show();var w=this._getPopupFieldInfo()||{};(u=this._getBaseExpression(this.currentAttrs.config.webMapLayerId))&&(A="("+u+") AND ("+A+")");this._query(A,m,g).then(n.hitch(this,function(C){if(this.domNode&&(this.shelter.hide(),0<C.status)){var G={featureLayer:this.tempResultLayer,features:C.features,config:q};this.previewArgs=G;this._updatePreviewHeight();this.preview.createClientCharts(G.featureLayer,G.features,G.config,w);k.forEach(C.features,n.hitch(this,function(J){var E=J.geometry;
E&&("point"===E.type?f.isVaildPointGeometry(E)&&this.tempResultLayer.add(J):this.tempResultLayer.add(J))}));this._zoomToLayer(this.tempResultLayer)}}),n.hitch(this,function(C){console.error(C);this.domNode&&(this.shelter.hide(),this._removeTempResultLayer())}))},_getBaseExpression:function(A){var g="";if(A){var m=null;(m="Table"===this.currentAttrs.layerInfo.type?this.layerInfosObj.getTableInfoById(A):this.layerInfosObj.getLayerInfoById(A))&&(g=m.getFilter())}return g},_updatePreviewHeight:function(){var A=
v.getContentBox(this.domNode);v.setStyle(this.preview.domNode,"height",Math.max(A.h-120,150)+"px")},_createChartResultLayer:function(){this._removeTempResultLayer();var A=n.clone(this.currentAttrs.layerInfo);A.drawingInfo||(A.drawingInfo={});A.drawingInfo.transparency=0;A.minScale=0;A.maxScale=0;A.effectiveMinScale=0;A.effectiveMaxScale=0;A.defaultVisibility=!0;delete A.extent;this.tempResultLayer=new t({layerDefinition:A,featureSet:null});this.map.addLayer(this.tempResultLayer);A=B.fromJson(this.currentAttrs.config.symbol);
A=new z(A);this.tempResultLayer.setRenderer(A)},_removeTempResultLayer:function(){this.tempResultLayer&&this.map.removeLayer(this.tempResultLayer);this.tempResultLayer=null},_query:function(A,g,m){A||(A="1\x3d1");var q={};q.url=this.currentAttrs.config.url;q.layerInfo=this.currentAttrs.layerInfo;q.limit=1E4;q.spatialReference=this.map.spatialReference;q.where=A;q.geometry=m;q.outFields=g;return(new D(q)).getFeatures()},_clearResultPage:function(){this.previewPopup&&(this.previewPopup.close(),this.previewPopup=
null);this.previewArgs=null;this.preview.clear();this._hideInfoWindow()},_zoomToLayer:function(A){var g;A.graphics&&0<A.graphics.length&&(g=A.graphics.filter(function(m){m=m.geometry;return"point"!==m.type?!0:f.isVaildPointGeometry(m)}.bind(this)));if(g&&0<g.length){A=f.toFeatureSet(g);try{f.zoomToFeatureSet(this.map,A)}catch(m){console.error(m)}}},_showQueryErrorMsg:function(A){new h({message:A||this.nls.queryError})},_hideInfoWindow:function(){},_onBtnResultsBackClicked:function(){var A=this.chartParams;
v.setStyle(this.chartList,"display","none");v.setStyle(A,{display:"block",left:"-100%"});this._slide(A,-100,0);this._slide(this.chartResults,0,100);a.focus(this.paramsContainer)}});H.extend(L);return H});