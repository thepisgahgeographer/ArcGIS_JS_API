// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/_FeaturelayerSourcePopup":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/FeaturelayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),function(G,q,C,z,g,n,l,a,c){return G([n,q],{width:830,height:560,titleLabel:"",dijitArgs:null,postCreate:function(){this.inherited(arguments);g.addClass(this.domNode,"jimu-featurelayer-source-popup");this._initFls();this._initLoading()},getSelectedRadioType:function(){return this.fls.getSelectedRadioType()},
_initFls:function(){this.fls=new l(this.dijitArgs);this.fls.placeAt(this.contentContainerNode);this.fls.startup();this.own(C(this.fls,"ok",z.hitch(this,function(d){if(0!==d.length){var h=d[0];if(h.definition)try{h.definition.name=h.name,h.definition.url=h.url,this.emit("ok",h)}catch(b){console.error(b)}else this.loading.show(),c({url:h.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(z.hitch(this,function(b){if(this.domNode){this.loading.hide();h.definition=b;try{h.definition.name=
h.name,h.definition.url=h.url,this.emit("ok",h)}catch(e){console.error(e)}}}),z.hitch(this,function(b){console.error(b);this.domNode&&this.loading.hide()}))}})));this.own(C(this.fls,"cancel",z.hitch(this,function(){try{this.emit("cancel")}catch(d){console.error(d)}})))},_initLoading:function(){this.loading=new a({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/FeaturelayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/RadioBtn jimu/dijit/_FeaturelayerChooserWithButtons jimu/dijit/FeaturelayerChooserFromPortal jimu/dijit/_FeaturelayerServiceChooserContent jimu/portalUrlUtils".split(" "),
function(G,q,C,z,g,n,l,a,c,d,h,b,e,f){return G([q,C,z,c],{templateString:g,baseClass:"jimu-layer-source jimu-featurelayer-source",declaredClass:"jimu.dijit.FeaturelayerSource",nls:null,multiple:!1,createMapResponse:null,portalUrl:null,layerChooserFromMap:null,postMixInProperties:function(){this.nls=window.jimuNls.featureLayerSource;this.portalUrl=f.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedRadioType:function(){if(this.mapRadio.checked)return"map";
if(this.portalRadio.checked)return"portal";if(this.urlRadio.checked)return"url"},getSelectedItems:function(){var m=[];this.mapRadio.checked?m=this.flcMap.getSelectedItems():this.portalRadio.checked?m=this.flcPortal.getSelectedItems():this.urlRadio.checked&&(m=this.flcUrl.getSelectedItems());return m},startup:function(){this.inherited(arguments);this.flcMap.startup();this.flcPortal.startup();this.flcUrl.startup()},_initSelf:function(){this._initRadios();this._createFeaturelayerChooserWithButtons();
this._createFeaturelayerChooserFromPortal();this._createFeaturelayerServiceChooserContent();this._onRadioClicked()},_createFeaturelayerChooserWithButtons:function(){this.flcMap=new h({style:{width:"100%",height:"100%"},multiple:this.multiple,createMapResponse:this.createMapResponse,onlyShowWebMapLayers:!0,layerChooserFromMap:this.layerChooserFromMap});this.flcMap.operationTip=this.nls.selectLayer;this.flcMap.placeAt(this.flcContainer);this.own(a(this.flcMap,"ok",n.hitch(this,function(m){m&&0<m.length&&
this.emit("ok",m)})));this.own(a(this.flcMap,"cancel",n.hitch(this,function(){this.emit("cancel")})))},_createFeaturelayerChooserFromPortal:function(){this.flcPortal=new b({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.flcPortal.operationTip=this.nls.chooseItem;this.flcPortal.placeAt(this.hflcContainer);this.own(a(this.flcPortal,"next",n.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseLayer;this._updateOperationTip()})));
this.own(a(this.flcPortal,"back",n.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(a(this.flcPortal,"ok",n.hitch(this,function(m){m&&0<m.length&&this.emit("ok",m)})));this.own(a(this.flcPortal,"cancel",n.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createFeaturelayerServiceChooserContent:function(){this.flcUrl=
new e({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.flcUrl.operationTip=this.nls.setServiceUrl;this.flcUrl.placeAt(this.flscContainer);this.own(a(this.flcUrl,"ok",n.hitch(this,function(m){m&&0<m.length&&this.emit("ok",m)})));this.own(a(this.flcUrl,"cancel",n.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var m="featureLayerSourceRadios_"+this._getRandomString(),p=n.hitch(this,this._onRadioClicked);this.mapRadio=new d({group:m,onStateChange:p,checked:!0});
this.mapRadio.placeAt(this.mapTd,"first");this.portalRadio=new d({group:m,onStateChange:p,checked:!1});this.portalRadio.placeAt(this.portalTd,"first");this.urlRadio=new d({group:m,onStateChange:p,checked:!1});this.urlRadio.placeAt(this.urlTd,"first");this.own(a(this.mapLabel,"click",n.hitch(this,function(){this.mapRadio.check()})));this.own(a(this.portalLabel,"click",n.hitch(this,function(){this.portalRadio.check()})));this.own(a(this.urlLabel,"click",n.hitch(this,function(){this.urlRadio.check()})))},
_getRandomString:function(){var m=Math.random().toString();return m=m.slice(2,m.length)},_onRadioClicked:function(){l.setStyle(this.flcContainer,"display","none");l.setStyle(this.hflcContainer,"display","none");l.setStyle(this.flscContainer,"display","none");this.mapRadio.checked?(l.setStyle(this.flcContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(l.setStyle(this.hflcContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):
this.urlRadio.checked&&(l.setStyle(this.flscContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=this.flcMap.operationTip:this.portalRadio.checked?this.operationTip.innerHTML=this.flcPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.flcUrl.operationTip)}})})},"jimu/dijit/_FeaturelayerChooserWithButtons":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/FeaturelayerChooserFromMap".split(" "),
function(G,q,C,z,g,n,l,a,c){return g([n,l,a,q],{baseClass:"jimu-layer-chooser-with-buttons jimu-feature-layer-chooser-with-buttons",declaredClass:"jimu.dijit.FeaturelayerChooserWithButtons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"chooser-container" data-dojo-attach-point\x3d"chooserContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-trailing-margin1 jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
layerChooserFromMap:null,constructor:function(d){this.options=d},postMixInProperties:function(){this.nls=C.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.layerChooser=this.layerChooserFromMap?this.layerChooserFromMap:new c(this.options);this.layerChooser.placeAt(this.chooserContainer);z.setStyle(this.layerChooser.domNode,{width:"100%",height:"100%"});this.own(G(this.layerChooser,"tree-click",C.hitch(this,function(){0<this.getSelectedItems().length?z.removeClass(this.btnOk,
"jimu-state-disabled"):z.addClass(this.btnOk,"jimu-state-disabled")})));this.own(G(this.btnOk,"click",C.hitch(this,function(){var d=this.getSelectedItems();0<d.length&&this.emit("ok",d)})));this.own(G(this.btnCancel,"click",C.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.layerChooser.getSelectedItems()},startup:function(){this.inherited(arguments);this.layerChooser.startup()}})})},"jimu/dijit/FeaturelayerChooserFromMap":function(){define(["dojo/_base/declare",
"dojo/Deferred","dojo/_base/html","dojo/_base/lang","./LayerChooserFromMap"],function(G,q,C,z,g){return G([g],{baseClass:"jimu-featurelayer-chooser-from-map",declaredClass:"jimu.dijit.FeaturelayerChooserFromMap",types:null,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,ignoredFeaturelayerIds:null,mustSupportStatistics:!1,ignoreVirtualLayer:!1,postMixInProperties:function(){this.inherited(arguments);this.ignoredFeaturelayerIds||(this.ignoredFeaturelayerIds=[]);this.basicFilter=z.hitch(this,
this.basicFilter);this.filter=g.createFeaturelayerFilter(this.types,this.showLayerFromFeatureSet,this.showTable,this.mustSupportStatistics);this.ignoreVirtualLayer&&(this.filter=g.andCombineFilters([this.filter,z.hitch(this,this._ignoreVirtualLayerFilter)]))},postCreate:function(){this.inherited(arguments);C.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},_ignoreVirtualLayerFilter:function(n){return n.getLayerType().then(function(l){return!("ArcGISDynamicMapServiceLayer"===l||"ArcGISTiledMapServiceLayer"===
l||"GroupLayer"===l)})},basicFilter:function(n){var l=new q;0<=this.ignoredFeaturelayerIds.indexOf(n.id)?l.resolve(!1):this.onlyShowVisible&&"Table"!==n.getLayerType()?l.resolve(n.isShowInMap()):l.resolve(!0);return l},getHandledItem:function(n){var l=this.inherited(arguments),a=n&&n.layerInfo;a=a&&a.layerObject;l.url=a&&a.url||"";return l}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(G,q,C,z,g,n,l,a,c,d,h,b,e,f,m,p,t,v){var x=C([z,g,n,q],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,onlyFilterCurrentLayerWhenAddItem:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);e.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new v({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=b.hitch(this,this.basicFilter);
this.filter=x.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(y){var A=new a;this.onlyShowVisible?A.resolve(y.isShowInMap()):A.resolve(!0);return A},filter:function(y){y=new a;y.resolve(!0);return y},getSelectedItems:function(){var y=this.tree.getSelectedItems();return f.map(y,b.hitch(this,function(A){return this.getHandledItem(A)}))},getAllItems:function(){var y=this.tree.getAllItems(),A=[];f.forEach(y,
b.hitch(this,function(J){"root"!==J.id&&(J=this.getHandledItem(J),A.push(J))}));return A},getHandledItem:function(y){return{name:y.name,layerInfo:y.layerInfo}},_isLeafItem:function(y){return y.isLeaf},setCreateMapResponse:function(y){this.createMapResponse=y;t.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(b.hitch(this,function(A){this.layerInfosObj=A;this.own(G(this.layerInfosObj,"layerInfosChanged",b.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&
this.own(G(this.layerInfosObj,"layerInfosIsShowInMapChanged",b.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(y,A){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(y){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(y){this._clear();e.setStyle(this.errorTipSection,"display","block");var A=[];this.onlyShowWebMapLayers?(A=y.getLayerInfoArrayOfWebmap(),
A=A.concat(y.getTableInfoArrayOfWebmap())):(A=y.getLayerInfoArray(),A=A.concat(y.getTableInfoArray()));0!==A.length&&(e.setStyle(this.errorTipSection,"display","none"),f.forEach(A,b.hitch(this,function(J){this._addDirectLayerInfo(J)})))},_addDirectLayerInfo:function(y){y&&y.getLayerObject().then(b.hitch(this,function(){this._addItem("root",y)}),b.hitch(this,function(A){console.error(A)}))},_clear:function(){var y=this._store.query({parent:"root"});f.forEach(y,b.hitch(this,function(A){A&&"root"!==
A.id&&this._store.remove(A.id)}))},_addItem:function(y,A){var J=null,L=A.getLayerType(),M=this.filter(A);h({layerType:L,valid:M}).then(b.hitch(this,function(N){if(N.valid){var k=b.hitch(this,function(I,u){this._id++;J={name:A.title||"",parent:y,layerInfo:A,type:N.layerType,layerClass:A.layerObject.declaredClass,id:this._id.toString(),isLeaf:I,hasChildren:u};this._store.add(J)}),r=A.getSubLayers(),B=0===r.length,H=!0;this.onlyFilterCurrentLayerWhenAddItem?(B&&(H=!1),k(B,H)):B?k(B,!1):(r=f.map(r,b.hitch(this,
function(I){return this.filter(I)})),h(r).then(b.hitch(this,function(I){(I=f.some(I,function(u){return u}))&&k(B,I)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var y=this._getRootItem();y=new l({data:[y],getChildren:function(A){return this.query({parent:A.id})}});this._store=new c(y);y=new d({store:this._store,query:{id:"root"},mayHaveChildren:b.hitch(this,this._mayHaveChildren)});this.tree=new p({multiple:this.multiple,
model:y,showRoot:!1,isLeafItem:b.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:b.hitch(this,function(A,J){"root"!==A.id&&this._onTreeOpen(A,J)}),onClick:b.hitch(this,function(A,J,L){this._onTreeClick(A,J,L);this.emit("tree-click",A,J,L)}),getIconStyle:b.hitch(this,function(A,J){var L=null;if(!A||"root"===A.id)return null;var M={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},N=window.location.protocol+"//"+window.location.host+
require.toUrl("jimu");if(A=this._getIconInfo(A,J).imageName)M.backgroundImage="url("+N+"/css/images/"+A+")",L=M;return L}),getIconClass:b.hitch(this,function(A,J){return this._getIconInfo(A,J).className}),getTooltip:b.hitch(this,function(A){return this.displayTooltipForTreeNode?A.layerInfo.title:""})});e.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(y){return y.hasChildren},_getIconInfo:function(y,A){var J="",L="";"ArcGISDynamicMapServiceLayer"===
y.type||"ArcGISTiledMapServiceLayer"===y.type?A?(J="mapserver_open.png",L="mapservice-layer-icon open"):(J="mapserver_close.png",L="mapservice-layer-icon close"):"GroupLayer"===y.type?A?(J="group_layer2.png",L="group-layer-icon open"):(J="group_layer1.png",L="group-layer-icon close"):"FeatureLayer"===y.type?(y=m.getTypeByGeometryType(y.layerInfo.layerObject.geometryType),"point"===y?(J="point_layer1.png",L="point-layer-icon"):"polyline"===y?(J="line_layer1.png",L="line-layer-icon"):"polygon"===y&&
(J="polygon_layer1.png",L="polygon-layer-icon")):"Table"===y.type?(J="table.png",L="table-icon"):"ArcGISImageServiceLayer"===y.type||"ArcGISImageServiceVectorLayer"===y.type?(J="image_layer.png",L="iamge-layer-icon"):A?(J="mapserver_open.png",L="mapservice-layer-icon open"):(J="mapserver_close.png",L="mapservice-layer-icon close");return{imageName:J,className:L}},_onTreeOpen:function(y,A){if("root"!==y.id){var J=[];A=[];J=y.layerInfo.getSubLayers();y.checked||(this.shelter.show(),A=f.map(J,b.hitch(this,
function(L){return L.getLayerObject()})),h(A).then(b.hitch(this,function(){this.domNode&&(f.forEach(J,b.hitch(this,function(L){this._addItem(y.id,L)})),y.checked=!0,this.shelter.hide())}),b.hitch(this,function(L){console.error(L);this.shelter.hide()})))}},_onTreeClick:function(y,A,J){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});x.createFilterByLayerType=function(y){b.isArrayLike(y)||(y=[]);return function(A){var J=
new a;if(0===y.length)J.resolve(!0);else{var L=[];A.traversal(function(M){L.push(M.getLayerType())});h(L).then(function(M){for(var N=0;N<M.length;N++)for(var k=0;k<y.length;k++)if(M[N]===y[k]){J.resolve(!0);return}J.resolve(!1)},function(M){console.error(M);J.reject(M)})}return J}};x.createFeaturelayerFilter=function(y,A,J,L){var M=["point","polyline","polygon"];y&&0<y.length?(y=f.filter(y,function(N){return 0<=M.indexOf(N)}),0===y.length&&(y=M)):y=M;return function(N){var k=N.getLayerType();N=N.getLayerObject();
return h({layerType:k,layerObject:N}).then(function(r){var B=r.layerType;r=r.layerObject;if("ArcGISDynamicMapServiceLayer"===B||"ArcGISTiledMapServiceLayer"===B||"GroupLayer"===B||"FeatureCollection"===B)return!0;if("FeatureLayer"===B){B=m.getTypeByGeometryType(r.geometryType);B=0<=f.indexOf(y,B);var H=x._shouldPassStatisticsCheck(L,r);return r.url?(r=m.isFeaturelayerUrlSupportQuery(r.url,r.capabilities),B&&r&&H):A&&B}return"Table"===B?(B=m.isFeaturelayerUrlSupportQuery(r.url,r.capabilities),r=x._shouldPassStatisticsCheck(L,
r),J&&B&&r):!1})}};x.createImageServiceLayerFilter=function(y,A){return function(J){var L=J.getLayerType();J=J.getLayerObject();return h({layerType:L,layerObject:J}).then(function(M){var N=M.layerType,k=M.layerObject;return"ArcGISImageServiceLayer"===N||"ArcGISImageServiceVectorLayer"===N?y?m.isImageServiceSupportQuery(M.layerObject.capabilities)?A?x._shouldPassStatisticsCheck(A,k):!0:!1:!0:!1})}};x._shouldPassStatisticsCheck=function(y,A){return y?(y=!1,y=A.advancedQueryCapabilities?!!A.advancedQueryCapabilities.supportsStatistics:
!!A.supportsStatistics):!0};x.createQueryableLayerFilter=function(y){var A=x.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,y);y=x.createImageServiceLayerFilter(!0,y);return x.orCombineFilters([A,y])};x.andCombineFilters=function(y){return x._combineFilters(y,!0)};x.orCombineFilters=function(y){return x._combineFilters(y,!1)};x._combineFilters=function(y,A){return function(J){var L=new a,M=f.map(y,function(N){return N(J)});h(M).then(function(N){var k=!1;k=A?f.every(N,function(r){return r}):
f.some(N,function(r){return r});L.resolve(k)},function(N){console.error(N);L.reject(N)});return L}};return x})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(G,q,C,z,g,n,l){return C("dijit.tree.ObjectStoreModel",l,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(a){g.mixin(this,a);this.childrenCache={}},getRoot:function(a,c){if(this.root)a(this.root);
else{var d=this.store.query(this.query);d.then&&this.own(d);n(d,g.hitch(this,function(h){if(1!=h.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+h.length+" items, but must return exactly one");this.root=h[0];a(this.root);d.observe&&d.observe(g.hitch(this,function(b){this.onChange(b)}),!0)}),c)}},mayHaveChildren:function(){return!0},getChildren:function(a,c,d){var h=this.store.getIdentity(a);if(this.childrenCache[h])n(this.childrenCache[h],c,d);else{var b=this.childrenCache[h]=
this.store.getChildren(a);b.then&&this.own(b);b.observe&&this.own(b.observe(g.hitch(this,function(e,f,m){this.onChange(e);f!=m&&n(b,g.hitch(this,"onChildrenChange",a))}),!0));n(b,c,d)}},isItem:function(){return!0},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return a[this.labelAttr]},newItem:function(a,c,d,h){return this.store.put(a,{parent:c,before:h})},pasteItem:function(a,c,d,h,b,e){var f=new z;if(c===d&&!h&&!e)return f.resolve(!0),f;c&&!h?this.getChildren(c,g.hitch(this,
function(m){m=[].concat(m);var p=G.indexOf(m,a);m.splice(p,1);this.onChildrenChange(c,m);f.resolve(this.store.put(a,{overwrite:!0,parent:d,oldParent:c,before:e,isCopy:!1}))})):f.resolve(this.store.put(a,{overwrite:!0,parent:d,oldParent:c,before:e,isCopy:!0}));return f},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(G,q,C,z,g,n,l,a,c,d,h,b,e,f,m,p){var t=G([m._TreeNode,e],{templateString:z,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);n.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=n.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=n.toDom('\x3cinput type\x3d"checkbox" /\x3e');n.addClass(this.checkNode,"jimu-tree-check-node");n.place(this.checkNode,this.contentNode,
"first");this.own(h(this.checkNode,"click",g.hitch(this,this._onClick)));this.own(h(this.rowNode,"keydown",g.hitch(this,function(v,x){x.target=v;x.keyCode!==b.ENTER&&x.keyCode!==b.SPACE||this._onClick(x)},this.checkNode)));this.isLeaf?this.groupId?n.setStyle(this.checkNode,"display","none"):n.setStyle(this.checkNode,"display","inline"):n.setStyle(this.checkNode,"display","none");this.isLeaf?n.addClass(this.domNode,"jimu-tree-leaf-node"):n.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&
(this.checkNode.checked=!0,n.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,n.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(v){(v.target||v.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,v):this.tree._onClick(this,v)},_onChange:function(){this.isLeaf&&setTimeout(g.hitch(this,
function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return G([m,e],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+p.getRandomString()},postCreate:function(){this.inherited(arguments);n.addClass(this.domNode,"jimu-tree");this.own(d.before(this,"onClick",g.hitch(this,this._jimuBeforeClick)));
this.rootLoadingIndicator&&n.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0;n.setAttr(this.domNode,"tabindex",0)},removeItem:function(v){this.model.store.remove(v)},getAllItems:function(){var v=this.getAllTreeNodeWidgets();return l.map(v,g.hitch(this,function(x){var y=x.item;y.selected=x.checkNode.checked;return y}))},getSelectedItems:function(){var v=this.getAllTreeNodeWidgets();v=l.filter(v,g.hitch(this,function(x){return x.checkNode.checked}));return l.map(v,
g.hitch(this,function(x){return x.item}))},getFilteredItems:function(v){var x=this.getAllTreeNodeWidgets();x=l.map(x,g.hitch(this,function(y){var A=y.item;A.selected=y.checkNode.checked;return A}));return l.filter(x,g.hitch(this,function(y){return v(y)}))},getTreeNodeByItemId:function(v){for(var x=this._getAllTreeNodeDoms(),y=0;y<x.length;y++){var A=f.byNode(x[y]);if(A.item.id.toString()===v.toString())return A}return null},selectItem:function(v){(v=this.getTreeNodeByItemId(v))&&v.isLeaf&&this.selectNodeWidget(v)},
unselectItem:function(v){(v=this.getTreeNodeByItemId(v))&&v.isLeaf&&v.unselect()},getAllLeafTreeNodeWidgets:function(){var v=this.getAllTreeNodeWidgets();return l.filter(v,g.hitch(this,function(x){return x.isLeaf}))},getAllTreeNodeWidgets:function(){var v=this._getAllTreeNodeDoms();return l.map(v,g.hitch(this,function(x){return f.byNode(x)}))},isLeafItem:function(v){return v&&v.isLeaf},_getAllTreeNodeDoms:function(){return c(".dijitTreeNode",this.domNode)},_createTreeNode:function(v){v.isLeaf=this.isLeafItem(v.item);
this.multiple||(v.groupId=this.uniqueId);return new t(v)},_onTreeNodeSelect:function(v){this.emit("item-select",{item:v.item,treeNode:v})},_onTreeNodeUnselect:function(v){this.emit("item-unselect",{item:v.item,treeNode:v})},selectNodeWidget:function(v){this.multiple||this.unselectAllLeafNodeWidgets();v.select()},_jimuBeforeClick:function(v,x,y){x.isLeaf&&(n.hasClass(y.target||y.srcElement,"jimu-tree-check-node")||(this.multiple?x.toggleSelect():this.selectNodeWidget(x)));return arguments},_onCheckNodeClick:function(v,
x,y){!this.multiple&&x&&this.unselectAllLeafNodeWidgets();a.stop(y);this.focusNode(v);setTimeout(g.hitch(this,function(){x?this.selectNodeWidget(v):v.unselect();this.onClick(v.item,v,y)}),0)},unselectAllLeafNodeWidgets:function(){var v=this.getAllLeafTreeNodeWidgets();l.forEach(v,g.hitch(this,function(x){x.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(G,q,C,z,g,n,l,a,c,d,h,b,e,f,m,p,t,v,x,y,A,J,L,M,N,k,r,B,H,I,u,D,F,K,Q){function P(w){return p.delegate(w.promise||w,{addCallback:function(E){this.then(E)},addErrback:function(E){this.otherwise(E)}})}var W=z("dijit._TreeNode",[N,k,r,B,H],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(w){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=w;this._set("label",w);e("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:u,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(w){var E=Math.max(w,0)*this.tree._nodePixelIndent+"px";d.set(this.domNode,
"backgroundPosition",E+" 0px");d.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",E);G.forEach(this.getChildren(),function(O){O.set("indent",w+1)});this._set("indent",w)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(w){var E=this.tree,O=E.model;E._v10Compat&&w===O.root&&(w=null);this._applyClassAndStyle(w,"icon","Icon");this._applyClassAndStyle(w,"label","Label");this._applyClassAndStyle(w,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(w,E,O){var R="_"+E+"Class";E+="Node";var S=this[R];this[R]=this.tree["get"+O+"Class"](w,this.isExpanded);a.replace(this[E],this[R]||"",S||"");d.set(this[E],this.tree["get"+O+"Style"](w,this.isExpanded)||{})},_updateLayout:function(){var w=this.getParent();w=!w||!w.rowNode||"none"==w.rowNode.style.display;a.toggle(this.domNode,"dijitTreeIsRoot",w);a.toggle(this.domNode,"dijitTreeIsLast",!w&&!this.getNextSibling())},_setExpando:function(w){var E=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];w=w?0:this.isExpandable?this.isExpanded?1:2:3;a.replace(this.expandoNode,E[w],E);this.expandoNodeText.innerHTML=["*","-","+","*"][w]},expand:function(){if(this._expandDeferred)return P(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");a.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var w=b.wipeIn({node:this.containerNode,duration:M.defaultDuration}),E=this._expandDeferred=new g(function(){w.stop()});q.after(w,"onEnd",function(){E.resolve(!0)},!0);w.play();return P(E)},collapse:function(){if(this._collapseDeferred)return P(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");a.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var w=b.wipeOut({node:this.containerNode,duration:M.defaultDuration}),E=this._collapseDeferred=new g(function(){w.stop()});q.after(w,"onEnd",
function(){E.resolve(!0)},!0);w.play();return P(E)},indent:0,setChildItems:function(w){var E=this.tree,O=E.model,R=[],S=E.focusedChild,Z=this.getChildren();G.forEach(Z,function(U){r.prototype.removeChild.call(this,U)},this);this.defer(function(){G.forEach(Z,function(U){if(!U._destroyed&&!U.getParent()){E.dndController.removeTreeNode(U);(function da(V){var aa=O.getIdentity(V.item),ca=E._itemNodesMap[aa];1==ca.length?delete E._itemNodesMap[aa]:(aa=G.indexOf(ca,V),-1!=aa&&ca.splice(aa,1));G.forEach(V.getChildren(),
da)})(U);if(E.persist){var Y=G.map(U.getTreePath(),function(V){return E.model.getIdentity(V)}).join("/"),X;for(X in E._openedNodes)X.substr(0,Y.length)==Y&&delete E._openedNodes[X];E._saveExpandedNodes()}E.lastFocusedChild&&!l.isDescendant(E.lastFocusedChild.domNode,E.domNode)&&delete E.lastFocusedChild;S&&!l.isDescendant(S.domNode,E.domNode)&&E.focus();U.destroyRecursive()}})});this.state="Loaded";w&&0<w.length?(this.isExpandable=!0,G.forEach(w,function(U){var Y=O.getIdentity(U),X=E._itemNodesMap[Y];
if(X)for(var ba=0;ba<X.length;ba++)if(X[ba]&&!X[ba].getParent()){var V=X[ba];V.set("indent",this.indent+1);break}V||(V=this.tree._createTreeNode({item:U,tree:E,isExpandable:O.mayHaveChildren(U),label:E.getLabel(U),labelType:E.model&&E.model.labelType||"text",tooltip:E.getTooltip(U),ownerDocument:E.ownerDocument,dir:E.dir,lang:E.lang,textDir:E.textDir,indent:this.indent+1}),X?X.push(V):E._itemNodesMap[Y]=[V]);this.addChild(V);(this.tree.autoExpand||this.tree._state(V))&&R.push(E._expandNode(V))},this),
G.forEach(this.getChildren(),function(U){U._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);w=n(R);this.tree._startPaint(w);return P(w)},getTreePath:function(){for(var w=this,E=[];w&&w!==this.tree.rootNode;)E.unshift(w.item),w=w.getParent();E.unshift(this.tree.rootNode.item);return E},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(w){this.inherited(arguments);var E=this.getChildren();0==E.length&&
(this.isExpandable=!1,this.collapse());G.forEach(E,function(O){O._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(w){this.labelNode.setAttribute("aria-selected",w?"true":"false");a.toggle(this.rowNode,"dijitTreeRowSelected",w)},focus:function(){J.focus(this.focusNode)}});e("dojo-bidi")&&W.extend({_setTextDirAttr:function(w){!w||this.textDir==w&&this._created||(this._set("textDir",w),this.applyTextDir(this.labelNode),G.forEach(this.getChildren(),
function(E){E.set("textDir",w)},this))}});var T=z("dijit.Tree",[N,I,k,H],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:D,persist:!1,autoExpand:!1,dndController:Q,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,
checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(w,E){v.publish(this.id,p.mixin({tree:this,event:w},E||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new g;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var w=
this;this.own(t(this.containerNode,t.selector(".dijitTreeNode",x.enter),function(R){w._onNodeMouseEnter(L.byNode(this),R)}),t(this.containerNode,t.selector(".dijitTreeNode",x.leave),function(R){w._onNodeMouseLeave(L.byNode(this),R)}),t(this.containerNode,t.selector(".dijitTreeRow",A.press),function(R){w._onNodePress(L.getEnclosingWidget(this),R)}),t(this.containerNode,t.selector(".dijitTreeRow",A),function(R){w._onClick(L.getEnclosingWidget(this),R)}),t(this.containerNode,t.selector(".dijitTreeRow",
"dblclick"),function(R){w._onDblClick(L.getEnclosingWidget(this),R)}));this.model||this._store2model();this.own(q.after(this.model,"onChange",p.hitch(this,"_onItemChange"),!0),q.after(this.model,"onChildrenChange",p.hitch(this,"_onItemChildrenChange"),!0),q.after(this.model,"onDelete",p.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){p.isString(this.dndController)&&(this.dndController=p.getObject(this.dndController));for(var E={},O=0;O<this.dndParams.length;O++)this[this.dndParams[O]]&&
(E[this.dndParams[O]]=this[this.dndParams[O]]);this.dndController=new this.dndController(this,E)}this._load();this.onLoadDeferred=P(this.pendingCommandsPromise);this.onLoadDeferred.then(p.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;f.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var w={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(w.mayHaveChildren=
p.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&(w.getChildren=p.hitch(this,function(E,O,R){this.getItemChildren(this._v10Compat&&E===this.model.root?null:E,O,R)}));this.model=new K(w);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(p.hitch(this,function(w){var E=this.rootNode=this.tree._createTreeNode({item:w,tree:this,isExpandable:!0,label:this.label||this.getLabel(w),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?
0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(E.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(E.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(E.containerNode.setAttribute("aria-labelledby",
this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),E.labelNode.setAttribute("role","presentation"),E.labelNode.removeAttribute("aria-selected"),E.containerNode.setAttribute("role","tree"),E.containerNode.setAttribute("aria-expanded","true"),E.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(E.domNode);w=this.model.getIdentity(w);this._itemNodesMap[w]?this._itemNodesMap[w].push(E):this._itemNodesMap[w]=[E];E._updateLayout();
this._expandNode(E).then(p.hitch(this,function(){this._destroyed||(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),p.hitch(this,function(w){console.error(this,": error loading root: ",w)}))},getNodesByItem:function(w){if(!w)return[];w=p.isString(w)?w:this.model.getIdentity(w);return[].concat(this._itemNodesMap[w])},_setSelectedItemAttr:function(w){this.set("selectedItems",[w])},_setSelectedItemsAttr:function(w){var E=this;return this.pendingCommandsPromise=
this.pendingCommandsPromise.always(p.hitch(this,function(){var O=G.map(w,function(S){return!S||p.isString(S)?S:E.model.getIdentity(S)}),R=[];G.forEach(O,function(S){R=R.concat(E._itemNodesMap[S]||[])});this.set("selectedNodes",R)}))},_setPathAttr:function(w){return w.length?P(this.set("paths",[w]).then(function(E){return E[0]})):P(this.set("paths",[]).then(function(E){return E[0]}))},_setPathsAttr:function(w){function E(R,S){var Z=R.shift(),U=G.filter(S,function(Y){return Y.getIdentity()==Z})[0];
if(U)return R.length?O._expandNode(U).then(function(){return E(R,U.getChildren())}):U;throw new T.PathError("Could not expand path at "+Z);}var O=this;return P(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return n(G.map(w,function(R){R=G.map(R,function(S){return S&&p.isObject(S)?O.model.getIdentity(S):S});if(R.length)return E(R,[O.rootNode]);throw new T.PathError("Empty path");}))}).then(function(R){O.set("selectedNodes",R);return O.paths}))},_setSelectedNodeAttr:function(w){this.set("selectedNodes",
[w])},_setSelectedNodesAttr:function(w){this.dndController.setSelection(w)},expandAll:function(){function w(O){return E._expandNode(O).then(function(){var R=G.filter(O.getChildren()||[],function(S){return S.isExpandable});return n(G.map(R,w))})}var E=this;return P(w(this.rootNode))},collapseAll:function(){function w(O){var R=G.filter(O.getChildren()||[],function(S){return S.isExpandable});R=n(G.map(R,w));return!O.isExpanded||O==E.rootNode&&!E.showRoot?R:R.then(function(){return E._collapseNode(O)})}
var E=this;return P(w(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(w){return this.model.getLabel(w)},getIconClass:function(w,E){return!w||this.model.mayHaveChildren(w)?E?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(w,E){(w=this._getNext(E))&&w.isTreeNode&&this.focusNode(w)},
_onUpArrow:function(w,E){if(w=E.getPreviousSibling())for(E=w;E.isExpandable&&E.isExpanded&&E.hasChildren();)E=E.getChildren(),E=E[E.length-1];else if(w=E.getParent(),this.showRoot||w!==this.rootNode)E=w;E&&E.isTreeNode&&this.focusNode(E)},_onRightArrow:function(w,E){E.isExpandable&&!E.isExpanded?this._expandNode(E):E.hasChildren()&&(E=E.getChildren()[0])&&E.isTreeNode&&this.focusNode(E)},_onLeftArrow:function(w,E){E.isExpandable&&E.isExpanded?this._collapseNode(E):(w=E.getParent())&&w.isTreeNode&&
(this.showRoot||w!==this.rootNode)&&this.focusNode(w)},focusLastChild:function(){var w=this._getLast();w&&w.isTreeNode&&this.focusNode(w)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var w=this.rootNode;w.isExpanded;){var E=w.getChildren();if(!E.length)break;w=E[E.length-1]}return w},_getNext:function(w){if(w.isExpandable&&w.isExpanded&&w.hasChildren())return w.getChildren()[0];for(;w&&w.isTreeNode;){var E=w.getNextSibling();if(E)return E;
w=w.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(w,E){return l.isDescendant(w,E.expandoNode)||l.isDescendant(w,E.expandoNodeText)},_onNodePress:function(w,E){this.focusNode(w)},__click:function(w,E,O,R){var S=this.isExpandoNode(E.target,w);w.isExpandable&&(O||S)?this._onExpandoClick({node:w}):(this._publish("execute",{item:w.item,node:w,evt:E}),this[R](w.item,w,E),this.focusNode(w));E.stopPropagation();E.preventDefault()},_onClick:function(w,E){this.__click(w,E,this.openOnClick,
"onClick")},_onDblClick:function(w,E){this.__click(w,E,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(w){w=w.node;this.focusNode(w);w.isExpanded?this._collapseNode(w):this._expandNode(w)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(w){f.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(w)},_getRootOrFirstNode:function(){f.deprecated(this.declaredClass+
"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(w){w._expandNodeDeferred&&delete w._expandNodeDeferred;if("Loading"!=w.state&&w.isExpanded){var E=w.collapse();this.onClose(w.item,w);this._state(w,!1);this._startPaint(E);return E}},_expandNode:function(w){if(w._expandNodeDeferred)return w._expandNodeDeferred;var E=this.model,O=w.item,R=this;w._loadDeferred||(w.markProcessing(),w._loadDeferred=new g,E.getChildren(O,function(S){w.unmarkProcessing();
w.setChildItems(S).then(function(){w._loadDeferred.resolve(S)})},function(S){console.error(R,": error loading "+w.label+" children: ",S);w._loadDeferred.reject(S)}));E=w._loadDeferred.then(p.hitch(this,function(){var S=w.expand();this.onOpen(w.item,w);this._state(w,!0);return S}));this._startPaint(E);return E},focusNode:function(w){for(var E=[],O=this.domNode;O&&O.tagName&&"IFRAME"!==O.tagName.toUpperCase();O=O.parentNode)E.push({domNode:O.contentWindow||O,scrollLeft:O.scrollLeft||0,scrollTop:O.scrollTop||
0});this.focusChild(w);this.defer(function(){for(var R=0,S=E.length;R<S;R++)E[R].domNode.scrollLeft=E[R].scrollLeft,E[R].domNode.scrollTop=E[R].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(w){var E=this.model.getIdentity(w);if(E=this._itemNodesMap[E]){var O=this.getLabel(w),R=this.getTooltip(w);G.forEach(E,function(S){S.set({item:w,label:O,tooltip:R});S._updateItemClasses(w)})}},_onItemChildrenChange:function(w,E){w=this.model.getIdentity(w);
(w=this._itemNodesMap[w])&&G.forEach(w,function(O){O.setChildItems(E)})},_onItemDelete:function(w){w=this.model.getIdentity(w);var E=this._itemNodesMap[w];E&&(G.forEach(E,function(O){this.dndController.removeTreeNode(O);var R=O.getParent();R&&R.removeChild(O);this.lastFocusedChild&&!l.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!l.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();O.destroyRecursive()},this),delete this._itemNodesMap[w])},
_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var w=C(this.cookieName);w&&G.forEach(w.split(","),function(E){this._openedNodes[E]=!0},this)}},_state:function(w,E){if(!this.persist)return!1;var O=G.map(w.getTreePath(),function(R){return this.model.getIdentity(R)},this).join("/");if(1===arguments.length)return this._openedNodes[O];E?this._openedNodes[O]=!0:delete this._openedNodes[O];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var w=
[],E;for(E in this._openedNodes)w.push(E);C(this.cookieName,w.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!p.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(w){w&&c.setMarginBox(this.domNode,w);this._nodePixelIndent=c.position(this.tree.indentDetector).w||
this._nodePixelIndent;this.expandChildrenDeferred.then(p.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(w){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var E=p.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});
y(w,E,E)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(w){return new W(w)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});e("dojo-bidi")&&T.extend({_setTextDirAttr:function(w){w&&this.textDir!=w&&(this._set("textDir",
w),this.rootNode.set("textDir",w))}});T.PathError=h("TreePathError");T._TreeNode=W;return T})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(G,q,C,z){return C("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(g){z.mixin(this,g);this.connects=[];g=this.store;if(!g.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");
g.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([q.after(g,"onNew",z.hitch(this,"onNewItem"),!0),q.after(g,"onDelete",z.hitch(this,"onDeleteItem"),!0),q.after(g,"onSet",z.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var g;g=this.connects.pop();)g.remove()},getRoot:function(g,n){this.root?g(this.root):this.store.fetch({query:this.query,onComplete:z.hitch(this,function(l){if(1!=l.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+l.length+
" items, but must return exactly one");this.root=l[0];g(this.root)}),onError:n})},mayHaveChildren:function(g){return G.some(this.childrenAttrs,function(n){return this.store.hasAttribute(g,n)},this)},getChildren:function(g,n,l){var a=this.store;if(a.isItemLoaded(g)){for(var c=[],d=0;d<this.childrenAttrs.length;d++){var h=a.getValues(g,this.childrenAttrs[d]);c=c.concat(h)}var b=0;this.deferItemLoadingUntilExpand||G.forEach(c,function(f){a.isItemLoaded(f)||b++});0==b?n(c):G.forEach(c,function(f,m){a.isItemLoaded(f)||
a.loadItem({item:f,onItem:function(p){c[m]=p;0==--b&&n(c)},onError:l})})}else{var e=z.hitch(this,arguments.callee);a.loadItem({item:g,onItem:function(f){e(f,n,l)},onError:l})}},isItem:function(g){return this.store.isItem(g)},fetchItemByIdentity:function(g){this.store.fetchItemByIdentity(g)},getIdentity:function(g){return this.store.getIdentity(g)},getLabel:function(g){return this.labelAttr?this.store.getValue(g,this.labelAttr):this.store.getLabel(g)},newItem:function(g,n,l){var a={parent:n,attribute:this.childrenAttrs[0]},
c;this.newItemIdAttr&&g[this.newItemIdAttr]?this.fetchItemByIdentity({identity:g[this.newItemIdAttr],scope:this,onItem:function(d){d?this.pasteItem(d,null,n,!0,l):(c=this.store.newItem(g,a))&&void 0!=l&&this.pasteItem(c,n,n,!1,l)}}):(c=this.store.newItem(g,a))&&void 0!=l&&this.pasteItem(c,n,n,!1,l)},pasteItem:function(g,n,l,a,c){var d=this.store,h=this.childrenAttrs[0];n&&G.forEach(this.childrenAttrs,function(e){if(d.containsValue(n,e,g)){if(!a){var f=G.filter(d.getValues(n,e),function(m){return m!=
g});d.setValues(n,e,f)}h=e}});if(l)if("number"==typeof c){var b=d.getValues(l,h).slice();b.splice(c,0,g);d.setValues(l,h,b)}else d.setValues(l,h,d.getValues(l,h).concat(g))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(g,n){n&&this.getChildren(n.item,z.hitch(this,function(l){this.onChildrenChange(n.item,l)}))},onDeleteItem:function(g){this.onDelete(g)},onSetItem:function(g,n){if(-1!=G.indexOf(this.childrenAttrs,n))this.getChildren(g,z.hitch(this,function(l){this.onChildrenChange(g,
l)}));else this.onChange(g)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(G,q,C,z,g){return q("dijit.tree.ForestStoreModel",g,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(n){this.root={store:this,root:!0,id:n.rootId,label:n.rootLabel,children:n.rootChildren}},mayHaveChildren:function(n){return n===this.root||this.inherited(arguments)},getChildren:function(n,l,a){n===
this.root?this.root.children?l(this.root.children):this.store.fetch({query:this.query,onComplete:z.hitch(this,function(c){this.root.children=c;l(c)}),onError:a}):this.inherited(arguments)},isItem:function(n){return n===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(n){if(n.identity==this.root.id){var l=n.scope||C.global;n.onItem&&n.onItem.call(l,this.root)}else this.inherited(arguments)},getIdentity:function(n){return n===this.root?this.root.id:this.inherited(arguments)},getLabel:function(n){return n===
this.root?this.root.label:this.inherited(arguments)},newItem:function(n,l,a){return l===this.root?(this.onNewRootItem(n),this.store.newItem(n)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(n,l,a,c,d){if(l===this.root&&!c)this.onLeaveRoot(n);this.inherited(arguments,[n,l===this.root?null:l,a===this.root?null:a,c,d]);if(a===this.root)this.onAddToRoot(n)},onAddToRoot:function(n){console.log(this,": item ",n," added to root")},onLeaveRoot:function(n){console.log(this,": item ",
n," removed from root")},_requeryTop:function(){var n=this.root.children||[];this.store.fetch({query:this.query,onComplete:z.hitch(this,function(l){this.root.children=l;if(n.length!=l.length||G.some(n,function(a,c){return l[c]!=a}))this.onChildrenChange(this.root,l)})})},onNewItem:function(n,l){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(n){-1!=G.indexOf(this.root.children,n)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(n,l,a,c){this._requeryTop();this.inherited(arguments)}})})},
"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(G,q,C,z,g,n,l,a,c,d,h){return q("dijit.tree._dndSelector",h,{constructor:function(){this.selection={};this.anchor=null;this.events.push(a(this.tree.domNode,c.press,z.hitch(this,"onMouseDown")),a(this.tree.domNode,c.release,z.hitch(this,"onMouseUp")),a(this.tree.domNode,c.move,z.hitch(this,
"onMouseMove")),a(this.tree.domNode,d.press,z.hitch(this,"onClickPress")),a(this.tree.domNode,d.release,z.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var b=[],e=this.selection,f;for(f in e)b.push(e[f]);return b},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(b,e){this.setSelection(this.getSelectedTreeNodes().concat([b]));e&&(this.anchor=b);return b},removeTreeNode:function(b){var e=
G.filter(this.getSelectedTreeNodes(),function(f){return!n.isDescendant(f.domNode,b.domNode)});this.setSelection(e);return b},isTreeNodeSelected:function(b){return b.id&&!!this.selection[b.id]},setSelection:function(b){var e=this.getSelectedTreeNodes();G.forEach(this._setDifference(e,b),z.hitch(this,function(f){f.setSelected(!1);this.anchor==f&&delete this.anchor;delete this.selection[f.id]}));G.forEach(this._setDifference(b,e),z.hitch(this,function(f){f.setSelected(!0);this.selection[f.id]=f}));this._updateSelectionProperties()},
_setDifference:function(b,e){G.forEach(e,function(f){f.__exclude__=!0});b=G.filter(b,function(f){return!f.__exclude__});G.forEach(e,function(f){delete f.__exclude__});return b},_updateSelectionProperties:function(){var b=this.getSelectedTreeNodes(),e=[],f=[];G.forEach(b,function(m){var p=m.getTreePath();f.push(m);e.push(p)},this);b=G.map(f,function(m){return m.item});this.tree._set("paths",e);this.tree._set("path",e[0]||[]);this.tree._set("selectedNodes",f);this.tree._set("selectedNode",f[0]||null);
this.tree._set("selectedItems",b);this.tree._set("selectedItem",b[0]||null)},onClickPress:function(b){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(b.target,this.current))){"mousedown"==b.type&&l.isLeft(b)&&b.preventDefault();var e="keydown"==b.type?this.tree.focusedChild:this.current;if(e){var f=g.getCopyKeyState(b),m=e.id;this.singular||b.shiftKey||!this.selection[m]?(this._doDeselect=!1,this.userSelect(e,f,b.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(b){this._doDeselect&&
(this._doDeselect=!1,this.userSelect("keyup"==b.type?this.tree.focusedChild:this.current,g.getCopyKeyState(b),b.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(b,e){if(b===e)return 0;if("sourceIndex"in document.documentElement)return b.sourceIndex-e.sourceIndex;if("compareDocumentPosition"in document.documentElement)return b.compareDocumentPosition(e)&2?1:-1;if(document.createRange){var f=doc.createRange();f.setStartBefore(b);
b=doc.createRange();b.setStartBefore(e);return f.compareBoundaryPoints(f.END_TO_END,b)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(b,e,f){if(this.singular)this.anchor==b&&e?this.selectNone():(this.setSelection([b]),this.anchor=b);else if(f&&this.anchor){e=this._compareNodes(this.anchor.rowNode,b.rowNode);f=this.anchor;0>e?e=f:(e=b,b=f);for(f=[];e!=b;)f.push(e),e=this.tree._getNext(e);f.push(b);this.setSelection(f)}else this.selection[b.id]&&
e?this.removeTreeNode(b):e?this.addTreeNode(b,!0):(this.setSelection([b]),this.anchor=b)},getItem:function(b){return{data:this.selection[b],type:["treeNode"]}},forInSelectedItems:function(b,e){e=e||C.global;for(var f in this.selection)b.call(e,this.getItem(f),f,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(G,q,C,z,g,n){return q("dijit.tree._dndContainer",null,{constructor:function(l,a){this.tree=
l;this.node=l.domNode;z.mixin(this,a);this.containerState="";C.add(this.node,"dojoDndContainer");this.events=[g(this.node,n.enter,z.hitch(this,"onOverEvent")),g(this.node,n.leave,z.hitch(this,"onOutEvent")),G.after(this.tree,"_onNodeMouseEnter",z.hitch(this,"onMouseOver"),!0),G.after(this.tree,"_onNodeMouseLeave",z.hitch(this,"onMouseOut"),!0),g(this.node,"dragstart, selectstart",function(c){c.preventDefault()})]},destroy:function(){for(var l;l=this.events.pop();)l.remove();this.node=this.parent=
null},onMouseOver:function(l){this.current=l},onMouseOut:function(){this.current=null},_changeState:function(l,a){var c="dojoDnd"+l;l=l.toLowerCase()+"State";C.replace(this.node,c+a,c+this[l]);this[l]=a},_addItemClass:function(l,a){C.add(l,"dojoDndItem"+a)},_removeItemClass:function(l,a){C.remove(l,"dojoDndItem"+a)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/dijit/FeaturelayerChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/FeaturelayerServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(G,q,C,z,g,n,l,a,c,d,h,b,e,f,m,p,t){return G([q,C,z,b],{templateString:g,declaredClass:"jimu.dijit.FeaturelayerChooserFromPortal",baseClass:"jimu-service-chooser-from-portal jimu-featurelayer-chooser-from-portal",_serviceBrowserDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=n.mixin({},window.jimuNls.common);this.nls=n.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal);this.portalUrl=p.getStandardPortalUrl(this.portalUrl);this.multiple=!0===this.multiple?
!0:!1},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},_initSelf:function(){this.selector=new f({portalUrl:this.portalUrl,itemTypes:["Feature Service","Map Service"],onlyShowOnlineFeaturedItems:!1});this.own(c(this.selector,"item-selected",n.hitch(this,this._onItemSelected)));this.own(c(this.selector,"none-item-selected",n.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);
this.selector.startup();this.serviceBrowser=new m({multiple:this.multiple});this.own(c(this.serviceBrowser,"tree-click",n.hitch(this,this._onServiceBrowserClicked)));this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup()},_onItemSelected:function(){l.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){l.addClass(this.btnNext,"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceBrowserDef&&!this._serviceBrowserDef.isFulfilled()&&
this._serviceBrowserDef.cancel();l.setStyle(this.btnOk,"display","none");l.setStyle(this.btnNext,"display","block");l.setStyle(this.btnBack,"display","none");l.addClass(this.btnOk,"jimu-state-disabled");l.setStyle(this.selectorContainer,"display","block");l.setStyle(this.serviceBrowserContainer,"display","none");this.serviceBrowser.reset();this.emit("back")},_onBtnOkClicked:function(){var v=this.getSelectedItems();0<v.length&&this.emit("ok",v)},_onBtnNextClicked:function(){var v=this.selector.getSelectedItem();
v&&(l.setStyle(this.btnNext,"display","none"),l.setStyle(this.btnBack,"display","block"),l.setStyle(this.btnOk,"display","block"),l.addClass(this.btnOk,"jimu-state-disabled"),l.setStyle(this.selectorContainer,"display","none"),l.setStyle(this.serviceBrowserContainer,"display","block"),this.serviceBrowser.reset(),this._serviceBrowserDef=this.serviceBrowser.setUrl(v.url||v.item),this._serviceBrowserDef.then(n.hitch(this,function(){this._serviceBrowserDef=null;this._setOkStateBySelectedItems()}),n.hitch(this,
function(){this._serviceBrowserDef=null})),this.emit("next"))},_setOkStateBySelectedItems:function(){0<this.serviceBrowser.getSelectedItems().length?l.removeClass(this.btnOk,"jimu-state-disabled"):l.addClass(this.btnOk,"jimu-state-disabled")},_onServiceBrowserClicked:function(){this._setOkStateBySelectedItems()},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on dojo/dom-style jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable jimu/dijit/BindLabelPropsMixin dijit/form/RadioButton".split(" "),
function(G,q,C,z,g,n,l,a,c,d,h,b,e,f,m,p,t,v,x,y,A,J,L,M,N){return G([C,z,g,N,l],{templateString:n,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,showMyContent:!0,showMyOrganization:!0,showMyGroups:!0,showPublic:!0,showOnlyEditableGroups:!1,postMixInProperties:function(){this.portalUrl=y.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";d.forEach(this.itemTypes,a.hitch(this,function(k,r){this._itemTypes+=
'"'+k+'"';r!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";d.forEach(this.typeKeywords,a.hitch(this,function(k,r){this._typeKeywords+='"'+k+'"';r!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var k=this._getPortalUrl();
this.portal=v.getPortal(k);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=t.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=t.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){var k={title:this.nls.myContent,content:this.mycontentTabNode},r={title:this.nls.myOrganization,content:this.organizationTabNode},
B={title:this.nls.myGroup,content:this.groupTabNode},H={title:this.nls.publicMap,content:this.publicTabNode};p.set(this.mycontentTabNode,"display","none");p.set(this.organizationTabNode,"display","none");p.set(this.groupTabNode,"display","none");p.set(this.publicTabNode,"display","none");var I=[];this.showMyContent&&(I.push(k),p.set(this.mycontentTabNode,"display","block"));this.showMyOrganization&&(I.push(r),p.set(this.organizationTabNode,"display","block"));this.showMyGroups&&(I.push(B),p.set(this.groupTabNode,
"display","block"));this.showPublic&&(I.push(H),p.set(this.publicTabNode,"display","block"));this.tab=new L({tabs:I},this.tabNode);this.own(m(this.tab,"tabChanged",a.hitch(this,function(u){h.setStyle(this.signinSection,"display","none");u!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){h.setStyle(this.signinSection,"display","none");var k=f(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",
this.domNode);x.userHaveSignInPortal(this._getPortalUrl())?k.style("display","block"):(k.style("display","none"),this._isPublicTabShow||h.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){var k=this._getPortalUrl();k=y.getServerByUrl(k);this.portalPublicRaido.set("disabled",!1);this.onlinePublicRaido.set("disabled",!1);this.portalPublicRaido.set("checked",!0);var r=!1;y.isArcGIScom(k)?(r=!0,this.portalPublicLabel.innerHTML="ArcGIS.com"):(this.portalPublicLabel.innerHTML=
k,r=this.showOnlineItems?!1:!0);r&&(this.onlinePublicRaido.set("disabled",!0),h.setStyle(this.onlinePublicRaido,"display","none"),h.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var k="esri_"+(c.locale&&c.locale.slice(0,2)||"en").toLowerCase(),r=d.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
a.hitch(this,function(H){return H!==k})),B="";d.forEach(r,a.hitch(this,function(H){B+=" -owner:"+H+" "}));r=" ";this.portal&&this.portal.user&&this.portal.user.orgId&&(r=" orgid:"+this.portal.user.orgId+" ");r=r+this._itemTypeQueryString+" AND access:public "+B+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:r});this._filterPublicPortalQuery=this._getQuery({q:r,basicQ:r});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(k){return a.mixin({start:1,num:16,f:"json"},k||{})},_getPortalUrl:function(){return y.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(m(this.publicPortalItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));this.own(m(this.publicOnlineItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));this.own(m(this.organizationItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));this.own(m(this.groupItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));
this.own(m(this.mycontentItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));this.own(m(this.publicPortalItemTable,"update",a.hitch(this,this._onItemTableUpdate)));this.own(m(this.publicOnlineItemTable,"update",a.hitch(this,this._onItemTableUpdate)));this.own(m(this.organizationItemTable,"update",a.hitch(this,this._onItemTableUpdate)));this.own(m(this.groupItemTable,"update",a.hitch(this,this._onItemTableUpdate)));this.own(m(this.mycontentItemTable,"update",a.hitch(this,this._onItemTableUpdate)));
var k=this._getPortalUrl();this.portalPublicRaido.get("disabled")||(this.publicPortalItemTable.set("portalUrl",k),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.get("disabled")||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",
this._filterPublicOnlineQuery))},_initPublic:function(){this.own(m(this.portalPublicRaido,"click",a.hitch(this,this._onPublicRaidoClicked)));this.own(m(this.onlinePublicRaido,"click",a.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.get("checked")?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.get("checked")&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},
_onPublicSearch:function(k){(k=k&&a.trim(k))?(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.get("checked")?(this._filterPublicPortalQuery.q=k+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.get("checked")&&(this._filterPublicOnlineQuery.q=k+" "+this._itemTypeQueryString+" AND access:public "+
this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(m(this.groupsSelect,"change",a.hitch(this,this._onGroupsSelectChange)));var k=y.getServerByUrl(this._getPortalUrl());y.isArcGIScom(k)&&(k="ArcGIS.com");x.userHaveSignInPortal(this._getPortalUrl())&&
this._onSignIn()},_onOrganizationSearch:function(k){if(k=k&&a.trim(k)){if(this._allOrganizationQuery){var r=this._allOrganizationQuery.q;r&&(this._filterOrganizationQuery.q=k+" "+r,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(k){if(k=k&&a.trim(k)){if(this._allMyContentQuery){var r=this._allMyContentQuery.q;r&&(this._filterMyContentQuery.q=k+" "+
r,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},_onGroupSearch:function(k){if(k=k&&a.trim(k)){if(this._allGroupQuery){var r=this._allGroupQuery.q;r&&(this._filterGroupQuery.q=k+" "+r,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=
!0;var k=this._getPortalUrl();v.getPortal(k).getUser().then(a.hitch(this,function(r){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(r),this._searchMyContent(r),this._searchGroups(r))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(k){this.organizationItemTable.clear();k=" orgid:"+k.orgId+
" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var r=this._getPortalUrl();this._allOrganizationQuery=this._getQuery({q:k});this._filterOrganizationQuery=this._getQuery({q:k});this.organizationItemTable.set("portalUrl",r);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(k){this.mycontentItemTable.clear();var r=this._getPortalUrl();k="owner:"+k.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;
this._allMyContentQuery=this._getQuery({q:k});this._filterMyContentQuery=this._getQuery({q:k});this.mycontentItemTable.set("portalUrl",r);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(k){this._resetGroupsSection();h.setStyle(this.groupsSection,"display","flex");k=k.getGroups();if(0<k.length){h.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();h.empty(this.groupsSelect);for(var r=0;r<k.length;r++){var B=k[r];h.create("option",
{value:B.id,innerHTML:B.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(k.length)},_resetGroupsSection:function(){h.setStyle(this.groupsSection,"display","none");h.empty(this.groupsSelect);h.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();h.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(k){0===k?h.setStyle(this.groupsSection,
"top","15px"):h.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var k=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===k)h.setStyle(this.groupSearch,"display","none"),this.groupItemTable.hide();else{h.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var r=this._getPortalUrl();k="group:"+k+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:k});this._filterGroupQuery=this._getQuery({q:k});
this.groupItemTable.set("portalUrl",r);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(k){var r=h.hasClass(k,"jimu-state-active");f(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");r&&h.addClass(k,"jimu-state-active");(k=this.getSelectedItem())?this.emit("item-selected",k):this.emit("none-item-selected")},getSelectedItem:function(){var k=null,r=f(".item.jimu-state-active",this.domNode);
0<r.length&&(k=a.mixin({},r[0].item));return k}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),function(G,q,C,z,g,n,l,a,c,d,h,b,e,f,m,p){return G([q,C,z,n],{templateString:g,declaredClass:"jimu.dijit.ItemTable",
baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"desktopapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=m.getStandardPortalUrl(this.portalUrl));
this.showAllItemsSection();this.searchAllItems()},show:function(){c.setStyle(this.domNode,"display","block")},hide:function(){c.setStyle(this.domNode,"display","none")},searchAllItems:function(t){this.showAllItemsSection();t&&(this.query=l.mixin({},t),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),f.getPortal(this.portalUrl).queryItems(this.query).then(l.hitch(this,function(v){this.domNode&&(this.allItemsShelter.hide(),
this.query.start=v.nextStart,this._createItems(v,this.allItemTbody))}),l.hitch(this,function(v){console.error(v);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(t){this.showFilterItemsSection();t&&(this.filteredQuery=l.clone(t),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&(this.filteredItemShelter.show(),f.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(l.hitch(this,function(v){this.domNode&&
(this.showFilterItemsSection(),t&&this.clearFilteredItemsSection(),this.filteredQuery.start=v.nextStart,this._createItems(v,this.filteredItemsTbody),this._filterItemCallback())}),l.hitch(this,function(v){console.error(v);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?(c.setStyle(this.filteredItemsTableDiv,"display","block"),c.setStyle(this.searchNoneTipSection,"display","none")):(c.setStyle(this.filteredItemsTableDiv,
"display","none"),c.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){c.empty(this.allItemTbody)},clearFilteredItemsSection:function(){c.empty(this.filteredItemsTbody)},showAllItemsSection:function(){c.setStyle(this.allItemsSection,"display","block");c.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){c.setStyle(this.allItemsSection,"display","none");
c.setStyle(this.filteredItemsSection,"display","block");c.setStyle(this.filteredItemsTableDiv,"display","block");c.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&this.searchFilteredItems()},_isScrollToBottom:function(t){return e.isScrollToBottom(t)},_createItems:function(t,v){t=t.results;var x=
a.map(this.types,l.hitch(this,function(k){return k.toLowerCase()}));t=a.filter(t,l.hitch(this,function(k){k=k.type&&k.type.toLowerCase()||"";return 0<=a.indexOf(x,k)}));if(0!==t.length){var y=h("td.empty",v),A;if(0<y.length){var J=Math.min(t.length,y.length),L=t.splice(0,J);for(A=0;A<J;A++){var M=y[A];var N=this._createItem(L[A]);c.place(N,M);c.removeClass(M,"empty")}}if(0!==t.length){y=Math.ceil(t.length/2);for(A=0;A<y;A++)for(N=c.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e"),
c.place(N,v),J=h("td",N),L=0;L<J.length;L++)M=J[L],(N=t[2*A+L])?(N=this._createItem(N),c.place(N,M)):c.addClass(M,"empty");this.emit("update")}}},_getItemCount:function(t){return h(".item",t).length},_createItem:function(t){var v=c.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
v.item=t;var x=h(".item-thumbnail",v)[0],y=h(".item-name",v)[0],A=h(".item-type-owner",v)[0],J=h(".item-date",v)[0],L=h(".item-details",v)[0],M=h(".none-thumbnail-tip",v)[0];if(!t.thumbnailUrl){var N=this._defaultThumbnail[t.type];N&&(t.thumbnailUrl=require.toUrl("jimu")+"/images/"+N)}t.thumbnailUrl?c.setStyle(x,"backgroundImage","url("+t.thumbnailUrl+")"):M.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(J=h(".item-info",v)[0],this.onCreateItemContent(t,J)):(y.innerHTML=
t.title,y.title=y.innerHTML,A.innerHTML=t.type+" by "+t.owner,A.title=A.innerHTML,x=new Date,x.setTime(t.modified),J.innerHTML=x.toLocaleString(),J.title=J.innerHTML,L.innerHTML=this.nls.moreDetails,L.href=t.detailsPageUrl||"#");return v},_onItemsTableClicked:function(t){var v=t.target||t.srcElement;t=null;c.hasClass(v,"item-thumbnail")?t=v.parentNode:c.hasClass(v,"none-thumbnail-tip")&&(t=v.parentNode.parentNode);t&&(v=c.hasClass(t,"jimu-state-active"),h(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
v?c.removeClass(t,"jimu-state-active"):c.addClass(t,"jimu-state-active"),this.emit("item-dom-clicked",t))},getSelectedItem:function(){var t=null,v=h(".item.jimu-state-active",this.domNode);0<v.length&&(t=l.mixin({},v[0].item));return t}})})},"jimu/dijit/FeaturelayerServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(G,q,C,z,g){return G([q],{baseClass:"jimu-featurelayer-service-browser",declaredClass:"jimu.dijit.FeaturelayerServiceBrowser",
url:"",multiple:!1,types:null,isSupportQuery:!0,postMixInProperties:function(){this.inherited(arguments);this.rule=g.getFeaturelayerServiceBrowserRule(this.types,this.isSupportQuery)},getSelectedItems:function(){var n=this.inherited(arguments);return n=z.map(n,C.hitch(this,function(l){return{name:l.name,url:l.url,definition:l.definition}}))}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingIndicator".split(" "),
function(G,q,C,z,g,n,l,a,c,d,h,b,e,f,m){return G([q,C,z,g],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);l.addClass(this.domNode,
"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(p){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new c;p&&"string"===typeof p&&p.replace(/\/*$/g,"")||this._def.reject();p=p.replace(/\/*$/g,"");p=n.trim(p);var t=p.match(/^http(s?):\/\//gi);t&&0<t.length||
(p="http://"+p);if(!(0>=p.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=p))return p=this._getRootItem(),p=f.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,p):this._isUrlContainsServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,p):this._searchFolderServiceUrl(this._currentUrl,p),this.shelter.show(),p.then(n.hitch(this,function(v){this.domNode&&this.shelter.hide();var x=this.tree.getAllLeafTreeNodeWidgets();1===x.length&&
x[0].select();this._def.resolve(v)}),n.hitch(this,function(v){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(v)})),this._def;this._def.reject()},_getItem:function(p){return this.rule.getItem(p)},_getSubItemUrls:function(p){return this.rule.getSubItemUrls(p)},_getSubItems:function(p){var t=new c;this._getSubItemUrls(p).then(n.hitch(this,function(v){v=a.map(v,n.hitch(this,function(x){return this._getItem(x)}));d(v).then(n.hitch(this,function(x){x=a.filter(x,n.hitch(this,
function(y){return y&&"object"===typeof y}));t.resolve(x)}),n.hitch(this,function(x){t.reject(x)}))}),n.hitch(this,function(v){t.reject(v)}));return t},_selectFirstLeafTreeNodeWidget:function(){var p=this.tree.getAllLeafTreeNodeWidgets();1===p.length&&p[0].select()},isLeafItem:function(p){return 0<=this.rule.leafTypes.indexOf(p.type)},isServiceTypeSupported:function(p){return this.rule.isServiceTypeSupported(p)},_getStringEndWith:function(p,t){var v="",x=p.indexOf(t);0<=x&&(v=p.slice(0,x+t.length));
return v},_isUrlContainsServiceType:function(p){return this.rule.isUrlContainsServiceType(p)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(p){var t="";p=p.split("/");return t=p[p.length-1]},_searchBaseServiceUrl:function(p,t){var v=new c;this._getRestInfo(p).then(n.hitch(this,function(x){if(this.domNode){var y=[];a.map(x.folders,n.hitch(this,function(A){var J={name:A,type:"folder",url:p+"/"+A,parent:t.id};this._addItem(J);
var L=new c;this._doSearchFolderServiceUrl(J.url,J.id).then(n.hitch(this,function(M){0<M.length?a.forEach(M,n.hitch(this,function(N){N.parent=J.id;this._addItem(N)})):this._removeItem(J.id);L.resolve()}),n.hitch(this,function(M){L.reject(M)}));y.push(L);return L}));a.forEach(x.services,n.hitch(this,function(A){if(this.isServiceTypeSupported(A.type)){A=p+"/"+A.name+"/"+A.type;var J=new c;this.rule.getItem(A).then(n.hitch(this,function(L){L&&(L.parent=t.id,this._addItem(L));J.resolve()}),n.hitch(this,
function(L){console.error(L);J.reject(L)}));y.push(J)}}));d(y).then(n.hitch(this,function(){this.domNode&&v.resolve()}),n.hitch(this,function(A){console.error(A);this.domNode&&v.reject(A)}))}}),n.hitch(this,function(x){console.error(x);this.domNode&&v.reject({errorCode:"NETWORK_ERROR",error:x})}));return v},_searchFolderServiceUrl:function(p,t){var v=new c;this._doSearchFolderServiceUrl(p,t).then(n.hitch(this,function(x){this.domNode&&(a.forEach(x,n.hitch(this,function(y){y.parent=t.id;this._addItem(y)})),
v.resolve())}),n.hitch(this,function(x){console.error(x);this.domNode&&v.reject({errorCode:"NETWORK_ERROR",error:x})}));return v},_doSearchFolderServiceUrl:function(p){var t=new c,v=this._getBaseServiceUrl();this._getRestInfo(p).then(n.hitch(this,function(x){x=x.services;var y=[];x&&0<x.length&&a.forEach(x,n.hitch(this,function(A){this.isServiceTypeSupported(A.type)&&(A=this.rule.getItem(v+"/"+A.name+"/"+A.type),y.push(A))}));d(y).then(n.hitch(this,function(A){A=a.filter(A,n.hitch(this,function(J){return J}));
t.resolve(A)}),n.hitch(this,function(A){console.error(A);t.reject(A)}))}),n.hitch(this,function(x){console.error(x);t.reject(x)}));return t},_searchServiceUrl:function(p,t){var v=new c;this._getSubItems(p).then(n.hitch(this,function(x){x&&0<x.length?(a.forEach(x,n.hitch(this,function(y){y.parent=t.id;this._addItem(y)})),v.resolve()):this._getItem(p).then(n.hitch(this,function(y){y&&(y.parent=t.id,this._addItem(y));v.resolve()}),n.hitch(this,function(y){v.reject(y)}))}),n.hitch(this,function(x){v.reject(x)}));
return v},_getRestInfo:function(p){var t=new c;this.rule.getRestInfo(p).then(n.hitch(this,function(v){this.domNode&&t.resolve(v)}),n.hitch(this,function(v){this.domNode&&t.reject(v)}));return t},_clear:function(){var p=this._store.query({parent:"root"});a.forEach(p,n.hitch(this,function(t){t&&"root"!==t.id&&this._store.remove(t.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(p){this._id++;p.id=this._id.toString();this._store.add(p);return p},_removeItem:function(p){this._store.remove(p)},
_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var p=this._getRootItem();p=new h({data:[p],getChildren:function(t){return this.query({parent:t.id})}});this._store=new b(p);p=new e({store:this._store,query:{id:"root"},mayHaveChildren:n.hitch(this,this._mayHaveChildren)});this.tree=new m({multiple:this.multiple,model:p,showRoot:!1,style:{width:"100%"},isLeafItem:n.hitch(this,this.isLeafItem),onOpen:n.hitch(this,function(t,v){this._onTreeOpen(t,v);
this.emit("tree-open",t,v)}),onClick:n.hitch(this,function(t,v,x){this._onTreeClick(t,v,x);this.emit("tree-click",t,v,x)}),getIconStyle:n.hitch(this,function(t,v){var x=null;if(!t)return null;var y={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},A=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),J=this._getIconImageName(t,v);J||("folder"===t.type?J=v?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(t.type)&&
(J=v?"folder_open_default.png":"folder_close_default.png"));J&&(y.backgroundImage="url("+A+"/css/images/"+J+")",x=y);return x})});l.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(p,t){var v="";"function"===typeof this.rule.getIconImageName&&(v=this.rule.getIconImageName(p,t));return v},_mayHaveChildren:function(p){return"root"===p.type?!0:!this.isLeafItem(p)},_onTreeOpen:function(p,t){"root"===p.id||0<this._store.query({parent:p.id}).length||
p.checking||p.checked||(p.checking=!0,this._getSubItems(p.url).then(n.hitch(this,function(v){a.forEach(v,n.hitch(this,function(x){x.parent=p.id;this._addItem(x)}));p.checking=!1;p.checked=!0}),n.hitch(this,function(v){console.error(v);p.checking=!1;p.checked=!0})))},_onTreeClick:function(p,t,v){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/Deferred",
"jimu/utils","jimu/ServiceBrowserRule"],function(G,q,C,z,g){var n={combineRules:function(l){var a=new g;q.forEach(l,function(c){q.forEach(c.leafTypes,function(d){0>a.leafTypes.indexOf(d)&&a.leafTypes.push(d)});q.forEach(c.serviceTypes,function(d){0>a.serviceTypes.indexOf(d)&&a.serviceTypes.push(d)})});a.getMatchedRule=function(c){var d=null;q.some(l,function(h){return h.isUrlContainsServiceType(c)?(d=h,!0):!1});return d};a.getItem=function(c){var d=null;return d=(d=a.getMatchedRule(c))?d.getItem(c):
a.defaultGetItem(c)};a.getSubItemUrls=function(c){var d=null;return d=(d=a.getMatchedRule(c))?d.getSubItemUrls(c):a.defaultGetSubItemUrls(c)};a.getIconImageName=function(c,d){var h="";if(c.url){var b=a.getMatchedRule(c.url);b&&"function"===typeof b.getIconImageName&&(h=b.getIconImageName(c,d))}return h};return a},getFeaturelayerServiceBrowserRule:function(l,a,c){l=G.clone(l);var d=["point","polyline","polygon"];G.isArrayLike(l)&&0<l.length?(l=q.filter(l,function(h){return 0<=d.indexOf(h)}),0===l.length&&
(l=d)):l=d;return n._getFeaturelayerServiceBrowserRule(l,a,c)},_getFeaturelayerServiceBrowserRule:function(l,a,c){return new g({types:l,leafTypes:["Feature Layer","Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",getItem:function(d){var h=new C;this.isUrlEndWithServiceType(d,this.serviceTypes)?h=this.defaultGetItem(d):this.getRestInfo(d).then(G.hitch(this,function(b){b=this._getItemByLayerDefinition(d,b);h.resolve(b)}),
G.hitch(this,function(b){h.reject(b)}));return h},getSubItemUrls:function(d){var h=new C;return h=this.isUrlEndWithServiceType(d)?this._getSubUrlsByServiceUrl(d):this._getSubUrlsByGroupUrl(d)},getIconImageName:function(d,h){var b="";"MapServer"===d.type||"FeatureServer"===d.type?b=h?"mapserver_open.png":"mapserver_close.png":d.type===this._groupLayerType?b=h?"group_layer2.png":"group_layer1.png":d.type===this._featureLayerType?(d=z.getTypeByGeometryType(d.definition&&d.definition.geometryType),"point"===
d?b="point_layer1.png":"polyline"===d?b="line_layer1.png":"polygon"===d&&(b="polygon_layer1.png")):d.type===this._tableType?b="table.png":"root"===d.type&&this._currentUrl&&q.some(this.serviceTypes,G.hitch(this,function(e){return z.isStringEndWith(this._currentUrl,"/"+e)}))&&(b=h?"mapserver_open.png":"mapserver_close.png");return b},_getSubUrlsByServiceUrl:function(d){var h=new C;this.getRestInfo(d).then(G.hitch(this,function(b){var e=[];q.forEach(b.layers,G.hitch(this,function(f){0<=f.parentLayerId||
e.push(d+"/"+f.id)}));c&&q.forEach(b.tables,G.hitch(this,function(f){0<=f.parentLayerId||e.push(d+"/"+f.id)}));h.resolve(e)}),G.hitch(this,function(b){h.reject(b)}));return h},_getSubUrlsByGroupUrl:function(d){var h=new C;this.getRestInfo(d).then(G.hitch(this,function(b){var e=[];if(b.type===this._groupLayerType){var f=this._getServiceUrlByLayerUrl(d);e=q.map(b.subLayers||[],G.hitch(this,function(m){return f+"/"+m.id}))}h.resolve(e)}),G.hitch(this,function(b){h.reject(b)}));return h},_getItemByLayerDefinition:function(d,
h){var b=null,e=h.type;if(e===this._groupLayerType)b={name:h.name,type:e,url:d,definition:h};else if(e===this._featureLayerType||e===this._tableType){var f=!1;e===this._featureLayerType?f=this._validateEsriGeometryType(h.geometryType):e===this._tableType&&(f=!0);f&&(f=!1,(f=a?z.isFeaturelayerUrlSupportQuery(d,h.capabilities):!0)&&(b={name:h.name,type:e,url:d,definition:h}))}return b},_validateEsriGeometryType:function(d){d=z.getTypeByGeometryType(d);return 0<=this.types.indexOf(d)},_getServiceUrlByLayerUrl:function(d){for(var h=
"",b=0;b<this.serviceTypes.length;b++){var e=this.serviceTypes[b].toLowerCase(),f=d.toLowerCase().lastIndexOf("/"+e+"/");if(0<=f){h=d.slice(0,f+e.length+1);break}}return h}})},getGeocodeServiceBrowserRule:function(){return new g({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},getGpServiceBrowserRule:function(){return new g({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(l){var a=new C;this.isUrlEndWithServiceType(l)?a=this.defaultGetItem(l):this.getRestInfo(l).then(G.hitch(this,
function(c){a.resolve({name:c.displayName||c.name,type:"GPTask",url:l,definition:c})}),G.hitch(this,function(c){a.reject(c)}));return a},getSubItemUrls:function(l){var a=new C;this.isUrlEndWithServiceType(l)?this.getRestInfo(l).then(G.hitch(this,function(c){c=q.map(c.tasks||[],G.hitch(this,function(d){return l+"/"+d}));a.resolve(c)}),G.hitch(this,function(c){a.reject(c)})):a.resolve([]);return a},getIconImageName:function(l,a){a="";"GPServer"===l.type?a="toolbox.png":"GPTask"===l.type&&(a="tool.png");
return a}})},getImageServiceBrowserRule:function(l){return new g({leafTypes:["ImageServer"],serviceTypes:["ImageServer"],getItem:function(a){var c=new C;this.isUrlEndWithServiceType(a)?this.defaultGetItem(a).then(G.hitch(this,function(d){l?z.isImageServiceSupportQuery(d.definition.capabilities)?c.resolve(d):c.resolve(null):c.resolve(d)}),G.hitch(this,function(d){c.reject(d)})):c.resolve(null);return c},getIconImageName:function(a,c){c="";"ImageServer"===a.type&&(c="image_layer.png");return c}})},
getQueryableServiceBrowserRule:function(){var l=n.getFeaturelayerServiceBrowserRule(["point","polyline","polygon"],!0,!0),a=n.getImageServiceBrowserRule(!0);return n.combineRules([l,a])}};return n})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),function(G,q,C,z,g,n,l){return G([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(a){q.mixin(this,a);q.isArrayLike(this.leafTypes)||
(this.leafTypes=[]);q.isArrayLike(this.serviceTypes)||(this.serviceTypes=[])},getItem:function(a){return this.defaultGetItem(a)},getSubItemUrls:function(a){return this.defaultGetSubItemUrls(a)},getIconImageName:function(a,c){return""},defaultGetItem:function(a){var c=new z;a=a.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(a)){var d=a.split("/"),h=d[d.length-1],b=d[d.length-2];this.getRestInfo(a).then(q.hitch(this,function(e){c.resolve({name:b,type:h,url:a,definition:e})}),q.hitch(this,function(e){console.error(e);
c.reject({errorCode:"NETWORK_ERROR",error:e})}))}else c.resolve(null);return c},defaultGetSubItemUrls:function(a){a=new z;a.resolve([]);return a},getRestInfo:function(a){var c=new z;a=a.replace(/\/*$/g,"");var d=this._restInfoCache[a];if(d)c.resolve(d);else{d={url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4};var h=l.findCredential(a);h&&h.token&&(d.content.token=h.token);n(d).then(q.hitch(this,function(b){this._restInfoCache[a]=b;c.resolve(b)}),function(b){c.reject(b)})}return c},
isServiceTypeSupported:function(a){a=a.toLowerCase();return C.some(this.serviceTypes,q.hitch(this,function(c){return c.toLowerCase()===a}))},isUrlEndWithServiceType:function(a){return C.some(this.serviceTypes,q.hitch(this,function(c){return g.isStringEndWith(a,"/"+c)}))},isUrlContainsServiceType:function(a){a=a.toLowerCase();return C.some(this.serviceTypes,q.hitch(this,function(c){c=c.toLowerCase();return 0<=a.indexOf("/"+c)}))}})})},"jimu/dijit/_FeaturelayerServiceChooserContent":function(){define(["dojo/_base/declare",
"./_BasicServiceChooserContent","./FeaturelayerServiceBrowser"],function(G,q,C){return G([q],{baseClass:"jimu-featurelayer-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/MapServer","http://myserver/arcgis/rest/services/myservice/FeatureServer"],_createServiceBrowser:function(z){return new C(z)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),
function(G,q,C,z,g,n,l,a,c,d,h,b,e,f,m){return G([q,C,z,n],{templateString:g,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=d.mixin({},window.jimuNls.common);this.nls=d.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
a.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(p){var t=new l;(this.url=p)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),t=this._onBtnValidateClick()):t.reject();return t},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?c.forEach(this._examples,d.hitch(this,function(t){a.create("div",{innerHTML:t,
"class":"example-url"},this.exampleTd)})):a.setStyle(this.exampleTr,"display","none");var p={multiple:this.multiple,_onTreeClick:d.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(p);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(b.after(this.urlInput,"validator",d.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(h(this.serviceBrowser,"error",d.hitch(this,
this._onServiceBrowserError)))},_createServiceBrowser:function(p){},_validateUrl:function(p){p=p.replace(/\/*$/g,"");if((p=p.match(/\/rest\/services\/*(.*)/gi))&&0<p.length)if(p=p[0].replace(/\/rest\/services\/*/,"")){var t=p.split("/");if(1===t.length)return!0;if(2===t.length)return this.serviceBrowser.isServiceTypeSupported(t[1]);if(3<=t.length)return p=this.serviceBrowser.isServiceTypeSupported(t[1]),t=this.serviceBrowser.isServiceTypeSupported(t[2]),p||t}else return!0;else return!1},_afterUrlValidate:function(p){p&&
(p=this.urlInput.get("value"),p=this._validateUrl(p));p?a.removeClass(this.btnValidate,"jimu-state-disabled"):a.addClass(this.btnValidate,"jimu-state-disabled");return p},_onServiceBrowserError:function(p){this._showErrorMessage(p)},_showErrorMessage:function(p){p&&"string"===typeof p?(this.errorNode.innerHTML=p,a.addClass(this.errorSection,"visible")):a.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";a.removeClass(this.errorSection,"visible")},
_onBtnValidateClick:function(){this._clearErrorMessage();var p=new l;if(this.urlInput.validate()){var t=this.urlInput.get("value");this.serviceBrowser.setUrl(t).then(d.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();p.resolve()}),d.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();p.reject()}));this.emit("validate-click")}else p.reject();return p},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?a.removeClass(this.btnOk,"jimu-state-disabled"):
a.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var p=this.getSelectedItems();0<p.length&&this.emit("ok",p)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"widgets/Chart/setting/SingleChartSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dojo/on dojo/Evented dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SingleChartSetting.html dijit/TooltipDialog dijit/popup jimu/dijit/Popup jimu/utils jimu/dijit/TabContainer3 jimu/dijit/Filter jimu/dijit/_FeaturelayerSourcePopup jimu/dijit/Message jimu/dijit/StatisticsChart jimu/LayerInfos/LayerInfos ./DataFields ./Sort ./utils jimu/dijit/_StatisticsChartSettings esri/tasks/query esri/tasks/QueryTask esri/symbols/jsonUtils dijit/Tooltip dijit/form/Select dijit/form/ValidationTextBox jimu/dijit/SymbolPicker jimu/dijit/SimpleTable jimu/dijit/LoadingIndicator jimu/dijit/CheckBox".split(" "),
function(G,q,C,z,g,n,l,a,c,d,h,b,e,f,m,p,t,v,x,y,A,J,L,M,N,k,r,B,H,I){return G([d,a,h,b],{baseClass:"jimu-widget-singlechart-setting",templateString:e,mediaSelector:null,config:null,map:null,nls:null,tr:null,folderUrl:"",appConfig:null,_webMapLayerId:null,_filterParts:null,maxPreviewFeaturesCount:50,_layerDefinition:null,_highLightColor:"#ff0000",_oidFieldType:"esriFieldTypeOID",_stringFieldType:"esriFieldTypeString",_numberFieldTypes:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle",
"esriFieldTypeDouble"],_dateFieldType:"esriFieldTypeDate",postCreate:function(){this.inherited(arguments);k.layerInfosObj=L.getInstanceSync();this._initSelf()},destroy:function(){this.tr=null;delete this.tr;this._hideAllTooltipDialogs();this._destroyTooltipDialog("filterTooltipDialog");this._destroyTooltipDialog("sortOrderTooltipDialog");this._destroyTooltipDialog("columnTTD");this._destroyTooltipDialog("barTTD");this._destroyTooltipDialog("lineTTD");this._destroyTooltipDialog("pieTTD");this.filter&&
this.filter.destroy();this.jimuPopup&&(this.jimuPopup.onClose=q.hitch(this,function(){return!0}),this.jimuPopup.close());this.inherited(arguments)},_destroyTooltipDialog:function(u){var D=this[u];D&&(this._hideTooltipDialog(D),D.destroy());D=null;this[u]=null},_hideAllTooltipDialogs:function(){this._hideTooltipDialog(this.filterTooltipDialog);this._hideTooltipDialog(this.sortOrderTooltipDialog);this._hideAllParamsTooltipDialogs()},_hideAllParamsTooltipDialogs:function(){this.columnTTD&&this._hideTooltipDialog(this.columnTTD);
this.barTTD&&this._hideTooltipDialog(this.barTTD);this.lineTTD&&this._hideTooltipDialog(this.lineTTD);this.pieTTD&&this._hideTooltipDialog(this.pieTTD)},_hideTooltipDialog:function(u){u&&(m.close(u),u.isOpendNow=!1)},_showTooltipDialog:function(u,D,F){u&&(D={popup:u,around:D},F&&(D.orient=F),m.open(D),u.isOpendNow=!0)},startup:function(){this._started||this.inherited(arguments);this._started=!0},_updateUrlTextBoxLength:function(){try{var u=z.getMarginBox(this.btnSetSource),D=z.getContentBox(this.descriptionTA);
z.setStyle(this.urlTextBox.domNode,"width",Math.max(D.w-u.w-10,380)+"px")}catch(F){console.error(F)}},setConfig:function(u){if(this._isObject(u)){this.config=u;this._filterParts=u.filter;var D=u.url||"";D&&"string"===typeof D&&(u=u.webMapLayerId,this._layerDefinition&&this._layerDefinition.url===D?this._resetByConfig(this.config,this._layerDefinition):(this._layerDefinition=null,this.showBigShelter(),k.getLayerDefinitionByLayerIdOrUrl(u,D).then(function(F){this.domNode&&(this.hideBigShelter(),this._layerDefinition=
F,this._layerDefinition.url=D,this._resetByConfig(this.config,this._layerDefinition))}.bind(this),function(F){console.error(F);this.domNode&&this.hideBigShelter()}.bind(this))))}},getConfig:function(u){var D={url:"",filter:"",description:"",symbol:"",webMapLayerId:this._webMapLayerId,mode:"",name:"",highLightColor:"",types:[]};D.url=this.urlTextBox.get("value");var F=this.filter.toJson();if(!F||!F.expr)return u&&(this.tab.viewStack.getSelectedLabel()!==this.nls.preview&&this._showTooltipDialog(this.filterTooltipDialog,
this.urlTextBox.domNode),this._showMessage(this.nls.setFilterTip)),!1;D.filter=F;F=this.chartNameTextBox.get("value");F=t.stripHTML(F);if(!F)return u&&this._showMessage(this.nls.setChartTitleTip),!1;D.name=F;D.description=t.stripHTML(this.descriptionTA.value);D.mode=this.chartModeSelect.get("value");this.columnCbx.checked&&D.types.push({type:"column",display:this.columnParameters.getConfig()});this.pieCbx.checked&&D.types.push({type:"pie",display:this.pieParameters.getConfig()});this.barCbx.checked&&
D.types.push({type:"bar",display:this.barParameters.getConfig()});this.lineCbx.checked&&D.types.push({type:"line",display:this.lineParameters.getConfig()});if(0===D.types.length&&u)return this._showMessage(this.nls.setChartTypeTip),!1;if("feature"===D.mode){F={labelField:"",valueFields:[],sortOrder:{}};F.labelField=this.featureAxisLabelSelect.get("value");var K=this.valueFields.getSelectedFieldNames();if(0===K.length)return u&&this._showMessage(this.nls.setDataFieldTip),!1;F.valueFields=K;F.sortOrder=
this._getSortOrder();D=q.mixin(D,F)}else if("category"===D.mode){F={categoryField:"",operation:"",valueFields:[],sortOrder:{}};F.categoryField=this.categoryFieldSelect.get("value");F.operation=this.categoryOperationSelect.get("value");K=this.valueFields.getSelectedFieldNames();if(0===K.length)return u&&this._showMessage(this.nls.setDataFieldTip),!1;F.valueFields=K;F.sortOrder=this._getSortOrder();D=q.mixin(D,F)}else if("count"===D.mode)u={categoryField:"",sortOrder:{}},u.categoryField=this.categoryFieldSelect.get("value"),
u.sortOrder=this._getSortOrder(),D=q.mixin(D,u);else if("field"===D.mode){F={operation:"",valueFields:[],sortOrder:{}};F.operation=this.fieldOperationSelect.get("value");K=this.valueFields.getSelectedFieldNames();if(0===K.length)return u&&this._showMessage(this.nls.setDataFieldTip),!1;F.valueFields=K;F.sortOrder=this._getSortOrder();D=q.mixin(D,F)}this.config=q.clone(D);if(u=this.symbolPicker.getSymbol())D.symbol=u.toJson();else return!1;u=this.colorPicker.getColor();D.highLightColor=u.toHex();this.tr._layerDefinition=
this._layerDefinition;return q.clone(D)},showBigShelter:function(){this.emit("show-shelter")},_getSortOrder:function(){return this.sortDijit.getConfig()},hideBigShelter:function(){this.emit("hide-shelter")},_showMessage:function(u){new A({message:u})},_isObject:function(u){return u&&"object"===typeof u},_initSelf:function(){this._initCheckBox();this._initTabs();this._initChartTypes();this._initFilter();this._initSortOrder();this._initDataFields();this._initPreview();this._updateUIByMode(this.config&&
this.config.mode)},_initCheckBox:function(){this.columnCbx.setLabel(this.nls.column);this.pieCbx.setLabel(this.nls.pie);this.barCbx.setLabel(this.nls.bar);this.lineCbx.setLabel(this.nls.line)},_initTabs:function(){var u={title:this.nls.preview,content:this.previewTabNode};this.tab=new v({tabs:[{title:this.nls.settings,content:this.settingsTabNode},u]});this.tab.placeAt(this.tabDiv);this.own(l(this.tab,"tabChanged",q.hitch(this,function(D){this._hideAllTooltipDialogs();D===u.title&&this._updatePreview()})))},
_initFilter:function(){var u=z.toDom('\x3cdiv\x3e\x3cdiv class\x3d"filter-div"\x3e\x3c/div\x3e\x3cdiv class\x3d"operations" style\x3d"overflow:hidden;"\x3e\x3cdiv class\x3d"jimu-btn  jimu-float-trailing btn-cancel"\x3e\x3c/div\x3e\x3cdiv class\x3d"jimu-btn  jimu-float-trailing btn-ok"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),D=g(".filter-div",u)[0],F=g(".btn-ok",u)[0],K=g(".btn-cancel",u)[0];F.innerHTML=this.nls.ok;K.innerHTML=this.nls.close;window.isRTL?F.style.marginLeft="20px":F.style.marginRight=
"20px";this.jimuPopup=new p({width:700,content:u,hasTitle:!1,enableMoveable:!1,autoHeight:!0,hiddenAfterInit:!0,onClose:q.hitch(this,function(){this.resetFilter(this._filterParts);this._hideJimuPopup();return!1}),buttons:[]});this.filter=new x({autoSwitchMode:!1,runtime:!0});this.filter.allExpsBox.style.maxHeight="300px";this.filter.allExpsBox.style.overflowY="auto";this.filter.placeAt(D);this.filter.startup();this.own(l(F,"click",q.hitch(this,function(){(this._filterParts=this.filter.toJson())?this._hideJimuPopup():
this._showMessage(this.nls.setFilterTip)})));this.own(l(K,"click",q.hitch(this,function(){this.resetFilter(this._filterParts);this._hideJimuPopup()})));this.own(l(this.filterIcon,"click",q.hitch(this,function(){this.jimuPopup&&(this.jimuPopup.show(),this.jimuPopup.resize())})))},_hideJimuPopup:function(){this.jimuPopup&&this.jimuPopup.hide()},_initSortOrder:function(){this.sortDijit=new N({nls:this.nls});this.sortDijit.placeAt(this.SortDiv)},_initDataFields:function(){this.valueFields=new M({nls:this.nls});
this.valueFields.placeAt(this.dataFieldsDiv);this.valueFields.startup();this.own(l(this.valueFields,"change",q.hitch(this,function(){this._updateChartTypes();this._updateSortFields();this._updateParametersDijit()})))},_updateParametersDijit:function(){var u=this.chartModeSelect.get("value");"feature"===u||"category"===u?1===this.valueFields.getSelectedFieldNames().length?(this.columnParameters.showSingleColor(),this.barParameters.showSingleColor(),this.lineParameters.showSingleColor()):(this.columnParameters.showMultiColor(),
this.barParameters.showMultiColor(),this.lineParameters.showMultiColor()):(this.columnParameters.showSingleColor(),this.barParameters.showSingleColor(),this.lineParameters.showSingleColor());this._updateChartModeOfChartParamters(u)},_updateChartTypes:function(){this.pieCbx.setStatus(!0);var u=this.chartModeSelect.get("value");("feature"===u||"category"===u)&&1<this.valueFields.getSelectedFieldNames().length&&(this.pieCbx.setValue(!1),this.pieCbx.setStatus(!1))},_initChartTypes:function(){var u=this.folderUrl+
"common/images";this.columnParameters=new r({type:"column",imagesUrl:u,isInWidget:!1,singleColor:!1,nls:this.nls,config:null});this.columnTTD=this._createParametersDialog(this.columnCbx,this.columnEdit,this.columnParameters);this.pieParameters=new r({type:"pie",imagesUrl:u,isInWidget:!1,singleColor:!1,nls:this.nls,config:null});this.pieTTD=this._createParametersDialog(this.pieCbx,this.pieEdit,this.pieParameters);this.barParameters=new r({type:"bar",imagesUrl:u,isInWidget:!1,singleColor:!1,nls:this.nls,
config:null});this.barTTD=this._createParametersDialog(this.barCbx,this.barEdit,this.barParameters);this.lineParameters=new r({type:"line",imagesUrl:u,isInWidget:!1,singleColor:!1,nls:this.nls,config:null});this.lineTTD=this._createParametersDialog(this.lineCbx,this.lineEdit,this.lineParameters);this.own(l(document.body,"click",q.hitch(this,function(D){var F=D.target||D.srcElement;this._unselectEditDivs();var K=null,Q=K=null,P=D=null;if(z.hasClass(F,"checkbox"))K=F;else if(z.hasClass(F,"label")){var W=
F.previousElementSibling;z.hasClass(W,"checkbox")&&(K=W)}W=F===this.columnEdit||F===this.pieEdit||F===this.barEdit||F===this.lineEdit;K===this.columnCbx.checkNode||K===this.pieCbx.checkNode||K===this.barCbx.checkNode||K===this.lineCbx.checkNode?(K===this.columnCbx.checkNode?(Q=this.columnCbx,D=this.columnEdit,P=this.columnTTD):K===this.pieCbx.checkNode?(Q=this.pieCbx,D=this.pieEdit,P=this.pieTTD):K===this.barCbx.checkNode?(Q=this.barCbx,D=this.barEdit,P=this.barTTD):K===this.lineCbx.checkNode&&(Q=
this.lineCbx,D=this.lineEdit,P=this.lineTTD),K=!!P.isOpendNow,this._hideAllParamsTooltipDialogs(),Q.checked?(this._showEditDiv(D),z.addClass(D,"selected"),this._showTooltipDialog(P,D)):(this._hideTooltipDialog(P),this._hideEditDiv(D))):W?(D=F,D===this.columnEdit?P=this.columnTTD:D===this.pieEdit?P=this.pieTTD:D===this.barEdit?P=this.barTTD:D===this.lineEdit&&(P=this.lineTTD),K=!!P.isOpendNow,this._hideAllParamsTooltipDialogs(),K?this._hideTooltipDialog(P):(this._showTooltipDialog(P,D),z.addClass(D,
"selected"))):(this.columnTTD.isOpendNow?(D=this.columnEdit,P=this.columnTTD):this.pieTTD.isOpendNow?(D=this.pieEdit,P=this.pieTTD):this.barTTD.isOpendNow?(D=this.barEdit,P=this.barTTD):this.lineTTD.isOpendNow&&(D=this.lineEdit,P=this.lineTTD),P?(Q=F===P.domNode,F=z.isDescendant(F,P.domNode),Q||F?(this._hideAllParamsTooltipDialogs(),this._showTooltipDialog(P,D),z.addClass(D,"selected")):this._hideAllParamsTooltipDialogs()):this._hideAllParamsTooltipDialogs())})))},_createParametersDialog:function(u,
D,F){u=z.create("div");F.placeAt(u);return new f({content:u})},_unselectEditDivs:function(){z.removeClass(this.columnEdit,"selected");z.removeClass(this.pieEdit,"selected");z.removeClass(this.barEdit,"selected");z.removeClass(this.lineEdit,"selected")},_showEditDiv:function(u){z.setStyle(u,"display","inline-block")},_hideEditDiv:function(u){z.setStyle(u,"display","none")},_initPreview:function(){this.preview=new J({map:null,isBigPreview:!1,showSettingIcon:!1,showZoomIcon:!1,zoomToFeaturesWhenClick:!1});
this.preview.placeAt(this.previewDiv);this.preview.startup()},_updateUIByMode:function(u){var D=(u||this.chartModeSelect.get("value")||"")+"-tr";u=g(".detail-tr",this.detailsTable);C.forEach(u,q.hitch(this,function(F){z.hasClass(F,D)?z.addClass(F,"show-tr"):z.removeClass(F,"show-tr")}));this._updateChartTypes();this._updateParametersDijit();this.sortDijit&&(this.sortDijit.reset(),this._updateSortFields())},_onChartModeChanged:function(){if(!this.ignoreChangeEvents){var u=this.chartModeSelect.get("value")||
"";this._updateUIByMode(u)}},_updateSortFields:function(){var u=this.chartModeSelect.get("value");this.sortDijit&&("count"===u||"field"===u?this.sortDijit.setFieldOptions():(u=this._generateSortFieldOption(u),this.sortDijit.setFieldOptions(u)))},_generateSortFieldOption:function(){var u=this.valueFields.getSelectedFieldNames();if(u&&!(1>=u.length))return u.map(function(D){return{label:k.getAliasByFieldName(D,this._layerDefinition),value:D}}.bind(this))},_updateChartModeOfChartParamters:function(u){u&&
(this.columnParameters&&this.columnParameters._updateLegendDisplayByMode(u),this.pieParameters&&this.pieParameters._updateLegendDisplayByMode(u),this.barParameters&&this.barParameters._updateLegendDisplayByMode(u),this.lineParameters&&this.lineParameters._updateLegendDisplayByMode(u))},_onChartNameBlurred:function(){var u=t.stripHTML(this.chartNameTextBox.get("value"));this.chartNameTextBox.set("value",u)},_onChartNameChanged:function(){this.emit("name-change",this.chartNameTextBox.get("value"))},
_onDescriptionBlurred:function(){this.descriptionTA.value=t.stripHTML(this.descriptionTA.value)},_clear:function(){this._layerDefinition=null;this.urlTextBox.set("value","");this.filter.reset();this.chartNameTextBox.set("value","");this.descriptionTA.value="";this.chartModeSelect.removeOption(this.chartModeSelect.getOptions());this.categoryFieldSelect.removeOption(this.categoryFieldSelect.getOptions());this.categoryOperationSelect.set("value","sum");this.fieldOperationSelect.set("value","sum");this.valueFields.clear();
this.featureAxisLabelSelect.removeOption(this.featureAxisLabelSelect.getOptions());this.columnCbx.setValue(!1);this.pieCbx.setValue(!1);this.barCbx.setValue(!1);this.lineCbx.setValue(!1);this.columnParameters.reset();this.pieParameters.reset();this.barParameters.reset();this.lineParameters.reset();this.symbolPicker.reset();this.colorPicker.setColor(new n(this._highLightColor));this.sortDijit.reset(!0);this.preview.clear()},_onBtnSetClicked:function(){var u=new y({titleLabel:this.nls.setDataSource,
dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});this.own(l(u,"ok",q.hitch(this,function(D){var F=u.getSelectedRadioType();u.close();u=null;var K=D.layerInfo&&D.layerInfo.id,Q=D.url;this.showBigShelter();k.getLayerDefinitionByLayerIdOrUrl(K,Q).then(function(P){this.hideBigShelter();D.definition=null;D.definition=P;this.setNewLayerDefinition(D,F,null)}.bind(this),function(P){console.error(P);this.hideBigShelter()}.bind(this))})));
this.own(l(u,"cancel",q.hitch(this,function(){u.close();u=null})));u.startup()},_hasNumberFields:function(u){var D=!1;(u=u.fields)&&0<u.length&&(D=C.some(u,q.hitch(this,function(F){return 0<=this._numberFieldTypes.indexOf(F.type)})));return D},setNewLayerDefinition:function(u,D,F){u.definition.name=u.name;u.definition.url=u.url;u.url!==(this._layerDefinition&&this._layerDefinition.url)&&this._resetByNewLayerDefinition(u,D,F)},_resetByNewLayerDefinition:function(u,D,F){var K=u.definition;this._addAliasForLayerInfo(K);
this._clear();if(K){var Q=null;"map"===D&&u.layerInfo&&(Q=u.layerInfo.id);this._layerDefinition=K;this._webMapLayerId=Q;u=K.url;this.urlTextBox.set("value",u);this.filter.reset();this._layerDefinition&&this.filter.build({featureLayerId:this._webMapLayerId,url:u,partsObj:null,layerDefinition:this._layerDefinition});this.chartNameTextBox.set("value",F||K.name);this._resetFieldsDijitsByLayerInfo(this._layerDefinition);F=t.getTypeByGeometryType(K.geometryType);K="";"point"===F?K="marker":"polyline"===
F?K="line":"polygon"===F&&(K="fill");K&&this.symbolPicker.showByType(K)}},_resetFieldsDijitsByLayerInfo:function(u){this.chartModeSelect.removeOption(this.chartModeSelect.getOptions());this._hasNumberFields(u)?(this.chartModeSelect.addOption({value:"feature",label:this.nls.featureOption}),this.chartModeSelect.addOption({value:"category",label:this.nls.categoryOption}),this.chartModeSelect.addOption({value:"count",label:this.nls.countOption}),this.chartModeSelect.addOption({value:"field",label:this.nls.fieldOption}),
this.chartModeSelect.set("value","feature")):(this.chartModeSelect.addOption({value:"count",label:this.nls.countOption}),this.chartModeSelect.set("value","count"));var D=u.displayField;u=q.clone(u.fields);var F=[this._stringFieldType,this._dateFieldType];F=F.concat(q.clone(this._numberFieldTypes));var K=C.filter(u,q.hitch(this,function(T){return 0<=F.indexOf(T.type)}));this.categoryFieldSelect.removeOption(this.categoryFieldSelect.getOptions());var Q="";C.forEach(K,q.hitch(this,function(T){this.categoryFieldSelect.addOption({value:T.name,
label:T.alias||T.name});T.name===D&&(Q=D)}));this.categoryFieldSelect.set("value",Q);var P=[this._stringFieldType,this._oidFieldType,this._dateFieldType].concat(q.clone(this._numberFieldTypes));K=C.filter(u,q.hitch(this,function(T){return 0<=P.indexOf(T.type)}));this.featureAxisLabelSelect.removeOption(this.featureAxisLabelSelect.getOptions());var W="";C.forEach(K,q.hitch(this,function(T){var w={value:T.name,label:T.alias||T.name};D?T.name===D&&(W=T.name):T.type===this._oidFieldType&&(W=T.name);this.featureAxisLabelSelect.addOption(w)}));
this.featureAxisLabelSelect.set("value",W);u=C.filter(u,q.hitch(this,function(T){return 0<=this._numberFieldTypes.indexOf(T.type)}));this.valueFields.setFields(u)},_addAliasForLayerInfo:function(u){u&&u.fields&&0<u.fields.length&&C.forEach(u.fields,q.hitch(this,function(D){D.name&&!D.alias&&(D.alias=D.name)}))},_ignoreEvent:function(){this.ignoreChangeEvents=!0},_careEvent:function(){setTimeout(function(){this.ignoreChangeEvents=!1}.bind(this),200)},resetFilter:function(u){this.filter&&this._layerDefinition&&
this.filter.build({featureLayerId:this._webMapLayerId,url:this._layerDefinition.url,partsObj:u,layerDefinition:this._layerDefinition})},_resetByConfig:function(u,D){this._ignoreEvent();this._addAliasForLayerInfo(D);this._clear();var F=q.clone(u);this._layerDefinition=D;this._webMapLayerId=F.webMapLayerId;this.urlTextBox.set("value",F.url);this.filter.build({featureLayerId:this._webMapLayerId,url:F.url,partsObj:F.filter,layerDefinition:this._layerDefinition});this.chartNameTextBox.set("value",F.name||
D.name||"");this.descriptionTA.value=F.description||"";this._resetFieldsDijitsByLayerInfo(D);this.chartModeSelect.set("value",F.mode);u=q.hitch(this,function(){var K=this._getChartTypeDisplayConfig(F,"pie");K&&(this.pieParameters.setConfig(K),this.pieCbx.setValue(!0),this._showEditDiv(this.pieEdit))});"feature"===F.mode?(this.featureAxisLabelSelect.set("value",F.labelField),this.valueFields.selectFields(F.valueFields),1>=F.valueFields.length&&u()):"category"===F.mode?(this.categoryFieldSelect.set("value",
F.categoryField),this.categoryOperationSelect.set("value",F.operation),this.valueFields.selectFields(F.valueFields),1>=F.valueFields.length&&u()):"count"===F.mode?(this.categoryFieldSelect.set("value",F.categoryField),u()):"field"===F.mode&&(this.fieldOperationSelect.set("value",F.operation),this.valueFields.selectFields(F.valueFields),u());if(u=this._getChartTypeDisplayConfig(F,"column"))this.columnParameters.setConfig(u),this.columnCbx.setValue(!0),this._showEditDiv(this.columnEdit);if(u=this._getChartTypeDisplayConfig(F,
"bar"))this.barParameters.setConfig(u),this.barCbx.setValue(!0),this._showEditDiv(this.barEdit);if(u=this._getChartTypeDisplayConfig(F,"line"))this.lineParameters.setConfig(u),this.lineCbx.setValue(!0),this._showEditDiv(this.lineEdit);F.sortOrder&&this.sortDijit.setConfig(F.sortOrder);u=I.fromJson(F.symbol);this.symbolPicker.showBySymbol(u);this.colorPicker.setColor(new n(F.highLightColor));this._careEvent()},_getChartTypeDisplayConfig:function(u,D){if(u&&u.types&&0<u.types.length)for(var F=0;F<u.types.length;F++)if(u.types[F].type===
D)return u.types[F].display;return null},_updatePreview:function(){this.preview.clear();var u=this.getConfig(!0);if(u){var D=new B;D.returnGeometry=!1;D.where=u.filter.expr||"1\x3d1";D.outFields=[];"feature"===u.mode?(D.outFields=q.clone(u.valueFields),0>D.outFields.indexOf(u.labelField)&&(D.outFields=[u.labelField].concat(D.outFields))):"category"===u.mode?(D.outFields=q.clone(u.valueFields),0>D.outFields.indexOf(u.categoryField)&&(D.outFields=[u.categoryField].concat(D.outFields))):"count"===u.mode?
D.outFields=[u.categoryField]:"field"===u.mode&&(D.outFields=q.clone(u.valueFields));this.tab.showShelter();this.showBigShelter();this._queryFeatures(D,u.url).then(q.hitch(this,function(F){if(this.domNode){var K=z.getContentBox(this.domNode.parentNode);z.setStyle(this.preview.domNode,"height",Math.max(K.h-60,150)+"px");F=F.slice(0,this.maxPreviewFeaturesCount);this.preview.createClientCharts(this._layerDefinition.url,F,u);this.tab.hideShelter();this.hideBigShelter()}}),q.hitch(this,function(F){this.domNode&&
(console.error(F),this.tab.hideShelter(),this.hideBigShelter())}))}},_queryFeatures:function(u,D){var F=new c;(new H(D)).execute(u).then(q.hitch(this,function(K){F.resolve(K.features||[])}),q.hitch(this,function(K){K&&400===K.code?(u.outFields=["*"],(new H(D)).execute(u).then(q.hitch(this,function(Q){F.resolve(Q)}),q.hitch(this,function(Q){F.reject(Q)}))):F.reject(K)}));return F}})})},"jimu/dijit/StatisticsChart":function(){define("dojo/on dojo/Evented dojo/Deferred dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dijit/popup dijit/_WidgetBase dijit/TooltipDialog dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/StatisticsChart.html esri/lang esri/graphic esri/symbols/jsonUtils esri/layers/FeatureLayer jimu/utils jimu/clientStatisticsUtils jimu/dijit/Chart jimu/dijit/_StatisticsChartSettings dojo/keys dijit/focus jimu/dijit/LoadingIndicator".split(" "),
function(G,q,C,z,g,n,l,a,c,d,h,b,e,f,m,p,t,v,x,y,A,J,L,M,N){return z([h,e,f,q],{baseClass:"jimu-dijit-statistics-chart",templateString:m,theme:"light",noMoreThanOneChartClassName:"no-more-than-one-chart",hasTitleClassName:"has-title",charts:null,paramsDijits:null,tooltipDialogs:null,currentChartIndex:-1,tempGraphics:null,maxPreviewFeaturesCount:20,tooltipColor:"green",floatNumberFieldDecimalPlace:null,popupFieldInfosObj:null,config:null,features:null,featureLayer:null,map:null,fontColor:"#333333",
isBigPreview:!1,showSettingIcon:!1,showZoomIcon:!1,zoomToFeaturesWhenClick:!1,initialChartIndex:0,postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart;g.mixin(this.nls,window.jimuNls.common);this.charts=[];this.paramsDijits=[];this.tooltipDialogs=[];this.isBigPreview&&(this.showZoomIcon=!1)},postCreate:function(){this.inherited(arguments);this.showSettingIcon?(this.own(G(document.body,"click",g.hitch(this,this._onDocumentBodyClick))),this.own(G(this.settingsIcon,"keydown",g.hitch(this,
function(k){k.keyCode===M.ENTER?this._onSettingsIconClicked():k.keyCode===M.TAB&&k.shiftKey&&(k.preventDefault(),N.focus(this.pagingUl))})))):l.destroy(this.settingsIcon);this.showZoomIcon?(this.own(G(this.zoominIcon,"click",g.hitch(this,function(){this.emit("zoomin")}))),this.own(G(this.zoominIcon,"keydown",g.hitch(this,function(k){k.keyCode===M.ENTER&&this.emit("zoomin")})))):l.destroy(this.zoominIcon);this.isBigPreview&&(this.chartRealContainer.style.maxHeight="auto",l.addClass(this.domNode,"big-preview"));
this.zoominIcon.title=this.nls.enlarge;this.settingsIcon.title=this.nls.setting;l.addClass(this.domNode,this.noMoreThanOneChartClassName)},destroy:function(){this.clear();this.inherited(arguments)},resize:function(k,r){if(0<k||"string"===typeof k&&0<k.length)this.domNode.style.width=k;if(0<r||"string"===typeof r&&0<r.length)this.domNode.style.height=r;this._resize()},resizeByParent:function(){this.domNode.style.width="100%";this.domNode.style.height="100%";this._resize()},_resize:function(){this._calculateChartBox();
0<=this.currentChartIndex&&this._showChart(this.currentChartIndex)},createServerStatisticsCharts:function(k,r,B){var H=k.fields,I={type:"Table",fields:[]},u=g.clone(B),D=B.mode;"category"===D?(u.valueFields=[],I.fields=n.map(B.valueFields,g.hitch(this,function(F){var K=B.operation;"average"===K&&(K="avg");var Q=F+"_"+y.upperCaseString(K);F=F+"_"+y.upperCaseString(K);u.valueFields.push(Q);return{name:Q,type:"esriFieldTypeDouble",alias:F}})),n.some(H,g.hitch(this,function(F){return F.name===B.categoryField?
(I.fields.push(F),!0):!1}))):"count"===D?(u.mode="feature",u.labelField=B.categoryField,k=k.fields[0].name+"_count",u.valueFields=[k],n.some(H,g.hitch(this,function(F){return F.name===B.categoryField?(I.fields.push(F),!0):!1})),I.fields.push({name:k,type:"esriFieldTypeInteger",alias:this.nls.count})):"field"===D&&(u.valueFields=[],I.fields=n.map(B.valueFields,g.hitch(this,function(F){var K=B.operation;"average"===K&&(K="avg");var Q=F+"_"+y.upperCaseString(K);F=F+"_"+y.upperCaseString(K);u.valueFields.push(Q);
return{name:Q,type:"esriFieldTypeDouble",alias:F}})));return this._getLoadedLayer(I).then(g.hitch(this,function(F){this._createChartsAsync({featureLayer:F,features:r,config:u})}))},createClientCharts:function(k,r,B,H,I){I&&(this.featureLayerForChartSymbologyChart=I);return this._getLoadedLayer(k).then(g.hitch(this,function(u){this._createChartsAsync({featureLayer:u,features:r,config:B,popupFieldInfosObj:H})}))},_getLoadedLayer:function(k){var r=new C,B=null;B="string"===typeof k?new x(k):"esri.layers.FeatureLayer"===
k.declaredClass?k:new x({layerDefinition:g.clone(k),featureSet:null});B.loaded?r.resolve(B):this.own(G(B,"load",g.hitch(this,function(){r.resolve(B)})));return r},_createChartsAsync:function(k){setTimeout(g.hitch(this,function(){this._createCharts(k)}),0)},_createCharts:function(k){try{this.loading.hide();this.clear();var r=!1;k.features&&(r=!!k.features.isSelectedFeatures,k.features=n.filter(k.features,g.hitch(this,function(K){return!!K.attributes})));this.config=k.config;this.features=k.features;
this.featureLayer=k.featureLayer;this.popupFieldInfosObj=k.popupFieldInfosObj?k.popupFieldInfosObj:{};this.config.highLightColor||(this.config.highLightColor=r?"#ff0000":"#00ffff");this._calculateDecimalPlaceForFloatField();this.chartTitle.innerHTML=y.stripHTML(this.config.name||"");this.chartTitle.title=this.chartTitle.innerHTML;this.chartTitle.title?l.addClass(this.domNode,this.hasTitleClassName):l.removeClass(this.domNode,this.hasTitleClassName);if(this.config.description){l.setStyle(this.descriptionContainer,
"display","block");var B=y.stripHTML(this.config.description);this.descriptionContainer.innerHTML=B;this.descriptionContainer.title=B}else this.descriptionContainer.innerHTML="",this.descriptionContainer.title="",l.setStyle(this.descriptionContainer,"display","none");1>=k.config.types.length?l.addClass(this.domNode,this.noMoreThanOneChartClassName):l.removeClass(this.domNode,this.noMoreThanOneChartClassName);var H=this._calculateChartBox(),I=H.w+"px",u=H.h+"px",D={};(k.config&&k.config.types||[]).forEach(function(K){if(K=
K&&K.type)"column"===K?D.column=this.nls.columnChart:"bar"===K?D.bar=this.nls.barChart:"line"===K?D.line=this.nls.lineChart:"pie"===K&&(D.pie=this.nls.pieChart)}.bind(this));var F=n.map(k.config.types,g.hitch(this,function(K){var Q=l.create("div",{"class":"chart-div",style:{width:I,height:u}},this.chartRealContainer),P=K.type,W=l.toDom("\x3cli class\x3d'paging-li'\x3e\x3ca tabindex\x3d'0' role\x3d'link' aria-label\x3d'"+D[P]+"'class\x3d'paging-a'\x3e\x3c/a\x3e\x3c/li\x3e");l.place(W,this.pagingUl);
K=K.display;K.backgroundColor||(K.backgroundColor="transparent");K.hasOwnProperty("showLegend")||(K.showLegend=!1);K.legendTextColor||(K.legendTextColor=this.fontColor);"pie"===P?(K.hasOwnProperty("showDataLabel")||(K.showDataLabel=!0),K.dataLabelColor||(K.dataLabelColor=this.fontColor)):(K.hasOwnProperty("showHorizontalAxis")||(K.showHorizontalAxis=!0),K.horizontalAxisTextColor||(K.horizontalAxisTextColor=this.fontColor),K.hasOwnProperty("showVerticalAxis")||(K.showVerticalAxis=!0),K.verticalAxisTextColor||
(K.verticalAxisTextColor=this.fontColor));return Q}));r=null;"feature"===this.config.mode?r=this._createFeatureModeCharts(k,F):"category"===this.config.mode?r=this._createCategoryModeCharts(k,F):"count"===this.config.mode?r=this._createCountModeCharts(k,F):"field"===this.config.mode&&(r=this._createFieldModeCharts(k,F));this.charts=r.charts;this.paramsDijits=r.paramsDijits;this.tooltipDialogs=n.map(this.paramsDijits,g.hitch(this,function(K){var Q=l.create("div");K.placeAt(Q);return new b({content:Q})}));
k=0;0<=this.initialChartIndex&&this.charts.length>=this.initialChartIndex+1&&(k=this.initialChartIndex);this._showChart(k)}catch(K){console.error(K)}},_calculateChartBox:function(){var k=!!this.config.description,r=l.getContentBox(this.domNode).h,B=r;0<this.resultsHeader.clientHeight&&(B=l.getMarginBox(this.resultsHeader),B=r-B.h);var H=0;k&&(H=parseInt(.15*r,10),B-=H);k=60;B<k&&(k=B);l.setStyle(this.leftArrow,"height",k+"px");l.setStyle(this.rightArrow,"height",k+"px");l.setStyle(this.chartRealContainer,
"height",B+"px");l.setStyle(this.descriptionContainer,"max-height",H+"px");l.setStyle(this.faildRenderInfo,"height",B+"px");return l.getContentBox(this.chartRealContainer)},_calculateDecimalPlaceForFloatField:function(){this.floatNumberFieldDecimalPlace={};var k=[];this.config.labelField&&k.push(this.config.labelField);this.config.categoryField&&k.push(this.config.categoryField);this.config.valueFields&&(k=k.concat(this.config.valueFields));var r=n.filter(k,g.hitch(this,function(H){return this._isFloatNumberField(H)})),
B={};n.forEach(r,g.hitch(this,function(H){B[H]=[]}));(k=this.features)&&0<k.length&&n.forEach(k,g.hitch(this,function(H){var I=H.attributes;I&&n.forEach(r,g.hitch(this,function(u){var D=I[u];"number"===typeof D&&B[u].push(D)}))}));n.forEach(r,g.hitch(this,function(H){this.floatNumberFieldDecimalPlace[H]=0;var I=B[H];if(0<I.length)try{var u=this._getBestDecimalPlace(I);this.floatNumberFieldDecimalPlace[H]=u}catch(D){this.floatNumberFieldDecimalPlace[H]=0,console.error(D)}this.popupFieldInfosObj&&(I=
this.popupFieldInfosObj[H])&&I.format&&0<=I.format.places&&(this.floatNumberFieldDecimalPlace[H]=I.format.places)}))},_onDocumentBodyClick:function(k){if(0<=this.currentChartIndex&&this.tooltipDialogs){var r=this.tooltipDialogs[this.currentChartIndex];if(r){var B=!!r.isOpendNow;this._hideAllTooltipDialogs();var H=k.target||k.srcElement;H===this.leftArrow||H===this.rightArrow||l.hasClass(H,"paging-a")||l.hasClass(H,"paging-li")||(H===this.settingsIcon?B?this._hideTooltipDialog(r):this._showTooltipDialog(r):
(k=H===r.domNode,H=l.isDescendant(H,r.domNode),k||H?B?this._showTooltipDialog(r):this._hideTooltipDialog(r):this._hideTooltipDialog(r)))}else this._hideAllTooltipDialogs()}else this._hideAllTooltipDialogs()},_onSettingsIconClicked:function(){var k=this.tooltipDialogs[this.currentChartIndex];k&&(k.isOpendNow?(this._hideTooltipDialog(k),N.focus(this.settingsIcon)):(this._showTooltipDialog(k),(k=this.paramsDijits[this.currentChartIndex])&&N.focus(k.domNode)))},clear:function(){this.featureLayer=this.features=
this.config=null;this.chartTitle.innerHTML="";this.chartTitle.title="";this.currentChartIndex=-1;this.popupFieldInfosObj=this.floatNumberFieldDecimalPlace=null;a("li",this.pagingUl).removeClass("selected");this.charts||(this.charts=[]);this.paramsDijits||(this.paramsDijits=[]);this.tooltipDialogs||(this.tooltipDialogs=[]);for(var k=0;k<this.charts.length;k++)this.charts[k]&&this.charts[k].destroy(),this.charts[k]=null,this.paramsDijits[k]&&this.paramsDijits[k].destroy(),this.paramsDijits[k]=null,
this.tooltipDialogs[k]&&this.tooltipDialogs[k].destroy(),this.tooltipDialogs[k]=null;this.charts=[];this.paramsDijits=[];this.tooltipDialogs=[];l.empty(this.pagingUl);l.empty(this.chartRealContainer);l.empty(this.descriptionContainer);l.addClass(this.domNode,this.noMoreThanOneChartClassName)},_showFialdRenderInfo:function(){l.addClass(this.chartSection,"render-faild")},_hideFialdRenderInfo:function(){l.removeClass(this.chartSection,"render-faild")},_showChart:function(k){this.currentChartIndex=-1;
var r=a(".chart-div",this.chartRealContainer);r.style({display:"none"});var B=a("li",this.pagingUl);B.removeClass("selected");if(!(0>k)){if(r=r[k])this.currentChartIndex=k,l.setStyle(r,"display","block");(B=B[k])&&l.addClass(B,"selected");this.charts&&0<this.charts.length&&(B=this.charts[k])&&this._handlePieChartDisplay(B);if(!this.isBigPreview&&(B=null,this.charts&&0<this.charts.length&&(B=this.charts[k]))){k=this._calculateChartBox();var H=l.getContentBox(r);if(k.w!==H.w||k.h!==H.h)this.loading.show(),
H=k.w+"px",k=k.h+"px",l.setStyle(r,"width",H),l.setStyle(r,"height",k),B.resize(H,k),this.loading.hide()}}},_handlePieChartDisplay:function(k){var r=!1;k&&k.config&&"pie"===k.config.type&&(k=k.config.labels)&&150<k.length&&(r=!0);r?this._showFialdRenderInfo():this._hideFialdRenderInfo()},_hideAllTooltipDialogs:function(){this.tooltipDialogs&&0<this.tooltipDialogs.length&&n.forEach(this.tooltipDialogs,g.hitch(this,function(k){this._hideTooltipDialog(k)}))},_hideTooltipDialog:function(k){k&&(d.close(k),
k.isOpendNow=!1)},_showTooltipDialog:function(k){k&&(d.open({popup:k,around:this.settingsIcon}),k.isOpendNow=!0)},_onPagingUlKeydown:function(k){k.keyCode!==M.TAB||k.shiftKey||(k.preventDefault(),N.focus(this.settingsIcon));if(k.keyCode===M.RIGHT_ARROW||k.keyCode===M.DOWN_ARROW)this._onRightArrowClicked(k),this._focusPagingLink();if(k.keyCode===M.LEFT_ARROW||k.keyCode===M.UP_ARROW)this._onLeftArrowClicked(k),this._focusPagingLink()},_focusPagingLink:function(){var k=a(".paging-li:nth-child("+(this.currentChartIndex+
1)+")",this.pagingUl)[0];(k=k&&k.firstChild)&&N.focus(k)},_onPagingUlClicked:function(k){k.stopPropagation();this._hideAllTooltipDialogs();k=k.target||k.srcElement;if("a"===k.tagName.toLowerCase()){var r=a("a",this.pagingUl);k=n.indexOf(r,k);0<=k&&this._showChart(k)}},_onLeftArrowClicked:function(k){k.stopPropagation();this._hideAllTooltipDialogs();k=(this.currentChartIndex-1+this.charts.length)%this.charts.length;0<=k&&this._showChart(k)},_onLeftArrowKeydown:function(k){k.keyCode===M.ENTER&&this._onLeftArrowClicked(k)},
_onRightArrowClicked:function(k){k.stopPropagation();this._hideAllTooltipDialogs();k=(this.currentChartIndex+1+this.charts.length)%this.charts.length;0<=k&&this._showChart(k)},_onRightArrowKeydown:function(k){k.keyCode===M.ENTER&&this._onRightArrowClicked(k)},_getHighLightMarkerSymbol:function(){var k=v.fromJson({color:[255,255,255,0],size:18,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSSquare",outline:{color:[0,0,128,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}});k.setSize(30);
k.outline.setColor(new c(this.config.highLightColor));return k},_getHighLightLineSymbol:function(k){var r=v.fromJson({color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"});r.setColor(new c(k||this.config.highLightColor));return r},_getDefaultHighLightFillSymbol:function(){var k=v.fromJson({color:[0,255,255,128],outline:{color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"});k.outline.setColor(new c(this.config.highLightColor));return k},
_getVisualVariableByType:function(k,r){return r&&(r=n.filter(r,function(B){return B.type===k&&!B.target}),r.length)?r[0]:null},_getSymbolByRenderer:function(k,r){var B=this._getDefaultHighLightFillSymbol(),H=this._getVisualVariableByType("colorInfo",k.visualVariables);if(H){if(k=k.getColor(r,{colorInfo:H}))k=g.clone(k),B.setColor(k)}else B=k.getSymbol(r);return B},_getHighLightFillSymbol:function(k,r,B){var H=null,I=r.symbol;H=k.renderer;!I&&H&&(I=this._getSymbolByRenderer(H,r));I&&"function"===typeof I.setOutline?
(H=v.fromJson(I.toJson()),r=1.5,I.outline&&0<I.outline.width&&(r=I.outline.width+1),B=this._getHighLightLineSymbol(B?"#ff0000":this.config.highLightColor),B.setWidth(r),H.setOutline(B)):H=this._getDefaultHighLightFillSymbol();return H},_zoomToGraphics:function(k){if(this.map&&this.featureLayer&&this.featureLayer.visible){var r;k&&0<k.length&&(r=n.filter(k,function(B){B=B.geometry;return"point"!==B.type?!0:y.isVaildPointGeometry(B)}.bind(this)));if(r&&0<r.length){k=y.toFeatureSet(r);try{y.zoomToFeatureSet(this.map,
k)}catch(B){console.error(B)}}}},_removeTempGraphics:function(){if(this.featureLayer&&this.tempGraphics&&0<this.tempGraphics.length)for(;0<this.tempGraphics.length;)this.featureLayer.remove(this.tempGraphics[0]),this.tempGraphics.splice(0,1);this.tempGraphics=null},_mouseOverChartItem:function(k){this._removeTempGraphics();n.forEach(k,g.hitch(this,function(I){I._originalSymbol=I.symbol}));if(this.featureLayer&&this.featureLayer.getMap()&&this.featureLayer.visible){var r=y.getTypeByGeometryType(this.featureLayer.geometryType),
B=null;if("point"===r)B=this._getHighLightMarkerSymbol(),this.tempGraphics=[],n.forEach(k,g.hitch(this,function(I){I=new t(I.geometry,B);this.tempGraphics.push(I);this.featureLayer.add(I)}));else if("polyline"===r)B=this._getHighLightLineSymbol(),n.forEach(k,g.hitch(this,function(I){I.setSymbol(B)}));else if("polygon"===r){var H=this.featureLayer.getSelectedFeatures()||[];n.forEach(k,g.hitch(this,function(I){var u=0<=H.indexOf(I);u=this._getHighLightFillSymbol(this.featureLayer,I,u);I.setSymbol(u)}));
this.features.length!==k.length&&"polygon"===r&&(n.forEach(k,g.hitch(this,function(I){this.featureLayer.remove(I)})),n.forEach(k,g.hitch(this,function(I){this.featureLayer.add(I)})))}}},_mouseOutChartItem:function(k){this._removeTempGraphics();n.forEach(k,g.hitch(this,function(r){r.setSymbol(r._originalSymbol||null)}))},_isNumber:function(k){return"[object number]"===Object.prototype.toString.call(k).toLowerCase()},_tryLocaleNumber:function(k,r){var B=k;if(p.isDefined(k)&&isFinite(k))try{if(r&&this._isNumberField(r)){var H=
this.popupFieldInfosObj[r];var I=H&&g.exists("format.places",H)?y.localizeNumberByFieldInfo(k,H):y.localizeNumber(k)}else I=k;"string"===typeof I&&(B=I)}catch(u){console.error(u)}return B+""},_getBestDisplayValue:function(k,r){var B=this._tryLocaleNumber(r,k);if(this.featureLayer.typeIdField===k){var H=this.featureLayer.types;if(H&&0<H.length&&(H=n.filter(H,g.hitch(this,function(I){return I.id===r})),0<H.length))return B=H[0].name}(k=this._getFieldInfo(k))&&k.domain&&(k=k.domain.codedValues)&&0<k.length&&
n.some(k,function(I){return I.code===r?(B=I.name,!0):!1});return B},_getFieldAliasArray:function(k){return n.map(k,g.hitch(this,function(r){return this._getFieldAlias(r)}))},_getFieldAlias:function(k){var r=k;(k=this._getFieldInfo(k))&&(r=k.alias||r);return r},_getFieldInfo:function(k){if(this.featureLayer)for(var r=this.featureLayer.fields,B=0;B<r.length;B++)if(r[B].name===k)return r[B];return null},_isNumberField:function(k){var r=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle",
"esriFieldTypeDouble"];return n.some(this.featureLayer.fields,g.hitch(this,function(B){return B.name===k&&0<=r.indexOf(B.type)}))},_isFloatNumberField:function(k){var r=["esriFieldTypeSingle","esriFieldTypeDouble"];return n.some(this.featureLayer.fields,g.hitch(this,function(B){return B.name===k&&0<=r.indexOf(B.type)}))},_isDateField:function(k){return(k=this._getFieldInfo(k))?"esriFieldTypeDate"===k.type:!1},_getBestDecimalPlace:function(k){var r=0,B={};n.forEach(k,function(u){u=u.toString().split(".");
var D=null;1===u.length?D=0:2===u.length&&(D=u[1].length);null!==D&&(B[D]=void 0===B[D]?1:B[D]+1)});k=null;for(var H in B){H=parseInt(H,10);var I=B[H];k?I>k.value&&(k={key:H,value:I}):k={key:H,value:I}}k&&(r=parseInt(k.key,10));return r},_getFloatNumberFieldDecimalPlace:function(k){var r=0;this.floatNumberFieldDecimalPlace&&(k=this.floatNumberFieldDecimalPlace[k],"number"===typeof k&&(r=k));return r},_getBestValueForFloatNumberField:function(k,r){r=this._getFloatNumberFieldDecimalPlace(r);k=k.toFixed(r);
return parseFloat(k)},_getColors:function(k,r){var B=[];k=g.clone(k);if(2===k.colors.length)B=this._createGradientColors(k.colors[0],k.colors[k.colors.length-1],r);else{for(var H=Math.ceil(r/k.colors.length),I=0;I<H;I++)B=B.concat(k.colors);B=B.slice(0,r)}return B},_createGradientColors:function(k,r,B){var H=[];k=new c(k);var I=new c(r);r=(I.r-k.r)/B;var u=(I.g-k.g)/B;I=(I.b-k.b)/B;for(var D=new c,F=0,K=0,Q=0,P=0;P<B;P++)F=parseInt(k.r+r*P,10),K=parseInt(k.g+u*P,10),Q=parseInt(k.b+I*P,10),D.setColor([F,
K,Q]),H.push(D.toHex());return H},_createParamsDijit:function(k,r,B){k=new L({isInWidget:this.map?!0:!1,type:k,config:r});this.own(G(k.domNode,"keydown",g.hitch(this,function(H){H.keyCode===M.ESCAPE&&this._onSettingsIconClicked()})));k._updateLegendDisplayByMode(B);return k},_createJimuChart:function(k,r,B,H,I){var u=I.type,D=this._createParamsDijit(u,I.display,r),F=D.getConfig();F&&g.mixin(I.display,F);var K=this._getBasicChartOptionsByStatisticsInfo(r,B,H,u);this._udpateJimuChartDisplayOptions(K,
I);var Q=new J({chartDom:k,config:{type:u||"column",labels:[],series:[{data:[]}]}});Q.placeAt(k);Q.resize();Q.updateConfig(K);this._bindChartEvent(Q,r,H);this.showSettingIcon&&this.own(G(D,"change",g.hitch(this,function(){D.showShelter();if(Q){var P=D.getConfig();g.mixin(I.display,P);this._udpateJimuChartDisplayOptions(K,I);Q.updateConfig(K)}D.hideShelter()})));return[Q,D]},_udpateJimuChartDisplayOptions:function(k,r){var B=r.type;r=r.display;this._settingAxisDisplay(k,r,B);k.type=B;k.dataZoom=["inside",
"slider"];k.confine=!0;k.backgroundColor=r.backgroundColor;k.color=r.colors;var H={show:r.showLegend,textStyle:{}};r.legendTextColor&&(H.textStyle.color=r.legendTextColor);r.legendTextSize&&(H.textStyle.fontSize=r.legendTextSize);k.legend=H;H={show:r.showDataLabel,textStyle:{}};r.dataLabelColor&&(H.textStyle.color=r.dataLabelColor);r.dataLabelSize&&(H.textStyle.fontSize=r.dataLabelSize);k.dataLabel=H;"pie"===B&&(k.innerRadius=r.innerRadius);return k},_settingAxisDisplay:function(k,r,B){if(!(0>["column",
"bar","line"].indexOf(B))){var H={show:r.showHorizontalAxis,textStyle:{}};r.horizontalAxisTextColor&&(H.textStyle.color=r.horizontalAxisTextColor);r.horizontalAxisTextSize&&(H.textStyle.fontSize=r.horizontalAxisTextSize);k.xAxis=H;H={show:r.showVerticalAxis,textStyle:{}};r.verticalAxisTextColor&&(H.textStyle.color=r.verticalAxisTextColor);r.verticalAxisTextSize&&(H.textStyle.fontSize=r.verticalAxisTextSize);k.yAxis=H;r.stack||(r.stack=!1);if("column"===B||"bar"===B||"line"===B&&r.area)k.stack=r.stack;
"line"!==B||r.area||(r.area=!1);"line"===B&&(k.area=r.area);k.axisPointer=!0;k.scale=!1}},_getBasicChartOptionsByStatisticsInfo:function(k,r,B,H){return"feature"===k||"category"===k?this._getCategoryModeChartOptionsByStatisticsInfo(r,B,H):"count"===k?this._getCountModeChartOptionsByStatisticsInfo(B,H):"field"===k?this._getFieldModeChartOptionByStatisticsInfo(B,H):null},_bindChartEvent:function(k,r,B){if(this.map&&0!==B.length){var H=g.hitch(this,function(u){if("series"===u.componentType){var D=null;
if("field"===r)D=this.features;else{var F=B[u.dataIndex];F&&(D=F.dataFeatures)}D&&("mouseover"===u.type?this._mouseOverChartItem(D):"mouseout"===u.type?this._mouseOutChartItem(D):"click"===u.type&&this.zoomToFeaturesWhenClick&&this._zoomToGraphics(D))}}),I=[{name:"mouseover",callback:H},{name:"mouseout",callback:H}];this.zoomToFeaturesWhenClick&&I.push({name:"click",callback:H});n.forEach(I,g.hitch(this,function(u){k.chart.on(u.name,u.callback)}))}},_createFeatureModeCharts:function(k,r){var B=[],
H=[],I=k.config,u={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:k.features,labelField:I.labelField,valueFields:I.valueFields,sortOrder:I.sortOrder,maxLabels:I.maxLabels,useLayerSymbology:I.useLayerSymbology};this.featureLayerForChartSymbologyChart&&(u.featureLayerForChartSymbologyChart=this.featureLayerForChartSymbologyChart);var D=A.getFeatureModeStatisticsInfo(u);n.forEach(I.types,g.hitch(this,function(F,K){try{var Q=this._createJimuChart(r[K],"feature",
u,D,F);B.push(Q[0]);H.push(Q[1])}catch(P){console.error(P)}}));return{charts:B,paramsDijits:H}},_createCategoryModeCharts:function(k,r){var B=[],H=[],I=k.config,u={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:k.features,categoryField:I.categoryField,valueFields:I.valueFields,operation:k.config.operation,sortOrder:I.sortOrder,dateConfig:I.dateConfig,maxLabels:I.maxLabels,nullValue:I.nullValue,useLayerSymbology:I.useLayerSymbology,splitField:I.splitField};this.featureLayerForChartSymbologyChart&&
(u.featureLayerForChartSymbologyChart=this.featureLayerForChartSymbologyChart);var D=A.getCategoryModeStatisticsInfo(u);n.forEach(I.types,g.hitch(this,function(F,K){try{var Q=this._createJimuChart(r[K],"category",u,D,F);B.push(Q[0]);H.push(Q[1])}catch(P){console.error(P)}}));return{charts:B,paramsDijits:H}},_getSplitedSeriesForCategoryOrCountMode:function(k,r){var B={type:r,labels:[],series:[]},H=[];k.forEach(function(u){if(u=u.splitedValueFields)u=u.map(function(D){return D.field}),H=H.concat(u)});
var I=y.uniqueArray(H);B.series=n.map(I,g.hitch(this,function(u){for(var D=[],F=0;F<k.length;F++)D[F]=null;return{name:u,type:r,data:D}}));n.forEach(k,g.hitch(this,function(u,D){var F="";u.category?F=u.category:u.fieldValue&&(F=u.fieldValue);B.labels.push(F);u.splitedValueFields.forEach(function(K){B.series.forEach(function(Q){if(Q.name===K.field)if("undefined"!==typeof u.color){var P=this._getSerieData(u,K.value);Q.data[D]=P}else Q.data[D]=K.value}.bind(this))}.bind(this))}));return B},_getCategoryModeChartOptionsByStatisticsInfo:function(k,
r,B){k=this._getFieldAliasArray(k.valueFields);var H=null;H={type:B,labels:[],series:[]};H.series=n.map(k,g.hitch(this,function(I){return{name:I,type:B,data:[]}}));n.forEach(r,g.hitch(this,function(I){H.labels.push(I.category);for(var u=0;u<I.valueFields.length;u++){var D=I.valueFields[u];"undefined"!==typeof I.color?(D=this._getSerieData(I,D),H.series[u].data.push(D)):H.series[u].data.push(D)}}));return H},_getSeriesOfRadar:function(k){k=k.map(function(r){return{name:r.category,value:r.valueFields}});
return[{type:"radar",data:k}]},_isAllFalseColor:function(k){return k.every(function(r){return!r.color})},_getSerieData:function(k,r){k.color||(k.color="transparent");return{value:r,itemStyle:{normal:{color:k.color},emphasis:{color:k.color}}}},_createCountModeCharts:function(k,r){var B=[],H=[],I=k.config,u={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:k.features,categoryField:I.categoryField,sortOrder:I.sortOrder,dateConfig:I.dateConfig,maxLabels:I.maxLabels,
useLayerSymbology:I.useLayerSymbology,splitField:I.splitField};this.featureLayerForChartSymbologyChart&&(u.featureLayerForChartSymbologyChart=this.featureLayerForChartSymbologyChart);var D=A.getCountModeStatisticsInfo(u);n.forEach(I.types,g.hitch(this,function(F,K){try{var Q=this._createJimuChart(r[K],"count",u,D,F);B.push(Q[0]);H.push(Q[1])}catch(P){console.error(P)}}));return{charts:B,paramsDijits:H}},_getCountModeChartOptionsByStatisticsInfo:function(k,r){var B={type:r,labels:[],series:[{name:"",
type:r,data:[]}]};n.forEach(k,g.hitch(this,function(H){var I=H.count;B.labels.push(H.fieldValue);"undefined"!==typeof H.color?(H=this._getSerieData(H,I),B.series[0].data.push(H)):B.series[0].data.push(I)}));return B},_createFieldModeCharts:function(k,r){var B=[],H=[],I=k.config,u={layerDefinition:this.featureLayer,popupFieldInfosObj:this.popupFieldInfosObj,features:k.features,valueFields:I.valueFields,operation:I.operation,sortOrder:I.sortOrder,maxLabels:I.maxLabels,nullValue:I.nullValue},D=A.getFieldModeStatisticsInfo(u);
n.forEach(I.types,g.hitch(this,function(F,K){try{var Q=this._createJimuChart(r[K],"field",u,D,F);B.push(Q[0]);H.push(Q[1])}catch(P){console.error(P)}}));return{charts:B,paramsDijits:H}},_getFieldModeChartOptionByStatisticsInfo:function(k,r){var B={type:r,labels:[],series:[{name:"",type:r,data:[]}]};n.forEach(k,g.hitch(this,function(H){var I=this._getFieldAlias(H.label);B.labels.push(I);B.series[0].data.push(H.value)}));return B}})})},"jimu/clientStatisticsUtils":function(){define(["dojo/_base/lang",
"moment/moment","./_chartHelpUtils","jimu/utils","libs/moment/twix"],function(G,q,C,z){window.makeTwix&&window.makeTwix(q);return{getClietStatisticsData:function(g){var n=g.mode;if("feature"===n)return this.getFeatureModeStatisticsData(g);if("category"===n)return this.getCategoryModeStatisticsData(g);if("count"===n)return this.getCountModeStatisticsData(g);if("field"===n)return this.getFieldModeStatisticsData(g)},sortClientStatisticsData:function(g,n,l){return this.sortStatisticsData(g,n.mode,n.sortOrder,
n.clusterField,n.valueFields,l)},getDataForMaxLabels:function(g,n){return g&&g.length&&"number"===typeof n&&0<n&&n<g.length?g.slice(0,n):g},getFeatureModeStatisticsData:function(g){var n=g.features,l=g.clusterField,a=g.valueFields;g=void 0!==g.showNullLabelData?g.showNullLabelData:!0;var c=this.separateFeaturesWhetherFieldValueNull(l,n);n=c.notNullLabelFeatures;c=c.nullLabelFeatures;n=g?n.concat(c):n;g=[];return g=n.map(function(d){var h=d.attributes,b=h&&h[l];b=this.convertingNullOrUndefinedAsPlaceholders(b);
d={label:b,values:[],features:[d]};d.values=a.map(function(e){return h[e]});return d}.bind(this))},getCategoryModeStatisticsData:function(g){function n(f){var m=[],p=null;for(t in f){p=f[t];var t=this.keepFieldValueType(t,p.type,d);var v=this.calcValuesByFeaturesForCatetoryMode(a,p,l,c,b);m.push({label:t,values:v,features:p.features,unit:p.unit})}return m}var l=g.hasStatisticsed,a=g.valueFields,c=g.operation,d=g.dateConfig,h=void 0!==g.showNullLabelData?g.showNullLabelData:!0,b=g.nullValue,e=[];e=
this.getCluseringObj(g.clusterField,g.features,d);g=e.nullLabel;e=n.call(this,e.notNullLabel);g=n.call(this,g);return e=h?e.concat(g):e},getCountModeStatisticsData:function(g){function n(h){var b=[],e=null;for(m in h){e=h[m];var f=this.calcValuesByFeaturesForCountMode(e,d);var m=this.keepFieldValueType(m,e.type,l);b.push({label:m,values:f,features:e.features,unit:e.unit})}return b}var l=g.dateConfig,a=void 0!==g.showNullLabelData?g.showNullLabelData:!0,c=[],d=g.hasStatisticsed&&!l;c=this.getCluseringObj(g.clusterField,
g.features,l);g=c.nullLabel;c=n.call(this,c.notNullLabel);g=n.call(this,g);return c=a?c.concat(g):c},calcValuesByFeaturesForCountMode:function(g,n){return n?g.features.map(function(l){var a=(l=l.attributes)&&l.STAT_COUNT;"undefined"===typeof a&&(a=l.stat_count);return a}.bind(this)):[g.count]},getFieldModeStatisticsData:function(g){var n=g.hasStatisticsed,l=g.features,a=g.operation,c=g.nullValue,d=[];return d=g.valueFields.map(G.hitch(this,function(h){var b=this.getValuesByValueFieldForFieldMode(h,
l,n,a);b=this.calcValueByOperation(b,a,c);return{label:h,values:[b]}}))},getValueFromAttributes:function(g,n,l,a){if(g)return l="average"===l?"avg":l,a?(a=z.upperCaseString(n+"_"+l),a=g[a],"undefined"===typeof a&&(a=z.lowerCaseString(n+"_"+l),a=g[a])):a=g[n],a},getValuesByValueFieldForFieldMode:function(g,n,l,a){return n.map(G.hitch(this,function(c){return this.getValueFromAttributes(c.attributes,g,a,l)}))},sortStatisticsData:function(g,n,l,a,c,d){function h(e,f,m){if("category"===f)if(m.isLabelAxis)m.isLabelAxis&&
(p=e.label);else if(m.field||1!==e.values.length){m=c.indexOf(m.field);var p=e.values[m]}else p=e.values[0];else if("count"===f)p=e.label,p=m.isLabelAxis?p:e.values[0];else if("field"===f)p=m.isLabelAxis?e.label:e.values[0];else if("feature"===f){var t=m.field;e&&e.features&&e.features[0]&&(f=e.features[0].attributes)&&(m.isLabelAxis?p=f[a]:t?p=f[t]:e.values.length&&(p=e.values[0]))}return p}if(!l)return g;var b=l.isAsc;if(!Array.isArray(g))return g;g.sort(function(e,f){e=h(e,n,l);f=h(f,n,l);if(l.isLabelAxis&&
d&&"field"!==n){var m={};m[a]=e;m=z.getDisplayValueForCodedValueOrSubtype(d,a,m);var p={};p[a]=f;p=z.getDisplayValueForCodedValueOrSubtype(d,a,p);m.isCodedValueOrSubtype&&p.isCodedValueOrSubtype&&(e=m.displayValue,f=p.displayValue)}"_NULL\x26UNDEFINED_"===e&&(e=Infinity);"_NULL\x26UNDEFINED_"===f&&(f=Infinity);z.isNumberOrNumberString(e)&&(e=Number(e));z.isNumberOrNumberString(f)&&(f=Number(f));m=e>f?b:!b;Infinity===e?m=b:Infinity===f&&(m=!b);p=0;e!==f&&(p=m?1:-1);return p}.bind(this));return g},
convertingNullOrUndefinedAsPlaceholders:function(g){return null===g||void 0===g?"_NULL\x26UNDEFINED_":g},keepFieldValueType:function(g,n,l){"number"===n&&(g=Number(g));l&&"_NULL\x26UNDEFINED_"!==g&&(g=Number(g));return g},calcValuesByFeaturesForCatetoryMode:function(g,n,l,a,c){return g.map(function(d){d=this.getValuesByValueFieldForCategoryMode(d,n.features,l,a);return this.calcValueByOperation(d,a,c)}.bind(this))},getValuesByValueFieldForCategoryMode:function(g,n,l,a){return n.map(G.hitch(this,function(c){return this.getValueFromAttributes(c.attributes,
g,a,l)}))},_isNumber:function(g){return"[object number]"===Object.prototype.toString.call(g).toLowerCase()},_getDateUnit:function(g,n){var l=n;"automatic"===n&&(n=q(g[0]).local(),g=q(g[1]).local(),g=Math.round(g.diff(n,"minute",!0)),0<=g&&1>=g?l="second":1<g&&60>=g?l="minute":60<g&&1440>=g?l="hour":1440<g&&43200>=g?l="day":43200<g&&518400>=g?l="month":518400<g&&(l="year"));return l},_getTimeRange:function(g,n){var l=g.map(G.hitch(this,function(a){return(a=a.attributes)&&a[n]}));l=l.filter(function(a){return!!a});
g=Math.min.apply(Math,l);l=Math.max.apply(Math,l);return[g,l]},_getTimeTwixs:function(g,n,l){if(0>"year quarter month day hour minute second automatic".split(" ").indexOf(l))return console.log("Invaild data formatter: "+l),!1;g=this._getTimeRange(g,n);if(g[0]===g[1])return!1;l=this._getDateUnit(g,l);n=this.getStartTimeByUnit(g[0],l);n=q(n).local();g=q(g[1]).local();g=n.twix(g).split(1,l);n={startValue:g[g.length-1].end().valueOf(),endValue:Infinity};g.push(n);return{twixs:g,dateUnit:l}},getCluseringObj:function(g,
n,l){var a={},c={};l?(g=this.getClusteringObjForDateType(g,n,l),a=g.notNullLabel,c=g.nullLabel):(a=this.separateFeaturesWhetherFieldValueNull(g,n),n=a.nullLabelFeatures,a=this.getClusteringObjByField(a.notNullLabelFeatures,g),c=this.getClusteringObjByField(n,g));return{notNullLabel:a,nullLabel:c}},calcValueByOperation:function(g,n,l){if(g&&1===g.length){if(!l)return g[0];if(!this._isNumber(g[0]))return 0}if(0!==g.length){var a=0;"max"===n?a=-Infinity:"min"===n&&(a=Infinity);g=l?g.map(function(d){this._isNumber(d)||
(d=0);return d}.bind(this)):g.filter(function(d){return this._isNumber(d)}.bind(this));var c=0;g.forEach(G.hitch(this,function(d){c++;"average"===n||"sum"===n?a+=d:"max"===n?a=Math.max(a,d):"min"===n&&(a=Math.min(a,d))}));0<c?"average"===n&&(a/=c):a=null}else a=null;return a},getClusteringObjByField:function(g,n){var l={};g.forEach(G.hitch(this,function(a){var c=a.attributes;c=c&&c[n];var d=typeof c;c=this.convertingNullOrUndefinedAsPlaceholders(c);var h=null;l.hasOwnProperty(c)?(h=l[c],h.features.push(a),
h.count++):(h={count:1,features:[a],type:d},l[c]=h)}));return l},_removeNaNDataItem:function(g){return g.filter(function(n){var l=!1;n=n.category;"number"===typeof n&&(l=isNaN(n));return!l})},separateFeaturesWhetherFieldValueNull:function(g,n){var l=[],a=[];Array.isArray(n)&&(a=n.filter(function(c){var d=c.attributes;d=d&&d[g];if(null===d||void 0===d)l.push(c);else return!0}));return{nullLabelFeatures:l,notNullLabelFeatures:a}},getStartTimeByUnit:function(g,n){return q(g).startOf(n).utc().valueOf()},
_mosaicFieldNameWithOperatorAndUpper:function(g,n){return z.upperCaseString(g+"_"+n)},_mosaicFieldNameWithOperatorAndLower:function(g,n){return z.lowerCaseString(g+"_"+n)},getClusteringObjForDateType:function(g,n,l){function a(x,y,A){x[y]?(x=x[y],x.count+=A.count,x.features=x.features.concat(A.features)):x[y]=A}function c(x,y,A,J){y=Number(y);J=this.getStartTimeByUnit(y,J);x[J]?(x=x[J],x.count+=A.count,x.features=x.features.concat(A.features)):(A.originTime=y,x[J]=A)}function d(x,y,A){A[x[0].attributes[y]]=
{count:1,features:x};return A}var h=this.separateFeaturesWhetherFieldValueNull(g,n),b=h.notNullLabelFeatures;n={};n=this.getClusteringObjByField(h.nullLabelFeatures,g);h={};if(1===b.length)h=d.call(this,b,g,h,l);else if(0!==b.length){var e=this._getTimeTwixs(b,g,l.minPeriod);if(e){var f={},m=e.dateUnit;e.twixs.forEach(function(x){var y="undefined"!==typeof x.startValue?x.startValue:x.start().valueOf(),A="undefined"!==typeof x.endValue?x.endValue:x.end().valueOf(),J={unit:m,count:0,features:[]};b.forEach(G.hitch(this,
function(L){var M=L.attributes;M=M&&M[g];M>=y&&M<A&&(J.features.push(L),J.count++)}));l.isNeedFilled?a.call(this,f,y,J):0<J.count&&a.call(this,f,y,J)}.bind(this));e={};var p;for(p in f)if(f.hasOwnProperty(p)){var t=f[p];c.call(this,e,p,t,m)}for(p in e)if(e.hasOwnProperty(p)){t=e[p];var v=t.originTime;delete t.originTime;h[v]=t}}else h=d.call(this,b,g,h,l)}return{notNullLabel:h,nullLabel:n}},_mapOptions:function(g,n){"feature"===n?(n=g.labelField,delete g.labelField,g.clusterField=n,g.showNullLabelData=
!0):"category"===n?(n=g.categoryField,delete g.categoryField,g.clusterField=n,g.showNullLabelData=!0):"count"===n?(n=g.categoryField,delete g.categoryField,g.clusterField=n):"field"===n&&(g.showNullLabelData=!0);return g},_mapDataItemForStatisticsChart:function(g,n){var l,a,c;return g.map(function(d){l=d.label;delete d.label;a=d.values;delete d.values;c=d.features;delete d.features;"feature"===n?(d.category=l,d.valueFields=a,d.dataFeatures=c):"category"===n?(d.category=l,d.valueFields=a,d.dataFeatures=
c):"count"===n?(d.fieldValue=l,d.count=a[0],d.dataFeatures=c):"field"===n&&(d.label=l,d.value=a[0]);return d})},getFeatureModeStatisticsInfo:function(g){var n=new C({featureLayer:g.layerDefinition,popupInfo:g.popupFieldInfosObj});g=this._mapOptions(g,"feature");var l=g.clusterField,a=this.getFeatureModeStatisticsData(g);a=this.sortStatisticsData(a,"feature",g.sortOrder,l);a=this.getDataForMaxLabels(a,g.maxLabels);a=n.getBestLabelDisplay(a,l,"feature");a=n.keepStatisticsDataBestDecimalPlace(g,a,"feature");
return this._mapDataItemForStatisticsChart(a,"feature")},getCategoryModeStatisticsInfo:function(g){var n=new C({featureLayer:g.layerDefinition,popupInfo:g.popupFieldInfosObj});g=this._mapOptions(g,"category");var l=g.clusterField,a=this.getCategoryModeStatisticsData(g);a=this.sortStatisticsData(a,"category",g.sortOrder,null,g.valueFields);a=this._removeNaNDataItem(a);a=this.getDataForMaxLabels(a,g.maxLabels);a=n.getBestLabelDisplay(a,l,"category");a=n.keepStatisticsDataBestDecimalPlace(g,a,"category");
return this._mapDataItemForStatisticsChart(a,"category")},getCountModeStatisticsInfo:function(g){var n=new C({featureLayer:g.layerDefinition,popupInfo:g.popupFieldInfosObj});g=this._mapOptions(g,"count");var l=g.clusterField,a=this.getCountModeStatisticsData(g);a=this.sortStatisticsData(a,"count",g.sortOrder);a=this.getDataForMaxLabels(a,g.maxLabels);a=n.getBestLabelDisplay(a,l,"count");return this._mapDataItemForStatisticsChart(a,"count")},getFieldModeStatisticsInfo:function(g){var n=new C({featureLayer:g.layerDefinition,
popupInfo:g.popupFieldInfosObj});g=this._mapOptions(g,"category");var l=this.getFieldModeStatisticsData(g);l=this.sortStatisticsData(l,"field",g.sortOrder);l=this.getDataForMaxLabels(l,g.maxLabels);l=n.getBestLabelDisplay(l,null,"field");l=n.keepStatisticsDataBestDecimalPlace(g,l,"field");return this._mapDataItemForStatisticsChart(l,"field")}}})},"jimu/_chartHelpUtils":function(){define("dojo/_base/declare jimu/utils dojo/_base/lang dojo/_base/config dojo/_base/Color ./_dateFormat moment/moment esri/lang esri/graphic esri/layers/GraphicsLayer esri/symbols/jsonUtils".split(" "),
function(G,q,C,z,g,n,l,a,c,d,h){return G(null,{constructor:function(b){b&&C.mixin(this,b);this.popupInfo||(this.popupInfo={});this.featureLayer||(this.featureLayer={});this._cachePlaces={}},setLayerFeatureLayer:function(b){this.featureLayer=b;this.map&&((b=this.map.getLayer("chart_highLight_GraphicLayer"))?this.graphicLayer=b:(this.graphicLayer=new d({id:"chart_highLight_GraphicLayer"}),this.map.addLayer(this.graphicLayer)),this.graphicLayer.clear())},setLayerObject:function(b){this.layerObject=b},
setSymbolLayer:function(b){this.symbolLayer=b},setPopupInfo:function(b){this.popupInfo=b},setMap:function(b){this.map=b},getBestLabelDisplay:function(b,e,f){if("feature"===f)return this.betterDataCategoryForFeatureMode(b,e);if("category"===f||"count"===f)return this.betterDataCategoryForCategoryCountMode(b,e);if("field"===f)return this.betterDataCategoryForFieldMode(b)},betterDataCategoryForFeatureMode:function(b,e){b.forEach(C.hitch(this,function(f){f.label=this.getBestDisplayValue(e,f.label)}));
return b},betterDataCategoryForFieldMode:function(b){b.forEach(C.hitch(this,function(e){e.label=this.getFieldAlias(e.label)}));return b},betterDataCategoryForCategoryCountMode:function(b,e){b.forEach(C.hitch(this,function(f){f.label="undefined"!==typeof f.unit?this.getCategoryDisplayForDateUnit(f.label,f.unit):this.getBestDisplayValue(e,f.label)}));return b},keepStatisticsDataBestDecimalPlace:function(b,e,f){if("count"===f)return e;var m=b.valueFields,p=b.operation,t=b.hasStatisticsed;this.cacheDecimalPlace(m,
b.features,this.popupInfo,p,t);"feature"===f||"category"===f?e.forEach(C.hitch(this,function(v){v.originalValues=C.clone(v.values);m.forEach(C.hitch(this,function(x,y){var A=v.values[y];A=this.formatedValueDecimalplace(x,A,p,t);v.values[y]=A}))})):"field"===f&&m.forEach(C.hitch(this,function(v){e.some(C.hitch(this,function(x){if(x.label===v){var y=x.values[0];y=this.formatedValueDecimalplace(v,y,p,t);x.values[0]=y;return!0}return!1}))}));return e},formatedValueDecimalplace:function(b,e,f,m){this.isIntegerNumberField(b)&&
"average"===f?e=this.handleValueMaxDecimalplaces(e,6):this.isFloatNumberField(b)&&(b=this.getFieldDecimalPlaceFromCache(b),e=this.formatValuePlaces(e,b),m&&!this.popupInfo&&(e=this.handleValueMaxDecimalplaces(e,6)));return e},isIntegerNumberField:function(b){if(!this.featureLayer||!this.featureLayer.fields)return!1;var e=["esriFieldTypeSmallInteger","esriFieldTypeInteger"];return this.featureLayer.fields.some(C.hitch(this,function(f){return f.name===b&&0<=e.indexOf(f.type)}))},formatValuePlaces:function(b,
e){return"number"!==typeof e||!b&&0!==b?b:b.toFixed(e)},handleValueMaxDecimalplaces:function(b,e){b=Number(b);if("number"!==typeof b)return b;var f=0,m=b.toString().split(".");1===m.length?f=0:2===m.length&&(f=m[1].length);return 0<f?(f>e&&(f=e),b=b.toFixed(f),parseFloat(b)):b},getFieldDecimalPlaceFromCache:function(b){var e;this._cachePlaces&&(b=this._cachePlaces[b],"number"===typeof b&&(e=b));return e},getValueFromAttributes:function(b,e,f,m){if(b)return f="average"===f?"avg":f,m?(m=q.upperCaseString(e+
"_"+f),m=b[m],"undefined"===typeof m&&(m=q.lowerCaseString(e+"_"+f),m=b[m])):m=b[e],m},cacheDecimalPlace:function(b,e,f,m,p){this._cachePlaces={};if(b&&b.length){var t=b.filter(C.hitch(this,function(x){return this.isFloatNumberField(x)})),v={};t.forEach(C.hitch(this,function(x){v[x]=[]}));e&&0<e.length&&e.forEach(C.hitch(this,function(x){var y=x.attributes;y&&t.forEach(C.hitch(this,function(A){var J=this.getValueFromAttributes(y,A,m,p);"number"===typeof J&&v[A].push(J)}))}));t.forEach(C.hitch(this,
function(x){var y=this.getFieldInfoFromPopupInfo(f,x);this._cachePlaces[x]=0;var A=v[x];if(0<A.length)try{var J=this.getBestDecimalPlaceForArrayValues(A);this._cachePlaces[x]=J}catch(L){this._cachePlaces[x]=0,console.error(L)}f&&((y=this.getPlacesFromPopupFieldInfo(y))||0===y)&&(this._cachePlaces[x]=y)}))}},getBestDecimalPlaceForArrayValues:function(b){var e=0,f={};b.forEach(function(t){t=t.toString().split(".");var v=null;1===t.length?v=0:2===t.length&&(v=t[1].length);null!==v&&(f[v]=void 0===f[v]?
1:f[v]+1)});b=null;for(var m in f){m=parseInt(m,10);var p=f[m];b?p>b.value&&(b={key:m,value:p}):b={key:m,value:p}}b&&(e=parseInt(b.key,10));return e},getFieldInfoFromPopupInfo:function(b,e){var f=null;return b&&b.fieldInfos?f=b.fieldInfos.filter(function(m){return m.fieldName===e})[0]:f},getPlacesFromPopupFieldInfo:function(b){return b&&b.format&&b.format.places},getAliasFromPopupInfo:function(b,e){var f=e;if(!b||!b.fieldInfos)return f;(b=b.fieldInfos)&&0<b.length&&b.some(function(m){if(m.fieldName===
e)return f=m.label,!0});return f},isFloatNumberField:function(b){if(!this.featureLayer||!this.featureLayer.fields)return!1;var e=["esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(C.hitch(this,function(f){return f.name===b&&0<=e.indexOf(f.type)}))},isNumberField:function(b){if(!this.featureLayer||!this.featureLayer.fields)return!1;var e=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(C.hitch(this,
function(f){return f.name===b&&0<=e.indexOf(f.type)}))},isDateField:function(b){return(b=this.getFieldInfo(b))?"esriFieldTypeDate"===b.type:!1},getFieldInfo:function(b){if(this.featureLayer)for(var e=this.featureLayer.fields,f=0;f<e.length;f++)if(e[f].name===b)return e[f];return null},getFieldAliasArray:function(b){return b.map(C.hitch(this,function(e){return this.getFieldAlias(e)}))},getBestDisplayValue:function(b,e){if("_NULL\x26UNDEFINED_"===e)return"null";if(this.isDateField(b))return this.formatedDateByPopupInfoOrLocal(b,
e);var f={};f[b]=e;f=q.getDisplayValueForCodedValueOrSubtype(this.layerObject||this.featureLayer,b,f);f.isCodedValueOrSubtype?e=f.displayValue:this.isNumberField(b)&&(b=this.getFieldInfoFromPopupInfo(this.popupInfo,b),e=q.localizeNumberByFieldInfo(e,b));return e},formatedDateByPopupInfoOrLocal:function(b,e,f){f||(f=this.popupInfo);a:{if(f&&a.isDefined(f.fieldInfos))for(var m=0,p=f.fieldInfos.length;m<p;m++){var t=f.fieldInfos[m];if(t.fieldName===b){b=t.format;break a}}b=null}e=Number(e);return q.fieldFormatter.getFormattedDate(e,
b)},getDisplayValForNumberCodedValueSubTypes:function(b,e){var f=this.tryLocaleNumber(e,b);if(this.featureLayer&&this.featureLayer.typeIdField===b){var m=this.featureLayer.types;if(m&&0<m.length&&(m=m.filter(C.hitch(this,function(p){return p.id===e})),0<m.length))return f=m[0].name}(b=this.getFieldInfo(b))&&b.domain&&(b=b.domain.codedValues)&&0<b.length&&b.some(function(p){return p.code===e?(f=p.name,!0):!1});return f},tryLocaleNumber:function(b,e){var f=b;if(a.isDefined(b)&&isFinite(b))try{if(e&&
this.isNumberField(e)){var m=this.popupInfo[e];var p=m&&C.exists("format.places",m)?q.localizeNumberByFieldInfo(b,m):q.localizeNumber(b)}else p=b;"string"===typeof p&&(f=p)}catch(t){console.error(t)}return f+""},getCategoryDisplayForDateUnit:function(b,e){if(!e)return b;b=Number(b);return this._getFormatteredDate(b,e)},_getFormatteredDate:function(b,e){var f=this._getDateTemplate(e);0<=["year","quarter","month","day"].indexOf(e)?f=q.localizeDate(new Date(b),{selector:"date",datePattern:f.date}):(e=
q.localizeDate(new Date(b),{selector:"date",datePattern:f.date}),b=l(b).format(f.time),f=e+f.connector+b);return f},_getDateTemplate:function(b){var e=n[z.locale];(e=e||{},e.date)||(e.date={"short":"short"});e&&!e.time&&(e.time={medium:"HH:mm:ss a"});e&&!e.connector&&(e.connector=" ");e&&!e.sNoDay&&(e.sNoDay="MMM, y");var f={};"year"===b?f.date="y":"quarter"===b?f.date="y q":"month"===b?f.date=e.date.sNoDay:"day"===b?f.date=e.date["short"]:"hour"===b?(f.date=e.date["short"],f.time="HH a",f.connector=
e.connector):"minute"===b?(f.date=e.date["short"],f.time="HH:mm a",f.connector=e.connector):"second"===b&&(f.date=e.date["short"],f.time=e.time.medium,f.connector=e.connector);return f},_getSymbolLayerGraphics:function(b,e){if(!this.symbolLayer)return null;if(!this.symbolLayer.refreshInterval&&this.symbolGraphics&&!1===this.symbolGraphics.filterByExtent&&!1===this.symbolGraphics.useSelection)return this.symbolGraphics.graphics;var f=null;this.map&&this.symbolLayer&&(f=q.getClientFeaturesFromMap(this.map,
this.symbolLayer,e,!!b));this.symbolGraphics={filterByExtent:b,useSelection:e,graphics:f};return f},_isContainAttr:function(b,e){if("object"!==typeof e||"object"!==typeof e)return!1;var f=!0;Object.keys(e).some(function(m){return e[m]!==b[m]?(f=!1,!0):!1});return f},_getFeaturesByAttr:function(b,e){if(e){var f=null;e.some(function(m){return this._isContainAttr(m.attributes,b)?(f=m,!0):!1}.bind(this));return f}},_getFeaturesByClusterfield:function(b,e,f,m){var p=this._getSymbolLayerGraphics(f);if(p)return f=
null,b=this.clientStatisticsUtils.getCluseringObj(b,p,m),(e=C.mixin(b.notNullLabel,b.nullLabel)[e])&&e.features&&e.features.length&&(f=e.features),f},_getFeatureForSerieData:function(b,e,f){var m=e.clusterField,p=e.mode,t=e.filterByExtent;e=e.useSelection;var v={};v[m]=b.name;if("feature"===p)return this._getFeatureBySerieDataItem(b,m,f,t,e);if("category"===p||"count"===p)return new c(null,null,v)},_getFeatureBySerieDataItem:function(b,e,f,m,p){var t={};t[e]=b.name;t[f]=Number("undefined"!==typeof b.originValue?
b.originValue:b.value);b=this._getSymbolLayerGraphics(m,p);return this._getFeaturesByAttr(t,b)},_getFeatureBycsuDataItem:function(b,e,f,m,p,t){var v={};v[e]=b.label;b=b.originalValues||b.values;v[f]=Number(b&&b[m]);f=this._getSymbolLayerGraphics(p,t);return this._getFeaturesByAttr(v,f)},bindChartEvent:function(b,e,f){var m=e.filterByExtent,p=e.useSelection,t=e.clusterField,v=e.valueFields,x=null;"undefined"!==e.dateConfig&&(x=e.dateConfig);this.highLightColor=e.highLightColor||"#00ffff";var y=e.mode;
if(this.map&&0!==f.length){e=C.hitch(this,function(J){if("series"===J.componentType){var L=null,M=this._getSymbolLayerGraphics(m,p);if("field"===y)L=M;else if(M=f[J.dataIndex])if("feature"===y){var N=J.seriesIndex,k=v[N];if(!k)return;(M=this._getFeatureBycsuDataItem(M,t,k,N,m,p))&&(L=[M])}else M=M.label,"undefined"!==typeof M&&(L=this._getFeaturesByClusterfield(t,M,m,x));L&&"mouseover"===J.type&&this.graphicLayer&&(this._mouseoverFeatures=L,this._mouseOverChartItem(L))}});var A=C.hitch(this,function(){this._mouseoverFeatures&&
this.graphicLayer&&(this._mouseOutChartItem(this._mouseoverFeatures),this._mouseoverFeatures=null)});[{name:"mouseover",callback:e},{name:"mouseout",callback:A}].forEach(C.hitch(this,function(J){b.chart.off(J.name);b.chart.on(J.name,C.hitch(this,function(L){"mouseover"===L.type?(this._hasTriggerMouseoverEvent||(this._hasTriggerMouseoverEvent=!0,J.callback(L)),setTimeout(C.hitch(this,function(){this._hasTriggerMouseoverEvent=!1},500))):"mouseout"===L.type&&J.callback(L)}))}))}},_createHighLightFeatures:function(b,
e){b.forEach(C.hitch(this,function(f){f=new c(f.geometry,e);this.graphicLayer.add(f)}))},_mouseOverChartItem:function(b){if(this.featureLayer&&this.featureLayer.getMap()&&this.featureLayer.visible){var e=q.getTypeByGeometryType(this.featureLayer.geometryType);b.forEach(C.hitch(this,function(p){p._originalSymbol=p.symbol}));var f=null;if("point"===e)f=this._getHighLightMarkerSymbol(),this._createHighLightFeatures(b,f);else if("polyline"===e)f=this._getHighLightLineSymbol(this.highLightColor),this._createHighLightFeatures(b,
f);else if("polygon"===e){var m=this.featureLayer.getSelectedFeatures()||[];b.forEach(C.hitch(this,function(p){var t=0<=m.indexOf(p);t=this._getHighLightFillSymbol(this.featureLayer,p,t);p=new c(p.geometry,t);this.graphicLayer.add(p)}))}}},_mouseOutChartItem:function(){this.graphicLayer&&this.graphicLayer.clear()},_getHighLightMarkerSymbol:function(){var b=h.fromJson({color:[255,255,255,0],size:18,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSSquare",outline:{color:[0,0,128,255],width:.75,
type:"esriSLS",style:"esriSLSSolid"}});b.setSize(30);b.outline.setColor(new g(this.highLightColor));return b},_getHighLightLineSymbol:function(b){var e=h.fromJson({color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"});e.setColor(new g(b||this.highLightColor));return e},_getDefaultHighLightFillSymbol:function(){var b=h.fromJson({color:[0,255,255,128],outline:{color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"});b.outline.setColor(new g(this.highLightColor));
return b},_getSymbolByRenderer:function(b,e){var f=this._getDefaultHighLightFillSymbol(),m=this.getVisualVariableByType("colorInfo",b.visualVariables);if(m){if(b=b.getColor(e,{colorInfo:m}))b=C.clone(b),f.setColor(b)}else f=b.getSymbol(e);return f},getVisualVariableByType:function(b,e){return e&&(e=e.filter(function(f){return f.type===b&&!f.target}),e.length)?e[0]:null},_getHighLightFillSymbol:function(b,e,f){var m=null,p=e.symbol;m=b.renderer;!p&&m&&(p=this._getSymbolByRenderer(m,e));p&&"function"===
typeof p.setOutline?(m=h.fromJson(p.toJson()),e=1.5,p.outline&&0<p.outline.width&&(e=p.outline.width+1),f=this._getHighLightLineSymbol(f?"#ff0000":"#00ffff"),f.setWidth(e),m.setOutline(f)):m=this._getDefaultHighLightFillSymbol();return m},_isNumberField:function(b){var e=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(C.hitch(this,function(f){return f.name===b&&0<=e.indexOf(f.type)}))},getFieldAlias:function(b){var e;
this.popupInfo&&(e=this.getAliasFromPopupInfo(this.popupInfo,b));e||(e=b,(b=this.getFieldInfo(b))&&b.alias&&(e=b.alias));return e},_removeDuplicateElementForObjArray:function(b){if(!Array.isArray(b))return b;var e=[];e.push(b[0]);b.forEach(function(f){e.some(function(m){return q.isEqual(m,f)})||e.push(f)});return e},assigneeSettingColor:function(b,e,f){if(!e||!e.length)return e;var m=b.seriesStyle;if(!m)return e;"layerSymbol"===m.type?e=this._assigneeStyleLayerSymbolColor(e,f):"series"===m.type?e=
this._assigneeStyleSeriesColor(b,e):"custom"===m.type&&(e=this._assigneeStyleCustomColor(b,e));return e},_assigneeStyleCustomColor:function(b,e){b=b.seriesStyle;if(!b||!b.customColor)return e;var f=b.customColor;b=f.categories;f=f.others;if(!(b&&b.length||f&&f.length))return e;f&&f.length&&this._setCustomOthersColor(f,e);b&&b.length&&this._setCustomCategoriesColor(b,e)},_setCustomCategoriesColor:function(b,e){e.forEach(function(f){(f=f.data)&&f.length&&f.forEach(function(m){if("undefined"!==typeof m.name){var p=
this._getMatchingCustomColor(m.name,b);this.setColorToDataItem(m,p)}}.bind(this))}.bind(this))},_getMatchingCustomColor:function(b,e){var f=!1;if(!e||!e.length)return f;(e=e.filter(function(m){return m.id===b})[0])&&e.color&&(f=e.color);return f},_getMatchingCustomLabel:function(b,e){var f=!1;if(!e||!e.length)return f;(e=e.filter(function(m){return m.id===b})[0])&&e.label&&(f=e.label);return f},_setCustomOthersColor:function(b,e){this._setOtherColorForCustomColor(b,e);this._setNullLabelColorForCustomColor(b,
e)},_setOtherColorForCustomColor:function(b,e){(b=b.filter(function(f){return"others"===f.id})[0])&&b.color&&this.setColorToAllSerieDataItem(e,b.color)},_setNullLabelColorForCustomColor:function(b,e){if((b=b.filter(function(m){return"null"===m.id})[0])&&b.color){var f=b.color;e.forEach(function(m){(m=m.data)&&m.length&&m.forEach(function(p){p.name&&"_NULL\x26UNDEFINED_"===p.name&&this.setColorToDataItem(p,f)}.bind(this))}.bind(this))}},_assigneeStyleSeriesColor:function(b,e){var f=b.seriesStyle;if(!f||
!f.styles||!f.styles[0])return e;var m=b.mode,p=b.area;return e.map(function(t){var v=null,x=t.type;if("field"===m)"line"===x?(v=f.styles[0].style,t=this._setStyleToSerie(v,t,p)):(x=t.data)&&x[0]&&(t.data=x.map(function(y){v=this._getMatchingStyle(y.name,f);return this.setStyleToSerieDataItem(v,y)}.bind(this)));else if("column"===x||"bar"===x||"line"===x)"count"===m?(v=f.styles[0].style,t=this._setStyleToSerie(v,t,p)):"undefined"!==typeof t.name&&(v=this._getMatchingStyle(t.name,f))&&(t=this._setStyleToSerie(v,
t,p));return t}.bind(this))},_assigneeStyleLayerSymbolColor:function(b,e){b.forEach(function(f){var m=f.name;(f=f.data)&&f.length&&f.forEach(function(p){var t=[this._getFeatureForSerieData(p,e,m)];if(t=this._getSymbolColorForDataItem(t))p.itemStyle={color:t}}.bind(this))}.bind(this))},_setStyleToSerie:function(b,e,f){e.itemStyle||(e.itemStyle={});b&&"undefined"!==typeof b.color&&(Array.isArray(b.color)?e.itemStyle.color=b.color[0]:e.itemStyle.color=b.color);b&&"undefined"!==typeof b.opacity&&(f?(e.areaStyle||
(e.areaStyle={}),e.areaStyle.opacity=1-parseFloat(b.opacity/10)):e.itemStyle.opacity=1-parseFloat(b.opacity/10));return e},_getMatchingStyle:function(b,e){var f=null;e=e.styles;if(!e||!e[0]||""===b)return f;e.forEach(function(m){m.name===b&&(f=m.style)});return f},_getSymbolColorForDataItem:function(b){var e=!1;if(!this.symbolLayer)return e;b=b&&b[0];return b?e=this._getColorForFeature(this.symbolLayer.renderer,b):e},_getColorForFeature:function(b,e){var f=!1,m=this.getVisualVariableByType("colorInfo",
b.visualVariables);m?(b=b.getColor(e,{colorInfo:m}))&&(f=this._convertToEchartsRbga(b)):(b=b.getSymbol(e))&&"undefined"!==typeof b.color&&(f=this._convertToEchartsRbga(b.color));return f},_convertToEchartsRbga:function(b){if(!b||"undefined"===typeof b.r)return b;b=window.JSON.parse(window.JSON.stringify(b));var e="rgba("+(b.r+",");e+=b.g+",";e+=b.b+",";return e+=b.a+")"},getColors:function(b,e){var f=[];if(2===b.length)f=this._createGradientColors(b[0],b[b.length-1],e);else{for(var m=Math.ceil(e/
b.length),p=0;p<m;p++)f=f.concat(b);f=f.slice(0,e)}return f},_createGradientColors:function(b,e,f){var m=[];b=new g(b);var p=new g(e);e=(p.r-b.r)/f;var t=(p.g-b.g)/f;p=(p.b-b.b)/f;for(var v=new g,x=0,y=0,A=0,J=0;J<f;J++)x=parseInt(b.r+e*J,10),y=parseInt(b.g+t*J,10),A=parseInt(b.b+p*J,10),v.setColor([x,y,A]),m.push(v.toHex());return m},setStyleToSerieDataItem:function(b,e){e.itemStyle||(e.itemStyle={});b&&"undefined"!==typeof b.color&&(Array.isArray(b.color)?e.itemStyle.color=b.color[0]:e.itemStyle.color=
b.color);b&&"undefined"!==typeof b.opacity&&(e.itemStyle.opacity=1-parseFloat(b.opacity/10));return e},setColorToSerie:function(b,e){if(!b||"object"!==typeof b||Array.isArray(b))return b;b.itemStyle||(b.itemStyle={});e&&(b.itemStyle.color=e)},setColorToDataItem:function(b,e){if(!b||"object"!==typeof b)return b;b.itemStyle||(b.itemStyle={});e&&(b.itemStyle.color=e)},setColorToAllSerieDataItem:function(b,e){b.forEach(function(f){(f=f.data)&&f.length&&f.forEach(function(m){this.setColorToDataItem(m,
e)}.bind(this))}.bind(this))},_updateDataItemNameForCustom:function(b,e,f){if("undefined"!==typeof b.name){var m=b.name;"_NULL\x26UNDEFINED_"===b.name&&e?m=e:(e=this._getMatchingCustomLabel("undefined"!==typeof b.originName?b.originName:b.name,f))&&(m=e);b.name=m}return m},_updateSerieDataItemName:function(b,e,f){var m=b.name,p=m;p=b.unit&&m?this.getCategoryDisplayForDateUnit(m,b.unit):"field"!==e?this.getBestDisplayValue(f,m):this.getFieldAlias(m);b.name=p;b.originName=m;return p},updateChartSeriesDisplayName:function(b,
e,f){var m=f.clusterField,p=f.mode;f=b.series;var t=[];e=e.seriesStyle;var v;f.forEach(function(A,J){A.name&&(A.name=this.getFieldAlias(A.name));(A=A.data)&&A.length&&A.forEach(function(L,M){v=this._updateSerieDataItemName(L,p,m);0===J&&(t[M]=v)}.bind(this))}.bind(this));if("custom"===e.type){if((e=e.customColor)&&e.categories&&e.categories.length){var x=e.categories;e=e.others||[];if((e=e.filter(function(A){return"null"===A.id})[0])&&e.label)var y=e.label}f.forEach(function(A,J){(A=A.data)&&A.length&&
A.forEach(function(L,M){v=this._updateDataItemNameForCustom(L,y,x);0===J&&(t[M]=v)}.bind(this))}.bind(this))}b.labels=null;b.labels=t}})})},"jimu/_dateFormat":function(){define([],function(){return{ar:{date:{"short":"d/M/y",medium:"dd/MM/y","long":"d MMMM. y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"M/y"},time:{"short":"h:mm a",medium:"h:mm:ss a"}},bs:{date:{"short":"d.M.yy.",medium:"d. MMM. y.","long":"d. MMMM y.",onlyDate:"d. MMM.",mNoDay:"MMM. y.",sNoDay:"M.yy"}},cs:{date:{"short":"dd.MM.yy",medium:"d. M. y",
onlyDate:"d. M.",mNoDay:"M. y",sNoDay:"MM.yy"}},da:{date:{"short":"dd/MM/y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM/y"}},de:{date:{"short":"dd.MM.yy",medium:"dd.MM.y",onlyDate:"dd.MM."},connector:" , ",mNoDay:"MM.y",sNoDay:"MM.yy"},el:{date:{"short":"d/M/yy",medium:"d MMM y",onlyDate:"d MMM"},connector:" , ",mNoDay:"MMM y",sNoDay:"M/yy"},en:{date:{"short":"M/d/yy",medium:"MMM d, y",onlyDate:"MMM d",mNoDay:"MMM, y",sNoDay:"M/yy"}},es:{date:{"short":"d/M/yy",
medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},et:{date:{"short":"d.MM.y",medium:"d. MMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"H:mm",medium:"H:mm:ss"}},fi:{date:{"short":"d.M.y",medium:"d.M.y",onlyDate:"d.M.",mNoDay:"M.y",sNoDay:"M.y"},connector:" 'klo' "},fr:{date:{"short":"dd/MM/y",medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/y"},connector:" '\u00e0' "},he:{date:{"short":"dd/MM/yy",medium:"d '\u05d1'MMM y",onlyDate:"d '\u05d1'MMM",mNoDay:"'\u05d1'MMM y",
sNoDay:"MM/yy"},connector:" , "},hr:{date:{"short":"d.M.y",medium:"d. MMM y.",onlyDate:"d. MMM",mNoDay:"MMM y.",sNoDay:"M.y"}},id:{"short":"dd/MM/yy",date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/yy"}},it:{date:{medium:"dd MMM y","long":"d MMMM y",onlyDate:"dd MMM",mNoDay:"MMM y",sNoDay:"MM/yy"},connector:" , "},ja:{date:{medium:"y/MM/dd",onlyDate:"MM/dd",mNoDay:"y/MM",sNoDay:"y/MM"},time:{"short":"a h:mm",medium:"a h:mm:ss"}},ko:{date:{medium:"y. M. d.",onlyDate:"M. d.",mNoDay:"y. M.",
sNoDay:"yy. M."}},lt:{date:{medium:"y-MM-dd","long":"y 'm'. MMMM d 'd'.",onlyDate:"MM-dd",mNoDay:"y-MM",sNoDay:"y-MM"},time:{medium:"HH:mm:ss"}},lv:{date:{"short":"dd.MM.y",medium:"y. 'gada' d. MMM.","long":"y. 'gada' d. MMMM",onlyDate:"d. MMM.",mNoDay:"y. 'gada' MMM.",sNoDay:"MM.y"}},nb:{date:{"short":"dd.MM.y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"HH:mm",medium:"HH:mm:ss"},connector:" , "},nl:{date:{medium:"d MMM y",onlyDate:"d MMM",
mNoDay:"MMM y",sNoDay:"MM-yy"}},pl:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},"pt-br":{date:{"short":"dd/MM/y",medium:"d 'de' MMM 'de' y",onlyDate:"d 'de' MMM",mNoDay:"MMM 'de' y",sNoDay:"MM/y"}},"pt-pt":{date:{medium:"dd/MM/y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"MM/yy"}},ro:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},ru:{date:{"short":"dd.MM.y",medium:"d MMM y '\u0433.'",onlyDate:"d MMM",mNoDay:"MMM y '\u0433.'",
sNoDay:"MM.y"},connector:" , "},sr:{date:{medium:"dd.MM.y.",onlyDate:"dd.MM.",mNoDay:"MM.y.",sNoDay:"M.yy."},time:{"short":"HH:mm",medium:"HH:mm:ss"}},sv:{date:{medium:"d MMM. y",onlyDate:"d MMM.",mNoDay:"MMM. y",sNoDay:"y-MM"}},th:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},tr:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"}},vi:{date:{"short":"dd/MM/y",medium:"d MMM, y","long":"'Ng\u00e0y' dd 'th\u00e1ng' MM 'n\u0103m' y",onlyDate:"d MMM",mNoDay:"MMM, y",
sNoDay:"MM/y"},time:{"short":"hh:mm a",medium:"hh:mm:ss a"},connector:" , "},"zh-cn":{date:{"short":"y/M/d",medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}},"zh-hk":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"M/y"}},"zh-tw":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}}}})},"libs/moment/twix":function(){(function(){var G=
[].slice;var q="undefined"!==typeof module&&null!==module&&null!=module.exports&&"function"===typeof require;var C=function(g){return"[object Array]"===Object.prototype.toString.call(g)};var z=function(g){if(null==g)throw Error("Can't find moment");var n=function(){function l(a,c,d,h){var b;null==h&&(h={});"string"!==typeof d&&(h=null!=d?d:{},d=null);"boolean"===typeof h&&(h={allDay:h});this._oStart=g(a,d,h.parseStrict);this._oEnd=g(c,d,h.parseStrict);this.allDay=null!=(b=h.allDay)?b:!1;this._mutated()}
l._extend=function(){var a,c;var d=arguments[0];var h=2<=arguments.length?G.call(arguments,1):[];var b=0;for(c=h.length;b<c;b++){var e=h[b];for(a in e)"undefined"!==typeof e[a]&&(d[a]=e[a])}return d};l.prototype.start=function(){return this._start.clone()};l.prototype.end=function(){return this._end.clone()};l.prototype.isSame=function(a){return this._start.isSame(this._end,a)};l.prototype.length=function(a,c){null==c&&(c=!1);return this._displayEnd.diff(this._start,a,c)};l.prototype.count=function(a){var c=
this.start().startOf(a);return this.end().startOf(a).diff(c,a)+1};l.prototype.countInner=function(a){var c=this._inner(a);var d=c[0];c=c[1];return d>=c?0:c.diff(d,a)};l.prototype.iterate=function(a,c,d){var h=this._prepIterateInputs(a,c,d);a=h[0];c=h[1];d=h[2];var b=this.start().startOf(c);var e=this.end().startOf(c);this.allDay&&(e=e.add(1,"d"));h=function(f){return function(){return!f.allDay&&b<=e&&(!d||!b.isSame(e)||f._end.hours()>d)||f.allDay&&b<e}}(this);return this._iterateHelper(c,b,h,a)};
l.prototype.iterateInner=function(a,c){c=this._prepIterateInputs(a,c);a=c[0];c=c[1];var d=this._inner(c,a);var h=d[0];var b=d[1];return this._iterateHelper(c,h,function(){return h<b},a)};l.prototype.humanizeLength=function(){return this.allDay?this.isSame("d")?"all day":this._start.from(this.end().add(1,"d"),!0):this._start.from(this._end,!0)};l.prototype.asDuration=function(a){a=this._end.diff(this._start);return g.duration(a)};l.prototype.isPast=function(){return this._lastMilli<g()};l.prototype.isFuture=
function(){return this._start>g()};l.prototype.isCurrent=function(){return!this.isPast()&&!this.isFuture()};l.prototype.contains=function(a){g.isMoment(a)||(a=g(a));return this._start<=a&&this._lastMilli>=a};l.prototype.isEmpty=function(){return this._start.isSame(this._displayEnd)};l.prototype.overlaps=function(a){return this._displayEnd.isAfter(a._start)&&this._start.isBefore(a._displayEnd)};l.prototype.engulfs=function(a){return this._start<=a._start&&this._displayEnd>=a._displayEnd};l.prototype.union=
function(a){var c=this.allDay&&a.allDay;return new l(this._start<a._start?this._start:a._start,this._lastMilli>a._lastMilli?c?this._end:this._displayEnd:c?a._end:a._displayEnd,c)};l.prototype.intersection=function(a){var c=this.allDay&&a.allDay;return new l(this._start>a._start?this._start:a._start,this._lastMilli<a._lastMilli?c?this._end:this._displayEnd:c?a._end:a._displayEnd,c)};l.prototype.xor=function(){var a,c,d;var h=1<=arguments.length?G.call(arguments,0):[];var b=0;var e=null;var f=[];var m=
function(){var y;var A=[];var J=0;for(y=h.length;J<y;J++)d=h[J],d.allDay&&A.push(d);return A}().length===h.length;var p=[];var t=[this].concat(h);var v=c=0;for(a=t.length;c<a;v=++c){var x=t[v];p.push({time:x._start,i:v,type:0});p.push({time:x._displayEnd,i:v,type:1})}p=p.sort(function(y,A){return y.time-A.time});v=0;for(x=p.length;v<x;v++)c=p[v],1===c.type&&--b,b===c.type&&(e=c.time),b===(c.type+1)%2&&(e&&((a=f[f.length-1])&&a._end.isSame(e)?(a._oEnd=c.time,a._mutated()):(a=m?c.time.clone().subtract(1,
"d"):c.time,e=new l(e,a,m),e.isEmpty()||f.push(e))),e=null),0===c.type&&(b+=1);return f};l.prototype.difference=function(){var a;var c=1<=arguments.length?G.call(arguments,0):[];var d=this.xor.apply(this,c).map(function(e){return function(f){return e.intersection(f)}}(this));var h=[];c=0;for(a=d.length;c<a;c++){var b=d[c];!b.isEmpty()&&b.isValid()&&h.push(b)}return h};l.prototype.split=function(){var a,c,d,h,b;var e=1<=arguments.length?G.call(arguments,0):[];var f=d=this.start();g.isDuration(e[0])?
a=e[0]:!g.isMoment(e[0])&&!C(e[0])&&"object"===typeof e[0]||"number"===typeof e[0]&&"string"===typeof e[1]?a=g.duration(e[0],e[1]):b=C(e[0])?e[0]:e;b&&(b=function(){var t;var v=[];var x=0;for(t=b.length;x<t;x++)h=b[x],v.push(g(h));return v}(),b=function(){var t;var v=[];var x=0;for(t=b.length;x<t;x++)c=b[x],c.isValid()&&c>=d&&v.push(c);return v}().sort(function(t,v){return t.valueOf()-v.valueOf()}));if(a&&0===a.asMilliseconds()||b&&0===b.length)return[this];var m=[];var p=0;for(e=this._displayEnd;d<
e&&(null==b||b[p]);)f=a?d.clone().add(a):b[p].clone(),f=g.min(e,f),d.isSame(f)||m.push(g.twix(d,f)),d=f,p+=1;!f.isSame(this._displayEnd)&&b&&m.push(g.twix(f,this._displayEnd));return m};l.prototype.divide=function(a){return this.split(this.length()/a,"ms").slice(0,+(a-1)+1||9E9)};l.prototype.isValid=function(){return this._start.isValid()&&this._end.isValid()&&this._start<=this._displayEnd};l.prototype.equals=function(a){return a instanceof l&&this.allDay===a.allDay&&this._start.valueOf()===a._start.valueOf()&&
this._end.valueOf()===a._end.valueOf()};l.prototype.toString=function(){return"{start: "+this._start.format()+", end: "+this._end.format()+", allDay: "+(this.allDay?"true":"false")+"}"};l.prototype.toArray=function(a,c,d){a=this.iterate(a,c,d);for(c=[];a.hasNext();)c.push(a.next());return c};l.prototype.simpleFormat=function(a,c){var d={allDay:"(all day)",template:l.formatTemplate};l._extend(d,c||{});a=d.template(this._start.format(a),this._end.format(a));this.allDay&&d.allDay&&(a+=" "+d.allDay);
return a};l.prototype.format=function(a){var c;if(this.isEmpty())return"";var d={groupMeridiems:!0,spaceBeforeMeridiem:!0,showDayOfWeek:!1,hideTime:!1,hideYear:!1,implicitMinutes:!0,implicitDate:!1,implicitYear:!0,yearFormat:"YYYY",monthFormat:"MMM",weekdayFormat:"ddd",dayFormat:"D",meridiemFormat:"A",hourFormat:this._start.localeData()._longDateFormat.LT[0],minuteFormat:"mm",allDay:"all day",explicitAllDay:!1,lastNightEndsAt:0,template:l.formatTemplate};l._extend(d,a||{});a=[];var h=d.hourFormat&&
"h"===d.hourFormat[0];var b=this._start.localeData()._longDateFormat.L;var e=b.indexOf("M")<b.indexOf("D");var f=0<d.lastNightEndsAt&&!this.allDay&&this.end().startOf("d").valueOf()===this.start().add(1,"d").startOf("d").valueOf()&&12<this._start.hours()&&this._end.hours()<d.lastNightEndsAt;var m=!d.hideDate&&(!d.implicitDate||this.start().startOf("d").valueOf()!==g().startOf("d").valueOf()||!(this.isSame("d")||f));b=!(this.allDay||d.hideTime);this.allDay&&this.isSame("d")&&(d.implicitDate||d.explicitAllDay)&&
a.push({name:"all day simple",fn:function(){return d.allDay},pre:" ",slot:0});!m||d.hideYear||d.implicitYear&&this._start.year()===g().year()&&this.isSame("y")||a.push({name:"year",fn:function(L){return L.format(d.yearFormat)},pre:e?", ":" ",slot:4});b&&m&&a.push({name:"month-date",fn:function(L){return L.format(e?d.monthFormat+" "+d.dayFormat:d.dayFormat+" "+d.monthFormat)},ignoreEnd:function(){return f},pre:" ",slot:2});!b&&m&&a.push({name:"month",fn:function(L){return L.format(d.monthFormat)},
pre:" ",slot:e?2:3});!b&&m&&a.push({name:"date",fn:function(L){return L.format(d.dayFormat)},pre:" ",slot:e?3:2});m&&d.showDayOfWeek&&a.push({name:"day of week",fn:function(L){return L.format(d.weekdayFormat)},pre:" ",slot:1});d.groupMeridiems&&h&&!this.allDay&&!d.hideTime&&a.push({name:"meridiem",fn:function(L){return L.format(d.meridiemFormat)},slot:6,pre:d.spaceBeforeMeridiem?" ":""});this.allDay||d.hideTime||a.push({name:"time",fn:function(L){var M=0===L.minutes()&&d.implicitMinutes&&h?L.format(d.hourFormat):
L.format(d.hourFormat+":"+d.minuteFormat);!d.groupMeridiems&&h&&(d.spaceBeforeMeridiem&&(M+=" "),M+=L.format(d.meridiemFormat));return M},slot:5,pre:", "});var p=[];var t=[];var v=[];var x=!0;var y=function(L){return function(M){var N=M.fn(L._start);var k=M.ignoreEnd&&M.ignoreEnd()?N:M.fn(L._end);var r={format:M,value:function(){return N}};if(k===N&&x)return v.push(r);x&&(x=!1,v.push({format:{slot:M.slot,pre:""},value:function(){return d.template(J(p),J(t,!0).trim())}}));p.push(r);return t.push({format:M,
value:function(){return k}})}}(this);m=0;for(c=a.length;m<c;m++)b=a[m],y(b);var A=!0;var J=function(L,M){var N;var k=!0;var r="";var B=L.sort(function(I,u){return I.format.slot-u.format.slot});L=0;for(N=B.length;L<N;L++){var H=B[L];A||(r=k&&M?r+" ":r+H.format.pre);r+=H.value();k=A=!1}return r};return J(v)};l.prototype._iterateHelper=function(a,c,d,h){return{next:function(){if(d()){var b=c.clone();c.add(h,a);return b}return null},hasNext:d}};l.prototype._prepIterateInputs=function(){var a,c,d;var h=
1<=arguments.length?G.call(arguments,0):[];if("number"===typeof h[0])return h;if("string"===typeof h[0]){var b=h.shift();var e=null!=(c=h.pop())?c:1;h.length&&(a=null!=(d=h[0])?d:!1)}g.isDuration(h[0])&&(b="ms",e=h[0].as(b));return[e,b,a]};l.prototype._inner=function(a,c){null==a&&(a="ms");null==c&&(c=1);var d=this.start();var h=this._displayEnd.clone();d>d.clone().startOf(a)&&d.startOf(a).add(c,a);h<h.clone().endOf(a)&&h.startOf(a);var b=d.twix(h).asDuration(a).get(a);h.subtract(b%c,a);return[d,
h]};l.prototype._mutated=function(){this._start=this.allDay?this._oStart.clone().startOf("d"):this._oStart;this._lastMilli=this.allDay?this._oEnd.clone().endOf("d"):this._oEnd;this._end=this.allDay?this._oEnd.clone().startOf("d"):this._oEnd;return this._displayEnd=this.allDay?this._end.clone().add(1,"d"):this._end};return l}();n._extend(g.locale(),{_twix:n.defaults});n.formatTemplate=function(l,a){return l+" - "+a};g.twix=function(){return function(l,a,c){c.prototype=l.prototype;c=new c;l=l.apply(c,
a);return Object(l)===l?l:c}(n,arguments,function(){})};g.fn.twix=function(){return function(l,a,c){c.prototype=l.prototype;c=new c;l=l.apply(c,a);return Object(l)===l?l:c}(n,[this].concat(G.call(arguments)),function(){})};g.fn.forDuration=function(l,a){return new n(this,this.clone().add(l),a)};g.duration.fn&&(g.duration.fn.afterMoment=function(l,a){return new n(l,g(l).clone().add(this),a)},g.duration.fn.beforeMoment=function(l,a){return new n(g(l).clone().subtract(this),l,a)});return g.twixClass=
n};if(q)return module.exports=z(require("moment/moment"));this.moment?this.Twix=z(this.moment):"undefined"!==typeof moment&&null!==moment&&(this.Twix=z(moment));this.makeTwix=z}).call(this)},"jimu/dijit/Chart":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/_base/html dojo/Evented libs/echarts/echarts jimu/utils ./_chartUtils ./_Gauge ./_ChartOptionFactory libs/echarts/light libs/echarts/dark".split(" "),function(G,q,C,z,g,n,l,a,c,d){return G([q,g],{baseClass:"jimu-dijit-chart",
templateString:"\x3cdiv\x3e\x3c/div\x3e",declaredClass:"jimu.dijit.chart",config:null,postCreate:function(){this.inherited(arguments);this._initChart()},updateConfig:function(h){if(!h||!this.chart)return!1;var b=this.chart.getOption(),e=this._isSameNumberSeriesItems(b,h);b=!this.preview&&e?this.getDatazoomRatio(b):null;this.config=h;this._specialThemeByConfig(h);e=this._chartFactory(h);this.chart.setOption(e,!0);this._settingByGrid(h,e,b);return!0},_settingByGrid:function(h,b,e){if("gauge"===h.type)return this._resetGaugePosition(h);
var f=this.chartUtils.getAxisZeroPosition();h.layout=this.chartUtils.calcDefaultLayout(h);this.chartUtils.isAxisChart(h)&&(b=this.chartUtils.settingGrid(b,h),b=this.chartUtils.settingDataZoom(b,h,f,e));b=this.chartUtils.settingChartLayout(b,h);this.chart.setOption(b,!1)},_resetGaugePosition:function(h){this._resetGaugeGrid(h);this._resetGaugeGraphic(h)},setConfig:function(h){if(!h)return!1;this.config=h;this._specialThemeByConfig(this.config);this.clear();var b=this._chartFactory(this.config);this.chart.setOption(b,
!0);this._setAixsGrid(h,b);this._resetGaugePosition(h,b);return!0},destroy:function(){this._offEvents();this.clear();this.inherited(arguments)},_chartFactory:function(h){return this.option=this.chartOptionFactory.produceOption(h)},bindEvents:function(h){this.chart&&h.events&&h.events.length&&(this._offEvents(),h.events.forEach(C.hitch(this,function(b){this.chart.on(b.name,b.callback)})))},_offEvents:function(){this.config.events&&this.config.events[0]&&this.config.events.forEach(C.hitch(this,function(h){this.chart.off(h.name)}))},
getDataURL:function(){if(this.chart)return this.chart.getDataURL()},clear:function(){this.chart&&this.chart.clear()},resize:function(h,b){this.chart&&(z.setStyle(this.domNode,{width:h||"100%",height:b||"100%"}),this.chart.resize(),this._resetGaugePosition(this.config))},getDatazoomRatio:function(h){return(h=h&&h.dataZoom&&h.dataZoom[0])?[h.start,h.end]:null},_isSameNumberSeriesItems:function(h,b){return(h&&h.series&&h.series[0]&&h.series[0].data&&h.series[0].data.length)===(b&&b.series&&b.series[0]&&
b.series[0].data&&b.series[0].data.length)},_resizeDataZoom:function(){var h=this.option,b=this.config;if(h&&b){var e=this.chartUtils.getAxisZeroPosition();h=this.chartUtils.settingDataZoom(h,b,e);this.chart.setOption(h)}},_setAixsGrid:function(h,b){this.chartUtils.isAxisChart(h)&&(b=this.chartUtils.settingGrid(b,h),this.chart.setOption(b,!1))},_resetGaugeGraphic:function(h){"gauge"===h.type&&this.gauge.resetGraphic(h)},_resetGaugeGrid:function(h){"gauge"===h.type&&this.gauge.resetGrid(h)},_specialChartTheme:function(){this.chart&&
(this.chart._theme.tooltip.axisPointer={type:"cross",label:{show:!0,precision:2,formatter:function(h){return"number"===typeof h.value?(h=parseFloat(h.value).toFixed(2),this.chartUtils.tryLocaleNumber(h)):h.value}.bind(this)},lineStyle:{color:"#27727B",type:"dashed"},crossStyle:{color:"#27727B"},shadowStyle:{color:"rgba(200,200,200,0.3)"}},this.chart._theme.valueAxis||(this.chart._theme.valueAxis={}),this.chart._theme.valueAxis.axisLabel||(this.chart._theme.valueAxis.axisLabel={}),this.chart._theme.valueAxis.axisLabel.formatter=
function(h){return l.localizeNumber(h)})},_specialThemeByConfig:function(h){this._initChartTheme();h.color&&h.color[0]&&(this.chart._theme.color=h.color);this.chart._theme.tooltip.confine=!0;var b="percent"===h.stack;this.chart._theme.tooltip.formatter=function(e){return this.chartUtils.handleToolTip(e,null,!1,b)}.bind(this)},_initChartTheme:function(){this.chart&&(this.chart._theme||(this.chart._theme={}),this.chart._theme.tooltip||(this.chart._theme.tooltip={}),this.chart._theme.valueAxis||(this.chart._theme.valueAxis=
{}),this.chart._theme.valueAxis.axisLabel||(this.chart._theme.valueAxis.axisLabel={}))},_initChart:function(){this.chart=n.init(this.domNode,this.config&&this.config.theme||"light");this.chartUtils=new a({chart:this.chart});this.gauge=new c({chart:this.chart,chartUtils:this.chartUtils});this.chartOptionFactory=new d({chart:this.chart,gauge:this.gauge,chartUtils:this.chartUtils});this._specialChartTheme(this.config)}})})},"jimu/dijit/_chartUtils":function(){define("dojo/_base/declare jimu/utils esri/lang dojo/_base/lang libs/echarts/echarts dojo/i18n!dojo/cldr/nls/number".split(" "),
function(G,q,C,z,g,n){var l={curved:{name:"",type:"gauge",center:["50%","60%"],startAngle:200,endAngle:-20,axisLine:{lineStyle:{color:[[.31,"#5CB4CA"],[1,"#E5E5E5"]],shadowColor:"rgba(0, 0, 0, 0.5)",shadowBlur:0}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{distance:-52,textStyle:{color:"#000"}},pointer:{length:"65%",width:5},itemStyle:{opacity:.7},detail:{show:!0,offsetCenter:[0,"68%"],textStyle:{color:"#24B5CC"}},title:{show:!1},data:[{value:0}],animationEasingUpdate:"bounceOut",animationDurationUpdate:500},
vertical:{yAxis:{show:!0,offset:-10,type:"value",interval:1,scale:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal"}},splitLine:{show:!1}},xAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{color:"#E5E5E5"},barGap:"-100%",data:[100],z:1},{name:"",type:"bar",barWidth:30,label:{show:!0,position:"insideTopLeft",offset:[30,-15],textStyle:{}},
data:[{value:40,label:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},itemStyle:{}}],itemStyle:{color:"#24B5CC"},z:10}]},horizontal:{xAxis:{show:!0,offset:-27,type:"value",scale:!1,interval:1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:[]},
series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{color:"#E5E5E5"},barGap:"-100%",data:[100],z:1},{name:"",type:"bar",barWidth:30,label:{show:!0,position:"top",offset:[20,0],textStyle:{}},data:[{value:40,label:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},itemStyle:{}}],itemStyle:{color:"#24B5CC"},z:10}]}};return G([],{constructor:function(a){this.chart=a&&a.chart;this.horIconUrl="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjdweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA3IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3NS4wMDAwMDAsIC0yOTcuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNTAwMDAwLCAxNzAuNTQzODAzKSByb3RhdGUoLTE4MC4wMDAwMDApIHRyYW5zbGF0ZSgtMi41MDAwMDAsIC0xNzAuNTQzODAzKSAiIHBvaW50cz0iNSAxNzAuNTQzODAzIC0xLjcwNTMwMjU3ZS0xMyAxNzQuMDQzODAzIC0xLjY5NjQyMDc4ZS0xMyAxNjcuMDQzODAzIj48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
this.verIconUrl="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI4cHgiIHZpZXdCb3g9IjAgMCA1IDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3Ni4wMDAwMDAsIC0zMjQuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwLjYyODk1MiwgMTcwLjQ1ODY1NCkgcm90YXRlKC05MC4wMDAwMDApIHRyYW5zbGF0ZSgtMzAuNjI4OTUyLCAtMTcwLjQ1ODY1NCkgIiBwb2ludHM9IjMzLjEyODk1MjMgMTcwLjQ1ODY1NCAyOC4xMjg5NTIzIDE3My45NTg2NTQgMjguMTI4OTUyMyAxNjYuOTU4NjU0Ij48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
this.verIconUrlRTL="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI3cHgiIHZpZXdCb3g9IjAgMCA1IDciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkFydGJvYXJkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIxLjAwMDAwMCwgLTQ0Ny4wMDAwMDApIiBmaWxsPSIjOTM5MzkzIj4NCiAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJUcmlhbmdsZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIzLjUwMDAwMCwgNDUwLjUwMDAwMCkgcm90YXRlKC0xODAuMDAwMDAwKSB0cmFuc2xhdGUoLTEyMy41MDAwMDAsIC00NTAuNTAwMDAwKSAiIHBvaW50cz0iMTI2IDQ1MC41IDEyMSA0NTQgMTIxIDQ0NyI+PC9wb2x5Z29uPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+";
a=z.clone(l);this.curved=a.curved;this.vertical=a.vertical;this.horizontal=a.horizontal;this.unitDistance=23;this.defultGrid={top:10,bottom:10,left:10,right:10,containLabel:!0}},getAxisZeroPosition:function(){if(!this.chart)return!1;try{var a=this.chart.convertToPixel({xAxisIndex:0,yAxisIndex:0},[0,0])}catch(b){}if(!a)return{};var c=a[0];a=a[1];var d=this.chart.getHeight(),h=this.chart.getWidth();return{left:c,right:h-c,top:a,bottom:d-a}},getTextWidth:function(a,c){if(!a&&0!==a)return 0;var d=(this.getTextWidth.canvas||
(this.getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");d.font=c;return d.measureText(a).width},getHeightByFontSize:function(a){a=Math.round(a);if("number"!==typeof a||6>a||40<a)return 0;var c=0;a-=6;switch(!0){case 7>=a:c=1*a;break;case 8<=a&&11>=a:c=a-1+2;break;case 12<=a&&15>=a:c=a-2+4;break;case 16<=a&&19>=a:c=a-3+6;break;case 20<=a&&21>=a:c=a-4+8;break;case 22<=a&&23>=a:c=a-5+8;break;case 24<=a&&27>=a:c=a-6+10;break;case 28<=a&&31>=a:c=a-7+12;break;case 32<=a&&34>=a:c=a-
8+14}return 8+c},tryLocaleNumber:function(a){var c=a;if(C.isDefined(a)&&isFinite(a))try{var d=q.localizeNumber(a);"string"===typeof d&&(c=d)}catch(h){console.error(h)}return c+""},isStrictNaN:function(a){return"number"===typeof a&&isNaN(a)},isNumberString:function(a){if(!a)return!1;a=Number(a);return"number"!==typeof a||isNaN(a)?!1:!0},isLocaleNumberString:function(a){if(!a)return!1;if(this.isNumberString(a))return!0;a=a.replace(new RegExp("\\"+n.group,"g"),"");return this.isNumberString(a)?!0:!1},
localizeNumberForDigitSeparator:function(a,c){if(!this.isLocaleNumberString(a))return a;var d=new RegExp("\\"+n.group,"g");return a.toString().match(d)?c?a:a.toString().replace(d,""):this._localizeNumberForDigitSeparator(a,c)},_localizeNumberForDigitSeparator:function(a,c){a=q.localizeNumber(a);return!1===c?a.toString().replace(new RegExp("\\"+n.group,"g"),""):a},isAxisChart:function(a){return"column"===a.type||"bar"===a.type||"line"===a.type},isBaseChartType:function(a){return this.isAxisChart(a)||
"pie"===a.type},_getTooltipDisplayValue:function(a,c){"number"===typeof Number(a)&&(a=c?q.convertNumberToPercentage(a):this.tryLocaleNumber(a));return a},generateToolTip:function(a,c,d,h,b){var e="";e=d?'\x3cdiv class\x3d"tooltip-tr reverse"\x3e':'\x3cdiv class\x3d"tooltip-tr"\x3e';d="";a.color&&"auto"!==a.color&&(d='\x3cdiv class\x3d"colorEl marginRight5" style\x3d"background-color:'+q.encodeHTML(a.color)+'"\x3e\x3c/div\x3e');e+=d;d="";"radar"!==a.seriesType&&this._isVaildValue(a.seriesName)?d=a.seriesName:
this._isVaildValue(b)&&(d=b);e=""===d?e+("\x3cdiv\x3e"+d+"\x3c/div\x3e"):e+("\x3cdiv\x3e"+d+"\x3c/div\x3e\x3cdiv\x3e : \x3c/div\x3e");b="null";this._isNotZeroBoolean(c)?b=c:this._isVaildValue(a.value)&&(b=a.value);e+="\x3cdiv\x3e"+this._getTooltipDisplayValue(b,h)+"\x3c/div\x3e";"pie"===a.seriesType&&(a=a.percent,a=this._isVaildValue(a)?a/100:0,e+='\x3cdiv class\x3d"space-left"\x3e('+q.convertNumberToPercentage(a)+")\x3c/div\x3e");return e+"\x3c/div\x3e"},handleToolTip:function(a,c,d,h,b){var e='\x3cdiv class\x3d"tooltip-div"\x3e';
Array.isArray(a)||(a=[a]);this._isVaildValue(a[0].name)&&(e+='\x3cdiv class\x3d"tr"\x3e'+a[0].name+"\x3c/div\x3e");a.forEach(function(f){e="radar"!==f.seriesType?e+this.generateToolTip(f,c,d,h,b):e+this._handleRadarTooltip(f,d,h,b)}.bind(this));return e+="\x3c/div\x3e"},_handleRadarTooltip:function(a,c,d,h){var b="";(a.value||[]).forEach(function(e,f){b+=this.generateToolTip(a,e,c,d,h[f])}.bind(this));return b},_isVaildValue:function(a){return"%00-"===encodeURI(a)?!1:this._isNotZeroBoolean(a)},_isNotZeroBoolean:function(a){return 0===
a?!0:!!a},settingAdvanceOption:function(a,c){c.advanceOption&&("object"===typeof c.advanceOption?z.mixin(a,c.advanceOption):"function"===typeof c.advanceOption&&c.advanceOption(a));return a},settingColor:function(a,c){c.color&&c.color[0]&&(a.color=c.color);return a},settingToolTip:function(a,c){var d=c.type;a.tooltip||(a.tooltip={});d={confine:!0,trigger:"radar"===d||"pie"===d?"item":"axis",axisPointer:"pie"!==d?{type:"line"===d?"cross":"shadow",snap:!0}:{type:""}};c=c.tooltip||d;a.tooltip.confine=
c.confine?c.confine:d.confine;a.tooltip.trigger=c.trigger?c.trigger:d.trigger;a.tooltip.axisPointer=c.axisPointer?c.axisPointer:d.axisPointer;return a},settingDataZoom:function(a,c,d,h){return this.isAxisChart(c)&&c.series&&c.series.length?c.dataZoom&&c.dataZoom.length?a=this._settingDataZoom(c,a,d,h):(a.dataZoom=[],a):a},_settingDataZoom:function(a,c,d,h){if(!this.chart)return c;var b=this.chart.getWidth(),e=a.series[0].data.length,f=a.series.length;e=a.stack?e:e*f;if(!e||!b)return c.dataZoom=[],
c;b="bar"!==a.type?window.isRTL?d.left:b-d.left-c.grid.right:d.top;var m=20>b/e;d=a.dataZoomOption&&a.dataZoomOption.mode||"AUTO";var p=0,t=100;h?(p=Number(h[0]),t=Number(h[1])):"AUTO"===d&&(p=0,t=b/(20*e),t=parseFloat(100*t,10).toFixed(3),t=100<t?100:t,t=0===t?.01:t);h=[];var v="bar"===a.type?"yAxisIndex":"xAxisIndex";h=a.dataZoom.map(z.hitch(this,function(x){x={type:x,show:m};x[v]=[0];x.start=p;x.end=t;x.showDataShadow=!1;x.realtime=!1;return x}));c.dataZoom=h;return c},mockChartDataWhenNoData:function(a){a&&
Array.isArray(a.labels)&&0===a.labels.length&&a.labels.push("");a&&Array.isArray(a.series)&&0<a.series.length&&a.series.forEach(function(c){c&&Array.isArray(c.data)&&0===c.data.length&&c.data.push(0)});return a},settingDefaultGrid:function(a){a.grid=z.clone(this.defultGrid);return a},settingGrid:function(a,c){if(!this.isAxisChart(c))return a;a.grid.containLabel=c.yAxis&&c.yAxis.show;var d=c.layout;if(!d||!d.length)return a;var h=0,b=0,e=0,f=0,m=1;d.forEach(function(x){x=x.layout&&x.layout.position;
if("xAixsName"===name||"yAixsName"===name)m=.7;"t"===x?h+=m:"b"===x?b+=m:"l"===x?e+=m:"r"===x&&(f+=m)}.bind(this));var p=z.clone(this.defultGrid);d=p.top||0;var t=p.bottom||0,v=p.left||0;p=p.right||0;d+=this.unitDistance*h;t+=this.unitDistance*b;v+=this.unitDistance*e;p+=this.unitDistance*f;c.yAxis&&!c.yAxis.show&&(t+=this.unitDistance);a.grid.top=d;a.grid.bottom=t;a.grid.left=v;a.grid.right=p;a=this._settingxAxisNameGap(a,c);return a=this._settingGridForMarkName(a,c)},_settingGridForMarkName:function(a,
c){var d=c.markLine,h=c.markArea,b=[],e=[];d&&d.data&&d.data.length&&d.data.forEach(function(f){this._hasEndPosName(f)&&b.push(f.name+"");this._hasStartPosName(f)&&e.push(f.name+"")}.bind(this));h&&h.data&&h.data.length&&h.data.forEach(function(f){f=f[0];this._hasOutRightAxisName(c.type,f)&&b.push(f.name+"");this._hasOutLeftAxisName(c.type,f)&&e.push(f.name+"")}.bind(this));if(!b.length&&!e.length)return a;if("bar"===c.type)return a.grid.top+=15,a;d=this._getyAxisLabelWidth(c);h=this._getMaxLengthString(b);
h=this.getTextWidth(h,"normal 12px sans-serif");window.isRTL?a.grid.left+=h:a.grid.right+=h;h=this._getMaxLengthString(e);h=this.getTextWidth(h,"normal 12px sans-serif");h-=d;if(0>=h)return a;h+=10;window.isRTL?a.grid.right=h:a.grid.left=h;return a},_getyAxisLabelWidth:function(a){var c=a&&a.yAxis;return c&&c.show?(a=this._getMaxData(a))||0===a?this.getTextWidth(a,"normal "+(c&&c.textStyle&&c.textStyle.fontSize||12)+"px sans-serif"):0:0},_getMaxData:function(a){if((a=a.series)&&a.length)return a=
a.map(function(c){if((c=c.data)&&c.length)return c.map(function(d){if("number"===typeof d)var h=d;else d&&"undefined"!==typeof d.value&&(h=d.value);return h=parseInt(h,10)})}).map(function(c){if(c.length)return Math.max.apply(Math,c)}),a.length&&Math.max.apply(Math,a)},_getMaxLengthString:function(a){return a.sort(function(c,d){c=this.getTextWidth(c);d=this.getTextWidth(d);return d-c}.bind(this))[0]},_hasOutRightAxisName:function(a,c){var d=c.name||0===c.name;c=c.label;var h=window.isRTL?"eft":"ight";
a=c&&c.position&&-1<c.position.indexOf("bar"===a?"op":h);c=c&&c.position&&-1<c.position.indexOf("inside");return d&&a&&!c},_hasOutLeftAxisName:function(a,c){var d=c.name||0===c.name;c=c.label;var h=window.isRTL?"ight":"eft";a=c&&c.position&&-1<c.position.indexOf("bar"===a?"op":h);c=c&&c.position&&-1<c.position.indexOf("inside");return d&&a&&!c},_hasEndPosName:function(a){var c=a.label;c=!c||!c.position||"end"===c.position;return(a.name||0===a.name)&&c},_hasStartPosName:function(a){var c=a.label;c=
!c||!c.position||"start"===c.position;return(a.name||0===a.name)&&c},_settingxAxisNameGap:function(a,c){if(!this.isAxisChart(c)||!a.xAxis)return a;c=this.getHeightByFontSize(c.xAxis&&c.xAxis.textStyle&&c.xAxis.textStyle.fontSize||12);a.xAxis.nameGap=10+c;return a},calcDefaultLayout:function(a){if(this.isBaseChartType(a)){var c=a.legend,d=a.xAxis,h=null;a=a.type;"pie"!==a&&(h="bar"!==a?{name:"dataZoom",layout:{position:"t",inner:!1}}:{name:"dataZoom",layout:{position:window.isRTL?"l":"r",inner:!1}});
a=null;c&&c.show&&(a={name:"legend",layout:{position:"b",inner:!1}});c=null;d&&d.show&&"undefined"!==typeof d.name&&(c={name:"xAxisName",layout:{position:"b",inner:!1}},a&&(c.layout.inner=!0));d=[];a&&d.push(a);h&&d.push(h);c&&d.push(c);return d.length&&d}},settingRenderOption:function(a,c){if("curved"===c.shape)return a.animationThreshold=99999999,a.hoverLayerThreshold=99999,a.progressiveThreshold=99999,a;a.hoverLayerThreshold=500;a.progressiveThreshold=500;a.progressive=100;a.animationThreshold=
500;return a},settingBackgroundColor:function(a,c){c.backgroundColor&&(a.backgroundColor=c.backgroundColor);return a},settingAxisChartAxis:function(a,c){var d=c.xAxis,h=c.yAxis,b={nameLocation:"center"},e={nameLocation:"center"};"column"===c.type||"line"===c.type&&c.labels?(b.data=c.labels,b.type="category",e.type="value"):"bar"===c.type&&c.labels&&(e.data=c.labels,e.type="category",b.type="value");if(d){b.name=d.name;b.show=!!d.show;b.axisLabel||(b.axisLabel={});d.textStyle&&(b.axisLabel=d.textStyle);
d.nameTextStyle&&(b.nameTextStyle=d.nameTextStyle);var f=d.format;f&&("int"===f.type?b.minInterval=1:"float"===f.type&&(b.minInterval=0),"undefined"!==typeof f.digitSeparator&&(b.axisLabel.formatter=function(p){return this.localizeNumberForDigitSeparator(p,f.digitSeparator)}.bind(this)))}if(h){e.show=!!h.show;h.textStyle&&(e.axisLabel=h.textStyle);var m=h.format;m&&("int"===m.type?e.minInterval=1:"float"===m.type&&(e.minInterval=0),"undefined"!==typeof m.digitSeparator&&(e.axisLabel.formatter=function(p){return this.localizeNumberForDigitSeparator(p,
m.digitSeparator)}.bind(this)))}a.xAxis=b;a.yAxis=e;return a},settingRadar:function(a,c){if("radar"!==c.type)return a;a.radar={nameGap:6,radius:"70%"};a.radar.axisLabel={show:!0,formatter:function(){}};c.radarShape&&(a.radar.shape=c.radarShape);c.indicator?(this._handleRadarIndicator(c),a.radar.indicator=c.indicator):console.error("No radar indicator");return a},_handleRadarIndicator:function(a){var c=a.series[0].data,d=[];a.indicator.forEach(function(h,b){if("undefined"!==typeof h.max)return h;d=
c.map(function(f){d.push(f.value[b])});var e=Math.max.apply(Math,d);h.max=e})},settingArea:function(a,c){if("line"!==c.type||!c.area)return a;a.series=a.series.map(function(d){d.areaStyle||(d.areaStyle={});"undefined"===typeof d.areaStyle.opacity&&(d.areaStyle.opacity=.4);d.sthisoth=!0;d.smoothMonotone="x";return d});return a},_mockNegativeValue:function(a){return a&&a[0]&&a[0].data?a.map(function(c){c.data=c.data.map(function(d,h){var b=0===h%2;d&&"undefined"!==typeof d.value?(h=d.value,h=Number(h),
d.value=b?-h:h):(h=Number(d),d=-(b?-h:h));return d});return c}):a},hasNegativeValue:function(a){if((a=a.series)&&a[0]&&a[0].data)return a.some(function(c){return c.data.some(function(d){d=d&&"undefined"!==typeof d.value?d.value:d;d=Number(d);return"number"===typeof d&&0>d})})},allNegativeValue:function(a){return(a=a.series)&&a[0]&&a[0].data?a.every(function(c){return c.data.every(function(d){d=d&&d.value?d.value:d;d=Number(d);return"number"===typeof d&&0>d})}):!1},settingStack:function(a,c){c=this._stackForPercent(c);
if("percent"===c.stack){var d=this.hasNegativeValue(c),h=this.allNegativeValue(c),b=0,e=1;d&&(b=-1,h&&(e=0));"bar"===c.type?(a.xAxis.max=e,a.xAxis.min=b):(a.yAxis.max=e,a.yAxis.min=b)}c.stack&&(a.series=a.series.map(function(f){f.stack="stack";return f}));return a},_stackForPercent:function(a){if("percent"!==a.stack)return a;var c=[];a.series.forEach(function(b){z.clone(b.data).forEach(function(e,f){c[f]||(c[f]=[]);(e=e&&"undefined"!==typeof e.value?e.value:e)||(e=0);c[f].push(e)})});var d=[];c.forEach(function(b,
e){d[e]||(d[e]=0);b.forEach(function(f){d[e]+=Math.abs(f)})});var h=c.map(function(b,e){return b.map(function(f){return 0===d[e]?null:0<=f?Math.abs(f)/d[e]:-Math.abs(f)/d[e]})});a.series=a.series.map(function(b,e){var f=z.clone(b.data);f=f.map(function(m,p){if(!m)return m;"undefined"!==typeof m.value?m.value=h[p][e]:m=h[p][e];return m});b.data=f;return b});return a},settingLegend:function(a,c){var d=c.legend;if(!d)return a.legend={show:!1},a;var h={show:d.show,type:"scroll",itemHeight:11,orient:"horizontal",
pageButtonPosition:"end",pageTextStyle:{color:"#939393"}};d.textStyle&&(h.textStyle=d.textStyle);h.formatter=function(b){b=b||"";return 25<b.length?g.format.truncateText(b,140,null,"\u2026"):b};h.tooltip={show:!0,confine:!1,formatter:function(b){b=b&&b.name||"";if(!(25>=b.length))return b}};a.legend=h;return a=this._handleLegendRTL(a,c)},_handleLegendRTL:function(a,c){if(!c.legend)return a;c={};window.isRTL?(c.x="right",c.pageButtonPosition="start"):(c.x="left",c.pageButtonPosition="end");a.legend=
z.mixin(a.legend,c);return a},settingScale:function(a,c){if(!c.scale)return a;if("bar"===c.type)a.xAxis.scale=!0;else if("line"===c.type||"column"===c.type)a.yAxis.scale=!0;return a},pieChartAvoidLegendLabelOverLap:function(a,c){if("pie"!==c.type)return a;var d=c.dataLabel&&c.dataLabel.show?.75:.85;c.legend&&c.legend.show&&(d-=.12);a.series[0].radius[1]=100*d+"%";return a},settingChartLayout:function(a,c){if(!this.isBaseChartType(c))return a;(c=c.layout)&&c.length&&c.forEach(function(d){this._assigneeLayout(a,
d)}.bind(this));return a},avoidAdjoiningColorSameForPie:function(a,c){if("pie"!==c.type||!a.color||2>=a.color.length)return a;a.series&&a.series[0]&&a.series.forEach(z.hitch(this,function(d){var h=d.data.length;0===(h-1)%a.color.length&&(d=d.data[h-1],d.itemStyle||(d.itemStyle={}),d.itemStyle.color||(d.itemStyle.color=a.color[1]))}));return a},_assigneeLayout:function(a,c){var d=c.name;if("xAxisName"!==d&&"yAxisName"!==d){var h=c.layout;c=this._getOperateObjByProperty(a,d);if(!c)return a;var b=this._getSubPosition(h&&
h.subPosition),e=h&&h.position;h=h&&h.inner;var f={};"l"===e?f.left=h?this.unitDistance+this.defultGrid.left-5:this.defultGrid.left-5:"r"===e?f.right=h?this.unitDistance+this.defultGrid.right-5:this.defultGrid.right-5:"t"===e?f.top=h?this.defultGrid.top+this.unitDistance-5:this.defultGrid.top-5:"b"===e&&(f.bottom=h?this.unitDistance+this.defultGrid.bottom-5:this.defultGrid.bottom-5);z.mixin(c,f);z.mixin(c,b);this._specialLegend(c,d,e);this._specialSliderDataZoom(c,d,e);return a}},_getSubPosition:function(a){if("l"===
a)return{left:this.defultGrid.left-5,right:"auto"};if("r"===a)return{right:this.defultGrid.right-5,left:"auto"};if("t"===a)return{top:this.defultGrid.top-5,bottom:"auto"};if("b"===a)return{bottom:this.defultGrid.bottom-5,top:"auto"}},_specialLegend:function(a,c,d){"legend"===c&&(a.orient="l"===d||"r"===d?"vertical":"horizontal")},_specialSliderDataZoom:function(a,c,d){"dataZoom"===c&&("l"===d||"r"===d?(a.orient="vertical",a.width=15):(a.orient="horizontal",a.height=15))},_getOperateObjByProperty:function(a,
c){if("dataZoom"===c)return this._getSliderDataZoom(a);if("legend"===c)return a.legend},_getSliderDataZoom:function(a){var c=null;(a=a.dataZoom)&&a.length&&a.some(function(d){return"slider"===d.type?(c=d,!0):!1});return c},settingAxisSeries:function(a,c){a=this._setTypeToSeries(a,c);a.series=c.series;return a},settingMarks:function(a,c){a=this.settingMarkLine(a,c);return a=this.settingMarkArea(a,c)},settingMarkLine:function(a,c){(c=c.markLine)&&c.data&&(c.silent=!0,c.data.forEach(function(d){d.label||
(d.label={show:!1,position:"end"});"undefined"!==typeof d.name&&(d.label.show=!0,d.label.formatter=d.name)}),a.series[0].markLine=z.clone(c));return a},settingMarkArea:function(a,c){c.markArea&&(this._handleMarkAreaRTL(c.markArea),c.markArea.silent=!0,a.series[0].markArea=c.markArea);return a},_handleMarkAreaRTL:function(a){window.isRTL&&a&&a.data&&a.data.length&&a.data.forEach(function(c){var d=(c=c&&c[0]&&c[0].label)&&c.position;d&&("left"===d?d="right":"right"===d?d="left":"insideLeft"===d?d="insideRight":
"insideRight"===d&&(d="insideLeft"),c.position=d)})},_settingSeriesDataLabel:function(a,c){c=c.dataLabel;if(!c)return a;var d={};d.show=!!c.show;"undefined"!==typeof c.textStyle&&(d.textStyle=c.textStyle);a.series.forEach(function(h){h.label=d});return a},settingRadarSeries:function(a,c){a=this._setTypeToSeries(a,c);a.series=c.series.map(z.hitch(this,function(d){d.data=this._handleSeriesDataForPieLikeType(d,c);return d=this._settingRaderSerie(d,c)}));return a},_settingRaderSerie:function(a,c){if("radar"!==
a.type)return a;var d=c.indicator.map(function(h){return h.name});a.tooltip={};a.tooltip.formatter=function(h){return this.handleToolTip(h,null,!1,!1,d)};return a},settingFunnelSeries:function(a,c){a=this._setTypeToSeries(a,c);a.series=c.series.map(z.hitch(this,function(d){d.data=this._handleSeriesDataForPieLikeType(d,c);return d=this._settingFunnelSerie(d,c)}));return a},_settingFunnelSerie:function(a,c){if("funnel"!==a.type)return a;a.minSize="0%";a.maxSize="100%";a.min=c.min.value;a.max=c.max.value;
a.sort=c.funnelSort||"descending";return a},settingPieSeries:function(a,c){a=this._setTypeToSeries(a,c);a.series=c.series.map(z.hitch(this,function(d){d.data=this._handleSeriesDataForPieLikeType(d,c);return d=this._settingPieSerie(d,c)}));return a},_settingPieSerie:function(a,c){if("pie"!==a.type)return a;var d=c.dataLabel&&c.dataLabel.show;a.selectedMode="single";a.selectedOffset=10;a.hoverOffset=5;a.radius=[0,"70%"];a.labelLine={show:!0,length:5,length2:5};a.labelLine.show="undefined"===typeof c.labelLine?
!0:c.labelLine;d||(a.labelLine.show=!1);"number"===typeof c.innerRadius&&(0>c.innerRadius&&(c.innerRadius=0),60<c.innerRadius&&(c.innerRadius=60),a.radius[0]=c.innerRadius+"%");"rose"===c.pieMode&&(a.roseType=c.roseType||"radius");return a=this._absoluteValueForPieChart(a)},_absoluteValueForPieChart:function(a){if(!a||!a.data||!a.data[0])return a;a.data=a.data.map(function(c){"number"===typeof c?c=Math.abs(c):"object"===typeof c&&"number"===typeof c.value&&(c.value=Math.abs(c.value));return c});return a},
_handleSeriesDataForPieLikeType:function(a,c){return a.data.map(z.hitch(this,function(d,h){var b={};d||"number"===typeof d?(b.value="undefined"!==typeof d.value?d.value:d,d.itemStyle&&(b.itemStyle||(b.itemStyle={}),b.itemStyle=z.mixin(b.itemStyle,d.itemStyle))):b.value=d;b.name=c.labels[h]||"";return b}))},_setTypeToSeries:function(a,c){var d=c.series;if(!d)return a;d.forEach(function(h){h.type||(h.type=c.type);h.type="column"===c.type?"bar":c.type});return a},splitAxisStackColumn:function(a,c){var d=
a.series;if(!d||!d.length)return a;var h;d.some(function(f){f=f.data;if(!f||!f.length)return!0;f.some(function(m){if(m&&m.itemStyle&&"undefined"!==typeof m.itemStyle.color&&"line"!==c.type)return h=c.stack?"stack":"single",!0;h=!1})});var b=0;"single"===h?b=.1:"stack"===h&&(b=1);var e="";"stack"===h&&(e="#fff",c.backgroundColor&&"transparent"!==c.backgroundColor&&(e=c.backgroundColor));a.series=a.series.map(function(f){if("bar"===f.type||"pie"===f.type)f.itemStyle||(f.itemStyle={}),f.emphasis||(f.emphasis=
{}),f.itemStyle.borderWidth=b,f.emphasis.borderWidth=b,e?(f.itemStyle.borderColor=e,f.emphasis.borderColor=e):(f.itemStyle.borderColor="transparent",f.emphasis.borderColor="transparent");return f});return a},preProcessConfig:function(a,c){c.min=c.min||{value:0,format:{digitSeparator:!0}};c.max=c.max||{value:1E3,format:{digitSeparator:!0}};return a},settingLabelColor:function(a,c){var d="#000";c.gaugeOption&&c.gaugeOption.labelColor&&(d=c.gaugeOption.labelColor);"curved"===c.shape?a.series[0].axisLabel.textStyle.color=
d:"horizontal"===c.shape?a.xAxis.axisLabel.textStyle.color=d:"vertical"===c.shape&&(a.yAxis.axisLabel.textStyle.color=d);return a},settingValueStyle:function(a,c){var d=c.gaugeOption&&c.gaugeOption.valueStyle,h=d&&d.textStyle;d=d&&d.formatter;h&&z.mixin("curved"===c.shape?a.series[0].detail.textStyle:a.series[1].data[0].label.textStyle,h);d&&("curved"===c.shape?a.series[0].detail.formatter=d:a.series[1].data[0].label.formatter=d);return a},settingGaugeColumnColor:function(a,c){var d=c.gaugeOption&&
c.gaugeOption.bgColor;c=c.gaugeOption&&c.gaugeOption.columnColor;d&&(a.series[0].itemStyle.color=d);c&&(a.series[1].data[0].itemStyle.color=c);return a},initHorizontalOption:function(a){z.mixin(a,this.horizontal);return a},setHorizontalGrid:function(a){a.grid={top:"middle",height:90,left:"10%",right:"10%",containLabel:!0};return a},settingHorizontalAxis:function(a,c){a.xAxis.max=c.max.value;a.xAxis.min=c.min.value;a.xAxis.scale=!0;return a},settingHorizontalSeries:function(a,c){var d=a.series;if(!d||
!d.length)return a;var h=d[1];d[0].data[0]=c.max.value;a=this._handleValueDisplayForColumnGauge(a,c);h.data[0].name=c.labels&&c.labels[0]||"";h.name=c.series[0].name||"";return a},settingHorizontalGaugeRTL:function(a){if(!window.isRTL)return a;a.series[1].label.offset=[-20,0];a.xAxis.inverse=!0;a.yAxis.position="right";return a},initVerticalOption:function(a){z.mixin(a,this.vertical);return a},setVerticalGrid:function(a){a.grid={left:"middle",width:60,top:"10%",bottom:"10%",containLabel:!0};a.grid.left=
this._getGridLeftOfVerticalGauge();return a},settingVerticalAxis:function(a,c){a.yAxis.max=c.max.value;a.yAxis.min=c.min.value;return a},settingVerticalSeries:function(a,c){var d=a.series;if(!d||!d.length)return a;var h=d[1];d[0].data[0]=c.max.value;a=this._handleValueDisplayForColumnGauge(a,c);h.data[0].name=c.labels&&c.labels[0]||"";h.name=c.series[0].name||"";return a},settingVerticalGaugeRTL:function(a,c){if(!window.isRTL)return a;var d=(c.series[0].data[0]+"").length-1;c.gaugeOption&&c.gaugeOption.valueStyle&&
"undefined"!==typeof c.gaugeOption.valueStyle.decimalPlaces&&(d+=c.gaugeOption.valueStyle.decimalPlaces);a.series[1].label.offset=[-17-9*d,-15];a.xAxis.inverse=!0;a.yAxis.position="right";return a},initCurvedOption:function(a){a.series=[this.curved];return a},settingCurvedTooltip:function(a){a.tooltip.formatter=function(c){return this.handleToolTip(c,null,!1)}.bind(this);return a},settingCurvedSeries:function(a,c){var d=a.series&&a.series[0];if(!d)return a;var h=c.max.value,b=c.min.value;d.min=b;
d.max=h;var e=c.series&&c.series[0]&&c.series[0].data&&c.series[0].data[0];e=e||0;d.data[0].value=e;h=e<=b?0:e>=h?1:parseFloat((e-b)/(h-b)).toFixed(2);d.axisLine.lineStyle.color[0][0]=h;if(h=c.labels&&c.labels[0])d.data[0].name=h;d.name=c.series[0]&&c.series[0].name||"";d.axisLine.lineStyle.width=30;a.series=[d];return a},settingCurvedGaugeColor:function(a,c){var d=a.series&&a.series[0];c.gaugeOption&&(c.gaugeOption.bgColor&&(d.axisLine.lineStyle.color[1][1]=c.gaugeOption.bgColor),c.gaugeOption.columnColor&&
(d.axisLine.lineStyle.color[0][1]=c.gaugeOption.columnColor,d.itemStyle.color=c.gaugeOption.columnColor));return a},settingCurvedTargets:function(a,c){if(!a.series)return a;a.series[0].splitNumber=1E3;a.series[0].axisTick.splitNumber=1;a.series[0].axisTick.show=!1;var d=this._getTargetValues(c);return a=this._showTargetsForCurved(a,c,d)},createTargetGraphic:function(a){var c=a.shape,d=[];if("vertical"!==c&&"horizontal"!==c)return d;var h="#000";a.gaugeOption&&a.gaugeOption.labelColor&&(h=a.gaugeOption.labelColor);
var b,e=a.min.value,f=a.max.value;a=this._getTargetValues(a);var m=a.range;a.values.forEach(function(p){if(!(p.value>f||p.value<e)){b=this._calcGraphicPosition(p.value,c);var t=b.top,v=b.textLeft,x=this._createGraphic(b.graphicLeft,t,p,h,"image",c);p=this._createGraphic(v,t,p,h,"text",c);d.push(x);d.push(p)}}.bind(this));m.forEach(function(p){p.value>f||p.value<e||(b=this._calcGraphicPosition(p.value,c),p=this._createGraphic(b.textLeft,b.top,p,h,"text",c),d.push(p))}.bind(this));return d},_calcGraphicPosition:function(a,
c){if("vertical"===c){var d=this.chart.convertToPixel({xAxisIndex:0},0);d=parseFloat(d,10).toFixed(2);d=Number(d);window.isRTL&&(d+=40);var h=d-26;var b=window.isRTL?h+11:h-11-6*(a.toString().length-1);d=this._getyAxisValueTop(a);d-=2}else"horizontal"===c&&(d=this.chart.convertToPixel({yAxisIndex:0},0),d=parseInt(d,10),d=Number(d)+16,h=this._getxAxisValueLeft(a),a=6*(a.toString().length-2),b=h,0<a&&(b=h-a));return{top:d,graphicLeft:h,textLeft:b}},_createGraphic:function(a,c,d,h,b,e){var f=this.horIconUrl;
"vertical"===e&&(f=window.isRTL?this.verIconUrlRTL:this.verIconUrl);var m=null;"image"===b?m={z:10,type:"image",$action:"merge",id:"wab_gid_image-"+q.getRandomString(),left:a,style:{image:f,width:10,height:10},silent:!0,top:c}:"text"===b&&(d=this.localizeNumberForDigitSeparator(d.value,d.format&&d.format.digitSeparator),m={z:10,type:"text",$action:"merge",id:"wab_gid_text-"+q.getRandomString(),left:a,style:{text:d,fill:h,font:"normal 11px sans-serif"},silent:!0});"text"===b&&(m.top="vertical"===e?
c-2:c+11);return m},updateGridForVerticalGauge:function(a){if("gauge"===a.type&&"vertical"===a.shape)return{left:this._getGridLeftOfVerticalGauge(),width:60,top:"10%",bottom:"10%"}},_getTargetValues:function(a){var c=a.gaugeOption&&a.gaugeOption.showTargetValueLabel,d=a.gaugeOption&&a.gaugeOption.showDataRangeLabel,h=a.gaugeOption&&a.gaugeOption.targetValue,b=a.min;a=a.max;var e={values:[],range:[]};h&&c&&h.forEach(function(f){e.values.push(f)});d&&(0>e.values.indexOf(b.value)&&(e.range[0]=b),0>e.values.indexOf(a.value)&&
(e.range[1]=a));return e},_showTargetsForCurved:function(a,c,d){var h=d.values.concat(d.range),b=(c.max.value-c.min.value)/1E3;h.sort(function(e,f){return e.value-f.value});a.series[0].axisLabel.formatter=z.hitch(this,function(e){var f,m;h.forEach(function(p){"undefined"===typeof f&&p.value>=e&&p.value<e+b&&(f=p.value,m=p.format)});"number"===typeof f&&(f=this.localizeNumberForDigitSeparator(f,m&&m.digitSeparator));return f});return a},_handleValueDisplayForColumnGauge:function(a,c){var d=c.min.value,
h=c.max.value;var b=c.series[0].data[0];c=b>=h?h:b<=d?d:b;a.tooltip.formatter=function(e){return this.handleToolTip(e,b,!1)}.bind(this);a.series[1].data[0].value=c;return a},_getGridLeftOfVerticalGauge:function(){return this.chart.getWidth()/2-30},_getxAxisValueLeft:function(a){a=this.chart.convertToPixel({xAxisIndex:0},a);return parseFloat(a,10)-4},_getyAxisValueTop:function(a){a=this.chart.convertToPixel({yAxisIndex:0},a);return parseFloat(a,10)}})})},"jimu/dijit/_Gauge":function(){define(["dojo/_base/declare"],
function(G){return G([],{constructor:function(q){this.chart=q.chart;this.chartUtils=q.chartUtils},produceOption:function(q,C){q=this.chartUtils.preProcessConfig(q,C);"curved"===C.shape?q=this.setCurvedGaugeOption(q,C):"vertical"===C.shape?q=this.setVerticalGaugeOption(q,C):"horizontal"===C.shape?q=this.setHorizontalGaugeOption(q,C):console.error("invaild gauge shape");q=this.chartUtils.settingLabelColor(q,C);return q=this.chartUtils.settingValueStyle(q,C)},setCurvedGaugeOption:function(q,C){q=this.chartUtils.initCurvedOption(q);
q=this.chartUtils.settingCurvedSeries(q,C);q=this.chartUtils.settingCurvedTooltip(q,C);q=this.chartUtils.settingCurvedGaugeColor(q,C);return q=this.chartUtils.settingCurvedTargets(q,C)},setVerticalGaugeOption:function(q,C){q=this.chartUtils.initVerticalOption(q,this.vertical);q=this.chartUtils.setVerticalGrid(q);q=this.chartUtils.settingVerticalAxis(q,C);q=this.chartUtils.settingVerticalSeries(q,C);q=this.chartUtils.settingGaugeColumnColor(q,C);return q=this.chartUtils.settingVerticalGaugeRTL(q,C)},
setHorizontalGaugeOption:function(q,C){q=this.chartUtils.initHorizontalOption(q,this.horizontal);q=this.chartUtils.setHorizontalGrid(q);q=this.chartUtils.settingHorizontalAxis(q,C);q=this.chartUtils.settingHorizontalSeries(q,C);q=this.chartUtils.settingGaugeColumnColor(q,C);return q=this.chartUtils.settingHorizontalGaugeRTL(q,C)},resetGraphic:function(q){if("horizontal"===q.shape||"vertical"===q.shape)q=this.chartUtils.createTargetGraphic(q),this.clearGraphic(),this.chart.setOption({graphic:q}),this.cacheGraphic=
null,this.cacheGraphic=q},clearGraphic:function(){this.cacheGraphic&&(this.cacheGraphic.forEach(function(q){q.$action="remove"}),this.chart.setOption({graphic:this.cacheGraphic}))},resetGrid:function(q){("horizontal"===q.shape||"vertical"===q.shape)&&(q=this.chartUtils.updateGridForVerticalGauge(q))&&this.chart.setOption({grid:q})}})})},"jimu/dijit/_ChartOptionFactory":function(){define(["dojo/_base/declare"],function(G){return G([],{constructor:function(q){this.chart=q.chart;this.gauge=q.gauge;this.chartUtils=
q.chartUtils},produceOption:function(q){if(q&&q.type){var C=q.type,z={};z=this.setCommonOption(z,q);this.chartUtils.isAxisChart(q)?z=this.setAxisChartOption(z,q):"pie"===C?z=this.setPieChartOption(z,q):"funnel"===C?z=this.setFunnelChartOption(z,q):"radar"===C?z=this.setRadarChartOption(z,q):q.shape&&(z=this.setGaugeChartOption(z,q));return z=this.chartUtils.settingAdvanceOption(z,q)}},setPieChartOption:function(q,C){q=this.chartUtils.settingPieSeries(q,C);q=this.chartUtils._settingSeriesDataLabel(q,
C);q=this.chartUtils.pieChartAvoidLegendLabelOverLap(q,C);return q=this.chartUtils.avoidAdjoiningColorSameForPie(q,C)},setGaugeChartOption:function(q,C){return q=this.gauge.produceOption(q,C)},setFunnelChartOption:function(q,C){return q=this.chartUtils.settingFunnelSeries(q,C)},setRadarChartOption:function(q,C){q=this.chartUtils.settingRadar(q,C);return q=this.chartUtils.settingRadarSeries(q,C)},setAxisChartOption:function(q,C){q=this.chartUtils.settingDefaultGrid(q,C);q=this.chartUtils.settingAxisChartAxis(q,
C);q=this.chartUtils.settingAxisSeries(q,C);q=this.chartUtils.settingMarks(q,C);q=this.chartUtils._settingSeriesDataLabel(q,C);q=this.chartUtils.splitAxisStackColumn(q,C);q=this.chartUtils.settingStack(q,C);q=this.chartUtils.settingArea(q,C);return q=this.chartUtils.settingScale(q,C)},setCommonOption:function(q,C){this.chart._theme||(this.chart._theme={});q=this.chartUtils.settingRenderOption(q,C);q=this.chartUtils.settingBackgroundColor(q,C);q=this.chartUtils.settingColor(q,C);q=this.chartUtils.settingToolTip(q,
C);return q=this.chartUtils.settingLegend(q,C)}})})},"libs/echarts/light":function(){(function(G,q){"function"===typeof define&&define.amd?define(["exports","./echarts"],q):"object"===typeof exports&&"string"!==typeof exports.nodeName?q(exports,require("./echarts")):q({},G.echarts)})(this,function(G,q){q?q.registerTheme("light",{color:"#2ec7c9 #b6a2de #5ab1ef #ffb980 #d87a80 #8d98b3 #e5cf0d #97b552 #95706d #dc69aa #07a2a4 #9a7fd1 #588dd5 #f5994e #c05050 #59678c #c9ab00 #7eb00a #6f5553 #c14089".split(" "),
textStyle:{},title:{textStyle:{color:"#008acd"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"6",symbol:"circle",smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},itemStyle:{normal:{color:"#686868"},emphasis:{color:"#686868"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},
axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},
toolbox:{iconStyle:{normal:{borderColor:"#2ec7c9"},emphasis:{borderColor:"#18a4a6"}}},legend:{textStyle:{color:"#333333"}},tooltip:{axisPointer:{lineStyle:{color:"#008acd",width:"1"},crossStyle:{color:"#008acd",width:"1"}}},dataZoom:{backgroundColor:"#F4F4F4",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#E0E0E0",handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",
handleColor:"#777777",handleSize:"100%",borderColor:"#F4F4F4",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"libs/echarts/dark":function(){(function(G,q){"function"===typeof define&&define.amd?define(["exports","./echarts"],q):"object"===typeof exports&&"string"!==typeof exports.nodeName?q(exports,require("./echarts")):q({},G.echarts)})(this,function(G,q){q?q.registerTheme("dark",{color:"#fc97af #87f7cf #f7f494 #72ccff #f7c5a0 #d4a4eb #d2f5a6 #76f2f2".split(" "),
textStyle:{},title:{textStyle:{color:"#ffffff"},subtextStyle:{color:"#dddddd"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#1E5F6F"]]}},itemStyle:{normal:{color:"#D9D9D9"},emphasis:{color:"#D9D9D9"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},
axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)",
"rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},tooltip:{axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},dataZoom:{backgroundColor:"#525252",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#737373",handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",
handleColor:"#BDBDBD",handleSize:"100%",borderColor:"#525252",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"jimu/dijit/_StatisticsChartSettings":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/_base/Color dojo/on dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_StatisticsChartSettings.html dijit/ColorPalette jimu/dijit/CheckBox".split(" "),
function(G,q,C,z,g,n,l,a,c,d,h,b,e,f){return G([c,d,h,a],{baseClass:"jimu-dijit-statistics-chart-settings",templateString:b,colors:{c1:"#5d9cd3 #eb7b3a #a5a5a5 #febf29 #4673c2 #72ad4c".split(" "),c2:"#5d9cd3 #a5a5a5 #4673c2 #285f8f #636363 #274577".split(" "),c3:"#eb7b3a #febf29 #72ad4c #9c4618 #987214 44682e".split(" "),c4:"#72ad4c #4673c2 #febf29 #44682e #274577 #987214".split(" "),g1:["#43729b","#c4d5ea"],g2:["#ac5928","#f5ccbf"],g3:["#787878","#d8d8d8"],g4:["#bb8b1b","#fee1be"],g5:["#30538d",
"#c0c9e3"],g6:["#517e36","#c9dbc2"],g7:["#c4d5ea","#43729b"],g8:["#f5ccbf","#ac5928"],g9:["#d8d8d8","#787878"],g10:["#fee1be","#bb8b1b"],g11:["#c0c9e3","#30538d"],g12:["#c9dbc2","#517e36"]},palette:null,defaultSingleColor:"#5d9cd3",multiColorValue:"c1",imagesUrl:window.require.toUrl("jimu/css/images/chart/"),isInWidget:!1,type:"",singleColor:!1,config:null,postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart},postCreate:function(){this.inherited(arguments);this._initSelf();this.isInWidget&&
this._bindEvents();this.own(l(this.multiColorSection,"click",q.hitch(this,function(m){m=m.target||m.srcElement;if(z.hasClass(m,"multi-color")&&!z.hasClass(m,"selected")){var p=this.multiColorValue;this._selectMultiColorDiv(m);p!==m.colorValue&&this.isInWidget&&this._configChange()}})))},_initSelf:function(){this.config=q.clone(this.config);this.cbxAxisX=new f({label:this.nls.horizontalAxis});this.cbxAxisX.placeAt(this.divAxisX);this.cbxAxisY=new f({label:this.nls.verticalAxis});this.cbxAxisY.placeAt(this.divAxisY);
this.cbxLegend=new f({label:this.nls.legend});this.cbxLegend.placeAt(this.divLegend);this.cbxPieLabel=new f({label:this.nls.dataLabels});this.cbxPieLabel.placeAt(this.divPieLabel);this._setSingleColorForColorDiv(this.defaultSingleColor);this.palette=new e({palette:"7x10",cellClass:"cursor:pointer",style:{width:"220px"},onChange:q.hitch(this,function(m){var p=this._getSingleColorFromColorDiv();this._setSingleColorForColorDiv(m);this.isInWidget&&p!==m&&this._configChange()})});this.palette.placeAt(this.paletteContainer);
this.palette.startup();C.forEach(["c1","c2","c3","c4"],q.hitch(this,function(m){z.create("div",{"class":"multi-color colorful "+m,tabindex:"0"},this.colorfulContainer).colorValue=m}));C.forEach("g1 g2 g3 g4 g5 g6 g7 g8 g9 g10 g11 g12".split(" "),q.hitch(this,function(m){z.create("div",{"class":"multi-color monochromatic "+m,tabindex:"0"},this.monochromaticContainer).colorValue=m}));this._setMultiColorValue("c1");"pie"===this.type?(this.singleColor=!1,z.setStyle(this.divAxisX,"display","none"),z.setStyle(this.divAxisY,
"display","none")):z.setStyle(this.divPieLabel,"display","none");this.reset();this.config&&this.setConfig(this.config)},_updateLegendDisplayByMode:function(m){if("pie"===this.type)this._showLegendCbx=!0,z.setStyle(this.divLegend,"display","");else if("column"===this.type||"bar"===this.type||"line"===this.type)if("count"===m||"field"===m)z.setStyle(this.divLegend,"display","none"),this._showLegendCbx=!1;else if("feature"===m||"category"===m)this._showLegendCbx=!0,z.setStyle(this.divLegend,"display",
"")},_bindEvents:function(){this.own(l(this.cbxLegend,"change",q.hitch(this,this._configChange)));"pie"===this.type?this.own(l(this.cbxPieLabel,"change",q.hitch(this,this._configChange))):(this.own(l(this.cbxAxisX,"change",q.hitch(this,this._configChange))),this.own(l(this.cbxAxisY,"change",q.hitch(this,this._configChange))))},setConfig:function(m){this.reset();this.cbxAxisX.setValue(!1===m.showHorizontalAxis?!1:!0);this.cbxAxisY.setValue(!1===m.showVerticalAxis?!1:!0);this.cbxPieLabel.setValue(!1===
m.showDataLabel?!1:!0);this.cbxLegend.setValue(!1===m.showLegend?!1:!0);m=q.clone(m.colors||[]);(this.singleColor=1===m.length&&"pie"!==this.type)?this.showSingleColor(m[0]):this.showMultiColor(m)},getConfig:function(){var m={colors:[]};"pie"===this.type?(m.colors=this.colors[this._getMultiColorValue()],2===m.colors.length&&(m.colors=this._createHexColors(m.colors[0],m.colors[1],6)),m.showDataLabel=this.cbxPieLabel.checked):(m.showHorizontalAxis=this.cbxAxisX.checked,m.showVerticalAxis=this.cbxAxisY.checked,
m.colors=this.singleColor?[this._getSingleColorFromColorDiv()]:this.colors[this._getMultiColorValue()]);this._showLegendCbx&&(m.showLegend=this.cbxLegend.checked);return m},_setSingleColorForColorDiv:function(m){z.setStyle(this.colorDiv,"backgroundColor",m);this.colorDiv.bgHex=m},_getSingleColorFromColorDiv:function(){return this.colorDiv.bgHex},_setMultiColorValue:function(m){(m=g("."+m,this.multiColorSection))&&0<m.length&&this._selectMultiColorDiv(m[0])},_selectMultiColorDiv:function(m){g(".multi-color",
this.multiColorSection).removeClass("selected");z.addClass(m,"selected");this.multiColorValue=m.colorValue},_getMultiColorValue:function(){return this.multiColorValue},reset:function(){"pie"===this.type?this.cbxPieLabel.setValue(!0):(this.cbxAxisX.setValue(!0),this.cbxAxisY.setValue(!0));this.singleColor?this.showSingleColor():this.showMultiColor()},showSingleColor:function(m){"pie"===this.type?this.singleColor=!1:(this.singleColor=!0,z.setStyle(this.singleColorSection,"display","block"),z.setStyle(this.multiColorSection,
"display","none"),m&&this._setSingleColorForColorDiv(m))},showMultiColor:function(m){this.singleColor=!1;z.setStyle(this.singleColorSection,"display","none");z.setStyle(this.multiColorSection,"display","block");if(m&&0<m.length){var p=null,t=!1,v;for(v in this.colors)if(p=this.colors[v],t=!1,p.length===m.length&&(t=C.every(p,q.hitch(this,function(x,y){x=new n(x);y=new n(m[y]);return x.toHex().toLowerCase()===y.toHex().toLowerCase()})))){this._setMultiColorValue(v);break}}},showShelter:function(){z.setStyle(this.shelter,
"display","block")},hideShelter:function(){z.setStyle(this.shelter,"display","none")},_configChange:function(){var m=this.getConfig();this.emit("change",m)},_createHexColors:function(m,p,t){var v=[];m=n.fromHex(m);var x=n.fromHex(p);p=(x.r-m.r)/(t-1);var y=(x.g-m.g)/(t-1);x=(x.b-m.b)/(t-1);for(var A=null,J=0;J<t;J++)A=new n,A.r=Math.floor(m.r+p*J),A.g=Math.floor(m.g+y*J),A.b=Math.floor(m.b+x*J),v.push(A.toHex());return v}})})},"widgets/Chart/setting/DataFields":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dojo/Evented dojo/text!./DataFields.html jimu/utils".split(" "),
function(G,q,C,z,g,n,l,a,c,d,h){return G([l,c,a],{baseClass:"jimu-widget-chart-setting-data-fields",templateString:d,postCreate:function(){this.inherited(arguments);this.own(n(this.domNode,"click",q.hitch(this,this._onDomClicked)))},clear:function(){z.empty(this.fieldsContent);this.emit("change")},setFields:function(b){this.clear();C.forEach(b,q.hitch(this,function(e){var f=z.toDom('\x3cdiv class\x3d"field-item"\x3e\x3cinput type\x3d"checkbox" /\x3e\x3cspan class\x3d"jimu-ellipsis" /\x3e\x3c/div\x3e'),
m=g("input",f)[0],p=g("span",f)[0];m.checked=!!e.checked;p.innerHTML=h.sanitizeHTML(e.alias||e.name);p.title=e.alias||e.name;f.fieldName=e.name;z.place(f,this.fieldsContent);this.own(n(m,"change",q.hitch(this,function(){this.emit("change")})))}));this.emit("change")},selectFields:function(b){q.isArrayLike(b)&&(b=q.clone(b),b.reverse(),C.forEach(b,q.hitch(this,function(e){if(e=this._getFieldItemDivByName(e))z.place(e,e.parentNode,"first"),g("input",e)[0].checked=!0})));this.emit("change")},getSelectedFieldNames:function(){var b=
g(".field-item",this.fieldsContent),e=[];C.forEach(b,q.hitch(this,function(f){g("input",f)[0].checked&&e.push(f.fieldName)}));return e},_getFieldItemDivByName:function(b){var e=g(".field-item",this.fieldsContent);return C.filter(e,q.hitch(this,function(f){return f.fieldName===b}))[0]},_onDomClicked:function(b){b=b.target||b.srcElement;if(z.isDescendant(b,this.fieldsContent)&&b!==this.fieldsContent){var e=b.tagName.toLowerCase(),f=null;z.hasClass(b,"field-item")?this._selectFieldItemDom(b):"span"===
e?(f=b.parentNode,this._selectFieldItemDom(f)):"input"===e&&(f=b.parentNode,b.checked?this._selectFieldItemDom(f):z.removeClass(f,"selected"));this._updateHighLightIcons()}},_updateHighLightIcons:function(){var b=this._getSelectedFieldItemDiv();b&&z.hasClass(b,"selected")&&(b.previousSibling?z.addClass(this.btnUp,"high-light"):z.removeClass(this.btnUp,"high-light"),b.nextSibling?z.addClass(this.btnDown,"high-light"):z.removeClass(this.btnDown,"high-light"))},_selectFieldItemDom:function(b){g(".field-item",
this.fieldsContent).removeClass("selected");z.addClass(b,"selected")},_getSelectedFieldItemDiv:function(){var b=null,e=g(".field-item.selected",this.fieldsContent);0<e.length&&(b=e[0]);return b},_moveUp:function(){var b=this._getSelectedFieldItemDiv();b&&b.previousSibling&&z.place(b,b.previousSibling,"before");this._updateHighLightIcons()},_moveDown:function(){var b=this._getSelectedFieldItemDiv();b&&b.nextSibling&&z.place(b,b.nextSibling,"after");this._updateHighLightIcons()}})})},"widgets/Chart/setting/Sort":function(){define("dojo/_base/declare dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./Sort.html ./UpdownArrow ./utils dijit/form/RadioButton dijit/form/Select".split(" "),
function(G,q,C,z,g,n,l,a,c){return G([C,n,z,g],{baseClass:"jimu-widget-chart-setting-sort",templateString:l,postCreate:function(){this.inherited(arguments);this._initSelf()},getConfig:function(){var d=this.labelRadio.checked;var h=d?this.labelSortDir.getState():this.valueSortDir.getState();h={isLabelAxis:d,isAsc:h};d=!q.hasClass(this.valueActionDiv,"hide");var b=!q.hasClass(this.sortFieldDiv,"hide");d&&b&&(h.field=this.sortField.get("value"));return h},setConfig:function(d){if(d){var h=d.isLabelAxis,
b=d.isAsc;this.labelRadio.setChecked(h);this.valueRadio.setChecked(!h);this.labelSortDir.setState(b);this.valueSortDir.setState(b);d.field&&this.sortField.set("value",d.field)}},setFieldOptions:function(d){if(d){this._showFieldSelect();var h=this.sortField.get("value");this._clearSortFields();c.updateOptions(this.sortField,d,h)}else this._clearSortFields(),this._hideFieldSelect()},reset:function(d){this.labelRadio.setChecked(!0);this._showLabelActionsDiv();this.labelSortDir.setState(!0);this.valueSortDir.setState(!0);
this._hideFieldSelect();d&&this._clearSortFields()},_initSelf:function(){this.labelSortDir=new a;this.labelSortDir.placeAt(this.labelSortArrowDiv);this.valueSortDir=new a;this.valueSortDir.placeAt(this.valueSortArrowDiv)},_onLabelRadioChanged:function(d){d?this._showLabelActionsDiv():this._showValueActionsDiv()},_clearSortFields:function(){this.sortField.removeOption(this.sortField.getOptions());this.sortField.set("value")},_showFieldSelect:function(){q.removeClass(this.sortFieldDiv,"hide")},_hideFieldSelect:function(){q.addClass(this.sortFieldDiv,
"hide")},_showLabelActionsDiv:function(){q.removeClass(this.labelActionDiv,"hide");q.addClass(this.valueActionDiv,"hide")},_showValueActionsDiv:function(){q.addClass(this.labelActionDiv,"hide");q.removeClass(this.valueActionDiv,"hide")}})})},"widgets/Chart/setting/UpdownArrow":function(){define("dojo/_base/declare dojo/_base/html dojo/on dijit/_WidgetBase dijit/_TemplatedMixin dojo/Evented dojo/text!./UpdownArrow.html".split(" "),function(G,q,C,z,g,n,l){return G([z,n,g],{baseClass:"jimu-widget-chart-setting-updown-arrow",
templateString:l,state:!0,postCreate:function(){this.inherited(arguments);this.own(C(this.domNode,"click",this._onDomClicked.bind(this)))},setState:function(a){(this.state=a)?this._selectAscBtn():this._selectDescBtn()},getState:function(){return this.state},_onDomClicked:function(a){a.stopPropagation();a=a.target;q.hasClass(a,"asc")?(this.state=!0,this._selectAscBtn()):q.hasClass(a,"desc")&&(this.state=!1,this._selectDescBtn());this._onChange()},_onChange:function(){this.emit("change")},_selectAscBtn:function(){q.addClass(this.upper,
"selected");q.removeClass(this.down,"selected")},_selectDescBtn:function(){q.removeClass(this.upper,"selected");q.addClass(this.down,"selected")}})})},"widgets/Chart/setting/utils":function(){define(["dojo/Deferred","dojo/_base/lang","esri/request","jimu/utils"],function(G,q,C,z){return{_cacheDefinition:{},getLayerDefinitionByLayerIdOrUrl:function(g,n){var l=new G,a=this._cacheDefinition[g]||this._cacheDefinition[n];if(a)return l.resolve(a),l;if(!g)return C({url:n,hanleAs:"json",content:{f:"json"},
callbackParamName:"callback"}).then(function(d){this._cacheDefinition[n]=d;l.resolve(d)}.bind(this),function(d){l.reject(d)}),l;if(a=this.layerInfosObj.getLayerInfoById(g)){var c=a.getPopupInfo();this._getServiceDefinitionByLayerInfo(a).then(function(d){this._addAliasForLayerDefinition(d,c);this._cacheDefinition[g]=d;l.resolve(d)}.bind(this))}else l.reject("Invaild layerInfo for layer id: "+g);return l},_getServiceDefinitionByLayerInfo:function(g){return g.getServiceDefinition().then(q.hitch(this,
function(n){return n?n:g.getLayerObject().then(q.hitch(this,function(l){return l?z.getFeatureLayerDefinition(l):null}))}))},_addAliasForLayerDefinition:function(g,n){g&&g.fields&&0<g.fields.length&&g.fields.forEach(q.hitch(this,function(l){var a=this.getFieldAliasByFieldInfo(l,n);a&&(l.alias=a)}))},getFieldAliasByFieldInfo:function(g,n){var l="";if(!g)return l;var a=g.name;l=g.alias||a;n&&(l=this.getAliasFromPopupInfo(a,n));return l},getAliasFromPopupInfo:function(g,n){var l=g;if(!n)return l;(n=n.fieldInfos)&&
0<n.length&&n.forEach(function(a){a.fieldName===g&&(l=a.label)});return l},getAliasByFieldName:function(g,n){if(g&&n&&n.fields&&n.fields.length)return(n=n.fields.filter(function(l){return l.name===g})[0])&&n.alias},updateOptions:function(g,n,l,a){n?(n=q.clone(n),g.removeOption(g.getOptions()),g.addOption(n)):n=[];!l&&0<n.length&&(l=n[0].value);l&&(g.set("value",l),a&&(n=g.getOptions(l))&&"undefined"!==typeof n.label&&g.set("title",n.label))}}})},"jimu/dijit/SymbolPicker":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dijit/TooltipDialog dijit/popup dijit/registry jimu/dijit/SymbolChooser jimu/symbolUtils".split(" "),
function(G,q,C,z,g,n,l,a,c,d,h,b,e,f){return G([q,C,z],{baseClass:"jimu-symbol-picker",declaredClass:"jimu.dijit.SymbolPicker",templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"symbolNode" class\x3d"symbol-node jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"separator jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8 jimu-float-leading"\x3e\x3c/div\x3e\x3c/div\x3e',tooltipDialog:null,_isTooltipDialogOpened:!1,symbol:null,type:null,cropImage:!1,
customZIndex:null,postCreate:function(){this.inherited(arguments);this._createTooltipDialog();this._hideTooltipDialog();var m=this.symbolChooser.getSymbol();m&&this._drawSymbol(m)},destroy:function(){this._hideTooltipDialog();this.symbolChooser&&this.symbolChooser.destroy();this.symbolChooser=null;this.inherited(arguments)},_createTooltipDialog:function(){var m=n.create("div");this.tooltipDialog=new d({content:m});this.symbolChooser=new e({cropImage:this.cropImage,customZIndex:this.customZIndex,symbol:this.symbol,
type:this.type});this.symbolChooser.placeAt(m);this.symbolChooser.startup();this.own(a(this.symbolChooser,"change",g.hitch(this,function(p){this._drawSymbol(p);this.emit("change",p)})));this.own(a(this.domNode,"click",g.hitch(this,function(p){p.stopPropagation();p.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():this._showTooltipDialog()})));this.own(a(document.body,"click",g.hitch(this,function(p){var t=p.target||p.srcElement;p=this._getColorPickers();if(!(0<p.length&&l.some(p,
function(y){return y.isPartOfPopup(t)})))if(p=this.tooltipDialog.domNode,p=t===p||n.isDescendant(t,p),this.cropImage&&this.symbolChooser._isCustomImageOptionSelected()){var v=this.symbolChooser.imageChooser,x=v.msgPopupOpen;v.cropPopupOpen||x||p||this._hideTooltipDialog();v.cropPopup&&v.cropPopup.domNode||(v.cropPopupOpen=!1);v.msgPopup&&v.msgPopup.domNode||(v.msgPopupOpen=!1)}else p||this._hideTooltipDialog()})));this.own(a(this.symbolChooser,"resize",g.hitch(this,function(){this._isTooltipDialogOpened&&
(this._hideTooltipDialog(),this._showTooltipDialog())})))},_getColorPickers:function(){var m=c(".jimu-color-picker",this.symbolChooser.domNode);return l.map(m,g.hitch(this,function(p){return b.byNode(p)}))},reset:function(){this.symbol=this.type=null;n.empty(this.symbolNode);this.symbolChooser.reset()},showBySymbol:function(m){this.reset();m&&(this._drawSymbol(m),this.symbolChooser.showBySymbol(m))},showByType:function(m){this.reset();this.symbolChooser.showByType(m);(m=this.symbolChooser.getSymbol())&&
this._drawSymbol(m)},getSymbol:function(){return this.symbolChooser.getSymbol()},_drawSymbol:function(m){n.empty(this.symbolNode);m&&(m=f.createSymbolNode(m,{width:16,height:16}))&&n.place(m,this.symbolNode)},_showTooltipDialog:function(){this.tooltipDialog&&(h.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.domNode}),this._isTooltipDialogOpened=!0)},_hideTooltipDialog:function(){this.tooltipDialog&&(h.close(this.tooltipDialog),this._isTooltipDialogOpened=!1)}})})},"widgets/Chart/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/FeaturelayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"map-td" nowrap data-dojo-attach-point\x3d"mapTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"portal-td" nowrap data-dojo-attach-point\x3d"portalTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"url-td" nowrap data-dojo-attach-point\x3d"urlTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flcContainer" class\x3d"dijit-container map-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container portal-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container url-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/FeaturelayerChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ItemSelector.html":'\r\n\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cdiv\x3e${nls.groups}:\x3c/div\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cfieldset id\x3d"publicSearchRaido"\x3e\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" data-dojo-type\x3d"dijit/form/RadioButton" \r\n\t\t\t\t\t\t\tdata-label-id\x3d"portalPublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading portal-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" data-label-for\x3d"portalPublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" data-dojo-type\x3d"dijit/form/RadioButton"\r\n\t\t\t\t\t\t\tdata-label-id\x3d"onlinePublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading online-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" data-label-for\x3d"onlinePublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\t\x3c/fieldset\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan title\x3d"${nls.example}:"\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Chart/setting/SingleChartSetting.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"tabDiv" style\x3d"height: 100%;"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"settingsTabNode" style\x3d"height: 100%;"\x3e\r\n\t\t\t\x3c!--general settings--\x3e\r\n\t\t\t\x3cdiv class\x3d"part-setting-title"\x3e${nls.generalSettingsTip}\x3c/div\x3e\r\n\t\t\t\x3ctable class\x3d"part-setting-table gereral-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\t\x3ccol width\x3d"10px;"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\x3ccol width\x3d"116px" align\x3d"left"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"text-middle" style\x3d"vertical-align: top;"\x3e\r\n\t\t\t\t\t\t\t\x3cspan style\x3d"line-height:30px;" title\x3d"${nls.dataSource}"\x3e${nls.dataSource}\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\x3cdiv style\x3d"position:relative;overflow:hidden;width:100%;height:30px;"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"url-text-box" data-dojo-attach-point\x3d"urlTextBox"\r\n\t\t\t\t\t\t\t\tdata-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n\t\t\t\t\t\t\t\tdata-dojo-props\x3d\'required:true,trim:true,disabled:true\'\r\n\t\t\t\t\t\t\t\tstyle\x3d"display:inline-block;width:380px;min-width:380px;height:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"filter-icon" title\x3d"${nls.addFilterTip}" data-dojo-attach-point\x3d"filterIcon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn btn-data-source jimu-float-trailing" data-dojo-attach-point\x3d"btnSetSource" data-dojo-attach-event\x3d"onclick:_onBtnSetClicked" title\x3d"${nls.set}"\x3e${nls.set}\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"text-middle"\x3e\r\n\t\t\t\t\t\t\t\x3cspan title\x3d"${nls.chartTitle}"\x3e${nls.chartTitle}\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"chartNameTextBox"\r\n\t\t\t\t\t\t\tdata-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n\t\t\t\t\t\t\tdata-dojo-props\x3d\'required:true,trim:true\'\r\n\t\t\t\t\t\t\tdata-dojo-attach-event\x3d"change:_onChartNameChanged,blur:_onChartNameBlurred"\r\n\t\t\t\t\t\t\tstyle\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"text-middle"\x3e\r\n\t\t\t\t\t\t\t\x3cspan title\x3d"${nls.description}"\x3e${nls.description}\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\x3ctextarea data-dojo-attach-point\x3d"descriptionTA"\r\n\t\t\t\t\t\t\tdata-dojo-attach-event\x3d"blur:_onDescriptionBlurred"\r\n\t\t\t\t\t\t\tstyle\x3d"width:100%;height:34px;resize:none;"\x3e\x3c/textarea\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\r\n\r\n\t\t\t\x3c!--chart mode setting--\x3e\r\n\t\t\t\x3cdiv class\x3d"part-setting-title"\x3e${nls.chartModeSettingTip}\x3c/div\x3e\r\n\t\t\t\x3ctable class\x3d"part-setting-table chart-mode-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\t\x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\x3ccol width\x3d"116px" align\x3d"left"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"text-middle"\x3e\r\n\t\t\t\t\t\t\t\x3cspan title\x3d"${nls.chartingMode}"\x3e${nls.chartingMode}\x3c/span\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"chartModeSelect" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-event\x3d"change:_onChartModeChanged" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\r\n\r\n\t\t\t\x3c!--detail setting--\x3e\r\n\t\t\t\x3cdiv class\x3d"part-setting-title" style\x3d"margin-bottom:15px;"\x3e${nls.detailsSettingTip}\x3c/div\x3e\r\n\t\t\t\x3ctable data-dojo-attach-point\x3d"detailsTable" class\x3d"part-setting-table details-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t  \x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"116px" align\x3d"left"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t  \x3c/colgroup\x3e\r\n\t\t\t  \x3ctbody calss\x3d"details-tbody"\x3e\r\n\t\t\t   \x3ctr class\x3d"detail-tr category-tr count-tr"\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd class\x3d"text-middle"\x3e\r\n\t\t\t\t  \t\t\x3cspan title\x3d"${nls.categoryField}"\x3e${nls.categoryField}\x3c/span\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\r\n\t\t\t\t  \t\t\x3cdiv style\x3d"position:relative;overflow:hidden;width:100%;height:30px;"\x3e\r\n\t\t\t\t  \t\t\t\x3cselect data-dojo-attach-point\x3d"categoryFieldSelect" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:100%;height:100%;"\x3e\r\n\t\t\t\t  \t\t\t\x3c/select\x3e\r\n\t\t\t\t  \t\t\x3c/div\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t \x3c/tr\x3e\r\n\r\n\t\t\t\t \x3ctr class\x3d"detail-tr feature-tr category-tr field-tr"\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd class\x3d"text-middle" style\x3d"vertical-align:top;"\x3e\r\n\t\t\t\t  \t\t\x3cspan style\x3d"line-height:30px;" title\x3d"${nls.valueFields}"\x3e${nls.valueFields}\x3c/span\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\r\n\t\t\t\t  \t\t\x3cdiv data-dojo-attach-point\x3d"dataFieldsDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t \x3c/tr\x3e\r\n\r\n\t\t\t\t \x3ctr class\x3d"detail-tr feature-tr"\x3e\r\n\t\t\t\t \t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t \t\x3ctd class\x3d"text-middle"\x3e\r\n\t\t\t\t \t\t\x3cspan title\x3d"${nls.axisLabel}"\x3e${nls.axisLabel}\x3c/span\x3e\r\n\t\t\t\t \t\x3c/td\x3e\r\n\t\t\t\t \t\x3ctd\x3e\r\n\t\t\t\t \t\t\x3cdiv style\x3d"position:relative;overflow:hidden;width:100%;height:30px;"\x3e\r\n\t\t\t\t  \t\t\t\x3cselect data-dojo-attach-point\x3d"featureAxisLabelSelect" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:100%;height:100%;"\x3e\r\n\t\t\t\t  \t\t\t\x3c/select\x3e\r\n\t\t\t\t  \t\t\x3c/div\x3e\r\n\t\t\t\t \t\x3c/td\x3e\r\n\t\t\t\t \x3c/tr\x3e\r\n\r\n\t\t\t\t \x3ctr class\x3d"detail-tr category-tr"\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd class\x3d"text-middle"\x3e\r\n\t\t\t\t  \t\t\x3cspan title\x3d"${nls.operation}"\x3e${nls.operation}\x3c/span\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\r\n\t\t\t\t  \t\t\x3cselect data-dojo-attach-point\x3d"categoryOperationSelect" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:100%;"\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"sum"\x3e${nls.sumOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"average"\x3e${nls.averageOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"min"\x3e${nls.minOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"max"\x3e${nls.maxOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\x3c/select\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t \x3c/tr\x3e\r\n\r\n\t\t\t\t \x3ctr class\x3d"detail-tr field-tr"\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd class\x3d"text-middle"\x3e\r\n\t\t\t\t  \t\t\x3cspan title\x3d"${nls.operation}"\x3e${nls.operation}\x3c/span\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\r\n\t\t\t\t  \t\t\x3cselect data-dojo-attach-point\x3d"fieldOperationSelect" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:100%;"\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"sum"\x3e${nls.sumOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"average"\x3e${nls.averageOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"min"\x3e${nls.minOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\t\x3coption value\x3d"max"\x3e${nls.maxOption}\x3c/option\x3e\r\n\t\t\t\t  \t\t\x3c/select\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t \x3c/tr\x3e\r\n\r\n\t\t\t\t \x3ctr style\x3d"margin-top: 5px;" class\x3d"detail-tr feature-tr category-tr count-tr field-tr chart-types-tr"\x3e\r\n\t\t\t\t  \t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd class\x3d"mul-td-label" style\x3d"line-height: normal;height: auto;"\x3e\r\n\t\t\t\t  \t\t\x3cdiv class\x3d"part-label" title\x3d"${nls.chartType}"\x3e${nls.chartType}\x3c/div\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t  \t\x3ctd class\x3d"charts-td" style\x3d"line-height: 17px;"\x3e\r\n\t\t\t\t  \t\t\x3cdiv class\x3d"cbx-tr"\x3e\r\n\t\t\t\t  \t\t\t\x3cdiv class\x3d"cbx-td"\x3e\r\n\t\t\t\t  \t\t\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"columnCbx"\x3e\x3c/div\x3e\r\n\t\t\t\t  \t\t\t\t\x3cdiv class\x3d"edit-div" data-dojo-attach-point\x3d"columnEdit"\x3e\x3c/div\x3e\r\n\t\t\t\t  \t\t\t\x3c/div\x3e\r\n\t\t\t\t  \t\t\t\x3cdiv class\x3d"cbx-td"\x3e\r\n\t\t\t\t  \t\t\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"pieCbx"\x3e\x3c/div\x3e\r\n\t\t\t\t  \t\t\t\t\x3cdiv class\x3d"edit-div" data-dojo-attach-point\x3d"pieEdit"\x3e\x3c/div\x3e\r\n\t\t\t\t  \t\t\t\x3c/div\x3e\r\n\t\t\t\t  \t\t\x3c/div\x3e\r\n\r\n\t\t\t\t  \t\t\x3cdiv class\x3d"cbx-tr"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"cbx-td"\x3e\r\n\t\t\t\t\t  \t\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"barCbx"\x3e\x3c/div\x3e\r\n\t\t\t\t\t  \t\t\t\x3cdiv class\x3d"edit-div" data-dojo-attach-point\x3d"barEdit"\x3e\x3c/div\x3e\r\n\t\t\t\t\t  \t\t\x3c/div\x3e\r\n\t\t\t\t\t  \t\t\x3cdiv class\x3d"cbx-td"\x3e\r\n\t\t\t\t  \t\t\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"lineCbx"\x3e\x3c/div\x3e\r\n\t\t\t\t  \t\t\t\t\x3cdiv class\x3d"edit-div" data-dojo-attach-point\x3d"lineEdit"\x3e\x3c/div\x3e\r\n\t\t\t\t  \t\t\t\x3c/div\x3e\t\t\t\t  \t\t\t\r\n\t\t\t\t  \t\t\x3c/div\x3e\r\n\t\t\t\t  \t\x3c/td\x3e\r\n\t\t\t\t \x3c/tr\x3e\r\n\t\t\t  \x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\r\n\t\t\t\x3cdiv class\x3d"part-sort"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"part-label" title\x3d"${nls.sortBy}"\x3e${nls.sortBy}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"SortDiv" class\x3d"part-content"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\r\n\r\n\t\t\t\x3c!--symbol setting--\x3e\r\n\t\t\t\x3cdiv class\x3d"part-setting-title"\x3e${nls.symbolSettingTip}\x3c/div\x3e\r\n\t\t\t\x3cdiv style\x3d"margin-left:10px;"\x3e\r\n\t\t\t\t\x3cdiv style\x3d"margin-top:20px;overflow:hidden;"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"jimu-float-leading symbol-tip"\x3e${nls.setSymbol}:\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"symbolPicker" data-dojo-type\x3d"jimu/dijit/SymbolPicker"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv style\x3d"margin-top:30px;overflow:hidden;padding-bottom:10px;"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"jimu-float-leading hightlight-tip"\x3e${nls.setHighLightColor}:\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorPicker" data-dojo-type\x3d"jimu/dijit/ColorPicker" data-dojo-props\x3d\'color:"${_highLightColor}"\' style\x3d"display:inline-block;width:25px;height:25px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"previewTabNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"previewDiv" class\x3d"preview-div"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/StatisticsChart.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"results-header" data-dojo-attach-point\x3d"resultsHeader" style\x3d"margin-bottom:15px;"\x3e\r\n\t\t\x3cdiv tabindex\x3d"0" class\x3d"chart-title jimu-float-leading" data-dojo-attach-point\x3d"chartTitle"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"paging-section jimu-float-leading"\x3e\r\n\t\t\t\x3cul tabindex\x3d"0" data-dojo-attach-point\x3d"pagingUl" data-dojo-attach-event\x3d"onclick:_onPagingUlClicked, onkeydown:_onPagingUlKeydown"\x3e\x3c/ul\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-float-trailing"\x3e\r\n\t\t\t\x3cdiv role\x3d"button" tabindex\x3d"0" class\x3d"settings jimu-float-leading" data-dojo-attach-point\x3d"settingsIcon"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv role\x3d"button" tabindex\x3d"0" class\x3d"zoomin jimu-float-trailing" data-dojo-attach-point\x3d"zoominIcon"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"chartSection" class\x3d"chart-section"\x3e\r\n\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%;height:100%;table-layout:fixed;"\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"arrow-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.previous}" class\x3d"chart-section-item left-arrow arrow" data-dojo-attach-point\x3d"leftArrow" data-dojo-attach-event\x3d"onclick:_onLeftArrowClicked, onkeydown:_onLeftArrowKeydown"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"content-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"chart-section-item chart-container" data-dojo-attach-point\x3d"chartContainer"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"chart-real-container" data-dojo-attach-point\x3d"chartRealContainer"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv tabindex\x3d"0" class\x3d"description-container" data-dojo-attach-point\x3d"descriptionContainer"\x3e/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"fiald-render-info" data-dojo-attach-point\x3d"faildRenderInfo"\x3e\r\n\t\t\t\t\t\t\t${nls.fieldDisplayChartTip}\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"arrow-td"\x3e\r\n\t\t\t\t\t\t\x3cdiv tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.next}" class\x3d"chart-section-item right-arrow arrow" data-dojo-attach-point\x3d"rightArrow" data-dojo-attach-event\x3d"onclick:_onRightArrowClicked, onkeydown:_onRightArrowKeydown"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_StatisticsChartSettings.html":'\x3cdiv tabIndex\x3d"0"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divAxisX" class\x3d"setting-item"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divAxisY" class\x3d"setting-item"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divLegend" class\x3d"setting-item"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"divPieLabel" class\x3d"setting-item"\x3e\x3c/div\x3e\r\n\t\x3cdiv\x3e\r\n\t\t\x3cdiv tabindex\x3d"0" aria-label\x3d"${nls.color}" class\x3d"color-tip"\x3e${nls.color}\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"singleColorSection" class\x3d"single-color-section"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorDiv" class\x3d"single-color-div"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"paletteContainer" class\x3d"palette-container"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"multiColorSection" class\x3d"multi-color-section"\x3e\r\n\t\t\t\x3cdiv class\x3d"colorful-section"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"colorfulContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"monochromatic-section"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"monochromaticContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"shelter" data-dojo-attach-point\x3d"shelter"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Chart/setting/DataFields.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"fieldsContent" class\x3d"fields-content"\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operation"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"btnUp" data-dojo-attach-event\x3d"onclick:_moveUp" class\x3d"up-icon" title\x3d"${nls.moveUp}"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"btnDown" data-dojo-attach-event\x3d"onclick:_moveDown" class\x3d"down-icon" title\x3d"${nls.moveDown}"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Chart/setting/Sort.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"label-col"\x3e\r\n\t\t\x3cdiv class\x3d"radio-td"\x3e\r\n\t\t\t\x3cinput data-dojo-attach-point\x3d"labelRadio" data-dojo-attach-event\x3d"change:_onLabelRadioChanged" checked name\x3d"sortaxis" data-dojo-type\x3d"dijit/form/RadioButton"\x3e\r\n\t\t\t\x3clabel class\x3d"radio-label text-ellipsis margin-left-20" title\x3d"${nls.label}"\x3e${nls.label}\x3c/label\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"actions-div" data-dojo-attach-point\x3d"labelActionDiv"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"labelSortArrowDiv" class\x3d"sort-td"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"value-col"\x3e\r\n\t\t\x3cdiv class\x3d"radio-td"\x3e\r\n\t\t\t\x3cinput data-dojo-attach-point\x3d"valueRadio" name\x3d"sortaxis" data-dojo-type\x3d"dijit/form/RadioButton"\x3e\r\n\t\t\t\x3clabel class\x3d"radio-label text-ellipsis margin-left-20" title\x3d"${nls.valueStr}"\x3e${nls.valueStr}\x3c/label\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\r\n\t\t\x3cdiv class\x3d"actions-div hide" data-dojo-attach-point\x3d"valueActionDiv"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"valueSortArrowDiv" class\x3d"sort-td"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv  data-dojo-attach-point\x3d"sortFieldDiv" class\x3d"field-td margin-left-20 hide"\x3e\r\n\t\t\t\t\x3cselect data-dojo-attach-point\x3d"sortField" data-dojo-type\x3d"dijit/form/Select" class\x3d"restrict-select-width sort-filed"\x3e\x3c/select\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Chart/setting/UpdownArrow.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"upper" class\x3d"sort-icon asc selected"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"down" class\x3d"sort-icon desc"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/Chart/setting/Setting.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"chart-list"\x3e\r\n\t\t\x3cdiv class\x3d"chart-list-head" style\x3d"overflow:hidden;"\x3e\r\n\t\t\t\x3cdiv class\x3d"jimu-float-leading"\x3e${nls.charts}\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"jimu-float-trailing"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"add-with-icon" data-dojo-attach-event\x3d"onclick:_onAddNewClicked"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/span\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"add-label" title\x3d"${nls.addNewTip}"\x3e${nls.addNew}\x3c/span\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"chart-list-content" data-dojo-attach-point\x3d"chartListContent"\x3e\r\n\t\t\t\x3cdiv class\x3d"preview-div" data-dojo-attach-point\x3d"previewDiv"\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"single-chart-container" data-dojo-attach-point\x3d"singleChartContainer"\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Chart/setting/css/style.css":".jimu-widget-chart-setting {margin: 0; padding: 0; font-size: 14px; position: relative; width: 100%; height: 100%;}.jimu-widget-chart-setting .text-ellipsis {white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-chart-setting .chart-list {position: absolute; width: 270px; height: 100%; left: 0;}.jimu-rtl .jimu-widget-chart-setting .chart-list {left: auto; right: 0;}.jimu-widget-chart-setting .chart-list-content {position: absolute; width: 100%; top: 40px; bottom: 5px;}.jimu-widget-chart-setting .single-chart-container {position: absolute; left: 300px; right: 0; height: 100%; overflow-x: hidden; overflow-y: auto;}.jimu-rtl .jimu-widget-chart-setting .single-chart-container {left: 0; right: 300px;}.jimu-widget-singlechart-setting {width: 98%; height: 100%;}.jimu-widget-singlechart-setting .jimu-tab3 {height: 100%;}.jimu-widget-singlechart-setting .jimu-tab3 .container-node {height: calc(100% - 38px);}.jimu-widget-singlechart-setting .text-middle {vertical-align: middle; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-singlechart-setting .url-text-box input.dijitInputInner {width: 340px !important; text-overflow: ellipsis;}.jimu-widget-singlechart-setting .part-setting-title {color: #596679; margin-top: 20px;}.jimu-widget-singlechart-setting .btn-data-source {max-width: 120px; padding: 0 10px; line-height: 30px; height: 30px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-singlechart-setting .url-text-box input.dijitInputInner {margin-left: 10px !important;}.jimu-widget-singlechart-setting .filter-icon {position: absolute; top: 0; bottom: 0; left: 4px; width: 14px; height: 14px; margin-top: auto; margin-bottom: auto; cursor: pointer; background-repeat: no-repeat; background-position: center center;}.jimu-rtl .jimu-widget-singlechart-setting .filter-icon {left: auto; right: 4px;}.jimu-widget-singlechart-setting .filter-icon {background-image: url(images/filter3.png);}.jimu-widget-singlechart-setting .filter-icon:hover {background-image: url(images/filter4.png);}.jimu-widget-singlechart-setting .part-setting-table {width: 100%; border-collapse: collapse; table-layout: fixed;}.jimu-widget-singlechart-setting .part-setting-table \x3e tbody \x3e tr \x3e td {padding-top: 3px; padding-bottom: 3px;}.jimu-widget-singlechart-setting .details-table \x3e tbody \x3e tr {display: none;}.jimu-widget-singlechart-setting .details-table \x3e tbody \x3e .show-tr {display: table-row;}.jimu-widget-singlechart-setting .details-table .chart-types-tr \x3e td {height: 30px; line-height: 30px;}.jimu-widget-singlechart-setting .details-table .colors-tr \x3e td {height: 30px;}.jimu-widget-singlechart-setting .charts-td {cursor: default;}.jimu-widget-singlechart-setting .charts-td \x3e div {display: inline-block;}.jimu-widget-singlechart-setting .charts-td span {margin-left: 3px;}.jimu-rtl .jimu-widget-singlechart-setting .charts-td span {margin-left: 0; margin-right: 3px;}.jimu-widget-singlechart-setting .charts-td .edit-div {display: none; cursor: pointer; width: 14px; height: 14px; margin-left: 3px; background-repeat: no-repeat; background-position: center center; background-image: url(images/edit1.png);}.jimu-widget-singlechart-setting .charts-td .edit-div:hover {background-image: url(images/edit2.png);}.jimu-widget-singlechart-setting .charts-td .edit-div.selected {background-image: url(images/edit2.png);}.jimu-rtl .jimu-widget-singlechart-setting .charts-td .edit-div {margin-left: 0; margin-right: 3px;}.jimu-widget-singlechart-setting .charts-td .gray {color: #bdc1c8;}.jimu-widget-singlechart-setting .preview-div {overflow: hidden; width: 90%; margin-left: auto; margin-right: auto; padding-top: 10px; height: 100%;}.jimu-widget-chart-setting-data-fields {position: relative; width: 100%; min-height: 90px;}.jimu-widget-chart-setting-data-fields .fields-content {width: 483px; max-height: 120px; overflow-y: auto; display: inline-block; border: 1px solid #ccc;}.jimu-widget-chart-setting-data-fields .field-item {height: 20px; line-height: 20px; font-size: 12px;}.jimu-widget-chart-setting-data-fields .field-item span {width: 425px; display: inline-block;}.jimu-widget-chart-setting-data-fields .field-item.selected {background: #e3ecf2;}.jimu-widget-chart-setting-data-fields .field-item input {margin-left: 10px; margin-right: 10px; position: relative; top: -4px;}.jimu-widget-chart-setting-data-fields .operation {position: absolute; right: 0; top: 0; width: 14px; height: 50px;}.jimu-rtl .jimu-widget-chart-setting-data-fields .operation {right: auto; left: 0;}.jimu-widget-chart-setting-data-fields .operation div {cursor: pointer; width: 100%; height: 14px; background-repeat: no-repeat; background-position: center center;}.jimu-widget-chart-setting-data-fields .up-icon {background-image: url(images/up1.png);}.jimu-widget-chart-setting-data-fields .up-icon.high-light {background-image: url(images/up2.png);}.jimu-widget-chart-setting-data-fields .down-icon {background-image: url(images/down1.png); margin-top: 10px;}.jimu-widget-chart-setting-data-fields .down-icon.high-light {background-image: url(images/down2.png);}.jimu-widget-singlechart-setting .symbol-tip {margin-right: 20px;}.jimu-rtl .jimu-widget-singlechart-setting .symbol-tip {margin-right: 0; margin-left: 20px;}.jimu-widget-singlechart-setting .hightlight-tip {margin-right: 20px;}.jimu-rtl .jimu-widget-singlechart-setting .hightlight-tip {margin-right: 0; margin-left: 20px;}.jimu-widget-singlechart-setting .mul-td-label {display: flex; align-items: flex-start;}.jimu-widget-singlechart-setting .charts-td .cbx-tr {display: flex; align-items: center;}.jimu-widget-singlechart-setting .charts-td .cbx-td {flex: 1 1 50%; max-width: 50%;}.ie-gte-10 .jimu-widget-singlechart-setting .charts-td .jimu-checkbox {width: 80%;}.jimu-widget-singlechart-setting .charts-td .jimu-checkbox {max-width: 80%;}.jimu-widget-singlechart-setting .charts-td .jimu-checkbox \x3e div.label {white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 85%;}.jimu-widget-singlechart-setting .margin-left-20 {margin-left: 20px;}.jimu-rtl .jimu-widget-singlechart-setting .margin-left-20 {margin-right: 20px; margin-left: 0;}.jimu-widget-singlechart-setting .part-sort {display: flex; justify-content: flex-start; margin-left: 10px; margin-top: 10px;}.jimu-rtl .jimu-widget-singlechart-setting .part-sort {margin-right: 10px; margin-left: 0;}.jimu-widget-singlechart-setting .part-sort .part-label {width: 116px; flex: 0 0 116px;}.jimu-widget-singlechart-setting .part-sort .part-content {flex: 1 0 auto;}.jimu-widget-chart-setting-sort {height: 56px; display: flex; flex-direction: column; justify-content: space-between; align-items: flex-start;}.jimu-widget-chart-setting-sort .dijitSelect {background-color: #FFFFFF;}.jimu-widget-chart-setting-sort .dijitSelect .dijitButtonContents {border-style:none;}.jimu-widget-chart-setting-sort .dijitSelect .dijitArrowButton {background-color: #FFFFFF;}.jimu-widget-chart-setting-sort .hide {display: none !important;}.jimu-widget-chart-setting-sort .label-col,.jimu-widget-chart-setting-sort .value-col {display: flex; align-items: center;}.jimu-widget-chart-setting-sort .value-col {height: 30px;}.jimu-widget-chart-setting-sort .radio-td {display: flex; align-items: center;}.jimu-widget-chart-setting-sort .radio-td .dijitRadio {margin: 0px;}.jimu-widget-chart-setting-sort .radio-td .radio-label {min-width: 67px;}.jimu-widget-chart-setting-sort .actions-div {display: flex; align-items: center;}.jimu-widget-chart-setting-sort .field-td .dijitSelect.sort-filed {width: 120px;}.jimu-widget-chart-setting-updown-arrow {display: flex; align-items: center; justify-content: space-between; width: 39px;}.jimu-widget-chart-setting-updown-arrow .sort-icon {width: 17px; height: 17px; cursor: pointer;}.jimu-widget-chart-setting-updown-arrow .asc.selected {background: no-repeat center center url(./images/acs_active.svg);}.jimu-widget-chart-setting-updown-arrow .asc {background: no-repeat center center url(./images/acs_deactive.svg);}.jimu-widget-chart-setting-updown-arrow .desc.selected {background: no-repeat center center url(./images/desc_active.svg);}.jimu-widget-chart-setting-updown-arrow .desc {background: no-repeat center center url(./images/desc_deactive.svg);}",
"*now":function(G){G(['dojo/i18n!*preload*widgets/Chart/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/on dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/dijit/_FeaturelayerSourcePopup jimu/utils jimu/filterUtils jimu/LayerInfos/LayerInfos ./SingleChartSetting ./utils jimu/dijit/SimpleTable jimu/dijit/TabContainer jimu/dijit/ColorPicker dijit/form/Select dijit/form/TextBox".split(" "),function(G,q,C,z,g,n,l,a,c,d,h,b,e,f){return G([l,n],{baseClass:"jimu-widget-chart-setting",currentSCS:null,_numberFieldTypes:["esriFieldTypeSmallInteger",
"esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],postMixInProperties:function(){this.inherited(arguments);this.layerInfosObj=h.getInstanceSync();e.layerInfosObj=this.layerInfosObj;this.nls.horizontalAxis=this.nls.horizontalAxis||"Horizontal Axis";this.nls.verticalAxis=this.nls.verticalAxis||"Vertical Axis";this.nls.dataLabels=this.nls.dataLabels||"Data Labels";this.nls.color=this.nls.color||"Color";this.nls.colorful=this.nls.colorful||"Colorful";this.nls.monochromatic=this.nls.monochromatic||
"Monochromatic";this.config&&(this._setUrlForConfig(this.config),this._updateConfig())},postCreate:function(){this.inherited(arguments);this._initSelf();this.config&&this.setConfig(this.config)},_initSelf:function(){this.chartList=new f({fields:[{name:"name",title:this.nls.name,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"70px",type:"actions",actions:["up","down","delete"]}],autoHeight:!1,selectable:!0,style:"position:absolute; top:0; bottom:10px;"});z.addClass(this.chartList.domNode,
"chart-list-table");this.own(g(this.chartList,"row-delete",q.hitch(this,this._onChartItemRemoved)));this.own(g(this.chartList,"row-select",q.hitch(this,this._onChartItemSelected)));this.chartList.placeAt(this.chartListContent,"first")},_updateConfig:function(){this.config&&this.config.charts&&0<this.config.charts.length&&C.forEach(this.config.charts,q.hitch(this,function(m){this._rebuildFilter(m.url,m.filter)}))},_setUrlForConfig:function(m){m.charts&&0<m.charts.length&&C.forEach(m.charts,q.hitch(this,
function(p){if(p.webMapLayerId){var t=this.layerInfosObj.getLayerOrTableInfoById(p.webMapLayerId);t&&(p.url=t.getUrl())}}))},_rebuildFilter:function(m,p){try{if(p){delete p.expr;var t=new d;t.isHosted=c.isHostedService(m);t.getExprByFilterObj(p)}}catch(v){console.log(v)}},setConfig:function(m){this._setUrlForConfig(m);this.currentSCS&&this.currentSCS.destroy();this.currentSCS=null;this.chartList.clear();m=(this.config=m)&&this.config.charts;q.isArrayLike(m)&&C.forEach(m,q.hitch(this,function(p,t){var v=
this.chartList.addRow({name:p.name||""}).tr;v.singleConfig=q.clone(p);0===t&&this.chartList.selectRow(v)}))},getConfig:function(){if(this.currentSCS){var m=this.currentSCS.getConfig(!0);if(m)this.currentSCS.tr.singleConfig=q.clone(m);else return!1}m={charts:[]};for(var p=this.chartList.getRows(),t=0;t<p.length;t++)m.charts.push(q.clone(p[t].singleConfig)),m.charts[t].webMapLayerId&&(m.charts[t].url="");this.config=q.clone(m);return m},_onAddNewClicked:function(){if(this.currentSCS){var m=this.currentSCS.getConfig(!0);
if(m)this.currentSCS.tr.singleConfig=m;else return}var p=new a({titleLabel:this.nls.setDataSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});this.own(g(p,"ok",q.hitch(this,function(t){var v=p.getSelectedRadioType();p.close();this.currentSCS&&(this.currentSCS.destroy(),this.currentSCS=null);var x=t.name||"",y=this.chartList.addRow({name:x});if(y.success&&(this.chartList.selectRow(y.tr),this.currentSCS)){y=t.layerInfo&&
t.layerInfo.id;var A=t.url;this.shelter.show();e.getLayerDefinitionByLayerIdOrUrl(y,A).then(function(J){this.shelter.hide();t.definition=null;t.definition=J;this.currentSCS.setNewLayerDefinition(t,v,x,null)}.bind(this),function(J){console.error(J);this.shelter.hide()}.bind(this))}})));this.own(g(p,"cancel",q.hitch(this,function(){p.close()})));p.startup()},_hasNumberFields:function(m){var p=!1;(m=m.fields)&&0<m.length&&(p=C.some(m,q.hitch(this,function(t){return 0<=this._numberFieldTypes.indexOf(t.type)})));
return p},_onChartItemRemoved:function(m){this.currentSCS&&this.currentSCS.tr===m&&(this.currentSCS.destroy(),this.currentSCS=null)},_onChartItemSelected:function(m){if(this.currentSCS){if(this.currentSCS.tr!==m){var p=this.currentSCS.getConfig(!0);p?(this.currentSCS.tr.singleConfig=p,this.currentSCS.destroy(),this.currentSCS=null,this._createSingleChartSetting(m)):this.chartList.selectRow(this.currentSCS.tr)}}else this._createSingleChartSetting(m)},_createSingleChartSetting:function(m){this.currentSCS=
new b({map:this.map,nls:this.nls,config:m.singleConfig,tr:m,_layerDefinition:m._layerDefinition,folderUrl:this.folderUrl,appConfig:this.appConfig});this.currentSCS.placeAt(this.singleChartContainer);this.own(g(this.currentSCS,"name-change",q.hitch(this,function(p){this.chartList.editRow(m,{name:p})})));this.own(g(this.currentSCS,"show-shelter",q.hitch(this,function(){this.shelter.show()})));this.own(g(this.currentSCS,"hide-shelter",q.hitch(this,function(){this.shelter.hide()})));this.currentSCS.startup();
this.currentSCS.setConfig(m.singleConfig);return this.currentSCS}})});