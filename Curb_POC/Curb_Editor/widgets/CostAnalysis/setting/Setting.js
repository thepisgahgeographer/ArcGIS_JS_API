// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/CostAnalysis/setting/GeneralSettings":function(){define("dojo/_base/declare jimu/BaseWidget dijit/_WidgetsInTemplateMixin dojo/text!./GeneralSettings.html dojo/_base/lang dojo/_base/array dojo/on ../utils dojo/dom-attr dojo/dom-class ./ReportSettings dijit/form/CheckBox".split(" "),function(D,C,E,B,q,w,v,x,y,p,n){return D([C,E],{templateString:B,configuredReportSettings:null,baseClass:"jimu-widget-cost-analysis-general-settings",constructor:function(d){q.mixin(this,d)},postMixInProperties:function(){this.nls.common=
{};q.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this._init()},_init:function(){this._setConfig();this._attachNodeEvents();this.currencyInputNode.validator=q.hitch(this,this._currencyValidator);this.bufferDistanceInputNode.validator=q.hitch(this,this._bufferDistanceValidator);this.own(v(this.currencyInputNode,"change",q.hitch(this,function(){this.currencyInputNode.isValid()&&this._onUnitChange()})));this.own(v(this.editReportSettings,"click",q.hitch(this,
function(){this._createReportSettingsDialog(!1)})));this.configuredReportSettings||this._createReportSettingsDialog(!0)},_setConfig:function(){this.measurementUnitInputNode.set("value",this.config.generalSettings.measurementUnit);this.currencyInputNode.set("value",this.config.generalSettings.currency);this.roundCostInputNode.set("value",this.config.generalSettings.roundCostType);this.projectAreaTypeInputNode.set("value",this.config.generalSettings.projectAreaType);this.bufferDistanceInputNode.set("value",
this.config.generalSettings.bufferDistance);this.config.generalSettings.hasOwnProperty("canExportProject")&&this.exportCSVCheckBox.set("checked",this.config.generalSettings.canExportProject,!1);this.configuredReportSettings=this.config.generalSettings.CSVReportSettings},validate:function(){var d=this.projectAreaTypeInputNode.get("value");return this.currencyInputNode.validate()?"buffer"!==d||this.bufferDistanceInputNode.validate()?{isValid:!0}:{isValid:!1,errorMessage:this.nls.generalSettings.errorMessages.bufferDistance}:
{isValid:!1,errorMessage:this.nls.generalSettings.errorMessages.currency}},getConfig:function(){return{measurementUnit:this.measurementUnitInputNode.get("value"),currency:this.currencyInputNode.get("value"),roundCostType:this.roundCostInputNode.get("value"),projectAreaType:this.projectAreaTypeInputNode.get("value"),bufferDistance:this.bufferDistanceInputNode.get("value"),canExportProject:this.exportCSVCheckBox.checked,CSVReportSettings:this.configuredReportSettings}},_attachNodeEvents:function(){this.own(v(this.measurementUnitInputNode,
"change",q.hitch(this,function(d){y.set(this.bufferDistanceUnit,"innerHTML",this.nls.units[d].label);this._onUnitChange()})));this.own(v(this.projectAreaTypeInputNode,"change",q.hitch(this,function(d){"outline"===d?(this.bufferDistanceInputNode.textbox.value="5",this.bufferDistanceInputNode.set("disabled",!0),p.add(this.projectSettingsOutputRightContainerNode,"esriCTHidden")):(this.bufferDistanceInputNode.set("disabled",!1),p.remove(this.projectSettingsOutputRightContainerNode,"esriCTHidden"))})))},
_onUnitChange:function(){var d;var a=this.measurementUnitInputNode.get("value");this.configuredReportSettings&&w.forEach(this.configuredReportSettings.reportSettings,q.hitch(this,function(b){-1<b.columnTitle.indexOf("Length")?(d=x.units[a].lengthAbbr,b.columnTitle="Length ("+d+")"):-1<b.columnTitle.indexOf("Area")?(d=x.units[a].areaAbbr,b.columnTitle="Area ("+d+")"):-1<b.columnTitle.indexOf("Cost")&&(d=this.currencyInputNode.get("value"),b.columnTitle="Cost ("+d+")")}))},_currencyValidator:function(d){return d.match(/^([^0-9]+)$/)?
!0:(this.currencyInputNode.invalidMessage=this.nls.generalSettings.errorMessages.currency,!1)},_bufferDistanceValidator:function(d){return 0>d?(this.bufferDistanceInputNode.invalidMessage=this.nls.generalSettings.errorMessages.outOfRangebufferDistance,!1):d.match(/^([0-9]*[1-9][0-9]*([\.,][0-9]+)*([\.,][0-9]+)?|[0]+\.[0-9]*[1-9][0-9]*)$/)?!0:(this.bufferDistanceInputNode.invalidMessage=this.nls.generalSettings.errorMessages.bufferDistance,!1)},_createReportSettingsDialog:function(d){this._reportSettings=
new n({nls:this.nls,previousReportSettings:this.configuredReportSettings,isLoad:d,config:this.config});v(this._reportSettings,"okButtonClicked",q.hitch(this,function(a){this.configuredReportSettings=a}));v(this._reportSettings,"onInitialLoad",q.hitch(this,function(a){this.configuredReportSettings=a}));this._reportSettings.startup()}})})},"widgets/CostAnalysis/utils":function(){define("esri/request esri/geometry/geometryEngine dojo/Deferred dojo/_base/lang jimu/dijit/Message dojo/_base/array jimu/utils dijit/focus".split(" "),
function(D,C,E,B,q,w,v,x){var y={};y.units={feet:{lengthUnit:"feet",areaUnit:"square-feet",bufferUnit:"UNIT_FOOT",lengthAbbr:window.jimuNls.units.feetAbbr,areaAbbr:window.jimuNls.units.squareFeetAbbr},meters:{lengthUnit:"meters",areaUnit:"square-meters",bufferUnit:"UNIT_METER",lengthAbbr:window.jimuNls.units.metersAbbr,areaAbbr:window.jimuNls.units.squareMetersAbbr},miles:{lengthUnit:"miles",areaUnit:"square-miles",bufferUnit:"UNIT_STATUTE_MILE",lengthAbbr:window.jimuNls.units.milesAbbr,areaAbbr:window.jimuNls.units.squareMilesAbbr},
yards:{lengthUnit:"yards",areaUnit:"square-yards",bufferUnit:"UNIT_SURVEY_YARD",lengthAbbr:window.jimuNls.units.yardsAbbr,areaAbbr:window.jimuNls.units.squareYardsAbbr},kilometers:{lengthUnit:"kilometers",areaUnit:"square-kilometers",bufferUnit:"UNIT_KILOMETER",lengthAbbr:window.jimuNls.units.kilometersAbbr,areaAbbr:window.jimuNls.units.squareKilometerAbbr}};y.switchToTab=function(p,n){p.selectTab(n)};y.removeNegativeExponents=function(p){return 1<p.toString().toLowerCase().split("e-").length?0:p};
y.applyRounding=function(p,n){if(isNaN(n)||null===n)n=2;var d=Math.pow(10,n);p=Math.round(p*d)/d;p=p.toFixed(n);return v.localizeNumber(p)};y.getLengthOfGeometry=function(p,n){var d;var a=0;(d=C.simplify(p))&&(a=p.spatialReference.isWebMercator()||4326===p.spatialReference.wkid?C.geodesicLength(d,n):C.planarLength(d,n));return a};y.getAreaOfGeometry=function(p,n){var d=C.simplify(p);var a=0;d&&(a=p.spatialReference.isWebMercator()||4326===p.spatialReference.wkid?C.geodesicArea(d,n):C.planarArea(d,
n));return a};y.deleteFeatures=function(p,n){var d=new E;D({url:p+"/deleteFeatures",content:{where:n,f:"json"}},{usePost:!0}).then(B.hitch(this,function(a){d.resolve(a)}),function(){d.reject(!1)});return d.promise};y.getUnitsAbbreviation=function(p,n){var d="";if("esriGeometryPolygon"===p||"polygon"===p)d=y.units[n].areaAbbr;else if("esriGeometryPolyline"===p||"polyline"===p)d=y.units[n].lengthAbbr;return d};y.roundProjectCostValue=function(p,n){var d=0;n=parseFloat(n);switch(p){case "nearestWholeNumber":d=
n.toFixed();break;case "nearestTen":d=eval(n.toFixed())/10;d=10*eval(d.toFixed());break;case "nearestHundred":d=eval(n.toFixed())/100;d=100*eval(d.toFixed());break;case "nearestThousand":d=eval(n.toFixed())/1E3;d=1E3*eval(d.toFixed());break;case "nearestTenThousands":d=eval(n.toFixed())/1E4;d=1E4*eval(d.toFixed());break;default:d=n.toFixed(2)}return v.localizeNumber(d)};y.getPrjAssetTableFields=function(p){var n={};w.forEach(p.fields,B.hitch(this,function(d){"ASSETGUID"===d.name.toUpperCase()?n.ASSETGUID=
d.name:"COSTEQUATION"===d.name.toUpperCase()?n.COSTEQUATION=d.name:"SCENARIO"===d.name.toUpperCase()?n.SCENARIO=d.name:"TEMPLATENAME"===d.name.toUpperCase()?n.TEMPLATENAME=d.name:"GEOGRAPHYGUID"===d.name.toUpperCase()?n.GEOGRAPHYGUID=d.name:"PROJECTGUID"===d.name.toUpperCase()&&(n.PROJECTGUID=d.name)}));n.OBJECTID=p.objectIdField;return n};y.getPrjLayerFields=function(p){var n={};w.forEach(p.fields,B.hitch(this,function(d){"PROJECTNAME"===d.name.toUpperCase()?n.PROJECTNAME=d.name:"DESCRIPTION"===
d.name.toUpperCase()?n.DESCRIPTION=d.name:"TOTALASSETCOST"===d.name.toUpperCase()?n.TOTALASSETCOST=d.name:"GROSSPROJECTCOST"===d.name.toUpperCase()?n.GROSSPROJECTCOST=d.name:"GLOBALID"===d.name.toUpperCase()&&(n.GLOBALID=d.name)}));return n};y.getPrjMultiplierFields=function(p){var n={};w.forEach(p.fields,B.hitch(this,function(d){"DESCRIPTION"===d.name.toUpperCase()?n.DESCRIPTION=d.name:"TYPE"===d.name.toUpperCase()?n.TYPE=d.name:"VALUE"===d.name.toUpperCase()?n.VALUE=d.name:"COSTINDEX"===d.name.toUpperCase()?
n.COSTINDEX=d.name:"PROJECTGUID"===d.name.toUpperCase()&&(n.PROJECTGUID=d.name)}));n.OBJECTID=p.objectIdField;return n};y.showMessage=function(p){var n=new q({message:p});n.message=p;return n};y.evaluate=function(p){return(new Function("return "+p))()};y.validateEquation=function(p){if(""===p||-1<p.indexOf("\x26")||-1<p.indexOf("|")||-1<p.indexOf(","))return!1;p=p.replace(/{measure}/ig,1);p=p.replace(/{totalmeasure}/ig,1);p=p.replace(/{totalcount}/ig,1);if(-1!==p.indexOf("{")||-1!==p.indexOf("}"))return!1;
try{var n=y.evaluate(p);return isFinite(n)?!0:!1}catch(d){return!1}};y.setFirstAndLastWBFocusNode=function(p,n,d){v.initFirstFocusNode(p,n);x.focus(n);v.initLastFocusNode(p,d)};return y})},"widgets/CostAnalysis/setting/ReportSettings":function(){define("dojo/_base/declare jimu/dijit/Popup jimu/dijit/SimpleTable dijit/_WidgetBase dojo/Evented dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./ReportSettings.html ../utils dojo/_base/array dojo/_base/lang jimu/dijit/Message dijit/form/TextBox".split(" "),
function(D,C,E,B,q,w,v,x,y,p,n,d,a){return D([B,w,q,v],{templateString:x,popup:null,_reportSettingsTable:null,_tableTitleFields:{Layer:"layerName","Feature Template":"TEMPLATENAME",Geography:"GEOGRAPHY",Scenario:"SCENARIO",Count:"count",Length:"Length",Area:"Area",Equation:"COSTEQUATION",Cost:"cost"},baseClass:"jimu-widget-cost-analysis-report-settings",constructor:function(b){n.mixin(this,b)},startup:function(){this._init()},postCreate:function(){this.popup=null;this.inherited(arguments)},_init:function(){this.isLoad?
(this._addAbbreviationForTitle(),this._createDataForInitialLoad(),this.emit("onInitialLoad",this.previousReportSettings)):(this.previousReportSettings||(this._addAbbreviationForTitle(),this._createDataForInitialLoad()),this._createReportSettingsTable(),this._createReportSettingsPopup())},_addAbbreviationForTitle:function(){var b;for(b in this._tableTitleFields)if("Length"===b){var e=y.units[this.config.generalSettings.measurementUnit].lengthAbbr;this._tableTitleFields[b+" ("+e+")"]=this._tableTitleFields[b];
delete this._tableTitleFields[b]}else"Area"===b?(e=y.units[this.config.generalSettings.measurementUnit].areaAbbr,this._tableTitleFields[b+" ("+e+")"]=this._tableTitleFields[b],delete this._tableTitleFields[b]):"Cost"===b&&(e=this.config.generalSettings.currency,this._tableTitleFields[b+" ("+e+")"]=this._tableTitleFields[b],delete this._tableTitleFields[b])},_createReportSettingsTable:function(){this.popup=new C({titleLabel:this.nls.generalSettings.reportSettings.reportSettingsPopupTitle,content:this.domNode,
width:800,height:500,autoHeight:!0,"class":this.baseClass,buttons:[{label:this.nls.common.ok,onClick:n.hitch(this,function(){this.onOkButtonClicked()})},{label:this.nls.common.cancel}]})},onOkButtonClicked:function(){var b=this._getReportSettings(),e=[];p.forEach(b.reportSettings,function(f){""!==f.columnLabel&&e.push(f.columnLabel)});var l=e.filter(n.hitch(this,function(f,t,g){return g.indexOf(f)!==t}));0<l.length?new d({message:this.nls.generalSettings.reportSettings.duplicateMsg+":"+l[0]}):(this.emit("okButtonClicked",
b),this.popup.close())},_createReportSettingsPopup:function(){this._reportSettingsTable=new E({fields:[{name:"showColumn",title:this.nls.generalSettings.reportSettings.checkboxLabel,type:"checkbox",editable:!1,width:"15%"},{name:"columnTitle",title:this.nls.generalSettings.reportSettings.layerTitle,type:"text",editable:!1,width:"35%"},{name:"columnLabel",title:this.nls.generalSettings.reportSettings.columnLabel,width:"35%",type:"empty"},{name:"actions",title:this.nls.common.actions,width:"15%",type:"actions",
actions:["up","down"]}],selectable:!1});this._reportSettingsTable.placeAt(this.reportSettingsTableNode);this._reportSettingsTable.startup();this.previousReportSettings.hasOwnProperty("reportName")&&this.reportNameNode.set("value",this.previousReportSettings.reportName);this._populateReportSettings()},_createDataForInitialLoad:function(){this.previousReportSettings={};this.previousReportSettings.reportSettings=[];for(var b in this._tableTitleFields)this.previousReportSettings.reportSettings.push({isVisible:!0,
columnTitle:b,columnLabel:"",fieldToMap:this._tableTitleFields[b]});this.previousReportSettings.reportName=""},_populateReportSettings:function(){p.forEach(this.previousReportSettings.reportSettings,n.hitch(this,function(b){this._addNewRow(b)}))},_addNewRow:function(b){this._createRow(b)},_createRow:function(b){var e=this._reportSettingsTable.addRow({showColumn:b.isVisible,columnTitle:b.columnTitle});e.tr.labelTextBox=new a;e.tr.labelTextBox.set("value",b.columnLabel);e.tr.labelTextBox.placeAt(e.tr.cells[2])},
_getReportSettings:function(){var b={};var e=this._reportSettingsTable.getData();var l=this._reportSettingsTable.getRows();b.reportSettings=[];p.forEach(e,n.hitch(this,function(f,t){var g={};g.isVisible=f.showColumn;g.columnTitle=f.columnTitle;g.columnLabel=l[t].labelTextBox.get("value");g.fieldToMap=this._getFieldTitleAbbr(f.columnTitle);b.reportSettings.push(g)}));b.reportName=this.reportNameNode.get("value");return b},_getFieldTitleAbbr:function(b){return-1<b.indexOf("Length")?"Length":-1<b.indexOf("Area")?
"Area":-1<b.indexOf("Cost")?"cost":this._tableTitleFields[b]}})})},"widgets/CostAnalysis/setting/ProjectSettings":function(){define("dojo/_base/declare jimu/BaseWidget dijit/_WidgetsInTemplateMixin dojo/text!./ProjectSettings.html dojo/_base/lang dojo/on dojo/_base/array dojo/Evented dojo/string esri/layers/FeatureLayer dojo/promise/all dojo/Deferred jimu/dijit/CheckBox".split(" "),function(D,C,E,B,q,w,v,x,y,p,n,d){return D([C,E,x],{baseClass:"jimu-widget-cost-analysis-project-settings",templateString:B,
_configuredFieldsTable:null,_prevCostingGeometryLayerValue:"",_prevProjectLayerValue:"",_prevPointLayerCentroidValue:"",_prevProjectAssetsTableValue:"",_prevProjectMultiplierTableValue:"",_defaultSelectOption:{},_assetsTableRequiredFields:{},_multiplierTableRequiredFields:{},constructor:function(a){q.mixin(this,a)},postMixInProperties:function(){this.nls.common={};q.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._configuredFieldsTable=null;this._prevProjectMultiplierTableValue=
this._prevProjectAssetsTableValue=this._prevPointLayerCentroidValue=this._prevProjectLayerValue=this._prevCostingGeometryLayerValue="";this.own(w(this.costingGeometryHelp,"click",q.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.costingGeometryHelp)})));this.own(w(this.fieldToLabelGeographyHelp,"click",q.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.fieldToLabelGeographyHelp)})));this.own(w(this.projectAssetsTableHelp,"click",q.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.projectAssetsTableHelp)})));
this.own(w(this.projectMultiplierTableHelp,"click",q.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.projectMultiplierTableHelp)})));this.own(w(this.projectLayerHelp,"click",q.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.projectLayerHelp)})));this.own(w(this.pointLayerCentroidHelp,"click",q.hitch(this,function(){this.appUtils.showMessage(this.nls.projectSettings.pointLayerHintText)})));this._assetsTableRequiredFields={ASSETGUID:["esriFieldTypeGUID"],
COSTEQUATION:["esriFieldTypeString"],SCENARIO:["esriFieldTypeString"],TEMPLATENAME:["esriFieldTypeString"],GEOGRAPHYGUID:["esriFieldTypeGUID"],PROJECTGUID:["esriFieldTypeGUID"]};this._multiplierTableRequiredFields={DESCRIPTION:["esriFieldTypeString"],TYPE:["esriFieldTypeString"],VALUE:["esriFieldTypeDouble","esriFieldTypeSingle"],COSTINDEX:["esriFieldTypeSmallInteger","esriFieldTypeInteger"],PROJECTGUID:["esriFieldTypeGUID"]};this._defaultSelectOption={value:"",label:this.nls.projectSettings.selectLabel};
this.inherited(arguments);this._init()},getConfig:function(){return{costingGeometryLayer:this._prevCostingGeometryLayerValue,geographyField:this.fieldToLabelGeography.value,assetTable:this._prevProjectAssetsTableValue,multiplierAdditionalCostTable:this._prevProjectMultiplierTableValue,projectLayer:this._prevProjectLayerValue,pointLayerCentroid:this._prevPointLayerCentroidValue}},validate:function(){var a=!0;var b="";""===this._prevProjectAssetsTableValue&&""===this._prevProjectMultiplierTableValue&&
""===this._prevProjectLayerValue||""!==this._prevProjectAssetsTableValue&&""!==this._prevProjectMultiplierTableValue&&""!==this._prevProjectLayerValue||(b=[],""===this._prevProjectAssetsTableValue&&b.push(this.nls.projectSettings.projectAssetsTableLabel),""===this._prevProjectMultiplierTableValue&&b.push(this.nls.projectSettings.projectMultiplierTableLabel),""===this._prevProjectLayerValue&&b.push(this.nls.projectSettings.projectLayerLabel),b=b.join(" and "),a=!1,b=y.substitute(this.nls.projectSettings.errorMessages.invalidConfiguration,
{fieldsString:q.trim(b)}));return{isValid:a,errorMessage:b}},_init:function(){var a=[];var b=[];var e=[];this.map&&this.map.itemInfo&&this.map.itemInfo.itemData&&(this.map.itemInfo.itemData.operationalLayers&&0<this.map.itemInfo.itemData.operationalLayers.length&&(a=this.map.itemInfo.itemData.operationalLayers),this.map.itemInfo.itemData.tables&&0<this.map.itemInfo.itemData.tables.length&&(b=this.map.itemInfo.itemData.tables));this._filterValidLayersForDropDown(a);this._populatePointLayerDropdown(a);
v.forEach(b,q.hitch(this,function(l){var f=new d;e.push(f);l=new p(l.url);w(l,"load",q.hitch(this,function(t){v.forEach(this.map.itemInfo.itemData.tables,q.hitch(this,function(g){if(g.url===t.layer.url)return t.layer.id=g.id,t.layer.title=g.title,!0}));f.resolve(t.layer)}));w(l,"error",q.hitch(this,function(){f.resolve(null)}))}));n(e).then(q.hitch(this,function(l){this._populateTablesForDropDown(l)}));w(this.fieldToLabelGeography,"change",q.hitch(this,function(l){this.emit("onGeographyFieldChange",
l,this.costingGeometryLayerDropDown.getValue())}));this._attachingEvents();this._setConfig()},_filterValidLayersForDropDown:function(a){var b=[this._defaultSelectOption];var e=[this._defaultSelectOption];this._costingGeometryLayerFieldOptions={defaultSelectOption:{options:[this._defaultSelectOption]}};a=a&&0<a.length?this._getLayerOptions(a,b,e):{costingGeometryLayerOptions:b,projectLayerOptions:e};this.costingGeometryLayerDropDown.set("options",q.clone(a.costingGeometryLayerOptions));this.projectLayerDropDown.set("options",
q.clone(a.projectLayerOptions))},_getLayerOptions:function(a,b,e){var l;v.forEach(a,q.hitch(this,function(f){if(f.layerObject&&f.layerObject.capabilities)l=f.layerObject.capabilities;else return!0;"esriGeometryPolygon"===f.layerObject.geometryType&&-1<l.indexOf("Query")&&this._hasGlobalIDField(f)&&(b.push({value:f.id,label:f.title}),"ArcGISFeatureLayer"===f.layerType&&(-1<l.indexOf("Editing")||-1<l.indexOf("Update"))&&-1<l.indexOf("Create")&&-1<l.indexOf("Delete")&&this._isValidProjectLayer(f)&&e.push({value:f.id,
label:f.title}))}));return{costingGeometryLayerOptions:b,projectLayerOptions:e}},_isValidProjectLayer:function(a){var b;var e=["esriFieldTypeDouble","esriFieldTypeSingle"];a=a.layerObject.fields;var l=[];for(b in a){var f=a[b].type;var t=a[b].name.toUpperCase();("PROJECTNAME"===t&&"esriFieldTypeString"===f||"DESCRIPTION"===t&&"esriFieldTypeString"===f||"TOTALASSETCOST"===t&&-1<e.indexOf(f)||"GROSSPROJECTCOST"===t&&-1<e.indexOf(f)||"esriFieldTypeGlobalID"===f)&&l.push(t)}return 5===l.length?!0:!1},
_hasGlobalIDField:function(a){var b=!1;(a=a.layerObject.fields||a.fields)&&0<a.length&&v.some(a,q.hitch(this,function(e){if("esriFieldTypeGlobalID"===e.type)return b=!0}));return b},_populateTablesForDropDown:function(a){var b=[this._defaultSelectOption];var e=[this._defaultSelectOption];a&&0<a.length&&v.forEach(a,q.hitch(this,function(l){l&&this._isValidTable(l,"projectAssets")&&b.push({value:l.id||l.name,label:l.title||l.name});l&&this._isValidTable(l,"projectMultiplier")&&e.push({value:l.id||l.name,
label:l.title||l.name})}));this.projectAssetsTable.addOption(q.clone(b));this.projectMultiplierTable.addOption(q.clone(e));this._setSelectedValuesInTables()},_isValidTable:function(a,b){var e,l=[];var f=!1;(a=a.fields)&&0<a.length&&v.some(a,q.hitch(this,function(t){e=t.name.toUpperCase();if("projectAssets"===b&&this._assetsTableRequiredFields[e]&&-1<this._assetsTableRequiredFields[e].indexOf(t.type)&&!t.domain){if(l.push(t.name),l.length===Object.keys(this._assetsTableRequiredFields).length)return f=
!0}else if("projectMultiplier"===b&&this._multiplierTableRequiredFields[e]&&-1<this._multiplierTableRequiredFields[e].indexOf(t.type)&&!t.domain&&(l.push(t.name),l.length===Object.keys(this._multiplierTableRequiredFields).length))return f=!0}));return f},_setSelectedValuesInTables:function(){var a;this.config.assetTable?(a=this.layerInfosObj.getTableInfoById(this.config.assetTable))&&a.layerObject?(this.projectAssetsTable.set("value",this.config.assetTable),this._prevProjectAssetsTableValue=this.config.assetTable):
(this.projectAssetsTable.set("value",""),this._prevProjectAssetsTableValue=""):(this.projectAssetsTable.set("value",""),this._prevProjectAssetsTableValue="");this.config.multiplierAdditionalCostTable?(a=this.layerInfosObj.getTableInfoById(this.config.multiplierAdditionalCostTable))&&a.layerObject?(this.projectMultiplierTable.set("value",this.config.multiplierAdditionalCostTable),this._prevProjectMultiplierTableValue=this.config.multiplierAdditionalCostTable):(this.projectMultiplierTable.set("value",
""),this._prevProjectMultiplierTableValue=""):(this.projectMultiplierTable.set("value",""),this._prevProjectMultiplierTableValue="")},_setConfig:function(){if(this.config.costingGeometryLayer&&this.layerInfosObj.getLayerInfoById(this.config.costingGeometryLayer))var a=this.layerInfosObj.getLayerInfoById(this.config.costingGeometryLayer).layerObject;a?(this.costingGeometryLayerDropDown.set("value",this.config.costingGeometryLayer),this._prevCostingGeometryLayerValue=this.config.costingGeometryLayer,
this._createCostingGeometryLayerFieldOptions(a,this._costingGeometryLayerFieldOptions),this.fieldToLabelGeography.options=[],this.fieldToLabelGeography.options.length=0,this.config.geographyField?(this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions[this.config.costingGeometryLayer].options),this.fieldToLabelGeography.set("disabled",!1)):(this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions.defaultSelectOption.options),this.fieldToLabelGeography.set("disabled",
!0))):(this.costingGeometryLayerDropDown.set("value",""),this._prevCostingGeometryLayerValue="",this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions.defaultSelectOption.options),this.fieldToLabelGeography.set("disabled",!0),this.fieldToLabelGeography.set("value",""));this.config.projectLayer&&this.projectLayerDropDown&&1<this.projectLayerDropDown.options.length?(this.projectLayerDropDown.set("value",this.config.projectLayer),this._prevProjectLayerValue=this.config.projectLayer):
(this.projectLayerDropDown.set("value",""),this._prevProjectLayerValue="");this.config.pointLayerCentroid&&this.pointLayerCentroidDropDown&&1<this.pointLayerCentroidDropDown.options.length?(this.pointLayerCentroidDropDown.set("value",this.config.pointLayerCentroid),this._prevPointLayerCentroidValue=this.config.pointLayerCentroid):(this.pointLayerCentroidDropDown.set("value",""),this._prevPointLayerCentroidValue="")},_attachingEvents:function(){this.own(w(this.costingGeometryLayerDropDown,"change",
q.hitch(this,function(a){a!==this.costingGeometryLayerDropDown.value&&this.costingGeometryLayerDropDown.set("value",a);""===a||this._costingGeometryLayerFieldOptions[a]||(a=this.layerInfosObj.getLayerInfoById(a))&&a.layerObject&&(a=a.layerObject,this._createCostingGeometryLayerFieldOptions(a,this._costingGeometryLayerFieldOptions));this._onDropdownChange(this.costingGeometryLayerDropDown,"costingGeometryLayer","layer")})));this.own(w(this.projectLayerDropDown,"change",q.hitch(this,function(){this._onDropdownChange(this.projectLayerDropDown,
"projectLayer","layer");this._enableOrDisablePointLayerDropdown()})));this.own(w(this.projectAssetsTable,"change",q.hitch(this,function(){this._onDropdownChange(this.projectAssetsTable,"projectAssets","table")})));this.own(w(this.projectMultiplierTable,"change",q.hitch(this,function(){this._onDropdownChange(this.projectMultiplierTable,"projectMultiplier","table")})));this.own(w(this.pointLayerCentroidDropDown,"change",q.hitch(this,function(){this._onDropdownChange(this.pointLayerCentroidDropDown,
"pointLayerCentroidDropdown","layer")})))},_onDropdownChange:function(a,b,e){("layer"===e?this._validateDuplicateSelection(a,this.projectLayerDropDown,this.costingGeometryLayerDropDown):this._validateDuplicateSelection(a,this.projectAssetsTable,this.projectMultiplierTable))?this._setNewDropdownValue(a,b):this._restorePreviousDropdownValue(a,b)},_validateDuplicateSelection:function(a,b,e){return a.value&&b.value===e.value?(a=y.substitute(this.nls.projectSettings.errorMessages.duplicateLayerSelection,
{layerName:q.trim(a.tableNode.innerText)}),this.emit("onDuplicateLayerSelect",a),!1):!0},_setNewDropdownValue:function(a,b){switch(b){case "costingGeometryLayer":this._onCostingGeometryLayerDropDownChange();this._prevCostingGeometryLayerValue!==a.value&&(this.emit("onLayerSelected",{lastSelectedId:this._prevCostingGeometryLayerValue,currentSelectedLayerId:a.value}),this.emit("onGeographyFieldChange",this.fieldToLabelGeography.get("value"),this.costingGeometryLayerDropDown.get("value")),this._prevCostingGeometryLayerValue=
a.value);break;case "projectLayer":this._onProjectLayerDropDownChange();this._prevProjectLayerValue!==a.value&&(this.emit("onLayerSelected",{lastSelectedId:this._prevProjectLayerValue,currentSelectedLayerId:a.value}),this._prevProjectLayerValue=a.value);break;case "pointLayerCentroidDropdown":this._prevPointLayerCentroidValue!==a.value&&(this.emit("onLayerSelected",{lastSelectedId:this._prevPointLayerCentroidValue,currentSelectedLayerId:a.value}),this._prevPointLayerCentroidValue=a.value);break;case "projectAssets":this._prevProjectAssetsTableValue=
a.value;break;case "projectMultiplier":this._prevProjectMultiplierTableValue=a.value}},_restorePreviousDropdownValue:function(a,b){switch(b){case "costingGeometryLayer":a.set("value",this._prevCostingGeometryLayerValue);break;case "projectLayer":a.set("value",this._prevProjectLayerValue);break;case "projectAssets":a.set("value",this._prevProjectAssetsTableValue);break;case "projectMultiplier":a.set("value",this._prevProjectMultiplierTableValue);break;case "pointLayerCentroidDropdown":a.set("value",
this._prevPointLayerCentroidValue)}},_createCostingGeometryLayerFieldOptions:function(a,b){var e=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"];a&&a.fields&&0<a.fields.length?(b[a.id]||(b[a.id]={},b[a.id].options=[]),v.forEach(a.fields,q.hitch(this,function(l){-1<e.indexOf(l.type)&&b[a.id].options.push({value:l.name,label:l.alias?l.alias:l.name})}))):b[a.id].options.push([this._defaultSelectOption])},_onCostingGeometryLayerDropDownChange:function(){this.fieldToLabelGeography.options=
[];this.fieldToLabelGeography.options.length=0;var a=this.costingGeometryLayerDropDown.value;""!==a?(this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions[a].options),this.fieldToLabelGeography.set("disabled",!1)):(this.fieldToLabelGeography.set("options",this._costingGeometryLayerFieldOptions.defaultSelectOption.options),this.fieldToLabelGeography.set("disabled",!0));this.config.geographyField?this.fieldToLabelGeography.set("value",this.config.geographyField,!1):this.fieldToLabelGeography.set("value",
"",!1)},_onProjectLayerDropDownChange:function(){var a;var b={idFieldOptions:[this._defaultSelectOption],stringFieldOptions:[this._defaultSelectOption],costFieldOptions:[this._defaultSelectOption]};this.projectLayerDropDown.value&&(a=this.layerInfosObj.getLayerInfoById(this.projectLayerDropDown.value))&&a.layerObject&&(a=a.layerObject,b=this._getTableDropdownOptions(a.fields,b));this.emit("onProjectLayerSelected",this.projectLayerDropDown.value)},_getTableDropdownOptions:function(a,b){var e;var l=
["esriFieldTypeOID","esriFieldTypeGlobalID"];var f=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];v.forEach(a,q.hitch(this,function(t){e={value:t.name,label:t.alias?t.alias:t.name};-1<l.indexOf(t.type)?b.idFieldOptions.push(e):-1<f.indexOf(t.type)?b.costFieldOptions.push(e):"esriFieldTypeString"===t.type&&b.stringFieldOptions.push(e)}));return b},_isValidFieldType:function(a){var b,e=!1;v.some(a.fields,q.hitch(this,function(l){b=l.name.toUpperCase();
if("PROJECTID"===b&&"esriFieldTypeGUID"===l.type)return e=!0;e=!1}));return e},_isEditable:function(a){a=a.capabilities;return(-1<a.indexOf("Editing")||-1<a.indexOf("Update"))&&-1<a.indexOf("Create")&&-1<a.indexOf("Delete")?!0:!1},_populatePointLayerDropdown:function(a){var b=[];b.push(this._defaultSelectOption);this._getValidPointLayersOptions(b,a);this.pointLayerCentroidDropDown.set("options",q.clone(b));this._prevPointLayerCentroidValue=this.projectLayerDropDown.getValue();this._enableOrDisablePointLayerDropdown()},
_getValidPointLayersOptions:function(a,b){v.forEach(b,q.hitch(this,function(e){e.hasOwnProperty("layerObject")&&(e=e.layerObject,e.hasOwnProperty("geometryType")&&"esriGeometryPoint"===e.geometryType&&this._isEditable(e)&&this._isValidFieldType(e)&&"Feature Layer"===e.type&&a.push({value:e.id,label:e.title||e.name}))}))},_enableOrDisablePointLayerDropdown:function(){var a=this.projectLayerDropDown.getValue();""!==a&&null!==a&&void 0!==a?this.pointLayerCentroidDropDown.set("disabled",!1):(this.pointLayerCentroidDropDown.set("disabled",
!0),this.pointLayerCentroidDropDown.set("value",""))}})})},"widgets/CostAnalysis/setting/LayerSettings":function(){define("dojo/_base/declare jimu/BaseWidget dojo/Evented jimu/dijit/Message dijit/_WidgetsInTemplateMixin dojo/text!./LayerSettings.html dojo/_base/lang jimu/dijit/SimpleTable jimu/dijit/Popup dojo/_base/array dojo/query dijit/registry dojo/dom-class dojo/dom-construct dojo/_base/html dojo/on dojo/dom-attr ./AttributeSettings".split(" "),function(D,C,E,B,q,w,v,x,y,p,n,d,a,b,e,l,f,t){return D([C,
E,q],{templateString:w,attributeSettingPopup:null,baseClass:"jimu-widget-cost-analysis-layer-settings",_layerSettingsTable:null,constructor:function(g){v.mixin(this,g)},postMixInProperties:function(){this.nls.common={};v.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.attributeSettingPopup=this._layerSettingsTable=null},setConfig:function(){this._filterLayers()},getConfig:function(){return this._getUpdateLayerSettings()},_getUpdateLayerSettings:function(){if(this._layerSettingsTable){var g=
this._layerSettingsTable.getData();return g=this._getSelectedFields(g)}},_createlayerSettingsGrid:function(){this._layerSettingsTable=new x({fields:[{name:"editable",title:this.nls.layerSettings.EditableLayerHeaderTitle,type:"checkbox",editable:!1,width:"16%"},{name:"title",title:this.nls.layerSettings.layerNameHeaderTitle,type:"text",editable:!1,width:"64%"},{name:"fieldPicker",title:this.nls.layerSettings.fieldPickerHeaderTitle,type:"empty",editable:!1,hidden:!0,width:"0%"},{name:"selectable",title:"",
type:"checkbox",editable:!1,hidden:!0,width:"0%"},{name:"id",title:"",type:"text",editable:!1,hidden:!0,width:"0%"},{name:"url",title:"",type:"text",editable:!1,hidden:!0,width:"0%"},{name:"attributeSetting",title:this.nls.layerSettings.attributeSettingHeaderTitle,type:"empty",editable:!1,width:"20%"}],selectable:!0});this._layerSettingsTable.placeAt(this.layerSettingsTableNode);e.setStyle(this._layerSettingsTable.domNode,{height:"100%"});this._layerSettingsTable.startup()},onLayerSettingChange:function(g){var r=
{};if(g=this._layerSettingsTable.getRowData(g))r.layerId=g.id,r.editable=null===g.editable?!1:g.editable;this.emit("onLayerSettingUpdate",r)},_filterLayers:function(){var g,r=[];var z=this.map.itemInfo.itemData.operationalLayers;0===z.length?a.remove(this.noAssetLayersAvailable,"esriCTHidden"):(a.add(this.noAssetLayersAvailable,"esriCTDisabled"),this._createlayerSettingsGrid(),this._setTableHeadTooltip(),r=[this.config.projectSettings.costingGeometryLayer||"",this.config.projectSettings.projectLayer||
"",this.config.projectSettings.pointLayerCentroid||""],this.config&&0<this.config.layerSettings.length&&p.forEach(this.config.layerSettings,v.hitch(this,function(h){(g=this.map.getLayer(h.id))&&(!g.errors||0>=g.errors.length)&&(r.push(h.id),g.editable=this._checkEditCapabilities(g),this._createFieldsRows(h,g.editable))})),p.forEach(z,v.hitch(this,function(h){h.errors&&!(0>=h.errors.length)||"ArcGISFeatureLayer"!==h.layerType||h.hasOwnProperty("featureCollection")||-1!==r.indexOf(h.id)||(h.selectable=
!0,h.editable=this._checkEditCapabilities(h.layerObject),this._createFieldsRows(h,h.editable))})));this.updateAttributeButtonState(this.config.projectSettings.projectLayer)},_checkEditCapabilities:function(g){return g&&g.capabilities&&-1!==g.capabilities.indexOf("Delete")&&-1!==g.capabilities.indexOf("Create")&&-1!==g.capabilities.indexOf("Update")&&g.globalIdField?!0:!1},_getInvalidLayersMsg:function(g){var r=[];var z="";g=this.layerInfosObj.getLayerInfoById(g).layerObject;g.capabilities?(-1===g.capabilities.indexOf("Create")&&
r.push("Create"),-1===g.capabilities.indexOf("Update")&&r.push("Update"),-1===g.capabilities.indexOf("Delete")&&r.push("deleteColumnLabel")):r=["Create","Update","deleteColumnLabel"];0<r.length&&(z=this.nls.layerSettings.missingCapabilitiesMsg,z+="\x3cbr/\x3e",p.forEach(r,v.hitch(this,function(h){z="deleteColumnLabel"===h?z+("\x3cli\x3e"+this.nls.layerSettings[h]+"\x3c/li\x3e"):z+("\x3cli\x3e"+this.nls.layerSettings[h.toLowerCase()]+"\x3c/li\x3e")})));g.globalIdField||(z+="\x3cbr/\x3e",z+=this.nls.layerSettings.missingGlobalIdMsg);
return z},_enableDisableEditableCheckbox:function(g,r,z){var h;var m=n(".simple-table-cell ",g)[0];m.children[0]&&(h=d.byNode(m.children[0]));z?h.setStatus(!0):(f.set(h.domNode,"title",this.nls.layerSettings.disableEditableCheckboxTooltip),h.setValue(!1),h.setStatus(!1),a.add(h.domNode,"jimu-float-leading"),g.errorDiv||(r=this._getInvalidLayersMsg(r.id),g.errorDiv=b.create("div",{"class":"esriCTFieldError"},m),f.set(g.errorDiv,"errorMessage",r),g.errorSpan=b.create("span",{"class":"jimu-icon jimu-icon-error"},
g.errorDiv),this.own(l(g.errorDiv,"click",v.hitch(this,function(c){c=f.get(c.currentTarget,"errorMessage");B({message:c})})))))},_createFieldsRows:function(g,r){g.editable&&(g.selectable=g.editable);var z=this._layerSettingsTable.addRow({title:g.title?g.title:g.name,editable:this._existingInLayerSettings(g.id)?g.editable:!1,selectable:g.selectable,id:g.id,url:g.url});z.tr.layerInfo=this.map._layers[g.id];z.tr.attributeSettingFields=g.attributeSetting;var h=n(".jimu-checkbox",z.tr.children[3]);var m=
n(".jimu-checkbox",z.tr.children[0]);g.editable&&this._setCheckBoxState(m[0],h[0]);setTimeout(v.hitch(this,function(){this._setHeaderCheckBoxState()}),200);d.byNode(m[0]).set("checked",this._existingInLayerSettings(g.id)?g.editable:!1);this.own(l(d.byNode(m[0]),"change",v.hitch(this,function(c){this._setCheckBoxState(m[0],h[0]);this._setHeaderCheckBoxState();this.onLayerSettingChange(m[0].parentElement.parentElement);this._addAttributeSettingIcon(z.tr,g,c)})));this._enableDisableEditableCheckbox(z.tr,
g,r);this._addAttributeSettingIcon(z.tr,g,r)},_addAttributeSettingIcon:function(g,r,z){var h=n(".simple-table-cell",g)[6];b.empty(h);h&&(z?(g.attributeSetting=b.create("div",{"class":"esriCTAttributeSettingIcon"},h),this.projectLayer&&""!==this.projectLayer||a.add(g.attributeSetting,"esriCTAttributeSettingDisableIcon"),this.own(l(g.attributeSetting,"click",v.hitch(this,function(m){a.contains(m.currentTarget,"esriCTAttributeSettingDisableIcon")||(m=g.layerInfo,this._curRow=g,m||(m={selectedFields:null},
g.layerInfo=m),m.layerLabel="",m.layer=this.layerInfosObj.getLayerInfoById(r.id),this._createAttributeSettingsPopup({nls:this.nls,featureLayer:m.layer.layerObject,selectedFields:g.attributeSettingFields,layerGridInfo:m,config:this.config,projectLayer:this.projectLayer}))})))):g.attributeSetting=b.create("div",{"class":"esriCTAttributeSettingDisableIcon"},h))},updateAttributeButtonState:function(g){var r=!1,z=n(".esriCTAttributeSettingIcon",this.domNode);g&&""!==g||(r=!0);z&&0<z.length&&p.forEach(z,
v.hitch(this,function(h){r?a.add(h,"esriCTAttributeSettingDisableIcon"):a.remove(h,"esriCTAttributeSettingDisableIcon")}))},_createAttributeSettingsPopup:function(g){g.map=this.map;var r=b.create("button",{title:this.nls.common.ok});r.label=this.nls.common.ok;var z=b.create("button",{title:this.nls.common.cancel});z.label=this.nls.common.cancel;this._attributeSettings=new t(g);this._attributeSettings.startup();var h=new y({titleLabel:this.nls.layerSettings.attributeSettingsPopupTitle,content:this._attributeSettings,
width:830,height:500,autoHeight:!0,buttons:[r,z]});r.onClick=v.hitch(this,function(){this._curRow.attributeSettingFields=this._attributeSettings.okButtonClicked();this._attributeSettings.destroy();this._attributeSettings=null;h.close()});z.onClick=v.hitch(this,function(){this._attributeSettings.destroy();this._attributeSettings=null;h.close()})},_setCheckBoxState:function(g,r){g=d.byNode(g);r=d.byNode(r);g.checked?(r.set("checked",!0),r.set("status",!1),r.set("disable",!0),a.add(r.domNode,"jimu-state-disabled")):
(r.set("checked",!0),r.set("status",!0),r.set("disable",!1),a.remove(r.domNode,"jimu-state-disabled"));a.add(r.domNode.children[0],"checked")},_setHeaderCheckBoxState:function(){var g,r=!0;var z=n(".simple-table-title .checkbox",this.domNode)[1];var h=n(".simple-table-title .jimu-checkbox",this.domNode)[1];p.some(this._layerSettingsTable.getRows(),v.hitch(this,function(m){g=n("td.selectable .checked",m);if(0===g.length)return r=!1,!0}));r?(a.add(z,"checked"),d.byNode(h).set("checked",!0)):(a.remove(z,
"checked"),d.byNode(h).set("checked",!1))},updateLayerSettingsTable:function(g){var r=this._layerSettingsTable.getData(),z;g.lastSelectedId&&(z=this.layerInfosObj.getLayerInfoById(g.lastSelectedId))&&z.layerObject&&(z=z.layerObject,z.editable=!1,z.selectable=!0,this._createFieldsRows(z,this._checkEditCapabilities(z)));g.currentSelectedLayerId&&p.some(r,v.hitch(this,function(h,m){if(h.id===g.currentSelectedLayerId)return this._layerSettingsTable.deleteRow(this._layerSettingsTable.tbody.rows[m]),!0}));
this._clearSelectedLayerFields(g.currentSelectedLayerId)},_clearSelectedLayerFields:function(){var g=this._layerSettingsTable.getRows();p.forEach(g,v.hitch(this,function(r){r.attributeSettingFields=[]}))},_getFieldsOptionsObj:function(g){var r=[];var z=g.fields;var h=["esriFieldTypeString"];r.push({label:this.nls.layerSettings.selectLabel,value:""});p.forEach(z,v.hitch(this,function(m){m.editable&&!m.domain&&-1<h.indexOf(m.type)&&37<m.length&&m.name!==g.typeIdField&&r.push({label:m.alias||m.name,
value:m.name})}));return r},_getSelectedFields:function(g){var r=this._layerSettingsTable.getRows();p.forEach(r,v.hitch(this,function(z,h){null===g[h].editable&&(g[h].editable=!1);g[h].attributeSetting=z.attributeSettingFields;delete g[h].fieldPicker}));return g},_setTableHeadTooltip:function(){var g=n(".simple-table-thead th",this.domNode);g.length&&(f.set(g[0],"title",this.nls.layerSettings.EditableLayerHeaderTooltip),f.set(g[1],"title",this.nls.layerSettings.fieldPickerHeaderTooltip),f.set(g[2],
"title",this.nls.layerSettings.layerNameHeaderTooltip),f.set(g[3],"title",this.nls.layerSettings.SelectableLayerHeaderTooltip))},_existingInLayerSettings:function(g){var r=!1;0<this.config.layerSettings.length&&this.config.layerSettings.filter(v.hitch(this,function(z){z.id===g&&(r=!0)}));return r}})})},"widgets/CostAnalysis/setting/AttributeSettings":function(){define("dojo/_base/declare jimu/dijit/SimpleTable jimu/BaseWidget dojo/Evented dojo/_base/lang dojo/dom-class dijit/_WidgetsInTemplateMixin dojo/text!./AttributeSettings.html dojo/on dojo/query dijit/form/Select dojo/_base/array".split(" "),
function(D,C,E,B,q,w,v,x,y,p,n,d){return D([E,B,v],{templateString:x,attributeSettingPopup:null,baseClass:"jimu-widget-cost-analysis-attribute-settings",_layerSettingsTable:null,_projectLayer:"",_entireFieldsArr:[],_selectedFieldsArr:[],_entireFieldObj:[],_projectFieldTypes:[],validFieldTypes:"esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeSmallInteger esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeGUID".split(" "),constructor:function(a){q.mixin(this,a)},postMixInProperties:function(){this.nls.common=
{};q.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._entireFieldsArr=[];this._selectedFieldsArr=[];this._entireFieldObj=[];this._projectFieldTypes=[];this._layerSettingsTable=this.attributeSettingPopup=null;this._projectLayer=this.projectLayer||this.config.projectSettings.projectLayer||"";this._projectLayerAttributeStore="";this.inherited(arguments);this._init()},_init:function(){this._clearData();this._fetchProjectLayerFieldTypes();this._addValidFields();this._createAttributeSettingsFieldsTable();
this._attachEventsToElement();this._displayPreviousConfiguredFields()},_clearData:function(){this._entireFieldsArr=[];this._selectedFieldsArr=[];this._projectFieldTypes=[]},_fetchProjectLayerFieldTypes:function(){var a=this.map.getLayer(this._projectLayer).fields;d.forEach(a,q.hitch(this,function(b){-1<this.validFieldTypes.indexOf(b.type)&&-1===this._projectFieldTypes.indexOf(b.type)&&this._projectFieldTypes.push(b.type)}))},_displayPreviousConfiguredFields:function(){this.selectedFields&&0<this.selectedFields.length&&
(d.forEach(this.selectedFields,q.hitch(this,function(a){this._configuredField=a;this.attributeSettingsAddFields.click()})),this._configuredField=null)},_addValidFields:function(){d.forEach(this.featureLayer.fields,q.hitch(this,function(a){this._entireFieldObj[a.name]=a;"esriFieldTypeGUID"===a.type?(this._entireFieldsArr.push(a.name),this._entireFieldObj[a.name]=q.clone(a),this.selectedFields&&this.selectedFields[a.name]&&(this._entireFieldObj[a.name].label=this.selectedFields[a.name].label)):-1<this.validFieldTypes.indexOf(a.type)&&
-1<this._projectFieldTypes.indexOf(a.type)&&a.editable&&(this._entireFieldsArr.push(a.name),this._entireFieldObj[a.name]=q.clone(a),this.selectedFields&&this.selectedFields[a.name]&&(this._entireFieldObj[a.name].label=this.selectedFields[a.name].label))}));0===this._entireFieldsArr.length&&this._disableAddFieldButton()},_disableAddFieldButton:function(){this._selectedFieldsArr.length===this._entireFieldsArr.length&&w.add(this.attributeSettingsAddFields,"esriCTDisabled")},_addFieldsRow:function(a){var b=
this._attributeSettingsTable.addRow({});if(b.success&&b.tr){b=b.tr;var e=p(".simple-table-cell",b);var l=e[0];e=e[1];this._addFieldDropdown(a,l,b);this._addProjectFieldDropdown(e,b)}},_deleteFieldRow:function(a){w.remove(this.attributeSettingsAddFields,"esriCTDisabled");var b=this._selectedFieldsArr.indexOf(a.fieldDropdownInstance.value);-1<b&&this._selectedFieldsArr.splice(b,1);this._addSelectedFieldInOtherDropdown(a.fieldDropdownInstance.value,null)},_addFieldDropdown:function(a,b,e){a=this._getDistinctFieldsOptionsObj(a);
a=new n({"class":"esriCTFieldChooserDropdown",options:a});a.placeAt(b);a.startup();this._configuredField&&a.set("value",this._configuredField.layerField,!1);e.fieldDropdownInstance=a;this.own(y(a,"change",q.hitch(this,function(l){var f=this._selectedFieldsArr[e.rowIndex];this._selectedFieldsArr[e.rowIndex]=l;this._addSelectedFieldInOtherDropdown(f,l);this._removeSelectedFieldFromOtherDropdown(l);e.projectFieldDropdownInstance.set("options",this._getProjectLayerFields(e));e.projectFieldDropdownInstance.set("value",
e.projectFieldDropdownInstance.options[0])})));this._selectedFieldsArr.push(a.value);this._removeSelectedFieldFromOtherDropdown(a.value);this._disableAddFieldButton()},_addProjectFieldDropdown:function(a,b){var e=this._getProjectLayerFields(b);e=new n({"class":"esriCTFieldChooserDropdown",options:e});e.placeAt(a);e.startup();this._configuredField&&e.set("value",this._configuredField.projectField,!1);b.projectFieldDropdownInstance=e;this.own(y(e,"change",q.hitch(this,function(){})))},_getProjectLayerFields:function(a){var b=
[];a=a.fieldDropdownInstance.getValue();var e=this._getFieldType(a);this._projectLayer&&""!==this._projectLayer&&(a=this.map.getLayer(this._projectLayer).fields,b=[],d.forEach(a,q.hitch(this,function(l){e===l.type?b.push({label:l.alias||l.name,value:l.name}):"esriFieldTypeString"===e&&"esriFieldTypeGlobalID"===l.type?b.push({label:l.alias||l.name,value:l.name}):"esriFieldTypeGUID"!==e||"esriFieldTypeGlobalID"!==l.type&&"esriFieldTypeGUID"!==l.type||b.push({label:l.alias||l.name,value:l.name})})));
return b},_getFieldType:function(a){return this.featureLayer.getField(a).type},_getDistinctFieldsOptionsObj:function(a){var b=[];d.forEach(a,q.hitch(this,function(e){b.push({label:this._entireFieldObj[e].alias||this._entireFieldObj[e].name,value:e})}));return b},_removeSelectedFieldFromOtherDropdown:function(a){var b=this._attributeSettingsTable.getRows();d.forEach(b,q.hitch(this,function(e){a!==e.fieldDropdownInstance.value&&e.fieldDropdownInstance.removeOption(a)}))},_addSelectedFieldInOtherDropdown:function(a,
b){var e=this._attributeSettingsTable.getRows();d.forEach(e,q.hitch(this,function(l){b!==l.fieldDropdownInstance.value&&l.fieldDropdownInstance.addOption({label:this._entireFieldObj[a].alias||this._entireFieldObj[a].name,value:a})}))},okButtonClicked:function(){var a=[];var b=this._attributeSettingsTable.getRows();0===b.length?this.selectedFields=null:(d.forEach(b,q.hitch(this,function(e){a.push({layerField:e.fieldDropdownInstance.value,projectField:e.projectFieldDropdownInstance.value})})),this.selectedFields=
a);return this.selectedFields},_getDistinctFields:function(a,b){return a.filter(function(e){return 0>b.indexOf(e)})},_attachEventsToElement:function(){this.own(y(this.attributeSettingsAddFields,"click",q.hitch(this,function(){if(!w.contains(this.attributeSettingsAddFields,"esriCTDisabled")){var a=this._getDistinctFields(this._entireFieldsArr,this._selectedFieldsArr);this._addFieldsRow(a)}})));this.own(y(this._attributeSettingsTable,"row-delete",q.hitch(this,function(a){this._deleteFieldRow(a)})))},
onOkButtonClicked:function(){this.parentNode.attributeSettingPopup=this.attributeSettingPopup;this.attributeSettingPopup.hide()},onCancelButtonClicked:function(){this.attributeSettingPopup.hide()},_createAttributeSettingsFieldsTable:function(){this._attributeSettingsTable=new C({fields:[{name:"layerAttributes",title:this.nls.layerSettings.layerAttributesHeaderTitle,type:"empty",editable:!1,width:"40%"},{name:"projectLayerAttributes",title:this.nls.layerSettings.projectLayerAttributesHeaderTitle,type:"empty",
editable:!1,width:"40%"},{name:"Delete",title:this.nls.layerSettings.deleteColumnLabel,type:"actions",actions:["delete"],width:"20%"}],selectable:!0});this._attributeSettingsTable.placeAt(this.attributeSettingsTableNode);this._attributeSettingsTable.startup()}})})},"widgets/CostAnalysis/setting/CostingInfo":function(){define("dojo/_base/declare jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./CostingInfo.html dojo/on dojo/dom-construct dojo/_base/lang dojo/_base/array ./ManageScenarios ./CostingTemplate esri/tasks/query esri/tasks/QueryTask dojo/Deferred dojo/string dojo/dom-class dijit/form/CheckBox".split(" "),
function(D,C,E,B,q,w,v,x,y,p,n,d,a,b,e,l){return D([C,E,B],{templateString:q,_manageScenario:null,totalScenariosCollection:[],costingTemplate:{},_scenarioOptions:[],_geographyOptions:[],costingInfoData:{},_configuredLayers:[],baseClass:"jimu-widget-cost-analysis-costing-info",constructor:function(f){x.mixin(this,f)},postMixInProperties:function(){this.nls.common={};x.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.costingTemplate={};this._manageScenario=null;this.totalScenariosCollection=
[];this._scenarioOptions=[];this._geographyOptions=[];this.costingInfoData={};this._configuredLayers=[];this.inherited(arguments);this._setUpdateEquationCheckBoxState();for(var f in this.config.layerSettings)this.config.layerSettings[f].editable&&this._configuredLayers.push(this.config.layerSettings[f].id);this._init();this.own(w(this.btnManageScenarios,"click",x.hitch(this,this._manageScenariosBtnClicked)))},_setUpdateEquationCheckBoxState:function(){this.config&&this.config.hasOwnProperty("updateCostEquationCheckBoxStatus")&&
this.updateCostEquationCheckBox.set("checked",this.config.updateCostEquationCheckBoxStatus)},validate:function(){var f=this._validateCostingInfoTabData();return f.isValid?{isValid:!0}:{isValid:!1,errorMessage:f.errorMessage}},getConfig:function(){return{costingInfoData:this.costingInfoData,scenarios:this.totalScenariosCollection,updateCostEquationCheckBoxStatus:this.updateCostEquationCheckBox.get("checked")}},_init:function(){this._geographyOptions=[{label:this.nls.costingInfo.noneValue,value:""}];
this.config.projectSettings&&""!==this.config.projectSettings.costingGeometryLayer&&void 0!==this.config.projectSettings.costingGeometryLayer?this.getGeographyOptions().then(x.hitch(this,function(){this._createCostingTemplate()})):this.config.layerSettings&&this.config.layerSettings.length&&this._createCostingTemplate()},_createCostingTemplate:function(){var f;this._getScenarioOptions(this.config.scenarios);var t=this.map.itemInfo.itemData.operationalLayers;this._showHideNoLayerMessage(t.length);
if(0<Object.keys(this.config.costingInfoSettings).length)for(f in this.config.costingInfoSettings)if(-1!==this._configuredLayers.indexOf(f)){var g=this._getOperationalLayer(t,f);g&&(!g.errors||0>=g.errors.length)&&this._createCostingTemplateObj(g)}},_createCostingTemplateObj:function(f){0===this._scenarioOptions.length&&this._scenarioOptions.push({label:this.nls.costingInfo.noneValue,value:""});this.costingTemplate[f.id]=new n({nls:this.nls,map:this.map,config:this.config,layer:f,scenarios:this._scenarioOptions,
geographies:this._geographyOptions},v.create("div",{},this.costingTemplateContainer))},_getOperationalLayer:function(f,t){var g;y.some(f,x.hitch(this,function(r){if(r.id===t)return g=r,!0}));return g},_manageScenariosBtnClicked:function(){this._manageScenario=new p({nls:this.nls,map:this.map,config:this.config,existingScenarios:this.totalScenariosCollection});w(this._manageScenario,"okButtonClicked",x.hitch(this,function(f){this._manageScenario.destroy();this._getScenarioOptions(f)}))},_checkEditCapabilities:function(f){return f&&
f.capabilities&&"string"===typeof f.capabilities&&-1!==f.capabilities.indexOf("Delete")&&-1!==f.capabilities.indexOf("Create")&&-1!==f.capabilities.indexOf("Update")&&f.globalIdField?!0:!1},_getScenarioOptions:function(f){var t,g;this._scenarioOptions=[{label:this.nls.costingInfo.noneValue,value:""}];this.totalScenariosCollection=[];y.forEach(f,x.hitch(this,function(r){t="object"===typeof r?r.field:r;this._scenarioOptions.push({label:t,value:t});this.totalScenariosCollection.push(t)}));for(g in this.costingTemplate)this.costingTemplate[g].updateScenarioOptions(this._scenarioOptions)},
getGeographyOptions:function(f,t){var g=new b;t||(f=this.config.projectSettings.geographyField,t=this.config.projectSettings.costingGeometryLayer);if(""!==t&&this.layerInfosObj.getLayerInfoById(t)){t=this.map._layers[t];t=new a(t.url);var r=new d;r.outFields=[f];r.returnDistinctValues=!0;r.returnGeometry=!1;r.where="1\x3d1";t.execute(r,x.hitch(this,function(z){this._geographyQueryTaskComplete(z,f);g.resolve(this._geographyOptions)}),x.hitch(this,function(){this._geographyOptions=[];this._geographyOptions.push({label:this.nls.costingInfo.noneValue,
value:""});g.resolve(this._geographyOptions)}))}else this._geographyOptions=[],this._geographyOptions.push({label:this.nls.costingInfo.noneValue,value:""}),g.resolve(this._geographyOptions);return g.promise},_geographyQueryTaskComplete:function(f,t){this._geographyOptions=[{label:this.nls.costingInfo.noneValue,value:""}];y.forEach(f.features,x.hitch(this,function(g){""!==g.attributes[t]&&null!==g.attributes[t]&&this._geographyOptions.push({label:isNaN(g.attributes[t])?g.attributes[t]:g.attributes[t].toString(),
value:g.attributes[t]})}))},_validateCostingInfoTabData:function(){var f,t,g;this.costingInfoData={};for(f in this.costingTemplate){var r=[];var z=[];if(this.costingTemplate[f]){this.costingInfoData[f]=this.costingTemplate[f].getUpdatedCostingInfo();var h=this.costingInfoData[f].length;for(t in this.costingInfoData[f]){var m=this.costingInfoData[f][t];-1===z.indexOf(m.featureTemplate)&&z.push(m.featureTemplate);""===m.scenario&&""===m.geography&&-1===r.indexOf(m.featureTemplate)&&r.push(m.featureTemplate);
if(!this.costingTemplate[f].validateCostEquation(m.costEquation))return{isValid:!1,errorMessage:e.substitute(this.nls.costingInfo.requiredCostEquation,{templateName:m.featureTemplate,layerName:this.costingTemplate[f].layer.title})};if(1<h)for(g=parseInt(t,0)+1;g<h;g++){var c=this.costingInfoData[f][g];if(m.featureTemplate===c.featureTemplate&&m.scenario===c.scenario&&m.geography===c.geography)return{isValid:!1,errorMessage:e.substitute(this.nls.costingInfo.duplicateTemplateMessage,{layerName:this.costingTemplate[f].layer.title,
templateName:m.featureTemplate})}}}h=0;m=z.length;for(h;h<m;h++)if(-1===r.indexOf(z[h]))return{isValid:!1,errorMessage:e.substitute(this.nls.costingInfo.defaultEquationRequired,{templateName:z[h],layerName:this.costingTemplate[f].layer.title})};if(0===this.costingInfoData[f].length)return{isValid:!1,errorMessage:e.substitute(this.nls.costingInfo.noTemplateAvailable,{layerName:this.costingTemplate[f].layer.title})}}}return Object.keys(this.costingInfoData).length?{isValid:!0}:{isValid:!1,errorMessage:e.substitute(this.nls.costingInfo.noLayerMessage,
{tabName:this.nls.costingInfo.tabTitle})}},_updateCostingInfoTable:function(f,t){if(f.layerId)var g=f.layerId;else{var r=f.lastSelectedId;g=f.currentSelectedLayerId}Object.keys(f).length&&(r?(this.costingTemplate[g]&&this._deleteCostingInfoLayer(g),r&&(t||this._addCostingInfoLayer(r))):f.editable?t||this._addCostingInfoLayer(g):this.costingTemplate[g]&&this._deleteCostingInfoLayer(g));this._showHideNoLayerMessage(Object.keys(this.costingTemplate).length)},_showHideNoLayerMessage:function(f){0===f?
(l.remove(this.noEditableLayersAvailable,"esriCTHidden"),l.add(this.updateCostEquationChkContainer,"esriCTHidden"),l.add(this.costingTemplateContainer,"esriCTHidden")):(l.add(this.noEditableLayersAvailable,"esriCTHidden"),l.remove(this.updateCostEquationChkContainer,"esriCTHidden"),l.remove(this.costingTemplateContainer,"esriCTHidden"))},_deleteCostingInfoLayer:function(f){this.costingTemplate[f].destroyRecursive();delete this.costingTemplate[f];delete this.config.costingInfoSettings[f]},_addCostingInfoLayer:function(f){y.some(this.map.itemInfo.itemData.operationalLayers,
x.hitch(this,function(t){if(f===t.id&&this._checkEditCapabilities(t.layerObject))return this._createCostingTemplateObj(t),!0}))},onGeographyFieldUpdate:function(f){for(var t in this.costingTemplate)this.costingTemplate[t].updateGeographyOptions(f)},disableUpdateCostEquationChk:function(f){this.updateCostEquationCheckBox.set("disabled",f);f&&this.updateCostEquationCheckBox.set("value",!1)}})})},"widgets/CostAnalysis/setting/ManageScenarios":function(){define("dojo/_base/declare jimu/dijit/Popup jimu/dijit/SimpleTable jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./ManageScenarios.html dojo/_base/array dojo/_base/lang dojo/on dojo/query dojo/dom-attr".split(" "),
function(D,C,E,B,q,w,v,x,y,p,n,d){return D([B,q,w],{templateString:v,popup:null,_addScenarioTable:null,baseClass:"jimu-widget-cost-analysis-manage-scenarios",constructor:function(a){y.mixin(this,a)},postMixInProperties:function(){this.nls.common={};y.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._addScenarioTable=this.popup=null;this.inherited(arguments);this._init()},_init:function(){this._createManageScenarioTable();this._createManageScenarioPopup();this.own(p(this.addBtnNode,
"click",y.hitch(this,function(){this.scenarioNameNode.set("value",this.scenarioNameNode.get("value").trim());this.scenarioNameNode.validate()?(this._addNewScenario(this._addScenarioTable.getRows().length+1,this.scenarioNameNode.get("value")),this.scenarioNameNode.set("value"," ")):this.scenarioNameNode.focus()})));this.scenarioNameNode.validator=y.hitch(this,this._scenarioNameValidator);this.scenarioNameNode.focus()},_createManageScenarioPopup:function(){this.popup=new C({titleLabel:this.nls.costingInfo.manageScenarioLabel,
content:this.domNode,width:500,height:400,autoHeight:!0,"class":this.baseClass,buttons:[{label:this.nls.common.ok,onClick:y.hitch(this,"onOkButtonClicked")}]})},onOkButtonClicked:function(){this.emit("okButtonClicked",this._addScenarioTable.getData());this.popup.close()},_createManageScenarioTable:function(){this._addScenarioTable=new E({fields:[{name:"id",title:this.nls.costingInfo.srNoLabel,type:"text",editable:!1,width:"100px"},{name:"field",title:this.nls.costingInfo.scenarioNameLabel,type:"text",
editable:!1,width:"200px"},{name:"actions",title:this.nls.costingInfo.deleteLabel,width:"100px",type:"actions",actions:["delete"]}],selectable:!1});this._addScenarioTable.placeAt(this.addScenarioNameTableNode);this._addScenarioTable.startup();this._populateExistingScenarios();this._addScenarioTable.onBeforeRowDelete=y.hitch(this,function(a){var b,e;this._addScenarioTable.deleteRow(a);a=this._addScenarioTable.getRows();x.forEach(a,function(l,f){b=l.cells[0];e=n("div",b)[0];d.set(e,"innerHTML",f+1);
d.set(e,"title",f+1)})})},_populateExistingScenarios:function(){x.forEach(this.existingScenarios,y.hitch(this,function(a,b){this._addNewScenario(b+1,a)}))},_addNewScenario:function(a,b){this._createRow(a,b)},_createRow:function(a,b){this._addScenarioTable.addRow({id:a,field:b})},_scenarioNameValidator:function(a){return""===a?!1:0<this._addScenarioTable.getRowDataArrayByFieldValue("field",a).length?(this.scenarioNameNode.invalidMessage=this.nls.costingInfo.duplicateScenarioName,!1):!0},getUpdatedManageScenarios:function(){this._addScenarioTable.getRows();
n(".simple-table-row",this._addScenarioTable);return[]}})})},"widgets/CostAnalysis/setting/CostingTemplate":function(){define("dojo/_base/declare jimu/dijit/SimpleTable jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./CostingTemplate.html dojo/_base/array dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/on dojo/query dojo/dom-construct dijit/form/Select dijit/form/ValidationTextBox dijit/registry dijit/TooltipDialog dijit/popup ./EditCostEquation ../utils dojo/dom-style".split(" "),
function(D,C,E,B,q,w,v,x,y,p,n,d,a,b,e,l,f,t,g,r,z){return D([E,B,q],{templateString:w,popup:null,_addScenarioTable:null,_featureLayerTemplateOptions:null,baseClass:"jimu-widget-cost-analysis-costing-template",constructor:function(h){x.mixin(this,h)},postMixInProperties:function(){this.nls.common={};x.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._featureLayerTemplateOptions=this._addScenarioTable=this.popup=null;this.inherited(arguments);p.add(this.domNode,"esriCTLayerTableWrapper");
this._init();this.own(n(this.btnCostingTemplateNode,"click",x.hitch(this,this._addCostingTemplateBtnClicked,!0)))},_init:function(){y.set(this.layerName,"innerHTML",this.layer.title);y.set(this.layerName,"title",this.layer.title);this._createCostingTable()},_createCostingTable:function(){this._addCostingInfoLayerTable=new C({fields:[{name:"field",title:this.nls.costingInfo.featureTemplateTitle,type:"empty",editable:!1,width:"22%"},{name:"field",title:this.nls.costingInfo.costEquationTitle,type:"empty",
editable:!0,width:"22%"},{name:"field",title:this.nls.costingInfo.geographyTitle,type:"empty",editable:!1,width:"22%"},{name:"field",title:this.nls.costingInfo.scenarioTitle,type:"empty",editable:!1,width:"22%"},{name:"actions",title:this.nls.costingInfo.actionTitle,width:"12%",type:"actions",actions:["edit","delete"]}],selectable:!1});this._addCostingInfoLayerTable.placeAt(this.addLayerTableNode);this._addCostingInfoLayerTable.startup();this._addCostingInfoLayerTable.onBeforeRowDelete=x.hitch(this,
function(h){this.config.costingInfoSettings[this.layer.id]&&this.config.costingInfoSettings[this.layer.id].splice(h.rowIndex,1);return!0});this._addHelpIconToHeader();this._createHelpPopups();this._windowEventsPopupClose();this._tableOnBeforeRowEdit();this._populateCostingAssets()},_tableOnBeforeRowEdit:function(){this._addCostingInfoLayerTable.onBeforeRowEdit=x.hitch(this,function(h){var m={};m.featureTemplateValue=h.featureTemplateFields.get("value");m.costEquationValue=h.costEquationInput.get("value");
m.geographyValue=h.geographyFields.get("value");m.scenarioValue=h.scenarioFields.get("value");this._editCostEquation=new g({nls:this.nls,map:this.map,config:this.config,layerTitle:this.layer.title,currentRow:h,existingRowValues:m,validateCostEquation:this.validateCostEquation});n(this._editCostEquation,"okButtonClicked",x.hitch(this,function(){this._editCostEquation.destroy()}))})},_createHelpPopups:function(){var h=a.create("div",{"class":"esriCTCancelDialogPopup",onclick:function(){t.close(this.costEquationHelpDialog);
return!1}});this.costEquationHelpDialog=new f({"class":this.baseClass,content:h.outerHTML+"\x3cdiv class \x3d 'esriCTDialogText'\x3e"+this.nls.costingInfo.hintText+"\x3c/div\x3e",onClick:function(m){p.contains(m.target,"esriCTCancelDialogPopup")||m.stopPropagation()}});this.scenarioHelpDialog=new f({"class":this.baseClass,content:h.outerHTML+"\x3cdiv class \x3d 'esriCTDialogText'\x3e"+this.nls.costingInfo.scenarioHelpText+"\x3c/div\x3e",onClick:function(m){p.contains(m.target,"esriCTCancelDialogPopup")||
m.stopPropagation()}})},_windowEventsPopupClose:function(){n(window.document,"click",x.hitch(this,function(m){p.contains(m.target,"esriCTHelpIcon")||(t.close(this.scenarioHelpDialog),t.close(this.costEquationHelpDialog))}));var h=d(".container-node.jimu-viewstack")[0];h&&n(h,"scroll",x.hitch(this,function(){t.close(this.scenarioHelpDialog);t.close(this.costEquationHelpDialog)}))},_addHelpIconToHeader:function(){var h;if(h=d(".simple-table-thead tr",this.domNode)[0]){var m=h.children[1];var c=h.children[3]}var k=
a.create("div",{"class":"esriCTHelpIcon"},m);var u=a.create("div",{"class":"esriCTHelpIcon"},c);n(k,"click",x.hitch(this,function(){this._openHelpPopupDialog(this.costEquationHelpDialog,k)}));n(u,"click",x.hitch(this,function(){this._openHelpPopupDialog(this.scenarioHelpDialog,u)}))},_openHelpPopupDialog:function(h,m){t.open({popup:h,around:m,orient:["above-centered"]})},_addCostingTemplateBtnClicked:function(h){this._addLayerRow(h,null,!0)},_addLayerRow:function(h,m,c){h=h?this._addCostingInfoLayerTable.addRow({}):
this._addCostingInfoLayerTable.addRow({},m.rowIndex+1,!1);if(m=d(".simple-table-cell",h.tr))this._addFeatureTemplateDropdown(m[0],h.tr,c),this._addCostEquationTextBox(m[1],h.tr,c),this._addGeographyDropdown(m[2],h.tr,c),this._addScenarioDropdown(m[3],h.tr,c),this._addCopyRowActionIcon(h.tr)},_addFeatureTemplateDropdown:function(h,m,c){this._featureLayerTemplateOptions||this._getFeatureTemplateOptions();h=a.create("div",{"class":"esriCTDropDownContainer"},h);m.featureTemplateFields=new b({options:x.clone(this._featureLayerTemplateOptions),
"class":"esriCTCostingTemplateFeatureTemplate"});m.featureTemplateFields.placeAt(h);m.featureTemplateFields.startup();h=this.config.costingInfoSettings[this.layer.id];m.featureTemplateFields.set("value",h&&0<h.length&&h[m.rowIndex]&&!c?h[m.rowIndex].featureTemplate:this._featureLayerTemplateOptions[m.rowIndex])},_addGeographyDropdown:function(h,m,c){h=a.create("div",{"class":"esriCTDropDownContainer"},h);m.geographyFields=new b({options:x.clone(this.geographies),"class":"esriCTCostingTemplateGeography"});
m.geographyFields.placeAt(h);m.geographyFields.startup();(h=this.config.costingInfoSettings[this.layer.id])&&0<h.length&&h[m.rowIndex]&&!c?(c=h[m.rowIndex].geography,c=""===c?this.nls.costingInfo.noneValue:c,m.geographyFields.set("value",c)):m.geographyFields.set("value","")},_addScenarioDropdown:function(h,m,c){h=a.create("div",{"class":"esriCTDropDownContainer"},h);m.scenarioFields=new b({options:x.clone(this.scenarios),"class":"esriCTCostingInfoScenarioOptions"});m.scenarioFields.placeAt(h);m.scenarioFields.startup();
(h=this.config.costingInfoSettings[this.layer.id])&&0<h.length&&h[m.rowIndex]&&!c?(c=h[m.rowIndex].scenario,c=""===c?this.nls.costingInfo.noneValue:c,m.scenarioFields.set("value",c)):m.scenarioFields.set("value","")},_addCostEquationTextBox:function(h,m,c){h=a.create("div",{"class":"esriCTTextBoxContainer"},h);m.costEquationInput=new e({"class":"esriCTLayerLabelTextBox esriCTFullWidth",spellcheck:!1});m.costEquationInput.placeAt(h);m.costEquationInput.startup();this._setCostEquation(m.costEquationInput);
m.costEquationInput.validator=x.hitch(this,this.validateCostEquation);(h=this.config.costingInfoSettings[this.layer.id])&&0<h.length&&h[m.rowIndex]&&!c&&(c=h[m.rowIndex].costEquation,m.costEquationInput.set("value",c))},_populateCostingAssets:function(){this.config.costingInfoSettings&&this.config.costingInfoSettings.hasOwnProperty(this.layer.id)?this.layer&&this.layer.layerObject&&v.forEach(this.config.costingInfoSettings[this.layer.id],x.hitch(this,function(){this._addLayerRow(!0)})):0<this.layer.layerObject.templates.length?
v.forEach(this.layer.layerObject.templates,x.hitch(this,function(){this._addLayerRow(!0)})):0<this.layer.layerObject.types.length&&v.forEach(this.layer.layerObject.types,x.hitch(this,function(){this._addLayerRow(!0)}))},_getFeatureTemplateOptions:function(){this._featureLayerTemplateOptions=[];this.layer&&this.layer.layerObject&&(this.layer.layerObject.templates&&0<this.layer.layerObject.templates.length?v.forEach(this.layer.layerObject.templates,x.hitch(this,function(h){this._featureLayerTemplateOptions.push({label:h.name,
value:h.name})})):this.layer.layerObject.types&&0<this.layer.layerObject.types.length&&v.forEach(this.layer.layerObject.types,x.hitch(this,function(h){this._featureLayerTemplateOptions.push({label:h.templates[0].name,value:h.templates[0].name})})))},updateScenarioOptions:function(h){var m=d(".esriCTCostingInfoScenarioOptions",this.domNode);v.forEach(m,x.hitch(this,function(c){l.byNode(c).set("options",h)}));this.scenarios=h},_setCostEquation:function(h){if(this.layer&&this.layer.layerObject&&this.layer.layerObject.geometryType){var m=
this.layer.layerObject.geometryType;"esriGeometryPolyline"===m||"esriGeometryPolygon"===m?h.set("value","{MEASURE}"):h.set("value","{TOTALCOUNT}")}},validateCostEquation:function(h){return r.validateEquation(h)},getUpdatedCostingInfo:function(){var h=[],m={};var c=this._addCostingInfoLayerTable.getRows();v.forEach(c,x.hitch(this,function(k){k.featureTemplateFields&&k.costEquationInput&&k.geographyFields&&k.scenarioFields&&(m={},k.featureTemplateFields&&(m.featureTemplate=k.featureTemplateFields.get("value")),
k.costEquationInput&&(m.costEquation=k.costEquationInput.get("value")),k.geographyFields&&(m.geography=k.geographyFields.get("value")),k.scenarioFields&&(m.scenario=k.scenarioFields.get("value")),h.push(m))}));return h},_addCopyRowActionIcon:function(h){var m=d(".action-item-parent",h)[0];var c=d(".jimu-icon-edit",h)[0];setTimeout(function(){d(".action-item-parent",h)[0]&&z.set(d(".action-item-parent",h)[0],"width","60px")},100);m&&(h.copyDiv=a.create("div",{"class":"action-item jimu-float-leading row-edit-div jimu-icon jimu-icon-copy",
title:this.nls.costingInfo.copyRowTitle},m),a.place(h.copyDiv,c,"after"),this.own(n(h.copyDiv,"click",x.hitch(this,this._copyRow,h))))},_copyRow:function(h){this._addLayerRow(!1,h);this._setCopyLayerValues(h)},_setCopyLayerValues:function(h){var m=this._addCostingInfoLayerTable.getRows()[h.rowIndex+1];m.featureTemplateFields.set("value",h.featureTemplateFields.get("value"));m.costEquationInput.set("value",h.costEquationInput.get("value"));m.geographyFields.set("value",h.geographyFields.get("value"));
m.scenarioFields.set("value",h.scenarioFields.get("value"))},updateGeographyOptions:function(h){h&&(this.geographies=h);h=d(".esriCTCostingTemplateGeography",this.domNode);v.forEach(h,x.hitch(this,function(m){l.byNode(m).set("options",x.clone(this.geographies));l.byNode(m).startup()}))}})})},"widgets/CostAnalysis/setting/EditCostEquation":function(){define("dojo/_base/declare jimu/dijit/Popup jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./EditCostEquation.html dojo/_base/lang dojo/on dojo/dom-class dojo/query dojo/dom-attr".split(" "),
function(D,C,E,B,q,w,v,x,y,p,n){return D([E,B,q],{templateString:w,popup:null,baseClass:"jimu-widget-cost-analysis-edit-equation",constructor:function(d){v.mixin(this,d)},postMixInProperties:function(){this.nls.common={};v.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.popup=null;this.inherited(arguments);this._init()},_init:function(){this._createEditLayerRowPopup()},_createEditLayerRowPopup:function(){this.popup=new C({titleLabel:this.layerTitle+": "+this.existingRowValues.featureTemplateValue,
content:this.domNode,width:600,height:515,autoHeight:!0,"class":this.baseClass,buttons:[{label:this.nls.common.ok,onClick:v.hitch(this,"onOkButtonClicked")},{label:this.nls.common.cancel,classNames:["jimu-btn-vacation"],onClick:v.hitch(this,"onCancelButtonClicked")}]});var d=p(".title-label",this.popup.domNode)[0];n.set(d,"title",this.layerTitle+": "+this.existingRowValues.featureTemplateValue);this._setRowPopupValues()},onOkButtonClicked:function(){y.contains(this.costEquationValue.domNode,"esriCTCostEquationError")?
alert(this.nls.costingInfo.validCostEquationMessage):(this.currentRow.costEquationInput.set("value",this.costEquationValue.getValue()),this.popup.close())},onCancelButtonClicked:function(){this.popup.close()},_setRowPopupValues:function(){var d=""===this.existingRowValues.geographyValue?this.nls.costingInfo.noneValue:this.existingRowValues.geographyValue;var a=""===this.existingRowValues.scenarioValue?this.nls.costingInfo.noneValue:this.existingRowValues.scenarioValue;this.geographyValue.set("value",
d);this.scenarioValue.set("value",a);this.costEquationValue.set("value",this.existingRowValues.costEquationValue);x(this.costEquationValue,"KeyUp",v.hitch(this,function(b){this._costEquationKeyUp(b)}));this.costEquationHint.innerHTML=this.nls.costingInfo.hintText},_costEquationKeyUp:function(d){var a=this.costEquationValue.domNode;y.contains(a,"esriCTCostEquationError")&&y.remove(a,"esriCTCostEquationError");this.validateCostEquation(d.currentTarget.value)||y.add(a,"esriCTCostEquationError")}})})},
"widgets/CostAnalysis/setting/StatisticsSettings":function(){define("dojo/_base/declare jimu/BaseWidget jimu/dijit/SimpleTable dojo/on dojo/_base/array dojo/query dojo/dom-construct jimu/dijit/formSelect dijit/form/ValidationTextBox dijit/_WidgetsInTemplateMixin dojo/text!./StatisticsSettings.html dojo/_base/lang dojo/store/Memory dojo/dom-class dijit/registry dojo/_base/html dojo/dom-style ./ProjectCost dojo/keys dojo/dom-attr dijit/focus jimu/utils dojo/_base/event".split(" "),function(D,C,E,B,
q,w,v,x,y,p,n,d,a,b,e,l,f,t,g,r,z,h,m){return D([C,p],{templateString:n,baseClass:"jimu-widget-cost-analysis-statistics-settings",_layerNameStore:null,_commonStatisticsStoreOption:null,_polygonStatisticsStoreOption:null,_polylineStatisticsStoreOption:null,_pointLayerStatisticsStore:null,_polygonLayerStatisticsStore:null,_polylineLayerStatisticsStore:null,_layerFieldStore:{},_shapeFields:"shape_length shape_area shape__length shape__area shape.len shape.area".split(" "),_editableConfiguredLayers:[],
constructor:function(c){d.mixin(this,c)},postMixInProperties:function(){this.nls.common={};d.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._polylineLayerStatisticsStore=this._polygonLayerStatisticsStore=this._pointLayerStatisticsStore=this._polylineStatisticsStoreOption=this._polygonStatisticsStoreOption=this._commonStatisticsStoreOption=this._layerNameStore=null;this._layerFieldStore={};this._editableConfiguredLayers=[];this.inherited(arguments);this._init();this._handleClickEvent();
this.showActionButtonsInColumn&&this._createProjectCostTable()},_createProjectCostTable:function(){this.additionalProjectCostObj=new t({nls:this.nls,map:this.map,config:this.config},v.create("div",{},this.additionalProjectCostWrapper));this.additionalProjectCostObj.startup()},_handleClickEvent:function(){this._addButtonClick();this._crossButtonClick();this._upButtonClick();this._downButtonClick()},_init:function(){for(var c in this.config.layerSettings)this.config.layerSettings[c].editable&&this._editableConfiguredLayers.push(this.config.layerSettings[c].id);
this._createStatisticsStoreOptions();this._createStatisticsTable();this._layerNameStore||this._createLayerNameStore();this._attachNodeEvents();this._setConfig();this._displayAddStatisticsButtonOrLabel();this._handleActionButtonVisibility();0===this._editableConfiguredLayers.length&&(b.remove(this.noEditableLayersAvailable,"esriCTHidden"),b.add(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),b.add(this.statisticsLayerTableNode,"esriCTHidden"),b.add(this.additionalProjectCostWrapper,"esriCTHidden"))},
_displayAddStatisticsButtonOrLabel:function(){this.showActionButtonsInColumn?b.remove(this.btnAddStatisticsNodeWrapper,"esriCTHidden"):b.add(this.btnAddStatisticsNodeWrapper,"esriCTHidden")},_setConfig:function(){this.config&&this.config.statisticsSettings&&0<this.config.statisticsSettings.length&&q.forEach(this.config.statisticsSettings,d.hitch(this,function(c){this._addLayerRow(c)}))},getConfig:function(){var c=this._statisticsLayerTable.getRows();var k=[];q.forEach(c,d.hitch(this,function(u){k.push({id:u.layerNameDropDown.getValue(),
type:u.statisticsTypeDropdown.getValue(),field:u.layerFieldDropdown.getValue(),label:u.statisticsLabelTextBox.getValue()})}));this.additionalProjectCostObj&&this.additionalProjectCostObj.getConfig();return k},_createStatisticsStoreOptions:function(){this._commonStatisticsStoreOption=[{name:this.nls.statisticsType.averageLabel,value:"avg"},{name:this.nls.statisticsType.countLabel,value:"count"},{name:this.nls.statisticsType.maxLabel,value:"max"},{name:this.nls.statisticsType.minLabel,value:"min"},
{name:this.nls.statisticsType.summationLabel,value:"sum"}];this._polygonStatisticsStoreOption=[{name:this.nls.statisticsType.areaLabel,value:"area"}];this._polylineStatisticsStoreOption=[{name:this.nls.statisticsType.lengthLabel,value:"length"}]},_attachNodeEvents:function(){0===this._layerNameStore.data.length?(b.remove(this.noEditableLayersAvailable,"esriCTHidden"),b.add(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),b.add(this.statisticsLayerTableNode,"esriCTHidden")):(b.add(this.noEditableLayersAvailable,
"esriCTHidden"),b.remove(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),b.remove(this.statisticsLayerTableNode,"esriCTHidden"));this.own(B(this.btnAddStatisticsNode,"click",d.hitch(this,function(){this._layerNameStore.data.length&&(this._addStatisticsBtnClicked(),this.resetAddNewStatisticsDropdown())})));this.own(B(this.btnAddStatisticsNode,"keydown",d.hitch(this,function(c){if(c.keyCode===g.ENTER||c.keyCode===g.SPACE)m.stop(c),this._layerNameStore.data.length&&(this._addStatisticsBtnClicked(),
this.resetAddNewStatisticsDropdown())})))},_createStatisticsTable:function(){this._statisticsLayerTable=new E({fields:[{name:"editable",title:this.nls.statisticsSettings.selectDeselectAllTitle,type:"checkbox",editable:!1,width:this.showActionButtonsInRow?"16px":"0%",hidden:!this.showActionButtonsInRow},{name:"field",title:this.nls.common.layer,type:"empty",editable:!1,width:"30%"},{name:"field",title:this.nls.common.type,type:"empty",editable:!0,width:this.showActionButtonsInRow?"19%":"18%"},{name:"field",
title:this.nls.statisticsSettings.fieldNameTitle,type:"empty",editable:!1,width:"22%"},{name:"field",title:this.nls.statisticsSettings.statisticsTitle,type:"empty",editable:!1,width:this.showActionButtonsInRow?"55px":"20%"},{name:"actions",title:this.nls.common.actions,width:"10%",type:"actions",actions:["up","down","delete"],hidden:!this.showActionButtonsInColumn}],selectable:!1});this._statisticsLayerTable.placeAt(this.statisticsLayerTableNode);this._statisticsLayerTable.startup();var c=w(".esriCTAddLayerTableNode th .label")[0];
var k=w(".esriCTAddLayerTableNode th .jimu-checkbox")[0];w(".esriCTAddLayerTableNode tr .jimu-checkbox");k&&b.add(k,"esriCTStatisticsHeaderCheckBox");c&&b.add(c,"esriCTHidden")},_addButtonClick:function(){!0===this.showActionButtonsInRow?(b.remove(this.btnAddNode,"esriCTHidden"),this.own(B(this.btnAddNode,"click",d.hitch(this,function(){this._addStatisticsButtonClickEvent()}))),this.own(B(this.btnAddNode,"keydown",d.hitch(this,function(c){if(c.keyCode===g.ENTER||c.keyCode===g.SPACE)m.stop(c),this._addStatisticsButtonClickEvent()})))):
b.add(this.btnAddNode,"esriCTHidden")},_addStatisticsButtonClickEvent:function(){if(this._layerNameStore.data.length&&(this._addStatisticsBtnClicked(),this._handleActionButtonVisibility(),this.resetAddNewStatisticsDropdown(),this.widgetDomNode)){var c=this._statisticsLayerTable.getRows();0<=c.length&&(c=w(".jimu-checkbox",c[c.length-1])[0],z.focus(c))}},_crossButtonClick:function(){b.remove(this.btnCrossNode,"esriCTHidden");this.own(B(this.btnCrossNode,"click",d.hitch(this,this._deleteLayerRow)));
this.own(B(this.btnCrossNode,"keydown",d.hitch(this,function(c){if(c.keyCode===g.ENTER||c.keyCode===g.SPACE)m.stop(c),this._deleteLayerRow()})))},_upButtonClick:function(){b.remove(this.btnUpNode,"esriCTHidden");this.own(B(this.btnUpNode,"click",d.hitch(this,function(){this._upButtonClickEvent()})));this.own(B(this.btnUpNode,"keydown",d.hitch(this,function(c){if(c.keyCode===g.ENTER||c.keyCode===g.SPACE)m.stop(c),this._upButtonClickEvent()})))},_upButtonClickEvent:function(){var c;if(!b.contains(this.btnUpNode,
"esriCTStatisticsUpIconDisable")){var k=this._statisticsLayerTable.getRows();var u=this._statisticsLayerTable.getData();q.forEach(u,d.hitch(this,function(A,F){A.editable&&(c=k[F])}));this._statisticsLayerTable.onBeforeRowUp(c)&&(u=q.indexOf(k,c),0<u&&(u=k[u-1]))&&(l.place(c,u,"before"),this._statisticsLayerTable.updateUI(),this._statisticsLayerTable.emit("row-up",c))}},_downButtonClick:function(){b.remove(this.btnDownNode,"esriCTHidden");this.own(B(this.btnDownNode,"click",d.hitch(this,function(){this._downButtonClickEvent()})));
this.own(B(this.btnDownNode,"keydown",d.hitch(this,function(c){if(c.keyCode===g.ENTER||c.keyCode===g.SPACE)m.stop(c),this._downButtonClickEvent()})))},_downButtonClickEvent:function(){var c;if(!b.contains(this.btnDownNode,"esriCTStatisticsDownIconDisable")){var k=this._statisticsLayerTable.getRows();var u=this._statisticsLayerTable.getData();q.forEach(u,d.hitch(this,function(A,F){A.editable&&(c=k[F])}));this._statisticsLayerTable.onBeforeRowDown(c)&&(u=q.indexOf(k,c),u<k.length-1&&(u=k[u+1]))&&(l.place(c,
u,"after"),this._statisticsLayerTable.updateUI(),this._statisticsLayerTable.emit("row-down",c))}},_deleteLayerRow:function(){var c=this._statisticsLayerTable.getRows(),k=this._statisticsLayerTable.getData();q.forEach(k,d.hitch(this,function(u,A){u.editable&&this._statisticsLayerTable.deleteRow(c[A])}));0===this._statisticsLayerTable.getRows().length&&(k=w("th .checkbox")[0],b.contains(k,"checked")&&b.remove(k,"checked"));this._handleActionButtonVisibility()},_checkEditCapabilities:function(c){var k;
return(k=c&&c.capabilities?c.capabilities:null)&&-1!==k.indexOf("Delete")&&-1!==k.indexOf("Create")&&-1!==k.indexOf("Update")&&c.globalIdField?!0:!1},_addStatisticsBtnClicked:function(){this._addLayerRow();var c=w(".simple-table-title .jimu-checkbox",this.domNode)[0];B(e.byNode(c),"change",d.hitch(this,function(){setTimeout(d.hitch(this,function(){this._handleActionButtonVisibility()}),0)}))},_handleActionButtonVisibility:function(){var c,k=0;var u=this._statisticsLayerTable.getRows();var A=w(".simple-table-title .jimu-checkbox",
this.domNode)[0];A=e.byNode(A);q.some(this._statisticsLayerTable.getRows(),d.hitch(this,function(F){c=w(".jimu-checkbox",F)[0];e.byNode(c).checked&&k++}));0===k?(b.replace(this.btnCrossNode,"esriCTDeleteStatisticsIconDisable","esriCTDeleteStatisticsIcon"),r.set(this.btnCrossNode,"tabindex","-1")):(b.replace(this.btnCrossNode,"esriCTDeleteStatisticsIcon","esriCTDeleteStatisticsIconDisable"),r.set(this.btnCrossNode,"tabindex","0"));u&&1===k?(b.replace(this.btnUpNode,"esriCTStatisticsUpIcon","esriCTStatisticsUpIconDisable"),
b.replace(this.btnDownNode,"esriCTStatisticsDownIcon","esriCTStatisticsDownIconDisable"),r.set(this.btnUpNode,"tabindex","0"),r.set(this.btnDownNode,"tabindex","0")):(b.replace(this.btnUpNode,"esriCTStatisticsUpIconDisable","esriCTStatisticsUpIcon"),b.replace(this.btnDownNode,"esriCTStatisticsDownIconDisable","esriCTStatisticsDownIcon"),r.set(this.btnUpNode,"tabindex","-1"),r.set(this.btnDownNode,"tabindex","-1"));0===u.length?(A.set("status",!1),b.add(A.domNode,"jimu-state-disabled"),r.set(A.domNode,
"tabindex","-1"),this.widgetDomNode&&(z.focus(this.btnAddNode),h.initFirstFocusNode(this.widgetDomNode,this.btnAddNode))):(A.set("status",!0),b.remove(A.domNode,"jimu-state-disabled"),r.set(A.domNode,"tabindex","0"),this.widgetDomNode&&h.initFirstFocusNode(this.widgetDomNode,A.domNode))},_addLayerRow:function(c){var k=this._statisticsLayerTable.addRow({});var u=w(".simple-table-cell",k.tr);var A=w(".simple-table-cell .jimu-checkbox",k.tr)[0];r.set(A,"aria-label",this.nls.statisticsSettings.layerCheckbox);
u&&(A&&B(e.byNode(A),"change",d.hitch(this,function(){this._handleActionButtonVisibility()})),k=k.tr,this._addLayerNameDropdown(u[1],k,c),this._addStatisticsDropdown(u[2],k,c),this._addLayerFieldDropdown(u[3],k,c),this._addStatisticsLabelTextBox(u[4],k,c))},_onLayerNameChange:function(c,k,u){if(this._layerNameStore.data.length){var A=this._layerNameStore.data[this._layerNameStore.index[c]].geometryType;A=this._getStatisticsTypeStore(A);k.statisticsTypeDropdown.setStore(A);u&&u.type&&k.statisticsTypeDropdown.set("value",
u.type);u=k.statisticsTypeDropdown.getValue();c=this._layerNameStore.data[this._layerNameStore.index[c]].value;this._layerFieldStore[c]||this._createFieldStore(c);k.layerFieldDropdown.setStore(this._layerFieldStore[c]);k.layerFieldDropdown.reset();this._onStatisticsTypeChange(u,k)}},_onStatisticsTypeChange:function(c,k,u){"count"===c||"length"===c||"area"===c?b.add(k.layerFieldDropdown.domNode,"esriCTHidden"):(b.remove(k.layerFieldDropdown.domNode,"esriCTHidden"),u&&u.field&&k.layerFieldDropdown.set("value",
u.field));this._resetStatisticsTypeWidth(k)},_addLayerNameDropdown:function(c,k,u){c=v.create("div",{"class":"esriCTDropDownContainer"},c);k.layerNameDropDown=new x({name:"layerSelect",store:this._layerNameStore,labelAttr:"name","class":"esriCTLayerNameDropdown"},c);u&&u.id&&k.layerNameDropDown.set("value",u.id);this.own(B(k.layerNameDropDown,"click",d.hitch(this,function(){this._resetLayerNameWidth(k)})));this.own(B(k.layerNameDropDown,"keydown",d.hitch(this,function(A){if(A.keyCode===g.ENTER||A.keyCode===
g.SPACE)m.stop(A),this._resetLayerNameWidth(k)})));this.own(B(k.layerNameDropDown,"change",d.hitch(this,function(A){r.set(k.layerNameDropDown,"aria-label",this.nls.common.layer+" "+k.layerNameDropDown._getSelectedOptionsAttr().label);this._resetLayerNameWidth(k);this._onLayerNameChange(A,k,u)})));k.layerNameDropDown.startup();r.set(k.layerNameDropDown,"aria-label",this.nls.common.layer+" "+k.layerNameDropDown._getSelectedOptionsAttr().label)},_createLayerNameStore:function(){var c=[];var k=[];c=[this.config.projectSettings.costingGeometryLayer||
"",this.config.projectSettings.projectLayer||"",this.config.projectSettings.pointLayerCentroid||""];if(this.config.layerSettings.length&&this._editableConfiguredLayers.length){var u=this.config.layerSettings;q.forEach(u,d.hitch(this,function(A){c.push(A.id);var F=this._getFeatureLayerGeometryType(A.id);A.editable&&F&&k.push({name:A.title,value:A.id,geometryType:F})}))}this._layerNameStore=new a({idProperty:"value",data:k});k.length&&this._updateLayerNameOptions()},_updateLayerNameOptions:function(){var c;
var k=w(".esriCTLayerNameDropdown",this.domNode);q.forEach(k,d.hitch(this,function(u){c=e.byNode(u).get("value");e.byNode(u).set("store",this._layerNameStore);e.byNode(u).set("value",c)}));0===this._editableConfiguredLayers.length?(b.remove(this.noEditableLayersAvailable,"esriCTHidden"),b.add(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),b.add(this.statisticsLayerTableNode,"esriCTHidden"),b.add(this.additionalProjectCostWrapper,"esriCTHidden")):(b.add(this.noEditableLayersAvailable,"esriCTHidden"),
b.remove(this.btnAddStatisticsNodeWrapper,"esriCTHidden"),b.remove(this.statisticsLayerTableNode,"esriCTHidden"),b.remove(this.additionalProjectCostWrapper,"esriCTHidden"))},_getFeatureLayerGeometryType:function(c){var k=q.filter(this.map.webMapResponse.itemInfo.itemData.operationalLayers,d.hitch(this,function(u){return c===u.id}));return k.length&&k[0].layerObject?k[0].layerObject.geometryType:null},_createStatisticsTypeStore:function(){this._pointLayerStatisticsStore||this._polygonLayerStatisticsStore||
this._polylineLayerStatisticsStore||(this._createPointGeometryStatisticsStore(),this._createPolygonGeometryStatisticsStore(),this._createPolylineGeometryStatisticsStore())},_getStatisticsTypeStore:function(c){switch(c){case "esriGeometryPolygon":return this._polygonLayerStatisticsStore;case "esriGeometryPolyline":return this._polylineLayerStatisticsStore;case "esriGeometryPoint":return this._pointLayerStatisticsStore}},_addStatisticsDropdown:function(c,k,u){c=v.create("div",{"class":"esriCTDropDownContainer"},
c);this._createStatisticsTypeStore();var A=k.layerNameDropDown._getSelectedOptionsAttr().item.geometryType;A=this._getStatisticsTypeStore(A);k.statisticsTypeDropdown=new x({name:"statisticsTypeSelect",store:A,labelAttr:"name","class":"esriCTStatisticsTypeDropdown"},c);this.own(B(k.statisticsTypeDropdown,"click",d.hitch(this,function(){this._resetStatisticsTypeWidth(k)})));this.own(B(k.statisticsTypeDropdown,"keydown",d.hitch(this,function(F){if(F.keyCode===g.ENTER||F.keyCode===g.SPACE)m.stop(F),this._resetStatisticsTypeWidth(k)})));
this.own(B(k.statisticsTypeDropdown,"change",d.hitch(this,function(F){this._resetStatisticsTypeWidth(k);this._onStatisticsTypeChange(F,k,u);r.set(k.statisticsTypeDropdown,"aria-label","type "+k.statisticsTypeDropdown._getSelectedOptionsAttr().label)})));r.set(k.statisticsTypeDropdown,"aria-label","Type "+k.statisticsTypeDropdown._getSelectedOptionsAttr().label);k.statisticsTypeDropdown.startup()},_createPointGeometryStatisticsStore:function(){this._pointLayerStatisticsStore=new a({idProperty:"value",
data:this._commonStatisticsStoreOption})},_createPolygonGeometryStatisticsStore:function(){this._polygonLayerStatisticsStore=new a({idProperty:"value",data:this._commonStatisticsStoreOption.concat(this._polygonStatisticsStoreOption)})},_createPolylineGeometryStatisticsStore:function(){this._polylineLayerStatisticsStore=new a({idProperty:"value",data:this._commonStatisticsStoreOption.concat(this._polylineStatisticsStoreOption)})},_createFieldStore:function(c){var k=[];var u=["esriFieldTypeDouble",
"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSmallFloat"];this._layerFieldStore[c]||(q.forEach(this.map._layers[c].fields,d.hitch(this,function(A){-1<u.indexOf(A.type)&&-1===this._shapeFields.indexOf(A.name.toLowerCase())&&k.push({name:A.alias||A.name,value:A.name})})),0===k.length&&k.push({name:"\x26nbsp",value:null}),this._layerFieldStore[c]=new a({idProperty:"value",data:k}))},_addLayerFieldDropdown:function(c,k){c=v.create("div",{"class":"esriCTDropDownContainer"},c);var u=
k.layerNameDropDown._getSelectedOptionsAttr().value;this._createFieldStore(u);k.layerFieldDropdown=new x({name:"layerFieldDropdown",store:this._layerFieldStore[u],labelAttr:"name","class":"esriCTStatisticsFieldDropdown"},c);this.own(B(k.layerFieldDropdown,"click",d.hitch(this,function(){this._resetLayerFieldWidth(k)})));this.own(B(k.layerFieldDropdown,"keydown",d.hitch(this,function(A){if(A.keyCode===g.ENTER||A.keyCode===g.SPACE)m.stop(A),this._resetLayerFieldWidth(k)})));this.own(B(k.layerFieldDropdown,
"change",d.hitch(this,function(){this._resetLayerFieldWidth(k);r.set(k.layerFieldDropdown,"aria-label",this.nls.statisticsSettings.fieldNameTitle+" "+k.layerFieldDropdown.value)})));k.layerFieldDropdown.startup();c=k.statisticsTypeDropdown.getValue();this._onStatisticsTypeChange(c,k);r.set(k.layerFieldDropdown,"aria-label",this.nls.statisticsSettings.fieldNameTitle+" "+k.layerFieldDropdown.value)},_addStatisticsLabelTextBox:function(c,k,u){c=v.create("div",{"class":"esriCTTextBoxContainer"},c);k.statisticsLabelTextBox=
new y({"class":"esriCTLayerLabelTextBox"},c);u&&u.label&&k.statisticsLabelTextBox.set("value",u.label);k.statisticsLabelTextBox.startup();r.set(k.statisticsLabelTextBox,"aria-label",this.nls.statisticsSettings.statisticsTitle+" "+k.statisticsLabelTextBox.get("value"))},_updateStatisticsTable:function(c){var k,u;c.layerId&&(c.editable?k=c.layerId:u=c.layerId);u&&(c=this._statisticsLayerTable.getRows(),q.forEach(c,d.hitch(this,function(A){A.layerNameDropDown&&A.layerNameDropDown.get("value")===u&&this._statisticsLayerTable.deleteRow(A)})),
this._layerNameStore.remove(u),c=this._editableConfiguredLayers.indexOf(u),-1!==c&&this._editableConfiguredLayers.splice(c,1));k&&""!==k&&(c=this.layerInfosObj.getLayerInfoById(k))&&c.layerObject&&(c=c.layerObject,this._layerNameStore.put({name:c.name,value:k,geometryType:c.geometryType}),this._editableConfiguredLayers.push(k));this._updateLayerNameOptions()},resetAddNewStatisticsDropdown:function(){var c,k,u,A,F;if(c=w(".simple-table-field.field",this._statisticsLayerTable.domNode))c[0]&&(k=f.getComputedStyle(c[0])),
c[1]&&(u=f.getComputedStyle(c[1])),c[2]&&(A=f.getComputedStyle(c[2]));c=w(".esriCTLayerNameDropdown",this._statisticsLayerTable.domNode);q.forEach(c,d.hitch(this,function(G){(G=w(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",G))&&G[0]&&(F=this.showActionButtonsInColumn?59:30,G[0].style.width=parseInt(k.width,10)-F+"px")}));c=w(".esriCTStatisticsTypeDropdown",this._statisticsLayerTable.domNode);q.forEach(c,d.hitch(this,function(G){(G=w(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",
G))&&G[0]&&(F=this.showActionButtonsInColumn?59:30,G[0].style.width=parseInt(u.width,10)-F+"px")}));c=w(".esriCTStatisticsFieldDropdown",this._statisticsLayerTable.domNode);q.forEach(c,d.hitch(this,function(G){(G=w(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",G))&&G[0]&&(F=this.showActionButtonsInColumn?59:30,G[0].style.width=parseInt(A.width,10)-F+"px")}))},_resetLayerNameWidth:function(c){var k,u;(k=w(".simple-table-field.field",this._statisticsLayerTable.domNode))&&k[0]&&
(u=f.getComputedStyle(k[0]));c=w(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",c.layerNameDropDown.domNode);k=this.showActionButtonsInColumn?59:30;c&&c[0]&&(c[0].style.width=parseInt(u.width,10)-k+"px")},_resetStatisticsTypeWidth:function(c){var k,u;(u=w(".simple-table-field.field",this._statisticsLayerTable.domNode))&&u[1]&&(k=f.getComputedStyle(u[1]));c=w(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",c.statisticsTypeDropdown.domNode);u=this.showActionButtonsInColumn?
59:30;c&&c[0]&&(c[0].style.width=parseInt(k.width,10)-u+"px")},_resetLayerFieldWidth:function(c){var k,u;(k=w(".simple-table-field.field",this._statisticsLayerTable.domNode))&&k[2]&&(u=f.getComputedStyle(k[2]));c=w(".dijitReset.dijitInline.dijitSelectLabel.dijitValidationTextBoxLabel",c.layerFieldDropdown.domNode);k=this.showActionButtonsInColumn?59:30;c&&c[0]&&(c[0].style.width=parseInt(u.width,10)-k+"px")}})})},"widgets/CostAnalysis/setting/ProjectCost":function(){define("dojo/_base/declare jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./ProjectCost.html dojo/_base/lang dojo/on jimu/dijit/SimpleTable dojo/query dijit/form/ValidationTextBox dojo/dom-construct dijit/form/Select dojo/_base/array dojo/store/Memory".split(" "),
function(D,C,E,B,q,w,v,x,y,p,n,d,a,b){return D([C,E,B],{templateString:q,baseClass:"jimu-widget-cost-analysis-project-cost-settings",_costFieldStore:null,postCreate:function(){this.inherited(arguments);this._handleClickEvents()},_setConfig:function(){this.config&&this.config.projectCostSettings&&0<this.config.projectCostSettings.length&&a.forEach(this.config.projectCostSettings,w.hitch(this,function(e){this._addProjectCostLayerRow(e)}))},startup:function(){this.inherited(arguments);this._createProjectCostFieldTable();
this._createProjectCostTypeFieldStore();this._setConfig()},getConfig:function(){var e=this._projectCostTable.getRows();var l=[];a.some(e,w.hitch(this,function(f){l.push({label:f.projectCostLabelTextBox.getValue(),type:f.projectCostTypeDropdown.getValue(),value:f.projectCostValueTextBox.getValue()})}));return l},validateProjectCostData:function(){var e=this._projectCostTable.getRows();for(var l in e){var f=e[l];if(!f.projectCostLabelTextBox.isValid())return this._setErrorMessage(f.projectCostLabelTextBox,
this.nls.projectCostSettings.invalidProjectCostMessage),{isValid:!1};if(!f.projectCostValueTextBox.isValid())return this._setErrorMessage(f.projectCostValueTextBox,this.nls.projectCostSettings.invalidProjectCostMessage),{isValid:!1}}return{isValid:!0}},_setErrorMessage:function(e,l){e.set("state","Error");e.set("invalidMessage",l);e.focus();e.isValid()},_handleClickEvents:function(){this.own(v(this.btnAddProjectCostNode,"click",w.hitch(this,function(){this._addProjectCostBtnClicked()})));this.own(v(this.btnCrossNode,
"click",w.hitch(this,function(){this._deleteLayerRow()})))},_createProjectCostFieldTable:function(){this._projectCostTable=new x({fields:[{name:"editable",title:this.nls.common.label,type:"empty",editable:!1,width:"35%"},{name:"field",title:this.nls.common.type,type:"empty",editable:!1,width:"20%"},{name:"field",title:this.nls.projectCostSettings.additionalCostValueColumnHeader,type:"empty",editable:!0,width:"35%"},{name:"actions",title:this.nls.common.actions,width:"10%",type:"actions",actions:["up",
"down","delete"]}],selectable:!1,autoHeight:!0});this._projectCostTable.placeAt(this.projectCostTableNode);this._projectCostTable.startup()},_addProjectCostBtnClicked:function(){this._addProjectCostLayerRow()},_addProjectCostLayerRow:function(e){var l;var f=this._projectCostTable.addRow({});if(l=y(".simple-table-cell",f.tr))f=f.tr,this._addProjectCostLabelTextBox(l[0],f,e),this._addProjectCostTypeDropdown(l[1],f,e),this._addProjectCostValueTextBox(l[2],f,e)},_addProjectCostLabelTextBox:function(e,
l,f){e=n.create("div",{"class":"esriCTTextBoxContainer"},e);l.projectCostLabelTextBox=new p({"class":"esriCTProjectCostLabelTextbox esriCTAddProjectCostTableNode",invalidMessage:"Invalid Entry for project cost"},e);l.projectCostLabelTextBox.startup();f&&f.label&&l.projectCostLabelTextBox.set("value",f.label);l.projectCostLabelTextBox.validator=w.hitch(this,this._validateProjectCostLabelFields)},_validateProjectCostLabelFields:function(e){return""===w.trim(e)?!1:!0},_addProjectCostTypeDropdown:function(e,
l,f){e=n.create("div",{"class":"esriCTProjectCostTypeDropDownContainer esriCTAddProjectCostTableNode"},e);l.projectCostTypeDropdown=new d({name:"layerSelect",store:this._projectCostFieldStore,labelAttr:"name","class":"esriCTProjectCostTypeDropdown"},e);f&&f.type&&l.projectCostTypeDropdown.set("value",f.type);l.projectCostTypeDropdown.startup()},_addProjectCostValueTextBox:function(e,l,f){e=n.create("div",{"class":"esriCTProjectCostTextBoxContainer esriCTAddProjectCostTableNode"},e);l.projectCostValueTextBox=
new p({"class":"esriCTProjectCostLabelTextbox",trim:!0,invalidMessage:"Invalid Entry for project cost"},e);l.projectCostValueTextBox.startup();f&&f.value&&l.projectCostValueTextBox.set("value",f.value);l.projectCostValueTextBox.validator=w.hitch(this,this._validateProjectCostValueFields)},_validateProjectCostValueFields:function(e){e=Number(e);return""===e||isNaN(e)||"0"===e||0===e?!1:!0},_deleteLayerRow:function(){var e=this._projectCostTable.getRows(),l=this._projectCostTable.getData();a.forEach(l,
w.hitch(this,function(f,t){f.editable&&this._projectCostTable.deleteRow(e[t])}))},_createProjectCostTypeFieldStore:function(){var e=[];e.push({name:"+",value:"+"});e.push({name:"*",value:"*"});e.push({name:"-",value:"_"});e.push({name:"%",value:"%"});this._projectCostFieldStore=new b({idProperty:"value",data:e})}})})},"widgets/CostAnalysis/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/CostAnalysis/setting/GeneralSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n    \x3cdiv class\x3d"esriCTGeneralSettingsLabel esriCTEllipsis esriCTVerticalCenterAlignLabel" title\x3d"${nls.generalSettings.measurementUnitLabel}"\x3e${nls.generalSettings.measurementUnitLabel}:\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n      \x3cselect class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"measurementUnitInputNode"\x3e\r\n        \x3coption value\x3d"feet"\x3e${nls.units.feet.label}\x3c/option\x3e\r\n        \x3coption value\x3d"meters"\x3e${nls.units.meters.label}\x3c/option\x3e\r\n        \x3coption value\x3d"miles"\x3e${nls.units.miles.label}\x3c/option\x3e\r\n        \x3coption value\x3d"yards"\x3e${nls.units.yards.label}\x3c/option\x3e\r\n        \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers.label}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n    \x3cdiv class\x3d"esriCTGeneralSettingsLabel esriCTEllipsis esriCTVerticalCenterAlignLabel" title\x3d"${nls.generalSettings.currencyLabel}"\x3e${nls.generalSettings.currencyLabel}:\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"maxLength:\'3\'" data-dojo-attach-point\x3d"currencyInputNode" trim\x3d"true"\r\n        required\x3d"true"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n    \x3cdiv class\x3d"esriCTGeneralSettingsLabel esriCTEllipsis esriCTVerticalCenterAlignLabel" title\x3d"${nls.generalSettings.roundCostLabel}"\x3e${nls.generalSettings.roundCostLabel}:\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n      \x3cselect class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"roundCostInputNode"\x3e\r\n        \x3coption value\x3d"twoDecimalPoint"\x3e${nls.generalSettings.roundCostValues.twoDecimalPoint}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestWholeNumber"\x3e${nls.generalSettings.roundCostValues.nearestWholeNumber}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestTen"\x3e${nls.generalSettings.roundCostValues.nearestTen}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestHundred"\x3e${nls.generalSettings.roundCostValues.nearestHundred}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestThousand"\x3e${nls.generalSettings.roundCostValues.nearestThousand}\x3c/option\x3e\r\n        \x3coption value\x3d"nearestTenThousands"\x3e${nls.generalSettings.roundCostValues.nearestTenThousands}\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cfieldset class\x3d"esriCTProjectOutputSettingsFieldset"\x3e\r\n    \x3clegend class\x3d"esriCTProjectOutputSettingsLegend" title\x3d"${nls.generalSettings.projectOutputSettings}"\x3e\r\n      ${nls.generalSettings.projectOutputSettings} \x3c/legend\x3e\r\n    \x3cdiv class\x3d"esriCTFullWidth esriCTFullHeight esriCTProjectSettingsContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTProjectSettingsOutputLeftContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTProjectAreaTypeContainer esriCTVerticalCenterAlignLabel esriCTEllipsis" title\x3d"${nls.generalSettings.typeOfProjectAreaLabel}"\x3e${nls.generalSettings.typeOfProjectAreaLabel}:\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTProjectAreaTypeInputContainer"\x3e\r\n          \x3cdiv class\x3d""\x3e\r\n            \x3cselect class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"projectAreaTypeInputNode"\x3e\r\n              \x3coption value\x3d"outline"\x3e${nls.generalSettings.projectAreaType.outline}\x3c/option\x3e\r\n              \x3coption value\x3d"buffer"\x3e${nls.generalSettings.projectAreaType.buffer}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTProjectSettingsOutputRightContainer esriCTHidden" data-dojo-attach-point\x3d"projectSettingsOutputRightContainerNode"\x3e\r\n        \x3cdiv class\x3d"esriCTBufferDistanceLabelContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTBufferDistanceLabel esriCTVerticalCenterAlignLabel esriCTEllipsis" title\x3d"${nls.generalSettings.bufferDistanceLabel}"\x3e${nls.generalSettings.bufferDistanceLabel}:\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTBufferDistanceInputContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/NumberTextBox" disabled\x3dtrue data-dojo-attach-point\x3d"bufferDistanceInputNode"\r\n            trim\x3d"true" required\x3d"true" data-dojo-props\x3d""\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTProjectMeasurementUnitContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTVerticalCenterAlignLabel esriCTEllipsis esriCTBufferDistanceUnit" data-dojo-attach-point\x3d"bufferDistanceUnit"\x3e${nls.units.feet.label}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3cdiv class\x3d"esriCTFieldContainer" style\x3d"padding-top: 20px"\x3e\r\n    \x3cinput data-dojo-attach-point\x3d"exportCSVCheckBox" data-dojo-type\x3d"dijit/form/CheckBox" type\x3d"checkbox" /\x3e\r\n    \x3cspan\x3e${nls.generalSettings.csvReportExportLabel}\x3c/span\x3e\r\n    \x3cdiv class\x3d"esriCTEditReportSettingsIconContainer"\x3e\r\n      \x3cdiv style\x3d"vertical-align: middle" title\x3d"${nls.generalSettings.editReportSettingsBtnTooltip}" data-dojo-attach-point\x3d"editReportSettings"\r\n        class\x3d"jimu-icon jimu-icon-edit"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/ReportSettings.html":'\x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n  \x3cdiv style\x3d"margin-bottom: 10px"\x3e\r\n      \x3cdiv class\x3d"esriCTReportNameLabel esriCTEllipsis"\x3e ${nls.generalSettings.reportSettings.reportNameLabel}\x3c/div\x3e\r\n      \x3cdiv style\x3d"width:70%" data-dojo-attach-point\x3d"reportNameNode" required\x3d"true" data-dojo-type\x3d"dijit/form/TextBox"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv\x3e\r\n      \x3cdiv class\x3d"esriCTReportSettingsTable" data-dojo-attach-point\x3d"reportSettingsTableNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/ProjectSettings.html":'\x3cdiv\x3e\r\n\t\x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n\t\t\x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n\t\t\t${nls.projectSettings.costingGeometrySectionTitle}\r\n\t\t\x3c/legend\x3e\r\n\t\t\x3cdiv class\x3d"esriCTNote esriCTFullWidth"\x3e${nls.projectSettings.costingGeometrySectionNote}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Costing Geometry Layer Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.costingGeometryLayerLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.costingGeometryLayerLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Costing Geometry Later Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"costingGeometryLayerDropDown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"costingGeometryHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Field to Label Geography Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.fieldLabelGeography}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.fieldLabelGeography}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Field to Label Geography Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"fieldToLabelGeography" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"fieldToLabelGeographyHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/fieldset\x3e\r\n\t\x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n\t\t\x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n\t\t\t${nls.projectSettings.projectTableSectionTitle}\r\n\t\t\x3c/legend\x3e\r\n\t\t\x3cdiv class\x3d"esriCTNote esriCTFullWidth"\x3e${nls.projectSettings.projectTableSectionNote}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Project Assets Table Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.projectAssetsTableLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.projectAssetsTableLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Project Assets Table Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"projectAssetsTable" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"projectAssetsTableHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Project Multiplier Additional Cost Table Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.projectMultiplierTableLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.projectMultiplierTableLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Project Multiplier Additional Cost Table Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" data-dojo-attach-point\x3d"projectMultiplierTable" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"projectMultiplierTableHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3c!--Project Layer Label--\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.projectLayerLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.projectLayerLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c!--Project Layer Dropdown--\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer esriCTProjectLayerDropdown" data-dojo-attach-point\x3d"projectLayerDropDown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\x3c/select\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"projectLayerHelp"\x3e\x3c/div\x3e\r\n\t\t\t\x3c!--Configure Fields Settings--\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTConfigureFieldsContainer"\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3c!-- Point layer centroid starts --\x3e\r\n\t\t\x3cdiv class\x3d"esriCTRowContainer esriCTFullWidth"\x3e\r\n\t\t\t\x3cdiv title\x3d"${nls.projectSettings.pointLayerCentroidLabel}" class\x3d"esriCTLabelContainer esriCTEllipsis"\x3e\r\n\t\t\t\t${nls.projectSettings.pointLayerCentroidLabel}:\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cselect class\x3d"esriCTDropDownContainer" disabled\x3dtrue data-dojo-attach-point\x3d"pointLayerCentroidDropDown"\r\n\t\t\tdata-dojo-type\x3d"dijit/form/Select"\x3e\r\n\t\t\t\x3c/select\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"pointLayerCentroidHelp"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3c!-- Point layer centroid ends --\x3e\r\n\t\t\x3c!--Configured Fields Table--\x3e\r\n\t\t\x3cdiv class\x3d"esriCTConfiguredFieldsTable esriCTHidden" data-dojo-attach-point\x3d"configuredFieldsTable"\x3e\x3c/div\x3e\r\n\t\x3c/fieldset\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/CostAnalysis/setting/LayerSettings.html":'\x3cdiv class\x3d"esriCTTabNode"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"layerSettingsMainContainer"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerSettingsTableNode" data-dojo-attach-point\x3d"layerSettingsTableNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTHidden esriCTNoAssetLayersAvailable" data-dojo-attach-point\x3d"noAssetLayersAvailable"\x3e\r\n      ${nls.layerSettings.noAssetLayersAvailable}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/AttributeSettings.html":'\x3cdiv class\x3d"esriCTMainAttributeSettingsContainer"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"attributeSettingsAddFields" \r\n                class\x3d"esriCTBtnAddField esriCTEllipsis"\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddLabel esriCTEllipsis"\x3e${nls.layerSettings.addFieldLabelTitle}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv\x3e\r\n        \x3cdiv class\x3d"esriCTAttributeSettingsTable" data-dojo-attach-point\x3d"attributeSettingsTableNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/CostingInfo.html":'\x3cdiv class\x3d"esriCTTabNode"\x3e\r\n    \x3c!--Add Layers section --\x3e\r\n    \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n        \x3cdiv class\x3d"esriCTManageScenarioButtonContainer"\x3e\r\n            \x3cdiv class\x3d"esriCTMangeScenarios"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"btnManageScenarios" class\x3d"esriCTBtnAddSection esriCTEllipsis"\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddLabel esriCTEllipsis"\x3e${nls.costingInfo.manageScenariosTitle}\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHidden esriCTNoEditableLayersAvailable" data-dojo-attach-point\x3d"noEditableLayersAvailable"\x3e\r\n            ${nls.costingInfo.noEditableLayersAvailable}\r\n        \x3c/div\x3e\r\n        \x3c!-- Update cost equation checkbox parent node --\x3e\r\n        \x3cdiv class\x3d"esriCTUpdateCostCheckBoxParentContainer esriCTHidden" data-dojo-attach-point\x3d"updateCostEquationChkContainer"\x3e\r\n            \x3c!-- checkbox container --\x3e\r\n            \x3cdiv class\x3d"esriCTUpdateCheckBoxContainer"\x3e\r\n                \x3c!-- checkbox --\x3e\r\n                \x3cinput id\x3d"esrict-update-costequation-check" data-dojo-attach-point\x3d"updateCostEquationCheckBox"\r\n                    data-dojo-type\x3d"dijit/form/CheckBox" type\x3d"checkbox" checked\x3d"false" /\x3e\r\n                \x3cspan\x3e${nls.costingInfo.updateProjectCostCheckboxLabel}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTUpdateEquationHint esriCTNote"\x3e${nls.costingInfo.updateProjectCostEquationHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"costingTemplateContainer"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/ManageScenarios.html":'\x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n    \x3cdiv\x3e\r\n        \x3cdiv class\x3d"esriCTPopupFields esriCTEllipsis"\x3e ${nls.costingInfo.scenarioNameLabel}\x3c/div\x3e\r\n        \x3cdiv style\x3d"width:180px" data-dojo-attach-point\x3d"scenarioNameNode" required\x3d"true" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\x3c/div\x3e\r\n        \x3cdiv style\x3d"width:120px" class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"addBtnNode" title\x3d"${nls.costingInfo.addBtnLabel}"\x3e${nls.costingInfo.addBtnLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv\x3e\r\n        \x3cdiv class\x3d"esriCTAddScenarioNameTable" data-dojo-attach-point\x3d"addScenarioNameTableNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/CostingTemplate.html":'\x3cdiv\x3e\r\n    \x3cdiv class\x3d"esriCTLayerNameContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTLayerLabel esriCTEllipsis" data-dojo-attach-point\x3d"layerName"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"btnCostingTemplateNode" class\x3d"esriCTBtnAddSection esriCTEllipsis"\x3e\r\n        \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"esriCTBtnAddLabel esriCTEllipsis"\x3e ${nls.costingInfo.addCostingTemplateLabel}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTAddLayerTableNode" data-dojo-attach-point\x3d"addLayerTableNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/EditCostEquation.html":'\x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n  \x3cdiv\x3e\r\n    \x3cdiv class\x3d"esriCTPopupFields esriCTEllipsis"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n        \x3cdiv class\x3d"esriCTEditCostEquationLabel esriCTEllipsis esriCTVerticalCenterAlignLabel"\x3e\r\n          ${nls.costingInfo.geographyTitle}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTCostEquationFieldContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/TextBox" disabled\x3dtrue data-dojo-attach-point\x3d"geographyValue"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n        \x3cdiv class\x3d"esriCTEditCostEquationLabel esriCTEllipsis esriCTVerticalCenterAlignLabel"\x3e\r\n          ${nls.costingInfo.scenarioTitle}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTCostEquationFieldContainer"\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth" data-dojo-type\x3d"dijit/form/TextBox" disabled\x3dtrue data-dojo-attach-point\x3d"scenarioValue"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTFieldContainer esriCTFullWidth"\x3e\r\n        \x3cdiv class\x3d"esriCTEditCostEquationLabel esriCTEllipsis esriCTVerticalCenterAlignLabel "\x3e\r\n          ${nls.costingInfo.costEquationTitle}\x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTFullWidth esriCTCostEquationInput" spellcheck\x3d"false" data-dojo-type\x3d"dijit/form/Textarea" data-dojo-attach-point\x3d"costEquationValue"\r\n            required\x3d"true"\x3e\r\n          \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTFullWidth"\x3e\r\n      \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"costEquationHint"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/StatisticsSettings.html":'\x3cdiv class\x3d"esriCTTabNode"\x3e\r\n    \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n        \x3cdiv\x3e\r\n            \x3c!--Add New Statistics button--\x3e\r\n            \x3cdiv class\x3d"esriCTStatisticsContainer" data-dojo-attach-point\x3d"btnAddStatisticsNodeWrapper"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"btnAddStatisticsNode" class\x3d"esriCTBtnStatisticsAddSection"\x3e\r\n                    \x3cspan class\x3d"esriCTBtnAddStatisticsIcon"\x3e\x3c/span\x3e\r\n                    \x3cspan class\x3d"esriCTBtnStatisticsAddLabel"\x3e ${nls.statisticsSettings.addStatisticsLabel}\x3c/span\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTAddLayerTableNode" data-dojo-attach-point\x3d"statisticsLayerTableNode"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTHidden esriCTNoEditableLayersAvailable" data-dojo-attach-point\x3d"noEditableLayersAvailable"\x3e\r\n                ${nls.costingInfo.noEditableLayersAvailable}\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"additionalProjectCostWrapper"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Add/delete/reorder buttons--\x3e\r\n    \x3cdiv class\x3d"esriCTStatisticsButtonParentDiv"\x3e\r\n        \x3cdiv class\x3d"esriCTAddStatisticsIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnAddNode"\r\n            title\x3d"${nls.statisticsSettings.addNewStatisticsText}" tabindex\x3d"0" role\x3d"button"\r\n            aria-label\x3d"${nls.statisticsSettings.addNewStatisticsText}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDeleteStatisticsIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnCrossNode"\r\n            title\x3d"${nls.statisticsSettings.deleteStatisticsText}" tabindex\x3d"-1" role\x3d"button"\r\n            aria-label\x3d"${nls.statisticsSettings.deleteStatisticsText}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTStatisticsUpIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnUpNode"\r\n            title\x3d"${nls.statisticsSettings.moveStatisticsUpText}" tabindex\x3d"-1" role\x3d"button"\r\n            aria-label\x3d"${nls.statisticsSettings.moveStatisticsUpText}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTStatisticsDownIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnDownNode"\r\n            title\x3d"${nls.statisticsSettings.moveStatisticsDownText}" tabindex\x3d"-1" role\x3d"button"\r\n            aria-label\x3d"${nls.statisticsSettings.moveStatisticsDownText}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/ProjectCost.html":'\x3cdiv\x3e\r\n    \x3c!--Add Addtional Project cost button--\x3e\r\n    \x3cdiv class\x3d"esriCTProjectCostContainer" data-dojo-attach-point\x3d"btnAddProjectCostNodeWrapper"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"btnAddProjectCostNode" class\x3d"esriCTBtnProjectCostAddSection"\x3e\r\n            \x3cspan class\x3d"esriCTBtnAddProjectCostIcon"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"esriCTBtnProjectCostAddLabel"\x3e ${nls.projectCostSettings.addProjectCostLabel} \x3c/span\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTProjectCostTableWrapper" data-dojo-attach-point\x3d"projectCostTableWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTProjectCostTableNode" data-dojo-attach-point\x3d"projectCostTableNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Add/delete/reorder buttons--\x3e\r\n    \x3cdiv class\x3d"esriCTStatisticsButtonParentDiv"\x3e\r\n        \x3cdiv class\x3d"esriCTAddStatisticsIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnAddNode"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDeleteStatisticsIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnCrossNode"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTStatisticsUpIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnUpNode"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTStatisticsDownIcon esriCTStatisticsButtons" data-dojo-attach-point\x3d"btnDownNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/Setting.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n\t\x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"configurationTabParentContainer"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"generalSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"projectSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"layerSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"costingInfoNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"statisticsSettingsNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/CostAnalysis/setting/css/style.css":".jimu-widget-cost-analysis-general-settings .esriCTFieldContainer {float: left; padding: 0px 0px 20px 0px;}.jimu-widget-cost-analysis-general-settings .esriCTDropDownContainer {width: 75%; float: right;}.jimu-widget-cost-analysis-general-settings .esriCTGeneralSettingsLabel {width: 25%; float: left; padding-right: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectOutputSettingsFieldset {margin: 20px 0px 0px 0px; border: 1px solid #D2DAE2;}.jimu-widget-cost-analysis-general-settings .esriCTProjectOutputSettingsLegend {margin-left: 10px; font-weight: bold;}.jimu-widget-cost-analysis-general-settings .esriCTProjectFieldContainer {float: left;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabel {float: right; width: 100%; text-align: center; padding-left: 5px; max-width: 214px;}.jimu-widget-cost-analysis-general-settings .esriCTVerticalCenterAlignLabel {line-height: 30px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsContainer {overflow: hidden; padding: 15px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectAreaTypeContainer {float: left; width: 48%; max-width: 214px; padding-right: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectAreaTypeInputContainer {width: 52%; float: left;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabelContainer {float: left; width: 50%; padding-right: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceInputContainer {float: left; width: 20%;}.jimu-widget-cost-analysis-general-settings .esriCTProjectMeasurementUnitContainer {width: 30%; float: left; padding-left: 5px;}.jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputRightContainer {float: right; width: 50%}.jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputLeftContainer {float: left; width: 50%;}.jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceUnit {max-width: 130px;}.jimu-widget-cost-analysis-general-settings .esriCTEditReportSettingsIconContainer {display: inline-block; margin: 5px 0 0 10px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTEditReportSettingsIconContainer {margin: 5px 10px 0 0;}.jimu-widget-cost-analysis-report-settings .esriCTReportNameLabel {line-height: 25px; float: left; margin-right: 10px;}.esriRtl .jimu-widget-cost-analysis-report-settings .esriCTReportNameLabel {float: right;}.jimu-widget-cost-analysis-report-settings .esriCTReportSettingsTable .dijitTextBox {height: 28px;}.esriRtl .jimu-widget-cost-analysis-settings .esriCTTabNode {padding-left: 20px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTFieldContainer {float: right; padding: 0px 0px 20px 0px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTTabNode {padding-left: 20px; padding-right: 0px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTGeneralSettingsLabel {float: right; padding-right: 0px; padding-left: 5px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputLeftContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectSettingsOutputRightContainer {float: left;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectAreaTypeContainer {float: right; padding-right: 0px; padding-left: 5px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabelContainer {float: right; padding-right: 0px; padding-left: 5px; text-align: center;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceInputContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectMeasurementUnitContainer {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTProjectOutputSettingsLegend {margin-left: 0px; margin-right: 10px;}.esriRtl .jimu-widget-cost-analysis-general-settings .esriCTBufferDistanceLabel {padding-right: 5px; padding-left: 0px;}.jimu-widget-cost-analysis-project-settings {width: 100%; float: left;}.jimu-widget-cost-analysis-project-settings .esriCTFieldSet {height: auto; width: 100%; margin-bottom: 10px; padding: 20px 20px 0 20px; border: 1px solid #D2DAE2;}.jimu-widget-cost-analysis-project-settings .esriCTFieldSetLegend {font-weight: bold;}.jimu-widget-cost-analysis-project-settings .esriCTNote,.jimu-widget-cost-analysis-costing-info .esriCTNote {padding-bottom: 20px; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-cost-analysis-project-settings .esriCTHelpIcon {height: 30px; width: 20px; background-repeat: no-repeat; background-position: center center; background-image: url(images/help.png); display: inline-block; vertical-align: top; margin: 0 5px; cursor: pointer;}.jimu-widget-cost-analysis-project-settings .esriCTRowContainer {margin-bottom: 20px; float: left;}.jimu-widget-cost-analysis-project-settings .esriCTLabelContainer {width: 30%; float: left; line-height: 30px; padding: 0 10px 0 0;}.jimu-widget-cost-analysis-project-settings .esriCTDropDownContainer {width: calc( 70% - 30px); float: left; box-sizing: border-box;}.jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsContainer {width: 35%; float: left; padding: 0 10px;}.jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsLabel {width: calc(100% - 36px); line-height: 30px; text-align: right; padding: 0 0 0 10px; float: right;}.jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsCheckBox {margin: 5px 10px; float: right;}.jimu-widget-cost-analysis-project-settings .esriCTConfiguredFieldsTable {width: 70%; float: right; margin-bottom: 20px;}.claro .jimu-widget-cost-analysis-project-settings .esriCTConfiguredFieldsTable .dijitSelect {height: 27px; margin-top: 1px; width: 99%; float: left;}.jimu-widget-cost-analysis-project-settings .esriCTProjectSettingsFieldsDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 280px; float: left;}.claro .jimu-widget-cost-analysis-project-settings .dijitSelect .dijitInputField {overflow: hidden;}.jimu-widget-cost-analysis-project-settings .esriCTProjectLayerDropdown .dijitSelectLabel {text-align: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTLabelContainer {float: right; padding: 0 0 0 10px;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTDropDownContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsContainer {float: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsCheckBox {float: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfigureFieldsLabel {float: left; padding: 0 10px 0 0; text-align: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTConfiguredFieldsTable {float: left;}.esriRtl .jimu-widget-cost-analysis-project-settings .esriCTProjectLayerDropdown .dijitSelectLabel, .esriRtl .jimu-widget-cost-analysis-project-settings .esriCTProjectSettingsFieldsDropdown .dijitSelectLabel {text-align: right;}.claro .jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsTableNode .dijitSelect {width: 99%; height: 27px; float: left;}.jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsFieldsDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 213px;}.jimu-widget-cost-analysis-layer-settings .esriCTNoAssetLayersAvailable {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-cost-analysis-layer-settings .esriCTDropDownContainer {float: left;}.jimu-widget-cost-analysis-layer-settings .esriCTFieldError {float: left; margin-left: 8px; line-height: 0; margin-top: 4px; cursor: pointer;}.jimu-widget-cost-analysis-layer-settings .esriCTAttributeSettingIcon {height: 16px; width: 16px; background-repeat: no-repeat; margin:auto; background-position: center center; background-image: url(images/attribute_settings.png);}.jimu-widget-cost-analysis-layer-settings .esriCTAttributeSettingDisableIcon {height: 16px; width: 16px; background-repeat: no-repeat; margin:auto; background-position: center center; background-image: url(images/attribute_settings_disable.png);}.esriRtl .jimu-widget-cost-analysis-layer-settings .esriCTFieldError {float: right; margin-right: 8px;}.esriRtl .claro .jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsTableNode .dijitSelect {float: right;}.esriRtl .jimu-widget-cost-analysis-layer-settings .esriCTLayerSettingsFieldsDropdown .dijitSelectLabel {text-align: right;}.jimu-widget-cost-analysis-costing-info .esriCTLayerLabel {padding-left: 0px; float: left; text-align: center; vertical-align: middle; padding-right: 10px; max-width: 60%;}.jimu-widget-cost-analysis-costing-info .esriCTBtnAddSection {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-cost-analysis-costing-info .esriCTBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-cost-analysis-costing-info .esriCTBtnAddLabel {line-height: 20px;}.jimu-widget-cost-analysis-costing-info .esriCTTabContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-cost-analysis-costing-info .esriCTMangeScenarios {float: right;}.jimu-widget-cost-analysis-costing-info .esriCTLayerNameContainer {float: left; width: 100%;}.jimu-widget-cost-analysis-costing-info .esriCTManageScenarioButtonContainer {float: right; width: 50%;}.jimu-widget-cost-analysis-costing-info .esriCTLayerTableWrapper {padding-bottom: 20px;}.jimu-widget-cost-analysis-costing-info .esriCTUpdateCostCheckBoxParentContainer {clear: both; width: 100%;}.jimu-widget-cost-analysis-costing-info .esriCTUpdateCheckBoxContainer {width: 100%; padding: 10px 0px 10px 0px;}.jimu-widget-cost-analysis-costing-info .esriCTUpdateEquationHint {width: 100%; padding: 0px 0px 10px 0px; float: left;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTUpdateEquationHint {float: right;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitSelect,.claro .jimu-widget-cost-analysis-costing-info .esriCTAddProjectCostTableNode .dijitSelect {width: 100%; height: 28px; float: left;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitTextBox .dijitInputInner,.claro .jimu-widget-cost-analysis-costing-info .esriCTAddProjectCostTableNode .dijitTextBox .dijitInputInner {height: 20px; float: left;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitTextBox,.claro .jimu-widget-cost-analysis-costing-info .esriCTAddProjectCostTableNode .dijitTextBox {height: 26px; float: left;}.jimu-widget-cost-analysis-costing-info .esriCTHelpIcon {height: 36px; width: 20px; background-repeat: no-repeat; background-position: center center; background-image: url(images/help.png); display: inline-block; vertical-align: top; position: absolute; right: 5px;}.jimu-widget-cost-analysis-costing-info .esriCTDropDownContainer {float: left;}.jimu-widget-cost-analysis-edit-equation .esriCTFieldContainer {overflow: hidden; padding: 0px 0px 5px 0px;}.jimu-widget-cost-analysis-edit-equation .esriCTEditCostEquationLabel {width: 40%; float: left; padding-right: 5px;}.jimu-widget-cost-analysis-edit-equation .esriCTVerticalCenterAlignLabel {line-height: 30px;}.jimu-widget-cost-analysis-edit-equation .esriCTCostEquationFieldContainer {width: 60%; float: right;}.jimu-widget-cost-analysis-edit-equation .esriCTFullWidth {width: 100%;}.jimu-widget-cost-analysis-edit-equation .esriCTCostEquationInput {height: 70px !important;}.jimu-widget-cost-analysis-edit-equation .esriCTCostEquationError {border-color: red !important;}.jimu-widget-cost-analysis-edit-equation .esriCTHint {margin: 5px 5px 10px 0px; float: right; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateFeatureTemplate .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateGeography .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.jimu-widget-cost-analysis-costing-info .esriCTCostingInfoScenarioOptions .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.claro .jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .dijitSelect {width: 99%;}.jimu-widget-cost-analysis-costing-info .jimu-icon-copy {background-image: url(images/copy.png); background-repeat: no-repeat; background-position: center center; width: 16px; height: 16px; padding-left: 10px; padding-right: 10px;}.jimu-widget-cost-analysis-manage-scenarios .title-label, .jimu-widget-cost-analysis-edit-equation .title-label {width: calc(100% - 30px); overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-cost-analysis-manage-scenarios .esriCTMainConfigurationContainer {width: 100%; height: 100%; color: #596679; font-size: 14px; overflow: hidden;}.jimu-widget-cost-analysis-manage-scenarios .esriCTPopupFields {width: 28%; float: left; line-height: 30px; padding-right: 5px;}.jimu-widget-cost-analysis-manage-scenarios .esriCTAddScenarioNameTable {margin-top: 10px;}.jimu-widget-cost-analysis-manage-scenarios .jimu-simple-table {max-height: 240px !important;}.jimu-widget-cost-analysis-costing-info .esriCTNoEditableLayersAvailable {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-cost-analysis-costing-info .esriCTAddLayerTableNode .jimu-simple-table .simple-table-field {position: relative; padding-right: 25px;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTLayerNameContainer {float: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTMangeScenarios {float: left;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTLayerLabel {padding-right: 0px; float: right; padding-left: 10px;}.esriRtl .jimu-widget-cost-analysis-manage-scenarios .esriCTPopupFields {float: right; padding-right: 0px; padding-left: 5px;}.esriRtl .jimu-widget-cost-analysis-edit-equation .esriCTEditCostEquationLabel {float: right; padding-left: 5px; padding-right: 0px;}.esriRtl .jimu-widget-cost-analysis-edit-equation .esriCTCostEquationFieldContainer {float: left;}.esriRtl .jimu-widget-cost-analysis-costing-template .esriCTCancelDialogPopup {float: left;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateFeatureTemplate .dijitSelectLabel {text-align: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTCostingTemplateGeography .dijitSelectLabel {text-align: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTCostingInfoScenarioOptions .dijitSelectLabel {text-align: right;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTHelpIcon {right: auto; left: 5px;}.esriRtl .jimu-widget-cost-analysis-costing-info .esriCTManageScenarioButtonContainer {float: left;}.jimu-widget-cost-analysis-statistics-settings .esriCTBtnStatisticsAddSection,.jimu-widget-cost-analysis-statistics-settings .esriCTBtnProjectCostAddSection {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-cost-analysis-statistics-settings .esriCTHidden {display: none;}.jimu-widget-cost-analysis-statistics-settings .esriCTNoEditableLayersAvailable {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-cost-analysis-statistics-settings .esriCTBtnAddStatisticsIcon,.jimu-widget-cost-analysis-statistics-settings .esriCTBtnAddProjectCostIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-cost-analysis-statistics-settings .esriCTBtnStatisticsAddLabel,.jimu-widget-cost-analysis-statistics-settings .esriCTBtnProjectCostAddLabel {line-height: 20px;}.jimu-widget-cost-analysis-statistics-settings .esriCTTabContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-cost-analysis-statistics-settings .esriCTLayerLabelTextBox {width: 100%; height: 29px; float: left;}.jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsContainer,.jimu-widget-cost-analysis-statistics-settings .esriCTProjectCostContainer {float: left; width: 40%;}.jimu-widget-cost-analysis-statistics-settings .esriCTDropDownContainer {width: 75%; float: right;}.jimu-widget-cost-analysis-statistics-settings .esriCTLayerNameDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 213px;}.jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsTypeDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 104px;}.jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsFieldDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 140px;}.jimu-widget-cost-analysis-statistics-settings .esriCTProjectCostContainer {margin-top: 10px;}.claro .jimu-widget-cost-analysis-statistics-settings .esriCTAddLayerTableNode .dijitSelect {height: 28px; min-width: 100%; float: left;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsContainer,.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTProjectCostContainer {float: right;}.esriRtl .claro .jimu-widget-cost-analysis-statistics-settings .esriCTAddLayerTableNode .dijitSelect {height: 28px; min-width: 100%;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTLayerNameDropdown .dijitSelectLabel {text-align: right; width: 201px;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsTypeDropdown .dijitSelectLabel {text-align: right; width: 96px;}.esriRtl .jimu-widget-cost-analysis-statistics-settings .esriCTStatisticsFieldDropdown .dijitSelectLabel {text-align: right; width: 131px;}.jimu-widget-cost-analysis-project-cost-settings .esriCTProjectCostLabelTextbox {width: 100%; height: 28px;}.jimu-widget-cost-analysis-project-cost-settings .esriCTProjectCostTypeDropdown {width: 100%;}.claro .jimu-widget-cost-analysis-project-cost-settings .esriCTProjectCostTableWrapper .dijitSelect {height: 26px; margin-top: -4px;} .claro .jimu-widget-cost-analysis-project-cost-settings .esriCTProjectCostTableWrapper .dijitTextBox {height: 26px; margin-top: -4px;}.jimu-widget-cost-analysis-attribute-settings .esriCTBtnAddField {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-cost-analysis-attribute-settings .esriCTBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-cost-analysis-attribute-settings .esriCTBtnAddLabel {line-height: 20px;}.jimu-widget-cost-analysis-attribute-settings .esriCTDropDownContainer {width: 75%; float: right;}.claro .jimu-widget-cost-analysis-attribute-settings .esriCTAttributeSettingsTable .dijitSelect {height: 28px; min-width: 100%; float: left;}.jimu-widget-cost-analysis-attribute-settings .esriCTLayerAttributeDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 145px; font-size: 14px;}.jimu-widget-cost-analysis-attribute-settings .esriCTDisabled {cursor: default; color: #a0acbf; opacity: 0.6;} .jimu-widget-cost-analysis-attribute-settings .esriCTFieldChooserDropdown {height: 26px; width: 100%; float: left;}.esriRtl.jimu-widget-cost-analysis-attribute-settings .esriCTDropDownContainer {float: left;}.esriRtl .jimu-widget-cost-analysis-attribute-settings .esriCTLayerAttributeDropdown .dijitSelectLabel{text-align: right;}.jimu-widget-cost-analysis-settings .jimu-tab3 {height: 100%; overflow: hidden;}.jimu-widget-cost-analysis-settings .jimu-viewstack {height: calc(100% - 45px); overflow: auto;}.jimu-widget-cost-analysis-settings .esriCTTabNode {padding-right: 20px; margin-top: 20px; height: calc(100% - 20px);}.jimu-widget-cost-analysis-settings .esriCTFullWidth {width: 100%;}.jimu-widget-cost-analysis-settings .esriCTFullHeight {height: 100%;}.jimu-widget-cost-analysis-settings .esriCTEllipsis, .jimu-widget-cost-analysis-manage-scenarios .esriCTEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-cost-analysis-settings .esriCTMainConfigurationContainer {width: 100%; height: 100%; color: #596679; font-size: 14px;}.jimu-widget-cost-analysis-settings .esriCTHidden {display: none;}.jimu-widget-cost-analysis-costing-template .esriCTCancelDialogPopup {width: 13px; height: 12px; padding-right: 5px; text-align: right; cursor: pointer; float: right; background-repeat: no-repeat; background-position: center center; background-image: url(images/close.png);}.jimu-widget-cost-analysis-costing-template .esriCTDialogText {padding: 5px;}.jimu-btn {line-height: 30px !important;}input[type\x3dtext]::-ms-clear {display: none;}",
"*now":function(D){D(['dojo/i18n!*preload*widgets/CostAnalysis/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidgetSetting dojo/Evented jimu/dijit/TabContainer3 ./GeneralSettings ./ProjectSettings ./LayerSettings ./CostingInfo ./StatisticsSettings dojo/_base/lang dojo/_base/array dojo/on jimu/dijit/Message jimu/LayerInfos/LayerInfos ../utils".split(" "),function(D,C,E,B,q,w,v,x,y,p,n,d,a,b,e){return D([C,E],{baseClass:"jimu-widget-cost-analysis-settings",_configurationTabParentContainer:null,_generalSettingsTab:null,_projectSettingsTab:null,_layerSettingsTab:null,_costingInfoTab:null,
_statisticsSettingsTab:null,_layerInfosObj:null,postMixInProperties:function(){this.nls.units={feet:{label:window.jimuNls.units.feet,abbreviation:window.jimuNls.units.feetAbbr},meters:{label:window.jimuNls.units.meters,abbreviation:window.jimuNls.units.metersAbbr},miles:{label:window.jimuNls.units.miles,abbreviation:window.jimuNls.units.milesAbbr},yards:{label:window.jimuNls.units.yards,abbreviation:window.jimuNls.units.yardsAbbr},kilometers:{label:window.jimuNls.units.kilometers,abbreviation:window.jimuNls.units.kilometersAbbr}}},
postCreate:function(){b.getInstance(this.map,this.map.webMapResponse.itemInfo).then(p.hitch(this,function(l){this._layerInfosObj=l}));this._updateConfigData();this._initConfiguration();this.setConfig(this.config)},_updateConfigData:function(){if(this.config.projectSettings.projectLayer)var l=this._layerInfosObj.getLayerInfoById(this.config.projectSettings.projectLayer).layerObject;n.forEach(this.config.layerSettings,p.hitch(this,function(f){f.selectedField&&(f.hasOwnProperty("attributeSetting")||
(f.attributeSetting=[]),f.attributeSetting.push({layerField:f.selectedField,projectField:l.globalIdField}),delete f.selectedField)}))},setConfig:function(){this._layerSettingsTab.setConfig()},getConfig:function(){var l=this._generalSettingsTab.validate();if(l.isValid)this.config.generalSettings=this._generalSettingsTab.getConfig();else return this._showMessage(l.errorMessage),e.switchToTab(this._configurationTabParentContainer,this.nls.generalSettings.tabTitle),!1;l=this._projectSettingsTab.validate();
if(l.isValid)this.config.projectSettings=this._projectSettingsTab.getConfig();else return this._showMessage(l.errorMessage),e.switchToTab(this._configurationTabParentContainer,this.nls.projectSettings.tabTitle),!1;this.config.layerSettings=this._layerSettingsTab.getConfig();l=this._costingInfoTab.validate();if(l.isValid)this.config.costingInfoSettings=this._costingInfoTab.getConfig().costingInfoData,this.config.scenarios=this._costingInfoTab.getConfig().scenarios,this.config.updateCostEquationCheckBoxStatus=
this._costingInfoTab.getConfig().updateCostEquationCheckBoxStatus;else return this._showMessage(l.errorMessage),e.switchToTab(this._configurationTabParentContainer,this.nls.costingInfo.tabTitle),!1;this.config.statisticsSettings=this._statisticsSettingsTab.getConfig();if(this._statisticsSettingsTab.additionalProjectCostObj.validateProjectCostData().isValid)this.config.projectCostSettings=this._statisticsSettingsTab.additionalProjectCostObj.getConfig();else return this._showMessage(this.nls.projectCostSettings.invalidProjectCostMessage),
e.switchToTab(this._configurationTabParentContainer,this.nls.statisticsSettings.tabTitle),!1;return this.config},_initConfiguration:function(){this._initTabs();this._initGeneralSettings();this._initProjectSettings();this._initLayerSettings();this._initCostingInfo();this._initStatisticsSettings()},_initTabs:function(){var l={title:this.nls.generalSettings.tabTitle,content:this.generalSettingsNode};this._configurationTabParentContainer=new B({tabs:[l,{title:this.nls.projectSettings.tabTitle,content:this.projectSettingsNode},
{title:this.nls.layerSettings.tabTitle,content:this.layerSettingsNode},{title:this.nls.costingInfo.tabTitle,content:this.costingInfoNode},{title:this.nls.statisticsSettings.tabTitle,content:this.statisticsSettingsNode}]},this.configurationTabParentContainer);this.own(d(this._configurationTabParentContainer,"tabChanged",p.hitch(this,function(f){this._configurationTabParentContainer.containerNode.scrollTop=0;if(f===this.nls.costingInfo.tabTitle){f=this._projectSettingsTab.projectMultiplierTable.value;
var t=this._projectSettingsTab.projectAssetsTable.value;""!==this._projectSettingsTab.projectLayerDropDown.value&&""!==f&&""!==t?this._costingInfoTab.disableUpdateCostEquationChk(!1):this._costingInfoTab.disableUpdateCostEquationChk(!0)}})));this._configurationTabParentContainer.startup()},_initGeneralSettings:function(){this._generalSettingsTab=new q({nls:this.nls,map:this.map,config:this.config});this._generalSettingsTab.placeAt(this.generalSettingsNode)},_initProjectSettings:function(){this._projectSettingsTab=
new w({nls:this.nls,map:this.map,config:this.config.projectSettings,layerInfosObj:this._layerInfosObj,appUtils:e});this._projectSettingsTab.placeAt(this.projectSettingsNode);this._projectSettingsTab.on("onLayerSelected",p.hitch(this,function(l){this._layerSettingsTab&&(this._layerSettingsTab.updateLayerSettingsTable(l),this._costingInfoTab._updateCostingInfoTable(l,!0),this._statisticsSettingsTab._updateStatisticsTable(l,!0))}));this._projectSettingsTab.on("onDuplicateLayerSelect",p.hitch(this,function(l){this._showMessage(l)}));
this._projectSettingsTab.on("onProjectLayerSelected",p.hitch(this,function(l){this.projectLayerId=l;this._layerSettingsTab&&(this._layerSettingsTab.projectLayer=l,this._layerSettingsTab.updateAttributeButtonState(l))}));this._projectSettingsTab.on("onGeographyFieldChange",p.hitch(this,function(l,f){if(this._costingInfoTab)if(f&&""!==f)this._costingInfoTab.getGeographyOptions(l,f).then(p.hitch(this,function(t){this._costingInfoTab.onGeographyFieldUpdate(t)}));else this._costingInfoTab.onGeographyFieldUpdate([{label:this.nls.costingInfo.noneValue,
value:""}])}))},_initLayerSettings:function(){this._layerSettingsTab=new v({nls:this.nls,map:this.map,config:this.config,layerInfosObj:this._layerInfosObj});this._layerSettingsTab.placeAt(this.layerSettingsNode);d(this._layerSettingsTab,"onLayerSettingUpdate",p.hitch(this,function(l){this._costingInfoTab._updateCostingInfoTable(l);this._statisticsSettingsTab._updateStatisticsTable(l)}))},_initCostingInfo:function(){this._costingInfoTab=new x({nls:this.nls,map:this.map,config:this.config,layerInfosObj:this._layerInfosObj});
this._costingInfoTab.placeAt(this.costingInfoNode)},_initStatisticsSettings:function(){this._statisticsSettingsTab=new y({nls:this.nls,map:this.map,config:this.config,layerInfosObj:this._layerInfosObj,showActionButtonsInColumn:!0,showActionButtonsInRow:!1});this._statisticsSettingsTab.placeAt(this.statisticsSettingsNode)},_showMessage:function(l){(new a({message:l})).message=l}})});