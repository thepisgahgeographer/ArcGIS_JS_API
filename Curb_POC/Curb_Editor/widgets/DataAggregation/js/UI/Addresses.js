// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/DataAggregation/js/UI/templates/Addresses.html":'\x3cdiv class\x3d"pad-left-5 no-select"\x3e\r\n  \x3ctable class\x3d"page-table" cellpading\x3d"0"\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d"panel-title-td"\x3e\r\n          \x3cdiv class\x3d"panel-title-text" tabindex\x3d"0" role\x3d"region" aria-label\x3d"${nls.mapping.locationMapping} ${nls.address.addressPageHint}"\x3e${nls.mapping.locationMapping}\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d"bottom-border-bold task-instruction-row" data-dojo-attach-point\x3d"mainInstructionRow"\x3e\r\n        \x3ctd colspan\x3d"2" class\x3d"panel-title-hint-td"\x3e\r\n          \x3cdiv class\x3d"instruction"\x3e${nls.address.addressPageHint}\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d"task-row task-instruction-row" data-dojo-attach-point\x3d"singleAddressRow"\x3e\r\n        \x3ctd colspan\x3d"2" data-dojo-attach-point\x3d"singleFieldHintTd"\x3e\r\n          \x3c!--table for single field--\x3e\r\n          \x3ctable class\x3d"page-table" cellpading\x3d"0"\x3e\r\n            \x3ctbody\x3e\r\n              \x3ctr class\x3d"task-row task-instruction-row" data-dojo-attach-point\x3d"singleRadioRow"\x3e\r\n                \x3ctd colspan\x3d"2" class\x3d"pad-left-10 field-control-td"\x3e\r\n                  \x3cinput name\x3d"addr" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"jimu-radio-btn" id\x3d"rdo-single"\r\n                    type\x3d"radio" data-dojo-attach-point\x3d"rdoSingleAddress" title\x3d"${nls.address.singleField}"\r\n                    tabindex\x3d"0" aria-label\x3d"${nls.address.singleField} ${nls.address.singleFieldHint}" role\x3d"radio"\r\n                    data-dojo-attach-event\x3d"onClick:_rdoSingleAddressClick"/\x3e\r\n                  \x3clabel class\x3d"main-text" for\x3d"rdo-single"\x3e${nls.address.singleField}\x3c/label\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n              \x3ctr class\x3d"bottom-border-bold sub-task-hint panel-title-hint"\r\n                data-dojo-attach-point\x3d"singleSubTaskHintTr"\x3e\r\n                \x3ctd colspan\x3d"2" class\x3d"pad-left-20 panel-title-hint-td float-left"\r\n                  data-dojo-attach-point\x3d"singleSubTaskHintTd"\x3e\r\n                  \x3cspan class\x3d"instruction"\x3e${nls.address.singleFieldHint}\x3c/span\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n              \x3ctr class\x3d"bottom-border"\x3e\r\n                \x3ctd data-dojo-attach-point\x3d"singleFieldTableRow"\x3e\r\n                  \x3ctable class\x3d"page-table" cellpading\x3d"0"\x3e\r\n                    \x3ccolgroup\x3e\r\n                      \x3ccol width\x3d"40%" /\x3e\r\n                      \x3ccol width\x3d"60%" /\x3e\r\n                    \x3c/colgroup\x3e\r\n                    \x3ctbody data-dojo-attach-point\x3d"singleFieldTable"\x3e\r\n                    \x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/tbody\x3e\r\n          \x3c/table\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr data-dojo-attach-point\x3d"multiAddressRow"\x3e\r\n        \x3ctd colspan\x3d"2" data-dojo-attach-point\x3d"multiFieldHintTd"\x3e\r\n          \x3c!--table for multi field--\x3e\r\n          \x3ctable class\x3d"page-table" cellpading\x3d"0"\x3e\r\n            \x3ctbody\x3e\r\n              \x3ctr class\x3d"task-row task-instruction-row" data-dojo-attach-event\x3d"onClick:_rdoMultiAddressClick"\r\n                data-dojo-attach-point\x3d"multiRadioRow"\x3e\r\n                \x3ctd colspan\x3d"2" class\x3d"pad-left-10 field-control-td"\x3e\r\n                  \x3cinput name\x3d"addr" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"jimu-radio-btn" id\x3d"rdo-multi"\r\n                    type\x3d"radio" data-dojo-attach-point\x3d"rdoMultiAddress" title\x3d"${nls.address.multiField}" \r\n                    tabindex\x3d"0" aria-label\x3d"${nls.address.multiField} ${nls.address.multiFieldHint}" role\x3d"radio"/\x3e\r\n                  \x3clabel class\x3d"main-text" for\x3d"rdo-multi"\x3e${nls.address.multiField}\x3c/label\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n              \x3ctr class\x3d"bottom-border sub-task-hint panel-title-hint"\x3e\r\n                \x3ctd colspan\x3d"2" class\x3d"pad-left-20 panel-title-hint-td float-left"\r\n                  data-dojo-attach-point\x3d"multiSubTaskHintTd"\x3e\r\n                  \x3cspan class\x3d"instruction"\x3e${nls.address.multiFieldHint}\x3c/span\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n              \x3ctr\x3e\r\n                \x3ctd data-dojo-attach-point\x3d"multiFieldTableRow"\x3e\r\n                  \x3ctable class\x3d"page-table" cellpading\x3d"0"\x3e\r\n                    \x3ccolgroup\x3e\r\n                      \x3ccol width\x3d"40%" /\x3e\r\n                      \x3ccol width\x3d"60%" /\x3e\r\n                    \x3c/colgroup\x3e\r\n                    \x3ctbody data-dojo-attach-point\x3d"multiFieldTable"\x3e\x3c/tbody\x3e\r\n                  \x3c/table\x3e\r\n                \x3c/td\x3e\r\n              \x3c/tr\x3e\r\n            \x3c/tbody\x3e\r\n          \x3c/table\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-class dojo/Deferred dojo/on dojo/query dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./templates/Addresses.html jimu/dijit/formSelect dijit/form/RadioButton".split(" "),function(v,h,g,n,f,r,t,w,E,x,y,z,A,B,C){return v([x,y,z,A],{baseClass:"cf-addresses",declaredClass:"CriticalFacilities.Addresses",templateString:B,_started:null,label:"Addresses",parent:null,
nls:null,map:null,appConfig:null,config:null,singleFields:[],multiFields:[],fields:[],useSingle:!0,useMulti:!1,theme:"",styleColor:"",singleEnabled:!1,multiEnabled:!1,constructor:function(a){h.mixin(this,a)},postCreate:function(){this.inherited(arguments);this._initControls()},startup:function(){this._started=!0;this._updateAltIndexes()},onShown:function(){this.pageContainer.nextDisabled=!1;this.prevResult=this._getResults()},validate:function(a,b){var c=new r;"next-view"===a?c.resolve(this._nextView(b)):
"back-view"===a?c.resolve(this._backView(b)):this._homeView(b).then(function(e){c.resolve(e)});return c},_updateAltIndexes:function(){this.pageContainer&&!this._startPageView&&(this._startPageView=this.pageContainer.getViewByTitle("StartPage"),this._locationTypeView=this.pageContainer.getViewByTitle("LocationType"),this._startPageView&&this._locationTypeView?(this.altNextIndex=this._startPageView.index,this.altBackIndex=this._locationTypeView.index):this._startPageView&&(this.altBackIndex=this.altNextIndex=
this._startPageView.index))},_nextView:function(a){if(a.currentView.label===this.label){a=this._getResults();var b=!1;g.forEach(a.fields,function(c){"undefined"!==typeof c.value&&null!==c.value&&""!==c.value&&(b=!0)});this.parent._locationMappingComplete=b;this.emit("location-mapping-update",b)}return!0},_backView:function(a){if(a.currentView.label===this.label){var b=!1;this._setPreviousResult(this.prevResult?this.prevResult.mappedArrayFields:{});this.prevResult&&(a=this.prevResult,b=!1,g.forEach(a.fields,
function(c){"undefined"!==typeof c.value&&null!==c.value&&""!==c.value&&(b=!0)}));this.parent._locationMappingComplete=b;this.emit("location-mapping-update",b)}return!0},_homeView:function(a){var b=new r;this.pageContainer.getViewByTitle("Home").verifyClearSettings(a).then(function(c){b.resolve(c)});return b},_rdoSingleAddressClick:function(){this.rdoSingleAddress.set("checked",!0)},_rdoSingleAddressChanged:function(a){this.useSingle=a;this._toggleVisibility(this.singleFieldTable,a);this.useSingle&&
this.parent.updateFirstLastNode(!1)},_rdoMultiAddressClick:function(){this.rdoMultiAddress.set("checked",!0)},_rdoMultiAddressChanged:function(a){this.useMulti=a;this._toggleVisibility(this.multiFieldTable,a);this.useMulti&&this.parent.updateFirstLastNode(!1)},_toggleVisibility:function(a,b){var c=b?"display-table-row-group":"display-none";f.contains(a,c)||f.add(a,c);c=b?"display-none":"display-table-row-group";f.contains(a,c)&&f.remove(a,c);b&&(this.lastFocusNode=w(".lastNode",a)[0])},_initControls:function(){this.own(t(this.rdoSingleAddress,
"change",h.hitch(this,this._rdoSingleAddressChanged)));this.own(t(this.rdoMultiAddress,"change",h.hitch(this,this._rdoMultiAddressChanged)));var a=this.singleEnabled,b=this.multiEnabled;a&&b?(this.rdoSingleAddress.set("checked",this.useSingle),this._toggleVisibility(this.singleFieldTable,this.useSingle),this.rdoMultiAddress.set("checked",this.useMulti),this._toggleVisibility(this.multiFieldTable,this.useMulti),this._setFields(this.singleFields,this.fields,this.singleFieldTable),this._setFields(this.multiFields,
this.fields,this.multiFieldTable),f.contains(this.singleSubTaskHintTr,"bottom-border-bold")&&f.remove(this.singleSubTaskHintTr,"bottom-border-bold"),f.add(this.singleSubTaskHintTr,"bottom-border")):a?(this.useSingle=!0,this.useMulti=!1,this._setFields(this.singleFields,this.fields,this.singleFieldTable),this._initTableDisplay([this.multiAddressRow,this.mainInstructionRow,this.singleRadioRow],[this.singleFieldHintTd,this.singleFieldTableRow],[],[this.singleSubTaskHintTd])):b&&(this.useMulti=!0,this.useSingle=
!1,this._setFields(this.multiFields,this.fields,this.multiFieldTable),this._initTableDisplay([this.singleAddressRow,this.mainInstructionRow,this.multiRadioRow],[this.multiFieldHintTd,this.multiFieldTableRow],[],[this.multiSubTaskHintTd]))},_initTableDisplay:function(a,b,c,e){g.forEach(a,h.hitch(this,function(d){this._toggleVisibility(d,!1)}));g.forEach(b,h.hitch(this,function(d){f.add(d,"no-padding")}));g.forEach(c,h.hitch(this,function(d){f.add(d,"pad-bottom-10")}));g.forEach(e,function(d){f.contains(d,
"pad-left-20")&&f.remove(d,"pad-left-20");f.add(d,"pad-left-5")})},_setFields:function(a,b,c){var e=0;g.forEach(a,h.hitch(this,function(d,k){var l=n.create("tr",{},c);l.keyField=d.value;l.label=d.label;var p=n.create("td",{className:"field-control-td pad-left-15"},l);n.create("div",{className:"main-text float-left min-width-80",innerHTML:d.label},p);p=n.create("td",{className:"field-control-td"},l);var m=new C({name:"field"+e,fieldName:d.label,className:"field-control","aria-label":d.label});k===
a.length-1&&(f.add(m.domNode,"lastNode"),this.lastFocusNode=m.domNode,this.parent.updateFirstLastNode(!1));var u=[{label:this.nls.warningsAndErrors.noValue,value:this.nls.warningsAndErrors.noValue}],D=this._getDefaultFieldName(b,d);g.forEach(b,function(q){u.push({label:q.label,value:q.value,selected:q.value===D})});m.addOption(u);m.placeAt(p);m.startup();l.fieldControl=m;e+=1;1<a.length&&f.add(l,"bottom-border")}))},_getDefaultFieldName:function(a,b){b=b.isRecognizedValues;for(var c=0;c<b.length;c++)for(var e=
b[c],d=0;d<a.length;d++){var k=a[d];if(k.value.toString().toUpperCase()===e.toString().toUpperCase())return k.value}},setStyleColor:function(a){this.styleColor=a},updateImageNodes:function(){},_getResults:function(){var a=[],b={},c=this.nls.warningsAndErrors.noValue;g.forEach((this.useSingle?this.singleFieldTable:this.multiFieldTable).rows,function(e){var d=e.fieldControl.get("value"),k=e.label;e=e.keyField;d!==c?(a.push({keyField:e,value:d,label:k}),b[e]=d):(a.push({keyField:e,value:void 0,label:k}),
b[e]=void 0)});return{type:this.useSingle?"single":"multi",fields:a,mappedArrayFields:b}},_setPreviousResult:function(a){var b=this.nls.warningsAndErrors.noValue;g.forEach((this.useSingle?this.singleFieldTable:this.multiFieldTable).rows,function(c){var e=b,d=c.keyField;a.hasOwnProperty(d)&&(e=a[d],void 0===e&&(e=b));c.fieldControl.set("value",e)})}})});