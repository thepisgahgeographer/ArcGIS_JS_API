// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/DistanceAndDirection/views/TabLine":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/on dojo/topic dojo/has dojo/touch dojo/dom-class dojo/string dojo/mouse dojo/number dojo/keys dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/popup jimu/dijit/Message jimu/LayerInfos/LayerInfos jimu/utils esri/layers/GraphicsLayer esri/layers/FeatureLayer esri/layers/LabelClass esri/tasks/FeatureSet esri/geometry/geometryEngine esri/geometry/Polyline esri/geometry/Circle esri/symbols/SimpleMarkerSymbol esri/symbols/TextSymbol esri/graphic ../models/LineFeedback ../models/ShapeModel ../views/CoordinateInput ../views/EditOutputCoordinate ../models/DirectionalLineSymbol dojo/text!../templates/TabLine.html dijit/focus dojo/_base/event dojo/aspect dijit/form/NumberTextBox jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),
function(P,e,E,h,b,q,k,d,l,x,C,c,a,r,m,p,y,f,I,J,B,N,R,O,S,T,Q,t,n,w,K,M,v,u,F,H,z,G,U,D){return P([r,m,p],{templateString:z,baseClass:"jimu-widget-TabLine",_restrictFocusOnAddStartPointBtn:!1,_restrictFocusOnEndStartPointBtn:!1,_startPointInputKeyPressed:!1,_endPointInputKeyPressed:!1,constructor:function(g){P.safeMixin(this,g)},postCreate:function(){this._endPointInputKeyPressed=this._startPointInputKeyPressed=this._restrictFocusOnEndStartPointBtn=this._restrictFocusOnAddStartPointBtn=!1;this.currentLengthUnit=
this.lengthUnitDD.get("value");this.currentAngleUnit=this.angleUnitDD.get("value");var g={directionSymbol:"arrow1",directionPixelBuffer:1E5,showStartSymbol:!0,showEndSymbol:!0};g=e.mixin(g,this.lineSymbol);this._lineSym=new H(g);this._ptSym=new n(this.pointSymbol);this._labelSym=new w(this.labelSymbol);this._tsGL=new N;this.map.addLayer(this._tsGL);this.map.addLayer(this.getLayer());if(this._gl.loaded)g=J.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Line Graphics"),g.showLabels(),
g.enablePopup();else this._gl.on("load",e.hitch(this,function(){var L=J.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Line Graphics");L.showLabels();L.enablePopup()}));this.coordToolStart=new u({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.startPointLabel},this.startPointCoordsLine);this.coordToolStart.inputCoordinate.formatType="DD";this.coordToolEnd=new u({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.endPointLabel},this.endPointCoordsLine);this.coordToolEnd.inputCoordinate.formatTyp=
"DD";this.coordinateFormatStart=new y({content:new F({nls:this.nls}),style:"width: 400px"});D.after(this.coordinateFormatStart,"onClose",e.hitch(this,function(){G.focus(this.coordinateFormatButtonStart);if(this._restrictFocusOnAddStartPointBtn){var L=this.coordToolStart.getValue();if(""===L||null===L||void 0===L)this._restrictFocusOnAddStartPointBtn=!1}}));"DartTheme"===this.appConfig.theme.name&&d.add(this.coordinateFormatStart.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.coordinateFormatEnd=
new y({content:new F({nls:this.nls}),style:"width: 400px"});D.after(this.coordinateFormatEnd,"onClose",e.hitch(this,function(){G.focus(this.coordinateFormatButtonEnd);if(this._restrictFocusOnEndStartPointBtn){var L=this.coordToolEnd.getValue();if(""===L||null===L||void 0===L)this._restrictFocusOnEndStartPointBtn=!1}}));"DartTheme"===this.appConfig.theme.name&&d.add(this.coordinateFormatEnd.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.dtStart=new M({appConfig:this.appConfig,map:this.map,
coordTool:this.coordToolStart.inputCoordinate.util,nls:this.nls});this.dtEnd=new M({appConfig:this.appConfig,map:this.map,coordTool:this.coordToolStart.inputCoordinate.util,nls:this.nls});this.dtStart.setLineSymbol(this._lineSym);this.lineTypeDDDidChange();this.syncEvents();this.lengthInput.invalidMessage=this.nls.numericInvalidMessage;this.lengthInput.rangeMessage=this.nls.lineLengthErrorMessage;this.angleInput.invalidMessage=this.nls.numericInvalidMessage;this.angleInput.rangeMessage=this.nls.orientationErrorMessage},
getLayer:function(){if(!this._gl){var g={labelExpressionInfo:{value:this.nls.lengthLabel+": {GeoLength}"}};g=new O(g);g.labelPlacement="above-along";g.where="GeoLength \x3e 0";g.symbol=this._labelSym.setOffset(0,10);g={labelExpressionInfo:{value:this.nls.angleLabel+": {LineAngle}"}};g=new O(g);g.labelPlacement="below-along";g.where="LineAngle \x3e 0";g.symbol=e.clone(this._labelSym).setOffset(0,-10);g={layerDefinition:{geometryType:"esriGeometryPolyline",objectIdField:"ObjectID",fields:[{name:"ObjectID",
alias:"ObjectID",type:"esriFieldTypeOID"},{name:"GeoLength",type:"esriFieldTypeString",alias:"Length"},{name:"LineAngle",type:"esriFieldTypeString",alias:"Angle"}]},featureSet:new S};this._gl=new R(g,{id:"Distance \x26 Direction - Line Graphics",outFields:["*"],showLabels:!0});this.own(h(this._gl,"visibility-change",e.hitch(this,function(L){this._tsGL.setVisibility(L.visible)})));return this._gl}},syncEvents:function(){b.subscribe("TAB_SWITCHED",e.hitch(this,this.tabSwitched));b.subscribe("DD-WIDGET-CLOSED",
e.hitch(this,this._closeDijit));b.subscribe(M.drawnLineLengthDidChange,e.hitch(this,this.lineLengthDidChange));b.subscribe(M.drawnLineAngleDidChange,e.hitch(this,this.lineAngleDidChange));this.dtStart.watch("startPoint",e.hitch(this,function(g,L,W){this.dtStart.addStartGraphic(W,this._ptSym)}));this.dtStart.watch("startPointDD",e.hitch(this,function(g,L,W){this.coordToolStart.inputCoordinate.set("coordinateEsriGeometry",W);this.coordToolStart.inputCoordinate.set("inputType",this.coordToolStart.inputCoordinate.formatType)}));
this.dtStart.watch("endPointDD",e.hitch(this,function(g,L,W){this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",W);this.coordToolEnd.inputCoordinate.set("inputType",this.coordToolEnd.inputCoordinate.formatType)}));this.dtStart.on("draw-complete",e.hitch(this,this.feedbackDidCompleteStart));this.coordToolStart.inputCoordinate.watch("outputString",e.hitch(this,function(g,L,W){this.coordToolStart.manualInput||(this.currentLine=null,this.coordToolStart.set("value",W),this._restrictFocusOnAddStartPointBtn?
this._restrictFocusOnAddStartPointBtn=!1:this._startPointInputKeyPressed?this._startPointInputKeyPressed=!1:G.focus(this.addPointBtnStart))}));this.coordToolStart.on("keydown",e.hitch(this,this.coordToolStartKeyWasPressed));this.dtEnd.watch("startPoint",e.hitch(this,function(g,L,W){this.dtEnd.addStartGraphic(W,this._ptSym)}));this.dtEnd.watch("endPoint",e.hitch(this,function(g,L,W){this.dtEnd.addStartGraphic(W,this._ptSym)}));this.dtEnd.watch("startPointDD",e.hitch(this,function(g,L,W){this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",
W);this.coordToolEnd.inputCoordinate.set("inputType",this.coordToolEnd.inputCoordinate.formatType)}));this.dtEnd.watch("endPointDD",e.hitch(this,function(g,L,W){this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",W);this.coordToolEnd.inputCoordinate.set("inputType",this.coordToolEnd.inputCoordinate.formatType)}));this.dtEnd.on("draw-complete",e.hitch(this,this.feedbackDidCompleteEnd));this.coordToolEnd.inputCoordinate.watch("outputString",e.hitch(this,function(g,L,W){this.coordToolEnd.manualInput||
(this.coordToolEnd.set("value",W),this.currentLine&&this.currentLine.graphic&&this.currentLine.graphic.attributes&&""===this.currentLine.graphic.attributes.EndPoint&&(this.currentLine.graphic.attributes.EndPoint=this.coordToolEnd.getValue()),this._restrictFocusOnEndStartPointBtn?this._restrictFocusOnEndStartPointBtn=!1:this._endPointInputKeyPressed?this._endPointInputKeyPressed=!1:G.focus(this.addPointBtnEnd))}));this.coordToolEnd.on("keydown",e.hitch(this,this.coordToolEndKeyWasPressed));this.lengthUnitDD.on("change",
e.hitch(this,this.lengthUnitDDDidChange));this.angleUnitDD.on("change",e.hitch(this,this.angleUnitDDDidChange));this.lineTypeDD.on("change",e.hitch(this,this.lineTypeDDDidChange));this.own(h(this.coordinateFormatButtonStart,"click",e.hitch(this,this.coordinateFormatButtonStartClicked)),h(this.coordinateFormatButtonStart,"keydown",e.hitch(this,function(g){if(g.keyCode===c.ENTER||g.keyCode===c.SPACE)U.stop(g),this.coordinateFormatButtonStartClicked()})),h(this.coordinateFormatStart.content.applyButton,
"click",e.hitch(this,function(){this._restrictFocusOnAddStartPointBtn=!0;var g=this.coordinateFormatStart.content.formats[this.coordinateFormatStart.content.ct],L=g.defaultFormat,W=this.coordinateFormatStart.content.frmtSelect.get("value");g.useCustom&&(L=g.customFormat);this.coordToolStart.inputCoordinate.set("formatPrefix",this.coordinateFormatStart.content.addSignChkBox.checked);this.coordToolStart.inputCoordinate.set("formatString",L);this.coordToolStart.inputCoordinate.set("formatType",W);this.setCoordLabelStart(W);
f.close(this.coordinateFormatStart);G.focus(this.coordinateFormatButtonStart)})),h(this.coordinateFormatStart.content.applyButton,"keydown",e.hitch(this,function(g){if(g.keyCode===c.ENTER||g.keyCode===c.SPACE){U.stop(g);this._restrictFocusOnAddStartPointBtn=!0;var L=this.coordinateFormatStart.content.formats[this.coordinateFormatStart.content.ct],W=L.defaultFormat,X=this.coordinateFormatStart.content.frmtSelect.get("value");L.useCustom&&(W=L.customFormat);this.coordToolStart.inputCoordinate.set("formatPrefix",
this.coordinateFormatStart.content.addSignChkBox.checked);this.coordToolStart.inputCoordinate.set("formatString",W);this.coordToolStart.inputCoordinate.set("formatType",X);this.setCoordLabelStart(X);f.close(this.coordinateFormatStart);G.focus(this.coordinateFormatButtonStart)}g.keyCode===c.ESCAPE&&(U.stop(g),f.close(this.coordinateFormatStart),G.focus(this.coordinateFormatButtonStart))})),h(this.coordinateFormatStart.content.cancelButton,"click",e.hitch(this,function(){f.close(this.coordinateFormatStart)})),
h(this.coordinateFormatStart.content.cancelButton,"keydown",e.hitch(this,function(g){if(g.keyCode===c.ENTER||g.keyCode===c.SPACE)U.stop(g),f.close(this.coordinateFormatStart),G.focus(this.coordinateFormatButtonStart);g.keyCode===c.ESCAPE&&(U.stop(g),f.close(this.coordinateFormatStart),G.focus(this.coordinateFormatButtonStart))})),h(this.coordinateFormatButtonEnd,"click",e.hitch(this,this.coordinateFormatButtonEndClicked)),h(this.coordinateFormatButtonEnd,"keydown",e.hitch(this,function(g){if(g.keyCode===
c.ENTER||g.keyCode===c.SPACE)U.stop(g),this.coordinateFormatButtonEndClicked()})),h(this.coordinateFormatEnd.content.applyButton,"click",e.hitch(this,function(){this._restrictFocusOnEndStartPointBtn=!0;var g=this.coordinateFormatEnd.content.formats[this.coordinateFormatEnd.content.ct],L=g.defaultFormat,W=this.coordinateFormatEnd.content.frmtSelect.get("value");g.useCustom&&(L=g.customFormat);this.coordToolEnd.inputCoordinate.set("formatPrefix",this.coordinateFormatEnd.content.addSignChkBox.checked);
this.coordToolEnd.inputCoordinate.set("formatString",L);this.coordToolEnd.inputCoordinate.set("formatType",W);this.setCoordLabelEnd(W);f.close(this.coordinateFormatEnd);G.focus(this.coordinateFormatButtonEnd)})),h(this.coordinateFormatEnd.content.applyButton,"keydown",e.hitch(this,function(g){if(g.keyCode===c.ENTER||g.keyCode===c.SPACE){U.stop(g);this._restrictFocusOnEndStartPointBtn=!0;var L=this.coordinateFormatEnd.content.formats[this.coordinateFormatEnd.content.ct],W=L.defaultFormat,X=this.coordinateFormatEnd.content.frmtSelect.get("value");
L.useCustom&&(W=L.customFormat);this.coordToolEnd.inputCoordinate.set("formatPrefix",this.coordinateFormatEnd.content.addSignChkBox.checked);this.coordToolEnd.inputCoordinate.set("formatString",W);this.coordToolEnd.inputCoordinate.set("formatType",X);this.setCoordLabelEnd(X);f.close(this.coordinateFormatEnd);G.focus(this.coordinateFormatButtonEnd)}g.keyCode===c.ESCAPE&&(U.stop(g),f.close(this.coordinateFormatEnd),G.focus(this.coordinateFormatButtonEnd))})),h(this.coordinateFormatEnd.content.cancelButton,
"click",e.hitch(this,function(){f.close(this.coordinateFormatEnd)})),h(this.coordinateFormatEnd.content.cancelButton,"keydown",e.hitch(this,function(g){if(g.keyCode===c.ENTER||g.keyCode===c.SPACE)U.stop(g),f.close(this.coordinateFormatEnd),G.focus(this.coordinateFormatButtonEnd);g.keyCode===c.ESCAPE&&(U.stop(g),f.close(this.coordinateFormatEnd),G.focus(this.coordinateFormatButtonEnd))})),h(this.addPointBtnStart,"keydown",e.hitch(this,function(g){if(g.keyCode===c.ENTER||g.keyCode===c.SPACE)U.stop(g),
this.addStartPointButtonClicked()})),h(this.addPointBtnEnd,"click",e.hitch(this,this.addEndPointButtonClicked)),h(this.addPointBtnEnd,"keydown",e.hitch(this,function(g){if(g.keyCode===c.ENTER||g.keyCode===c.SPACE)U.stop(g),this.addEndPointButtonClicked()})),h(this.interactiveLine,"change",e.hitch(this,this.interactiveCheckBoxChanged)),h(this.interactiveLine,"keydown",e.hitch(this,function(g){g.keyCode===c.ENTER&&(this.interactiveLine.checked=this.interactiveLine.checked?!1:!0,this.interactiveCheckBoxChanged())})),
h(this.okButton,"keydown",e.hitch(this,function(g){if(g.keyCode===c.ENTER||g.keyCode===c.SPACE)U.stop(g),this.okButtonClicked()})),h(this.clearGraphicsButton,"keydown",e.hitch(this,function(g){if(g.keyCode===c.ENTER||g.keyCode===c.SPACE)U.stop(g),this.clearGraphics()})),h(this.coordinateFormatStart.content.frmtSelect,"keydown",e.hitch(this,function(g){g.keyCode===c.ESCAPE&&(U.stop(g),f.close(this.coordinateFormatStart),G.focus(this.coordinateFormatButtonStart))})),h(this.coordinateFormatStart.content.frmtVal,
"keydown",e.hitch(this,function(g){g.keyCode===c.ESCAPE&&(U.stop(g),f.close(this.coordinateFormatStart),G.focus(this.coordinateFormatButtonStart))})),h(this.coordinateFormatStart.content.addSignChkBox,"keydown",e.hitch(this,function(g){g.keyCode===c.ESCAPE&&(U.stop(g),f.close(this.coordinateFormatStart),G.focus(this.coordinateFormatButtonStart));g.keyCode===c.ENTER&&(U.stop(g),this.coordinateFormatStart.content.addSignChkBox.checked=this.coordinateFormatStart.content.addSignChkBox.checked?!1:!0)})),
h(this.coordinateFormatEnd.content.frmtSelect,"keydown",e.hitch(this,function(g){g.keyCode===c.ESCAPE&&(U.stop(g),f.close(this.coordinateFormatEnd),G.focus(this.coordinateFormatButtonEnd))})),h(this.coordinateFormatEnd.content.frmtVal,"keydown",e.hitch(this,function(g){g.keyCode===c.ESCAPE&&(U.stop(g),f.close(this.coordinateFormatEnd),G.focus(this.coordinateFormatButtonEnd))})),h(this.coordinateFormatEnd.content.addSignChkBox,"keydown",e.hitch(this,function(g){g.keyCode===c.ESCAPE&&(U.stop(g),f.close(this.coordinateFormatEnd),
G.focus(this.coordinateFormatButtonEnd));g.keyCode===c.ENTER&&(U.stop(g),this.coordinateFormatEnd.content.addSignChkBox.checked=this.coordinateFormatEnd.content.addSignChkBox.checked?!1:!0)})),h(this.lengthInputDiv,x.leave,e.hitch(this,this.checkValidInputs)),h(this.angleInputDiv,x.leave,e.hitch(this,this.checkValidInputs)));q("esri-touch")?this.own(h(this.addPointBtnStart,k.press,e.hitch(this,this.addStartPointButtonClicked))):this.own(h(this.addPointBtnStart,"click",e.hitch(this,this.addStartPointButtonClicked)))},
lineLengthDidChange:function(g){g=C.format(g,{places:2,locale:E.locale});this.lengthInput.set("value",g)},lineAngleDidChange:function(g){g=C.format(g,{places:2,locale:E.locale});this.angleInput.set("value",g)},interactiveCheckBoxChanged:function(){this.tabSwitched();this.coordToolEnd.set("disabled",this.interactiveLine.checked);this.interactiveLine.checked?(d.add(this.addPointBtnEndDiv,"controlGroupHidden"),this.addPointBtnStart.title=this.nls.drawLineLabel,this.addPointBtnEnd.hidden=!0):(this.coordToolEnd.clear(),
this.addPointBtnStart.title=this.nls.addPointLabel,d.remove(this.addPointBtnEndDiv,"controlGroupHidden"),this.addPointBtnEnd.hidden=!1);this.checkValidInputs()},lineTypeDDDidChange:function(){"Points"===this.lineTypeDD.get("value")?(this.addPointBtnStart.title=this.nls.addPointLabel,this.coordToolEnd.set("disabled",!1),this.angleInput.set("disabled",!0),this.lengthInput.set("disabled",!0),this.interactiveLine.disabled=!1,d.remove(this.addPointBtnEndDiv,"controlGroupHidden"),d.remove(this.interactiveLabel,
"disabledLabel"),this.addPointBtnEnd.hidden=!1):(this.addPointBtnStart.title=this.nls.addPointLabel,this.interactiveLine.disabled=!0,this.interactiveLine.checked&&(this.interactiveLine.checked=!1),this.coordToolEnd.set("value",""),this.coordToolEnd.set("disabled",!0),this.angleInput.set("disabled",!1),this.lengthInput.set("disabled",!1),d.add(this.addPointBtnEndDiv,"controlGroupHidden"),d.add(this.interactiveLabel,"disabledLabel"),this.addPointBtnEnd.hidden=!0);this.checkValidInputs()},coordinateFormatButtonStartClicked:function(){this.coordinateFormatStart.content.set("ct",
this.coordToolStart.inputCoordinate.formatType);f.open({popup:this.coordinateFormatStart,around:this.coordinateFormatButtonStart});G.focus(this.coordinateFormatStart.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormatStart&&this.coordinateFormatStart.domNode.offsetParent&&f.close(this.coordinateFormatStart);this.coordinateFormatEnd&&this.coordinateFormatEnd.domNode.offsetParent&&f.close(this.coordinateFormatEnd)},coordinateFormatButtonEndClicked:function(){this.coordinateFormatEnd.content.set("ct",
this.coordToolEnd.inputCoordinate.formatType);f.open({popup:this.coordinateFormatEnd,around:this.coordinateFormatButtonEnd});G.focus(this.coordinateFormatEnd.content.frmtSelect.focusNode)},coordToolStartKeyWasPressed:function(g){this.dtStart.removeStartGraphic();g.keyCode===c.ENTER&&(this._startPointInputKeyPressed=this._restrictFocusOnAddStartPointBtn=!0,this.currentLine=null,this.coordToolStart.inputCoordinate.getInputType().then(e.hitch(this,function(L){"UNKNOWN"===L.inputType?(new I({message:this.nls.invalidCoordinateTypeMessage}),
this.coordToolStart.inputCoordinate.coordinateEsriGeometry=null,this.checkValidInputs()):this.dtStart.getProjectedGeometry(L.coordinateEsriGeometry,this.map.spatialReference).then(e.hitch(this,e.hitch(this,function(W){this.dtStart.onLineStartManualInputHandler(W);this.setCoordLabelStart(L.inputType);this.coordToolStart.inputCoordinate.set("formatString",this.coordinateFormatStart.content.formats[L.inputType].defaultFormat);this.coordToolStart.inputCoordinate.set("formatType",L.inputType);this.dtStart.addStartGraphic(W,
this._ptSym);this.checkValidInputs()})))})))},coordToolEndKeyWasPressed:function(g){this.dtEnd.removeStartGraphic();g.keyCode===c.ENTER&&(this._endPointInputKeyPressed=this._restrictFocusOnEndStartPointBtn=!0,this.currentLine=null,this.coordToolEnd.inputCoordinate.getInputType().then(e.hitch(this,function(L){"UNKNOWN"===L.inputType?(new I({message:this.nls.invalidCoordinateTypeMessage}),this.coordToolEnd.inputCoordinate.coordinateEsriGeometry=null,this.checkValidInputs()):this.dtEnd.getProjectedGeometry(L.coordinateEsriGeometry,
this.map.spatialReference).then(e.hitch(this,e.hitch(this,function(W){this.dtEnd.onLineStartManualInputHandler(W);this.setCoordLabelEnd(L.inputType);this.coordToolEnd.inputCoordinate.set("formatString",this.coordinateFormatEnd.content.formats[L.inputType].defaultFormat);this.coordToolEnd.inputCoordinate.set("formatType",L.inputType);this.dtEnd.addStartGraphic(W,this._ptSym);this.checkValidInputs()})))})))},setCoordLabelStart:function(g){g=B.sanitizeHTML(l.substitute(this.nls.startPointLabel+" (${crdType})",
{crdType:g}));this.lineStartPointLabel.innerHTML=g;a.set(this.coordToolStart.textbox,"aria-label",g)},setCoordLabelEnd:function(g){g=B.sanitizeHTML(l.substitute(this.nls.endPointLabel+" (${crdType})",{crdType:g}));this.lineEndPointLabel.innerHTML=g;a.set(this.coordToolEnd.textbox,"aria-label",g)},checkValidInputs:function(){d.add(this.okButton,"jimu-state-disabled");a.set(this.okButton,"tabindex",-1);"DistAndBearing"===this.lineTypeDD.get("value")?null!==this.coordToolStart.inputCoordinate.coordinateEsriGeometry&&
this.lengthInput.isValid()&&this.angleInput.isValid()&&(d.remove(this.okButton,"jimu-state-disabled"),a.set(this.okButton,"tabindex",0)):null!==this.coordToolStart.inputCoordinate.coordinateEsriGeometry&&null!==this.coordToolEnd.inputCoordinate.coordinateEsriGeometry&&(d.remove(this.okButton,"jimu-state-disabled"),a.set(this.okButton,"tabindex",0));this.okButton.innerHTML=this.interactiveLine.checked?this.nls.publishDDBtn:this.nls.common.ok},addStartPointButtonClicked:function(){d.contains(this.addPointBtnStart,
"drawPointBtn-active")?(this.dtStart.deactivate(),this._setMapNavigation(!0)):(this.tabSwitched(),this.coordToolStart.manualInput=!1,this.coordToolEnd.manualInput=!1,this._setMapNavigation(!1),"Points"===this.lineTypeDD.get("value")&&this.interactiveLine.checked?this.dtStart.activate("polyline"):this.dtStart.activate("point"));d.toggle(this.addPointBtnStart,"drawPointBtn-active")},addEndPointButtonClicked:function(){d.contains(this.addPointBtnEnd,"drawPointBtn-active")?(this.dtEnd.deactivate(),this._setMapNavigation(!0)):
(this.tabSwitched(),this.coordToolStart.manualInput=!1,this.coordToolEnd.manualInput=!1,this._setMapNavigation(!1),this.dtEnd.activate("point"));d.toggle(this.addPointBtnEnd,"drawPointBtn-active")},lengthUnitDDDidChange:function(){this.currentLengthUnit=this.lengthUnitDD.get("value");this.dtStart.set("lengthUnit",this.currentLengthUnit)},angleUnitDDDidChange:function(){this.currentAngleUnit=this.angleUnitDD.get("value");this.dtStart.set("angleUnit",this.currentAngleUnit);"degrees"===this.currentAngleUnit?
(this.angleInput.constraints.max=360,this.angleInput.rangeMessage=this.nls.degreesRangeMessage):(this.angleInput.constraints.max=6400,this.angleInput.rangeMessage=this.nls.millsRangeMessage)},feedbackDidCompleteStart:function(g){if("polyline"===g.geometry.type){if(this.interactiveLine.checked&&(g=g.geometry.result),void 0!==this.lengthInput.get("value")||void 0!==this.angleInput.get("value")){this.currentLine=new v(g);var L=null;L=new Q({paths:4326===this.map.spatialReference.wkid?this.currentLine.geographicGeometry.paths:
this.currentLine.geometry.paths,spatialReference:this.map.spatialReference});if(4326===this.map.spatialReference.wkid||102100===this.map.spatialReference.wkid)L=T.geodesicDensify(L,1E4);this.currentLine.graphic=new K(L,this._lineSym,{GeoLength:this.lengthInput.get("displayedValue").toString()+" "+this.lengthUnitDD.get("displayedValue"),LineAngle:this.angleInput.get("displayedValue").toString()+" "+this.angleUnitDD.get("displayedValue"),Distance:parseFloat(this.lengthInput.get("value")),Unit:this.currentLengthUnit,
Angle:parseFloat(this.angleInput.get("value")),StartPoint:this.coordToolStart.getValue(),EndPoint:this.coordToolEnd.getValue(),AngleUnit:this.angleUnitDD.get("value")});var W=g.geometry.getExtent().getCenter();g=T.nearestCoordinate(g.geometry,W);W={lengthLabel:this.nls.lengthLabel,spacerLabel:" ",lengthInputValue:this.lengthInput.get("displayedValue").toString(),abbrevLengthLabel:this._getLengthAbbrevation(this.lengthUnitDD.get("value")),angleLabel:this.nls.angleLabel,angleValue:this.angleInput.get("displayedValue").toString(),
abbrevAngleLabel:this._getDegreeAbbreviation(this.angleUnitDD.get("value"))};var X=l.substitute(window.isRTL?"${spacerLabel}${lengthInputValue}${spacerLabel}${abbrevLengthLabel}${spacerLabel}${lengthLabel}":"${lengthLabel}${spacerLabel}${lengthInputValue}${spacerLabel}${abbrevLengthLabel}",W);this._tsGL.add(new K(g.coordinate,e.clone(this._labelSym).setOffset(0,30).setText(X)));X=l.substitute(window.isRTL?"${spacerLabel}${angleValue}${spacerLabel}${abbrevAngleLabel}${spacerLabel}${angleLabel}":"${angleLabel}${spacerLabel}${angleValue}${spacerLabel}${abbrevAngleLabel}",
W);this._tsGL.add(new K(g.coordinate,e.clone(this._labelSym).setText(X)));this._gl.add(this.currentLine.graphic);this._gl.refresh();this.dtStart.removeStartGraphic();this.dtEnd.removeStartGraphic();L=L.getExtent().expand(3);this.map.setExtent(L);this.interactiveLine.checked&&d.toggle(this.addPointBtnStart,"drawPointBtn-active")}}else d.toggle(this.addPointBtnStart,"drawPointBtn-active");this.checkValidInputs();this._setMapNavigation(!0);this.dtStart.deactivate()},feedbackDidCompleteEnd:function(g){this.checkValidInputs();
this._setMapNavigation(!0);this.dtEnd.deactivate();d.toggle(this.addPointBtnEnd,"drawPointBtn-active");"Points"===this.lineTypeDD.get("value")&&!this.interactiveLine.checked&&this.coordToolStart.inputCoordinate.coordinateEsriGeometry&&this.coordToolEnd.inputCoordinate.coordinateEsriGeometry&&this.createManualGraphic()},createManualGraphic:function(g){var L=this.coordToolStart.inputCoordinate.coordinateEsriGeometry,W=this.coordToolEnd.inputCoordinate.coordinateEsriGeometry,X=new Q(this.coordToolStart.inputCoordinate.coordinateEsriGeometry.spatialReference);
X.addPath([L,W]);var ba=T.geodesicLength(X,9001);this.dtStart.getProjectedGeometry(X,this.map.spatialReference).then(e.hitch(this,function(ea){this.lengthInput.set("value",this.dtStart.coordTool.convertMetersToUnits(ba,this.lengthUnitDD.get("value")));this.angleInput.set("value",this.dtStart.getAngle(this.dtStart.startPoint,this.dtEnd.startPoint));this.map.setExtent(ea.getExtent().expand(3));this.feedbackDidCompleteStart({geometry:ea,geographicGeometry:X});this.dtStart.clearPoints();this.dtEnd.clearPoints();
g&&this.emit("show-publish",this._gl)}))},okButtonClicked:function(g){if(!d.contains(this.okButton,"jimu-state-disabled"))if(this._restrictFocusOnAddStartPointBtn=!0,this.currentLine)this.emit("show-publish",this._gl);else if("Points"===this.lineTypeDD.get("value"))this.createManualGraphic(!0);else{g=this.coordToolStart.inputCoordinate.coordinateEsriGeometry;var L=this.coordToolStart.inputCoordinate.util.convertToMeters(this.lengthInput.get("value"),this.lengthUnitDD.get("value"));L=new t(g,{geodesic:!0,
radius:L,numberOfPoints:64E3});var W=this.angleInput.get("value");W="degrees"===this.currentAngleUnit?parseInt(177.77777778*W,10):parseInt(10*W,10);L=L.getPoint(0,W);var X=new Q;X.addPath([g,L]);this.dtStart.getProjectedGeometry(X,this.map.spatialReference).then(e.hitch(this,function(ba){this.feedbackDidCompleteStart({geometry:ba,geographicGeometry:X});this.emit("show-publish",this._gl)}));this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",L)}},clearGraphics:function(){this._gl&&(this._gl.clear(),
this._tsGL.clear(),this.dtStart.removeStartGraphic(),this.dtEnd.removeStartGraphic(),this.coordToolStart.clear(),this.coordToolEnd.clear(),this.tabSwitched());this.currentLine=null;this.checkValidInputs();for(var g=0;g<this.map.graphicsLayerIds.length;g++)this.map.getLayer(this.map.graphicsLayerIds[g]).refresh()},setGraphicsHidden:function(){this._gl&&this._gl.hide()},setGraphicsShown:function(){this._gl&&this._gl.show()},tabSwitched:function(){this.dtStart.deactivate();this.dtEnd.deactivate();this._setMapNavigation(!0);
this.addPointBtnStart&&d.remove(this.addPointBtnStart,"drawPointBtn-active");this.addPointBtnEnd&&d.remove(this.addPointBtnEnd,"drawPointBtn-active");f.close(this.coordinateFormat)},_setMapNavigation:function(g){g?this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(g){var L=null;if(g)switch(g){case "feet":L=this.nls.abbrevFeetLabel;break;case "kilometers":L=this.nls.abbrevKmLabel;break;case "miles":L=this.nls.abbrevMilesLabel;
break;case "meters":L=this.nls.abbrevMetersLabel;break;case "nautical-miles":L=this.nls.abbrevNauticalMilesLabel;break;case "yards":L=this.nls.abbrevYardsLabel;break;default:L=g}return L},_getDegreeAbbreviation:function(g){var L=null;if(g)switch(g){case "degrees":L=this.nls.abbrevDegreesLabel;break;case "mils":L=this.nls.abbrevMilsLabel;break;default:L=g}return L},setFirstFocusNode:function(){B.initFirstFocusNode(this.domNodeObj,this.lineTypeDD.focusNode)},focusFirstNodeOfSelectedTab:function(){G.focus(this.lineTypeDD.focusNode)},
setLastFocusNode:function(){B.initLastFocusNode(this.domNodeObj,this.clearGraphicsButton)}})})},"esri/geometry/Circle":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Point ./Polygon ./geodesicUtils ./webMercatorUtils ../WKIDUnitConversion ../units".split(" "),function(P,e,E,h,b,q,k,d,l,x){P=P(q,{declaredClass:"esri.geometry.Circle",_unitToMeters:{esriCentimeters:.01,esriDecimeters:.1,esriFeet:.3048,esriInches:.0254,esriKilometers:1E3,esriMeters:1,esriMiles:1609.344,esriMillimeters:.001,
esriNauticalMiles:1852,esriYards:.9144,esriDecimalDegrees:111320},constructor:function(C,c){C.center?c=C:(c=c||{},c.center=C);this.center=e.isArray(c.center)?new b(c.center[0],c.center[1]):c.center;this.radius=c.radius||1E3;this.radiusUnit=c.radiusUnit||x.METERS;this.geodesic=!0===c.geodesic?!0:!1;this.numberOfPoints=c.numberOfPoints||60;this._init()},toJson:function(){return this.inherited(arguments)},_init:function(){this.rings=[];this._ring=0;var C=this.radius*this._unitToMeters[this.radiusUnit],
c=this._srType(this.center.spatialReference);if(this.geodesic){switch(c){case "webMercator":var a=d.webMercatorToGeographic(this.center);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":a=this.center}C=this._createGeodesicCircle(a,C,this.numberOfPoints,a.spatialReference);"webMercator"===c&&(C=d.geographicToWebMercator(C))}else{var r;"webMercator"===c||"projected"===c?r=C/
this._convert2Meters(1,this.center.spatialReference):"geographic"===c&&(r=C/this._unitToMeters.esriDecimalDegrees);C=this._createPlanarCircle(this.center,r,this.numberOfPoints)}this.spatialReference=C.spatialReference;this.addRing(C.rings[0]);this.verifySR()},_createGeodesicCircle:function(C,c,a,r){for(var m=0,p=Math.PI/180,y=[],f;m<2*Math.PI;)f=k._directGeodeticSolver(C.y*p,C.x*p,m,c,r),y.push([f.x,f.y]),m+=Math.PI/(a/2);y.push(y[0]);return new q(y)},_createPlanarCircle:function(C,c,a){for(var r=
0,m=[],p,y;r<2*Math.PI;)p=C.x+Math.cos(r)*c,y=C.y+Math.sin(r)*c,m.push([p,y]),r+=Math.PI/(a/2);m.push(m[0]);C=new q(C.spatialReference);C.addRing(m);return C},_srType:function(C){return C.isWebMercator()?"webMercator":null!=l[C.wkid]||C.wkt&&0===C.wkt.indexOf("PROJCS")?"projected":"geographic"},_convert2Meters:function(C,c){if(null!=l[c.wkid])c=l.values[l[c.wkid]];else{c=c.wkt;var a=c.lastIndexOf(",")+1,r=c.lastIndexOf("]]");c=parseFloat(c.substring(a,r))}return C*c}});E("extend-esri")&&e.setObject("geometry.Circle",
P,h);return P})},"widgets/DistanceAndDirection/models/LineFeedback":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/has dojo/topic esri/toolbars/draw esri/graphic esri/geometry/Polyline esri/geometry/geometryEngine jimu/utils ./Feedback".split(" "),function(P,e,E,h,b,q,k,d,l,x,C){C=P([C],{constructor:function(c){P.safeMixin(this,c);this.syncEvents();this.initGeometryService()},syncEvents:function(){b.subscribe("manual-startpoint-input",e.hitch(this,this.onLineStartManualInputHandler));
b.subscribe("manual-line-end-point-input",e.hitch(this,this.onLineEndManualInputHandler));b.subscribe("clear-points",e.hitch(this,this.clearPoints))},clearPoints:function(c){c&&(this._points=[],this.map.graphics.clear())},onLineStartManualInputHandler:function(c){this._points=[];this._points.push(c.offset(0,0));this.set("startPoint",this._points[0]);this.map.centerAt(c)},onLineEndManualInputHandler:function(c){this._points.push(c.offset(0,0));this.set("endPoint",this._points[1])},getAngle:function(c,
a){var r=null;r=(180*Math.atan2(a.x-c.x,a.y-c.y)/Math.PI+360)%360;"mils"===this.angleUnit&&(r*=17.777777778);return r.toFixed(2)},_onClickHandler:function(c){if(this.map.snappingManager)var a=this.map.snappingManager._snappingPoint;var r=a||c.mapPoint,m=this.map,p,y;this._processAfterMapClick(r).then(e.hitch(this,function(f){this._points.push(r);switch(this._geometryType){case q.POINT:this.set("startPointDD",f);this.set("startPoint",this._points[0]);this._drawEnd(r);this._setTooltipMessage(0);break;
case q.POLYLINE:if(2===this._points.length){this.set("endPoint",this._points[1]);this.set("endPointDD",f);this._onDblClickHandler();return}1===this._points.length?(this.set("startPoint",this._points[0]),this.set("startPointDD",f),f=new d(m.spatialReference),f.addPath(this._points),this._graphic=m.graphics.add(new k(f,this.lineSymbol),!0),m.snappingManager&&m.snappingManager._setGraphic(this._graphic),this.canProjectLocally&&(this._onMouseMoveHandler_connect=E.connect(m,"onMouseMove",this._onMouseMoveHandler)),
this._tGraphic=m.graphics.add(new k(new d({paths:[[[r.x,r.y],[r.x,r.y]]],spatialReference:m.spatialReference}),this.lineSymbol),!0)):(this.set("endPoint",this._points[1]),this.set("endPointDD",f),this._graphic.geometry._insertPoints([r],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol),p=this._tGraphic,y=p.geometry,y.setPoint(0,0,r),y.setPoint(0,1,r),p.setGeometry(y))}this._setTooltipMessage(this._points.length);1===this._points.length&&"polyline"===this._geometryType&&
(f=this._tooltip)&&(f.innerHTML=x.sanitizeHTML(this.nls.clickToFinishLineMessage))}))},_onDblClickHandler:function(c){var a=this._points;var r=this.map.spatialReference;h("esri-touch")&&c&&a.push(c.mapPoint);c=new d({paths:[[[a[0].x,a[0].y],[a[1].x,a[1].y]]],spatialReference:r});a=new d({paths:[[[this.startPointDD.x,this.startPointDD.y],[this.endPointDD.x,this.endPointDD.y]]],spatialReference:this.startPointDD.spatialReference});a.geodesicLength=l.geodesicLength(a,9001);this._onMouseMoveHandler_connect&&
E.disconnect(this._onMouseMoveHandler_connect);r=this.coordTool.convertMetersToUnits(a.geodesicLength,this.lengthUnit);var m=this.getAngle(this.startPoint,this.endPoint);b.publish("DD_LINE_LENGTH_DID_CHANGE",r);b.publish("DD_LINE_ANGLE_DID_CHANGE",m);this._clear();this._setTooltipMessage(0);a={geometry:c,geographicGeometry:a};c=new d(c.toJson());c.result=a;this._drawEnd(c)},_onMouseMoveHandler:function(c){if(this.map.snappingManager)var a=this.map.snappingManager._snappingPoint;var r=this._geometryType===
q.POLYLINE?this._points[0]:this._points[this._points.length-1];c=a||c.mapPoint;var m=this._tGraphic.geometry;m.setPoint(0,0,{x:r.x,y:r.y});m.setPoint(0,1,{x:c.x,y:c.y});a=l.geodesicDensify(m,10001);m=l.geodesicLength(m,9001);this._graphic.setGeometry(a);a=this.coordTool.convertMetersToUnits(m,this.lengthUnit);r=this.getAngle(r,c);b.publish("DD_LINE_LENGTH_DID_CHANGE",a);b.publish("DD_LINE_ANGLE_DID_CHANGE",r)}});C.drawnLineLengthDidChange="DD_LINE_LENGTH_DID_CHANGE";C.drawnLineAngleDidChange="DD_LINE_ANGLE_DID_CHANGE";
return C})},"widgets/DistanceAndDirection/models/Feedback":function(){define("dojo/_base/declare dojo/Stateful dojo/_base/lang dojo/Deferred esri/toolbars/draw esri/geometry/Point esri/graphic esri/geometry/geometryEngineAsync esri/units esri/tasks/GeometryService esri/SpatialReference esri/request esri/tasks/ProjectParameters esri/geometry/webMercatorUtils".split(" "),function(P,e,E,h,b,q,k,d,l,x,C,c,a,r){return P([b,e],{startPoint:null,_setStartPoint:function(m){this._set("startPoint",m)},endPoint:null,
_setEndPoint:function(m){this._set("endPoint",m)},lengthUnit:"meters",_setLengthUnit:function(m){this._set("lengthUnit",m)},angleUnit:"degrees",_setAngle:function(m){this._set("angleUnit",m)},isDiameter:!0,canProjectLocally:!1,constructor:function(){d.isSimple(new q({x:-122.65,y:45.53,spatialReference:{wkid:4326}}))},initGeometryService:function(){var m=this.appConfig.geometryService;m||(m="//utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer");this.geomService=new x(m);m=new q({x:0,
y:0,spatialReference:this.map.spatialReference});r.canProject(m,new C(3857))&&(this.canProjectLocally=!0)},getRadiusUnitType:function(){var m=l.METERS;switch(this.lengthUnit){case "meters":m=l.METERS;break;case "feet":m=l.FEET;break;case "kilometers":m=l.KILOMETERS;break;case "miles":m=l.MILES;break;case "nautical-miles":m=l.NAUTICAL_MILES;break;case "yards":m=l.YARDS}return m},addStartGraphic:function(m,p){this.removeStartGraphic();this.startGraphic=new k(m,p);this.map.graphics.add(this.startGraphic)},
removeStartGraphic:function(){this.startGraphic&&this.map.graphics.remove(this.startGraphic);this.startGraphic=null},_processAfterMapClick:function(m){var p=new h;4326!==m.spatialReference.wkid?this.getDDPoint(m).then(E.hitch(this,function(y){p.resolve(y)}),function(y){p.reject(y)}):p.resolve(m);return p},getDDPoint:function(m){var p=new h,y=new C(3857);r.canProject(m,y)?p.resolve(r.webMercatorToGeographic(r.project(m,y))):(new c({url:this.geomService.url+"/findTransformations",content:{f:"json",
inSR:m.spatialReference.wkid,outSR:4326},handleAs:"json",callbackParamName:"callback"},{usePost:!1})).then(E.hitch(this,function(f){f=f&&f.transformations?f.transformations:void 0;this.projectPointForDD(p,m,4326,f&&0<f.length?f[0].wkid:void 0)}),E.hitch(this,function(){this.projectPointForDD(p,m,4326,null)}));return p},projectPointForDD:function(m,p,y,f){var I=new a;I.outSR=new C(y);I.geometries=[p];f&&(I.transformForward=!0,I.transformation=f);this.geomService.project(I,E.hitch(this,function(J){m.resolve(J[0])}),
function(J){m.reject(J)})},getProjectedGeometry:function(m,p){var y=new h;if(r.canProject(m,p)){var f=r.project(m,p);y.resolve(f)}else this.geomService.project([m],p,function(I){f=I[0];y.resolve(f)});return y.promise}})})},"esri/geometry/geometryEngineAsync":function(){define("require exports esri/kernel module esri/geometry/Geometry esri/geometry/Polygon esri/geometry/Polyline esri/geometry/Point esri/geometry/Extent esri/geometry/Multipoint esri/workers/WorkerClient esri/arcade/polyfill/promiseUtils".split(" "),
function(P,e,E,h,b,q,k,d,l,x,C,c){function a(t){if(void 0===d.fromJson){if(void 0!==t.x&&void 0!==t.y)return new d(t);if(void 0!==t.paths)return new k(t);if(void 0!==t.rings)return new q(t);if(void 0!==t.points)return new x(t);if(void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax)return new l(t)}else{if(void 0!==t.x&&void 0!==t.y)return d.fromJson(t);if(void 0!==t.paths)return k.fromJson(t);if(void 0!==t.rings)return q.fromJson(t);if(void 0!==t.points)return x.fromJson(t);if(void 0!==
t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax)return l.fromJson(t)}}function r(t,n){if(null==t||void 0===t||"number"===typeof t)return t;var w=t.toString();if(""===w)return null;if(2==n){var K=O[w];if(void 0!==K)return K}else if(0==n){K=R[w];if(void 0!==K)return K;K=S[t];if(void 0!==K)return K}else if(3==n&&(K=R[w],void 0!==K))return K;if(1==n&&(K=S[t],void 0!==K))return K;if(!0===/^\d+$/.test(w))return parseInt(w);throw Error("Unrecognised Unit Type");}function m(t){if(void 0!==t&&null!==
t)switch(t){case "loxodrome":return 1;case "great-elliptic":return 2;case "normal-section":return 3;case "shape-preserving":return 4}return 0}function p(t){if(null===t||void 0===t)return null;if(B)switch(t.type){case "point":return{x:t.x,y:t.y,z:t.z,m:t.m};case "multipoint":return{points:t.points,hasZ:t.hasZ,hasM:t.hasM};case "polyline":return{paths:t.paths,hasZ:t.hasZ,hasM:t.hasM};case "polygon":return{rings:t.rings,hasZ:t.hasZ,hasM:t.hasM};case "extent":return{xmin:t.xmin,ymin:t.ymin,xmax:t.xmax,
ymax:t.ymax,zmin:t.zmin,zmax:t.zmax,mmin:t.mmin,mmax:t.mmax}}else switch(t.type){case "point":return{x:t.x,y:t.y};case "multipoint":return{points:t.points};case "polyline":return{paths:t.paths};case "polygon":return{rings:t.rings};case "extent":return{xmin:t.xmin,ymin:t.ymin,xmax:t.xmax,ymax:t.ymax}}return null}function y(t,n){if(null===t)return null;t=a(t);B?t.set("spatialReference",n):t.setSpatialReference(n);return t}function f(t){return null==t||void 0===t?null:-1!=t.wkid&&null!==t.wkid&&void 0!==
t.wkid?{wkid:t.wkid}:""!==t.wkt&&void 0!==t.wkt&&null!==t.wkt?{wkt:t.wkt}:null}function I(t,n,w){return c.create(function(K,M){var v=n.spatialReference;Q.a({action:t,geoma:p(n),geomb:p(w),spatialReference:f(n.spatialReference)}).then(function(u){0===u.status?M(Error(u.error.message)):K(y(u.result,v))},function(u){M(u)})})}function J(t,n,w){return c.create(function(K,M){Q.a({action:t,geoma:p(n),geomb:p(w),spatialReference:f(n.spatialReference)}).then(function(v){0===v.status?M(Error(v.error.message)):
K(v.result)},function(v){M(v)})})}var B=0==E.version.indexOf("4."),N;(function(t){t[t.Linear=0]="Linear";t[t.Angular=1]="Angular";t[t.Area=2]="Area";t[t.LinearOrAngular=3]="LinearOrAngular"})(N||(N={}));var R={feet:9002,kilometers:9036,meters:9001,miles:9035,"nautical-miles":9030,yards:9096},O={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109413,"square-yards":109442},S={degrees:9102,radians:9101},T=function(){function t(){this.c=
!0;this.i=null}t.prototype.A=function(n){var w=this;this.i=new C;this.i.setWorker(this.s(),function(){w.c=!1;n()})};t.prototype.s=function(){return P.B?P.B("./geometryenginewebworker"):h.id.replace(/\/[^\/]*$/ig,"/")+"./geometryenginewebworker"};return t}(),Q=function(){function t(){}t.a=function(n){return c.create(function(w,K){t.h.push({task:n,d:{resolve:w,reject:K}});t.f()})};t.f=function(){if(0<t.h.length){for(var n=null,w=0;w<t.b.length;w++)if(!1===t.b[w].c){n=t.b[w];break}null===n&&t.b.length<
t.g&&(w=new T,t.b.push(w),w.A(function(){t.f()}));if(null!==n){var K=this.h.shift();n.c=!0;n.i.postMessage(K.task).then(function(M){n.c=!1;try{K.d.resolve(M)}catch(v){}t.f()},function(M){n.c=!1;try{K.d.reject(M)}catch(v){}t.f()})}}};t.b=[];t.h=[];t.g=4;return t}();return function(){function t(){}t._removeAllWorkers=function(){Q.b=[]};t._setMaxWorkers=function(n){t._removeAllWorkers();Q.g=n};t._getMaxWorkers=function(){return Q.g};t._getNumWorkers=function(){return Q.b.length};t.extendedSpatialReferenceInfo=
function(n){return c.create(function(w,K){Q.a({action:"extendedspatialreferenceinfo",spatialReference:f(n)}).then(function(M){0===M.status?K(Error(M.error.message)):w(M.result)},function(M){K(M)})})};t.equals=function(n,w){return null===n&&null!==w||null===w&&null!==n?!1:J("equals",n,w)};t.intersects=function(n,w){if(null===n||null===w)throw Error("Illegal Argument Exception");return J("intersects",n,w)};t.touches=function(n,w){if(null===n||null===w)throw Error("Illegal Argument Exception");return J("touches",
n,w)};t.within=function(n,w){if(null===n||null===w)throw Error("Illegal Argument Exception");return J("within",n,w)};t.disjoint=function(n,w){if(null===n||null===w)throw Error("Illegal Argument Exception");return J("disjoint",n,w)};t.overlaps=function(n,w){if(null===n||null===w)throw Error("Illegal Argument Exception");return J("overlaps",n,w)};t.crosses=function(n,w){if(null===n||null===w)throw Error("Illegal Argument Exception");return J("crosses",n,w)};t.contains=function(n,w){if(null===n||null===
w)throw Error("Illegal Argument Exception");return J("contains",n,w)};t.isSimple=function(n){return J("issimple",n,null)};t.clip=function(n,w){return I("clip",n,w)};t.simplify=function(n){return c.create(function(w,K){var M=n.spatialReference;Q.a({action:"simplify",geoma:p(n),spatialReference:f(n.spatialReference)}).then(function(v){0===v.status?K(Error(v.error.message)):w(y(v.result,M))},function(v){K(v)})})};t.rotate=function(n,w,K){return c.create(function(M,v){var u=n.spatialReference;if(void 0===
K||null===K)switch(n.type){case "point":K=n;break;case "extent":K=B?n.get("center"):n.getCenter();break;default:K=B?n.get("extent").get("center"):n.getExtent().getCenter()}Q.a({action:"rotate",geoma:p(n),spatialReference:f(n.spatialReference),angle:w,rotpt:p(K)}).then(function(F){0===F.status?v(Error(F.error.message)):M(y(F.result,u))},function(F){v(F)})})};t.flipHorizontal=function(n,w){return c.create(function(K,M){var v=n.spatialReference;if(void 0===w||null===w)switch(n.type){case "point":w=n;
break;case "extent":w=B?n.get("center"):n.getCenter();break;default:w=B?n.get("extent").get("center"):n.getExtent().getCenter()}Q.a({action:"fliph",geoma:p(n),spatialReference:f(n.spatialReference),flippt:p(w)}).then(function(u){0===u.status?M(Error(u.error.message)):K(y(u.result,v))},function(u){M(u)})})};t.flipVertical=function(n,w){return c.create(function(K,M){var v=n.spatialReference;if(void 0===w||null===w)switch(n.type){case "point":w=n;break;case "extent":w=B?n.get("center"):n.getCenter();
break;default:w=B?n.get("extent").get("center"):n.getExtent().getCenter()}Q.a({action:"flipv",geoma:p(n),spatialReference:f(n.spatialReference),flippt:p(w)}).then(function(u){0===u.status?M(Error(u.error.message)):K(y(u.result,v))},function(u){M(u)})})};t.distance=function(n,w,K){return c.create(function(M,v){Q.a({action:"distance",geoma:p(n),geomb:p(w),spatialReference:f(n.spatialReference),distanceunits:r(K,3)}).then(function(u){0===u.status?v(Error(u.error.message)):M(u.result)},function(u){v(u)})})};
t.relate=function(n,w,K){return c.create(function(M,v){Q.a({action:"relate",geoma:p(n),geomb:p(w),relation:K,spatialReference:f(n.spatialReference)}).then(function(u){0===u.status?v(Error(u.error.message)):M(u.result)},function(u){v(u)})})};t.nearestCoordinate=function(n,w,K){return c.create(function(M,v){var u=n.spatialReference;Q.a({action:"nearestcoord",geoma:p(n),geomb:p(w),spatialReference:f(n.spatialReference),testinterior:void 0===K?!0:K}).then(function(F){0===F.status?v(Error(F.error.message)):
(F.result.coordinate=y(F.result.coordinate,u),M(F.result))},function(F){v(F)})})};t.nearestVertex=function(n,w){return c.create(function(K,M){var v=n.spatialReference;Q.a({action:"nearestvertex",geoma:p(n),geomb:p(w),spatialReference:f(n.spatialReference)}).then(function(u){0===u.status?M(Error(u.error.message)):(u.result.coordinate=y(u.result.coordinate,v),K(u.result))},function(u){M(u)})})};t.nearestVertices=function(n,w,K,M){return c.create(function(v,u){var F=n.spatialReference;Q.a({action:"nearestvertices",
geoma:p(n),geomb:p(w),spatialReference:f(n.spatialReference),searchradius:K,maxreturn:M}).then(function(H){if(0===H.status)u(Error(H.error.message));else{for(var z=0;z<H.result.length;z++)H.result[z].coordinate=y(H.result[z].coordinate,F);v(H.result)}},function(H){u(H)})})};t.cut=function(n,w){return c.create(function(K,M){var v=n.spatialReference;Q.a({action:"cut",geoma:p(n),geomb:p(w),spatialReference:f(n.spatialReference)}).then(function(u){if(0===u.status)M(Error(u.error.message));else{for(var F=
0;F<u.result.length;F++)u.result[F]=y(u.result[F],v);K(u.result)}},function(u){M(u)})})};t.generalize=function(n,w,K,M){return c.create(function(v,u){var F=n.spatialReference;Q.a({action:"generalize",geoma:p(n),maxdeviation:w,removedegenerateparts:K,maxdeviationunit:r(M,3),spatialReference:f(n.spatialReference)}).then(function(H){0===H.status?u(Error(H.error.message)):v(y(H.result,F))},function(H){u(H)})})};t.densify=function(n,w,K){return c.create(function(M,v){var u=n.spatialReference;Q.a({action:"densify",
geoma:p(n),maxsegmentlength:w,maxsegmentlengthunit:r(K,3),spatialReference:f(n.spatialReference)}).then(function(F){0===F.status?v(Error(F.error.message)):M(y(F.result,u))},function(F){v(F)})})};t.geodesicDensify=function(n,w,K,M){void 0===M&&(M=0);return c.create(function(v,u){var F=n.spatialReference;Q.a({action:"geodensify",geoma:p(n),maxsegmentlength:w,maxsegmentlengthunit:r(K,3),spatialReference:f(n.spatialReference),curveType:M}).then(function(H){0===H.status?u(Error(H.error.message)):v(y(H.result,
F))},function(H){u(H)})})};t.intersect=function(n,w){return n instanceof b?I("intersect",n,w):t.u(n,w)};t.u=function(n,w){return c.create(function(K,M){for(var v=[],u=0;u<n.length;u++)v.push(p(n[u]));var F=w.spatialReference;Q.a({action:"intersectmany",geom:p(w),geometries:v,spatialReference:f(w.spatialReference)}).then(function(H){if(0===H.status)M(Error(H.error.message));else{for(var z=0;z<H.result.length;z++)H.result[z]=y(H.result[z],F);K(H.result)}},function(H){M(H)})})};t.difference=function(n,
w){return n instanceof b?I("difference",n,w):t.o(n,w)};t.o=function(n,w){return c.create(function(K,M){for(var v=[],u=0;u<n.length;u++)v.push(p(n[u]));var F=w.spatialReference;Q.a({action:"differencemany",geom:p(w),geometries:v,spatialReference:f(w.spatialReference)}).then(function(H){if(0===H.status)M(Error(H.error.message));else{for(var z=0;z<H.result.length;z++)H.result[z]=y(H.result[z],F);K(H.result)}},function(H){M(H)})})};t.symmetricDifference=function(n,w){return n instanceof b?I("symdifference",
n,w):t.w(n,w)};t.w=function(n,w){return c.create(function(K,M){for(var v=[],u=0;u<n.length;u++)v.push(p(n[u]));var F=w.spatialReference;Q.a({action:"symdifferencemany",geom:p(w),geometries:v,spatialReference:f(w.spatialReference)}).then(function(H){if(0===H.status)M(Error(H.error.message));else{for(var z=0;z<H.result.length;z++)H.result[z]=y(H.result[z],F);K(H.result)}},function(H){M(H)})})};t.union=function(n,w){void 0===w&&(w=null);return c.create(function(K,M){var v=[];if(null===n)K(null);else if(n instanceof
b&&(n=[n],null!==w&&n.push(w)),0===n.length)K(null);else{for(var u=0;u<n.length;u++)v.push(p(n[u]));var F=n[0].spatialReference;Q.a({action:"unionmany",geometries:v,spatialReference:f(F)}).then(function(H){0===H.status?M(Error(H.error.message)):K(y(H.result,F))},function(H){M(H)})}})};t.buffer=function(n,w,K,M){void 0===M&&(M=!1);if(n instanceof b)return c.create(function(H,z){var G=n.spatialReference;Q.a({action:"buffer",geoma:p(n),spatialReference:f(n.spatialReference),distance:w,unit:r(K,3),geodesic:!1,
geodesicmaxdeviation:NaN,geodesiccurvetype:0}).then(function(U){0===U.status?z(Error(U.error.message)):H(y(U.result,G))},function(U){z(U)})});if("[object Array]"!==Object.prototype.toString.call(w)){for(var v=[],u=0;u<n.length;u++)v.push(w);w=v}if(w.length!=n.length){if(0==w.length)throw Error("Illegal Argument Exception");v=[];var F=0;for(u=0;u<n.length;u++)void 0===w[u]?v.push(F):(v.push(w[u]),F=w[u]);w=v}return t.j(n,w,K,!1,M,"geodesic",NaN)};t.geodesicBuffer=function(n,w,K,M,v,u){if(n instanceof
b)return c.create(function(G,U){void 0===v&&(v=NaN);var D=n.spatialReference;Q.a({action:"buffer",geoma:p(n),spatialReference:f(n.spatialReference),distance:w,unit:r(K,0),geodesic:!0,geodesicmaxdeviation:v,geodesiccurvetype:m(M)}).then(function(g){0===g.status?U(Error(g.error.message)):G(y(g.result,D))},function(g){U(g)})});if("[object Array]"!==Object.prototype.toString.call(w)){for(var F=[],H=0;H<n.length;H++)F.push(w);w=F}if(w.length!=n.length){if(0==w.length)throw Error("Illegal Argument Exception");
F=[];var z=0;for(H=0;H<n.length;H++)void 0===w[H]?F.push(z):(F.push(w[H]),z=w[H]);w=F}return t.j(n,w,K,!0,M,v,u)};t.j=function(n,w,K,M,v,u,F){return c.create(function(H,z){var G=[];void 0===F&&(F=NaN);if(null===n)H(null);else if(0===n.length)H(null);else{for(var U=0;U<n.length;U++)G.push(p(n[U]));K=M?r(K,0):r(K,3);var D=n[0].spatialReference;Q.a({action:"buffermany",geometries:G,spatialReference:f(D),distances:w,tounionresults:v,unit:K,geodesic:M,geodesicmaxdeviation:F,geodesiccurvetype:m(u)}).then(function(g){if(0===
g.status)z(Error(g.error.message));else{for(var L=0;L<g.result.length;L++)g.result[L]=y(g.result[L],D);H(g.result)}},function(g){z(g)})}})};t.convexHull=function(n,w){void 0===w&&(w=!1);return n instanceof b?c.create(function(K,M){var v=n.spatialReference;Q.a({action:"convexhull",geoma:p(n),spatialReference:f(n.spatialReference)}).then(function(u){0===u.status?M(Error(u.error.message)):K(y(u.result,v))},function(u){M(u)})}):t.l(n,w)};t.l=function(n,w){return c.create(function(K,M){for(var v=[],u=
0;u<n.length;u++)v.push(p(n[u]));var F=0<n.length?n[0].spatialReference:null;Q.a({action:"convexhullmany",geometries:v,merge:w}).then(function(H){if(0===H.status)M(Error(H.error.message));else{for(var z=0;z<H.result.length;z++)H.result[z]=y(H.result[z],F);K(H.result)}},function(H){M(H)})})};t.offset=function(n,w,K,M,v,u){var F=0;if(null!=M&&void 0!=M)switch(M){case "round":F=0;break;case "bevel":F=1;break;case "miter":F=2;break;case "square":F=3}return n instanceof b?c.create(function(H,z){var G=
n.spatialReference;Q.a({action:"offset",geoma:p(n),spatialReference:f(n.spatialReference),distance:w,joins:F,bevelratio:v,flattenerror:u,offsetunit:r(K,3)}).then(function(U){0===U.status?z(Error(U.error.message)):H(y(U.result,G))},function(U){z(U)})}):t.v(n,w,K,F,v,u)};t.v=function(n,w,K,M,v,u){return c.create(function(F,H){for(var z=[],G=0;G<n.length;G++)z.push(p(n[G]));var U=0<n.length?n[0].spatialReference:null;Q.a({action:"offsetmany",geometries:z,spatialReference:f(U),distance:w,joins:M,bevelratio:v,
offsetunit:r(K,3),flattenerror:u}).then(function(D){if(0===D.status)H(Error(D.error.message));else{for(var g=0;g<D.result.length;g++)D.result[g]=y(D.result[g],U);F(D.result)}},function(D){H(D)})})};t.planarArea=function(n,w){return c.create(function(K,M){Q.a({action:"area",geoma:p(n),unit:r(w,2),spatialReference:f(n.spatialReference)}).then(function(v){0===v.status?M(Error(v.error.message)):K(v.result)},function(v){M(v)})})};t.planarLength=function(n,w){return c.create(function(K,M){Q.a({action:"length",
geoma:p(n),unit:r(w,3),spatialReference:f(n.spatialReference)}).then(function(v){0===v.status?M(Error(v.error.message)):K(v.result)},function(v){M(v)})})};t.geodesicArea=function(n,w,K){return c.create(function(M,v){Q.a({action:"geodesicarea",geoma:p(n),unit:r(w,2),geodesiccurvetype:m(K),spatialReference:f(n.spatialReference)}).then(function(u){0===u.status?v(Error(u.error.message)):M(u.result)},function(u){v(u)})})};t.geodesicLength=function(n,w,K){return c.create(function(M,v){Q.a({action:"geodesiclength",
geoma:p(n),unit:r(w,0),geodesiccurvetype:m(K),spatialReference:f(n.spatialReference)}).then(function(u){0===u.status?v(Error(u.error.message)):M(u.result)},function(u){v(u)})})};return t}()})},"esri/workers/WorkerClient":function(){define("dojo/Evented dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/request ../sniff ../kernel ../urlUtils require".split(" "),function(P,e,E,h,b,q,k,d,l){var x=window.Blob||window.webkitBlob||window.mozBlob,C=window.URL||window.webkitURL||window.mozURL;P=e([P],
{declaredClass:"esri.workers.WorkerClient",worker:null,returnDeferreds:!1,_queue:null,constructor:function(c,a,r){this._isIE=q("ie");this.returnDeferreds=!!r;this._queue={};this._acceptMessage=h.hitch(this,this._acceptMessage);this._errorMessage=h.hitch(this,this._errorMessage);c&&this.setWorker(c,h.hitch(this,function(m){this.worker=m;a(m)}))},setWorker:function(c,a){if(c instanceof Array){var r=c;c=r.shift()}var m=this._getUrl(c);m=d.normalize(m);c=!d.hasSameOrigin(m,location.href);if(!1===m)return console.log("Can not resolve worker path"),
!1;if(this.worker){var p=this.worker;p.removeEventListener("message",this._acceptMessage,!1);p.removeEventListener("error",this._errorMessage,!1);p.terminate();p=null}if(c){c=this._getUrl("./mutableWorker",!0);try{this._getRemoteText(c,h.hitch(this,function(y){y=C.createObjectURL(new x([y],{type:"text/javascript"}));a(this._createWorker(y,m))}))}catch(y){try{c=d.getProxyUrl(c).path+"?"+encodeURI(c),this._useProxy=!0,a(this._createWorker(c,r))}catch(f){return console.log("Can not create worker"),!1}}}else setTimeout(h.hitch(this,
function(){a(this._createWorker(m,r))}),0)},_createWorker:function(c,a){c=new Worker(c);c.addEventListener("message",this._acceptMessage,!1);c.addEventListener("error",this._errorMessage,!1);this.worker=c;a&&this.importScripts(a);return c},postMessage:function(c,a){if(c instanceof Array||"object"!=typeof c)c={data:c};var r=Math.floor(64E9*Math.random()).toString(36);c.msgId=r;r=this._queue[r]=new E;this.worker?(a?this.worker.postMessage(c,a):this.worker.postMessage(c),this.emit("start-message",{target:this,
message:c})):r.reject({message:"No worker was set."});return this.returnDeferreds?r:r.promise||r},terminate:function(){var c=Object.keys(this._queue);this.worker&&this.worker.terminate();for(var a=c.length-1;0<=a;a--)this._queue[c[a]].cancel("terminated"),delete this._queue[c[a]]},addWorkerCallback:function(c,a){var r=this._getUrl(c,!0);!1===r?(a=new E,a.reject({message:"Could not load text from "+c})):(a=this.postMessage({action:"add-callback",url:r,cbName:a||"main"}),a.then(h.hitch(this,function(m){m.target=
this;this.emit("callback-added",m)})));return a},importScripts:function(c){Array.isArray(c)||(c=[c]);c=c.map(function(a){a=this._getUrl(a,!0);this._useProxy&&!d.hasSameOrigin(a,location.href)&&(a=d.getProxyUrl(a).path+"?"+encodeURI(a));return a},this);c=this.postMessage({action:"import-script",url:c});c.then(h.hitch(this,function(a){a.target=this;this.emit("scripts-imported",a)}));return c},_acceptMessage:function(c){var a=c.data,r=a.msgId;if(a.status&&"debug"==a.status)console[a.showAs||"debug"](a);
else if(r&&r in this._queue){var m=this._queue[r];"progress"==a.status?m.progress(c.data):("error"==a.status?m.reject(c.data):m.resolve(c.data),delete this._queue[r])}this.emit("message",{message:c.data,event:c,target:this})},_errorMessage:function(c){this.onerror||this.onError?this.onerror?this.onerror(c):this.onError(c):console.log("Worker Error: "+c.message+"\nIn "+c.filename+" on "+c.lineno)},_getUrl:function(c,a){if(!c)return console.error("can not resolve empty path"),!1;c.match(/\.js$/)||(c+=
".js");c=l.toUrl(c);return a?d.getAbsoluteUrl(c):c},_getRemoteText:function(c,a){(c=this._getUrl(c))&&b.get(c,{sync:!1,handleAs:"text",headers:{"X-Requested-With":"","Content-Type":"text/plain"}}).then(function(r){a(r)})},_startBlobWorker:function(){var c=this._xdSource;c||(c=this._getUrl("./mutableWorker"),c=new x(["if(!self._mutable){importScripts('"+c+"');}"],{type:"text/javascript"}),c=this._xdSource=C.createObjectURL(c));try{return new Worker(c)}catch(a){return console.log(a.message),!1}}});
q("extend-esri")&&h.setObject("workers.WorkerClient",P,k);return P})},"widgets/DistanceAndDirection/models/ShapeModel":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/string dojo/number esri/geometry/geometryEngine esri/geometry/webMercatorUtils esri/geometry/Polyline".split(" "),function(P,e,E,h,b,q,k,d){return P(null,{Units:"meters feet kilometers miles nautical-miles yards".split(" "),getAngle:function(l){var x=null;x=void 0===this.angle?(180*Math.atan2(this.endPoint.x-
this.startPoint.x,this.endPoint.y-this.startPoint.y)/Math.PI+360)%360:Number(this.angle);"mils"===l&&(x*=17.777777778);return x.toFixed(2)},getLength:function(l){var x=this.Units[0];-1<this.Units.indexOf(l.toLowerCase())&&(x=l.toLowerCase());return q.geodesicLength(this.geographicGeometry,x)},getFormattedLength:function(l){return b.format(this.getLength(l),{places:4})},formatLength:function(l){return b.format(l,{places:4})},constructor:function(l){P.safeMixin(this,l);if("polygon"===this.geometry.type)if(this.geometry.hasOwnProperty("drawType")){if("ellipse"===
this.geometry.drawType){var x=new d;e.forEach(this.geometry.geometry.rings,E.hitch(this,function(C){x.paths.push(C)}));x.spatialReference=this.geometry.spatialReference;this.geographicGeometry=x=k.webMercatorToGeographic(x);this.geodesicGeometry=q.geodesicDensify(this.geometry.geometry,1E4);this.wmGeometry=this.geometry.geometry;this.angle=this.geometry.angle;this.startPoint=k.webMercatorToGeographic(this.geometry.center);this.formattedStartPoint=h.substitute("${xStr}, ${yStr}",{xStr:b.format(this.startPoint.y,
{places:4}),yStr:b.format(this.startPoint.x,{places:4})})}}else l=new d({paths:[[this.geometry.paths[0][0],this.geometry.paths[0][1]]],spatialReference:{wkid:this.geometry.spatialReference.wkid}}),this.geographicGeometry=l=k.webMercatorToGeographic(l),this.geodesicGeometry=q.geodesicDensify(l,1E4),this.wmGeometry=this.geometry,this.startPoint=this.geodesicGeometry.getPoint(0,0),this.endPoint=this.geodesicGeometry.getPoint(0,this.geodesicGeometry.paths[0].length-1),this.formattedStartPoint=h.substitute("${xStr}, ${yStr}",
{xStr:b.format(this.startPoint.y,{places:4}),yStr:b.format(this.startPoint.x,{places:4})}),this.formattedEndPoint=h.substitute("${xStr}, ${yStr}",{xStr:b.format(this.endPoint.y,{places:4}),yStr:b.format(this.endPoint.x,{places:4})});else"point"===this.geometry.type?(this.geodesicGeometry=q.geodesicBuffer(this.geometry,this.calculatedDistance,"meters"),this.geographicGeometry=null!==this.lineGeometry?this.lineGeometry:this.geometry,102100!==this.geodesicGeometry.spatialReference.wkid&&3857!==this.geodesicGeometry.spatialReference.wkid?
(this.wgsGeometry=this.geodesicGeometry,this.wmGeometry=k.geographicToWebMercator(this.geodesicGeometry)):(this.wgsGeometry=k.webMercatorToGeographic(this.geodesicGeometry),this.wmGeometry=this.geodesicGeometry),this.formattedStartPoint=h.substitute("${xStr}, ${yStr}",{xStr:b.format(this.wgsGeometry.getCentroid().y,{places:4}),yStr:b.format(this.wgsGeometry.getCentroid().x,{places:4})})):(this.geodesicGeometry=4326===this.geographicGeometry.spatialReference.wkid||3857===this.geographicGeometry.spatialReference.wkid?
q.geodesicDensify(this.geographicGeometry,1E4):this.geographicGeometry,this.startPoint=this.geodesicGeometry.getPoint(0,0),this.endPoint=this.geodesicGeometry.getPoint(0,this.geodesicGeometry.paths[0].length-1),this.formattedStartPoint=h.substitute("${xStr}, ${yStr}",{xStr:b.format(this.startPoint.y,{places:4}),yStr:b.format(this.startPoint.x,{places:4})}),this.formattedEndPoint=h.substitute("${xStr}, ${yStr}",{xStr:b.format(this.endPoint.y,{places:4}),yStr:b.format(this.endPoint.x,{places:4})}))}})})},
"widgets/DistanceAndDirection/views/CoordinateInput":function(){define(["dojo/_base/declare","dijit/form/ValidationTextBox","../models/Coordinate"],function(P,e,E){return P("test",e,{required:!0,inputCoordinate:null,invalidMessage:"",validateOnInput:!0,_validateOnInputSetter:function(h){this.validateOnInput="true"===h},clear:function(){this.set("validateOnInput",!0);this.set("value","");this.inputCoordinate.coordinateEsriGeometry=null},constructor:function(h){P.safeMixin(this,h);this.inherited(arguments);
this.inputCoordinate=new E({appConfig:arguments[0].appConfig,nls:this.nls})},validator:function(h){if(!this.validateOnInput)return!0;this.inputCoordinate.set("inputString",h);this.set("invalidMessage",this.inputCoordinate.message);this.set("promptMessage",this.inputCoordinate.message);return!0}})})},"widgets/DistanceAndDirection/models/Coordinate":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom-class dojo/Stateful dojo/Deferred esri/geometry/Point esri/SpatialReference jimu/dijit/Message ./util ./dialogConfirm ./ConfirmNotation".split(" "),
function(P,e,E,h,b,q,k,d,l,x,C,c){return P([b],{formatPrefix:!1,_formatPrefixSetter:function(a){this.formatPrefix=a},inputString:null,_inputStringSetter:function(a){this.inputString=a},formatString:"YN XE",_formatStringSetter:function(a){this.formatString=a},inputType:"UNKNOWN",formatType:"DD",_formatTypeSetter:function(a){this.formatType=a;this.getFormattedValue()},outputString:"",coordinateEsriGeometry:null,_coordinateEsriGeometrySetter:function(a){null!==a&&(this.coordinateEsriGeometry=a,this.getFormattedValue())},
constructor:function(a){P.safeMixin(this,a);this.util=new x({appConfig:this.appConfig,nls:this.nls})},getInputType:function(){this.inputTypeDef=new q;var a=this.util.getCleanInput(this.inputString);this.util.getCoordinateType(a).then(E.hitch(this,function(r){if(r)if(1===r.length){var m=this.processCoordTextInput(a,r[0],!1);this.util.getXYNotation(m,r[0].conversionType).then(E.hitch(this,function(y){0>=y.length||!y[0][0]&&0!==y[0][0]?(this.hasError=!0,this.valid=!1,this.message=this.nls.invalidCoordinateMessage):
(this.valid=this.isManual=!0,this.formatType=r[0].conversionType,this.inputType=r[0].conversionType,this.coordinateEsriGeometry=new k(y[0][0],y[0][1],new d({wkid:4326})),this.message="");this.inputTypeDef.resolve(this)}));E.hitch(this,function(){this.hasError=!0;this.valid=!1;this.inputType="UNKNOWN";this.message=this.nls.invalidCoordinateMessage;this.inputTypeDef.resolve(this)})}else{var p=new C({title:this.nls.confirmInputNotationMessage,nls:this.nls,content:new c({nls:this.nls},r),style:"width: 400px",
hasSkipCheckBox:!1});"DartTheme"===this.appConfig.theme.name&&h.add(p.domNode,"dartThemeClaroDijitTooltipContainerOverride");p.show().then(E.hitch(this,function(){var y=e.filter(r,function(I){return I.name===p.content.comboOptions.get("value")}),f=this.processCoordTextInput(a,y[0],!1);this.util.getXYNotation(f,y[0].conversionType).then(E.hitch(this,function(I){0>=I.length||!I[0][0]&&0!==I[0][0]?(this.hasError=!0,this.valid=!1,this.message=this.nls.invalidCoordinateMessage):(this.valid=this.isManual=
!0,this.inputType=r[0].conversionType,this.formatType=r[0].conversionType,this.coordinateEsriGeometry=new k(I[0][0],I[0][1],new d({wkid:4326})),this.message="");this.inputTypeDef.resolve(this)}));E.hitch(this,function(){this.hasError=!0;this.valid=!1;this.inputType="UNKNOWN";this.message=this.nls.invalidCoordinateMessage;this.inputTypeDef.resolve(this)})},function(){this.inputTypeDef.reject()}))}else this.hasError=!0,this.valid=!1,this.inputType="UNKNOWN",this.message=this.nls.invalidCoordinateMessage,
this.inputTypeDef.resolve(this)}));return this.inputTypeDef},processCoordTextInput:function(a,r,m){var p=r.pattern.exec(a),y=!1,f=r.name;switch(r.name){case "DD":var I=p[2];var J=p[7];var B=p[10];var N=p[16];var R=p[3].replace(/[,:]/,".");var O=p[11].replace(/[,:]/,".");f="DD";break;case "DDrev":I=p[11];J=p[16];B=p[2];N=p[8];R=p[12].replace(/[,:]/,".");O=p[3].replace(/[,:]/,".");f="DD";break;case "DDM":I=p[2];J=p[7];B=p[10];N=p[15];R=p[3];var S=p[4].replace(/[,:]/,".");O=p[11];var T=p[12].replace(/[,:]/,
".");f="DDM";break;case "DDMrev":I=p[10];J=p[15];B=p[2];N=p[7];R=p[11];S=p[12].replace(/[,:]/,".");O=p[3];T=p[4].replace(/[,:]/,".");f="DDM";break;case "DMS":I=p[2];J=p[8];B=p[11];N=p[17];R=p[3];S=p[4];var Q=p[5].replace(/[,:]/,".");O=p[12];T=p[13];var t=p[14].replace(/[,:]/,".");f="DMS";break;case "DMSrev":I=p[11],J=p[17],B=p[2],N=p[8],R=p[12],S=p[13],Q=p[14].replace(/[,:]/,"."),O=p[3],T=p[4],t=p[5].replace(/[,:]/,"."),f="DMS"}I&&J?(y=!0,I=(new RegExp(/[Ss-]/)).test(I)?"-":"+"):I=I&&(new RegExp(/[Ss-]/)).test(I)?
"-":J&&(new RegExp(/[Ss-]/)).test(J)?"-":"+";B&&N?(y=!0,B=(new RegExp(/[Ww-]/)).test(B)?"-":"+"):B=B&&(new RegExp(/[Ww-]/)).test(B)?"-":N&&(new RegExp(/[Ww-]/)).test(N)?"-":"+";y&&(m||new l({message:this.nls.prefixSuffixMessage}));switch(f){case "DD":a=I+R+","+B+O;break;case "DDM":a=I+R+" "+S+","+B+O+" "+T;break;case "DMS":a=I+R+" "+S+" "+Q+","+B+O+" "+T+" "+t}return a},getInputTypeSync:function(){return null!==this.util.getCoordinateType(this.inputString)},getFormattedValue:function(){this.coordinateEsriGeometry&&
this.util.getCoordValues({x:this.coordinateEsriGeometry.x,y:this.coordinateEsriGeometry.y},this.formatType,6).then(E.hitch(this,function(a){this.set("outputString",this.getCoordUI(a))}))},getCoordUI:function(a){var r=this.get("formatPrefix");switch(this.formatType){case "DD":a=this.util.getFormattedDDStr(a,this.formatString,r);var m=a.formatResult;break;case "DDM":a=this.util.getFormattedDDMStr(a,this.formatString,r);m=a.formatResult;break;case "DMS":a=this.util.getFormattedDMSStr(a,this.formatString,
r);m=a.formatResult;break;case "USNG":a=this.util.getFormattedUSNGStr(a,this.formatString,r);m=a.formatResult;break;case "MGRS":a=this.util.getFormattedMGRSStr(a,this.formatString,r);m=a.formatResult;break;case "GARS":a=this.util.getFormattedGARSStr(a,this.formatString,r);m=a.formatResult;break;case "GEOREF":a=this.util.getFormattedGEOREFStr(a,this.formatString,r);m=a.formatResult;break;case "UTM":a=this.util.getFormattedUTMStr(a,this.formatString,r);m=a.formatResult;break;case "UTM (H)":a=this.util.getFormattedUTMHStr(a,
this.formatString,r),m=a.formatResult}return m}})})},"widgets/DistanceAndDirection/models/util":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","esri/tasks/GeometryService"],function(P,e,E,h){return P(null,{constructor:function(b){this.appConfig=b.appConfig;this.nls=b.nls;(b=this.appConfig.geometryService)||(b="//utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer");this.geomService=new h(b)},getCleanInput:function(b){b=b.replace(/\n/g,"");b=b.replace(/\s+/g,
" ").trim();return b.toUpperCase()},getCoordValues:function(b,q,k){var d=new E;b={sr:4326,coordinates:[[b.x,b.y]],conversionType:q.name?q.name:q,numOfDigits:k||6,rounding:!0,addSpaces:!1};switch(q){case "DD":b.numOfDigits=6;break;case "USNG":b.numOfDigits=5;break;case "MGRS":b.conversionMode="mgrsDefault";b.numOfDigits=5;break;case "UTM (H)":b.conversionType="utm";b.conversionMode="utmNorthSouth";b.addSpaces=!0;break;case "UTM":b.conversionType="utm";b.conversionMode="utmDefault";b.addSpaces=!0;break;
case "GARS":b.conversionMode="garsDefault"}this.geomService.toGeoCoordinateString(b).then(function(l){d.resolve(l)},function(){d.resolve(null)});return d.promise},getXYNotation:function(b,q){var k=new E;var d=q.name?q.name:q;q={sr:4326,conversionType:d,strings:[]};switch(d){case "DD":case "DDM":case "DMS":q.numOfDigits=2;b=b.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");q.strings.push(b);break;case "USNG":q.strings.push(b);q.addSpaces="false";break;case "MGRS":q.conversionMode="mgrsNewStyle";
q.strings.push(b);q.addSpaces="false";break;case "UTM (H)":q.conversionType="utm";q.conversionMode="utmNorthSouth";q.strings.push(b);break;case "UTM":q.conversionType="utm";q.conversionMode="utmDefault";q.strings.push(b);break;case "GARS":q.conversionMode="garsCenter";q.strings.push(b);break;case "GEOREF":q.strings.push(b)}this.geomService.fromGeoCoordinateString(q).then(function(l){k.resolve(l)},function(){k.resolve(null)});return k.promise},getNotations:function(){return[{name:"DD",pattern:/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)$/,
notationType:this.nls.DDLatLongNotation,conversionType:"DD"},{name:"DDrev",pattern:/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)$/,notationType:this.nls.DDLongLatNotation,conversionType:"DD"},{name:"DDM",pattern:/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)([,:;\s|\/\\]+)(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)[\s]*$/,
notationType:this.nls.DDMLatLongNotation,conversionType:"DDM"},{name:"DDMrev",pattern:/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/,notationType:this.nls.DDMLongLatNotation,conversionType:"DDM"},{name:"DMS",pattern:/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)([,:;\s|\/\\]+)(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/,
notationType:this.nls.DMSLatLongNotation,conversionType:"DMS"},{name:"DMSrev",pattern:/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/,notationType:this.nls.DMSLongLatNotation,conversionType:"DMS"},{name:"GARS",pattern:/^\d{3}[a-zA-Z]{2}[1-4]?[1-9]?$/,
notationType:this.nls.GARSNotation,conversionType:"GARS"},{name:"GEOREF",pattern:/^[a-zA-Z]{4}\d{1,8}$/,notationType:this.nls.GEOREFNotation,conversionType:"GEOREF"},{name:"MGRS",pattern:/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/,
notationType:this.nls.MGRSNotation,conversionType:"MGRS"},{name:"UTM",pattern:/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/,notationType:this.nls.UTMBandNotation,conversionType:"UTM"},{name:"UTM (H)",pattern:/^\d{1,2}[-,;:\s]*[NnSs][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]+\d{1,7}\.?\d*[mM]?$/,notationType:this.nls.UTMHemNotation,conversionType:"UTM (H)"}]},getCoordinateType:function(b){var q=this.getCleanInput(b);b=new E;var k=this.getNotations();q=e.filter(k,
function(d){return d.pattern.test(this.v)},{v:q});0<q.length?b.resolve(q):b.resolve(null);return b.promise},getFormattedDDStr:function(b,q,k){var d={};d.sourceValue=b;d.sourceFormatString=q;b=b[0].split(/[ ,]+/);d.latdeg=b[0].replace(/[nNsS]/,"");d.londeg=b[1].replace(/[eEwW]/,"");k&&(d.latdeg="N"===b[0].slice(-1)?"+"+d.latdeg:"-"+d.latdeg,d.londeg="W"===b[1].slice(-1)?"-"+d.londeg:"+"+d.londeg);q=q.replace(/X/,d.londeg);q=q.replace(/[eEwW]/,b[1].slice(-1));q=q.replace(/[nNsS]/,b[0].slice(-1));q=
q.replace(/Y/,d.latdeg);d.formatResult=q;return d},getFormattedDDMStr:function(b,q,k){var d={};d.sourceValue=b;d.sourceFormatString=q;d.parts=b[0].split(/[ ,]+/);d.latdeg=d.parts[0];d.latmin=d.parts[1].replace(/[nNsS]/,"");d.londeg=d.parts[2];d.lonmin=d.parts[3].replace(/[eEwW]/,"");k&&(d.latdeg="N"===d.parts[1].slice(-1)?"+"+d.latdeg:"-"+d.latdeg,d.londeg="W"===d.parts[3].slice(-1)?"-"+d.londeg:"+"+d.londeg);b=q.replace(/[EeWw]/,d.parts[3].slice(-1));b=b.replace(/Y/,d.lonmin);b=b.replace(/X/,d.londeg);
b=b.replace(/[NnSs]/,d.parts[1].slice(-1));b=b.replace(/B/,d.latmin);b=b.replace(/A/,d.latdeg);d.formatResult=b;return d},getFormattedDMSStr:function(b,q,k){var d={};d.sourceValue=b;d.sourceFormatString=q;d.parts=b[0].split(/[ ,]+/);d.latdeg=d.parts[0];d.latmin=d.parts[1];d.latsec=d.parts[2].replace(/[NnSs]/,"");d.londeg=d.parts[3];d.lonmin=d.parts[4];d.lonsec=d.parts[5].replace(/[EWew]/,"");k&&(d.latdeg="N"===d.parts[2].slice(-1)?"+"+d.latdeg:"-"+d.latdeg,d.londeg="W"===d.parts[5].slice(-1)?"-"+
d.londeg:"+"+d.londeg);b=q.replace(/A/,d.latdeg);b=b.replace(/B/,d.latmin);b=b.replace(/C/,d.latsec);b=b.replace(/X/,d.londeg);b=b.replace(/Y/,d.lonmin);b=b.replace(/Z/,d.lonsec);b=b.replace(/[NnSs]/,d.parts[2].slice(-1));b=b.replace(/[EeWw]/,d.parts[5].slice(-1));d.formatResult=b;return d},getFormattedUSNGStr:function(b,q){var k={};k.sourceValue=b;k.sourceFormatString=q;b[0].match(/^[ABYZ]/)?k.gzd=b[0].match(/[ABYZ]/)[0].trim():k.gzd=b[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();k.grdsq=b[0].replace(k.gzd,
"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();k.easting=b[0].replace(k.gzd+k.grdsq,"").match(/^\d{1,5}/)[0].trim();k.northing=b[0].replace(k.gzd+k.grdsq,"").match(/\d{1,5}$/)[0].trim();b=q.replace(/Y/,k.northing);b=b.replace(/X/,k.easting);b=b.replace(/S/,k.grdsq);b=b.replace(/Z/,k.gzd);k.formatResult=b;return k},getFormattedMGRSStr:function(b,q){var k={};k.sourceValue=b;k.sourceFormatString=q;b[0].match(/^[ABYZ]/)?k.gzd=b[0].match(/[ABYZ]/)[0].trim():k.gzd=b[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();k.grdsq=
b[0].replace(k.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();k.easting=b[0].replace(k.gzd+k.grdsq,"").match(/^\d{1,5}/)[0].trim();k.northing=b[0].replace(k.gzd+k.grdsq,"").match(/\d{1,5}$/)[0].trim();b=q.replace(/Y/,k.northing);b=b.replace(/X/,k.easting);b=b.replace(/S/,k.grdsq);b=b.replace(/Z/,k.gzd);k.formatResult=b;return k},getFormattedGARSStr:function(b,q){var k={};k.sourceValue=b;k.sourceFormatString=q;k.lon=b[0].match(/\d{3}/);k.lat=b[0].match(/[a-zA-Z]{2}/);b=b[0].match(/\d*$/);k.quadrant=
b[0][0];k.key=b[0][1];q=q.replace(/K/,k.key);q=q.replace(/Q/,k.quadrant);q=q.replace(/Y/,k.lat);q=q.replace(/X/,k.lon);k.formatResult=q;return k},getFormattedGEOREFStr:function(b,q){var k={};k.sourceValue=b;k.sourceFormatString=q;k.lon=b[0].match(/[a-zA-Z]{1}/)[0].trim();k.lat=b[0].replace(k.lon,"").match(/[a-zA-Z]{1}/)[0].trim();k.quadrant15lon=b[0].replace(k.lon+k.lat,"").match(/[a-zA-Z]{1}/)[0].trim();k.quadrant15lat=b[0].replace(k.lon+k.lat+k.quadrant15lon,"").match(/[a-zA-Z]{1}/)[0].trim();b=
b[0].replace(k.lon+k.lat+k.quadrant15lon+k.quadrant15lat,"");k.quadrant1lon=b.substr(0,b.length/2);k.quadrant1lat=b.substr(b.length/2,b.length);q=q.replace(/Y/,k.quadrant1lat);q=q.replace(/X/,k.quadrant1lon);q=q.replace(/D/,k.quadrant15lat);q=q.replace(/C/,k.quadrant15lon);q=q.replace(/B/,k.lat);q=q.replace(/A/,k.lon);k.formatResult=q;return k},getFormattedUTMStr:function(b,q){var k={};k.sourceValue=b;k.sourceFormatString=q;k.parts=b[0].split(/[ ,]+/);k.zone=k.parts[0].replace(/[A-Z]/,"");k.bandLetter=
k.parts[0].slice(-1);k.easting=k.parts[1];k.westing=k.parts[2];b=q.replace(/Y/,k.westing);b=b.replace(/X/,k.easting);b=b.replace(/B/,k.bandLetter);b=b.replace(/Z/,k.zone);k.formatResult=b;return k},getFormattedUTMHStr:function(b,q){var k={};k.sourceValue=b;k.sourceFormatString=q;k.parts=b[0].split(/[ ,]+/);k.zone=k.parts[0].replace(/[A-Z]/,"");k.hemisphere=k.parts[0].slice(-1);k.easting=k.parts[1];k.westing=k.parts[2];b=q.replace(/Y/,k.westing);b=b.replace(/X/,k.easting);b=b.replace(/H/,k.hemisphere);
b=b.replace(/Z/,k.zone);k.formatResult=b;return k},convertMetersToUnits:function(b,q){var k=0;switch(q.toLowerCase()){case "meters":k=b;break;case "feet":k=3.28084*b;break;case "kilometers":k=.001*b;break;case "miles":k=6.21371E-4*b;break;case "nautical-miles":k=5.39957E-4*b;break;case "yards":k=1.09361*b}return k},convertToMeters:function(b,q){var k=b;switch(q){case "meters":k=b;break;case "feet":k=.3048*b;break;case "kilometers":k=1E3*b;break;case "miles":k=1609.34*b;break;case "nautical-miles":k=
1852.001376036*b;break;case "yards":k=.9144*b}return k}})})},"widgets/DistanceAndDirection/models/dialogConfirm":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Deferred dojo/dom-construct dijit/Dialog dijit/form/Button dijit/form/CheckBox jimu/utils".split(" "),function(P,e,E,h,b,q,k,d){return e(b,{okButton:null,cancelButton:null,skipCheckBox:null,hasOkButton:!0,hasCancelButton:!0,hasSkipCheckBox:!0,hasUnderlay:!0,dfd:null,buttonNode:null,constructor:function(l){P.mixin(this,l)},
postCreate:function(){this.inherited("postCreate",arguments);var l=!1;var x=h.create("div",{className:"dijitDialogPaneContent dialogConfirm"},this.domNode,"last");this.hasSkipCheckBox&&(this.skipCheckBox=new k({checked:!1},h.create("div")),x.appendChild(this.skipCheckBox.domNode),h.create("label",{"for":this.skipCheckBox.id,innerHTML:d.sanitizeHTML(this.nls.rememberDecisionMessage)},x));this.hasOkButton&&(this.okButton=new q({label:this.nls.common.ok,onClick:P.hitch(this,function(){l=this.hasSkipCheckBox?
this.skipCheckBox.get("checked"):!1;this.hide();this.dfd.resolve(l)})},h.create("div")),x.appendChild(this.okButton.domNode));this.hasCancelButton&&(this.cancelButton=new q({label:this.nls.common.cancel,onClick:P.hitch(this,function(){l=this.hasSkipCheckBox?this.skipCheckBox.get("checked"):!1;this.hide();this.dfd.cancel(l)})},h.create("div")),x.appendChild(this.cancelButton.domNode));this.buttonNode=x},show:function(){this.inherited("show",arguments);this.hasUnderlay||h.destroy(this.id+"_underlay");
return this.dfd=new E}})})},"widgets/DistanceAndDirection/models/ConfirmNotation":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./ConfirmNotation.html jimu/utils".split(" "),function(P,e,E,h,b,q){return P([e,E,h],{templateString:b,numberOfInputs:0,selectOptions:{},constructor:function(k,d){this.numberOfInputs=d.length;this.selectOptions=d},postCreate:function(){this.label1.innerHTML=q.sanitizeHTML(this.numberOfInputs+this.nls.multipleNotationsMessage);
for(var k=0;k<this.selectOptions.length;k++)this.comboOptions.addOption({value:this.selectOptions[k].name,label:this.selectOptions[k].notationType})}})})},"widgets/DistanceAndDirection/views/EditOutputCoordinate":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/on dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/EditOutputCoordinate.html jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),function(P,e,E,h,b,q,k,d,
l){return P([q,k,d],{templateString:l,formats:{},ct:"DD",_setCtAttr:function(x){this.frmtSelect.set("value",x)},postCreate:function(){this.formats={DD:{defaultFormat:"YN XE",customFormat:null,useCustom:!1},DDM:{defaultFormat:"A\u00b0 B'N X\u00b0 Y'E",customFormat:null,useCustom:!1},DMS:{defaultFormat:"A\u00b0 B' C\"N X\u00b0 Y' Z\"E",customFormat:null,useCustom:!1},GARS:{defaultFormat:"XYQK",customFormat:null,useCustom:!1},GEOREF:{defaultFormat:"ABCDXY",customFormat:null,useCustom:!1},MGRS:{defaultFormat:"ZSXY",
customFormat:null,useCustom:!1},USNG:{defaultFormat:"ZSXY",customFormat:null,useCustom:!1},UTM:{defaultFormat:"ZB X Y",customFormat:null,useCustom:!1},"UTM (H)":{defaultFormat:"ZH X Y",customFormat:null,useCustom:!1}};b.set(this.frmtVal,"value",this.formats[this.ct].defaultFormat);this.own(this.frmtSelect.on("change",e.hitch(this,this.frmtSelectValueDidChange)));this.own(h(this.frmtVal,"change",e.hitch(this,this.formatValDidChange)));this.displayPrefixContainer()},formatValDidChange:function(){var x=
b.get(this.frmtVal,"value"),C=this.frmtSelect.get("value");this.formats[C].customFormat=x;this.formats[C].useCustom=!0;this.currentformat=x},frmtSelectValueDidChange:function(){var x=this.frmtSelect.get("value"),C=this.formats[x].useCustom?this.formats[x].customFormat:this.formats[x].defaultFormat;this.ct=x;b.set(this.frmtVal,"value",C);this.displayPrefixContainer()},displayPrefixContainer:function(){switch(this.frmtSelect.get("value")){case "DD":case "DDM":case "DMS":E.set(this.prefixContainer,{display:""});
break;default:E.set(this.prefixContainer,{display:"none"})}}})})},"widgets/DistanceAndDirection/models/DirectionalLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/Stateful esri/geometry/screenUtils esri/symbols/SimpleLineSymbol esri/symbols/SimpleMarkerSymbol esri/graphic esri/geometry/ScreenPoint esri/geometry/geometryEngine dojo/_base/fx dojo/fx dojo/on".split(" "),function(P,e,E,h,b,q,k,d,l,x,C,c){return P([b,E],{constructor:function(a){this.inherited(arguments);this.setStyle(a.style);
this.setColor(a.color);this.setWidth(a.width);this.directionSymbols={arrow1:"m0.5,50.5c0,0 99.5,-41 99.5,-41c0,0 0.5,81.5 0.5,81.5c0,0 -100,-40.5 -100,-40.5z",arrow2:"M1,50l99.5,-50c0,0 -40,49.5 -40,49.5c0,0 39.5,50 39.5,50c0,0 -99,-49.5 -99,-49.5z",arrow3:"m0.5,50.5l90,-50l9,9.5l-79.5,40.5l80,39.5l-10,10.5l-89.5,-50z",arrow4:"m55.4605,51.5754l43.0685,-48.2908l-43.3797,48.2908l43.8197,44.8899l-43.5085,-44.8899zm-6.0505,42.3899l-0.44,-88.1807l-43.37967,45.7908l43.81967,42.3899z"};this.directionColor=
a.directionColor||this.color;this.directionSize=a.directionSize||12;this.directionPixelBuffer=a.directionPixelBuffer||40;this.animationRepeat=a.animationRepeat;this.animationDuration=a.animationDuration||350;this.directionSymbol=a.directionSymbol||"arrow1";this.showDirectionalSymbols=a.showDirectionalSymbols||!0;this.showStartSymbol=a.showStartSymbol||!1;this.startSymbol=a.startSymbol||new q({color:[128,128,128,64],size:8,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:2,type:"esriSLS",
style:"esriSLSSolid"}});this.showEndSymbol=a.showEndSymbol||!1;this.endSymbol=a.startSymbol||new q({color:[128,128,128,64],size:8,type:"esriSMS",style:"esriSMSX",outline:{color:[0,0,0,255],width:2,type:"esriSLS",style:"esriSLSSolid"}});this.graphics=[];this.map=null;this.drawGraphicDirection=this._drawDirection;this.type="DirectionalLineSymbol"},getStroke:function(){var a=0<arguments.callee.caller.arguments.length?arguments.callee.caller.arguments[4]:arguments.callee.caller.caller.arguments[4];if(!a||
a.dlsSymbolGroup)return this.inherited(arguments);this.graphics.push(a);var r=a.getLayer(),m=this.map=r.getMap();a.dlsSymbolGroup=r._div.createGroup();this._drawDirection(a,r,m);r.dlsGraphicRemove||(r.dlsGraphicRemove=r.on("graphic-remove",function(f){f.graphic.dlsSymbolGroup&&(dojo.query(".dls-symbol",f.graphic.dlsSymbolGroup.rawNode).forEach(dojo.destroy),dojo.destroy(f.graphic.dlsSymbolGroup.rawNode),f.graphic.dlsSymbolGroup=null)}));var p=null,y=null;m.graphics.dlsGraphicDraw||(m.graphics.dlsGraphicDraw=
m.graphics.on("graphic-draw",function(f){f.graphic.dlsSymbolGroup&&(p=f.graphic,(y="DirectionalLineSymbol"===p.symbol.type?p.symbol:p.symbol.outline&&"DirectionalLineSymbol"===p.symbol.outline.type?p.symbol.outline:null)&&y.drawGraphicDirection(p,this,this.getMap()))}));m.dlsExtChanged||(m.dlsExtChanged=m.on("extent-change",function(){for(var f=0,I=this.graphics.graphics.length;f<I;f++)if(p=this.graphics.graphics[f],p.symbol)if(p.attributes&&p.attributes.isDirectionalGraphic)this.graphics.remove(p),
f--,I--;else{var J="DirectionalLineSymbol"===p.symbol.type?p.symbol:p.symbol.outline&&"DirectionalLineSymbol"===p.symbol.outline.type?p.symbol.outline:null;J&&J.drawGraphicDirection(p,r,this)}for(f=0;f<this.graphicsLayerIds.length;f++)if(r=this.getLayer(this.graphicsLayerIds[f]),r.dlsGraphicRemove)for(I=0,J=r.graphics.length;I<J;I++)p=r.graphics[I],p.symbol&&(p.attributes&&p.attributes.isDirectionalGraphic?(r.remove(p),I--,J--):p.symbol.drawGraphicDirection(p,r,this))}));return this.inherited(arguments)},
_drawDirection:function(a,r,m){if(a.dlsSymbolGroup){var p=a.dlsSymbolGroup,y=a.geometry;y.spatialReference.wkid!==m.spatialReference.wkid&&(esri.geometry.canProject(y,m)?y=esri.geometry.project(y,m):console.error("Can't project geometry wkid - "+y.spatialReference.wkid+" to map wkid "+m.spatialReference.wkid));a.directions=[];dojo.query(".dls-symbol",a.dlsSymbolGroup.rawNode).forEach(dojo.destroy);var f=h.toScreenGeometry(m.extent,m.width,m.height,y);m=h.toScreenGeometry(m.extent,m.width,m.height,
m.extent);if(f="polyline"===y.type?f.paths:f.rings){if(this.showStartSymbol&&(y=this._getFirstItem(f),y=this._createGraphic(y,this.startSymbol),y.geometry)){r.add(y);var I=y.getShape();I?(p.add(I),y.attr("class","dls-symbol"),a.directions.push(y),a.visible||y.hide(),y.origJson=y.toJson(),y.toJson=this.directionGraphicToJson):r.remove(y)}if(this.showDirectionalSymbols)for(y=0,I=f.length;y<I;y++)for(var J=f[y],B=0,N=J.length-1;B<N;B++)if(B!==J.length){var R=J[B],O=J[B+1],S=this._getAngle(R,O);R=this._getDirectionPoints(R,
O,m);O=0;for(var T=R.length;O<T;O++){var Q=this._createGraphic(R[O],this._createSymbol(this.directionSymbol,S));r.add(Q);var t=Q.getShape();p.add(t);Q.attr("class","dls-symbol");a.directions.push(Q);a.visible||Q.hide();Q.origJson=Q.toJson();Q.toJson=this.directionGraphicToJson}}this.showEndSymbol&&(y=this._getSecondToLastItem(f))&&(m=this._getLastItem(f))&&!this._isEqual(y,m)&&(f=this._getAngle(y,m),f=this._createSymbol(this.endSymbol,f),m=this._createGraphic(m,f),m.geometry&&(r.add(m),(f=m.getShape())?
(p.add(f),m.attr("class","dls-symbol"),a.directions.push(m),a.visible||m.hide(),m.origJson=m.toJson(),m.toJson=this.directionGraphicToJson):r.remove(m)));a.dlsAnimationRepeat&&(1<a.dlsAnimationRepeat||Infinity===a.dlsAnimationRepeat)&&this._animateGraphic(a,a.dlsAnimationRepeat)}else console.error("Can't apply DirectionalLineSymbol to geometry "+y.type)}},_getLastItem:function(a){return a[a.length-1][a[a.length-1].length-1]},_getSecondToLastItem:function(a){return a[a.length-1][a[a.length-1].length-
2]},_getFirstItem:function(a){return a[0][0]},_getAngle:function(a,r){return 180/Math.PI*Math.atan2(r[1]-a[1],r[0]-a[0])-180},_isEqual:function(a,r){var m=Object.getOwnPropertyNames(a),p=Object.getOwnPropertyNames(r);if(m.length!==p.length)return!1;for(p=0;p<m.length;p++){var y=m[p];if(a[y]!==r[y])return!1}return!0},_createSymbol:function(a,r){if("simplemarkersymbol"===a.type||"picturemarkersymbol"===a.type)var m=e.clone(a);else"string"===typeof a?(m=new q,m.setSize(this.directionSize).setPath(this.directionSymbols[a]?
this.directionSymbols[a]:a).setOutline(null).setColor(this.directionColor)):console.error("Symbol must be set to one of the pre-defined strings {'arrow1', 'arrow2', 'arrow3', 'arrow4'}, or a SimpleMarkerSymbol or PictureMarkerSymbol.");m.setAngle(r);return m},_createGraphic:function(a,r){var m=new k;m.setSymbol(r);m.attributes={isDirectionalGraphic:!0};a=new d(a[0],a[1]);a=this.map.toMap(a);m.geometry=l.within(a,this.map.extent)?a:null;return m},_getDirectionPoints:function(a,r,m){var p=[],y=a[0]<
r[0]?a[0]:r[0],f=a[0]>r[0]?a[0]:r[0],I=a[1]<r[1]?a[1]:r[1],J=a[1]>r[1]?a[1]:r[1],B=m.xmin<m.xmax?m.xmin:m.xmax,N=m.xmin>m.xmax?m.xmin:m.xmax,R=m.ymin<m.ymax?m.ymin:m.ymax;m=m.ymin>m.ymax?m.ymin:m.ymax;r=[r[0]-a[0],r[1]-a[1]];var O=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(O<this.directionPixelBuffer)return p;r[0]=r[0]/O*this.directionPixelBuffer;r[1]=r[1]/O*this.directionPixelBuffer;for(a=[a[0]+r[0],a[1]+r[1]];a[0]>=y&&a[0]<=f&&a[1]>=I&&a[1]<=J;)a[0]>=B&&a[0]<=N&&a[1]>=R&&a[1]<=m&&p.push([a[0],a[1]]),a=[a[0]+
r[0],a[1]+r[1]];return p},get:function(a){return this[a]?this[a]:null},_setDirectionSymbolAttr:function(a){this._set("directionSymbol",a);this._drawDirection()},_setStartSymbolAttr:function(a){this._set("startSymbol",a);this._drawDirection()},_setEndSymbolAttr:function(a){this._set("endSymbol",a);this._drawDirection()},_setShowStartSymbolAttr:function(a){this._set("showStartSymbol",a);this._drawDirection()},_setShowEndSymbolAttr:function(a){this._set("showEndSymbol",a);this._drawDirection()},animateDirection:function(a,
r){a&&(a=parseInt(a,10),isNaN(a)&&(a=Infinity),this.animationRepeat=a);if(!this.animationRepeat||1>this.animationRepeat)this.stopAnimation();else for(r&&(this.animationDuration=r),this.animationChain=null,this.animationEnd&&this.animationEnd.remove(),r=0,a=this.graphics.length;r<a;r++){var m=this.graphics[r];m.dlsSymbolGroup&&this._animateGraphic(m,this.animationRepeat)}},_animateGraphic:function(a,r){var m=[],p=this.animationDuration;a.dlsAnimationChain&&a.dlsAnimationChain.stop();dojo.query(".dls-symbol",
a.dlsSymbolGroup.rawNode).forEach(function(y){x.fadeOut({node:y,duration:10}).play();y=x.fadeIn({node:y,duration:p});m.push(y)});a.dlsAnimationRepeat=r;a.dlsAnimationChain=C.chain(m);a.dlsAnimationEnd=c(a.dlsAnimationChain,"End",e.hitch(this,function(){!isNaN(r)&&1<r?(r--,this._animateGraphic(a,r)):Infinity===r&&this._animateGraphic(a,r)}));try{a.dlsAnimationChain.play()}catch(y){}},stopAnimation:function(){for(var a=0,r=this.graphics.length;a<r;a++){var m=this.graphics[a];m.dlsSymbolGroup&&(dojo.query(".dls-symbol",
m.dlsSymbolGroup.rawNode).forEach(function(p){x.fadeIn({node:p,duration:10}).play()}),m.dlsAnimationRepeat=0,m.dlsAnimationChain&&m.dlsAnimationChain.stop(),m.dlsAnimationEnd&&m.dlsAnimationEnd.remove())}},toJson:function(){return b.prototype.toJson.call(this)},directionGraphicToJson:function(){if(this.jsonUpdated||!this.origJson.symbol||!this.origJson.symbol.angle)return this.origJson;this.origJson.symbol.angle*=-1;this.jsonUpdated=!0;return this.origJson}})})},"widgets/DistanceAndDirection/views/TabCircle":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/on dojo/topic dojo/has dojo/touch dojo/dom-attr dojo/dom-class dojo/string dojo/mouse dojo/number dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/popup jimu/dijit/Message jimu/LayerInfos/LayerInfos esri/layers/FeatureLayer esri/symbols/SimpleFillSymbol esri/symbols/SimpleMarkerSymbol esri/symbols/TextSymbol esri/graphic esri/geometry/Polyline esri/geometry/Polygon esri/geometry/Point esri/geometry/Circle esri/tasks/FeatureSet esri/layers/LabelClass ../models/CircleFeedback ../views/CoordinateInput ../views/EditOutputCoordinate dojo/text!../templates/TabCircle.html jimu/utils dijit/focus dojo/_base/event dojo/aspect dijit/form/NumberTextBox jimu/dijit/formSelect jimu/dijit/CheckBox dijit/TitlePane".split(" "),
function(P,e,E,h,b,q,k,d,l,x,C,c,a,r,m,p,y,f,I,J,B,N,R,O,S,T,Q,t,n,w,K,M,v,u,F,H,z,G,U){return P([r,m,p],{templateString:F,baseClass:"jimu-widget-TabCircle",_restrictFocusOnAddCenterPointBtn:!1,_centerPointInputKeyPressed:!1,constructor:function(D){P.safeMixin(this,D)},postCreate:function(){this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=this.useCalculatedDistance=!1;this.currentLengthUnit=this.lengthUnitDD.get("value");this._circleSym=new N(this.circleSymbol);this._ptSym=
new R(this.pointSymbol);this._labelSym=new O(this.labelSymbol);this.map.addLayer(this.getLayer());if(this._gl.loaded){var D=J.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Circle Graphics");D.showLabels();D.enablePopup()}else this._gl.on("load",e.hitch(this,function(){var g=J.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Circle Graphics");g.showLabels();g.enablePopup()}));this.coordTool=new v({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.centerPointLabel},
this.startPointCoords);this.coordTool.inputCoordinate.formatType="DD";this.coordinateFormat=new y({content:new u({nls:this.nls}),style:"width: 400px"});U.after(this.coordinateFormat,"onClose",e.hitch(this,function(){z.focus(this.coordinateFormatButton);if(this._restrictFocusOnAddCenterPointBtn){var g=this.coordTool.getValue();if(""===g||null===g||void 0===g)this._restrictFocusOnAddCenterPointBtn=!1}}));"DartTheme"===this.appConfig.theme.name&&l.add(this.coordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");
this.dt=new M({appConfig:this.appConfig,map:this.map,coordTool:this.coordTool.inputCoordinate.util,nls:this.nls});this.dt.setFillSymbol(this._circleSym);this.syncEvents();this.checkValidInputs();this.radiusInput.invalidMessage=this.nls.numericInvalidMessage;this.radiusInput.rangeMessage=this.nls.rangeErrorMessage;this.timeInput.invalidMessage=this.nls.numericInvalidMessage;this.timeInput.rangeMessage=this.nls.invalidTimeMessage;this.distanceInput.invalidMessage=this.nls.numericInvalidMessage;this.distanceInput.rangeMessage=
this.nls.invalidDistanceMessage;this.distCalcControl.set("title",this.nls.distanceCalculatorLabel)},getLayer:function(){if(!this._gl){var D=new K({labelExpressionInfo:{value:"{Label}"}});D.symbol=this._labelSym;var g={layerDefinition:{id:"circleLayer",geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"Label",type:"esriFieldTypeString",alias:"Label"}]},featureSet:new w};this._gl=new B(g,{id:"Distance \x26 Direction - Circle Graphics",
showLabels:!0,outFields:["*"]});this._gl.setLabelingInfo([D]);return this._gl}},syncEvents:function(){b.subscribe("TAB_SWITCHED",e.hitch(this,this.tabSwitched));b.subscribe("DD-WIDGET-CLOSED",e.hitch(this,this._closeDijit));this.distCalcControl.watch("open",e.hitch(this,this.distCalcDidExpand));this.dt.watch("length",e.hitch(this,function(D,g,L){this.circleLengthDidChange(L)}));this.dt.watch("startPoint",e.hitch(this,function(D,g,L){this.dt.addStartGraphic(L,this._ptSym)}));this.dt.watch("startPointDD",
e.hitch(this,function(D,g,L){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",L);this.coordTool.inputCoordinate.set("inputType",this.coordTool.inputCoordinate.formatType)}));this.dt.watch("endPoint",e.hitch(this,function(D,g,L){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",L)}));this.coordTool.inputCoordinate.watch("outputString",e.hitch(this,function(D,g,L){this.coordTool.manualInput||(this.coordTool.set("value",L),this.currentCircle=null,this._restrictFocusOnAddCenterPointBtn?
this._restrictFocusOnAddCenterPointBtn=!1:this._centerPointInputKeyPressed?this._centerPointInputKeyPressed=!1:z.focus(this.addPointBtn))}));this.dt.on("draw-complete",e.hitch(this,this.feedbackDidComplete));this.own(h(this.coordTool,"keydown",e.hitch(this,this.coordToolKeyWasPressed)),this.lengthUnitDD.on("change",e.hitch(this,this.lengthUnitDDDidChange)),this.creationType.on("change",e.hitch(this,this.creationTypeDidChange)),this.distanceUnitDD.on("change",e.hitch(this,this.distanceInputDidChange)),
this.timeUnitDD.on("change",e.hitch(this,this.timeInputDidChange)),h(this.radiusInput,"change",e.hitch(this,function(){this.currentCircle=null})),h(this.coordinateFormatButton,"click",e.hitch(this,this.coordinateFormatButtonWasClicked)),h(this.coordinateFormatButton,"keydown",e.hitch(this,function(D){if(D.keyCode===a.ENTER||D.keyCode===a.SPACE)G.stop(D),this.coordinateFormatButtonWasClicked()})),h(this.addPointBtn,"keydown",e.hitch(this,function(D){if(D.keyCode===a.ENTER||D.keyCode===a.SPACE)G.stop(D),
this.pointButtonWasClicked()})),h(this.timeInput,"change",e.hitch(this,this.timeInputDidChange)),h(this.distanceInput,"change",e.hitch(this,this.distanceInputDidChange)),h(this.distanceInput,"keyup",e.hitch(this,this.distanceInputKeyWasPressed)),h(this.clearGraphicsButton,"click",e.hitch(this,this.clearGraphics)),h(this.clearGraphicsButton,"keydown",e.hitch(this,function(D){if(D.keyCode===a.ENTER||D.keyCode===a.SPACE)G.stop(D),this.clearGraphics()})),h(this.interactiveCircle,"change",e.hitch(this,
this.interactiveCheckBoxChanged)),h(this.interactiveCircle,"keydown",e.hitch(this,function(D){D.keyCode===a.ENTER&&(this.interactiveCircle.checked=this.interactiveCircle.checked?!1:!0,this.interactiveCheckBoxChanged())})),h(this.coordinateFormat.content.applyButton,"click",e.hitch(this,function(){this._restrictFocusOnAddCenterPointBtn=!0;var D=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],g=D.defaultFormat,L=this.coordinateFormat.content.frmtSelect.get("value");D.useCustom&&
(g=D.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",g);this.coordTool.inputCoordinate.set("formatType",L);this.setCoordLabel(L);f.close(this.coordinateFormat);z.focus(this.coordinateFormatButton)})),h(this.coordinateFormat.content.applyButton,"keydown",e.hitch(this,function(D){if(D.keyCode===a.ENTER||D.keyCode===a.SPACE){G.stop(D);this._restrictFocusOnAddCenterPointBtn=!0;var g=
this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],L=g.defaultFormat,W=this.coordinateFormat.content.frmtSelect.get("value");g.useCustom&&(L=g.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",L);this.coordTool.inputCoordinate.set("formatType",W);this.setCoordLabel(W);f.close(this.coordinateFormat);z.focus(this.coordinateFormatButton)}D.keyCode===a.ESCAPE&&(G.stop(D),
f.close(this.coordinateFormat),z.focus(this.coordinateFormatButton))})),h(this.coordinateFormat.content.cancelButton,"click",e.hitch(this,function(){f.close(this.coordinateFormat)})),h(this.coordinateFormat.content.cancelButton,"keydown",e.hitch(this,function(D){if(D.keyCode===a.ENTER||D.keyCode===a.SPACE)G.stop(D),f.close(this.coordinateFormat),z.focus(this.coordinateFormatButton);D.keyCode===a.ESCAPE&&(G.stop(D),f.close(this.coordinateFormat),z.focus(this.coordinateFormatButton))})),h(this.coordinateFormat.content.frmtSelect,
"keydown",e.hitch(this,function(D){D.keyCode===a.ESCAPE&&(G.stop(D),f.close(this.coordinateFormat),z.focus(this.coordinateFormatButton))})),h(this.coordinateFormat.content.frmtVal,"keydown",e.hitch(this,function(D){D.keyCode===a.ESCAPE&&(G.stop(D),f.close(this.coordinateFormat),z.focus(this.coordinateFormatButton))})),h(this.coordinateFormat.content.addSignChkBox,"keydown",e.hitch(this,function(D){D.keyCode===a.ESCAPE&&(G.stop(D),f.close(this.coordinateFormat),z.focus(this.coordinateFormatButton));
D.keyCode===a.ENTER&&(G.stop(D),this.coordinateFormat.content.addSignChkBox.checked=this.coordinateFormat.content.addSignChkBox.checked?!1:!0)})),h(this.radiusInputDiv,C.leave,e.hitch(this,this.checkValidInputs)),h(this.okButton,"keydown",e.hitch(this,function(D){if(D.keyCode===a.ENTER||D.keyCode===a.SPACE)G.stop(D),this.okButtonClicked()})));q("esri-touch")?this.own(h(this.addPointBtn,k.press,e.hitch(this,this.pointButtonWasClicked))):this.own(h(this.addPointBtn,"click",e.hitch(this,this.pointButtonWasClicked)))},
circleLengthDidChange:function(D){var g=c.format(D,{places:2,locale:E.locale});this.radiusInput.set("displayedValue",g);this.radiusInput.set("value",D)},interactiveCheckBoxChanged:function(){this.tabSwitched();this.interactiveCircle.checked?(this.radiusInput.set("disabled",!0),this.distCalcControl.set("open",!1),this.distCalcControl.set("open",!1),this.distCalcControl.set("toggleable",!1)):(this.radiusInput.set("disabled",!1),this.distCalcControl.set("disabled",!1),this.distCalcControl.set("toggleable",
!0));this.checkValidInputs()},coordToolKeyWasPressed:function(D){this.dt.removeStartGraphic();D.keyCode===a.ENTER&&(this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!0,this.coordTool.inputCoordinate.getInputType().then(e.hitch(this,function(g){"UNKNOWN"===g.inputType?(new I({message:this.nls.invalidCoordinateTypeMessage}),this.coordTool.inputCoordinate.coordinateEsriGeometry=null,this.checkValidInputs()):this.dt.getProjectedGeometry(g.coordinateEsriGeometry,this.map.spatialReference).then(e.hitch(this,
e.hitch(this,function(L){b.publish("manual-circle-center-point-input",L);this.setCoordLabel(g.inputType);this.coordTool.inputCoordinate.set("formatString",this.coordinateFormat.content.formats[g.inputType].defaultFormat);this.coordTool.inputCoordinate.set("formatType",g.inputType);this.dt.addStartGraphic(L,this._ptSym);this.checkValidInputs()})))})))},coordinateFormatButtonWasClicked:function(){this.coordinateFormat.content.set("ct",this.coordTool.inputCoordinate.formatType);f.open({popup:this.coordinateFormat,
around:this.coordinateFormatButton});z.focus(this.coordinateFormat.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormat&&this.coordinateFormat.domNode.offsetParent&&f.close(this.coordinateFormat)},distCalcDidExpand:function(){this.dt.deactivate();this.dt.cleanup();this.dt.disconnectOnMouseMoveHandler();this.coordTool.inputCoordinate.isManual=!0;this.distCalcControl.get("open")?this.radiusInput.set("disabled",!0):(this.radiusInput.set("disabled",!1),this.timeInput.set("value",
1),this.distanceInput.set("value",1))},timeInputDidChange:function(){this.currentTimeInSeconds=this.timeInput.get("value")*this.timeUnitDD.get("value");this.getCalculatedDistance();this.currentCircle=null},distanceInputKeyWasPressed:function(D){this.distanceInputDidChange();D.keyCode===a.ENTER&&(this.coordTool.inputCoordinate.outputString&&""!==this.coordTool.inputCoordinate.inputString?(this.removeManualGraphic(),this.setGraphic(!0),this.dt._onDoubleClickHandler()):new I({message:this.nls.noCenterPointSetMessage}))},
okButtonClicked:function(){l.contains(this.okButton,"jimu-state-disabled")||(this._restrictFocusOnAddCenterPointBtn=!0,this.removeManualGraphic(),this.currentCircle||this.setGraphic(!0),this.emit("show-publish",this._gl))},distanceInputDidChange:function(){this.currentDistanceInMeters=this.distanceInput.get("value")*this.distanceUnitDD.value.split(";")[0]/this.distanceUnitDD.value.split(";")[1];this.getCalculatedDistance();this.currentCircle=null},getCalculatedDistance:function(){if(this.currentTimeInSeconds&&
0<this.currentTimeInSeconds&&this.currentDistanceInMeters&&0<this.currentDistanceInMeters){this.calculatedRadiusInMeters=this.currentTimeInSeconds*this.currentDistanceInMeters;this.useCalculatedDistance=!0;var D=0;switch(this.currentLengthUnit){case "feet":D=3.2808399*this.calculatedRadiusInMeters;break;case "meters":D=this.calculatedRadiusInMeters;break;case "yards":D=1.0936133*this.calculatedRadiusInMeters;break;case "kilometers":D=.001*this.calculatedRadiusInMeters;break;case "miles":D=6.21371192E-4*
this.calculatedRadiusInMeters;break;case "nautical-miles":D=5.39957E-4*this.calculatedRadiusInMeters}D="Diameter"===this.creationType.get("value")?2*D:D;D=c.format(D,{places:"4"});this.radiusInput.set("value",D)}else this.calculatedRadiusInMeters=null,this.useCalculatedDistance=!0},pointButtonWasClicked:function(){l.contains(this.addPointBtn,"drawPointBtn-active")?(this.dt.deactivate(),this._setMapNavigation(!0)):(this.coordTool.manualInput=!1,b.publish("clear-points"),this._setMapNavigation(!1),
this.dt.set("isDiameter","Diameter"===this.creationType.get("value")),this.distCalcControl.get("open")?this.dt.activate("point"):this.interactiveCircle.checked?this.dt.activate("polyline"):this.dt.activate("point"));l.toggle(this.addPointBtn,"drawPointBtn-active")},lengthUnitDDDidChange:function(){this.currentLengthUnit=this.lengthUnitDD.get("value");this.dt.set("lengthUnit",this.currentLengthUnit);this.distCalcControl.get("open")&&this.distanceInputDidChange();this.currentCircle=null},creationTypeDidChange:function(){var D=
"Diameter"===this.creationType.get("value")?this.nls.diameterLabel:this.nls.radiusLabel;this.radiusDiameterLabel.innerHTML=H.sanitizeHTML(D);d.set(this.radiusInput,"aria-label",D);d.set(this.lengthUnitDD,"aria-label",D);this.currentCircle=null},feedbackDidComplete:function(D){if(D.geometry.center){var g=D.geometry.center,L=new t(D.geometry.rings[0][0][0],D.geometry.rings[0][0][1],D.geometry.center.spatialReference);D=new T(D.geometry.center.spatialReference);D.addPath([g,L]);this.setGraphic(!1,D);
z.focus(this.addPointBtn)}else l.toggle(this.addPointBtn,"drawPointBtn-active"),this._setMapNavigation(!0),this.dt.deactivate(),this.checkValidInputs()},setCoordLabel:function(D){D=H.sanitizeHTML(x.substitute(this.nls.centerPointLabel+" (${crdType})",{crdType:D}));this.coordInputLabel.innerHTML=D;d.set(this.coordTool.textbox,"aria-label",D)},removeManualGraphic:function(){null!==this.tempGraphic&&this._gl.remove(this.tempGraphic);this.dt.removeStartGraphic()},setGraphic:function(D,g){D||l.toggle(this.addPointBtn,
"drawPointBtn-active");this._setMapNavigation(!0);this.dt.deactivate();this.dt.removeStartGraphic();g="Diameter"===this.creationType.get("value")?this.radiusInput.get("value")/2:this.radiusInput.get("value");g=this.coordTool.inputCoordinate.util.convertToMeters(g,this.lengthUnitDD.get("value"));D=this.coordTool.inputCoordinate.coordinateEsriGeometry;g=new n({center:D,radius:g,geodesic:!0,numberOfPoints:360});D=new Q(D.spatialReference);D.addRing(g.rings[0]);this.dt.getProjectedGeometry(D,this.map.spatialReference).then(e.hitch(this,
function(L){var W="Diameter"===this.creationType.get("value")?parseFloat(this.radiusInput.get("value"))/2:parseFloat(this.radiusInput.get("value"));W=new S(L,this._circleSym,{Label:window.isRTL?this._getLengthAbbrevation(this.lengthUnitDD.get("value"))+" "+this.radiusInput.get("displayedValue")+" "+this.creationType.get("displayedValue"):this.creationType.get("displayedValue")+" "+this.radiusInput.get("displayedValue")+" "+this._getLengthAbbrevation(this.lengthUnitDD.get("value")),CenterPoint:this.coordTool.get("value"),
RadiusDistance:W,RadiusUnit:this.currentLengthUnit});this.checkValidInputs();this.map.setExtent(L.getExtent().expand(3));this.currentCircle=W;this._gl.add(W);this._gl.refresh();this.dt.set("startPoint",null)}))},clearGraphics:function(){this._gl&&(this._gl.clear(),this._gl.refresh(),this.clearUI(!1));this.tabSwitched();this.checkValidInputs();this.currentCircle=null;for(var D=0;D<this.map.graphicsLayerIds.length;D++)this.map.getLayer(this.map.graphicsLayerIds[D]).refresh()},clearUI:function(D){D||
this.coordTool.clear();this.dt.set("startPoint",null);this.useCalculatedDistance=!1;l.remove(this.addPointBtn,"drawPointBtn-active");d.set(this.startPointCoords,"value","");this.radiusInput.set("value",1E3);this.timeInput.set("value",1);this.distanceInput.set("value",1)},setGraphicsHidden:function(){this._gl&&this._gl.hide()},setGraphicsShown:function(){this._gl&&this._gl.show()},checkValidInputs:function(){l.add(this.okButton,"jimu-state-disabled");d.set(this.okButton,"tabindex",-1);null!==this.coordTool.inputCoordinate.coordinateEsriGeometry&&
this.radiusInput.isValid()&&(l.remove(this.okButton,"jimu-state-disabled"),d.set(this.okButton,"tabindex",0));this.okButton.innerHTML=this.interactiveCircle.checked?this.nls.publishDDBtn:this.nls.common.ok},tabSwitched:function(){this.dt.deactivate();this.dt.cleanup();this.dt.disconnectOnMouseMoveHandler();this.dt.set("startPoint",null);this._setMapNavigation(!0);this.dt.removeStartGraphic();this.addPointBtn&&l.remove(this.addPointBtn,"drawPointBtn-active");f.close(this.coordinateFormat)},_setMapNavigation:function(D){D?
this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(D){var g=null;if(D)switch(D){case "feet":g=this.nls.abbrevFeetLabel;break;case "kilometers":g=this.nls.abbrevKmLabel;break;case "miles":g=this.nls.abbrevMilesLabel;break;case "meters":g=this.nls.abbrevMetersLabel;break;case "nautical-miles":g=this.nls.abbrevNauticalMilesLabel;break;case "yards":g=this.nls.abbrevYardsLabel;break;default:g=D}return g},_getDegreeAbbreviation:function(D){var g=
null;if(D)switch(D){case "degrees":g=this.nls.abbrevDegreesLabel;break;case "mils":g=this.nls.abbrevMilsLabel;break;default:g=D}return g},_getTimeAbbreviation:function(D){var g=null;if(D)switch(D){case "3600":g=this.nls.abbrevHoursLabel;break;case "60":g=this.nls.abbrevMinutesLabel;break;case "1":g=this.nls.abbrevSecondsLabel;break;default:g=D}return g},_getRateAbbreviation:function(D){var g=null;if(D)switch(D){case "0.3048;1":g=this.nls.abbrevFeetSecondsLabel;break;case "0.3048;3600":g=this.nls.abbrevFeetHourLabel;
break;case "1000;1":g=this.nls.abbrevKmSecondLabel;break;case "1000;3600":g=this.nls.abbrevKmHourLabel;break;case "1;1":g=this.nls.abbrevMetersSecondLabel;break;case "1;3600":g=this.nls.abbrevMetersHourLabel;break;case "1609.344;1":g=this.nls.abbrevMilesSecondLabel;break;case "1609.344;3600":g=this.nls.abbrevMilesHourLabel;break;case "1852;1":g=this.nls.abbrevNauticalMilesSecondLabel;break;case "1852;3600":g=this.nls.abbrevNauticalMilesHourLabel;break;default:g=D}return g},setFirstFocusNode:function(){H.initFirstFocusNode(this.domNodeObj,
this.creationType.domNode)},focusFirstNodeOfSelectedTab:function(){z.focus(this.creationType.focusNode)},setLastFocusNode:function(){H.initLastFocusNode(this.domNodeObj,this.clearGraphicsButton)}})})},"widgets/DistanceAndDirection/models/CircleFeedback":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/topic esri/graphic esri/toolbars/draw esri/geometry/Circle esri/geometry/Polyline esri/geometry/geometryEngine ./Feedback".split(" "),function(P,e,E,h,b,q,k,d,l,x){x=P([x],
{constructor:function(C){P.safeMixin(this,C);this.syncEvents();this.initGeometryService()},clearGraphics:function(){this.map.graphics.clear()},syncEvents:function(){h.subscribe("MANUAL_CIRCLE_RADIUS_INPUT",e.hitch(this,this.manualRadiusUpdate));h.subscribe("manual-circle-center-point-input",e.hitch(this,this.onCenterPointManualInputHandler));h.subscribe("clear-points",e.hitch(this,this.clearPoints))},clearPoints:function(C){C&&(this._points=[],this.map.graphics.clear())},onCenterPointManualInputHandler:function(C){this._points=
[];this._points.push(C.offset(0,0));this.set("startPoint",this._points[0]);this.map.centerAt(C)},manualRadiusUpdate:function(){this.circleGraphic&&this.map.graphics.remove(this.circleGraphic)},_onClickHandler:function(C){if(this.map.snappingManager)var c=this.map.snappingManager._snappingPoint;var a=c||C.mapPoint;this._processAfterMapClick(a).then(e.hitch(this,function(r){this._points.push(a);switch(this._geometryType){case q.POINT:this.set("startPoint",a);this.set("startPointDD",r);this._drawEnd(a.offset(0,
0));this._setTooltipMessage(0);break;case q.POLYLINE:switch(this._points.length){case 1:this.set("startPoint",a);this.set("startPointDD",r);this.startPoint=r;this.canProjectLocally&&(this.startPoint=a,this._onMouseMoveHandlerConnect=E.connect(this.map,"onMouseMove",this._onMouseMoveHandler));break;case 2:this.endPoint=r,this._onDoubleClickHandler()}this._setTooltipMessage(this._points.length)}}))},_onMouseMoveHandler:function(C){if(this.map.snappingManager)var c=this.map.snappingManager._snappingPoint;
C=this.setCircleGeometry(this.startPoint,c||C.mapPoint);this.cleanup();this.circleGraphic=new b(C,this.fillSymbol);this.map.graphics.add(this.circleGraphic)},_onDoubleClickHandler:function(){this.disconnectOnMouseMoveHandler();this.cleanup();this._clear();this._setTooltipMessage(0);if(this.circleGraphic)this._drawEnd(this.circleGraphic.geometry);else{var C=this.setCircleGeometry(this.startPoint,this.endPoint);this._drawEnd(C)}},disconnectOnMouseMoveHandler:function(){E.disconnect(this._onMouseMoveHandlerConnect)},
cleanup:function(){this.circleGraphic&&this.map.graphics.remove(this.circleGraphic)},setCircleGeometry:function(C,c){var a=new d(C.spatialReference);a.addPath([C,c]);c=l.geodesicLength(a,9001);a=this.coordTool.convertMetersToUnits(c,this.lengthUnit);this.isDiameter&&(a*=2);this.set("length",a);return new k(C,{radius:c,geodesic:!0,numberOfPoints:360})}});x.DD_CIRCLE_LENGTH_DID_CHANGE="DD_CIRCLE_LENGTH_DID_CHANGE";return x})},"dijit/TitlePane":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/fx dojo/has dojo/_base/kernel dojo/keys ./_CssStateMixin ./_TemplatedMixin ./layout/ContentPane dojo/text!./templates/TitlePane.html ./_base/manager ./a11yclick".split(" "),
function(P,e,E,h,b,q,k,d,l,x,C,c,a,r,m){e=e("dijit.TitlePane",[a,c,C],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!0,toggleable:!0,tabIndex:"0",duration:m.defaultDuration,baseClass:"dijitTitlePane",templateString:r,doLayout:!1,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);E.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments);this.toggleable&&this._trackMouseState(this.titleBarNode,
this.baseClass+"Title");var p=this.hideNode,y=this.wipeNode;this._wipeIn=k.wipeIn({node:y,duration:this.duration,beforeBegin:function(){p.style.display=""}});this._wipeOut=k.wipeOut({node:y,duration:this.duration,onEnd:function(){p.style.display="none"}})},_setOpenAttr:function(p,y){P.forEach([this._wipeIn,this._wipeOut],function(f){f&&"playing"==f.status()&&f.stop()});y?this[p?"_wipeIn":"_wipeOut"].play():this.hideNode.style.display=this.wipeNode.style.display=p?"":"none";if(this._started)if(p)this._onShow();
else this.onHide();this.containerNode.setAttribute("aria-hidden",p?"false":"true");this.focusNode.setAttribute("aria-pressed",p?"true":"false");this._set("open",p);this._setCss()},_setToggleableAttr:function(p){this.focusNode.setAttribute("role",p?"button":"heading");p?(this.focusNode.setAttribute("aria-controls",this.id+"_pane"),this.focusNode.setAttribute("tabIndex",this.tabIndex),this.focusNode.setAttribute("aria-pressed",this.open)):(h.remove(this.focusNode,"aria-controls"),h.remove(this.focusNode,
"tabIndex"),h.remove(this.focusNode,"aria-pressed"));this._set("toggleable",p);this._setCss()},_setContentAttr:function(p){this.open&&this._wipeOut&&"playing"!=this._wipeOut.status()?(this._wipeIn&&"playing"==this._wipeIn.status()&&this._wipeIn.stop(),q.setMarginBox(this.wipeNode,{h:q.getMarginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display=""):this.inherited(arguments)},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var p=
this.titleBarNode||this.focusNode,y=this._titleBarClass;this._titleBarClass=this.baseClass+"Title"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");b.replace(p,this._titleBarClass,y||"");b.replace(p,this._titleBarClass.replace("TitlePaneTitle",""),(y||"").replace("TitlePaneTitle",""));this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(p){p.keyCode==x.DOWN_ARROW&&this.open&&(this.containerNode.focus(),p.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},
setTitle:function(p){l.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.","","2.0");this.set("title",p)}});d("dojo-bidi")&&e.extend({_setTitleAttr:function(p){this._set("title",p);this.titleNode.innerHTML=p;this.applyTextDir(this.titleNode)},_setTooltipAttr:function(p){this._set("tooltip",p);this.textDir&&(p=this.enforceTextDirWithUcc(null,p));h.set(this.focusNode,"title",p)},_setTextDirAttr:function(p){this._created&&this.textDir!=p&&(this._set("textDir",p),this.set("title",
this.title),this.set("tooltip",this.tooltip))}});return e})},"widgets/DistanceAndDirection/views/TabEllipse":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/on dojo/topic dojo/has dojo/touch dojo/dom-attr dojo/dom-class dojo/string dojo/number dojo/mouse dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/TooltipDialog dijit/_WidgetsInTemplateMixin dijit/popup jimu/dijit/Message jimu/LayerInfos/LayerInfos jimu/utils esri/layers/GraphicsLayer esri/layers/FeatureLayer esri/layers/LabelClass esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleFillSymbol esri/symbols/TextSymbol esri/graphic esri/tasks/FeatureSet ../models/EllipseFeedback ../views/CoordinateInput ../views/EditOutputCoordinate dojo/text!../templates/TabEllipse.html dijit/focus dojo/_base/event dojo/aspect dijit/form/NumberTextBox jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),
function(P,e,E,h,b,q,k,d,l,x,C,c,a,r,m,p,y,f,I,J,B,N,R,O,S,T,Q,t,n,w,K,M,v,u,F,H){return P([r,m,y],{templateString:v,baseClass:"jimu-widget-TabEllipse",centerPointGraphic:null,_restrictFocusOnAddCenterPointBtn:!1,_centerPointInputKeyPressed:!1,constructor:function(z){P.safeMixin(this,z)},postCreate:function(){this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!1;this.currentAngleUnit=this.angleUnitDD.get("value");this.currentLengthUnit=this.lengthUnitDD.get("value");this._labelSym=
new Q(this.labelSymbol);this._ptSym=new S(this.pointSymbol);this._ellipseSym=new T(this.ellipseSymbol);this._textGL=new N;this.map.addLayer(this._textGL);this.map.addLayer(this.getLayer());if(this._gl.loaded){var z=J.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Ellipse Graphics");z.showLabels();z.enablePopup()}else this._gl.on("load",e.hitch(this,function(){var G=J.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Ellipse Graphics");G.showLabels();G.enablePopup()}));this.coordTool=
new K({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.centerPointLabel},this.startPointCoords);this.coordTool.inputCoordinate.formatType="DD";this.coordinateFormat=new p({content:new M({nls:this.nls}),style:"width: 400px"});H.after(this.coordinateFormat,"onClose",e.hitch(this,function(){u.focus(this.coordinateFormatButton);if(this._restrictFocusOnAddCenterPointBtn){var G=this.coordTool.getValue();if(""===G||null===G||void 0===G)this._restrictFocusOnAddCenterPointBtn=!1}}));"DartTheme"===
this.appConfig.theme.name&&l.add(this.coordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.dt=new w({appConfig:this.appConfig,map:this.map,coordTool:this.coordTool.inputCoordinate.util,nls:this.nls,parentWidget:this});this.dt.setLineSymbol(this._ellipseSym);this.dt.set("lengthUnit","kilometers");this.dt.set("angle",0);this.dt.set("ellipseType","semi");this.syncEvents();this.checkValidInputs();this.majorAxisInput.invalidMessage=this.nls.numericInvalidMessage;this.majorAxisInput.rangeMessage=
this.nls.axisErrorMessage;this.minorAxisInput.invalidMessage=this.nls.numericInvalidMessage;this.minorAxisInput.rangeMessage=this.nls.axisErrorMessage;this.angleInput.invalidMessage=this.nls.numericInvalidMessage;this.angleInput.rangeMessage=this.nls.orientationErrorMessage},getLayer:function(){if(!this._gl){var z=[],G={labelExpressionInfo:{value:this.nls.ellipseMajorAxis+" {MAJOR}"}};G=new O(G);G.labelPlacement="above-along";G.symbol=e.clone(this._labelSym).setOffset(0,20);z.push(G);G={labelExpressionInfo:{value:this.nls.ellipseMinorAxis+
" {MINOR}"}};G=new O(G);G.labelPlacement="center-along";G.symbol=this._labelSym;z.push(G);G={labelExpressionInfo:{value:this.nls.angleLabel+": {ORIENTATION_ANGLE}"}};G=new O(G);G.labelPlacement="below-along";G.symbol=e.clone(this._labelSym).setOffset(0,-20);z.push(G);z={layerDefinition:{extent:{xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:{wkid:102100,latestWkid:102100}},geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},
{name:"MAJOR",type:"esriFieldTypeText",alias:"Major Axis"},{name:"MINOR",type:"esriFieldTypeText",alias:"Minor Axis"},{name:"ORIENTATION_ANGLE",type:"esriFieldTypeText",alias:"Orientation Angle"}]},featureSet:new n};this._gl=new R(z,{id:"Distance \x26 Direction - Ellipse Graphics",showLabels:!0});this.own(h(this._gl,"visibility-change",e.hitch(this,function(U){this._textGL.setVisibility(U.visible)})));return this._gl}},syncEvents:function(){b.subscribe("TAB_SWITCHED",e.hitch(this,this.tabSwitched));
b.subscribe("DD-WIDGET-CLOSED",e.hitch(this,this._closeDijit));b.subscribe(w.DD_ELLIPSE_MINOR_LENGTH_CHANGE,e.hitch(this,this.minorLengthDidChange));b.subscribe(w.DD_ELLIPSE_MAJOR_LENGTH_CHANGE,e.hitch(this,this.majorLengthDidChange));b.subscribe(w.DD_ELLIPSE_ANGLE_CHANGE,e.hitch(this,this.angleDidChange));this.dt.watch("startPoint",e.hitch(this,function(z,G,U){this.dt.addStartGraphic(U,this._ptSym)}));this.dt.watch("startPointDD",e.hitch(this,function(z,G,U){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",
U)}));this.coordTool.inputCoordinate.watch("outputString",e.hitch(this,function(z,G,U){this.coordTool.manualInput||(this.coordTool.set("value",U),this.currentEllipse=null,this._restrictFocusOnAddCenterPointBtn?this._restrictFocusOnAddCenterPointBtn=!1:this._centerPointInputKeyPressed?this._centerPointInputKeyPressed=!1:u.focus(this.addPointBtn))}));this.own(this.dt.on("draw-complete",e.hitch(this,this.feedbackDidComplete)),this.ellipseType.on("change",e.hitch(this,this.ellipseTypeDDDidChange)),this.angleUnitDD.on("change",
e.hitch(this,this.angleUnitDDDidChange)),this.lengthUnitDD.on("change",e.hitch(this,this.lengthUnitDDDidChange)),h(this.coordinateFormatButton,"click",e.hitch(this,this.coordinateFormatButtonWasClicked)),h(this.coordinateFormatButton,"keydown",e.hitch(this,function(z){if(z.keyCode===a.ENTER||z.keyCode===a.SPACE)F.stop(z),this.coordinateFormatButtonWasClicked()})),h(this.coordinateFormat.content.applyButton,"click",e.hitch(this,function(){this._restrictFocusOnAddCenterPointBtn=!0;var z=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],
G=z.defaultFormat,U=this.coordinateFormat.content.frmtSelect.get("value");z.useCustom&&(G=z.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",G);this.coordTool.inputCoordinate.set("formatType",U);this.setCoordLabel(U);f.close(this.coordinateFormat);u.focus(this.coordinateFormatButton)})),h(this.coordinateFormat.content.applyButton,"keydown",e.hitch(this,function(z){if(z.keyCode===a.ENTER||
z.keyCode===a.SPACE){F.stop(z);this._restrictFocusOnAddCenterPointBtn=!0;var G=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],U=G.defaultFormat,D=this.coordinateFormat.content.frmtSelect.get("value");G.useCustom&&(U=G.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",U);this.coordTool.inputCoordinate.set("formatType",D);this.setCoordLabel(D);f.close(this.coordinateFormat);
u.focus(this.coordinateFormatButton)}z.keyCode===a.ESCAPE&&(F.stop(z),f.close(this.coordinateFormat),u.focus(this.coordinateFormatButton))})),h(this.addPointBtn,"keydown",e.hitch(this,function(z){if(z.keyCode===a.ENTER||z.keyCode===a.SPACE)F.stop(z),this.pointButtonWasClicked()})),h(this.interactiveEllipse,"change",e.hitch(this,this.interactiveCheckBoxChanged)),h(this.interactiveEllipse,"keydown",e.hitch(this,function(z){z.keyCode===a.ENTER&&(this.interactiveEllipse.checked=this.interactiveEllipse.checked?
!1:!0,this.interactiveCheckBoxChanged())})),h(this.coordTool,"keydown",e.hitch(this,this.coordToolKeyWasPressed)),h(this.majorAxisInput,"change",e.hitch(this,function(){this.currentEllipse=null})),h(this.minorAxisInput,"change",e.hitch(this,function(){this.currentEllipse=null})),h(this.angleInput,"change",e.hitch(this,this.angleDidChange)),h(this.coordinateFormat.content.cancelButton,"click",e.hitch(this,function(){f.close(this.coordinateFormat)})),h(this.coordinateFormat.content.cancelButton,"keydown",
e.hitch(this,function(z){if(z.keyCode===a.ENTER||z.keyCode===a.SPACE)F.stop(z),f.close(this.coordinateFormat),u.focus(this.coordinateFormatButton);z.keyCode===a.ESCAPE&&(F.stop(z),f.close(this.coordinateFormat),u.focus(this.coordinateFormatButton))})),h(this.clearGraphicsButton,"click",e.hitch(this,this.clearGraphics)),h(this.clearGraphicsButton,"keydown",e.hitch(this,function(z){if(z.keyCode===a.ENTER||z.keyCode===a.SPACE)F.stop(z),this.clearGraphics()})),h(this.majorAxisInputDiv,c.leave,e.hitch(this,
this.checkValidInputs)),h(this.minorAxisInputDiv,c.leave,e.hitch(this,this.checkValidInputs)),h(this.coordinateFormat.content.frmtSelect,"keydown",e.hitch(this,function(z){z.keyCode===a.ESCAPE&&(F.stop(z),f.close(this.coordinateFormat),u.focus(this.coordinateFormatButton))})),h(this.coordinateFormat.content.frmtVal,"keydown",e.hitch(this,function(z){z.keyCode===a.ESCAPE&&(F.stop(z),f.close(this.coordinateFormat),u.focus(this.coordinateFormatButton))})),h(this.coordinateFormat.content.addSignChkBox,
"keydown",e.hitch(this,function(z){z.keyCode===a.ESCAPE&&(F.stop(z),f.close(this.coordinateFormat),u.focus(this.coordinateFormatButton));z.keyCode===a.ENTER&&(F.stop(z),this.coordinateFormat.content.addSignChkBox.checked=this.coordinateFormat.content.addSignChkBox.checked?!1:!0)})),h(this.angleInputDiv,c.leave,e.hitch(this,this.checkValidInputs)),h(this.okButton,"keydown",e.hitch(this,function(z){if(z.keyCode===a.ENTER||z.keyCode===a.SPACE)F.stop(z),this.okButtonClicked()})));q("esri-touch")?this.own(h(this.addPointBtn,
k.press,e.hitch(this,this.pointButtonWasClicked))):this.own(h(this.addPointBtn,"click",e.hitch(this,this.pointButtonWasClicked)))},okButtonClicked:function(){l.contains(this.okButton,"jimu-state-disabled")||(this._restrictFocusOnAddCenterPointBtn=!0,this.currentEllipse||("full"===d.get(this.ellipseType,"value")?b.publish("create-manual-ellipse",this.majorAxisInput.get("value")/2,this.minorAxisInput.get("value")/2,this.angleInput.get("value"),this.coordTool.inputCoordinate.coordinateEsriGeometry):
b.publish("create-manual-ellipse",this.majorAxisInput.get("value"),this.minorAxisInput.get("value"),this.angleInput.get("value"),this.coordTool.inputCoordinate.coordinateEsriGeometry)),this.emit("show-publish",this._gl))},majorLengthDidChange:function(z){"full"===d.get(this.ellipseType,"value")&&(z*=2);var G=C.format(z,{places:2,locale:E.locale});this.majorAxisInput.set("value",z);this.majorAxisInput.set("displayedValue",G)},minorLengthDidChange:function(z){"full"===d.get(this.ellipseType,"value")&&
(z*=2);var G=C.format(z,{places:2,locale:E.locale});this.minorAxisInput.set("value",z);this.minorAxisInput.set("displayedValue",G)},angleDidChange:function(z){var G=C.format(z,{places:2,locale:E.locale});this.angleInput.set("value",z);this.angleInput.set("displayedValue",G);this.dt.set("angle",z);this.currentEllipse=null},interactiveCheckBoxChanged:function(){this.tabSwitched();this.interactiveEllipse.checked?(this.majorAxisInput.set("disabled",!0),this.minorAxisInput.set("disabled",!0),this.angleInput.set("disabled",
!0)):(this.majorAxisInput.set("disabled",!1),this.minorAxisInput.set("disabled",!1),this.angleInput.set("disabled",!1));this.checkValidInputs()},coordToolKeyWasPressed:function(z){this.dt.removeStartGraphic();z.keyCode===a.ENTER&&(this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!0,this.currentEllipse=null,this.coordTool.inputCoordinate.getInputType().then(e.hitch(this,function(G){"UNKNOWN"===G.inputType?(new I({message:this.nls.invalidCoordinateTypeMessage}),this.coordTool.inputCoordinate.coordinateEsriGeometry=
null):this.dt.getProjectedGeometry(G.coordinateEsriGeometry,this.map.spatialReference).then(e.hitch(this,e.hitch(this,function(U){b.publish("manual-ellipse-center-point-input",U);this.setCoordLabel(G.inputType);this.coordTool.inputCoordinate.set("formatString",this.coordinateFormat.content.formats[G.inputType].defaultFormat);this.coordTool.inputCoordinate.set("formatType",G.inputType);this.dt.addStartGraphic(U,this._ptSym)})));this.checkValidInputs()})))},coordinateFormatButtonWasClicked:function(){this.coordinateFormat.content.set("ct",
this.coordTool.inputCoordinate.formatType);f.open({popup:this.coordinateFormat,around:this.coordinateFormatButton});u.focus(this.coordinateFormat.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormat&&this.coordinateFormat.domNode.offsetParent&&f.close(this.coordinateFormat)},pointButtonWasClicked:function(){l.contains(this.addPointBtn,"drawPointBtn-active")?(this.dt.deactivate(),this._setMapNavigation(!0)):(this.coordTool.manualInput=!1,b.publish("clear-points"),this._setMapNavigation(!1),
this.interactiveEllipse.checked?this.dt.activate("polyline"):this.dt.activate("point"));l.toggle(this.addPointBtn,"drawPointBtn-active")},lengthUnitDDDidChange:function(){this.currentLengthUnit=this.lengthUnitDD.get("value");this.dt.set("lengthUnit",this.currentLengthUnit);this.currentEllipse=null},ellipseTypeDDDidChange:function(){var z="full"===d.get(this.ellipseType,"value")?this.nls.majorDiameterLabel:this.nls.majorRadiusLabel;var G="full"===d.get(this.ellipseType,"value")?this.nls.minorDiameterLabel:
this.nls.minorRadiusLabel;this.majorAxisLabel.textContent="full"===d.get(this.ellipseType,"value")?this.nls.majorDiameterLabel:this.nls.majorRadiusLabel;this.minorAxisLabel.textContent="full"===d.get(this.ellipseType,"value")?this.nls.minorDiameterLabel:this.nls.minorRadiusLabel;d.set(this.majorAxisInput,"aria-label",z);d.set(this.minorAxisInput,"aria-label",G)},angleUnitDDDidChange:function(){this.currentAngleUnit=this.angleUnitDD.get("value");this.dt.set("angleUnit",this.currentAngleUnit);"degrees"===
this.currentAngleUnit?(this.angleInput.constraints.max=360,this.angleInput.rangeMessage=this.nls.degreesRangeMessage):(this.angleInput.constraints.max=6400,this.angleInput.rangeMessage=this.nls.millsRangeMessage);this.currentEllipse=null},feedbackDidComplete:function(z){if("polygon"===z.geometry.type){this.currentEllipse=new t(z.geometry.geometry,this._ellipseSym);var G=this.majorAxisLabel.textContent.split(" ")[1];var U="semi"===this.ellipseType.get("value")?2*parseFloat(this.majorAxisInput.value):
parseFloat(this.majorAxisInput.value);var D="semi"===this.ellipseType.get("value")?2*parseFloat(this.minorAxisInput.value):parseFloat(this.minorAxisInput.value);this.currentEllipse.setAttributes({MINOR:G+": "+this.minorAxisInput.get("displayedValue")+" "+this.lengthUnitDD.get("displayedValue"),MAJOR:G+": "+this.majorAxisInput.get("displayedValue")+" "+dijit.byId("lengthUnitDD").get("displayedValue"),ORIENTATION_ANGLE:this.angleInput.get("displayedValue")+" "+this.angleUnitDD.get("displayedValue"),
CenterPoint:this.coordTool.get("value"),MajorAxis:U,MinorAxis:D,Unit:this.currentLengthUnit,Orientation:parseFloat(this.angleInput.get("value")),OrientationUnit:this.currentAngleUnit});this._gl.add(this.currentEllipse);z=z.geometry.geometry.getCentroid();G=window.isRTL?this.minorAxisInput.get("displayedValue")+" "+this._getLengthAbbrevation(this.lengthUnitDD.get("value"))+" "+this.nls.minorRadiusLabel:this.minorAxisLabel.textContent+" "+this.minorAxisInput.get("displayedValue")+" "+this._getLengthAbbrevation(this.lengthUnitDD.get("value"));
this._textGL.add(new t(z,e.clone(this._labelSym).setOffset(0,20).setText(G)));G=window.isRTL?this.majorAxisInput.get("displayedValue")+" "+this._getLengthAbbrevation(dijit.byId("lengthUnitDD").get("value"))+" "+this.nls.majorRadiusLabel:this.majorAxisLabel.textContent+" "+this.majorAxisInput.get("displayedValue")+" "+this._getLengthAbbrevation(dijit.byId("lengthUnitDD").get("value"));this._textGL.add(new t(z,e.clone(this._labelSym).setText(G)));G=window.isRTL?this.angleInput.get("displayedValue")+
" "+this._getDegreeAbbreviation(this.angleUnitDD.get("value"))+" "+this.nls.angleLabel:this.nls.angleLabel+" "+this.angleInput.get("displayedValue")+" "+this._getDegreeAbbreviation(this.angleUnitDD.get("value"));this._textGL.add(new t(z,e.clone(this._labelSym).setOffset(0,-20).setText(G)));this._gl.refresh();this.map.setExtent(this.currentEllipse.geometry.getExtent().expand(3))}this.checkValidInputs();this._setMapNavigation(!0);this.dt.deactivate();l.remove(this.addPointBtn,"drawPointBtn-active");
this._restrictFocusOnAddCenterPointBtn?this._restrictFocusOnAddCenterPointBtn=!1:u.focus(this.addPointBtn)},clearGraphics:function(){this._gl&&(this._gl.clear(),this.coordTool.clear(),this._textGL.clear());this.tabSwitched();l.remove(this.addPointBtn,"drawPointBtn-active");this.currentEllipse=null;this.checkValidInputs();for(var z=0;z<this.map.graphicsLayerIds.length;z++)this.map.getLayer(this.map.graphicsLayerIds[z]).refresh()},setGraphicsHidden:function(){this._gl&&this._gl.hide()},setGraphicsShown:function(){this._gl&&
this._gl.show()},createCenterPointGraphic:function(){null!==this.centerPointGraphic&&this._gl.remove(this.centerPointGraphic);var z=this.coordTool.inputCoordinate.coordinateEsriGeometry;z&&(this.centerPointGraphic=new t(z,new S),this._gl.add(this.centerPointGraphic))},removeCenterPointGraphic:function(){this.centerPointGraphic&&this._gl.remove(this.centerPointGraphic)},setCoordLabel:function(z){z=B.sanitizeHTML(x.substitute(this.nls.centerPointLabel+" (${crdType})",{crdType:z}));this.coordInputLabel.innerHTML=
z;d.set(this.coordTool.textbox,"aria-label",z)},checkValidInputs:function(){l.add(this.okButton,"jimu-state-disabled");d.set(this.okButton,"tabindex",-1);null!==this.coordTool.inputCoordinate.coordinateEsriGeometry&&this.majorAxisInput.isValid()&&this.minorAxisInput.isValid()&&this.angleInput.isValid()&&(l.remove(this.okButton,"jimu-state-disabled"),d.set(this.okButton,"tabindex",0));this.okButton.innerHTML=this.interactiveEllipse.checked?this.nls.publishDDBtn:this.nls.common.ok},tabSwitched:function(){this.dt.deactivate();
this.dt.cleanup();this.dt.disconnectOnMouseMoveHandler();this._setMapNavigation(!0);this.dt.removeStartGraphic();this.addPointBtn&&l.remove(this.addPointBtn,"drawPointBtn-active");f.close(this.coordinateFormat)},_setMapNavigation:function(z){z?this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(z){var G=null;if(z)switch(z){case "feet":G=this.nls.abbrevFeetLabel;break;case "kilometers":G=this.nls.abbrevKmLabel;break;case "miles":G=
this.nls.abbrevMilesLabel;break;case "meters":G=this.nls.abbrevMetersLabel;break;case "nautical-miles":G=this.nls.abbrevNauticalMilesLabel;break;case "yards":G=this.nls.abbrevYardsLabel;break;default:G=z}return G},_getDegreeAbbreviation:function(z){var G=null;if(z)switch(z){case "degrees":G=this.nls.abbrevDegreesLabel;break;case "mils":G=this.nls.abbrevMilsLabel;break;default:G=z}return G},setFirstFocusNode:function(){B.initFirstFocusNode(this.domNodeObj,this.ellipseType.domNode)},focusFirstNodeOfSelectedTab:function(){u.focus(this.ellipseType.focusNode)},
setLastFocusNode:function(){B.initLastFocusNode(this.domNodeObj,this.clearGraphicsButton)}})})},"widgets/DistanceAndDirection/models/EllipseFeedback":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/topic esri/graphic esri/toolbars/draw esri/geometry/Point esri/geometry/Polyline esri/geometry/Polygon esri/geometry/Circle esri/geometry/geometryEngine esri/geometry/webMercatorUtils esri/geometry/geodesicUtils esri/SpatialReference esri/units jimu/utils ./Feedback dojo/has dojo/touch dojo/on".split(" "),
function(P,e,E,h,b,q,k,d,l,x,C,c,a,r,m,p,y,f,I,J){y=P([y],{orientationAngle:0,majorAxisLength:[],minorAxisLength:[],signal:null,constructor:function(B){P.safeMixin(this,B);this.initGeometryService();this.syncEvents();this._majGraphic=new b;this._majGraphicB=new b;this._minGraphic=new b;this._minGraphicB=new b},syncEvents:function(){h.subscribe("create-manual-ellipse",E.hitch(this,this.onCreateManualEllipse));h.subscribe("manual-ellipse-center-point-input",E.hitch(this,this.onCenterPointManualInputHandler));
h.subscribe("clear-points",E.hitch(this,this.clearPoints))},clearPoints:function(){this._points=[];this.map.graphics.clear()},onCreateManualEllipse:function(B,N,R,O){this._points=[];this._points.push(O);this.majorAxisLength=B=this.coordTool.convertToMeters(B,this.lengthUnit);B=this.getEndPoint(O,0,B);this._points.push(B);B=new d({paths:[[[O.x,O.y],[B.x,B.y]]],spatialReference:O.spatialReference});this._majGraphic=new b(B,this.lineSymbol);this._majGraphicB=new b(B,this.lineSymbol);this._majGraphicB.geometry=
C.rotate(B,180,O);this.minorAxisLength=B=this.coordTool.convertToMeters(N,this.lengthUnit);B=this.getEndPoint(O,90,B);this._points.push(B);N=new d({paths:[[[O.x,O.y],[B.x,B.y]]],spatialReference:this.map.spatialReference});this._minGraphic=new b(N,this.lineSymbol);this._minGraphicB=new b(N,this.lineSymbol);this._minGraphicB.geometry=C.rotate(N,180,O);this.orientationAngle=Number(R);this._onDoubleClickHandler()},onCenterPointManualInputHandler:function(B){this._points=[];this._points.push(B.offset(0,
0));this.set("startPoint",this._points[0]);this.map.centerAt(B)},getEndPoint:function(B,N,R){N=N?N:0;R=new x(B,{radius:R,geodesic:!0,numberOfPoints:60});return C.rotate(R,N,B).getPoint(0,0)},_onClickHandler:function(B){if(this.map.snappingManager)var N=this.map.snappingManager._snappingPoint;var R=N||B.mapPoint;this._points.push(R.offset(0,0));this._processAfterMapClick(R).then(E.hitch(this,function(O){switch(this._geometryType){case q.POINT:this.set("startPoint",R.offset(0,0));this.set("startPointDD",
O);this._drawEnd(R.offset(0,0));this._setTooltipMessage(0);break;case q.POLYLINE:switch(this._points.length){case 1:this.set("startPoint",this._points[0]);this.set("startPointDD",O);O=new d({paths:[[[R.x,R.y],[R.x,R.y]]],spatialReference:this.map.spatialReference});var S=new d({paths:[[[R.x,R.y],[R.x,R.y]]],spatialReference:this.map.spatialReference});this._majGraphic=new b(O,this.lineSymbol);this._majGraphicB=new b(O,this.lineSymbol);this._minGraphic=new b(S,this.lineSymbol);this._minGraphicB=new b(S,
this.lineSymbol);this.map.graphics.add(this._majGraphic);this.map.graphics.add(this._majGraphicB);this.map.graphics.add(this._minGraphic);this.map.graphics.add(this._minGraphicB);f("esri-touch")&&this.parentWidget.own(J(this.map.root,I.move,E.hitch(this,this._onMouseMoveHandler)));this._onMouseMoveHandlerConnect=e.connect(this.map,"onMouseMove",this._onMouseMoveHandler);this._onDoubleClickHandler_connect=e.connect(this.map,"onDblClick",E.hitch(this,this._onDoubleClickHandler));if(O=this._tooltip)O.innerHTML=
p.sanitizeHTML(this.nls.majorAxisTooltipMessage);break;case 2:this._setMajorAxisInfo();this._tooltip&&(this._tooltip.innerHTML=p.sanitizeHTML(this.nls.minorAxisTooltipMessage));break;case 3:this._setMinorAxisInfo(),this._onDoubleClickHandler()}}}),function(O){console.log(O)})},_setMajorAxisInfo:function(){this.getProjectedGeometry(this._majGraphic.geometry,new r(4326)).then(E.hitch(this,E.hitch(this,function(N){this.majorAxisLength=C.geodesicLength(N,9001);N=this.coordTool.convertMetersToUnits(this.majorAxisLength,
this.lengthUnit);h.publish("DD_ELLIPSE_MAJOR_LENGTH_CHANGE",N)})));var B=this.getAngle(c.webMercatorToGeographic(this._points[0]),c.webMercatorToGeographic(this._majGraphic.geometry.getPoint(0,1)));"mils"===this.angleUnit&&(B*=17.777777778);h.publish("DD_ELLIPSE_ANGLE_CHANGE",B)},_setMinorAxisInfo:function(){var B=E.clone(this._minGraphic.geometry),N=c.webMercatorToGeographic(this._minGraphic.geometry);this.minorAxisLength=a.geodesicLengths([N],m.METERS);N=this.coordTool.convertMetersToUnits(this.minorAxisLength[0],
this.lengthUnit);this.minorAxisLength[0]>this.majorAxisLength||0===this.minorAxisLength[0]?this._minGraphic.setGeometry(B):h.publish("DD_ELLIPSE_MINOR_LENGTH_CHANGE",N)},_onMouseMoveHandler:function(B){if(this.map.snappingManager)var N=this.map.snappingManager._snappingPoint;B=N||B.mapPoint;1===this._points.length?(this._majGraphic.geometry.setPoint(0,1,B),this._majGraphicB.geometry=C.rotate(this._majGraphic.geometry,180,this._points[0]),this._majGraphic.setGeometry(this._majGraphic.geometry).setSymbol(this.lineSymbol),
this._majGraphicB.setGeometry(this._majGraphicB.geometry).setSymbol(this.lineSymbol),this.canProjectLocally&&this._setMajorAxisInfo()):null!==this._minGraphic&&(B=C.nearestCoordinate(this._majGraphic.geometry,B),B=new k(B.coordinate.x,B.coordinate.y,102100),this._minGraphic.geometry.setPoint(0,1,B),this._minGraphicB.geometry.setPoint(0,1,B),this._minGraphic.geometry=C.rotate(this._minGraphic.geometry,-90,this._points[0]),this._minGraphicB.geometry=C.rotate(this._minGraphicB.geometry,90,this._points[0]),
this._minGraphic.setGeometry(this._minGraphic.geometry).setSymbol(this.lineSymbol),this._minGraphicB.setGeometry(this._minGraphicB.geometry).setSymbol(this.lineSymbol),this.canProjectLocally&&this._setMinorAxisInfo())},getLineLength:function(B,N,R,O){return Math.sqrt((B-=R)*B+(N-=O)*N)},getAngle:function(B,N){return(180*Math.atan2(N.x-B.x,N.y-B.y)/Math.PI+360)%360},convertAngle:function(B){return 0<=B&&90>B||180<=B&&270>B?90-B:90<=B&&180>B||270<=B&&360>B?180-B+270:B},_onDoubleClickHandler:function(){if(3<=
this._points.length){var B=new l(this._points[0].spatialReference),N=[];N.push(this._majGraphic.geometry.getPoint(0,0));N.push(this._majGraphic.geometry.getPoint(0,1));N.push(this._minGraphic.geometry.getPoint(0,1));this.geomService.project(N,this.map.spatialReference,E.hitch(this,function(R){var O=this.map.toScreen(R[0]),S=this.map.toScreen(R[1]),T=this.map.toScreen(R[2]);S=this.getLineLength(O.x,O.y,S.x,S.y);T=this.getLineLength(O.x,O.y,T.x,T.y);O=l.createEllipse({center:O,longAxis:S,shortAxis:T,
numberOfPoints:60,map:this.map});this.orientationAngle=this.angle;"mils"===this.angleUnit&&(this.orientationAngle/=17.777777778);B.geometry=C.rotate(O,this.convertAngle(this.orientationAngle),R[0]);B=E.mixin(B,{majorAxisLength:this.coordTool.convertMetersToUnits(this.majorAxisLength,this.lengthUnit),minorAxisLength:this.coordTool.convertMetersToUnits(this.minorAxisLength,this.lengthUnit),angle:this.angle,drawType:"ellipse",center:this._points[0]});this.disconnectOnMouseMoveHandler();this._setTooltipMessage(0);
this._drawEnd(B);this.cleanup();this.orientationAngle=0}))}},cleanup:function(){this.map.graphics.clear();this._minGraphic=this._majGraphic=null;this.majorAxisLength=[];this.minorAxisLength=[]},disconnectOnMouseMoveHandler:function(){this._onMouseMoveHandlerConnect&&e.disconnect(this._onMouseMoveHandlerConnect)}});y.DD_ELLIPSE_MAJOR_LENGTH_CHANGE="DD_ELLIPSE_MAJOR_LENGTH_CHANGE";y.DD_ELLIPSE_MINOR_LENGTH_CHANGE="DD_ELLIPSE_MINOR_LENGTH_CHANGE";y.DD_ELLIPSE_ANGLE_CHANGE="DD_ELLIPSE_ANGLE_CHANGE";return y})},
"widgets/DistanceAndDirection/views/TabRange":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/dom-construct dojo/on dojo/dom-class dojo/topic dojo/has dojo/touch dojo/string dojo/mouse dojo/keys dojo/number dojo/dom-attr dijit/registry dijit/_WidgetBase dijit/_TemplatedMixin dijit/TooltipDialog dijit/popup dijit/form/NumberTextBox jimu/dijit/Message jimu/dijit/SimpleTable jimu/LayerInfos/LayerInfos jimu/utils dijit/_WidgetsInTemplateMixin dojo/text!../templates/TabRange.html esri/geometry/Circle esri/geometry/Polyline esri/geometry/Point esri/geometry/geometryEngine esri/graphic esri/layers/GraphicsLayer esri/layers/FeatureLayer esri/layers/LabelClass esri/tasks/FeatureSet esri/symbols/TextSymbol esri/symbols/SimpleFillSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleMarkerSymbol ../views/CoordinateInput ../views/EditOutputCoordinate ../models/RangeRingFeedback dijit/focus dojo/_base/event dojo/aspect dojo/DeferredList jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),
function(P,e,E,h,b,q,k,d,l,x,C,c,a,r,m,p,y,f,I,J,B,N,R,O,S,T,Q,t,n,w,K,M,v,u,F,H,z,G,U,D,g,L,W,X,ba,ea,da){return P([y,f,T],{templateString:Q,baseClass:"jimu-widget-TabRange",startPoint:null,firstDistance:!0,_restrictFocusOnAddCenterPointBtn:!1,_centerPointInputKeyPressed:!1,_setStartPointAttr:function(){this._set("startPoint")},_getStartPointAttr:function(){return this.startPoint},constructor:function(A){P.safeMixin(this,A)},postCreate:function(){this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=
!1;this._ptSym=new D(this.pointSymbol);this._circleSym=new G(this.circleSymbol);this._lineSym=new U(this.lineSymbol);this._labelSym=new z(this.labelSymbol);this._tsGL=new v;this.map.addLayer(this._tsGL);this.map.addLayer(this.getLayer());this._initDistanceTable();if(this._gl.loaded){var A=O.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Range Graphics");A.showLabels();A.enablePopup()}else this._gl.on("load",e.hitch(this,function(){var V=O.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Range Graphics");
V.showLabels();V.enablePopup()}));this.coordTool=new g({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.centerPointLabel},this.rangeCenter);this.coordTool.inputCoordinate.formatType="DD";this.coordinateFormat=new I({content:new L({nls:this.nls}),style:"width: 400px"});ea.after(this.coordinateFormat,"onClose",e.hitch(this,function(){X.focus(this.coordinateFormatButton);if(this._restrictFocusOnAddCenterPointBtn){var V=this.coordTool.getValue();if(""===V||null===V||void 0===V)this._restrictFocusOnAddCenterPointBtn=
!1}}));"DartTheme"===this.appConfig.theme.name&&k.add(this.coordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.dt=new W({appConfig:this.appConfig,map:this.map,coordTool:this.coordTool.inputCoordinate.util,nls:this.nls,parentWidget:this});this.dt.setFillSymbol(this._circleSym);this.dt.set("lengthLayer",this._lengthLayer);this.syncEvents();this._distanceTable.addRow({});this.checkValidInputs();this.numRingsInput.invalidMessage=this.nls.ringsErrorMessage;this.numRingsInput.rangeMessage=
this.nls.ringsErrorMessage;this.numRadialsInput.invalidMessage=this.nls.radialsInvalidMessage;this.numRadialsInput.rangeMessage=this.nls.radialsErrorMessage},_initDistanceTable:function(){var A=[{name:"Value",title:this.nls.valueLabel,type:"extension","class":"label",create:e.hitch(this,this._createValueField),getValue:e.hitch(this,this._getValueFieldValue)},{name:"actions",title:this.nls.actionLabel,width:"65px",type:"actions",actions:["up","down","delete"],"class":"label"}];this._distanceTable=
new R({fields:A,autoHeight:!0});this._distanceTable.placeAt(this.distanceTable);this._distanceTable.startup()},_createValueField:function(A){var V=new B({style:"height: 24px;",id:p.getUniqueId("ntb"),required:"true",placeHolder:this.nls.valueText,invalidMessage:this.nls.numericInvalidMessage,value:this.firstDistance?"":0,constraints:{places:2},"class":"numberTextBox","aria-label":this.nls.valueLabel});b.place(V.domNode,A);this.own(q(V,"focus",e.hitch(this,function(){0===V.get("value")&&V.set("value",
"")})),q(V,"blur",e.hitch(this,function(){var Y=this._distanceTable.getRows();E.forEach(Y,e.hitch(this,function(Z){!this._distanceTable.getRowData(Z).Value.valid&&1<Y.length&&this._distanceTable.deleteRow(Z)}))})));V.focus();this.firstDistance=!1},_getValueFieldValue:function(A){A=p.byNode(A.childNodes[0]);return{value:A.get("value"),valid:A.isValid()}},getLayer:function(){if(!this._gl){var A=new F({labelExpressionInfo:{value:"{Interval}"}});A.labelPlacement="center-end";A.symbol=this._labelSym;A=
{layerDefinition:{geometryType:"esriGeometryPolyline",extent:{xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:{wkid:102100,latestWkid:102100}},objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"Interval",type:"esriFieldTypeString",alias:"Interval"}]},featureSet:new H};this._gl=new u(A,{id:"Distance \x26 Direction - Range Graphics",showLabels:!0});this.own(q(this._gl,"visibility-change",e.hitch(this,function(V){this._tsGL.setVisibility(V.visible)})))}return this._gl},
syncEvents:function(){d.subscribe("TAB_SWITCHED",e.hitch(this,this.tabSwitched));d.subscribe("DD-WIDGET-CLOSED",e.hitch(this,this._closeDijit));this.dt.watch("startPoint",e.hitch(this,function(A,V,Y){this.dt.addStartGraphic(Y,this._ptSym)}));this.dt.watch("startPointDD",e.hitch(this,function(A,V,Y){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",Y)}));this.coordTool.inputCoordinate.watch("outputString",e.hitch(this,function(A,V,Y){this.coordTool.manualInput||(this.coordTool.set("value",
Y),this.currentRing=null,this._restrictFocusOnAddCenterPointBtn?this._restrictFocusOnAddCenterPointBtn=!1:this._centerPointInputKeyPressed?this._centerPointInputKeyPressed=!1:X.focus(this.addPointBtn))}));this.own(q(this.coordTool,"keydown",e.hitch(this,this.coordToolKeyWasPressed)),this.dt.on("draw-complete",e.hitch(this,this.feedbackDidComplete)),q(this.rangeType,"change",e.hitch(this,this.rangeTypeDropDownChanged)),q(this.ringIntervalUnitsDD,"change",e.hitch(this,this.ringIntervalUnitsDidChange)),
q(this.coordinateFormatButton,"click",e.hitch(this,this.coordinateFormatButtonWasClicked)),q(this.coordinateFormatButton,"keydown",e.hitch(this,function(A){if(A.keyCode===a.ENTER||A.keyCode===a.SPACE)ba.stop(A),this.coordinateFormatButtonWasClicked()})),q(this.addPointBtn,"keydown",e.hitch(this,function(A){if(A.keyCode===a.ENTER||A.keyCode===a.SPACE)ba.stop(A),this.pointButtonWasClicked()})),q(this.coordinateFormat.content.applyButton,"click",e.hitch(this,function(){this._restrictFocusOnAddCenterPointBtn=
!0;var A=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],V=A.defaultFormat,Y=this.coordinateFormat.content.frmtSelect.get("value");A.useCustom&&(V=A.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",V);this.coordTool.inputCoordinate.set("formatType",Y);this.setCoordLabel(Y);J.close(this.coordinateFormat);X.focus(this.coordinateFormatButton)})),q(this.coordinateFormat.content.applyButton,
"keydown",e.hitch(this,function(A){if(A.keyCode===a.ENTER||A.keyCode===a.SPACE){ba.stop(A);this._restrictFocusOnAddCenterPointBtn=!0;var V=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],Y=V.defaultFormat,Z=this.coordinateFormat.content.frmtSelect.get("value");V.useCustom&&(Y=V.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",Y);this.coordTool.inputCoordinate.set("formatType",
Z);this.setCoordLabel(Z);J.close(this.coordinateFormat);X.focus(this.coordinateFormatButton)}A.keyCode===a.ESCAPE&&(ba.stop(A),J.close(this.coordinateFormat),X.focus(this.coordinateFormatButton))})),q(this.coordinateFormat.content.cancelButton,"click",e.hitch(this,function(){J.close(this.coordinateFormat)})),q(this.coordinateFormat.content.cancelButton,"keydown",e.hitch(this,function(A){if(A.keyCode===a.ENTER||A.keyCode===a.SPACE)ba.stop(A),J.close(this.coordinateFormat),X.focus(this.coordinateFormatButton);
A.keyCode===a.ESCAPE&&(ba.stop(A),J.close(this.coordinateFormat),X.focus(this.coordinateFormatButton))})),q(this.clearGraphicsButton,"click",e.hitch(this,this.clearGraphics)),q(this.clearGraphicsButton,"keydown",e.hitch(this,function(A){if(A.keyCode===a.ENTER||A.keyCode===a.SPACE)ba.stop(A),this.clearGraphics()})),q(this.numRingsDiv,c.leave,e.hitch(this,this.checkValidInputs)),q(this.ringIntervalDiv,c.leave,e.hitch(this,this.checkValidInputs)),q(this.numRadialsInputDiv,c.leave,e.hitch(this,this.checkValidInputs)),
q(this.btnAddDistance,"click",e.hitch(this,function(){var A=this._distanceTable.getRows(),V=!1;E.forEach(A,e.hitch(this,function(Y){this._distanceTable.getRowData(Y).Value.valid&&(V=!0)}));V&&this._distanceTable.addRow({})})),q(this.btnAddDistance,"keydown",e.hitch(this,function(A){if(A.keyCode===a.ENTER||A.keyCode===a.SPACE){ba.stop(A);A=this._distanceTable.getRows();var V=!1;E.forEach(A,e.hitch(this,function(Y){this._distanceTable.getRowData(Y).Value.valid&&(V=!0)}));V&&this._distanceTable.addRow({})}})),
q(this._distanceTable.tbody,"keyup",e.hitch(this,function(A){A.keyCode===a.ENTER&&this._distanceTable.addRow({})})),q(this.coordinateFormat.content.frmtSelect,"keydown",e.hitch(this,function(A){A.keyCode===a.ESCAPE&&(ba.stop(A),J.close(this.coordinateFormat),X.focus(this.coordinateFormatButton))})),q(this.coordinateFormat.content.frmtVal,"keydown",e.hitch(this,function(A){A.keyCode===a.ESCAPE&&(ba.stop(A),J.close(this.coordinateFormat),X.focus(this.coordinateFormatButton))})),q(this.coordinateFormat.content.addSignChkBox,
"keydown",e.hitch(this,function(A){A.keyCode===a.ESCAPE&&(ba.stop(A),J.close(this.coordinateFormat),X.focus(this.coordinateFormatButton));A.keyCode===a.ENTER&&(ba.stop(A),this.coordinateFormat.content.addSignChkBox.checked=this.coordinateFormat.content.addSignChkBox.checked?!1:!0)})),q(this.okButton,"keydown",e.hitch(this,function(A){if(A.keyCode===a.ENTER||A.keyCode===a.SPACE)ba.stop(A),this.okButtonClicked()})));l("esri-touch")?this.own(q(this.addPointBtn,x.press,e.hitch(this,this.pointButtonWasClicked))):
this.own(q(this.addPointBtn,"click",e.hitch(this,this.pointButtonWasClicked)))},setCoordLabel:function(A){A=S.sanitizeHTML(C.substitute(this.nls.centerPointLabel+" (${crdType})",{crdType:A}));this.rangeCenterLabel.innerHTML=A;m.set(this.coordTool.textbox,"aria-label",A)},rangeTypeDropDownChanged:function(){this.tabSwitched();switch(this.rangeType.get("value")){case "Interactive":k.add(this.numRingsContainer,"controlGroupHidden");k.add(this.distancebetweenRingsContainer,"controlGroupHidden");k.add(this.distanceTableContainer,
"controlGroupHidden");k.remove(this.distanceUnitsContainer,"controlGroupHidden");break;case "Fixed":k.remove(this.numRingsContainer,"controlGroupHidden");k.remove(this.distancebetweenRingsContainer,"controlGroupHidden");k.add(this.distanceUnitsContainer,"controlGroupHidden");k.add(this.distanceTableContainer,"controlGroupHidden");break;case "Origin":case "Cumulative":k.add(this.numRingsContainer,"controlGroupHidden"),k.add(this.distancebetweenRingsContainer,"controlGroupHidden"),k.remove(this.distanceUnitsContainer,
"controlGroupHidden"),k.remove(this.distanceTableContainer,"controlGroupHidden")}this.checkValidInputs()},coordToolKeyWasPressed:function(A){this.dt.removeStartGraphic();A.keyCode===a.ENTER&&(this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!0,this.coordTool.inputCoordinate.getInputType().then(e.hitch(this,function(V){"UNKNOWN"===V.inputType?(new N({message:this.nls.invalidCoordinateTypeMessage}),this.coordTool.inputCoordinate.coordinateEsriGeometry=null,this.checkValidInputs()):
this.dt.getProjectedGeometry(V.coordinateEsriGeometry,this.map.spatialReference).then(e.hitch(this,e.hitch(this,function(Y){d.publish("manual-rangering-center-point-input",Y);this.setCoordLabel(V.inputType);this.coordTool.inputCoordinate.set("formatString",this.coordinateFormat.content.formats[V.inputType].defaultFormat);this.coordTool.inputCoordinate.set("formatType",V.inputType);this.dt.addStartGraphic(Y,this._ptSym);this.checkValidInputs()})))})))},coordinateFormatButtonWasClicked:function(){this.coordinateFormat.content.set("ct",
this.coordTool.inputCoordinate.formatType);J.open({popup:this.coordinateFormat,around:this.coordinateFormatButton});X.focus(this.coordinateFormat.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormat&&this.coordinateFormat.domNode.offsetParent&&J.close(this.coordinateFormat)},pointButtonWasClicked:function(){k.contains(this.addPointBtn,"drawPointBtn-active")?(this.dt.deactivate(),this._setMapNavigation(!0)):(this.coordTool.manualInput=!1,d.publish("clear-points"),this._setMapNavigation(!1),
"Interactive"===this.rangeType.get("value")?this.dt.activate("polyline"):this.dt.activate("point"));k.toggle(this.addPointBtn,"drawPointBtn-active")},ringIntervalUnitsDidChange:function(){this.ringIntervalUnit=this.ringIntervalUnitsDD.get("value")},okButtonClicked:function(){if(!k.contains(this.okButton,"jimu-state-disabled")){if(!this.currentRing){this._restrictFocusOnAddCenterPointBtn=!0;switch(this.rangeType.get("value")){case "Fixed":var A=this.ringIntervalInput.get("value");var V=this.numRingsInput.get("value");
var Y=this.ringIntervalUnitsDD.get("value");break;case "Origin":case "Cumulative":if(Y=this.distanceUnitsDD.get("value"),this.checkTableValues())if(A=this._distanceTable.getRows(),"Origin"===this.rangeType.get("value"))A=E.map(A,e.hitch(this,function(aa){return this._distanceTable.getRowData(aa).Value.value}));else{var Z=0;A=E.map(A,e.hitch(this,function(aa){aa=this._distanceTable.getRowData(aa);return Z+=aa.Value.value}))}else{new N({message:this.nls.distanceTableErrorMessage});return}}"Interactive"!==
this.rangeType.get("value")&&(V={centerPoint:this.coordTool.inputCoordinate.coordinateEsriGeometry,numRings:V,numRadials:this.numRadialsInput.get("value"),radius:0,circle:null,circles:[],lastCircle:null,r:0,c:0,radials:0,ringInterval:A,ringIntervalUnitsDD:Y,circleSym:this._circleSym},this.createRangeRings(V))}this.emit("show-publish",this._gl)}},checkTableValues:function(){return 0<this._distanceTable.getRows().length},createRangeRings:function(A){if(A.centerPoint){if(A.ringInterval&&A.ringIntervalUnitsDD)if(A.ringInterval.constructor===
Array)for(var V=0;V<A.ringInterval.length;V++)A.ringInterval[V]=this.coordTool.inputCoordinate.util.convertToMeters(parseFloat(A.ringInterval[V]),A.ringIntervalUnitsDD);else A.ringDistance=this.coordTool.inputCoordinate.util.convertToMeters(parseFloat(A.ringInterval),A.ringIntervalUnitsDD);this.dt.removeStartGraphic();if(0===A.circles.length)if(A.ringInterval&&A.ringInterval.constructor===Array)for(V=0;V<A.ringInterval.length;V++)A.radius+=A.ringDistance,A.circle=new t({center:A.centerPoint,geodesic:!0,
radius:A.ringInterval[V],numberOfPoints:360}),A.circles.push(A.circle);else for(A.r=0;A.r<A.numRings;A.r++)A.radius+=A.ringDistance,A.circle=new t({center:A.centerPoint,geodesic:!0,radius:A.radius,numberOfPoints:360}),A.circles.push(A.circle);var Y=[];for(A.c=0;A.c<A.circles.length;A.c++)Y.push(this.dt.getProjectedGeometry(new n({paths:[A.circles[A.c].rings[0]],spatialReference:A.centerPoint.spatialReference}),this.map.spatialReference));(new da(Y)).then(e.hitch(this,function(Z){for(var aa=A.ringIntervalUnitsDD,
ca=0;ca<Z.length;ca++){var ha=new n(Z[ca][1]),ia=r.format(r.round(this.coordTool.inputCoordinate.util.convertMetersToUnits(A.circles[ca].radius,aa),2),{places:2,locale:h.locale});ia=window.isRTL?this._getLengthAbbrevation(this.distanceUnitsDD.get("value"))+" "+ia:ia+" "+this._getLengthAbbrevation(this.distanceUnitsDD.get("value"));var ka=new M(ha,this._lineSym,{Interval:ia,CenterPoint:this.coordTool.get("value"),Rings:parseFloat(A.circles.length),Radials:parseFloat(this.numRadialsInput.get("value")),
RadiusDistance:parseFloat(r.round(this.coordTool.inputCoordinate.util.convertMetersToUnits(A.circles[ca].radius,aa),2)),RadiusUnit:"Fixed"===this.rangeType.get("value")?this.ringIntervalUnitsDD.get("value"):this.distanceUnitsDD.get("value")});this._gl.add(ka);this._currentRangeGraphic=ka;ha=new w(ha.paths[0][0][0],ha.paths[0][0][1],this.map.spatialReference);this._tsGL.add(new M(ha,e.clone(this._labelSym).setText(ia).setOffset(0,10)))}for(Z=A.largestRadius=0;Z<A.circles.length;Z++)A.circles[Z].radius>
A.largestRadius&&(A.largestRadius=A.circles[Z].radius);Y=[];if(0!==A.numRadials){Z=new t({center:A.centerPoint,geodesic:!0,radius:A.largestRadius,numberOfPoints:A.numRadials});for(aa=0;aa<Z.rings[0].length-1;aa++)ca=new n(A.centerPoint.spatialReference),ca.addPath([e.clone(A.centerPoint),Z.getPoint(0,aa)]),ca=new n(K.geodesicDensify(ca,1E4),A.centerPoint.spatialReference),Y.push(this.dt.getProjectedGeometry(ca,this.map.spatialReference));0<Y.length&&(new da(Y)).then(e.hitch(this,function(fa){for(var ja=
0;ja<fa.length;ja++)this._gl.add(new M(fa[ja][1],this._lineSym,{Interval:"",CenterPoint:this.coordTool.get("value")}));this._gl.redraw()}),function(fa){console.log(fa)});this.currentRing=Z=new t({center:A.centerPoint,geodesic:!0,radius:A.largestRadius,numberOfPoints:60});this.dt.getProjectedGeometry(Z.getExtent(),this.map.spatialReference).then(e.hitch(this,function(fa){this.checkValidInputs();this.map.setExtent(fa.expand(3))}))}}))}},feedbackDidComplete:function(A){var V=null;if(A.geometry.hasOwnProperty("circlePoints")){V=
A.geometry.circlePoints[0];var Y={centerPoint:V,numRadials:this.numRadialsInput.get("value"),circles:[],circleSym:this._circleSym,r:0,c:0,radials:0,ringIntervalUnitsDD:this.distanceUnitsDD.get("value"),intervalUnits:this.distanceUnitsDD.get("value")};if(A.geometry.circlePoints&&1<A.geometry.circlePoints.length){var Z=A.geometry.circlePoints.length;var aa=A.geometry.circlePoints;aa[Z-1].x===aa[Z-2].x&&aa[Z-1].y===aa[Z-2].y&&aa.splice(Z-1,1)}for(Z=1;Z<A.geometry.circlePoints.length;Z++)aa=new n(A.geometry.spatialReference),
aa.addPath([V,A.geometry.circlePoints[Z]]),aa=K.geodesicLength(aa,9001),aa=new t({center:V,geodesic:!0,radius:aa,numberOfPoints:360}),Y.circles.push(aa);this.createRangeRings(Y)}else V=A.geometry,this.checkValidInputs();k.remove(this.addPointBtn,"drawPointBtn-active");this.dt.deactivate();this._setMapNavigation(!0)},clearGraphics:function(){this._gl&&(this._tsGL.clear(),this._gl.clear(),this._gl.refresh(),this.dt.removeStartGraphic(),this.coordTool.clear());this.tabSwitched();this.checkValidInputs();
for(var A=0;A<this.map.graphicsLayerIds.length;A++)this.map.getLayer(this.map.graphicsLayerIds[A]).refresh()},setGraphicsHidden:function(){this._gl&&this._gl.hide()},setGraphicsShown:function(){this._gl&&this._gl.show()},checkValidInputs:function(){k.add(this.okButton,"jimu-state-disabled");m.set(this.okButton,"tabindex",-1);null!==this.coordTool.inputCoordinate.coordinateEsriGeometry&&this.numRingsInput.isValid()&&this.ringIntervalInput.isValid()&&this.numRadialsInput.isValid()&&(k.remove(this.okButton,
"jimu-state-disabled"),m.set(this.okButton,"tabindex",0));this.okButton.innerHTML="Interactive"===this.rangeType.getValue()?this.nls.publishDDBtn:this.nls.common.ok},tabSwitched:function(){this.dt.deactivate();this.dt.cleanup();this.dt.disconnectOnMouseMoveHandlers();this._setMapNavigation(!0);this.dt.removeStartGraphic();this.addPointBtn&&k.remove(this.addPointBtn,"drawPointBtn-active");J.close(this.coordinateFormat)},_setMapNavigation:function(A){A?this.map.enableMapNavigation():(this.map.disableMapNavigation(),
this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(A){var V=null;if(A)switch(A){case "feet":V=this.nls.abbrevFeetLabel;break;case "kilometers":V=this.nls.abbrevKmLabel;break;case "miles":V=this.nls.abbrevMilesLabel;break;case "meters":V=this.nls.abbrevMetersLabel;break;case "nautical-miles":V=this.nls.abbrevNauticalMilesLabel;break;case "yards":V=this.nls.abbrevYardsLabel;break;default:V=A}return V},_getDegreeAbbreviation:function(A){var V=null;if(A)switch(A){case "degrees":V=this.nls.abbrevDegreesLabel;
break;case "mils":V=this.nls.abbrevMilsLabel;break;default:V=A}return V},setFirstFocusNode:function(){S.initFirstFocusNode(this.domNodeObj,this.rangeType.domNode)},focusFirstNodeOfSelectedTab:function(){X.focus(this.rangeType.focusNode)},setLastFocusNode:function(){S.initLastFocusNode(this.domNodeObj,this.clearGraphicsButton)}})})},"widgets/DistanceAndDirection/models/RangeRingFeedback":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/topic esri/graphic esri/toolbars/draw esri/geometry/Circle esri/geometry/Polyline esri/geometry/geometryEngine jimu/utils ./Feedback dojo/has dojo/touch dojo/on".split(" "),
function(P,e,E,h,b,q,k,d,l,x,C,c,a,r){return P([C],{constructor:function(m){P.safeMixin(this,m);this.syncEvents();this.initGeometryService();this.circlePoints=[];this.geoDesicCirclePoints=[]},syncEvents:function(){h.subscribe("manual-rangering-center-point-input",e.hitch(this,this.onCenterPointManualInputHandler));h.subscribe("clear-points",e.hitch(this,this.clearPoints))},clearPoints:function(m){m&&(this._points=[],this.circlePoints=[],this.geoDesicCirclePoints=[],this.map.graphics.clear())},clearGraphics:function(){this.map.graphics.clear()},
onCenterPointManualInputHandler:function(m){this._points=[];this.circlePoints=[];this.geoDesicCirclePoints=[];this._points.push(m.offset(0,0));this.set("startPoint",this._points[0]);this.map.centerAt(m)},_onClickHandler:function(m){if(this.map.snappingManager)var p=this.map.snappingManager._snappingPoint;var y=p||m.mapPoint,f=this.map;this._points.push(y.offset(0,0));this._processAfterMapClick(y).then(e.hitch(this,function(I){1===this._points.length?(this.canProjectLocally||(this.geoDesicCirclePoints=
[],this.circlePoints=[]),this.set("startPoint",this._points[0]),this.set("startPointDD",I)):this.set("endPointDD",I);this.circlePoints.push(y.offset(0,0));this.geoDesicCirclePoints.push(I.offset(0,0));switch(this._geometryType){case q.POINT:this._drawEnd(I.offset(0,0));this._setTooltipMessage(0);break;case q.POLYLINE:I=new d({paths:[[[y.x,y.y],[y.x,y.y]]],spatialReference:f.spatialReference}),this.lgraphic=new b(I,this.lineSymbol),f.snappingManager&&f.snappingManager._setGraphic(this._graphic),1<
this._points.length&&this._drawRangeCircle(),0<this._points.length&&(c("esri-touch")&&this.parentWidget.own(r(this.map.root,a.move,e.hitch(this,this._onMouseMoveHandler))),!this._onMouseMoveHandler_connect&&this.canProjectLocally&&(this._onMouseMoveHandler_connect=E.connect(this.map,"onMouseMove",this._onMouseMoveHandler)),this._onDoubleClickHandler_connect||(this._onDoubleClickHandler_connect=E.connect(this.map,"onDblClick",e.hitch(this,this._onDoubleClickHandler))))}this._setTooltipMessage(this._points.length);
1<this._points.length&&(I=this._tooltip)&&(I.innerHTML=x.sanitizeHTML(this.nls.doubleClickEllipseMesage))}))},_drawRangeCircle:function(){if(this.canProjectLocally)this.circleGraphic&&(m=new b(this.circleGraphic.geometry,this.fillSymbol),this.map.graphics.add(m));else{var m=new d({paths:[[[this.startPointDD.x,this.startPointDD.y],[this.endPointDD.x,this.endPointDD.y]]],spatialReference:this.startPointDD.spatialReference});m=l.geodesicLength(m,9001);var p=new k(this.startPointDD,{radius:m,geodesic:!0,
numberOfPoints:360});this.geodsicCircleGeometry=new k(this.startPointDD,{radius:m,geodesic:!0,numberOfPoints:360});this.getProjectedGeometry(p,this.map.spatialReference).then(e.hitch(this,e.hitch(this,function(y){p=e.mixin(y,{distanceDirectionType:"military-tools-range-rings"});this.circleGraphic=new b(p,this.fillSymbol);this.map.graphics.add(this.circleGraphic)})))}},_onMouseMoveHandler:function(m){if(this.map.snappingManager)var p=this.map.snappingManager._snappingPoint;var y=this._points[0];m=
p||m.mapPoint;p=this.lgraphic.geometry;p.setPoint(0,0,{x:y.x,y:y.y});p.setPoint(0,1,{x:m.x,y:m.y});m=l.geodesicLength(p,9001);y=new k(y,{radius:m,geodesic:!0,numberOfPoints:360});this.geodsicCircleGeometry=new k(this.startPointDD,{radius:m,geodesic:!0,numberOfPoints:360});this.circleGraphic&&this.map.graphics.remove(this.circleGraphic);y=e.mixin(y,{distanceDirectionType:"military-tools-range-rings"});this.circleGraphic=new b(y,this.fillSymbol);this.map.graphics.add(this.circleGraphic)},_onDoubleClickHandler:function(){if(this.geoDesicCirclePoints&&
!(2>this.geoDesicCirclePoints.length)){this.disconnectOnMouseMoveHandlers();var m=e.clone(this.geoDesicCirclePoints);this.cleanup();this._clear();this._setTooltipMessage(0);m=e.mixin(this.geodsicCircleGeometry,{circlePoints:m});this._drawEnd(m)}},disconnectOnMouseMoveHandlers:function(){E.disconnect(this._onMouseMoveHandler_connect);E.disconnect(this._onDoubleClickHandler_connect);this._onDoubleClickHandler_connect=null},cleanup:function(){for(var m=this.map.graphics.graphics.length-1;0<=m;m--)this.map.graphics.graphics[m].geometry.hasOwnProperty("distanceDirectionType")&&
this.map.graphics.remove(this.map.graphics.graphics[m]);this.circlePoints=[];this.geoDesicCirclePoints=[]}})})},"widgets/DistanceAndDirection/js/portal-utils":function(){define(["esri/request","dojo/json"],function(P,e){return{getFeatureServiceParams:function(E,h){return{name:E,serviceDescription:"",hasStaticData:!1,maxRecordCount:1E3,supportedQueryFormats:"JSON",capabilities:"Create,Delete,Query,Update,Editing",tags:"GRG",description:"",copyrightText:"",spatialReference:h.spatialReference.toJson(),
initialExtent:h.extent.toJson(),allowGeometryUpdates:!0,units:"esriMeters",xssPreventionInfo:{xssPreventionEnabled:!0,xssPreventionRule:"InputOnly",xssInputRule:"rejectInvalid"}}},getLayerParams:function(E,h,b,q){return{layers:[{adminLayerInfo:{geometryField:{name:"Shape"},xssTrustedFields:""},id:0,name:E,type:"Feature Layer",displayField:"",description:"",tags:"DD",copyrightText:"",defaultVisibility:!0,ownershipBasedAccessControlForFeatures:{allowOthersToQuery:!1,allowOthersToDelete:!1,allowOthersToUpdate:!1},
relationships:[],isDataVersioned:!1,supportsCalculate:!0,supportsAttachmentsByUploadId:!0,supportsRollbackOnFailureParameter:!0,supportsStatistics:!0,supportsAdvancedQueries:!0,supportsValidateSql:!0,supportsCoordinatesQuantization:!0,supportsApplyEditsWithGlobalIds:!0,advancedQueryCapabilities:{supportsPagination:!0,supportsQueryWithDistance:!0,supportsReturningQueryExtent:!0,supportsStatistics:!0,supportsOrderBy:!0,supportsDistinct:!0,supportsQueryWithResultType:!0,supportsSqlExpression:!0,supportsReturningGeometryCentroid:!0},
useStandardizedQueries:!1,geometryType:q.type,minScale:0,maxScale:0,extent:h.extent.toJson(),drawingInfo:{renderer:b.toJson(),transparency:0},allowGeometryUpdates:!0,hasAttachments:!1,htmlPopupType:"esriServerHTMLPopupTypeNone",hasM:!1,hasZ:!1,objectIdField:"OBJECTID",globalIdField:"",typeIdField:"",fields:q.fields,indexes:[],types:[],templates:[],supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:1E4,standardMaxRecordCount:4E3,tileMaxRecordCount:4E3,maxRecordCountFactor:1,exceedsLimitFactor:1,
capabilities:"Query,Editing,Create,Update,Delete"}]}},isNameAvailable:function(E,h,b){return P({url:E,content:{name:b,type:"Feature Service",token:h,f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},createFeatureService:function(E,h,b){return P({url:E,content:{f:"json",token:h,typeKeywords:"ArcGIS Server,Data,Feature Access,Feature Service,Service,Hosted Service",createParameters:e.stringify(b),outputType:"featureService"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},
addDefinitionToService:function(E,h,b){return P({url:E,content:{token:h,addToDefinition:e.stringify(b),f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})}}})},"esri/dijit/util/busyIndicator":function(){define("dijit/registry dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-construct dojox/widget/Standby require".split(" "),function(P,e,E,h,b,q,k){var d={_defaultStandbyParams:{image:k.toUrl("../images/loading-throb.gif"),color:"#fff",opacity:.75,duration:200},create:function(l){if(l=
this._normalizeParams(l))return l=new q(d._toStandbyParams(l)),b.place(l.domNode,E.doc.body),d._createHandle(l)},_normalizeParams:function(l){if(l){if(l.target)return l;if("string"===typeof l){var x=P.byId(l);l=x?x.domNode:h.byId(l)}else l=l.domNode?l.domNode:h.byId(l);if(l)return{target:l}}},_toStandbyParams:function(l){l.imageUrl&&(l.image=l.imageUrl);l.backgroundColor&&(l.color=l.backgroundColor);l.backgroundOpacity&&(l.opacity=l.backgroundOpacity);l.fadeDuration&&(l.duration=l.fadeDuration);return e.mixin({},
d._defaultStandbyParams,l)},_createHandle:function(l){return{show:function(){l&&l.show()},hide:function(){l&&l.hide()},destroy:function(){l&&(l.destroy(),l=null)}}}};return d})},"dojox/widget/Standby":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/window dojo/_base/window dojo/_base/fx dojo/fx dijit/_Widget dijit/_TemplatedMixin dijit/registry".split(" "),function(P,
e,E,h,b,q,k,d,l,x,C,c,a,r,m,p,y){P.experimental("dojox.widget.Standby");return e("dojox.widget.Standby",[m,p],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'\x3cdiv\x3e\x3cdiv style\x3d"display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint\x3d"_underlayNode"\x3e\x3c/div\x3e\x3cimg src\x3d"${image}" style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint\x3d"_imageNode"\x3e\x3cdiv style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint\x3d"_textNode"\x3e\x3c/div\x3e\x3c/div\x3e',
_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(f){if(!this._started){if("string"===typeof this.target){var I=y.byId(this.target);this.target=I?I.domNode:q.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text);"image"===this.centerIndicator?(this._centerNode=this._imageNode,k.set(this._imageNode,"src",this.image),k.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode;x.set(this._underlayNode,
{display:"none",backgroundColor:this.color});x.set(this._centerNode,"display","none");this.connect(this._underlayNode,"onclick","_ignore");this.domNode.parentNode&&this.domNode.parentNode!=c.body()&&c.body().appendChild(this.domNode);7==b("ie")&&(this._ieFixNode=d.create("div"),x.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),c.body().appendChild(this._ieFixNode));this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),
this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){if(this._displayed)try{this._anim&&(this._anim.stop(),delete this._anim),this._size()}catch(f){console.error(f)}finally{this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null)}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1;this._resizeCheck&&clearInterval(this._resizeCheck);
x.set(this._centerNode,"display","none");x.set(this._underlayNode,"display","none");7==b("ie")&&this._ieFixNode&&(c.body().removeChild(this._ieFixNode),delete this._ieFixNode);this._anim&&(this._anim.stop(),delete this._anim);this._centerNode=this._textNode=this._imageNode=this.target=null;this.inherited(arguments)},_size:function(){if(this._displayed){var f=k.get(c.body(),"dir");f&&(f=f.toLowerCase());var I=this._scrollerWidths(),J=this.target,B=x.get(this._centerNode,"display");x.set(this._centerNode,
"display","block");var N=l.position(J,!0);if(J===c.body()||J===c.doc)N=C.getBox(),N.x=N.l,N.y=N.t;var R=l.getMarginBox(this._centerNode);x.set(this._centerNode,"display",B);if(this._ieFixNode){var O=-this._ieFixNode.offsetTop/1E3;N.x=Math.floor((N.x+.9)/O);N.y=Math.floor((N.y+.9)/O);N.w=Math.floor((N.w+.9)/O);N.h=Math.floor((N.h+.9)/O)}var S=x.get(J,"zIndex"),T=B=S;if("auto"===this.zIndex)if("auto"!=S)B=parseInt(B,10),T=parseInt(T,10);else{var Q=J;if(Q&&Q!==c.body()&&Q!==c.doc)for(Q=J.parentNode,
O=-1E5;Q&&Q!==c.body();)(S=x.get(Q,"zIndex"))&&"auto"!==S&&(S=parseInt(S,10),O<S&&(O=S,B=S+1,T=S+1)),Q=Q.parentNode}else B=parseInt(this.zIndex,10),T=parseInt(this.zIndex,10);x.set(this._centerNode,"zIndex",T);x.set(this._underlayNode,"zIndex",B);if((B=J.parentNode)&&B!==c.body()&&J!==c.body()&&J!==c.doc){Q=N.h;T=N.w;J=l.position(B,!0);this._ieFixNode&&(O=-this._ieFixNode.offsetTop/1E3,J.x=Math.floor((J.x+.9)/O),J.y=Math.floor((J.y+.9)/O),J.w=Math.floor((J.w+.9)/O),J.h=Math.floor((J.h+.9)/O));J.w-=
B.scrollHeight>B.clientHeight&&0<B.clientHeight?I.v:0;J.h-=B.scrollWidth>B.clientWidth&&0<B.clientWidth?I.h:0;"rtl"===f&&(b("opera")?(N.x+=B.scrollHeight>B.clientHeight&&0<B.clientHeight?I.v:0,J.x+=B.scrollHeight>B.clientHeight&&0<B.clientHeight?I.v:0):b("ie")?J.x+=B.scrollHeight>B.clientHeight&&0<B.clientHeight?I.v:0:b("webkit"));J.w<N.w&&(N.w-=J.w);J.h<N.h&&(N.h-=J.h);var t=J.y,n=J.y+J.h,w=N.y,K=N.y+Q;f=J.x;O=J.x+J.w;S=N.x;var M=N.x+T;if(K>t&&w<t)N.y=J.y,Q-=t-w,N.h=Q<J.h?Q:N.h-2*(B.scrollWidth>
B.clientWidth&&0<B.clientWidth?I.h:0);else if(w<n&&K>n)N.h=n-w;else if(K<=t||w>=n)N.h=0;if(M>f&&S<f)N.x=J.x,T-=f-S,N.w=T<J.w?T:N.w-2*(B.scrollHeight>B.clientHeight&&0<B.clientHeight?I.w:0);else if(S<O&&M>O)N.w=O-S;else if(M<=f||S>=O)N.w=0}0<N.h&&0<N.w?(x.set(this._underlayNode,{display:"block",width:N.w+"px",height:N.h+"px",top:N.y+"px",left:N.x+"px"}),I=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],this._cloneStyles(I),b("ie")||(I=
"MozBorderRadius MozBorderRadiusTopleft MozBorderRadiusTopright MozBorderRadiusBottomleft MozBorderRadiusBottomright WebkitBorderRadius WebkitBorderTopLeftRadius WebkitBorderTopRightRadius WebkitBorderBottomLeftRadius WebkitBorderBottomRightRadius".split(" "),this._cloneStyles(I,this)),I=N.h/2-R.h/2,B=N.w/2-R.w/2,N.h>=R.h&&N.w>=R.w?x.set(this._centerNode,{top:I+N.y+"px",left:B+N.x+"px",display:"block"}):x.set(this._centerNode,"display","none")):(x.set(this._underlayNode,"display","none"),x.set(this._centerNode,
"display","none"));if(null===this._resizeCheck){var v=this;this._resizeCheck=setInterval(function(){v._size()},100)}}},_cloneStyles:function(f){E.forEach(f,function(I){x.set(this._underlayNode,I,x.get(this.target,I))},this)},_fadeIn:function(){var f=this,I=a.animateProperty({duration:f.duration,node:f._underlayNode,properties:{opacity:{start:0,end:f.opacity}}}),J=a.animateProperty({duration:f.duration,node:f._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){f.onShow();delete f._anim}});
this._anim=r.combine([I,J]);this._anim.play()},_fadeOut:function(){var f=this,I=a.animateProperty({duration:f.duration,node:f._underlayNode,properties:{opacity:{start:f.opacity,end:0}},onEnd:function(){x.set(this.node,{display:"none",zIndex:"-1000"})}}),J=a.animateProperty({duration:f.duration,node:f._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){x.set(this.node,{display:"none",zIndex:"-1000"});f.onHide();f._enableOverflow();delete f._anim}});this._anim=r.combine([I,J]);this._anim.play()},
_ignore:function(f){f&&h.stop(f)},_scrollerWidths:function(){var f=d.create("div");x.set(f,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var I=d.create("div");x.set(I,{width:"200px",height:"10px"});f.appendChild(I);c.body().appendChild(f);I=l.getContentBox(f);x.set(f,"overflow","scroll");var J=l.getContentBox(f);c.body().removeChild(f);return{v:I.w-J.w,h:I.h-J.h}},_setTextAttr:function(f){this.text=this._textNode.innerHTML=
f},_setColorAttr:function(f){x.set(this._underlayNode,"backgroundColor",f);this.color=f},_setImageTextAttr:function(f){k.set(this._imageNode,"alt",f);this.imageText=f},_setImageAttr:function(f){k.set(this._imageNode,"src",f);this.image=f},_setCenterIndicatorAttr:function(f){this.centerIndicator=f;"image"===f?(this._centerNode=this._imageNode,x.set(this._textNode,"display","none")):(this._centerNode=this._textNode,x.set(this._imageNode,"display","none"))},_setTargetAttr:function(f){if("string"===typeof f){var I=
y.byId(f);this._set("target",I?I.domNode:q.byId(f))}else this._set("target",f)},_disableOverflow:function(){if(this.target===c.body()||this.target===c.doc){this._overflowDisabled=!0;var f=c.body();this._oldOverflow=f.style&&f.style.overflow?x.get(f,"overflow"):"";if(b("ie")&&!b("quirks")){if(f.parentNode&&f.parentNode.style&&f.parentNode.style.overflow)this._oldBodyParentOverflow=f.parentNode.style.overflow;else try{this._oldBodyParentOverflow=x.get(f.parentNode,"overflow")}catch(I){this._oldBodyParentOverflow=
"scroll"}x.set(f.parentNode,"overflow","hidden")}x.set(f,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var f=c.body();b("ie")&&!b("quirks")&&(f.parentNode.style.overflow=this._oldBodyParentOverflow,delete this._oldBodyParentOverflow);x.set(f,"overflow",this._oldOverflow);if(b("webkit")){var I=d.create("div",{style:{height:"2px"}});f.appendChild(I);setTimeout(function(){f.removeChild(I)},0)}delete this._oldOverflow}}})})},"widgets/DistanceAndDirection/js/jquery.easy-autocomplete":function(){define(["jimu/loaderplugins/jquery-loader! ./libs/jquery/jquery-1-11-1.js"],
function(P){var e=function(E){E.Configuration=function(h){function b(d,l){function x(C,c){for(var a in c)void 0===C[a]&&d.log("Property '"+a+"' does not exist in EasyAutocomplete options API."),"object"===typeof C[a]&&-1===P.inArray(a,k)&&x(C[a],c[a])}x(q,l)}var q={data:"list-required",url:"list-required",dataType:"json",listLocation:function(d){return d},xmlElementName:"",getValue:function(d){return d},autocompleteOff:!0,placeholder:!1,ajaxCallback:function(){},matchResponseProperty:!1,list:{sort:{enabled:!1,
method:function(d,l){d=q.getValue(d);l=q.getValue(l);return d<l?-1:d>l?1:0}},maxNumberOfElements:6,hideOnEmptyPhrase:!0,match:{enabled:!1,caseSensitive:!1,method:function(d,l){return-1<d.search(l)?!0:!1}},showAnimation:{type:"normal",time:400,callback:function(){}},hideAnimation:{type:"normal",time:400,callback:function(){}},onClickEvent:function(){},onSelectItemEvent:function(){},onLoadEvent:function(){},onChooseEvent:function(){},onKeyEnterEvent:function(){},onMouseOverEvent:function(){},onMouseOutEvent:function(){},
onShowListEvent:function(){},onHideListEvent:function(){}},highlightPhrase:!0,theme:"",cssClasses:"",minCharNumber:0,requestDelay:0,adjustWidth:!0,ajaxSettings:{},preparePostData:function(d){return d},loggerEnabled:!0,template:"",categoriesAssigned:!1,categories:[{maxNumberOfElements:4}]},k=["ajaxSettings","template"];this.get=function(d){return q[d]};this.equals=function(d,l){var x=void 0!==q[d]&&null!==q[d]?!0:!1;return x&&q[d]===l?!0:!1};this.checkDataUrlProperties=function(){return"list-required"===
q.url&&"list-required"===q.data?!1:!0};this.checkRequiredProperties=function(){for(var d in q)if("required"===q[d])return!1;return!0};this.printPropertiesThatDoesntExist=function(d,l){b(d,l)};(function(){"xml"===h.dataType&&(h.getValue||(h.getValue=function(a){return P(a).text()}),h.list||(h.list={}),h.list.sort||(h.list.sort={}),h.list.sort.method=function(a,r){a=h.getValue(a);r=h.getValue(r);return a<r?-1:a>r?1:0},h.list.match||(h.list.match={}),h.list.match.method=function(a,r){return-1<a.search(r)?
!0:!1});if(void 0!==h.categories&&h.categories instanceof Array){for(var d=[],l=0,x=h.categories.length;l<x;l+=1){var C=h.categories[l],c;for(c in q.categories[0])void 0===C[c]&&(C[c]=q.categories[0][c]);d.push(C)}h.categories=d}})();(function(){function d(l,x){var C=l||{},c;for(c in l)void 0!==x[c]&&null!==x[c]&&("object"!==typeof x[c]||x[c]instanceof Array?C[c]=x[c]:d(l[c],x[c]));void 0!==x.data&&null!==x.data&&"object"===typeof x.data&&(C.data=x.data);return C}q=d(q,h)})();!0===q.loggerEnabled&&
b(console,h);q.ajaxSettings=void 0!==h.ajaxSettings&&"object"===typeof h.ajaxSettings?h.ajaxSettings:{};(function(){if("list-required"!==q.url&&"function"!==typeof q.url){var d=q.url;q.url=function(){return d}}void 0!==q.ajaxSettings.url&&"function"!==typeof q.ajaxSettings.url&&(d=q.ajaxSettings.url,q.ajaxSettings.url=function(){return d});if("string"===typeof q.listLocation){var l=q.listLocation;"XML"===q.dataType.toUpperCase()?q.listLocation=function(C){return P(C).find(l)}:q.listLocation=function(C){return C[l]}}if("string"===
typeof q.getValue){var x=q.getValue;q.getValue=function(C){return C[x]}}void 0!==h.categories&&(q.categoriesAssigned=!0)})()};return E}(e||{});e=function(E){E.Logger=function(){this.error=function(){};this.warning=function(){}};return E}(e||{});e=function(E){E.Constans=function(){var h={CONTAINER_CLASS:"easy-autocomplete-container",CONTAINER_ID:"eac-container-",WRAPPER_CSS_CLASS:"easy-autocomplete"};this.getValue=function(b){return h[b]}};return E}(e||{});e=function(E){E.ListBuilderService=function(h,
b){function q(d,l){function x(){var r={},m;void 0!==d.xmlElementName&&(r.xmlElementName=d.xmlElementName);void 0!==d.listLocation?m=d.listLocation:void 0!==h.get("listLocation")&&(m=h.get("listLocation"));void 0!==m?"string"===typeof m?r.data=P(l).find(m):"function"===typeof m&&(r.data=m(l)):r.data=l;return r}function C(){var r={};void 0!==d.listLocation?"string"===typeof d.listLocation?r.data=l[d.listLocation]:"function"===typeof d.listLocation&&(r.data=d.listLocation(l)):r.data=l;return r}var c=
{};c="XML"===h.get("dataType").toUpperCase()?x():C();void 0!==d.header&&(c.header=d.header);void 0!==d.maxNumberOfElements&&(c.maxNumberOfElements=d.maxNumberOfElements);void 0!==h.get("list").maxNumberOfElements&&(c.maxListSize=h.get("list").maxNumberOfElements);if(void 0!==d.getValue)if("string"===typeof d.getValue){var a=d.getValue;c.getValue=function(r){return r[a]}}else"function"===typeof d.getValue&&(c.getValue=d.getValue);else c.getValue=h.get("getValue");return c}function k(d){var l=[];void 0===
d.xmlElementName&&(d.xmlElementName=h.get("xmlElementName"));P(d.data).find(d.xmlElementName).each(function(){l.push(this)});return l}this.init=function(d){var l=[],x={};x.data=h.get("listLocation")(d);x.getValue=h.get("getValue");x.maxListSize=h.get("list").maxNumberOfElements;l.push(x);return l};this.updateCategories=function(d,l){if(h.get("categoriesAssigned")){d=[];for(var x=0;x<h.get("categories").length;x+=1){var C=q(h.get("categories")[x],l);d.push(C)}}return d};this.convertXml=function(d){if("XML"===
h.get("dataType").toUpperCase())for(var l=0;l<d.length;l+=1)d[l].data=k(d[l]);return d};this.processData=function(d,l){for(var x=0,C=d.length;x<C;x+=1)d[x].data=b(h,d[x],l);return d};this.checkIfDataExists=function(d){for(var l=0,x=d.length;l<x;l+=1)if(void 0!==d[l].data&&d[l].data instanceof Array&&0<d[l].data.length)return!0;return!1}};return E}(e||{});e=function(E){E.proccess=function(h,b,q){function k(l,x){h.get("list").match.caseSensitive||("string"===typeof l&&(l=l.toLowerCase()),x=x.toLowerCase());
return h.get("list").match.method(l,x)?!0:!1}E.proccess.match=k;var d=b.data;d=function(l,x){var C=[],c="";if(h.get("list").match.enabled)for(var a=0,r=l.length;a<r;a+=1)c=h.get("getValue")(l[a]),k(c,x)&&C.push(l[a]);else C=l;return C}(d,q);d=function(l){void 0!==b.maxNumberOfElements&&l.length>b.maxNumberOfElements&&(l=l.slice(0,b.maxNumberOfElements));return l}(d);return d=function(l){h.get("list").sort.enabled&&l.sort(h.get("list").sort.method);return l}(d)};return E}(e||{});e=function(E){E.Template=
function(h){var b={basic:{type:"basic",method:function(k){return k},cssClass:""},description:{type:"description",fields:{description:"description"},method:function(k){return k+" - description"},cssClass:"eac-description"},iconLeft:{type:"iconLeft",fields:{icon:""},method:function(k){return k},cssClass:"eac-icon-left"},iconRight:{type:"iconRight",fields:{iconSrc:""},method:function(k){return k},cssClass:"eac-icon-right"},links:{type:"links",fields:{link:""},method:function(k){return k},cssClass:""},
custom:{type:"custom",method:function(){},cssClass:""}},q=function(k){var d=k.fields;if("description"===k.type){var l=b.description.method;"string"===typeof d.description?l=function(x,C){return x+" - \x3cspan\x3e"+C[d.description]+"\x3c/span\x3e"}:"function"===typeof d.description&&(l=function(x,C){return x+" - \x3cspan\x3e"+d.description(C)+"\x3c/span\x3e"});return l}return"iconRight"===k.type?("string"===typeof d.iconSrc?l=function(x,C){return x+"\x3cimg class\x3d'eac-icon' src\x3d'"+C[d.iconSrc]+
"' /\x3e"}:"function"===typeof d.iconSrc&&(l=function(x,C){return x+"\x3cimg class\x3d'eac-icon' src\x3d'"+d.iconSrc(C)+"' /\x3e"}),l):"iconLeft"===k.type?("string"===typeof d.iconSrc?l=function(x,C){return"\x3cimg class\x3d'eac-icon' src\x3d'"+C[d.iconSrc]+"' /\x3e"+x}:"function"===typeof d.iconSrc&&(l=function(x,C){return"\x3cimg class\x3d'eac-icon' src\x3d'"+d.iconSrc(C)+"' /\x3e"+x}),l):"links"===k.type?("string"===typeof d.link?l=function(x,C){return"\x3ca href\x3d'"+C[d.link]+"' \x3e"+x+"\x3c/a\x3e"}:
"function"===typeof d.link&&(l=function(x,C){return"\x3ca href\x3d'"+d.link(C)+"' \x3e"+x+"\x3c/a\x3e"}),l):"custom"===k.type?k.method:b.basic.method};this.getTemplateClass=function(k){var d=function(){return""};return k&&k.type?k.type&&b[k.type]?function(){var l=b[k.type].cssClass;return function(){return l}}():d:d}(h);h=h&&h.type?h.type&&b[h.type]?q(h):b.basic.method:b.basic.method;this.build=h};return E}(e||{});e=function(E){E.main=function(h,b){function q(){function R(O,S){return a.get("highlightPhrase")&&
""!==S?(S=S.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26"),(O+"").replace(new RegExp("("+S+")","gi"),"\x3cb\x3e$1\x3c/b\x3e")):O}f.parent().hasClass(c.getValue("WRAPPER_CSS_CLASS"))&&(f.next("."+c.getValue("CONTAINER_CLASS")).remove(),f.unwrap());(function(){var O=P("\x3cdiv\x3e"),S=c.getValue("WRAPPER_CSS_CLASS");a.get("theme")&&""!==a.get("theme")&&(S+=" eac-"+a.get("theme"));a.get("cssClasses")&&""!==a.get("cssClasses")&&(S+=" "+a.get("cssClasses"));""!==m.getTemplateClass()&&(S+=" "+
m.getTemplateClass());O.addClass(S);f.wrap(O);!0===a.get("adjustWidth")&&f.parent().css("width","100%")})();(function(){var O=P("\x3cdiv\x3e").addClass(c.getValue("CONTAINER_CLASS"));O.attr("id",k()).prepend(P("\x3cul\x3e"));(function(){O.on("show.eac",function(){switch(a.get("list").showAnimation.type){case "slide":var S=a.get("list").showAnimation.time;var T=a.get("list").showAnimation.callback;O.find("ul").slideDown(S,T);break;case "fade":S=a.get("list").showAnimation.time;T=a.get("list").showAnimation.callback;
O.find("ul").fadeIn(S,T);break;default:O.find("ul").show()}a.get("list").onShowListEvent()}).on("hide.eac",function(){switch(a.get("list").hideAnimation.type){case "slide":var S=a.get("list").hideAnimation.time;var T=a.get("list").hideAnimation.callback;O.find("ul").slideUp(S,T);break;case "fade":S=a.get("list").hideAnimation.time;T=a.get("list").hideAnimation.callback;O.find("ul").fadeOut(S,T);break;default:O.find("ul").hide()}a.get("list").onHideListEvent()}).on("selectElement.eac",function(){O.find("ul li").removeClass("selected");
O.find("ul li").eq(B).addClass("selected");a.get("list").onSelectItemEvent()}).on("loadElements.eac",function(S,T,Q){var t="";S=O.find("ul");S.empty().detach();J=[];for(var n=0,w=0,K=T.length;w<K;w+=1){var M=T[w].data;if(0!==M.length){void 0!==T[w].header&&0<T[w].header.length&&S.append("\x3cdiv class\x3d'eac-category' \x3e"+T[w].header+"\x3c/div\x3e");for(var v=0,u=M.length;v<u&&n<T[w].maxListSize;v+=1)t=P("\x3cli\x3e\x3cdiv class\x3d'eac-item'\x3e\x3c/div\x3e\x3c/li\x3e"),function(){var F=v,H=n,
z=T[w].getValue(M[F]);t.find(" \x3e div").on("click",function(){f.val(z).trigger("change");B=H;C(H);a.get("list").onClickEvent();a.get("list").onChooseEvent()}).mouseover(function(){B=H;C(H);a.get("list").onMouseOverEvent()}).mouseout(function(){a.get("list").onMouseOutEvent()}).html(m.build(R(z,Q),M[F]))}(),S.append(t),J.push(M[v]),n+=1}}O.append(S);a.get("list").onLoadEvent()})})();f.after(O)})();I=P("#"+k());a.get("placeholder")&&f.attr("placeholder",a.get("placeholder"))}function k(){var R=f.attr("id");
return R=c.getValue("CONTAINER_ID")+R}function d(){y("autocompleteOff",!0)&&f.attr("autocomplete","off");(function(){f.focusout(function(){var R=f.val();a.get("list").match.caseSensitive||(R=R.toLowerCase());for(var O=0,S=J.length;O<S;O+=1){var T=a.get("getValue")(J[O]);a.get("list").match.caseSensitive||(T=T.toLowerCase());if(T===R){B=O;C(B);break}}})})();(function(){f.off("keyup").keyup(function(R){function O(T){if(!(T.length<a.get("minCharNumber"))){if("list-required"!==a.get("data")){var Q=a.get("data"),
t=p.init(Q);t=p.updateCategories(t,Q);t=p.processData(t,T);I.trigger("loadElements.eac",[t,T]);0<f.parent().find("li").length?l():x()}Q=function(){var n={},w=a.get("ajaxSettings")||{},K;for(K in w)n[K]=w[K];return n}();if(void 0===Q.url||""===Q.url)Q.url=a.get("url");if(void 0===Q.dataType||""===Q.dataType)Q.dataType=a.get("dataType");void 0!==Q.url&&"list-required"!==Q.url&&(Q.url=Q.url(T),Q.data=a.get("preparePostData")(Q.data,T),P.ajax(Q).done(function(n){var w=p.init(n);w=p.updateCategories(w,
n);w=p.convertXml(w);if(!1!==a.get("matchResponseProperty")?"string"===typeof a.get("matchResponseProperty")?n[a.get("matchResponseProperty")]===T:"function"===typeof a.get("matchResponseProperty")?a.get("matchResponseProperty")(n)===T:1:1)w=p.processData(w,T),I.trigger("loadElements.eac",[w,T]);p.checkIfDataExists(w)&&0<f.parent().find("li").length?l():x();a.get("ajaxCallback")()}).fail(function(){r.warning("Fail to load response data")}).always(function(){}))}}switch(R.keyCode){case 27:x();f.trigger("blur");
break;case 38:R.preventDefault();0<J.length&&0<B&&(--B,f.val(a.get("getValue")(J[B])),C(B));break;case 40:R.preventDefault();0<J.length&&B<J.length-1&&(B+=1,f.val(a.get("getValue")(J[B])),C(B));break;default:if(40<R.keyCode||8===R.keyCode){var S=f.val();!0!==a.get("list").hideOnEmptyPhrase||8!==R.keyCode||""!==S?0<a.get("requestDelay")?(void 0!==N&&clearTimeout(N),N=setTimeout(function(){O(S)},a.get("requestDelay"))):O(S):x()}}})})();(function(){f.on("keydown",function(R){R=R||window.event;if(38===
R.keyCode)return!1}).keydown(function(R){13===R.keyCode&&-1<B&&(f.val(a.get("getValue")(J[B])),a.get("list").onKeyEnterEvent(),a.get("list").onChooseEvent(),B=-1,x(),R.preventDefault())})})();f.off("keypress");(function(){f.focus(function(){""!==f.val()&&0<J.length&&(B=-1,l())})})();(function(){f.blur(function(){setTimeout(function(){B=-1;x()},250)})})()}function l(){I.trigger("show.eac")}function x(){I.trigger("hide.eac")}function C(R){I.trigger("selectElement.eac",R)}var c=new E.Constans,a=new E.Configuration(b),
r=new E.Logger,m=new E.Template(b.template),p=new E.ListBuilderService(a,E.proccess),y=a.equals,f=h,I="",J=[],B=-1,N;E.consts=c;this.getConstants=function(){return c};this.getConfiguration=function(){return a};this.getContainer=function(){return I};this.getSelectedItemIndex=function(){return B};this.getItems=function(){return J};this.getItemData=function(R){return J.length<R||void 0===J[R]?-1:J[R]};this.getSelectedItemData=function(){return this.getItemData(B)};this.build=function(){q()};this.init=
function(){0===f.length?r.error("Input field doesn't exist."):a.checkDataUrlProperties()?a.checkRequiredProperties()?(q(),d()):r.error("Will not work without mentioned properties."):r.error("One of options variables 'data' or 'url' must be defined.")}};E.eacHandles=[];E.getHandle=function(h){return E.eacHandles[h]};E.inputHasId=function(h){return void 0!==P(h).attr("id")&&0<P(h).attr("id").length?!0:!1};E.assignRandomId=function(h){var b="";do b="eac-"+Math.floor(1E4*Math.random());while(0!==P("#"+
b).length);P(h).attr("id",b)};E.setHandle=function(h,b){E.eacHandles[b]=h};return E}(e||{});(function(E){E.fn.easyAutocomplete=function(h){return this.each(function(){var b=E(this),q=new e.main(b,h);e.inputHasId(b)||e.assignRandomId(b);q.init();e.setHandle(q,b.attr("id"))})};E.fn.getSelectedItemIndex=function(){var h=E(this).attr("id");return void 0!==h?e.getHandle(h).getSelectedItemIndex():-1};E.fn.getItems=function(){var h=E(this).attr("id");return void 0!==h?e.getHandle(h).getItems():-1};E.fn.getItemData=
function(h){var b=E(this).attr("id");return void 0!==b&&-1<h?e.getHandle(b).getItemData(h):-1};E.fn.getSelectedItemData=function(){var h=E(this).attr("id");return void 0!==h?e.getHandle(h).getSelectedItemData():-1}})(jQuery)})},"jimu/loaderplugins/jquery-loader":function(){define(["dojo/Deferred","dojo/when"],function(P,e){var E,h={},b=function(l){var x=new P;if(h.locked)return setTimeout(function(){b(l)},50),x;if(h[l])return h.locked=!0,x.resolve(h[l]),x;h.locked=!0;E([l],function(){h[l]=window.jQuery;
x.resolve(h[l])});return x},q=function(l,x,C){E([l[x]],function(){x===l.length-1?C.resolve():(x++,q(l,x,C))})},k=function(l,x){l=new P;x[0]?q(x,0,l):l.resolve();return l},d=function(l,x){var C=new P;b(l).then(function(c){k(l,x).then(function(){h.locked=!1;C.resolve(c)})});return C};return{load:function(l,x,C){l=l.split(",");var c=[];E=x;0===l.length?C(null):(x=l[0],c=l.slice(1),e(d(x,c),C))}}})},"widgets/DistanceAndDirection/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css",
"dojo/i18n!./nls/strings"],function(){})},"url:widgets/DistanceAndDirection/models/ConfirmNotation.html":'\x3cdiv class\x3d\'coordinateContainer\'\x3e\r\n    \x3cspan class\x3d\'jimu-widget-subtitle\' data-dojo-attach-point\x3d\'label1\'\x3e\x3c/span\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3cdiv class\x3d"controlItem" style\x3d"padding-top: 10px;"\x3e\r\n            \x3cselect style\x3d"width: 225px" data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"comboOptions"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/DistanceAndDirection/templates/EditOutputCoordinate.html":'\x3cdiv\x3e\r\n  \x3cspan class\x3d\'jimu-widget-subtitle\'\x3e${nls.setCoordFormatStringMessage}\x3c/span\x3e\r\n  \x3cdiv class\x3d"controlContainer"\x3e\r\n    \x3cselect class\x3d"selectFormat esriCTDropdownObj" name\x3d"test" data-dojo-type\x3d\'jimu/dijit/formSelect\'\r\n      data-dojo-attach-point\x3d"frmtSelect" aria-label\x3d"${nls.setCoordFormatStringMessage}"\x3e\r\n      \x3coption value\x3d"DD"\x3e${nls.ddLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"DDM"\x3e${nls.ddmLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"DMS"\x3e${nls.dmsLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"GARS"\x3e${nls.garsLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"GEOREF"\x3e${nls.georefLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"MGRS"\x3e${nls.mgrsLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"USNG"\x3e${nls.usngLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"UTM"\x3e${nls.utmLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"UTM (H)"\x3e${nls.utmhLabel}\x3c/option\x3e\r\n    \x3c/select\x3e\r\n    \x3cinput type\x3d"text" data-dojo-attach-point\x3d"frmtVal" class\x3d"formatInput esriCTInputObj"\r\n      aria-label\x3d"${nls.setCoordFormatStringMessage}"\x3e\x3c/input\x3e\r\n    \x3cdiv class\x3d\'settingsContainer\' data-dojo-attach-point\x3d"prefixContainer"\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"addSignChkBox" type\x3d"checkbox" aria-label\x3d"${nls.prefixMessage}"\r\n        class\x3d"esriCTCheckboxObj"\x3e\r\n      \x3clabel class\x3d"formatText"\x3e${nls.prefixMessage}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"btnContainer"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"applyButton" class\x3d\'jimu-btn esriCTButtonObj\' tabindex\x3d"0"\r\n      aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e\r\n      ${nls.common.ok}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"cancelButton" class\x3d\'jimu-btn esriCTButtonObj\' tabindex\x3d"0"\r\n      aria-label\x3d"${nls.common.cancel}" role\x3d"button"\x3e${nls.common.cancel}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/templates/TabLine.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"lineContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.fromLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect data-dojo-attach-point\x3d"lineTypeDD" style\x3d"width:100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          aria-label\x3d"${nls.fromLabel}" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption value\x3d"DistAndBearing"\x3e${nls.distanceBearingLabel}\x3c/option\x3e\r\n          \x3coption selected\x3d"selected" value\x3d"Points"\x3e${nls.pointsLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"startDiv"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"lineStartPointLabel"\x3e${nls.startPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"startPointCoordsLine"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft" data-dojo-attach-point\x3d"addPointBtnStartDiv"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButtonStart" tabindex\x3d"0" aria-label\x3d"${nls.formatInputLabel}"\r\n              role\x3d"button"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.addPointLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtnStart"\r\n              tabindex\x3d"0" aria-label\x3d"${nls.addPointLabel}" role\x3d"button"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3cinput aria-label\x3d"${nls.createLineInteractively}" class\x3d"interactive-checkbox esriCTCheckboxObj" type\x3d"checkbox"\r\n        data-dojo-attach-point\x3d"interactiveLine" /\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.createLineInteractively}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup endPt"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"lineEndPointLabel"\x3e${nls.endPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"endPointCoordsLine"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft" data-dojo-attach-point\x3d"addPointBtnEndDiv"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButtonEnd" tabindex\x3d"0" aria-label\x3d"${nls.formatInputLabel}"\r\n              role\x3d"button"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.addPointLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtnEnd" tabindex\x3d"0"\r\n              aria-label\x3d"${nls.addPointLabel}" role\x3d"button"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.lengthLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"lengthInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.lengthLabel}" style\x3d"width: calc(100% - 108px);"\r\n          data-dojo-type\x3d\'dijit/form/NumberTextBox\' required\x3d"true" value\x3d"1000"\r\n          data-dojo-props\x3d"constraints: {min: 1, max: 40030000}" data-dojo-attach-point\x3d"lengthInput"\r\n          data-dojo-attach-event\x3d"keyup: checkValidInputs"\x3e\r\n        \x3c/input\x3e\r\n        \x3cselect style\x3d"width: 100px" class\x3d"controlSpace noResize" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"lengthUnitDD" aria-label\x3d"${nls.lengthLabel}"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.angleLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"angleInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.angleLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n          style\x3d"width: calc(100% - 108px);" required\x3d"true" value\x3d"0" data-dojo-props\x3d"constraints: {min: 0, max: 360}"\r\n          data-dojo-attach-point\x3d"angleInput" data-dojo-attach-event\x3d"onChange: checkValidInputs"\x3e\r\n        \x3c/input\x3e\r\n        \x3cselect style\x3d"width: 100px" class\x3d"controlSpace noResize" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"angleUnitDD" tabindex\x3d"0" aria-label\x3d"${nls.angleLabel}"\x3e\r\n          \x3coption value\x3d"degrees"\x3e${nls.degreesLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"mils"\x3e${nls.milsLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" tabindex\x3d"-1" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e\r\n        ${nls.common.ok}\x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\' data-dojo-attach-event\x3d"onclick: clearGraphics"\x3e\r\n        ${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/templates/TabCircle.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"circleContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.circleTitle}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.circleTitle}" style\x3d"width:100%;" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"creationType" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption value\x3d"Radius" selected\x3d"selected"\x3e${nls.radiusLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Diameter"\x3e${nls.diameterLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"coordInputLabel"\x3e${nls.centerPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"startPointCoords"\r\n          placeholder\x3d"${nls.startPointPlaceHolderLabel}" role\x3d"textbox"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButton" tabindex\x3d"0" role\x3d"button"\r\n              aria-label\x3d"${nls.formatInputLabel}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.drawCircleLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtn" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.drawCircleLabel}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3cinput aria-label\x3d"${nls.createCircleInteractivelyLabel}" class\x3d"interactive-checkbox esriCTCheckboxObj"\r\n          type\x3d"checkbox" data-dojo-attach-point\x3d"interactiveCircle"\r\n          aria-label\x3d"${nls.createCircleInteractivelyLabel}" /\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.createCircleInteractivelyLabel}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"radiusDiameterLabel"\x3e${nls.radiusLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"radiusInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.radiusLabel}" style\x3d"width: calc(100% - 108px);"\r\n          data-dojo-type\x3d\'dijit/form/NumberTextBox\' required\x3d"true" value\x3d"1000" data-dojo-props\x3d"constraints: {min: 1}"\r\n          data-dojo-attach-point\x3d"radiusInput"\x3e\r\n        \x3c/input\x3e\r\n        \x3cselect aria-label\x3d"${nls.radiusLabel}" style\x3d"width: 100px" class\x3d"controlSpace noResize"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"lengthUnitDD"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d\'distCalcControlDiv\'\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d\'distCalcControl\' data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open: false"\x3e\r\n        \x3cdiv class\x3d"controlGroup"\x3e\r\n          \x3clabel\x3e${nls.timeLabel}\r\n            \x3clabel\x3e\r\n              \x3cdiv class\x3d"controlItem"\x3e\r\n                \x3cinput aria-label\x3d"${nls.timeLabel}" style\x3d\'width: calc(100% - 108px);\' data-dojo-type\x3d\'dijit/form/NumberTextBox\'\r\n                  required\x3d"true" value\x3d"1" data-dojo-props\x3d"constraints: {min: 1}" data-dojo-attach-point\x3d"timeInput"\x3e\r\n                \x3c/input\x3e\r\n                \x3cselect aria-label\x3d"${nls.timeLabel}" class\x3d"controlSpace noResize"\r\n                  data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"timeUnitDD"\x3e\r\n                  \x3coption value\x3d"3600"\x3e${nls.hoursLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"60" selected\x3d"selected"\x3e${nls.minutesLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1"\x3e${nls.secondsLabel}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n              \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlGroup"\x3e\r\n          \x3clabel\x3e${nls.rateLabel}\r\n            \x3clabel\x3e\r\n              \x3cdiv class\x3d"controlItem"\x3e\r\n                \x3cinput aria-label\x3d"${nls.rateLabel}" style\x3d\'width: calc(100% - 108px)\' data-dojo-type\x3d\'dijit/form/NumberTextBox\'\r\n                  required\x3d"true" value\x3d"1" data-dojo-props\x3d"constraints: {min: 1}"\r\n                  data-dojo-attach-point\x3d"distanceInput"\x3e\r\n                \x3c/input\x3e\r\n                \x3cselect aria-label\x3d"${nls.rateLabel}" class\x3d"controlSpace noResize"\r\n                  data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"distanceUnitDD"\x3e\r\n                  \x3coption value\x3d"0.3048;1"\x3e${nls.feetSecondsLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"0.3048;3600"\x3e${nls.feetHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1000;1"\x3e${nls.kmSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1000;3600"\x3e${nls.kmHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1;1" selected\x3d"selected"\x3e${nls.metersSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1;3600"\x3e${nls.metersHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1609.344;1"\x3e${nls.milesSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1609.344;3600"\x3e${nls.milesHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1852;1"\x3e${nls.nauticalMilesSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1852;3600"\x3e${nls.nauticalMilesHourLabel}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n              \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e${nls.common.ok}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\'\x3e${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TitlePane.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onTitleClick, onkeydown:_onTitleKey"\r\n\t\t\tclass\x3d"dijitTitlePaneTitle" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\r\n\t\t\x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitInline dijitArrowNode" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"dijitArrowNodeInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\r\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/DistanceAndDirection/templates/TabEllipse.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"ellipseContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.ellipseTypeLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.ellipseTypeLabel}" style\x3d"width: 100%;" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"ellipseType" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption value\x3d"semi"\x3e${nls.ellipseSemiLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"full"\x3e${nls.ellipseFullLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"coordInputLabel"\x3e${nls.centerPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"startPointCoords"\r\n          placeholder\x3d"${nls.startPointPlaceHolderLabel}"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButton" tabindex\x3d"0" role\x3d"button"\r\n              aria-label\x3d"${nls.formatInputLabel}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.drawEllipseLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtn" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.drawEllipseLabel}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3cinput aria-label\x3d"${nls.createEllipseInteractively}" class\x3d"interactive-checkbox esriCTCheckboxObj"\r\n          type\x3d"checkbox" data-dojo-attach-point\x3d"interactiveEllipse" aria-label\x3d"${nls.createEllipseInteractively}" /\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.createEllipseInteractively}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cfieldset\x3e\r\n      \x3clegend\x3e${nls.axisLabel}\x3c/legend\x3e\r\n      \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"majorAxisInputDiv"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"majorAxisLabel"\x3e${nls.majorRadiusLabel}\x3c/label\x3e\r\n        \x3cdiv class\x3d"controlItem"\x3e\r\n          \x3cinput aria-label\x3d"${nls.majorRadiusLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d\'true\' ,\r\n            value\x3d\'100\' , data-dojo-props\x3d"constraints:{min:0.1}" data-dojo-attach-point\x3d"majorAxisInput"\r\n            style\x3d"width: 100%;" /\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"minorAxisInputDiv"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"minorAxisLabel"\x3e${nls.minorRadiusLabel}\x3c/label\x3e\r\n        \x3cdiv class\x3d"controlItem"\x3e\r\n          \x3cinput aria-label\x3d"${nls.minorRadiusLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d\'true\' ,\r\n            value\x3d\'50\' , data-dojo-props\x3d"constraints:{min:0.1}" data-dojo-attach-point\x3d"minorAxisInput"\r\n            style\x3d"width: 100%;" /\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3clabel\x3e${nls.unitLabel}\x3c/label\x3e\r\n        \x3cdiv class\x3d"controlItem"\x3e\r\n          \x3cselect aria-label\x3d"${nls.unitLabel}" style\x3d"width: 100%;" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n            id\x3d"lengthUnitDD" data-dojo-attach-point\x3d"lengthUnitDD"\x3e\r\n            \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n            \x3coption value\x3d"kilometers" selected\x3d"selected"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n            \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n            \x3coption value\x3d"meters"\x3e${nls.units.meters}\x3c/option\x3e\r\n            \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n            \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n          \x3c/select\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.orientationLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"angleInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.orientationLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox" style\x3d"width: calc(100% - 108px);"\r\n          required\x3d\'true\' , value\x3d\'0\' , data-dojo-props\x3d"constraints:{min:0, max:360}"\r\n          data-dojo-attach-point\x3d"angleInput" /\x3e\r\n        \x3cselect aria-label\x3d"${nls.orientationLabel}" style\x3d"width: 100px" class\x3d"controlSpace noResize"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect" id\x3d"angleUnitDD" data-dojo-attach-point\x3d"angleUnitDD"\x3e\r\n          \x3coption value\x3d"degrees"\x3e${nls.degreesLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"mils"\x3e${nls.milsLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel class\x3d"warning"\x3e${nls.warningMessage}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e${nls.common.ok}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\'\x3e${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/templates/TabRange.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"rangeContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.lineTypeLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.lineTypeLabel}" data-dojo-attach-point\x3d"rangeType" style\x3d"width: 100%;"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption selected\x3d"selected" value\x3d"Interactive"\x3e${nls.interactiveLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Fixed"\x3e${nls.fixedLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Origin"\x3e${nls.originLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Cumulative"\x3e${nls.cumulativeLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d\'rangeCenterLabel\'\x3e${nls.centerPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" placeholder\x3d"${nls.startPointPlaceHolderLabel}"\r\n          data-dojo-attach-point\x3d"rangeCenter"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButton" tabindex\x3d"0" role\x3d"button"\r\n              aria-label\x3d"${nls.formatInputLabel}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.addPointLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtn" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.addPointLabel}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup controlGroupHidden" data-dojo-attach-point\x3d"numRingsContainer"\x3e\r\n      \x3clabel\x3e${nls.numberOfRingsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"numRingsDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.numberOfRingsLabel}" data-dojo-attach-point\x3d"numRingsInput" type\x3d"text"\r\n          data-dojo-type\x3d"dijit/form/NumberTextBox" name\x3d"numRings" required\x3d"true" , value\x3d"5"\r\n          data-dojo-props\x3d"constraints:{min:1, max: 100, places: 0}" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup controlGroupHidden" data-dojo-attach-point\x3d"distancebetweenRingsContainer"\x3e\r\n      \x3clabel\x3e${nls.distanceBetweenRingsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"ringIntervalDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.distanceBetweenRingsLabel}" style\x3d"width: calc(100% - 108px);"\r\n          data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d"true" value\x3d"1000"\r\n          data-dojo-props\x3d"constraints:{places: 2}, invalidMessage: \'${nls.ringsDecimalErrorMessage}\'"\r\n          data-dojo-attach-point\x3d"ringIntervalInput" /\x3e\r\n        \x3cselect aria-label\x3d"${nls.distanceBetweenRingsLabel}" data-dojo-attach-point\x3d"ringIntervalUnitsDD"\r\n          style\x3d"width: 100px;" class\x3d"controlSpace noResize" data-dojo-type\x3d"jimu/dijit/formSelect"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"distanceUnitsContainer"\x3e\r\n      \x3clabel\x3e${nls.distanceUnitsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.distanceUnitsLabel}" data-dojo-attach-point\x3d"distanceUnitsDD" style\x3d"width: 100%;"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup controlGroupHidden" data-dojo-attach-point\x3d"distanceTableContainer"\x3e\r\n      \x3cdiv class\x3d"add-with-icon" data-dojo-attach-point\x3d"btnAddDistance" tabindex\x3d"0" role\x3d"button"\r\n        aria-label\x3d"${nls.distancesLabel}"\x3e\r\n        \x3cspan class\x3d"jimu-icon jimu-icon-add" data-dojo-attach-point\x3d"btnAirframeIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"add-label"\x3e${nls.distancesLabel}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"distanceTable" style\x3d"width: 100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"numRadialsContainer"\x3e\r\n      \x3clabel\x3e${nls.numberOfRadialsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"numRadialsInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.numberOfRadialsLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d"false"\r\n          value\x3d"3" data-dojo-props\x3d"constraints:{min: 0, max: 360, places: 0}" style\x3d"width: 100%;"\r\n          data-dojo-attach-point\x3d"numRadialsInput" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttonContainer" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e${nls.common.ok}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\'\x3e${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"mainPageNode"\x3e\r\n\r\n    \x3cdiv id\x3d"DDTabContainer" class\x3d"tabsContainer" data-dojo-attach-point\x3d"DDTabContainer"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"lineTabNode"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"circleTabNode"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"ellipseTabNode"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"rangeTabNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--------\r\n    Publish\r\n  ----------\x3e\r\n  \x3cdiv class\x3d"DDHidden DDFullHeight" data-dojo-attach-point\x3d"publishPageNode"\x3e\r\n    \x3cdiv class\x3d"DDFullWidth DDSettingHeader"\x3e\r\n      \x3cdiv class\x3d"DDBackButton DDPointer" title\x3d"${nls.common.back}" data-dojo-attach-point\x3d"publishPanelBackButton"\r\n        tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.common.back}"\x3e\r\n        \x3cdiv class\x3d"DDItemLeftArrow"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"DDTitleDiv DDEllipsis" title\x3d"${nls.publishTitle}"\x3e\r\n        ${nls.publishTitle}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"DDPanelRow"\x3e\r\n        \x3c!-- DD Layer Name --\x3e\r\n        \x3cdiv class\x3d"DDFullWidth DDSettingRow"\x3e\r\n          \x3cdiv class\x3d"DDInputLabel DDEllipsis" title\x3d"${nls.ddLayerName}"\x3e${nls.ddLayerName}\x3c/div\x3e\r\n          \x3cinput class\x3d"jimu-input textInput DDHidden" style\x3d"width: 100%;"\r\n            data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"addDDNameArea"\r\n            data-dojo-props\x3d"regExp:\'[a-zA-Z0-9_ -]*\'" required\x3d"true" aria-label\x3d"${nls.ddLayerName}"\r\n            trim\x3d"true"\x3e\x3c/input\x3e\r\n          \x3cselect class\x3d"SelectStyle" aria-label\x3d"${nls.ddLayerName}" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n            tabindex\x3d"0" data-dojo-attach-point\x3d"featureLayerList"\x3e\x3c/select\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3c!-- Publish to new layer --\x3e\r\n        \x3cdiv class\x3d"DDFullWidth DDSettingRow"\x3e\r\n          \x3cdiv class\x3d"DDCheckBoxNode" data-dojo-attach-point\x3d"checkBoxParentContainer"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Publish DD Button --\x3e\r\n        \x3cdiv class\x3d"ddBtnContainer"\x3e\r\n          \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'ddPublishButton\' tabindex\x3d"0" role\x3d"button"\r\n            aria-label\x3d"${nls.publishDDBtn}"\x3e${nls.publishDDBtn}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Publishing Message --\x3e\r\n        \x3cdiv class\x3d"ddPublishMessage" data-dojo-attach-point\x3d"publishMessage"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/css/style.css":'.jimu-widget-DistanceAndDirection .jimu-state-active {background-color: #c0c0c0 !important;}.jimu-widget-DistanceAndDirection .tabsContainer {border: 1px solid #838383;}.jimu-widget-DistanceAndDirection .selectInput {width: 119px;}.jimu-widget-DistanceAndDirection .coordInput {width: 225px; height: 32px;}.jimu-widget-DistanceAndDirection .dijitTitlePaneContentOuter {background-color: transparent;}.jimu-widget-DistanceAndDirection .dijitTextBox .dijitInputInner {text-align: left; height: 20px; line-height: 0px !important;}.jimu-widget-DistanceAndDirection .dijitTextBox {width: 100%;}.jimu-widget-DistanceAndDirection .tabPanel fieldset {border: 1px solid #ccc; padding: 6px; margin-top: 10px;}.jimu-widget-DistanceAndDirection .tabPanel fieldset\x3ediv {margin: 3px;}.jimu-widget-DistanceAndDirection .tabPanel fieldset\x3ediv\x3elabel {width: 50px; display: inline-block;}.jimu-widget-DistanceAndDirection .controls {display: inline-block; width: 100%; padding: 0 5px;}.jimu-widget-DistanceAndDirection .ddBtnContainer {width: 100%; text-align: center; padding: 10px 0px 10px 0px;}.jimu-widget-DistanceAndDirection .controlItem {display: flex;}.jimu-widget-DistanceAndDirection .controlGroup {margin-top: 13px; margin-bottom: 13px;}.jimu-widget-DistanceAndDirection .DDHidden {display: none;}.jimu-widget-DistanceAndDirection .controlGroup .warning {color: #f00; font-weight: bold; width: 100%; display: inline-block;}.jimu-widget-DistanceAndDirection .controlGroup .controlGroupChild {margin-top: 6px;}.jimu-widget-DistanceAndDirection .controlGroup .splitRight {position: absolute; right: 25px;}.jimu-widget-DistanceAndDirection .controlGroup\x3elabel {width: 100px;}.jimu-widget-DistanceAndDirection .controlSpace {margin-left: 6px;}.jimu-widget-DistanceAndDirection .noResize .dijitSelectLabel,.jimu-widget-DistanceAndDirection .noResize .dijitTextBox .dijitInputInner,.jimu-widget-DistanceAndDirection .noResize.dijitValidationTextBox .dijitValidationContainer {text-overflow: ellipsis; overflow: hidden; width: 58px; text-align: left; margin-top: 5px;}.jimu-widget-DistanceAndDirection .dijitSelectLabel {overflow: hidden; white-space: nowrap; text-overflow: ellipsis; width: 215px; text-align: left; margin-top: 5px;}.jimu-widget-DistanceAndDirection .label {font-size: 12px !important; margin: auto 5px; cursor: default; width: calc(100% - 45px);}.jimu-widget-DistanceAndDirection .DDCheckBoxNode .jimu-checkbox {width: 100%;}.jimu-widget-DistanceAndDirection .numberTextBox {width: 98%; height: 25px; margin-bottom: 2px; border: none;}.jimu-widget-DistanceAndDirection .add-with-icon {display: inline-block; height: 32px; color: #838383; padding-right: 5px;}.jimu-widget-DistanceAndDirection .drawPointBtn {background: url(./images/draw_black.png); background-repeat: no-repeat; background-color: transparent; width: 12px; height: 16px; margin-top: 2px; margin-left: 2px;}.jimu-widget-DistanceAndDirection .drawPointBtn:hover {background: url(./images/draw_black_hover.png); background-repeat: no-repeat; background-color: transparent;}.jimu-widget-DistanceAndDirection .drawPointBtn-active {background: url(./images/draw_black_hover.png); background-repeat: no-repeat; background-color: transparent;}.jimu-widget-DistanceAndDirection .settingBtn {background: url(./images/settings_black.png); background-repeat: no-repeat; background-color: transparent; width: 15px; height: 15px; margin-left: 2px; margin-top: 2px;}.jimu-widget-DistanceAndDirection .InputLabel {float: left; line-height: 28px; padding: 5px 0px 0px 0px; width: 100%;}.jimu-widget-DistanceAndDirection .DDCheckBoxNode {padding-top: 10px; width: 100%;}@media screen and (min-color-index: 0) and (-webkit-min-device-pixel-ratio: 0) {@media {.jimu-widget-DistanceAndDirection .settingBtn .safariOnly {margin-bottom: 15px;}}}@media not all and (min-resolution: 0.001dpcm) {@supports (-webkit-appearance: none) and (stroke-color: transparent) {.jimu-widget-DistanceAndDirection .settingBtn .safariOnly {margin-bottom: 15px;}}}.jimu-widget-DistanceAndDirection .settingBtn:hover {background: url("./images/settings_black_hover.png");}.jimu-widget-DistanceAndDirection .add-with-icon .draw .hidden {display: none;}.jimu-widget-DistanceAndDirection .jimu-tab3 .tab-item-td {border-bottom: 0px; width: 24%;}.jimu-widget-DistanceAndDirection .jimu-tab3 .tab-item-td.jimu-state-active {border: 1px solid #24b5cc; background-color: transparent !important;}.jimu-widget-DistanceAndDirection .controlItem .paddedLeft {padding: 5px 0px 0px 7px;}.jimu-widget-DistanceAndDirection .disabledLabel {color: #c0c0c0 !important;}.jimu-widget-DistanceAndDirection .jimu-simple-table .head-section {background-color: rgba(255, 255, 255, 0.1); border: 1px solid #eef2f5;}.jimu-widget-DistanceAndDirection .jimu-simple-table .simple-table-title {color: #000;}.DartTheme .jimu-widget-DistanceAndDirection .dijitSelectDisabled,.DartTheme .jimu-widget-DistanceAndDirection .dijitTextBoxDisabled,.DartTheme .jimu-widget-DistanceAndDirection .dijitTextBoxDisabled .dijitInputContainer,.DartTheme .jimu-widget-DistanceAndDirection .dijitTextBoxDisabled {background-color: #4c4c4c;}.DartTheme .jimu-widget-DistanceAndDirection .jimu-state-active {background-color: #3c2d2d !important;}.DartTheme .jimu-widget-DistanceAndDirection .dijitTitlePaneTitleOpen,.DartTheme .jimu-widget-DistanceAndDirection .dijitTitlePaneTitleFixedOpen {background-color: #272727;}.DartTheme .jimu-widget-DistanceAndDirection .dijitTitlePaneTitle {background-color: #272727; background-image: linear-gradient(rgb(103, 103, 103) 0%, rgba(255, 255, 255, 0) 100%);}.DartTheme .jimu-widget-DistanceAndDirection .controlGroup .warning {font-weight: normal;}.DartTheme .jimu-widget-DistanceAndDirection .jimu-tab3 .tab-item-td.jimu-state-active {font-weight: normal;}.DartTheme .jimu-widget-DistanceAndDirection .disabledLabel {color: #c0c0c0 !important;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipContainer {background-color: #4c4c4c; background-image: -webkit-linear-gradient(bottom, rgb(76, 76, 76) 0px, #4c4c4c 10px); border: 1px solid #ffffff; color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .jimu-widget-subtitle {color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipConnector {background-image: url("./images/tooltip.png");}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitDialogPaneContent {background-color: #222; border: 0px solid #9a9a9a; color: #fff;}.btnContainer {text-align: right; margin-top: 6px;}.jimu-rtl .btnContainer {text-align: left;}.settingsContainer {margin-top: 6px;}.controlContainer {margin-top: 6px;}.DartTheme .jimu-widget-DistanceAndDirection .drawPointBtn {background: url("./images/draw_white.png"); background-repeat: no-repeat; background-color: transparent; width: 12px; height: 16px;}.DartTheme .jimu-widget-DistanceAndDirection .drawPointBtn:hover {background: url("./images/draw_white_hover.png"); background-repeat: no-repeat; background-color: transparent;}.DartTheme .jimu-widget-DistanceAndDirection .drawPointBtn-active {background: url("./images/draw_white_hover.png"); background-repeat: no-repeat; background-color: transparent;}.DartTheme .jimu-widget-DistanceAndDirection .settingBtn {background: url(./images/settings_white.png); background-repeat: no-repeat; background-color: transparent;}.DartTheme .jimu-widget-DistanceAndDirection .settingBtn:hover {background: url("./images/settings_white_hover.png");}.DartTheme .jimu-widget-DistanceAndDirection .disabledLabel {color: #7b7b7b !important;}.DartTheme .jimu-simple-table .simple-table-row .editable-div,.jimu-simple-table .simple-table-row .normal-text-div {color: #ffffff !important;}.DartTheme .jimu-simple-table .simple-table-row .editable-input {color: #000000 !important; background-color: rgba(255, 255, 255, 0.1);}.jimu-tab\x3e.control\x3e.tab.jimu-state-selected {border-bottom: 1px solid #ccc !important; border-right: 0px solid #fff !important; border-left: 0px solid #fff !important; border-top: 0px solid #fff !important; background-color: transparent !important; font-size: 12px;}.formatInput {width: 200px; height: 40px; opacity: 0.99; background: #ffffff; border: 1px solid #999999; color: #000000; padding: 0 4px 0 4px;}.selectFormat {width: 160px; height: 40px !important; opacity: 0.99; background: #ffffff !important; border: 1px solid #999999 !important; color: #000000; padding: 0 4px 0 4px; margin: 0px 2px 3px 2px;}.selectFormat .dijitSelectLabel {text-overflow: ellipsis; overflow: hidden; width: 100px; text-align: left; padding-top: 8px;}.formatText {font-size: 12px; letter-spacing: 0.39px; line-height: 19px; color: #000000; padding: 0 3px 0 3px;}.jimu-widget-DistanceAndDirection .drawPointBtn:focus {outline: 2px solid #24b5cc !important;}.esriCTDropdownObj:focus {outline: 2px solid #24b5cc !important;}.esriCTCheckboxObj:focus {outline: 2px solid #24b5cc !important;}.esriCTButtonObj:focus {outline: 2px solid #24b5cc !important;}.esriCTInputObj:focus {outline: 2px solid #24b5cc !important;}.jimu-widget-DistanceAndDirection .settingBtn:focus {outline: 2px solid #24b5cc !important;}.jimu-widget-DistanceAndDirection .DDFullHeight {height: 100%;}.jimu-widget-DistanceAndDirection .DDFullWidth {width: 100%;}.jimu-widget-DistanceAndDirection .DDSettingHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-DistanceAndDirection .DDBackButton {overflow: hidden; width: 15px; float: left;}.jimu-widget-DistanceAndDirection .DDTitleDiv {line-height: 10px; font-weight: bold; text-align: center; width: calc(100% - 50px); padding: 5px; display: inline-block;}.jimu-widget-DistanceAndDirection .DDItemLeftArrow {background-image: url(\'./images/left-arrow_black.png\'); float: left; width: 15px; height: 20px; background-repeat: no-repeat; background-position: center center;}.jimu-widget-DistanceAndDirection .DDItemLeftArrow:hover {background-image: url(\'./images/left-arrow_black_hover.png\');}.jimu-widget-DistanceAndDirection .DDEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-DistanceAndDirection .DDPublishMessage {float: left; line-height: 16px; padding: 18px 0px 0px 0; font-weight: bold; display: inline-block; word-break: break-all;}.jimu-widget-DistanceAndDirection .DDPointer {cursor: pointer;}.jimu-widget-DistanceAndDirection .DDPanelRow {margin: 10px 10px 10px 10px; display: block;}.jimu-widget-DistanceAndDirection .DDSettingRow {padding-bottom: 6px; padding-top: 6px;}.jimu-widget-DistanceAndDirection .DDInputLabel {float: left; padding: 5px 5px 5px 0px;}.jimu-widget-DistanceAndDirection .SelectStyle {height: 30px; color: #7d7d7d; padding-left: 5px; font-size: 13px; width: 100%; font-family: \'Avenir Medium\'; margin: 0 0 8px 0;}.jimu-widget-DistanceAndDirection .DDToggleLabel {float: left; width: calc(100% - 35px); padding: 5px 5px 0px 0;}.btnContainer {text-align: right; margin-top: 15px;}.jimu-widget-DistanceAndDirection .DDBtnContainer {text-align: right; margin-top: 15px; display: grid;}.jimu-widget-DistanceAndDirection .jimu-btn {margin-bottom: 6px; width: 100%;}.jimu-rtl .jimu-widget-DistanceAndDirection .DDInputLabel {float: right; padding: 7px 5px 0px 0px;}.jimu-rtl .jimu-widget-DistanceAndDirection .DDSettingRow {padding-right: 2px;}.jimu-rtl .jimu-widget-DistanceAndDirection .DDToggleLabel {float: right; padding: 1px 0 0 0;}.jimu-rtl .jimu-widget-DistanceAndDirection .DDBtnContainer {padding-right: 2px;}.jimu-rtl .jimu-widget-DistanceAndDirection .dijitTextBox .dijitInputInner {text-align: right;}@-moz-document url-prefix() {.formatInput {width: 200px; height: 41.5px; opacity: 0.99; background: #ffffff; border: 1px solid #999999; color: #000000; padding: 0 4px 0 4px;}}@supports (-ms-ime-align:auto) {.formatInput {width: 200px; height: 41.5px; opacity: 0.99; background: #ffffff; border: 1px solid #999999; color: #000000; padding: 0 4px 0 4px;}}_:-ms-fullscreen,:root .formatInput {width: 200px; height: 41.5px; opacity: 0.99; background: #ffffff; border: 1px solid #999999; color: #000000; padding: 0 4px 0 4px;}',
"*now":function(P){P(['dojo/i18n!*preload*widgets/DistanceAndDirection/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/array dojo/aspect dojo/query dojo/topic dojo/dom-attr dojo/json dijit/_WidgetsInTemplateMixin dijit/registry jimu/BaseWidget jimu/dijit/TabContainer3 jimu/utils ./views/TabLine ./views/TabCircle ./views/TabEllipse ./views/TabRange dojo/_base/lang dojo/on dojo/dom-class dojo/dom-style dojo/keys jimu/dijit/CheckBox dojo/dom-construct jimu/LayerStructure esri/arcgis/Portal ./js/portal-utils jimu/LayerInfos/LayerInfos esri/dijit/util/busyIndicator esri/graphic esri/layers/FeatureLayer esri/renderers/SimpleRenderer dijit/focus ./js/jquery.easy-autocomplete".split(" "),function(P,
e,E,h,b,q,k,d,l,x,C,c,a,r,m,p,y,f,I,J,B,N,R,O,S,T,Q,t,n,w,K,M){return P([x,d],{baseClass:"jimu-widget-DistanceAndDirection",_lastOpenPanel:"mainPage",_currentOpenPanel:"mainPage",_lineLayerList:[],_polygonLayerList:[],_renderer:null,_addLayerToMap:!0,_typeOfInput:null,_graphicsAdded:[],_curretfieldTypeObj:{},postMixInProperties:function(){this.nls.common={};y.mixin(this.nls.common,window.jimuNls.common)},_reset:function(){this.config.feedback.lineSymbol.showTab&&this.lineTab.clearGraphics();this.config.feedback.circleSymbol.showTab&&
this.circleTab.clearGraphics();this.config.feedback.ellipseSymbol.showTab&&this.ellipseTab.clearGraphics();this.config.feedback.rangeRingSymbol.showTab&&this.rangeTab.clearGraphics();this.map.enableMapNavigation();this._graphicsAdded=[];this._curretfieldTypeObj={}},postCreate:function(){this.openAtStartAysn=!0;this.config.hasOwnProperty("operationalLineLayer")||(this.config.operationalLineLayer={name:""});this.config.hasOwnProperty("operationalPolygonLayer")||(this.config.operationalPolygonLayer=
{name:""});String.prototype.format||(String.prototype.format=function(){var u=arguments;return this.replace(/{(\d+)}/g,function(F,H){return"undefined"!==typeof u[H]?u[H]:F})});P.safeMixin(this.nls,window.jimuNls);this.config.feedback||(this.config.feedback={});this.config.feedback.lineSymbol.showTab&&(this.lineTab=new a({"attr-name":"line",map:this.map,appConfig:this.appConfig,lineSymbol:this.config.feedback.lineSymbol||{type:"esriSLS",style:"esriSLSSolid",color:[255,50,50,255],width:1.25},pointSymbol:this.config.feedback.pointSymbol||
{color:[255,255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,0,0,255],verticalAlignment:"middle",horizontalAlignment:"center",xoffset:0,yoffset:0,kerning:!0,font:{family:"arial",size:12,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},this.lineTabNode));this.config.feedback.circleSymbol.showTab&&(this.circleTab=
new r({"attr-name":"circle",map:this.map,appConfig:this.appConfig,circleSymbol:this.config.feedback.circleSymbol||{type:"esriSFS",style:"esriSFSNull",color:[255,0,0,0],outline:{color:[255,50,50,255],width:1.25,type:"esriSLS",style:"esriSLSSolid"}},pointSymbol:this.config.feedback.pointSymbol||{color:[255,255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,
0,0,255],verticalAlignment:"middle",horizontalAlignment:"center",xoffset:0,yoffset:0,kerning:!0,font:{family:"arial",size:12,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},this.circleTabNode));this.config.feedback.ellipseSymbol.showTab&&(this.ellipseTab=new m({"attr-name":"ellipse",map:this.map,appConfig:this.appConfig,ellipseSymbol:this.config.feedback.ellipseSymbol||{type:"esriSFS",style:"esriSFSNull",color:[255,0,0,125],outline:{color:[255,50,50,255],width:1.25,
type:"esriSLS",style:"esriSLSSolid"}},pointSymbol:this.config.feedback.pointSymbol||{color:[255,255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,0,0,255],verticalAlignment:"middle",horizontalAlignment:"center",xoffset:0,yoffset:0,kerning:!0,font:{family:"arial",size:12,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},
this.ellipseTabNode));this.config.feedback.rangeRingSymbol.showTab&&(this.rangeTab=new p({"attr-name":"range",map:this.map,appConfig:this.appConfig,pointSymbol:this.config.feedback.pointSymbol||{color:[255,255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},circleSymbol:{type:"esriSFS",style:"esriSFSNull",color:[255,0,0,0],outline:{color:[255,50,50,255],width:1.25,type:"esriSLS",style:"esriSLSSolid"}},lineSymbol:this.config.feedback.rangeRingSymbol||
{type:"esriSLS",style:"esriSLSSolid",color:[255,50,50,255],width:1.25},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,0,255,255],verticalAlignment:"middle",horizontalAlignment:"center",xoffset:0,yoffset:0,kerning:!0,font:{family:"arial",size:6,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},this.RangeTabContainer));var v=[];this.config.feedback.lineSymbol.showTab&&v.push({title:this.nls.tabLineTitle,content:this.lineTab});this.config.feedback.circleSymbol.showTab&&
v.push({title:this.nls.tabCircleTitle,content:this.circleTab});this.config.feedback.ellipseSymbol.showTab&&v.push({title:this.nls.tabEllipseTitle,content:this.ellipseTab});this.config.feedback.rangeRingSymbol.showTab&&v.push({title:this.nls.tabRingsTitle,content:this.rangeTab});this.tab=new C({tabs:v},this.DDTabContainer);v=l.byId("DDTabContainer");E.after(v,"selectTab",y.hitch(this,function(){b.publish("TAB_SWITCHED");this._setAccessibility()}));this._lineLayerList=this._getAllMapLayers("esriGeometryPolyline");
this._polygonLayerList=this._getAllMapLayers("esriGeometryPolygon");this._layerList=this._lineLayerList.concat(this._polygonLayerList);this.setTabTitle(v.domNode);this.config.feedback.lineSymbol.showTab&&this.own(this.lineTab.on("show-publish",y.hitch(this,function(u){this._graphicsAdded=u._graphicsVal;this._typeOfInput="line";this._curretfieldTypeObj={Distance:"esriFieldTypeDouble",Unit:"esriFieldTypeString",Angle:"esriFieldTypeDouble",StartPoint:"esriFieldTypeString",EndPoint:"esriFieldTypeString",
AngleUnit:"esriFieldTypeString"};this._populateSelectList(this.featureLayerList,this._lineLayerList,this.config.operationalLineLayer.name);this._showPanel("publishPage")})));this.config.feedback.circleSymbol.showTab&&this.own(this.circleTab.on("show-publish",y.hitch(this,function(u){this._graphicsAdded=u._graphicsVal;this._typeOfInput="circle";this._curretfieldTypeObj={CenterPoint:"esriFieldTypeString",RadiusDistance:"esriFieldTypeDouble",RadiusUnit:"esriFieldTypeString"};this._populateSelectList(this.featureLayerList,
this._polygonLayerList,this.config.operationalPolygonLayer.name);this._showPanel("publishPage")})));this.config.feedback.ellipseSymbol.showTab&&this.own(this.ellipseTab.on("show-publish",y.hitch(this,function(u){this._graphicsAdded=u._graphicsVal;this._typeOfInput="ellipse";this._curretfieldTypeObj={CenterPoint:"esriFieldTypeString",MajorAxis:"esriFieldTypeDouble",MinorAxis:"esriFieldTypeDouble",Unit:"esriFieldTypeString",Orientation:"esriFieldTypeDouble",OrientationUnit:"esriFieldTypeString"};this._populateSelectList(this.featureLayerList,
this._polygonLayerList,this.config.operationalPolygonLayer.name);this._showPanel("publishPage")})));this.config.feedback.rangeRingSymbol.showTab&&this.own(this.rangeTab.on("show-publish",y.hitch(this,function(u){this._graphicsAdded=u._graphicsVal;this._typeOfInput="ring";this._curretfieldTypeObj={CenterPoint:"esriFieldTypeString",Rings:"esriFieldTypeDouble",Radials:"esriFieldTypeDouble",RadiusDistance:"esriFieldTypeDouble",RadiusUnit:"esriFieldTypeString"};this._populateSelectList(this.featureLayerList,
this._lineLayerList,this.config.operationalLineLayer.name);this._showPanel("publishPage")})));this.publishNewLayer=new N({checked:!1,label:this.nls.publishToNewLayer},R.create("div",{},this.checkBoxParentContainer));this.addDDNameArea.invalidMessage=this.nls.invalidLayerName;this.addDDNameArea.missingMessage=this.nls.missingLayerNameMessage;this.own(f(this.featureLayerList,"change",y.hitch(this,function(){this.resize()})))},startup:function(){this.busyIndicator=t.create({target:this.domNode.parentNode.parentNode.parentNode,
backgroundOpacity:0});this._setTheme();this._handleClickEvents();setTimeout(y.hitch(this,function(){this.getParent().domNode.scrollTop=0;this._setAccessibility()}),100)},setTabTitle:function(v){v=h(".tab-item-div",v);e.forEach(v,function(u){q.set(u,"title",u.innerHTML)})},resize:function(){var v=h(".dijitValidationTextBoxLabel",this.featureLayerList.domNode);0<v.length&&J.set(v[0],"width",this.ddPublishButton.clientWidth-44+"px")},onClose:function(){b.publish("DD-WIDGET-CLOSED")},_removeStyleFile:function(v,
u){var F=null;F="js"===u?"src":"css"===u?"href":"none";u=document.getElementsByTagName("js"===u?"script":"css"===u?"link":"none");for(var H=u.length;0<=H;H--)u[H]&&null!==u[H].getAttribute(F)&&-1!==u[H].getAttribute(F).indexOf(v)&&u[H].parentNode.removeChild(u[H])},_setTheme:function(){"DartTheme"===this.appConfig.theme.name?c.loadStyleLink("dartOverrideCSS",this.folderUrl+"css/dartTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dartTheme.css","css");"DashboardTheme"===this.appConfig.theme.name&&
"default"===this.appConfig.theme.styles[0]?c.loadStyleLink("darkDashboardOverrideCSS",this.folderUrl+"css/dashboardTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dashboardTheme.css","css");"LaunchpadTheme"===this.appConfig.theme.name?c.loadStyleLink("launchpadOverrideCSS",this.folderUrl+"css/launchpadTheme.css",null):this._removeStyleFile(this.folderUrl+"css/launchpadTheme.css","css")},_setAccessibility:function(){this._setFocus()},_setFocus:function(){this._setFirstFocusNode();this._setLastFocusNode();
this._focusFirstNodeOfWidgetOrTab();"publishPage"===this._currentOpenPanel&&this._publishPageAccessible()},_publishPageAccessible:function(){c.initFirstFocusNode(this.domNode,this.publishPanelBackButton);M.focus(this.publishPanelBackButton);""===this.publishMessage.innerHTML?c.initLastFocusNode(this.domNode,this.ddPublishButton):c.initLastFocusNode(this.domNode,this.publishMessage)},_setFirstFocusNode:function(){var v=this.tab.getSelectedTitle();switch(v){case this.nls.tabLineTitle:this._setSelectedTabAsFirstFocusNode(v);
break;case this.nls.tabCircleTitle:this._setSelectedTabAsFirstFocusNode(v);break;case this.nls.tabEllipseTitle:this._setSelectedTabAsFirstFocusNode(v);break;case this.nls.tabRingsTitle:this._setSelectedTabAsFirstFocusNode(v)}},_setLastFocusNode:function(){switch(this.tab.getSelectedTitle()){case this.nls.tabLineTitle:this.lineTab.setLastFocusNode();break;case this.nls.tabCircleTitle:this.circleTab.setLastFocusNode();break;case this.nls.tabEllipseTitle:this.ellipseTab.setLastFocusNode();break;case this.nls.tabRingsTitle:this.rangeTab.setLastFocusNode()}},
_focusFirstNodeOfWidgetOrTab:function(){switch(this.tab.getSelectedTitle()){case this.nls.tabLineTitle:c.isAutoFocusFirstNodeWidget(this)&&this.lineTab.focusFirstNodeOfSelectedTab();break;case this.nls.tabCircleTitle:c.isAutoFocusFirstNodeWidget(this)&&this.circleTab.focusFirstNodeOfSelectedTab();break;case this.nls.tabEllipseTitle:c.isAutoFocusFirstNodeWidget(this)&&this.ellipseTab.focusFirstNodeOfSelectedTab();break;case this.nls.tabRingsTitle:c.isAutoFocusFirstNodeWidget(this)&&this.rangeTab.focusFirstNodeOfSelectedTab()}},
_setSelectedTabAsFirstFocusNode:function(v){if(this.tab&&this.tab.controlNode){var u=h(".tab-item-td",this.tab.controlNode);e.forEach(u,y.hitch(this,function(F){F&&F.children&&F.children[0]&&F.children[0].innerHTML===v&&c.initFirstFocusNode(this.domNode,F)}))}},_handleClickEvents:function(){this.own(f(this.publishPanelBackButton,"click",y.hitch(this,this._publishPanelBackButtonClicked)));this.own(f(this.publishPanelBackButton,"keydown",y.hitch(this,function(v){v.keyCode!==B.ENTER&&v.keyCode!==B.SPACE||
this._publishPanelBackButtonClicked()})));this.own(f(this.ddPublishButton,"click",y.hitch(this,this._ddPublishButtonClicked)));this.own(f(this.ddPublishButton,"keydown",y.hitch(this,function(v){v.keyCode!==B.ENTER&&v.keyCode!==B.SPACE||this._ddPublishButtonClicked()})));this.own(f(this.publishNewLayer,"click",y.hitch(this,this._onCheckboxClicked)));this.own(f(this.publishNewLayer,"change",y.hitch(this,this._onCheckboxClicked)));this.own(f(this.publishNewLayer,"keydown",y.hitch(this,function(v){v.keyCode!==
B.ENTER&&v.keyCode!==B.SPACE||this._onCheckboxClicked()})))},_onCheckboxClicked:function(){this.publishNewLayer.checked?(I.add(this.featureLayerList.domNode,"DDHidden"),I.remove(this.addDDNameArea.domNode,"DDHidden"),this.addDDNameArea.reset(),this.addDDNameArea.focus()):(I.add(this.addDDNameArea.domNode,"DDHidden"),I.remove(this.featureLayerList.domNode,"DDHidden"));this._addLayerToMap=this.publishNewLayer.checked},_ddPublishButtonClicked:function(){if(this.publishNewLayer.checked&&!this.addDDNameArea.isValid())this.publishMessage.innerHTML=
this.nls.missingLayerNameMessage;else{this.publishMessage.innerHTML="";var v={layerName:this.publishNewLayer.checked?this.addDDNameArea.value:this.featureLayerList.getValue(),url:"",itemId:"",serviceItemId:""};if(!this.publishNewLayer.checked){var u=this._layerList.filter(function(F){return F.name===v.layerName},this);1===u.length&&(v.url=u[0].url,v.itemId=u[0].id,v.serviceItemId=k.parse(u[0]._json).serviceItemId)}this._initSaveToPortal(v)}},_isValidDDLayerName:function(v){var u=!1,F=this._findRestrictedChars(v,
this.restrictedCharlist+" ");F&&0<F.length?u=!1:this._isLayerNameValid(v)?v&&0<v.length&&(u=!0):u=!1;return u},_findRestrictedChars:function(v,u){var F="",H;if(v&&u)for(H=0;H<u.length;H++){var z=u.charAt(H);-1!==v.indexOf(z)&&(" "===z&&(z="spaces"),F=0===F.length?z:F+(" "+z))}return F},_isLayerNameValid:function(v){var u=/^\./,F=/^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i;return/^[^\\/:\*\?"<>\|()]+$/.test(v)&&!u.test(v)&&!F.test(v)},getAttributesToSave:function(v){var u={},F=Object.keys(this._curretfieldTypeObj);
e.forEach(F,y.hitch(this,function(H){u[H]=v[H]}));return u},_initSaveToPortal:function(v){var u=v.layerName;(new S.Portal(this.appConfig.portalUrl)).signIn().then(y.hitch(this,function(F){var H=F.credential.token,z=F.orgId,G=F.username;if("org_user"===F.role)this.publishMessage.innerHTML=c.sanitizeHTML(this.nls.createService.format(this.nls.userRole)),this._setFocus();else if(v.url){F=new w(v.url+"?token\x3d"+H,{id:v.layerName,outFields:["*"]});F._wabProperties={itemLayerInfo:{portalUrl:this.appConfig.portalUrl,
itemId:v.itemId}};this.busyIndicator.show();var U=[];this._graphicsAdded.forEach(function(g){if(void 0!==g.attributes&&!g.attributes.hasOwnProperty("isDirectionalGraphic")){var L=this.getAttributesToSave(g.attributes);U.push(new n(g.geometry,null,L))}},this);F.applyEdits(U,null,null).then(y.hitch(this,function(){b.publish("moveMap",!1);this.publishMessage.innerHTML=this.nls.successfullyPublished.format('\x3cbr /\x3e\x3ca href\x3d"'+this.appConfig.portalUrl+"home/item.html?id\x3d"+v.serviceItemId+
'" target\x3d"_blank"\x3e')+"\x3c/a\x3e";this._setFocus();this._reset();this.busyIndicator.hide()})).otherwise(y.hitch(this,function(g){this.publishMessage.innerHTML=g.message;this._setFocus();this.busyIndicator.hide();this._reset()}));this._setFocus()}else{var D=this.appConfig.portalUrl+"sharing/content/users/"+G+"/createService";T.isNameAvailable(this.appConfig.portalUrl+"sharing/rest/portals/"+z+"/isServiceNameAvailable",H,u).then(y.hitch(this,function(g){g.available?(this.busyIndicator.show(),
T.createFeatureService(D,H,T.getFeatureServiceParams(u,this.map)).then(y.hitch(this,function(L){if(L.success){var W=L.serviceurl.replace(/rest/g,"rest/admin")+"/addToDefinition";T.addDefinitionToService(W,H,T.getLayerParams(u,this.map,this.getRenderer(),this.getGeometryTypeAndFields())).then(y.hitch(this,function(X){if(X.success){X=new w(L.serviceurl+"/0?token\x3d"+H,{id:u,outFields:["*"]});X._wabProperties={itemLayerInfo:{portalUrl:this.appConfig.portalUrl,itemId:L.itemId}};this.map.addLayer(X);
if(X.loaded){var ba=Q.getInstanceSync().getLayerInfoById(u);ba.enablePopup()}else X.on("load",y.hitch(this,function(){ba=Q.getInstanceSync().getLayerInfoById(u);ba.enablePopup()}));var ea=[];e.forEach(this._graphicsAdded,function(da){if(void 0!==da.attributes&&!da.attributes.hasOwnProperty("isDirectionalGraphic")){var A=this.getAttributesToSave(da.attributes);ea.push(new n(da.geometry,null,A))}},this);X.applyEdits(ea,null,null).then(y.hitch(this,function(){this.busyIndicator.hide();this.publishMessage.innerHTML=
this.nls.successfullyPublished.format('\x3cbr /\x3e\x3ca role\x3d"link" tabindex\x3d0 aria-label\x3d"'+this.nls.successfullyPublished+'" href\x3d"'+this.appConfig.portalUrl+"home/item.html?id\x3d"+L.itemId+'" target\x3d"_blank"\x3e')+"\x3c/a\x3e";this._setFocus();this._reset()})).otherwise(y.hitch(this,function(da){this.publishMessage.innerHTML=da.message;this._setFocus();this.busyIndicator.hide();this._reset()}))}}),y.hitch(this,function(X){this.busyIndicator.hide();this.publishMessage.innerHTML=
c.sanitizeHTML(this.nls.addToDefinition.format(X.message));this._setFocus()}))}else this.busyIndicator.hide(),this.publishMessage.innerHTML=c.sanitizeHTML(this.nls.unableToCreate.format(u)),this._setFocus()}),y.hitch(this,function(L){this.busyIndicator.hide();this.publishMessage.innerHTML=c.sanitizeHTML(this.nls.createService.format(L.message));this._setFocus()}))):(this.busyIndicator.hide(),this.publishMessage.innerHTML=this.nls.layerNameExists);this._setFocus()}))}}),y.hitch(this,function(F){this.busyIndicator.hide();
this.publishMessage.innerHTML=F.message;this._setFocus()}))},getRenderer:function(){var v={type:"simple"};switch(this._typeOfInput){case "line":v.symbol=this.lineTab.lineSymbol;break;case "circle":v.symbol=this.circleTab.circleSymbol;break;case "ellipse":v.symbol=this.ellipseTab.ellipseSymbol;break;case "ring":v.symbol=this.rangeTab.lineSymbol}return new K(v)},getGeometryTypeAndFields:function(){var v={};switch(this._typeOfInput){case "line":return v.type="esriGeometryPolyline",v.fields=[{name:"OBJECTID",
type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"StartPoint",alias:this.nls.startPointLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"EndPoint",alias:this.nls.endPointLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},
{name:"Distance",alias:this.nls.distanceLabel,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"Unit",alias:this.nls.unitLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"Angle",alias:this.nls.angleLabel,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"AngleUnit",alias:this.nls.angleUnitLabel,type:"esriFieldTypeString",
nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"}],v;case "circle":return v.type="esriGeometryPolygon",v.fields=[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"CenterPoint",alias:this.nls.centerPointLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},
{name:"RadiusDistance",alias:this.nls.radiusDistance,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"RadiusUnit",alias:this.nls.radiusUnit,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"}],v;case "ellipse":return v.type="esriGeometryPolygon",v.fields=[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!0,editable:!0,
domain:null,defaultValue:null},{name:"CenterPoint",alias:this.nls.centerPointLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"MajorAxis",alias:this.nls.ellipseMajorAxis,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"MinorAxis",alias:this.nls.ellipseMinorAxis,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"Unit",alias:this.nls.unitLabel,
type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"Orientation",alias:this.nls.orientationLabel,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"OrientationUnit",alias:this.nls.orientationUnit,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"}],v;case "ring":return v.type="esriGeometryPolyline",
v.fields=[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"CenterPoint",alias:this.nls.centerPointLabel,type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"},{name:"Rings",alias:this.nls.rings,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"Radials",alias:this.nls.radials,
type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"RadiusDistance",alias:this.nls.radiusDistance,type:"esriFieldTypeDouble",nullable:!0,editable:!0,domain:null,defaultValue:null},{name:"RadiusUnit",alias:"RadiusUnit",type:"esriFieldTypeString",nullable:!0,editable:!0,domain:null,defaultValue:null,length:50,actualType:"nvarchar",sqlType:"sqlTypeNVarchar"}],v}},_publishPanelBackButtonClicked:function(){this.publishMessage.innerHTML="";this.addDDNameArea.setValue("");
this.addDDNameArea.reset();this._showPanel(this._lastOpenPanel)},_showPanel:function(v){if(this._currentOpenPanel){var u=this._getNodeByName(this._currentOpenPanel);I.add(u,"DDHidden")}u=this._getNodeByName(v);I.remove(u,"DDHidden");this._lastOpenPanel=this._currentOpenPanel;this._currentOpenPanel=v;this._setAccessibility();"publishPage"!==v||this.isOnScreen||this.resize()},_getNodeByName:function(v){switch(v){case "mainPage":var u=this.mainPageNode;break;case "publishPage":u=this.publishPageNode}return u},
_getAllMapLayers:function(v){var u=[];O.getInstance().traversal(function(F){"undefined"!==typeof F._layerInfo.layerObject.type&&-1===F._layerInfo.layerObject.type.indexOf("tile")&&F._layerInfo.layerObject.geometryType===v&&u.push(F._layerInfo.layerObject)});return u},_matchLayerFields:function(v,u){var F={},H=Object.keys(this._curretfieldTypeObj);e.forEach(u,y.hitch(this,function(z){e.forEach(H,y.hitch(this,function(G){z.name.toLowerCase()!==G.toLowerCase()||z.type!==this._curretfieldTypeObj[G]&&
"esriFieldTypeString"!==z.type||(G=v[G],void 0!==G&&null!==G&&"esriFieldTypeString"===z.type&&50>=z.length&&(G=G.toString().substr(0,z.length)),F[z.name]=G)}))}));return F},_containsSupportedCapabilities:function(v){var u=!0;["create","delete","query","update","editing"].forEach(function(F){-1===v.toLowerCase().split(",").indexOf(F)&&(u=!1)});return u},_populateSelectList:function(v,u,F){v.options=[];e.forEach(u,y.hitch(this,function(H){H.url&&"Feature Layer"===H.type&&this._containsSupportedCapabilities(H.capabilities)&&
v.addOption({value:H.name,id:H.id,label:c.sanitizeHTML(H.name),selected:!1})}));""!==F&&v.set("displayedValue",F);u=this.tab.getSelectedTitle();this.publishNewLayer.setValue(!1);0===v.options.length?(this.publishNewLayer.setValue(!0),I.add(this.checkBoxParentContainer,"DDHidden")):I.remove(this.checkBoxParentContainer,"DDHidden");u!==this.nls.tabLineTitle&&u!==this.nls.tabRingsTitle||""!==this.config.operationalLineLayer.name||this.publishNewLayer.setValue(!0);u!==this.nls.tabCircleTitle&&u!==this.nls.tabEllipseTitle||
""!==this.config.operationalPolygonLayer.name||this.publishNewLayer.setValue(!0)}})});