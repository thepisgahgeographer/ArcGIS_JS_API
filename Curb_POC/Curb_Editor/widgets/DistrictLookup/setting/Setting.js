// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/DistrictLookup/setting/SymbolChooserPopup":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/text!./SymbolChooserPopup.html jimu/dijit/SymbolChooser jimu/dijit/Popup dijit/focus dojo/domReady!".split(" "),function(A,B,E,y,u,d,h,c,b,l,n){return A([B,E],{templateString:c,baseClass:"jimu-widget-districtlookup-setting",postCreate:function(){this.own(h(this.okButton,"click",
y.hitch(this,this._onOKButtonClicked)));this._initSymbolChooser();this._createSymbolChooserPopup()},_initSymbolChooser:function(){this.symbolChooser=new b(this.symbolParams,d.create("div",{},this.symbolData));this.symbolChooser.startup()},_createSymbolChooserPopup:function(){this.popup=new l({titleLabel:this.symbolChooserTitle,width:420,height:400,content:this.domNode})},_onOKButtonClicked:function(){if(!u.contains(this.okButton,"jimu-state-disabled"))if(this._validatePointSymbolSize())if(this._validatePointOutlineWidth())if(this._validateLineWidth())if(this._validatePolygonOutlineWidth())this.onOkClick();
else n.focus(this.symbolChooser.fillOutlineWidth.focusNode);else n.focus(this.symbolChooser.lineWidth.focusNode);else n.focus(this.symbolChooser.pointOutlineWidth.focusNode);else n.focus(this.symbolChooser.pointSize.focusNode)},onOkClick:function(k){return k},_validatePointSymbolSize:function(){return this.symbolChooser&&this.symbolChooser.hasOwnProperty("pointSize")?this.symbolChooser.pointSize.isValid():!0},_validatePolygonOutlineWidth:function(){return this.symbolChooser&&this.symbolChooser.hasOwnProperty("fillOutlineWidth")?
this.symbolChooser.fillOutlineWidth.isValid():!0},_validatePointOutlineWidth:function(){return this.symbolChooser&&this.symbolChooser.hasOwnProperty("pointOutlineWidth")?this.symbolChooser.pointOutlineWidth.isValid():!0},_validateLineWidth:function(){if(this.symbolChooser&&this.symbolChooser.hasOwnProperty("lineWidth"))if(this.symbolChooser.lineWidth.isValid()){var k=this.symbolChooser.lineWidth.getValue();if(""===k||null===k||void 0===k||isNaN(k))return this.symbolChooser.lineWidth.setValue("0"),
!1}else return!1;return!0}})})},"widgets/DistrictLookup/setting/NetworkServiceChooser":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/on dojo/dom-class dojo/text!./NetworkServiceChooser.html jimu/dijit/ItemSelector dijit/Tree dojo/query esri/request dojo/store/Memory dojo/dom-construct dijit/tree/ObjectStoreModel jimu/dijit/LoadingIndicator dojox/validate/regexp jimu/dijit/Message dojo/domReady!".split(" "),function(A,B,E,y,u,d,h,c,
b,l,n,k,t,x,C,m,v){return A([B,E],{baseClass:"jimu-widget-districtlookup-setting",templateString:h,selectRouteURL:null,agolFlag:!1,serviceFlag:!1,startup:function(){this.inherited(arguments)},postCreate:function(){this.routeChooser=new c({portalUrl:this.portalUrl,itemTypes:["Network analysis service"]});this.routeChooser.placeAt(this.itemSelectDiv);this.own(u(this.okButton,"click",y.hitch(this,function(w){if(!d.contains(this.okButton,"jimu-state-disabled"))this.onOkClick(w)})));this.own(u(this.cancelButton,
"click",y.hitch(this,function(w){this.onCancelClick(w)})));this.own(u(this.routeChooser,"item-selected",y.hitch(this,function(){d.remove(this.btnNext,"jimu-state-disabled")})));this.own(u(this.routeChooser,"none-item-selected",y.hitch(this,function(){d.add(this.btnNext,"jimu-state-disabled")})));this.own(u(this.serviceURL,"keyup",y.hitch(this,function(){""===y.trim(this.serviceURL.get("value"))?d.add(this.validateRouteURL,"jimu-state-disabled"):d.remove(this.validateRouteURL,"jimu-state-disabled")})));
this.own(u(this.validateRouteURL,"click",y.hitch(this,function(){d.contains(this.validateRouteURL,"jimu-state-disabled")||(this.serviceFlag=!0,this._fetchRouteLayer(this.routeLayerList))})));this.own(u(this.btnNext,"click",y.hitch(this,function(){d.contains(this.btnNext,"jimu-state-disabled")||(this.agolFlag=!0,this._fetchRouteLayer(this.agolRouteLayerList))})));var f=l(".routeSearchRadio",this.routeSearch);this.own(u(f,"change",y.hitch(this,function(){this.organizationRadio&&this.organizationRadio.get("checked")?
(d.add(this.serviceUrlDiv,"esriCTHidden"),this.agolFlag?(d.add(this.itemSelectDiv,"esriCTHidden"),d.remove(this.agolRouteLayerList,"esriCTHidden"),d.add(this.btnBack,"esriCTHidden")):(d.remove(this.itemSelectDiv,"esriCTHidden"),d.add(this.agolRouteLayerList,"esriCTHidden"),d.remove(this.btnNext,"esriCTHidden"),d.add(this.okButton,"jimu-state-disabled"))):(d.add(this.itemSelectDiv,"esriCTHidden"),d.remove(this.serviceUrlDiv,"esriCTHidden"),d.add(this.btnNext,"esriCTHidden"),d.add(this.btnBack,"esriCTHidden"),
d.add(this.agolRouteLayerList,"esriCTHidden"))})));this._initLoading()},_initLoading:function(){this.loading=new C({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()},onOkClick:function(f){return f},onCancelClick:function(f){return f},_fetchRouteLayer:function(f){var w=this._getValidRouteURL();this.loading.show();n({url:w,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(y.hitch(this,function(e){var a=!1;e.hasOwnProperty("routeLayers")&&null!==e.routeLayers&&
0<e.routeLayers.length&&(d.add(this.itemSelectDiv,"esriCTHidden"),this.serviceFlag?(d.remove(this.serviceUrlDiv,"esriCTHidden"),d.add(this.agolRouteLayerList,"esriCTHidden"),d.add(this.btnNext,"esriCTHidden"),d.add(this.btnBack,"esriCTHidden"),this.serviceFlag=!1):(d.add(this.serviceUrlDiv,"esriCTHidden"),d.remove(this.agolRouteLayerList,"esriCTHidden"),d.add(this.btnNext,"esriCTHidden"),d.remove(this.btnBack,"esriCTHidden"),this.agolFlag=!1),this._createTree(w,e.routeLayers,f),a=!0);a||(this._resetRouteSearch(f,
this.nls.networkServiceChooser.invalidRouteServiceURL),this.loading.hide())}),y.hitch(this,function(e){e&&"Rate limit exceeded. Please try again later."===e.message?this._resetRouteSearch(f,this.nls.networkServiceChooser.rateLimitExceeded):e&&"Error invoking service"===e.message&&e.details.length&&-1!==e.details.indexOf("Error generating token")?this._resetRouteSearch(f,this.nls.networkServiceChooser.errorInvokingService):this._resetRouteSearch(f,this.nls.networkServiceChooser.invalidRouteServiceURL);
this.loading.hide()}))},_getValidRouteURL:function(){if(this.routeChooser&&this.agolFlag){var f=this.routeChooser.getSelectedItem();var w=f.url}else w=this.serviceURL.value;var e=w.lastIndexOf("/");var a=w.substr(0,e+1);f=this._urlValidator(a);this.routeName="";f&&(this.routeName=w.substring(e+1,w.length+1),w=a);return w},_createTree:function(f,w,e){var a=this,p;t.empty(e);var z={data:[{id:1,name:"Route Layers",url:f,root:!0}],getChildren:function(F){return this.query({parent:F.id})}};if(this.routeName)for(p=
0;p<w.length;p++)this.routeName===w[p]&&z.data.push({id:w[p],name:w[p],url:f+w[p],parent:1});else for(p=0;p<w.length;p++)z.data.push({id:w[p],name:w[p],url:f+"/"+w[p],parent:1});f=new k(z);f=new x({store:f,query:{root:!0}});f=new b({model:f,onClick:function(F){1===F.id?d.add(a.okButton,"jimu-state-disabled"):(d.remove(a.okButton,"jimu-state-disabled"),a.selectRouteURL=F.url)},getIconStyle:y.hitch(this,function(F){if(!F||"root"===F.id)return null;var G={width:"20px",height:"20px",backgroundRepeat:"no-repeat",
backgroundPosition:"center center",backgroundImage:""};G.backgroundImage="url("+this.folderUrl+"images/"+(1===F.id?"group-layer.png":"route-layer.png")+")";return G})});f.placeAt(e).startup();this.routeName&&1<z.data.length&&(f.set("paths",[["1",this.routeName]]),d.remove(this.okButton,"jimu-state-disabled"),this.selectRouteURL=z.data[1].url);this.loading.hide()},_resetRouteSearch:function(f,w){this._errorMessage(w);t.empty(f);this.loading.hide();this.serviceFlag=this.agolFlag=!1},_onBtnBackClicked:function(){d.remove(this.itemSelectDiv,
"esriCTHidden");d.add(this.serviceUrlDiv,"esriCTHidden");d.add(this.agolRouteLayerList,"esriCTHidden");d.remove(this.btnNext,"esriCTHidden");d.add(this.btnBack,"esriCTHidden")},_errorMessage:function(f){(new v({message:f})).message=f},_urlValidator:function(f){var w="^"+m.url({allowNamed:!0,allLocal:!1});w=(new RegExp(w,"g")).test(f);f=/\/Route\/NAServer/gi.test(f);return w&&f}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on dojo/dom-style jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable jimu/dijit/BindLabelPropsMixin dijit/form/RadioButton".split(" "),
function(A,B,E,y,u,d,h,c,b,l,n,k,t,x,C,m,v,f,w,e,a,p,z,F,G){return A([E,y,u,G,h],{templateString:d,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,showMyContent:!0,showMyOrganization:!0,showMyGroups:!0,showPublic:!0,showOnlyEditableGroups:!1,postMixInProperties:function(){this.portalUrl=e.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";l.forEach(this.itemTypes,c.hitch(this,function(r,D){this._itemTypes+=
'"'+r+'"';D!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";l.forEach(this.typeKeywords,c.hitch(this,function(r,D){this._typeKeywords+='"'+r+'"';D!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var r=this._getPortalUrl();
this.portal=f.getPortal(r);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=v.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=v.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){var r={title:this.nls.myContent,content:this.mycontentTabNode},D={title:this.nls.myOrganization,content:this.organizationTabNode},
J={title:this.nls.myGroup,content:this.groupTabNode},L={title:this.nls.publicMap,content:this.publicTabNode};m.set(this.mycontentTabNode,"display","none");m.set(this.organizationTabNode,"display","none");m.set(this.groupTabNode,"display","none");m.set(this.publicTabNode,"display","none");var M=[];this.showMyContent&&(M.push(r),m.set(this.mycontentTabNode,"display","block"));this.showMyOrganization&&(M.push(D),m.set(this.organizationTabNode,"display","block"));this.showMyGroups&&(M.push(J),m.set(this.groupTabNode,
"display","block"));this.showPublic&&(M.push(L),m.set(this.publicTabNode,"display","block"));this.tab=new z({tabs:M},this.tabNode);this.own(C(this.tab,"tabChanged",c.hitch(this,function(P){n.setStyle(this.signinSection,"display","none");P!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){n.setStyle(this.signinSection,"display","none");var r=x(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",
this.domNode);w.userHaveSignInPortal(this._getPortalUrl())?r.style("display","block"):(r.style("display","none"),this._isPublicTabShow||n.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){var r=this._getPortalUrl();r=e.getServerByUrl(r);this.portalPublicRaido.set("disabled",!1);this.onlinePublicRaido.set("disabled",!1);this.portalPublicRaido.set("checked",!0);var D=!1;e.isArcGIScom(r)?(D=!0,this.portalPublicLabel.innerHTML="ArcGIS.com"):(this.portalPublicLabel.innerHTML=
r,D=this.showOnlineItems?!1:!0);D&&(this.onlinePublicRaido.set("disabled",!0),n.setStyle(this.onlinePublicRaido,"display","none"),n.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var r="esri_"+(b.locale&&b.locale.slice(0,2)||"en").toLowerCase(),D=l.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
c.hitch(this,function(L){return L!==r})),J="";l.forEach(D,c.hitch(this,function(L){J+=" -owner:"+L+" "}));D=" ";this.portal&&this.portal.user&&this.portal.user.orgId&&(D=" orgid:"+this.portal.user.orgId+" ");D=D+this._itemTypeQueryString+" AND access:public "+J+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:D});this._filterPublicPortalQuery=this._getQuery({q:D,basicQ:D});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(r){return c.mixin({start:1,num:16,f:"json"},r||{})},_getPortalUrl:function(){return e.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(C(this.publicPortalItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(C(this.publicOnlineItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(C(this.organizationItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(C(this.groupItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));
this.own(C(this.mycontentItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(C(this.publicPortalItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(C(this.publicOnlineItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(C(this.organizationItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(C(this.groupItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(C(this.mycontentItemTable,"update",c.hitch(this,this._onItemTableUpdate)));
var r=this._getPortalUrl();this.portalPublicRaido.get("disabled")||(this.publicPortalItemTable.set("portalUrl",r),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.get("disabled")||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",
this._filterPublicOnlineQuery))},_initPublic:function(){this.own(C(this.portalPublicRaido,"click",c.hitch(this,this._onPublicRaidoClicked)));this.own(C(this.onlinePublicRaido,"click",c.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.get("checked")?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.get("checked")&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},
_onPublicSearch:function(r){(r=r&&c.trim(r))?(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.get("checked")?(this._filterPublicPortalQuery.q=r+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.get("checked")&&(this._filterPublicOnlineQuery.q=r+" "+this._itemTypeQueryString+" AND access:public "+
this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(C(this.groupsSelect,"change",c.hitch(this,this._onGroupsSelectChange)));var r=e.getServerByUrl(this._getPortalUrl());e.isArcGIScom(r)&&(r="ArcGIS.com");w.userHaveSignInPortal(this._getPortalUrl())&&
this._onSignIn()},_onOrganizationSearch:function(r){if(r=r&&c.trim(r)){if(this._allOrganizationQuery){var D=this._allOrganizationQuery.q;D&&(this._filterOrganizationQuery.q=r+" "+D,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(r){if(r=r&&c.trim(r)){if(this._allMyContentQuery){var D=this._allMyContentQuery.q;D&&(this._filterMyContentQuery.q=r+" "+
D,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},_onGroupSearch:function(r){if(r=r&&c.trim(r)){if(this._allGroupQuery){var D=this._allGroupQuery.q;D&&(this._filterGroupQuery.q=r+" "+D,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=
!0;var r=this._getPortalUrl();f.getPortal(r).getUser().then(c.hitch(this,function(D){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(D),this._searchMyContent(D),this._searchGroups(D))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(r){this.organizationItemTable.clear();r=" orgid:"+r.orgId+
" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var D=this._getPortalUrl();this._allOrganizationQuery=this._getQuery({q:r});this._filterOrganizationQuery=this._getQuery({q:r});this.organizationItemTable.set("portalUrl",D);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(r){this.mycontentItemTable.clear();var D=this._getPortalUrl();r="owner:"+r.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;
this._allMyContentQuery=this._getQuery({q:r});this._filterMyContentQuery=this._getQuery({q:r});this.mycontentItemTable.set("portalUrl",D);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(r){this._resetGroupsSection();n.setStyle(this.groupsSection,"display","flex");r=r.getGroups();if(0<r.length){n.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();n.empty(this.groupsSelect);for(var D=0;D<r.length;D++){var J=r[D];n.create("option",
{value:J.id,innerHTML:J.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(r.length)},_resetGroupsSection:function(){n.setStyle(this.groupsSection,"display","none");n.empty(this.groupsSelect);n.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();n.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(r){0===r?n.setStyle(this.groupsSection,
"top","15px"):n.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var r=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===r)n.setStyle(this.groupSearch,"display","none"),this.groupItemTable.hide();else{n.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var D=this._getPortalUrl();r="group:"+r+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:r});this._filterGroupQuery=this._getQuery({q:r});
this.groupItemTable.set("portalUrl",D);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(r){var D=n.hasClass(r,"jimu-state-active");x(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");D&&n.addClass(r,"jimu-state-active");(r=this.getSelectedItem())?this.emit("item-selected",r):this.emit("none-item-selected")},getSelectedItem:function(){var r=null,D=x(".item.jimu-state-active",this.domNode);
0<D.length&&(r=c.mixin({},D[0].item));return r}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),function(A,B,E,y,u,d,h,c,b,l,n,k,t,x,C,m){return A([B,E,y,d],{templateString:u,declaredClass:"jimu.dijit.ItemTable",
baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"desktopapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=C.getStandardPortalUrl(this.portalUrl));
this.showAllItemsSection();this.searchAllItems()},show:function(){b.setStyle(this.domNode,"display","block")},hide:function(){b.setStyle(this.domNode,"display","none")},searchAllItems:function(v){this.showAllItemsSection();v&&(this.query=h.mixin({},v),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),x.getPortal(this.portalUrl).queryItems(this.query).then(h.hitch(this,function(f){this.domNode&&(this.allItemsShelter.hide(),
this.query.start=f.nextStart,this._createItems(f,this.allItemTbody))}),h.hitch(this,function(f){console.error(f);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(v){this.showFilterItemsSection();v&&(this.filteredQuery=h.clone(v),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&(this.filteredItemShelter.show(),x.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(h.hitch(this,function(f){this.domNode&&
(this.showFilterItemsSection(),v&&this.clearFilteredItemsSection(),this.filteredQuery.start=f.nextStart,this._createItems(f,this.filteredItemsTbody),this._filterItemCallback())}),h.hitch(this,function(f){console.error(f);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?(b.setStyle(this.filteredItemsTableDiv,"display","block"),b.setStyle(this.searchNoneTipSection,"display","none")):(b.setStyle(this.filteredItemsTableDiv,
"display","none"),b.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){b.empty(this.allItemTbody)},clearFilteredItemsSection:function(){b.empty(this.filteredItemsTbody)},showAllItemsSection:function(){b.setStyle(this.allItemsSection,"display","block");b.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){b.setStyle(this.allItemsSection,"display","none");
b.setStyle(this.filteredItemsSection,"display","block");b.setStyle(this.filteredItemsTableDiv,"display","block");b.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&this.searchFilteredItems()},_isScrollToBottom:function(v){return t.isScrollToBottom(v)},_createItems:function(v,f){v=v.results;var w=
c.map(this.types,h.hitch(this,function(r){return r.toLowerCase()}));v=c.filter(v,h.hitch(this,function(r){r=r.type&&r.type.toLowerCase()||"";return 0<=c.indexOf(w,r)}));if(0!==v.length){var e=n("td.empty",f),a;if(0<e.length){var p=Math.min(v.length,e.length),z=v.splice(0,p);for(a=0;a<p;a++){var F=e[a];var G=this._createItem(z[a]);b.place(G,F);b.removeClass(F,"empty")}}if(0!==v.length){e=Math.ceil(v.length/2);for(a=0;a<e;a++)for(G=b.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e"),
b.place(G,f),p=n("td",G),z=0;z<p.length;z++)F=p[z],(G=v[2*a+z])?(G=this._createItem(G),b.place(G,F)):b.addClass(F,"empty");this.emit("update")}}},_getItemCount:function(v){return n(".item",v).length},_createItem:function(v){var f=b.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
f.item=v;var w=n(".item-thumbnail",f)[0],e=n(".item-name",f)[0],a=n(".item-type-owner",f)[0],p=n(".item-date",f)[0],z=n(".item-details",f)[0],F=n(".none-thumbnail-tip",f)[0];if(!v.thumbnailUrl){var G=this._defaultThumbnail[v.type];G&&(v.thumbnailUrl=require.toUrl("jimu")+"/images/"+G)}v.thumbnailUrl?b.setStyle(w,"backgroundImage","url("+v.thumbnailUrl+")"):F.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(p=n(".item-info",f)[0],this.onCreateItemContent(v,p)):(e.innerHTML=
v.title,e.title=e.innerHTML,a.innerHTML=v.type+" by "+v.owner,a.title=a.innerHTML,w=new Date,w.setTime(v.modified),p.innerHTML=w.toLocaleString(),p.title=p.innerHTML,z.innerHTML=this.nls.moreDetails,z.href=v.detailsPageUrl||"#");return f},_onItemsTableClicked:function(v){var f=v.target||v.srcElement;v=null;b.hasClass(f,"item-thumbnail")?v=f.parentNode:b.hasClass(f,"none-thumbnail-tip")&&(v=f.parentNode.parentNode);v&&(f=b.hasClass(v,"jimu-state-active"),n(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
f?b.removeClass(v,"jimu-state-active"):b.addClass(v,"jimu-state-active"),this.emit("item-dom-clicked",v))},getSelectedItem:function(){var v=null,f=n(".item.jimu-state-active",this.domNode);0<f.length&&(v=h.mixin({},f[0].item));return v}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(A,B,E,y,u,d,h,c,b,l,n,k,t,x,C,m,v,f,w,e,a,p,z,F,G,r,D,J,L,M,P,X,da,aa,ba){function Q(g){return m.delegate(g.promise||g,{addCallback:function(q){this.then(q)},addErrback:function(q){this.otherwise(q)}})}var Z=y("dijit._TreeNode",[G,r,D,J,L],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(g){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=g;this._set("label",g);t("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:P,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(g){var q=Math.max(g,0)*this.tree._nodePixelIndent+"px";l.set(this.domNode,
"backgroundPosition",q+" 0px");l.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",q);A.forEach(this.getChildren(),function(H){H.set("indent",g+1)});this._set("indent",g)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(g){var q=this.tree,H=q.model;q._v10Compat&&g===H.root&&(g=null);this._applyClassAndStyle(g,"icon","Icon");this._applyClassAndStyle(g,"label","Label");this._applyClassAndStyle(g,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(g,q,H){var I="_"+q+"Class";q+="Node";var K=this[I];this[I]=this.tree["get"+H+"Class"](g,this.isExpanded);c.replace(this[q],this[I]||"",K||"");l.set(this[q],this.tree["get"+H+"Style"](g,this.isExpanded)||{})},_updateLayout:function(){var g=this.getParent();g=!g||!g.rowNode||"none"==g.rowNode.style.display;c.toggle(this.domNode,"dijitTreeIsRoot",g);c.toggle(this.domNode,"dijitTreeIsLast",!g&&!this.getNextSibling())},_setExpando:function(g){var q=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];g=g?0:this.isExpandable?this.isExpanded?1:2:3;c.replace(this.expandoNode,q[g],q);this.expandoNodeText.innerHTML=["*","-","+","*"][g]},expand:function(){if(this._expandDeferred)return Q(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");c.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var g=k.wipeIn({node:this.containerNode,duration:F.defaultDuration}),q=this._expandDeferred=new u(function(){g.stop()});B.after(g,"onEnd",function(){q.resolve(!0)},!0);g.play();return Q(q)},collapse:function(){if(this._collapseDeferred)return Q(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");c.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var g=k.wipeOut({node:this.containerNode,duration:F.defaultDuration}),q=this._collapseDeferred=new u(function(){g.stop()});B.after(g,"onEnd",
function(){q.resolve(!0)},!0);g.play();return Q(q)},indent:0,setChildItems:function(g){var q=this.tree,H=q.model,I=[],K=q.focusedChild,U=this.getChildren();A.forEach(U,function(N){D.prototype.removeChild.call(this,N)},this);this.defer(function(){A.forEach(U,function(N){if(!N._destroyed&&!N.getParent()){q.dndController.removeTreeNode(N);(function ca(O){var V=H.getIdentity(O.item),Y=q._itemNodesMap[V];1==Y.length?delete q._itemNodesMap[V]:(V=A.indexOf(Y,O),-1!=V&&Y.splice(V,1));A.forEach(O.getChildren(),
ca)})(N);if(q.persist){var S=A.map(N.getTreePath(),function(O){return q.model.getIdentity(O)}).join("/"),R;for(R in q._openedNodes)R.substr(0,S.length)==S&&delete q._openedNodes[R];q._saveExpandedNodes()}q.lastFocusedChild&&!h.isDescendant(q.lastFocusedChild.domNode,q.domNode)&&delete q.lastFocusedChild;K&&!h.isDescendant(K.domNode,q.domNode)&&q.focus();N.destroyRecursive()}})});this.state="Loaded";g&&0<g.length?(this.isExpandable=!0,A.forEach(g,function(N){var S=H.getIdentity(N),R=q._itemNodesMap[S];
if(R)for(var W=0;W<R.length;W++)if(R[W]&&!R[W].getParent()){var O=R[W];O.set("indent",this.indent+1);break}O||(O=this.tree._createTreeNode({item:N,tree:q,isExpandable:H.mayHaveChildren(N),label:q.getLabel(N),labelType:q.model&&q.model.labelType||"text",tooltip:q.getTooltip(N),ownerDocument:q.ownerDocument,dir:q.dir,lang:q.lang,textDir:q.textDir,indent:this.indent+1}),R?R.push(O):q._itemNodesMap[S]=[O]);this.addChild(O);(this.tree.autoExpand||this.tree._state(O))&&I.push(q._expandNode(O))},this),A.forEach(this.getChildren(),
function(N){N._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);g=d(I);this.tree._startPaint(g);return Q(g)},getTreePath:function(){for(var g=this,q=[];g&&g!==this.tree.rootNode;)q.unshift(g.item),g=g.getParent();q.unshift(this.tree.rootNode.item);return q},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(g){this.inherited(arguments);var q=this.getChildren();0==q.length&&(this.isExpandable=!1,
this.collapse());A.forEach(q,function(H){H._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(g){this.labelNode.setAttribute("aria-selected",g?"true":"false");c.toggle(this.rowNode,"dijitTreeRowSelected",g)},focus:function(){p.focus(this.focusNode)}});t("dojo-bidi")&&Z.extend({_setTextDirAttr:function(g){!g||this.textDir==g&&this._created||(this._set("textDir",g),this.applyTextDir(this.labelNode),A.forEach(this.getChildren(),function(q){q.set("textDir",
g)},this))}});var T=y("dijit.Tree",[G,M,r,L],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:X,persist:!1,autoExpand:!1,dndController:ba,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(g,q){f.publish(this.id,m.mixin({tree:this,event:g},q||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new u;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var g=this;this.own(v(this.containerNode,
v.selector(".dijitTreeNode",w.enter),function(I){g._onNodeMouseEnter(z.byNode(this),I)}),v(this.containerNode,v.selector(".dijitTreeNode",w.leave),function(I){g._onNodeMouseLeave(z.byNode(this),I)}),v(this.containerNode,v.selector(".dijitTreeRow",a.press),function(I){g._onNodePress(z.getEnclosingWidget(this),I)}),v(this.containerNode,v.selector(".dijitTreeRow",a),function(I){g._onClick(z.getEnclosingWidget(this),I)}),v(this.containerNode,v.selector(".dijitTreeRow","dblclick"),function(I){g._onDblClick(z.getEnclosingWidget(this),
I)}));this.model||this._store2model();this.own(B.after(this.model,"onChange",m.hitch(this,"_onItemChange"),!0),B.after(this.model,"onChildrenChange",m.hitch(this,"_onItemChildrenChange"),!0),B.after(this.model,"onDelete",m.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){m.isString(this.dndController)&&(this.dndController=m.getObject(this.dndController));for(var q={},H=0;H<this.dndParams.length;H++)this[this.dndParams[H]]&&(q[this.dndParams[H]]=this[this.dndParams[H]]);
this.dndController=new this.dndController(this,q)}this._load();this.onLoadDeferred=Q(this.pendingCommandsPromise);this.onLoadDeferred.then(m.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;x.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var g={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(g.mayHaveChildren=m.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(g.getChildren=m.hitch(this,function(q,H,I){this.getItemChildren(this._v10Compat&&q===this.model.root?null:q,H,I)}));this.model=new aa(g);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(m.hitch(this,function(g){var q=this.rootNode=this.tree._createTreeNode({item:g,tree:this,isExpandable:!0,label:this.label||this.getLabel(g),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(q.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(q.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(q.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
q.labelNode.setAttribute("role","presentation"),q.labelNode.removeAttribute("aria-selected"),q.containerNode.setAttribute("role","tree"),q.containerNode.setAttribute("aria-expanded","true"),q.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(q.domNode);g=this.model.getIdentity(g);this._itemNodesMap[g]?this._itemNodesMap[g].push(q):this._itemNodesMap[g]=[q];q._updateLayout();this._expandNode(q).then(m.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),m.hitch(this,function(g){console.error(this,": error loading root: ",g)}))},getNodesByItem:function(g){if(!g)return[];g=m.isString(g)?g:this.model.getIdentity(g);return[].concat(this._itemNodesMap[g])},_setSelectedItemAttr:function(g){this.set("selectedItems",[g])},_setSelectedItemsAttr:function(g){var q=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(m.hitch(this,function(){var H=
A.map(g,function(K){return!K||m.isString(K)?K:q.model.getIdentity(K)}),I=[];A.forEach(H,function(K){I=I.concat(q._itemNodesMap[K]||[])});this.set("selectedNodes",I)}))},_setPathAttr:function(g){return g.length?Q(this.set("paths",[g]).then(function(q){return q[0]})):Q(this.set("paths",[]).then(function(q){return q[0]}))},_setPathsAttr:function(g){function q(I,K){var U=I.shift(),N=A.filter(K,function(S){return S.getIdentity()==U})[0];if(N)return I.length?H._expandNode(N).then(function(){return q(I,
N.getChildren())}):N;throw new T.PathError("Could not expand path at "+U);}var H=this;return Q(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return d(A.map(g,function(I){I=A.map(I,function(K){return K&&m.isObject(K)?H.model.getIdentity(K):K});if(I.length)return q(I,[H.rootNode]);throw new T.PathError("Empty path");}))}).then(function(I){H.set("selectedNodes",I);return H.paths}))},_setSelectedNodeAttr:function(g){this.set("selectedNodes",[g])},_setSelectedNodesAttr:function(g){this.dndController.setSelection(g)},
expandAll:function(){function g(H){return q._expandNode(H).then(function(){var I=A.filter(H.getChildren()||[],function(K){return K.isExpandable});return d(A.map(I,g))})}var q=this;return Q(g(this.rootNode))},collapseAll:function(){function g(H){var I=A.filter(H.getChildren()||[],function(K){return K.isExpandable});I=d(A.map(I,g));return!H.isExpanded||H==q.rootNode&&!q.showRoot?I:I.then(function(){return q._collapseNode(H)})}var q=this;return Q(g(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(g){return this.model.getLabel(g)},getIconClass:function(g,q){return!g||this.model.mayHaveChildren(g)?q?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(g,q){(g=this._getNext(q))&&g.isTreeNode&&this.focusNode(g)},_onUpArrow:function(g,q){if(g=q.getPreviousSibling())for(q=g;q.isExpandable&&q.isExpanded&&
q.hasChildren();)q=q.getChildren(),q=q[q.length-1];else if(g=q.getParent(),this.showRoot||g!==this.rootNode)q=g;q&&q.isTreeNode&&this.focusNode(q)},_onRightArrow:function(g,q){q.isExpandable&&!q.isExpanded?this._expandNode(q):q.hasChildren()&&(q=q.getChildren()[0])&&q.isTreeNode&&this.focusNode(q)},_onLeftArrow:function(g,q){q.isExpandable&&q.isExpanded?this._collapseNode(q):(g=q.getParent())&&g.isTreeNode&&(this.showRoot||g!==this.rootNode)&&this.focusNode(g)},focusLastChild:function(){var g=this._getLast();
g&&g.isTreeNode&&this.focusNode(g)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var g=this.rootNode;g.isExpanded;){var q=g.getChildren();if(!q.length)break;g=q[q.length-1]}return g},_getNext:function(g){if(g.isExpandable&&g.isExpanded&&g.hasChildren())return g.getChildren()[0];for(;g&&g.isTreeNode;){var q=g.getNextSibling();if(q)return q;g=g.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(g,q){return h.isDescendant(g,
q.expandoNode)||h.isDescendant(g,q.expandoNodeText)},_onNodePress:function(g,q){this.focusNode(g)},__click:function(g,q,H,I){var K=this.isExpandoNode(q.target,g);g.isExpandable&&(H||K)?this._onExpandoClick({node:g}):(this._publish("execute",{item:g.item,node:g,evt:q}),this[I](g.item,g,q),this.focusNode(g));q.stopPropagation();q.preventDefault()},_onClick:function(g,q){this.__click(g,q,this.openOnClick,"onClick")},_onDblClick:function(g,q){this.__click(g,q,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(g){g=
g.node;this.focusNode(g);g.isExpanded?this._collapseNode(g):this._expandNode(g)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(g){x.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(g)},_getRootOrFirstNode:function(){x.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(g){g._expandNodeDeferred&&
delete g._expandNodeDeferred;if("Loading"!=g.state&&g.isExpanded){var q=g.collapse();this.onClose(g.item,g);this._state(g,!1);this._startPaint(q);return q}},_expandNode:function(g){if(g._expandNodeDeferred)return g._expandNodeDeferred;var q=this.model,H=g.item,I=this;g._loadDeferred||(g.markProcessing(),g._loadDeferred=new u,q.getChildren(H,function(K){g.unmarkProcessing();g.setChildItems(K).then(function(){g._loadDeferred.resolve(K)})},function(K){console.error(I,": error loading "+g.label+" children: ",
K);g._loadDeferred.reject(K)}));q=g._loadDeferred.then(m.hitch(this,function(){var K=g.expand();this.onOpen(g.item,g);this._state(g,!0);return K}));this._startPaint(q);return q},focusNode:function(g){for(var q=[],H=this.domNode;H&&H.tagName&&"IFRAME"!==H.tagName.toUpperCase();H=H.parentNode)q.push({domNode:H.contentWindow||H,scrollLeft:H.scrollLeft||0,scrollTop:H.scrollTop||0});this.focusChild(g);this.defer(function(){for(var I=0,K=q.length;I<K;I++)q[I].domNode.scrollLeft=q[I].scrollLeft,q[I].domNode.scrollTop=
q[I].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(g){var q=this.model.getIdentity(g);if(q=this._itemNodesMap[q]){var H=this.getLabel(g),I=this.getTooltip(g);A.forEach(q,function(K){K.set({item:g,label:H,tooltip:I});K._updateItemClasses(g)})}},_onItemChildrenChange:function(g,q){g=this.model.getIdentity(g);(g=this._itemNodesMap[g])&&A.forEach(g,function(H){H.setChildItems(q)})},_onItemDelete:function(g){g=this.model.getIdentity(g);var q=this._itemNodesMap[g];
q&&(A.forEach(q,function(H){this.dndController.removeTreeNode(H);var I=H.getParent();I&&I.removeChild(H);this.lastFocusedChild&&!h.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!h.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();H.destroyRecursive()},this),delete this._itemNodesMap[g])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var g=E(this.cookieName);g&&A.forEach(g.split(","),function(q){this._openedNodes[q]=
!0},this)}},_state:function(g,q){if(!this.persist)return!1;var H=A.map(g.getTreePath(),function(I){return this.model.getIdentity(I)},this).join("/");if(1===arguments.length)return this._openedNodes[H];q?this._openedNodes[H]=!0:delete this._openedNodes[H];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var g=[],q;for(q in this._openedNodes)g.push(q);E(this.cookieName,g.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),
delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!m.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(g){g&&b.setMarginBox(this.domNode,g);this._nodePixelIndent=b.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(m.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},
_outstandingPaintOperations:0,_startPaint:function(g){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var q=m.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});e(g,q,q)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);
this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(g){return new Z(g)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});t("dojo-bidi")&&T.extend({_setTextDirAttr:function(g){g&&this.textDir!=g&&(this._set("textDir",g),this.rootNode.set("textDir",g))}});T.PathError=n("TreePathError");T._TreeNode=Z;return T})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(A,B,E,y){return E("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(u){y.mixin(this,u);this.connects=[];u=this.store;if(!u.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");u.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([B.after(u,
"onNew",y.hitch(this,"onNewItem"),!0),B.after(u,"onDelete",y.hitch(this,"onDeleteItem"),!0),B.after(u,"onSet",y.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var u;u=this.connects.pop();)u.remove()},getRoot:function(u,d){this.root?u(this.root):this.store.fetch({query:this.query,onComplete:y.hitch(this,function(h){if(1!=h.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+h.length+" items, but must return exactly one");this.root=h[0];u(this.root)}),onError:d})},mayHaveChildren:function(u){return A.some(this.childrenAttrs,
function(d){return this.store.hasAttribute(u,d)},this)},getChildren:function(u,d,h){var c=this.store;if(c.isItemLoaded(u)){for(var b=[],l=0;l<this.childrenAttrs.length;l++){var n=c.getValues(u,this.childrenAttrs[l]);b=b.concat(n)}var k=0;this.deferItemLoadingUntilExpand||A.forEach(b,function(x){c.isItemLoaded(x)||k++});0==k?d(b):A.forEach(b,function(x,C){c.isItemLoaded(x)||c.loadItem({item:x,onItem:function(m){b[C]=m;0==--k&&d(b)},onError:h})})}else{var t=y.hitch(this,arguments.callee);c.loadItem({item:u,
onItem:function(x){t(x,d,h)},onError:h})}},isItem:function(u){return this.store.isItem(u)},fetchItemByIdentity:function(u){this.store.fetchItemByIdentity(u)},getIdentity:function(u){return this.store.getIdentity(u)},getLabel:function(u){return this.labelAttr?this.store.getValue(u,this.labelAttr):this.store.getLabel(u)},newItem:function(u,d,h){var c={parent:d,attribute:this.childrenAttrs[0]},b;this.newItemIdAttr&&u[this.newItemIdAttr]?this.fetchItemByIdentity({identity:u[this.newItemIdAttr],scope:this,
onItem:function(l){l?this.pasteItem(l,null,d,!0,h):(b=this.store.newItem(u,c))&&void 0!=h&&this.pasteItem(b,d,d,!1,h)}}):(b=this.store.newItem(u,c))&&void 0!=h&&this.pasteItem(b,d,d,!1,h)},pasteItem:function(u,d,h,c,b){var l=this.store,n=this.childrenAttrs[0];d&&A.forEach(this.childrenAttrs,function(t){if(l.containsValue(d,t,u)){if(!c){var x=A.filter(l.getValues(d,t),function(C){return C!=u});l.setValues(d,t,x)}n=t}});if(h)if("number"==typeof b){var k=l.getValues(h,n).slice();k.splice(b,0,u);l.setValues(h,
n,k)}else l.setValues(h,n,l.getValues(h,n).concat(u))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(u,d){d&&this.getChildren(d.item,y.hitch(this,function(h){this.onChildrenChange(d.item,h)}))},onDeleteItem:function(u){this.onDelete(u)},onSetItem:function(u,d){if(-1!=A.indexOf(this.childrenAttrs,d))this.getChildren(u,y.hitch(this,function(h){this.onChildrenChange(u,h)}));else this.onChange(u)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(A,B,E,y,u){return B("dijit.tree.ForestStoreModel",u,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(d){this.root={store:this,root:!0,id:d.rootId,label:d.rootLabel,children:d.rootChildren}},mayHaveChildren:function(d){return d===this.root||this.inherited(arguments)},getChildren:function(d,h,c){d===this.root?this.root.children?h(this.root.children):this.store.fetch({query:this.query,onComplete:y.hitch(this,
function(b){this.root.children=b;h(b)}),onError:c}):this.inherited(arguments)},isItem:function(d){return d===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(d){if(d.identity==this.root.id){var h=d.scope||E.global;d.onItem&&d.onItem.call(h,this.root)}else this.inherited(arguments)},getIdentity:function(d){return d===this.root?this.root.id:this.inherited(arguments)},getLabel:function(d){return d===this.root?this.root.label:this.inherited(arguments)},newItem:function(d,h,c){return h===
this.root?(this.onNewRootItem(d),this.store.newItem(d)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(d,h,c,b,l){if(h===this.root&&!b)this.onLeaveRoot(d);this.inherited(arguments,[d,h===this.root?null:h,c===this.root?null:c,b,l]);if(c===this.root)this.onAddToRoot(d)},onAddToRoot:function(d){console.log(this,": item ",d," added to root")},onLeaveRoot:function(d){console.log(this,": item ",d," removed from root")},_requeryTop:function(){var d=this.root.children||[];this.store.fetch({query:this.query,
onComplete:y.hitch(this,function(h){this.root.children=h;if(d.length!=h.length||A.some(d,function(c,b){return h[b]!=c}))this.onChildrenChange(this.root,h)})})},onNewItem:function(d,h){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(d){-1!=A.indexOf(this.root.children,d)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(d,h,c,b){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),
function(A,B,E,y,u,d,h,c,b,l,n){return B("dijit.tree._dndSelector",n,{constructor:function(){this.selection={};this.anchor=null;this.events.push(c(this.tree.domNode,b.press,y.hitch(this,"onMouseDown")),c(this.tree.domNode,b.release,y.hitch(this,"onMouseUp")),c(this.tree.domNode,b.move,y.hitch(this,"onMouseMove")),c(this.tree.domNode,l.press,y.hitch(this,"onClickPress")),c(this.tree.domNode,l.release,y.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var k=[],t=this.selection,
x;for(x in t)k.push(t[x]);return k},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(k,t){this.setSelection(this.getSelectedTreeNodes().concat([k]));t&&(this.anchor=k);return k},removeTreeNode:function(k){var t=A.filter(this.getSelectedTreeNodes(),function(x){return!d.isDescendant(x.domNode,k.domNode)});this.setSelection(t);return k},isTreeNodeSelected:function(k){return k.id&&!!this.selection[k.id]},
setSelection:function(k){var t=this.getSelectedTreeNodes();A.forEach(this._setDifference(t,k),y.hitch(this,function(x){x.setSelected(!1);this.anchor==x&&delete this.anchor;delete this.selection[x.id]}));A.forEach(this._setDifference(k,t),y.hitch(this,function(x){x.setSelected(!0);this.selection[x.id]=x}));this._updateSelectionProperties()},_setDifference:function(k,t){A.forEach(t,function(x){x.__exclude__=!0});k=A.filter(k,function(x){return!x.__exclude__});A.forEach(t,function(x){delete x.__exclude__});
return k},_updateSelectionProperties:function(){var k=this.getSelectedTreeNodes(),t=[],x=[];A.forEach(k,function(C){var m=C.getTreePath();x.push(C);t.push(m)},this);k=A.map(x,function(C){return C.item});this.tree._set("paths",t);this.tree._set("path",t[0]||[]);this.tree._set("selectedNodes",x);this.tree._set("selectedNode",x[0]||null);this.tree._set("selectedItems",k);this.tree._set("selectedItem",k[0]||null)},onClickPress:function(k){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(k.target,
this.current))){"mousedown"==k.type&&h.isLeft(k)&&k.preventDefault();var t="keydown"==k.type?this.tree.focusedChild:this.current;if(t){var x=u.getCopyKeyState(k),C=t.id;this.singular||k.shiftKey||!this.selection[C]?(this._doDeselect=!1,this.userSelect(t,x,k.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(k){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==k.type?this.tree.focusedChild:this.current,u.getCopyKeyState(k),k.shiftKey))},onMouseMove:function(){this._doDeselect=
!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(k,t){if(k===t)return 0;if("sourceIndex"in document.documentElement)return k.sourceIndex-t.sourceIndex;if("compareDocumentPosition"in document.documentElement)return k.compareDocumentPosition(t)&2?1:-1;if(document.createRange){var x=doc.createRange();x.setStartBefore(k);k=doc.createRange();k.setStartBefore(t);return x.compareBoundaryPoints(x.END_TO_END,k)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");
},userSelect:function(k,t,x){if(this.singular)this.anchor==k&&t?this.selectNone():(this.setSelection([k]),this.anchor=k);else if(x&&this.anchor){t=this._compareNodes(this.anchor.rowNode,k.rowNode);x=this.anchor;0>t?t=x:(t=k,k=x);for(x=[];t!=k;)x.push(t),t=this.tree._getNext(t);x.push(k);this.setSelection(x)}else this.selection[k.id]&&t?this.removeTreeNode(k):t?this.addTreeNode(k,!0):(this.setSelection([k]),this.anchor=k)},getItem:function(k){return{data:this.selection[k],type:["treeNode"]}},forInSelectedItems:function(k,
t){t=t||E.global;for(var x in this.selection)k.call(t,this.getItem(x),x,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(A,B,E,y,u,d){return B("dijit.tree._dndContainer",null,{constructor:function(h,c){this.tree=h;this.node=h.domNode;y.mixin(this,c);this.containerState="";E.add(this.node,"dojoDndContainer");this.events=[u(this.node,d.enter,y.hitch(this,"onOverEvent")),u(this.node,d.leave,
y.hitch(this,"onOutEvent")),A.after(this.tree,"_onNodeMouseEnter",y.hitch(this,"onMouseOver"),!0),A.after(this.tree,"_onNodeMouseLeave",y.hitch(this,"onMouseOut"),!0),u(this.node,"dragstart, selectstart",function(b){b.preventDefault()})]},destroy:function(){for(var h;h=this.events.pop();)h.remove();this.node=this.parent=null},onMouseOver:function(h){this.current=h},onMouseOut:function(){this.current=null},_changeState:function(h,c){var b="dojoDnd"+h;h=h.toLowerCase()+"State";E.replace(this.node,b+
c,b+this[h]);this[h]=c},_addItemClass:function(h,c){E.add(h,"dojoDndItem"+c)},_removeItemClass:function(h,c){E.remove(h,"dojoDndItem"+c)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(A,B,E,y,u,d,h){return E("dijit.tree.ObjectStoreModel",h,{store:null,
labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(c){u.mixin(this,c);this.childrenCache={}},getRoot:function(c,b){if(this.root)c(this.root);else{var l=this.store.query(this.query);l.then&&this.own(l);d(l,u.hitch(this,function(n){if(1!=n.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+n.length+" items, but must return exactly one");this.root=n[0];c(this.root);l.observe&&l.observe(u.hitch(this,function(k){this.onChange(k)}),!0)}),b)}},mayHaveChildren:function(){return!0},
getChildren:function(c,b,l){var n=this.store.getIdentity(c);if(this.childrenCache[n])d(this.childrenCache[n],b,l);else{var k=this.childrenCache[n]=this.store.getChildren(c);k.then&&this.own(k);k.observe&&this.own(k.observe(u.hitch(this,function(t,x,C){this.onChange(t);x!=C&&d(k,u.hitch(this,"onChildrenChange",c))}),!0));d(k,b,l)}},isItem:function(){return!0},getIdentity:function(c){return this.store.getIdentity(c)},getLabel:function(c){return c[this.labelAttr]},newItem:function(c,b,l,n){return this.store.put(c,
{parent:b,before:n})},pasteItem:function(c,b,l,n,k,t){var x=new y;if(b===l&&!n&&!t)return x.resolve(!0),x;b&&!n?this.getChildren(b,u.hitch(this,function(C){C=[].concat(C);var m=A.indexOf(C,c);C.splice(m,1);this.onChildrenChange(b,C);x.resolve(this.store.put(c,{overwrite:!0,parent:l,oldParent:b,before:t,isCopy:!1}))})):x.resolve(this.store.put(c,{overwrite:!0,parent:l,oldParent:b,before:t,isCopy:!0}));return x},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"widgets/DistrictLookup/setting/LayerChooser":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/array dojo/promise/all dojo/Deferred dojo/on dojo/dom-class dojo/text!./LayerChooser.html jimu/dijit/LayerChooserFromMap jimu/dijit/LayerChooserFromMapWithDropbox esri/request jimu/dijit/LoadingIndicator jimu/dijit/Message dojo/domReady!".split(" "),
function(A,B,E,y,u,d,h,c,b,l,n,k,t,x,C){return A([B,E],{baseClass:"jimu-widget-districtlookup-setting",templateString:l,selectRouteURL:null,agolFlag:!1,serviceFlag:!1,startup:function(){this.inherited(arguments)},postCreate:function(){this._createPrecinctChooserArgs();this.own(c(this.cancelButton,"click",y.hitch(this,function(m){this.onCancleClick(m)})));this.own(c(this.okButton,"click",y.hitch(this,this._onOKButtonClicked)));this._initLoading()},_onNextButtonClicked:function(){b.contains(this.btnNext,
"jimu-state-disabled")||(b.add(this.itemSelectDiv,"esriCTHidden"),b.remove(this.relatedLayerSelectDiv,"esriCTHidden"),b.add(this.btnNext,"esriCTHidden"),b.remove(this.btnBack,"esriCTHidden"),""===this.relationshipSelect.value?(this._errorMessage(this.nls.layerSelector.polygonLayerNotHavingRelatedLayer),b.add(this.okButton,"jimu-state-disabled")):b.remove(this.okButton,"jimu-state-disabled"))},_onOKButtonClicked:function(){if(!b.contains(this.okButton,"jimu-state-disabled"))if(this.precinctLayerInfo){if(""===
this.relationshipSelect.value)return this._errorMessage(this.nls.layerSelector.errorInSelectingRelatedLayer),!1;var m={polygonLayerInfo:this.precinctLayerInfo,relatedLayerInfo:this.pollingPlaceInfo[this.relationshipSelect.value]};this.onOkClick(m)}else return this._errorMessage(this.nls.layerSelector.errorInSelectingPolygonLayer),!1},_createPrecinctChooserArgs:function(){var m=n.createFeaturelayerFilter(["polygon"],!1);var v=n.createQueryableLayerFilter();m={multiple:!1,createMapResponse:this.map.webMapResponse,
showLayerTypes:["FeatureLayer"],filter:n.andCombineFilters([m,v])};m=new n(m);m=new k({layerChooser:m});m.placeAt(this.itemSelectDiv);m.startup();this.own(c(m,"selection-change",y.hitch(this,this._createPollingPlaceLayerOptions)))},_initLoading:function(){this.loading=new x({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()},onOkClick:function(m){return m},onCancleClick:function(m){return m},_createPollingPlaceLayerOptions:function(m){var v=[];if(m&&0<m.length){this.precinctLayer=
m[0];this.precinctLayerInfo={url:this.precinctLayer.url,geometryType:"esriGeometryPolygon",id:m[0].id};this.precinctLayerInfo.layerId=this.precinctLayer.layerId?this.precinctLayer.layerId:this.precinctLayer.url.substr(this.precinctLayer.url.lastIndexOf("/")+1,this.precinctLayer.url.length);var f=this.precinctLayer.url.substr(0,this.precinctLayer.url.lastIndexOf("/")+1);this.precinctLayerInfo.baseURL=f;this.pollingPlaceInfo=[];var w=[];u.forEach(this.precinctLayer.relationships,y.hitch(this,function(e){var a=
new h;w.push(a);t({url:f+e.relatedTableId,content:{f:"json"},handleAs:"json"}).then(y.hitch(this,function(p){a.resolve(p)}),y.hitch(this,function(){a.resolve()}))}));d(w).then(y.hitch(this,function(e){for(var a,p=0;p<e.length;p++)e[p]&&"esriGeometryPoint"===e[p].geometryType&&(a={url:f+e[p].id,baseURL:f,relationShipId:this.precinctLayer.relationships[p].id,layerId:e[p].id,geometryType:"esriGeometryPoint",title:e[p].name},a.title&&(this.pollingPlaceInfo[v.length]=a,v.push({label:this.pollingPlaceInfo[v.length].title,
value:v.length})));0<v.length?(this.relationshipSelect.options.length=0,v[0].selected=!0,this.relationshipSelect.addOption(v),b.remove(this.okButton,"jimu-state-disabled")):this._resetRelatedLayerSelector()}),y.hitch(this,function(){this._resetRelatedLayerSelector()}))}else this._resetRelatedLayerSelector()},_resetRelatedLayerSelector:function(){this.relationshipSelect.value="";this.relationshipSelect.options.length=0;this.relationshipSelect.addOption({value:"",label:"",selected:!0});b.add(this.okButton,
"jimu-state-disabled");this._errorMessage(this.nls.layerSelector.polygonLayerNotHavingRelatedLayer)},_onBtnBackClicked:function(){b.remove(this.itemSelectDiv,"esriCTHidden");b.add(this.relatedLayerSelectDiv,"esriCTHidden");b.remove(this.btnNext,"esriCTHidden");b.add(this.btnBack,"esriCTHidden")},_errorMessage:function(m){(new C({message:m})).message=m}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(A,B,E,y,u,d,h,c,b,l,n,k,t,x,C,m,v,f){var w=E([y,u,d,B],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,onlyFilterCurrentLayerWhenAddItem:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);t.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new f({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=k.hitch(this,this.basicFilter);
this.filter=w.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(e){var a=new c;this.onlyShowVisible?a.resolve(e.isShowInMap()):a.resolve(!0);return a},filter:function(e){e=new c;e.resolve(!0);return e},getSelectedItems:function(){var e=this.tree.getSelectedItems();return x.map(e,k.hitch(this,function(a){return this.getHandledItem(a)}))},getAllItems:function(){var e=this.tree.getAllItems(),a=[];x.forEach(e,
k.hitch(this,function(p){"root"!==p.id&&(p=this.getHandledItem(p),a.push(p))}));return a},getHandledItem:function(e){return{name:e.name,layerInfo:e.layerInfo}},_isLeafItem:function(e){return e.isLeaf},setCreateMapResponse:function(e){this.createMapResponse=e;v.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(k.hitch(this,function(a){this.layerInfosObj=a;this.own(A(this.layerInfosObj,"layerInfosChanged",k.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&
this.own(A(this.layerInfosObj,"layerInfosIsShowInMapChanged",k.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(e,a){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(e){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(e){this._clear();t.setStyle(this.errorTipSection,"display","block");var a=[];this.onlyShowWebMapLayers?(a=e.getLayerInfoArrayOfWebmap(),
a=a.concat(e.getTableInfoArrayOfWebmap())):(a=e.getLayerInfoArray(),a=a.concat(e.getTableInfoArray()));0!==a.length&&(t.setStyle(this.errorTipSection,"display","none"),x.forEach(a,k.hitch(this,function(p){this._addDirectLayerInfo(p)})))},_addDirectLayerInfo:function(e){e&&e.getLayerObject().then(k.hitch(this,function(){this._addItem("root",e)}),k.hitch(this,function(a){console.error(a)}))},_clear:function(){var e=this._store.query({parent:"root"});x.forEach(e,k.hitch(this,function(a){a&&"root"!==
a.id&&this._store.remove(a.id)}))},_addItem:function(e,a){var p=null,z=a.getLayerType(),F=this.filter(a);n({layerType:z,valid:F}).then(k.hitch(this,function(G){if(G.valid){var r=k.hitch(this,function(M,P){this._id++;p={name:a.title||"",parent:e,layerInfo:a,type:G.layerType,layerClass:a.layerObject.declaredClass,id:this._id.toString(),isLeaf:M,hasChildren:P};this._store.add(p)}),D=a.getSubLayers(),J=0===D.length,L=!0;this.onlyFilterCurrentLayerWhenAddItem?(J&&(L=!1),r(J,L)):J?r(J,!1):(D=x.map(D,k.hitch(this,
function(M){return this.filter(M)})),n(D).then(k.hitch(this,function(M){(M=x.some(M,function(P){return P}))&&r(J,M)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var e=this._getRootItem();e=new h({data:[e],getChildren:function(a){return this.query({parent:a.id})}});this._store=new b(e);e=new l({store:this._store,query:{id:"root"},mayHaveChildren:k.hitch(this,this._mayHaveChildren)});this.tree=new m({multiple:this.multiple,
model:e,showRoot:!1,isLeafItem:k.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:k.hitch(this,function(a,p){"root"!==a.id&&this._onTreeOpen(a,p)}),onClick:k.hitch(this,function(a,p,z){this._onTreeClick(a,p,z);this.emit("tree-click",a,p,z)}),getIconStyle:k.hitch(this,function(a,p){var z=null;if(!a||"root"===a.id)return null;var F={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},G=window.location.protocol+"//"+window.location.host+
require.toUrl("jimu");if(a=this._getIconInfo(a,p).imageName)F.backgroundImage="url("+G+"/css/images/"+a+")",z=F;return z}),getIconClass:k.hitch(this,function(a,p){return this._getIconInfo(a,p).className}),getTooltip:k.hitch(this,function(a){return this.displayTooltipForTreeNode?a.layerInfo.title:""})});t.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(e){return e.hasChildren},_getIconInfo:function(e,a){var p="",z="";"ArcGISDynamicMapServiceLayer"===
e.type||"ArcGISTiledMapServiceLayer"===e.type?a?(p="mapserver_open.png",z="mapservice-layer-icon open"):(p="mapserver_close.png",z="mapservice-layer-icon close"):"GroupLayer"===e.type?a?(p="group_layer2.png",z="group-layer-icon open"):(p="group_layer1.png",z="group-layer-icon close"):"FeatureLayer"===e.type?(e=C.getTypeByGeometryType(e.layerInfo.layerObject.geometryType),"point"===e?(p="point_layer1.png",z="point-layer-icon"):"polyline"===e?(p="line_layer1.png",z="line-layer-icon"):"polygon"===e&&
(p="polygon_layer1.png",z="polygon-layer-icon")):"Table"===e.type?(p="table.png",z="table-icon"):"ArcGISImageServiceLayer"===e.type||"ArcGISImageServiceVectorLayer"===e.type?(p="image_layer.png",z="iamge-layer-icon"):a?(p="mapserver_open.png",z="mapservice-layer-icon open"):(p="mapserver_close.png",z="mapservice-layer-icon close");return{imageName:p,className:z}},_onTreeOpen:function(e,a){if("root"!==e.id){var p=[];a=[];p=e.layerInfo.getSubLayers();e.checked||(this.shelter.show(),a=x.map(p,k.hitch(this,
function(z){return z.getLayerObject()})),n(a).then(k.hitch(this,function(){this.domNode&&(x.forEach(p,k.hitch(this,function(z){this._addItem(e.id,z)})),e.checked=!0,this.shelter.hide())}),k.hitch(this,function(z){console.error(z);this.shelter.hide()})))}},_onTreeClick:function(e,a,p){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});w.createFilterByLayerType=function(e){k.isArrayLike(e)||(e=[]);return function(a){var p=
new c;if(0===e.length)p.resolve(!0);else{var z=[];a.traversal(function(F){z.push(F.getLayerType())});n(z).then(function(F){for(var G=0;G<F.length;G++)for(var r=0;r<e.length;r++)if(F[G]===e[r]){p.resolve(!0);return}p.resolve(!1)},function(F){console.error(F);p.reject(F)})}return p}};w.createFeaturelayerFilter=function(e,a,p,z){var F=["point","polyline","polygon"];e&&0<e.length?(e=x.filter(e,function(G){return 0<=F.indexOf(G)}),0===e.length&&(e=F)):e=F;return function(G){var r=G.getLayerType();G=G.getLayerObject();
return n({layerType:r,layerObject:G}).then(function(D){var J=D.layerType;D=D.layerObject;if("ArcGISDynamicMapServiceLayer"===J||"ArcGISTiledMapServiceLayer"===J||"GroupLayer"===J||"FeatureCollection"===J)return!0;if("FeatureLayer"===J){J=C.getTypeByGeometryType(D.geometryType);J=0<=x.indexOf(e,J);var L=w._shouldPassStatisticsCheck(z,D);return D.url?(D=C.isFeaturelayerUrlSupportQuery(D.url,D.capabilities),J&&D&&L):a&&J}return"Table"===J?(J=C.isFeaturelayerUrlSupportQuery(D.url,D.capabilities),D=w._shouldPassStatisticsCheck(z,
D),p&&J&&D):!1})}};w.createImageServiceLayerFilter=function(e,a){return function(p){var z=p.getLayerType();p=p.getLayerObject();return n({layerType:z,layerObject:p}).then(function(F){var G=F.layerType,r=F.layerObject;return"ArcGISImageServiceLayer"===G||"ArcGISImageServiceVectorLayer"===G?e?C.isImageServiceSupportQuery(F.layerObject.capabilities)?a?w._shouldPassStatisticsCheck(a,r):!0:!1:!0:!1})}};w._shouldPassStatisticsCheck=function(e,a){return e?(e=!1,e=a.advancedQueryCapabilities?!!a.advancedQueryCapabilities.supportsStatistics:
!!a.supportsStatistics):!0};w.createQueryableLayerFilter=function(e){var a=w.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,e);e=w.createImageServiceLayerFilter(!0,e);return w.orCombineFilters([a,e])};w.andCombineFilters=function(e){return w._combineFilters(e,!0)};w.orCombineFilters=function(e){return w._combineFilters(e,!1)};w._combineFilters=function(e,a){return function(p){var z=new c,F=x.map(e,function(G){return G(p)});n(F).then(function(G){var r=!1;r=a?x.every(G,function(D){return D}):
x.some(G,function(D){return D});z.resolve(r)},function(G){console.error(G);z.reject(G)});return z}};return w})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),function(A,B,E,y,u,d,h,c,b,l,n,k,t,x,C,m){var v=A([C._TreeNode,t],{templateString:y,declaredClass:"jimu._TreeNode",
isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);d.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=d.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=d.toDom('\x3cinput type\x3d"checkbox" /\x3e');d.addClass(this.checkNode,"jimu-tree-check-node");d.place(this.checkNode,this.contentNode,"first");this.own(n(this.checkNode,"click",u.hitch(this,this._onClick)));this.own(n(this.rowNode,"keydown",
u.hitch(this,function(f,w){w.target=f;w.keyCode!==k.ENTER&&w.keyCode!==k.SPACE||this._onClick(w)},this.checkNode)));this.isLeaf?this.groupId?d.setStyle(this.checkNode,"display","none"):d.setStyle(this.checkNode,"display","inline"):d.setStyle(this.checkNode,"display","none");this.isLeaf?d.addClass(this.domNode,"jimu-tree-leaf-node"):d.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,d.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},
unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,d.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(f){(f.target||f.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,f):this.tree._onClick(this,f)},_onChange:function(){this.isLeaf&&setTimeout(u.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",
this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return A([C,t],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+m.getRandomString()},postCreate:function(){this.inherited(arguments);d.addClass(this.domNode,"jimu-tree");this.own(l.before(this,"onClick",u.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&d.setStyle(this.rootLoadingIndicator,"display",
"none");this.dndController.singular=!0;d.setAttr(this.domNode,"tabindex",0)},removeItem:function(f){this.model.store.remove(f)},getAllItems:function(){var f=this.getAllTreeNodeWidgets();return h.map(f,u.hitch(this,function(w){var e=w.item;e.selected=w.checkNode.checked;return e}))},getSelectedItems:function(){var f=this.getAllTreeNodeWidgets();f=h.filter(f,u.hitch(this,function(w){return w.checkNode.checked}));return h.map(f,u.hitch(this,function(w){return w.item}))},getFilteredItems:function(f){var w=
this.getAllTreeNodeWidgets();w=h.map(w,u.hitch(this,function(e){var a=e.item;a.selected=e.checkNode.checked;return a}));return h.filter(w,u.hitch(this,function(e){return f(e)}))},getTreeNodeByItemId:function(f){for(var w=this._getAllTreeNodeDoms(),e=0;e<w.length;e++){var a=x.byNode(w[e]);if(a.item.id.toString()===f.toString())return a}return null},selectItem:function(f){(f=this.getTreeNodeByItemId(f))&&f.isLeaf&&this.selectNodeWidget(f)},unselectItem:function(f){(f=this.getTreeNodeByItemId(f))&&f.isLeaf&&
f.unselect()},getAllLeafTreeNodeWidgets:function(){var f=this.getAllTreeNodeWidgets();return h.filter(f,u.hitch(this,function(w){return w.isLeaf}))},getAllTreeNodeWidgets:function(){var f=this._getAllTreeNodeDoms();return h.map(f,u.hitch(this,function(w){return x.byNode(w)}))},isLeafItem:function(f){return f&&f.isLeaf},_getAllTreeNodeDoms:function(){return b(".dijitTreeNode",this.domNode)},_createTreeNode:function(f){f.isLeaf=this.isLeafItem(f.item);this.multiple||(f.groupId=this.uniqueId);return new v(f)},
_onTreeNodeSelect:function(f){this.emit("item-select",{item:f.item,treeNode:f})},_onTreeNodeUnselect:function(f){this.emit("item-unselect",{item:f.item,treeNode:f})},selectNodeWidget:function(f){this.multiple||this.unselectAllLeafNodeWidgets();f.select()},_jimuBeforeClick:function(f,w,e){w.isLeaf&&(d.hasClass(e.target||e.srcElement,"jimu-tree-check-node")||(this.multiple?w.toggleSelect():this.selectNodeWidget(w)));return arguments},_onCheckNodeClick:function(f,w,e){!this.multiple&&w&&this.unselectAllLeafNodeWidgets();
c.stop(e);this.focusNode(f);setTimeout(u.hitch(this,function(){w?this.selectNodeWidget(f):f.unselect();this.onClick(f.item,f,e)}),0)},unselectAllLeafNodeWidgets:function(){var f=this.getAllLeafTreeNodeWidgets();h.forEach(f,u.hitch(this,function(w){w.unselect()}))}})})},"jimu/dijit/LayerChooserFromMapWithDropbox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/keys dojo/Evented dojo/Deferred dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LayerChooserFromMapWithDropbox.html jimu/LayerInfos/LayerInfos".split(" "),
function(A,B,E,y,u,d,h,c,b,l,n,k){return A([b,l,d],{templateString:n,baseClass:"jimu-layer-chooser-from-map-withdropbox",declaredClass:"jimu.dijit.LayerChooserFromMapWithDropbox",_selectedItem:null,_isLayerChooserShow:!1,layerInfosObj:null,layerChooser:null,customClass:"",postMixInProperties:function(){this.inherited(arguments);this.nls=window.jimuNls.queryableLayerSource;this.nls.customSelectLayer=this.label?this.label:this.nls.selectLayer},postCreate:function(){this.inherited(arguments);this.layerInfosObj=
k.getInstanceSync();this.layerChooser.domNode.style.zIndex=1;this.layerChooser.tree.domNode.style.borderTop="0";this.layerChooser.tree.domNode.style.maxHeight="290px";this.own(y(this.layerChooser,"tree-click",B.hitch(this,this._onTreeClick)));this.own(y(this.layerChooser,"update",B.hitch(this,this._onLayerChooserUpdate)));this.own(y(document.body,"click",B.hitch(this,this._onBodyClicked)));this.own(y(document.body,"keydown",B.hitch(this,function(t){t.keyCode===u.ENTER&&this._onBodyClicked(t)})));
this.own(y(this.layerChooser.domNode,"keydown",B.hitch(this,function(t){t.keyCode===u.ESCAPE&&this.hideLayerChooser()})))},destroy:function(){this.hideLayerChooser();this.layerChooser&&this.layerChooser.destroy();this.layerChooser=null;this.inherited(arguments)},getLayerChooser:function(){return this.layerChooser},setSelectedLayer:function(t){var x=new h;if(t){var C=this.layerInfosObj.getLayerOrTableInfoById(t.id);C?this.layerChooser.filter(C).then(B.hitch(this,function(m){m?(this._onSelectNewItem({layerInfo:C,
name:C.title,url:t.url}),x.resolve(!0)):x.resolve(!1)}),B.hitch(this,function(){x.resolve(!1)})):x.resolve(!1)}else this._onSelectNewItem(null),x.resolve(!0);return x},getSelectedItem:function(){return this._selectedItem},getSelectedItems:function(){return[this._selectedItem]},_onBodyClicked:function(t){t=t.target||t.srcElement;t===this.domNode||E.isDescendant(t,this.domNode)||t===this.layerChooser.domNode||E.isDescendant(t,this.layerChooser.domNode)||this.hideLayerChooser()},_onDropDownClick:function(t){t.stopPropagation();
t.preventDefault();this._isLayerChooserShow?this.hideLayerChooser():(this.isActive=!0,this.showLayerChooser())},_onDropDownKeydown:function(t){t.keyCode===u.ENTER&&this._onDropDownClick(t)},_getSelectedItems:function(){return this.layerChooser.getSelectedItems()},showLayerChooser:function(){this.layerChooser.domNode.style.minWidth=this.domNode.clientWidth+2+"px";c.open({parent:this,popup:this.layerChooser,around:this.domNode});var t=this.layerChooser.domNode.parentNode;t&&(E.addClass(t,"jimu-layer-chooser-from-map-withdropbox-popup"),
this.customClass&&E.addClass(t,this.customClass),this.layerChooser.tree.domNode.focus());this._isLayerChooserShow=!0},hideLayerChooser:function(){c.close(this.layerChooser);this._isLayerChooserShow=!1;this.isActive&&(this.dropDownBtn.focus(),this.isActive=!1)},_onLayerChooserUpdate:function(){this._selectedItem&&this.layerChooser.onlyShowVisible&&!this._selectedItem.layerInfo.isShowInMap()&&(this._selectedItem=null,this.emit("selection-change",[]))},_onSelectNewItem:function(t){var x=B.getObject("layerInfo.id",
!1,this._selectedItem)||-1,C=B.getObject("layerInfo.id",!1,t)||-1;x=x!==C;this._selectedItem=t;this.hideLayerChooser();t=B.getObject("layerInfo.title",!1,this._selectedItem)||"";this.layerNameNode.innerHTML=t;E.setAttr(this.layerNameNode,"title",t);t=B.getObject("layerInfo.layerObject",!1,this._selectedItem);x&&this.emit("selection-change",[t])},_onTreeClick:function(){var t=this._getSelectedItems();this._onSelectNewItem(0<t.length?t[0]:null)}})})},"widgets/DistrictLookup/setting/SearchSourceSettings":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./SearchSourceSettings.html dojo/_base/html jimu/dijit/SimpleTable ./QuerySourceSetting ./LocatorSourceSetting jimu/LayerInfos/LayerInfos ../searchSourceUtils jimu/utils dojo/when esri/lang dojo/_base/lang dojo/_base/array dojo/query dojo/on dojo/dom-class jimu/dijit/CheckBox dojo/domReady!".split(" "),
function(A,B,E,y,u,d,h,c,b,l,n,k,t,x,C,m,v,f,w,e){return A([B,E,y],{baseClass:"jimu-widget-districtlookup-search-source-settings",templateString:u,startup:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(f(this.menuItemClickNode,"click",C.hitch(this,this._onMenuItemClick)));this._createSourceListTable();this.showInfoWindowOnSelect=new e({checked:!1,label:this.nls.searchSourceSetting.generalSettingCheckboxLabel},this.showInfoWindowOnSelectNode);this.config&&
this.config.sources||(this.config.sources=[]);this.shelter.show();l.getInstance(this.map,this.map.itemInfo).then(C.hitch(this,function(a){this.layerInfosObj=a;n.setMap(this.map);n.setLayerInfosObj(this.layerInfosObj);n.setAppConfig(this.appConfig);t(n.getConfigInfo(this.config)).then(C.hitch(this,this._loadConfig))}))},_loadConfig:function(a){this.domNode&&(this.setConfig(a),this.shelter.hide())},setConfig:function(a){this.config=a;a=a.sources;this.allPlaceholder.set("value",k.stripHTML(this.config.allPlaceholder));
this.showInfoWindowOnSelect.setValue(x.isDefined(this.config.showInfoWindowOnSelect)?!!this.config.showInfoWindowOnSelect:!0);m.forEach(a,C.hitch(this,function(p,z){var F=this.sourceList.addRow({name:p.name||""});F&&F.success?(this._setRelatedConfig(F.tr,p),0===z&&setTimeout(C.hitch(this,function(){this.sourceList.selectRow(F.tr)}),100)):console.error("add row failed ",F)}))},getConfig:function(){if(this._currentSourceSetting)if(this._currentSourceSetting.isValidConfig())this._closeSourceSetting();
else return null;var a={allPlaceholder:k.stripHTML(this.allPlaceholder.get("value")),showInfoWindowOnSelect:this.showInfoWindowOnSelect.checked},p=this.sourceList.getRows(),z=[];m.forEach(p,C.hitch(this,function(F){var G=this._getRelatedConfig(F);delete G._definition;this._removeRelatedConfig(F);z.push(G)}));a.sources=z;return a},destroy:function(){n.setMap(null);n.setLayerInfosObj(null);n.setAppConfig(null);this.inherited(arguments)},_onAllPlaceholderBlur:function(){this.allPlaceholder.set("value",
k.stripHTML(this.allPlaceholder.get("value")))},_createSourceListTable:function(){this.sourceList=new h({autoHeight:!1,selectable:!0,fields:[{name:"name",title:this.nls.searchSourceSetting.nameTitle,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"70px",type:"actions",actions:["up","down","delete"]}]},this.sourceList);d.setStyle(this.sourceList.domNode,"height","100%");this.sourceList.startup();this.own(f(this.sourceList,"row-select",C.hitch(this,this._onSourceItemSelected)));
this.own(f(this.sourceList,"row-delete",C.hitch(this,this._onSourceItemRemoved)))},_onSourceItemRemoved:function(a){this._currentSourceSetting&&this._currentSourceSetting.getRelatedTr()===a&&(this._currentSourceSetting.destroy(),this._currentSourceSetting=null)},_onSourceItemSelected:function(a){var p=this._getRelatedConfig(a),z=this._currentSourceSetting&&this._currentSourceSetting.tr;p&&a!==z&&(this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?(this._currentSourceSetting.showValidationTip(),
this.sourceList.selectRow(z)):(w.remove(this.searchSources,"esriCTSourcesExtraHeight"),"query"===p.type?this._createNewQuerySourceSettingFromSourceList(p,p._definition||{},a):"locator"===p.type&&this._createNewLocatorSourceSettingFromSourceList(p,p._definition||{},a)))},_setRelatedConfig:function(a,p){v(a).data("config",C.clone(p))},_getRelatedConfig:function(a){return v(a).data("config")[0]},_removeRelatedConfig:function(a){return v(a).removeData("config")},_onMenuItemClick:function(a){a=a&&a.target&&
d.getAttr(a.target,"type");this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?this.emit("invalid-source-setting"):(w.remove(this.searchSources,"esriCTSourcesExtraHeight"),"locator"===a?this._addNewLocator():"query"===a&&this._addNewQuerySource())},_addNewLocator:function(){this._createNewLocatorSourceSettingFromMenuItem({},{})},_addNewQuerySource:function(){this._createNewQuerySourceSettingFromMenuItem({},{})},_createNewLocatorSourceSettingFromMenuItem:function(a,p){var z=new b({nls:this.nls.searchSourceSetting,
map:this.map});z.setDefinition(p);z.setConfig({url:a.url||"",name:a.name||"",singleLineFieldName:a.singleLineFieldName||"",placeholder:a.placeholder||"",countryCode:a.countryCode||"",zoomScale:a.zoomScale||5E4,maxSuggestions:a.maxSuggestions||6,maxResults:a.maxResults||6,searchInCurrentMapExtent:!!a.searchInCurrentMapExtent,type:"locator"});z._openLocatorChooser();z.own(f(z,"select-locator-url-ok",C.hitch(this,function(F){(F=this.sourceList.addRow({name:F.name||"New Geocoder"},this.sourceList.getRows().length))&&
F.success&&(this._currentSourceSetting&&this._closeSourceSetting(),z.setRelatedTr(F.tr),z.placeAt(this.sourceSettingNode),this.sourceList.selectRow(F.tr),this._currentSourceSetting=z)})));z.own(f(z,"reselect-locator-url-ok",C.hitch(this,function(F){var G=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(G,{name:F.name})})));z.own(f(z,"select-locator-url-cancel",C.hitch(this,function(){this._currentSourceSetting!==z&&(z.destroy(),z=null)})))},_createNewLocatorSourceSettingFromSourceList:function(a,
p,z){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new b({nls:this.nls.searchSourceSetting,map:this.map});this._currentSourceSetting.own(f(this._currentSourceSetting,"enable-local-search",C.hitch(this,function(){w.add(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.own(f(this._currentSourceSetting,"disable-local-search",C.hitch(this,function(){w.remove(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.setDefinition(p);
this._currentSourceSetting.setConfig({url:a.url||"",name:a.name||"",singleLineFieldName:a.singleLineFieldName||"",placeholder:a.placeholder||"",countryCode:a.countryCode||"",zoomScale:a.zoomScale||5E4,maxSuggestions:a.maxSuggestions||6,maxResults:a.maxResults||6,searchInCurrentMapExtent:!!a.searchInCurrentMapExtent,enableLocalSearch:!!a.enableLocalSearch,localSearchMinScale:a.localSearchMinScale,localSearchDistance:a.localSearchDistance,type:"locator"});this._currentSourceSetting.setRelatedTr(z);
this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.own(f(this._currentSourceSetting,"reselect-locator-url-ok",C.hitch(this,function(F){var G=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(G,{name:F.name})})))},_closeSourceSetting:function(){var a=this._currentSourceSetting.getRelatedTr(),p=this._currentSourceSetting.getConfig();p._definition=this._currentSourceSetting.getDefinition();this._setRelatedConfig(a,p);this.sourceList.editRow(a,{name:p.name});
this._currentSourceSetting.destroy()},_createNewQuerySourceSettingFromMenuItem:function(a,p){var z=new c({nls:this.nls.searchSourceSetting,map:this.map,appConfig:this.appConfig});z.setDefinition(p);z.setConfig({url:a.url,name:a.name||"",layerId:a.layerId,placeholder:a.placeholder||"",searchFields:a.searchFields||[],displayField:a.displayField||p.displayField||"",exactMatch:!!a.exactMatch,zoomScale:a.zoomScale||5E4,maxSuggestions:a.maxSuggestions||6,maxResults:a.maxResults||6,searchInCurrentMapExtent:!!a.searchInCurrentMapExtent,
type:"query"});z._openQuerySourceChooser();z.own(f(z,"select-query-source-ok",C.hitch(this,function(F){(F=this.sourceList.addRow({name:F.name},0))&&F.success&&(this._currentSourceSetting&&this._closeSourceSetting(),z.setRelatedTr(F.tr),z.placeAt(this.sourceSettingNode),this.sourceList.selectRow(F.tr),this._currentSourceSetting=z)})));z.own(f(z,"reselect-query-source-ok",C.hitch(this,function(F){var G=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(G,{name:F.name})})));z.own(f(z,
"select-query-source-cancel",C.hitch(this,function(){this._currentSourceSetting!==z&&(z.destroy(),z=null)})))},_createNewQuerySourceSettingFromSourceList:function(a,p,z){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new c({nls:this.nls.searchSourceSetting,map:this.map,appConfig:this.appConfig});this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.setDefinition(p);this._currentSourceSetting.setConfig({url:a.url,name:a.name||"",layerId:a.layerId,
placeholder:a.placeholder||"",searchFields:a.searchFields||[],displayField:a.displayField||p.displayField||"",exactMatch:!!a.exactMatch,zoomScale:a.zoomScale||5E4,maxSuggestions:a.maxSuggestions||6,maxResults:a.maxResults||6,searchInCurrentMapExtent:!!a.searchInCurrentMapExtent,type:"query"});this._currentSourceSetting.setRelatedTr(z);this._currentSourceSetting.own(f(this._currentSourceSetting,"reselect-query-source",C.hitch(this,function(F){var G=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(G,
{name:F.name})})))}})})},"widgets/DistrictLookup/setting/QuerySourceSetting":function(){define("dojo/_base/declare dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./QuerySourceSetting.html dojo/_base/lang dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented jimu/dijit/_FeaturelayerSourcePopup jimu/portalUrlUtils esri/request esri/lang jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox jimu/dijit/LoadingShelter dijit/form/ValidationTextBox dojo/NodeList-data".split(" "),
function(A,B,E,y,u,d,h,c,b,l,n,k,t,x,C,m,v,f,w){return A([E,y,u,k],{baseClass:"jimu-widget-districtlookup-query-source-setting",templateString:d,nls:null,appConfig:null,map:null,tr:null,config:null,fieldsPopup:null,_layerDefinition:null,_fieldsCheckBox:null,_layerId:null,_suggestible:!1,_clickSet:!1,postMixInProperties:function(){this.nls.common={};this.nls.common=window.jimuNls.common},postCreate:function(){this.inherited(arguments);this.own(b(this.setSourceBtnClickNode,"click",h.hitch(this,this._onSetSourceClick)));
this.own(b(this.sourceName,"Blur",h.hitch(this,this._onSourceNameBlur)));this.own(b(this.placeholder,"Blur",h.hitch(this,this._onPlaceholderBlur)));this.own(b(this.fieldsSelectorNode,"click",h.hitch(this,this._onFieldsSelectorClick)));this.exactMatch=new w({checked:!1,label:this.nls.exactMatch},this.exactMatch);this.searchInCurrentMapExtent=new w({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this._layerDefinition={};this._fieldsCheckBox=[];this._setMessageNodeContent("")},
setDefinition:function(e){this._layerDefinition=e||{}},getDefinition:function(){return this._layerDefinition},setRelatedTr:function(e){this.tr=e},getRelatedTr:function(){return this.tr},setConfig:function(e){if("[object Object]"===Object.prototype.toString.call(e)){var a=e.url;a&&(this.config=e,this.shelter.show(),this._layerDefinition.url!==a?this._getDefinitionFromRemote(a).then(h.hitch(this,function(p){a&&p&&"error"!==p.type?(this._layerDefinition=p,this._layerDefinition.url=a,this._setSourceItems(),
this._setMessageNodeContent("")):a&&p&&"error"===p.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(m.substitute({URL:p.url},h.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setMessageNodeContent(""),this._setSourceItems(),this.shelter.hide()))}},isValidConfig:function(){var e=this.getConfig();return e.url&&e.name&&e.displayField?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.sourceUrl);this._showValidationErrorTip(this.sourceName)},
getConfig:function(){return{layerId:this._layerId,url:this.sourceUrl.get("value"),name:v.stripHTML(this.sourceName.get("value")),placeholder:v.stripHTML(this.placeholder.get("value")),searchFields:this._getSearchFields(),displayField:this.displayField.get("value"),exactMatch:this.exactMatch.getValue(),searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,zoomScale:this.zoomScale.get("value")||5E4,maxSuggestions:this.maxSuggestions.get("value")||6,maxResults:this.maxResults.get("value")||
6,type:"query"}},destroy:function(){this.inherited(arguments);this.fieldsPopup&&(this.fieldsPopup.close(),this.fieldsPopup=null);this.tr=this.nls=this.config=this._layerDefinition=null},_onSourceNameBlur:function(){this.sourceName.set("value",v.stripHTML(this.sourceName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",v.stripHTML(this.placeholder.get("value")))},_disableSourceItems:function(){this.sourceName.set("disabled",!0);this.placeholder.set("disabled",!0);this.searchFields.set("disabled",
!0);B.setStyle(this.fieldsSelectorNode,"display","none");this.displayField.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0);this.zoomScale.set("disabled",!0)},_enableSourceItems:function(){this.sourceName.set("disabled",!1);this.placeholder.set("disabled",!1);this.searchFields.set("disabled",!1);B.setStyle(this.fieldsSelectorNode,"display","inline-block");this.displayField.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",
!1);this.zoomScale.set("disabled",!1)},_setSourceItems:function(){this.sourceUrl.set("value",this.config.url);this.sourceName.set("value",v.stripHTML(this.config.name||""));this.placeholder.set("value",v.stripHTML(this.config.placeholder||""));this._setSearchFields2Node();this.searchFields.set("value",this._getSearchFieldsAlias());this._setDisplayFieldOptions();this.displayField.set("value",this.config.displayField||"");this.exactMatch.setValue(!!this.config.exactMatch);this.searchInCurrentMapExtent.setValue(!!this.config.searchInCurrentMapExtent);
this.zoomScale.set("value",this.config.zoomScale||5E4);this.maxSuggestions.set("value",this.config.maxSuggestions||6);this.maxResults.set("value",this.config.maxResults||6);this._layerId=this.config.layerId;(this._suggestible=this._layerDefinition&&this._layerDefinition.advancedQueryCapabilities&&this._layerDefinition.advancedQueryCapabilities.supportsPagination)?this._hideSuggestibleTips():this._showSuggestibleTips();this._layerDefinition&&"esriGeometryPoint"===this._layerDefinition.geometryType?
B.setStyle(this.zoomScaleTr,"display",""):B.setStyle(this.zoomScaleTr,"display","none");this._enableSourceItems()},_getDefinitionFromRemote:function(e){var a=new n,p=C({url:e,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(p);p.then(h.hitch(this,function(z){a.resolve(z)}),h.hitch(this,function(z){console.error(z);a.resolve({type:"error",url:this._getRequestUrl(e)})}));return a.promise},_setMessageNodeContent:function(e,a){B.empty(this.messageNode);e.nodeType||(e=B.toDom(e));
B.place(e,this.messageNode);a?B.setStyle(this.messageTr,"display",""):B.setStyle(this.messageTr,"display","none")},_getRequestUrl:function(e){var a=window.location.protocol;return"http:"===a?x.setHttpProtocol(e):"https:"===a?x.setHttpsProtocol(e):e},_setSearchFields2Node:function(){var e=null,a=this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length;this.config&&this.config.searchFields&&0<this.config.searchFields.length||(e=[]);if(a){var p=this._layerDefinition.fields;
e=c.filter(this.config.searchFields,function(z){return c.some(p,function(F){return F.name===z})})}else e=this.config.searchFields;this.searchFields.set("_fields",e)},_setDisplayFieldOptions:function(){var e=[];this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length?e=c.map(this._layerDefinition.fields,function(a){return{label:a.alias||a.name||"",value:a.name||""}}):this.config&&this.config.displayField&&(e=[{label:this.config.displayField,value:this.config.displayField}]);
this.displayField.set("options",e)},_getSearchFieldsAlias:function(){var e=this._getSearchFields();if(!(e&&0<e.length))return"";if(this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length){for(var a=this._layerDefinition.fields,p=c.map(a,function(D){return D&&D.name}),z=[],F=0,G=e.length;F<G;F++){var r=p.indexOf(e[F]);-1<r&&(a[r].alias?z.push(a[r].alias):z.push(a[r].name))}return z.join(",")}return e.join(",")},_getSearchFields:function(){return this.searchFields.get("_fields")},
_setSearchFields:function(e){this.searchFields.set("_fields",e)},_onSetSourceClick:function(){this._clickSet=!0;this._openServiceChooser()},_openQuerySourceChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){var e=new t({titleLabel:this.nls.setLayerSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});b.once(e,"ok",h.hitch(this,function(a){e.close();this.setDefinition(a.definition||
{});this.setConfig({layerId:a.layerInfo&&a.layerInfo.id||null,url:a.url,name:a.name||"",placeholder:"",searchFields:[],displayField:this._layerDefinition.displayField||"",exactMatch:!1,zoomScale:5E4,maxSuggestions:6,maxResults:6,type:"query"});e=null;this._setMessageNodeContent("");this._clickSet?this.emit("reselect-query-source-ok",a):this.emit("select-query-source-ok",a)}));b.once(e,"cancel",h.hitch(this,function(){e.close();e=null;this.emit("select-query-source-cancel")}))},_onFieldsSelectorClick:function(){var e=
B.create("div",{style:{maxHeight:"480px"}}),a=this._layerDefinition.fields;this._fieldsCheckBox=[];c.forEach(a,h.hitch(this,function(p,z){var F=new w({checked:this._isSearchable(p),label:p.alias||p.name});B.addClass(F.domNode,"esriCTSearchSourceFieldCheckbox");B.addClass(F.labelNode,"jimu-ellipsis");B.setAttr(F.domNode,{title:p.alias||p.name});0===z%3&&(window.isRTL?B.setStyle(F.domNode,"marginRight",0):B.setStyle(F.domNode,"marginLeft",0));F.placeAt(e);l(F.domNode).data("fieldName",p.name);this._fieldsCheckBox.push(F)}));
this.fieldsPopup=new f({titleLabel:this.nls.setSearchFields,autoHeight:!0,content:e,container:window.jimuConfig.layoutId,width:640,maxHeight:600,buttons:[{label:this.nls.common.ok,onClick:h.hitch(this,"_onSearchFieldsOk")},{label:this.nls.common.cancel,classNames:["jimu-btn-vacation"]}],onClose:h.hitch(this,function(){this.fieldsPopup=null})});B.addClass(this.fieldsPopup.domNode,this.baseClass)},_onSearchFieldsOk:function(){var e=[];c.forEach(this._fieldsCheckBox,function(a){if(a.getValue()){var p=
l(a.domNode).data("fieldName");e.push(p[0]);l(a.domNode).removeData()}});this._setSearchFields(e);this.searchFields.set("value",this._getSearchFieldsAlias());this.fieldsPopup.close()},_isSearchable:function(e){var a=this._getSearchFields();return c.some(a,h.hitch(this,function(p){return e.name===p}))},_showSuggestibleTips:function(){B.removeClass(this.tipsNode,"esriCTHidden");B.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){B.addClass(this.tipsNode,"esriCTHidden");
B.setStyle(this.maxSuggestions.domNode,"display","block")},_showValidationErrorTip:function(e){if(!e.validate()&&e.domNode&&e.focusNode){var a=e.get("disabled");a&&e.set("disabled",!1);e.focusNode.focus();setTimeout(h.hitch(this,function(){e.focusNode.blur();a&&e.set("disabled",!0);e=null}),100)}}})})},"jimu/dijit/_FeaturelayerSourcePopup":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/FeaturelayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),
function(A,B,E,y,u,d,h,c,b){return A([d,B],{width:830,height:560,titleLabel:"",dijitArgs:null,postCreate:function(){this.inherited(arguments);u.addClass(this.domNode,"jimu-featurelayer-source-popup");this._initFls();this._initLoading()},getSelectedRadioType:function(){return this.fls.getSelectedRadioType()},_initFls:function(){this.fls=new h(this.dijitArgs);this.fls.placeAt(this.contentContainerNode);this.fls.startup();this.own(E(this.fls,"ok",y.hitch(this,function(l){if(0!==l.length){var n=l[0];
if(n.definition)try{n.definition.name=n.name,n.definition.url=n.url,this.emit("ok",n)}catch(k){console.error(k)}else this.loading.show(),b({url:n.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(y.hitch(this,function(k){if(this.domNode){this.loading.hide();n.definition=k;try{n.definition.name=n.name,n.definition.url=n.url,this.emit("ok",n)}catch(t){console.error(t)}}}),y.hitch(this,function(k){console.error(k);this.domNode&&this.loading.hide()}))}})));this.own(E(this.fls,
"cancel",y.hitch(this,function(){try{this.emit("cancel")}catch(l){console.error(l)}})))},_initLoading:function(){this.loading=new c({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/FeaturelayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/RadioBtn jimu/dijit/_FeaturelayerChooserWithButtons jimu/dijit/FeaturelayerChooserFromPortal jimu/dijit/_FeaturelayerServiceChooserContent jimu/portalUrlUtils".split(" "),
function(A,B,E,y,u,d,h,c,b,l,n,k,t,x){return A([B,E,y,b],{templateString:u,baseClass:"jimu-layer-source jimu-featurelayer-source",declaredClass:"jimu.dijit.FeaturelayerSource",nls:null,multiple:!1,createMapResponse:null,portalUrl:null,layerChooserFromMap:null,postMixInProperties:function(){this.nls=window.jimuNls.featureLayerSource;this.portalUrl=x.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedRadioType:function(){if(this.mapRadio.checked)return"map";
if(this.portalRadio.checked)return"portal";if(this.urlRadio.checked)return"url"},getSelectedItems:function(){var C=[];this.mapRadio.checked?C=this.flcMap.getSelectedItems():this.portalRadio.checked?C=this.flcPortal.getSelectedItems():this.urlRadio.checked&&(C=this.flcUrl.getSelectedItems());return C},startup:function(){this.inherited(arguments);this.flcMap.startup();this.flcPortal.startup();this.flcUrl.startup()},_initSelf:function(){this._initRadios();this._createFeaturelayerChooserWithButtons();
this._createFeaturelayerChooserFromPortal();this._createFeaturelayerServiceChooserContent();this._onRadioClicked()},_createFeaturelayerChooserWithButtons:function(){this.flcMap=new n({style:{width:"100%",height:"100%"},multiple:this.multiple,createMapResponse:this.createMapResponse,onlyShowWebMapLayers:!0,layerChooserFromMap:this.layerChooserFromMap});this.flcMap.operationTip=this.nls.selectLayer;this.flcMap.placeAt(this.flcContainer);this.own(c(this.flcMap,"ok",d.hitch(this,function(C){C&&0<C.length&&
this.emit("ok",C)})));this.own(c(this.flcMap,"cancel",d.hitch(this,function(){this.emit("cancel")})))},_createFeaturelayerChooserFromPortal:function(){this.flcPortal=new k({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.flcPortal.operationTip=this.nls.chooseItem;this.flcPortal.placeAt(this.hflcContainer);this.own(c(this.flcPortal,"next",d.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseLayer;this._updateOperationTip()})));
this.own(c(this.flcPortal,"back",d.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(c(this.flcPortal,"ok",d.hitch(this,function(C){C&&0<C.length&&this.emit("ok",C)})));this.own(c(this.flcPortal,"cancel",d.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createFeaturelayerServiceChooserContent:function(){this.flcUrl=
new t({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.flcUrl.operationTip=this.nls.setServiceUrl;this.flcUrl.placeAt(this.flscContainer);this.own(c(this.flcUrl,"ok",d.hitch(this,function(C){C&&0<C.length&&this.emit("ok",C)})));this.own(c(this.flcUrl,"cancel",d.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var C="featureLayerSourceRadios_"+this._getRandomString(),m=d.hitch(this,this._onRadioClicked);this.mapRadio=new l({group:C,onStateChange:m,checked:!0});
this.mapRadio.placeAt(this.mapTd,"first");this.portalRadio=new l({group:C,onStateChange:m,checked:!1});this.portalRadio.placeAt(this.portalTd,"first");this.urlRadio=new l({group:C,onStateChange:m,checked:!1});this.urlRadio.placeAt(this.urlTd,"first");this.own(c(this.mapLabel,"click",d.hitch(this,function(){this.mapRadio.check()})));this.own(c(this.portalLabel,"click",d.hitch(this,function(){this.portalRadio.check()})));this.own(c(this.urlLabel,"click",d.hitch(this,function(){this.urlRadio.check()})))},
_getRandomString:function(){var C=Math.random().toString();return C=C.slice(2,C.length)},_onRadioClicked:function(){h.setStyle(this.flcContainer,"display","none");h.setStyle(this.hflcContainer,"display","none");h.setStyle(this.flscContainer,"display","none");this.mapRadio.checked?(h.setStyle(this.flcContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(h.setStyle(this.hflcContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):
this.urlRadio.checked&&(h.setStyle(this.flscContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=this.flcMap.operationTip:this.portalRadio.checked?this.operationTip.innerHTML=this.flcPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.flcUrl.operationTip)}})})},"jimu/dijit/_FeaturelayerChooserWithButtons":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/FeaturelayerChooserFromMap".split(" "),
function(A,B,E,y,u,d,h,c,b){return u([d,h,c,B],{baseClass:"jimu-layer-chooser-with-buttons jimu-feature-layer-chooser-with-buttons",declaredClass:"jimu.dijit.FeaturelayerChooserWithButtons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"chooser-container" data-dojo-attach-point\x3d"chooserContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-trailing-margin1 jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
layerChooserFromMap:null,constructor:function(l){this.options=l},postMixInProperties:function(){this.nls=E.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.layerChooser=this.layerChooserFromMap?this.layerChooserFromMap:new b(this.options);this.layerChooser.placeAt(this.chooserContainer);y.setStyle(this.layerChooser.domNode,{width:"100%",height:"100%"});this.own(A(this.layerChooser,"tree-click",E.hitch(this,function(){0<this.getSelectedItems().length?y.removeClass(this.btnOk,
"jimu-state-disabled"):y.addClass(this.btnOk,"jimu-state-disabled")})));this.own(A(this.btnOk,"click",E.hitch(this,function(){var l=this.getSelectedItems();0<l.length&&this.emit("ok",l)})));this.own(A(this.btnCancel,"click",E.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.layerChooser.getSelectedItems()},startup:function(){this.inherited(arguments);this.layerChooser.startup()}})})},"jimu/dijit/FeaturelayerChooserFromMap":function(){define(["dojo/_base/declare",
"dojo/Deferred","dojo/_base/html","dojo/_base/lang","./LayerChooserFromMap"],function(A,B,E,y,u){return A([u],{baseClass:"jimu-featurelayer-chooser-from-map",declaredClass:"jimu.dijit.FeaturelayerChooserFromMap",types:null,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,ignoredFeaturelayerIds:null,mustSupportStatistics:!1,ignoreVirtualLayer:!1,postMixInProperties:function(){this.inherited(arguments);this.ignoredFeaturelayerIds||(this.ignoredFeaturelayerIds=[]);this.basicFilter=y.hitch(this,
this.basicFilter);this.filter=u.createFeaturelayerFilter(this.types,this.showLayerFromFeatureSet,this.showTable,this.mustSupportStatistics);this.ignoreVirtualLayer&&(this.filter=u.andCombineFilters([this.filter,y.hitch(this,this._ignoreVirtualLayerFilter)]))},postCreate:function(){this.inherited(arguments);E.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},_ignoreVirtualLayerFilter:function(d){return d.getLayerType().then(function(h){return!("ArcGISDynamicMapServiceLayer"===h||"ArcGISTiledMapServiceLayer"===
h||"GroupLayer"===h)})},basicFilter:function(d){var h=new B;0<=this.ignoredFeaturelayerIds.indexOf(d.id)?h.resolve(!1):this.onlyShowVisible&&"Table"!==d.getLayerType()?h.resolve(d.isShowInMap()):h.resolve(!0);return h},getHandledItem:function(d){var h=this.inherited(arguments),c=d&&d.layerInfo;c=c&&c.layerObject;h.url=c&&c.url||"";return h}})})},"jimu/dijit/FeaturelayerChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/FeaturelayerServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(A,B,E,y,u,d,h,c,b,l,n,k,t,x,C,m,v){return A([B,E,y,k],{templateString:u,declaredClass:"jimu.dijit.FeaturelayerChooserFromPortal",baseClass:"jimu-service-chooser-from-portal jimu-featurelayer-chooser-from-portal",_serviceBrowserDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=d.mixin({},window.jimuNls.common);this.nls=d.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal);this.portalUrl=m.getStandardPortalUrl(this.portalUrl);this.multiple=!0===this.multiple?
!0:!1},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},_initSelf:function(){this.selector=new x({portalUrl:this.portalUrl,itemTypes:["Feature Service","Map Service"],onlyShowOnlineFeaturedItems:!1});this.own(b(this.selector,"item-selected",d.hitch(this,this._onItemSelected)));this.own(b(this.selector,"none-item-selected",d.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);
this.selector.startup();this.serviceBrowser=new C({multiple:this.multiple});this.own(b(this.serviceBrowser,"tree-click",d.hitch(this,this._onServiceBrowserClicked)));this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup()},_onItemSelected:function(){h.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){h.addClass(this.btnNext,"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceBrowserDef&&!this._serviceBrowserDef.isFulfilled()&&
this._serviceBrowserDef.cancel();h.setStyle(this.btnOk,"display","none");h.setStyle(this.btnNext,"display","block");h.setStyle(this.btnBack,"display","none");h.addClass(this.btnOk,"jimu-state-disabled");h.setStyle(this.selectorContainer,"display","block");h.setStyle(this.serviceBrowserContainer,"display","none");this.serviceBrowser.reset();this.emit("back")},_onBtnOkClicked:function(){var f=this.getSelectedItems();0<f.length&&this.emit("ok",f)},_onBtnNextClicked:function(){var f=this.selector.getSelectedItem();
f&&(h.setStyle(this.btnNext,"display","none"),h.setStyle(this.btnBack,"display","block"),h.setStyle(this.btnOk,"display","block"),h.addClass(this.btnOk,"jimu-state-disabled"),h.setStyle(this.selectorContainer,"display","none"),h.setStyle(this.serviceBrowserContainer,"display","block"),this.serviceBrowser.reset(),this._serviceBrowserDef=this.serviceBrowser.setUrl(f.url||f.item),this._serviceBrowserDef.then(d.hitch(this,function(){this._serviceBrowserDef=null;this._setOkStateBySelectedItems()}),d.hitch(this,
function(){this._serviceBrowserDef=null})),this.emit("next"))},_setOkStateBySelectedItems:function(){0<this.serviceBrowser.getSelectedItems().length?h.removeClass(this.btnOk,"jimu-state-disabled"):h.addClass(this.btnOk,"jimu-state-disabled")},_onServiceBrowserClicked:function(){this._setOkStateBySelectedItems()},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/FeaturelayerServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array",
"jimu/serviceBrowserRuleUtils"],function(A,B,E,y,u){return A([B],{baseClass:"jimu-featurelayer-service-browser",declaredClass:"jimu.dijit.FeaturelayerServiceBrowser",url:"",multiple:!1,types:null,isSupportQuery:!0,postMixInProperties:function(){this.inherited(arguments);this.rule=u.getFeaturelayerServiceBrowserRule(this.types,this.isSupportQuery)},getSelectedItems:function(){var d=this.inherited(arguments);return d=y.map(d,E.hitch(this,function(h){return{name:h.name,url:h.url,definition:h.definition}}))}})})},
"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingIndicator".split(" "),function(A,B,E,y,u,d,h,c,b,l,n,k,t,x,C){return A([B,E,y,u],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',
_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);h.addClass(this.domNode,"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},
setUrl:function(m){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new b;m&&"string"===typeof m&&m.replace(/\/*$/g,"")||this._def.reject();m=m.replace(/\/*$/g,"");m=d.trim(m);var v=m.match(/^http(s?):\/\//gi);v&&0<v.length||(m="http://"+m);if(!(0>=m.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=m))return m=this._getRootItem(),m=x.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,m):this._isUrlContainsServiceType(this._currentUrl)?
this._searchServiceUrl(this._currentUrl,m):this._searchFolderServiceUrl(this._currentUrl,m),this.shelter.show(),m.then(d.hitch(this,function(f){this.domNode&&this.shelter.hide();var w=this.tree.getAllLeafTreeNodeWidgets();1===w.length&&w[0].select();this._def.resolve(f)}),d.hitch(this,function(f){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(f)})),this._def;this._def.reject()},_getItem:function(m){return this.rule.getItem(m)},_getSubItemUrls:function(m){return this.rule.getSubItemUrls(m)},
_getSubItems:function(m){var v=new b;this._getSubItemUrls(m).then(d.hitch(this,function(f){f=c.map(f,d.hitch(this,function(w){return this._getItem(w)}));l(f).then(d.hitch(this,function(w){w=c.filter(w,d.hitch(this,function(e){return e&&"object"===typeof e}));v.resolve(w)}),d.hitch(this,function(w){v.reject(w)}))}),d.hitch(this,function(f){v.reject(f)}));return v},_selectFirstLeafTreeNodeWidget:function(){var m=this.tree.getAllLeafTreeNodeWidgets();1===m.length&&m[0].select()},isLeafItem:function(m){return 0<=
this.rule.leafTypes.indexOf(m.type)},isServiceTypeSupported:function(m){return this.rule.isServiceTypeSupported(m)},_getStringEndWith:function(m,v){var f="",w=m.indexOf(v);0<=w&&(f=m.slice(0,w+v.length));return f},_isUrlContainsServiceType:function(m){return this.rule.isUrlContainsServiceType(m)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(m){var v="";m=m.split("/");return v=m[m.length-1]},_searchBaseServiceUrl:function(m,
v){var f=new b;this._getRestInfo(m).then(d.hitch(this,function(w){if(this.domNode){var e=[];c.map(w.folders,d.hitch(this,function(a){var p={name:a,type:"folder",url:m+"/"+a,parent:v.id};this._addItem(p);var z=new b;this._doSearchFolderServiceUrl(p.url,p.id).then(d.hitch(this,function(F){0<F.length?c.forEach(F,d.hitch(this,function(G){G.parent=p.id;this._addItem(G)})):this._removeItem(p.id);z.resolve()}),d.hitch(this,function(F){z.reject(F)}));e.push(z);return z}));c.forEach(w.services,d.hitch(this,
function(a){if(this.isServiceTypeSupported(a.type)){a=m+"/"+a.name+"/"+a.type;var p=new b;this.rule.getItem(a).then(d.hitch(this,function(z){z&&(z.parent=v.id,this._addItem(z));p.resolve()}),d.hitch(this,function(z){console.error(z);p.reject(z)}));e.push(p)}}));l(e).then(d.hitch(this,function(){this.domNode&&f.resolve()}),d.hitch(this,function(a){console.error(a);this.domNode&&f.reject(a)}))}}),d.hitch(this,function(w){console.error(w);this.domNode&&f.reject({errorCode:"NETWORK_ERROR",error:w})}));
return f},_searchFolderServiceUrl:function(m,v){var f=new b;this._doSearchFolderServiceUrl(m,v).then(d.hitch(this,function(w){this.domNode&&(c.forEach(w,d.hitch(this,function(e){e.parent=v.id;this._addItem(e)})),f.resolve())}),d.hitch(this,function(w){console.error(w);this.domNode&&f.reject({errorCode:"NETWORK_ERROR",error:w})}));return f},_doSearchFolderServiceUrl:function(m){var v=new b,f=this._getBaseServiceUrl();this._getRestInfo(m).then(d.hitch(this,function(w){w=w.services;var e=[];w&&0<w.length&&
c.forEach(w,d.hitch(this,function(a){this.isServiceTypeSupported(a.type)&&(a=this.rule.getItem(f+"/"+a.name+"/"+a.type),e.push(a))}));l(e).then(d.hitch(this,function(a){a=c.filter(a,d.hitch(this,function(p){return p}));v.resolve(a)}),d.hitch(this,function(a){console.error(a);v.reject(a)}))}),d.hitch(this,function(w){console.error(w);v.reject(w)}));return v},_searchServiceUrl:function(m,v){var f=new b;this._getSubItems(m).then(d.hitch(this,function(w){w&&0<w.length?(c.forEach(w,d.hitch(this,function(e){e.parent=
v.id;this._addItem(e)})),f.resolve()):this._getItem(m).then(d.hitch(this,function(e){e&&(e.parent=v.id,this._addItem(e));f.resolve()}),d.hitch(this,function(e){f.reject(e)}))}),d.hitch(this,function(w){f.reject(w)}));return f},_getRestInfo:function(m){var v=new b;this.rule.getRestInfo(m).then(d.hitch(this,function(f){this.domNode&&v.resolve(f)}),d.hitch(this,function(f){this.domNode&&v.reject(f)}));return v},_clear:function(){var m=this._store.query({parent:"root"});c.forEach(m,d.hitch(this,function(v){v&&
"root"!==v.id&&this._store.remove(v.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(m){this._id++;m.id=this._id.toString();this._store.add(m);return m},_removeItem:function(m){this._store.remove(m)},_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var m=this._getRootItem();m=new n({data:[m],getChildren:function(v){return this.query({parent:v.id})}});this._store=new k(m);m=new t({store:this._store,query:{id:"root"},
mayHaveChildren:d.hitch(this,this._mayHaveChildren)});this.tree=new C({multiple:this.multiple,model:m,showRoot:!1,style:{width:"100%"},isLeafItem:d.hitch(this,this.isLeafItem),onOpen:d.hitch(this,function(v,f){this._onTreeOpen(v,f);this.emit("tree-open",v,f)}),onClick:d.hitch(this,function(v,f,w){this._onTreeClick(v,f,w);this.emit("tree-click",v,f,w)}),getIconStyle:d.hitch(this,function(v,f){var w=null;if(!v)return null;var e={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",
backgroundImage:""},a=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),p=this._getIconImageName(v,f);p||("folder"===v.type?p=f?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(v.type)&&(p=f?"folder_open_default.png":"folder_close_default.png"));p&&(e.backgroundImage="url("+a+"/css/images/"+p+")",w=e);return w})});h.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(m,v){var f="";"function"===
typeof this.rule.getIconImageName&&(f=this.rule.getIconImageName(m,v));return f},_mayHaveChildren:function(m){return"root"===m.type?!0:!this.isLeafItem(m)},_onTreeOpen:function(m,v){"root"===m.id||0<this._store.query({parent:m.id}).length||m.checking||m.checked||(m.checking=!0,this._getSubItems(m.url).then(d.hitch(this,function(f){c.forEach(f,d.hitch(this,function(w){w.parent=m.id;this._addItem(w)}));m.checking=!1;m.checked=!0}),d.hitch(this,function(f){console.error(f);m.checking=!1;m.checked=!0})))},
_onTreeClick:function(m,v,f){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/Deferred","jimu/utils","jimu/ServiceBrowserRule"],function(A,B,E,y,u){var d={combineRules:function(h){var c=new u;B.forEach(h,function(b){B.forEach(b.leafTypes,function(l){0>c.leafTypes.indexOf(l)&&c.leafTypes.push(l)});B.forEach(b.serviceTypes,function(l){0>c.serviceTypes.indexOf(l)&&
c.serviceTypes.push(l)})});c.getMatchedRule=function(b){var l=null;B.some(h,function(n){return n.isUrlContainsServiceType(b)?(l=n,!0):!1});return l};c.getItem=function(b){var l=null;return l=(l=c.getMatchedRule(b))?l.getItem(b):c.defaultGetItem(b)};c.getSubItemUrls=function(b){var l=null;return l=(l=c.getMatchedRule(b))?l.getSubItemUrls(b):c.defaultGetSubItemUrls(b)};c.getIconImageName=function(b,l){var n="";if(b.url){var k=c.getMatchedRule(b.url);k&&"function"===typeof k.getIconImageName&&(n=k.getIconImageName(b,
l))}return n};return c},getFeaturelayerServiceBrowserRule:function(h,c,b){h=A.clone(h);var l=["point","polyline","polygon"];A.isArrayLike(h)&&0<h.length?(h=B.filter(h,function(n){return 0<=l.indexOf(n)}),0===h.length&&(h=l)):h=l;return d._getFeaturelayerServiceBrowserRule(h,c,b)},_getFeaturelayerServiceBrowserRule:function(h,c,b){return new u({types:h,leafTypes:["Feature Layer","Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",
getItem:function(l){var n=new E;this.isUrlEndWithServiceType(l,this.serviceTypes)?n=this.defaultGetItem(l):this.getRestInfo(l).then(A.hitch(this,function(k){k=this._getItemByLayerDefinition(l,k);n.resolve(k)}),A.hitch(this,function(k){n.reject(k)}));return n},getSubItemUrls:function(l){var n=new E;return n=this.isUrlEndWithServiceType(l)?this._getSubUrlsByServiceUrl(l):this._getSubUrlsByGroupUrl(l)},getIconImageName:function(l,n){var k="";"MapServer"===l.type||"FeatureServer"===l.type?k=n?"mapserver_open.png":
"mapserver_close.png":l.type===this._groupLayerType?k=n?"group_layer2.png":"group_layer1.png":l.type===this._featureLayerType?(l=y.getTypeByGeometryType(l.definition&&l.definition.geometryType),"point"===l?k="point_layer1.png":"polyline"===l?k="line_layer1.png":"polygon"===l&&(k="polygon_layer1.png")):l.type===this._tableType?k="table.png":"root"===l.type&&this._currentUrl&&B.some(this.serviceTypes,A.hitch(this,function(t){return y.isStringEndWith(this._currentUrl,"/"+t)}))&&(k=n?"mapserver_open.png":
"mapserver_close.png");return k},_getSubUrlsByServiceUrl:function(l){var n=new E;this.getRestInfo(l).then(A.hitch(this,function(k){var t=[];B.forEach(k.layers,A.hitch(this,function(x){0<=x.parentLayerId||t.push(l+"/"+x.id)}));b&&B.forEach(k.tables,A.hitch(this,function(x){0<=x.parentLayerId||t.push(l+"/"+x.id)}));n.resolve(t)}),A.hitch(this,function(k){n.reject(k)}));return n},_getSubUrlsByGroupUrl:function(l){var n=new E;this.getRestInfo(l).then(A.hitch(this,function(k){var t=[];if(k.type===this._groupLayerType){var x=
this._getServiceUrlByLayerUrl(l);t=B.map(k.subLayers||[],A.hitch(this,function(C){return x+"/"+C.id}))}n.resolve(t)}),A.hitch(this,function(k){n.reject(k)}));return n},_getItemByLayerDefinition:function(l,n){var k=null,t=n.type;if(t===this._groupLayerType)k={name:n.name,type:t,url:l,definition:n};else if(t===this._featureLayerType||t===this._tableType){var x=!1;t===this._featureLayerType?x=this._validateEsriGeometryType(n.geometryType):t===this._tableType&&(x=!0);x&&(x=!1,(x=c?y.isFeaturelayerUrlSupportQuery(l,
n.capabilities):!0)&&(k={name:n.name,type:t,url:l,definition:n}))}return k},_validateEsriGeometryType:function(l){l=y.getTypeByGeometryType(l);return 0<=this.types.indexOf(l)},_getServiceUrlByLayerUrl:function(l){for(var n="",k=0;k<this.serviceTypes.length;k++){var t=this.serviceTypes[k].toLowerCase(),x=l.toLowerCase().lastIndexOf("/"+t+"/");if(0<=x){n=l.slice(0,x+t.length+1);break}}return n}})},getGeocodeServiceBrowserRule:function(){return new u({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},
getGpServiceBrowserRule:function(){return new u({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(h){var c=new E;this.isUrlEndWithServiceType(h)?c=this.defaultGetItem(h):this.getRestInfo(h).then(A.hitch(this,function(b){c.resolve({name:b.displayName||b.name,type:"GPTask",url:h,definition:b})}),A.hitch(this,function(b){c.reject(b)}));return c},getSubItemUrls:function(h){var c=new E;this.isUrlEndWithServiceType(h)?this.getRestInfo(h).then(A.hitch(this,function(b){b=B.map(b.tasks||[],
A.hitch(this,function(l){return h+"/"+l}));c.resolve(b)}),A.hitch(this,function(b){c.reject(b)})):c.resolve([]);return c},getIconImageName:function(h,c){c="";"GPServer"===h.type?c="toolbox.png":"GPTask"===h.type&&(c="tool.png");return c}})},getImageServiceBrowserRule:function(h){return new u({leafTypes:["ImageServer"],serviceTypes:["ImageServer"],getItem:function(c){var b=new E;this.isUrlEndWithServiceType(c)?this.defaultGetItem(c).then(A.hitch(this,function(l){h?y.isImageServiceSupportQuery(l.definition.capabilities)?
b.resolve(l):b.resolve(null):b.resolve(l)}),A.hitch(this,function(l){b.reject(l)})):b.resolve(null);return b},getIconImageName:function(c,b){b="";"ImageServer"===c.type&&(b="image_layer.png");return b}})},getQueryableServiceBrowserRule:function(){var h=d.getFeaturelayerServiceBrowserRule(["point","polyline","polygon"],!0,!0),c=d.getImageServiceBrowserRule(!0);return d.combineRules([h,c])}};return d})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),
function(A,B,E,y,u,d,h){return A([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(c){B.mixin(this,c);B.isArrayLike(this.leafTypes)||(this.leafTypes=[]);B.isArrayLike(this.serviceTypes)||(this.serviceTypes=[])},getItem:function(c){return this.defaultGetItem(c)},getSubItemUrls:function(c){return this.defaultGetSubItemUrls(c)},getIconImageName:function(c,b){return""},defaultGetItem:function(c){var b=new y;c=c.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(c)){var l=c.split("/"),
n=l[l.length-1],k=l[l.length-2];this.getRestInfo(c).then(B.hitch(this,function(t){b.resolve({name:k,type:n,url:c,definition:t})}),B.hitch(this,function(t){console.error(t);b.reject({errorCode:"NETWORK_ERROR",error:t})}))}else b.resolve(null);return b},defaultGetSubItemUrls:function(c){c=new y;c.resolve([]);return c},getRestInfo:function(c){var b=new y;c=c.replace(/\/*$/g,"");var l=this._restInfoCache[c];if(l)b.resolve(l);else{l={url:c,content:{f:"json"},handleAs:"json",callbackParamName:"callback",
timeout:2E4};var n=h.findCredential(c);n&&n.token&&(l.content.token=n.token);d(l).then(B.hitch(this,function(k){this._restInfoCache[c]=k;b.resolve(k)}),function(k){b.reject(k)})}return b},isServiceTypeSupported:function(c){c=c.toLowerCase();return E.some(this.serviceTypes,B.hitch(this,function(b){return b.toLowerCase()===c}))},isUrlEndWithServiceType:function(c){return E.some(this.serviceTypes,B.hitch(this,function(b){return u.isStringEndWith(c,"/"+b)}))},isUrlContainsServiceType:function(c){c=c.toLowerCase();
return E.some(this.serviceTypes,B.hitch(this,function(b){b=b.toLowerCase();return 0<=c.indexOf("/"+b)}))}})})},"jimu/dijit/_FeaturelayerServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./FeaturelayerServiceBrowser"],function(A,B,E){return A([B],{baseClass:"jimu-featurelayer-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/MapServer",
"http://myserver/arcgis/rest/services/myservice/FeatureServer"],_createServiceBrowser:function(y){return new E(y)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),function(A,
B,E,y,u,d,h,c,b,l,n,k,t,x,C){return A([B,E,y,d],{templateString:u,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=l.mixin({},window.jimuNls.common);this.nls=l.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
c.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(m){var v=new h;(this.url=m)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),v=this._onBtnValidateClick()):v.reject();return v},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?b.forEach(this._examples,l.hitch(this,function(v){c.create("div",{innerHTML:v,
"class":"example-url"},this.exampleTd)})):c.setStyle(this.exampleTr,"display","none");var m={multiple:this.multiple,_onTreeClick:l.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(m);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(k.after(this.urlInput,"validator",l.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(n(this.serviceBrowser,"error",l.hitch(this,
this._onServiceBrowserError)))},_createServiceBrowser:function(m){},_validateUrl:function(m){m=m.replace(/\/*$/g,"");if((m=m.match(/\/rest\/services\/*(.*)/gi))&&0<m.length)if(m=m[0].replace(/\/rest\/services\/*/,"")){var v=m.split("/");if(1===v.length)return!0;if(2===v.length)return this.serviceBrowser.isServiceTypeSupported(v[1]);if(3<=v.length)return m=this.serviceBrowser.isServiceTypeSupported(v[1]),v=this.serviceBrowser.isServiceTypeSupported(v[2]),m||v}else return!0;else return!1},_afterUrlValidate:function(m){m&&
(m=this.urlInput.get("value"),m=this._validateUrl(m));m?c.removeClass(this.btnValidate,"jimu-state-disabled"):c.addClass(this.btnValidate,"jimu-state-disabled");return m},_onServiceBrowserError:function(m){this._showErrorMessage(m)},_showErrorMessage:function(m){m&&"string"===typeof m?(this.errorNode.innerHTML=m,c.addClass(this.errorSection,"visible")):c.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";c.removeClass(this.errorSection,"visible")},
_onBtnValidateClick:function(){this._clearErrorMessage();var m=new h;if(this.urlInput.validate()){var v=this.urlInput.get("value");this.serviceBrowser.setUrl(v).then(l.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();m.resolve()}),l.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();m.reject()}));this.emit("validate-click")}else m.reject();return m},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?c.removeClass(this.btnOk,"jimu-state-disabled"):
c.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var m=this.getSelectedItems();0<m.length&&this.emit("ok",m)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"dojo/NodeList-data":function(){define(["./_base/kernel","./query","./_base/lang","./_base/array","./dom-attr"],function(A,B,E,y,u){var d=B.NodeList,h={},c=0,b=function(k){var t=u.get(k,"data-dojo-dataid");t||(t="pid"+c++,u.set(k,"data-dojo-dataid",t));return t},
l=A._nodeData=function(k,t,x){var C=b(k),m;h[C]||(h[C]={});if(1==arguments.length)return h[C];"string"==typeof t?2<arguments.length?h[C][t]=x:m=h[C][t]:m=E.mixin(h[C],t);return m},n=A._removeNodeData=function(k,t){k=b(k);h[k]&&(t?delete h[k][t]:delete h[k])};d._gcNodeData=A._gcNodeData=function(){var k=B("[data-dojo-dataid]").map(b),t;for(t in h)0>y.indexOf(k,t)&&delete h[t]};E.extend(d,{data:d._adaptWithCondition(l,function(k){return 0===k.length||1==k.length&&"string"==typeof k[0]}),removeData:d._adaptAsForEach(n)});
return d})},"widgets/DistrictLookup/setting/LocatorSourceSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/Evented dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/portalUrlUtils jimu/dijit/Message jimu/dijit/_GeocodeServiceChooserContent jimu/dijit/Popup jimu/dijit/LoadingShelter esri/request esri/lang ../searchSourceUtils jimu/utils dojo/text!./LocatorSourceSetting.html jimu/dijit/CheckBox dijit/form/ValidationTextBox dijit/form/NumberTextBox".split(" "),
function(A,B,E,y,u,d,h,c,b,l,n,k,t,x,C,m,v,f,w,e){return A([h,c,b,u],{baseClass:"jimu-widget-districtlookup-locator-source-setting",tr:null,nls:null,config:null,singleLineFieldName:null,templateString:w,_suggestible:!1,_locatorDefinition:null,_esriLocatorRegExp:/http(s)?:\/\/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,serviceChooserContent:null,geocoderPopup:null,_clickSet:!1,postCreate:function(){this.inherited(arguments);this.exampleHint=this.nls.locatorExample+": http://\x26lt;myServerName\x26gt;/arcgis/rest/services/World/GeocodeServer";
this.own(y(this.setButtonNode,"click",B.hitch(this,this._onSetLocatorUrlClick)));this.own(y(this.locatorName,"Blur",B.hitch(this,this._onLocatorNameBlur)));this.own(y(this.placeholder,"Blur",B.hitch(this,this._onPlaceholderBlur)));this.own(y(this.countryCode,"Blur",B.hitch(this,this._onCountryCodeBlur)));this.searchInCurrentMapExtent=new e({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this.enableLocalSearch=new e({checked:!1,label:this.nls.enableLocalSearch},
this.enableLocalSearch);this._processlocalSearchTable(!1);this.own(y(this.enableLocalSearch,"change",B.hitch(this,function(){this._processlocalSearchTable(this.enableLocalSearch.getValue())})));E.setStyle(this.enableLocalSearch.domNode,"display","none");this._setMessageNodeContent(this.exampleHint);this.config=this.config?this.config:{};this.setConfig(this.config)},setRelatedTr:function(a){this.tr=a},getRelatedTr:function(){return this.tr},setDefinition:function(a){this._locatorDefinition=a||{}},
getDefinition:function(){return this._locatorDefinition},setConfig:function(a){if("[object Object]"===Object.prototype.toString.call(a)){var p=a.url;p&&(this.config=a,this.shelter.show(),this._locatorDefinition.url!==p?this._getDefinitionFromRemote(p).then(B.hitch(this,function(z){p&&z&&"error"!==z.type?(this._locatorDefinition=z,this._locatorDefinition.url=p,this._setSourceItems(),this._setMessageNodeContent(this.exampleHint)):p&&z&&"error"===z.type&&(this._setSourceItems(),this._disableSourceItems(),
this._setMessageNodeContent(m.substitute({URL:z.url},B.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setSourceItems(),this._setMessageNodeContent(this.exampleHint),this.shelter.hide()))}},isValidConfig:function(){var a=this.getConfig();return a.url&&a.name&&a.singleLineFieldName?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.locatorUrl);this._showValidationErrorTip(this.locatorName)},getConfig:function(){return{url:this.locatorUrl.get("value"),name:f.stripHTML(this.locatorName.get("value")),
singleLineFieldName:this.singleLineFieldName,placeholder:f.stripHTML(this.placeholder.get("value")),countryCode:f.stripHTML(this.countryCode.get("value")),zoomScale:this.zoomScale.get("value")||5E4,maxSuggestions:this.maxSuggestions.get("value")||6,maxResults:this.maxResults.get("value")||6,searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,enableLocalSearch:this.enableLocalSearch.getValue(),localSearchMinScale:this.localSearchMinScale.get("value"),localSearchDistance:this.localSearchDistance.get("value"),
type:"locator"}},_onLocatorNameBlur:function(){this.locatorName.set("value",f.stripHTML(this.locatorName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",f.stripHTML(this.placeholder.get("value")))},_onCountryCodeBlur:function(){this.countryCode.set("value",f.stripHTML(this.countryCode.get("value")))},_disableSourceItems:function(){this.locatorName.set("disabled",!0);this.placeholder.set("disabled",!0);this.countryCode.set("disabled",!0);this.maxSuggestions.set("disabled",
!0);this.maxResults.set("disabled",!0);this.zoomScale.set("disabled",!0)},_enableSourceItems:function(){this.locatorName.set("disabled",!1);this.placeholder.set("disabled",!1);this.countryCode.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",!1);this.zoomScale.set("disabled",!1)},_setSourceItems:function(){var a=this.config;a.url&&(this.locatorUrl.set("value",a.url),this._processCountryCodeRow(a.url));a.name&&this.locatorName.set("value",f.stripHTML(a.name));
a.singleLineFieldName&&(this.singleLineFieldName=a.singleLineFieldName);a.placeholder&&this.placeholder.set("value",f.stripHTML(a.placeholder));a.countryCode&&this.countryCode.set("value",f.stripHTML(a.countryCode));"capabilities"in this._locatorDefinition?(E.setStyle(this.enableLocalSearch.domNode,"display",""),this._processlocalSearchTable(a.enableLocalSearch),this.enableLocalSearch.setValue(a.enableLocalSearch),a.localSearchMinScale&&a.enableLocalSearch&&this.localSearchMinScale.set("value",a.localSearchMinScale),
a.localSearchDistance&&a.enableLocalSearch&&this.localSearchDistance.set("value",a.localSearchDistance)):(this.enableLocalSearch.setValue(!1),E.setStyle(this.enableLocalSearch.domNode,"display","none"));(this._suggestible=this._locatorDefinition&&this._locatorDefinition.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?this._hideSuggestibleTips():this._showSuggestibleTips();this.searchInCurrentMapExtent.setValue(!!a.searchInCurrentMapExtent);this.zoomScale.set("value",a.zoomScale||
5E4);this.maxSuggestions.set("value",a.maxSuggestions||6);this.maxResults.set("value",a.maxResults||6);this._enableSourceItems()},_isEsriLocator:function(a){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(a)},_getDefinitionFromRemote:function(a){var p=new d;if(this._isEsriLocator(a))p.resolve({singleLineAddressField:{name:"SingleLine",type:"esriFieldTypeString",alias:"Single Line Input",required:!1,length:200,localizedNames:{},recognizedNames:{}},capabilities:"Geocode,ReverseGeocode,Suggest"});
else{var z=C({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(z);z.then(B.hitch(this,function(F){p.resolve(F)}),B.hitch(this,function(F){console.error(F);p.resolve({type:"error",url:this._getRequestUrl(a)})}))}return p.promise},_setMessageNodeContent:function(a,p){E.empty(this.messageNode);a.nodeType||(a=E.toDom(a));E.place(a,this.messageNode);p?E.addClass(this.messageNode,"esriCTErrorMessage"):E.removeClass(this.messageNode,"esriCTErrorMessage")},_getRequestUrl:function(a){var p=
window.location.protocol;return"http:"===p?l.setHttpProtocol(a):"https:"===p?l.setHttpsProtocol(a):a},_onSetLocatorUrlClick:function(){this._clickSet=!0;this._openServiceChooser()},_openLocatorChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){this.serviceChooserContent=new k({url:this.locatorUrl.get("value")||""});this.shelter=new x({hidden:!0});this.geocoderPopup=new t({titleLabel:this.nls.setGeocoderURL,autoHeight:!0,content:this.serviceChooserContent.domNode,
container:window.jimuConfig.layoutId,width:640});this.shelter.placeAt(this.geocoderPopup.domNode);E.setStyle(this.serviceChooserContent.domNode,"width","580px");E.addClass(this.serviceChooserContent.domNode,"override-geocode-service-chooser-content");this.serviceChooserContent.own(y(this.serviceChooserContent,"validate-click",B.hitch(this,function(){E.removeClass(this.serviceChooserContent.domNode,"override-geocode-service-chooser-content")})));this.serviceChooserContent.own(y(this.serviceChooserContent,
"ok",B.hitch(this,"_onSelectLocatorUrlOk")));this.serviceChooserContent.own(y(this.serviceChooserContent,"cancel",B.hitch(this,"_onSelectLocatorUrlCancel")))},_onSelectLocatorUrlOk:function(a){a&&a[0]&&a[0].url&&this.domNode&&(this.shelter.show(),C({url:a[0].url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(B.hitch(this,function(p){this.shelter.hide();p&&p.singleLineAddressField&&p.singleLineAddressField.name?(this._enableSourceItems(),this.locatorUrl.set("value",a[0].url),
this.locatorName.get("value")||this.locatorName.set("value",v.getGeocoderName(a[0].url)),"capabilities"in p?(E.setStyle(this.enableLocalSearch.domNode,"display",""),this._isEsriLocator(a[0].url)?this.enableLocalSearch.setValue(!0):this.enableLocalSearch.setValue(!1)):(this.enableLocalSearch.setValue(!1),E.setStyle(this.enableLocalSearch.domNode,"display","none")),this.singleLineFieldName=p.singleLineAddressField.name,this._processCountryCodeRow(a[0].url),this._locatorDefinition=p,this._locatorDefinition.url=
a[0].url,(this._suggestible=p.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?this._hideSuggestibleTips():this._showSuggestibleTips(),this._clickSet?this.emit("reselect-locator-url-ok",this.getConfig()):this.emit("select-locator-url-ok",this.getConfig()),this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null),this._setMessageNodeContent(this.exampleHint)):new n({message:this.nls.locatorWarning})}),B.hitch(this,function(p){console.error(p);this.shelter.hide();
new n({message:m.substitute({URL:this._getRequestUrl(a[0].url)},B.clone(this.nls.invalidUrlTip))})})))},_onSelectLocatorUrlCancel:function(){this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null,this.emit("select-locator-url-cancel"))},_processlocalSearchTable:function(a){a?(E.removeClass(this.minScaleNode,"esriCTHidden"),E.removeClass(this.radiusNode,"esriCTHidden"),this.emit("enable-local-search")):(E.addClass(this.minScaleNode,"esriCTHidden"),E.addClass(this.radiusNode,"esriCTHidden"),
this.emit("disable-local-search"))},_processCountryCodeRow:function(a){this._isEsriLocator(a)?(this.countryCode.set("value",""),E.removeClass(this.countryCodeRow,"hide-country-code-row")):E.addClass(this.countryCodeRow,"hide-country-code-row")},_showSuggestibleTips:function(){E.removeClass(this.tipsNode,"esriCTHidden");E.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){E.addClass(this.tipsNode,"esriCTHidden");E.setStyle(this.maxSuggestions.domNode,"display",
"block")},_showValidationErrorTip:function(a){if(!a.validate()&&a.domNode&&a.focusNode){var p=a.get("disabled");p&&a.set("disabled",!1);a.focusNode.focus();setTimeout(B.hitch(this,function(){a.focusNode.blur();p&&a.set("disabled",!0);a=null}),100)}}})})},"jimu/dijit/_GeocodeServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./GeocodeServiceBrowser"],function(A,B,E){return A([B],{baseClass:"jimu-geocode-service-chooser-content",_examples:["http://myserver/arcgis/rest/services",
"http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/GeocodeServer"],_createServiceBrowser:function(y){return new E(y)}})})},"jimu/dijit/GeocodeServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(A,B,E,y,u){return A([B],{baseClass:"jimu-geocode-service-browser",declaredClass:"jimu.dijit.GeocodeServiceBrowser",url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);
this.rule=u.getGeocodeServiceBrowserRule()},getSelectedItems:function(){var d=this.inherited(arguments);return d=y.map(d,E.hitch(this,function(h){return{name:h.name,url:h.url}}))}})})},"widgets/DistrictLookup/searchSourceUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/Deferred dojo/when dojo/promise/all jimu/portalUtils esri/lang esri/request".split(" "),function(A,B,E,y,u,d,h,c){return{map:null,layerInfosObj:null,appConfig:null,_esriLocatorRegExp:/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,
setMap:function(b){this.map=b},setLayerInfosObj:function(b){this.layerInfosObj=b},setAppConfig:function(b){this.appConfig=b},getConfigInfo:function(b){if(b&&b.sources&&0<b.sources.length){var l=null;return this.searchLayer(this.map)&&b.upgradeFromGeocoder?(l=this.map.itemInfo.itemData.applicationProperties.viewing.search,l=B.map(l.layers,A.hitch(this,function(n,k){k.hintText=n;return this._getQueryTypeGeocoder(k)},l.hintText)),u(l).then(A.hitch(this,function(n){b.sources=[].concat(n).concat(b.sources);
return b}))):b}return y(this._getSoucesFromPortalAndWebmap()).then(A.hitch(this,function(n){return{allPlaceholder:"",showInfoWindowOnSelect:!0,sources:n}}))},_getSoucesFromPortalAndWebmap:function(){var b=[],l=null;this.searchLayer(this.map)&&(l=this.map.itemInfo.itemData.applicationProperties.viewing.search,B.forEach(l.layers,A.hitch(this,function(n,k){k.hintText=n;b.push(this._getQueryTypeGeocoder(k))},l.hintText)));return d.getPortalSelfInfo(this.appConfig.portalUrl).then(A.hitch(this,function(n){if((n=
n.helperServices&&n.helperServices.geocode)&&0<n.length)for(var k=0,t=n.length;k<t;k++){var x=n[k];x&&b.push(this._processSingleLine(x))}return u(b).then(A.hitch(this,function(C){for(var m=[],v=0;v<C.length;v++){var f=C[v];f&&(f&&"query"===f.type?m.push(f):(f={name:f.name||this._getGeocodeName(f.url),url:f.url,singleLineFieldName:f.singleLineFieldName,placeholder:f.placeholder||window.jimuNls.common.findAddressOrPlace||f.name||this._getGeocodeName(f.url),maxResults:6,searchInCurrentMapExtent:!1,type:"locator"},
f.enableLocalSearch=this._isEsriLocator(f.url),f.localSearchMinScale=3E5,f.localSearchDistance=5E4,m.push(f)))}return m}))}))},_getQueryTypeGeocoder:function(b){var l=this.map.getLayer(b.id),n=null,k=null,t=null;t=h.isDefined(b.subLayer)?b.id+"_"+b.subLayer:b.id;n=this.layerInfosObj.traversal(function(x){return x.id===t?(k=x,!0):!1});return l&&n&&k?(n=h.isDefined(b.subLayer)?k.url||l.url+"/"+b.subLayer:k.url||l.url,{name:k.title,layerId:t,url:n,placeholder:b.hintText||window.jimuNls.common.findAddressOrPlace,
searchFields:[b.field.name],displayField:b.field.name,exactMatch:b.field.exactMatch||!1,maxResults:6,searchInCurrentMapExtent:!1,type:"query"}):null},_isEsriLocator:function(b){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(b)},_processSingleLine:function(b){if(b.singleLineFieldName)return b;if(this._isEsriLocator(b.url))return b.singleLineFieldName="SingleLine",b;var l=new E;c({url:b.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(A.hitch(this,
function(n){n.singleLineAddressField&&n.singleLineAddressField.name?(b.singleLineFieldName=n.singleLineAddressField.name,l.resolve(b)):(console.warn(b.url+"has no singleLineFieldName"),l.resolve(null))}),A.hitch(this,function(n){console.error(n);l.resolve(null)}));return l.promise},_getGeocodeName:function(b){if("string"!==typeof b)return"geocoder";b=b.split("/");return b[b.length-2]||"geocoder"},getGeocoderName:function(b){return this._getGeocodeName(b)},hasAppSearchInfo:function(b){return b.itemInfo&&
b.itemInfo.itemData&&b.itemInfo.itemData.applicationProperties&&b.itemInfo.itemData.applicationProperties.viewing&&b.itemInfo.itemData.applicationProperties.viewing.search},searchLayer:function(b){if(!this.hasAppSearchInfo(b))return!1;b=b.itemInfo.itemData.applicationProperties.viewing.search;return b.enabled&&0!==b.layers.length?!0:!1}}})},"widgets/DistrictLookup/utils":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dojo/_base/array","dojo/_base/lang"],function(A,B,E,y){return A([B],
{map:null,postCreate:function(){},getLayerDetailsFromMap:function(u,d,h){var c={},b;this.map&&this.map.webMapResponse&&this.map.webMapResponse.itemInfo&&this.map.webMapResponse.itemInfo.itemData&&this.map.webMapResponse.itemInfo.itemData.operationalLayers&&E.forEach(this.map.webMapResponse.itemInfo.itemData.operationalLayers,y.hitch(this,function(l){l.layerObject&&("ArcGISMapServiceLayer"===l.layerType||"ArcGISTiledMapServiceLayer"===l.layerType?(b=h&&h.substring(0,h.lastIndexOf("_")),b&&l.id!==b||
(c.isMapServer=!0,c.id=l.id+"_"+d,u.substring(0,u.length-1)===l.url&&(E.forEach(l.resourceInfo.layers,y.hitch(this,function(n){n.id===parseInt(d,10)&&(c.title=n.name)})),E.forEach(l.layers,y.hitch(this,function(n){n.id===parseInt(d,10)&&(n.name&&(c.title=n.name),c.popupInfo=n.popupInfo,n.layerDefinition&&(n.layerDefinition.definitionExpression&&(c.definitionExpression=n.layerDefinition.definitionExpression),n.layerDefinition.drawingInfo&&n.layerDefinition.drawingInfo.renderer&&(c.renderer=n.layerDefinition.drawingInfo.renderer)))}))))):
h&&l.id!==h||!l.url||l.url.replace(/.*?:\/\//g,"")!==(u+d).replace(/.*?:\/\//g,"")||(c.isMapServer=!1,c.title=l.title,c.popupInfo=l.popupInfo,c.id=l.id,l.layerDefinition&&(l.layerDefinition.definitionExpression&&(c.definitionExpression=l.layerDefinition.definitionExpression),l.layerDefinition.drawingInfo&&l.layerDefinition.drawingInfo.renderer&&(c.renderer=l.layerDefinition.drawingInfo.renderer))))}));return c}})})},"widgets/DistrictLookup/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/DistrictLookup/setting/SymbolChooserPopup.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv class\x3d"esriCTSymbolChooserContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"symbolData" title\x3d"${symbolChooserTitle}" class\x3d"common-input esriCTSymbolData"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"okButton" tabindex\x3d"0"\x3e\r\n                ${nls.common.ok}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/DistrictLookup/setting/NetworkServiceChooser.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv class\x3d"public-search-radios esriCTSearchRadio" data-dojo-attach-point\x3d"routeSearch"\x3e\r\n        \x3cinput data-dojo-attach-point\x3d"organizationRadio" checked type\x3d"radio" name\x3d"routeSearchRadio"\r\n            class\x3d"esriCTFloatLeading portal-public-radio routeSearchRadio jimu-radio-btn" id\x3d"org_Radio" data-dojo-type\x3d"dijit/form/RadioButton"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"organizationLabel" class\x3d"esriCTFloatLeading portal-public-label"\r\n            for\x3d"org_Radio" style\x3d"cursor: pointer;"\x3e\r\n            ${nls.networkServiceChooser.arcgislabel}\x3c/label\x3e\r\n        \x3cinput data-dojo-attach-point\x3d"inputRouteURLRadio" type\x3d"radio" name\x3d"routeSearchRadio"\r\n            class\x3d"esriCTFloatLeading online-public-radio routeSearchRadio jimu-radio-btn" id\x3d"route_URL_Radio" data-dojo-type\x3d"dijit/form/RadioButton"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"inputRouteURLLabel" class\x3d"esriCTFloatLeading online-public-label"\r\n            for\x3d"route_URL_Radio" style\x3d"cursor: pointer;"\x3e\r\n            ${nls.networkServiceChooser.serviceURLabel}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"itemSelectDiv" class\x3d"esriCTItemSelectDiv"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"serviceUrlDiv" class\x3d"esriCTServiceUrlDiv esriCTHidden"\x3e\r\n        \x3cdiv class\x3d"serviceUrlContainer row"\x3e\r\n            \x3cdiv class\x3d"esriCTServiceLable" title\x3d"${nls.networkServiceChooser.routeURL}"\x3e\r\n                ${nls.networkServiceChooser.routeURL}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTServiceField"\x3e\r\n                \x3cdiv class\x3d"esriCTSetServiceURL" data-dojo-type\x3d"dijit/form/ValidationTextBox" trim\x3d"true" required\x3d"true"\r\n                    data-dojo-attach-point\x3d"serviceURL"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1 urlButton esriCTBtnEllipsis jimu-state-disabled"\r\n                    title\x3d"${nls.networkServiceChooser.validateRouteURL}" data-dojo-attach-point\x3d"validateRouteURL"\x3e\r\n                    ${nls.networkServiceChooser.validateRouteURL}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTExampleUrl row"\x3e\r\n            \x3cdiv class\x3d"esriCTServiceLable" title\x3d" ${nls.networkServiceChooser.exampleText}"\x3e\r\n                ${nls.networkServiceChooser.exampleText}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTServiceField"\x3e\r\n                \x3cdiv class\x3d"esriCTHint esriCTNetworkChooserHint"\x3e\r\n                    \x3cdiv class\x3d"esriCTExampleUrl"\x3e\r\n                        ${nls.networkServiceChooser.hintRouteURL1}\x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTExampleUrl"\x3e\r\n                        ${nls.networkServiceChooser.hintRouteURL2}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"routeLayerList" class\x3d"esriCTRouteListDiv"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"agolRouteLayerList" class\x3d"esriCTAgolRouteListDiv esriCTHidden"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing back esriCTHidden" data-dojo-attach-point\x3d"btnBack"\r\n                data-dojo-attach-event\x3d"onclick:_onBtnBackClicked" tabindex\x3d"0"\x3e\r\n                ${nls.common.back}\x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" tabindex\x3d"0"\x3e\r\n                ${nls.common.next}\x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1 jimu-state-disabled"\r\n                data-dojo-attach-point\x3d"okButton" tabindex\x3d"0"\x3e\r\n                ${nls.common.ok}\x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"cancelButton" tabindex\x3d"0"\x3e\r\n                ${nls.common.cancel}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/ItemSelector.html":'\r\n\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cdiv\x3e${nls.groups}:\x3c/div\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cfieldset id\x3d"publicSearchRaido"\x3e\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" data-dojo-type\x3d"dijit/form/RadioButton" \r\n\t\t\t\t\t\t\tdata-label-id\x3d"portalPublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading portal-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" data-label-for\x3d"portalPublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" data-dojo-type\x3d"dijit/form/RadioButton"\r\n\t\t\t\t\t\t\tdata-label-id\x3d"onlinePublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading online-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" data-label-for\x3d"onlinePublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\t\x3c/fieldset\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/DistrictLookup/setting/LayerChooser.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerSelectorDiv"\x3e\r\n        \x3cdiv class\x3d"esriCTLayerChooserContainer row"\x3e\r\n            \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer esriCTLayerChooserLabel" title\x3d"${nls.layerSelector.selectPolygonLayerLabel}"\x3e\r\n                ${nls.layerSelector.selectPolygonLayerLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerChooserField"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"itemSelectDiv"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTHint"\x3e\r\n                    ${nls.layerSelector.selectPolygonLayerHintText}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTLayerChooserContainer row"\x3e\r\n            \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer esriCTLayerChooserLabel" title\x3d"${nls.layerSelector.selectRelatedPointLayerLabel}"\x3e\r\n                ${nls.layerSelector.selectRelatedPointLayerLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerChooserField"\x3e\r\n                \x3cselect data-dojo-attach-point\x3d"relationshipSelect" style\x3d"width: 232px;" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv class\x3d"esriCTHint"\x3e\r\n                    ${nls.layerSelector.selectRelatedPointLayerHintText}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1 jimu-state-disabled"\r\n                data-dojo-attach-point\x3d"okButton" tabindex\x3d"0"\x3e\r\n                ${nls.common.ok}\x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"cancelButton" tabindex\x3d"0"\x3e\r\n                ${nls.common.cancel}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/LayerChooserFromMapWithDropbox.html":'\x3cdiv\x3e\r\n\x3ctable role\x3d"listbox" aria-haspopup\x3d"true" data-dojo-attach-point\x3d"dropDownBtn" data-dojo-attach-event\x3d"onclick: _onDropDownClick,onkeydown: _onDropDownKeydown"\r\n  tabindex\x3d"0" title\x3d"${nls.customSelectLayer}" aria-label\x3d"${nls.customSelectLayer}"\x3e\r\n    \x3ccaption class\x3d"screen-readers-only-no-position"\x3e${nls.customSelectLayer}\x3c/caption\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"drop-select jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\x3e\r\n            \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/DistrictLookup/setting/SearchSourceSettings.html":'\x3cdiv\x3e\r\n  \x3c!--Search source setting hint text --\x3e\r\n  \x3cdiv class\x3d"esriCTHint" style\x3d"width: 99%"\x3e\r\n    ${nls.searchSourceSetting.searchSourceSettingTitleHintText}\r\n  \x3c/div\x3e\r\n  \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTDropdownButton" role\x3d"button"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cspan\x3e ${nls.searchSourceSetting.addSearchSourceLabel}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cul class\x3d"esriCTDropdownMenu" role\x3d"menu" data-dojo-attach-point\x3d"menuItemClickNode"\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"query"\x3e${nls.searchSourceSetting.featureLayerLabel}\x3c/li\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"locator"\x3e${nls.searchSourceSetting.geocoderLabel}\x3c/li\x3e\r\n    \x3c/ul\x3e\r\n  \x3c/div\x3e\r\n \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTSources" data-dojo-attach-point\x3d"searchSources"\x3e\r\n    \x3cdiv class\x3d"esriCTSourceList jimu-float-leading"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"sourceList" style\x3d"100%"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTSourceSetting jimu-float-trailing" data-dojo-attach-point\x3d"sourceSettingNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n     \x3c!--General setting: Label--\x3e\r\n    \x3cdiv class\x3d"esriCTlabel esriCTGeneralSettingLabelStyle"\x3e\r\n      ${nls.searchSourceSetting.generalSettingLabel}\r\n    \x3c/div\x3e\r\n    \x3c!--General setting: All Place Holder Label--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSourceSetting.allPlaceholderLabel}"\x3e\r\n        ${nls.searchSourceSetting.allPlaceholderLabel}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTLayerField" style\x3d"width: 72%;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"allPlaceholder" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/TextBox" trim\x3d"true"\x3e\r\n        \x3c/div\x3e\r\n         \x3c!--General setting: All Place Holder Hint--\x3e\r\n        \x3cdiv class\x3d"esriCTHint"\x3e\r\n          ${nls.searchSourceSetting.allPlaceholderHintText}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n     \x3c!--General setting: Checkbox--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont " data-dojo-attach-point\x3d"showInfoWindowOnSelectNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistrictLookup/setting/QuerySourceSetting.html":'\x3cdiv class\x3d"esriCTMainContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n  \x3c!--Select geocoder url --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.layerSource}"\x3e\r\n        ${nls.layerSource}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"sourceUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1"\r\n        data-dojo-attach-point\x3d"setSourceBtnClickNode"  title\x3d"${nls.set}"\x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint esriCTErrorMessage"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection"\x3e\r\n    \x3c!--Details section: Name --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.nameTitle}"\x3e\r\n        ${nls.nameTitle}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField "\x3e\r\n       \x3cdiv data-dojo-attach-point\x3d"sourceName" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n       data-dojo-props\x3d"trim:true,required:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"placeholder" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d"trim:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: searchFields --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.searchFields}"\x3e\r\n        ${nls.searchFields}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"searchFields" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'95%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTsearchFieldsSelector jimu-float-trailing" data-dojo-attach-point\x3d"fieldsSelectorNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: displayField --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.displayField}"\x3e\r\n        ${nls.displayField}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"displayField" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxSuggestions --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.searchLayerTips}" data-dojo-attach-point\x3d"tipsNode"\x3e${nls.searchLayerTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxResult --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: zoomScale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"zoomScaleTr"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.zoomScale}"\x3e\r\n        ${nls.zoomScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"zoomScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:50000"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: exactMatch --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"exactMatch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section: loading shelter --\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"map-td" nowrap data-dojo-attach-point\x3d"mapTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"portal-td" nowrap data-dojo-attach-point\x3d"portalTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"url-td" nowrap data-dojo-attach-point\x3d"urlTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flcContainer" class\x3d"dijit-container map-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container portal-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container url-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan title\x3d"${nls.example}:"\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistrictLookup/setting/LocatorSourceSetting.html":'\x3cdiv\x3e\r\n  \x3c!--Select Locator URL --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.locatorUrl}"\x3e\r\n        ${nls.locatorUrl}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"locatorUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv title\x3d"${nls.set}" class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"setButtonNode"  \x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Locator Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection" ata-dojo-attach-point\x3d"detailsSection"\x3e\r\n    \x3c!--Details section: locatorName --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.locatorName}"\x3e\r\n        ${nls.locatorName}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"locatorName"\r\n         placeHolder\x3d"${nls.locatorName}"\r\n        required\x3d"true" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"placeholder"\r\n         placeHolder\x3d"${nls.placeholder}" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: country --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"countryCodeRow"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.countryCode}"\x3e\r\n          ${nls.countryCode}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n          \x3cdiv type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"countryCode"\r\n          placeHolder\x3d"${nls.countryCodeEg} USA,CHN" data-dojo-props\x3d\'style:{width:"97%"}\'\x3e\x3c/div\x3e\r\n          \x3ca class\x3d"jimu-float-trailing" target\x3d"_blank" href\x3d"https://developers.arcgis.com/rest/geocode/api-reference/geocode-coverage.htm"\r\n            style\x3d"line-height:30px;"\x3e${nls.questionMark}\x3c/a\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e${nls.countryCodeHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max suggestion --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.locatorTips}" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n          ${nls.locatorTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max result --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: zoom Scale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.zoomScale}"\x3e\r\n        ${nls.zoomScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"zoomScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:50000"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"enableLocalSearch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - minimum scale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"minScaleNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.minScale}"\x3e\r\n        ${nls.minScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"localSearchMinScale" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n        data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:300000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.minScaleHint}"\x3e${nls.minScaleHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - radius --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"radiusNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.radius}"\x3e\r\n        ${nls.radius}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading" data-dojo-attach-point\x3d"localSearchDistance"\r\n        data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n        data-dojo-props\x3d"constraints:{min:1},style:{width:\'75%\'},value:50000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint esriCTLocalSearchRadiusUnit"\x3e${nls.meters}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"radiusHintNode" title\x3d"${nls.radiusHint}"\x3e${nls.radiusHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: loading shelter --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e',
"url:widgets/DistrictLookup/setting/Setting.html":'\x3cdiv class\x3d"esriCTMainContainer"  style\x3d"width: 100%;height: 100%;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"tabDiv" class\x3d"esriCTFullHeight"\x3e\r\n    \t\x3c!-- Search Source Settings tab --\x3e\r\n        \x3cdiv class\x3d"esriCTTabNode" data-dojo-attach-point\x3d"searchSourceTabNode"\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Search Settings tab --\x3e\r\n        \x3cdiv class\x3d"esriCTTabNode" data-dojo-attach-point\x3d"searchTabNode"\x3e\r\n            \x3cdiv\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.layerSetting.selectLayersLabel}"\x3e\r\n                        ${nls.layerSetting.selectLayersLabel}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                        \x3cdiv class\x3d"esriCTSelectedLayersDiv" data-dojo-attach-point\x3d"layerListNode"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTSetButton jimu-btn jimu-float-trailing" title\x3d"${nls.layerSetting.buttonSet}"\r\n                            data-dojo-attach-point\x3d"setPrecinctLayerBtnNode"\x3e\r\n                            ${nls.layerSetting.buttonSet}\x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint"\x3e\r\n                            ${nls.layerSetting.selectLayersHintText}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSourceSetting.errorMessageLabel}"\x3e\r\n                        ${nls.searchSourceSetting.errorMessageLabel}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                        \x3cdiv data-dojo-attach-point\x3d"noSearchAddressNode" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/TextBox"\r\n                            trim\x3d"true"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint"\x3e\r\n                            ${nls.searchSourceSetting.errorMessageHint}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel" data-dojo-attach-point\x3d"setLocationCheckBoxLabelNode" title\x3d"${nls.showToolToSelectLabel}"\x3e\r\n                   ${nls.showToolToSelectLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv class\x3d"esriCTCheckBox" checked\x3d"false" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                            data-dojo-attach-point\x3d"setLocationCheckBoxNode"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTHintInline"\x3e\r\n                        ${nls.showToolToSelectHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.layerSetting.selectPrecinctSymbolLabel}"\x3e\r\n                        ${nls.layerSetting.selectPrecinctSymbolLabel}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                        \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"precinctSymbolNode"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint esriCTPreviewHintField"\x3e\r\n                            ${nls.layerSetting.precinctSymbolHintText}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3cdiv class\x3d"esriCTlabel" title\x3d"${nls.layerSetting.selectGraphicLocationSymbol}"\x3e\r\n                        ${nls.layerSetting.selectGraphicLocationSymbol}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                        \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"pointSymbolNode"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint esriCTPreviewHintField"\x3e\r\n                            ${nls.layerSetting.graphicLocationSymbolHintText}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                 \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3cdiv class\x3d"esriCTlabel" title\x3d"${nls.layerSetting.selectColorForPoint}"\x3e\r\n                        ${nls.layerSetting.selectColorForPoint}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                        \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"colorPickerNode"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint esriCTPreviewHintField"\x3e\r\n                            ${nls.layerSetting.selectColorForPointHintText}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Direction Settings tab --\x3e\r\n        \x3cdiv  class\x3d"esriCTTabNode" data-dojo-attach-point\x3d"directionTabNode"\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel" title\x3d"${nls.routeSetting.enableDirectionLabel}"\x3e\r\n                    ${nls.routeSetting.enableDirectionLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv class\x3d"esriCTCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                        data-dojo-attach-point\x3d"enableDirectionCheckBoxNode"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin esriCTCheckboxHint"\x3e\r\n                        ${nls.routeSetting.enableDirectionText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTHidden esriCTTabNode" data-dojo-attach-point\x3d"routeSettingsNode"\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" data-dojo-attach-point\x3d"routeServiceLabelNode"\r\n                        title\x3d"${nls.routeSetting.routeServiceUrl}"\x3e\r\n                        ${nls.routeSetting.routeServiceUrl}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                        \x3cdiv class\x3d"esriCTSetRouteURL" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"routeServiceURLNode"\r\n                            trim\x3d"true" required\x3d"true" disabled\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"jimu-btn jimu-float-trailing esriCTURLSetButton" data-dojo-attach-point\x3d"onSetBtnClickNode" title\x3d"${nls.routeSetting.buttonSet}"\x3e\r\n                            ${nls.routeSetting.buttonSet}\x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint"\x3e\r\n                            ${nls.routeSetting.routeServiceUrlHintText}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3cdiv class\x3d"esriCTlabel" data-dojo-attach-point\x3d"directionLengthUnitLabelNode" title\x3d"${nls.routeSetting.directionLengthUnit}"\x3e\r\n                        ${nls.routeSetting.directionLengthUnit}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                        \x3cselect style\x3d"width: 100%;" data-dojo-attach-point\x3d"directionLengthUnitNode" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                            \x3coption value\x3d"MILES"\x3e${nls.units.miles}\x3c/option\x3e\r\n                            \x3coption value\x3d"KILOMETERS"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n                        \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTMargin"\x3e\r\n                        ${nls.routeSetting.unitsForRouteHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3cdiv class\x3d"esriCTLabelHintContainer"\x3e\r\n                        \x3cdiv class\x3d"esriCTlabel" data-dojo-attach-point\x3d"routeSymbolLabelNode" title\x3d"${nls.routeSetting.selectRouteSymbol}"\x3e\r\n                            ${nls.routeSetting.selectRouteSymbol}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                        \x3cdiv class\x3d"esriCTSymbolPreviewField" data-dojo-attach-point\x3d"routeSymbolNode"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint esriCTSymbolPreviewHintField"\x3e\r\n                            ${nls.routeSetting.routeSymbolHintText}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTHidden esriCTLayerContainer row" data-dojo-attach-point\x3d"routingDisabledMsg"\x3e\r\n                ${nls.routeSetting.routingDisabledMsg}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/DistrictLookup/setting/css/style.css":".jimu-widget-districtlookup-setting .esriCTMainContainer{width: 100%; height: 100%;}.jimu-widget-districtlookup-setting .esriCTFullHeight{height: 100%;}.jimu-widget-districtlookup-setting .esriCTTabNode{margin-top: 20px; height: calc(100% - 20px);}.jimu-widget-districtlookup-setting .esriCTHint{margin: 5px 5px 10px 0; float: left; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-districtlookup-setting .esriCTLabelHintContainer{width: 25%; float: left;}.jimu-widget-districtlookup-setting .esriCTHidden{display: none;}.jimu-widget-districtlookup-setting .esriCTCheckBox{float: left; height: 20px; width: 20px; margin-top: 10px; margin-right: 10px;}.jimu-widget-districtlookup-setting .esriCTHintInline{line-height: 30px;}.jimu-widget-districtlookup-setting .jimu-tab3{height: 100%; overflow: hidden;}.jimu-widget-districtlookup-setting .jimu-viewstack{height: calc(100% - 40px); overflow: auto;}input[type\x3dtext]::-ms-clear{display: none;}.jimu-widget-districtlookup-setting .esriCTSelectedLayersDiv{max-height: 200px; min-height: 60px; overflow: auto; width: 88%; float: left; border: 1px solid #d2dae2; background: #e3ecf2; margin-right: 10px;}.jimu-widget-districtlookup-setting .esriCTSetButton{float: right; margin-top: 12PX; max-width: 70px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; padding: 0px;}.jimu-widget-districtlookup-setting .esriCTURLSetButton {line-height: 30px; float: right; max-width: 70px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; padding: 0;}.jimu-widget-districtlookup-setting .esriCTLayerListItem{height: 30px; color: #7989a0; padding: 0px 5px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; line-height: 30px; background-color: #e3ecf2 !important; font-size: 14px;}.jimu-widget-districtlookup-setting .esriCTLabelContainer{width: 45%; float: left;}.jimu-widget-districtlookup-setting .esriCTlabel{width: 25%; padding: 5px 10px 5px 0px; word-break: break-word; margin-top: 5px; margin-bottom: 5px; float: left; min-width: 250px; color: #596679; font-size: 14px;}.jimu-widget-districtlookup-setting .esriCTFullWidth{width: 100%;}.jimu-widget-districtlookup-setting .esriCTLayerChooserLabel{min-width: 300px;}.jimu-widget-districtlookup-setting .row{clear: both;}.jimu-widget-districtlookup-setting .esriCTLayerContainer{width: 100%; float: left; margin: 0px;}.jimu-widget-districtlookup-setting .esriCTLayerField{width: 73%; float: left;}.jimu-widget-districtlookup-setting .esriCTLayerChooserField{width: 55%; float: left;}.jimu-widget-districtlookup-setting .dijitValidationTextBoxLabel{max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; float: left;}.jimu-widget-districtlookup-setting .esriCTLayerSelectorDiv{height: 135px; overflow-y: auto;}.jimu-widget-districtlookup-setting .esriCTLayerChooserContainer{width: 99%; float: left; margin: 10px 0 0 5px;}.jimu-widget-districtlookup-setting .esriCTLayerListNode{height: 62px; border: 1px solid #ccc; background-color: #F0F0F0; overflow: auto;}.jimu-widget-districtlookup-setting .esriCTGeometryTypeIcon{height: 16px; width: 16px; background-repeat: no-repeat; margin: 9px 2px 0px 10px; float: left;}.jimu-widget-districtlookup-setting .jimu-layer-chooser-from-map-withdropbox .layer-name{text-overflow: ellipsis; overflow: hidden; white-space: nowrap; padding: 0px 18px 0px 9px;}.jimu-widget-districtlookup-setting .esriCTSetRouteURL{width: 88%; float: left; border: 1px solid #d2dae2; background: #e3ecf2; margin-right: 10px;}.jimu-widget-districtlookup-setting .buttonsDiv .jimu-popup .button-container{padding: 0px;}.jimu-widget-districtlookup-setting .esriCTFloatLeading{margin-right: 10px;}.jimu-widget-districtlookup-setting .esriCTServiceUrlDiv{float: left; width: 100%;}.jimu-widget-districtlookup-setting .esriCTRouteLayersDiv{float: left; width: 100%;}.jimu-widget-districtlookup-setting .esriCTItemSelectDiv{margin-top: 10px; float: left; height: 450px; width: 100%;}.jimu-widget-districtlookup-setting .esriCTExampleUrl{float: left; width: 100%;}.jimu-widget-districtlookup-setting .esriCTRouteListDiv{margin-top: 10px; float: left; width: 100%; height: 360px; overflow: auto; border: 1px solid #ccc;}.jimu-widget-districtlookup-setting .esriCTAgolRouteListDiv{margin-top: 10px; float: left; width: 100%; height: 450px; overflow: auto; border: 1px solid #ccc;}.jimu-widget-districtlookup-setting .esriCTSearchRadio{float: left; width: 100%;}.jimu-widget-districtlookup-setting .serviceUrlContainer{float: left; width: 100%; margin-top: 10px;}.jimu-widget-districtlookup-setting .esriCTServiceLable{float: left; width: 100px; line-height: 30px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-districtlookup-setting .esriCTServiceField{width: 85%; float: left;}.jimu-widget-districtlookup-setting .esriCTSetServiceURL{float: left; width: 85%;}.jimu-widget-districtlookup-setting .esriCTBtnEllipsis{max-width: 80px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-districtlookup-setting .urlButton{line-height: 30px;}.claro .dijitTreeRowFocused{background-repeat: repeat;}.claro .dijitTreeExpando{background-position: -93px -10px; display: none;}.claro .dijitTreeExpando: :first-child{display: block; background-position: -35px 0;}.jimu-widget-districtlookup-setting .esriCTSymbolChooserNode{text-align: center; cursor: pointer; min-width: 80px;}.jimu-widget-districtlookup-setting .esriCTColorChooserNode{text-align: center; cursor: pointer; min-width: 80px;}.jimu-widget-districtlookup-setting .esriCTColorChooserNode .jimu-color-picker{display:inline-block;}.jimu-widget-districtlookup-setting .esriCTSymbolPreviewText{padding-right: 5px; color: #596679; font-size: 14px; max-width: 130px; text-overflow: ellipsis; overflow: hidden; white-space:nowrap;}.jimu-widget-districtlookup-setting .esriCTPreviewField{width: 25%; float: left;}.jimu-widget-districtlookup-setting .esriCTPreviewHintField{width: 70%; line-height: 30px; margin-left: 10px;}.jimu-widget-districtlookup-setting .esriCTSymbolPreviewField{width: 35%; min-width: 250px; float: left; margin-left: 10px;}table{border-spacing: 0; padding: 0; margin: 0;}.jimu-widget-districtlookup-setting .esriCTSymbolPreviewHintField{width: 50%; line-height: 20px; margin-left: 5px; float: right;}.jimu-widget-districtlookup-setting .esriCTSymbolChooserContainer{height: calc(100% - 50px); overflow: auto;}.claro .dijitTextBox, .claro .dijitSelect{color: #7989a0; background-color: #fafafc; border: 1px solid #d2dae2;}.dj_webkit .claro .dijitTextBox .dijitInputInner{color: #7989a0;}.claro .dijitSelectDisabled, .claro .dijitTextBoxDisabled, .claro .dijitTextBoxDisabled .dijitInputContainer{background-color: #e3ecf2;}.claro .dijitSelect .dijitInputField{background-color: #fafafc !important; color: #7989a0; font-size: 14px; margin-right: 8px;}.claro .dijitTextBox, .claro .dijitSelect{border-color: #d2dae2;}.claro .dijitSelect .dijitArrowButton{background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-districtlookup-setting .dijitSelect .dijitButtonContents{border-style: none none none none; background-color: #fafafc;}.jimu-widget-districtlookup-setting .esriCTDropdownButton{margin: 8px 0; display: inline-block; position: relative; padding-left: 16px; color: #518dca; background: url(../images/add_icon.png) no-repeat left; cursor: pointer;}.jimu-widget-districtlookup-setting .esriCTDropdownButton .esriCTDropdownMenu{position: absolute; display: none; list-style-type: none; top: 18px; left: 0; margin: 0; padding: 0; background: #fafafa; color: #7989a0; z-index: 999;}.jimu-rtl .jimu-widget-districtlookup-setting .esriCTDropdownButton .esriCTDropdownMenu{right: 0; left: auto;}.jimu-widget-districtlookup-setting .esriCTDropdownButton:hover .esriCTDropdownMenu{display: inline-block;}.jimu-widget-districtlookup-setting .esriCTDropdownMenu .esriCTDropdownItem{white-space: nowrap; height: 30px; padding: 0 25px; line-height: 30px;}.jimu-widget-districtlookup-setting .esriCTDropdownMenu .esriCTDropdownItem:hover{background: #edf2f5; color: #15a4fa;}.jimu-widget-districtlookup-setting .esriCTSources{height: 366px;}.jimu-widget-districtlookup-setting .esriCTSourcesExtraHeight{height: 516px !important;}.jimu-widget-districtlookup-setting .esriCTSourceList{width: 270px; height: 100%;}.jimu-widget-districtlookup-setting .esriCTSourceSetting{width: 660px; position: relative;}.jimu-widget-districtlookup-setting .source-table,.jimu-widget-districtlookup-setting .general-setting-table{width: 100%;}.jimu-widget-districtlookup-setting .esriCTSearchSourceLayerField{width: 70%;}.jimu-widget-districtlookup-setting .esriCTSearchSourceLabel{width: 25%; min-width: 182px;}.jimu-widget-districtlookup-setting .esriCTLocalSearchLabel{margin-left: 22px; width: 24%; min-width: 146px;}.jimu-widget-districtlookup-setting .esriCTLocalSearchRadiusUnit{line-height: 30px; float: right;} .jimu-widget-districtlookup-setting .esriCTSearchSourceLabelFont {font-size: 14px; color: #596679;}.jimu-widget-districtlookup-setting .esriCTLayerSource{width: 80% !important;}.jimu-widget-districtlookup-setting .esriCTsearchFieldsSelector{display: inline-block; margin: 6px 0; width: 18px; height: 18px; cursor: pointer; background: url(../images/selector.png) no-repeat center;}.jimu-widget-districtlookup-setting .esriCTSearchSourceURLField{width: 76%; float: left;}.jimu-widget-districtlookup-setting .esriCTSearchSourceLayer{width: 82% !important;}.jimu-widget-districtlookup-setting .esriCTURLWidthLabel{width: 145px; min-width: 145px;}.jimu-widget-districtlookup-setting .esriCTSearchDetailsSection{width: 175px;}.jimu-widget-districtlookup-setting .esriCTGeneralSettingLabelStyle{font-weight: bold;}.jimu-widget-districtlookup-query-source-setting .esriCTSearchSourceFieldCheckbox{width: 167px; margin-bottom: 20px; color: #596679; font-size: 14px; margin-left: 30px;}.jimu-widget-districtlookup-query-source-setting .esriCTSearchSourceFieldCheckbox .label{width: 140px;}.jimu-widget-districtlookup-setting .esriCTErrorMessage{color: #e84b4b;}.jimu-widget-districtlookup-setting .jimu-simple-table .simple-table-field, .jimu-simple-table .simple-table-cell{cursor: pointer;}.esriRtl .jimu-widget-districtlookup-setting .esriCTHint{float: right;}.esriRtl .jimu-widget-districtlookup-setting .esriCTPreviewHintField{margin-right: 10px;}.esriRtl .jimu-widget-districtlookup-setting .esriCTlabel{padding: 5px 0px 5px 10px; float: right;}.esriRtl .jimu-widget-districtlookup-setting .esriCTSelectedLayersDiv{float: right; margin-left: 10px; margin-right: 0px;}.esriRtl .jimu-widget-districtlookup-setting .esriCTPreviewField{float: right;}.esriRtl .jimu-widget-districtlookup-setting .esriCTGeometryTypeIcon{float: right;}.esriRtl .jimu-widget-districtlookup-setting .esriCTSetButton{float: left;}.esriRtl .jimu-widget-districtlookup-setting .esriCTSetRouteURL{float: right; margin: 0 0 0 10px;}.esriRtl .jimu-widget-districtlookup-setting .esriCTURLSetButton{float: left;}.esriRtl .jimu-widget-districtlookup-setting .esriCTSymbolPreviewField{float: right;}.esriRtl .jimu-widget-districtlookup-setting .esriCTLabelHintContainer{float: right;}.esriRtl .jimu-widget-districtlookup-setting .esriCTSymbolPreviewText{padding: 0 0 0 5px;}.esriRtl .jimu-widget-districtlookup-setting .esriCTServiceLable{float: right;}.esriRtl .jimu-widget-districtlookup-setting .esriCTSetServiceURL{float: right;}.esriRtl .jimu-widget-districtlookup-setting .esriCTLayerChooserField{float: right;}.esriRtl .jimu-widget-districtlookup-setting .esriCTLayerField{float: right;}.esriRtl .jimu-widget-districtlookup-setting .esriCTLayerChooserContainer{float: none;}.esriRtl .jimu-widget-districtlookup-setting .esriCTSymbolPreviewHintField{margin-right: 5px; float: left; margin-left: 0px;}.esriRtl .jimu-widget-districtlookup-setting .esriCTCheckBox{float: right; margin-right: 0px;}.esriRtl .jimu-widget-districtlookup-setting .esriCTFloatLeading{margin-left: 10px; margin-right: 0px;}.esriRtl .jimu-widget-districtlookup-setting .esriCTDropdownButton{padding-right: 16px; background: url(../images/add_icon.png) no-repeat right;}.esriRtl .jimu-widget-districtlookup-setting .esriCTSearchSourceURLField{float: right;}.esriRtl .jimu-widget-districtlookup-setting .esriCTLocalSearchRadiusUnit{float: left;}",
"*now":function(A){A(['dojo/i18n!*preload*widgets/DistrictLookup/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/query dojo/on ./SymbolChooserPopup jimu/utils esri/symbols/jsonUtils jimu/dijit/Message jimu/dijit/LoadingIndicator jimu/dijit/Popup jimu/utils ./NetworkServiceChooser ./LayerChooser ./SearchSourceSettings jimu/portalUtils dojo/dom-style jimu/dijit/TabContainer3 jimu/symbolUtils jimu/dijit/ColorPicker dojo/_base/Color ../utils dojo/domReady!".split(" "),function(A,
B,E,y,u,d,h,c,b,l,n,k,t,x,C,m,v,f,w,e,a,p,z,F,G){return A([B,E],{baseClass:"jimu-widget-districtlookup-setting",UnitsDetails:{},_symbolParams:{},appUtils:null,startup:function(){this.inherited(arguments)},postMixInProperties:function(){this.nls.common={};y.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this.UnitsDetails={};this._symbolParams={};this._initLoading();this._initTabs();this.UnitsDetails={MILES:{value:"MILES",label:this.nls.units.miles},KILOMETERS:{value:"KILOMETERS",
label:this.nls.units.kilometers}};this.own(c(this.enableDirectionCheckBoxNode,"change",y.hitch(this,this._onEnableDirectionChange)));this.config.hasOwnProperty("enableDirection")||(this.config.enableDirection=this.map.webMapResponse.itemInfo.itemData&&this.map.webMapResponse.itemInfo.itemData.applicationProperties&&this.map.webMapResponse.itemInfo.itemData.applicationProperties.viewing&&this.map.webMapResponse.itemInfo.itemData.applicationProperties.viewing.routing&&this.map.webMapResponse.itemInfo.itemData.applicationProperties.viewing.routing.enabled?
!0:!1);this.config.enableDirection?d.remove(this.routeSettingsNode,"esriCTHidden"):d.add(this.routeSettingsNode,"esriCTHidden");this.appUtils=new G({map:this.map});this._createSymbolPicker(this.precinctSymbolNode,"precinctSymbol","esriGeometryPolygon",this.nls.layerSetting.selectPrecinctSymbolLabel);this._createSymbolPicker(this.routeSymbolNode,"routeSymbol","esriGeometryPolyline",this.nls.routeSetting.selectRouteSymbol);this._createSymbolPicker(this.pointSymbolNode,"graphicLocationSymbol","esriGeometryPoint",
this.nls.layerSetting.selectGraphicLocationSymbol);this.own(c(this.setPrecinctLayerBtnNode,"click",y.hitch(this,this._showLayerChooser)));this.own(c(this.onSetBtnClickNode,"click",y.hitch(this,this._showRouteChooser)));this._createColorPicker();this.setConfig();this._createSearchSourceSettings()},_onEnableDirectionChange:function(r){r?d.remove(this.routeSettingsNode,"esriCTHidden"):d.add(this.routeSettingsNode,"esriCTHidden")},_initTabs:function(){var r={title:this.nls.searchSourceSetting.searchSourceSettingTabTitle,
content:this.searchSourceTabNode};this.tab=new a({tabs:[r,{title:this.nls.layerSetting.layerSettingTabTitle,content:this.searchTabNode},{title:this.nls.routeSetting.routeSettingTabTitle,content:this.directionTabNode}],"class":"esriCTFullHeight"});this.own(c(this.tab,"tabChanged",y.hitch(this,function(){this.tab.containerNode.scrollTop=0})));this.tab.placeAt(this.tabDiv)},_createSearchSourceSettings:function(){var r={};this.config&&this.config.hasOwnProperty("searchSourceSettings")&&(r=this.config.searchSourceSettings);
this._searchSourceSettings=new f({nls:this.nls,map:this.map,appConfig:this.appConfig,shelter:this.loading,config:r},u.create("div",{},this.searchSourceTabNode));this.own(c(this._searchSourceSettings,"invalid-source-setting",y.hitch(this,function(){this._errorMessage(this.nls.errorStrings.invalidSearchSources)})))},getConfig:function(){if(!this.precinctLayerInfo)return this._errorMessage(this.nls.layerSelector.errorInSelectingPolygonLayer,this.nls.layerSetting.layerSettingTabTitle),!1;if(!this.pollingPlaceLayerInfo)return this._errorMessage(this.nls.layerSelector.errorInSelectingRelatedLayer,
this.nls.layerSetting.layerSettingTabTitle),!1;var r=this._searchSourceSettings.getConfig();return r&&0!==r.sources.length?this.config={enableDirection:this.enableDirectionCheckBoxNode.getValue(),highlightColor:this._highlightColorPicker.color.toHex(),precinctLayerInfo:this.precinctLayerInfo,pollingPlaceLayerInfo:this.pollingPlaceLayerInfo,routeService:this.routeServiceURLNode.value,directionLengthUnit:this.UnitsDetails[this.directionLengthUnitNode.value],showLocationTool:this.setLocationCheckBoxNode.getValue(),
symbols:this._symbolParams,searchSourceSettings:r,errorMessage:l.stripHTML(this.noSearchAddressNode.get("value"))}:(this._errorMessage(this.nls.searchSourceSetting.invalidSearchSources,this.nls.searchSourceSetting.searchSourceSettingTabTitle),!1)},setConfig:function(){var r=w.getPortal(this.appConfig.portalUrl).helperServices;this.config&&(this.config.highlightColor&&this._highlightColorPicker.setColor(new F(this.config.highlightColor)),this.config.precinctLayerInfo&&this.config.pollingPlaceLayerInfo&&
this._setLayerInfos(this.config.precinctLayerInfo,this.config.pollingPlaceLayerInfo),this.config.directionLengthUnit&&this.directionLengthUnitNode.set("value",this.config.directionLengthUnit.value),this.config.showLocationTool&&this.setLocationCheckBoxNode.setValue(this.config.showLocationTool),this.enableDirectionCheckBoxNode.setValue(this.config.enableDirection),this.config.routeService?this.routeServiceURLNode.set("value",this.config.routeService):r&&r.route&&r.route.url?this.routeServiceURLNode.set("value",
r.route.url):this.routeServiceURLNode.set("value",window.location.protocol+"//route.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World"),this.config.hasOwnProperty("errorMessage")?this.noSearchAddressNode.set("value",C.sanitizeHTML(this.config.errorMessage)):this.noSearchAddressNode.set("value",this.nls.searchSourceSetting.noPrecinctFoundMsg))},_updateConfig:function(r,D){y.mixin(r,this.appUtils.getLayerDetailsFromMap(r.baseURL,r.layerId,r.id));y.mixin(D,this.appUtils.getLayerDetailsFromMap(D.baseURL,
D.layerId,D.id))},_createSymbolPicker:function(r,D,J,L){if(J){var M={};M.type=l.getSymbolTypeByGeometryType(J);this.config&&this.config.symbols&&this.config.symbols.hasOwnProperty(D)&&(M.symbol=n.fromJson(this.config.symbols[D]));var P=this._createPreviewContainer(r);var X={symbolChooserTitle:L,symbolParams:M,symbolType:D,nls:this.nls};this._showSelectedSymbol(P,M.symbol,D);this.own(c(P,"click",y.hitch(this,function(){M.symbol=n.fromJson(this._symbolParams[D]);this._initSymbolChooserPopup(X,P)})))}},
_createPreviewContainer:function(r){r=u.create("table",{cellspacing:"0",cellpadding:"0"},r);r=u.create("tr",{style:"height:30px"},r);var D=u.create("td",{},r);u.create("div",{innerHTML:this.nls.symbolPickerPreviewText,"class":"esriCTSymbolPreviewText"},D);r=u.create("td",{},r);return u.create("div",{"class":"esriCTSymbolChooserNode"},r)},_initSymbolChooserPopup:function(r,D){var J=new b(r);J.onOkClick=y.hitch(this,function(){var L=J.symbolChooser.getSymbol();this._showSelectedSymbol(D,L,r.symbolType);
J.popup.close()})},_showSelectedSymbol:function(r,D,J){u.empty(r);if(D){var L=p.createSymbolNode(D);L||(L=u.create("div"));u.place(L,r);this._symbolParams[J]=D.toJson()}},_initLoading:function(){this.loading=new t({hidden:!0});var r=h(".widget-setting-popup")[0];this.loading.placeAt(r);this.loading.startup()},_createColorPicker:function(){var r=u.create("table",{cellspacing:"0",cellpadding:"0"},this.colorPickerNode);r=u.create("tr",{style:"height:30px"},r);var D=u.create("td",{},r);u.create("div",
{innerHTML:this.nls.symbolPickerPreviewText,"class":"esriCTSymbolPreviewText"},D);r=u.create("td",{},r);r=u.create("div",{"class":"esriCTColorChooserNode"},r);this._highlightColorPicker=new z(null,u.create("div",{},r))},_errorMessage:function(r,D){(new k({message:r})).message=r;this.tab&&D&&this.tab.selectTab(D)},_showRouteChooser:function(){var r=new m({portalUrl:this.appConfig.portalUrl,nls:this.nls,folderUrl:this.folderUrl});var D=new x({titleLabel:this.nls.routeSetting.routeServiceUrl,width:830,
height:600,content:r});r.onOkClick=y.hitch(this,function(){r.selectRouteURL&&(this.routeServiceURLNode.set("value",r.selectRouteURL),D.close())});r.onCancelClick=y.hitch(this,function(){D.close()})},_showLayerChooser:function(){var r=new v({portalUrl:this.appConfig.portalUrl,nls:this.nls,folderUrl:this.folderUrl,map:this.map});var D=new x({titleLabel:this.nls.layerSetting.selectLayersLabel,width:830,height:250,content:r});r.onCancleClick=y.hitch(this,function(){D.close()});r.onOkClick=y.hitch(this,
function(J){this._setLayerInfos(J.polygonLayerInfo,J.relatedLayerInfo);D.close()})},_setLayerInfos:function(r,D){var J,L=[];this.precinctLayerInfo=r;this.pollingPlaceLayerInfo=D;this._updateConfig(this.precinctLayerInfo,this.pollingPlaceLayerInfo);L.push(r);L.push(D);u.empty(this.layerListNode);for(r=0;r<L.length;r++)if(L[r].geometryType){"esriGeometryPoint"===L[r].geometryType?J="point_layer.png":"esriGeometryPolygon"===L[r].geometryType?J="polygon_layer.png":"esriGeometryLine"===L[r].geometryType&&
(J="line_layer.png");D=u.create("div",{"class":"esriCTLayerList"},this.layerListNode);if(J){var M=u.create("div",{"class":"esriCTGeometryTypeIcon"},D);e.set(M,"backgroundImage","url("+this.folderUrl+"images/"+J+")")}u.create("div",{"class":"esriCTLayerListItem",innerHTML:L[r].title,title:L[r].title},D)}}})});