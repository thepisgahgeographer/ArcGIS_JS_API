// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","../BaseEditor","../PopupConfig"],function(f,d,e,g,h){return f([g],{baseClass:"jimu-gp-editor-base jimu-gp-editor-rse",editorName:"RecordSetEditor",popupConfig:null,args:null,constructor:function(a){this.args=d.mixin({},a)},postCreate:function(){this.inherited(arguments);this.value={};var a={showTitle:!1};if(this.args&&this.args.param&&this.args.param.defaultValue){this.value=d.clone(this.args.param.defaultValue);var c=this.value.fields;
if(this.value.output&&this.value.output.fields)if(this.value.output.fields.length!==c.length){var k=e.map(this.value.output.fields,function(b){return b.name});e.forEach(c,function(b){0<=k.indexOf(b.name)?b.visible=!0:b.visible=!1})}else c=this.value.output.fields;a.fields=c;this.popupConfig=new h(a);this.popupConfig.placeAt(this.domNode);this.popupConfig.startup()}else this.domNode.innerHTML="table"},destroy:function(){this.popupConfig&&(this.popupConfig.destroy(),this.popupConfig=null);this.inherited(arguments)},
getValue:function(){if(this.popupConfig){var a=this.popupConfig.getConfig();this.value.output={title:a.title,fields:a.fields};this.value.fields=this.args.param.defaultValue.fields}return this.value}})});