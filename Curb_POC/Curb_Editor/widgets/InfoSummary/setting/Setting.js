// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/LayerChooserFromMapWithDropbox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/keys dojo/Evented dojo/Deferred dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LayerChooserFromMapWithDropbox.html jimu/LayerInfos/LayerInfos".split(" "),function(A,N,K,H,g,f,u,y,h,r,F,n){return A([h,r,f],{templateString:F,baseClass:"jimu-layer-chooser-from-map-withdropbox",declaredClass:"jimu.dijit.LayerChooserFromMapWithDropbox",
_selectedItem:null,_isLayerChooserShow:!1,layerInfosObj:null,layerChooser:null,customClass:"",postMixInProperties:function(){this.inherited(arguments);this.nls=window.jimuNls.queryableLayerSource;this.nls.customSelectLayer=this.label?this.label:this.nls.selectLayer},postCreate:function(){this.inherited(arguments);this.layerInfosObj=n.getInstanceSync();this.layerChooser.domNode.style.zIndex=1;this.layerChooser.tree.domNode.style.borderTop="0";this.layerChooser.tree.domNode.style.maxHeight="290px";
this.own(H(this.layerChooser,"tree-click",N.hitch(this,this._onTreeClick)));this.own(H(this.layerChooser,"update",N.hitch(this,this._onLayerChooserUpdate)));this.own(H(document.body,"click",N.hitch(this,this._onBodyClicked)));this.own(H(document.body,"keydown",N.hitch(this,function(q){q.keyCode===g.ENTER&&this._onBodyClicked(q)})));this.own(H(this.layerChooser.domNode,"keydown",N.hitch(this,function(q){q.keyCode===g.ESCAPE&&this.hideLayerChooser()})))},destroy:function(){this.hideLayerChooser();this.layerChooser&&
this.layerChooser.destroy();this.layerChooser=null;this.inherited(arguments)},getLayerChooser:function(){return this.layerChooser},setSelectedLayer:function(q){var t=new u;if(q){var z=this.layerInfosObj.getLayerOrTableInfoById(q.id);z?this.layerChooser.filter(z).then(N.hitch(this,function(k){k?(this._onSelectNewItem({layerInfo:z,name:z.title,url:q.url}),t.resolve(!0)):t.resolve(!1)}),N.hitch(this,function(){t.resolve(!1)})):t.resolve(!1)}else this._onSelectNewItem(null),t.resolve(!0);return t},getSelectedItem:function(){return this._selectedItem},
getSelectedItems:function(){return[this._selectedItem]},_onBodyClicked:function(q){q=q.target||q.srcElement;q===this.domNode||K.isDescendant(q,this.domNode)||q===this.layerChooser.domNode||K.isDescendant(q,this.layerChooser.domNode)||this.hideLayerChooser()},_onDropDownClick:function(q){q.stopPropagation();q.preventDefault();this._isLayerChooserShow?this.hideLayerChooser():(this.isActive=!0,this.showLayerChooser())},_onDropDownKeydown:function(q){q.keyCode===g.ENTER&&this._onDropDownClick(q)},_getSelectedItems:function(){return this.layerChooser.getSelectedItems()},
showLayerChooser:function(){this.layerChooser.domNode.style.minWidth=this.domNode.clientWidth+2+"px";y.open({parent:this,popup:this.layerChooser,around:this.domNode});var q=this.layerChooser.domNode.parentNode;q&&(K.addClass(q,"jimu-layer-chooser-from-map-withdropbox-popup"),this.customClass&&K.addClass(q,this.customClass),this.layerChooser.tree.domNode.focus());this._isLayerChooserShow=!0},hideLayerChooser:function(){y.close(this.layerChooser);this._isLayerChooserShow=!1;this.isActive&&(this.dropDownBtn.focus(),
this.isActive=!1)},_onLayerChooserUpdate:function(){this._selectedItem&&this.layerChooser.onlyShowVisible&&!this._selectedItem.layerInfo.isShowInMap()&&(this._selectedItem=null,this.emit("selection-change",[]))},_onSelectNewItem:function(q){var t=N.getObject("layerInfo.id",!1,this._selectedItem)||-1,z=N.getObject("layerInfo.id",!1,q)||-1;t=t!==z;this._selectedItem=q;this.hideLayerChooser();q=N.getObject("layerInfo.title",!1,this._selectedItem)||"";this.layerNameNode.innerHTML=q;K.setAttr(this.layerNameNode,
"title",q);q=N.getObject("layerInfo.layerObject",!1,this._selectedItem);t&&this.emit("selection-change",[q])},_onTreeClick:function(){var q=this._getSelectedItems();this._onSelectNewItem(0<q.length?q[0]:null)}})})},"widgets/InfoSummary/setting/MySymbolPicker":function(){define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dijit/form/Select dijit/form/ValidationTextBox dojo/_base/lang dojo/_base/html dojo/dom-style dojo/dom-construct dojo/on dojo/dom dojox/gfx dojo/query dojo/_base/Color dijit/registry esri/symbols/jsonUtils esri/request esri/Color jimu/dijit/SymbolPicker jimu/BaseWidget jimu/dijit/TabContainer3 jimu/utils jimu/dijit/SimpleTable jimu/dijit/Message jimu/dijit/ColorPicker jimu/dijit/ImageChooser jimu/dijit/CheckBox dojo/_base/array esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/PictureMarkerSymbol dojo/text!./MySymbolPicker.html dojo/Evented dijit/focus dojox/form/FileUploader".split(" "),
function(A,N,K,H,g,f,u,y,h,r,F,n,q,t,z,k,E,B,I,v,C,D,O,U,Q,V,c,p,M,T,d,m,x){return A([I,N,m],{templateString:d,baseClass:"jimu-widget-InfoSummary-setting",nls:null,row:null,layerInfo:null,clusteringEnabled:null,symbolInfo:null,symbolType:"",map:null,supportsDynamic:!0,tabContainer:null,field_options:[],groupFeaturesEnabled:!1,lyrSymbolSet:[],_highLightColor:"#ffffff",defaultSymbol:null,panelHTML:null,svg:null,constructor:function(a){this.nls=a.nls;this.row=a.callerRow;this.layerInfo=a.layerInfo;this.renderer=
a.layerInfo.renderer;this.geometryType=a.layerInfo.geometryType;this.symbolInfo=a.symbolInfo;this.map=a.map;this.ac=a.ac;this.layerId=a.value;this.supportsDynamic=a.layerInfo.supportsDynamic;this.fields=a.layerInfo.fields;this.hidePanel=a.hidePanel;this.oidFieldName=a.layerInfo.oidFieldName;this.loadSymbolPicker=a.loadSymbolPicker;this.popupFields=[];if(a.layerInfo.infoTemplate&&a.layerInfo.infoTemplate.info&&(a=a.layerInfo.infoTemplate.info.fieldInfos))for(var l=0;l<a.length;l++)a[l].visible&&this.popupFields.push(a[l].fieldName)},
postMixInProperties:function(){this.inherited(arguments);this.nls.common=window.jimuNls.common},postCreate:function(){this.inherited(arguments);this.defaultSymbol=null;this._initCheckBoxes();this._initRadioButtons();this._initImageChoosers();this._setFields(this.fields);this._initTabControl();this._initSymbolPickerTab(this.geometryType);this._initFeatureOptionsTab();if(this.hidePanel)f.removeClass(this.btnAddField,"btn-add-section"),f.addClass(this.btnAddField,"btn-add-section-disabled"),f.addClass(this.iconOptionsTextLabel,
"text-disabled"),f.addClass(this.featureOptionsTextLabel,"text-disabled"),f.addClass(this.groupOptionsTextLabel,"text-disabled"),f.addClass(this.rdoLayerIconLabel,"text-disabled"),f.addClass(this.rdoCustomIconLabel,"text-disabled");else{this.own(h(this.btnAddField,"click",g.hitch(this,this._addFieldRow,this.fieldOptionsTable,"loSelect")));var a=this.fieldOptionsTable.getRows();a&&3<=a.length?(f.removeClass(this.btnAddField,"btn-add-section"),f.addClass(this.btnAddField,"btn-add-section-disabled")):
(f.removeClass(this.btnAddField,"btn-add-section-disabled"),f.addClass(this.btnAddField,"btn-add-section"));f.removeClass(this.iconOptionsTextLabel,"text-disabled");f.removeClass(this.featureOptionsTextLabel,"text-disabled");f.removeClass(this.groupOptionsTextLabel,"text-disabled");f.removeClass(this.rdoLayerIconLabel,"text-disabled");f.removeClass(this.rdoCustomIconLabel,"text-disabled")}this.chkGroup.setStatus(!this.hidePanel);this.rdoLayerIcon.set("disabled",this.hidePanel);this.rdoCustomIcon.set("disabled",
this.hidePanel);this.own(h(this.symbolPicker.domNode,"click",g.hitch(this,function(l){l.stopPropagation();l.preventDefault();this.symbolPicker._isTooltipDialogOpened||"EsriSymbol"!==this.symbolType||this._validateSymbolChooserWidthField()||this.symbolPicker._showTooltipDialog()})))},_initRadioButtons:function(){this.own(h(this.rdoLayerSym,"change",g.hitch(this,this._rdoLayerSymChanged)));this.own(h(this.rdoEsriSym,"change",g.hitch(this,this._rdoEsriSymChanged)));this.own(h(this.rdoCustomSym,"change",
g.hitch(this,this._rdoCustomSymChanged)));this.own(h(this.rdoLayerIcon,"change",g.hitch(this,this._rdoLayerIconChanged)));this.own(h(this.rdoCustomIcon,"change",g.hitch(this,this._rdoCustomIconChanged)));this.own(h(this.rdoGroupField,"change",g.hitch(this,this._rdoGroupByFieldChanged)));this.own(h(this.rdoGroupRenderer,"change",g.hitch(this,this._rdoGroupByRendererChanged)));this.own(h(this.layerOptionsAscRadioBtn,"change",g.hitch(this,this._layerOptionsAscRadioChanged)));this.own(h(this.layerOptionsDescRadioBtn,
"change",g.hitch(this,this._layerOptionsDescRadioChanged)));this.own(h(this.groupOptionsAscRadioBtn,"change",g.hitch(this,this._groupOptionsAscRadioChanged)));this.own(h(this.groupOptionsDescRadioBtn,"change",g.hitch(this,this._groupOptionsDescRadioChanged)))},_initCheckBoxes:function(){this.chkClusterSym=this._initCheckBox(this.nls.chkCluster,this.div_chkCluster);this.own(h(this.chkClusterSym,"change",g.hitch(this,this._chkClusterChanged)));this.chkClusterCnt=this._initCheckBox(this.nls.displayClusterCnt,
this.div_chkGroupCluster);this.own(h(this.chkClusterCnt,"change",g.hitch(this,this._chkClusterCntChanged)));this.chkGroup=this._initCheckBox(this.nls.chkGroup,this.div_chkGroup);this.own(h(this.chkGroup,"change",g.hitch(this,this._chkGroupChanged)))},_initCheckBox:function(a,l){var w=new V;w.setLabel(a);w.placeAt(l);return w},_initImageChoosers:function(){this.imageIconChooser=new Q({format:[Q.GIF,Q.JPEG,Q.PNG],cropImage:!1,showTip:!1,goldenWidth:10,goldenHeight:15});f.addClass(this.imageIconChooser.domNode,
"uploadCustom");f.place(this.imageIconChooser.domNode,this.uploadCustomIcon,"replace");this.imageSymbolChooser=new Q({format:[Q.GIF,Q.JPEG,Q.PNG],cropImage:!1,showTip:!1,goldenWidth:10,goldenHeight:15});f.addClass(this.imageSymbolChooser.domNode,"uploadCustom");f.place(this.imageSymbolChooser.domNode,this.uploadCustomSymbol,"replace")},_setFields:function(a){if(a){this.field_options=[];for(var l=[""," ",void 0,null],w=0;w<a.length;w++)this.field_options.push({value:a[w].name,label:-1===l.indexOf(a[w].alias)?
a[w].alias:a[w].name})}},_initTabControl:function(){this.tabContainer=new v({tabs:[{title:this.nls.symbolOptions,content:this.symbolPickerContainer},{title:this.nls.panelFeatureDisplay,content:this.panelFeatureDisplayContainer}],isNested:!0},this.tabParent);this.tabContainer.startup()},_initSymbolPickerTab:function(a){a=C.getTypeByGeometryType(a);this._loadLayerSymbol();this.supportsDynamic&&this.loadSymbolPicker&&this._initSymbolPicker(a);this._initClusterSymbolPicker(a);this._addEventHandlers(a);
this._initSymbolUI()},_initFeatureOptionsTab:function(){this.isInitalLoad=!0;this.fieldLoadCount=0;this.fieldOptionsTable=new D({fields:[{name:"field",title:this.nls.selectField,"class":"label",type:"empty",width:"100px"},{name:"label","class":"label",title:this.nls.fieldLabel,type:"empty",width:"100px"},{name:"actions","class":"label",title:this.nls.actions,type:"actions",actions:["up","down","delete"],width:"50px"}],selectable:!1,autoHeight:!0});this.fieldOptionsTable.placeAt(this.fieldOptions);
this.fieldOptionsTable.startup();this.fieldOptionsTable.on("row-delete",g.hitch(this,this._rowDeleted));this.groupOptionsTable=new D({fields:[{name:"field",title:this.nls.selectField,"class":"label",type:"empty",width:"180px"},{name:"label","class":"label",title:this.nls.fieldLabel,type:"empty",width:"140px"}],selectable:!1,autoHeight:!0});this.groupOptionsTable.placeAt(this.groupFieldOptions);this.groupOptionsTable.startup();this._initFeatureOptionsUI();this.isInitalLoad=!1},_initFeatureOptionsUI:function(){if(this.symbolInfo&&
this.symbolInfo.featureDisplayOptions)var a=this.symbolInfo.featureDisplayOptions;if(a&&a.fields)for(var l=0;l<a.fields.length;l++)this._populateLayerRow(this.fieldOptionsTable,a.fields[l],"loSelect");else if(this._addFieldRow(this.groupOptionsTable,"goSelect"),this.popupFields&&0<this.popupFields.length){l=2<this.popupFields.length?3:this.popupFields.length;for(var w=0;w<l;w++)this._populateLayerRow(this.fieldOptionsTable,{name:this.popupFields[w]},"loSelect")}"DESC"===(a&&"undefined"!==typeof a.layerOptionsSortOrder?
a.layerOptionsSortOrder:!0)?this._layerOptionsDescRadioChanged(!0):this._layerOptionsAscRadioChanged(!0);this.groupFeaturesEnabled=a&&"undefined"!==typeof a.groupEnabled?a.groupEnabled:!1;this._chkGroupChanged(this.groupFeaturesEnabled);this.chkGroup.setValue(this.groupFeaturesEnabled);a&&a.groupField&&this._populateLayerRow(this.groupOptionsTable,a.groupField,"goSelect");l=!0;a&&"undefined"!==typeof a.groupByField&&(this._rdoGroupByFieldChanged(a.groupByField),l=!1);w=!1;this.renderer&&(this.renderer.attributeField||
this.renderer.field||this.renderer.field1)&&(w=!0);w||u.set(this.grpRenderer,"display","none");a&&"undefined"!==typeof a.groupByRenderer&&(this._rdoGroupByRendererChanged(a.groupByRenderer),l=!1);l&&this._rdoGroupByFieldChanged(l);"DESC"===(a&&"undefined"!==typeof a.groupFeaturesSortOrder?a.groupFeaturesSortOrder:!0)?this._groupOptionsDescRadioChanged(!0):this._groupOptionsAscRadioChanged(!0)},_rowDeleted:function(a){3>this.fieldOptionsTable.getRows().length&&(f.removeClass(this.btnAddField,"btn-add-section-disabled"),
f.addClass(this.btnAddField,"btn-add-section"))},_populateLayerRow:function(a,l,w){this.fieldLoadCount+=1;a=a.addRow({});a.success&&a.tr&&(a=a.tr,this._addFieldsOption(a,w),this._addLabelOption(a),a.selectFields.set("value",l.name),a.labelText.set("value",l.label))},_addFieldRow:function(a,l){if(a===this.fieldOptionsTable&&3<=a.getRows().length)new O({message:this.nls.max_records});else{this.isInitalLoad=!1;var w=a.addRow({});w.success&&w.tr&&(w=w.tr,this._addFieldsOption(w,l),this._addLabelOption(w));
a===this.fieldOptionsTable&&3<=a.getRows().length&&(f.removeClass(this.btnAddField,"btn-add-section"),f.addClass(this.btnAddField,"btn-add-section-disabled"))}},_addFieldsOption:function(a,l){var w=g.clone(this.field_options),P=n(".simple-table-cell",a)[0];P&&(f.setStyle(P,"verticalAlign","middle"),f.setStyle(P,"line-height","inherit"),l=new K({style:{width:"100%",height:"28px"},"class":l,options:w}),l.placeAt(P),l.startup(),a.selectFields=l,this.own(h(l,"change",g.hitch(this,function(){this.fieldLoadCount&&
0<this.fieldLoadCount?--this.fieldLoadCount:a.labelText.set("value","");a.cells[0].title=a.cells[0].innerText}))),a.cells[0].title=a.cells[0].innerText)},_addLabelOption:function(a){var l=n(".simple-table-cell",a)[1];f.setStyle(l,"verticalAlign","middle");f.setStyle(l,"line-height","inherit");var w=new H({style:{width:"100%",height:"28px"}});w.placeAt(l);w.startup();a.labelText=w},_initSymbolUI:function(){"undefined"!==typeof this.symbolInfo?(this.symbolType=this.symbolInfo.symbolType,this.clusterType=
this.symbolInfo.clusterType,this.iconType=this.symbolInfo.iconType,this.displayFeatureCount=this.symbolInfo.displayFeatureCount,this.clusteringEnabled=this.symbolInfo.clusteringEnabled,this.userDefinedSymbol=this.symbolInfo.userDefinedSymbol,this._highLightColor=this.symbolInfo._highLightColor,this._setSymbolType(this.symbolInfo.symbolType),this._setClusterType(this.symbolInfo.clusterType),this._setIconType(this.symbolInfo.iconType),"undefined"!==typeof this.symbolInfo.clusterType&&("CustomCluster"===
this.symbolInfo.clusterType&&this.symbolInfo.clusterSymbol&&this.clusterPicker.showBySymbol(z.fromJson(this.symbolInfo.clusterSymbol)),this.userDefinedSymbol=!0),this.chkClusterSym.setValue(this.symbolInfo.clusteringEnabled),this._chkClusterChanged(this.symbolInfo.clusteringEnabled)):(this.rdoLayerSym.set("checked",!0),this._rdoEsriSymChanged(!1),this._rdoCustomSymChanged(!1),this.chkClusterSym.setValue(!1),this.chkClusterCnt.setValue(!1),this.rdoLayerIcon.set("checked",!0),this._rdoCustomIconChanged(!1),
this.symbolType="LayerSymbol",this.iconType="LayerIcon",this.userDefinedSymbol=this.clusteringEnabled=!1);"esriGeometryPoint"===this.geometryType&&this.supportsDynamic||(u.set(this.parent_div_uploadCustomSymbol,"display","none"),this.supportsDynamic||u.set(this.div_rdoEsriSym,"display","none"))},_setSymbolType:function(a){switch(a){case "LayerSymbol":this.symbolInfo.symbolOverride?(this.userDefinedSymbol=!0,this.rdoEsriSym.set("checked",!0),this._rdoLayerSymChanged(!1),this._rdoCustomSymChanged(!1),
this.symbolPicker.showBySymbol(z.fromJson(this.symbolInfo.symbol))):(this.rdoLayerSym.set("checked",!0),this._rdoEsriSymChanged(!1),this._rdoCustomSymChanged(!1));break;case "EsriSymbol":this.userDefinedSymbol=!0;this.rdoEsriSym.set("checked",!0);this._rdoLayerSymChanged(!1);this._rdoCustomSymChanged(!1);this.symbolPicker.showBySymbol(z.fromJson(this.symbolInfo.symbol));break;case "CustomSymbol":this.userDefinedSymbol=!0,this.rdoCustomSym.set("checked",!0),this._rdoEsriSymChanged(!1),this._rdoLayerSymChanged(!1),
this._createImageDataDiv(this.symbolInfo.symbol,!0,this.customSymbolPlaceholder)}},_setIconType:function(a){switch(a){case "LayerIcon":this.rdoLayerIcon.set("checked",!0);break;case "CustomIcon":this.userDefinedSymbol=!0,this.rdoCustomIcon.set("checked",!0),this.symbolInfo.icon&&(this.updateImg(),a=z.fromJson(this.symbolInfo.icon),this._createImageDataDiv(a,!0,this.customIconPlaceholder))}},_setClusterType:function(a){switch(a){case "ThemeCluster":this.userDefinedSymbol=!0;this.clusterType="ThemeCluster";
break;case "CustomCluster":this.userDefinedSymbol=!0,this.clusterType="CustomCluster",this.chkClusterCnt.setValue(this.displayFeatureCount),this.colorPicker.setColor(new q(this._highLightColor))}},updateImg:function(){if(-1<this.symbolInfo.icon.toString().indexOf("\x3cimg")){var a=document.createElement("div");a.innerHTML=this.symbolInfo.icon;var l=new T(a.children[0].src,26,26);this.symbolInfo.icon=l.toJson();a.remove()}},_addEventHandlers:function(a){var l;"point"===a&&this.own(h(this.imageSymbolChooser,
"ImageChange",g.hitch(this,function(w){this.uploadImage("Symbol",w);this.emit("onImageSelected")})));this.own(h(this.imageIconChooser,"ImageChange",g.hitch(this,function(w){this.uploadImage("Icon",w)})));this.btnOk.innerText=this.nls.common.ok;this.own(h(this.btnOk,"click",g.hitch(this,function(){"EsriSymbol"!==this.symbolType||this._validateSymbolChooserWidthField()?(this._setSymbol(),this.emit("ok",this.symbolInfo)):(l=new O({message:this.nls.invalidSymbolWidthMessage}),l.buttons[0].onClick=g.hitch(this,
function(){l.close();setTimeout(g.hitch(this,function(){this.symbolPicker.domNode.click();this._validateSymbolChooserWidthField()}),100)}))})));this.btnCancel.innerText=this.nls.common.cancel;this.own(h(this.btnCancel,"click",g.hitch(this,function(){this.emit("cancel")})))},_setSymbol:function(){switch(this.symbolType){case "LayerSymbol":var a=this.symbol;break;case "EsriSymbol":this.userDefinedSymbol=!0;a=this.symbolPicker.getSymbol();break;case "CustomSymbol":this.userDefinedSymbol=!0,0<this.customSymbolPlaceholder.children.length&&
(a="undefined"!==typeof this.customSymbolPlaceholder.children[0].src?new T(this.customSymbolPlaceholder.children[0].src,26,26):z.fromJson(this.symbolInfo.symbol))}if("LayerIcon"===this.iconType)var l=a;else 0<this.customIconPlaceholder.children.length&&("undefined"!==typeof this.customIconPlaceholder.children[0].src?(f.removeClass(this.customIconPlaceholder.firstChild,"customPlaceholder"),f.addClass(this.customIconPlaceholder.firstChild,"customPlaceholderSettings"),l=new T(this.customIconPlaceholder.children[0].src,
26,26)):l=z.fromJson(this.symbolInfo.icon));this.clusteringEnabled&&"esriGeometryPoint"===this.geometryType?(this.clusterSymbol="ThemeCluster"===this.clusterType?"custom":this.clusterPicker.getSymbol().toJson(),this.userDefinedSymbol=!0):(this.clusterSymbol=void 0,this.clusteringEnabled=!1);a&&"undefined"!==typeof a.toJson&&(a=a.toJson());var w=0<this.customIconPlaceholder.children.length?this.customIconPlaceholder.children[0].src:0<this.layerSym.children.length?this.layerSym.children[0].innerHTML:
this.customIconPlaceholder.outerHTML;if("undefined"!==typeof l){var P="LayerIcon"!==this.iconType||"CustomSymbol"===this.symbolType;this._createImageDataDiv2(l,44,44,!0,P);this._createImageDataDiv2(l,28,28,!1,P)}if("undefined"!==typeof this.ren){var L=[];for(P=0;P<this.ren.length;P++){var b=this.ren[P];if("undefined"!==typeof b.value){var e=isNaN(b.value)?"'"+b.value+"'":b.value;var G="undefined"!==typeof b.label?b.label:b.value;e="undefined"!==typeof e?" \x3d\x3d\x3d "+e:void 0;var J="undefined"!==
typeof b.description&&""!==b.description?b.description:void 0}else if("undefined"!==typeof b.classMaxValue){G=b.label;var S;G&&(S=G.split(" - "));S&&(e=1<S.length?" \x3e\x3d "+S[0]+" \x26\x26 \x3c\x3d "+S[1]:" \x3d\x3d\x3d "+S[0]);J="undefined"!==typeof b.description&&""!==b.description?b.description:void 0}L.push({value:e,label:G,description:J})}}G=[];this.renderer&&this.renderer.attributeField?(G.push({name:this.renderer.attributeField}),this.renderer.attributeField2&&G.push({name:this.renderer.attributeField2}),
this.renderer.attributeField3&&G.push({name:this.renderer.attributeField3})):this.renderer&&this.renderer.field?G.push({name:this.renderer.field}):this.renderer&&this.renderer.field1&&G.push({name:this.renderer.field1});S=this.fieldOptionsTable?this._getFields(this.fieldOptionsTable):null;this.symbolInfo={symbolType:this.symbolType,symbol:a,clusterSymbol:this.clusterSymbol,clusteringEnabled:this.clusteringEnabled,displayFeatureCount:this.displayFeatureCount,_highLightColor:this.colorPicker.color.toHex(),
icon:l&&l.toJson?l.toJson():l,clusterType:this.clusterType,iconType:this.iconType,renderer:this.renderer,s:w,svg:this.svg,panelHTML:this.panelHTML,userDefinedSymbol:this.userDefinedSymbol?this.userDefinedSymbol:!1,layerId:this.layerId,selectedId:this.selectedID,featureDisplayOptions:{groupEnabled:this.groupFeaturesEnabled,listDisabled:S&&0<S.length?!1:!0,groupByRenderer:"undefined"===typeof this.groupByRenderer?!1:this.groupByRenderer,groupByField:"undefined"===typeof this.groupByField?!1:this.groupByField,
fields:S,groupField:this.groupOptionsTable?this._getFields(this.groupOptionsTable)[0]:null,groupByRendererOptions:{fields:G,values:L},layerOptionsSortOrder:this.layerOptionsAscRadioBtn.getValue()?"ASC":"DESC",groupFeaturesSortOrder:this.groupOptionsAscRadioBtn.getValue()?"ASC":"DESC"}}},_getFields:function(a){a=a.getRows();var l=[];c.forEach(a,function(w){w.selectFields&&l.push({name:w.selectFields.value,label:w.labelText.value})});return l},_rdoLayerSymChanged:function(a){a&&(this.symbolType="LayerSymbol",
this.selectedID&&this.setLayerSymbol(r.byId(this.selectedID)),this.emit("enableOkButton"));f.setStyle(this.layerSym,"display",a?"block":"none");this.defaultSymbol&&(this.symbol=g.clone(this.defaultSymbol))},_rdoEsriSymChanged:function(a){a&&(this.symbolType="EsriSymbol",this.emit("enableOkButton"));f.setStyle(this.symbolPicker.domNode,"display",a?"block":"none")},_rdoCustomSymChanged:function(a){a&&(this.symbolType="CustomSymbol",0===this.customSymbolPlaceholder.children.length&&this.emit("customSymbolButtonClicked"));
f.setStyle(this.customSymbolDIV,"display",a?"block":"none")},_chkClusterChanged:function(a){this.clusteringEnabled=a;f.setStyle(this.grpClusterOptions,"display",a?"block":"none");f.setStyle(this.featureFont,"display",a?"block":"none");f.setStyle(this.clusterPickerContainer,"display",a?"block":"none");a&&"undefined"===typeof this.clusterType&&(this.clusterType="CustomCluster")},_chkClusterCntChanged:function(a){this.displayFeatureCount=a;f.setStyle(this.featureFont,"display",a&&this.clusteringEnabled?
"block":"none")},_rdoLayerIconChanged:function(a){a&&(this.iconType="LayerIcon");f.setStyle(this.imageIconChooser.domNode,"display",a?"none":"block");f.setStyle(this.customIconPlaceholder,"display",a?"none":"block")},_rdoCustomIconChanged:function(a){a&&(this.iconType="CustomIcon");f.setStyle(this.imageIconChooser.domNode,"display",a?"block":"none");f.setStyle(this.customIconPlaceholder,"display",a?"block":"none")},_initSymbolPicker:function(a){this.symbolPicker.showByType("point"===a?"marker":"polyline"===
a?"line":"polygon"===a?"fill":"")},_initClusterSymbolPicker:function(a){"point"===a&&this.clusterPicker.showByType("fill");u.set(this.parent_div_clusterOptions,"display","point"===a?"block":"none")},_loadLayerSymbol:function(){this.ren=this.infos=void 0;if("undefined"!==typeof this.renderer){var a=this.renderer;if("undefined"!==typeof a.symbol)this._createImageDataDiv(a.symbol,!0,this.layerSym,!0);else if("undefined"!==typeof a.infos)var l=a.infos;else if("undefined"!==typeof a.uniqueValueInfos)l=
a.uniqueValueInfos;else if("undefined"!==typeof a.classBreakInfos)l=a.classBreakInfos;else if(a.type&&"heatmap"===a.type&&a.colorStops){a=a.colorStops;var w=[];if(a&&1<=a.length){var P=a[0].color;P=E.fromArray([P.r,P.g,P.b]);w.push({symbol:new p(p.STYLE_CIRCLE,10,new M(M.STYLE_SOLID,P),P)});2<a.length&&(P=a[a.length-1].color,P=E.fromArray([P.r,P.g,P.b]),w.push({symbol:new p(p.STYLE_CIRCLE,10,new M(M.STYLE_SOLID,P),P)}))}this.infos=w;0<w.length?this.layerSym.appendChild(this._createCombinedImageDataDiv(w)):
(this._createImageDataDiv2(void 0,44,44,!0,!1),this._createImageDataDiv2(void 0,28,28,!1,!1))}else this.rdoEsriSym.set("checked",!0),this.symbolType="EsriSymbol",this.iconType="LayerIcon",this._initSymbolPicker(C.getTypeByGeometryType(this.geometryType)),this._setFields(this.fields),this._setSymbol(),this.symbolInfo.symbolType="LayerSymbol",this.symbolInfo.symbolOverride=!0;l&&(this.ren=l,this.layerSym.innerHTML="\x3cdiv\x3e\x3c/div\x3e",this.layerSym.appendChild(this._createCombinedImageDataDiv(l)),
f.setStyle(this.layerSym,"cursor","pointer"))}},_createImageDataDiv2:function(a,l,w,P,L){if("string"===typeof a){var b=y.create("div",{"class":"imageDataGFX",innerHTML:a});P?this.panelHTML=b.innerHTML:this.svg=b}else if("undefined"===typeof a)b=y.create("div",{"class":"imageDataGFX"}),b.innerHTML="\x3cdiv\x3e\x3c/div\x3e",P?this.panelHTML=b.innerHTML:this.svg=b;else{var e=z.fromJson(a);e||(e=a);e?(a=w,w=l,e.height&&e.width&&(b=e.width/e.height,e.height>e.width?w=l*b:e.width>e.height&&(a=w/b)),"undefined"!==
typeof e.setWidth?"undefined"!==typeof e.setHeight?(e.setWidth(L?w-.25*w:w),e.setHeight(L?a-.25*a:a)):e.setWidth(2):"undefined"!==typeof e.size&&20<e.size&&e.setSize(20),b=y.create("div",{"class":"imageDataGFX"}),l=F.createSurface(b,w,a),e=z.getShapeDescriptors(e),l.createShape(e.defaultShape).setFill(e.fill).setStroke(e.stroke).applyTransform({dx:w/2,dy:a/2}),P?this.panelHTML=b.innerHTML:this.svg=b):"undefined"!==typeof a.url&&(b=y.create("div",{"class":"imageDataGFX"}),u.set(b,"background-image",
"url("+a.url+")"),u.set(b,"background-repeat","no-repeat"),P?this.panelHTML=b.innerHTML:this.svg=b)}return b},_createImageDataDiv:function(a,l,w,P){w=y.create("div",{"class":"imageDataGFX-display"},w);(l=l?z.fromJson(a):a)||(l=a);this.symbol=l;var L=a=26;l.height&&l.width&&l.height>l.width&&(L=l.width/l.height,a=26,L*=26);var b=F.createSurface(w,L,a),e=z.getShapeDescriptors(this.setSym(l,L,a));b.createShape(e.defaultShape).setFill(e.fill).setStroke(e.stroke).applyTransform({dx:L/2,dy:a/2});this.svg=
w.firstChild;P&&(this.defaultSymbol=l);return w},_createCombinedImageDataDiv:function(a){var l=y.create("div",{"class":"imageDataGFXMulti"},this.customSymbolPlaceholder);this.lyrSymbolSet=[];for(var w=this.symbolInfo&&this.symbolInfo.selectedId?!1:!0,P=0;P<a.length;P++){var L=a[P].symbol,b=z.fromJson(L);b||(b=L);"undefined"===typeof this.symbol&&(this.symbol=b);this.lyrSymbolSet.push(b);var e=L=26;b.height&&b.width&&b.height>b.width&&(e=b.width/b.height,L=26,e*=26);var G=y.create("div",{"class":"imageDataGFX imageDataGFX2",
id:"imageGFX_"+P,onclick:g.hitch(this,this.layerSymbolClick)},l),J=F.createSurface(G,e,L);b=z.getShapeDescriptors(this.setSym(b,e,L));J.createShape(b.defaultShape).setFill(b.fill).setStroke(b.stroke).applyTransform({dx:e/2,dy:L/2});l.insertBefore(G,l.firstChild);l.appendChild(G);if(w||this.symbolInfo&&G.id===this.symbolInfo.selectedId)this.setLayerSymbol(G),w=!1;J.rawNode&&(f.setStyle(J.rawNode,"display","block"),f.setStyle(J.rawNode,"margin","auto"))}return l},layerSymbolClick:function(a){this.setLayerSymbol(a.currentTarget)},
setLayerSymbol:function(a){for(var l,w=0;w<a.parentElement.children.length;w++){var P=a.parentElement.children[w];f.removeClass(P,"lyrSymbolSelected");P.id===a.id&&(l=w)}f.addClass(a,"lyrSymbolSelected");this.selectedID=a.id;this.svg=a;this.panelHTML=a.innerHTML;this.symbol=this.lyrSymbolSet[l]},setSym:function(a,l,w){"undefined"!==typeof a.setWidth?("esriGeometryPoint"===this.geometryType&&a.setWidth(l),"undefined"!==typeof a.setHeight&&a.setHeight(w)):("undefined"!==typeof a.size&&20<a.size&&a.setSize(20),
"undefined"!==typeof a.width&&(a.width=l),"undefined"!==typeof a.height&&(a.height=w));return a},uploadImage:function(a,l){var w="Symbol"===a?this.customSymbolPlaceholder:this.customIconPlaceholder;w.innerHTML="";w.innerHTML=y.create("div",{"class":"customPlaceholder",innerHTML:['\x3cimg class\x3d"customPlaceholder" src\x3d"',l,'"/\x3e'].join(""),title:"Symbol"===a?this.nls.editCustomSymbol:this.nls.editCustomIcon}).innerHTML},_chkGroupChanged:function(a){this.groupFeaturesEnabled=a;f.setStyle(this.groupByOptions,
"display",a?"inline-block":"none")},_rdoGroupByFieldChanged:function(a){this.groupByField=a;this.rdoGroupField.set("checked",a);f.setStyle(this.groupFieldOptions,"display",a?"inline-block":"none")},_rdoGroupByRendererChanged:function(a){this.groupByRenderer=a;this.rdoGroupRenderer.set("checked",a)},destroy:function(){this.symbolInfo=null;this.tabContainer.destroyRecursive()},_validateSymbolChooserWidthField:function(){return this._validatePointSymbolSize()?this._validatePointOutlineWidth()?this._validateLineWidth()?
this._validatePolygonOutlineWidth()?!0:(x.focus(this.symbolPicker.symbolChooser.fillOutlineWidth.focusNode),!1):(x.focus(this.symbolPicker.symbolChooser.lineWidth.focusNode),!1):(x.focus(this.symbolPicker.symbolChooser.pointOutlineWidth.focusNode),!1):(x.focus(this.symbolPicker.symbolChooser.pointSize.focusNode),!1)},_validatePointSymbolSize:function(){return this.symbolPicker.symbolChooser&&this.symbolPicker.symbolChooser.hasOwnProperty("pointSize")?this.symbolPicker.symbolChooser.pointSize.isValid():
!0},_validatePolygonOutlineWidth:function(){return this.symbolPicker.symbolChooser&&this.symbolPicker.symbolChooser.hasOwnProperty("fillOutlineWidth")?this.symbolPicker.symbolChooser.fillOutlineWidth.isValid():!0},_validatePointOutlineWidth:function(){return this.symbolPicker.symbolChooser&&this.symbolPicker.symbolChooser.hasOwnProperty("pointOutlineWidth")?this.symbolPicker.symbolChooser.pointOutlineWidth.isValid():!0},_validateLineWidth:function(){if(this.symbolPicker.symbolChooser&&this.symbolPicker.symbolChooser.hasOwnProperty("lineWidth"))if(this.symbolPicker.symbolChooser.lineWidth.isValid()){var a=
this.symbolPicker.symbolChooser.lineWidth.getValue();if(""===a||null===a||void 0===a||isNaN(a))return this.symbolPicker.symbolChooser.lineWidth.setValue("0"),!1}else return!1;return!0},_layerOptionsAscRadioChanged:function(a){this.layerOptionsAscRadioBtn.set("checked",a)},_layerOptionsDescRadioChanged:function(a){this.layerOptionsDescRadioBtn.set("checked",a)},_groupOptionsAscRadioChanged:function(a){this.groupOptionsAscRadioBtn.set("checked",a)},_groupOptionsDescRadioChanged:function(a){this.groupOptionsDescRadioBtn.set("checked",
a)}})})},"jimu/dijit/SymbolPicker":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dijit/TooltipDialog dijit/popup dijit/registry jimu/dijit/SymbolChooser jimu/symbolUtils".split(" "),function(A,N,K,H,g,f,u,y,h,r,F,n,q,t){return A([N,K,H],{baseClass:"jimu-symbol-picker",declaredClass:"jimu.dijit.SymbolPicker",templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"symbolNode" class\x3d"symbol-node jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"separator jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8 jimu-float-leading"\x3e\x3c/div\x3e\x3c/div\x3e',
tooltipDialog:null,_isTooltipDialogOpened:!1,symbol:null,type:null,cropImage:!1,customZIndex:null,postCreate:function(){this.inherited(arguments);this._createTooltipDialog();this._hideTooltipDialog();var z=this.symbolChooser.getSymbol();z&&this._drawSymbol(z)},destroy:function(){this._hideTooltipDialog();this.symbolChooser&&this.symbolChooser.destroy();this.symbolChooser=null;this.inherited(arguments)},_createTooltipDialog:function(){var z=f.create("div");this.tooltipDialog=new r({content:z});this.symbolChooser=
new q({cropImage:this.cropImage,customZIndex:this.customZIndex,symbol:this.symbol,type:this.type});this.symbolChooser.placeAt(z);this.symbolChooser.startup();this.own(y(this.symbolChooser,"change",g.hitch(this,function(k){this._drawSymbol(k);this.emit("change",k)})));this.own(y(this.domNode,"click",g.hitch(this,function(k){k.stopPropagation();k.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():this._showTooltipDialog()})));this.own(y(document.body,"click",g.hitch(this,function(k){var E=
k.target||k.srcElement;k=this._getColorPickers();if(!(0<k.length&&u.some(k,function(v){return v.isPartOfPopup(E)})))if(k=this.tooltipDialog.domNode,k=E===k||f.isDescendant(E,k),this.cropImage&&this.symbolChooser._isCustomImageOptionSelected()){var B=this.symbolChooser.imageChooser,I=B.msgPopupOpen;B.cropPopupOpen||I||k||this._hideTooltipDialog();B.cropPopup&&B.cropPopup.domNode||(B.cropPopupOpen=!1);B.msgPopup&&B.msgPopup.domNode||(B.msgPopupOpen=!1)}else k||this._hideTooltipDialog()})));this.own(y(this.symbolChooser,
"resize",g.hitch(this,function(){this._isTooltipDialogOpened&&(this._hideTooltipDialog(),this._showTooltipDialog())})))},_getColorPickers:function(){var z=h(".jimu-color-picker",this.symbolChooser.domNode);return u.map(z,g.hitch(this,function(k){return n.byNode(k)}))},reset:function(){this.symbol=this.type=null;f.empty(this.symbolNode);this.symbolChooser.reset()},showBySymbol:function(z){this.reset();z&&(this._drawSymbol(z),this.symbolChooser.showBySymbol(z))},showByType:function(z){this.reset();
this.symbolChooser.showByType(z);(z=this.symbolChooser.getSymbol())&&this._drawSymbol(z)},getSymbol:function(){return this.symbolChooser.getSymbol()},_drawSymbol:function(z){f.empty(this.symbolNode);z&&(z=t.createSymbolNode(z,{width:16,height:16}))&&f.place(z,this.symbolNode)},_showTooltipDialog:function(){this.tooltipDialog&&(F.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.domNode}),this._isTooltipDialogOpened=!0)},_hideTooltipDialog:function(){this.tooltipDialog&&(F.close(this.tooltipDialog),
this._isTooltipDialogOpened=!1)}})})},"dojox/form/FileUploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/_base/sniff dojo/query dojo/dom dojo/dom-style dojo/dom-geometry dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-form dojo/_base/config dijit/_base/manager dojo/io/iframe dojo/_base/Color dojo/_base/unload dijit/_Widget dijit/_TemplatedMixin dijit/_Contained dojox/embed/Flash dojox/embed/flashVars dojox/html/styles".split(" "),
function(A,N,K,H,g,f,u,y,h,r,F,n,q,t,z,k,E,B,I,v,C,D,O,U,Q,V){A.deprecated("dojox.form.FileUploader","Use dojox.form.Uploader","2.0");return N("dojox.form.FileUploader",[C,D,O],{swfPath:k.uploaderPath||require.toUrl("dojox/form/resources/fileuploader.swf"),templateString:'\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d"progNode"\x3e\x3cdiv dojoAttachPoint\x3d"progTextNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d"insideNode" class\x3d"uploaderInsideNode"\x3e\x3c/div\x3e\x3c/div\x3e',uploadUrl:"",
isDebug:!1,devMode:!1,baseClass:"dojoxUploaderNorm",hoverClass:"dojoxUploaderHover",activeClass:"dojoxUploaderActive",disabledClass:"dojoxUploaderDisabled",force:"",uploaderType:"",flashObject:null,flashMovie:null,insideNode:null,deferredUploading:1,fileListId:"",uploadOnChange:!1,selectMultipleFiles:!0,htmlFieldName:"uploadedfile",flashFieldName:"flashUploadFiles",fileMask:null,minFlashVersion:9,tabIndex:-1,showProgress:!1,progressMessage:"Loading",progressBackgroundUrl:require.toUrl("dijit/themes/tundra/images/buttonActive.png"),
progressBackgroundColor:"#ededed",progressWidgetId:"",skipServerCheck:!1,serverTimeout:5E3,log:function(){this.isDebug&&console.log(Array.prototype.slice.call(arguments).join(" "))},constructor:function(){this._subs=[]},postMixInProperties:function(){this.fileList=[];this._cons=[];this.fileMask=this.fileMask||[];this.fileInputs=[];this.fileCount=0;this._disabled=this.flashReady=!1;this.force=this.force.toLowerCase();this.uploaderType=(U.available>=this.minFlashVersion||"flash"==this.force)&&"html"!=
this.force?"flash":"html";this.deferredUploading=!0===this.deferredUploading?1:this.deferredUploading;this._refNode=this.srcNodeRef;this.getButtonStyle()},startup:function(){},postCreate:function(){this.inherited(arguments);this.setButtonStyle();if("flash"==this.uploaderType)var c="createFlashUploader";else this.uploaderType="html",c="createHtmlUploader";this[c]();this.fileListId&&this.connect(h.byId(this.fileListId),"click",function(p){p=p.target.parentNode.parentNode.parentNode;p.id&&-1<p.id.indexOf("file_")&&
this.removeFile(p.id.split("file_")[1])});v.addOnUnload(this,this.destroy)},getHiddenNode:function(c){if(!c)return null;var p=null;for(c=c.parentNode;c&&"body"!=c.tagName.toLowerCase();){if("none"==r.get(c,"display")){p=c;break}c=c.parentNode}return p},getButtonStyle:function(){var c=this.srcNodeRef;(this._hiddenNode=this.getHiddenNode(c))&&r.set(this._hiddenNode,"display","block");if(!c&&this.button&&this.button.domNode){var p=!0;c=this.button.domNode.className+" dijitButtonNode";var M=this.getText(y(".dijitButtonText",
this.button.domNode)[0]);this.srcNodeRef=c=t.place('\x3cbutton id\x3d"'+this.button.id+'" class\x3d"'+c+'"\x3e'+M+"\x3c/button\x3e",this.button.domNode,"after");this.button.destroy();this.baseClass="dijitButton";this.hoverClass="dijitButtonHover";this.pressClass="dijitButtonActive";this.disabledClass="dijitButtonDisabled"}else!this.srcNodeRef&&this.button&&(c=this.button);n.get(c,"class")&&(this.baseClass+=" "+n.get(c,"class"));n.set(c,"class",this.baseClass);this.norm=this.getStyle(c);this.width=
this.norm.w;this.height=this.norm.h;"flash"==this.uploaderType?(this.over=this.getTempNodeStyle(c,this.baseClass+" "+this.hoverClass,p),this.down=this.getTempNodeStyle(c,this.baseClass+" "+this.activeClass,p),this.dsbl=this.getTempNodeStyle(c,this.baseClass+" "+this.disabledClass,p),this.fhtml={cn:this.getText(c),nr:this.norm,ov:this.over,dn:this.down,ds:this.dsbl}):(this.fhtml={cn:this.getText(c),nr:this.norm},"middle"==this.norm.va&&(this.norm.lh=this.norm.h));this.devMode&&(this.log("classes - base:",
this.baseClass," hover:",this.hoverClass,"active:",this.activeClass),this.log("fhtml:",this.fhtml),this.log("norm:",this.norm),this.log("over:",this.over),this.log("down:",this.down))},setButtonStyle:function(){r.set(this.domNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+"px",padding:"0px",lineHeight:"normal",position:"relative"});"html"==this.uploaderType&&"middle"==this.norm.va&&r.set(this.domNode,"lineHeight",this.norm.lh+"px");this.showProgress?(this.progTextNode.innerHTML=this.progressMessage,
r.set(this.progTextNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",lineHeight:this.fhtml.nr.h+0+"px",position:"absolute"}),r.set(this.progNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",position:"absolute",display:"none",backgroundImage:"url("+this.progressBackgroundUrl+")",backgroundPosition:"bottom",backgroundRepeat:"repeat-x",backgroundColor:this.progressBackgroundColor})):t.destroy(this.progNode);
r.set(this.insideNode,{position:"absolute",top:"0px",left:"0px",display:""});q.add(this.domNode,this.srcNodeRef.className);-1<this.fhtml.nr.d.indexOf("inline")&&q.add(this.domNode,"dijitInline");try{this.insideNode.innerHTML=this.fhtml.cn}catch(p){if("flash"==this.uploaderType){this.insideNode=this.insideNode.parentNode.removeChild(this.insideNode);f.body().appendChild(this.insideNode);this.insideNode.innerHTML=this.fhtml.cn;var c=g.connect(this,"onReady",this,function(){g.disconnect(c);this.insideNode=
this.insideNode.parentNode.removeChild(this.insideNode);this.domNode.appendChild(this.insideNode)})}else this.insideNode.appendChild(document.createTextNode(this.fhtml.cn))}this._hiddenNode&&r.set(this._hiddenNode,"display","none")},onChange:function(c){},onProgress:function(c){},onComplete:function(c){},onCancel:function(){},onError:function(c){},onReady:function(c){},onLoad:function(c){},submit:function(c){c=c?z.toObject(c):null;this.upload(c);return!1},upload:function(c){if(!this.fileList.length)return!1;
if(!this.uploadUrl)return console.warn("uploadUrl not provided. Aborting."),!1;this.showProgress||this.set("disabled",!0);if(this.progressWidgetId){var p=E.byId(this.progressWidgetId).domNode;"none"==r.get(p,"display")&&(this.restoreProgDisplay="none",r.set(p,"display","block"));"hidden"==r.get(p,"visibility")&&(this.restoreProgDisplay="hidden",r.set(p,"visibility","visible"))}c&&!c.target&&(this.postData=c);this.log("upload type:",this.uploaderType," - postData:",this.postData);for(c=0;c<this.fileList.length;c++)p=
this.fileList[c],p.bytesLoaded=0,p.bytesTotal=p.size||1E5,p.percent=0;"flash"==this.uploaderType?this.uploadFlash():this.uploadHTML();return!1},removeFile:function(c,p){var M;for(M=0;M<this.fileList.length;M++)if(this.fileList[M].name==c){p||this.fileList.splice(M,1);break}"flash"==this.uploaderType?this.flashMovie.removeFile(c):p||(t.destroy(this.fileInputs[M]),this.fileInputs.splice(M,1),this._renumberInputs());this.fileListId&&t.destroy("file_"+c)},destroy:function(){"flash"!=this.uploaderType||
this.flashMovie?(H.forEach(this._subs,g.unsubscribe,dojo),H.forEach(this._cons,g.disconnect,dojo),this.scrollConnect&&g.disconnect(this.scrollConnect),"flash"==this.uploaderType?(this.flashObject.destroy(),delete this.flashObject):(t.destroy(this._fileInput),t.destroy(this._formNode)),this.inherited(arguments)):this._cons.push(g.connect(this,"onLoad",this,"destroy"))},_displayProgress:function(c){!0===c?("flash"==this.uploaderType?r.set(this.insideNode,"top","-2500px"):r.set(this.insideNode,"display",
"none"),r.set(this.progNode,"display","")):!1===c?(r.set(this.insideNode,{display:"",top:"0"}),r.set(this.progNode,"display","none")):r.set(this.progNode,"width",c*this.fhtml.nr.w+"px")},_animateProgress:function(){this._displayProgress(!0);var c=!1,p=g.connect(this,"_complete",function(){g.disconnect(p);c=!0}),M=0,T=setInterval(K.hitch(this,function(){M+=5;M>this.fhtml.nr.w&&(M=0,c=!0);this._displayProgress(M/this.fhtml.nr.w);c&&(clearInterval(T),setTimeout(K.hitch(this,function(){this._displayProgress(!1)}),
500))}),50)},_error:function(c){"string"==typeof c&&(c=Error(c));this.onError(c)},_addToFileList:function(){if(this.fileListId){var c="";H.forEach(this.fileList,function(p){c+='\x3ctable id\x3d"file_'+p.name+'" class\x3d"fileToUpload"\x3e\x3ctr\x3e\x3ctd class\x3d"fileToUploadClose"\x3e\x3c/td\x3e\x3ctd class\x3d"fileToUploadName"\x3e'+p.name+'\x3c/td\x3e\x3ctd class\x3d"fileToUploadSize"\x3e'+(p.size?Math.ceil(.001*p.size)+"kb":"")+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"},this);h.byId(this.fileListId).innerHTML=
c}},_change:function(c){u("ie")&&H.forEach(c,function(p){p.name=p.name.split("\\")[p.name.split("\\").length-1]});this.selectMultipleFiles?this.fileList=this.fileList.concat(c):(this.fileList[0]&&this.removeFile(this.fileList[0].name,!0),this.fileList=c);this._addToFileList();this.onChange(c);this.uploadOnChange?("html"==this.uploaderType&&this._buildFileInput(),this.upload()):"html"==this.uploaderType&&this.selectMultipleFiles&&(this._buildFileInput(),this._connectInput())},_complete:function(c){c=
K.isArray(c)?c:[c];H.forEach(c,function(p){p.ERROR&&this._error(p.ERROR)},this);H.forEach(this.fileList,function(p){p.bytesLoaded=1;p.bytesTotal=1;p.percent=100;this._progress(p)},this);H.forEach(this.fileList,function(p){this.removeFile(p.name,!0)},this);this.onComplete(c);this.fileList=[];this._resetHTML();this.set("disabled",!1);this.restoreProgDisplay&&setTimeout(K.hitch(this,function(){r.set(E.byId(this.progressWidgetId).domNode,"none"==this.restoreProgDisplay?"display":"visibility",this.restoreProgDisplay)}),
500)},_progress:function(c){for(var p=0,M=0,T=0;T<this.fileList.length;T++){var d=this.fileList[T];d.name==c.name&&(d.bytesLoaded=c.bytesLoaded,d.bytesTotal=c.bytesTotal,d.percent=Math.ceil(d.bytesLoaded/d.bytesTotal*100),this.log(d.name,"percent:",d.percent));M+=Math.ceil(.001*d.bytesLoaded);p+=Math.ceil(.001*d.bytesTotal)}c=Math.ceil(M/p*100);this.progressWidgetId&&E.byId(this.progressWidgetId).update({progress:c+"%"});this.showProgress&&this._displayProgress(.01*c);this.onProgress(this.fileList)},
_getDisabledAttr:function(){return this._disabled},_setDisabledAttr:function(c){if(this._disabled!=c){if("flash"==this.uploaderType){if(!this.flashReady){var p=g.connect(this,"onLoad",this,function(){g.disconnect(p);this._setDisabledAttr(c)});return}this._disabled=c;this.flashMovie.doDisable(c)}else this._disabled=c,r.set(this._fileInput,"display",this._disabled?"none":"");q.toggle(this.domNode,this.disabledClass,c)}},_onFlashBlur:function(){this.flashMovie.blur();if(!this.nextFocusObject&&this.tabIndex)for(var c=
y("[tabIndex]"),p=0;p<c.length;p++)if(c[p].tabIndex>=Number(this.tabIndex)+1){this.nextFocusObject=c[p];break}this.nextFocusObject.focus()},_disconnect:function(){H.forEach(this._cons,g.disconnect,dojo)},uploadHTML:function(){this.selectMultipleFiles&&t.destroy(this._fileInput);this._setHtmlPostData();this.showProgress&&this._animateProgress();B.send({url:this.uploadUrl.toString(),form:this._formNode,handleAs:"json",error:K.hitch(this,function(c){this._error("HTML Upload Error:"+c.message)}),load:K.hitch(this,
function(c,p,M){this._complete(c)})})},createHtmlUploader:function(){this._buildForm();this._setFormStyle();this._buildFileInput();this._connectInput();this._styleContent();r.set(this.insideNode,"visibility","visible");this.onReady()},_connectInput:function(){this._disconnect();this._cons.push(g.connect(this._fileInput,"mouseover",this,function(c){q.add(this.domNode,this.hoverClass);this.onMouseOver(c)}));this._cons.push(g.connect(this._fileInput,"mouseout",this,function(c){setTimeout(K.hitch(this,
function(){q.remove(this.domNode,this.activeClass);q.remove(this.domNode,this.hoverClass);this.onMouseOut(c);this._checkHtmlCancel("off")}),0)}));this._cons.push(g.connect(this._fileInput,"mousedown",this,function(c){q.add(this.domNode,this.activeClass);q.remove(this.domNode,this.hoverClass);this.onMouseDown(c)}));this._cons.push(g.connect(this._fileInput,"mouseup",this,function(c){q.remove(this.domNode,this.activeClass);this.onMouseUp(c);this.onClick(c);this._checkHtmlCancel("up")}));this._cons.push(g.connect(this._fileInput,
"change",this,function(){this._checkHtmlCancel("change");var c=this._fileInput.value;c?this._change([{name:c,type:"",size:0}]):this._change([])}));0<=this.tabIndex&&n.set(this.domNode,"tabIndex",this.tabIndex)},_checkHtmlCancel:function(c){"change"==c&&(this.dialogIsOpen=!1);"up"==c&&(this.dialogIsOpen=!0);if("off"==c){if(this.dialogIsOpen)this.onCancel();this.dialogIsOpen=!1}},_styleContent:function(){var c=this.fhtml.nr;r.set(this.insideNode,{width:c.w+"px",height:"middle"==c.va?c.h+"px":"auto",
textAlign:c.ta,paddingTop:c.p[0]+"px",paddingRight:c.p[1]+"px",paddingBottom:c.p[2]+"px",paddingLeft:c.p[3]+"px"});try{r.set(this.insideNode,"lineHeight","inherit")}catch(p){}},_resetHTML:function(){"html"==this.uploaderType&&this._formNode&&(this.fileInputs=[],y("*",this._formNode).forEach(function(c){t.destroy(c)}),this.fileCount=0,this._buildFileInput(),this._connectInput())},_buildForm:function(){this._formNode||(9>u("ie")||u("ie")&&u("quirks")?(this._formNode=document.createElement('\x3cform enctype\x3d"multipart/form-data" method\x3d"post"\x3e'),
this._formNode.encoding="multipart/form-data",this._formNode.id=E.getUniqueId("FileUploaderForm"),this.domNode.appendChild(this._formNode)):this._formNode=t.create("form",{enctype:"multipart/form-data",method:"post",id:E.getUniqueId("FileUploaderForm")},this.domNode))},_buildFileInput:function(){this._fileInput&&(this._disconnect(),this._fileInput.id+=this.fileCount,r.set(this._fileInput,"display","none"));this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var c=
this.htmlFieldName;this.selectMultipleFiles&&(c+=this.fileCount,this.fileCount++);n.set(this._fileInput,{id:this.id,name:c,type:"file"});q.add(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);c=F.getMarginBox(this._fileInput);r.set(this._fileInput,{position:"relative",left:this.fhtml.nr.w-c.w+"px",opacity:0})},_renumberInputs:function(){if(this.selectMultipleFiles){var c;this.fileCount=0;H.forEach(this.fileInputs,function(p){c=this.htmlFieldName+this.fileCount;this.fileCount++;
n.set(p,"name",c)},this)}},_setFormStyle:function(){V.insertCssRule("#"+this._formNode.id+" input","font-size:"+Math.max(2,Math.max(Math.ceil(this.fhtml.nr.w/60),Math.ceil(this.fhtml.nr.h/15)))+"em");r.set(this.domNode,{overflow:"hidden",position:"relative"});r.set(this.insideNode,"position","absolute")},_setHtmlPostData:function(){if(this.postData)for(var c in this.postData)t.create("input",{type:"hidden",name:c,value:this.postData[c]},this._formNode)},uploadFlash:function(){try{if(this.showProgress){this._displayProgress(!0);
var c=g.connect(this,"_complete",this,function(){g.disconnect(c);this._displayProgress(!1)})}var p={},M;for(M in this.postData)p[M]=this.postData[M];this.flashMovie.doUpload(p)}catch(T){this._error("FileUploader - Sorry, the SWF failed to initialize."+T)}},createFlashUploader:function(){if(this.uploadUrl=this.uploadUrl.toString())if(0>this.uploadUrl.toLowerCase().indexOf("http")&&0!=this.uploadUrl.indexOf("/")){var c=window.location.href.split("/");c.pop();c=c.join("/")+"/";this.uploadUrl=c+this.uploadUrl;
this.log("SWF Fixed - Relative loc:",c," abs loc:",this.uploadUrl)}else this.log("SWF URL unmodified:",this.uploadUrl);else console.warn("Warning: no uploadUrl provided.");c={expressInstall:!0,path:this.swfPath.uri||this.swfPath,width:this.fhtml.nr.w,height:this.fhtml.nr.h,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName,uploadUrl:this.uploadUrl,uploadOnSelect:this.uploadOnChange,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.selectMultipleFiles,
id:this.id,isDebug:this.isDebug,devMode:this.devMode,flashButton:Q.serialize("fh",this.fhtml),fileMask:Q.serialize("fm",this.fileMask),noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new U(c,this.insideNode);this.flashObject.onError=K.hitch(function(p){this._error("Flash Error: "+p)});this.flashObject.onReady=K.hitch(this,function(){r.set(this.insideNode,"visibility","visible");
this.log("FileUploader flash object ready");this.onReady(this)});this.flashObject.onLoad=K.hitch(this,function(p){this.flashMovie=p;this.flashReady=!0;this.onLoad(this)});this._connectFlash()},_connectFlash:function(){this._doSub("/filesSelected","_change");this._doSub("/filesUploaded","_complete");this._doSub("/filesProgress","_progress");this._doSub("/filesError","_error");this._doSub("/filesCanceled","onCancel");this._doSub("/stageBlur","_onFlashBlur");this._doSub("/up","onMouseUp");this._doSub("/down",
"onMouseDown");this._doSub("/over","onMouseOver");this._doSub("/out","onMouseOut");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&n.set(this.domNode,"tabIndex",this.tabIndex)},_doSub:function(c,p){this._subs.push(g.subscribe(this.id+c,this,p))},urlencode:function(c){return c&&"none"!=c?c.replace(/:/g,"||").replace(/\./g,"^^").replace("url(","").replace(")","").replace(/'/g,"").replace(/"/g,""):!1},isButton:function(c){c=c.tagName.toLowerCase();
return"button"==c||"input"==c},getTextStyle:function(c){var p={};p.ff=r.get(c,"fontFamily");if(p.ff){p.ff=p.ff.replace(", ",",");p.ff=p.ff.replace(/"|'/g,"");p.ff="sans-serif"==p.ff?"Arial":p.ff;p.fw=r.get(c,"fontWeight");p.fi=r.get(c,"fontStyle");p.fs=parseInt(r.get(c,"fontSize"),10);if(-1<r.get(c,"fontSize").indexOf("%"))for(var M=c;M.tagName;){if(-1==r.get(M,"fontSize").indexOf("%")){p.fs=parseInt(r.get(M,"fontSize"),10);break}"body"==M.tagName.toLowerCase()&&(p.fs=.16*parseInt(r.get(M,"fontSize"),
10));M=M.parentNode}p.fc=(new I(r.get(c,"color"))).toHex();p.fc=parseInt(p.fc.substring(1,Infinity),16)}p.lh=r.get(c,"lineHeight");p.ta=r.get(c,"textAlign");p.ta="start"!=p.ta&&p.ta?p.ta:"left";p.va=this.isButton(c)?"middle":p.lh==p.h?"middle":r.get(c,"verticalAlign");return p},getText:function(c){c=K.trim(c.innerHTML);-1<c.indexOf("\x3c")&&(c=escape(c));return c},getStyle:function(c){var p={},M=F.getContentBox(c),T=F.getPadExtents(c);p.p=[T.t,T.w-T.l,T.h-T.t,T.l];p.w=M.w+T.w;p.h=M.h+T.h;p.d=r.get(c,
"display");M=new I(r.get(c,"backgroundColor"));p.bc=0==M.a?"#ffffff":M.toHex();p.bc=parseInt(p.bc.substring(1,Infinity),16);if(M=this.urlencode(r.get(c,"backgroundImage")))p.bi={url:M,rp:r.get(c,"backgroundRepeat"),pos:escape(r.get(c,"backgroundPosition"))},p.bi.pos||(M=r.get(c,"backgroundPositionX"),T=r.get(c,"backgroundPositionY"),p.bi.pos=escape(("left"==M?"0%":"right"==M?"100%":M)+" "+("top"==T?"0%":"bottom"==T?"100%":T)));return K.mixin(p,this.getTextStyle(c))},getTempNodeStyle:function(c,p,
M){if(M){M=t.place("\x3c"+c.tagName+"\x3e\x3cspan\x3e"+c.innerHTML+"\x3c/span\x3e\x3c/"+c.tagName+"\x3e",c.parentNode);var T=M.firstChild;q.add(T,c.className);q.add(M,p);c=this.getStyle(T)}else M=t.place("\x3c"+c.tagName+"\x3e"+c.innerHTML+"\x3c/"+c.tagName+"\x3e",c.parentNode),q.add(M,c.className),q.add(M,p),M.id=c.id,c=this.getStyle(M);t.destroy(M);return c}})})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(A,N,K,H,g,f,u,y,h,r,F,n,q){K.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");f=q._iframeName;f=f.substring(0,f.lastIndexOf("_"));var t=H.delegate(q,{create:function(){return t._frame=q.create.apply(q,arguments)},get:null,post:null,send:function(z){var k=g._ioSetArgs(z,function(D){C&&C.cancel()},function(D){var O=null;D=D.ioArgs;try{var U=D.handleAs;"xml"===U||"html"===U?O=C.response.data:(O=C.response.text,"json"===U?O=N.fromJson(O):"javascript"===U&&(O=K.eval(O)))}catch(Q){O=
Q}return O},function(D,O){O.ioArgs._hasError=!0;return D}),E=k.ioArgs,B="GET",I=y.byId(z.form);z.method&&"POST"===z.method.toUpperCase()&&I&&(B="POST");z={method:B,handleAs:"json"===z.handleAs||"javascript"===z.handleAs?"text":z.handleAs,form:z.form,query:I?null:z.content,data:I?z.content:null,timeout:z.timeout,ioArgs:E};z.method&&(z.method=z.method.toUpperCase());if(A.ioPublish&&K.publish&&!1!==E.args.ioPublish)var v=n.after(q,"_notifyStart",function(D){D.options.ioArgs===E&&(v.remove(),g._ioNotifyStart(k))},
!0);var C=q(E.url,z,!0);E._callNext=C._callNext;C.then(function(){k.resolve(k)}).otherwise(function(D){k.ioArgs.error=D;k.reject(D)});return k},_iframeOnload:u.global[f+"_onload"]});H.setObject("dojo.io.iframe",t);return t})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),function(A,N,K,H,g,f,u,y,h){function r(k){k=A.delegate(n,k);if(!("path"in k))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),
null;"id"in k||(k.id="dojox-embed-flash-"+F++);return k}var F=0,n={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};if(g("ie")){var q=function(k){k=r(k);if(!k)return null;var E,B=k.path;if(k.vars){var I=[];for(E in k.vars)I.push(encodeURIComponent(E)+"\x3d"+encodeURIComponent(k.vars[E]));k.params.FlashVars=I.join("\x26");delete k.vars}B='\x3cobject id\x3d"'+h.escape(String(k.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+
h.escape(String(k.width))+'" height\x3d"'+h.escape(String(k.height))+'"'+(k.style?' style\x3d"'+h.escape(String(k.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+h.escape(String(B))+'" /\x3e';if(k.params)for(E in k.params)B+='\x3cparam name\x3d"'+h.escape(E)+'" value\x3d"'+h.escape(String(k.params[E]))+'" /\x3e';return{id:k.id,markup:B+"\x3c/object\x3e"}};var t=function(){for(var k=10,E=null;!E&&7<k;)try{E=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+k--)}catch(B){}return E?(k=E.GetVariable("$version").split(" ")[1].split(","),
{major:null!=k[0]?parseInt(k[0]):0,minor:null!=k[1]?parseInt(k[1]):0,rev:null!=k[2]?parseInt(k[2]):0}):{major:0,minor:0,rev:0}}();N.addOnWindowUnload(function(){console.warn("***************UNLOAD");var k=function(){};H("object").reverse().style("display","none").forEach(function(E){for(var B in E)if("FlashVars"!=B&&"function"==typeof E[B])try{E[B]=k}catch(I){}})})}else q=function(k){k=r(k);if(!k)return null;var E,B=k.path;if(k.vars){var I=[];for(E in k.vars)I.push(encodeURIComponent(E)+"\x3d"+encodeURIComponent(k.vars[E]));
k.params.flashVars=I.join("\x26");delete k.vars}B='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+h.escape(String(B))+'" id\x3d"'+h.escape(String(k.id))+'" width\x3d"'+h.escape(String(k.width))+'" height\x3d"'+h.escape(String(k.height))+'"'+(k.style?' style\x3d"'+h.escape(String(k.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(k.params)for(E in k.params)B+=" "+h.escape(E)+'\x3d"'+h.escape(String(k.params[E]))+'"';return{id:k.id,markup:B+
" /\x3e"}},t=function(){var k=navigator.plugins["Shockwave Flash"];return k&&k.description?(k=k.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=k[0]?parseInt(k[0]):0,minor:null!=k[1]?parseInt(k[1]):0,rev:null!=k[2]?parseInt(k[2]):0}):{major:0,minor:0,rev:0}}();var z=function(k,E){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");
this.available=t.major;this.minimumVersion=k.minimumVersion||9;this.domNode=this.movie=this.id=null;E&&(E=f.byId(E));setTimeout(A.hitch(this,function(){if(k.expressInstall||this.available&&this.available>=this.minimumVersion)if(k&&E)this.init(k,E);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),
100)};A.extend(z,{onReady:function(k){},onLoad:function(k){},onError:function(k){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(k,E){this.destroy();E=f.byId(E||this.domNode);if(!E)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var B=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;z.initialized&&(this.id=z.place(k,E),this.domNode=E,setTimeout(A.hitch(this,
function(){this.movie=this.byId(this.id,k.doc);this.onReady(this.movie);this._poller=setInterval(A.hitch(this,function(){try{B=this.movie.PercentLoaded()}catch(I){console.warn("this.movie.PercentLoaded() failed",I,this.movie)}if(100==B)this._onload();else if(0==B&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(k){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var k=
A.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),E;for(E in this)k[E]||delete this[E];this._poller?u(this,"Load",this,"_destroy"):this._destroy()}},byId:function(k,E){E=E||document;return E.embeds[k]?E.embeds[k]:E[k]?E[k]:window[k]?window[k]:document[k]?document[k]:null}});A.mixin(z,{minSupported:8,available:t.major,supported:t.major>=t.required,minimumRequired:t.required,version:t,initialized:!1,onInitialize:function(){z.initialized=!0},__ie_markup__:function(k){return q(k)},proxy:function(k,
E){K.forEach(E instanceof Array?E:[E],function(B){this[B]=A.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+B+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+K.map(arguments,function(I){return __flash__toXML(I)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},k)}});z.place=function(k,E){k=q(k);E=f.byId(E);E||(E=y.doc.createElement("div"),E.id=k.id+"-container",y.body().appendChild(E));return k?(E.innerHTML=k.markup,
k.id):null};z.onInitialize();A.setObject("dojox.embed.Flash",z);return z})},"dojox/embed/flashVars":function(){define(["dojo"],function(A){A.deprecated("dojox.embed.flashVars","Will be removed in 2.0","2.0");var N={serialize:function(K,H){var g=function(h){"string"==typeof h&&(h=h.replace(/;/g,"_sc_"),h=h.replace(/\./g,"_pr_"),h=h.replace(/:/g,"_cl_"));return h},f=dojox.embed.flashVars.serialize,u="";if(A.isArray(H)){for(var y=0;y<H.length;y++)u+=f(K+"."+y,g(H[y]))+";";return u.replace(/;{2,}/g,";")}if(A.isObject(H)){for(y in H)u+=
f(K+"."+y,g(H[y]))+";";return u.replace(/;{2,}/g,";")}return K+":"+H}};A.setObject("dojox.embed.flashVars",N);return N})},"dojox/html/styles":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(A,N,K,H){var g=A.getObject("dojox.html",!0),f={},u={},y=[];g.insertCssRule=function(h,r,F){F=g.getDynamicStyleSheet(F);var n=h+" {"+r+"}";console.log("insertRule:",n);H("ie")?(F.cssText+=n,console.log("ss.cssText:",F.cssText)):F.sheet?F.sheet.insertRule(n,
F._indicies.length):F.appendChild(K.doc.createTextNode(n));F._indicies.push(h+" "+r);return h};g.removeCssRule=function(h,r,F){var n=-1,q,t;for(q in f)if(!F||F===q){var z=f[q];for(t=0;t<z._indicies.length;t++)if(h+" "+r===z._indicies[t]){n=t;break}if(-1<n)break}if(!z)return console.warn("No dynamic style sheet has been created from which to remove a rule."),!1;if(-1===n)return console.warn("The css rule was not found and could not be removed."),!1;z._indicies.splice(n,1);H("ie")?z.removeRule(n):z.sheet&&
z.sheet.deleteRule(n);return!0};g.modifyCssRule=function(h,r,F){};g.getStyleSheet=function(h){if(f[h||"default"])return f[h||"default"];if(!h)return!1;var r=g.getStyleSheets();if(r[h])return g.getStyleSheets()[h];for(var F in r)if(r[F].href&&-1<r[F].href.indexOf(h))return r[F];return!1};g.getDynamicStyleSheet=function(h){h||(h="default");f[h]||(K.doc.createStyleSheet?(f[h]=K.doc.createStyleSheet(),9>H("ie")&&(f[h].title=h)):(f[h]=K.doc.createElement("style"),f[h].setAttribute("type","text/css"),K.doc.getElementsByTagName("head")[0].appendChild(f[h]),
console.log(h," ss created: ",f[h].sheet)),f[h]._indicies=[]);return f[h]};g.enableStyleSheet=function(h){if(h=g.getStyleSheet(h))h.sheet?h.sheet.disabled=!1:h.disabled=!1};g.disableStyleSheet=function(h){if(h=g.getStyleSheet(h))h.sheet?h.sheet.disabled=!0:h.disabled=!0};g.activeStyleSheet=function(h){var r=g.getToggledStyleSheets(),F;if(1===arguments.length)N.forEach(r,function(n){n.disabled=n.title===h?!1:!0});else for(F=0;F<r.length;F++)if(!1===r[F].disabled)return r[F];return!0};g.getPreferredStyleSheet=
function(){};g.getToggledStyleSheets=function(){var h;if(!y.length){var r=g.getStyleSheets();for(h in r)r[h].title&&y.push(r[h])}return y};g.getStyleSheets=function(){if(u.collected)return u;N.forEach(K.doc.styleSheets,function(h){var r=h.sheet?h.sheet:h;h=r.title||r.href;if(H("ie"))-1===r.cssText.indexOf("#default#VML")&&(r.href?u[h]=r:r.imports.length?N.forEach(r.imports,function(F){u[F.title||F.href]=F}):u[h]=r);else{u[h]=r;u[h].id=r.ownerNode.id;h=[];try{h=r[r.cssRules?"cssRules":"rules"]}catch(F){console.warn("Reading css rules from stylesheet "+
r.href+" is forbidden due to same-origin policy. See http://www.w3.org/TR/CSP/#cascading-style-sheet-css-parsing",r)}N.forEach(h,function(F){F.href&&(u[F.href]=F.styleSheet,u[F.href].id=r.ownerNode.id)})}});u.collected=!0;return u};return g})},"widgets/InfoSummary/setting/UniqueLayerChooser":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/Deferred","jimu/dijit/LayerChooserFromMap"],function(A,N,K,H){return A([H],{parent:null,row:null,constructor:function(g){N.mixin(this,g)},postMixInProperties:function(){this.inherited(arguments);
this.filter=N.hitch(this,H.andCombineFilters([this.filter,N.hitch(this,this._customFilter)]))},_customFilter:function(g){var f=["WMSLayer","ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer","ArcGISTiledMapServiceLayer","ClusterLayer"],u=new K;if(g.isTable)u.resolve(!1);else{var y=!0;this.parent&&this.parent.used_layers&&g.getLayerType().then(N.hitch(this,function(h){-1<f.indexOf(h)?y=!1:this.row.layerID!==g.id&&(y=-1===this.parent.used_layers.indexOf(g.id)&&-1===this.parent.unsupported_ids.indexOf(g.id));
u.resolve(y)}))}return u}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),function(A,N,K,H,g,f,u,y,h,r,F,n,q,t,z,k,E,B){var I=K([H,g,f,N],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',
_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,onlyFilterCurrentLayerWhenAddItem:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);q.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new B({hidden:!0});this.shelter.placeAt(this.domNode);
this.shelter.startup();this._createTree();this.basicFilter=n.hitch(this,this.basicFilter);this.filter=I.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(v){var C=new y;this.onlyShowVisible?C.resolve(v.isShowInMap()):C.resolve(!0);return C},filter:function(v){v=new y;v.resolve(!0);return v},getSelectedItems:function(){var v=this.tree.getSelectedItems();return t.map(v,n.hitch(this,function(C){return this.getHandledItem(C)}))},
getAllItems:function(){var v=this.tree.getAllItems(),C=[];t.forEach(v,n.hitch(this,function(D){"root"!==D.id&&(D=this.getHandledItem(D),C.push(D))}));return C},getHandledItem:function(v){return{name:v.name,layerInfo:v.layerInfo}},_isLeafItem:function(v){return v.isLeaf},setCreateMapResponse:function(v){this.createMapResponse=v;E.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(n.hitch(this,function(C){this.layerInfosObj=C;this.own(A(this.layerInfosObj,"layerInfosChanged",
n.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(A(this.layerInfosObj,"layerInfosIsShowInMapChanged",n.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(v,C){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(v){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(v){this._clear();q.setStyle(this.errorTipSection,
"display","block");var C=[];this.onlyShowWebMapLayers?(C=v.getLayerInfoArrayOfWebmap(),C=C.concat(v.getTableInfoArrayOfWebmap())):(C=v.getLayerInfoArray(),C=C.concat(v.getTableInfoArray()));0!==C.length&&(q.setStyle(this.errorTipSection,"display","none"),t.forEach(C,n.hitch(this,function(D){this._addDirectLayerInfo(D)})))},_addDirectLayerInfo:function(v){v&&v.getLayerObject().then(n.hitch(this,function(){this._addItem("root",v)}),n.hitch(this,function(C){console.error(C)}))},_clear:function(){var v=
this._store.query({parent:"root"});t.forEach(v,n.hitch(this,function(C){C&&"root"!==C.id&&this._store.remove(C.id)}))},_addItem:function(v,C){var D=null,O=C.getLayerType(),U=this.filter(C);F({layerType:O,valid:U}).then(n.hitch(this,function(Q){if(Q.valid){var V=n.hitch(this,function(T,d){this._id++;D={name:C.title||"",parent:v,layerInfo:C,type:Q.layerType,layerClass:C.layerObject.declaredClass,id:this._id.toString(),isLeaf:T,hasChildren:d};this._store.add(D)}),c=C.getSubLayers(),p=0===c.length,M=
!0;this.onlyFilterCurrentLayerWhenAddItem?(p&&(M=!1),V(p,M)):p?V(p,!1):(c=t.map(c,n.hitch(this,function(T){return this.filter(T)})),F(c).then(n.hitch(this,function(T){(T=t.some(T,function(d){return d}))&&V(p,T)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var v=this._getRootItem();v=new u({data:[v],getChildren:function(C){return this.query({parent:C.id})}});this._store=new h(v);v=new r({store:this._store,query:{id:"root"},
mayHaveChildren:n.hitch(this,this._mayHaveChildren)});this.tree=new k({multiple:this.multiple,model:v,showRoot:!1,isLeafItem:n.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:n.hitch(this,function(C,D){"root"!==C.id&&this._onTreeOpen(C,D)}),onClick:n.hitch(this,function(C,D,O){this._onTreeClick(C,D,O);this.emit("tree-click",C,D,O)}),getIconStyle:n.hitch(this,function(C,D){var O=null;if(!C||"root"===C.id)return null;var U={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",
backgroundImage:""},Q=window.location.protocol+"//"+window.location.host+require.toUrl("jimu");if(C=this._getIconInfo(C,D).imageName)U.backgroundImage="url("+Q+"/css/images/"+C+")",O=U;return O}),getIconClass:n.hitch(this,function(C,D){return this._getIconInfo(C,D).className}),getTooltip:n.hitch(this,function(C){return this.displayTooltipForTreeNode?C.layerInfo.title:""})});q.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(v){return v.hasChildren},
_getIconInfo:function(v,C){var D="",O="";"ArcGISDynamicMapServiceLayer"===v.type||"ArcGISTiledMapServiceLayer"===v.type?C?(D="mapserver_open.png",O="mapservice-layer-icon open"):(D="mapserver_close.png",O="mapservice-layer-icon close"):"GroupLayer"===v.type?C?(D="group_layer2.png",O="group-layer-icon open"):(D="group_layer1.png",O="group-layer-icon close"):"FeatureLayer"===v.type?(v=z.getTypeByGeometryType(v.layerInfo.layerObject.geometryType),"point"===v?(D="point_layer1.png",O="point-layer-icon"):
"polyline"===v?(D="line_layer1.png",O="line-layer-icon"):"polygon"===v&&(D="polygon_layer1.png",O="polygon-layer-icon")):"Table"===v.type?(D="table.png",O="table-icon"):"ArcGISImageServiceLayer"===v.type||"ArcGISImageServiceVectorLayer"===v.type?(D="image_layer.png",O="iamge-layer-icon"):C?(D="mapserver_open.png",O="mapservice-layer-icon open"):(D="mapserver_close.png",O="mapservice-layer-icon close");return{imageName:D,className:O}},_onTreeOpen:function(v,C){if("root"!==v.id){var D=[];C=[];D=v.layerInfo.getSubLayers();
v.checked||(this.shelter.show(),C=t.map(D,n.hitch(this,function(O){return O.getLayerObject()})),F(C).then(n.hitch(this,function(){this.domNode&&(t.forEach(D,n.hitch(this,function(O){this._addItem(v.id,O)})),v.checked=!0,this.shelter.hide())}),n.hitch(this,function(O){console.error(O);this.shelter.hide()})))}},_onTreeClick:function(v,C,D){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});I.createFilterByLayerType=
function(v){n.isArrayLike(v)||(v=[]);return function(C){var D=new y;if(0===v.length)D.resolve(!0);else{var O=[];C.traversal(function(U){O.push(U.getLayerType())});F(O).then(function(U){for(var Q=0;Q<U.length;Q++)for(var V=0;V<v.length;V++)if(U[Q]===v[V]){D.resolve(!0);return}D.resolve(!1)},function(U){console.error(U);D.reject(U)})}return D}};I.createFeaturelayerFilter=function(v,C,D,O){var U=["point","polyline","polygon"];v&&0<v.length?(v=t.filter(v,function(Q){return 0<=U.indexOf(Q)}),0===v.length&&
(v=U)):v=U;return function(Q){var V=Q.getLayerType();Q=Q.getLayerObject();return F({layerType:V,layerObject:Q}).then(function(c){var p=c.layerType;c=c.layerObject;if("ArcGISDynamicMapServiceLayer"===p||"ArcGISTiledMapServiceLayer"===p||"GroupLayer"===p||"FeatureCollection"===p)return!0;if("FeatureLayer"===p){p=z.getTypeByGeometryType(c.geometryType);p=0<=t.indexOf(v,p);var M=I._shouldPassStatisticsCheck(O,c);return c.url?(c=z.isFeaturelayerUrlSupportQuery(c.url,c.capabilities),p&&c&&M):C&&p}return"Table"===
p?(p=z.isFeaturelayerUrlSupportQuery(c.url,c.capabilities),c=I._shouldPassStatisticsCheck(O,c),D&&p&&c):!1})}};I.createImageServiceLayerFilter=function(v,C){return function(D){var O=D.getLayerType();D=D.getLayerObject();return F({layerType:O,layerObject:D}).then(function(U){var Q=U.layerType,V=U.layerObject;return"ArcGISImageServiceLayer"===Q||"ArcGISImageServiceVectorLayer"===Q?v?z.isImageServiceSupportQuery(U.layerObject.capabilities)?C?I._shouldPassStatisticsCheck(C,V):!0:!1:!0:!1})}};I._shouldPassStatisticsCheck=
function(v,C){return v?(v=!1,v=C.advancedQueryCapabilities?!!C.advancedQueryCapabilities.supportsStatistics:!!C.supportsStatistics):!0};I.createQueryableLayerFilter=function(v){var C=I.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,v);v=I.createImageServiceLayerFilter(!0,v);return I.orCombineFilters([C,v])};I.andCombineFilters=function(v){return I._combineFilters(v,!0)};I.orCombineFilters=function(v){return I._combineFilters(v,!1)};I._combineFilters=function(v,C){return function(D){var O=
new y,U=t.map(v,function(Q){return Q(D)});F(U).then(function(Q){var V=!1;V=C?t.every(Q,function(c){return c}):t.some(Q,function(c){return c});O.resolve(V)},function(Q){console.error(Q);O.reject(Q)});return O}};return I})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(A,N,K,H,g,f,u){return K("dijit.tree.ObjectStoreModel",u,{store:null,labelAttr:"name",labelType:"text",root:null,
query:null,constructor:function(y){g.mixin(this,y);this.childrenCache={}},getRoot:function(y,h){if(this.root)y(this.root);else{var r=this.store.query(this.query);r.then&&this.own(r);f(r,g.hitch(this,function(F){if(1!=F.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+F.length+" items, but must return exactly one");this.root=F[0];y(this.root);r.observe&&r.observe(g.hitch(this,function(n){this.onChange(n)}),!0)}),h)}},mayHaveChildren:function(){return!0},getChildren:function(y,
h,r){var F=this.store.getIdentity(y);if(this.childrenCache[F])f(this.childrenCache[F],h,r);else{var n=this.childrenCache[F]=this.store.getChildren(y);n.then&&this.own(n);n.observe&&this.own(n.observe(g.hitch(this,function(q,t,z){this.onChange(q);t!=z&&f(n,g.hitch(this,"onChildrenChange",y))}),!0));f(n,h,r)}},isItem:function(){return!0},getIdentity:function(y){return this.store.getIdentity(y)},getLabel:function(y){return y[this.labelAttr]},newItem:function(y,h,r,F){return this.store.put(y,{parent:h,
before:F})},pasteItem:function(y,h,r,F,n,q){var t=new H;if(h===r&&!F&&!q)return t.resolve(!0),t;h&&!F?this.getChildren(h,g.hitch(this,function(z){z=[].concat(z);var k=A.indexOf(z,y);z.splice(k,1);this.onChildrenChange(h,z);t.resolve(this.store.put(y,{overwrite:!0,parent:r,oldParent:h,before:q,isCopy:!1}))})):t.resolve(this.store.put(y,{overwrite:!0,parent:r,oldParent:h,before:q,isCopy:!0}));return t},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(A,N,K,H,g,f,u,y,h,r,F,n,q,t,z,k){var E=A([z._TreeNode,q],{templateString:H,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);f.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=f.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=f.toDom('\x3cinput type\x3d"checkbox" /\x3e');f.addClass(this.checkNode,"jimu-tree-check-node");f.place(this.checkNode,this.contentNode,
"first");this.own(F(this.checkNode,"click",g.hitch(this,this._onClick)));this.own(F(this.rowNode,"keydown",g.hitch(this,function(B,I){I.target=B;I.keyCode!==n.ENTER&&I.keyCode!==n.SPACE||this._onClick(I)},this.checkNode)));this.isLeaf?this.groupId?f.setStyle(this.checkNode,"display","none"):f.setStyle(this.checkNode,"display","inline"):f.setStyle(this.checkNode,"display","none");this.isLeaf?f.addClass(this.domNode,"jimu-tree-leaf-node"):f.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&
(this.checkNode.checked=!0,f.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,f.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(B){(B.target||B.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,B):this.tree._onClick(this,B)},_onChange:function(){this.isLeaf&&setTimeout(g.hitch(this,
function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return A([z,q],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+k.getRandomString()},postCreate:function(){this.inherited(arguments);f.addClass(this.domNode,"jimu-tree");this.own(r.before(this,"onClick",g.hitch(this,this._jimuBeforeClick)));
this.rootLoadingIndicator&&f.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0;f.setAttr(this.domNode,"tabindex",0)},removeItem:function(B){this.model.store.remove(B)},getAllItems:function(){var B=this.getAllTreeNodeWidgets();return u.map(B,g.hitch(this,function(I){var v=I.item;v.selected=I.checkNode.checked;return v}))},getSelectedItems:function(){var B=this.getAllTreeNodeWidgets();B=u.filter(B,g.hitch(this,function(I){return I.checkNode.checked}));return u.map(B,
g.hitch(this,function(I){return I.item}))},getFilteredItems:function(B){var I=this.getAllTreeNodeWidgets();I=u.map(I,g.hitch(this,function(v){var C=v.item;C.selected=v.checkNode.checked;return C}));return u.filter(I,g.hitch(this,function(v){return B(v)}))},getTreeNodeByItemId:function(B){for(var I=this._getAllTreeNodeDoms(),v=0;v<I.length;v++){var C=t.byNode(I[v]);if(C.item.id.toString()===B.toString())return C}return null},selectItem:function(B){(B=this.getTreeNodeByItemId(B))&&B.isLeaf&&this.selectNodeWidget(B)},
unselectItem:function(B){(B=this.getTreeNodeByItemId(B))&&B.isLeaf&&B.unselect()},getAllLeafTreeNodeWidgets:function(){var B=this.getAllTreeNodeWidgets();return u.filter(B,g.hitch(this,function(I){return I.isLeaf}))},getAllTreeNodeWidgets:function(){var B=this._getAllTreeNodeDoms();return u.map(B,g.hitch(this,function(I){return t.byNode(I)}))},isLeafItem:function(B){return B&&B.isLeaf},_getAllTreeNodeDoms:function(){return h(".dijitTreeNode",this.domNode)},_createTreeNode:function(B){B.isLeaf=this.isLeafItem(B.item);
this.multiple||(B.groupId=this.uniqueId);return new E(B)},_onTreeNodeSelect:function(B){this.emit("item-select",{item:B.item,treeNode:B})},_onTreeNodeUnselect:function(B){this.emit("item-unselect",{item:B.item,treeNode:B})},selectNodeWidget:function(B){this.multiple||this.unselectAllLeafNodeWidgets();B.select()},_jimuBeforeClick:function(B,I,v){I.isLeaf&&(f.hasClass(v.target||v.srcElement,"jimu-tree-check-node")||(this.multiple?I.toggleSelect():this.selectNodeWidget(I)));return arguments},_onCheckNodeClick:function(B,
I,v){!this.multiple&&I&&this.unselectAllLeafNodeWidgets();y.stop(v);this.focusNode(B);setTimeout(g.hitch(this,function(){I?this.selectNodeWidget(B):B.unselect();this.onClick(B.item,B,v)}),0)},unselectAllLeafNodeWidgets:function(){var B=this.getAllLeafTreeNodeWidgets();u.forEach(B,g.hitch(this,function(I){I.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(A,N,K,H,g,f,u,y,h,r,F,n,q,t,z,k,E,B,I,v,C,D,O,U,Q,V,c,p,M,T,d,m,x,a,l){function w(b){return k.delegate(b.promise||b,{addCallback:function(e){this.then(e)},addErrback:function(e){this.otherwise(e)}})}var P=H("dijit._TreeNode",[Q,V,c,p,M],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(b){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=b;this._set("label",b);q("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:d,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(b){var e=Math.max(b,0)*this.tree._nodePixelIndent+"px";r.set(this.domNode,
"backgroundPosition",e+" 0px");r.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",e);A.forEach(this.getChildren(),function(G){G.set("indent",b+1)});this._set("indent",b)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(b){var e=this.tree,G=e.model;e._v10Compat&&b===G.root&&(b=null);this._applyClassAndStyle(b,"icon","Icon");this._applyClassAndStyle(b,"label","Label");this._applyClassAndStyle(b,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(b,e,G){var J="_"+e+"Class";e+="Node";var S=this[J];this[J]=this.tree["get"+G+"Class"](b,this.isExpanded);y.replace(this[e],this[J]||"",S||"");r.set(this[e],this.tree["get"+G+"Style"](b,this.isExpanded)||{})},_updateLayout:function(){var b=this.getParent();b=!b||!b.rowNode||"none"==b.rowNode.style.display;y.toggle(this.domNode,"dijitTreeIsRoot",b);y.toggle(this.domNode,"dijitTreeIsLast",!b&&!this.getNextSibling())},_setExpando:function(b){var e=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];b=b?0:this.isExpandable?this.isExpanded?1:2:3;y.replace(this.expandoNode,e[b],e);this.expandoNodeText.innerHTML=["*","-","+","*"][b]},expand:function(){if(this._expandDeferred)return w(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");y.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var b=n.wipeIn({node:this.containerNode,duration:U.defaultDuration}),e=this._expandDeferred=new g(function(){b.stop()});N.after(b,"onEnd",function(){e.resolve(!0)},!0);b.play();return w(e)},collapse:function(){if(this._collapseDeferred)return w(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");y.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var b=n.wipeOut({node:this.containerNode,duration:U.defaultDuration}),e=this._collapseDeferred=new g(function(){b.stop()});N.after(b,"onEnd",
function(){e.resolve(!0)},!0);b.play();return w(e)},indent:0,setChildItems:function(b){var e=this.tree,G=e.model,J=[],S=e.focusedChild,da=this.getChildren();A.forEach(da,function(R){c.prototype.removeChild.call(this,R)},this);this.defer(function(){A.forEach(da,function(R){if(!R._destroyed&&!R.getParent()){e.dndController.removeTreeNode(R);(function ba(W){var Y=G.getIdentity(W.item),ca=e._itemNodesMap[Y];1==ca.length?delete e._itemNodesMap[Y]:(Y=A.indexOf(ca,W),-1!=Y&&ca.splice(Y,1));A.forEach(W.getChildren(),
ba)})(R);if(e.persist){var Z=A.map(R.getTreePath(),function(W){return e.model.getIdentity(W)}).join("/"),X;for(X in e._openedNodes)X.substr(0,Z.length)==Z&&delete e._openedNodes[X];e._saveExpandedNodes()}e.lastFocusedChild&&!u.isDescendant(e.lastFocusedChild.domNode,e.domNode)&&delete e.lastFocusedChild;S&&!u.isDescendant(S.domNode,e.domNode)&&e.focus();R.destroyRecursive()}})});this.state="Loaded";b&&0<b.length?(this.isExpandable=!0,A.forEach(b,function(R){var Z=G.getIdentity(R),X=e._itemNodesMap[Z];
if(X)for(var aa=0;aa<X.length;aa++)if(X[aa]&&!X[aa].getParent()){var W=X[aa];W.set("indent",this.indent+1);break}W||(W=this.tree._createTreeNode({item:R,tree:e,isExpandable:G.mayHaveChildren(R),label:e.getLabel(R),labelType:e.model&&e.model.labelType||"text",tooltip:e.getTooltip(R),ownerDocument:e.ownerDocument,dir:e.dir,lang:e.lang,textDir:e.textDir,indent:this.indent+1}),X?X.push(W):e._itemNodesMap[Z]=[W]);this.addChild(W);(this.tree.autoExpand||this.tree._state(W))&&J.push(e._expandNode(W))},this),
A.forEach(this.getChildren(),function(R){R._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);b=f(J);this.tree._startPaint(b);return w(b)},getTreePath:function(){for(var b=this,e=[];b&&b!==this.tree.rootNode;)e.unshift(b.item),b=b.getParent();e.unshift(this.tree.rootNode.item);return e},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(b){this.inherited(arguments);var e=this.getChildren();0==e.length&&
(this.isExpandable=!1,this.collapse());A.forEach(e,function(G){G._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(b){this.labelNode.setAttribute("aria-selected",b?"true":"false");y.toggle(this.rowNode,"dijitTreeRowSelected",b)},focus:function(){D.focus(this.focusNode)}});q("dojo-bidi")&&P.extend({_setTextDirAttr:function(b){!b||this.textDir==b&&this._created||(this._set("textDir",b),this.applyTextDir(this.labelNode),A.forEach(this.getChildren(),
function(e){e.set("textDir",b)},this))}});var L=H("dijit.Tree",[Q,T,V,M],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:m,persist:!1,autoExpand:!1,dndController:l,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,
checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(b,e){B.publish(this.id,k.mixin({tree:this,event:b},e||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new g;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var b=
this;this.own(E(this.containerNode,E.selector(".dijitTreeNode",I.enter),function(J){b._onNodeMouseEnter(O.byNode(this),J)}),E(this.containerNode,E.selector(".dijitTreeNode",I.leave),function(J){b._onNodeMouseLeave(O.byNode(this),J)}),E(this.containerNode,E.selector(".dijitTreeRow",C.press),function(J){b._onNodePress(O.getEnclosingWidget(this),J)}),E(this.containerNode,E.selector(".dijitTreeRow",C),function(J){b._onClick(O.getEnclosingWidget(this),J)}),E(this.containerNode,E.selector(".dijitTreeRow",
"dblclick"),function(J){b._onDblClick(O.getEnclosingWidget(this),J)}));this.model||this._store2model();this.own(N.after(this.model,"onChange",k.hitch(this,"_onItemChange"),!0),N.after(this.model,"onChildrenChange",k.hitch(this,"_onItemChildrenChange"),!0),N.after(this.model,"onDelete",k.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){k.isString(this.dndController)&&(this.dndController=k.getObject(this.dndController));for(var e={},G=0;G<this.dndParams.length;G++)this[this.dndParams[G]]&&
(e[this.dndParams[G]]=this[this.dndParams[G]]);this.dndController=new this.dndController(this,e)}this._load();this.onLoadDeferred=w(this.pendingCommandsPromise);this.onLoadDeferred.then(k.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;t.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var b={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(b.mayHaveChildren=
k.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&(b.getChildren=k.hitch(this,function(e,G,J){this.getItemChildren(this._v10Compat&&e===this.model.root?null:e,G,J)}));this.model=new a(b);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(k.hitch(this,function(b){var e=this.rootNode=this.tree._createTreeNode({item:b,tree:this,isExpandable:!0,label:this.label||this.getLabel(b),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?
0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(e.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(e.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(e.containerNode.setAttribute("aria-labelledby",
this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),e.labelNode.setAttribute("role","presentation"),e.labelNode.removeAttribute("aria-selected"),e.containerNode.setAttribute("role","tree"),e.containerNode.setAttribute("aria-expanded","true"),e.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(e.domNode);b=this.model.getIdentity(b);this._itemNodesMap[b]?this._itemNodesMap[b].push(e):this._itemNodesMap[b]=[e];e._updateLayout();
this._expandNode(e).then(k.hitch(this,function(){this._destroyed||(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),k.hitch(this,function(b){console.error(this,": error loading root: ",b)}))},getNodesByItem:function(b){if(!b)return[];b=k.isString(b)?b:this.model.getIdentity(b);return[].concat(this._itemNodesMap[b])},_setSelectedItemAttr:function(b){this.set("selectedItems",[b])},_setSelectedItemsAttr:function(b){var e=this;return this.pendingCommandsPromise=
this.pendingCommandsPromise.always(k.hitch(this,function(){var G=A.map(b,function(S){return!S||k.isString(S)?S:e.model.getIdentity(S)}),J=[];A.forEach(G,function(S){J=J.concat(e._itemNodesMap[S]||[])});this.set("selectedNodes",J)}))},_setPathAttr:function(b){return b.length?w(this.set("paths",[b]).then(function(e){return e[0]})):w(this.set("paths",[]).then(function(e){return e[0]}))},_setPathsAttr:function(b){function e(J,S){var da=J.shift(),R=A.filter(S,function(Z){return Z.getIdentity()==da})[0];
if(R)return J.length?G._expandNode(R).then(function(){return e(J,R.getChildren())}):R;throw new L.PathError("Could not expand path at "+da);}var G=this;return w(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return f(A.map(b,function(J){J=A.map(J,function(S){return S&&k.isObject(S)?G.model.getIdentity(S):S});if(J.length)return e(J,[G.rootNode]);throw new L.PathError("Empty path");}))}).then(function(J){G.set("selectedNodes",J);return G.paths}))},_setSelectedNodeAttr:function(b){this.set("selectedNodes",
[b])},_setSelectedNodesAttr:function(b){this.dndController.setSelection(b)},expandAll:function(){function b(G){return e._expandNode(G).then(function(){var J=A.filter(G.getChildren()||[],function(S){return S.isExpandable});return f(A.map(J,b))})}var e=this;return w(b(this.rootNode))},collapseAll:function(){function b(G){var J=A.filter(G.getChildren()||[],function(S){return S.isExpandable});J=f(A.map(J,b));return!G.isExpanded||G==e.rootNode&&!e.showRoot?J:J.then(function(){return e._collapseNode(G)})}
var e=this;return w(b(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(b){return this.model.getLabel(b)},getIconClass:function(b,e){return!b||this.model.mayHaveChildren(b)?e?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(b,e){(b=this._getNext(e))&&b.isTreeNode&&this.focusNode(b)},
_onUpArrow:function(b,e){if(b=e.getPreviousSibling())for(e=b;e.isExpandable&&e.isExpanded&&e.hasChildren();)e=e.getChildren(),e=e[e.length-1];else if(b=e.getParent(),this.showRoot||b!==this.rootNode)e=b;e&&e.isTreeNode&&this.focusNode(e)},_onRightArrow:function(b,e){e.isExpandable&&!e.isExpanded?this._expandNode(e):e.hasChildren()&&(e=e.getChildren()[0])&&e.isTreeNode&&this.focusNode(e)},_onLeftArrow:function(b,e){e.isExpandable&&e.isExpanded?this._collapseNode(e):(b=e.getParent())&&b.isTreeNode&&
(this.showRoot||b!==this.rootNode)&&this.focusNode(b)},focusLastChild:function(){var b=this._getLast();b&&b.isTreeNode&&this.focusNode(b)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var b=this.rootNode;b.isExpanded;){var e=b.getChildren();if(!e.length)break;b=e[e.length-1]}return b},_getNext:function(b){if(b.isExpandable&&b.isExpanded&&b.hasChildren())return b.getChildren()[0];for(;b&&b.isTreeNode;){var e=b.getNextSibling();if(e)return e;
b=b.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(b,e){return u.isDescendant(b,e.expandoNode)||u.isDescendant(b,e.expandoNodeText)},_onNodePress:function(b,e){this.focusNode(b)},__click:function(b,e,G,J){var S=this.isExpandoNode(e.target,b);b.isExpandable&&(G||S)?this._onExpandoClick({node:b}):(this._publish("execute",{item:b.item,node:b,evt:e}),this[J](b.item,b,e),this.focusNode(b));e.stopPropagation();e.preventDefault()},_onClick:function(b,e){this.__click(b,e,this.openOnClick,
"onClick")},_onDblClick:function(b,e){this.__click(b,e,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(b){b=b.node;this.focusNode(b);b.isExpanded?this._collapseNode(b):this._expandNode(b)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(b){t.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(b)},_getRootOrFirstNode:function(){t.deprecated(this.declaredClass+
"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(b){b._expandNodeDeferred&&delete b._expandNodeDeferred;if("Loading"!=b.state&&b.isExpanded){var e=b.collapse();this.onClose(b.item,b);this._state(b,!1);this._startPaint(e);return e}},_expandNode:function(b){if(b._expandNodeDeferred)return b._expandNodeDeferred;var e=this.model,G=b.item,J=this;b._loadDeferred||(b.markProcessing(),b._loadDeferred=new g,e.getChildren(G,function(S){b.unmarkProcessing();
b.setChildItems(S).then(function(){b._loadDeferred.resolve(S)})},function(S){console.error(J,": error loading "+b.label+" children: ",S);b._loadDeferred.reject(S)}));e=b._loadDeferred.then(k.hitch(this,function(){var S=b.expand();this.onOpen(b.item,b);this._state(b,!0);return S}));this._startPaint(e);return e},focusNode:function(b){for(var e=[],G=this.domNode;G&&G.tagName&&"IFRAME"!==G.tagName.toUpperCase();G=G.parentNode)e.push({domNode:G.contentWindow||G,scrollLeft:G.scrollLeft||0,scrollTop:G.scrollTop||
0});this.focusChild(b);this.defer(function(){for(var J=0,S=e.length;J<S;J++)e[J].domNode.scrollLeft=e[J].scrollLeft,e[J].domNode.scrollTop=e[J].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(b){var e=this.model.getIdentity(b);if(e=this._itemNodesMap[e]){var G=this.getLabel(b),J=this.getTooltip(b);A.forEach(e,function(S){S.set({item:b,label:G,tooltip:J});S._updateItemClasses(b)})}},_onItemChildrenChange:function(b,e){b=this.model.getIdentity(b);
(b=this._itemNodesMap[b])&&A.forEach(b,function(G){G.setChildItems(e)})},_onItemDelete:function(b){b=this.model.getIdentity(b);var e=this._itemNodesMap[b];e&&(A.forEach(e,function(G){this.dndController.removeTreeNode(G);var J=G.getParent();J&&J.removeChild(G);this.lastFocusedChild&&!u.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!u.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();G.destroyRecursive()},this),delete this._itemNodesMap[b])},
_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var b=K(this.cookieName);b&&A.forEach(b.split(","),function(e){this._openedNodes[e]=!0},this)}},_state:function(b,e){if(!this.persist)return!1;var G=A.map(b.getTreePath(),function(J){return this.model.getIdentity(J)},this).join("/");if(1===arguments.length)return this._openedNodes[G];e?this._openedNodes[G]=!0:delete this._openedNodes[G];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var b=
[],e;for(e in this._openedNodes)b.push(e);K(this.cookieName,b.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!k.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(b){b&&h.setMarginBox(this.domNode,b);this._nodePixelIndent=h.position(this.tree.indentDetector).w||
this._nodePixelIndent;this.expandChildrenDeferred.then(k.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(b){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var e=k.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});
v(b,e,e)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(b){return new P(b)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});q("dojo-bidi")&&L.extend({_setTextDirAttr:function(b){b&&this.textDir!=b&&(this._set("textDir",
b),this.rootNode.set("textDir",b))}});L.PathError=F("TreePathError");L._TreeNode=P;return L})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(A,N,K,H){return K("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(g){H.mixin(this,g);this.connects=[];g=this.store;if(!g.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");
g.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([N.after(g,"onNew",H.hitch(this,"onNewItem"),!0),N.after(g,"onDelete",H.hitch(this,"onDeleteItem"),!0),N.after(g,"onSet",H.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var g;g=this.connects.pop();)g.remove()},getRoot:function(g,f){this.root?g(this.root):this.store.fetch({query:this.query,onComplete:H.hitch(this,function(u){if(1!=u.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+u.length+
" items, but must return exactly one");this.root=u[0];g(this.root)}),onError:f})},mayHaveChildren:function(g){return A.some(this.childrenAttrs,function(f){return this.store.hasAttribute(g,f)},this)},getChildren:function(g,f,u){var y=this.store;if(y.isItemLoaded(g)){for(var h=[],r=0;r<this.childrenAttrs.length;r++){var F=y.getValues(g,this.childrenAttrs[r]);h=h.concat(F)}var n=0;this.deferItemLoadingUntilExpand||A.forEach(h,function(t){y.isItemLoaded(t)||n++});0==n?f(h):A.forEach(h,function(t,z){y.isItemLoaded(t)||
y.loadItem({item:t,onItem:function(k){h[z]=k;0==--n&&f(h)},onError:u})})}else{var q=H.hitch(this,arguments.callee);y.loadItem({item:g,onItem:function(t){q(t,f,u)},onError:u})}},isItem:function(g){return this.store.isItem(g)},fetchItemByIdentity:function(g){this.store.fetchItemByIdentity(g)},getIdentity:function(g){return this.store.getIdentity(g)},getLabel:function(g){return this.labelAttr?this.store.getValue(g,this.labelAttr):this.store.getLabel(g)},newItem:function(g,f,u){var y={parent:f,attribute:this.childrenAttrs[0]},
h;this.newItemIdAttr&&g[this.newItemIdAttr]?this.fetchItemByIdentity({identity:g[this.newItemIdAttr],scope:this,onItem:function(r){r?this.pasteItem(r,null,f,!0,u):(h=this.store.newItem(g,y))&&void 0!=u&&this.pasteItem(h,f,f,!1,u)}}):(h=this.store.newItem(g,y))&&void 0!=u&&this.pasteItem(h,f,f,!1,u)},pasteItem:function(g,f,u,y,h){var r=this.store,F=this.childrenAttrs[0];f&&A.forEach(this.childrenAttrs,function(q){if(r.containsValue(f,q,g)){if(!y){var t=A.filter(r.getValues(f,q),function(z){return z!=
g});r.setValues(f,q,t)}F=q}});if(u)if("number"==typeof h){var n=r.getValues(u,F).slice();n.splice(h,0,g);r.setValues(u,F,n)}else r.setValues(u,F,r.getValues(u,F).concat(g))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(g,f){f&&this.getChildren(f.item,H.hitch(this,function(u){this.onChildrenChange(f.item,u)}))},onDeleteItem:function(g){this.onDelete(g)},onSetItem:function(g,f){if(-1!=A.indexOf(this.childrenAttrs,f))this.getChildren(g,H.hitch(this,function(u){this.onChildrenChange(g,
u)}));else this.onChange(g)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(A,N,K,H,g){return N("dijit.tree.ForestStoreModel",g,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(f){this.root={store:this,root:!0,id:f.rootId,label:f.rootLabel,children:f.rootChildren}},mayHaveChildren:function(f){return f===this.root||this.inherited(arguments)},getChildren:function(f,u,y){f===
this.root?this.root.children?u(this.root.children):this.store.fetch({query:this.query,onComplete:H.hitch(this,function(h){this.root.children=h;u(h)}),onError:y}):this.inherited(arguments)},isItem:function(f){return f===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(f){if(f.identity==this.root.id){var u=f.scope||K.global;f.onItem&&f.onItem.call(u,this.root)}else this.inherited(arguments)},getIdentity:function(f){return f===this.root?this.root.id:this.inherited(arguments)},getLabel:function(f){return f===
this.root?this.root.label:this.inherited(arguments)},newItem:function(f,u,y){return u===this.root?(this.onNewRootItem(f),this.store.newItem(f)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(f,u,y,h,r){if(u===this.root&&!h)this.onLeaveRoot(f);this.inherited(arguments,[f,u===this.root?null:u,y===this.root?null:y,h,r]);if(y===this.root)this.onAddToRoot(f)},onAddToRoot:function(f){console.log(this,": item ",f," added to root")},onLeaveRoot:function(f){console.log(this,": item ",
f," removed from root")},_requeryTop:function(){var f=this.root.children||[];this.store.fetch({query:this.query,onComplete:H.hitch(this,function(u){this.root.children=u;if(f.length!=u.length||A.some(f,function(y,h){return u[h]!=y}))this.onChildrenChange(this.root,u)})})},onNewItem:function(f,u){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(f){-1!=A.indexOf(this.root.children,f)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(f,u,y,h){this._requeryTop();this.inherited(arguments)}})})},
"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(A,N,K,H,g,f,u,y,h,r,F){return N("dijit.tree._dndSelector",F,{constructor:function(){this.selection={};this.anchor=null;this.events.push(y(this.tree.domNode,h.press,H.hitch(this,"onMouseDown")),y(this.tree.domNode,h.release,H.hitch(this,"onMouseUp")),y(this.tree.domNode,h.move,H.hitch(this,
"onMouseMove")),y(this.tree.domNode,r.press,H.hitch(this,"onClickPress")),y(this.tree.domNode,r.release,H.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var n=[],q=this.selection,t;for(t in q)n.push(q[t]);return n},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(n,q){this.setSelection(this.getSelectedTreeNodes().concat([n]));q&&(this.anchor=n);return n},removeTreeNode:function(n){var q=
A.filter(this.getSelectedTreeNodes(),function(t){return!f.isDescendant(t.domNode,n.domNode)});this.setSelection(q);return n},isTreeNodeSelected:function(n){return n.id&&!!this.selection[n.id]},setSelection:function(n){var q=this.getSelectedTreeNodes();A.forEach(this._setDifference(q,n),H.hitch(this,function(t){t.setSelected(!1);this.anchor==t&&delete this.anchor;delete this.selection[t.id]}));A.forEach(this._setDifference(n,q),H.hitch(this,function(t){t.setSelected(!0);this.selection[t.id]=t}));this._updateSelectionProperties()},
_setDifference:function(n,q){A.forEach(q,function(t){t.__exclude__=!0});n=A.filter(n,function(t){return!t.__exclude__});A.forEach(q,function(t){delete t.__exclude__});return n},_updateSelectionProperties:function(){var n=this.getSelectedTreeNodes(),q=[],t=[];A.forEach(n,function(z){var k=z.getTreePath();t.push(z);q.push(k)},this);n=A.map(t,function(z){return z.item});this.tree._set("paths",q);this.tree._set("path",q[0]||[]);this.tree._set("selectedNodes",t);this.tree._set("selectedNode",t[0]||null);
this.tree._set("selectedItems",n);this.tree._set("selectedItem",n[0]||null)},onClickPress:function(n){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(n.target,this.current))){"mousedown"==n.type&&u.isLeft(n)&&n.preventDefault();var q="keydown"==n.type?this.tree.focusedChild:this.current;if(q){var t=g.getCopyKeyState(n),z=q.id;this.singular||n.shiftKey||!this.selection[z]?(this._doDeselect=!1,this.userSelect(q,t,n.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(n){this._doDeselect&&
(this._doDeselect=!1,this.userSelect("keyup"==n.type?this.tree.focusedChild:this.current,g.getCopyKeyState(n),n.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(n,q){if(n===q)return 0;if("sourceIndex"in document.documentElement)return n.sourceIndex-q.sourceIndex;if("compareDocumentPosition"in document.documentElement)return n.compareDocumentPosition(q)&2?1:-1;if(document.createRange){var t=doc.createRange();t.setStartBefore(n);
n=doc.createRange();n.setStartBefore(q);return t.compareBoundaryPoints(t.END_TO_END,n)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(n,q,t){if(this.singular)this.anchor==n&&q?this.selectNone():(this.setSelection([n]),this.anchor=n);else if(t&&this.anchor){q=this._compareNodes(this.anchor.rowNode,n.rowNode);t=this.anchor;0>q?q=t:(q=n,n=t);for(t=[];q!=n;)t.push(q),q=this.tree._getNext(q);t.push(n);this.setSelection(t)}else this.selection[n.id]&&
q?this.removeTreeNode(n):q?this.addTreeNode(n,!0):(this.setSelection([n]),this.anchor=n)},getItem:function(n){return{data:this.selection[n],type:["treeNode"]}},forInSelectedItems:function(n,q){q=q||K.global;for(var t in this.selection)n.call(q,this.getItem(t),t,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(A,N,K,H,g,f){return N("dijit.tree._dndContainer",null,{constructor:function(u,y){this.tree=
u;this.node=u.domNode;H.mixin(this,y);this.containerState="";K.add(this.node,"dojoDndContainer");this.events=[g(this.node,f.enter,H.hitch(this,"onOverEvent")),g(this.node,f.leave,H.hitch(this,"onOutEvent")),A.after(this.tree,"_onNodeMouseEnter",H.hitch(this,"onMouseOver"),!0),A.after(this.tree,"_onNodeMouseLeave",H.hitch(this,"onMouseOut"),!0),g(this.node,"dragstart, selectstart",function(h){h.preventDefault()})]},destroy:function(){for(var u;u=this.events.pop();)u.remove();this.node=this.parent=
null},onMouseOver:function(u){this.current=u},onMouseOut:function(){this.current=null},_changeState:function(u,y){var h="dojoDnd"+u;u=u.toLowerCase()+"State";K.replace(this.node,h+y,h+this[u]);this[u]=y},_addItemClass:function(u,y){K.add(u,"dojoDndItem"+y)},_removeItemClass:function(u,y){K.remove(u,"dojoDndItem"+y)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"widgets/InfoSummary/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/LayerChooserFromMapWithDropbox.html":'\x3cdiv\x3e\r\n\x3ctable role\x3d"listbox" aria-haspopup\x3d"true" data-dojo-attach-point\x3d"dropDownBtn" data-dojo-attach-event\x3d"onclick: _onDropDownClick,onkeydown: _onDropDownKeydown"\r\n  tabindex\x3d"0" title\x3d"${nls.customSelectLayer}" aria-label\x3d"${nls.customSelectLayer}"\x3e\r\n    \x3ccaption class\x3d"screen-readers-only-no-position"\x3e${nls.customSelectLayer}\x3c/caption\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"drop-select jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\x3e\r\n            \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/InfoSummary/setting/MySymbolPicker.html":'\x3cdiv style\x3d"width: 100%;"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"tabParent"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"symbolPickerContainer" class\x3d"symbolPickerContainer"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"div_symbolOptionsContainer" class\x3d"symbolOptionsContainer"\x3e\r\n        \x3cdiv class\x3d"label iconOptionsText"\x3e\r\n          ${nls.symbolOptionsText}\r\n        \x3c/div\x3e\r\n        \x3chr /\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"div_symbolOptions" class\x3d"symbolOptions"\x3e\r\n          \x3c!--Symbol Options--\x3e\r\n          \x3cdiv class\x3d"jimu-r-row padTop10"\r\n               data-dojo-attach-point\x3d"grpSymbolOptions"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"div_rdoLayerSym" class\x3d"height30"\x3e\r\n              \x3cinput name\x3d"a" data-dojo-type\x3d"dijit/form/RadioButton"\r\n                     class\x3d"jimu-radio-btn"\r\n                     data-dojo-attach-point\x3d"rdoLayerSym"\r\n                     title\x3d"${nls.rdoLayer}"\r\n                     id\x3d"rdo-layer"/\x3e\r\n              \x3clabel class\x3d"label" for\x3d"rdo-layer"\x3e${nls.rdoLayer}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"jimu-r-row symPick marginLR20 layer-sym-container" data-dojo-attach-point\x3d"layerSym"\x3e \x3c/div\x3e\r\n          \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpSymbolOptions"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"div_rdoEsriSym" class\x3d"height30"\x3e\r\n              \x3cinput name\x3d"a" id\x3d"rdo-esri" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"jimu-radio-btn" data-dojo-attach-point\x3d"rdoEsriSym" title\x3d"${nls.rdoEsri}" /\x3e\r\n              \x3clabel class\x3d"label" for\x3d"rdo-esri"\x3e${nls.rdoEsri}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"symbolPicker" data-dojo-type\x3d"jimu/dijit/SymbolPicker" class\x3d"jimu-r-row symPick marginLR20"\x3e\x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"parent_div_uploadCustomSymbol"\x3e\r\n            \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpSymbolOptions"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"div_rdoCustomSym" class\x3d"rdoCustomSym"\x3e\r\n                \x3cinput name\x3d"a" id\x3d"rdo-custom" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"jimu-radio-btn" data-dojo-attach-point\x3d"rdoCustomSym" title\x3d"${nls.rdoCustom}" /\x3e\r\n                \x3clabel class\x3d"label" for\x3d"rdo-custom"\x3e${nls.rdoCustom}\x3c/label\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"customSymbolDIV" class\x3d"jimu-r-row padTop10 sHeight marginLR20"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"uploadCustomSymbol" class\x3d"uploadCustom"\x3e\x3c/div\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"customSymbolPlaceholder" class\x3d"customPlaceholder"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3c!--Clustering Options--\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"parent_div_clusterOptions" class\x3d"clusterOptions"\x3e\r\n            \x3chr class\x3d"w" /\x3e\r\n            \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpClusterOptions"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"div_chkCluster" class\x3d"padTop20"\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv data-dojo-attach-point\x3d"clusterPickerContainer" class\x3d"jimu-r-row marginLR22 grpClusterOptions"\x3e\r\n              \x3cdiv class\x3d"jimu-float-leading"\x3e${nls.defineClusterSymbol}:\x3c/div\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"clusterPicker" data-dojo-type\x3d"jimu/dijit/SymbolPicker" class\x3d"jimu-float-trailing colorPick"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"jimu-r-row grpClusterOptions marginLR22" data-dojo-attach-point\x3d"grpClusterOptions"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"div_chkGroupCluster"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-r-row grpClusterOptions" data-dojo-attach-point\x3d"featureFont" style\x3d"display: none; margin-left: 45px; margin-right: 45px;"\x3e\r\n              \x3cdiv class\x3d"jimu-float-leading"\x3e${nls.defineClusterFont}:\x3c/div\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"colorPicker" data-dojo-type\x3d"jimu/dijit/ColorPicker" data-dojo-props\x3d\'color:"${_highLightColor}"\' class\x3d"marginLR30 colorPick2 jimu-float-trailing"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"label iconOptionsText padTop20" data-dojo-attach-point\x3d"iconOptionsTextLabel"\x3e\r\n          ${nls.iconOptionsText}\r\n        \x3c/div\x3e\r\n        \x3chr /\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"div_iconOptions" class\x3d"iconOptions"\x3e\r\n          \x3c!--Main Panel and cluster center Icon Options--\x3e\r\n          \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpIconOptions"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"div_rdoLayerIcon"\x3e\r\n              \x3cinput name\x3d"b" id\x3d"rdo-layer-icon" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"jimu-radio-btn" data-dojo-attach-point\x3d"rdoLayerIcon" title\x3d"${nls.rdoLayerIcon}" /\x3e\r\n              \x3clabel class\x3d"label" for\x3d"rdo-layer-icon" data-dojo-attach-point\x3d"rdoLayerIconLabel"\x3e${nls.rdoLayerIcon}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpCustomIconOptions"\x3e\r\n            \x3cdiv class\x3d"rdoCustomSym" data-dojo-attach-point\x3d"div_rdoCustomIcon"\x3e\r\n              \x3cinput name\x3d"b" id\x3d"rdo-custom-icon" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"jimu-radio-btn" data-dojo-attach-point\x3d"rdoCustomIcon" title\x3d"${nls.rdoCustomIcon}" /\x3e\r\n              \x3clabel class\x3d"label" for\x3d"rdo-custom-icon" data-dojo-attach-point\x3d"rdoCustomIconLabel"\x3e${nls.rdoCustomIcon}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"jimu-r-row padTop10 sHeight marginLR30"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"uploadCustomIcon" class\x3d"uploadCustom"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"customIconPlaceholder" class\x3d"customPlaceholder"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"panelFeatureDisplayContainer" class\x3d"panelFeatureContainer"\x3e\r\n      \x3cdiv class\x3d"label iconOptionsText padTop10" data-dojo-attach-point\x3d"featureOptionsTextLabel"\x3e\r\n        ${nls.featureOptionsText}\r\n      \x3c/div\x3e\r\n      \x3chr /\x3e\r\n      \x3cdiv class\x3d"btn-add-section enable" data-dojo-attach-point\x3d"btnAddField"\x3e\r\n        \x3cspan class\x3d"btn-add-icon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"btn-add-label"\x3e${nls.addField}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"fieldOptions" class\x3d"fieldOptions"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSortOptionsWrapper"\x3e\r\n        \x3cdiv class\x3d"label iconOptionsText padTop10"\x3e\r\n          ${nls.sortLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-r-row esriCTDisplayInlineFlex"\x3e\r\n          \x3cdiv class\x3d"rdoGroupField esriCTMarginRight20"\x3e\r\n            \x3cinput name\x3d"layerOptionSort" id\x3d"rdo-layer-field-asc" data-dojo-type\x3d"dijit/form/RadioButton"\r\n              class\x3d"jimu-radio-btn" data-dojo-attach-point\x3d"layerOptionsAscRadioBtn" title\x3d"${nls.ascRadioBtnLabel}"\r\n              checked /\x3e\r\n            \x3clabel class\x3d"esriCTRadioLabel" for\x3d"rdo-layer-field-asc"\x3e${nls.ascRadioBtnLabel}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"rdoGroupField"\x3e\r\n            \x3cinput name\x3d"layerOptionSort" id\x3d"rdo-layer-field-desc" data-dojo-type\x3d"dijit/form/RadioButton"\r\n              class\x3d"jimu-radio-btn" data-dojo-attach-point\x3d"layerOptionsDescRadioBtn" title\x3d"${nls.descRadioBtnLabel}" /\x3e\r\n            \x3clabel class\x3d"esriCTRadioLabel" for\x3d"rdo-layer-field-desc"\x3e${nls.descRadioBtnLabel}\x3c/label\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"label iconOptionsText padTop20" data-dojo-attach-point\x3d"groupOptionsTextLabel"\x3e\r\n        ${nls.groupOptionsText}\r\n      \x3c/div\x3e\r\n      \x3chr /\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"groupOptions" class\x3d"groupOptions"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"div_chkGroup"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"groupByOptions" class\x3d"groupByOptions"\x3e\r\n          \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpField"\x3e\r\n            \x3cdiv class\x3d"rdoGroupField" data-dojo-attach-point\x3d"div_rdoGroupField"\x3e\r\n              \x3cinput name\x3d"c" id\x3d"rdo-group-field" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"jimu-radio-btn" data-dojo-attach-point\x3d"rdoGroupField" title\x3d"${nls.rdoGroupByField}" /\x3e\r\n              \x3clabel class\x3d"label" for\x3d"rdo-group-field" data-dojo-attach-point\x3d"rdoGroupFieldLabel"\x3e${nls.rdoGroupByField}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"groupFieldOptions" class\x3d"groupFieldOptions"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3cdiv class\x3d"jimu-r-row padTop10" data-dojo-attach-point\x3d"grpRenderer"\x3e\r\n            \x3cdiv class\x3d"rdoGroupField" data-dojo-attach-point\x3d"div_rdoGroupRenderer"\x3e\r\n              \x3cinput name\x3d"c" id\x3d"rdo-group-render" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"jimu-radio-btn" data-dojo-attach-point\x3d"rdoGroupRenderer" title\x3d"${nls.rdoGroupByRenderer}" /\x3e\r\n              \x3clabel class\x3d"label" for\x3d"rdo-group-render" data-dojo-attach-point\x3d"rdoGroupRendererLabel"\x3e${nls.rdoGroupByRenderer}\x3c/label\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv\x3e\r\n            \x3cdiv class\x3d"label iconOptionsText padTop10"\x3e\r\n              ${nls.sortLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-r-row esriCTDisplayInlineFlex"\x3e\r\n              \x3cdiv class\x3d"rdoGroupField esriCTMarginRight20"\x3e\r\n                \x3cinput name\x3d"groupSort" id\x3d"rdo-group-field-asc" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"jimu-radio-btn"\r\n                  data-dojo-attach-point\x3d"groupOptionsAscRadioBtn" title\x3d"${nls.ascRadioBtnLabel}" checked /\x3e\r\n                \x3clabel class\x3d"esriCTRadioLabel" for\x3d"rdo-group-field-asc"\x3e${nls.ascRadioBtnLabel}\x3c/label\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"rdoGroupField"\x3e\r\n                \x3cinput name\x3d"groupSort" id\x3d"rdo-group-field-desc" data-dojo-type\x3d"dijit/form/RadioButton" class\x3d"jimu-radio-btn"\r\n                  data-dojo-attach-point\x3d"groupOptionsDescRadioBtn" title\x3d"${nls.descRadioBtnLabel}" /\x3e\r\n                \x3clabel class\x3d"esriCTRadioLabel" for\x3d"rdo-group-field-desc"\x3e${nls.descRadioBtnLabel}\x3c/label\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Footer--\x3e\r\n  \x3cdiv class\x3d"footer padTop20"\x3e\r\n    \x3cdiv class\x3d"jimu-btn ok" data-dojo-attach-point\x3d"btnOk"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"jimu-btn cancel" data-dojo-attach-point\x3d"btnCancel"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/InfoSummary/setting/Setting.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"jimu-r-row"\x3e\r\n    \x3cdiv class\x3d"btn-add-section enable" data-dojo-attach-point\x3d"btnAddLayer"\x3e\r\n      \x3cspan class\x3d"btn-add-icon"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"btn-add-label"\x3e${nls.addLayer}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"layerTable" class\x3d"padBottom20"/\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cfieldset class\x3d"fieldSet optionsFieldSet"\x3e\r\n    \x3clegend class\x3d"fieldSetLegend"\x3e${nls.optionsText}\x3c/legend\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"optionsContainer"\x3e\r\n      \x3cdiv\x3e\r\n        \x3cdiv class\x3d"refreshOptions refreshOff" data-dojo-attach-point\x3d"refreshOptions"\x3e\r\n          \x3cdiv class\x3d"refreshIntervalTitle" title\x3d"${nls.refreshIntervalTitle}"\x3e\r\n            \x3cspan style\x3d"padding-right: 10px;"\x3e${nls.refreshIntervalInstruction}\x3c/span\x3e\r\n            \x3cinput type\x3d"text" name\x3d"refreshInterval"\r\n                   placeholder\x3d"${nls.refreshInterval}"\r\n                   data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                   data-dojo-props\x3d"regExp:\'[\\\\d]+\', _hasBeenBlurred:true, trim:true"\r\n                   data-dojo-attach-point\x3d"refreshInterval"\r\n                   data-dojo-attach-event\x3d"onKeyUp:_updateOK"\r\n                   class\x3d"refreshInterval" required\x3d"true"\x3e\r\n            \x3cspan style\x3d"padding-left: 10px;"\x3e${nls.refreshUnit}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"displayOptionsContainer" data-dojo-attach-point\x3d"displayOptionsContainer"\x3e\r\n        \x3cdiv title\x3d"${nls.panelCountOptionHelp}" data-dojo-attach-point\x3d"div_panelCountOptions"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"padTop20" title\x3d"${nls.panelIconOptionHelp}" data-dojo-attach-point\x3d"div_panelIconOptions"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"padTop20"\x3e\r\n          \x3cdiv class\x3d"mainPanelPreviewContainerOff" data-dojo-attach-point\x3d"mainPanelPreviewContainer"\x3e\r\n            \x3cdiv class\x3d"leftContainer"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"mainPanelPreviewButton" class\x3d"mainPanelPreviewButton"\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"instruction2"\x3e\r\n                ${nls.mainPanelText}\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"rightContainer"\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"mainPanelPreview" class\x3d"bg rounded mainPanelPreview"\x3e\r\n                \x3cdiv class\x3d"panelContent bg"\x3e\r\n                  \x3cdiv class\x3d"page"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"panelMainIcon"\x3e\x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3cinput type\x3d"text" name\x3d"mainPanelText"\r\n                     placeholder\x3d"${nls.mainPanelTextPlaceholder}"\r\n                     data-dojo-type\x3d"dijit/form/TextBox"\r\n                     data-dojo-props\x3d"trim:true"\r\n                     data-dojo-attach-point\x3d"mainPanelText"\r\n                     class\x3d"mainPanelText"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv\x3e\r\n          \x3cdiv title\x3d"${nls.expandListHelp}" data-dojo-attach-point\x3d"div_expandListOptions"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"padTop20"\x3e\r\n          \x3cdiv title\x3d"${nls.showAllFeaturesHelp}" data-dojo-attach-point\x3d"div_showAllFeaturesOptions"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"hidePanelContainer padTop20"\x3e\r\n          \x3cdiv title\x3d"${nls.hidePanelHelp}"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"div_hidePanelOptions"\x3e\r\n              \x3c!-- \x3cinput data-dojo-attach-point\x3d"hidePanelOptions" data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\r\n              \x3cspan class\x3d"label"\x3e ${nls.hidePanel}\x3c/span\x3e --\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"padTop10 help-off" data-dojo-attach-point\x3d"hidePanelHelpText"\x3e\r\n              \x3cspan class\x3d"label note-help"\x3e ${nls.continuousRefreshHelp}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"padTop20"\x3e\r\n          \x3cdiv title\x3d"${nls.displayClusterLayer}" data-dojo-attach-point\x3d"div_displayClusterLayerOptions"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/InfoSummary/setting/css/style.css":".jimu-widget-InfoSummary-setting {width: 100%; height: 100%;}.jimu-widget-InfoSummary-setting .btn-add-section {display: inline-block; overflow: hidden; height: 24px; margin-left: 1px; margin-bottom: 3px; cursor: pointer; font-size: 13px; color: #538ec8; padding-left: 5px; padding-right: 5px;}.jimu-widget-InfoSummary-setting .btn-add-section-disabled {display: inline-block; overflow: hidden; height: 24px; margin-left: 1px; margin-bottom: 3px; cursor: default; font-size: 13px; color: #a0acbf; padding-left: 5px; padding-right: 5px;}.jimu-widget-InfoSummary-setting .jimu-icon-edit {margin-left: 5px; margin-top: 5px;}.jimu-rtl .jimu-widget-InfoSummary-setting .jimu-icon-edit {margin-right: 5px; margin-top: 5px;}.jimu-widget-InfoSummary-setting .btn-add-section .btn-add-icon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-InfoSummary-setting .btn-add-section-disabled .btn-add-icon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top; opacity: .6;}.jimu-widget-InfoSummary-setting .btn-add-section .btn-add-icon:hover {background-image: url(images/add_hover.png);}.jimu-widget-InfoSummary-setting .btn-add-section .btn-add-label {height: 100%; line-height: 24px; margin-left: 7px; text-decoration: underline; display: inline-block; vertical-align: top;}.jimu-widget-InfoSummary-setting .btn-add-section-disabled .btn-add-label {height: 100%; line-height: 24px; margin-left: 7px; text-decoration: underline; display: inline-block; vertical-align: top;}.jimu-widget-InfoSummary-setting .instruction2{padding-top: 140px;}.jimu-widget-InfoSummary-setting .instruction2 span{color: #596679;}.jimu-widget-InfoSummary-setting .panelContent {position: relative; width: 340px; height: 150px;}.jimu-widget-InfoSummary-setting .page {position: relative; width: 340px; height: 150px; display: block; background-color: rgba(0,0,0,0.15);}.jimu-widget-InfoSummary-setting .panelMain {display: block;}.jimu-widget-InfoSummary-setting .hidePanelContainer {height: auto; float: left; display: block; padding-bottom: 20px;}.jimu-rtl .jimu-widget-InfoSummary-setting .hidePanelContainer {height: auto; float: right; display: block; padding-bottom: 20px;}.jimu-widget-InfoSummary-setting .displayOptionsContainer {height: auto; float: left; display: block; padding-left: 10px;}.jimu-rtl .jimu-widget-InfoSummary-setting .displayOptionsContainer {height: auto; float: right; display: block; padding-right: 10px;}.jimu-widget-InfoSummary-setting .marginLR20 {margin-left: 20px; margin-right: 20px;}.jimu-widget-InfoSummary-setting .marginLR22 {margin-left: 22px; margin-right: 22px;}.jimu-widget-InfoSummary-setting .marginLR25 {margin-left: 25px; margin-right: 25px;}.jimu-widget-InfoSummary-setting .marginLR30 {margin-left: 30px; margin-right: 30px;}.jimu-widget-InfoSummary-setting .continuousContainer {float: left; clear: left;}.jimu-rtl .jimu-widget-InfoSummary-setting .continuousContainer {float: right; clear: right;}.jimu-widget-InfoSummary-setting .rightContainer {float: left; position: relative; height: 210px;}.jimu-rtl .jimu-widget-InfoSummary-setting .rightContainer {float: right;}.jimu-widget-InfoSummary-setting .leftContainer {float: left; padding-right: 20px; position: relative; height: 210px;}.jimu-rtl .jimu-widget-InfoSummary-setting .leftContainer {float: right; padding-left: 20px; position: relative;}.jimu-widget-InfoSummary-setting .mainPanelPreviewContainerOn {display: table; padding-bottom: 10px;}.jimu-widget-InfoSummary-setting .mainPanelPreviewContainerOff {display: none;}.jimu-widget-InfoSummary-setting .refreshOff {display: none;}.jimu-widget-InfoSummary-setting .refreshOn {display: block;}.jimu-widget-InfoSummary-setting .uploadCustom {display: block; width: 25px; height: 25px; cursor: pointer; background-image: url(../css/images/edit_default.png); background-repeat: no-repeat;}.jimu-widget-InfoSummary-setting .uploadCustom:hover {display: block; width: 25px; height: 25px; cursor: pointer; background-image: url(../css/images/edit_hover.png); background-repeat: no-repeat;}.jimu-widget-InfoSummary-setting .sHeight{min-height: 25px; display: block; left: 10px;}.jimu-rtl .jimu-widget-InfoSummary-setting .sHeight{min-height: 25px; display: block; right: 10px;}.jimu-widget-InfoSummary-setting .customPlaceholderSettings {display: block; width: 25px; height: 25px; cursor: default;}.jimu-widget-InfoSummary-setting .customPlaceholder {display: block; width: 25px; height: 25px; cursor: pointer; position: absolute; top: 5px; left: 20px;}.jimu-rtl .jimu-widget-InfoSummary-setting .customPlaceholder {display: block; width: 25px; height: 25px; cursor: pointer; position: absolute; top: 5px; right: 20px;}.jimu-widget-InfoSummary-setting .imageDataGFX {height:27px; float: left;}.jimu-rtl .jimu-widget-InfoSummary-setting .imageDataGFX {height:27px; float: right;}.jimu-widget-InfoSummary-setting .imageDataGFX-display {width:27px; height:27px;}.jimu-widget-InfoSummary-setting .imageDataGFX2 {display: block; margin-left: 5px; margin-bottom: 5px; margin-right: 10px;}.jimu-rtl .jimu-widget-InfoSummary-setting .imageDataGFX2 {display: block; margin-right: 5px; margin-bottom: 5px; margin-left: 10px;}.jimu-widget-InfoSummary-setting .imageDataGFXMulti {width:100%; padding-right: 10px;}.jimu-rtl .jimu-widget-InfoSummary-setting .imageDataGFXMulti {width:100%; padding-left: 10px;}.jimu-widget-InfoSummary-setting .displayOptions {padding-left: 40px; padding-right: 0px;}.jimu-rtl .jimu-widget-InfoSummary-setting .displayOptions {padding-right: 40px; padding-left: 0px;}.jimu-widget-InfoSummary-setting .symPickers{float:right; overflow:visible;}.jimu-widget-InfoSummary-setting .symPick {padding-top: 1px; padding-bottom: 1px; border: 0px solid #D7D7D7;}.jimu-widget-InfoSummary-setting .layer-sym-container {overflow-y: auto; max-height: 100px; min-height: 33px; max-width: 340px;}.jimu-widget-InfoSummary-setting .colorPick {border: 0px solid #D7D7D7;}.jimu-widget-InfoSummary-setting .colorPick2 {width: 28px; height: 28px;}.jimu-widget-InfoSummary-setting .symbolPreview {float: left; width: 280px; height: 340px; margin-left: 20px; margin-top:10px; border: 5px dashed gray;}.jimu-widget-InfoSummary-setting .iconPreview {float: left; width: 280px; height: 90px; margin-left: 20px; margin-top: 10px; margin-bottom: 10px; border: 5px dashed gray;}.jimu-widget-InfoSummary-setting .symbolOptionsContainer {overflow: hidden;}.jimu-widget-InfoSummary-setting .symbolPickerContainer {height: 100%; width: 100%; overflow: auto; padding-bottom: 8px; margin-top: 15px;}.jimu-widget-InfoSummary-setting .panelFeatureContainer {height: auto; display: none;}.jimu-widget-InfoSummary-setting .fieldOptions {width: 360px; max-height: 130px; overflow-y: auto; padding-left: 5px; padding-right: 5px;}.jimu-widget-InfoSummary-setting .groupOptions {position: relative;}.jimu-widget-InfoSummary-setting .groupFieldOptions {margin-top: 15px; width: 100%; height: auto; display: none; float: left; margin-bottom: 15px;}.jimu-widget-InfoSummary-setting .symbolOptionText {font-weight: bold;}.jimu-widget-InfoSummary-setting .symbolOptions{}.jimu-widget-InfoSummary-setting .w{width: 240px; position: absolute; left: 0px;}.jimu-rtl .jimu-widget-InfoSummary-setting .w{width: 240px; position: absolute; right: 0px;}.jimu-widget-InfoSummary-setting .rdoCustomSym{vertical-align: middle;}.jimu-widget-InfoSummary-setting .clusterOptions{min-width: 250px;}.jimu-widget-InfoSummary-setting .grpClusterOptions{padding-top: 16px;}.jimu-widget-InfoSummary-setting .iconOptionsText{font-weight: bold; width: 200px; display: -webkit-inline-box;}.jimu-widget-InfoSummary-setting .iconOptions{min-width: 250px; min-height: 95px;}.jimu-widget-InfoSummary-setting .checkBox {margin-left: 20px;}.jimu-rtl .jimu-widget-InfoSummary-setting .checkBox {margin-left: 20px;}.jimu-widget-InfoSummary-setting .height30{height: 30px;}.jimu-widget-InfoSummary-setting .padTop10{padding-top: 10px;}.jimu-widget-InfoSummary-setting .padTop20{padding-top: 20px;}.jimu-widget-InfoSummary-setting .padTop30{padding-top: 30px;}.jimu-widget-InfoSummary-setting .optionsText{padding-top: 25px; font-weight: bold;}.jimu-widget-InfoSummary-setting .mainPanelText{width: 340px; position: absolute; bottom: 10px;}.jimu-widget-InfoSummary-setting .refreshOptions{float:right; padding-right: 10px;}.jimu-rtl .jimu-widget-InfoSummary-setting .refreshOptions {float: left; padding-left: 10px;}.jimu-widget-InfoSummary-setting .refreshIntervalTitle{float:left;}.jimu-widget-InfoSummary-setting .refreshInterval{width:130px;}.jimu-widget-InfoSummary-setting .longSelect .dijitSelectLabel {text-align:left; text-overflow: ellipsis; overflow: hidden; max-width:295px; width:295px;}.jimu-widget-InfoSummary-setting .medSelect .dijitSelectLabel {text-align:left; text-overflow: ellipsis; overflow: hidden; max-width:150px; width: 150px;}.jimu-widget-InfoSummary-setting .loSelect .dijitSelectLabel {text-align:left; text-overflow: ellipsis; overflow: hidden; max-width: 88px; min-width: 88px;}.jimu-widget-InfoSummary-setting .goSelect .dijitSelectLabel {text-align:left; text-overflow: ellipsis; overflow: hidden; max-width: 145px; min-width: 145px}.jimu-widget-InfoSummary-setting .shortSelect .dijitSelectLabel {text-align:left; text-overflow: ellipsis; overflow: hidden; max-width: 81px; width: 81px;}.jimu-widget-InfoSummary-setting .innerMainPanelIcon {background-size: contain; width: 100%; max-width: 310px; height: 150px; background-repeat: no-repeat; background-position: 50% 50%; margin-left: 15px;}.jimu-widget-InfoSummary-setting .claro .dijitTextBox .dijitInputInner{font-size: 4px;}.jimu-widget-InfoSummary-setting .noMargin {margin-left: 0px; padding-left: 0px;}.jimu-widget-InfoSummary-setting .margin2 {margin-left: 2px;}.jimu-rtl .jimu-widget-InfoSummary-setting .margin2 {margin-right: 2px;}.jimu-widget-InfoSummary-setting .extraMargin {padding-left: 21px;}.jimu-widget-InfoSummary-setting .lyrSymbolSelected {outline: 1px solid #2196F3; background-color: aliceblue;}.jimu-widget-InfoSummary-setting .text-disabled {color: #a0acbf;}.jimu-widget-InfoSummary-setting .note-help {padding-left: 10px; font-style: italic;}.jimu-rtl .jimu-widget-InfoSummary-setting .note-help {padding-right: 10px; font-style: italic;}.jimu-widget-InfoSummary-setting .help-on {display: block;}.jimu-widget-InfoSummary-setting .help-off {display: none;}.jimu-widget-InfoSummary-setting .groupByOptions {}.jimu-rtl .jimu-widget-InfoSummary-setting .groupByOptions {}.jimu-widget-InfoSummary-setting .rdoGroupField{vertical-align: middle;}.jimu-widget-InfoSummary-setting .fieldSet {height: auto; width: 100%; border: 1px solid #a0acbf; border-radius: 5px; font-size: 14px; color: #596679; margin-bottom: 10px; min-width: 0px;}.jimu-widget-InfoSummary-setting .optionsFieldSet {padding: 15px 0px;}.jimu-widget-InfoSummary-setting .fieldSetLegend {margin-left: 20px;}.jimu-widget-InfoSummary-setting .padBottom20 {padding-bottom: 20px;}.jimu-widget-InfoSummary-setting .feature-display {padding-top: 10px; padding-bottom: 10px;}.jimu-widget-InfoSummary-setting .field-error {float: right; line-height: 0;}.jimu-rtl .jimu-widget-InfoSummary-setting .field-error {float: left; line-height: 0;}.jimu-widget-InfoSummary-setting .esriCTDisplayInlineFlex {display: inline-flex; min-height: 22px;}.jimu-widget-InfoSummary-setting .esriCTMarginRight20 {margin-right: 20px;}.jimu-rtl .jimu-widget-InfoSummary-setting .esriCTMarginRight20 {margin-left: 20px; margin-right: 0px;}.jimu-widget-InfoSummary-setting .esriCTRadioLabel {vertical-align: middle;}.jimu-widget-InfoSummary-setting .esriCTSortOptionsWrapper {padding-left: 5px;}.jimu-rtl .jimu-widget-InfoSummary-setting .esriCTSortOptionsWrapper {padding-right: 5px; padding-left: 0px;}",
"*now":function(A){A(['dojo/i18n!*preload*widgets/InfoSummary/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/query dojo/dom-construct dojo/dom-class dojo/_base/declare dojo/_base/xhr dojo/_base/Color dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/LayerInfos/LayerInfos dijit/form/ValidationTextBox dijit/form/CheckBox jimu/dijit/CheckBox jimu/dijit/Popup jimu/dijit/SimpleTable jimu/dijit/ImageChooser jimu/utils jimu/dijit/Message jimu/dijit/LayerChooserFromMapWithDropbox jimu/dijit/LoadingShelter esri/request dijit/popup dojo/_base/lang dojo/DeferredList dojo/Deferred dojo/on dojo/dom-style dojo/_base/html dojo/_base/array ./MySymbolPicker ./UniqueLayerChooser dojox/form/FileUploader".split(" "),function(A,
N,K,H,g,f,u,y,h,r,F,n,q,t,z,k,E,B,I,v,C,D,O,U,Q,V,c,p,M,T){return H([y,u],{baseClass:"jimu-widget-InfoSummary-setting",_layerInfos:null,mpi:null,layer_options:[],refreshLayers:[],displayPanelIcon:!1,used_layers:[],unsupported_ids:[],postCreate:function(){this.inherited(arguments);this.opLayers=this.map.itemInfo.itemData.operationalLayers;0===this.opLayers.length?(V.set(this.btnAddLayer,"display","none"),V.set(this.optionsContainer,"display","none"),V.set(this.displayOptionsContainer,"display","none"),
this._disableOk(),new E({message:this.nls.missingLayerInWebMap})):(this.shelter=new I({hidden:!0}),this._initCheckBoxes(),this.setupLayerTable(),this.setupRefreshInterval(),this._getAllLayers(),this.own(Q(this.btnAddLayer,"click",D.hitch(this,this._addLayerRow))),this.own(Q(this.hidePanelOptions,"change",D.hitch(this,function(d){this.hidePanel=d;this.panelCountOptions.setStatus(!d);this.panelIconOptions.setStatus(!d);this.expandListOptions.setStatus(!d);this.showAllFeaturesOptions.setStatus(!d);if(d){this.displayPanelIcon=
!1;if(d=A(".mainPanelPreviewContainerOn",this.mainPanelPreviewContainer.domNode)[0])c.removeClass(d,"mainPanelPreviewContainerOn"),c.addClass(d,"mainPanelPreviewContainerOff");K.contains(this.hidePanelHelpText,"help-off")&&c.removeClass(this.hidePanelHelpText,"help-off");c.addClass(this.hidePanelHelpText,"help-on")}else this.panelIconOptions.getValue()&&(this.displayPanelIcon=!0,d=A(".mainPanelPreviewContainerOff",this.mainPanelPreviewContainer.domNode)[0])&&(c.removeClass(d,"mainPanelPreviewContainerOff"),
c.addClass(d,"mainPanelPreviewContainerOn")),K.contains(this.hidePanelHelpText,"help-on")&&c.removeClass(this.hidePanelHelpText,"help-on"),c.addClass(this.hidePanelHelpText,"help-off")}))),this.own(Q(this.panelIconOptions,"change",D.hitch(this,this._updatePanelIcon))))},_updatePanelIcon:function(){var d=(this.displayPanelIcon=this.panelIconOptions.getValue())?"mainPanelPreviewContainerOff":"mainPanelPreviewContainerOn",m=A("."+d,this.mainPanelPreviewContainer.domNode)[0];m&&(c.removeClass(m,d),c.addClass(m,
this.displayPanelIcon?"mainPanelPreviewContainerOn":"mainPanelPreviewContainerOff"))},_initCheckBoxes:function(){this.panelCountOptions=this._initCheckBox(this.nls.panelCountOption,this.div_panelCountOptions);this.panelIconOptions=this._initCheckBox(this.nls.panelIconOption,this.div_panelIconOptions);this.expandListOptions=this._initCheckBox(this.nls.expandList,this.div_expandListOptions);this.showAllFeaturesOptions=this._initCheckBox(this.nls.showAllFeatures,this.div_showAllFeaturesOptions);this.hidePanelOptions=
this._initCheckBox(this.nls.hidePanel,this.div_hidePanelOptions);this.displayClusterLayerOptions=this._initCheckBox(this.nls.displayClusterLayer,this.div_displayClusterLayerOptions);!this.config.hasOwnProperty("displayClusterLayer")||this.config.displayClusterLayer?this.displayClusterLayerOptions.check():this.config.displayClusterLayer||this.displayClusterLayerOptions.uncheck()},_initCheckBox:function(d,m){var x=new n;x.setLabel(d);x.placeAt(m);return x},startup:function(){this.inherited(arguments);
this.refreshLayers=[];this.imageChooser=new z({format:[z.GIF,z.JPEG,z.PNG],label:this.nls.uploadImage,cropImage:!1,showTip:!1,goldenWidth:10,goldenHeight:15});V.set(this.imageChooser.domNode,"font-size","14px");c.place(this.imageChooser.domNode,this.mainPanelPreviewButton,"replace");this.connect(this.imageChooser,"onImageChange","uploadImage");this.isInitalLoad=!1},setupRefreshInterval:function(){this.refreshInterval.invalidMessage=this.nls.invalidInterval;this.refreshInterval.missingMessage=this.nls.missingRefreshValue},
setupLayerTable:function(){this.displayLayerTable=new t({fields:[{name:"layer",title:this.nls.layerName,"class":"label",type:"empty",width:"320px"},{name:"label","class":"label",title:this.nls.layerLabel,type:"empty",width:"255px"},{name:"image","class":"label",title:this.nls.iconColumnText+" "+this.nls.optionsText,width:"110px",actions:["edit"],type:"actions"},{name:"refresh","class":"label",title:this.nls.layerRefresh,type:"empty",width:"80px"},{name:"actions","class":"label",title:this.nls.actions,
type:"actions",actions:["up","down","delete"],width:"93px"}],selectable:!1,autoHeight:!0});this.displayLayerTable.placeAt(this.layerTable);this.displayLayerTable.startup();this.own(Q(this.displayLayerTable,"actions-edit",D.hitch(this,this._pickSymbol)));this.own(Q(this.displayLayerTable,"row-delete",D.hitch(this,this._rowDeleted)))},_getAllLayers:function(){this.map.itemId&&h.getInstance(this.map,this.map.itemInfo).then(D.hitch(this,function(d){this.operLayerInfos=d;this.wmLayerInfos=d.getLayerInfoArrayOfWebmap();
this.configLayerInfos=this.config.layerInfos;this._updateLayerIDs();this.config.upgradeFields&&this._upgradeFields();this.shelter.placeAt(this.domNode);this.shelter.startup();this.shelter.show();this._setLayers(d.getLayerInfoArray()).then(D.hitch(this,function(){this.setConfig(this.config);this.shelter.hide()}))}))},_updateLayerIDs:function(){var d=[],m=0;for(;m<this.configLayerInfos.length;m++){var x=this.configLayerInfos[m],a=this.operLayerInfos.getLayerInfoById(x.id);if(!a){var l=!1,w=0;b:for(;w<
this.wmLayerInfos.length;w++){var P=this.wmLayerInfos[w],L=P?P.originOperLayer:void 0,b=this._compareURL(L,x);L=this._compareItemID(L,x);P=this._compareSubId(P,x);if(a=(b=b?b:L?L:P?P:void 0)?this.operLayerInfos.getLayerInfoById(b):a){this.configLayerInfos[m].id=a.id;this.configLayerInfos[m].layer=a.id;l=!0;break b}}l||a||d.push(m)}}0<d.length&&(d.sort(function(e,G){return G-e}),p.forEach(d,D.hitch(this,function(e){this.configLayerInfos.splice(e,1)})))},_compareSubId:function(d,m){if(d&&d.subId&&-1<
d.subId.indexOf(m.id)&&d.layerObject){var x=this._compareGeom(d.layerObject,m);m=this._compareFields(d.layerObject,m);if(x&&m)return d.subId}},_compareItemID:function(d,m){if(d&&d.itemId&&d.itemId===m.itemId&&d.featureCollection&&d.featureCollection.layers&&d.featureCollection.layers.hasOwnProperty("length")){d=d.featureCollection.layers;for(var x=0;x<d.length;x++){var a=d[x];if(this._compareGeom(a,m)&&this._compareFields(a,m))return a.id}}},_compareURL:function(d,m){return d&&d.url&&m.url&&d.url===
m.url?d.id:void 0},_compareGeom:function(d,m){return d&&d.geometryType&&m.geometryType?d.geometryType===m.geometryType:void 0},_compareFields:function(d,m){var x;d&&d.fields&&m.fields&&d.fields.length===m.fields.length&&(x=d.fields.filter(function(a){for(var l=0;l<m.fields.length;l++)if(a.name===m.fields[l].name)return a}).length===d.fields.length);return x},_setLayers:function(d){var m=new U,x=["esri.layers.WMSLayer","esri.layers.ArcGISImageServiceLayer","esri.layers.ArcGISImageServiceVectorLayer",
"esri.layers.ArcGISTiledMapServiceLayer","ClusterLayer"];this.gtQueries=[];this.gtQueryUrls=[];for(var a=[],l=[],w={},P=0;P<d.length;P++){var L=d[P],b=L.layerObject.hasOwnProperty("supportsDynamicLayers")?L.layerObject.supportsDynamicLayers:!0,e=L.layerObject.declaredClass,G=this._checkItemId(L,e);if(-1===x.indexOf(e)){var J=L.getRootLayerInfo();if(-1===l.indexOf(J.id)){l.push(J.id);var S=[],da=[];J.traversal(D.hitch(this,function(R){if(R.newSubLayers&&0<R.newSubLayers.length)-1===S.indexOf(J.id)&&
S.push(J.id),-1===S.indexOf(R.id)&&(S.push(R.id),da.unshift(R.title));else{var Z=R.layerObject.geometryType;"undefined"===typeof Z&&(Z=this.setGeometryType(R.layerObject));var X=R.getUrl();var aa=X?-1<X.indexOf("MapServer")?"Map Service Layer":"":"esri.layers.FeatureCollection"===e||"Feature Collection"===e||G?"Feature Collection":"";var W=R.layerObject.renderer,ba=!1;if(J.layerObject&&J.layerObject.layerDrawingOptions){var Y=J.layerObject.layerDrawingOptions;"undefined"!==typeof R.subId&&R.subId<
Y.length&&Y.hasOwnProperty(R.subId)&&(Y=Y[R.subId])&&Y.renderer&&(W=Y.renderer,ba=!0)}var ca=Y=R.getInfoTemplate(),ea=!0;try{D.clone(Y)}catch(fa){ea=!1,Y.constructor&&Y.toJson&&(ca=new Y.constructor(Y.toJson()))}ea||(w[R.id]=ca);a.push({label:0<da.length?da.join("-")+"-"+R.title:R.title,value:R.id,url:X,imageData:R.imageData,id:R.id,geometryType:Z,fields:R.layerObject.fields,_type:e,renderer:W,rendererJson:W&&W.toJson?JSON.stringify(W.toJson()):!1,bypassDrawingInfo:ba,itemId:G,infoTemplate:ea?ca:
void 0,lyrType:aa,panelImageData:R.panelImageData,supportsDynamic:b,oidFieldName:R.layerObject.objectIdField,parentLayerID:J.id,subLayerId:X?parseInt(X.substr(X.lastIndexOf("/")+1),10):void 0,scaleRange:R.getScaleRange(),selfType:R.originOperLayer.selfType})}}))}}}this.layer_options=D.clone(a);p.forEach(Object.keys(w),D.hitch(this,function(R){var Z=0;a:for(;Z<this.layer_options.length;Z++){var X=this.layer_options[Z];if(X.id===R){X.infoTemplate=w[R];break a}}}));0<this.gtQueries.length?(d=new O(this.gtQueries),
c.removeClass(this.btnAddLayer,"btn-add-section enable"),c.addClass(this.btnAddLayer,"btn-add-section-disabled"),d.then(D.hitch(this,function(R){var Z=[];if(R&&0<R.length){for(var X=0;X<R.length;X++){for(var aa=R[X][1],W=this.gtQueryUrls[X],ba,Y=0;Y<this.layer_options.length;Y++)if(W===this.layer_options[Y].url){ba=Y;break}if("undefined"!==typeof ba)if(aa.geometryType){if(this.layer_options[ba].geometryType=aa.geometryType,"undefined"!==typeof aa.drawingInfo){this.layer_options[ba].bypassDrawingInfo||
(this.layer_options[ba].renderer=aa.drawingInfo.renderer,this.layer_options[ba].drawingInfo=aa.drawingInfo);this.layer_options[ba].fields=aa.fields;for(W=0;W<aa.fields.length;W++){var ca=aa.fields[W];if("esriFieldTypeOID"===ca.type)break}this.layer_options[ba].oidFieldName=ca.name}}else Z.push(ba)}c.removeClass(this.btnAddLayer,"btn-add-section-disabled");c.addClass(this.btnAddLayer,"btn-add-section enable")}p.forEach(Z.reverse(),D.hitch(this,function(ea){this.unsupported_ids.push(this.layer_options[ea].id);
this.layer_options.splice(ea,1)}));m.resolve()}))):m.resolve();return m},_checkItemId:function(d,m){if("esri.layers.FeatureCollection"===m)var x=(x=d.isItemLayer())&&x.itemId?x.itemId:x;else if("esri.layers.FeatureLayer"===m||"FeatureLayer"===m)a:for(m=0;m<this.opLayers.length;m++){var a=this.opLayers[m];if(a&&a.id&&(a.id===d.id||-1<d.id.indexOf(a.id))){m=a.type;"Feature Collection"===m&&(x=a.itemId);break a}}return x},setConfig:function(d){this.config=d;if(!this.config.mapID||this.config.mapID&&
this.config.mapID===this.map.itemId){this.oldConfig=!this.config.mapID;this.config.mainPanelText&&this.mainPanelText.set("value",this.config.mainPanelText);this.config.mainPanelIcon&&(this.panelMainIcon.innerHTML=this.config.mainPanelIcon);this.config.refreshInterval&&this.refreshInterval.set("value",this.config.refreshInterval);this.config.loadStaticData&&this.chkStatic.set("value",this.config.loadStaticData);this.config.countEnabled&&this.panelCountOptions.setValue(this.config.countEnabled);this.config.displayPanelIcon&&
(this.panelIconOptions.setValue(this.config.displayPanelIcon),this._updatePanelIcon());this.config.expandList&&this.expandListOptions.setValue(this.config.expandList);this.config.hasOwnProperty("displayCluster")?this.displayClusterLayerOptions.set("value",this.config.displayClusterLayer):this.displayClusterLayerOptions.set("value",!0);this.showAllFeaturesOptions.setValue("undefined"===typeof this.config.showAllFeatures?!1:this.config.showAllFeatures);this.hidePanel="undefined"!==typeof this.config.hidePanel?
this.config.hidePanel:!1;this.hidePanelOptions.setValue(this.hidePanel);this.panelCountOptions.setStatus(!this.hidePanel);this.panelIconOptions.setStatus(!this.hidePanel);this.expandListOptions.setStatus(!this.hidePanel);this.showAllFeaturesOptions.setStatus(!this.hidePanel);this.hidePanel?(K.contains(this.hidePanelHelpText,"help-off")&&c.removeClass(this.hidePanelHelpText,"help-off"),c.addClass(this.hidePanelHelpText,"help-on")):(K.contains(this.hidePanelHelpText,"help-on")&&c.removeClass(this.hidePanelHelpText,
"help-on"),c.addClass(this.hidePanelHelpText,"help-off"));this.displayLayerTable.clear();this.isInitalLoad=!0;for(d=0;d<this.config.layerInfos.length;d++)this._populateLayerRow(this.config.layerInfos[d],d);this._updateLayerLists();d=this.displayLayerTable.getRows();for(var m=0;m<d.length;m++)this._updateRefresh(d[m]);this.displayLayerTable.getRows().length<this.layer_options.length?(c.removeClass(this.btnAddLayer,"btn-add-section-disabled"),c.addClass(this.btnAddLayer,"btn-add-section enable")):(c.addClass(this.btnAddLayer,
"btn-add-section-disabled"),c.removeClass(this.btnAddLayer,"btn-add-section enable"))}},_upgradeFields:function(){if(this.config.layerInfos)for(var d=0;d<this.config.layerInfos.length;d++){var m=this.config.layerInfos[d];if(m&&m.symbolData&&m.symbolData.featureDisplayOptions){var x=this.operLayerInfos.getLayerInfoById(m.id),a=m.symbolData.featureDisplayOptions.fields;if("undefined"===typeof a||a.hasOwnProperty("length")&&0===a.length){var l=x&&x.layerObject?x.layerObject:void 0;a=l&&l.objectIdField?
l.objectIdField:void 0;var w="",P="";if((l=m.fields?m.fields:l?l.fields:void 0)&&0<l.length){var L=0;a:for(;L<l.length;L++){var b=l[L];""===w&&"esriFieldTypeOID"!==b.type&&"esriFieldTypeGeometry"!==b.type&&b.name!==a&&(w=b.name,P=b.alias||b.name);a||(a="esriFieldTypeOID"===b.type?b.name:void 0);if(a&&""!==w)break a}}L=l="";m=m.infoTemplate&&m.infoTemplate.info&&m.infoTemplate.info.fieldInfos?m.infoTemplate:x?x.getInfoTemplate():void 0;if(!m)a:for(x=x.getSubLayers(),b=0;b<x.length;b++){var e=x[b];
if(e.title&&e.layerObject&&e.layerObject.name&&e.title===e.layerObject.name){m=e.getInfoTemplate?e.getInfoTemplate():m;break a}}x=m?m.info.fieldInfos:[];m=0;a:for(;m<x.length;m++)if((b=x[m])&&b.visible&&(!a||a!==b.fieldName)){l=b.fieldName;L=b.label||b.fieldName;break a}this.config.layerInfos[d].symbolData.featureDisplayOptions.fields=[{name:l?l:w,label:l?L:P}]}}}},_updateStyleColor:function(d){var m=this.appConfig.theme.name,x=this.appConfig.appId;""===x&&(x=window.location.href.split("id\x3d")[1]);
g.get({url:"./apps/"+x+"/themes/"+m+"/manifest.json",sync:!0,handleAs:"json",load:D.hitch(this,function(a){a=a.styles;for(var l=0;l<a.length;l++){var w=a[l];if(w.name===d){this._styleColor=w.styleColor;this._styleColorName=w.name;break}}})})},updateThemeClusterSymbol:function(d,m){var x=d.symbolData;this.appConfig.theme.styles&&this.appConfig.theme.styles[0]&&"undefined"===typeof this._styleColor&&this._updateStyleColor(this.appConfig.theme.styles[0]);if(this._styleColor){var a=f.fromHex(this._styleColor);
m+=1;var l=0<m?30*m:30,w=0===m%2,P=a.g,L=a.b;a=a.r-l;w&&(255<a?a-=255:0>a&&(a+=255));L-=l;0===m%3&&w&&(255<L?L-=255:0>L&&(L+=255));l=P-l;0===m%5&&w&&(255<l?l-=255:0>l&&(l+=255));x.clusterType="CustomCluster";x.clusterSymbol={color:[a,l,L,128],outline:{color:[0,0,0,255],width:0,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"};d.symbolData=x}return d},_rowDeleted:function(d){d&&(d=d.selectLayers.getSelectedItem())&&d.layerInfo&&d.layerInfo.id&&this._removeRefreshLayer(d.layerInfo.id);
this._updateLayerLists();this.displayLayerTable.getRows().length<this.layer_options.length&&(c.removeClass(this.btnAddLayer,"btn-add-section-disabled"),c.addClass(this.btnAddLayer,"btn-add-section enable"))},_addLayerRow:function(){this.isInitalLoad=!1;if(!(this.displayLayerTable.getRows().length>=this.layer_options.length)){this.shelter.show();var d=this.displayLayerTable.addRow({});d.success&&d.tr&&(d=d.tr,c.addClass(d.cells[2],"displayOptions"),this._addLayersOption(d),this._addLabelOption(d),
this._addRefreshOption(d),this._setNextLayer(d.selectLayers),this._updateLayerLists());this.shelter.hide();this.displayLayerTable.getRows().length>=this.layer_options.length&&(c.removeClass(this.btnAddLayer,"btn-add-section enable"),c.addClass(this.btnAddLayer,"btn-add-section-disabled"))}},_setNextLayer:function(d){for(var m,x=0;x<this.layer_options.length;x++){var a=this.layer_options[x];if(-1===this.used_layers.indexOf(a.id)){m=a.id;break}}m&&(m=this.operLayerInfos.getLayerInfoById(m))&&m.getLayerObject().then(D.hitch(this,
function(l){d.setSelectedLayer(l)}))},_populateLayerRow:function(d,m){var x=this.displayLayerTable.addRow({});if(x.success&&x.tr){var a=x.tr;c.addClass(a.cells[2],"displayOptions");this._addLayersOption(a);this._addLabelOption(a);this._addRefreshOption(a);this.operLayerInfos.getLayerInfoById(d.id).getLayerObject().then(D.hitch(this,function(l){a.selectLayers.setSelectedLayer(l).then(D.hitch(this,function(){"ThemeCluster"===d.symbolData.clusterType&&(d=this.updateThemeClusterSymbol(d,m));var w=this._getLayerOptionByValue(a);
w.filter=d.filter;w.imageData=d.imageData;w.symbolData=d.symbolData;a.symbolData=d.symbolData;this.validateFields(a.symbolData,a)}))}));a.labelText.set("value",d.label);a.refreshBox.set("checked",d.refresh);a.imageData=d.panelImageData;(x=A(".imageDataGFX",a.cells[2])[0])&&a.cells[2].removeChild(x);N.create("div",{"class":"imageDataGFX margin2",innerHTML:[d.imageData],title:this.nls.iconColumnText},a.cells[2])}},_addLayersOption:function(d){var m=this._createLayerChooserSelect(d);m&&(m.tr=d,m.parent=
this,d.selectLayers=m)},_createLayerChooserSelect:function(d){var m=A(".simple-table-cell",d)[0];if(m){d=new T({showTable:!1,onlyShowVisible:!1,createMapResponse:this.map.webMapResponse,parent:this,row:d});d.startup();var x=new B({layerChooser:d});x.placeAt(m);x.startup();this.own(Q(x,"selection-change",this._onLayerChanged))}return x},_onLayerChanged:function(){var d=this.getSelectedItem();d&&(d=d&&d.layerInfo&&d.layerInfo.id?d.layerInfo.id:void 0,this.tr.layerID&&d&&d!==this.tr.layerID&&(this.parent._removeRefreshLayer(this.tr.layerID),
this.tr.refreshBox.set("checked",!1)),this.tr.layerID=d,this.parent.isInitalLoad||(D.hitch(this.parent,this.parent._updateRefresh(this.tr)),D.hitch(this.parent,this.parent._updateLayerLists()),D.hitch(this.parent,this.parent._addDefaultSymbol(this.tr)),this.tr.labelText.set("value","")))},_updateLayerLists:function(){this.used_layers=[];for(var d=this.displayLayerTable.getRows(),m=0;m<d.length;m++){var x=d[m],a=x.selectLayers.getSelectedItem();a&&a.layerInfo&&a.layerInfo.id&&(this.used_layers.push(a.layerInfo.id),
x.layerID=a.layerInfo.id)}for(m=0;m<d.length;m++)d[m].selectLayers.layerChooser._onLayerInfosChanged()},_addLabelOption:function(d){var m=A(".simple-table-cell",d)[1];c.setStyle(m,"verticalAlign","middle");c.setStyle(m,"line-height","inherit");var x=new r({style:{width:"100%",height:"28px"}});x.placeAt(m);x.startup();d.labelText=x},_addRefreshOption:function(d){var m=A(".simple-table-cell",d)[3];c.setStyle(m,"verticalAlign","middle");c.setStyle(m,"line-height","inherit");var x=new F({"class":"checkBox",
onChange:function(a){var l=this.tr.selectLayers.getSelectedItem();l&&l.layerInfo&&l.layerInfo.id&&(a?this.parent._addRefreshLayer(l.layerInfo.id):this.parent._removeRefreshLayer(l.layerInfo.id))}});x.placeAt(m);x.startup();x.parent=this;x.tr=d;d.refreshBox=x;this._updateRefresh(d)},_addRefreshLayer:function(d){this.refreshLayers.push(d);if(d=A(".refreshOff",this.refreshOptions.domNode)[0])c.removeClass(d,"refreshOff"),c.addClass(d,"refreshOn");this.refreshInterval.isValid()||this._disableOk()},_removeRefreshLayer:function(d){d=
this.refreshLayers.indexOf(d);if(-1<d&&(this.refreshLayers.splice(d,1),0===this.refreshLayers.length)){if(d=A(".refreshOn",this.refreshOptions.domNode)[0])c.removeClass(d,"refreshOn"),c.addClass(d,"refreshOff");this._enableOk()}},_updateRefresh:function(d){var m=this._getLayerOptionByValue(d);d&&d.refreshBox&&(d=d.refreshBox,m&&"Feature Collection"===m.lyrType&&m.itemId?(d.set("disabled",!1),d.set("title",this.nls.enableRefresh)):(d.set("disabled",!0),d.set("title",this.nls.disableRefresh)))},_updateOK:function(){this.refreshInterval.isValid()?
this._enableOk():this._disableOk()},_disableOk:function(){var d=A(".button-container")[0];V.set(d.children[2],"display","none");V.set(d.children[3],"display","inline-block")},_enableOk:function(){var d=A(".button-container")[0];V.set(d.children[2],"display","inline-block");V.set(d.children[3],"display","none")},_addDefaultSymbol:function(d){var m=A(".simple-table-cell",d)[0];this.curRow=d;if(m){c.setStyle(m,"line-height","inherit");c.setStyle(m,"margin-left","0px");m=this._getLayerOptionByValue(d);
var x=d.selectLayers.getSelectedItem();if(x&&x.layerInfo){x=x.layerInfo.id;var a=!1;"undefined"!==typeof this.curRow.symbolData&&(a=this.curRow.symbolData,a=a.userDefinedSymbol&&a.layerId===x);a&&"undefined"!==typeof m.symbolData?((d=A(".imageDataGFX",this.curRow.cells[2])[0])&&this.curRow.cells[2].removeChild(d),this.curRow.symbolData=m.symbolData,this.validateFields(this.curRow.symbolData,this.curRow),d=N.create("div",{"class":"imageDataGFX margin2"},this.curRow.cells[2]),d.appendChild(this.curRow.symbolData.svg),
this.curRow.imageData=this.curRow.symbolData.panelHTML):(m=new M({nls:this.nls,callerRow:d,layerInfo:m,value:x,symbolInfo:a?this.curRow.symbolData:m.symbolData,map:this.map,ac:this.appConfig,hidePanel:this.hidePanel,loadSymbolPicker:!1}),m._setSymbol(),(d=A(".imageDataGFX",this.curRow.cells[2])[0])&&this.curRow.cells[2].removeChild(d),this.curRow.symbolData=m.symbolInfo,this.validateFields(this.curRow.symbolData,this.curRow),d=N.create("div",{"class":"imageDataGFX margin2"},this.curRow.cells[2]),
null!==this.curRow.symbolData.svg&&"undefined"!==typeof this.curRow.symbolData.svg&&d.appendChild(this.curRow.symbolData.svg),this.curRow.imageData=this.curRow.symbolData.panelHTML,this.curRow=null,m.destroy(),m=null)}}},_getLayerOptionByValue:function(d){if(d=(d=d.selectLayers.getSelectedItem())&&d.layerInfo?d.layerInfo.id:void 0)for(var m=0;m<this.layer_options.length;m++){var x=this.layer_options[m];if(x.id===d)return x}},validateFields:function(d,m){d=d&&d.featureDisplayOptions&&d.featureDisplayOptions.fields?
0<d.featureDisplayOptions.fields.length:!1;var x=A(".simple-table-cell",m)[4];x&&!d?m.errorDiv?V.set(m.errorSpan,"display","inline-block"):(m.errorDiv=N.create("div",{"class":"field-error"},x),m.errorSpan=N.create("span",{"class":"jimu-icon jimu-icon-error",title:this.nls.fieldsWarning},m.errorDiv)):d&&m.errorSpan&&V.set(m.errorSpan,"display","none")},_pickSymbol:function(d){var m=this._getLayerOptionByValue(d);this.curRow=d;var x=new M({nls:this.nls,callerRow:d,layerInfo:m,value:m.id,symbolInfo:"undefined"!==
typeof this.curRow.symbolData?this.curRow.symbolData:m.symbolData,map:this.map,ac:this.appConfig,hidePanel:this.hidePanel,loadSymbolPicker:!0}),a=new q({width:420,autoHeight:!0,content:x,titleLabel:this.nls.sympolPopupTitle});this.own(Q(x,"customSymbolButtonClicked",D.hitch(this,function(){K.add(x.btnOk,"jimu-state-disabled")})));this.own(Q(x,"onImageSelected",D.hitch(this,function(){K.remove(x.btnOk,"jimu-state-disabled")})));this.own(Q(x,"enableOkButton",D.hitch(this,function(){K.remove(x.btnOk,
"jimu-state-disabled")})));this.own(Q(x,"ok",D.hitch(this,function(l){if(!K.contains(x.btnOk,"jimu-state-disabled")){var w=A(".imageDataGFX",this.curRow.cells[2])[0];w&&this.curRow.cells[2].removeChild(w);this.curRow.symbolData=l;this.validateFields(this.curRow.symbolData,this.curRow);N.create("div",{"class":"imageDataGFX margin2"},this.curRow.cells[2]).appendChild(l.svg);this.curRow.imageData=l.panelHTML;this.curRow=null;x.destroy();x=null;a.close()}})));this.own(Q(x,"cancel",D.hitch(this,function(){this.curRow=
null;x.destroy();x=null;a.close()})))},setGeometryType:function(d){var m=!0,x;if(d.url&&d.url.indexOf)-1<d.url.indexOf("MapServer")&&(this.gtQueries.push(v({url:d.url+"?f\x3djson"})),this.gtQueryUrls.push(d.url));else if(d.featureInfos&&d.featureInfos.hasOwnProperty("length")){var a=["esriGeometryPoint","esriGeometryLine","esriGeometryPolygon"];p.forEach(d.featureInfos,function(l){l.type&&-1<a.indexOf(l.type)&&(x=l.type,x!==l.type&&(m=!1))})}return m&&x?x:void 0},uploadImage:function(d){this.panelMainIcon.innerHTML=
"";this.mpi=d;N.create("div",{"class":"innerMainPanelIcon",style:"background-image: url("+d+");",title:this.nls.mainPanelIcon},this.panelMainIcon)},getConfig:function(){C.close();var d=this.displayLayerTable.getRows(),m=[],x;p.forEach(d,D.hitch(this,function(a){var l=a.selectLayers.getSelectedItem();if(l&&l.layerInfo&&l.layerInfo.id)var w=l.layerInfo.id;l=k.stripHTML(a.labelText.value);var P=a.refreshBox,L=this._getLayerOptionByValue(a),b=a.symbolData?a.symbolData:L.symbolData;x={layer:w,label:""!==
l?l:L.label,refresh:P.getValue(),url:L.url,type:L.type,id:L.id,symbolData:b,geometryType:L.geometryType,itemId:L.itemId,parentLayerID:L.parentLayerID,renderer:L.renderer,drawingInfo:L.drawingInfo,fields:L.fields,oidFieldName:L.oidFieldName,subLayerId:L.subLayerId,infoTemplate:L.infoTemplate,rendererJson:L.rendererJson,bypassDrawingInfo:L.bypassDrawingInfo};a.imageData&&(x.panelImageData=a.imageData);a=A(".imageDataGFX",a)[0];x.imageData="undefined"!==typeof a?a.innerHTML:"\x3cdiv\x3e\x3c/div\x3e";
m.push(x)}));this.config.mapID=this.map.itemId;this.config.layerInfos=m;this.config.mainPanelText=k.stripHTML(this.mainPanelText.value);this.config.mainPanelIcon=this.panelMainIcon.innerHTML;this.config.refreshInterval=k.stripHTML(this.refreshInterval.value);this.config.refreshEnabled=0<this.refreshLayers.length?!0:!1;this.config.countEnabled=this.panelCountOptions.getValue();this.config.displayPanelIcon=this.panelIconOptions.getValue();this.config.hidePanel=this.hidePanelOptions.getValue();this.config.continuousRefreshEnabled=
this.hidePanelOptions.getValue();this.config.expandList=this.expandListOptions.getValue();this.config.showAllFeatures=this.showAllFeaturesOptions.getValue();this.config.upgradeFields=!1;this.config.displayClusterLayer=this.displayClusterLayerOptions.checked;return this.config},destroy:function(){C.close();this.inherited(arguments)}})});