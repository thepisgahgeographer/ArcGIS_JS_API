// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_WidgetBase dojo/dom-geometry dojo/dom-class dojo/Evented dojo/debounce".split(" "),function(A,n,v,r,k,p,h,b){return A([r,h],{baseClass:"jimu-dijit-gridlayout",declaredClass:"jimu.dijit.GridLayout",container:null,layoutDefinition:null,components:null,editable:!1,_layout:null,_coordinates:null,_isCreatingLayout:null,postCreate:function(){this.inherited(arguments);this._isCreatingLayout=
!1;this._createLayout(this.layoutDefinition)},restoreLayout:function(a){a=a||this.layoutDefinition;this._createLayout(a)},destroy:function(){v.forEach(this.components,function(a){a.dijit.destroy()});this._layout.destroy();this.inherited(arguments)},getLayoutDefinition:function(){return this._layout.toConfig().content},resize:function(){var a=k.getMarginBox(this.container);this._layout.updateSize(a.w,a.h)},getComponentSize:function(a){return(a=this._layout.root.contentItems[0].getItemsById(a))&&0<
a.length?(a=a[0].container,{w:a.width,h:a.height}):{w:0,h:0}},getSize:function(){return{w:this._layout.width,h:this._layout.height}},setVisible:function(a,e){var f=this._layout.root.contentItems[0].getItemsById(a);f&&0<f.length&&!1===e?this._hideComponent(f[0]):f&&0!==f.length||!0!==e||this._showComponent(a)},highlightItem:function(a){(a=this._layout.root.contentItems[0].getItemsById(a))&&0<a.length&&a[0].highlight()},unhighlightItem:function(a){(a=this._layout.root.contentItems[0].getItemsById(a))&&
0<a.length&&a[0].unhighlight()},_createLayout:function(a){if(!this._isCreatingLayout){this._coordinates={};this._isCreatingLayout=!0;var e={settings:{hasHeaders:!1,resizeEnabled:this.editable,reorderEnabled:this.editable,selectionEnabled:this.editable,highlightEnabled:this.editable},dimensions:{borderWidth:1,dragProxyWidth:0,dragProxyHeight:0},content:a},f=this._layout;require(["libs/goldenlayout/goldenlayout"],n.hitch(this,function(c){this._layout=new c(e,this.container);this._layout.registerComponent("jimu grid",
n.hitch(this,function(d,g){var l;d.parent.config.id=g.id;v.some(this.components,function(q){if(q.id===g.id)return l=q.dijit,d.getElement().html(q.dijit.domNode),!0},this);d.on("resize",b(n.hitch(this,function(){0<d.width&&0<d.height&&l&&"function"===typeof l.resize&&l.resize(d.width,d.height)}),200));d.on("select",n.hitch(this,function(){this.editable&&d.parent.select();this.emit("mask-click",d.parent.config.id)}))}));this._layout.on("initialised",n.hitch(this,function(){this._resetCoordinate();this.emit("initialised");
this._isCreatingLayout=!1;f&&f.destroy()}));this._layout.on("stateChanged",n.hitch(this,function(){this._resetCoordinate()}));this._layout.init();this.editable||p.add(this._layout.root.childElementContainer[0],"viewonly");p.add(this._layout.root.childElementContainer[0],"jimu-dijit-gridlayout");setTimeout(n.hitch(this,this.resize),100)}))}},_hideComponent:function(a){a.parent&&a.parent.removeChild(a,!0)},_showComponent:function(a){var e,f;v.some(this.components,function(m){if(m.id===a)return e=m,
!0},this);if(e){var c={id:a,type:"component",componentName:"jimu grid",componentState:{id:a}};var d=this._coordinates[a];var g=this._layout.root;if(d){if(d[0].type!==g.contentItems[0].type){var l=g.contentItems[0];g.replaceChild(l,{type:d[0].type,content:[]});g.contentItems[0].addChild(l)}var q=g;v.forEach(d,function(m){f=m.index<=q.contentItems.length?m.index:q.contentItems.length;"component"===m.type?q.addChild(c,f):("stack"!==m.type&&q.contentItems[m.index].type===m.type||q.addChild({type:m.type,
content:[]},f),q=q.contentItems[f])},this)}else"stack"===g.contentItems[0].type&&(l=g.contentItems[0],g.replaceChild(l,{type:"column",content:[]}),g.contentItems[0].addChild(l)),g.contentItems[0].addChild(c)}},_resetCoordinate:function(){var a=this._layout.root.getItemsByType("component"),e=function(f,c){var d=f.parent;d&&(v.some(d.contentItems,function(g,l){if(g===f)return c.push({type:g.type,index:l}),!0}),e(d,c))};v.forEach(a,function(f){var c=[];e(f,c);this._coordinates[f.config.id]=c.reverse()},
this)}})})},"widgets/Infographic/DijitFactory":function(){define("dojo/aspect dojo/_base/lang ./dijits/TextDijit ./dijits/ImageDijit ./dijits/ChartDijit ./dijits/GaugeDijit ./dijits/NumberDijit".split(" "),function(A,n,v,r,k,p,h){var b={},a={},e=null,f=null,c=null,d=null,g={};b._dijits=a;b.createDijit=function(l){var q=null;if(a[l.id])return(q=a[l.id])&&"function"===typeof q.setVisible&&q.setVisible(l.visible),q;switch(l.type){case "text":var m=v;break;case "image":m=r;break;case "chart":m=k;break;
case "gauge":m=p;break;case "number":m=h}if(!m)return console.error("Unknow type:",l.type),null;q={nls:e,config:l.config,map:f,inSettingPage:c,appConfig:d,jsonId:l.id,visible:l.visible};n.mixin(q,g);q=new m(q);A.after(q,"destroy",function(){delete a[l.id]});return a[l.id]=q};b.setNls=function(l){e=l};b.setMap=function(l){f=l;Object.keys(a).forEach(function(q){a[q].setMap(f)})};b.setInSettingPage=function(l){c=l;Object.keys(a).forEach(function(q){a[q].setInSettingPage(c)})};b.setAppConfig=function(l){d=
l;Object.keys(a).forEach(function(q){a[q].setAppConfig(d)})};b.setContext=function(l){g=l;Object.keys(a).forEach(function(q){n.mixin(a[q],g)})};return b})},"widgets/Infographic/dijits/TextDijit":function(){define(["dojo/_base/declare","dojo/_base/html","./BaseDijit","./styleUtils"],function(A,n,v,r){return A([v],{templateString:"\x3cdiv\x3e\x3c/div\x3e",baseClass:"infographic-text-dijit",type:"text",config:null,postCreate:function(){this.setConfig(this.config)},setConfig:function(k){this.config=k;
n.empty(this.domNode);n.addClass(this.domNode,"table-layout-container");n.addClass(this.domNode,"no-trim");this.innerDom=n.create("div",{},this.domNode);n.place(this.innerDom,this.domNode);k={};r.background.setStyle(this.config.background,k,this);r.font.setStyle(this.config.font,k);r.font.setText(this.config,this);n.setStyle(this.innerDom,k)}})})},"widgets/Infographic/dijits/BaseDijit":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin"],function(A,n,v){return A([n,
v],{templateString:"\x3cdiv\x3ePlease create a sub class\x3c/div\x3e",type:"BaseDijit",config:null,inSettingPage:!0,appConfig:null,constructor:function(r){this.config=r.config},setInSettingPage:function(r){this.inSettingPage=r},setConfig:function(r){this.config=r},setMap:function(r){this.map=r},setDataSource:function(r){this.dataSource=r},resize:function(){},setAppConfig:function(r){this.appConfig=r},onDataSourceDataUpdate:function(r){this.data=r},isDarkTheme:function(){var r=!1;this.appConfig&&("DashboardTheme"!==
this.appConfig.theme.name||"default"!==this.appConfig.theme.styles[0]&&"style3"!==this.appConfig.theme.styles[0]?"DartTheme"===this.appConfig.theme.name&&(r=!0):r=!0);return r}})})},"widgets/Infographic/dijits/styleUtils":function(){define(["dojo/on","dojo/keys","dojo/_base/lang","dojo/_base/html","jimu/utils"],function(A,n,v,r,k){var p={background:{setStyle:function(h,b,a){if(!h)return{};b||(b={});p.background.setBackgroundColor(h,b);p.background.setAlignment(h,b);p.background.setLink(h,b,a)},setBackgroundColor:function(h,
b){h.backgroundColor&&(b.backgroundColor=h.backgroundColor)},setAlignment:function(h,b){if(h.alignment){if(h.alignment.horizontal)switch(h.alignment.horizontal){case "left":b.textAlign="left";break;case "center":b.textAlign="center";break;case "right":b.textAlign="right";break;default:b.textAlign="center"}if(h.alignment.vertical)switch(b.display="table-cell",h.alignment.vertical){case "top":b.verticalAlign="top";break;case "middle":b.verticalAlign="middle";break;case "bottom":b.verticalAlign="bottom";
break;default:b.verticalAlign="middle"}}},setLink:function(h,b,a){a.clickHanlder&&(a.clickHanlder[0]&&a.clickHanlder[0].remove(),a.clickHanlder=null,this.keydownHanlder&&a.keydownHanlder[0]&&a.keydownHanlder[0].remove(),a.keydownHanlder=null,b.cursor="auto");h.link?(a.clickHanlder=a.own(A(a.domNode,"click",v.hitch(a,function(){window.open(h.link)}))),a.keydownHanlder=a.own(A(a.domNode,"keydown",v.hitch(a,function(){event.keyCode===n.ENTER&&window.open(h.link)}))),b.cursor="pointer",r.addClass(a.domNode,
"has-link"),r.setAttr(a.domNode,"tabindex","0"),r.setAttr(a.domNode,"role","link"),"undefined"!==typeof h.alt&&r.setAttr(a.domNode,"aria-label",h.alt)):(r.removeClass(a.domNode,"has-link"),r.removeAttr(a.domNode,"tabindex"),r.removeAttr(a.domNode,"role"),"undefined"===typeof h.alt&&r.removeAttr(a.domNode,"aria-label"))}},font:{setText:function(h,b){var a="";h.text&&(a=h.text);b.innerDom.innerHTML=k.sanitizeHTML(a)},setStyle:function(h,b){if(!h)return{};b||(b={});p.font.setFont(h,b);p.font.setTextColor(h,
b);p.font.setFontSize(h,b)},setFont:function(h,b){b.fontWeight="normal";b.fontStyle="normal";b.textDecoration="none";h.font&&(h.font.fontFamily&&(b.fontFamily=h.font.fontFamily),h.font.bold&&(b.fontWeight="bold"),h.font.italic&&(b.fontStyle="italic"),h.font.underline&&(b.textDecoration="underline"))},setTextColor:function(h,b){h.textColor&&(b.color=h.textColor)},setFontSize:function(h,b){h.fontSize&&(b.fontSize=h.fontSize+"px")}},image:{setStyle:function(h,b,a){if(!h)return{};b||(b={});p.image.setBackgroundImg(h,
b,a);p.image.setAlignment(h,b)},setBackgroundImg:function(h,b,a){var e="";if(e=h&&!h.image&&a&&a.folderUrl?"url("+a.folderUrl+"/images/default_image.png)":"url("+k.processUrlInWidgetConfig(h.image,a.folderUrl)+")")b.backgroundImage=e,b.backgroundRepeat="no-repeat",b.backgroundSize="contain"},setAlignment:function(h,b){if(h&&h.background){var a="center",e="center";if(h.background.alignment){h.background.alignment.horizontal&&(a=h.background.alignment.horizontal);if(h.background.alignment.vertical)switch(h.background.alignment.vertical){case "top":e=
"top";break;case "middle":e="center";break;case "bottom":e="bottom";break;default:b.verticalAlign="center"}b.backgroundPosition=a+" "+e}}}},dataFormat:{getText:function(h,b){var a="";h.dataFormat&&(a=b?b:h.text,a=p.dataFormat.setDataFomat(h,a),h.dataFormat.prefix&&(a=h.dataFormat.prefix+" "+a),h.dataFormat.suffix&&(a=a+" "+h.dataFormat.suffix));return a},setDataFomat:function(h,b){var a=h.dataFormat.unit;"none"===h.dataFormat.unit?a="":"percentage"===h.dataFormat.unit&&(a="%");return b=b+a+"("+h.dataFormat.decimalPlaces+
") "}}};return p})},"widgets/Infographic/dijits/ImageDijit":function(){define(["dojo/_base/declare","dojo/_base/html","./BaseDijit","./styleUtils"],function(A,n,v,r){return A([v],{templateString:"\x3cdiv\x3e\x3c/div\x3e",type:"image",config:null,constructor:function(k){this.config=k.config},postCreate:function(){this.setConfig(this.config)},setConfig:function(k){this.config=k;this.domNode.innerHTML="";n.addClass(this.domNode,"table-layout-container");k=this.config.alt;this.config.background.alt=k;
this.innerDom=n.create("div",{"class":"image-node",alt:k,role:"img"},this.domNode);n.place(this.innerDom,this.domNode);k={};r.background.setStyle(this.config.background,k,this);r.image.setStyle(this.config,k,this);n.setStyle(this.innerDom,k)}})})},"widgets/Infographic/dijits/ChartDijit":function(){define("dojo/_base/lang dojo/_base/html dojo/_base/declare ./BaseDijit dojo/text!./ChartDijit.html moment/moment jimu/dijit/_chartDijitOption jimu/dijit/Chart jimu/DataSourceManager jimu/LayerInfos/LayerInfos ../utils jimu/utils libs/moment/twix".split(" "),
function(A,n,v,r,k,p,h,b,a,e,f,c){window.makeTwix(p);return v([r],{templateString:k,type:"chart",baseClass:"infographic-chart-dijit",layerInfosObj:null,dataSourceManager:null,featuresCountForPreview:50,dataSource:null,config:null,map:null,maxTimeIntervals:1E4,maxLabels:1E4,dsType:"",constructor:function(d){this.visible=d.visible;this.layerInfosObj=e.getInstanceSync();this.dataSourceManager=a.getInstance();this.config=d.config;this.popupInfo=this.layerObject=this.featureLayerForFrameWork=null},postCreate:function(){this.inherited(arguments);
this._init();this.upgradeConfig()},setLayerInfo:function(d,g,l){this.layerObject=d;this.popupInfo=l;this.featureLayerForFrameWork=g;this._initChartDijitOption()},getDataURL:function(){if(this.chart)return this.chart.getDataURL()},resize:function(){this.chart&&this.chart.resize()},setVisible:function(d){this.visible=d},destroy:function(){this.chart&&this.chart.destroy();this.chart=null;this.inherited(arguments)},clearChart:function(){this.chart&&this.chart.clear();this.showNodata()},setBackgroundColor:function(d){this.domNode.style.backgroundColor=
d},_setyAxisName:function(){var d=this.config&&this.config.display;(d=d&&d.yAxis)&&d.show&&"undefined"!==typeof d.name?(this._showyAxisName(),this._setyAxisNameText(d.name),(d=d.nameTextStyle)&&d.color&&this._setyAxisNameColor(d.color)):this._hideyAxisName()},_setyAxisNameText:function(d){this.yAxisName.innerHTML=c.stripHTML(d)},_setyAxisNameColor:function(d){n.setStyle(this.yAxisName,"color",d)},_hideyAxisName:function(){n.setStyle(this.yAxisName,"display","none")},_showyAxisName:function(){n.setStyle(this.yAxisName,
"display","flex")},resetData:function(){this.dataSource=null;this.dsType="";this.data=null;this._hasStatisticsed=void 0;this.featureLayerForFrameWork=this.popupInfo=this.layerObject=null;this.chartDijitOption.init(null,null,null,this.map)},setDataSource:function(d){this.inherited(arguments);this.dataSource=d;this._calcDataSourceType(this.dataSource)},onUpdateDataStart:function(){this._showOverlay()},onUpdateDataDone:function(){this._hideOverlay()},_calcDataSourceType:function(d){d.layerId?this.dsType=
"CLIENT_FEATURES":d.frameWorkDsId&&(d=(d=f.getDsTypeInfoMeta(d.frameWorkDsId,this.appConfig))&&d.dsMeta)&&("Features"===d.type?this.dsType="FRAMEWORK_FEATURES":"FeatureStatistics"===d.type&&(this.dsType="FRAMEWORK_STATISTICS"))},setConfig:function(d){this.config=d;this.upgradeConfig()},upgradeConfig:function(){this.config=f.upgradeChartAxisFormatConfig(this.config,this.layerObject,this.popupInfo)},onDataSourceDataUpdate:function(d){d&&"undefined"!==typeof d.features&&(this.inSettingPage&&d.features.length>
this.featuresCountForPreview&&(d.features=d.features.slice(0,this.featuresCountForPreview)),this.data=d,this._hasStatisticsed=!!d.hasStatisticsed)},startRendering:function(){this.specialChartConfig(this.config);this._shouldRenderChart()&&((this.chart||this._createJimuChart(),this._updateBackgroundColor(),this._setyAxisName(),this._splitConfig(),this._createChartSeriesOption(),this.seriesOption)?this._checkIsTooManyLabels(this.seriesOption)||(this._createChartOption(),this.chart.updateConfig(this.chartOption),
this.chart.resize()):this.showNodata())},_createChartOption:function(){var d=this._isSameFeatures(),g=f.isEqual(this.dataOption,this._oldDataOption)&&f.isEqual(this.displayOption,this._oldDisplayOption);d&&g||(this.chartOption=null,this.seriesOption&&(this.chartOption=this.chartDijitOption.updateChartOptionDisplay(A.clone(this.seriesOption),this.displayOption,this.dataOption),this._oldDisplayOption=null,this._oldDisplayOption=A.clone(this.displayOption)))},_createChartSeriesOption:function(){var d=
this._isSameFeatures(),g=f.isEqual(this.dataOption,this._oldDataOption);d&&g||(this._oldDataOption=null,this._oldDataOption=A.clone(this.dataOption),d=this.dataOption,d.features=this.features,g=this.chartDijitOption.getClientStatisticsData(d),this.seriesOption=null,g&&(this.chartDijitOption.bindChartEvent(this.chart,d,g),this.seriesOption=this.chartDijitOption.getChartOptionSeries(this.dataOption,g)))},_splitConfig:function(){if(this.config){var d=this.config.data,g=this.config.display;this.features=
this._cleanFeatures(this.data.features);var l=this.dataSource.filterByExtent,q=this.dataSource.useSelection,m=this._isStatisticsed();l={filterByExtent:l,useSelection:q,hasStatisticsed:m};this.dataOption=null;this.dataOption=A.mixin(l,d);this.displayOption=null;this.displayOption=g}},_cleanFeatures:function(d){if(d&&d.length)return d.map(function(g){return{attributes:g.attributes}})},_isSameFeatures:function(){var d=this.features;if(!d)return!0;d=d.map(function(g){return g.attributes});if(f.isEqual(d,
this._oldFeatureAttrs))return!0;this._oldFeatureAttrs=d},_isStatisticsed:function(){return this.inSettingPage?"FRAMEWORK_STATISTICS"===this.dsType:!!this._hasStatisticsed},_shouldRenderChart:function(){if(this.visible&&this.config){var d=this.domNode&&this.data&&this.data.features&&this._hasVaildConfig(this.config.data);if("CLIENT_FEATURES"===this.dsType)var g=!!this.layerObject;else if("FRAMEWORK_FEATURES"===this.dsType||"FRAMEWORK_STATISTICS"===this.dsType)g=!!this.featureLayerForFrameWork;if(d&&
g){if(this._checkIsTooManyTimeInterval(this.data.features))return this.showNodata(this.nls.parsingperiodTip),!1}else return this.showNodata(),!1;this.hideNodata();return!0}},_hasVaildConfig:function(d){if(!d||!d.mode)return!1;var g=d.valueFields;if("feature"===d.mode)return d.clusterField&&g&&g.length;if("category"===d.mode)return d.clusterField&&d.operation&&g&&g.length;if("count"===d.mode)return d.clusterField;if("field"===d.mode)return d.operation&&g&&g.length},_getNodataTextColor:function(){var d=
this.config&&this.config.display;var g=this.config&&this.config.data;if(!d||!g)return"#666";(d="pie"===g.type?d.dataLabelColor:d.horizontalAxisTextColor||d.verticalAxisTextColor)||(d="#666");return d},specialChartConfig:function(d){if(d){var g=this._getChartTheme();f.specialChartConfig(d,g);return d}},_showOverlay:function(){n.removeClass(this.overlap,"hide")},_hideOverlay:function(){n.addClass(this.overlap,"hide")},showNodata:function(d){n.addClass(this.domNode,"no-data");this._setNoDataColor();
d&&(this.noDataDiv.innerHTML=c.sanitizeHTML(d))},_setNoDataColor:function(){var d=this._getNodataTextColor();this.noDataDiv&&this.noDataDiv.style&&(this.noDataDiv.style.color=d)},_initChartDijitOption:function(){if(this.chartDijitOption){var d=null;d="CLIENT_FEATURES"===this.dsType?this.layerObject:this.featureLayerForFrameWork;this.chartDijitOption.init(d,this.layerObject,this.popupInfo,this.map,this.layerObject)}},_checkIsTooManyLabels:function(d){return(d=d.labels)&&d.length>this.maxLabels?(this.showNodata(this.nls.manyCategoryTip),
!0):!1},_checkIsTooManyTimeInterval:function(d){var g=this.config&&this.config.data;g=g&&g.dateConfig;if(!g||"automatic"===g.minPeriod)return!1;var l=g.clusterField,q=d.map(A.hitch(this,function(m){return m.attributes[l]}));q=q.filter(function(m){return!!m});d=Math.min.apply(Math,q);q=Math.max.apply(Math,q);d=p(d).subtract(1,"seconds").local();q=p(q).add(1,"seconds").local();return Math.round(q.diff(d,g.minPeriod,!0))>=this.maxTimeIntervals},_createChartDijitOption:function(){var d={map:null};this.inSettingPage||
(d.map=this.map);this.chartDijitOption=new h(d)},_init:function(){this._createChartDijitOption();this._updateBackgroundColor()},_createJimuChart:function(){var d=this.config&&this.config.data;this.DEFAULT_CONFIG={type:d&&d.type||"column",theme:this._getChartTheme(),labels:[],series:[{data:[]}]};this.chart=new b({chartDom:this.chartDomNode,config:this.DEFAULT_CONFIG,preview:this.inSettingPage});this.chart.placeAt(this.chartDomNode);this.chart.resize()},_getChartTheme:function(){return this.isDarkTheme()?
"dark":"light"},_updateBackgroundColor:function(){var d=this.config&&this.config.display;d&&d.backgroundColor&&this.setBackgroundColor(d.backgroundColor)},hideNodata:function(){n.removeClass(this.domNode,"no-data")}})})},"jimu/dijit/_chartDijitOption":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dojo/_base/lang","jimu/clientStatisticsUtils","jimu/_chartHelpUtils"],function(A,n,v,r,k){return A([n],{postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart},constructor:function(p){this.map=
p.map;this.chartHelpUtils=new k({map:this.map,clientStatisticsUtils:r})},init:function(p,h,b,a,e){this.chartHelpUtils.setLayerFeatureLayer(p);this.chartHelpUtils.setSymbolLayer(h);this.chartHelpUtils.setPopupInfo(b);this.chartHelpUtils.setMap(a);this.chartHelpUtils.setLayerObject(e);this.featureLayer=p;this.layerObject=e},getClientStatisticsData:function(p){var h=r.getClietStatisticsData(p);h=r.sortClientStatisticsData(h,p,this.layerObject||this.featureLayer);h=r.getDataForMaxLabels(h,p.maxLabels);
return h=this.chartHelpUtils.keepStatisticsDataBestDecimalPlace(p,h,p.mode)},bindChartEvent:function(p,h,b){this.chartHelpUtils.bindChartEvent(p,h,b)},getChartOptionSeries:function(p,h){return this._createOptionSeries(p,h)},updateChartOptionDisplay:function(p,h,b){this._assigneeSettingColorToSeries(p,h,b);this.chartHelpUtils.updateChartSeriesDisplayName(p,h,b);return this._mapSettingConfigToChartOption(p,h,b)},_assigneeSettingColorToSeries:function(p,h,b){if(!p||!p.series)return p;this.chartHelpUtils.assigneeSettingColor(h,
p.series,b)},_createOptionSeries:function(p,h){var b=p.type,a=p.mode;p=p.valueFields;var e=[];e="count"===a?[""]:"field"===a?[""]:v.clone(p);var f=null;f={type:b,labels:[],series:[]};f.series=e.map(v.hitch(this,function(c){return{name:c,type:b,data:[]}}));h.forEach(v.hitch(this,function(c){var d=c.label;f.labels.push(d);for(var g=0;g<c.values.length;g++){var l={value:c.values[g],name:d,unit:c.unit};"feature"===a&&(l.originValue=c.originalValues[g]);f.series[g].data.push(l)}}));return f},_mapSettingConfigToChartOption:function(p,
h,b){var a=b.type;this._settingColorArrayForPie(p,h,a,b.mode);this._settingAxisDisplay(p,h,a);p.type=a;p.dataZoom=["inside","slider"];"pie"!==a&&(p.dataZoomOption={mode:h.displayRange||"AUTO"});p.confine=!0;p.backgroundColor=h.backgroundColor;p.tooltip=h.tooltip?v.clone(h.tooltip):{confine:!0,trigger:"radar"===a||"pie"===a?"item":"axis",axisPointer:"pie"!==a?{type:"line"===a?"cross":"shadow",snap:!0}:{type:""}};h.marks&&h.marks.markLine&&(p.markLine=v.clone(h.marks.markLine));h.marks&&h.marks.markArea&&
(p.markArea=v.clone(h.marks.markArea));h.legend&&(p.legend=v.clone(h.legend));h.xAxis&&(p.xAxis=v.clone(h.xAxis));h.yAxis&&(p.yAxis=v.clone(h.yAxis));h.dataLabel&&(p.dataLabel=v.clone(h.dataLabel));"pie"===a&&(p.innerRadius=h.innerRadius);p.theme=h.theme||"light";return p},_settingColorArrayForPie:function(p,h,b,a){"pie"===b&&"field"!==a&&(h=h.seriesStyle)&&h.styles&&h.styles[0]&&(h=h.styles[0].style)&&Array.isArray(h.color)&&(b=v.clone(h.color),2===b.length&&(b=this.chartHelpUtils.getColors(v.clone(h.color),
6)),p.color=b)},_settingAxisDisplay:function(p,h,b){if(!(0>["column","bar","line"].indexOf(b))){h.stack||(h.stack=!1);if("column"===b||"bar"===b||"line"===b&&h.area)p.stack=h.stack;"line"!==b||h.area||(h.area=!1);"line"===b&&(p.area=h.area);p.scale=!1}}})})},"jimu/clientStatisticsUtils":function(){define(["dojo/_base/lang","moment/moment","./_chartHelpUtils","jimu/utils","libs/moment/twix"],function(A,n,v,r){window.makeTwix&&window.makeTwix(n);return{getClietStatisticsData:function(k){var p=k.mode;
if("feature"===p)return this.getFeatureModeStatisticsData(k);if("category"===p)return this.getCategoryModeStatisticsData(k);if("count"===p)return this.getCountModeStatisticsData(k);if("field"===p)return this.getFieldModeStatisticsData(k)},sortClientStatisticsData:function(k,p,h){return this.sortStatisticsData(k,p.mode,p.sortOrder,p.clusterField,p.valueFields,h)},getDataForMaxLabels:function(k,p){return k&&k.length&&"number"===typeof p&&0<p&&p<k.length?k.slice(0,p):k},getFeatureModeStatisticsData:function(k){var p=
k.features,h=k.clusterField,b=k.valueFields;k=void 0!==k.showNullLabelData?k.showNullLabelData:!0;var a=this.separateFeaturesWhetherFieldValueNull(h,p);p=a.notNullLabelFeatures;a=a.nullLabelFeatures;p=k?p.concat(a):p;k=[];return k=p.map(function(e){var f=e.attributes,c=f&&f[h];c=this.convertingNullOrUndefinedAsPlaceholders(c);e={label:c,values:[],features:[e]};e.values=b.map(function(d){return f[d]});return e}.bind(this))},getCategoryModeStatisticsData:function(k){function p(g){var l=[],q=null;for(m in g){q=
g[m];var m=this.keepFieldValueType(m,q.type,e);var u=this.calcValuesByFeaturesForCatetoryMode(b,q,h,a,c);l.push({label:m,values:u,features:q.features,unit:q.unit})}return l}var h=k.hasStatisticsed,b=k.valueFields,a=k.operation,e=k.dateConfig,f=void 0!==k.showNullLabelData?k.showNullLabelData:!0,c=k.nullValue,d=[];d=this.getCluseringObj(k.clusterField,k.features,e);k=d.nullLabel;d=p.call(this,d.notNullLabel);k=p.call(this,k);return d=f?d.concat(k):d},getCountModeStatisticsData:function(k){function p(f){var c=
[],d=null;for(l in f){d=f[l];var g=this.calcValuesByFeaturesForCountMode(d,e);var l=this.keepFieldValueType(l,d.type,h);c.push({label:l,values:g,features:d.features,unit:d.unit})}return c}var h=k.dateConfig,b=void 0!==k.showNullLabelData?k.showNullLabelData:!0,a=[],e=k.hasStatisticsed&&!h;a=this.getCluseringObj(k.clusterField,k.features,h);k=a.nullLabel;a=p.call(this,a.notNullLabel);k=p.call(this,k);return a=b?a.concat(k):a},calcValuesByFeaturesForCountMode:function(k,p){return p?k.features.map(function(h){var b=
(h=h.attributes)&&h.STAT_COUNT;"undefined"===typeof b&&(b=h.stat_count);return b}.bind(this)):[k.count]},getFieldModeStatisticsData:function(k){var p=k.hasStatisticsed,h=k.features,b=k.operation,a=k.nullValue,e=[];return e=k.valueFields.map(A.hitch(this,function(f){var c=this.getValuesByValueFieldForFieldMode(f,h,p,b);c=this.calcValueByOperation(c,b,a);return{label:f,values:[c]}}))},getValueFromAttributes:function(k,p,h,b){if(k)return h="average"===h?"avg":h,b?(b=r.upperCaseString(p+"_"+h),b=k[b],
"undefined"===typeof b&&(b=r.lowerCaseString(p+"_"+h),b=k[b])):b=k[p],b},getValuesByValueFieldForFieldMode:function(k,p,h,b){return p.map(A.hitch(this,function(a){return this.getValueFromAttributes(a.attributes,k,b,h)}))},sortStatisticsData:function(k,p,h,b,a,e){function f(d,g,l){if("category"===g)if(l.isLabelAxis)l.isLabelAxis&&(q=d.label);else if(l.field||1!==d.values.length){l=a.indexOf(l.field);var q=d.values[l]}else q=d.values[0];else if("count"===g)q=d.label,q=l.isLabelAxis?q:d.values[0];else if("field"===
g)q=l.isLabelAxis?d.label:d.values[0];else if("feature"===g){var m=l.field;d&&d.features&&d.features[0]&&(g=d.features[0].attributes)&&(l.isLabelAxis?q=g[b]:m?q=g[m]:d.values.length&&(q=d.values[0]))}return q}if(!h)return k;var c=h.isAsc;if(!Array.isArray(k))return k;k.sort(function(d,g){d=f(d,p,h);g=f(g,p,h);if(h.isLabelAxis&&e&&"field"!==p){var l={};l[b]=d;l=r.getDisplayValueForCodedValueOrSubtype(e,b,l);var q={};q[b]=g;q=r.getDisplayValueForCodedValueOrSubtype(e,b,q);l.isCodedValueOrSubtype&&q.isCodedValueOrSubtype&&
(d=l.displayValue,g=q.displayValue)}"_NULL\x26UNDEFINED_"===d&&(d=Infinity);"_NULL\x26UNDEFINED_"===g&&(g=Infinity);r.isNumberOrNumberString(d)&&(d=Number(d));r.isNumberOrNumberString(g)&&(g=Number(g));l=d>g?c:!c;Infinity===d?l=c:Infinity===g&&(l=!c);q=0;d!==g&&(q=l?1:-1);return q}.bind(this));return k},convertingNullOrUndefinedAsPlaceholders:function(k){return null===k||void 0===k?"_NULL\x26UNDEFINED_":k},keepFieldValueType:function(k,p,h){"number"===p&&(k=Number(k));h&&"_NULL\x26UNDEFINED_"!==k&&
(k=Number(k));return k},calcValuesByFeaturesForCatetoryMode:function(k,p,h,b,a){return k.map(function(e){e=this.getValuesByValueFieldForCategoryMode(e,p.features,h,b);return this.calcValueByOperation(e,b,a)}.bind(this))},getValuesByValueFieldForCategoryMode:function(k,p,h,b){return p.map(A.hitch(this,function(a){return this.getValueFromAttributes(a.attributes,k,b,h)}))},_isNumber:function(k){return"[object number]"===Object.prototype.toString.call(k).toLowerCase()},_getDateUnit:function(k,p){var h=
p;"automatic"===p&&(p=n(k[0]).local(),k=n(k[1]).local(),k=Math.round(k.diff(p,"minute",!0)),0<=k&&1>=k?h="second":1<k&&60>=k?h="minute":60<k&&1440>=k?h="hour":1440<k&&43200>=k?h="day":43200<k&&518400>=k?h="month":518400<k&&(h="year"));return h},_getTimeRange:function(k,p){var h=k.map(A.hitch(this,function(b){return(b=b.attributes)&&b[p]}));h=h.filter(function(b){return!!b});k=Math.min.apply(Math,h);h=Math.max.apply(Math,h);return[k,h]},_getTimeTwixs:function(k,p,h){if(0>"year quarter month day hour minute second automatic".split(" ").indexOf(h))return console.log("Invaild data formatter: "+
h),!1;k=this._getTimeRange(k,p);if(k[0]===k[1])return!1;h=this._getDateUnit(k,h);p=this.getStartTimeByUnit(k[0],h);p=n(p).local();k=n(k[1]).local();k=p.twix(k).split(1,h);p={startValue:k[k.length-1].end().valueOf(),endValue:Infinity};k.push(p);return{twixs:k,dateUnit:h}},getCluseringObj:function(k,p,h){var b={},a={};h?(k=this.getClusteringObjForDateType(k,p,h),b=k.notNullLabel,a=k.nullLabel):(b=this.separateFeaturesWhetherFieldValueNull(k,p),p=b.nullLabelFeatures,b=this.getClusteringObjByField(b.notNullLabelFeatures,
k),a=this.getClusteringObjByField(p,k));return{notNullLabel:b,nullLabel:a}},calcValueByOperation:function(k,p,h){if(k&&1===k.length){if(!h)return k[0];if(!this._isNumber(k[0]))return 0}if(0!==k.length){var b=0;"max"===p?b=-Infinity:"min"===p&&(b=Infinity);k=h?k.map(function(e){this._isNumber(e)||(e=0);return e}.bind(this)):k.filter(function(e){return this._isNumber(e)}.bind(this));var a=0;k.forEach(A.hitch(this,function(e){a++;"average"===p||"sum"===p?b+=e:"max"===p?b=Math.max(b,e):"min"===p&&(b=
Math.min(b,e))}));0<a?"average"===p&&(b/=a):b=null}else b=null;return b},getClusteringObjByField:function(k,p){var h={};k.forEach(A.hitch(this,function(b){var a=b.attributes;a=a&&a[p];var e=typeof a;a=this.convertingNullOrUndefinedAsPlaceholders(a);var f=null;h.hasOwnProperty(a)?(f=h[a],f.features.push(b),f.count++):(f={count:1,features:[b],type:e},h[a]=f)}));return h},_removeNaNDataItem:function(k){return k.filter(function(p){var h=!1;p=p.category;"number"===typeof p&&(h=isNaN(p));return!h})},separateFeaturesWhetherFieldValueNull:function(k,
p){var h=[],b=[];Array.isArray(p)&&(b=p.filter(function(a){var e=a.attributes;e=e&&e[k];if(null===e||void 0===e)h.push(a);else return!0}));return{nullLabelFeatures:h,notNullLabelFeatures:b}},getStartTimeByUnit:function(k,p){return n(k).startOf(p).utc().valueOf()},_mosaicFieldNameWithOperatorAndUpper:function(k,p){return r.upperCaseString(k+"_"+p)},_mosaicFieldNameWithOperatorAndLower:function(k,p){return r.lowerCaseString(k+"_"+p)},getClusteringObjForDateType:function(k,p,h){function b(w,z,y){w[z]?
(w=w[z],w.count+=y.count,w.features=w.features.concat(y.features)):w[z]=y}function a(w,z,y,C){z=Number(z);C=this.getStartTimeByUnit(z,C);w[C]?(w=w[C],w.count+=y.count,w.features=w.features.concat(y.features)):(y.originTime=z,w[C]=y)}function e(w,z,y){y[w[0].attributes[z]]={count:1,features:w};return y}var f=this.separateFeaturesWhetherFieldValueNull(k,p),c=f.notNullLabelFeatures;p={};p=this.getClusteringObjByField(f.nullLabelFeatures,k);f={};if(1===c.length)f=e.call(this,c,k,f,h);else if(0!==c.length){var d=
this._getTimeTwixs(c,k,h.minPeriod);if(d){var g={},l=d.dateUnit;d.twixs.forEach(function(w){var z="undefined"!==typeof w.startValue?w.startValue:w.start().valueOf(),y="undefined"!==typeof w.endValue?w.endValue:w.end().valueOf(),C={unit:l,count:0,features:[]};c.forEach(A.hitch(this,function(D){var t=D.attributes;t=t&&t[k];t>=z&&t<y&&(C.features.push(D),C.count++)}));h.isNeedFilled?b.call(this,g,z,C):0<C.count&&b.call(this,g,z,C)}.bind(this));d={};var q;for(q in g)if(g.hasOwnProperty(q)){var m=g[q];
a.call(this,d,q,m,l)}for(q in d)if(d.hasOwnProperty(q)){m=d[q];var u=m.originTime;delete m.originTime;f[u]=m}}else f=e.call(this,c,k,f,h)}return{notNullLabel:f,nullLabel:p}},_mapOptions:function(k,p){"feature"===p?(p=k.labelField,delete k.labelField,k.clusterField=p,k.showNullLabelData=!0):"category"===p?(p=k.categoryField,delete k.categoryField,k.clusterField=p,k.showNullLabelData=!0):"count"===p?(p=k.categoryField,delete k.categoryField,k.clusterField=p):"field"===p&&(k.showNullLabelData=!0);return k},
_mapDataItemForStatisticsChart:function(k,p){var h,b,a;return k.map(function(e){h=e.label;delete e.label;b=e.values;delete e.values;a=e.features;delete e.features;"feature"===p?(e.category=h,e.valueFields=b,e.dataFeatures=a):"category"===p?(e.category=h,e.valueFields=b,e.dataFeatures=a):"count"===p?(e.fieldValue=h,e.count=b[0],e.dataFeatures=a):"field"===p&&(e.label=h,e.value=b[0]);return e})},getFeatureModeStatisticsInfo:function(k){var p=new v({featureLayer:k.layerDefinition,popupInfo:k.popupFieldInfosObj});
k=this._mapOptions(k,"feature");var h=k.clusterField,b=this.getFeatureModeStatisticsData(k);b=this.sortStatisticsData(b,"feature",k.sortOrder,h);b=this.getDataForMaxLabels(b,k.maxLabels);b=p.getBestLabelDisplay(b,h,"feature");b=p.keepStatisticsDataBestDecimalPlace(k,b,"feature");return this._mapDataItemForStatisticsChart(b,"feature")},getCategoryModeStatisticsInfo:function(k){var p=new v({featureLayer:k.layerDefinition,popupInfo:k.popupFieldInfosObj});k=this._mapOptions(k,"category");var h=k.clusterField,
b=this.getCategoryModeStatisticsData(k);b=this.sortStatisticsData(b,"category",k.sortOrder,null,k.valueFields);b=this._removeNaNDataItem(b);b=this.getDataForMaxLabels(b,k.maxLabels);b=p.getBestLabelDisplay(b,h,"category");b=p.keepStatisticsDataBestDecimalPlace(k,b,"category");return this._mapDataItemForStatisticsChart(b,"category")},getCountModeStatisticsInfo:function(k){var p=new v({featureLayer:k.layerDefinition,popupInfo:k.popupFieldInfosObj});k=this._mapOptions(k,"count");var h=k.clusterField,
b=this.getCountModeStatisticsData(k);b=this.sortStatisticsData(b,"count",k.sortOrder);b=this.getDataForMaxLabels(b,k.maxLabels);b=p.getBestLabelDisplay(b,h,"count");return this._mapDataItemForStatisticsChart(b,"count")},getFieldModeStatisticsInfo:function(k){var p=new v({featureLayer:k.layerDefinition,popupInfo:k.popupFieldInfosObj});k=this._mapOptions(k,"category");var h=this.getFieldModeStatisticsData(k);h=this.sortStatisticsData(h,"field",k.sortOrder);h=this.getDataForMaxLabels(h,k.maxLabels);
h=p.getBestLabelDisplay(h,null,"field");h=p.keepStatisticsDataBestDecimalPlace(k,h,"field");return this._mapDataItemForStatisticsChart(h,"field")}}})},"jimu/_chartHelpUtils":function(){define("dojo/_base/declare jimu/utils dojo/_base/lang dojo/_base/config dojo/_base/Color ./_dateFormat moment/moment esri/lang esri/graphic esri/layers/GraphicsLayer esri/symbols/jsonUtils".split(" "),function(A,n,v,r,k,p,h,b,a,e,f){return A(null,{constructor:function(c){c&&v.mixin(this,c);this.popupInfo||(this.popupInfo=
{});this.featureLayer||(this.featureLayer={});this._cachePlaces={}},setLayerFeatureLayer:function(c){this.featureLayer=c;this.map&&((c=this.map.getLayer("chart_highLight_GraphicLayer"))?this.graphicLayer=c:(this.graphicLayer=new e({id:"chart_highLight_GraphicLayer"}),this.map.addLayer(this.graphicLayer)),this.graphicLayer.clear())},setLayerObject:function(c){this.layerObject=c},setSymbolLayer:function(c){this.symbolLayer=c},setPopupInfo:function(c){this.popupInfo=c},setMap:function(c){this.map=c},
getBestLabelDisplay:function(c,d,g){if("feature"===g)return this.betterDataCategoryForFeatureMode(c,d);if("category"===g||"count"===g)return this.betterDataCategoryForCategoryCountMode(c,d);if("field"===g)return this.betterDataCategoryForFieldMode(c)},betterDataCategoryForFeatureMode:function(c,d){c.forEach(v.hitch(this,function(g){g.label=this.getBestDisplayValue(d,g.label)}));return c},betterDataCategoryForFieldMode:function(c){c.forEach(v.hitch(this,function(d){d.label=this.getFieldAlias(d.label)}));
return c},betterDataCategoryForCategoryCountMode:function(c,d){c.forEach(v.hitch(this,function(g){g.label="undefined"!==typeof g.unit?this.getCategoryDisplayForDateUnit(g.label,g.unit):this.getBestDisplayValue(d,g.label)}));return c},keepStatisticsDataBestDecimalPlace:function(c,d,g){if("count"===g)return d;var l=c.valueFields,q=c.operation,m=c.hasStatisticsed;this.cacheDecimalPlace(l,c.features,this.popupInfo,q,m);"feature"===g||"category"===g?d.forEach(v.hitch(this,function(u){u.originalValues=
v.clone(u.values);l.forEach(v.hitch(this,function(w,z){var y=u.values[z];y=this.formatedValueDecimalplace(w,y,q,m);u.values[z]=y}))})):"field"===g&&l.forEach(v.hitch(this,function(u){d.some(v.hitch(this,function(w){if(w.label===u){var z=w.values[0];z=this.formatedValueDecimalplace(u,z,q,m);w.values[0]=z;return!0}return!1}))}));return d},formatedValueDecimalplace:function(c,d,g,l){this.isIntegerNumberField(c)&&"average"===g?d=this.handleValueMaxDecimalplaces(d,6):this.isFloatNumberField(c)&&(c=this.getFieldDecimalPlaceFromCache(c),
d=this.formatValuePlaces(d,c),l&&!this.popupInfo&&(d=this.handleValueMaxDecimalplaces(d,6)));return d},isIntegerNumberField:function(c){if(!this.featureLayer||!this.featureLayer.fields)return!1;var d=["esriFieldTypeSmallInteger","esriFieldTypeInteger"];return this.featureLayer.fields.some(v.hitch(this,function(g){return g.name===c&&0<=d.indexOf(g.type)}))},formatValuePlaces:function(c,d){return"number"!==typeof d||!c&&0!==c?c:c.toFixed(d)},handleValueMaxDecimalplaces:function(c,d){c=Number(c);if("number"!==
typeof c)return c;var g=0,l=c.toString().split(".");1===l.length?g=0:2===l.length&&(g=l[1].length);return 0<g?(g>d&&(g=d),c=c.toFixed(g),parseFloat(c)):c},getFieldDecimalPlaceFromCache:function(c){var d;this._cachePlaces&&(c=this._cachePlaces[c],"number"===typeof c&&(d=c));return d},getValueFromAttributes:function(c,d,g,l){if(c)return g="average"===g?"avg":g,l?(l=n.upperCaseString(d+"_"+g),l=c[l],"undefined"===typeof l&&(l=n.lowerCaseString(d+"_"+g),l=c[l])):l=c[d],l},cacheDecimalPlace:function(c,
d,g,l,q){this._cachePlaces={};if(c&&c.length){var m=c.filter(v.hitch(this,function(w){return this.isFloatNumberField(w)})),u={};m.forEach(v.hitch(this,function(w){u[w]=[]}));d&&0<d.length&&d.forEach(v.hitch(this,function(w){var z=w.attributes;z&&m.forEach(v.hitch(this,function(y){var C=this.getValueFromAttributes(z,y,l,q);"number"===typeof C&&u[y].push(C)}))}));m.forEach(v.hitch(this,function(w){var z=this.getFieldInfoFromPopupInfo(g,w);this._cachePlaces[w]=0;var y=u[w];if(0<y.length)try{var C=this.getBestDecimalPlaceForArrayValues(y);
this._cachePlaces[w]=C}catch(D){this._cachePlaces[w]=0,console.error(D)}g&&((z=this.getPlacesFromPopupFieldInfo(z))||0===z)&&(this._cachePlaces[w]=z)}))}},getBestDecimalPlaceForArrayValues:function(c){var d=0,g={};c.forEach(function(m){m=m.toString().split(".");var u=null;1===m.length?u=0:2===m.length&&(u=m[1].length);null!==u&&(g[u]=void 0===g[u]?1:g[u]+1)});c=null;for(var l in g){l=parseInt(l,10);var q=g[l];c?q>c.value&&(c={key:l,value:q}):c={key:l,value:q}}c&&(d=parseInt(c.key,10));return d},getFieldInfoFromPopupInfo:function(c,
d){var g=null;return c&&c.fieldInfos?g=c.fieldInfos.filter(function(l){return l.fieldName===d})[0]:g},getPlacesFromPopupFieldInfo:function(c){return c&&c.format&&c.format.places},getAliasFromPopupInfo:function(c,d){var g=d;if(!c||!c.fieldInfos)return g;(c=c.fieldInfos)&&0<c.length&&c.some(function(l){if(l.fieldName===d)return g=l.label,!0});return g},isFloatNumberField:function(c){if(!this.featureLayer||!this.featureLayer.fields)return!1;var d=["esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(v.hitch(this,
function(g){return g.name===c&&0<=d.indexOf(g.type)}))},isNumberField:function(c){if(!this.featureLayer||!this.featureLayer.fields)return!1;var d=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(v.hitch(this,function(g){return g.name===c&&0<=d.indexOf(g.type)}))},isDateField:function(c){return(c=this.getFieldInfo(c))?"esriFieldTypeDate"===c.type:!1},getFieldInfo:function(c){if(this.featureLayer)for(var d=this.featureLayer.fields,
g=0;g<d.length;g++)if(d[g].name===c)return d[g];return null},getFieldAliasArray:function(c){return c.map(v.hitch(this,function(d){return this.getFieldAlias(d)}))},getBestDisplayValue:function(c,d){if("_NULL\x26UNDEFINED_"===d)return"null";if(this.isDateField(c))return this.formatedDateByPopupInfoOrLocal(c,d);var g={};g[c]=d;g=n.getDisplayValueForCodedValueOrSubtype(this.layerObject||this.featureLayer,c,g);g.isCodedValueOrSubtype?d=g.displayValue:this.isNumberField(c)&&(c=this.getFieldInfoFromPopupInfo(this.popupInfo,
c),d=n.localizeNumberByFieldInfo(d,c));return d},formatedDateByPopupInfoOrLocal:function(c,d,g){g||(g=this.popupInfo);a:{if(g&&b.isDefined(g.fieldInfos))for(var l=0,q=g.fieldInfos.length;l<q;l++){var m=g.fieldInfos[l];if(m.fieldName===c){c=m.format;break a}}c=null}d=Number(d);return n.fieldFormatter.getFormattedDate(d,c)},getDisplayValForNumberCodedValueSubTypes:function(c,d){var g=this.tryLocaleNumber(d,c);if(this.featureLayer&&this.featureLayer.typeIdField===c){var l=this.featureLayer.types;if(l&&
0<l.length&&(l=l.filter(v.hitch(this,function(q){return q.id===d})),0<l.length))return g=l[0].name}(c=this.getFieldInfo(c))&&c.domain&&(c=c.domain.codedValues)&&0<c.length&&c.some(function(q){return q.code===d?(g=q.name,!0):!1});return g},tryLocaleNumber:function(c,d){var g=c;if(b.isDefined(c)&&isFinite(c))try{if(d&&this.isNumberField(d)){var l=this.popupInfo[d];var q=l&&v.exists("format.places",l)?n.localizeNumberByFieldInfo(c,l):n.localizeNumber(c)}else q=c;"string"===typeof q&&(g=q)}catch(m){console.error(m)}return g+
""},getCategoryDisplayForDateUnit:function(c,d){if(!d)return c;c=Number(c);return this._getFormatteredDate(c,d)},_getFormatteredDate:function(c,d){var g=this._getDateTemplate(d);0<=["year","quarter","month","day"].indexOf(d)?g=n.localizeDate(new Date(c),{selector:"date",datePattern:g.date}):(d=n.localizeDate(new Date(c),{selector:"date",datePattern:g.date}),c=h(c).format(g.time),g=d+g.connector+c);return g},_getDateTemplate:function(c){var d=p[r.locale];(d=d||{},d.date)||(d.date={"short":"short"});
d&&!d.time&&(d.time={medium:"HH:mm:ss a"});d&&!d.connector&&(d.connector=" ");d&&!d.sNoDay&&(d.sNoDay="MMM, y");var g={};"year"===c?g.date="y":"quarter"===c?g.date="y q":"month"===c?g.date=d.date.sNoDay:"day"===c?g.date=d.date["short"]:"hour"===c?(g.date=d.date["short"],g.time="HH a",g.connector=d.connector):"minute"===c?(g.date=d.date["short"],g.time="HH:mm a",g.connector=d.connector):"second"===c&&(g.date=d.date["short"],g.time=d.time.medium,g.connector=d.connector);return g},_getSymbolLayerGraphics:function(c,
d){if(!this.symbolLayer)return null;if(!this.symbolLayer.refreshInterval&&this.symbolGraphics&&!1===this.symbolGraphics.filterByExtent&&!1===this.symbolGraphics.useSelection)return this.symbolGraphics.graphics;var g=null;this.map&&this.symbolLayer&&(g=n.getClientFeaturesFromMap(this.map,this.symbolLayer,d,!!c));this.symbolGraphics={filterByExtent:c,useSelection:d,graphics:g};return g},_isContainAttr:function(c,d){if("object"!==typeof d||"object"!==typeof d)return!1;var g=!0;Object.keys(d).some(function(l){return d[l]!==
c[l]?(g=!1,!0):!1});return g},_getFeaturesByAttr:function(c,d){if(d){var g=null;d.some(function(l){return this._isContainAttr(l.attributes,c)?(g=l,!0):!1}.bind(this));return g}},_getFeaturesByClusterfield:function(c,d,g,l){var q=this._getSymbolLayerGraphics(g);if(q)return g=null,c=this.clientStatisticsUtils.getCluseringObj(c,q,l),(d=v.mixin(c.notNullLabel,c.nullLabel)[d])&&d.features&&d.features.length&&(g=d.features),g},_getFeatureForSerieData:function(c,d,g){var l=d.clusterField,q=d.mode,m=d.filterByExtent;
d=d.useSelection;var u={};u[l]=c.name;if("feature"===q)return this._getFeatureBySerieDataItem(c,l,g,m,d);if("category"===q||"count"===q)return new a(null,null,u)},_getFeatureBySerieDataItem:function(c,d,g,l,q){var m={};m[d]=c.name;m[g]=Number("undefined"!==typeof c.originValue?c.originValue:c.value);c=this._getSymbolLayerGraphics(l,q);return this._getFeaturesByAttr(m,c)},_getFeatureBycsuDataItem:function(c,d,g,l,q,m){var u={};u[d]=c.label;c=c.originalValues||c.values;u[g]=Number(c&&c[l]);g=this._getSymbolLayerGraphics(q,
m);return this._getFeaturesByAttr(u,g)},bindChartEvent:function(c,d,g){var l=d.filterByExtent,q=d.useSelection,m=d.clusterField,u=d.valueFields,w=null;"undefined"!==d.dateConfig&&(w=d.dateConfig);this.highLightColor=d.highLightColor||"#00ffff";var z=d.mode;if(this.map&&0!==g.length){d=v.hitch(this,function(C){if("series"===C.componentType){var D=null,t=this._getSymbolLayerGraphics(l,q);if("field"===z)D=t;else if(t=g[C.dataIndex])if("feature"===z){var x=C.seriesIndex,B=u[x];if(!B)return;(t=this._getFeatureBycsuDataItem(t,
m,B,x,l,q))&&(D=[t])}else t=t.label,"undefined"!==typeof t&&(D=this._getFeaturesByClusterfield(m,t,l,w));D&&"mouseover"===C.type&&this.graphicLayer&&(this._mouseoverFeatures=D,this._mouseOverChartItem(D))}});var y=v.hitch(this,function(){this._mouseoverFeatures&&this.graphicLayer&&(this._mouseOutChartItem(this._mouseoverFeatures),this._mouseoverFeatures=null)});[{name:"mouseover",callback:d},{name:"mouseout",callback:y}].forEach(v.hitch(this,function(C){c.chart.off(C.name);c.chart.on(C.name,v.hitch(this,
function(D){"mouseover"===D.type?(this._hasTriggerMouseoverEvent||(this._hasTriggerMouseoverEvent=!0,C.callback(D)),setTimeout(v.hitch(this,function(){this._hasTriggerMouseoverEvent=!1},500))):"mouseout"===D.type&&C.callback(D)}))}))}},_createHighLightFeatures:function(c,d){c.forEach(v.hitch(this,function(g){g=new a(g.geometry,d);this.graphicLayer.add(g)}))},_mouseOverChartItem:function(c){if(this.featureLayer&&this.featureLayer.getMap()&&this.featureLayer.visible){var d=n.getTypeByGeometryType(this.featureLayer.geometryType);
c.forEach(v.hitch(this,function(q){q._originalSymbol=q.symbol}));var g=null;if("point"===d)g=this._getHighLightMarkerSymbol(),this._createHighLightFeatures(c,g);else if("polyline"===d)g=this._getHighLightLineSymbol(this.highLightColor),this._createHighLightFeatures(c,g);else if("polygon"===d){var l=this.featureLayer.getSelectedFeatures()||[];c.forEach(v.hitch(this,function(q){var m=0<=l.indexOf(q);m=this._getHighLightFillSymbol(this.featureLayer,q,m);q=new a(q.geometry,m);this.graphicLayer.add(q)}))}}},
_mouseOutChartItem:function(){this.graphicLayer&&this.graphicLayer.clear()},_getHighLightMarkerSymbol:function(){var c=f.fromJson({color:[255,255,255,0],size:18,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSSquare",outline:{color:[0,0,128,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}});c.setSize(30);c.outline.setColor(new k(this.highLightColor));return c},_getHighLightLineSymbol:function(c){var d=f.fromJson({color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"});d.setColor(new k(c||
this.highLightColor));return d},_getDefaultHighLightFillSymbol:function(){var c=f.fromJson({color:[0,255,255,128],outline:{color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"});c.outline.setColor(new k(this.highLightColor));return c},_getSymbolByRenderer:function(c,d){var g=this._getDefaultHighLightFillSymbol(),l=this.getVisualVariableByType("colorInfo",c.visualVariables);if(l){if(c=c.getColor(d,{colorInfo:l}))c=v.clone(c),g.setColor(c)}else g=
c.getSymbol(d);return g},getVisualVariableByType:function(c,d){return d&&(d=d.filter(function(g){return g.type===c&&!g.target}),d.length)?d[0]:null},_getHighLightFillSymbol:function(c,d,g){var l=null,q=d.symbol;l=c.renderer;!q&&l&&(q=this._getSymbolByRenderer(l,d));q&&"function"===typeof q.setOutline?(l=f.fromJson(q.toJson()),d=1.5,q.outline&&0<q.outline.width&&(d=q.outline.width+1),g=this._getHighLightLineSymbol(g?"#ff0000":"#00ffff"),g.setWidth(d),l.setOutline(g)):l=this._getDefaultHighLightFillSymbol();
return l},_isNumberField:function(c){var d=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(v.hitch(this,function(g){return g.name===c&&0<=d.indexOf(g.type)}))},getFieldAlias:function(c){var d;this.popupInfo&&(d=this.getAliasFromPopupInfo(this.popupInfo,c));d||(d=c,(c=this.getFieldInfo(c))&&c.alias&&(d=c.alias));return d},_removeDuplicateElementForObjArray:function(c){if(!Array.isArray(c))return c;var d=[];d.push(c[0]);
c.forEach(function(g){d.some(function(l){return n.isEqual(l,g)})||d.push(g)});return d},assigneeSettingColor:function(c,d,g){if(!d||!d.length)return d;var l=c.seriesStyle;if(!l)return d;"layerSymbol"===l.type?d=this._assigneeStyleLayerSymbolColor(d,g):"series"===l.type?d=this._assigneeStyleSeriesColor(c,d):"custom"===l.type&&(d=this._assigneeStyleCustomColor(c,d));return d},_assigneeStyleCustomColor:function(c,d){c=c.seriesStyle;if(!c||!c.customColor)return d;var g=c.customColor;c=g.categories;g=
g.others;if(!(c&&c.length||g&&g.length))return d;g&&g.length&&this._setCustomOthersColor(g,d);c&&c.length&&this._setCustomCategoriesColor(c,d)},_setCustomCategoriesColor:function(c,d){d.forEach(function(g){(g=g.data)&&g.length&&g.forEach(function(l){if("undefined"!==typeof l.name){var q=this._getMatchingCustomColor(l.name,c);this.setColorToDataItem(l,q)}}.bind(this))}.bind(this))},_getMatchingCustomColor:function(c,d){var g=!1;if(!d||!d.length)return g;(d=d.filter(function(l){return l.id===c})[0])&&
d.color&&(g=d.color);return g},_getMatchingCustomLabel:function(c,d){var g=!1;if(!d||!d.length)return g;(d=d.filter(function(l){return l.id===c})[0])&&d.label&&(g=d.label);return g},_setCustomOthersColor:function(c,d){this._setOtherColorForCustomColor(c,d);this._setNullLabelColorForCustomColor(c,d)},_setOtherColorForCustomColor:function(c,d){(c=c.filter(function(g){return"others"===g.id})[0])&&c.color&&this.setColorToAllSerieDataItem(d,c.color)},_setNullLabelColorForCustomColor:function(c,d){if((c=
c.filter(function(l){return"null"===l.id})[0])&&c.color){var g=c.color;d.forEach(function(l){(l=l.data)&&l.length&&l.forEach(function(q){q.name&&"_NULL\x26UNDEFINED_"===q.name&&this.setColorToDataItem(q,g)}.bind(this))}.bind(this))}},_assigneeStyleSeriesColor:function(c,d){var g=c.seriesStyle;if(!g||!g.styles||!g.styles[0])return d;var l=c.mode,q=c.area;return d.map(function(m){var u=null,w=m.type;if("field"===l)"line"===w?(u=g.styles[0].style,m=this._setStyleToSerie(u,m,q)):(w=m.data)&&w[0]&&(m.data=
w.map(function(z){u=this._getMatchingStyle(z.name,g);return this.setStyleToSerieDataItem(u,z)}.bind(this)));else if("column"===w||"bar"===w||"line"===w)"count"===l?(u=g.styles[0].style,m=this._setStyleToSerie(u,m,q)):"undefined"!==typeof m.name&&(u=this._getMatchingStyle(m.name,g))&&(m=this._setStyleToSerie(u,m,q));return m}.bind(this))},_assigneeStyleLayerSymbolColor:function(c,d){c.forEach(function(g){var l=g.name;(g=g.data)&&g.length&&g.forEach(function(q){var m=[this._getFeatureForSerieData(q,
d,l)];if(m=this._getSymbolColorForDataItem(m))q.itemStyle={color:m}}.bind(this))}.bind(this))},_setStyleToSerie:function(c,d,g){d.itemStyle||(d.itemStyle={});c&&"undefined"!==typeof c.color&&(Array.isArray(c.color)?d.itemStyle.color=c.color[0]:d.itemStyle.color=c.color);c&&"undefined"!==typeof c.opacity&&(g?(d.areaStyle||(d.areaStyle={}),d.areaStyle.opacity=1-parseFloat(c.opacity/10)):d.itemStyle.opacity=1-parseFloat(c.opacity/10));return d},_getMatchingStyle:function(c,d){var g=null;d=d.styles;if(!d||
!d[0]||""===c)return g;d.forEach(function(l){l.name===c&&(g=l.style)});return g},_getSymbolColorForDataItem:function(c){var d=!1;if(!this.symbolLayer)return d;c=c&&c[0];return c?d=this._getColorForFeature(this.symbolLayer.renderer,c):d},_getColorForFeature:function(c,d){var g=!1,l=this.getVisualVariableByType("colorInfo",c.visualVariables);l?(c=c.getColor(d,{colorInfo:l}))&&(g=this._convertToEchartsRbga(c)):(c=c.getSymbol(d))&&"undefined"!==typeof c.color&&(g=this._convertToEchartsRbga(c.color));
return g},_convertToEchartsRbga:function(c){if(!c||"undefined"===typeof c.r)return c;c=window.JSON.parse(window.JSON.stringify(c));var d="rgba("+(c.r+",");d+=c.g+",";d+=c.b+",";return d+=c.a+")"},getColors:function(c,d){var g=[];if(2===c.length)g=this._createGradientColors(c[0],c[c.length-1],d);else{for(var l=Math.ceil(d/c.length),q=0;q<l;q++)g=g.concat(c);g=g.slice(0,d)}return g},_createGradientColors:function(c,d,g){var l=[];c=new k(c);var q=new k(d);d=(q.r-c.r)/g;var m=(q.g-c.g)/g;q=(q.b-c.b)/
g;for(var u=new k,w=0,z=0,y=0,C=0;C<g;C++)w=parseInt(c.r+d*C,10),z=parseInt(c.g+m*C,10),y=parseInt(c.b+q*C,10),u.setColor([w,z,y]),l.push(u.toHex());return l},setStyleToSerieDataItem:function(c,d){d.itemStyle||(d.itemStyle={});c&&"undefined"!==typeof c.color&&(Array.isArray(c.color)?d.itemStyle.color=c.color[0]:d.itemStyle.color=c.color);c&&"undefined"!==typeof c.opacity&&(d.itemStyle.opacity=1-parseFloat(c.opacity/10));return d},setColorToSerie:function(c,d){if(!c||"object"!==typeof c||Array.isArray(c))return c;
c.itemStyle||(c.itemStyle={});d&&(c.itemStyle.color=d)},setColorToDataItem:function(c,d){if(!c||"object"!==typeof c)return c;c.itemStyle||(c.itemStyle={});d&&(c.itemStyle.color=d)},setColorToAllSerieDataItem:function(c,d){c.forEach(function(g){(g=g.data)&&g.length&&g.forEach(function(l){this.setColorToDataItem(l,d)}.bind(this))}.bind(this))},_updateDataItemNameForCustom:function(c,d,g){if("undefined"!==typeof c.name){var l=c.name;"_NULL\x26UNDEFINED_"===c.name&&d?l=d:(d=this._getMatchingCustomLabel("undefined"!==
typeof c.originName?c.originName:c.name,g))&&(l=d);c.name=l}return l},_updateSerieDataItemName:function(c,d,g){var l=c.name,q=l;q=c.unit&&l?this.getCategoryDisplayForDateUnit(l,c.unit):"field"!==d?this.getBestDisplayValue(g,l):this.getFieldAlias(l);c.name=q;c.originName=l;return q},updateChartSeriesDisplayName:function(c,d,g){var l=g.clusterField,q=g.mode;g=c.series;var m=[];d=d.seriesStyle;var u;g.forEach(function(y,C){y.name&&(y.name=this.getFieldAlias(y.name));(y=y.data)&&y.length&&y.forEach(function(D,
t){u=this._updateSerieDataItemName(D,q,l);0===C&&(m[t]=u)}.bind(this))}.bind(this));if("custom"===d.type){if((d=d.customColor)&&d.categories&&d.categories.length){var w=d.categories;d=d.others||[];if((d=d.filter(function(y){return"null"===y.id})[0])&&d.label)var z=d.label}g.forEach(function(y,C){(y=y.data)&&y.length&&y.forEach(function(D,t){u=this._updateDataItemNameForCustom(D,z,w);0===C&&(m[t]=u)}.bind(this))}.bind(this))}c.labels=null;c.labels=m}})})},"jimu/_dateFormat":function(){define([],function(){return{ar:{date:{"short":"d/M/y",
medium:"dd/MM/y","long":"d MMMM. y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"M/y"},time:{"short":"h:mm a",medium:"h:mm:ss a"}},bs:{date:{"short":"d.M.yy.",medium:"d. MMM. y.","long":"d. MMMM y.",onlyDate:"d. MMM.",mNoDay:"MMM. y.",sNoDay:"M.yy"}},cs:{date:{"short":"dd.MM.yy",medium:"d. M. y",onlyDate:"d. M.",mNoDay:"M. y",sNoDay:"MM.yy"}},da:{date:{"short":"dd/MM/y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM/y"}},de:{date:{"short":"dd.MM.yy",medium:"dd.MM.y",onlyDate:"dd.MM."},
connector:" , ",mNoDay:"MM.y",sNoDay:"MM.yy"},el:{date:{"short":"d/M/yy",medium:"d MMM y",onlyDate:"d MMM"},connector:" , ",mNoDay:"MMM y",sNoDay:"M/yy"},en:{date:{"short":"M/d/yy",medium:"MMM d, y",onlyDate:"MMM d",mNoDay:"MMM, y",sNoDay:"M/yy"}},es:{date:{"short":"d/M/yy",medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},et:{date:{"short":"d.MM.y",medium:"d. MMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"H:mm",medium:"H:mm:ss"}},fi:{date:{"short":"d.M.y",medium:"d.M.y",
onlyDate:"d.M.",mNoDay:"M.y",sNoDay:"M.y"},connector:" 'klo' "},fr:{date:{"short":"dd/MM/y",medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/y"},connector:" '\u00e0' "},he:{date:{"short":"dd/MM/yy",medium:"d '\u05d1'MMM y",onlyDate:"d '\u05d1'MMM",mNoDay:"'\u05d1'MMM y",sNoDay:"MM/yy"},connector:" , "},hr:{date:{"short":"d.M.y",medium:"d. MMM y.",onlyDate:"d. MMM",mNoDay:"MMM y.",sNoDay:"M.y"}},id:{"short":"dd/MM/yy",date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/yy"}},
it:{date:{medium:"dd MMM y","long":"d MMMM y",onlyDate:"dd MMM",mNoDay:"MMM y",sNoDay:"MM/yy"},connector:" , "},ja:{date:{medium:"y/MM/dd",onlyDate:"MM/dd",mNoDay:"y/MM",sNoDay:"y/MM"},time:{"short":"a h:mm",medium:"a h:mm:ss"}},ko:{date:{medium:"y. M. d.",onlyDate:"M. d.",mNoDay:"y. M.",sNoDay:"yy. M."}},lt:{date:{medium:"y-MM-dd","long":"y 'm'. MMMM d 'd'.",onlyDate:"MM-dd",mNoDay:"y-MM",sNoDay:"y-MM"},time:{medium:"HH:mm:ss"}},lv:{date:{"short":"dd.MM.y",medium:"y. 'gada' d. MMM.","long":"y. 'gada' d. MMMM",
onlyDate:"d. MMM.",mNoDay:"y. 'gada' MMM.",sNoDay:"MM.y"}},nb:{date:{"short":"dd.MM.y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"HH:mm",medium:"HH:mm:ss"},connector:" , "},nl:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM-yy"}},pl:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},"pt-br":{date:{"short":"dd/MM/y",medium:"d 'de' MMM 'de' y",onlyDate:"d 'de' MMM",mNoDay:"MMM 'de' y",sNoDay:"MM/y"}},
"pt-pt":{date:{medium:"dd/MM/y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"MM/yy"}},ro:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},ru:{date:{"short":"dd.MM.y",medium:"d MMM y '\u0433.'",onlyDate:"d MMM",mNoDay:"MMM y '\u0433.'",sNoDay:"MM.y"},connector:" , "},sr:{date:{medium:"dd.MM.y.",onlyDate:"dd.MM.",mNoDay:"MM.y.",sNoDay:"M.yy."},time:{"short":"HH:mm",medium:"HH:mm:ss"}},sv:{date:{medium:"d MMM. y",onlyDate:"d MMM.",mNoDay:"MMM. y",sNoDay:"y-MM"}},th:{date:{medium:"d MMM y",
onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},tr:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"}},vi:{date:{"short":"dd/MM/y",medium:"d MMM, y","long":"'Ng\u00e0y' dd 'th\u00e1ng' MM 'n\u0103m' y",onlyDate:"d MMM",mNoDay:"MMM, y",sNoDay:"MM/y"},time:{"short":"hh:mm a",medium:"hh:mm:ss a"},connector:" , "},"zh-cn":{date:{"short":"y/M/d",medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}},"zh-hk":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",
onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"M/y"}},"zh-tw":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}}}})},"libs/moment/twix":function(){(function(){var A=[].slice;var n="undefined"!==typeof module&&null!==module&&null!=module.exports&&"function"===typeof require;var v=function(k){return"[object Array]"===Object.prototype.toString.call(k)};var r=function(k){if(null==k)throw Error("Can't find moment");var p=
function(){function h(b,a,e,f){var c;null==f&&(f={});"string"!==typeof e&&(f=null!=e?e:{},e=null);"boolean"===typeof f&&(f={allDay:f});this._oStart=k(b,e,f.parseStrict);this._oEnd=k(a,e,f.parseStrict);this.allDay=null!=(c=f.allDay)?c:!1;this._mutated()}h._extend=function(){var b,a;var e=arguments[0];var f=2<=arguments.length?A.call(arguments,1):[];var c=0;for(a=f.length;c<a;c++){var d=f[c];for(b in d)"undefined"!==typeof d[b]&&(e[b]=d[b])}return e};h.prototype.start=function(){return this._start.clone()};
h.prototype.end=function(){return this._end.clone()};h.prototype.isSame=function(b){return this._start.isSame(this._end,b)};h.prototype.length=function(b,a){null==a&&(a=!1);return this._displayEnd.diff(this._start,b,a)};h.prototype.count=function(b){var a=this.start().startOf(b);return this.end().startOf(b).diff(a,b)+1};h.prototype.countInner=function(b){var a=this._inner(b);var e=a[0];a=a[1];return e>=a?0:a.diff(e,b)};h.prototype.iterate=function(b,a,e){var f=this._prepIterateInputs(b,a,e);b=f[0];
a=f[1];e=f[2];var c=this.start().startOf(a);var d=this.end().startOf(a);this.allDay&&(d=d.add(1,"d"));f=function(g){return function(){return!g.allDay&&c<=d&&(!e||!c.isSame(d)||g._end.hours()>e)||g.allDay&&c<d}}(this);return this._iterateHelper(a,c,f,b)};h.prototype.iterateInner=function(b,a){a=this._prepIterateInputs(b,a);b=a[0];a=a[1];var e=this._inner(a,b);var f=e[0];var c=e[1];return this._iterateHelper(a,f,function(){return f<c},b)};h.prototype.humanizeLength=function(){return this.allDay?this.isSame("d")?
"all day":this._start.from(this.end().add(1,"d"),!0):this._start.from(this._end,!0)};h.prototype.asDuration=function(b){b=this._end.diff(this._start);return k.duration(b)};h.prototype.isPast=function(){return this._lastMilli<k()};h.prototype.isFuture=function(){return this._start>k()};h.prototype.isCurrent=function(){return!this.isPast()&&!this.isFuture()};h.prototype.contains=function(b){k.isMoment(b)||(b=k(b));return this._start<=b&&this._lastMilli>=b};h.prototype.isEmpty=function(){return this._start.isSame(this._displayEnd)};
h.prototype.overlaps=function(b){return this._displayEnd.isAfter(b._start)&&this._start.isBefore(b._displayEnd)};h.prototype.engulfs=function(b){return this._start<=b._start&&this._displayEnd>=b._displayEnd};h.prototype.union=function(b){var a=this.allDay&&b.allDay;return new h(this._start<b._start?this._start:b._start,this._lastMilli>b._lastMilli?a?this._end:this._displayEnd:a?b._end:b._displayEnd,a)};h.prototype.intersection=function(b){var a=this.allDay&&b.allDay;return new h(this._start>b._start?
this._start:b._start,this._lastMilli<b._lastMilli?a?this._end:this._displayEnd:a?b._end:b._displayEnd,a)};h.prototype.xor=function(){var b,a,e;var f=1<=arguments.length?A.call(arguments,0):[];var c=0;var d=null;var g=[];var l=function(){var z;var y=[];var C=0;for(z=f.length;C<z;C++)e=f[C],e.allDay&&y.push(e);return y}().length===f.length;var q=[];var m=[this].concat(f);var u=a=0;for(b=m.length;a<b;u=++a){var w=m[u];q.push({time:w._start,i:u,type:0});q.push({time:w._displayEnd,i:u,type:1})}q=q.sort(function(z,
y){return z.time-y.time});u=0;for(w=q.length;u<w;u++)a=q[u],1===a.type&&--c,c===a.type&&(d=a.time),c===(a.type+1)%2&&(d&&((b=g[g.length-1])&&b._end.isSame(d)?(b._oEnd=a.time,b._mutated()):(b=l?a.time.clone().subtract(1,"d"):a.time,d=new h(d,b,l),d.isEmpty()||g.push(d))),d=null),0===a.type&&(c+=1);return g};h.prototype.difference=function(){var b;var a=1<=arguments.length?A.call(arguments,0):[];var e=this.xor.apply(this,a).map(function(d){return function(g){return d.intersection(g)}}(this));var f=
[];a=0;for(b=e.length;a<b;a++){var c=e[a];!c.isEmpty()&&c.isValid()&&f.push(c)}return f};h.prototype.split=function(){var b,a,e,f,c;var d=1<=arguments.length?A.call(arguments,0):[];var g=e=this.start();k.isDuration(d[0])?b=d[0]:!k.isMoment(d[0])&&!v(d[0])&&"object"===typeof d[0]||"number"===typeof d[0]&&"string"===typeof d[1]?b=k.duration(d[0],d[1]):c=v(d[0])?d[0]:d;c&&(c=function(){var m;var u=[];var w=0;for(m=c.length;w<m;w++)f=c[w],u.push(k(f));return u}(),c=function(){var m;var u=[];var w=0;for(m=
c.length;w<m;w++)a=c[w],a.isValid()&&a>=e&&u.push(a);return u}().sort(function(m,u){return m.valueOf()-u.valueOf()}));if(b&&0===b.asMilliseconds()||c&&0===c.length)return[this];var l=[];var q=0;for(d=this._displayEnd;e<d&&(null==c||c[q]);)g=b?e.clone().add(b):c[q].clone(),g=k.min(d,g),e.isSame(g)||l.push(k.twix(e,g)),e=g,q+=1;!g.isSame(this._displayEnd)&&c&&l.push(k.twix(g,this._displayEnd));return l};h.prototype.divide=function(b){return this.split(this.length()/b,"ms").slice(0,+(b-1)+1||9E9)};h.prototype.isValid=
function(){return this._start.isValid()&&this._end.isValid()&&this._start<=this._displayEnd};h.prototype.equals=function(b){return b instanceof h&&this.allDay===b.allDay&&this._start.valueOf()===b._start.valueOf()&&this._end.valueOf()===b._end.valueOf()};h.prototype.toString=function(){return"{start: "+this._start.format()+", end: "+this._end.format()+", allDay: "+(this.allDay?"true":"false")+"}"};h.prototype.toArray=function(b,a,e){b=this.iterate(b,a,e);for(a=[];b.hasNext();)a.push(b.next());return a};
h.prototype.simpleFormat=function(b,a){var e={allDay:"(all day)",template:h.formatTemplate};h._extend(e,a||{});b=e.template(this._start.format(b),this._end.format(b));this.allDay&&e.allDay&&(b+=" "+e.allDay);return b};h.prototype.format=function(b){var a;if(this.isEmpty())return"";var e={groupMeridiems:!0,spaceBeforeMeridiem:!0,showDayOfWeek:!1,hideTime:!1,hideYear:!1,implicitMinutes:!0,implicitDate:!1,implicitYear:!0,yearFormat:"YYYY",monthFormat:"MMM",weekdayFormat:"ddd",dayFormat:"D",meridiemFormat:"A",
hourFormat:this._start.localeData()._longDateFormat.LT[0],minuteFormat:"mm",allDay:"all day",explicitAllDay:!1,lastNightEndsAt:0,template:h.formatTemplate};h._extend(e,b||{});b=[];var f=e.hourFormat&&"h"===e.hourFormat[0];var c=this._start.localeData()._longDateFormat.L;var d=c.indexOf("M")<c.indexOf("D");var g=0<e.lastNightEndsAt&&!this.allDay&&this.end().startOf("d").valueOf()===this.start().add(1,"d").startOf("d").valueOf()&&12<this._start.hours()&&this._end.hours()<e.lastNightEndsAt;var l=!e.hideDate&&
(!e.implicitDate||this.start().startOf("d").valueOf()!==k().startOf("d").valueOf()||!(this.isSame("d")||g));c=!(this.allDay||e.hideTime);this.allDay&&this.isSame("d")&&(e.implicitDate||e.explicitAllDay)&&b.push({name:"all day simple",fn:function(){return e.allDay},pre:" ",slot:0});!l||e.hideYear||e.implicitYear&&this._start.year()===k().year()&&this.isSame("y")||b.push({name:"year",fn:function(D){return D.format(e.yearFormat)},pre:d?", ":" ",slot:4});c&&l&&b.push({name:"month-date",fn:function(D){return D.format(d?
e.monthFormat+" "+e.dayFormat:e.dayFormat+" "+e.monthFormat)},ignoreEnd:function(){return g},pre:" ",slot:2});!c&&l&&b.push({name:"month",fn:function(D){return D.format(e.monthFormat)},pre:" ",slot:d?2:3});!c&&l&&b.push({name:"date",fn:function(D){return D.format(e.dayFormat)},pre:" ",slot:d?3:2});l&&e.showDayOfWeek&&b.push({name:"day of week",fn:function(D){return D.format(e.weekdayFormat)},pre:" ",slot:1});e.groupMeridiems&&f&&!this.allDay&&!e.hideTime&&b.push({name:"meridiem",fn:function(D){return D.format(e.meridiemFormat)},
slot:6,pre:e.spaceBeforeMeridiem?" ":""});this.allDay||e.hideTime||b.push({name:"time",fn:function(D){var t=0===D.minutes()&&e.implicitMinutes&&f?D.format(e.hourFormat):D.format(e.hourFormat+":"+e.minuteFormat);!e.groupMeridiems&&f&&(e.spaceBeforeMeridiem&&(t+=" "),t+=D.format(e.meridiemFormat));return t},slot:5,pre:", "});var q=[];var m=[];var u=[];var w=!0;var z=function(D){return function(t){var x=t.fn(D._start);var B=t.ignoreEnd&&t.ignoreEnd()?x:t.fn(D._end);var E={format:t,value:function(){return x}};
if(B===x&&w)return u.push(E);w&&(w=!1,u.push({format:{slot:t.slot,pre:""},value:function(){return e.template(C(q),C(m,!0).trim())}}));q.push(E);return m.push({format:t,value:function(){return B}})}}(this);l=0;for(a=b.length;l<a;l++)c=b[l],z(c);var y=!0;var C=function(D,t){var x;var B=!0;var E="";var F=D.sort(function(H,I){return H.format.slot-I.format.slot});D=0;for(x=F.length;D<x;D++){var G=F[D];y||(E=B&&t?E+" ":E+G.format.pre);E+=G.value();B=y=!1}return E};return C(u)};h.prototype._iterateHelper=
function(b,a,e,f){return{next:function(){if(e()){var c=a.clone();a.add(f,b);return c}return null},hasNext:e}};h.prototype._prepIterateInputs=function(){var b,a,e;var f=1<=arguments.length?A.call(arguments,0):[];if("number"===typeof f[0])return f;if("string"===typeof f[0]){var c=f.shift();var d=null!=(a=f.pop())?a:1;f.length&&(b=null!=(e=f[0])?e:!1)}k.isDuration(f[0])&&(c="ms",d=f[0].as(c));return[d,c,b]};h.prototype._inner=function(b,a){null==b&&(b="ms");null==a&&(a=1);var e=this.start();var f=this._displayEnd.clone();
e>e.clone().startOf(b)&&e.startOf(b).add(a,b);f<f.clone().endOf(b)&&f.startOf(b);var c=e.twix(f).asDuration(b).get(b);f.subtract(c%a,b);return[e,f]};h.prototype._mutated=function(){this._start=this.allDay?this._oStart.clone().startOf("d"):this._oStart;this._lastMilli=this.allDay?this._oEnd.clone().endOf("d"):this._oEnd;this._end=this.allDay?this._oEnd.clone().startOf("d"):this._oEnd;return this._displayEnd=this.allDay?this._end.clone().add(1,"d"):this._end};return h}();p._extend(k.locale(),{_twix:p.defaults});
p.formatTemplate=function(h,b){return h+" - "+b};k.twix=function(){return function(h,b,a){a.prototype=h.prototype;a=new a;h=h.apply(a,b);return Object(h)===h?h:a}(p,arguments,function(){})};k.fn.twix=function(){return function(h,b,a){a.prototype=h.prototype;a=new a;h=h.apply(a,b);return Object(h)===h?h:a}(p,[this].concat(A.call(arguments)),function(){})};k.fn.forDuration=function(h,b){return new p(this,this.clone().add(h),b)};k.duration.fn&&(k.duration.fn.afterMoment=function(h,b){return new p(h,
k(h).clone().add(this),b)},k.duration.fn.beforeMoment=function(h,b){return new p(k(h).clone().subtract(this),h,b)});return k.twixClass=p};if(n)return module.exports=r(require("moment/moment"));this.moment?this.Twix=r(this.moment):"undefined"!==typeof moment&&null!==moment&&(this.Twix=r(moment));this.makeTwix=r}).call(this)},"jimu/dijit/Chart":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/_base/html dojo/Evented libs/echarts/echarts jimu/utils ./_chartUtils ./_Gauge ./_ChartOptionFactory libs/echarts/light libs/echarts/dark".split(" "),
function(A,n,v,r,k,p,h,b,a,e){return A([n,k],{baseClass:"jimu-dijit-chart",templateString:"\x3cdiv\x3e\x3c/div\x3e",declaredClass:"jimu.dijit.chart",config:null,postCreate:function(){this.inherited(arguments);this._initChart()},updateConfig:function(f){if(!f||!this.chart)return!1;var c=this.chart.getOption(),d=this._isSameNumberSeriesItems(c,f);c=!this.preview&&d?this.getDatazoomRatio(c):null;this.config=f;this._specialThemeByConfig(f);d=this._chartFactory(f);this.chart.setOption(d,!0);this._settingByGrid(f,
d,c);return!0},_settingByGrid:function(f,c,d){if("gauge"===f.type)return this._resetGaugePosition(f);var g=this.chartUtils.getAxisZeroPosition();f.layout=this.chartUtils.calcDefaultLayout(f);this.chartUtils.isAxisChart(f)&&(c=this.chartUtils.settingGrid(c,f),c=this.chartUtils.settingDataZoom(c,f,g,d));c=this.chartUtils.settingChartLayout(c,f);this.chart.setOption(c,!1)},_resetGaugePosition:function(f){this._resetGaugeGrid(f);this._resetGaugeGraphic(f)},setConfig:function(f){if(!f)return!1;this.config=
f;this._specialThemeByConfig(this.config);this.clear();var c=this._chartFactory(this.config);this.chart.setOption(c,!0);this._setAixsGrid(f,c);this._resetGaugePosition(f,c);return!0},destroy:function(){this._offEvents();this.clear();this.inherited(arguments)},_chartFactory:function(f){return this.option=this.chartOptionFactory.produceOption(f)},bindEvents:function(f){this.chart&&f.events&&f.events.length&&(this._offEvents(),f.events.forEach(v.hitch(this,function(c){this.chart.on(c.name,c.callback)})))},
_offEvents:function(){this.config.events&&this.config.events[0]&&this.config.events.forEach(v.hitch(this,function(f){this.chart.off(f.name)}))},getDataURL:function(){if(this.chart)return this.chart.getDataURL()},clear:function(){this.chart&&this.chart.clear()},resize:function(f,c){this.chart&&(r.setStyle(this.domNode,{width:f||"100%",height:c||"100%"}),this.chart.resize(),this._resetGaugePosition(this.config))},getDatazoomRatio:function(f){return(f=f&&f.dataZoom&&f.dataZoom[0])?[f.start,f.end]:null},
_isSameNumberSeriesItems:function(f,c){return(f&&f.series&&f.series[0]&&f.series[0].data&&f.series[0].data.length)===(c&&c.series&&c.series[0]&&c.series[0].data&&c.series[0].data.length)},_resizeDataZoom:function(){var f=this.option,c=this.config;if(f&&c){var d=this.chartUtils.getAxisZeroPosition();f=this.chartUtils.settingDataZoom(f,c,d);this.chart.setOption(f)}},_setAixsGrid:function(f,c){this.chartUtils.isAxisChart(f)&&(c=this.chartUtils.settingGrid(c,f),this.chart.setOption(c,!1))},_resetGaugeGraphic:function(f){"gauge"===
f.type&&this.gauge.resetGraphic(f)},_resetGaugeGrid:function(f){"gauge"===f.type&&this.gauge.resetGrid(f)},_specialChartTheme:function(){this.chart&&(this.chart._theme.tooltip.axisPointer={type:"cross",label:{show:!0,precision:2,formatter:function(f){return"number"===typeof f.value?(f=parseFloat(f.value).toFixed(2),this.chartUtils.tryLocaleNumber(f)):f.value}.bind(this)},lineStyle:{color:"#27727B",type:"dashed"},crossStyle:{color:"#27727B"},shadowStyle:{color:"rgba(200,200,200,0.3)"}},this.chart._theme.valueAxis||
(this.chart._theme.valueAxis={}),this.chart._theme.valueAxis.axisLabel||(this.chart._theme.valueAxis.axisLabel={}),this.chart._theme.valueAxis.axisLabel.formatter=function(f){return h.localizeNumber(f)})},_specialThemeByConfig:function(f){this._initChartTheme();f.color&&f.color[0]&&(this.chart._theme.color=f.color);this.chart._theme.tooltip.confine=!0;var c="percent"===f.stack;this.chart._theme.tooltip.formatter=function(d){return this.chartUtils.handleToolTip(d,null,!1,c)}.bind(this)},_initChartTheme:function(){this.chart&&
(this.chart._theme||(this.chart._theme={}),this.chart._theme.tooltip||(this.chart._theme.tooltip={}),this.chart._theme.valueAxis||(this.chart._theme.valueAxis={}),this.chart._theme.valueAxis.axisLabel||(this.chart._theme.valueAxis.axisLabel={}))},_initChart:function(){this.chart=p.init(this.domNode,this.config&&this.config.theme||"light");this.chartUtils=new b({chart:this.chart});this.gauge=new a({chart:this.chart,chartUtils:this.chartUtils});this.chartOptionFactory=new e({chart:this.chart,gauge:this.gauge,
chartUtils:this.chartUtils});this._specialChartTheme(this.config)}})})},"jimu/dijit/_chartUtils":function(){define("dojo/_base/declare jimu/utils esri/lang dojo/_base/lang libs/echarts/echarts dojo/i18n!dojo/cldr/nls/number".split(" "),function(A,n,v,r,k,p){var h={curved:{name:"",type:"gauge",center:["50%","60%"],startAngle:200,endAngle:-20,axisLine:{lineStyle:{color:[[.31,"#5CB4CA"],[1,"#E5E5E5"]],shadowColor:"rgba(0, 0, 0, 0.5)",shadowBlur:0}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{distance:-52,
textStyle:{color:"#000"}},pointer:{length:"65%",width:5},itemStyle:{opacity:.7},detail:{show:!0,offsetCenter:[0,"68%"],textStyle:{color:"#24B5CC"}},title:{show:!1},data:[{value:0}],animationEasingUpdate:"bounceOut",animationDurationUpdate:500},vertical:{yAxis:{show:!0,offset:-10,type:"value",interval:1,scale:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal"}},splitLine:{show:!1}},xAxis:{show:!1,
type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{color:"#E5E5E5"},barGap:"-100%",data:[100],z:1},{name:"",type:"bar",barWidth:30,label:{show:!0,position:"insideTopLeft",offset:[30,-15],textStyle:{}},data:[{value:40,label:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},itemStyle:{}}],itemStyle:{color:"#24B5CC"},z:10}]},horizontal:{xAxis:{show:!0,offset:-27,type:"value",scale:!1,interval:1,axisTick:{show:!1},
axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{color:"#E5E5E5"},barGap:"-100%",data:[100],z:1},{name:"",type:"bar",barWidth:30,label:{show:!0,position:"top",offset:[20,0],textStyle:{}},data:[{value:40,label:{textStyle:{color:"#24B5CC",fontStyle:"normal",
fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},itemStyle:{}}],itemStyle:{color:"#24B5CC"},z:10}]}};return A([],{constructor:function(b){this.chart=b&&b.chart;this.horIconUrl="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjdweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA3IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3NS4wMDAwMDAsIC0yOTcuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNTAwMDAwLCAxNzAuNTQzODAzKSByb3RhdGUoLTE4MC4wMDAwMDApIHRyYW5zbGF0ZSgtMi41MDAwMDAsIC0xNzAuNTQzODAzKSAiIHBvaW50cz0iNSAxNzAuNTQzODAzIC0xLjcwNTMwMjU3ZS0xMyAxNzQuMDQzODAzIC0xLjY5NjQyMDc4ZS0xMyAxNjcuMDQzODAzIj48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
this.verIconUrl="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI4cHgiIHZpZXdCb3g9IjAgMCA1IDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3Ni4wMDAwMDAsIC0zMjQuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwLjYyODk1MiwgMTcwLjQ1ODY1NCkgcm90YXRlKC05MC4wMDAwMDApIHRyYW5zbGF0ZSgtMzAuNjI4OTUyLCAtMTcwLjQ1ODY1NCkgIiBwb2ludHM9IjMzLjEyODk1MjMgMTcwLjQ1ODY1NCAyOC4xMjg5NTIzIDE3My45NTg2NTQgMjguMTI4OTUyMyAxNjYuOTU4NjU0Ij48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
this.verIconUrlRTL="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI3cHgiIHZpZXdCb3g9IjAgMCA1IDciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkFydGJvYXJkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIxLjAwMDAwMCwgLTQ0Ny4wMDAwMDApIiBmaWxsPSIjOTM5MzkzIj4NCiAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJUcmlhbmdsZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIzLjUwMDAwMCwgNDUwLjUwMDAwMCkgcm90YXRlKC0xODAuMDAwMDAwKSB0cmFuc2xhdGUoLTEyMy41MDAwMDAsIC00NTAuNTAwMDAwKSAiIHBvaW50cz0iMTI2IDQ1MC41IDEyMSA0NTQgMTIxIDQ0NyI+PC9wb2x5Z29uPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+";
b=r.clone(h);this.curved=b.curved;this.vertical=b.vertical;this.horizontal=b.horizontal;this.unitDistance=23;this.defultGrid={top:10,bottom:10,left:10,right:10,containLabel:!0}},getAxisZeroPosition:function(){if(!this.chart)return!1;try{var b=this.chart.convertToPixel({xAxisIndex:0,yAxisIndex:0},[0,0])}catch(c){}if(!b)return{};var a=b[0];b=b[1];var e=this.chart.getHeight(),f=this.chart.getWidth();return{left:a,right:f-a,top:b,bottom:e-b}},getTextWidth:function(b,a){if(!b&&0!==b)return 0;var e=(this.getTextWidth.canvas||
(this.getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");e.font=a;return e.measureText(b).width},getHeightByFontSize:function(b){b=Math.round(b);if("number"!==typeof b||6>b||40<b)return 0;var a=0;b-=6;switch(!0){case 7>=b:a=1*b;break;case 8<=b&&11>=b:a=b-1+2;break;case 12<=b&&15>=b:a=b-2+4;break;case 16<=b&&19>=b:a=b-3+6;break;case 20<=b&&21>=b:a=b-4+8;break;case 22<=b&&23>=b:a=b-5+8;break;case 24<=b&&27>=b:a=b-6+10;break;case 28<=b&&31>=b:a=b-7+12;break;case 32<=b&&34>=b:a=b-
8+14}return 8+a},tryLocaleNumber:function(b){var a=b;if(v.isDefined(b)&&isFinite(b))try{var e=n.localizeNumber(b);"string"===typeof e&&(a=e)}catch(f){console.error(f)}return a+""},isStrictNaN:function(b){return"number"===typeof b&&isNaN(b)},isNumberString:function(b){if(!b)return!1;b=Number(b);return"number"!==typeof b||isNaN(b)?!1:!0},isLocaleNumberString:function(b){if(!b)return!1;if(this.isNumberString(b))return!0;b=b.replace(new RegExp("\\"+p.group,"g"),"");return this.isNumberString(b)?!0:!1},
localizeNumberForDigitSeparator:function(b,a){if(!this.isLocaleNumberString(b))return b;var e=new RegExp("\\"+p.group,"g");return b.toString().match(e)?a?b:b.toString().replace(e,""):this._localizeNumberForDigitSeparator(b,a)},_localizeNumberForDigitSeparator:function(b,a){b=n.localizeNumber(b);return!1===a?b.toString().replace(new RegExp("\\"+p.group,"g"),""):b},isAxisChart:function(b){return"column"===b.type||"bar"===b.type||"line"===b.type},isBaseChartType:function(b){return this.isAxisChart(b)||
"pie"===b.type},_getTooltipDisplayValue:function(b,a){"number"===typeof Number(b)&&(b=a?n.convertNumberToPercentage(b):this.tryLocaleNumber(b));return b},generateToolTip:function(b,a,e,f,c){var d="";d=e?'\x3cdiv class\x3d"tooltip-tr reverse"\x3e':'\x3cdiv class\x3d"tooltip-tr"\x3e';e="";b.color&&"auto"!==b.color&&(e='\x3cdiv class\x3d"colorEl marginRight5" style\x3d"background-color:'+n.encodeHTML(b.color)+'"\x3e\x3c/div\x3e');d+=e;e="";"radar"!==b.seriesType&&this._isVaildValue(b.seriesName)?e=b.seriesName:
this._isVaildValue(c)&&(e=c);d=""===e?d+("\x3cdiv\x3e"+e+"\x3c/div\x3e"):d+("\x3cdiv\x3e"+e+"\x3c/div\x3e\x3cdiv\x3e : \x3c/div\x3e");c="null";this._isNotZeroBoolean(a)?c=a:this._isVaildValue(b.value)&&(c=b.value);d+="\x3cdiv\x3e"+this._getTooltipDisplayValue(c,f)+"\x3c/div\x3e";"pie"===b.seriesType&&(b=b.percent,b=this._isVaildValue(b)?b/100:0,d+='\x3cdiv class\x3d"space-left"\x3e('+n.convertNumberToPercentage(b)+")\x3c/div\x3e");return d+"\x3c/div\x3e"},handleToolTip:function(b,a,e,f,c){var d='\x3cdiv class\x3d"tooltip-div"\x3e';
Array.isArray(b)||(b=[b]);this._isVaildValue(b[0].name)&&(d+='\x3cdiv class\x3d"tr"\x3e'+b[0].name+"\x3c/div\x3e");b.forEach(function(g){d="radar"!==g.seriesType?d+this.generateToolTip(g,a,e,f,c):d+this._handleRadarTooltip(g,e,f,c)}.bind(this));return d+="\x3c/div\x3e"},_handleRadarTooltip:function(b,a,e,f){var c="";(b.value||[]).forEach(function(d,g){c+=this.generateToolTip(b,d,a,e,f[g])}.bind(this));return c},_isVaildValue:function(b){return"%00-"===encodeURI(b)?!1:this._isNotZeroBoolean(b)},_isNotZeroBoolean:function(b){return 0===
b?!0:!!b},settingAdvanceOption:function(b,a){a.advanceOption&&("object"===typeof a.advanceOption?r.mixin(b,a.advanceOption):"function"===typeof a.advanceOption&&a.advanceOption(b));return b},settingColor:function(b,a){a.color&&a.color[0]&&(b.color=a.color);return b},settingToolTip:function(b,a){var e=a.type;b.tooltip||(b.tooltip={});e={confine:!0,trigger:"radar"===e||"pie"===e?"item":"axis",axisPointer:"pie"!==e?{type:"line"===e?"cross":"shadow",snap:!0}:{type:""}};a=a.tooltip||e;b.tooltip.confine=
a.confine?a.confine:e.confine;b.tooltip.trigger=a.trigger?a.trigger:e.trigger;b.tooltip.axisPointer=a.axisPointer?a.axisPointer:e.axisPointer;return b},settingDataZoom:function(b,a,e,f){return this.isAxisChart(a)&&a.series&&a.series.length?a.dataZoom&&a.dataZoom.length?b=this._settingDataZoom(a,b,e,f):(b.dataZoom=[],b):b},_settingDataZoom:function(b,a,e,f){if(!this.chart)return a;var c=this.chart.getWidth(),d=b.series[0].data.length,g=b.series.length;d=b.stack?d:d*g;if(!d||!c)return a.dataZoom=[],
a;c="bar"!==b.type?window.isRTL?e.left:c-e.left-a.grid.right:e.top;var l=20>c/d;e=b.dataZoomOption&&b.dataZoomOption.mode||"AUTO";var q=0,m=100;f?(q=Number(f[0]),m=Number(f[1])):"AUTO"===e&&(q=0,m=c/(20*d),m=parseFloat(100*m,10).toFixed(3),m=100<m?100:m,m=0===m?.01:m);f=[];var u="bar"===b.type?"yAxisIndex":"xAxisIndex";f=b.dataZoom.map(r.hitch(this,function(w){w={type:w,show:l};w[u]=[0];w.start=q;w.end=m;w.showDataShadow=!1;w.realtime=!1;return w}));a.dataZoom=f;return a},mockChartDataWhenNoData:function(b){b&&
Array.isArray(b.labels)&&0===b.labels.length&&b.labels.push("");b&&Array.isArray(b.series)&&0<b.series.length&&b.series.forEach(function(a){a&&Array.isArray(a.data)&&0===a.data.length&&a.data.push(0)});return b},settingDefaultGrid:function(b){b.grid=r.clone(this.defultGrid);return b},settingGrid:function(b,a){if(!this.isAxisChart(a))return b;b.grid.containLabel=a.yAxis&&a.yAxis.show;var e=a.layout;if(!e||!e.length)return b;var f=0,c=0,d=0,g=0,l=1;e.forEach(function(w){w=w.layout&&w.layout.position;
if("xAixsName"===name||"yAixsName"===name)l=.7;"t"===w?f+=l:"b"===w?c+=l:"l"===w?d+=l:"r"===w&&(g+=l)}.bind(this));var q=r.clone(this.defultGrid);e=q.top||0;var m=q.bottom||0,u=q.left||0;q=q.right||0;e+=this.unitDistance*f;m+=this.unitDistance*c;u+=this.unitDistance*d;q+=this.unitDistance*g;a.yAxis&&!a.yAxis.show&&(m+=this.unitDistance);b.grid.top=e;b.grid.bottom=m;b.grid.left=u;b.grid.right=q;b=this._settingxAxisNameGap(b,a);return b=this._settingGridForMarkName(b,a)},_settingGridForMarkName:function(b,
a){var e=a.markLine,f=a.markArea,c=[],d=[];e&&e.data&&e.data.length&&e.data.forEach(function(g){this._hasEndPosName(g)&&c.push(g.name+"");this._hasStartPosName(g)&&d.push(g.name+"")}.bind(this));f&&f.data&&f.data.length&&f.data.forEach(function(g){g=g[0];this._hasOutRightAxisName(a.type,g)&&c.push(g.name+"");this._hasOutLeftAxisName(a.type,g)&&d.push(g.name+"")}.bind(this));if(!c.length&&!d.length)return b;if("bar"===a.type)return b.grid.top+=15,b;e=this._getyAxisLabelWidth(a);f=this._getMaxLengthString(c);
f=this.getTextWidth(f,"normal 12px sans-serif");window.isRTL?b.grid.left+=f:b.grid.right+=f;f=this._getMaxLengthString(d);f=this.getTextWidth(f,"normal 12px sans-serif");f-=e;if(0>=f)return b;f+=10;window.isRTL?b.grid.right=f:b.grid.left=f;return b},_getyAxisLabelWidth:function(b){var a=b&&b.yAxis;return a&&a.show?(b=this._getMaxData(b))||0===b?this.getTextWidth(b,"normal "+(a&&a.textStyle&&a.textStyle.fontSize||12)+"px sans-serif"):0:0},_getMaxData:function(b){if((b=b.series)&&b.length)return b=
b.map(function(a){if((a=a.data)&&a.length)return a.map(function(e){if("number"===typeof e)var f=e;else e&&"undefined"!==typeof e.value&&(f=e.value);return f=parseInt(f,10)})}).map(function(a){if(a.length)return Math.max.apply(Math,a)}),b.length&&Math.max.apply(Math,b)},_getMaxLengthString:function(b){return b.sort(function(a,e){a=this.getTextWidth(a);e=this.getTextWidth(e);return e-a}.bind(this))[0]},_hasOutRightAxisName:function(b,a){var e=a.name||0===a.name;a=a.label;var f=window.isRTL?"eft":"ight";
b=a&&a.position&&-1<a.position.indexOf("bar"===b?"op":f);a=a&&a.position&&-1<a.position.indexOf("inside");return e&&b&&!a},_hasOutLeftAxisName:function(b,a){var e=a.name||0===a.name;a=a.label;var f=window.isRTL?"ight":"eft";b=a&&a.position&&-1<a.position.indexOf("bar"===b?"op":f);a=a&&a.position&&-1<a.position.indexOf("inside");return e&&b&&!a},_hasEndPosName:function(b){var a=b.label;a=!a||!a.position||"end"===a.position;return(b.name||0===b.name)&&a},_hasStartPosName:function(b){var a=b.label;a=
!a||!a.position||"start"===a.position;return(b.name||0===b.name)&&a},_settingxAxisNameGap:function(b,a){if(!this.isAxisChart(a)||!b.xAxis)return b;a=this.getHeightByFontSize(a.xAxis&&a.xAxis.textStyle&&a.xAxis.textStyle.fontSize||12);b.xAxis.nameGap=10+a;return b},calcDefaultLayout:function(b){if(this.isBaseChartType(b)){var a=b.legend,e=b.xAxis,f=null;b=b.type;"pie"!==b&&(f="bar"!==b?{name:"dataZoom",layout:{position:"t",inner:!1}}:{name:"dataZoom",layout:{position:window.isRTL?"l":"r",inner:!1}});
b=null;a&&a.show&&(b={name:"legend",layout:{position:"b",inner:!1}});a=null;e&&e.show&&"undefined"!==typeof e.name&&(a={name:"xAxisName",layout:{position:"b",inner:!1}},b&&(a.layout.inner=!0));e=[];b&&e.push(b);f&&e.push(f);a&&e.push(a);return e.length&&e}},settingRenderOption:function(b,a){if("curved"===a.shape)return b.animationThreshold=99999999,b.hoverLayerThreshold=99999,b.progressiveThreshold=99999,b;b.hoverLayerThreshold=500;b.progressiveThreshold=500;b.progressive=100;b.animationThreshold=
500;return b},settingBackgroundColor:function(b,a){a.backgroundColor&&(b.backgroundColor=a.backgroundColor);return b},settingAxisChartAxis:function(b,a){var e=a.xAxis,f=a.yAxis,c={nameLocation:"center"},d={nameLocation:"center"};"column"===a.type||"line"===a.type&&a.labels?(c.data=a.labels,c.type="category",d.type="value"):"bar"===a.type&&a.labels&&(d.data=a.labels,d.type="category",c.type="value");if(e){c.name=e.name;c.show=!!e.show;c.axisLabel||(c.axisLabel={});e.textStyle&&(c.axisLabel=e.textStyle);
e.nameTextStyle&&(c.nameTextStyle=e.nameTextStyle);var g=e.format;g&&("int"===g.type?c.minInterval=1:"float"===g.type&&(c.minInterval=0),"undefined"!==typeof g.digitSeparator&&(c.axisLabel.formatter=function(q){return this.localizeNumberForDigitSeparator(q,g.digitSeparator)}.bind(this)))}if(f){d.show=!!f.show;f.textStyle&&(d.axisLabel=f.textStyle);var l=f.format;l&&("int"===l.type?d.minInterval=1:"float"===l.type&&(d.minInterval=0),"undefined"!==typeof l.digitSeparator&&(d.axisLabel.formatter=function(q){return this.localizeNumberForDigitSeparator(q,
l.digitSeparator)}.bind(this)))}b.xAxis=c;b.yAxis=d;return b},settingRadar:function(b,a){if("radar"!==a.type)return b;b.radar={nameGap:6,radius:"70%"};b.radar.axisLabel={show:!0,formatter:function(){}};a.radarShape&&(b.radar.shape=a.radarShape);a.indicator?(this._handleRadarIndicator(a),b.radar.indicator=a.indicator):console.error("No radar indicator");return b},_handleRadarIndicator:function(b){var a=b.series[0].data,e=[];b.indicator.forEach(function(f,c){if("undefined"!==typeof f.max)return f;e=
a.map(function(g){e.push(g.value[c])});var d=Math.max.apply(Math,e);f.max=d})},settingArea:function(b,a){if("line"!==a.type||!a.area)return b;b.series=b.series.map(function(e){e.areaStyle||(e.areaStyle={});"undefined"===typeof e.areaStyle.opacity&&(e.areaStyle.opacity=.4);e.sthisoth=!0;e.smoothMonotone="x";return e});return b},_mockNegativeValue:function(b){return b&&b[0]&&b[0].data?b.map(function(a){a.data=a.data.map(function(e,f){var c=0===f%2;e&&"undefined"!==typeof e.value?(f=e.value,f=Number(f),
e.value=c?-f:f):(f=Number(e),e=-(c?-f:f));return e});return a}):b},hasNegativeValue:function(b){if((b=b.series)&&b[0]&&b[0].data)return b.some(function(a){return a.data.some(function(e){e=e&&"undefined"!==typeof e.value?e.value:e;e=Number(e);return"number"===typeof e&&0>e})})},allNegativeValue:function(b){return(b=b.series)&&b[0]&&b[0].data?b.every(function(a){return a.data.every(function(e){e=e&&e.value?e.value:e;e=Number(e);return"number"===typeof e&&0>e})}):!1},settingStack:function(b,a){a=this._stackForPercent(a);
if("percent"===a.stack){var e=this.hasNegativeValue(a),f=this.allNegativeValue(a),c=0,d=1;e&&(c=-1,f&&(d=0));"bar"===a.type?(b.xAxis.max=d,b.xAxis.min=c):(b.yAxis.max=d,b.yAxis.min=c)}a.stack&&(b.series=b.series.map(function(g){g.stack="stack";return g}));return b},_stackForPercent:function(b){if("percent"!==b.stack)return b;var a=[];b.series.forEach(function(c){r.clone(c.data).forEach(function(d,g){a[g]||(a[g]=[]);(d=d&&"undefined"!==typeof d.value?d.value:d)||(d=0);a[g].push(d)})});var e=[];a.forEach(function(c,
d){e[d]||(e[d]=0);c.forEach(function(g){e[d]+=Math.abs(g)})});var f=a.map(function(c,d){return c.map(function(g){return 0===e[d]?null:0<=g?Math.abs(g)/e[d]:-Math.abs(g)/e[d]})});b.series=b.series.map(function(c,d){var g=r.clone(c.data);g=g.map(function(l,q){if(!l)return l;"undefined"!==typeof l.value?l.value=f[q][d]:l=f[q][d];return l});c.data=g;return c});return b},settingLegend:function(b,a){var e=a.legend;if(!e)return b.legend={show:!1},b;var f={show:e.show,type:"scroll",itemHeight:11,orient:"horizontal",
pageButtonPosition:"end",pageTextStyle:{color:"#939393"}};e.textStyle&&(f.textStyle=e.textStyle);f.formatter=function(c){c=c||"";return 25<c.length?k.format.truncateText(c,140,null,"\u2026"):c};f.tooltip={show:!0,confine:!1,formatter:function(c){c=c&&c.name||"";if(!(25>=c.length))return c}};b.legend=f;return b=this._handleLegendRTL(b,a)},_handleLegendRTL:function(b,a){if(!a.legend)return b;a={};window.isRTL?(a.x="right",a.pageButtonPosition="start"):(a.x="left",a.pageButtonPosition="end");b.legend=
r.mixin(b.legend,a);return b},settingScale:function(b,a){if(!a.scale)return b;if("bar"===a.type)b.xAxis.scale=!0;else if("line"===a.type||"column"===a.type)b.yAxis.scale=!0;return b},pieChartAvoidLegendLabelOverLap:function(b,a){if("pie"!==a.type)return b;var e=a.dataLabel&&a.dataLabel.show?.75:.85;a.legend&&a.legend.show&&(e-=.12);b.series[0].radius[1]=100*e+"%";return b},settingChartLayout:function(b,a){if(!this.isBaseChartType(a))return b;(a=a.layout)&&a.length&&a.forEach(function(e){this._assigneeLayout(b,
e)}.bind(this));return b},avoidAdjoiningColorSameForPie:function(b,a){if("pie"!==a.type||!b.color||2>=b.color.length)return b;b.series&&b.series[0]&&b.series.forEach(r.hitch(this,function(e){var f=e.data.length;0===(f-1)%b.color.length&&(e=e.data[f-1],e.itemStyle||(e.itemStyle={}),e.itemStyle.color||(e.itemStyle.color=b.color[1]))}));return b},_assigneeLayout:function(b,a){var e=a.name;if("xAxisName"!==e&&"yAxisName"!==e){var f=a.layout;a=this._getOperateObjByProperty(b,e);if(!a)return b;var c=this._getSubPosition(f&&
f.subPosition),d=f&&f.position;f=f&&f.inner;var g={};"l"===d?g.left=f?this.unitDistance+this.defultGrid.left-5:this.defultGrid.left-5:"r"===d?g.right=f?this.unitDistance+this.defultGrid.right-5:this.defultGrid.right-5:"t"===d?g.top=f?this.defultGrid.top+this.unitDistance-5:this.defultGrid.top-5:"b"===d&&(g.bottom=f?this.unitDistance+this.defultGrid.bottom-5:this.defultGrid.bottom-5);r.mixin(a,g);r.mixin(a,c);this._specialLegend(a,e,d);this._specialSliderDataZoom(a,e,d);return b}},_getSubPosition:function(b){if("l"===
b)return{left:this.defultGrid.left-5,right:"auto"};if("r"===b)return{right:this.defultGrid.right-5,left:"auto"};if("t"===b)return{top:this.defultGrid.top-5,bottom:"auto"};if("b"===b)return{bottom:this.defultGrid.bottom-5,top:"auto"}},_specialLegend:function(b,a,e){"legend"===a&&(b.orient="l"===e||"r"===e?"vertical":"horizontal")},_specialSliderDataZoom:function(b,a,e){"dataZoom"===a&&("l"===e||"r"===e?(b.orient="vertical",b.width=15):(b.orient="horizontal",b.height=15))},_getOperateObjByProperty:function(b,
a){if("dataZoom"===a)return this._getSliderDataZoom(b);if("legend"===a)return b.legend},_getSliderDataZoom:function(b){var a=null;(b=b.dataZoom)&&b.length&&b.some(function(e){return"slider"===e.type?(a=e,!0):!1});return a},settingAxisSeries:function(b,a){b=this._setTypeToSeries(b,a);b.series=a.series;return b},settingMarks:function(b,a){b=this.settingMarkLine(b,a);return b=this.settingMarkArea(b,a)},settingMarkLine:function(b,a){(a=a.markLine)&&a.data&&(a.silent=!0,a.data.forEach(function(e){e.label||
(e.label={show:!1,position:"end"});"undefined"!==typeof e.name&&(e.label.show=!0,e.label.formatter=e.name)}),b.series[0].markLine=r.clone(a));return b},settingMarkArea:function(b,a){a.markArea&&(this._handleMarkAreaRTL(a.markArea),a.markArea.silent=!0,b.series[0].markArea=a.markArea);return b},_handleMarkAreaRTL:function(b){window.isRTL&&b&&b.data&&b.data.length&&b.data.forEach(function(a){var e=(a=a&&a[0]&&a[0].label)&&a.position;e&&("left"===e?e="right":"right"===e?e="left":"insideLeft"===e?e="insideRight":
"insideRight"===e&&(e="insideLeft"),a.position=e)})},_settingSeriesDataLabel:function(b,a){a=a.dataLabel;if(!a)return b;var e={};e.show=!!a.show;"undefined"!==typeof a.textStyle&&(e.textStyle=a.textStyle);b.series.forEach(function(f){f.label=e});return b},settingRadarSeries:function(b,a){b=this._setTypeToSeries(b,a);b.series=a.series.map(r.hitch(this,function(e){e.data=this._handleSeriesDataForPieLikeType(e,a);return e=this._settingRaderSerie(e,a)}));return b},_settingRaderSerie:function(b,a){if("radar"!==
b.type)return b;var e=a.indicator.map(function(f){return f.name});b.tooltip={};b.tooltip.formatter=function(f){return this.handleToolTip(f,null,!1,!1,e)};return b},settingFunnelSeries:function(b,a){b=this._setTypeToSeries(b,a);b.series=a.series.map(r.hitch(this,function(e){e.data=this._handleSeriesDataForPieLikeType(e,a);return e=this._settingFunnelSerie(e,a)}));return b},_settingFunnelSerie:function(b,a){if("funnel"!==b.type)return b;b.minSize="0%";b.maxSize="100%";b.min=a.min.value;b.max=a.max.value;
b.sort=a.funnelSort||"descending";return b},settingPieSeries:function(b,a){b=this._setTypeToSeries(b,a);b.series=a.series.map(r.hitch(this,function(e){e.data=this._handleSeriesDataForPieLikeType(e,a);return e=this._settingPieSerie(e,a)}));return b},_settingPieSerie:function(b,a){if("pie"!==b.type)return b;var e=a.dataLabel&&a.dataLabel.show;b.selectedMode="single";b.selectedOffset=10;b.hoverOffset=5;b.radius=[0,"70%"];b.labelLine={show:!0,length:5,length2:5};b.labelLine.show="undefined"===typeof a.labelLine?
!0:a.labelLine;e||(b.labelLine.show=!1);"number"===typeof a.innerRadius&&(0>a.innerRadius&&(a.innerRadius=0),60<a.innerRadius&&(a.innerRadius=60),b.radius[0]=a.innerRadius+"%");"rose"===a.pieMode&&(b.roseType=a.roseType||"radius");return b=this._absoluteValueForPieChart(b)},_absoluteValueForPieChart:function(b){if(!b||!b.data||!b.data[0])return b;b.data=b.data.map(function(a){"number"===typeof a?a=Math.abs(a):"object"===typeof a&&"number"===typeof a.value&&(a.value=Math.abs(a.value));return a});return b},
_handleSeriesDataForPieLikeType:function(b,a){return b.data.map(r.hitch(this,function(e,f){var c={};e||"number"===typeof e?(c.value="undefined"!==typeof e.value?e.value:e,e.itemStyle&&(c.itemStyle||(c.itemStyle={}),c.itemStyle=r.mixin(c.itemStyle,e.itemStyle))):c.value=e;c.name=a.labels[f]||"";return c}))},_setTypeToSeries:function(b,a){var e=a.series;if(!e)return b;e.forEach(function(f){f.type||(f.type=a.type);f.type="column"===a.type?"bar":a.type});return b},splitAxisStackColumn:function(b,a){var e=
b.series;if(!e||!e.length)return b;var f;e.some(function(g){g=g.data;if(!g||!g.length)return!0;g.some(function(l){if(l&&l.itemStyle&&"undefined"!==typeof l.itemStyle.color&&"line"!==a.type)return f=a.stack?"stack":"single",!0;f=!1})});var c=0;"single"===f?c=.1:"stack"===f&&(c=1);var d="";"stack"===f&&(d="#fff",a.backgroundColor&&"transparent"!==a.backgroundColor&&(d=a.backgroundColor));b.series=b.series.map(function(g){if("bar"===g.type||"pie"===g.type)g.itemStyle||(g.itemStyle={}),g.emphasis||(g.emphasis=
{}),g.itemStyle.borderWidth=c,g.emphasis.borderWidth=c,d?(g.itemStyle.borderColor=d,g.emphasis.borderColor=d):(g.itemStyle.borderColor="transparent",g.emphasis.borderColor="transparent");return g});return b},preProcessConfig:function(b,a){a.min=a.min||{value:0,format:{digitSeparator:!0}};a.max=a.max||{value:1E3,format:{digitSeparator:!0}};return b},settingLabelColor:function(b,a){var e="#000";a.gaugeOption&&a.gaugeOption.labelColor&&(e=a.gaugeOption.labelColor);"curved"===a.shape?b.series[0].axisLabel.textStyle.color=
e:"horizontal"===a.shape?b.xAxis.axisLabel.textStyle.color=e:"vertical"===a.shape&&(b.yAxis.axisLabel.textStyle.color=e);return b},settingValueStyle:function(b,a){var e=a.gaugeOption&&a.gaugeOption.valueStyle,f=e&&e.textStyle;e=e&&e.formatter;f&&r.mixin("curved"===a.shape?b.series[0].detail.textStyle:b.series[1].data[0].label.textStyle,f);e&&("curved"===a.shape?b.series[0].detail.formatter=e:b.series[1].data[0].label.formatter=e);return b},settingGaugeColumnColor:function(b,a){var e=a.gaugeOption&&
a.gaugeOption.bgColor;a=a.gaugeOption&&a.gaugeOption.columnColor;e&&(b.series[0].itemStyle.color=e);a&&(b.series[1].data[0].itemStyle.color=a);return b},initHorizontalOption:function(b){r.mixin(b,this.horizontal);return b},setHorizontalGrid:function(b){b.grid={top:"middle",height:90,left:"10%",right:"10%",containLabel:!0};return b},settingHorizontalAxis:function(b,a){b.xAxis.max=a.max.value;b.xAxis.min=a.min.value;b.xAxis.scale=!0;return b},settingHorizontalSeries:function(b,a){var e=b.series;if(!e||
!e.length)return b;var f=e[1];e[0].data[0]=a.max.value;b=this._handleValueDisplayForColumnGauge(b,a);f.data[0].name=a.labels&&a.labels[0]||"";f.name=a.series[0].name||"";return b},settingHorizontalGaugeRTL:function(b){if(!window.isRTL)return b;b.series[1].label.offset=[-20,0];b.xAxis.inverse=!0;b.yAxis.position="right";return b},initVerticalOption:function(b){r.mixin(b,this.vertical);return b},setVerticalGrid:function(b){b.grid={left:"middle",width:60,top:"10%",bottom:"10%",containLabel:!0};b.grid.left=
this._getGridLeftOfVerticalGauge();return b},settingVerticalAxis:function(b,a){b.yAxis.max=a.max.value;b.yAxis.min=a.min.value;return b},settingVerticalSeries:function(b,a){var e=b.series;if(!e||!e.length)return b;var f=e[1];e[0].data[0]=a.max.value;b=this._handleValueDisplayForColumnGauge(b,a);f.data[0].name=a.labels&&a.labels[0]||"";f.name=a.series[0].name||"";return b},settingVerticalGaugeRTL:function(b,a){if(!window.isRTL)return b;var e=(a.series[0].data[0]+"").length-1;a.gaugeOption&&a.gaugeOption.valueStyle&&
"undefined"!==typeof a.gaugeOption.valueStyle.decimalPlaces&&(e+=a.gaugeOption.valueStyle.decimalPlaces);b.series[1].label.offset=[-17-9*e,-15];b.xAxis.inverse=!0;b.yAxis.position="right";return b},initCurvedOption:function(b){b.series=[this.curved];return b},settingCurvedTooltip:function(b){b.tooltip.formatter=function(a){return this.handleToolTip(a,null,!1)}.bind(this);return b},settingCurvedSeries:function(b,a){var e=b.series&&b.series[0];if(!e)return b;var f=a.max.value,c=a.min.value;e.min=c;
e.max=f;var d=a.series&&a.series[0]&&a.series[0].data&&a.series[0].data[0];d=d||0;e.data[0].value=d;f=d<=c?0:d>=f?1:parseFloat((d-c)/(f-c)).toFixed(2);e.axisLine.lineStyle.color[0][0]=f;if(f=a.labels&&a.labels[0])e.data[0].name=f;e.name=a.series[0]&&a.series[0].name||"";e.axisLine.lineStyle.width=30;b.series=[e];return b},settingCurvedGaugeColor:function(b,a){var e=b.series&&b.series[0];a.gaugeOption&&(a.gaugeOption.bgColor&&(e.axisLine.lineStyle.color[1][1]=a.gaugeOption.bgColor),a.gaugeOption.columnColor&&
(e.axisLine.lineStyle.color[0][1]=a.gaugeOption.columnColor,e.itemStyle.color=a.gaugeOption.columnColor));return b},settingCurvedTargets:function(b,a){if(!b.series)return b;b.series[0].splitNumber=1E3;b.series[0].axisTick.splitNumber=1;b.series[0].axisTick.show=!1;var e=this._getTargetValues(a);return b=this._showTargetsForCurved(b,a,e)},createTargetGraphic:function(b){var a=b.shape,e=[];if("vertical"!==a&&"horizontal"!==a)return e;var f="#000";b.gaugeOption&&b.gaugeOption.labelColor&&(f=b.gaugeOption.labelColor);
var c,d=b.min.value,g=b.max.value;b=this._getTargetValues(b);var l=b.range;b.values.forEach(function(q){if(!(q.value>g||q.value<d)){c=this._calcGraphicPosition(q.value,a);var m=c.top,u=c.textLeft,w=this._createGraphic(c.graphicLeft,m,q,f,"image",a);q=this._createGraphic(u,m,q,f,"text",a);e.push(w);e.push(q)}}.bind(this));l.forEach(function(q){q.value>g||q.value<d||(c=this._calcGraphicPosition(q.value,a),q=this._createGraphic(c.textLeft,c.top,q,f,"text",a),e.push(q))}.bind(this));return e},_calcGraphicPosition:function(b,
a){if("vertical"===a){var e=this.chart.convertToPixel({xAxisIndex:0},0);e=parseFloat(e,10).toFixed(2);e=Number(e);window.isRTL&&(e+=40);var f=e-26;var c=window.isRTL?f+11:f-11-6*(b.toString().length-1);e=this._getyAxisValueTop(b);e-=2}else"horizontal"===a&&(e=this.chart.convertToPixel({yAxisIndex:0},0),e=parseInt(e,10),e=Number(e)+16,f=this._getxAxisValueLeft(b),b=6*(b.toString().length-2),c=f,0<b&&(c=f-b));return{top:e,graphicLeft:f,textLeft:c}},_createGraphic:function(b,a,e,f,c,d){var g=this.horIconUrl;
"vertical"===d&&(g=window.isRTL?this.verIconUrlRTL:this.verIconUrl);var l=null;"image"===c?l={z:10,type:"image",$action:"merge",id:"wab_gid_image-"+n.getRandomString(),left:b,style:{image:g,width:10,height:10},silent:!0,top:a}:"text"===c&&(e=this.localizeNumberForDigitSeparator(e.value,e.format&&e.format.digitSeparator),l={z:10,type:"text",$action:"merge",id:"wab_gid_text-"+n.getRandomString(),left:b,style:{text:e,fill:f,font:"normal 11px sans-serif"},silent:!0});"text"===c&&(l.top="vertical"===d?
a-2:a+11);return l},updateGridForVerticalGauge:function(b){if("gauge"===b.type&&"vertical"===b.shape)return{left:this._getGridLeftOfVerticalGauge(),width:60,top:"10%",bottom:"10%"}},_getTargetValues:function(b){var a=b.gaugeOption&&b.gaugeOption.showTargetValueLabel,e=b.gaugeOption&&b.gaugeOption.showDataRangeLabel,f=b.gaugeOption&&b.gaugeOption.targetValue,c=b.min;b=b.max;var d={values:[],range:[]};f&&a&&f.forEach(function(g){d.values.push(g)});e&&(0>d.values.indexOf(c.value)&&(d.range[0]=c),0>d.values.indexOf(b.value)&&
(d.range[1]=b));return d},_showTargetsForCurved:function(b,a,e){var f=e.values.concat(e.range),c=(a.max.value-a.min.value)/1E3;f.sort(function(d,g){return d.value-g.value});b.series[0].axisLabel.formatter=r.hitch(this,function(d){var g,l;f.forEach(function(q){"undefined"===typeof g&&q.value>=d&&q.value<d+c&&(g=q.value,l=q.format)});"number"===typeof g&&(g=this.localizeNumberForDigitSeparator(g,l&&l.digitSeparator));return g});return b},_handleValueDisplayForColumnGauge:function(b,a){var e=a.min.value,
f=a.max.value;var c=a.series[0].data[0];a=c>=f?f:c<=e?e:c;b.tooltip.formatter=function(d){return this.handleToolTip(d,c,!1)}.bind(this);b.series[1].data[0].value=a;return b},_getGridLeftOfVerticalGauge:function(){return this.chart.getWidth()/2-30},_getxAxisValueLeft:function(b){b=this.chart.convertToPixel({xAxisIndex:0},b);return parseFloat(b,10)-4},_getyAxisValueTop:function(b){b=this.chart.convertToPixel({yAxisIndex:0},b);return parseFloat(b,10)}})})},"jimu/dijit/_Gauge":function(){define(["dojo/_base/declare"],
function(A){return A([],{constructor:function(n){this.chart=n.chart;this.chartUtils=n.chartUtils},produceOption:function(n,v){n=this.chartUtils.preProcessConfig(n,v);"curved"===v.shape?n=this.setCurvedGaugeOption(n,v):"vertical"===v.shape?n=this.setVerticalGaugeOption(n,v):"horizontal"===v.shape?n=this.setHorizontalGaugeOption(n,v):console.error("invaild gauge shape");n=this.chartUtils.settingLabelColor(n,v);return n=this.chartUtils.settingValueStyle(n,v)},setCurvedGaugeOption:function(n,v){n=this.chartUtils.initCurvedOption(n);
n=this.chartUtils.settingCurvedSeries(n,v);n=this.chartUtils.settingCurvedTooltip(n,v);n=this.chartUtils.settingCurvedGaugeColor(n,v);return n=this.chartUtils.settingCurvedTargets(n,v)},setVerticalGaugeOption:function(n,v){n=this.chartUtils.initVerticalOption(n,this.vertical);n=this.chartUtils.setVerticalGrid(n);n=this.chartUtils.settingVerticalAxis(n,v);n=this.chartUtils.settingVerticalSeries(n,v);n=this.chartUtils.settingGaugeColumnColor(n,v);return n=this.chartUtils.settingVerticalGaugeRTL(n,v)},
setHorizontalGaugeOption:function(n,v){n=this.chartUtils.initHorizontalOption(n,this.horizontal);n=this.chartUtils.setHorizontalGrid(n);n=this.chartUtils.settingHorizontalAxis(n,v);n=this.chartUtils.settingHorizontalSeries(n,v);n=this.chartUtils.settingGaugeColumnColor(n,v);return n=this.chartUtils.settingHorizontalGaugeRTL(n,v)},resetGraphic:function(n){if("horizontal"===n.shape||"vertical"===n.shape)n=this.chartUtils.createTargetGraphic(n),this.clearGraphic(),this.chart.setOption({graphic:n}),this.cacheGraphic=
null,this.cacheGraphic=n},clearGraphic:function(){this.cacheGraphic&&(this.cacheGraphic.forEach(function(n){n.$action="remove"}),this.chart.setOption({graphic:this.cacheGraphic}))},resetGrid:function(n){("horizontal"===n.shape||"vertical"===n.shape)&&(n=this.chartUtils.updateGridForVerticalGauge(n))&&this.chart.setOption({grid:n})}})})},"jimu/dijit/_ChartOptionFactory":function(){define(["dojo/_base/declare"],function(A){return A([],{constructor:function(n){this.chart=n.chart;this.gauge=n.gauge;this.chartUtils=
n.chartUtils},produceOption:function(n){if(n&&n.type){var v=n.type,r={};r=this.setCommonOption(r,n);this.chartUtils.isAxisChart(n)?r=this.setAxisChartOption(r,n):"pie"===v?r=this.setPieChartOption(r,n):"funnel"===v?r=this.setFunnelChartOption(r,n):"radar"===v?r=this.setRadarChartOption(r,n):n.shape&&(r=this.setGaugeChartOption(r,n));return r=this.chartUtils.settingAdvanceOption(r,n)}},setPieChartOption:function(n,v){n=this.chartUtils.settingPieSeries(n,v);n=this.chartUtils._settingSeriesDataLabel(n,
v);n=this.chartUtils.pieChartAvoidLegendLabelOverLap(n,v);return n=this.chartUtils.avoidAdjoiningColorSameForPie(n,v)},setGaugeChartOption:function(n,v){return n=this.gauge.produceOption(n,v)},setFunnelChartOption:function(n,v){return n=this.chartUtils.settingFunnelSeries(n,v)},setRadarChartOption:function(n,v){n=this.chartUtils.settingRadar(n,v);return n=this.chartUtils.settingRadarSeries(n,v)},setAxisChartOption:function(n,v){n=this.chartUtils.settingDefaultGrid(n,v);n=this.chartUtils.settingAxisChartAxis(n,
v);n=this.chartUtils.settingAxisSeries(n,v);n=this.chartUtils.settingMarks(n,v);n=this.chartUtils._settingSeriesDataLabel(n,v);n=this.chartUtils.splitAxisStackColumn(n,v);n=this.chartUtils.settingStack(n,v);n=this.chartUtils.settingArea(n,v);return n=this.chartUtils.settingScale(n,v)},setCommonOption:function(n,v){this.chart._theme||(this.chart._theme={});n=this.chartUtils.settingRenderOption(n,v);n=this.chartUtils.settingBackgroundColor(n,v);n=this.chartUtils.settingColor(n,v);n=this.chartUtils.settingToolTip(n,
v);return n=this.chartUtils.settingLegend(n,v)}})})},"libs/echarts/light":function(){(function(A,n){"function"===typeof define&&define.amd?define(["exports","./echarts"],n):"object"===typeof exports&&"string"!==typeof exports.nodeName?n(exports,require("./echarts")):n({},A.echarts)})(this,function(A,n){n?n.registerTheme("light",{color:"#2ec7c9 #b6a2de #5ab1ef #ffb980 #d87a80 #8d98b3 #e5cf0d #97b552 #95706d #dc69aa #07a2a4 #9a7fd1 #588dd5 #f5994e #c05050 #59678c #c9ab00 #7eb00a #6f5553 #c14089".split(" "),
textStyle:{},title:{textStyle:{color:"#008acd"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"6",symbol:"circle",smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},itemStyle:{normal:{color:"#686868"},emphasis:{color:"#686868"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},
axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},
toolbox:{iconStyle:{normal:{borderColor:"#2ec7c9"},emphasis:{borderColor:"#18a4a6"}}},legend:{textStyle:{color:"#333333"}},tooltip:{axisPointer:{lineStyle:{color:"#008acd",width:"1"},crossStyle:{color:"#008acd",width:"1"}}},dataZoom:{backgroundColor:"#F4F4F4",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#E0E0E0",handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",
handleColor:"#777777",handleSize:"100%",borderColor:"#F4F4F4",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"libs/echarts/dark":function(){(function(A,n){"function"===typeof define&&define.amd?define(["exports","./echarts"],n):"object"===typeof exports&&"string"!==typeof exports.nodeName?n(exports,require("./echarts")):n({},A.echarts)})(this,function(A,n){n?n.registerTheme("dark",{color:"#fc97af #87f7cf #f7f494 #72ccff #f7c5a0 #d4a4eb #d2f5a6 #76f2f2".split(" "),
textStyle:{},title:{textStyle:{color:"#ffffff"},subtextStyle:{color:"#dddddd"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#1E5F6F"]]}},itemStyle:{normal:{color:"#D9D9D9"},emphasis:{color:"#D9D9D9"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},
axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)",
"rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},tooltip:{axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},dataZoom:{backgroundColor:"#525252",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#737373",handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",
handleColor:"#BDBDBD",handleSize:"100%",borderColor:"#525252",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"widgets/Infographic/utils":function(){define("dojo/on jimu/utils dojo/_base/lang dojo/_base/Color dojo/_base/array dojo/Deferred esri/layers/FeatureLayer".split(" "),function(A,n,v,r,k,p,h){var b={stringFieldType:"esriFieldTypeString",oidFieldType:"esriFieldTypeOID",dateFieldType:"esriFieldTypeDate",numberFieldTypes:["esriFieldTypeSmallInteger",
"esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],getClientFeaturesFromMap:function(a,e,f,c){return n.getClientFeaturesFromMap(a,e,f,c)},listenClientFeaturesFromMap:function(a,e,f,c,d){var g=[];f&&(g.push(A(e,"selection-complete",v.hitch(this,function(){d(this.getClientFeaturesFromMap(a,e,f,c))}))),g.push(A(e,"selection-clear",v.hitch(this,function(){d(this.getClientFeaturesFromMap(a,e,f,c))}))));c&&g.push(A(a,"extent-change",v.hitch(this,function(){0<e.graphics.length&&d(this.getClientFeaturesFromMap(a,
e,f,c))})));g.push(A(e,"update-end",v.hitch(this,function(){d(this.getClientFeaturesFromMap(a,e,f,c))})));d(this.getClientFeaturesFromMap(a,e,f,c));return{remove:function(){g&&k.forEach(g,v.hitch(this,function(l){l.remove()}));g=null}}},getVaildIndicator:function(a,e,f){var c=[];e.map(v.hitch(this,function(d){(d=this._handleOperator(d,a,f))&&c.push(d)}));if(0<c.length)return c[c.length-1]},filterFeaturesByDataSourceSetting:function(a,e,f){if(0===a.length)return[];if(e.useSelection){var c=a[0].getLayer();
if(c){var d=c.getSelectedFeatures();0<d.length&&(a=k.filter(a,function(g){return-1<d.indexOf(g)}))}}e.filterByExtent&&(a=n.filterFeaturesByExtent(f.extent,a));return a},_handleOperator:function(a,e,f){function c(l){d={};l.valueColor&&(d.valueColor=l.valueColor);l.gaugeColor&&(d.gaugeColor=l.gaugeColor);l.iconInfo&&(d.iconInfo=l.iconInfo)}var d,g=a.value.map(v.hitch(this,function(l){return a.isRatio?l/100*f:l}));"greater"===a.operator&&e>g[0]?c(a):"smaller"===a.operator&&e<g[0]?c(a):"between"===a.operator&&
e>g[0]&&e<g[1]?c(a):"equal"===a.operator&&e===g[0]?c(a):"notEqual"===a.operator&&e!==g[0]&&c(a);return d},isInteger:function(a){return"number"===typeof a&&0===a%1},_getFieldNamesByFields:function(a){if(a&&a.length)return a.map(function(e){return this._getFieldNameByFieldInfo(e)}.bind(this))},_getFieldNameByFieldInfo:function(a){return a&&a.name},isBaseAxisChart:function(a){return"column"===a||"bar"===a||"line"===a},isEqual:function(a,e){return typeof a!==typeof e?!1:"object"!==typeof a?a===e:n.isEqual(a,
e)},separationChartProperties:function(a,e){var f=["mode","type"],c=["backgroundColor","seriesStyle","legend","highLightColor"];"feature"===e?f=f.concat(["clusterField","valueFields"]):"category"===e?f=f.concat(["clusterField","dateConfig","valueFields","operation","nullValue"]):"count"===e?f=f.concat(["clusterField","dateConfig"]):"field"===e&&(f=f.concat(["valueFields","operation","nullValue"]));f=f.concat(["sortOrder","maxLabels"]);c="pie"===a?c.concat(["dataLabel","innerRadius"]):c.concat("displayRange xAxis yAxis stack area tooltip marks".split(" "));
return{dataProperties:f,displayProperties:c}},isValidChartConfig:function(a){if(a&&(a=a.data)){var e=a.mode,f=a.type;if(e&&f&&("count"===e||a.valueFields&&a.valueFields.length)&&("pie"!==f||""!==a.maxLabels))return!0}},getChartConfig:function(a){if(a){var e=this.separationChartProperties(a.type,a.mode),f=e.displayProperties,c={},d={};e.dataProperties.forEach(v.hitch(this,function(g){c[g]=a[g]}));f.forEach(v.hitch(this,function(g){d[g]=a[g]}));e={data:c,display:d};return this.isValidChartConfig(e)?
e:!1}},specialChartConfig:function(a,e){var f=a&&a.data;if(f){var c=f.sortOrder;"feature"===f.mode&&c&&c.field===f.clusterField&&(c.isLabelAxis=!0)}if(a=a&&a.display)f&&(a.mode=f.mode),a.theme||(a.theme=e)},_cloneAndFormatDS:function(a){a=v.clone(a);var e={};a.name&&(e.name=a.name);a.dataSourceType&&(e.dataSourceType=a.dataSourceType);a.layerId&&(e.layerId=a.layerId);a.frameWorkDsId&&(e.frameWorkDsId=a.frameWorkDsId);a=null;return e},isDSEqual:function(a,e){if(a&&e)return a=this._cloneAndFormatDS(a),
e=this._cloneAndFormatDS(e),this.isEqual(a,e)},separationGradientColors:function(a,e){var f=[];2===a.length&&(f=this._createGradientColors(a[0],a[a.length-1],e));return f},_createGradientColors:function(a,e,f){var c=[];a=new r(a);var d=new r(e);e=(d.r-a.r)/f;var g=(d.g-a.g)/f;d=(d.b-a.b)/f;for(var l=new r,q=0,m=0,u=0,w=0;w<f;w++)q=parseInt(a.r+e*w,10),m=parseInt(a.g+g*w,10),u=parseInt(a.b+d*w,10),l.setColor([q,m,u]),c.push(l.toHex());return c},mockLayerDefinitionForSTD:function(a){var e={type:"Table",
fields:[]};e.fields=a.fields;e.fields.push({name:"STAT_COUNT",type:"esriFieldTypeInteger",alias:"STAT_COUNT"});return e},getLoadedLayer:function(a){var e=new p,f=null;f="string"===typeof a?new h(a):"esri.layers.FeatureLayer"===a.declaredClass?a:new h({layerDefinition:v.clone(a),featureSet:null});if(f.loaded)e.resolve(f);else f.on("load",function(){e.resolve(f)});return e},parseDataSourceId:function(a){var e=a.split("~"),f={};if(2>e.length)return console.error("Bad data source id:",a),f;switch(e[0]){case "map":return e=
a.lastIndexOf("~"),f={from:"map",layerId:a.substring(4,e)};case "widget":return f={from:"widget",widgetId:e[1]};case "external":return f={from:"external"};default:console.error("Bad data source id:",a)}},getDsTypeInfoMeta:function(a,e){var f={dsTypeInfo:null,dsMeta:null};f.dsTypeInfo=this.parseDataSourceId(a);if(e=e.dataSource&&e.dataSource.dataSources)f.dsMeta=e[a];return f},getValueFromFeatures:function(a,e,f){if(!a||!e||!f)return!1;a=this.getSingleValueFromFeatures(a,e,f);a=this._getVaildValue(a);
return"number"!==typeof a?!1:a},_getVaildValue:function(a){if(a||0===a)return Number(a)},cleanFeatures:function(a){if(a&&a.length)return a.map(function(e){return{attributes:e.attributes}})},getFieldAliasByFieldInfo:function(a,e){var f="";if(!a)return f;var c=a.name;f=a.alias||c;e&&(f=this.getAliasFromPopupInfo(c,e));return f},getAliasFromPopupInfo:function(a,e){var f=a;if(!e)return f;(e=e.fieldInfos)&&0<e.length&&e.some(function(c){return c.fieldName===a?(f=c.label,!0):!1});return f},isFolatNumber:function(a){return"number"!==
typeof a?!1:/^(-?\d+)(\.\d+)?$/.test(a)},addAliasForLayerDefinition:function(a,e){a&&a.fields&&0<a.fields.length&&a.fields.forEach(v.hitch(this,function(f){var c=this.getFieldAliasByFieldInfo(f,e);c&&(f.alias=c)}))},mockDataSourceForGaugeRange:function(a,e){var f=this.getRangeSourceInfo(a);a=this.mockDataSourceByStatSourceID(f.range1,e);e=this.mockDataSourceByStatSourceID(f.range2,e);return[a,e]},mockDataSourceByStatSourceID:function(a,e){a=a||{};var f=a.id||e;a=a.id?a.label:e;var c;f&&(c={name:a,
frameWorkDsId:f,dataSourceType:"DATA_SOURCE_FROM_FRAMEWORK"});return c},getStatisticForChart:function(a){var e=a.mode;var f=a.valueFields;var c=a.operation,d=a.nullValue;"average"===c&&(c="avg");a=a.clusterField;if("count"!==e){var g=f;f=c}else f="count";if("category"===e||"count"===e)var l=[a];return{type:f,fields:g,groupByFields:l,nullValue:d}},getStatisticForGauge:function(a){var e={};a=a.statistics;if(!a||!a.length)return e;a.forEach(function(f){"value"===f.type&&(e.value=f.config.value);"range"===
f.type&&"stat"===f.config.type&&(e[f.name]=f.config.value.statistic)});return e},getStatisticForNumber:function(a){if(a&&a.statistics&&a.statistics.length)return a.statistics[0].config.value},getRangeDataSource:function(a){var e={};if(!a||!a.config)return e;a=a.config.statistics;if(!a||!a.length)return e;a.forEach(function(f){"range"===f.type&&"stat"===f.config.type&&(e[f.name]={name:f.config.value.sourceLabel||f.config.value.sourceID,frameWorkDsId:f.config.value.sourceID,dataSourceType:"DATA_SOURCE_FROM_FRAMEWORK"})});
return e},getRangeFixedValue:function(a){var e={};a=a.config.statistics;if(!a||!a.length)return e;a.forEach(function(f){"range"===f.type&&"fixed"===f.config.type&&(e[f.name]=f.config.value)});return e},checkDataSourceIsVaild:function(a,e,f,c,d){var g={code:0,fields:[]},l=null;a?"DATA_SOURCE_FROM_FRAMEWORK"===a.dataSourceType?(g.label=a.name||a.frameWorkDsId,c&&c.dataSource&&c.dataSource.dataSources?(a=c.dataSource.dataSources[a.frameWorkDsId])?(l=a.dataSchema&&a.dataSchema.fields,e=this._getNeededFieldsByMainDijitJson(e,
d),g=this._isDataSourceContainNeededFields(l,e,g)):g.code=1:g.code=1):"DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===a.dataSourceType&&(l=a.layerId,g.label=a.name||a.layerId,l&&f?(a=f.getLayer(l))?(l=a.fields,e=this._getNeededFieldsByMainDijitJson(e,d),g=this._isDataSourceContainNeededFields(l,e,g)):g.code=1:g.code=1):g.code=1;return g},getCheckDataSourceResultCode:function(a){if(a&&a.length){a=v.clone(a);var e=a.shift();if(e.code)return e.code;var f=0;a.some(function(c){if(c&&1===c.code)return f=3,!0;if(c&&
2===c.code)return f=2,!0});return f}},getRangeSourceInfo:function(a){var e={};if(!a||!a.length)return e;a.forEach(function(f){if("range"===f.type&&"stat"===f.config.type){var c=f.name,d=f.config.value.sourceID;f=f.config.value.sourceLabel;c&&d&&(e[c]={id:d,label:f||d})}});return e},getGaugeNumberStatisticField:function(a){var e={};if(!a||!a.length)return e;a.forEach(function(f){if("range"===f.type&&"stat"===f.config.type){var c=f.name;f=f.config.value.statistic.field;c&&f&&(e[c]=f)}else"value"===
f.type&&(f=f.config.value.field,e.value=f)});return e},_isDataSourceContainNeededFields:function(a,e,f){if(!a||!a.length)return f.code=1,f;var c=this._getFieldNamesByFields(a);if(!e||!e.length)return f.code=0,f;e.forEach(function(d){0>c.indexOf(d)&&f.fields.push(d)});f.fields.length&&(f.code=2);return f},_getNeededFieldsByMainDijitJson:function(a,e){if(a)return this._getNeededFieldsByDijitConfig(a.type,a.config,e)},_getNeededFieldsByDijitConfig:function(a,e,f){var c=null;if(e){if("chart"===a){c=[];
f=e.data;if(!f)return;f.clusterField&&c.push(f.clusterField);f.valueFields&&f.valueFields.length&&(c=c.concat(f.valueFields))}else if("gauge"===a||"number"===a)c=[],(a=e.statistics)&&(f=this.getGaugeNumberStatisticField(a)[f])&&c.push(f);if(c&&c.length)return c}},formatterRangeNumber:function(a){"number"!==typeof a&&(a=Number(a));if(!a&&0!==a)return!1;this.isFolatNumber(a)&&(a=a.toFixed(2),a=Number(a));return a},upperCaseString:function(a){return a&&"string"===typeof a?a.toUpperCase():a},lowerCaseString:function(a){return a&&
"string"===typeof a?a.toLowerCase():a},isStrictNaN:function(a){return"number"===typeof a&&isNaN(a)},isValidValue:function(a){return"undefined"!==typeof a&&null!==a&&""!==a&&!this.isStrictNaN(a)},getLayerIdByDataSource:function(a){if(a){var e=a.layerId;a=a.frameWorkDsId;!e&&a&&(a=this.parseDataSourceId(a))&&"undefined"!==a.layerId&&(e=a.layerId);return e}},hasDigitSeparator:function(a,e){var f=!1;if(!a||!e)return f;(e=e.fieldInfos)&&0<e.length&&e.some(function(c){return c.fieldName===a?(f=!(!c.format||
!c.format.digitSeparator),!0):!1});return f},getFieldInfo:function(a,e){var f=null;e=e.fields;for(var c=0;c<e.length;c++)e[c].name===a&&(f=e[c]);return f},isNumberType:function(a,e,f){if(!a||!e)return!1;var c=v.clone(b.numberFieldTypes);f&&c.push(b.oidFieldType);a=b.getFieldInfo(a,e);return!a||a.domain?!1:-1<c.indexOf(a.type)},isAxisType:function(a){return-1<["column","bar","line"].indexOf(a)},isValueAxis:function(a,e){if(this.isAxisType(e))return"bar"===e?!a:a},_isValidChartConfig:function(a){if(!a)return!1;
a=a.data;return!(!a||!a.mode)},_upgradeAxisFormat:function(a,e,f,c,d,g){if("undefined"!==typeof a.digitSeparator)return a;this.isValueAxis(e,c)?a.digitSeparator=!0:this.isNumberType(f,d,!0)&&(e=this.hasDigitSeparator(f,g),a.digitSeparator=e);return a},upgradeChartAxisFormatConfig:function(a,e,f){if(!this._isValidChartConfig(a))return a;var c=a.data.type;if(!this.isAxisType(c)||!a.display)return a;a=v.clone(a);var d=a.data.clusterField,g=a.display.xAxis,l=a.display.yAxis;g.format||(g.format={});l.format||
(l.format={});this._upgradeAxisFormat(g.format,!1,d,c,e,f);this._upgradeAxisFormat(l.format,!0,d,c,e,f);return a}};return b})},"widgets/Infographic/dijits/GaugeDijit":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html ./BaseDijit jimu/utils jimu/dijit/Chart ../utils ./clientStatistic".split(" "),function(A,n,v,r,k,p,h,b){return A([r],{templateString:'\x3cdiv style\x3d"width:100%;height:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"noDataDiv"class\x3d"no-data-tip"\x3e${nls.noData}\x3c/div\x3e\x3cdiv class\x3d"gauge-dom" data-dojo-attach-point\x3d"gaugeDomNode"\x3e\x3c/div\x3e\x3c/div\x3e',
type:"gauge",baseClass:"infographic-gauge-dijit",config:null,defValueStyle:{state:!0,isRatio:!1,font:{font:{fontFamily:"Arial",bold:!1,italic:!1,underline:!1},textColor:"#59bad8"},dataFormat:{unit:"none",decimalPlaces:"",prefix:"",suffix:""}},constructor:function(a){this.inherited(arguments);this.visible=a.visible},postCreate:function(){this.inherited(arguments);this._features=null;this._upgradeConfig(this.config);this.setConfig(this.config);this._updateBackGroundColor()},_upgradeConfig:function(a){var e=
a&&a.display&&a.display.currentValue;(e=e&&e.dataFormat)&&"undefined"===typeof e.digitSeparator&&(e.digitSeparator=!0);e=(a=a&&a.display&&a.display.dataLabels)&&a.dataFormat||{};"undefined"===typeof e.digitSeparator&&(e.digitSeparator=!0);a.dataFormat=e},setLayerInfo:function(){},setVisible:function(a){this.visible=a},resetData:function(){this.gaugeValue=this._valueObj=this._r2fs=this._r1fs=this._features=this.dataSource=null},onDataSourceDataUpdate:function(a){this._valueObj=a},setMainFeatures:function(a){a&&
(this._features=h.cleanFeatures(a))},setRangeFeatures:function(a,e){"range1"===e?this._r1fs=h.cleanFeatures(a):"range2"===e&&(this._r2fs=h.cleanFeatures(a))},resize:function(){this.chart&&this.chart.resize()},setDataSource:function(a){this.inherited(arguments);this.dataSource=a},setConfig:function(a){a&&(this.config=a)},startRendering:function(){if(this._shouldRenderGauge()){this.chart||this._createJimuChart();this._updateBackGroundColor();var a=this._calculateGaugeValue();0===a?this.showNodata():
-1===a?this.showNodata(this.nls.invalidRangeTip):(a=this._createChartOption(),this.chart.updateConfig(a))}},_splitStatistic:function(a){if(a&&a.length){var e={};a.forEach(function(f){if("value"===f.type)e.value=f.config.value;else if("range"===f.type){var c=f.name;"stat"===f.config.type?e[c]=f.config.value.statistic:"fixed"===f.config.type&&(e[c]={value:f.config.value})}});return e}},_getValueObjForSetting:function(){var a=this.config&&this.config.statistics;if(a&&a.length){var e=this._splitStatistic(a),
f=e.value,c=e.range1;e=e.range2;var d=this.dataSource;a=h.mockDataSourceForGaugeRange(a);f=b.statistic(f,d,this._features);"undefined"!==typeof c.value?c=c.value:(c=b.statistic(c,a[0],this._r1fs),c=b.formatterRangeNumber(c));"undefined"!==typeof e.value?e=e.value:(e=b.statistic(e,a[1],this._r2fs),e=b.formatterRangeNumber(e));return{value:f,ranges:[c,e]}}},_calculateGaugeValue:function(){var a=this.inSettingPage?this._getValueObjForSetting():this._valueObj;if(!h.isValidValue(a)||!h.isValidValue(a.value))return 0;
if(!this._isEffectiveRange(a))return-1;this.gaugeValue=a;return 1},_createChartOption:function(){var a=this._splitValueObj(this.gaugeValue),e=a.min,f=a.max,c=a.value;c=this._parseRealValueDecimal(c);var d=this.config;a=d.display&&d.display.dataLabels&&d.display.dataLabels.dataFormat;c={tooltip:{confine:!0,trigger:"item"},series:[{data:[c]}]};c.shape=d.shape;c.type="gauge";c.theme=this.isDarkTheme()?"dark":"light";d=this._createGaugeOption();c.gaugeOption=d;c.max={value:f,format:a};c.min={value:e,
format:a};return c},_parseRealValueDecimal:function(a){var e=this._getVaildValueDisplay();if(e=this._getVaildDecimalPlaces(e))a=a.toFixed(e),a=Number(a);return a},_createGaugeOption:function(){var a=this._splitValueObj(this.gaugeValue),e=a.value,f=this.config,c=f.display&&f.display.dataLabels&&f.display.dataLabels.dataFormat,d={},g=this._getValueStyle();g&&(d.valueStyle=g);this._setGaugeDisplay(d);a=this._getIndicatorInfo(f,e,a);a.targetValue&&(e=this._isShowTargetValue()?a.targetValue:[],d.targetValue=
e.map(function(l){return{value:l,format:c}}));a.columnColor&&(d.columnColor=a.columnColor);return d},_getIndicatorInfo:function(a,e,f){var c=!1,d=!1,g=!1,l=this._getIndicatorValues(a,f);k.isNotEmptyObject(l,!0)&&(c=l);if(a=a.indicators)(e=h.getVaildIndicator(e,a,f.max))&&e.gaugeColor&&(d=e.gaugeColor),e&&e.valueColor&&(g=e.valueColor);return{targetValue:c,columnColor:d,valueColor:g}},_getIndicatorValues:function(a,e){var f=[];a.indicators&&(a.indicators.forEach(function(c){c.value&&c.value.forEach(n.hitch(this,
function(d){f.push(this.betterDisplayNumberOfMultiDecimal(c.isRatio?d/100*e.max:d,2))}))}.bind(this)),f.sort(function(c,d){return c-d}),f=k.uniqueArray(f));return f},betterDisplayNumberOfMultiDecimal:function(a,e){if("number"!==typeof a)return a;var f=0,c=a.toString().split(".");1===c.length?f=0:2===c.length&&(f=c[1].length);return f?(f>e&&(f=e),a=a.toFixed(f),parseFloat(a)):a},_splitValueObj:function(a){var e=a.value;a=a.ranges;a.sort(function(f,c){return f-c});return{min:a[0],max:a[1],value:e}},
_isEffectiveRange:function(a){var e=this._splitValueObj(a);a=e.min;e=e.max;return"undefined"===typeof a||"undefined"===typeof e||e===a?!1:!0},_isRangeNeedFeatures:function(a,e){var f=!1;a=a.statistics;if(!a||!a.length)return f;a.some(function(c){if("range"===c.type&&c.name===e&&"stat"===c.config.type)return f=!0});return f},_shouldRenderGauge:function(){if(this.visible&&this.config){if(this.inSettingPage){var a=this._isRangeNeedFeatures(this.config,"range1");var e=this._isRangeNeedFeatures(this.config,
"range2");a=a?this._r1fs:!0;e=e?this._r2fs:!0;e=this.domNode&&this._features&&a&&e}else a=(e=this._valueObj)&&e.ranges,e=this.domNode&&e&&a&&"number"===typeof e.value&&"number"===typeof a[0]&&"number"===typeof a[1];e?this.hideNodata():this.showNodata();return!!e}},_updateBackGroundColor:function(){var a=this.config;(a=a&&a.display&&a.display.backgroundColor)&&v.setStyle(this.domNode,"backgroundColor",a)},_createJimuChart:function(){var a=this._getDefaultChartOption();this.chart=new p({chartDom:this.gaugeDomNode,
config:a});this.chart.placeAt(this.gaugeDomNode);this.chart.resize()},_generateValueFormatter:function(a){var e=this._splitValueObj(this.gaugeValue),f=e.max,c=e.min;if(a)return n.hitch(this,function(d,g){var l="",q=d.dataFormat;if(!q)return g;var m=q.decimalPlaces;var u=q.digitSeparator;if(m||0===m)m=Number(m);d.isRatio?g=g<=c?k.convertNumberToPercentage(0,m,u):k.convertNumberToPercentage((g-c)/(f-c),m,u):"percentage"===q.unit?g=k.convertNumberToPercentage(g,m,u):"thousand"===q.unit?(l=this.nls.thousandAbbreviation,
g/=1E3):"million"===q.unit?(l=this.nls.millionAbbreviation,g/=1E6):"billion"===q.unit&&(l=this.nls.billionAbbreviation,g/=1E9);d.isRatio||"percentage"===q.unit||(g=k.localizeNumberByFieldInfo(g,{format:{places:m,digitSeparator:u}}));l&&(g+=l);d=g;q.prefix&&(d=q.prefix+" "+d);q.suffix&&(d+=" "+q.suffix);return d},a,e.value)},_getVaildDecimalPlaces:function(a){if(a){if((a=(a=a.dataFormat)&&a.decimalPlaces)||0===a)a=Number(a);if("number"===typeof a)return a}},_getVaildValueDisplay:function(){var a=this.config;
if(a=a&&a.display)return a.currentValue&&a.currentValue.state?a.currentValue:n.clone(this.defValueStyle)},_generateTextStyle:function(a){var e=this._splitValueObj(this.gaugeValue);e=this._getIndicatorInfo(this.config,e.value,e);var f=a&&a.font;if(f){a={};"undefined"!==typeof f.fontSize&&(a.fontSize=Number(f.fontSize));a.color=e.valueColor||f.textColor;e=f.font;if(!e)return a;a.fontWeight=e.bold?"bold":"normal";e.fontFamily&&(a.fontFamily=e.fontFamily);a.fontStyle=e.italic?"italic":"normal";return a}},
_isShowTargetValue:function(){var a=this.config&&this.config.display&&this.config.display.dataLabels;if(a)return!!a.targetValue},_setGaugeDisplay:function(a){var e=this.config.display;e&&(e.gaugeColor&&(a.columnColor=e.gaugeColor),e.bgColor&&(a.bgColor=e.bgColor),e.dataLabels&&e.dataLabels.state&&(e=e.dataLabels,a.showDataRangeLabel=!!e.dataRange,a.showTargetValueLabel=!!e.targetValue,a.labelColor=e.textColor||""))},_getValueStyle:function(){var a=this._getVaildValueDisplay();if(a){var e={},f=this._getVaildDecimalPlaces(a);
"number"===typeof f&&(e.decimalPlaces=f);e.formatter=this._generateValueFormatter(a);if(a=this._generateTextStyle(a))e.textStyle=a;return e}},_getDefaultChartOption:function(){var a={type:"gauge",confine:!0,shape:"curved",min:0,max:100,series:[{data:[0]}]};this.config&&this.config.shape&&(a.shape=this.config.shape);a.theme=this.isDarkTheme()?"dark":"light";return a},showNodata:function(a){this.chart&&this.chart.clear();v.addClass(this.domNode,"no-data");a&&(this.noDataDiv.innerHTML=k.sanitizeHTML(a))},
hideNodata:function(){v.removeClass(this.domNode,"no-data")}})})},"widgets/Infographic/dijits/clientStatistic":function(){define(["jimu/DataSourceManager","jimu/statisticsUtils","../utils"],function(A,n,v){return{getSingleValueForServerStatFeature:function(r){r=r&&r[0]&&r[0].attributes;if(!r)return null;var k=Object.keys(r)[0];return Number(r[k])},getResultForExtraStatFeature:function(r,k){r=this._getValueForExtraStatFeatures(r&&r[0],k);return Number(r)},_getValueForExtraStatFeatures:function(r,k){r=
r.attributes;if(!r)return"count"===k.type?0:void 0;k="count"===k.type?"STAT_COUNT":v.upperCaseString(k.field+"_"+k.type);var p=r[k];"undefined"===typeof p&&(k=v.lowerCaseString(k),p=r[k]);return p},statistic:function(r,k,p,h){return r&&k&&p?"DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===k.dataSourceType?this.getStatisticResultFromFeatures(p,r):"Features"===this._getExtalDataSourceType(k,h)?this.getStatisticResultFromFeatures(p,r):this.statisticExtraStatSource(r,p):null},formatterRangeNumber:function(r){if(!r&&
0!==r)return!1;"number"!==typeof r&&(r=Number(r));this.isFolatNumber(r)&&(r=r.toFixed(2),r=Number(r));return r},isFolatNumber:function(r){return"number"!==typeof r?!1:/^\d+(\.\d+)$/.test(r)},statisticExtraStatSource:function(r,k){if(k){if(0===k.length)var p=void 0;else if(1===k.length)p=this._getValueForExtraStatFeatures(k[0],r);else if(1<k.length){var h={count:0,sum:0},b,a,e,f=0,c=0;k.forEach(function(d){b=this._getValueForExtraStatFeatures(d,r);switch(r.type){case "count":h.count+=b;break;case "sum":h.sum+=
b;break;case "min":h.min="undefined"===typeof h.min?b:Math.min(h.min,b);break;case "max":h.max="undefined"===typeof h.max?b:Math.max(h.max,b);break;case "avg":e=this._getValueForExtraStatFeatures(d,{type:"count"}),a=this._getValueForExtraStatFeatures(d,{field:r.field,type:"sum"}),f+=a,c+=e}}.bind(this));"avg"===r.type&&(h.avg=0===c?0:f/c);p=h[r.type]}return p}},_getCountValueFromFeatureOfExtraStatFeatures:function(r){if(r&&r.attributes){r=r.attributes;var k="STAT_COUNT";var p=r[k];"undefined"===typeof p&&
(k=v.lowerCaseString(k),p=r[k]);return p||0}},getStatisticResultFromFeatures:function(r,k){if(r){if("count"===k.type)return r.length;var p=k.type;return n.getStatisticsResultFromClientSync({featureSet:{features:r},fieldName:k.field,statisticTypes:[p]})[p+"Field"]}},_getExtalDataSourceType:function(r,k){return this._getExtalDataSourceInfo(r,k).type},_getExtalDataSourceInfo:function(r,k){if(r){k=k||this.appConfig;var p=r.frameWorkDsId;if("undefined"!==typeof p){var h={};return h=(k=k&&k.dataSource&&
k.dataSource.dataSources)?k[p]:A.getInstance().getDataSourceConfig(r.frameWorkDsId)}}}}})},"widgets/Infographic/dijits/NumberDijit":function(){define("dojo/_base/declare ./BaseDijit dojo/dom-style dojo/_base/html jimu/utils ../utils ./clientStatistic ./styleUtils".split(" "),function(A,n,v,r,k,p,h,b){return A([n],{templateString:'\x3cdiv tabindex\x3d"0" class\x3d"has-link" role\x3d"link" style\x3d"height:100%;width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"noDataDiv"class\x3d"no-data-tip"\x3e${nls.noData}\x3c/div\x3e\x3ca tabindex\x3d"-1" data-dojo-attach-point\x3d"numberContent" class\x3d"number-content no-trim" target\x3d"_blank"\x3e\x3cdiv data-dojo-attach-point\x3d"leftIcon" class\x3d"icon"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"number" class\x3d"number"\x3e\x3cdiv data-dojo-attach-point\x3d"prefix" class\x3d"prefix"\x3e\x3c/div\x3e\x3cdiv class\x3d"value-content" data-dojo-attach-point\x3d"valueContent"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"suffix" class\x3d"suffix"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"rightIcon" class\x3d"icon"\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e',
baseClass:"infographic-number-dijit",type:"number",config:null,constructor:function(a){this.visible=a.visible},postCreate:function(){this.inherited(arguments);this._value=this._features=null;this._upgradeConfig(this.config);this.setConfig(this.config);this._updateBackGroundColor()},_upgradeConfig:function(a){(a=a&&a.dataFormat)&&"undefined"===typeof a.digitSeparator&&(a.digitSeparator=!0)},setLayerInfo:function(){},setVisible:function(a){this.visible=a},resetData:function(){this.numberValue=this._value=
this._features=this.dataSource=null},onDataSourceDataUpdate:function(a){this.inSettingPage?a&&"undefined"!==typeof a.features&&(this._features=p.cleanFeatures(a.features)):"number"===typeof a&&(this._value=a)},setDataSource:function(a){this.inherited(arguments);this.dataSource=a},setConfig:function(a){a&&(this.config=a)},startRendering:function(){this._shouldRenderNumber()&&(this._updateBackGroundColor(),this._calculateNumberValue(),"number"!==typeof this.numberValue?this.showNodata():this._renderNumber(this.numberValue))},
_calculateNumberValue:function(){if(this.inSettingPage){var a=p.getStatisticForNumber(this.config);a=h.statistic(a,this.dataSource,this._features)}else a=this._value;"undefined"!==typeof a&&!1!==a&&(this.numberValue=a)},_renderNumber:function(a){this._cleanNumberContent();this.valueContent.innerHTML=k.localizeNumber(a);this._setValueDisplay()},_setValueDisplay:function(){var a=this.config;a&&(this._setBackground(a),this._setFont(a),this._setDataFormat(a),this._setIndicatorStyle())},_shouldRenderNumber:function(){if(this.visible&&
this.config){var a;(a=this.inSettingPage?this.domNode&&this._features:this.domNode&&"number"===typeof this._value)?this.hideNodata():this.showNodata();return!!a}},_getIndicatorColor:function(){var a=!1,e=!1,f=this.config.indicators;f&&((f=p.getVaildIndicator(this.numberValue,f))&&f.valueColor&&(a=f.valueColor),f&&k.isNotEmptyObject(f.iconInfo)&&(e=f.iconInfo));return{color:a,icon:e}},_cleanNumberContent:function(){r.removeClass(this.leftIcon);r.addClass(this.leftIcon,["icon"]);r.removeClass(this.rightIcon);
r.addClass(this.rightIcon,["icon"]);this.replaceIcon&&(r.destroy(this.replaceIcon),this.replaceIcon=null);r.empty(this.valueContent);r.empty(this.prefix);r.empty(this.suffix);this._setValueColor("")},_updateBackGroundColor:function(){var a=this.config;(a=a&&a.background&&a.background.backgroundColor)&&r.setStyle(this.domNode,"backgroundColor",a)},_setBackground:function(a){if(a=a&&a.background){a.backgroundColor&&r.setStyle(this.domNode,"backgroundColor",a.backgroundColor);var e=a.alignment;e&&(r.removeClass(this.domNode),
r.addClass(this.domNode,"infographic-number-dijit"),e.horizontal&&r.addClass(this.domNode,"horizontal-"+e.horizontal),e.vertical&&r.addClass(this.domNode,"vertical-"+e.vertical));a.link?r.setAttr(this.numberContent,"href",a.link):r.removeAttr(this.numberContent,"href")}},_setFont:function(a){if(a&&a.font){var e={};b.font.setStyle(a.font,e);r.setStyle(this.number,e)}},_setDataFormat:function(a){var e="";var f=this.numberValue;var c=a.dataFormat;if(c){a=c.decimalPlaces;var d=c.digitSeparator;a&&(a=
Number(a));"percentage"===c.unit?f=k.convertNumberToPercentage(f,a,d):"thousand"===c.unit?(e=this.nls.thousandAbbreviation,f/=1E3):"million"===c.unit?(e=this.nls.millionAbbreviation,f/=1E6):"billion"===c.unit&&(e=this.nls.billionAbbreviation,f/=1E9);"percentage"!==c.unit&&(f=k.localizeNumberByFieldInfo(f,{format:{places:a,digitSeparator:d}}));e&&(f+=e);this.valueContent.innerHTML=f;c.prefix&&(this.prefix.innerHTML=k.sanitizeHTML(c.prefix));c.suffix&&(this.suffix.innerHTML=k.sanitizeHTML(c.suffix))}},
_setIndicatorStyle:function(){var a=this._getIndicatorColor();a.color&&this._setValueColor(a.color);a.icon&&this._setIndicatorIcon(a.icon)},_setValueColor:function(a){v.set(this.number,"color",a)},_setIndicatorIcon:function(a){a&&("left"===a.placement||"right"===a.placement?this._setLeftRightIcon(a):"replace"===a.placement&&this._setReplaceIcon(a))},_setReplaceIcon:function(a){var e=r.create("div",{"class":"indicator-icon "+a.icon});r.empty(this.valueContent);r.place(e,this.valueContent);v.set(e,
"color",a.color);v.set(e,"display","inline-flex")},_setLeftRightIcon:function(a){if("left"===a.placement)var e=this.leftIcon;else"right"===a.placement&&(e=this.rightIcon);r.addClass(e,"indicator-icon "+a.icon);v.set(e,"color",a.color)},showNodata:function(a){this._cleanNumberContent();r.addClass(this.domNode,"no-data");a&&(this.noDataDiv.innerHTML=k.sanitizeHTML(a))},hideNodata:function(){r.removeClass(this.domNode,"no-data")}})})},"widgets/Infographic/dijits/SourceLauncher":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/on dojo/Deferred dijit/_WidgetBase jimu/utils ../utils jimu/LayerInfos/LayerInfos esri/geometry/geometryEngine esri/geometry/Extent esri/tasks/query esri/tasks/QueryTask esri/tasks/StatisticDefinition esri/layers/FeatureLayer ./clientStatistic".split(" "),
function(A,n,v,r,k,p,h,b,a,e,f,c,d,g,l,q){return A([p,v],{oidFieldType:"esriFieldTypeOID",constructor:function(m){this.uniqueID=h.getRandomString();this.map=m.map;this.useSelection=m.useSelection;this.filterByExtent=m.filterByExtent;this.returnFeatures=m.returnFeatures;this.statistic=m.statistic;this.dataSource=m.dataSource;this.config=m.config;this.isDateType=!!(this.config&&this.config.data||{}).dateConfig;this.layerInfosObj=a.getInstanceSync();this.layerObject=m.layerObject;this.timeIntervalHandle=
this.filterChangedHandle=this.updateEndHandle=this.refreshIntervalHandle=this.selectionHandle=this.exchetChangeHandle=this._oldQueryParameter=this._queryParameter=this._layerUrl=null;this._loadingTypes={};this.extents=this.getBookmarkExtents(m.appConfig)},start:function(){this.showLoading("sl-get-lyobj");this._tryGetLayerObject("sl-get-lyobj").then(function(){this.hideLoading("sl-get-lyobj");this.awake();this._listenEventsContinuousAccessFeatures()}.bind(this),function(m){console.error(m.message||
m);this.hideLoading("sl-get-lyobj");this._onFailed()}.bind(this))},awake:function(){this.sleeping=!1;this._getFeaturesForFirst()},sleep:function(){this.sleeping=!0},destroy:function(){this._loadingTypes={};this._removeHandles();this.inherited(arguments)},_getFeaturesForFirst:function(){this._trigerCallback()},_listenEventsContinuousAccessFeatures:function(){if(this.layerObject&&this.layerInfo){var m=this._shouldAccessClientFeatures();this.useSelection&&(this._resetSelectionHandle(),this.selectionHandle=
r(this.layerObject,"selection-complete,selection-clear",n.hitch(this,function(){this._trigerCallback()})));m||(this._resetFilterChangedHandle(),this.filterChangedHandle=r(this.layerInfo,"filterChanged",n.hitch(this,function(u){u&&u.zoomAfterFilter&&this.filterByExtent||this._trigerCallback()})));m&&(this._resetUpdateEndHandle(),this.updateEndHandle=r(this.layerObject,"update-end",n.hitch(this,function(){this._trigerCallback()})));this.filterByExtent&&this.map&&(this._resetExtentChangeHandle(),this.exchetChangeHandle=
r(this.map,"extent-change",n.hitch(this,function(){this.emit("start");this._trigerCallback(!0)})));m||(this._setTimeListener(),this._resetRefreshIntervalHandle(),this.refreshIntervalHandle=r(this.layerObject,"refresh-interval-change",n.hitch(this,this._setTimeListener)))}},_setTimeListener:function(){var m=this._getLayerRefreshInterval();m?(this._resetTimeIntervalHandle(),this.timeIntervalHandle=setInterval(n.hitch(this,function(){this._trigerCallback()}),6E4*m)):this._resetTimeIntervalHandle()},
_trigerCallback:function(m){var u=this.computingTheWayToGetFeatures();if(!m||2!==u||!this._isLayerOnDemandMode())switch(this.emit("start"),u){case 1:this._getFeaturesFromSelection(this.map,this.layerObject,this.filterByExtent,n.hitch(this,this._onDataUpdate));break;case 2:this._getClientFeaturesFromMap(this.map,this.layerObject,this.filterByExtent,n.hitch(this,this._onDataUpdate));break;case 3:this._getStatisticsFeaturesForServer(n.hitch(this,this._onDataUpdate))}},computingTheWayToGetFeatures:function(){var m=
0;return this.sleeping||!this.layerObject?m:m=this._isMapLayer()?this._shouldAccessFeaturesBySelection()?1:this._shouldAccessClientFeatures()?2:3:0},_getClientFeaturesFromMap:function(m,u,w,z){var y=u.graphics;w&&(y=this._filterFeaturesByExtent(m.extent,y));y=this._sortClientFeaturesByObjID(y,u);z(y)},_getFeaturesFromSelection:function(m,u,w,z){var y=[],C=!1;y=u.getSelectedFeatures();C=!0;w&&(y=this._filterFeaturesByExtent(m.extent,y));y.isSelectedFeatures=C;y=this._sortClientFeaturesByObjID(y,u);
z(y)},_getStatisticsFeaturesForServer:function(m){this._updateLayerInfoFilter();this._tryGenerateQueryParameter();this._shouldLaunchQuery()&&(this.showLoading("sl-sev-st"),this.queryDeferred=this._doQuery(),this.queryDeferred.then(n.hitch(this,function(u){this.queryDeferred=null;this.hideLoading("sl-sev-st");u=u.features||[];u=this._calculateAverageWithNullValueAsZero(u,this.config);m(u,!0)}),n.hitch(this,function(u){this.queryDeferred=null;console.error(u.message||u);this.hideLoading("sl-sev-st");
this._onFailed("sl-sev-st")})))},_updateLayerInfoFilter:function(){if(this.dataSource&&"undefined"!==typeof this.dataSource.layerId){var m=this.layerInfosObj.getLayerInfoById(this.dataSource.layerId);m&&(this._layerFilter=m.getFilter())}},_onFailed:function(){this.emit("failed")},hideLoading:function(m){this._loadingTypes[m]=!1;this._shouldHideLoading()&&this._hideLoading()},showLoading:function(m){this._loadingTypes[m]=!0;this._showLoading()},_showLoading:function(){this.emit("loading",this.uniqueID)},
_hideLoading:function(){this.emit("unloading",this.uniqueID)},_shouldHideLoading:function(){if(this._loadingTypes)return Object.keys(this._loadingTypes).map(function(m){return this._loadingTypes[m]}.bind(this)).every(function(m){return!m})},_onDataUpdate:function(m,u){m=this._getValueByFeatures(m,u);this.emit("data-update",m);setTimeout(function(){this.emit("done")}.bind(this),500)},_getValueByFeatures:function(m,u){if(!m||!m.length)return null;var w=null;this.returnFeatures?m&&(w={features:m,hasStatisticsed:!!u}):
w=this._getValueForNumber(m);return w},_getValueForNumber:function(m){return this._isNeededCalculateForClient()?q.statistic(this.statistic,this.dataSource,m):q.getSingleValueForServerStatFeature(m)},_isMapLayer:function(){return"DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===this.dataSource.dataSourceType},_isLayerOnDemandMode:function(){return this.layerObject&&this.layerObject.currentMode===l.MODE_ONDEMAND},_shouldAccessFeaturesBySelection:function(){return this.useSelection&&this.layerObject&&this.layerObject.getSelectedFeatures().length},
_shouldAccessClientFeatures:function(){var m=this.config&&this.config.data&&"feature"===this.config.data.mode,u=this.isDateType,w=this._isSupportServerStatByExtent();return m||u||!w},_isSupportServerStatByExtent:function(){var m=this.layerObject&&this.layerObject.version&&10.11<=Number(this.layerObject.version),u=this._isLayerSupportStatistics();return m&&u},_isLayerSupportStatistics:function(){if(this.layerObject&&this.layerObject.url){var m=!1;return m=this.layerObject.advancedQueryCapabilities?
!!this.layerObject.advancedQueryCapabilities.supportsStatistics:!!this.layerObject.supportsStatistics}},_getLayerRefreshInterval:function(){if(this.layerObject&&this.layerObject.refreshInterval)return this.layerObject.refreshInterval},_sortClientFeaturesByObjID:function(m,u){if(0<m.length){var w=h.getObjectIdField(u);w&&(u=m[0])&&u.attributes&&u.attributes.hasOwnProperty(w)&&m.sort(function(z,y){z.attributes||(z.attributes={});y.attributes||(y.attributes={});z=z.attributes[w];y=y.attributes[w];return z<
y?-1:z>y?1:0})}return m},_filterFeaturesByExtent:function(m,u){var w=m.normalize();return u=u.filter(n.hitch(this,function(z){try{if(z.geometry){var y="point"===z.geometry.type||"multipoint"===z.geometry;return w.some(n.hitch(this,function(C){return y?C.contains(z.geometry):e.intersects(C,z.geometry)}))}}catch(C){console.error(C)}return!1}))},_calculateAverageWithNullValueAsZero:function(m,u){if(!this._shouldCalcAvgForNullValue(u)||!m||!m.length)return m;u=u.data&&u.data.valueFields;if(!u||!u.length)return m;
var w=u.map(function(z){return z+"_sum"});m.forEach(function(z){var y=z.attributes;if(y){var C=y.STAT_COUNT;"undefined"===typeof C?(C=y.stat_count,delete y.stat_count):delete y.STAT_COUNT;var D,t,x;w.forEach(function(B){x=B.replace(/_SUM$/gi,"");var E=b.upperCaseString(B);B=b.lowerCaseString(B);var F=b.upperCaseString(x+"_AVG");D=y[E];"undefined"===typeof D?(D=y[B],delete y[B]):delete y[E];!D&&"number"!==typeof D||!C?y[F]=null:(t=D/C,y[F]=t)})}});return m},_shouldCalcAvgForNullValue:function(m){var u=
m&&m.data&&m.data.mode,w=m&&m.data&&m.data.operation;m=m&&m.data&&m.data.nullValue;return u&&("category"===u||"field"===u)&&m&&"average"===w},_shouldLaunchQuery:function(){var m=!0,u=!(!this.queryDeferred||this.queryDeferred.isResolved()||this.queryDeferred.isRejected()),w=h.isEqual(this._queryParameter,this._oldQueryParameter);u&&w&&(m=!1);this._oldQueryParameter=n.clone(this._queryParameter);return m},_getOutStatistics:function(m){var u=m.fields,w=m.type,z=m.nullValue,y=w;z&&"avg"===w&&(y="sum");
m=null;u&&u.length?(m=u.map(function(C){var D=b.upperCaseString(C+"_"+y),t=new g;t.statisticType=y;t.onStatisticField=C;t.outStatisticFieldName=D;return t}.bind(this)),z&&"avg"===w&&(u=new g,u.statisticType="count",u.onStatisticField=this._getStatisticsFieldForCountType(this.layerObject),u.outStatisticFieldName="STAT_COUNT",m.push(u))):(u=new g,u.statisticType="count",u.onStatisticField=this._getStatisticsFieldForCountType(this.layerObject),u.outStatisticFieldName="STAT_COUNT",m=[u]);return m},_tryGenerateQueryParameter:function(){this._queryParameter=
{};this._layerUrl&&(this._queryParameter.url=this._layerUrl);this._layerFilter&&(this._queryParameter.where=this._layerFilter);if(this.returnFeatures)this.statistic&&(this._queryParameter.outStatistics=this._getOutStatistics(this.statistic),this.statistic.groupByFields&&(this._queryParameter.groupByFieldsForStatistics=this.statistic.groupByFields));else if(this.statistic){var m=this.statistic.type;var u=this.statistic.field;var w=b.upperCaseString(u+"_"+m);"count"===this.statistic.type&&(u=this._getStatisticsFieldForCountType(this.layerObject),
w="STAT_COUNT");var z=new g;z.statisticType=m;z.onStatisticField=u;z.outStatisticFieldName=w;this._queryParameter.outStatistics=[z]}},_getStatisticsFieldForCountType:function(m){var u=null;m&&(u=(m=(m=m.fields)&&m.filter(function(w){return w.type===this.oidFieldType}.bind(this))[0])&&m.name);return u||"*"},_doQuery:function(){var m=new k;if(!this._queryParameter)return m.reject("Empty query parameter."),m;if(!this._queryParameter.url)return m.reject("Empty layer url."),m;var u=new d(this._queryParameter.url),
w=new c;w.where=this._queryParameter.where||"1\x3d1";w.returnGeometry=!1;if(this.dataSource.filterByExtent&&this.map){var z=this.map.extent;w.geometry=z;w.cacheHint=this.supportCacheHint(z)}this._queryParameter.groupByFieldsForStatistics&&(w.groupByFieldsForStatistics=this._queryParameter.groupByFieldsForStatistics);if(this._hasVaildOutStatistics(this._queryParameter.outStatistics))w.outStatistics=this._queryParameter.outStatistics;else return m.reject("Invaild outStatistics of query params."),m;
this._queryParameter.orderByFields&&(w.orderByFields=this._queryParameter.orderByFields);return u.execute(w)},_hasVaildOutStatistics:function(m){return m&&m.length?m.every(function(u){return this._isTrueOrZero(u.onStatisticField)&&this._isTrueOrZero(u.outStatisticFieldName)&&!!u.statisticType}.bind(this)):!1},_isTrueOrZero:function(m){return!!m||0===m},_tryGetLayerObject:function(){var m=new k;if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"!==this.dataSource.dataSourceType)return m.resolve(),m;var u=this.layerInfosObj.getLayerInfoById(this.dataSource.layerId);
if(u)return this.layerInfo=u,this.layerObject?(this._layerUrl=this.layerObject.url,m.resolve(),m):u.getLayerObject().then(n.hitch(this,function(w){this.layerObject=w;this._layerUrl=this.layerObject.url}));m.reject("invaild data source");return m},_isNeededCalculateForClient:function(){var m=this.layerObject&&this.useSelection&&0<this.layerObject.getSelectedFeatures().length,u=this._isSupportServerStatByExtent();return m||!u},_resetExtentChangeHandle:function(){this.exchetChangeHandle&&this.exchetChangeHandle.remove&&
(this.exchetChangeHandle.remove(),this.exchetChangeHandle=null)},_resetUpdateEndHandle:function(){this.updateEndHandle&&this.updateEndHandle.remove&&(this.updateEndHandle.remove(),this.updateEndHandle=null)},_resetFilterChangedHandle:function(){this.filterChangedHandle&&this.filterChangedHandle.remove&&(this.filterChangedHandle.remove(),this.filterChangedHandle=null)},_resetSelectionHandle:function(){this.selectionHandle&&this.selectionHandle.remove&&(this.selectionHandle.remove(),this.selectionHandle=
null)},_resetRefreshIntervalHandle:function(){this.refreshIntervalHandle&&this.refreshIntervalHandle.remove&&(this.refreshIntervalHandle.remove(),this.refreshIntervalHandle=null)},_resetTimeIntervalHandle:function(){this.timeIntervalHandle&&(clearInterval(this.timeIntervalHandle),this.timeIntervalHandle=null)},_removeHandles:function(){this._resetExtentChangeHandle();this._resetUpdateEndHandle();this._resetFilterChangedHandle();this._resetSelectionHandle();this._resetRefreshIntervalHandle();this._resetTimeIntervalHandle();
this._resetSelectionHandle()},supportCacheHint:function(m){return this.appConfig?(this.extents||[]).some(function(u){u=this.getTargetExtent(u);return this.isSameExtent(m,u)}.bind(this)):!1},getBookmarkExtents:function(m){m=this.getBookmarkConfig(m);return this.getExtendsFromBookmarkConfigs(m)},getBookmarkConfig:function(m){if(!m)return[];var u=[];u=u.concat(m.widgetOnScreen&&m.widgetOnScreen.widgets||[]);u=u.concat(m.widgetPool&&m.widgetPool.widgets||[]);(m.widgetPool&&m.widgetPool.groups||[]).forEach(function(w){u=
u.concat(w.widgets)});return u.filter(function(w){return"Bookmark"===w.name}).map(function(w){return w.config})},getExtentsFormBookmarkConfig:function(m){if(m&&m.bookmarks2D&&m.bookmarks2D.length)return m.bookmarks2D.map(function(u){return u.extent})},isSameExtent:function(m,u){m=this.getCleanExtent(m);u=this.getCleanExtent(u);return b.isEqual(m,u)},getTargetExtent:function(m){return this.map&&this.map.getTargetExtent?this.map.getTargetExtent(new f(m)):m},getCleanExtent:function(m){if(m)return{xmax:m.xmax,
xmin:m.xmin,ymax:m.ymax,ymin:m.ymin}},getExtendsFromBookmarkConfigs:function(m){var u=[];m.forEach(function(w){w=this.getExtentsFormBookmarkConfig(w)||[];u=u.concat(w)}.bind(this));return u}})})},"widgets/Infographic/dijits/ExtraSourceLauncher":function(){define("dojo/_base/declare dojo/Evented dijit/_WidgetBase jimu/DataSourceManager ../utils ./clientStatistic".split(" "),function(A,n,v,r,k,p){return A([v,n],{constructor:function(h){this.dataSourceManager=r.getInstance();this.appConfig=h.appConfig;
this.frameWorkDsId=h.dataSource.frameWorkDsId;this.returnFeatures=h.returnFeatures;this.formatResult=h.formatResult;this.statistic=h.statistic;this.exdsBeginUpdateHandle=null;this._isStatisticDataSource()},start:function(){this.awake()},awake:function(){this.sleeping=!1;this._getFeaturesForFirst()},sleep:function(){this.sleeping=!0},destroy:function(){this._removeHandles();this.inherited(arguments)},setAppConfigDSFeatures:function(h){this.sleeping||this._onDataUpdate(h)},_getFeaturesForFirst:function(){var h=
this.dataSourceManager.getData(this.dataSource.frameWorkDsId);this._onDataUpdate(h&&h.features)},_onDataUpdate:function(h){var b;this.returnFeatures?h&&(b={features:h,hasStatisticsed:!!this._isStatDataSource}):(b=this._isStatDataSource?p.statisticExtraStatSource(this.statistic,h):p.getStatisticResultFromFeatures(h,this.statistic),this.formatResult&&(b=k.formatterRangeNumber(b)));this.emit("data-update",b)},_isStatisticDataSource:function(){var h=this.appConfig.dataSource&&this.appConfig.dataSource.dataSources;
h=h&&h[this.frameWorkDsId];this._isStatDataSource=!(!h||"FeatureStatistics"!==h.type)},_resetExdsBeginUpdateHandle:function(){this.exdsBeginUpdateHandle&&this.exdsBeginUpdateHandle.remove&&(this.exdsBeginUpdateHandle.remove(),this.exdsBeginUpdateHandle=null)},_removeHandles:function(){this._resetExdsBeginUpdateHandle()}})})},"widgets/Infographic/_ChartSetting":function(){define("dojo/_base/declare dojo/_base/html dojo/on dojo/query dijit/focus dojo/Evented dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./_ChartSetting.html".split(" "),
function(A,n,v,r,k,p,h,b,a,e){return A([b,a,p],{templateString:e,baseClass:"ig-chart-setting-dlg",postCreate:function(){var f=this.chartJson.config||{},c=f.data||{};f=f.display||{};var d=c.type;"pie"===d?(n.setStyle(this.verticalAxisSection,"display","none"),n.setStyle(this.horizontalAxisSection,"display","none"),n.setStyle(this.withoutRecordsSection,"display","none")):n.setStyle(this.dataLabelsSection,"display","none");c.dateConfig||n.setStyle(this.withoutRecordsSection,"display","none");this._calcuteLegendDisplay(c,
f)||n.setStyle(this.legendSection,"display","none");"count"!==c.mode&&"field"!==c.mode||"pie"===d||n.setStyle(this.legendSection,"display","none");(d=f.legend)&&d.show&&this._toggle(this.legendToggle);(d=f.dataLabel)&&d.show&&this._toggle(this.dataLabelsToggle);(d=f.xAxis)&&d.show&&this._toggle(this.horizontalAxisToggle);(f=f.yAxis)&&f.show&&this._toggle(this.verticalAxisToggle);c.dateConfig&&c.dateConfig.isNeedFilled&&this._toggle(this.withoutRecordsToggle);this.own(v(this.domNode,"keydown",function(g){g.keyCode===
h.ESCAPE&&this.emit("escape")}.bind(this)))},focusFirst:function(){var f=r(".toggle",this.domNode);if(f&&f.length){var c=null;f.some(function(d){return"none"!==n.getStyle(d,"display")?(c=d,!0):!1});c&&k.focus(c)}},_calcuteLegendDisplay:function(f,c){var d=f.mode;"pie"===f.type?f=!0:(f=!0,"count"===d||"field"===d?f=!1:c.seriesStyle&&(f="layerSymbol"!==c.seriesStyle.type));return f},_toggle:function(f){n.hasClass(f,"toggle-on")?(n.removeClass(f,"toggle-on"),n.addClass(f,"toggle-off"),f.setAttribute("aria-pressed",
!1)):(n.removeClass(f,"toggle-off"),n.addClass(f,"toggle-on"),f.setAttribute("aria-pressed",!0))},_onToggleClick:function(f){var c=f.target;this._toggle(c);f=n.hasClass(c,"toggle-on")?!0:!1;c=n.attr(c,"data-id");"legend"===c?this.chartJson.config.display.legend.show=f:"dataLabels"===c?this.chartJson.config.display.dataLabel.show=f:"horizontalAxis"===c?this.chartJson.config.display.xAxis.show=f:"verticalAxis"===c?this.chartJson.config.display.yAxis.show=f:"withoutRecords"===c&&this.chartJson.config.data.dateConfig&&
(this.chartJson.config.data.dateConfig.isNeedFilled=f);this.chartDijit.setConfig(this.chartJson.config);this.chartDijit.startRendering()}})})},"widgets/Infographic/IGUtils":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/promise/all esri/tasks/query esri/tasks/QueryTask jimu/LayerInfos/LayerInfos jimu/DataSourceManager jimu/utils ./utils".split(" "),function(A,n,v,r,k,p,h,b,a,e){return A([],{constructor:function(f){this.appConfig=f.appConfig;this.map=f.map;this.layerInfosObj=
h.getInstanceSync();this.dataSourceManager=b.getInstance();this.cacheData={}},destroy:function(){this.cacheData=this.dataSourceManager=this.layerInfosObj=this.map=this.appConfig=null},preprocessingDataSource:function(f){var c=new n;if(!f)return c.resolve(),c;var d=this._tryGetLayerIdDataSchema(f),g=d.dataSchema;d=this._tryGetLayerObject(d.layerId);f=this._tryGetLayerForFrameWork(g,f);r([d,f]).then(function(l){var q=l[0];c.resolve({layerObject:q&&q.layerObject,popupInfo:q&&q.popupInfo,featureLayerForFrameWork:l[1]})},
function(l){c.reject(l)});return c},getFeaturesForSetting:function(f){var c=new n;if(!f)return c.resolve(),c;this.getFeaturesByDataSource(f).then(function(d){d=this._cutFeaturesForSetting(d);c.resolve(d)}.bind(this),function(d){c.reject(d)});return c},preprocessingDataSourceForSetting:function(f){var c=new n;if(!f)return c.resolve(),c;var d=this._tryGetLayerIdDataSchema(f),g=d.layerId,l=d.dataSchema;d=this._tryGetLayerObject(g);l=this._tryGetLayerForFrameWork(l,f);f=this.getLayerDefinitionByDataSource(f,
g);r([d,l,f]).then(function(q){var m=q[0];c.resolve({layerObject:m&&m.layerObject,popupInfo:m&&m.popupInfo,featureLayerForFrameWork:q[1],definition:q[2]})}.bind(this),function(q){c.reject(q)});return c},preprocessingDataSourceForRange:function(f){var c=new n;if(!f)return c.resolve(),c;var d=this._tryGetLayerIdDataSchema(f).layerId;d=this.getLayerDefinitionByDataSource(f,d);f=this.getFeaturesByDataSource(f);r([d,f]).then(function(g){var l=g[0];g=g[1];g=this._cutFeaturesForSetting(g);c.resolve({definition:l,
features:g})}.bind(this),function(g){c.reject(g)});return c},_tryGetLayerIdDataSchema:function(f){var c={layerId:"",dataSchema:null};if(f.layerId)this.dsType="CLIENT_FEATURES",c.layerId=f.layerId;else if(f.frameWorkDsId){f=(f=e.getDsTypeInfoMeta(f.frameWorkDsId,this.appConfig))&&f.dsMeta;if(!f)return c;"Features"===f.type?this.dsType="FRAMEWORK_FEATURES":"FeatureStatistics"===f.type&&(this.dsType="FRAMEWORK_STATISTICS");c.dataSchema=f.dataSchema;f=e.parseDataSourceId(f.id);c.layerId=f&&f.layerId}return c},
_tryGetLayerObject:function(f){var c=new n;if(!f)return c.resolve(),c;f=this._tryGetLayerInfo(f);if(!f)return console.error("Invalid data source"),c.resolve(),c;var d=f.getPopupInfo();f.getLayerObject().then(function(g){c.resolve({layerObject:g,popupInfo:d})}.bind(this),function(g){c.reject(g)});return c},_tryGetLayerForFrameWork:function(f,c){var d=new n;if(!f)return d.resolve(),d;var g=f;"FRAMEWORK_STATISTICS"===this._getDataSourceType(c)&&(g=e.mockLayerDefinitionForSTD(f));e.getLoadedLayer(g).then(function(l){d.resolve(l)}.bind(this),
function(l){d.reject(l)});return d},_tryGetLayerInfo:function(f){var c=this.layerInfosObj.getLayerInfoById(f);c||(c=this.layerInfosObj.getTableInfoById(f));return c},getLayerDefinitionByDataSource:function(f,c){var d=new n;if(!f)return console.error("Invalid data source"),d.resolve(),d;if(f.layerId){c=this._tryGetLayerInfo(f.layerId);if(!c)return d.reject("Invalid data source"),d;var g=c.getPopupInfo();this._getServiceDefinitionByLayerInfo(c).then(function(l){e.addAliasForLayerDefinition(l,g);d.resolve(l)}.bind(this),
function(l){d.reject(l)});return d}if(f.frameWorkDsId){c&&(c=this._tryGetLayerInfo(c))&&(g=c.getPopupInfo());c=null;f=(this.appConfig.dataSource&&this.appConfig.dataSource.dataSources)[f.frameWorkDsId];if("Features"===f.type)return c=v.clone(f.dataSchema),e.addAliasForLayerDefinition(c,g),d.resolve(c),d;if("FeatureStatistics"===f.type)return c={type:"Table",fields:[]},f=v.clone(f.dataSchema),c.fields=f.fields,f.groupByFields&&f.groupByFields[0]&&(c.groupByFields=v.clone(f.groupByFields)),e.addAliasForLayerDefinition(c,
g),d.resolve(c),d}},_getDataSourceType:function(f){if(f){if(f.layerId)return"CLIENT_FEATURES";if(f.frameWorkDsId&&(f=(f=e.getDsTypeInfoMeta(f.frameWorkDsId,this.appConfig))&&f.dsMeta)){if("Features"===f.type)return"FRAMEWORK_FEATURES";if("FeatureStatistics"===f.type)return"FRAMEWORK_STATISTICS"}}},_getServiceDefinitionByLayerInfo:function(f){var c=new n;f.getServiceDefinition().then(v.hitch(this,function(d){d?c.resolve(d):f.getLayerObject().then(function(g){g?(g=a.getFeatureLayerDefinition(g),c.resolve(g)):
c.resolve(null)},function(g){c.reject(g)})}));return c},getFeaturesByDataSource:function(f){var c=new n,d=null;if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===f.dataSourceType){f=f.layerId;if(!f)return c.resolve(),c;this._getFeaturesForMapDS(f).then(function(g){d=g.features;c.resolve(d)},function(g){c.reject(g)})}else{f=f.frameWorkDsId;if(!f)return c.resolve(),c;this.getFeaturesForFrameDS(f).then(function(g){d=g.features;c.resolve(d)},function(g){c.reject(g)})}return c},_cutFeaturesForSetting:function(f){f&&
1E3<f.length&&(f=f.slice(0,1E3));return f},_getFeaturesForMapDS:function(f){var c=new n,d=this._tryGetLayerInfo(f);if(!d)return c.reject("Can not get layerInfo by the layer id of this data source."),c;f=d.getUrl();var g=d.getFilter();if(!f)return console.warn("Invalid layer url of data source, use client features."),d.getLayerObject().then(function(l){c.resolve({features:l.graphics})}),c;d=new k;d.outSpatialReference=this.map.spatialReference;d.where=g||"1\x3d1";d.outFields=["*"];d.returnGeometry=
!1;return(new p(f)).execute(d)},getFeaturesForFrameDS:function(f){var c=new n;if(this.cacheData[f])return c.resolve(this.cacheData[f]),c;if("widget"===e.parseDataSourceId(f).from)return c.resolve({}),c;var d=this.dataSourceManager.getDataSourceConfig(f);d=v.clone(d);if(!d)return c.reject("Can not get vaild data source config by the frameWorkDsId of this data source."),c;d.filterByExtent=!1;this.dataSourceManager.doQuery(d).then(function(g){this.cacheData[f]=g;c.resolve(g)}.bind(this),function(g){c.reject(g)});
return c}})})},"widgets/Infographic/a11y/widget":function(){define(["dojo/keys","jimu/utils"],function(A,n){return{_onRuntimeSettingIconKeydown:function(v){v.keyCode===A.ENTER&&this._onRuntimeSettingIconClicked(v)},_initDomNodeAsLastNode:function(){n.initLastFocusNode(this.domNode,this.domNode)}}})},"widgets/Infographic/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Infographic/dijits/ChartDijit.html":'\x3cdiv style\x3d"width:100%;height:100%;"\x3e\r\n    \x3cdiv style\x3d"display: none;" data-dojo-attach-point\x3d"yAxisName" class\x3d"y-axis-name rotate"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"chart-dijit" style\x3d"width:100%;height:100%;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"noDataDiv" class\x3d"no-data-tip"\x3e${nls.noData}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"overlap" class\x3d"over-lay hide"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"chart-dom" data-dojo-attach-point\x3d"chartDomNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Infographic/_ChartSetting.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"legendSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.legend}"\x3e${nls.legend}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"legendToggle" tabindex\x3d"0" aria-label\x3d"${nls.legend}" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"legend" role\x3d"button" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"dataLabelsSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.dataLabels}"\x3e${nls.dataLabels}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"dataLabelsToggle" tabindex\x3d"0" aria-label\x3d"${nls.dataLabels}" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"dataLabels" role\x3d"button" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"horizontalAxisSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.horizontalAxis}"\x3e${nls.horizontalAxis}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"horizontalAxisToggle"  tabindex\x3d"0" aria-label\x3d"${nls.horizontalAxis}" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"horizontalAxis" role\x3d"button" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"verticalAxisSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.verticalAxis}"\x3e${nls.verticalAxis}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"verticalAxisToggle"  tabindex\x3d"0" aria-label\x3d"${nls.verticalAxis}"data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"verticalAxis" role\x3d"button" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n   \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"withoutRecordsSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.showPeriodsWithoutRecords}"\x3e${nls.showPeriodsWithoutRecords}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"withoutRecordsToggle" tabindex\x3d"0" aria-label\x3d"${nls.showPeriodsWithoutRecords}" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"withoutRecords" role\x3d"button" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/Infographic/Widget.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"setting" style\x3d"width: 100%;height: 16px;"\x3e\x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"container" style\x3d"width: 100%;height: calc(100% - 16px)"\x3e\x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" class\x3d"loading hide"\x3e\x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"virtualFocusNode" class\x3d"lastFocusNode screen-readers-only" tabindex\x3d"0"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Infographic/css/style.css":'@font-face {font-family: \'icomoon\'; src: url("fonts/icomoon.eot?oflavm"); src: url("fonts/icomoon.eot?oflavm#iefix") format(\'embedded-opentype\'), url("fonts/icomoon.ttf?oflavm") format(\'truetype\'), url("fonts/icomoon.woff?oflavm") format(\'woff\'), url("fonts/icomoon.svg?oflavm#icomoon") format(\'svg\'); font-weight: normal; font-style: normal;}.jimu-widget-infographic .indicator-icon,.jimu-widget-infographic-setting .indicator-icon {font-family: \'icomoon\' !important; speak: none; font-style: normal; font-weight: normal; font-variant: normal; text-transform: none; line-height: 1; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;}.jimu-widget-infographic .loading {position: absolute; overflow: hidden; bottom: 4px; right: 0; width: 17px; height: 17px; z-index: 101;}.jimu-rtl .jimu-widget-infographic .loading {left: 2px; right: auto;}.jimu-widget-infographic .loading {font-size: 10px; text-indent: -9999em; border-top: 3px solid rgba(219, 206, 206, 0.7); border-right: 3px solid rgba(219, 206, 206, 0.7); border-bottom: 3px solid rgba(219, 206, 206, 0.7); border-left: 3px solid #ffffff; -webkit-transform: translateZ(0); -ms-transform: translateZ(0); transform: translateZ(0); -webkit-animation: load8 1.1s infinite linear; animation: load8 1.1s infinite linear; box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.2); border-radius: 8px;}.jimu-widget-infographic .loading:after {border-radius: 50%; width: 24px; height: 24px;}.jimu-widget-infographic .hide {display: none !important;}.icon-like:before {content: "\\e900";}.icon-unlike:before {content: "\\e904";}.icon-stop:before {content: "\\e902";}.icon-danger:before {content: "\\e901";}.icon-star:before {content: "\\e903";}.icon-alarm:before {content: "\\e906";}.icon-down:before {content: "\\e909";}.icon-right:before {content: "\\e90f";}.icon-up:before {content: "\\e911";}.icon-wrong:before {content: "\\e912";}.lm_goldenlayout .lm_item .lm_content {position: relative;}.lm_goldenlayout .lm_item .lm_content .table-layout-container {display: table; table-layout: fixed; overflow: hidden; width: 100%; height: 100%;}.lm_goldenlayout .lm_item .lm_content .table-layout-container \x3e div {padding: 10px 15px;}.lm_goldenlayout .lm_item .lm_content .image-node {display: table-cell; overflow: hidden; position: relative; width: 100%; height: 100%;}.lm_goldenlayout .lm_item .lm_content .no-trim {white-space: pre-wrap;}.infographic-number-dijit {display: flex; justify-content: center; align-items: center;}.infographic-number-dijit .number-content .value-content {white-space: nowrap;}.infographic-number-dijit a,.infographic-number-dijit a:hover,.infographic-number-dijit a:visited,.infographic-number-dijit a:link,.infographic-number-dijit a:active {text-decoration: none;}.infographic-number-dijit.horizontal-left {justify-content: flex-start;}.infographic-number-dijit.horizontal-center {justify-content: center;}.infographic-number-dijit.horizontal-right {justify-content: flex-end;}.infographic-number-dijit.vertical-top {align-items: flex-start;}.infographic-number-dijit.vertical-middle {align-items: center;}.infographic-number-dijit.vertical-bottom {align-items: flex-end;}.infographic-number-dijit .number-content {display: flex; justify-content: center; max-width: 340px;}.infographic-number-dijit .number {display: flex; justify-content: space-between; align-items: baseline;}.infographic-number-dijit .indicator-icon {font-size: 22px; align-self: center; text-align: center;}.infographic-number-dijit .number .prefix {margin-right: 6px;}.infographic-number-dijit .number .suffix {margin-left: 6px;}.infographic-number-dijit .rightImgDiv {width: 35%; height: 100%; text-align: left;}.jimu-widget-infographic .infographic-number-dijit,.jimu-widget-infographic .infographic-chart-dijit,.jimu-widget-infographic .infographic-gauge-dijit {position: relative;}.infographic-chart-dijit .over-lay.hide {display: none !important;}.infographic-chart-dijit .over-lay {display: block; z-index: 99; position: absolute; left: 0; top: 0; height: 100%; width: 100%;}.infographic-number-dijit .no-data-tip,.infographic-chart-dijit .no-data-tip,.infographic-gauge-dijit .no-data-tip {display: none; position: absolute; left: 0; right: 0; height: 30px; top: calc(50% - 10px); text-align: center; color: #666;}.infographic-number-dijit.no-data .no-data-tip,.infographic-chart-dijit.no-data .no-data-tip,.infographic-gauge-dijit.no-data .no-data-tip {display: block; margin: 0 10px;}.infographic-number-dijit.no-data .chart-dom,.infographic-chart-dijit.no-data .chart-dom,.infographic-gauge-dijit.no-data .gauge-dom {visibility: hidden;}.infographic-number-dijit .chart-dom,.infographic-chart-dijit .chart-dom,.infographic-gauge-dijit .gauge-dom {visibility: visible; width: 100%; height: 100%;}.infographic-chart-dijit {display: flex;}.infographic-chart-dijit .y-axis-name {width: 30px; height: 100%; flex: 0 1 auto; justify-content: center; align-items: center; display: flex; white-space: nowrap; font-family: sans-serif; font-size: 12px;}.infographic-chart-dijit .y-axis-name.rotate {transform: rotate(-90deg); -webkit-transform: rotate(-90deg); -moz-transform: rotate(-90deg); -ms-transform: rotate(-90deg); -o-transform: rotate(-90deg); filter: progid:DXImageTransform.Microsoft.BasicImage(rotation\x3d3);}.infographic-chart-dijit .chart-dijit {width: calc(100% - 30px); height: 100%; flex: 1 1 auto;}.jimu-widget-infographic *:focus {outline-offset: -2px !important;}.ie-gte-10 .infographic-text-dijit:focus {width: 99%!important; height: 95%!important; margin: 1px!important;}.jimu-widget-infographic {position: relative; width: 100%; height: 100%;}.jimu-widget-infographic .chart-setting {position: absolute; top: 0; right: 0; cursor: pointer; width: 16px; height: 16px; background: no-repeat center center url(images/chart-setting.svg); z-index: 1;}.jimu-rtl .jimu-widget-infographic .chart-setting {left: 0; right: auto;}.ig-chart-setting-dlg .jimu-leading-margin10 {margin-left: 10px; margin-right: 0;}.jimu-rtl .ig-chart-setting-dlg .jimu-leading-margin10 {margin-right: 10px; margin-left: 0;}.ig-chart-setting-dlg .textOverFlow {white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}.ig-chart-setting-dlg .flex {display: flex; justify-content: space-between; margin-top: 8px;}.ig-chart-setting-dlg .label {width: 120px;}.ig-chart-setting-dlg .toggle {width: 38px; height: 18px; cursor: pointer;}.ig-chart-setting-dlg .toggle.toggle-on {background: no-repeat center left url(./images/toggle_on_light.svg);}.ig-chart-setting-dlg .toggle.toggle-off {background: no-repeat center left url(./images/toggle_off_light.svg);}',
"*now":function(A){A(['dojo/i18n!*preload*widgets/Infographic/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/query dojo/on dojo/Deferred dijit/_WidgetsInTemplateMixin dijit/popup dijit/TooltipDialog jimu/BaseWidget jimu/dijit/GridLayout jimu/LayerInfos/LayerInfos jimu/utils ./DijitFactory jimu/DataSourceManager ./dijits/SourceLauncher ./dijits/ExtraSourceLauncher ./_ChartSetting ./IGUtils ./utils dijit/focus ./a11y/widget xstyle/css!../../libs/goldenlayout/goldenlayout-base.css".split(" "),function(A,n,v,r,k,p,h,b,a,e,f,c,d,
g,l,q,m,u,w,z,y,C,D){A=A([f,b],{name:"Infographic",baseClass:"jimu-widget-infographic",dijits:null,clientFeaturesHandle:null,layerInfosObj:null,dataSource:null,mainDijit:null,mainDijitJson:null,mainDijitVisible:!1,postMixInProperties:function(){this.inherited(arguments);n.mixin(this.nls,window.jimuNls.statisticsChart);this.layerInfosObj=d.getInstanceSync();this._loadingTypes={}},postCreate:function(){this.inherited(arguments);this.upgradeConfig(this.config);this._initGolbalInfo();this._listenDSManagerUpdateEvent();
this._initDijitFactory();this._initSettingIconEvent();this.initForA11yBeforeStartup()},upgradeConfig:function(t){t&&t.dijits&&(t=t.dijits.filter(function(x){return"image"===x.type})[0])&&t.config&&!t.config.alt&&(t.config.alt=window.jimuNls.common.image)},startup:function(){this.inherited(arguments);this._renderByConfig(this.config);this.mainDijit=this._getMainDijit();this._createRuntimeSettingIocn(this.config);this._checkDataSource(this.config);this.mainDijitVisible&&this._avalidDataSource&&(this._processdsdef=
this._preprocessingDataSource())},_listenDSManagerUpdateEvent:function(){this.exdsBeginUpdateHandle=p(this.dataSourceManager,"begin-update",n.hitch(this,function(t){this._handleLoadingStatusForExds(t,!0)}))},_checkDataSource:function(t){t=this._checkDataSourceCode(t&&t.dataSource);this._avalidDataSource=0===t.code;!this._avalidDataSource&&this.mainDijit&&this.mainDijit.showNodata(t.message)},onOpen:function(){this.removeRootNodeRole();this._processdsdef?this._processDataSource():this._onOpenTriger()},
_onOpenTriger:function(){this.mainDijitVisible&&this._avalidDataSource&&this._isDOMInitialized().then(function(){clearInterval(this.domReadyInterval);this._initSourceLaunchers();this.initForA11y();this.resize()}.bind(this))},initForA11y:function(){if(!this.hasInitedForA11y){var t=k(".has-link",this.domNode);t&&t.length?g.initLastFocusNode(this.domNode,t[t.length-1]):this.runtimeSettingIcon?g.initLastFocusNode(this.domNode,this.runtimeSettingIcon):this._initDomNodeAsLastNode();this.virtualFocusNode&&
(r.destroy(this.virtualFocusNode),this.virtualFocusNode=null);this.hasInitedForA11y=!0}},removeRootNodeRole:function(){this.domNode&&this.domNode.removeAttribute("role")},initForA11yBeforeStartup:function(){if(!this.domNode.hasAttribute("aria-label")){var t=this.getTextDijitConfigText();t&&r.setAttr(this.domNode,"aria-label",t)}},_onMainValueUpdate:function(t){if(this.mainDijit&&this._shouldUpdateValue(t,"MAIN")){if("gauge"===this.mainDijit.type&&(t=this._spellGaugeValueObj(),!this._isGaugeValueObjValid(t)))return;
this.mainDijit.onDataSourceDataUpdate(t);this.mainDijit.startRendering()}},_onRangeValueUpdate:function(t,x){this._shouldUpdateValue(t,x?"RANGE1":"RANGE2")&&(t=this._spellGaugeValueObj(),this._isGaugeValueObjValid(t)&&(this.mainDijit.onDataSourceDataUpdate(t),this.mainDijit.startRendering()))},_processDataSource:function(){this.showLoading("process-ds");this._processdsdef.then(function(){this.hideLoading("process-ds");this._processdsdef=null;this._setDataSource();this._setLayerInfoToMainDijit();this._onOpenTriger()}.bind(this),
function(t){this.hideLoading("process-ds");this._processdsdef=null;console.error(t)}.bind(this))},_setDataSource:function(){var t=this.config&&this.config.dataSource;t&&this.dijits&&this.dijits.length&&this.dijits.forEach(function(x){x.setDataSource(t)})},_initSourceLaunchers:function(){if(this.config.dataSource){var t=this.mainDijitJson||this._getMainDijitJson();this.sourceLauncher?this.sourceLauncher.awake():(this._initSourceLauncher(),this.sourceLauncher.start());"gauge"===t.type&&this._initRangeSourceLauncher(t)}},
resize:function(){this.inherited(arguments);this.layout&&this.layout.resize();this.mainDijit&&this.mainDijit.resize&&this.mainDijit.resize()},onClose:function(){this.sourceLauncher&&this.sourceLauncher.sleep();this.rangeSourceLauncher1&&this.rangeSourceLauncher1.sleep();this.rangeSourceLauncher2&&this.rangeSourceLauncher2.sleep();this.runtimeSettingDialog&&this.runtimeSettingDialog.isShow&&(a.close(this.runtimeSettingDialog),this.runtimeSettingDialog.isShow=!1)},onDataSourceDataUpdate:function(t,
x){this._handleLoadingStatusForExds(t,!1);var B=this.config.dataSource,E=this.rangeDataSource1,F=this.rangeDataSource2;B&&t===B.frameWorkDsId&&this.sourceLauncher&&this.sourceLauncher.setAppConfigDSFeatures(x.features);E&&t===E.frameWorkDsId&&this.rangeSourceLauncher1&&this.rangeSourceLauncher1.setAppConfigDSFeatures(x.features);F&&t===F.frameWorkDsId&&this.rangeSourceLauncher2&&this.rangeSourceLauncher2.setAppConfigDSFeatures(x.features)},_handleLoadingStatusForExds:function(t,x){var B=this.config.dataSource,
E=this.rangeDataSource1,F=this.rangeDataSource2;E=E&&E.frameWorkDsId;F=F&&F.frameWorkDsId;if(t===(B&&B.frameWorkDsId)||t===E||t===F)x?this.showLoading(t):this.hideLoading(t)},destroy:function(){this.sourceLauncher&&this.sourceLauncher.destroy();this.rangeSourceLauncher1&&this.rangeSourceLauncher1.destroy();this.rangeSourceLauncher2&&this.rangeSourceLauncher2.destroy();this.runtimeSettingDialog&&(this.runtimeSettingDialog.destroy(),this.runtimeSettingDialog=null);this.exdsBeginUpdateHandle&&this.exdsBeginUpdateHandle.remove&&
(this.exdsBeginUpdateHandle.remove(),this.exdsBeginUpdateHandle=null);this._loadingTypes={};this.inherited(arguments)},_initGolbalInfo:function(){this.dataSourceManager=q.getInstance();this._features=[];this.featureLayerForFrameWork=this.popupInfo=this.layerObject=null;if(this.mainDijitJson=this._getMainDijitJson())this._initRangeValue(this.mainDijitJson),this._ininRangeDataSource(this.mainDijitJson),this.mainDijitVisible=this.mainDijitJson&&this.mainDijitJson.visible,this.dijits=[],this.igUtils=
new z({appConfig:this.appConfig,map:this.map})},_initDijitFactory:function(){l.setNls(this.nls);l.setMap(this.map);l.setInSettingPage(!1);l.setAppConfig(this.appConfig);l.setContext({folderUrl:this.folderUrl})},_initSettingIconEvent:function(){this.on("click",n.hitch(this,function(){this.runtimeSettingDialog&&a.close(this.runtimeSettingDialog)}))},_renderByConfig:function(t){t&&t.layout&&t.dijits&&(this._clearDijits(),this._createLayoutWithDijits(t))},_initRangeSourceLauncher:function(t){var x=this._initRangeData(t);
t=x.rst1;x=x.rst2;this.rangeSourceLauncher1?this.rangeSourceLauncher1.awake():t&&this.rangeDataSource1&&(this._initRangeLauncher(t,this.rangeDataSource1,!0),this.rangeSourceLauncher1.start());this.rangeSourceLauncher2?this.rangeSourceLauncher2.awake():x&&this.rangeDataSource2&&(this._initRangeLauncher(x,this.rangeDataSource2,!1),this.rangeSourceLauncher2.start())},showLoading:function(t){this._loadingTypes[t]=!0;this._showLoading()},hideLoading:function(t){this._loadingTypes[t]=!1;this._shouldHideLoading()&&
this._hideLoading()},_shouldHideLoading:function(){if(this._loadingTypes)return Object.keys(this._loadingTypes).map(function(t){return this._loadingTypes[t]}.bind(this)).every(function(t){return!t})},_showLoading:function(){r.hasClass(this.shelter,"hide")&&r.removeClass(this.shelter,"hide")},_hideLoading:function(){r.hasClass(this.shelter,"hide")||r.addClass(this.shelter,"hide")},_HandlingOutliers:function(t){if(this.mainDijit&&!y.isValidValue(t))return this.mainDijit.showNodata(),!0},_spellGaugeValueObj:function(){return{value:this.MAIN_VALUE,
ranges:[this.RANGE1_VALUE,this.RANGE2_VALUE]}},_isGaugeValueObjValid:function(t){var x=t&&t.ranges;if(!t||!x)return!1;var B=x[0];x=x[1];(t=y.isValidValue(t.value)&&y.isValidValue(B)&&y.isValidValue(x))||this.mainDijit.showNodata();return t},_checkDataSourceCode:function(t){var x=this.mainDijitJson;if(!x)return{};var B,E;t=y.checkDataSourceIsVaild(t,x,this.map,this.appConfig,"value");"gauge"===x.type&&(this.rangeDataSource1&&(B=y.checkDataSourceIsVaild(this.rangeDataSource1,x,this.map,this.appConfig,
"range1")),this.rangeDataSource2&&(E=y.checkDataSourceIsVaild(this.rangeDataSource2,x,this.map,this.appConfig,"range2")));x=[t,B,E];var F="";B=y.getCheckDataSourceResultCode(x);x.forEach(function(G){F+=this._getDSErrorString(G)}.bind(this));return{code:B,message:F}},_getDSErrorString:function(t){var x="";if(!t)return x;if(1===t.code||3===t.code)t.label===this._lastDataSourceLabel?x="":(x=this.nls.dataSource+" "+t.label+" "+this.nls.dsErrorTipSuf,this._lastDataSourceLabel=t.label);2===t.code&&(x=this.nls.fieldString+
" "+t.fields.join(",")+" "+this.nls.dsErrorTipSuf);return x},_clearDijits:function(){this.dijits&&this.dijits.length&&this.dijits.forEach(n.hitch(this,function(t){t.destroy()}));this.dijits=[]},_createLayoutWithDijits:function(t){var x=t.dijits;x&&x.length&&(x=x.map(function(B){var E=l.createDijit(B);this.dijits.push(E);return{id:B.id,dijit:E}},this),this.layout=new c({components:x,layoutDefinition:t.layout.definition,container:this.container,editable:!1}),this.layout.on("initialised",n.hitch(this,
function(){v.forEach(this.dijits,n.hitch(this,function(B){B.startup()}))})))},_getMainDijit:function(){if(this.dijits&&this.dijits.length){var t=null,x=["number","gauge","chart"];return t=this.dijits.filter(function(B){return-1<x.indexOf(B.type)})[0]}},_getMainDijitJson:function(){if(this.config&&this.config.dijits&&this.config.dijits.length){var t=null,x=["number","gauge","chart"];return t=this.config.dijits.filter(function(B){return-1<x.indexOf(B.type)})[0]}},getTextDijitConfigText:function(){if(this.config&&
this.config.dijits&&this.config.dijits.length){var t="";this.config.dijits.forEach(function(x){var B="";x.visible&&("text"===x.type?B=x.config&&x.config.text||"":"image"===x.type&&(B=x.config&&x.config.alt||""),t+=" "+B)});return t}},_initRangeValue:function(t){t&&"gauge"===t.type&&(t=y.getRangeFixedValue(t),this.RANGE1_VALUE=t.range1,this.RANGE2_VALUE=t.range2)},_ininRangeDataSource:function(t){t=y.getRangeDataSource(t);this.rangeDataSource1=t.range1;this.rangeDataSource2=t.range2},_setLayerInfoToMainDijit:function(){this.mainDijit&&
this.mainDijit.setLayerInfo(this.layerObject,this.featureLayerForFrameWork,this.popupInfo)},_createRuntimeSettingIocn:function(t){this.mainDijitVisible&&t.dijits&&t.dijits.length&&t.dijits.some(function(x){return x.visible&&"chart"===x.type},this)&&(this.runtimeSettingIcon=r.create("div",{tabindex:"0",role:"button",title:this.nls.setting,"class":"chart-setting"},this.setting),this.own(p(this.runtimeSettingIcon,"click",n.hitch(this,this._onRuntimeSettingIconClicked))),this.own(p(this.runtimeSettingIcon,
"keydown",n.hitch(this,this._onRuntimeSettingIconKeydown))),this.runtimeSettingDialog=new e({content:this._createChartSettingContent(t)}),this.runtimeSettingDialog.isShow=!1)},_onRuntimeSettingIconClicked:function(t){this.runtimeSettingDialog.isShow?(a.close(this.runtimeSettingDialog),this.runtimeSettingDialog.isShow=!1,C.focus(this.runtimeSettingIcon)):(a.open({popup:this.runtimeSettingDialog,around:this.runtimeSettingIcon}),this.chartSetting&&this.chartSetting.focusFirst(),this.runtimeSettingDialog.isShow=
!0);t.stopPropagation()},_createChartSettingContent:function(t){var x=t.dijits.filter(function(B){return"chart"===B.type})[0];if(!x)return console.error("Unknow error"),"\x3cdiv\x3e\x3c/div\x3e";if(!x.config)return"\x3cdiv\x3e\x3c/div\x3e";this.chartSetting=new w({chartJson:x,chartDijit:this.dijits.filter(function(B){return B.jsonId===x.id})[0],nls:this.nls});this.own(p(this.chartSetting,"escape",function(){a.close(this.runtimeSettingDialog);this.runtimeSettingDialog.isShow=!1;C.focus(this.runtimeSettingIcon)}.bind(this)));
return this.chartSetting.domNode},_isDOMInitialized:function(){var t=new h;setTimeout(function(){this.domReadyInterval=setInterval(function(){var x=this.mainDijit&&this.mainDijit.domNode;x&&(x=r.getMarginBox(x),x.w&&x.h&&t.resolve())}.bind(this),200)}.bind(this),200);return t},_initSourceLauncher:function(){var t=this.config.dataSource;if(t){var x=this._getMainDijitJson();if(x&&x.config){var B=null;B="chart"===x.type?y.getStatisticForChart(x.config.data):y.getStatisticForGauge(x.config).value;this.sourceLauncher=
"DATA_SOURCE_FROM_FRAMEWORK"===t.dataSourceType?new u({appConfig:this.appConfig,dataSource:t,statistic:B,returnFeatures:"chart"===x.type,formatResult:!1}):new m({layerObject:this.layerObject,map:this.map,appConfig:this.appConfig,useSelection:t.useSelection,filterByExtent:t.filterByExtent,dataSource:t,config:x.config,statistic:B,returnFeatures:"chart"===x.type});this._listenSourceLauncherEvent()}}},_initRangeData:function(t){if("gauge"===t.type&&t&&t.config)return t=y.getStatisticForGauge(t.config),
{rst1:t.range1,rst2:t.range2}},_initRangeLauncher:function(t,x,B){B?t&&(this.rangeSourceLauncher1=new u({appConfig:this.appConfig,dataSource:x,statistic:t,returnFeatures:!1,formatResult:!0}),this._listenRangeLauncherEvent(this.rangeSourceLauncher1,!0)):t&&(this.rangeSourceLauncher2=new u({appConfig:this.appConfig,dataSource:x,statistic:t,returnFeatures:!1,formatResult:!0}),this._listenRangeLauncherEvent(this.rangeSourceLauncher2,!1))},_listenSourceLauncherEvent:function(){this.own(p(this.sourceLauncher,
"data-update",n.hitch(this,function(t){this._onMainValueUpdate(t)})));this.own(p(this.sourceLauncher,"loading",n.hitch(this,function(t){this.showLoading(t)})));this.own(p(this.sourceLauncher,"unloading",n.hitch(this,function(t){this.hideLoading(t)})));this.own(p(this.sourceLauncher,"failed",n.hitch(this,function(){this._HandlingOutliers()})));this.own(p(this.sourceLauncher,"start",n.hitch(this,function(){this._onMainSourceLauncherStart()})));this.own(p(this.sourceLauncher,"done",n.hitch(this,function(){this._onMainSourceLauncherDone()})))},
_onMainSourceLauncherStart:function(){if(this.mainDijit&&"function"===typeof this.mainDijit.onUpdateDataStart)this.mainDijit.onUpdateDataStart()},_onMainSourceLauncherDone:function(){if(this.mainDijit&&"function"===typeof this.mainDijit.onUpdateDataDone)this.mainDijit.onUpdateDataDone()},_listenRangeLauncherEvent:function(t,x){t&&this.own(p(t,"data-update",n.hitch(this,function(B){this._onRangeValueUpdate(B,x)})))},_isDifferentValues:function(t,x){var B=!0,E=this[x+"_VALUE"];if(t&&"undefined"!==typeof t.hasStatisticsed){var F=
null,G=null;t.features&&(F=t.features.map(function(H){return H.attributes}));E&&E.features&&(G=E.features.map(function(H){return H.attributes}));g.isEqual(G,F)&&(B=!1)}else B=t!==E;B&&(this[x+"_VALUE"]=t);return B},_shouldUpdateValue:function(t,x){x=this._isDifferentValues(t,x);t=this._HandlingOutliers(t);return x&&!t},_preprocessingDataSource:function(){var t=this.config&&this.config.dataSource,x=new h;return t?this.igUtils.preprocessingDataSource(t).then(function(B){this.layerObject=B&&B.layerObject;
this.popupInfo=B&&B.popupInfo;this.featureLayerForFrameWork=B&&B.featureLayerForFrameWork}.bind(this)):(x.reject("Empty data source"),x)}});A.extend(D);return A});