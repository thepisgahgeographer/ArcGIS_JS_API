// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/Infographic/setting/dijitsSetting/_dijits/SeriesStyle/SeriesStyle.html":'\x3cdiv style\x3d"width: 100%;flex: 0 0 100%;"\x3e\r\n\r\n\t\x3cdiv class\x3d"top"\x3e\r\n\t\t\x3cdiv class\x3d"flex-lr-balance title"\x3e${nls.chartColor}\x3c/div\x3e\r\n      \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"headerColorDiv" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"radioPanel" class\x3d"radio-panel hide"\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"symbolRadioPanel" class\x3d"single-radio-panel first-radio hide"\x3e\r\n\t\t   \x3cinput data-dojo-attach-point\x3d"useLayerSymbolRadio" data-dojo-attach-event\x3d"change:_onRadioChanged" name\x3d"chartColor" data-dojo-type\x3d"dijit/form/RadioButton"\x3e\r\n   \t\t\x3clabel for\x3d"useLayerSymbolRadio" class\x3d"marginleft10 AgePyramid_Comparisontext-over radio-label" title\x3d"${nls.useLayerSymbology}"\x3e${nls.useLayerSymbology}\x3c/label\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n      \x3cdiv data-dojo-attach-point\x3d"seriesRadioPanel" class\x3d"single-radio-panel second-radio"\x3e\r\n\r\n         \x3cdiv class\x3d"single-radio-panel flex-lr-balance"\x3e\r\n            \x3cinput data-dojo-attach-point\x3d"seriesRadio" name\x3d"chartColor" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-event\x3d"change:_onRadioChanged"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"seriesRadioLabel" class\x3d"marginleft10 text-over radio-label" title\x3d"${nls.setColor}"\x3e${nls.setColor}\x3c/label\x3e\r\n         \x3c/div\x3e\r\n\r\n         \x3cdiv data-dojo-attach-point\x3d"radioColorDiv" class\x3d"radio-single-color-div flex-lr-balance hide"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n\t\t\r\n      \x3cdiv data-dojo-attach-point\x3d"customRadioPanel" class\x3d"single-radio-panel third-radio hide"\x3e\r\n         \x3cdiv class\x3d"single-radio-panel flex-lr-balance"\x3e\r\n            \x3cinput data-dojo-attach-point\x3d"customColorRadio" name\x3d"chartColor" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-event\x3d"change:_onRadioChanged"\x3e\r\n            \x3clabel for\x3d"customColorRadio" class\x3d"marginleft10 text-over radio-label" title\x3d"${nls.customColorByCategory}"\x3e${nls.customColorByCategory}\x3c/label\x3e\r\n         \x3c/div\x3e\r\n\r\n         \x3cdiv data-dojo-attach-event\x3d"click:_onCustomToggleButtonClicked" data-dojo-attach-point\x3d"toggleIconDiv" class\x3d"toggle-icon-div flex-lr-balance hide"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"toggleIcon" class\x3d"toggle-icon"\x3e\x3c/div\x3e\r\n         \x3c/div\x3e\r\n      \x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n   \x3cdiv data-dojo-attach-point\x3d"fieldColors" class\x3d"field-colors hide"\x3e\x3c/div\x3e\r\n\r\n   \x3cdiv data-dojo-attach-point\x3d"customColors" class\x3d"custom-colors indentation hide"\x3e\x3c/div\x3e\r\n\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dojo/on dojo/_base/lang dojo/_base/html dojo/text!./SeriesStyle.html ./_SeriesStyleItem ./_SeriesStyles ./CustomColor dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/utils ../../../utils dijit/form/RadioButton".split(" "),function(t,l,m,e,u,q,v,w,x,y,z,A,r,h){return t([y,z,A,x],{baseClass:"infographic-series-style",templateString:u,colors:"#68D2E0 #087E92 #47BCF5 #FBE66A #F29157 #C8501D #2DB7C6 #C4EEF6".split(" "),_customIconIsOpen:!0,
chartInfo:{},postCreate:function(){this.inherited(arguments);this._initBrowserClass();this._initSelf();this._initEvent()},getConfig:function(){var a={},b;this.useLayerSymbolRadio.checked?b="layerSymbol":this.seriesRadio.checked?b="series":this.customColorRadio.checked&&(b="custom");a.type=b;a.styles=this._option.oneLine?this._option.symbolAbility||this._option.customAbility?[this.radioOneColor.getConfig()]:[this.topOneColor.getConfig()]:this.fieldColorsDijit.getConfig();"custom"===b&&(a.customColor=
this.customColorDijit.getConfig());return a},setConfig:function(a){if(a&&a.type){this._ignoreEvent();var b=a.type;this.useLayerSymbolRadio.setChecked("layerSymbol"===b);this.seriesRadio.setChecked("series"===b);this.customColorRadio.setChecked("custom"===b);!(b=a.styles)||0>=b.length||(1===b.length?(this.topOneColor.setConfig(b[0]),this.radioOneColor.setConfig(b[0])):1<=b.length&&this.fieldColorsDijit.updateConfig(b),(a=a.customColor)&&a.categories&&a.categories.length&&this.customColorDijit.setConfig(a));
this._careEvent()}},setFeatures:function(a){this.features=a},setLayerDefinition:function(a){this.definition=a},setDataSource:function(a){this.dataSource=a},render:function(a,b,c){if(a&&(b||"field"===a)){c=c||[];this._ignoreEvent();this.reset();var d=this._calcuteOption(a,b,c);if(d){this._updateNodeByOption(d);if(d.customAbility){var f=h.getCustomColorSelects(b,this.definition,this.features);if(!f)return;this.customColorDijit.setOriginalData(f.selects,f.isCodedValue,f.numberType);this.customColorDijit.renderDefault()}a=
this._getDefaultConfig(a,b,c,d);this.setConfig(a);this._careEvent()}}},reset:function(){this._ignoreEvent();this.seriesRadio.setChecked();this._hideSymbolRadio();this._hideCustomRadio();this._hideRadioPanel();this._hideOpacityPanel();this._hideAdditionalElements();this._careEvent()},_hideAdditionalElements:function(){this._hideHeaderColor();this._hideSeriesColor();this._hideCustomToggleIcon();this._hideCustomColors();this._hideFieldColors()},_onChange:function(){if(!this.ignoreChangeEvents){var a=
this.getConfig();a&&this.emit("change",a)}},_updateNodeByOption:function(a){if(a){var b=a.symbolAbility,c=a.customAbility,d=a.oneLine,f=a.colorSingleMode;a=a.showOpacity;b||c?(this._showRadioPanel(),e.addClass(this.fieldColors,"indentation"),d?this._showSeriesColor():this._showFieldColors()):(e.removeClass(this.fieldColors,"indentation"),d?this._showHeaderColor():this._showFieldColors());b&&this._showSymbolRadio();c&&this._showCustomRadio();f?this._useColorSingleMode():this._useColorMultipleMode();
a&&this._showOpacityPanel()}},_initSelf:function(){this.topOneColor=new q({textVisible:!1,opacityVisible:!1,colorSingleMode:!0});this.topOneColor.placeAt(this.headerColorDiv);this.radioOneColor=new q({textVisible:!1,opacityVisible:!1,colorSingleMode:!0});this.radioOneColor.placeAt(this.radioColorDiv);this.fieldColorsDijit=new v({nls:this.nls});this.fieldColorsDijit.placeAt(this.fieldColors);this.customColorDijit=new w({nls:this.nls});this.customColorDijit.placeAt(this.customColors)},_initEvent:function(){this.own(l(this.topOneColor,
"change",m.hitch(this,function(){this._onChange()})));this.own(l(this.radioOneColor,"change",m.hitch(this,function(){this._onChange()})));this.own(l(this.fieldColorsDijit,"change",m.hitch(this,function(){this._onChange()})));this.own(l(this.customColorDijit,"change",m.hitch(this,function(){this._onChange()})))},_initBrowserClass:function(){11===r.has("ie")?e.addClass(this.domNode,"ig-setting-ie11"):e.removeClass(this.domNode,"ig-setting-ie11");r.has("ff")?e.addClass(this.domNode,"ig-setting-ff"):
e.removeClass(this.domNode,"ig-setting-ff")},_ignoreEvent:function(){this.ignoreChangeEvents=!0},_careEvent:function(){setTimeout(function(){this.ignoreChangeEvents=!1}.bind(this),200)},_updateSeriesRadioString:function(a){"pie"===a?(this.seriesRadioLabel.innerHTML=this.nls.randomColor,this.seriesRadioLabel.title=this.nls.randomColor):(this.seriesRadioLabel.innerHTML=this.nls.setColor,this.seriesRadioLabel.title=this.nls.setColor)},_showHeaderColor:function(){e.removeClass(this.headerColorDiv,"hide")},
_hideHeaderColor:function(){e.addClass(this.headerColorDiv,"hide")},_showSeriesColor:function(){e.removeClass(this.radioColorDiv,"hide")},_hideSeriesColor:function(){e.addClass(this.radioColorDiv,"hide")},_showCustomToggleIcon:function(){e.removeClass(this.toggleIconDiv,"hide")},_hideCustomToggleIcon:function(){e.addClass(this.toggleIconDiv,"hide")},_showSymbolRadio:function(){e.removeClass(this.symbolRadioPanel,"hide")},_hideSymbolRadio:function(){e.addClass(this.symbolRadioPanel,"hide")},_showCustomRadio:function(){e.removeClass(this.customRadioPanel,
"hide")},_hideCustomRadio:function(){e.addClass(this.customRadioPanel,"hide");this._hideCustomColors()},_showCustomColors:function(){e.removeClass(this.customColors,"hide")},_hideCustomColors:function(){e.addClass(this.customColors,"hide")},_showFieldColors:function(){e.removeClass(this.fieldColors,"hide")},_hideFieldColors:function(){e.addClass(this.fieldColors,"hide")},_showRadioPanel:function(){e.removeClass(this.radioPanel,"hide")},_hideRadioPanel:function(){e.addClass(this.radioPanel,"hide");
this._hideCustomColors()},_showOpacityPanel:function(){this.topOneColor.setOpacityDisplay(!0);this.radioOneColor.setOpacityDisplay(!0);this.fieldColorsDijit.setOpacityDisplay(!0)},_hideOpacityPanel:function(){this.topOneColor.setOpacityDisplay(!1);this.radioOneColor.setOpacityDisplay(!1);this.fieldColorsDijit.setOpacityDisplay(!1)},_openCustomColorPanel:function(){e.removeClass(this.toggleIcon,"closed");this._showCustomColors()},_closeCustomColorPanel:function(){e.addClass(this.toggleIcon,"closed");
this._hideCustomColors()},_useColorSingleMode:function(){this.topOneColor.setColorMode(!0);this.radioOneColor.setColorMode(!0)},_useColorMultipleMode:function(){this.topOneColor.setColorMode(!1);this.radioOneColor.setColorMode(!1)},_onRadioChanged:function(){var a=this.seriesRadio.checked,b=this.customColorRadio.checked;this._hideAdditionalElements();var c=this._option||{},d=!c.symbolAbility&&!c.customAbility;a&&(d?c.oneLine?this._showHeaderColor():this._showFieldColors():c.oneLine?this._showSeriesColor():
this._showFieldColors());b&&(this._showCustomColors(),this._showCustomToggleIcon());this._onChange()},_onCustomToggleButtonClicked:function(a){a.stopPropagation();(this._customIconIsOpen=!this._customIconIsOpen)?this._openCustomColorPanel():this._closeCustomColorPanel()},_calcuteOption:function(a,b,c){var d=this.chartInfo.type,f=this.chartInfo.area,g=this.definition;if(d&&g){var n=this._haveUseLayerSymbolAbility(a,b,g,this.dataSource),p="pie"===d&&("category"===a||"count"===a)&&!h.isDateField(b,g);
f=!!f;c="field"===a&&"line"===d||"count"===a||1>=c.length;a=!("pie"===d&&"field"!==a);b=b?h.isNumberType(b,g,!0):!1;return this._option=n={symbolAbility:n,oneLine:c,colorSingleMode:a,showOpacity:f,customAbility:p,numberType:!!b}}},_haveUseLayerSymbolAbility:function(a,b,c,d){var f=this.chartInfo.type;if(f&&c){var g=!1;if("line"===f||"field"===a)return g;d=h.getLayerIdByDataSource(d);f=null;d&&(f=h.getLayerFromMap(d,this.map));if(!d)return g;if("feature"===a)g=!0;else if("category"===a||"count"===
a){if(!f)return g;f.renderer&&(a=f.renderer,"esri.renderer.ClassBreaksRenderer"===a.declaredClass||"esri.renderer.UniqueValueRenderer"===a.declaredClass)&&(a.attributeField!==b||h.isDateField(b,c)||(g=!0))}return g}},_getDefaultConfig:function(a,b,c,d){var f=this.chartInfo.type,g=this.definition,n=d.colorSingleMode,p=d.showOpacity;if(!b||"count"!==a&&!c)return{type:"series",styles:[]};b=null;"column"===f||"bar"===f||"line"===f?"field"===a?"line"===f&&(b=["line~field"]):"count"===a&&(b=["count~count"]):
"pie"===f&&"field"!==a&&(b=["pie~not-field"]);a=(b||c).map(function(k){return this._createSeriesStyle(k,p,!n)}.bind(this));a.forEach(function(k){c&&-1<c.indexOf(k.name)?k.label=h.getFieldAlias(k.name,g):k.label=k.name}.bind(this));return{type:"series",styles:a}},_createSeriesStyle:function(a,b,c){var d=h.getNextColor(this.colors,this._lastSeriesColor);this._lastSeriesColor=d;a={name:a,style:{color:d}};b&&(a.style.opacity=6);c&&(a.style.color="#68D2E0 #087E92 #47BCF5 #FBE66A #F29157 #C8501D".split(" "));
return a}})});