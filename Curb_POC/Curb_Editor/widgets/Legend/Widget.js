// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Legend/Utils":function(){define(["dojo/_base/array","jimu/LayerInfos/LayerInfos"],function(f,n){function d(a,e){return a.isLeaf()?e.layerState[a.id]?e.layerState[a.id].selected:a.getShowLegendOfWebmap():!0}var h={getLayerInfosParam:function(a){return g(a)}},g=function(a){var e=[],p=n.getInstanceSync().getLayerInfoArray();f.forEach(p,function(c){var k=[];d(c,a)&&(!c.layerObject||"esri.layers.ArcGISDynamicMapServiceLayer"!==c.layerObject.declaredClass&&"esri.layers.ArcGISTiledMapServiceLayer"!==
c.layerObject.declaredClass||f.forEach(c.layerObject.dynamicLayerInfos||c.layerObject.layerInfos,function(b){var l=null;c.traversal(function(m){if(m.subId===b.id)return m.isLeaf()&&!d(m,a)&&k.push(m.originOperLayer.mapService.subId),l=m,!0});l||k.push(b.id)}),c.isMapNotesLayerInfo()?f.forEach(c.getSubLayers(),function(b){d(b,a)&&e.push({layer:b.layerObject,title:"Map Notes - "+b.title})}):e.push({hideLayers:k,layer:c.layerObject,title:c.title}))});return e.reverse()};h.isSupportedLayerType=function(a){return a&&
("esri.layers.ArcGISDynamicMapServiceLayer"===a.declaredClass||"esri.layers.ArcGISImageServiceLayer"===a.declaredClass&&10.2<=a.version||"esri.layers.ArcGISImageServiceVectorLayer"===a.declaredClass||"esri.layers.ArcGISTiledMapServiceLayer"===a.declaredClass||"esri.layers.FeatureLayer"===a.declaredClass||"esri.layers.StreamLayer"===a.declaredClass||"esri.layers.KMLLayer"===a.declaredClass||"esri.layers.GeoRSSLayer"===a.declaredClass||"esri.layers.WMSLayer"===a.declaredClass||"esri.layers.WFSLayer"===
a.declaredClass||"esri.layers.CSVLayer"===a.declaredClass)?!0:!1};return h})},"widgets/Legend/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Legend/Widget.html":'\x3cdiv\x3e\r\n  \x3c!--div data-dojo-attach-point\x3d"legendDiv"\x3e\x3c/div\x3e\r\n  \x3cdiv style\x3d"display:none" data-dojo-attach-point\x3d"removedDiv"\x3e\x3c/div--\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"operationalLayersPart"\x3e\x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"basemapLayersPart"\x3e\r\n    \x3cdiv class\x3d"basemap-layers-title" data-dojo-attach-point\x3d"basemapLayersTitle"\x3ebasemap layers\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"basemapLayersDiv"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n\r\n',
"url:widgets/Legend/css/style.css":".esriLegendServiceLabel {font-size: 14px;}.esriLegendLayer{font-size: 12px;}.jimu-widget-legend .basemap-layers-title {display: none; font-size: 16px; font-weight: bold; margin: 5px 0 10px 0;}","*now":function(f){f(['dojo/i18n!*preload*widgets/Legend/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},
"*noref":1}});
define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/html dojo/on ./Utils dijit/_WidgetsInTemplateMixin jimu/BaseWidget jimu/LayerInfos/LayerInfos esri/dijit/Legend".split(" "),function(f,n,d,h,g,a,e,p,c,k){return f([p,e],{name:"Legend",baseClass:"jimu-widget-legend",legend:null,_jimuLayerInfos:null,startup:function(){this.inherited(arguments);if(!this.config.layerState||this.config.syncWithWebmap)this.config.layerState={};this._jimuLayerInfos=c.getInstanceSync();this._createLegendForOperationalLayers();this._bindEvent()},
destroy:function(){this.legend.destroy();this.legendForBasemap&&this.legendForBasemap.destroy();this.inherited(arguments)},_createLegendForOperationalLayers:function(){var b={arrangement:this.config.legend.arrangement,autoUpdate:this.config.legend.autoUpdate,respectCurrentMapScale:this.config.legend.respectCurrentMapScale,map:this.map,layerInfos:this._getLayerInfosParam()};this.legend=new k(b,h.create("div",{},this.operationalLayersPart));this.legend.startup()},_createLegendForBasemaplLayers:function(){h.setStyle(this.basemapLayersTitle,
"display","block");var b={arrangement:this.config.legend.arrangement,autoUpdate:this.config.legend.autoUpdate,respectCurrentMapScale:this.config.legend.respectCurrentMapScale,map:this.map,layerInfos:this._getBasemapLayerInfosParam()};this.legendForBasemap=new k(b,h.create("div",{},this.basemapLayersDiv));this.legendForBasemap.startup()},_bindEvent:function(){this.config.legend.autoUpdate&&(this.own(g(this._jimuLayerInfos,"layerInfosIsShowInMapChanged",d.hitch(this,"refreshLegend"))),this.own(g(this._jimuLayerInfos,
"layerInfosChanged",d.hitch(this,"refreshLegend"))),this.own(g(this._jimuLayerInfos,"basemapLayersChanged",d.hitch(this,"refreshLegend"))),this.own(g(this._jimuLayerInfos,"layerInfosRendererChanged",d.hitch(this,"refreshLegend"))))},_getBasemapLayerInfosParam:function(){var b=[];n.forEach(this._jimuLayerInfos.getBasemapLayers(),function(l){a.isSupportedLayerType(l)&&b.push({layer:l,title:l.name})});return b},_getLayerInfosParam:function(){return(this.config.showLegendForBasemap?this._getBasemapLayerInfosParam():
[]).concat(a.getLayerInfosParam(this.config))},refreshLegend:function(){if(this.legend){var b=this._getLayerInfosParam();this.legend.refresh(b)}}})});