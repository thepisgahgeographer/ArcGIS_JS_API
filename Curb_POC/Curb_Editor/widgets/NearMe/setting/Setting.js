// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"dijit/Editor":function(){define("require dojo/_base/array dojo/_base/declare dojo/Deferred dojo/i18n dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/string dojo/topic ./_Container ./Toolbar ./ToolbarSeparator ./layout/_LayoutWidget ./form/ToggleButton ./_editor/_Plugin ./_editor/plugins/EnterKeyHandling ./_editor/html ./_editor/range ./_editor/RichText ./main dojo/i18n!./_editor/nls/commands".split(" "),function(u,B,H,D,z,a,
d,c,b,g,m,l,t,A,v,e,n,q,F,k,f,w,C,L,I){function E(x){return new k({command:x.name})}function r(x){return new k({buttonClass:F,command:x.name})}H=H("dijit.Editor",L,{plugins:null,extraPlugins:null,constructor:function(){m.isArray(this.plugins)||(this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",f]);this._plugins=[];this._editInterval=
1E3*this.editActionInterval;if(l("ie")||l("trident")||l("edge"))this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate")},postMixInProperties:function(){this.setValueDeferred=new D;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);m.isArray(this.extraPlugins)&&(this.plugins=this.plugins.concat(this.extraPlugins));this.commands=z.getLocalization("dijit._editor","commands",this.lang);
l("webkit")&&b.set(this.domNode,"KhtmlUserSelect","none")},startup:function(){this.inherited(arguments);this.toolbar||(this.toolbar=new e({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,"aria-label":this.id}),this.header.appendChild(this.toolbar.domNode));B.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(!0);d.add(this.iframe.parentNode,"dijitEditorIFrameContainer");d.add(this.iframe,"dijitEditorIFrame");a.set(this.iframe,"allowTransparency",!0);this.toolbar.startup();
this.onNormalizedDisplayChanged()},destroy:function(){B.forEach(this._plugins,function(x){x&&x.destroy&&x.destroy()});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments)},addPlugin:function(x,M){var O=m.isString(x)?{name:x}:m.isFunction(x)?{ctor:x}:x;if(!O.setEditor){var h={args:O,plugin:null,editor:this};O.name&&(k.registry[O.name]?h.plugin=k.registry[O.name](O):A.publish(I._scopeName+".Editor.getPlugin",h));if(!h.plugin)try{var p=O.ctor||m.getObject(O.name)||
u(O.name);p&&(h.plugin=new p(O))}catch(G){throw Error(this.id+": cannot find plugin ["+O.name+"]");}if(!h.plugin)throw Error(this.id+": cannot find plugin ["+O.name+"]");x=h.plugin}1<arguments.length?this._plugins[M]=x:this._plugins.push(x);x.setEditor(this);m.isFunction(x.setToolbar)&&x.setToolbar(this.toolbar)},resize:function(x){x&&q.prototype.resize.apply(this,arguments)},layout:function(){var x=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+c.getPadBorderExtents(this.iframe.parentNode).h+
c.getMarginExtents(this.iframe.parentNode).h);this.editingArea.style.height=x+"px";this.iframe&&(this.iframe.style.height="100%");this._layoutMode=!0},_onIEMouseDown:function(x){var M,O=this.document.body,h=O.clientWidth,p=O.clientHeight,G=O.clientLeft,N=O.offsetWidth,K=O.offsetHeight,P=O.offsetLeft;/^rtl$/i.test(O.dir||"")?h<N&&x.x>h&&x.x<N&&(M=!0):x.x<G&&x.x>P&&(M=!0);M||p<K&&x.y>p&&x.y<K&&(M=!0);M||(delete this._cursorToStart,delete this._savedSelection,"BODY"==x.target.tagName&&this.defer("placeCursorAtEnd"),
this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},onBeforeDeactivate:function(x){this.customUndo&&this.endEditing(!0);"BODY"!=x.target.tagName&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(x){this._inEditing||(this._inEditing=!0,this._beginEditing(x));0<this.editActionInterval&&(this._editTimer&&this._editTimer.remove(),this._editTimer=this.defer("endEditing",this._editInterval))},_steps:[],_undoedSteps:[],execCommand:function(x){if(!this.customUndo||
"undo"!=x&&"redo"!=x){this.customUndo&&(this.endEditing(),this._beginEditing());var M=this.inherited(arguments);this.customUndo&&this._endEditing();return M}return this[x]()},_pasteImpl:function(){return this._clipboardCommand("paste")},_cutImpl:function(){return this._clipboardCommand("cut")},_copyImpl:function(){return this._clipboardCommand("copy")},_clipboardCommand:function(x){try{var M=this.document.execCommand(x,!1,null);if(l("webkit")&&!M)throw{};}catch(O){M=t.substitute,alert(M(this.commands.systemShortcut,
[this.commands[x],M(this.commands[l("mac")?"appleKey":"ctrlKey"],[{cut:"X",copy:"C",paste:"V"}[x]])])),M=!1}return M},queryCommandEnabled:function(x){return!this.customUndo||"undo"!=x&&"redo"!=x?this.inherited(arguments):"undo"==x?1<this._steps.length:0<this._undoedSteps.length},_moveToBookmark:function(x){var M=x.mark,O=x.mark;x=x.isCollapsed;var h;if(O)if(9>l("ie")||9===l("ie")&&l("quirks"))if(m.isArray(O))M=[],B.forEach(O,function(N){M.push(C.getNode(N,this.editNode))},this),this.selection.moveToBookmark({mark:M,
isCollapsed:x});else{if(O.startContainer&&O.endContainer&&(h=C.getSelection(this.window))&&h.removeAllRanges){h.removeAllRanges();x=C.create(this.window);var p=C.getNode(O.startContainer,this.editNode);var G=C.getNode(O.endContainer,this.editNode);p&&G&&(x.setStart(p,O.startOffset),x.setEnd(G,O.endOffset),h.addRange(x))}}else(h=C.getSelection(this.window))&&h.removeAllRanges&&(h.removeAllRanges(),x=C.create(this.window),p=C.getNode(O.startContainer,this.editNode),G=C.getNode(O.endContainer,this.editNode),
p&&G&&(x.setStart(p,O.startOffset),x.setEnd(G,O.endOffset),h.addRange(x)))},_changeToStep:function(x,M){this.setValue(M.text);(x=M.bookmark)&&this._moveToBookmark(x)},undo:function(){var x=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var M=this._steps.pop();M&&0<this._steps.length&&(this.focus(),this._changeToStep(M,this._steps[this._steps.length-1]),this._undoedSteps.push(M),this.onDisplayChanged(),delete this._undoRedoActive,x=!0);delete this._undoRedoActive}return x},
redo:function(){var x=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var M=this._undoedSteps.pop();M&&0<this._steps.length&&(this.focus(),this._changeToStep(this._steps[this._steps.length-1],M),this._steps.push(M),this.onDisplayChanged(),x=!0);delete this._undoRedoActive}return x},endEditing:function(x){this._editTimer&&(this._editTimer=this._editTimer.remove());this._inEditing&&(this._endEditing(x),this._inEditing=!1)},_getBookmark:function(){var x=this.selection.getBookmark(),
M=[];if(x&&x.mark){var O=x.mark;if(9>l("ie")||9===l("ie")&&l("quirks")){var h=C.getSelection(this.window);if(m.isArray(O))B.forEach(x.mark,function(G){M.push(C.getIndex(G,this.editNode).o)},this),x.mark=M;else if(h){var p;h.rangeCount&&(p=h.getRangeAt(0));x.mark=p?p.cloneRange():this.selection.getBookmark()}}try{x.mark&&x.mark.startContainer&&(M=C.getIndex(x.mark.startContainer,this.editNode).o,x.mark={startContainer:M,startOffset:x.mark.startOffset,endContainer:x.mark.endContainer===x.mark.startContainer?
M:C.getIndex(x.mark.endContainer,this.editNode).o,endOffset:x.mark.endOffset})}catch(G){x.mark=null}}return x},_beginEditing:function(){0===this._steps.length&&this._steps.push({text:w.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var x=w.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:x,bookmark:this._getBookmark()})},onKeyDown:function(x){l("ie")||this.iframe||x.keyCode!=g.TAB||this.tabIndent||this._saveSelection();if(this.customUndo){var M=
x.keyCode;if(x.ctrlKey&&!x.shiftKey&&!x.altKey){if(90==M||122==M){x.stopPropagation();x.preventDefault();this.undo();return}if(89==M||121==M){x.stopPropagation();x.preventDefault();this.redo();return}}this.inherited(arguments);switch(M){case g.ENTER:case g.BACKSPACE:case g.DELETE:this.beginEditing();break;case 88:case 86:if(x.ctrlKey&&!x.altKey&&!x.metaKey){this.endEditing();88==x.keyCode?this.beginEditing("cut"):this.beginEditing("paste");this.defer("endEditing",1);break}default:if(!x.ctrlKey&&!x.altKey&&
!x.metaKey&&(x.keyCode<g.F1||x.keyCode>g.F15)){this.beginEditing();break}case g.ALT:this.endEditing();break;case g.UP_ARROW:case g.DOWN_ARROW:case g.LEFT_ARROW:case g.RIGHT_ARROW:case g.HOME:case g.END:case g.PAGE_UP:case g.PAGE_DOWN:this.endEditing(!0);case g.CTRL:case g.SHIFT:case g.TAB:}}else this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(x){}},_restoreSelection:function(){this._savedSelection&&
(delete this._cursorToStart,this.selection.isCollapsed()&&this._moveToBookmark(this._savedSelection),delete this._savedSelection)},onClick:function(){this.endEditing(!0);this.inherited(arguments)},replaceValue:function(x){this.customUndo?this.isClosed?this.setValue(x):(this.beginEditing(),x||(x="\x26#160;"),this.setValue(x),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(x){this.setValueDeferred.then(m.hitch(this,function(){!this.disabled&&x||!this._buttonEnabledPlugins&&x?
B.forEach(this._plugins,function(M){M.set("disabled",!0)}):this.disabled&&!x&&B.forEach(this._plugins,function(M){M.set("disabled",!1)})}));this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&(b.set(this.document.body,"color",b.get(this.iframe,"color")),b.set(this.document.body,"background-color",b.get(this.iframe,"background-color")))}catch(x){}}});m.mixin(k.registry,{undo:E,redo:E,cut:E,copy:E,paste:E,insertOrderedList:E,insertUnorderedList:E,
indent:E,outdent:E,justifyCenter:E,justifyFull:E,justifyLeft:E,justifyRight:E,"delete":E,selectAll:E,removeFormat:E,unlink:E,insertHorizontalRule:E,bold:r,italic:r,underline:r,strikethrough:r,subscript:r,superscript:r,"|":function(){return new k({setEditor:function(x){this.editor=x;this.button=new n({ownerDocument:x.ownerDocument})}})}});return H})},"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(u,B,H,D,z,a,d,c){H("dijit-legacy-requires")&&z(0,function(){u(["dijit/ToolbarSeparator"])});return B("dijit.Toolbar",[a,c,d],{templateString:'\x3cdiv class\x3d"dijit" role\x3d"toolbar" tabIndex\x3d"${tabIndex}" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],
function(u,B,H,D){return u("dijit.ToolbarSeparator",[H,D],{templateString:'\x3cdiv class\x3d"dijitToolbarSeparator dijitInline" role\x3d"presentation"\x3e\x3c/div\x3e',buildRendering:function(){this.inherited(arguments);B.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/_editor/_Plugin":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../Destroyable","../form/Button"],function(u,B,H,D,z){B=B("dijit._editor._Plugin",D,{constructor:function(a){this.params=
a||{};H.mixin(this,this.params);this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:z,disabled:!1,getLabel:function(a){return this.editor.commands[a]},_initButton:function(){if(this.command.length){var a=this.getLabel(this.command),d=this.editor,c=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);this.button||(a=H.mixin({label:a,ownerDocument:d.ownerDocument,dir:d.dir,
lang:d.lang,showLabel:!1,iconClass:c,dropDown:this.dropDown,tabIndex:"-1"},this.params||{}),delete a.name,this.button=new this.buttonClass(a))}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){this.dropDown&&this.dropDown.destroyRecursive();this.inherited(arguments)},connect:function(a,d,c){this.own(u.connect(a,d,this,c))},updateState:function(){var a=this.editor,d=this.command;if(a&&a.isLoaded&&d.length){var c=this.get("disabled");if(this.button)try{var b=
a._implCommand(d);var g=!c&&(this[b]?this[b](d):a.queryCommandEnabled(d));this.enabled!==g&&(this.enabled=g,this.button.set("disabled",!g));if(g&&"boolean"==typeof this.button.checked){var m=a.queryCommandState(d);this.checked!==m&&(this.checked=m,this.button.set("checked",a.queryCommandState(d)))}}catch(l){console.log(l)}}},setEditor:function(a){this.editor=a;this._initButton();this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.own(this.button.on("click",H.hitch(this.editor,
"execCommand",this.command,this.commandArg))):this.button.domNode.style.display="none");this.own(this.editor.on("NormalizedDisplayChanged",H.hitch(this,"updateState")))},setToolbar:function(a){this.button&&a.addChild(this.button)},set:function(a,d){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);if(this[c.s])var b=this[c.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(a,d);return b||this},get:function(a){var d=this._getAttrNames(a);
return this[d.g]?this[d.g]():this[a]},_setDisabledAttr:function(a){this._set("disabled",a);this.updateState()},_getAttrNames:function(a){var d=this._attrPairNames;if(d[a])return d[a];var c=a.charAt(0).toUpperCase()+a.substr(1);return d[a]={s:"_set"+c+"Attr",g:"_get"+c+"Attr"}},_set:function(a,d){this[a]=d}});B.registry={};return B})},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dojo/_base/declare dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ../_Plugin ../RichText ../range".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m){return u("dijit._editor.plugins.EnterKeyHandling",b,{blockNodeForEnter:"BR",constructor:function(l){l&&("blockNodeForEnter"in l&&(l.blockNodeForEnter=l.blockNodeForEnter.toUpperCase()),D.mixin(this,l))},setEditor:function(l){if(this.editor!==l)if(this.editor=l,"BR"==this.blockNodeForEnter)this.editor.customUndo=!0,l.onLoadDeferred.then(D.hitch(this,function(A){this.own(z(l.document,"keydown",D.hitch(this,function(v){if(v.keyCode==H.ENTER){var e=D.mixin({},v);e.shiftKey=
!0;this.handleEnterKey(e)||(v.stopPropagation(),v.preventDefault())}})));9<=a("ie")&&10>=a("ie")&&this.own(z(l.document,"paste",D.hitch(this,function(v){setTimeout(D.hitch(this,function(){var e=this.editor.document.selection.createRange();e.move("character",-1);e.select();e.move("character",1);e.select()}),0)})));return A}));else if(this.blockNodeForEnter){var t=D.hitch(this,"handleEnterKey");l.addKeyHandler(13,0,0,t);l.addKeyHandler(13,0,1,t);this.own(this.editor.on("KeyPressed",D.hitch(this,"onKeyPressed")))}},
onKeyPressed:function(){if(this._checkListLater){if(this.editor.selection.isCollapsed()){var l=this.editor.selection.getAncestorElement("LI");if(l){a("mozilla")&&"LI"==l.parentNode.parentNode.nodeName&&(l=l.parentNode.parentNode);var t=l.firstChild;!t||1!=t.nodeType||"UL"!=t.nodeName&&"OL"!=t.nodeName||(l.insertBefore(t.ownerDocument.createTextNode("\u00a0"),t),t=m.create(this.editor.window),t.setStart(l.firstChild,0),l=m.getSelection(this.editor.window,!0),l.removeAllRanges(),l.addRange(t))}else g.prototype.execCommand.call(this.editor,
"formatblock",this.blockNodeForEnter),(l=this.editor.selection.getAncestorElement(this.blockNodeForEnter))?(l.innerHTML=this.bogusHtmlContent,9>=a("ie")&&(l=this.editor.document.selection.createRange(),l.move("character",-1),l.select())):console.error("onKeyPressed: Cannot find the new block node")}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},bogusHtmlContent:"\x26#160;",
blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(l){var t,A=this.editor.document,v;if(l.shiftKey){l=this.editor.selection.getParentElement();if(t=m.getAncestor(l,this.blockNodes)){if("LI"==t.tagName)return!0;l=m.getSelection(this.editor.window);var e=l.getRangeAt(0);e.collapsed||(e.deleteContents(),l=m.getSelection(this.editor.window),e=l.getRangeAt(0));if(m.atBeginningOfContainer(t,e.startContainer,e.startOffset)){var n=A.createElement("br");e=m.create(this.editor.window);t.insertBefore(n,
t.firstChild);e.setStartAfter(n);l.removeAllRanges();l.addRange(e)}else if(m.atEndOfContainer(t,e.startContainer,e.startOffset))e=m.create(this.editor.window),n=A.createElement("br"),t.appendChild(n),t.appendChild(A.createTextNode("\u00a0")),e.setStart(t.lastChild,0),l.removeAllRanges(),l.addRange(e);else{if((v=e.startContainer)&&3==v.nodeType){var q=v.nodeValue;var F=A.createTextNode(q.substring(0,e.startOffset));var k=A.createTextNode(q.substring(e.startOffset));t=A.createElement("br");""==k.nodeValue&&
a("webkit")&&(k=A.createTextNode("\u00a0"));B.place(F,v,"after");B.place(t,F,"after");B.place(k,t,"after");B.destroy(v);e=m.create(this.editor.window);e.setStart(k,0);l.removeAllRanges();l.addRange(e);return!1}return!0}}else l=m.getSelection(this.editor.window),l.rangeCount?(e=l.getRangeAt(0))&&e.startContainer&&(e.collapsed||(e.deleteContents(),l=m.getSelection(this.editor.window),e=l.getRangeAt(0)),(v=e.startContainer)&&3==v.nodeType?(t=e.startOffset,v.length<t&&(k=this._adjustNodeAndOffset(v,t),
v=k.node,t=k.offset),q=v.nodeValue,F=A.createTextNode(q.substring(0,t)),k=A.createTextNode(q.substring(t)),t=A.createElement("br"),k.length||(k=A.createTextNode("\u00a0")),F.length?B.place(F,v,"after"):F=v,B.place(t,F,"after"),B.place(k,t,"after"),B.destroy(v)):(0<=e.startOffset&&(n=v.childNodes[e.startOffset]),t=A.createElement("br"),k=A.createTextNode("\u00a0"),n?(B.place(t,n,"before"),B.place(k,t,"after")):(v.appendChild(t),v.appendChild(k))),e=m.create(this.editor.window),e.setStart(k,0),e.setEnd(k,
k.length),l.removeAllRanges(),l.addRange(e),this.editor.selection.collapse(!0)):g.prototype.execCommand.call(this.editor,"inserthtml","\x3cbr\x3e");return!1}var f=!0;l=m.getSelection(this.editor.window);e=l.getRangeAt(0);e.collapsed||(e.deleteContents(),l=m.getSelection(this.editor.window),e=l.getRangeAt(0));n=m.getBlockAncestor(e.endContainer,null,this.editor.editNode);var w=n.blockNode;if(this._checkListLater=w&&("LI"==w.nodeName||"LI"==w.parentNode.nodeName))return a("mozilla")&&(this._pressedEnterInBlock=
w),/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(w.innerHTML)&&(w.innerHTML="",a("webkit")&&(e=m.create(this.editor.window),e.setStart(w,0),l.removeAllRanges(),l.addRange(e)),this._checkListLater=!1),!0;if(!n.blockNode||n.blockNode===this.editor.editNode){try{g.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(C){}n={blockNode:this.editor.selection.getAncestorElement(this.blockNodeForEnter),
blockContainer:this.editor.editNode};if(n.blockNode){if(n.blockNode!=this.editor.editNode&&!(n.blockNode.textContent||n.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)return this.removeTrailingBr(n.blockNode),!1}else n.blockNode=this.editor.editNode;l=m.getSelection(this.editor.window);e=l.getRangeAt(0)}w=A.createElement(this.blockNodeForEnter);w.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(n.blockNode);k=e.endOffset;f=e.endContainer;f.length<k&&(k=this._adjustNodeAndOffset(f,k),f=
k.node,k=k.offset);if(m.atEndOfContainer(n.blockNode,f,k))n.blockNode===n.blockContainer?n.blockNode.appendChild(w):B.place(w,n.blockNode,"after"),f=!1,e=m.create(this.editor.window),e.setStart(w,0),l.removeAllRanges(),l.addRange(e),this.editor.height&&c.scrollIntoView(w);else if(m.atBeginningOfContainer(n.blockNode,e.startContainer,e.startOffset))B.place(w,n.blockNode,n.blockNode===n.blockContainer?"first":"before"),w.nextSibling&&this.editor.height&&(e=m.create(this.editor.window),e.setStart(w.nextSibling,
0),l.removeAllRanges(),l.addRange(e),c.scrollIntoView(w.nextSibling)),f=!1;else{n.blockNode===n.blockContainer?n.blockNode.appendChild(w):B.place(w,n.blockNode,"after");f=!1;n.blockNode.style&&w.style&&n.blockNode.style.cssText&&(w.style.cssText=n.blockNode.style.cssText);if((v=e.startContainer)&&3==v.nodeType){k=e.endOffset;v.length<k&&(k=this._adjustNodeAndOffset(v,k),v=k.node,k=k.offset);q=v.nodeValue;F=A.createTextNode(q.substring(0,k));k=A.createTextNode(q.substring(k,q.length));B.place(F,v,
"before");B.place(k,v,"after");B.destroy(v);for(e=F.parentNode;e!==n.blockNode;){q=A.createElement(e.tagName);e.style&&q.style&&e.style.cssText&&(q.style.cssText=e.style.cssText);"FONT"===e.tagName&&(e.color&&(q.color=e.color),e.face&&(q.face=e.face),e.size&&(q.size=e.size));for(;k;)v=k.nextSibling,q.appendChild(k),k=v;B.place(q,e,"after");F=e;k=q;e=e.parentNode}if(1==k.nodeType||3==k.nodeType&&k.nodeValue)w.innerHTML="";for(F=k;k;)v=k.nextSibling,w.appendChild(k),k=v}e=m.create(this.editor.window);
A=F;if("BR"!==this.blockNodeForEnter){for(;A;)t=A,A=v=A.firstChild;t&&t.parentNode?(w=t.parentNode,e.setStart(w,0),l.removeAllRanges(),l.addRange(e),this.editor.height&&c.scrollIntoView(w),a("mozilla")&&(this._pressedEnterInBlock=n.blockNode)):f=!0}else e.setStart(w,0),l.removeAllRanges(),l.addRange(e),this.editor.height&&c.scrollIntoView(w),a("mozilla")&&(this._pressedEnterInBlock=n.blockNode)}return f},_adjustNodeAndOffset:function(l,t){for(;l.length<t&&l.nextSibling&&3==l.nextSibling.nodeType;)t-=
l.length,l=l.nextSibling;return{node:l,offset:t}},removeTrailingBr:function(l){if(l=/P|DIV|LI/i.test(l.tagName)?l:this.editor.selection.getParentOfType(l,["P","DIV","LI"]))l.lastChild&&(1<l.childNodes.length&&3==l.lastChild.nodeType&&/^[\s\xAD]*$/.test(l.lastChild.nodeValue)||"BR"==l.lastChild.tagName)&&B.destroy(l.lastChild),l.childNodes.length||(l.innerHTML=this.bogusHtmlContent)}})})},"dijit/_editor/RichText":function(){define("dojo/_base/array dojo/_base/config dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/query dojo/domReady dojo/sniff dojo/string dojo/topic dojo/_base/unload dojo/_base/url dojo/window ../_Widget ../_CssStateMixin ../selection ./range ./html ../focus ../main".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v,e,n,q,F,k,f,w,C,L,I,E,r,x,M){var O=H("dijit._editor.RichText",[C,L],{constructor:function(h){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};h&&t.isString(h.value)&&(this.value=h.value);this.onLoadDeferred=new D},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",
isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){"textarea"===this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");this.contentPreFilters=[t.trim,t.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);n("mozilla")&&(this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),
this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters));n("webkit")&&(this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters));if(n("ie")||n("trident"))this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[t.hitch(this,"_stripBreakerNodes")].concat(this.contentDomPostFilters);this.contentDomPostFilters=[t.hitch(this,
"_stripTrailingEmptyNodes")].concat(this.contentDomPostFilters);this.inherited(arguments);F.publish(M._scopeName+"._editor.RichText::init",this)},startup:function(){this.inherited(arguments);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var h=t.hitch(this,function(N,K){return function(){return!this.execCommand(N,K)}}),p={b:h("bold"),i:h("italic"),u:h("underline"),a:h("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:h("formatblock",
"h1"),2:h("formatblock","h2"),3:h("formatblock","h3"),4:h("formatblock","h4"),"\\":h("insertunorderedlist")};n("ie")||(p.Z=h("redo"));for(var G in p)this.addKeyHandler(G,!0,!1,p[G])},events:["onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(O._editorCommandsLocalized)this._local2NativeFormatNames=O._local2NativeFormatNames,this._native2LocalFormatNames=O._native2LocalFormatNames;else{O._editorCommandsLocalized=!0;O._local2NativeFormatNames={};
O._native2LocalFormatNames={};this._local2NativeFormatNames=O._local2NativeFormatNames;this._native2LocalFormatNames=O._native2LocalFormatNames;for(var h="div p pre h1 h2 h3 h4 h5 h6 ol ul address".split(" "),p="",G,N=0;G=h[N++];)p="l"!==G.charAt(1)?p+("\x3c"+G+"\x3e\x3cspan\x3econtent\x3c/span\x3e\x3c/"+G+"\x3e\x3cbr/\x3e"):p+("\x3c"+G+"\x3e\x3cli\x3econtent\x3c/li\x3e\x3c/"+G+"\x3e\x3cbr/\x3e");var K=c.create("div",{style:{position:"absolute",top:"0px",zIndex:10,opacity:.01},innerHTML:p});this.ownerDocumentBody.appendChild(K);
h=t.hitch(this,function(){for(var P=K.firstChild;P;)try{this.selection.selectElement(P.firstChild);var Q=P.tagName.toLowerCase();this._local2NativeFormatNames[Q]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[Q]]=Q;P=P.nextSibling.nextSibling}catch(S){}c.destroy(K)});this.defer(h)}},open:function(h){if(!this.onLoadDeferred||0<=this.onLoadDeferred.fired)this.onLoadDeferred=new D;this.isClosed||this.close();F.publish(M._scopeName+"._editor.RichText::open",
this);1===arguments.length&&h.nodeName&&(this.domNode=h);var p=this.domNode;if(t.isString(this.value)){var G=this.value;p.innerHTML=""}else if(p.nodeName&&"textarea"==p.nodeName.toLowerCase()){var N=this.textarea=p;this.name=N.name;G=N.value;p=this.domNode=this.ownerDocument.createElement("div");p.setAttribute("widgetId",this.id);N.removeAttribute("widgetId");p.cssText=N.cssText;p.className+=" "+N.className;c.place(p,N,"before");var K=t.hitch(this,function(){g.set(N,{display:"block",position:"absolute",
top:"-1000px"});if(n("ie")){var y=N.style;this.__overflow=y.overflow;y.overflow="hidden"}});n("ie")?this.defer(K,10):K();if(N.form){var P=N.value;this.reset=function(){this.getValue()!==P&&this.replaceValue(P)};A(N.form,"submit",t.hitch(this,function(){a.set(N,"disabled",this.disabled);N.value=this.getValue()}))}}else G=r.getChildrenHtml(p),p.innerHTML="";this.value=G;p.nodeName&&"LI"===p.nodeName&&(p.innerHTML=" \x3cbr\x3e");this.header=p.ownerDocument.createElement("div");p.appendChild(this.header);
this.editingArea=p.ownerDocument.createElement("div");p.appendChild(this.editingArea);this.footer=p.ownerDocument.createElement("div");p.appendChild(this.footer);this.name||(this.name=this.id+"_AUTOGEN");if(""!==this.name&&(!B.useXDomain||B.allowXdRichTextSave)){if((G=z.byId(M._scopeName+"._editor.RichText.value"))&&""!==G.value){K=G.value.split(this._SEPARATOR);for(var Q=0,S;S=K[Q++];)if(S=S.split(this._NAME_CONTENT_SEP),S[0]===this.name){this.value=S[1];K=K.splice(Q,1);G.value=K.join(this._SEPARATOR);
break}}O._globalSaveHandler||(O._globalSaveHandler={},k.addOnUnload(function(){for(var y in O._globalSaveHandler){var J=O._globalSaveHandler[y];t.isFunction(J)&&J()}}));O._globalSaveHandler[this.id]=t.hitch(this,"_saveContent")}this.isClosed=!1;G=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");G.id=this.id+"_iframe";G.style.border="none";G.style.width="100%";this._layoutMode?G.style.height="100%":7<=n("ie")?(this.height&&(G.style.height=this.height),this.minHeight&&(G.style.minHeight=
this.minHeight)):G.style.height=this.height?this.height:this.minHeight;G.frameBorder=0;G._loadFunc=t.hitch(this,function(y){this.window=y;this.document=y.document;this.selection=new I.SelectionManager(y);n("ie")&&this._localizeEditorCommands();this.onLoad(this.get("value"))});K=this._getIframeDocTxt().replace(/\\/g,"\\\\").replace(/'/g,"\\'");K=11>n("ie")?'javascript:document.open();try{parent.window;}catch(e){document.domain\x3d"'+document.domain+"\";}document.write('"+K+"');document.close()":"javascript: '"+
K+"'";this.editingArea.appendChild(G);G.src=K;"LI"===p.nodeName&&(p.lastChild.style.marginTop="-1.2em");d.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var h=g.getComputedStyle(this.domNode);if(this["aria-label"])var p=this["aria-label"];else{var G=v('label[for\x3d"'+this.id+'"]',this.ownerDocument)[0]||z.byId(this["aria-labelledby"],this.ownerDocument);G&&(p=G.textContent||G.innerHTML||"")}G="\x3cdiv id\x3d'dijitEditorBody' role\x3d'textbox' aria-multiline\x3d'true' "+
(p?" aria-label\x3d'"+q.escape(p)+"'":"")+"\x3e\x3c/div\x3e";var N=[h.fontWeight,h.fontSize,h.fontFamily].join(" "),K=h.lineHeight;K=0<=K.indexOf("px")?parseFloat(K)/parseFloat(h.fontSize):0<=K.indexOf("em")?parseFloat(K):"normal";var P="",Q=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(S){S=S.replace(/^;/ig,"")+";";var y=S.split(":")[0];if(y){y=t.trim(y);y=y.toLowerCase();var J,R="";for(J=0;J<y.length;J++){var T=y.charAt(J);switch(T){case "-":J++,T=y.charAt(J).toUpperCase();default:R+=
T}}g.set(Q.domNode,R,"")}P+=S+";"});this.iframe.setAttribute("title",p);return["\x3c!DOCTYPE html\x3e","\x3chtml lang\x3d'"+(this.lang||m.locale.replace(/-.*/,""))+"'"+(this.isLeftToRight()?"":" dir\x3d'rtl'")+"\x3e\n","\x3chead\x3e\n\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html'\x3e\n",p?"\x3ctitle\x3e"+q.escape(p)+"\x3c/title\x3e":"","\x3cstyle\x3e\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n\t}\n\tbody,html,#dijitEditorBody { outline: none; }html { height: 100%; width: 100%; overflow: hidden; }\n",
this.height?"\tbody,#dijitEditorBody { height: 100%; width: 100%; overflow: auto; }\n":"\tbody,#dijitEditorBody { min-height: "+this.minHeight+"; width: 100%; overflow-x: auto; overflow-y: hidden; }\n","\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",N,";\n",this.height||n("opera")?"":"\t\tposition: fixed;\n","\t\tline-height:",K,";\n\t}\n\tp{ margin: 1em 0; }\n\tli \x3e ul:-moz-first-node, li \x3e ol:-moz-first-node{ padding-top: 1.2em; }\n",n("ie")||n("trident")||n("edge")?"":"\tli{ min-height:1.2em; }\n",
"\x3c/style\x3e\n",this._applyEditingAreaStyleSheets(),"\n\x3c/head\x3e\n\x3cbody role\x3d'application'",p?" aria-label\x3d'"+q.escape(p)+"'":"","onload\x3d'try{frameElement \x26\x26 frameElement._loadFunc(window,document)}catch(e){document.domain\x3d\""+document.domain+"\";frameElement._loadFunc(window,document)}' ","style\x3d'"+P+"'\x3e",G,"\x3c/body\x3e\n\x3c/html\x3e"].join("")},_applyEditingAreaStyleSheets:function(){var h=[];this.styleSheets&&(h=this.styleSheets.split(";"),this.styleSheets=
"");h=h.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var p="",G=0,N,K=w.get(this.ownerDocument);N=h[G++];)N=(new f(K.location,N)).toString(),this.editingAreaStyleSheets.push(N),p+='\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+N+'"/\x3e';return p},addStyleSheet:function(h){var p=h.toString(),G=w.get(this.ownerDocument);if("."===p.charAt(0)||"/"!==p.charAt(0)&&!h.host)p=(new f(G.location,p)).toString();-1<u.indexOf(this.editingAreaStyleSheets,p)||(this.editingAreaStyleSheets.push(p),
this.onLoadDeferred.then(t.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(p);else{var N=this.document.getElementsByTagName("head")[0],K=this.document.createElement("link");K.rel="stylesheet";K.type="text/css";K.href=p;N.appendChild(K)}})))},removeStyleSheet:function(h){var p=h.toString(),G=w.get(this.ownerDocument);if("."===p.charAt(0)||"/"!==p.charAt(0)&&!h.host)p=(new f(G.location,p)).toString();h=u.indexOf(this.editingAreaStyleSheets,p);-1!==h&&(delete this.editingAreaStyleSheets[h],
v('link[href\x3d"'+p+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(h){h=!!h;this._set("disabled",h);if(this.isLoaded){var p=n("ie")&&(this.isLoaded||!this.focusOnLoad);p&&(this.editNode.unselectable="on");this.editNode.contentEditable=!h;this.editNode.tabIndex=h?"-1":this.tabIndex;p&&this.defer(function(){this.editNode&&(this.editNode.unselectable="off")});if(n("mozilla")&&!h&&this._mozSettingProps){h=this._mozSettingProps;for(var G in h)if(h.hasOwnProperty(G))try{this.document.execCommand(G,
!1,h[G])}catch(N){}}this._disabledOK=!0}},onLoad:function(h){this.window.__registeredWindow||(this.window.__registeredWindow=!0,this._iframeRegHandle=x.registerIframe(this.iframe));this.editNode=this.document.body.firstChild;var p=this;this.beforeIframeNode=c.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"before");this.afterIframeNode=c.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"after");this.iframe.onfocus=this.document.onfocus=function(){p.editNode.focus()};this.focusNode=
this.editNode;var G=this.events.concat(this.captureEvents),N=this.iframe?this.document:this.editNode;this.own.apply(this,u.map(G,function(K){var P=K.toLowerCase().replace(/^on/,"");return A(N,P,t.hitch(this,K))},this));this.own(A(N,"mouseup",t.hitch(this,"onClick")));n("ie")&&(this.own(A(this.document,"mousedown",t.hitch(this,"_onIEMouseDown"))),this.editNode.style.zoom=1);n("webkit")&&(this._webkitListener=this.own(A(this.document,"mouseup",t.hitch(this,"onDisplayChanged")))[0],this.own(A(this.document,
"mousedown",t.hitch(this,function(K){K=K.target;!K||K!==this.document.body&&K!==this.document||this.defer("placeCursorAtEnd")}))));if(n("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(K){}this.isLoaded=!0;this.set("disabled",this.disabled);G=t.hitch(this,function(){this.setValue(h);this.onLoadDeferred&&!this.onLoadDeferred.isFulfilled()&&this.onLoadDeferred.resolve(!0);this.onDisplayChanged();this.focusOnLoad&&e(t.hitch(this,"defer","focus",this.updateInterval));this.value=
this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(G):G()},onKeyDown:function(h){if(h.keyCode===l.SHIFT||h.keyCode===l.ALT||h.keyCode===l.META||h.keyCode===l.CTRL)return!0;h.keyCode===l.TAB&&this.isTabIndent&&(h.stopPropagation(),h.preventDefault(),this.queryCommandEnabled(h.shiftKey?"outdent":"indent")&&this.execCommand(h.shiftKey?"outdent":"indent"));if(h.keyCode==l.TAB&&!this.isTabIndent&&!h.ctrlKey&&!h.altKey)return h.shiftKey?this.beforeIframeNode.focus():this.afterIframeNode.focus(),
!0;9>n("ie")&&h.keyCode===l.BACKSPACE&&"Control"===this.document.selection.type&&(h.stopPropagation(),h.preventDefault(),this.execCommand("delete"));n("ff")&&(h.keyCode===l.PAGE_UP||h.keyCode===l.PAGE_DOWN)&&this.editNode.clientHeight>=this.editNode.scrollHeight&&h.preventDefault();var p=this._keyHandlers[h.keyCode],G=arguments;p&&!h.altKey&&u.some(p,function(N){if(!(N.shift^h.shiftKey||N.ctrl^(h.ctrlKey||h.metaKey)))return N.handler.apply(this,G)||h.preventDefault(),!0},this);this.defer("onKeyPressed",
1);return!0},onKeyUp:function(){},setDisabled:function(h){m.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",h)},_setValueAttr:function(h){this.setValue(h)},_setDisableSpellCheckAttr:function(h){this.document?a.set(this.document.body,"spellcheck",!h):this.onLoadDeferred.then(t.hitch(this,function(){a.set(this.document.body,"spellcheck",!h)}));this._set("disableSpellCheck",h)},addKeyHandler:function(h,p,G,N){"string"==
typeof h&&(h=h.toUpperCase().charCodeAt(0));t.isArray(this._keyHandlers[h])||(this._keyHandlers[h]=[]);this._keyHandlers[h].push({shift:G||!1,ctrl:p||!1,handler:N})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(h){this.onDisplayChanged(h)},_onIEMouseDown:function(){this.focused||this.disabled||this.focus()},_onBlur:function(h){(n("ie")||n("trident"))&&this.defer(function(){x.curNode||this.ownerDocumentBody.focus()});this.inherited(arguments);var p=this.getValue(!0);if(p!==this.value)this.onChange(p);
this._set("value",p)},_onFocus:function(h){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!n("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){this.isLoaded?9>n("ie")?this.iframe.fireEvent("onfocus",document.createEventObject()):this.editNode.focus():this.focusOnLoad=!0},updateInterval:200,
_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove();this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(h,p){h=h.toLowerCase();"formatblock"===h?n("safari")&&void 0===p&&(h="heading"):"hilitecolor"!==h||n("mozilla")||(h="backcolor");return h},_implCommand:function(h){return"_"+this._normalizeCommand(h)+"EnabledImpl"},_qcaCache:{},
queryCommandAvailable:function(h){var p=this._qcaCache[h];return void 0!==p?p:this._qcaCache[h]=this._queryCommandAvailable(h)},_queryCommandAvailable:function(h){switch(h.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":case "cut":case "copy":case "paste":return!0;
case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":return n("ie")||n("trident")||n("edge");case "inserttable":case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":return!n("webkit");default:return!1}},execCommand:function(h,p){this.focused&&this.focus();h=this._normalizeCommand(h,p);if(void 0!==p){if("heading"===h)throw Error("unimplemented");"formatblock"===
h&&(n("ie")||n("trident"))&&(p="\x3c"+p+"\x3e")}var G="_"+h+"Impl";if(this[G])var N=this[G](p);else if((p=1<arguments.length?p:null)||"createlink"!==h)N=this.document.execCommand(h,!1,p);this.onDisplayChanged();return N},queryCommandEnabled:function(h){if(this.disabled||!this._disabledOK)return!1;h=this._normalizeCommand(h);var p=this._implCommand(h);return this[p]?this[p](h):this._browserQueryCommandEnabled(h)},queryCommandState:function(h){if(this.disabled||!this._disabledOK)return!1;h=this._normalizeCommand(h);
try{return this.document.queryCommandState(h)}catch(p){return!1}},queryCommandValue:function(h){if(this.disabled||!this._disabledOK)return!1;h=this._normalizeCommand(h);if(n("ie")&&"formatblock"===h)h=this._native2LocalFormatNames[this.document.queryCommandValue(h)];else if(n("mozilla")&&"hilitecolor"===h){try{var p=this.document.queryCommandValue("styleWithCSS")}catch(G){p=!1}this.document.execCommand("styleWithCSS",!1,!0);h=this.document.queryCommandValue(h);this.document.execCommand("styleWithCSS",
!1,p)}else h=this.document.queryCommandValue(h);return h},_sCall:function(h,p){return this.selection[h].apply(this.selection,p)},placeCursorAtStart:function(){this.focus();var h=!1;if(n("mozilla"))for(var p=this.editNode.firstChild;p;){if(3===p.nodeType){if(0<p.nodeValue.replace(/^\s+|\s+$/g,"").length){h=!0;this.selection.selectElement(p);break}}else if(1===p.nodeType){h=!0;var G=p.tagName?p.tagName.toLowerCase():"";/br|input|img|base|meta|area|basefont|hr|link/.test(G)?this.selection.selectElement(p):
this.selection.selectElementChildren(p);break}p=p.nextSibling}else h=!0,this.selection.selectElementChildren(this.editNode);h&&this.selection.collapse(!0)},placeCursorAtEnd:function(){this.focus();var h=!1;if(n("mozilla"))for(var p=this.editNode.lastChild;p;){if(3===p.nodeType){if(0<p.nodeValue.replace(/^\s+|\s+$/g,"").length){h=!0;this.selection.selectElement(p);break}}else if(1===p.nodeType){h=!0;this.selection.selectElement(p.lastChild||p);break}p=p.previousSibling}else h=!0,this.selection.selectElementChildren(this.editNode);
h&&this.selection.collapse(!1)},getValue:function(h){return!this.textarea||!this.isClosed&&this.isLoaded?this.isLoaded?this._postFilterContent(null,h):this.value:this.textarea.value},_getValueAttr:function(){return this.getValue(!0)},setValue:function(h){if(this.isLoaded){if(!this.textarea||!this.isClosed&&this.isLoaded){h=this._preFilterContent(h);var p=this.isClosed?this.domNode:this.editNode;p.innerHTML=h;this._preDomFilterContent(p)}else this.textarea.value=h;this.onDisplayChanged();this._set("value",
this.getValue(!0))}else this.onLoadDeferred.then(t.hitch(this,function(){this.setValue(h)}))},replaceValue:function(h){this.isClosed?this.setValue(h):this.window&&this.window.getSelection&&!n("mozilla")?this.setValue(h):this.window&&this.window.getSelection?(h=this._preFilterContent(h),this.execCommand("selectall"),this.execCommand("inserthtml",h),this._preDomFilterContent(this.editNode)):this.document&&this.document.selection&&this.setValue(h);this._set("value",this.getValue(!0))},_preFilterContent:function(h){var p=
h;u.forEach(this.contentPreFilters,function(G){G&&(p=G(p))});return p},_preDomFilterContent:function(h){h=h||this.editNode;u.forEach(this.contentDomPreFilters,function(p){p&&t.isFunction(p)&&p(h)},this)},_postFilterContent:function(h,p){if(t.isString(h))var G=h;else h=h||this.editNode,this.contentDomPostFilters.length&&(p&&(h=t.clone(h)),u.forEach(this.contentDomPostFilters,function(N){h=N(h)})),G=r.getChildrenHtml(h);t.trim(G.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(G="");u.forEach(this.contentPostFilters,
function(N){G=N(G)});return G},_saveContent:function(){var h=z.byId(M._scopeName+"._editor.RichText.value");h&&(h.value&&(h.value+=this._SEPARATOR),h.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(h,p){h=h.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");p||(h=h.replace(/'/gm,"\x26#39;"));return h},getNodeHtml:function(h){m.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",
2);return r.getNodeHtml(h)},getNodeChildrenHtml:function(h){m.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return r.getChildrenHtml(h)},close:function(h){if(!this.isClosed){arguments.length||(h=!0);h&&this._set("value",this.getValue(!0));this.interval&&clearInterval(this.interval);this._webkitListener&&(this._webkitListener.remove(),delete this._webkitListener);n("ie")&&(this.iframe.onfocus=null);this.iframe._loadFunc=null;this._iframeRegHandle&&
(this._iframeRegHandle.remove(),delete this._iframeRegHandle);if(this.textarea){var p=this.textarea.style;p.position="";p.left=p.top="";n("ie")&&(p.overflow=this.__overflow,this.__overflow=null);this.textarea.value=this.value;c.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe;d.remove(this.domNode,this.baseClass);this.isClosed=!0;this.isLoaded=!1;delete this.editNode;delete this.focusNode;this.window&&this.window._frameElement&&(this.window._frameElement=
null);this.editorObject=this.editingArea=this.document=this.window=null}},destroy:function(){this.isClosed||this.close(!1);this._updateTimer&&this._updateTimer.remove();this.inherited(arguments);O._globalSaveHandler&&delete O._globalSaveHandler[this.id]},_removeMozBogus:function(h){return h.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(h){h=h.replace(/\sclass="webkit-block-placeholder"/gi,"");h=h.replace(/\sclass="apple-style-span"/gi,
"");return h=h.replace(/<meta charset="utf-8" \/>/gi,"")},_normalizeFontStyle:function(h){return h.replace(/<(\/)?strong([ >])/gi,"\x3c$1b$2").replace(/<(\/)?em([ >])/gi,"\x3c$1i$2")},_preFixUrlAttributes:function(h){return h.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2")},_browserQueryCommandEnabled:function(h){if(!h)return!1;
if(n("ie")||n("trident")||n("edge"))return this.focused&&!this.disabled;var p=9>n("ie")?this.document.selection.createRange():this.document;try{return p.queryCommandEnabled(h)}catch(G){return!1}},_createlinkEnabledImpl:function(){var h=!0;return h=n("opera")?this.window.getSelection().isCollapsed?!0:this.document.queryCommandEnabled("createlink"):this._browserQueryCommandEnabled("createlink")},_unlinkEnabledImpl:function(){var h=!0;return h=n("mozilla")||n("webkit")||n("ie")||n("trident")||n("edge")?
this.selection.hasAncestorElement("a"):this._browserQueryCommandEnabled("unlink")},_inserttableEnabledImpl:function(){var h=!0;return h=n("mozilla")||n("webkit")?!0:this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var h=!0;n("webkit")?((h=this.window.getSelection())&&(h=h.toString()),h=!!h):h=this._browserQueryCommandEnabled("cut");return h},_copyEnabledImpl:function(){var h=!0;n("webkit")?((h=this.window.getSelection())&&(h=h.toString()),h=!!h):h=this._browserQueryCommandEnabled("copy");
return h},_pasteEnabledImpl:function(){var h=!0;return n("webkit")?!0:h=this._browserQueryCommandEnabled("paste")},_inserthorizontalruleImpl:function(h){return n("ie")?this._inserthtmlImpl("\x3chr\x3e"):this.document.execCommand("inserthorizontalrule",!1,h)},_unlinkImpl:function(h){return this.queryCommandEnabled("unlink")&&(n("mozilla")||n("webkit"))?(h=this.selection.getAncestorElement("a"),this.selection.selectElement(h),this.document.execCommand("unlink",!1,null)):this.document.execCommand("unlink",
!1,h)},_hilitecolorImpl:function(h){if(!this._handleTextColorOrProperties("hilitecolor",h))if(n("mozilla")){this.document.execCommand("styleWithCSS",!1,!0);console.log("Executing color command.");var p=this.document.execCommand("hilitecolor",!1,h);this.document.execCommand("styleWithCSS",!1,!1)}else p=this.document.execCommand("hilitecolor",!1,h);return p},_backcolorImpl:function(h){n("ie")&&(h=h?h:null);var p=this._handleTextColorOrProperties("backcolor",h);p||(p=this.document.execCommand("backcolor",
!1,h));return p},_forecolorImpl:function(h){n("ie")&&(h=h?h:null);var p=!1;(p=this._handleTextColorOrProperties("forecolor",h))||(p=this.document.execCommand("forecolor",!1,h));return p},_inserthtmlImpl:function(h){h=this._preFilterContent(h);var p=!0;if(9>n("ie")){var G=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var N=G.item(0);G.length;)G.remove(G.item(0));N.outerHTML=h}else G.pasteHTML(h);G.select()}else if(8>n("trident")){var K=E.getSelection(this.window);
if(K&&K.rangeCount&&K.getRangeAt){G=K.getRangeAt(0);G.deleteContents();var P=c.create("div");P.innerHTML=h;for(N=this.document.createDocumentFragment();h=P.firstChild;)var Q=N.appendChild(h);G.insertNode(N);Q&&(G=G.cloneRange(),G.setStartAfter(Q),G.collapse(!1),K.removeAllRanges(),K.addRange(G))}}else n("mozilla")&&!h.length?this.selection.remove():p=this.document.execCommand("inserthtml",!1,h);return p},_boldImpl:function(h){var p=!1;if(n("ie")||n("trident"))this._adaptIESelection(),p=this._adaptIEFormatAreaAndExec("bold");
p||(p=this.document.execCommand("bold",!1,h));return p},_italicImpl:function(h){var p=!1;if(n("ie")||n("trident"))this._adaptIESelection(),p=this._adaptIEFormatAreaAndExec("italic");p||(p=this.document.execCommand("italic",!1,h));return p},_underlineImpl:function(h){var p=!1;if(n("ie")||n("trident"))this._adaptIESelection(),p=this._adaptIEFormatAreaAndExec("underline");p||(p=this.document.execCommand("underline",!1,h));return p},_strikethroughImpl:function(h){var p=!1;if(n("ie")||n("trident"))this._adaptIESelection(),
p=this._adaptIEFormatAreaAndExec("strikethrough");p||(p=this.document.execCommand("strikethrough",!1,h));return p},_superscriptImpl:function(h){var p=!1;if(n("ie")||n("trident"))this._adaptIESelection(),p=this._adaptIEFormatAreaAndExec("superscript");p||(p=this.document.execCommand("superscript",!1,h));return p},_subscriptImpl:function(h){var p=!1;if(n("ie")||n("trident"))this._adaptIESelection(),p=this._adaptIEFormatAreaAndExec("subscript");p||(p=this.document.execCommand("subscript",!1,h));return p},
_fontnameImpl:function(h){if(n("ie")||n("trident"))var p=this._handleTextColorOrProperties("fontname",h);p||(p=this.document.execCommand("fontname",!1,h));return p},_fontsizeImpl:function(h){if(n("ie")||n("trident"))var p=this._handleTextColorOrProperties("fontsize",h);p||(p=this.document.execCommand("fontsize",!1,h));return p},_insertorderedlistImpl:function(h){var p=!1;if(n("ie")||n("trident")||n("edge"))p=this._adaptIEList("insertorderedlist",h);p||(p=this.document.execCommand("insertorderedlist",
!1,h));return p},_insertunorderedlistImpl:function(h){var p=!1;if(n("ie")||n("trident")||n("edge"))p=this._adaptIEList("insertunorderedlist",h);p||(p=this.document.execCommand("insertunorderedlist",!1,h));return p},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(h){var p=0;if(h&&h.childNodes){var G;for(G=0;G<h.childNodes.length;G++){var N=b.position(h.childNodes[G]);
p+=N.h}}return p},_isNodeEmpty:function(h,p){return 1===h.nodeType?0<h.childNodes.length?this._isNodeEmpty(h.childNodes[0],p):!0:3===h.nodeType?""===h.nodeValue.substring(p):!1},_removeStartingRangeFromRange:function(h,p){if(h.nextSibling)p.setStart(h.nextSibling,0);else{for(h=h.parentNode;h&&null==h.nextSibling;)h=h.parentNode;h&&p.setStart(h.nextSibling,0)}return p},_adaptIESelection:function(){var h=E.getSelection(this.window);if(h&&h.rangeCount&&!h.isCollapsed){for(var p=h.getRangeAt(0),G=p.startContainer,
N=p.startOffset;3===G.nodeType&&N>=G.length&&G.nextSibling;)N-=G.length,G=G.nextSibling;for(var K=null;this._isNodeEmpty(G,N)&&G!==K;)K=G,p=this._removeStartingRangeFromRange(G,p),G=p.startContainer,N=0;h.removeAllRanges();h.addRange(p)}},_adaptIEFormatAreaAndExec:function(h){var p=E.getSelection(this.window),G=this.document,N;if(h&&p&&p.isCollapsed){if(this.queryCommandValue(h)){h=this._tagNamesForCommand(h);var K=p.getRangeAt(0);var P=K.startContainer;if(3===P.nodeType){var Q=K.endOffset;P.length<
Q&&(Q=this._adjustNodeAndOffset(S,Q),P=Q.node,Q=Q.offset)}for(;P&&P!==this.editNode;){var S=P.tagName?P.tagName.toLowerCase():"";if(-1<u.indexOf(h,S)){var y=P;break}P=P.parentNode}if(y&&(S=K.startContainer,h=G.createElement(y.tagName),c.place(h,y,"after"),S&&3===S.nodeType)){Q=K.endOffset;S.length<Q&&(Q=this._adjustNodeAndOffset(S,Q),S=Q.node,Q=Q.offset);P=S.nodeValue;K=G.createTextNode(P.substring(0,Q));var J=P.substring(Q,P.length);J&&(N=G.createTextNode(J));c.place(K,S,"before");if(N){var R=G.createElement("span");
R.className="ieFormatBreakerSpan";c.place(R,S,"after");c.place(N,R,"after");N=R}c.destroy(S);Q=K.parentNode;for(S=[];Q!==y;){P=Q.tagName;K={tagName:P};S.push(K);P=G.createElement(P);Q.style&&P.style&&Q.style.cssText&&(P.style.cssText=Q.style.cssText,K.cssText=Q.style.cssText);"FONT"===Q.tagName&&(Q.color&&(P.color=Q.color,K.color=Q.color),Q.face&&(P.face=Q.face,K.face=Q.face),Q.size&&(P.size=Q.size,K.size=Q.size));Q.className&&(P.className=Q.className,K.className=Q.className);if(N)for(;N;)K=N.nextSibling,
P.appendChild(N),N=K;P.tagName==Q.tagName?(R=G.createElement("span"),R.className="ieFormatBreakerSpan",c.place(R,Q,"after"),c.place(P,R,"after")):c.place(P,Q,"after");K=Q;N=P;Q=Q.parentNode}if(N){if(1===N.nodeType||3===N.nodeType&&N.nodeValue)h.innerHTML="";for(;N;)K=N.nextSibling,h.appendChild(N),N=K}if(S.length){K=S.pop();N=G.createElement(K.tagName);K.cssText&&N.style&&(N.style.cssText=K.cssText);K.className&&(N.className=K.className);"FONT"===K.tagName&&(K.color&&(N.color=K.color),K.face&&(N.face=
K.face),K.size&&(N.size=K.size));for(c.place(N,h,"before");S.length;)K=S.pop(),y=G.createElement(K.tagName),K.cssText&&y.style&&(y.style.cssText=K.cssText),K.className&&(y.className=K.className),"FONT"===K.tagName&&(K.color&&(y.color=K.color),K.face&&(y.face=K.face),K.size&&(y.size=K.size)),N.appendChild(y),N=y;y=G.createTextNode(".");R.appendChild(y);N.appendChild(y)}else R=G.createElement("span"),R.className="ieFormatBreakerSpan",y=G.createTextNode("."),R.appendChild(y),c.place(R,h,"before");N=
E.create(this.window);N.setStart(y,0);N.setEnd(y,y.length);p.removeAllRanges();p.addRange(N);this.selection.collapse(!1);y.parentNode.innerHTML="";h.firstChild||c.destroy(h);return!0}return!1}K=p.getRangeAt(0);if((S=K.startContainer)&&3===S.nodeType)return Q=K.startOffset,S.length<Q&&(Q=this._adjustNodeAndOffset(S,Q),S=Q.node,Q=Q.offset),P=S.nodeValue,K=G.createTextNode(P.substring(0,Q)),J=P.substring(Q),""!==J&&(N=G.createTextNode(P.substring(Q))),R=G.createElement("span"),y=G.createTextNode("."),
R.appendChild(y),K.length?c.place(K,S,"after"):K=S,c.place(R,K,"after"),N&&c.place(N,R,"after"),c.destroy(S),N=E.create(this.window),N.setStart(y,0),N.setEnd(y,y.length),p.removeAllRanges(),p.addRange(N),G.execCommand(h),c.place(R.firstChild,R,"before"),c.destroy(R),N.setStart(y,0),N.setEnd(y,y.length),p.removeAllRanges(),p.addRange(N),this.selection.collapse(!1),y.parentNode.innerHTML="",!0}else return!1},_adaptIEList:function(h){var p=E.getSelection(this.window);if(p.isCollapsed&&p.rangeCount&&
!this.queryCommandValue(h)){var G=p.getRangeAt(0),N=G.startContainer;if(N&&3==N.nodeType&&!G.startOffset)return G="ul","insertorderedlist"===h&&(G="ol"),h=this.document.createElement(G),G=c.create("li",null,h),c.place(h,N,"before"),G.appendChild(N),c.create("br",null,h,"after"),h=E.create(this.window),h.setStart(N,0),h.setEnd(N,N.length),p.removeAllRanges(),p.addRange(h),this.selection.collapse(!0),!0}return!1},_handleTextColorOrProperties:function(h,p){var G=E.getSelection(this.window),N=this.document,
K,P;p=p||null;if(h&&G&&G.isCollapsed&&G.rangeCount){var Q=G.getRangeAt(0);if((K=Q.startContainer)&&3===K.nodeType){var S=Q.startOffset;K.length<S&&(Q=this._adjustNodeAndOffset(K,S),K=Q.node,S=Q.offset);var y=K.nodeValue;Q=N.createTextNode(y.substring(0,S));""!==y.substring(S)&&(P=N.createTextNode(y.substring(S)));y=N.createElement("span");S=N.createTextNode(".");y.appendChild(S);N=N.createElement("span");y.appendChild(N);Q.length?c.place(Q,K,"after"):Q=K;c.place(y,Q,"after");P&&c.place(P,y,"after");
c.destroy(K);K=E.create(this.window);K.setStart(S,0);K.setEnd(S,S.length);G.removeAllRanges();G.addRange(K);if(n("webkit")){G="color";if("hilitecolor"===h||"backcolor"===h)G="backgroundColor";g.set(y,G,p);this.selection.remove();c.destroy(N);y.innerHTML="\x26#160;";this.selection.selectElement(y);this.focus()}else this.execCommand(h,p),c.place(y.firstChild,y,"before"),c.destroy(y),K.setStart(S,0),K.setEnd(S,S.length),G.removeAllRanges(),G.addRange(K),this.selection.collapse(!1),S.parentNode.removeChild(S);
return!0}}return!1},_adjustNodeAndOffset:function(h,p){for(;h.length<p&&h.nextSibling&&3===h.nextSibling.nodeType;)p-=h.length,h=h.nextSibling;return{node:h,offset:p}},_tagNamesForCommand:function(h){return"bold"===h?["b","strong"]:"italic"===h?["i","em"]:"strikethrough"===h?["s","strike"]:"superscript"===h?["sup"]:"subscript"===h?["sub"]:"underline"===h?["u"]:[]},_stripBreakerNodes:function(h){if(this.isLoaded)return v(".ieFormatBreakerSpan",h).forEach(function(p){for(;p.firstChild;)c.place(p.firstChild,
p,"before");c.destroy(p)}),h},_stripTrailingEmptyNodes:function(h){function p(G){return/^(p|div|br)$/i.test(G.nodeName)&&0==G.children.length&&/^[\s\xA0]*$/.test(G.textContent||G.innerText||"")||3===G.nodeType&&/^[\s\xA0]*$/.test(G.nodeValue)}for(;h.lastChild&&p(h.lastChild);)c.destroy(h.lastChild);return h},_setTextDirAttr:function(h){this._set("textDir",h);this.onLoadDeferred.then(t.hitch(this,function(){this.editNode.dir=h}))}});return O})},"dijit/_editor/range":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/lang"],function(u,B,H){var D={getIndex:function(d,c){for(var b=[],g=[],m=d,l,t;d!=c;){var A=0;for(l=d.parentNode;t=l.childNodes[A++];)if(t===d){--A;break}b.unshift(A);g.unshift(A-l.childNodes.length);d=l}if(0<b.length&&3==m.nodeType){for(t=m.previousSibling;t&&3==t.nodeType;)b[b.length-1]--,t=t.previousSibling;for(t=m.nextSibling;t&&3==t.nodeType;)g[g.length-1]++,t=t.nextSibling}return{o:b,r:g}},getNode:function(d,c){if(!H.isArray(d)||0==d.length)return c;var b=c;
u.every(d,function(g){if(0<=g&&g<b.childNodes.length)b=b.childNodes[g];else return b=null,!1;return!0});return b},getCommonAncestor:function(d,c,b){b=b||d.ownerDocument.body;var g=function(t){for(var A=[];t;)if(A.unshift(t),t!==b)t=t.parentNode;else break;return A};d=g(d);c=g(c);g=Math.min(d.length,c.length);for(var m=d[0],l=1;l<g;l++)if(d[l]===c[l])m=d[l];else break;return m},getAncestor:function(d,c,b){for(b=b||d.ownerDocument.body;d&&d!==b;){var g=d.nodeName.toUpperCase();if(c.test(g))return d;
d=d.parentNode}return null},BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,getBlockAncestor:function(d,c,b){b=b||d.ownerDocument.body;c=c||D.BlockTagNames;for(var g=null,m;d&&d!==b;){var l=d.nodeName.toUpperCase();!g&&c.test(l)&&(g=d);!m&&/^(?:BODY|TD|TH|CAPTION)$/.test(l)&&(m=d);d=d.parentNode}return{blockNode:g,blockContainer:m||d.ownerDocument.body}},atBeginningOfContainer:function(d,c,b){var g=!1,m=0==b;m||3!=c.nodeType||/^[\s\xA0]+$/.test(c.nodeValue.substr(0,b))&&(m=
!0);if(m)for(g=!0;c&&c!==d;){if(c.previousSibling){g=!1;break}c=c.parentNode}return g},atEndOfContainer:function(d,c,b){var g=!1,m=b==(c.length||c.childNodes.length);m||3!=c.nodeType||/^[\s\xA0]+$/.test(c.nodeValue.substr(b))&&(m=!0);if(m)for(g=!0;c&&c!==d;){if(c.nextSibling){g=!1;break}c=c.parentNode}return g},adjacentNoneTextNode:function(d,c){var b=d;d=0-d.length||0;for(c=c?"nextSibling":"previousSibling";b&&3==b.nodeType;)d+=b.length,b=b[c];return[b,d]},create:function(d){d=d||window;return d.getSelection?
d.document.createRange():new a},getSelection:function(d,c){if(d.getSelection)return d.getSelection();d=new z.selection(d);c||d._getCurrentSelection();return d}};if(!window.getSelection)var z=D.ie={cachedSelection:{},selection:function(d){this._ranges=[];this.addRange=function(c,b){this._ranges.push(c);b||c._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(c){return this._ranges[c]};this._getCurrentSelection=function(){this.removeAllRanges();
var c=d.document.selection.createRange();c="CONTROL"==d.document.selection.type.toUpperCase()?new a(z.decomposeControlRange(c)):new a(z.decomposeTextRange(c));this.addRange(c,!0),this.isCollapsed=c.collapsed}},decomposeControlRange:function(d){var c=d.item(0),b=d.item(d.length-1);d=c.parentNode;var g=b.parentNode;c=D.getIndex(c,d).o[0];b=D.getIndex(b,g).o[0]+1;return[d,c,g,b]},getEndPoint:function(d,c){var b=d.duplicate();b.collapse(!c);var g="EndTo"+(c?"End":"Start"),m=b.parentElement(),l;if(0<m.childNodes.length)u.every(m.childNodes,
function(v,e){if(3!=v.nodeType)if(b.moveToElementText(v),0<b.compareEndPoints(g,d))if(l&&3==l.nodeType){t=l;var n=!0}else return t=m,A=e,!1;else{if(e==m.childNodes.length-1)return t=m,A=m.childNodes.length,!1}else e==m.childNodes.length-1&&(t=v,n=!0);if(n&&t)return t=(v=D.adjacentNoneTextNode(t)[0])?v.nextSibling:m.firstChild,e=D.adjacentNoneTextNode(t),v=e[0],e=e[1],v?(b.moveToElementText(v),b.collapse(!1)):b.moveToElementText(m),b.setEndPoint(g,d),A=b.text.length-e,!1;l=v;return!0});else{var t=
m;var A=0}c||1!=t.nodeType||A!=t.childNodes.length||(c=t.nextSibling)&&3==c.nodeType&&(t=c,A=0);return[t,A]},setEndPoint:function(d,c,b){d=d.duplicate();var g;if(3!=c.nodeType)if(0<b){if(g=c.childNodes[b-1])if(3==g.nodeType)c=g,b=g.length;else if(g.nextSibling&&3==g.nextSibling.nodeType)c=g.nextSibling,b=0;else{d.moveToElementText(g.nextSibling?g:c);var m=g.parentNode;g=m.insertBefore(g.ownerDocument.createTextNode(" "),g.nextSibling);d.collapse(!1);m.removeChild(g)}}else d.moveToElementText(c),d.collapse(!0);
3==c.nodeType&&(g=D.adjacentNoneTextNode(c),m=g[0],g=g[1],m?(d.moveToElementText(m),d.collapse(!1),"inherit"!=m.contentEditable&&g++):(d.moveToElementText(c.parentNode),d.collapse(!0),d.move("character",1),d.move("character",-1)),b+=g,0<b&&d.move("character",b)!=b&&console.error("Error when moving!"));return d},decomposeTextRange:function(d){var c=z.getEndPoint(d),b=c[0],g=c[1],m=c[0];c=c[1];d.htmlText.length&&(d.htmlText==d.text?c=g+d.text.length:(c=z.getEndPoint(d,!0),m=c[0],c=c[1]));return[b,g,
m,c]},setRange:function(d,c,b,g,m,l){c=z.setEndPoint(d,c,b);d.setEndPoint("StartToStart",c);if(!l)var t=z.setEndPoint(d,g,m);d.setEndPoint("EndToEnd",t||c);return d}},a=D.W3CRange=B(null,{constructor:function(){0<arguments.length?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.startContainer=this.commonAncestorContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.commonAncestorContainer=
this.startContainer!==this.endContainer?D.getCommonAncestor(this.startContainer,this.endContainer):this.startContainer;this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(d,c){c=parseInt(c);if(this.startContainer!==d||this.startOffset!=c)delete this._cachedBookmark,this.startContainer=d,this.startOffset=c,this.endContainer?this._updateInternal():this.setEnd(d,c)},setEnd:function(d,c){c=parseInt(c);if(this.endContainer!==d||this.endOffset!=c)delete this._cachedBookmark,
this.endContainer=d,this.endOffset=c,this.startContainer?this._updateInternal():this.setStart(d,c)},setStartAfter:function(d,c){this._setPoint("setStart",d,c,1)},setStartBefore:function(d,c){this._setPoint("setStart",d,c,0)},setEndAfter:function(d,c){this._setPoint("setEnd",d,c,1)},setEndBefore:function(d,c){this._setPoint("setEnd",d,c,0)},_setPoint:function(d,c,b,g){b=D.getIndex(c,c.parentNode).o;this[d](c.parentNode,b.pop()+g)},_getIERange:function(){var d=(this._body||this.endContainer.ownerDocument.body).createTextRange();
z.setRange(d,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return d},getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){var d=this.startContainer,c=this._getIERange();3!==d.nodeType||this.startOffset||this.setStartBefore(d);c.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=!0},cloneRange:function(){var d=new a([this.startContainer,
this.startOffset,this.endContainer,this.endOffset]);d._body=this._body;return d},detach:function(){this.startContainer=this.commonAncestorContainer=this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=!0}});H.setObject("dijit.range",D);return D})},"dijit/_editor/html":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(u,B,H){var D={};B.setObject("dijit._editor.html",D);var z=D.escapeXml=function(a,d){a=a.replace(/&/gm,"\x26amp;").replace(/</gm,
"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");d||(a=a.replace(/'/gm,"\x26#39;"));return a};D.getNodeHtml=function(a){var d=[];D.getNodeHtmlHelper(a,d);return d.join("")};D.getNodeHtmlHelper=function(a,d){switch(a.nodeType){case 1:var c=a.nodeName.toLowerCase();if(!c||"/"==c.charAt(0))return"";d.push("\x3c",c);var b=[],g={},m;if(H("dom-attributes-explicit")||H("dom-attributes-specified-flag"))for(var l=0;m=a.attributes[l++];){var t=m.name;"_dj"===t.substr(0,3)||H("dom-attributes-specified-flag")&&
!m.specified||t in g||(m=m.value,("src"==t||"href"==t)&&a.getAttribute("_djrealurl")&&(m=a.getAttribute("_djrealurl")),8===H("ie")&&"style"===t&&(m=m.replace("HEIGHT:","height:").replace("WIDTH:","width:")),b.push([t,m]),g[t]=m)}else{var A=(/^input$|^img$/i.test(a.nodeName)?a:a.cloneNode(!1)).outerHTML;g=A.match(/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi);A=A.substr(0,A.indexOf("\x3e"));u.forEach(g,function(v){if(v){var e=v.indexOf("\x3d");if(0<e&&(v=v.substring(0,e),"_dj"!=v.substr(0,3)))if("src"!=v&&"href"!=
v||!a.getAttribute("_djrealurl")){switch(v){case "style":var n=a.style.cssText.toLowerCase();break;case "class":n=a.className;break;case "width":if("img"===c){(e=/width=(\S+)/i.exec(A))&&(n=e[1]);break}case "height":if("img"===c){(e=/height=(\S+)/i.exec(A))&&(n=e[1]);break}default:n=a.getAttribute(v)}null!=n&&b.push([v,n.toString()])}else b.push([v,a.getAttribute("_djrealurl")])}},this)}b.sort(function(v,e){return v[0]<e[0]?-1:v[0]==e[0]?0:1});for(g=0;m=b[g++];)d.push(" ",m[0],'\x3d"',"string"===
typeof m[1]?z(m[1],!0):m[1],'"');switch(c){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":d.push(" /\x3e");break;case "script":d.push("\x3e",a.innerHTML,"\x3c/",c,"\x3e");break;default:d.push("\x3e"),a.hasChildNodes()&&D.getChildrenHtmlHelper(a,d),d.push("\x3c/",c,"\x3e")}break;case 4:case 3:d.push(z(a.nodeValue,!0));break;case 8:d.push("\x3c!--",z(a.nodeValue,!0),"--\x3e");break;default:d.push("\x3c!-- Element not recognized - Type: ",a.nodeType," Name: ",
a.nodeName,"--\x3e")}};D.getChildrenHtml=function(a){var d=[];D.getChildrenHtmlHelper(a,d);return d.join("")};D.getChildrenHtmlHelper=function(a,d){if(a)for(var c=a.childNodes||a,b=!H("ie")||c!==a,g,m=0;g=c[m++];)b&&g.parentNode!=a||D.getNodeHtmlHelper(g,d)};return D})},"widgets/NearMe/setting/SymbolChooserPopup":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/text!./SymbolChooserPopup.html jimu/dijit/SymbolChooser jimu/dijit/Popup dijit/focus dojo/domReady!".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m){return u([B,H],{templateString:c,baseClass:"jimu-widget-nearme-setting",postCreate:function(){this.own(d(this.okButton,"click",D.hitch(this,this._onOKButtonClicked)));this._initSymbolChooser();this._createSymbolChooserPopup()},_initSymbolChooser:function(){this.symbolChooser=new b(this.symbolParams,a.create("div",{},this.symbolData));this.symbolChooser.startup()},_createSymbolChooserPopup:function(){this.popup=new g({titleLabel:this.symbolChooserTitle,width:420,height:400,
content:this.domNode})},_onOKButtonClicked:function(){if(!z.contains(this.okButton,"jimu-state-disabled"))if(this._validatePointSymbolSize())if(this._validatePointOutlineWidth())if(this._validateLineWidth())if(this._validatePolygonOutlineWidth())this.onOkClick();else m.focus(this.symbolChooser.fillOutlineWidth.focusNode);else m.focus(this.symbolChooser.lineWidth.focusNode);else m.focus(this.symbolChooser.pointOutlineWidth.focusNode);else m.focus(this.symbolChooser.pointSize.focusNode)},onOkClick:function(l){return l},
_validatePointSymbolSize:function(){return this.symbolChooser&&this.symbolChooser.hasOwnProperty("pointSize")?this.symbolChooser.pointSize.isValid():!0},_validatePolygonOutlineWidth:function(){return this.symbolChooser&&this.symbolChooser.hasOwnProperty("fillOutlineWidth")?this.symbolChooser.fillOutlineWidth.isValid():!0},_validatePointOutlineWidth:function(){return this.symbolChooser&&this.symbolChooser.hasOwnProperty("pointOutlineWidth")?this.symbolChooser.pointOutlineWidth.isValid():!0},_validateLineWidth:function(){if(this.symbolChooser&&
this.symbolChooser.hasOwnProperty("lineWidth"))if(this.symbolChooser.lineWidth.isValid()){var l=this.symbolChooser.lineWidth.getValue();if(""===l||null===l||void 0===l||isNaN(l))return this.symbolChooser.lineWidth.setValue("0"),!1}else return!1;return!0}})})},"widgets/NearMe/setting/NetworkServiceChooser":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/on dojo/dom-class dojo/text!./NetworkServiceChooser.html jimu/dijit/ItemSelector dijit/Tree dojo/query esri/request dojo/store/Memory dojo/dom-construct dijit/tree/ObjectStoreModel jimu/dijit/LoadingIndicator dojox/validate/regexp jimu/dijit/Message dojo/domReady!".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v,e,n){return u([B,H],{baseClass:"jimu-widget-nearme-setting",templateString:d,selectRouteURL:null,agolFlag:!1,serviceFlag:!1,startup:function(){this.inherited(arguments)},postCreate:function(){this.routeChooser=new c({portalUrl:this.portalUrl,itemTypes:["Network analysis service"]});this.routeChooser.placeAt(this.itemSelectDiv);this.own(z(this.okButton,"click",D.hitch(this,function(F){if(!a.contains(this.okButton,"jimu-state-disabled"))this.onOkClick(F)})));this.own(z(this.cancelButton,
"click",D.hitch(this,function(F){this.onCancelClick(F)})));this.own(z(this.routeChooser,"item-selected",D.hitch(this,function(){a.remove(this.btnNext,"jimu-state-disabled")})));this.own(z(this.routeChooser,"none-item-selected",D.hitch(this,function(){a.add(this.btnNext,"jimu-state-disabled")})));this.own(z(this.serviceURL,"keyup",D.hitch(this,function(){""===D.trim(this.serviceURL.get("value"))?a.add(this.validateRouteURL,"jimu-state-disabled"):a.remove(this.validateRouteURL,"jimu-state-disabled")})));
this.own(z(this.validateRouteURL,"click",D.hitch(this,function(){a.contains(this.validateRouteURL,"jimu-state-disabled")||(this.serviceFlag=!0,this._fetchRouteLayer(this.routeLayerList))})));this.own(z(this.btnNext,"click",D.hitch(this,function(){a.contains(this.btnNext,"jimu-state-disabled")||(this.agolFlag=!0,this._fetchRouteLayer(this.agolRouteLayerList))})));var q=g(".routeSearchRadio",this.routeSearch);this.own(z(q,"change",D.hitch(this,function(){this.organizationRadio&&this.organizationRadio.get("checked")?
(a.add(this.serviceUrlDiv,"esriCTHidden"),this.agolFlag?(a.add(this.itemSelectDiv,"esriCTHidden"),a.remove(this.agolRouteLayerList,"esriCTHidden"),a.add(this.btnBack,"esriCTHidden")):(a.remove(this.itemSelectDiv,"esriCTHidden"),a.add(this.agolRouteLayerList,"esriCTHidden"),a.remove(this.btnNext,"esriCTHidden"),a.add(this.okButton,"jimu-state-disabled"))):(a.add(this.itemSelectDiv,"esriCTHidden"),a.remove(this.serviceUrlDiv,"esriCTHidden"),a.add(this.btnNext,"esriCTHidden"),a.add(this.btnBack,"esriCTHidden"),
a.add(this.agolRouteLayerList,"esriCTHidden"))})));this._initLoading()},_initLoading:function(){this.loading=new v({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()},onOkClick:function(q){return q},onCancelClick:function(q){return q},_fetchRouteLayer:function(q){var F=this._getValidRouteURL();this.loading.show();m({url:F,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(D.hitch(this,function(k){var f=!1;k.hasOwnProperty("routeLayers")&&null!==k.routeLayers&&
0<k.routeLayers.length&&(a.add(this.itemSelectDiv,"esriCTHidden"),this.serviceFlag?(a.remove(this.serviceUrlDiv,"esriCTHidden"),a.add(this.agolRouteLayerList,"esriCTHidden"),a.add(this.btnNext,"esriCTHidden"),a.add(this.btnBack,"esriCTHidden"),this.serviceFlag=!1):(a.add(this.serviceUrlDiv,"esriCTHidden"),a.remove(this.agolRouteLayerList,"esriCTHidden"),a.add(this.btnNext,"esriCTHidden"),a.remove(this.btnBack,"esriCTHidden"),this.agolFlag=!1),this._createTree(F,k.routeLayers,q),f=!0);f||(this._resetRouteSearch(q,
this.nls.networkServiceChooser.invalidRouteServiceURL),this.loading.hide())}),D.hitch(this,function(k){k&&"Rate limit exceeded. Please try again later."===k.message?this._resetRouteSearch(q,this.nls.networkServiceChooser.rateLimitExceeded):k&&"Error invoking service"===k.message?this._resetRouteSearch(q,this.nls.networkServiceChooser.errorInvokingService):this._resetRouteSearch(q,this.nls.networkServiceChooser.invalidRouteServiceURL);this.loading.hide()}))},_getValidRouteURL:function(){if(this.routeChooser&&
this.agolFlag){var q=this.routeChooser.getSelectedItem();var F=q.url}else F=this.serviceURL.value;var k=F.lastIndexOf("/");var f=F.substr(0,k+1);q=this._urlValidator(f);this.routeName="";q&&(this.routeName=F.substring(k+1,F.length+1),F=f);return F},_createTree:function(q,F,k){var f=this,w;t.empty(k);var C={data:[{id:1,name:"Route Layers",url:q,root:!0}],getChildren:function(L){return this.query({parent:L.id})}};if(this.routeName)for(w=0;w<F.length;w++)this.routeName===F[w]&&C.data.push({id:F[w],name:F[w],
url:q+F[w],parent:1});else for(w=0;w<F.length;w++)C.data.push({id:F[w],name:F[w],url:q+"/"+F[w],parent:1});q=new l(C);q=new A({store:q,query:{root:!0}});q=new b({model:q,onClick:function(L){1===L.id?a.add(f.okButton,"jimu-state-disabled"):(a.remove(f.okButton,"jimu-state-disabled"),f.selectRouteURL=L.url)},getIconStyle:D.hitch(this,function(L){if(!L||"root"===L.id)return null;var I={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""};I.backgroundImage=
"url("+this.folderUrl+"images/"+(1===L.id?"group-layer.png":"route-layer.png")+")";return I})});q.placeAt(k).startup();this.routeName&&1<C.data.length&&(q.set("paths",[["1",this.routeName]]),a.remove(this.okButton,"jimu-state-disabled"),this.selectRouteURL=C.data[1].url);this.loading.hide()},_resetRouteSearch:function(q,F){this._errorMessage(F);t.empty(q);this.loading.hide();this.serviceFlag=this.agolFlag=!1},_onBtnBackClicked:function(){a.remove(this.itemSelectDiv,"esriCTHidden");a.add(this.serviceUrlDiv,
"esriCTHidden");a.add(this.agolRouteLayerList,"esriCTHidden");a.remove(this.btnNext,"esriCTHidden");a.add(this.btnBack,"esriCTHidden")},_errorMessage:function(q){(new n({message:q})).message=q},_urlValidator:function(q){var F="^"+e.url({allowNamed:!0,allLocal:!1});F=(new RegExp(F,"g")).test(q);q=/\/Route\/NAServer/gi.test(q);return F&&q}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on dojo/dom-style jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable jimu/dijit/BindLabelPropsMixin dijit/form/RadioButton".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v,e,n,q,F,k,f,w,C,L,I){return u([H,D,z,I,d],{templateString:a,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,showMyContent:!0,showMyOrganization:!0,showMyGroups:!0,showPublic:!0,showOnlyEditableGroups:!1,postMixInProperties:function(){this.portalUrl=k.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";g.forEach(this.itemTypes,c.hitch(this,function(E,r){this._itemTypes+=
'"'+E+'"';r!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";g.forEach(this.typeKeywords,c.hitch(this,function(E,r){this._typeKeywords+='"'+E+'"';r!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var E=this._getPortalUrl();
this.portal=q.getPortal(E);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=n.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=n.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){var E={title:this.nls.myContent,content:this.mycontentTabNode},r={title:this.nls.myOrganization,content:this.organizationTabNode},
x={title:this.nls.myGroup,content:this.groupTabNode},M={title:this.nls.publicMap,content:this.publicTabNode};e.set(this.mycontentTabNode,"display","none");e.set(this.organizationTabNode,"display","none");e.set(this.groupTabNode,"display","none");e.set(this.publicTabNode,"display","none");var O=[];this.showMyContent&&(O.push(E),e.set(this.mycontentTabNode,"display","block"));this.showMyOrganization&&(O.push(r),e.set(this.organizationTabNode,"display","block"));this.showMyGroups&&(O.push(x),e.set(this.groupTabNode,
"display","block"));this.showPublic&&(O.push(M),e.set(this.publicTabNode,"display","block"));this.tab=new C({tabs:O},this.tabNode);this.own(v(this.tab,"tabChanged",c.hitch(this,function(h){m.setStyle(this.signinSection,"display","none");h!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){m.setStyle(this.signinSection,"display","none");var E=A(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",
this.domNode);F.userHaveSignInPortal(this._getPortalUrl())?E.style("display","block"):(E.style("display","none"),this._isPublicTabShow||m.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){var E=this._getPortalUrl();E=k.getServerByUrl(E);this.portalPublicRaido.set("disabled",!1);this.onlinePublicRaido.set("disabled",!1);this.portalPublicRaido.set("checked",!0);var r=!1;k.isArcGIScom(E)?(r=!0,this.portalPublicLabel.innerHTML="ArcGIS.com"):(this.portalPublicLabel.innerHTML=
E,r=this.showOnlineItems?!1:!0);r&&(this.onlinePublicRaido.set("disabled",!0),m.setStyle(this.onlinePublicRaido,"display","none"),m.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var E="esri_"+(b.locale&&b.locale.slice(0,2)||"en").toLowerCase(),r=g.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
c.hitch(this,function(M){return M!==E})),x="";g.forEach(r,c.hitch(this,function(M){x+=" -owner:"+M+" "}));r=" ";this.portal&&this.portal.user&&this.portal.user.orgId&&(r=" orgid:"+this.portal.user.orgId+" ");r=r+this._itemTypeQueryString+" AND access:public "+x+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:r});this._filterPublicPortalQuery=this._getQuery({q:r,basicQ:r});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(E){return c.mixin({start:1,num:16,f:"json"},E||{})},_getPortalUrl:function(){return k.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(v(this.publicPortalItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(v(this.publicOnlineItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(v(this.organizationItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(v(this.groupItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));
this.own(v(this.mycontentItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(v(this.publicPortalItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(v(this.publicOnlineItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(v(this.organizationItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(v(this.groupItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(v(this.mycontentItemTable,"update",c.hitch(this,this._onItemTableUpdate)));
var E=this._getPortalUrl();this.portalPublicRaido.get("disabled")||(this.publicPortalItemTable.set("portalUrl",E),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.get("disabled")||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",
this._filterPublicOnlineQuery))},_initPublic:function(){this.own(v(this.portalPublicRaido,"click",c.hitch(this,this._onPublicRaidoClicked)));this.own(v(this.onlinePublicRaido,"click",c.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.get("checked")?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.get("checked")&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},
_onPublicSearch:function(E){(E=E&&c.trim(E))?(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.get("checked")?(this._filterPublicPortalQuery.q=E+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.get("checked")&&(this._filterPublicOnlineQuery.q=E+" "+this._itemTypeQueryString+" AND access:public "+
this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(v(this.groupsSelect,"change",c.hitch(this,this._onGroupsSelectChange)));var E=k.getServerByUrl(this._getPortalUrl());k.isArcGIScom(E)&&(E="ArcGIS.com");F.userHaveSignInPortal(this._getPortalUrl())&&
this._onSignIn()},_onOrganizationSearch:function(E){if(E=E&&c.trim(E)){if(this._allOrganizationQuery){var r=this._allOrganizationQuery.q;r&&(this._filterOrganizationQuery.q=E+" "+r,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(E){if(E=E&&c.trim(E)){if(this._allMyContentQuery){var r=this._allMyContentQuery.q;r&&(this._filterMyContentQuery.q=E+" "+
r,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},_onGroupSearch:function(E){if(E=E&&c.trim(E)){if(this._allGroupQuery){var r=this._allGroupQuery.q;r&&(this._filterGroupQuery.q=E+" "+r,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=
!0;var E=this._getPortalUrl();q.getPortal(E).getUser().then(c.hitch(this,function(r){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(r),this._searchMyContent(r),this._searchGroups(r))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(E){this.organizationItemTable.clear();E=" orgid:"+E.orgId+
" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var r=this._getPortalUrl();this._allOrganizationQuery=this._getQuery({q:E});this._filterOrganizationQuery=this._getQuery({q:E});this.organizationItemTable.set("portalUrl",r);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(E){this.mycontentItemTable.clear();var r=this._getPortalUrl();E="owner:"+E.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;
this._allMyContentQuery=this._getQuery({q:E});this._filterMyContentQuery=this._getQuery({q:E});this.mycontentItemTable.set("portalUrl",r);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(E){this._resetGroupsSection();m.setStyle(this.groupsSection,"display","flex");E=E.getGroups();if(0<E.length){m.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();m.empty(this.groupsSelect);for(var r=0;r<E.length;r++){var x=E[r];m.create("option",
{value:x.id,innerHTML:x.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(E.length)},_resetGroupsSection:function(){m.setStyle(this.groupsSection,"display","none");m.empty(this.groupsSelect);m.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();m.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(E){0===E?m.setStyle(this.groupsSection,
"top","15px"):m.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var E=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===E)m.setStyle(this.groupSearch,"display","none"),this.groupItemTable.hide();else{m.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var r=this._getPortalUrl();E="group:"+E+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:E});this._filterGroupQuery=this._getQuery({q:E});
this.groupItemTable.set("portalUrl",r);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(E){var r=m.hasClass(E,"jimu-state-active");A(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");r&&m.addClass(E,"jimu-state-active");(E=this.getSelectedItem())?this.emit("item-selected",E):this.emit("none-item-selected")},getSelectedItem:function(){var E=null,r=A(".item.jimu-state-active",this.domNode);
0<r.length&&(E=c.mixin({},r[0].item));return E}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v,e){return u([B,H,D,a],{templateString:z,declaredClass:"jimu.dijit.ItemTable",
baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"desktopapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=v.getStandardPortalUrl(this.portalUrl));
this.showAllItemsSection();this.searchAllItems()},show:function(){b.setStyle(this.domNode,"display","block")},hide:function(){b.setStyle(this.domNode,"display","none")},searchAllItems:function(n){this.showAllItemsSection();n&&(this.query=d.mixin({},n),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),A.getPortal(this.portalUrl).queryItems(this.query).then(d.hitch(this,function(q){this.domNode&&(this.allItemsShelter.hide(),
this.query.start=q.nextStart,this._createItems(q,this.allItemTbody))}),d.hitch(this,function(q){console.error(q);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(n){this.showFilterItemsSection();n&&(this.filteredQuery=d.clone(n),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&(this.filteredItemShelter.show(),A.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(d.hitch(this,function(q){this.domNode&&
(this.showFilterItemsSection(),n&&this.clearFilteredItemsSection(),this.filteredQuery.start=q.nextStart,this._createItems(q,this.filteredItemsTbody),this._filterItemCallback())}),d.hitch(this,function(q){console.error(q);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?(b.setStyle(this.filteredItemsTableDiv,"display","block"),b.setStyle(this.searchNoneTipSection,"display","none")):(b.setStyle(this.filteredItemsTableDiv,
"display","none"),b.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){b.empty(this.allItemTbody)},clearFilteredItemsSection:function(){b.empty(this.filteredItemsTbody)},showAllItemsSection:function(){b.setStyle(this.allItemsSection,"display","block");b.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){b.setStyle(this.allItemsSection,"display","none");
b.setStyle(this.filteredItemsSection,"display","block");b.setStyle(this.filteredItemsTableDiv,"display","block");b.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&this.searchFilteredItems()},_isScrollToBottom:function(n){return t.isScrollToBottom(n)},_createItems:function(n,q){n=n.results;var F=
c.map(this.types,d.hitch(this,function(E){return E.toLowerCase()}));n=c.filter(n,d.hitch(this,function(E){E=E.type&&E.type.toLowerCase()||"";return 0<=c.indexOf(F,E)}));if(0!==n.length){var k=m("td.empty",q),f;if(0<k.length){var w=Math.min(n.length,k.length),C=n.splice(0,w);for(f=0;f<w;f++){var L=k[f];var I=this._createItem(C[f]);b.place(I,L);b.removeClass(L,"empty")}}if(0!==n.length){k=Math.ceil(n.length/2);for(f=0;f<k;f++)for(I=b.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e"),
b.place(I,q),w=m("td",I),C=0;C<w.length;C++)L=w[C],(I=n[2*f+C])?(I=this._createItem(I),b.place(I,L)):b.addClass(L,"empty");this.emit("update")}}},_getItemCount:function(n){return m(".item",n).length},_createItem:function(n){var q=b.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
q.item=n;var F=m(".item-thumbnail",q)[0],k=m(".item-name",q)[0],f=m(".item-type-owner",q)[0],w=m(".item-date",q)[0],C=m(".item-details",q)[0],L=m(".none-thumbnail-tip",q)[0];if(!n.thumbnailUrl){var I=this._defaultThumbnail[n.type];I&&(n.thumbnailUrl=require.toUrl("jimu")+"/images/"+I)}n.thumbnailUrl?b.setStyle(F,"backgroundImage","url("+n.thumbnailUrl+")"):L.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(w=m(".item-info",q)[0],this.onCreateItemContent(n,w)):(k.innerHTML=
n.title,k.title=k.innerHTML,f.innerHTML=n.type+" by "+n.owner,f.title=f.innerHTML,F=new Date,F.setTime(n.modified),w.innerHTML=F.toLocaleString(),w.title=w.innerHTML,C.innerHTML=this.nls.moreDetails,C.href=n.detailsPageUrl||"#");return q},_onItemsTableClicked:function(n){var q=n.target||n.srcElement;n=null;b.hasClass(q,"item-thumbnail")?n=q.parentNode:b.hasClass(q,"none-thumbnail-tip")&&(n=q.parentNode.parentNode);n&&(q=b.hasClass(n,"jimu-state-active"),m(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
q?b.removeClass(n,"jimu-state-active"):b.addClass(n,"jimu-state-active"),this.emit("item-dom-clicked",n))},getSelectedItem:function(){var n=null,q=m(".item.jimu-state-active",this.domNode);0<q.length&&(n=d.mixin({},q[0].item));return n}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v,e,n,q,F,k,f,w,C,L,I,E,r,x,M,O,h,p,G,N,K){function P(y){return e.delegate(y.promise||y,{addCallback:function(J){this.then(J)},addErrback:function(J){this.otherwise(J)}})}var Q=D("dijit._TreeNode",[I,E,r,x,M],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(y){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=y;this._set("label",y);t("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:h,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(y){var J=Math.max(y,0)*this.tree._nodePixelIndent+"px";g.set(this.domNode,
"backgroundPosition",J+" 0px");g.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",J);u.forEach(this.getChildren(),function(R){R.set("indent",y+1)});this._set("indent",y)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(y){var J=this.tree,R=J.model;J._v10Compat&&y===R.root&&(y=null);this._applyClassAndStyle(y,"icon","Icon");this._applyClassAndStyle(y,"label","Label");this._applyClassAndStyle(y,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(y,J,R){var T="_"+J+"Class";J+="Node";var U=this[T];this[T]=this.tree["get"+R+"Class"](y,this.isExpanded);c.replace(this[J],this[T]||"",U||"");g.set(this[J],this.tree["get"+R+"Style"](y,this.isExpanded)||{})},_updateLayout:function(){var y=this.getParent();y=!y||!y.rowNode||"none"==y.rowNode.style.display;c.toggle(this.domNode,"dijitTreeIsRoot",y);c.toggle(this.domNode,"dijitTreeIsLast",!y&&!this.getNextSibling())},_setExpando:function(y){var J=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];y=y?0:this.isExpandable?this.isExpanded?1:2:3;c.replace(this.expandoNode,J[y],J);this.expandoNodeText.innerHTML=["*","-","+","*"][y]},expand:function(){if(this._expandDeferred)return P(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");c.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var y=l.wipeIn({node:this.containerNode,duration:L.defaultDuration}),J=this._expandDeferred=new z(function(){y.stop()});B.after(y,"onEnd",function(){J.resolve(!0)},!0);y.play();return P(J)},collapse:function(){if(this._collapseDeferred)return P(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");c.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var y=l.wipeOut({node:this.containerNode,duration:L.defaultDuration}),J=this._collapseDeferred=new z(function(){y.stop()});B.after(y,"onEnd",
function(){J.resolve(!0)},!0);y.play();return P(J)},indent:0,setChildItems:function(y){var J=this.tree,R=J.model,T=[],U=J.focusedChild,Z=this.getChildren();u.forEach(Z,function(V){r.prototype.removeChild.call(this,V)},this);this.defer(function(){u.forEach(Z,function(V){if(!V._destroyed&&!V.getParent()){J.dndController.removeTreeNode(V);(function da(W){var aa=R.getIdentity(W.item),ca=J._itemNodesMap[aa];1==ca.length?delete J._itemNodesMap[aa]:(aa=u.indexOf(ca,W),-1!=aa&&ca.splice(aa,1));u.forEach(W.getChildren(),
da)})(V);if(J.persist){var Y=u.map(V.getTreePath(),function(W){return J.model.getIdentity(W)}).join("/"),X;for(X in J._openedNodes)X.substr(0,Y.length)==Y&&delete J._openedNodes[X];J._saveExpandedNodes()}J.lastFocusedChild&&!d.isDescendant(J.lastFocusedChild.domNode,J.domNode)&&delete J.lastFocusedChild;U&&!d.isDescendant(U.domNode,J.domNode)&&J.focus();V.destroyRecursive()}})});this.state="Loaded";y&&0<y.length?(this.isExpandable=!0,u.forEach(y,function(V){var Y=R.getIdentity(V),X=J._itemNodesMap[Y];
if(X)for(var ba=0;ba<X.length;ba++)if(X[ba]&&!X[ba].getParent()){var W=X[ba];W.set("indent",this.indent+1);break}W||(W=this.tree._createTreeNode({item:V,tree:J,isExpandable:R.mayHaveChildren(V),label:J.getLabel(V),labelType:J.model&&J.model.labelType||"text",tooltip:J.getTooltip(V),ownerDocument:J.ownerDocument,dir:J.dir,lang:J.lang,textDir:J.textDir,indent:this.indent+1}),X?X.push(W):J._itemNodesMap[Y]=[W]);this.addChild(W);(this.tree.autoExpand||this.tree._state(W))&&T.push(J._expandNode(W))},this),
u.forEach(this.getChildren(),function(V){V._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);y=a(T);this.tree._startPaint(y);return P(y)},getTreePath:function(){for(var y=this,J=[];y&&y!==this.tree.rootNode;)J.unshift(y.item),y=y.getParent();J.unshift(this.tree.rootNode.item);return J},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(y){this.inherited(arguments);var J=this.getChildren();0==J.length&&
(this.isExpandable=!1,this.collapse());u.forEach(J,function(R){R._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(y){this.labelNode.setAttribute("aria-selected",y?"true":"false");c.toggle(this.rowNode,"dijitTreeRowSelected",y)},focus:function(){w.focus(this.focusNode)}});t("dojo-bidi")&&Q.extend({_setTextDirAttr:function(y){!y||this.textDir==y&&this._created||(this._set("textDir",y),this.applyTextDir(this.labelNode),u.forEach(this.getChildren(),
function(J){J.set("textDir",y)},this))}});var S=D("dijit.Tree",[I,O,E,M],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:p,persist:!1,autoExpand:!1,dndController:K,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,
checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(y,J){q.publish(this.id,e.mixin({tree:this,event:y},J||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new z;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var y=
this;this.own(n(this.containerNode,n.selector(".dijitTreeNode",F.enter),function(T){y._onNodeMouseEnter(C.byNode(this),T)}),n(this.containerNode,n.selector(".dijitTreeNode",F.leave),function(T){y._onNodeMouseLeave(C.byNode(this),T)}),n(this.containerNode,n.selector(".dijitTreeRow",f.press),function(T){y._onNodePress(C.getEnclosingWidget(this),T)}),n(this.containerNode,n.selector(".dijitTreeRow",f),function(T){y._onClick(C.getEnclosingWidget(this),T)}),n(this.containerNode,n.selector(".dijitTreeRow",
"dblclick"),function(T){y._onDblClick(C.getEnclosingWidget(this),T)}));this.model||this._store2model();this.own(B.after(this.model,"onChange",e.hitch(this,"_onItemChange"),!0),B.after(this.model,"onChildrenChange",e.hitch(this,"_onItemChildrenChange"),!0),B.after(this.model,"onDelete",e.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){e.isString(this.dndController)&&(this.dndController=e.getObject(this.dndController));for(var J={},R=0;R<this.dndParams.length;R++)this[this.dndParams[R]]&&
(J[this.dndParams[R]]=this[this.dndParams[R]]);this.dndController=new this.dndController(this,J)}this._load();this.onLoadDeferred=P(this.pendingCommandsPromise);this.onLoadDeferred.then(e.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;A.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var y={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(y.mayHaveChildren=
e.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&(y.getChildren=e.hitch(this,function(J,R,T){this.getItemChildren(this._v10Compat&&J===this.model.root?null:J,R,T)}));this.model=new N(y);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(e.hitch(this,function(y){var J=this.rootNode=this.tree._createTreeNode({item:y,tree:this,isExpandable:!0,label:this.label||this.getLabel(y),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?
0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(J.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(J.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(J.containerNode.setAttribute("aria-labelledby",
this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),J.labelNode.setAttribute("role","presentation"),J.labelNode.removeAttribute("aria-selected"),J.containerNode.setAttribute("role","tree"),J.containerNode.setAttribute("aria-expanded","true"),J.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(J.domNode);y=this.model.getIdentity(y);this._itemNodesMap[y]?this._itemNodesMap[y].push(J):this._itemNodesMap[y]=[J];J._updateLayout();
this._expandNode(J).then(e.hitch(this,function(){this._destroyed||(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),e.hitch(this,function(y){console.error(this,": error loading root: ",y)}))},getNodesByItem:function(y){if(!y)return[];y=e.isString(y)?y:this.model.getIdentity(y);return[].concat(this._itemNodesMap[y])},_setSelectedItemAttr:function(y){this.set("selectedItems",[y])},_setSelectedItemsAttr:function(y){var J=this;return this.pendingCommandsPromise=
this.pendingCommandsPromise.always(e.hitch(this,function(){var R=u.map(y,function(U){return!U||e.isString(U)?U:J.model.getIdentity(U)}),T=[];u.forEach(R,function(U){T=T.concat(J._itemNodesMap[U]||[])});this.set("selectedNodes",T)}))},_setPathAttr:function(y){return y.length?P(this.set("paths",[y]).then(function(J){return J[0]})):P(this.set("paths",[]).then(function(J){return J[0]}))},_setPathsAttr:function(y){function J(T,U){var Z=T.shift(),V=u.filter(U,function(Y){return Y.getIdentity()==Z})[0];
if(V)return T.length?R._expandNode(V).then(function(){return J(T,V.getChildren())}):V;throw new S.PathError("Could not expand path at "+Z);}var R=this;return P(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return a(u.map(y,function(T){T=u.map(T,function(U){return U&&e.isObject(U)?R.model.getIdentity(U):U});if(T.length)return J(T,[R.rootNode]);throw new S.PathError("Empty path");}))}).then(function(T){R.set("selectedNodes",T);return R.paths}))},_setSelectedNodeAttr:function(y){this.set("selectedNodes",
[y])},_setSelectedNodesAttr:function(y){this.dndController.setSelection(y)},expandAll:function(){function y(R){return J._expandNode(R).then(function(){var T=u.filter(R.getChildren()||[],function(U){return U.isExpandable});return a(u.map(T,y))})}var J=this;return P(y(this.rootNode))},collapseAll:function(){function y(R){var T=u.filter(R.getChildren()||[],function(U){return U.isExpandable});T=a(u.map(T,y));return!R.isExpanded||R==J.rootNode&&!J.showRoot?T:T.then(function(){return J._collapseNode(R)})}
var J=this;return P(y(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(y){return this.model.getLabel(y)},getIconClass:function(y,J){return!y||this.model.mayHaveChildren(y)?J?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(y,J){(y=this._getNext(J))&&y.isTreeNode&&this.focusNode(y)},
_onUpArrow:function(y,J){if(y=J.getPreviousSibling())for(J=y;J.isExpandable&&J.isExpanded&&J.hasChildren();)J=J.getChildren(),J=J[J.length-1];else if(y=J.getParent(),this.showRoot||y!==this.rootNode)J=y;J&&J.isTreeNode&&this.focusNode(J)},_onRightArrow:function(y,J){J.isExpandable&&!J.isExpanded?this._expandNode(J):J.hasChildren()&&(J=J.getChildren()[0])&&J.isTreeNode&&this.focusNode(J)},_onLeftArrow:function(y,J){J.isExpandable&&J.isExpanded?this._collapseNode(J):(y=J.getParent())&&y.isTreeNode&&
(this.showRoot||y!==this.rootNode)&&this.focusNode(y)},focusLastChild:function(){var y=this._getLast();y&&y.isTreeNode&&this.focusNode(y)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var y=this.rootNode;y.isExpanded;){var J=y.getChildren();if(!J.length)break;y=J[J.length-1]}return y},_getNext:function(y){if(y.isExpandable&&y.isExpanded&&y.hasChildren())return y.getChildren()[0];for(;y&&y.isTreeNode;){var J=y.getNextSibling();if(J)return J;
y=y.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(y,J){return d.isDescendant(y,J.expandoNode)||d.isDescendant(y,J.expandoNodeText)},_onNodePress:function(y,J){this.focusNode(y)},__click:function(y,J,R,T){var U=this.isExpandoNode(J.target,y);y.isExpandable&&(R||U)?this._onExpandoClick({node:y}):(this._publish("execute",{item:y.item,node:y,evt:J}),this[T](y.item,y,J),this.focusNode(y));J.stopPropagation();J.preventDefault()},_onClick:function(y,J){this.__click(y,J,this.openOnClick,
"onClick")},_onDblClick:function(y,J){this.__click(y,J,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(y){y=y.node;this.focusNode(y);y.isExpanded?this._collapseNode(y):this._expandNode(y)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(y){A.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(y)},_getRootOrFirstNode:function(){A.deprecated(this.declaredClass+
"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(y){y._expandNodeDeferred&&delete y._expandNodeDeferred;if("Loading"!=y.state&&y.isExpanded){var J=y.collapse();this.onClose(y.item,y);this._state(y,!1);this._startPaint(J);return J}},_expandNode:function(y){if(y._expandNodeDeferred)return y._expandNodeDeferred;var J=this.model,R=y.item,T=this;y._loadDeferred||(y.markProcessing(),y._loadDeferred=new z,J.getChildren(R,function(U){y.unmarkProcessing();
y.setChildItems(U).then(function(){y._loadDeferred.resolve(U)})},function(U){console.error(T,": error loading "+y.label+" children: ",U);y._loadDeferred.reject(U)}));J=y._loadDeferred.then(e.hitch(this,function(){var U=y.expand();this.onOpen(y.item,y);this._state(y,!0);return U}));this._startPaint(J);return J},focusNode:function(y){for(var J=[],R=this.domNode;R&&R.tagName&&"IFRAME"!==R.tagName.toUpperCase();R=R.parentNode)J.push({domNode:R.contentWindow||R,scrollLeft:R.scrollLeft||0,scrollTop:R.scrollTop||
0});this.focusChild(y);this.defer(function(){for(var T=0,U=J.length;T<U;T++)J[T].domNode.scrollLeft=J[T].scrollLeft,J[T].domNode.scrollTop=J[T].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(y){var J=this.model.getIdentity(y);if(J=this._itemNodesMap[J]){var R=this.getLabel(y),T=this.getTooltip(y);u.forEach(J,function(U){U.set({item:y,label:R,tooltip:T});U._updateItemClasses(y)})}},_onItemChildrenChange:function(y,J){y=this.model.getIdentity(y);
(y=this._itemNodesMap[y])&&u.forEach(y,function(R){R.setChildItems(J)})},_onItemDelete:function(y){y=this.model.getIdentity(y);var J=this._itemNodesMap[y];J&&(u.forEach(J,function(R){this.dndController.removeTreeNode(R);var T=R.getParent();T&&T.removeChild(R);this.lastFocusedChild&&!d.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!d.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();R.destroyRecursive()},this),delete this._itemNodesMap[y])},
_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var y=H(this.cookieName);y&&u.forEach(y.split(","),function(J){this._openedNodes[J]=!0},this)}},_state:function(y,J){if(!this.persist)return!1;var R=u.map(y.getTreePath(),function(T){return this.model.getIdentity(T)},this).join("/");if(1===arguments.length)return this._openedNodes[R];J?this._openedNodes[R]=!0:delete this._openedNodes[R];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var y=
[],J;for(J in this._openedNodes)y.push(J);H(this.cookieName,y.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!e.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(y){y&&b.setMarginBox(this.domNode,y);this._nodePixelIndent=b.position(this.tree.indentDetector).w||
this._nodePixelIndent;this.expandChildrenDeferred.then(e.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(y){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var J=e.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});
k(y,J,J)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(y){return new Q(y)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});t("dojo-bidi")&&S.extend({_setTextDirAttr:function(y){y&&this.textDir!=y&&(this._set("textDir",
y),this.rootNode.set("textDir",y))}});S.PathError=m("TreePathError");S._TreeNode=Q;return S})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(u,B,H,D){return H("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(z){D.mixin(this,z);this.connects=[];z=this.store;if(!z.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");
z.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([B.after(z,"onNew",D.hitch(this,"onNewItem"),!0),B.after(z,"onDelete",D.hitch(this,"onDeleteItem"),!0),B.after(z,"onSet",D.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var z;z=this.connects.pop();)z.remove()},getRoot:function(z,a){this.root?z(this.root):this.store.fetch({query:this.query,onComplete:D.hitch(this,function(d){if(1!=d.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+d.length+
" items, but must return exactly one");this.root=d[0];z(this.root)}),onError:a})},mayHaveChildren:function(z){return u.some(this.childrenAttrs,function(a){return this.store.hasAttribute(z,a)},this)},getChildren:function(z,a,d){var c=this.store;if(c.isItemLoaded(z)){for(var b=[],g=0;g<this.childrenAttrs.length;g++){var m=c.getValues(z,this.childrenAttrs[g]);b=b.concat(m)}var l=0;this.deferItemLoadingUntilExpand||u.forEach(b,function(A){c.isItemLoaded(A)||l++});0==l?a(b):u.forEach(b,function(A,v){c.isItemLoaded(A)||
c.loadItem({item:A,onItem:function(e){b[v]=e;0==--l&&a(b)},onError:d})})}else{var t=D.hitch(this,arguments.callee);c.loadItem({item:z,onItem:function(A){t(A,a,d)},onError:d})}},isItem:function(z){return this.store.isItem(z)},fetchItemByIdentity:function(z){this.store.fetchItemByIdentity(z)},getIdentity:function(z){return this.store.getIdentity(z)},getLabel:function(z){return this.labelAttr?this.store.getValue(z,this.labelAttr):this.store.getLabel(z)},newItem:function(z,a,d){var c={parent:a,attribute:this.childrenAttrs[0]},
b;this.newItemIdAttr&&z[this.newItemIdAttr]?this.fetchItemByIdentity({identity:z[this.newItemIdAttr],scope:this,onItem:function(g){g?this.pasteItem(g,null,a,!0,d):(b=this.store.newItem(z,c))&&void 0!=d&&this.pasteItem(b,a,a,!1,d)}}):(b=this.store.newItem(z,c))&&void 0!=d&&this.pasteItem(b,a,a,!1,d)},pasteItem:function(z,a,d,c,b){var g=this.store,m=this.childrenAttrs[0];a&&u.forEach(this.childrenAttrs,function(t){if(g.containsValue(a,t,z)){if(!c){var A=u.filter(g.getValues(a,t),function(v){return v!=
z});g.setValues(a,t,A)}m=t}});if(d)if("number"==typeof b){var l=g.getValues(d,m).slice();l.splice(b,0,z);g.setValues(d,m,l)}else g.setValues(d,m,g.getValues(d,m).concat(z))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(z,a){a&&this.getChildren(a.item,D.hitch(this,function(d){this.onChildrenChange(a.item,d)}))},onDeleteItem:function(z){this.onDelete(z)},onSetItem:function(z,a){if(-1!=u.indexOf(this.childrenAttrs,a))this.getChildren(z,D.hitch(this,function(d){this.onChildrenChange(z,
d)}));else this.onChange(z)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(u,B,H,D,z){return B("dijit.tree.ForestStoreModel",z,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(a){this.root={store:this,root:!0,id:a.rootId,label:a.rootLabel,children:a.rootChildren}},mayHaveChildren:function(a){return a===this.root||this.inherited(arguments)},getChildren:function(a,d,c){a===
this.root?this.root.children?d(this.root.children):this.store.fetch({query:this.query,onComplete:D.hitch(this,function(b){this.root.children=b;d(b)}),onError:c}):this.inherited(arguments)},isItem:function(a){return a===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(a){if(a.identity==this.root.id){var d=a.scope||H.global;a.onItem&&a.onItem.call(d,this.root)}else this.inherited(arguments)},getIdentity:function(a){return a===this.root?this.root.id:this.inherited(arguments)},getLabel:function(a){return a===
this.root?this.root.label:this.inherited(arguments)},newItem:function(a,d,c){return d===this.root?(this.onNewRootItem(a),this.store.newItem(a)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(a,d,c,b,g){if(d===this.root&&!b)this.onLeaveRoot(a);this.inherited(arguments,[a,d===this.root?null:d,c===this.root?null:c,b,g]);if(c===this.root)this.onAddToRoot(a)},onAddToRoot:function(a){console.log(this,": item ",a," added to root")},onLeaveRoot:function(a){console.log(this,": item ",
a," removed from root")},_requeryTop:function(){var a=this.root.children||[];this.store.fetch({query:this.query,onComplete:D.hitch(this,function(d){this.root.children=d;if(a.length!=d.length||u.some(a,function(c,b){return d[b]!=c}))this.onChildrenChange(this.root,d)})})},onNewItem:function(a,d){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(a){-1!=u.indexOf(this.root.children,a)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(a,d,c,b){this._requeryTop();this.inherited(arguments)}})})},
"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(u,B,H,D,z,a,d,c,b,g,m){return B("dijit.tree._dndSelector",m,{constructor:function(){this.selection={};this.anchor=null;this.events.push(c(this.tree.domNode,b.press,D.hitch(this,"onMouseDown")),c(this.tree.domNode,b.release,D.hitch(this,"onMouseUp")),c(this.tree.domNode,b.move,D.hitch(this,
"onMouseMove")),c(this.tree.domNode,g.press,D.hitch(this,"onClickPress")),c(this.tree.domNode,g.release,D.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var l=[],t=this.selection,A;for(A in t)l.push(t[A]);return l},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(l,t){this.setSelection(this.getSelectedTreeNodes().concat([l]));t&&(this.anchor=l);return l},removeTreeNode:function(l){var t=
u.filter(this.getSelectedTreeNodes(),function(A){return!a.isDescendant(A.domNode,l.domNode)});this.setSelection(t);return l},isTreeNodeSelected:function(l){return l.id&&!!this.selection[l.id]},setSelection:function(l){var t=this.getSelectedTreeNodes();u.forEach(this._setDifference(t,l),D.hitch(this,function(A){A.setSelected(!1);this.anchor==A&&delete this.anchor;delete this.selection[A.id]}));u.forEach(this._setDifference(l,t),D.hitch(this,function(A){A.setSelected(!0);this.selection[A.id]=A}));this._updateSelectionProperties()},
_setDifference:function(l,t){u.forEach(t,function(A){A.__exclude__=!0});l=u.filter(l,function(A){return!A.__exclude__});u.forEach(t,function(A){delete A.__exclude__});return l},_updateSelectionProperties:function(){var l=this.getSelectedTreeNodes(),t=[],A=[];u.forEach(l,function(v){var e=v.getTreePath();A.push(v);t.push(e)},this);l=u.map(A,function(v){return v.item});this.tree._set("paths",t);this.tree._set("path",t[0]||[]);this.tree._set("selectedNodes",A);this.tree._set("selectedNode",A[0]||null);
this.tree._set("selectedItems",l);this.tree._set("selectedItem",l[0]||null)},onClickPress:function(l){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(l.target,this.current))){"mousedown"==l.type&&d.isLeft(l)&&l.preventDefault();var t="keydown"==l.type?this.tree.focusedChild:this.current;if(t){var A=z.getCopyKeyState(l),v=t.id;this.singular||l.shiftKey||!this.selection[v]?(this._doDeselect=!1,this.userSelect(t,A,l.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(l){this._doDeselect&&
(this._doDeselect=!1,this.userSelect("keyup"==l.type?this.tree.focusedChild:this.current,z.getCopyKeyState(l),l.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(l,t){if(l===t)return 0;if("sourceIndex"in document.documentElement)return l.sourceIndex-t.sourceIndex;if("compareDocumentPosition"in document.documentElement)return l.compareDocumentPosition(t)&2?1:-1;if(document.createRange){var A=doc.createRange();A.setStartBefore(l);
l=doc.createRange();l.setStartBefore(t);return A.compareBoundaryPoints(A.END_TO_END,l)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(l,t,A){if(this.singular)this.anchor==l&&t?this.selectNone():(this.setSelection([l]),this.anchor=l);else if(A&&this.anchor){t=this._compareNodes(this.anchor.rowNode,l.rowNode);A=this.anchor;0>t?t=A:(t=l,l=A);for(A=[];t!=l;)A.push(t),t=this.tree._getNext(t);A.push(l);this.setSelection(A)}else this.selection[l.id]&&
t?this.removeTreeNode(l):t?this.addTreeNode(l,!0):(this.setSelection([l]),this.anchor=l)},getItem:function(l){return{data:this.selection[l],type:["treeNode"]}},forInSelectedItems:function(l,t){t=t||H.global;for(var A in this.selection)l.call(t,this.getItem(A),A,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(u,B,H,D,z,a){return B("dijit.tree._dndContainer",null,{constructor:function(d,c){this.tree=
d;this.node=d.domNode;D.mixin(this,c);this.containerState="";H.add(this.node,"dojoDndContainer");this.events=[z(this.node,a.enter,D.hitch(this,"onOverEvent")),z(this.node,a.leave,D.hitch(this,"onOutEvent")),u.after(this.tree,"_onNodeMouseEnter",D.hitch(this,"onMouseOver"),!0),u.after(this.tree,"_onNodeMouseLeave",D.hitch(this,"onMouseOut"),!0),z(this.node,"dragstart, selectstart",function(b){b.preventDefault()})]},destroy:function(){for(var d;d=this.events.pop();)d.remove();this.node=this.parent=
null},onMouseOver:function(d){this.current=d},onMouseOut:function(){this.current=null},_changeState:function(d,c){var b="dojoDnd"+d;d=d.toLowerCase()+"State";H.replace(this.node,b+c,b+this[d]);this[d]=c},_addItemClass:function(d,c){H.add(d,"dojoDndItem"+c)},_removeItemClass:function(d,c){H.remove(d,"dojoDndItem"+c)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),
function(u,B,H,D,z,a,d){return H("dijit.tree.ObjectStoreModel",d,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(c){z.mixin(this,c);this.childrenCache={}},getRoot:function(c,b){if(this.root)c(this.root);else{var g=this.store.query(this.query);g.then&&this.own(g);a(g,z.hitch(this,function(m){if(1!=m.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+m.length+" items, but must return exactly one");this.root=m[0];c(this.root);g.observe&&g.observe(z.hitch(this,
function(l){this.onChange(l)}),!0)}),b)}},mayHaveChildren:function(){return!0},getChildren:function(c,b,g){var m=this.store.getIdentity(c);if(this.childrenCache[m])a(this.childrenCache[m],b,g);else{var l=this.childrenCache[m]=this.store.getChildren(c);l.then&&this.own(l);l.observe&&this.own(l.observe(z.hitch(this,function(t,A,v){this.onChange(t);A!=v&&a(l,z.hitch(this,"onChildrenChange",c))}),!0));a(l,b,g)}},isItem:function(){return!0},getIdentity:function(c){return this.store.getIdentity(c)},getLabel:function(c){return c[this.labelAttr]},
newItem:function(c,b,g,m){return this.store.put(c,{parent:b,before:m})},pasteItem:function(c,b,g,m,l,t){var A=new D;if(b===g&&!m&&!t)return A.resolve(!0),A;b&&!m?this.getChildren(b,z.hitch(this,function(v){v=[].concat(v);var e=u.indexOf(v,c);v.splice(e,1);this.onChildrenChange(b,v);A.resolve(this.store.put(c,{overwrite:!0,parent:g,oldParent:b,before:t,isCopy:!1}))})):A.resolve(this.store.put(c,{overwrite:!0,parent:g,oldParent:b,before:t,isCopy:!0}));return A},onChange:function(){},onChildrenChange:function(){},
onDelete:function(){}})})},"widgets/NearMe/setting/layerChooserPopup":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/text!./layerChooserPopup.html jimu/dijit/LayerChooserFromMap jimu/dijit/Popup dojo/dom-construct dojo/_base/array".split(" "),function(u,B,H,D,z,a,d,c,b){return u([B,H],{baseClass:"jimu-widget-nearme-setting",templateString:z,_layerChooserFromMap:null,popup:null,searchLayers:[],startup:function(){this.inherited(arguments)},
postCreate:function(){this.searchLayers=[];this._initLayerSelector();this._createLayerSelectorPopup();this._layerChooserFromMap.tree.expandAll().then(D.hitch(this,this._showSelectedLayer))},_showSelectedLayer:function(){if(this._layerChooserFromMap&&this.configuredSearchLayer){var g=[];b.forEach(this.configuredSearchLayer,D.hitch(this,function(l){g.push(l.id)}));var m=this._layerChooserFromMap.tree.getAllItems();b.forEach(m,D.hitch(this,function(l){"root"!==l.id&&-1<g.indexOf(l.layerInfo.id)&&this._layerChooserFromMap.tree.selectItem(l.id)}))}},
_initLayerSelector:function(){var g={multiple:!0,createMapResponse:this.map.webMapResponse,showLayerTypes:["FeatureLayer"],filter:this._createFiltersForLayerSelector()};this._layerChooserFromMap=new a(g);this._layerChooserFromMap.placeAt(this.layerSelectorNode);this._layerChooserFromMap.startup();this._layerChooserFromMap._onTreeClick=D.hitch(this,function(){this._layerChooserFromMap.getSelectedItems().length?this.popup.enableButton(0):this.popup.disableButton(0)})},_createFiltersForLayerSelector:function(){var g=
a.createFeaturelayerFilter(["point","polyline","polygon"],!1,!1);var m=a.createImageServiceLayerFilter(!0);return a.orCombineFilters([g,m])},_createLayerSelectorPopup:function(){this.okButton=c.create("button",{title:this.nls.common.ok});this.okButton.label=this.nls.common.ok;this.okButton.onClick=D.hitch(this,this._getSelectedSearchLayers);this.cancelButton=c.create("button",{title:this.nls.common.cancel});this.cancelButton.label=this.nls.common.cancel;this.popup=new d({titleLabel:this.nls.layerSelector.selectLayerLabel,
content:this.layerSelectorContainer,width:640,autoHeight:!0,buttons:[this.okButton,this.cancelButton]});this.popup.disableButton(0)},_getSelectedSearchLayers:function(){var g;this.searchLayers=[];var m=this._layerChooserFromMap.getSelectedItems();if(0<m.length)for(g=0;g<m.length;g++){var l={url:m[g].layerInfo.layerObject.url,geometryType:m[g].layerInfo.layerObject.geometryType,id:m[g].layerInfo.id};l.layerId=m[g].layerId?m[g].layerId:l.url.substr(l.url.lastIndexOf("/")+1,l.url.length);var t=l.url.substr(0,
l.url.lastIndexOf("/")+1);l.baseURL=t;this.searchLayers.push(l)}this.onOkClick()},onOkClick:function(g){return g}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v,e,n,q){var F=H([D,z,a,B],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,onlyFilterCurrentLayerWhenAddItem:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);t.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new q({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=l.hitch(this,this.basicFilter);
this.filter=F.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(k){var f=new c;this.onlyShowVisible?f.resolve(k.isShowInMap()):f.resolve(!0);return f},filter:function(k){k=new c;k.resolve(!0);return k},getSelectedItems:function(){var k=this.tree.getSelectedItems();return A.map(k,l.hitch(this,function(f){return this.getHandledItem(f)}))},getAllItems:function(){var k=this.tree.getAllItems(),f=[];A.forEach(k,
l.hitch(this,function(w){"root"!==w.id&&(w=this.getHandledItem(w),f.push(w))}));return f},getHandledItem:function(k){return{name:k.name,layerInfo:k.layerInfo}},_isLeafItem:function(k){return k.isLeaf},setCreateMapResponse:function(k){this.createMapResponse=k;n.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(l.hitch(this,function(f){this.layerInfosObj=f;this.own(u(this.layerInfosObj,"layerInfosChanged",l.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&
this.own(u(this.layerInfosObj,"layerInfosIsShowInMapChanged",l.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(k,f){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(k){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(k){this._clear();t.setStyle(this.errorTipSection,"display","block");var f=[];this.onlyShowWebMapLayers?(f=k.getLayerInfoArrayOfWebmap(),
f=f.concat(k.getTableInfoArrayOfWebmap())):(f=k.getLayerInfoArray(),f=f.concat(k.getTableInfoArray()));0!==f.length&&(t.setStyle(this.errorTipSection,"display","none"),A.forEach(f,l.hitch(this,function(w){this._addDirectLayerInfo(w)})))},_addDirectLayerInfo:function(k){k&&k.getLayerObject().then(l.hitch(this,function(){this._addItem("root",k)}),l.hitch(this,function(f){console.error(f)}))},_clear:function(){var k=this._store.query({parent:"root"});A.forEach(k,l.hitch(this,function(f){f&&"root"!==
f.id&&this._store.remove(f.id)}))},_addItem:function(k,f){var w=null,C=f.getLayerType(),L=this.filter(f);m({layerType:C,valid:L}).then(l.hitch(this,function(I){if(I.valid){var E=l.hitch(this,function(O,h){this._id++;w={name:f.title||"",parent:k,layerInfo:f,type:I.layerType,layerClass:f.layerObject.declaredClass,id:this._id.toString(),isLeaf:O,hasChildren:h};this._store.add(w)}),r=f.getSubLayers(),x=0===r.length,M=!0;this.onlyFilterCurrentLayerWhenAddItem?(x&&(M=!1),E(x,M)):x?E(x,!1):(r=A.map(r,l.hitch(this,
function(O){return this.filter(O)})),m(r).then(l.hitch(this,function(O){(O=A.some(O,function(h){return h}))&&E(x,O)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var k=this._getRootItem();k=new d({data:[k],getChildren:function(f){return this.query({parent:f.id})}});this._store=new b(k);k=new g({store:this._store,query:{id:"root"},mayHaveChildren:l.hitch(this,this._mayHaveChildren)});this.tree=new e({multiple:this.multiple,
model:k,showRoot:!1,isLeafItem:l.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:l.hitch(this,function(f,w){"root"!==f.id&&this._onTreeOpen(f,w)}),onClick:l.hitch(this,function(f,w,C){this._onTreeClick(f,w,C);this.emit("tree-click",f,w,C)}),getIconStyle:l.hitch(this,function(f,w){var C=null;if(!f||"root"===f.id)return null;var L={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},I=window.location.protocol+"//"+window.location.host+
require.toUrl("jimu");if(f=this._getIconInfo(f,w).imageName)L.backgroundImage="url("+I+"/css/images/"+f+")",C=L;return C}),getIconClass:l.hitch(this,function(f,w){return this._getIconInfo(f,w).className}),getTooltip:l.hitch(this,function(f){return this.displayTooltipForTreeNode?f.layerInfo.title:""})});t.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(k){return k.hasChildren},_getIconInfo:function(k,f){var w="",C="";"ArcGISDynamicMapServiceLayer"===
k.type||"ArcGISTiledMapServiceLayer"===k.type?f?(w="mapserver_open.png",C="mapservice-layer-icon open"):(w="mapserver_close.png",C="mapservice-layer-icon close"):"GroupLayer"===k.type?f?(w="group_layer2.png",C="group-layer-icon open"):(w="group_layer1.png",C="group-layer-icon close"):"FeatureLayer"===k.type?(k=v.getTypeByGeometryType(k.layerInfo.layerObject.geometryType),"point"===k?(w="point_layer1.png",C="point-layer-icon"):"polyline"===k?(w="line_layer1.png",C="line-layer-icon"):"polygon"===k&&
(w="polygon_layer1.png",C="polygon-layer-icon")):"Table"===k.type?(w="table.png",C="table-icon"):"ArcGISImageServiceLayer"===k.type||"ArcGISImageServiceVectorLayer"===k.type?(w="image_layer.png",C="iamge-layer-icon"):f?(w="mapserver_open.png",C="mapservice-layer-icon open"):(w="mapserver_close.png",C="mapservice-layer-icon close");return{imageName:w,className:C}},_onTreeOpen:function(k,f){if("root"!==k.id){var w=[];f=[];w=k.layerInfo.getSubLayers();k.checked||(this.shelter.show(),f=A.map(w,l.hitch(this,
function(C){return C.getLayerObject()})),m(f).then(l.hitch(this,function(){this.domNode&&(A.forEach(w,l.hitch(this,function(C){this._addItem(k.id,C)})),k.checked=!0,this.shelter.hide())}),l.hitch(this,function(C){console.error(C);this.shelter.hide()})))}},_onTreeClick:function(k,f,w){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});F.createFilterByLayerType=function(k){l.isArrayLike(k)||(k=[]);return function(f){var w=
new c;if(0===k.length)w.resolve(!0);else{var C=[];f.traversal(function(L){C.push(L.getLayerType())});m(C).then(function(L){for(var I=0;I<L.length;I++)for(var E=0;E<k.length;E++)if(L[I]===k[E]){w.resolve(!0);return}w.resolve(!1)},function(L){console.error(L);w.reject(L)})}return w}};F.createFeaturelayerFilter=function(k,f,w,C){var L=["point","polyline","polygon"];k&&0<k.length?(k=A.filter(k,function(I){return 0<=L.indexOf(I)}),0===k.length&&(k=L)):k=L;return function(I){var E=I.getLayerType();I=I.getLayerObject();
return m({layerType:E,layerObject:I}).then(function(r){var x=r.layerType;r=r.layerObject;if("ArcGISDynamicMapServiceLayer"===x||"ArcGISTiledMapServiceLayer"===x||"GroupLayer"===x||"FeatureCollection"===x)return!0;if("FeatureLayer"===x){x=v.getTypeByGeometryType(r.geometryType);x=0<=A.indexOf(k,x);var M=F._shouldPassStatisticsCheck(C,r);return r.url?(r=v.isFeaturelayerUrlSupportQuery(r.url,r.capabilities),x&&r&&M):f&&x}return"Table"===x?(x=v.isFeaturelayerUrlSupportQuery(r.url,r.capabilities),r=F._shouldPassStatisticsCheck(C,
r),w&&x&&r):!1})}};F.createImageServiceLayerFilter=function(k,f){return function(w){var C=w.getLayerType();w=w.getLayerObject();return m({layerType:C,layerObject:w}).then(function(L){var I=L.layerType,E=L.layerObject;return"ArcGISImageServiceLayer"===I||"ArcGISImageServiceVectorLayer"===I?k?v.isImageServiceSupportQuery(L.layerObject.capabilities)?f?F._shouldPassStatisticsCheck(f,E):!0:!1:!0:!1})}};F._shouldPassStatisticsCheck=function(k,f){return k?(k=!1,k=f.advancedQueryCapabilities?!!f.advancedQueryCapabilities.supportsStatistics:
!!f.supportsStatistics):!0};F.createQueryableLayerFilter=function(k){var f=F.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,k);k=F.createImageServiceLayerFilter(!0,k);return F.orCombineFilters([f,k])};F.andCombineFilters=function(k){return F._combineFilters(k,!0)};F.orCombineFilters=function(k){return F._combineFilters(k,!1)};F._combineFilters=function(k,f){return function(w){var C=new c,L=A.map(k,function(I){return I(w)});m(L).then(function(I){var E=!1;E=f?A.every(I,function(r){return r}):
A.some(I,function(r){return r});C.resolve(E)},function(I){console.error(I);C.reject(I)});return C}};return F})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v,e){var n=u([v._TreeNode,t],{templateString:D,declaredClass:"jimu._TreeNode",
isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=a.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=a.toDom('\x3cinput type\x3d"checkbox" /\x3e');a.addClass(this.checkNode,"jimu-tree-check-node");a.place(this.checkNode,this.contentNode,"first");this.own(m(this.checkNode,"click",z.hitch(this,this._onClick)));this.own(m(this.rowNode,"keydown",
z.hitch(this,function(q,F){F.target=q;F.keyCode!==l.ENTER&&F.keyCode!==l.SPACE||this._onClick(F)},this.checkNode)));this.isLeaf?this.groupId?a.setStyle(this.checkNode,"display","none"):a.setStyle(this.checkNode,"display","inline"):a.setStyle(this.checkNode,"display","none");this.isLeaf?a.addClass(this.domNode,"jimu-tree-leaf-node"):a.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,a.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},
unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,a.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(q){(q.target||q.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,q):this.tree._onClick(this,q)},_onChange:function(){this.isLeaf&&setTimeout(z.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",
this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return u([v,t],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+e.getRandomString()},postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,"jimu-tree");this.own(g.before(this,"onClick",z.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&a.setStyle(this.rootLoadingIndicator,"display",
"none");this.dndController.singular=!0;a.setAttr(this.domNode,"tabindex",0)},removeItem:function(q){this.model.store.remove(q)},getAllItems:function(){var q=this.getAllTreeNodeWidgets();return d.map(q,z.hitch(this,function(F){var k=F.item;k.selected=F.checkNode.checked;return k}))},getSelectedItems:function(){var q=this.getAllTreeNodeWidgets();q=d.filter(q,z.hitch(this,function(F){return F.checkNode.checked}));return d.map(q,z.hitch(this,function(F){return F.item}))},getFilteredItems:function(q){var F=
this.getAllTreeNodeWidgets();F=d.map(F,z.hitch(this,function(k){var f=k.item;f.selected=k.checkNode.checked;return f}));return d.filter(F,z.hitch(this,function(k){return q(k)}))},getTreeNodeByItemId:function(q){for(var F=this._getAllTreeNodeDoms(),k=0;k<F.length;k++){var f=A.byNode(F[k]);if(f.item.id.toString()===q.toString())return f}return null},selectItem:function(q){(q=this.getTreeNodeByItemId(q))&&q.isLeaf&&this.selectNodeWidget(q)},unselectItem:function(q){(q=this.getTreeNodeByItemId(q))&&q.isLeaf&&
q.unselect()},getAllLeafTreeNodeWidgets:function(){var q=this.getAllTreeNodeWidgets();return d.filter(q,z.hitch(this,function(F){return F.isLeaf}))},getAllTreeNodeWidgets:function(){var q=this._getAllTreeNodeDoms();return d.map(q,z.hitch(this,function(F){return A.byNode(F)}))},isLeafItem:function(q){return q&&q.isLeaf},_getAllTreeNodeDoms:function(){return b(".dijitTreeNode",this.domNode)},_createTreeNode:function(q){q.isLeaf=this.isLeafItem(q.item);this.multiple||(q.groupId=this.uniqueId);return new n(q)},
_onTreeNodeSelect:function(q){this.emit("item-select",{item:q.item,treeNode:q})},_onTreeNodeUnselect:function(q){this.emit("item-unselect",{item:q.item,treeNode:q})},selectNodeWidget:function(q){this.multiple||this.unselectAllLeafNodeWidgets();q.select()},_jimuBeforeClick:function(q,F,k){F.isLeaf&&(a.hasClass(k.target||k.srcElement,"jimu-tree-check-node")||(this.multiple?F.toggleSelect():this.selectNodeWidget(F)));return arguments},_onCheckNodeClick:function(q,F,k){!this.multiple&&F&&this.unselectAllLeafNodeWidgets();
c.stop(k);this.focusNode(q);setTimeout(z.hitch(this,function(){F?this.selectNodeWidget(q):q.unselect();this.onClick(q.item,q,k)}),0)},unselectAllLeafNodeWidgets:function(){var q=this.getAllLeafTreeNodeWidgets();d.forEach(q,z.hitch(this,function(F){F.unselect()}))}})})},"widgets/NearMe/setting/SearchSourceSettings":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./SearchSourceSettings.html dojo/_base/html jimu/dijit/SimpleTable ./QuerySourceSetting ./LocatorSourceSetting jimu/LayerInfos/LayerInfos ../searchSourceUtils jimu/utils dojo/when esri/lang dojo/_base/lang dojo/_base/array dojo/query dojo/on dojo/dom-class jimu/dijit/CheckBox dojo/domReady!".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v,e,n,q,F,k){return u([B,H,D],{baseClass:"jimu-widget-nearme-search-source-settings",templateString:z,startup:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(q(this.menuItemClickNode,"click",v.hitch(this,this._onMenuItemClick)));this._createSourceListTable();this.showInfoWindowOnSelect=new k({checked:!1,label:this.nls.searchSourceSetting.generalSettingCheckboxLabel},this.showInfoWindowOnSelectNode);this.config&&this.config.sources||
(this.config.sources=[]);this.shelter.show();g.getInstance(this.map,this.map.itemInfo).then(v.hitch(this,function(f){this.layerInfosObj=f;m.setMap(this.map);m.setLayerInfosObj(this.layerInfosObj);m.setAppConfig(this.appConfig);t(m.getConfigInfo(this.config)).then(v.hitch(this,this._loadConfig))}))},_loadConfig:function(f){this.domNode&&(this.setConfig(f),this.shelter.hide())},setConfig:function(f){this.config=f;f=f.sources;this.allPlaceholder.set("value",l.stripHTML(this.config.allPlaceholder));this.showInfoWindowOnSelect.setValue(A.isDefined(this.config.showInfoWindowOnSelect)?
!!this.config.showInfoWindowOnSelect:!0);e.forEach(f,v.hitch(this,function(w,C){var L=this.sourceList.addRow({name:w.name||""});L&&L.success?(this._setRelatedConfig(L.tr,w),0===C&&setTimeout(v.hitch(this,function(){this.sourceList.selectRow(L.tr)}),100)):console.error("add row failed ",L)}))},getConfig:function(){if(this._currentSourceSetting)if(this._currentSourceSetting.isValidConfig())this._closeSourceSetting();else return null;var f={allPlaceholder:l.stripHTML(this.allPlaceholder.get("value")),
showInfoWindowOnSelect:this.showInfoWindowOnSelect.checked},w=this.sourceList.getRows(),C=[];e.forEach(w,v.hitch(this,function(L){var I=this._getRelatedConfig(L);delete I._definition;this._removeRelatedConfig(L);C.push(I)}));f.sources=C;return f},destroy:function(){m.setMap(null);m.setLayerInfosObj(null);m.setAppConfig(null);this.inherited(arguments)},_onAllPlaceholderBlur:function(){this.allPlaceholder.set("value",l.stripHTML(this.allPlaceholder.get("value")))},_createSourceListTable:function(){this.sourceList=
new d({autoHeight:!1,selectable:!0,fields:[{name:"name",title:this.nls.searchSourceSetting.nameTitle,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"70px",type:"actions",actions:["up","down","delete"]}]},this.sourceList);a.setStyle(this.sourceList.domNode,"height","100%");this.sourceList.startup();this.own(q(this.sourceList,"row-select",v.hitch(this,this._onSourceItemSelected)));this.own(q(this.sourceList,"row-delete",v.hitch(this,this._onSourceItemRemoved)))},_onSourceItemRemoved:function(f){this._currentSourceSetting&&
this._currentSourceSetting.getRelatedTr()===f&&(this._currentSourceSetting.destroy(),this._currentSourceSetting=null)},_onSourceItemSelected:function(f){var w=this._getRelatedConfig(f),C=this._currentSourceSetting&&this._currentSourceSetting.tr;w&&f!==C&&(this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?(this._currentSourceSetting.showValidationTip(),this.sourceList.selectRow(C)):(F.remove(this.searchSources,"esriCTSourcesExtraHeight"),"query"===w.type?this._createNewQuerySourceSettingFromSourceList(w,
w._definition||{},f):"locator"===w.type&&this._createNewLocatorSourceSettingFromSourceList(w,w._definition||{},f)))},_setRelatedConfig:function(f,w){n(f).data("config",v.clone(w))},_getRelatedConfig:function(f){return n(f).data("config")[0]},_removeRelatedConfig:function(f){return n(f).removeData("config")},_onMenuItemClick:function(f){f=f&&f.target&&a.getAttr(f.target,"type");this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?this.emit("invalid-source-setting"):(F.remove(this.searchSources,
"esriCTSourcesExtraHeight"),"locator"===f?this._addNewLocator():"query"===f&&this._addNewQuerySource())},_addNewLocator:function(){this._createNewLocatorSourceSettingFromMenuItem({},{})},_addNewQuerySource:function(){this._createNewQuerySourceSettingFromMenuItem({},{})},_createNewLocatorSourceSettingFromMenuItem:function(f,w){var C=new b({nls:this.nls.searchSourceSetting,map:this.map});C.setDefinition(w);C.setConfig({url:f.url||"",name:f.name||"",singleLineFieldName:f.singleLineFieldName||"",placeholder:f.placeholder||
"",countryCode:f.countryCode||"",zoomScale:f.zoomScale||5E4,maxSuggestions:f.maxSuggestions||6,maxResults:f.maxResults||6,searchInCurrentMapExtent:!!f.searchInCurrentMapExtent,type:"locator"});C._openLocatorChooser();C.own(q(C,"select-locator-url-ok",v.hitch(this,function(L){(L=this.sourceList.addRow({name:L.name||"New Geocoder"},this.sourceList.getRows().length))&&L.success&&(this._currentSourceSetting&&this._closeSourceSetting(),C.setRelatedTr(L.tr),C.placeAt(this.sourceSettingNode),this.sourceList.selectRow(L.tr),
this._currentSourceSetting=C)})));C.own(q(C,"reselect-locator-url-ok",v.hitch(this,function(L){var I=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(I,{name:L.name})})));C.own(q(C,"select-locator-url-cancel",v.hitch(this,function(){this._currentSourceSetting!==C&&(C.destroy(),C=null)})))},_createNewLocatorSourceSettingFromSourceList:function(f,w,C){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new b({nls:this.nls.searchSourceSetting,map:this.map});
this._currentSourceSetting.own(q(this._currentSourceSetting,"enable-local-search",v.hitch(this,function(){F.add(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.own(q(this._currentSourceSetting,"disable-local-search",v.hitch(this,function(){F.remove(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.setDefinition(w);this._currentSourceSetting.setConfig({url:f.url||"",name:f.name||"",singleLineFieldName:f.singleLineFieldName||"",placeholder:f.placeholder||
"",countryCode:f.countryCode||"",zoomScale:f.zoomScale||5E4,maxSuggestions:f.maxSuggestions||6,maxResults:f.maxResults||6,searchInCurrentMapExtent:!!f.searchInCurrentMapExtent,enableLocalSearch:!!f.enableLocalSearch,localSearchMinScale:f.localSearchMinScale,localSearchDistance:f.localSearchDistance,type:"locator"});this._currentSourceSetting.setRelatedTr(C);this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.own(q(this._currentSourceSetting,"reselect-locator-url-ok",
v.hitch(this,function(L){var I=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(I,{name:L.name})})))},_closeSourceSetting:function(){var f=this._currentSourceSetting.getRelatedTr(),w=this._currentSourceSetting.getConfig();w._definition=this._currentSourceSetting.getDefinition();this._setRelatedConfig(f,w);this.sourceList.editRow(f,{name:w.name});this._currentSourceSetting.destroy()},_createNewQuerySourceSettingFromMenuItem:function(f,w){var C=new c({nls:this.nls.searchSourceSetting,
map:this.map,appConfig:this.appConfig});C.setDefinition(w);C.setConfig({url:f.url,name:f.name||"",layerId:f.layerId,placeholder:f.placeholder||"",searchFields:f.searchFields||[],displayField:f.displayField||w.displayField||"",exactMatch:!!f.exactMatch,zoomScale:f.zoomScale||5E4,maxSuggestions:f.maxSuggestions||6,maxResults:f.maxResults||6,searchInCurrentMapExtent:!!f.searchInCurrentMapExtent,type:"query"});C._openQuerySourceChooser();C.own(q(C,"select-query-source-ok",v.hitch(this,function(L){(L=
this.sourceList.addRow({name:L.name},0))&&L.success&&(this._currentSourceSetting&&this._closeSourceSetting(),C.setRelatedTr(L.tr),C.placeAt(this.sourceSettingNode),this.sourceList.selectRow(L.tr),this._currentSourceSetting=C)})));C.own(q(C,"reselect-query-source-ok",v.hitch(this,function(L){var I=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(I,{name:L.name})})));C.own(q(C,"select-query-source-cancel",v.hitch(this,function(){this._currentSourceSetting!==C&&(C.destroy(),C=null)})))},
_createNewQuerySourceSettingFromSourceList:function(f,w,C){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new c({nls:this.nls.searchSourceSetting,map:this.map,appConfig:this.appConfig});this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.setDefinition(w);this._currentSourceSetting.setConfig({url:f.url,name:f.name||"",layerId:f.layerId,placeholder:f.placeholder||"",searchFields:f.searchFields||[],displayField:f.displayField||w.displayField||
"",exactMatch:!!f.exactMatch,zoomScale:f.zoomScale||5E4,maxSuggestions:f.maxSuggestions||6,maxResults:f.maxResults||6,searchInCurrentMapExtent:!!f.searchInCurrentMapExtent,type:"query"});this._currentSourceSetting.setRelatedTr(C);this._currentSourceSetting.own(q(this._currentSourceSetting,"reselect-query-source",v.hitch(this,function(L){var I=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(I,{name:L.name})})))}})})},"widgets/NearMe/setting/QuerySourceSetting":function(){define("dojo/_base/declare dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./QuerySourceSetting.html dojo/_base/lang dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented jimu/dijit/_FeaturelayerSourcePopup jimu/portalUrlUtils esri/request esri/lang jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox jimu/dijit/LoadingShelter dijit/form/ValidationTextBox dojo/NodeList-data".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v,e,n,q,F){return u([H,D,z,l],{baseClass:"jimu-widget-nearme-query-source-setting",templateString:a,nls:null,appConfig:null,map:null,tr:null,config:null,fieldsPopup:null,_layerDefinition:null,_fieldsCheckBox:null,_layerId:null,_suggestible:!1,_clickSet:!1,postMixInProperties:function(){this.nls.common={};this.nls.common=window.jimuNls.common},postCreate:function(){this.inherited(arguments);this.own(b(this.setSourceBtnClickNode,"click",d.hitch(this,this._onSetSourceClick)));
this.own(b(this.sourceName,"Blur",d.hitch(this,this._onSourceNameBlur)));this.own(b(this.placeholder,"Blur",d.hitch(this,this._onPlaceholderBlur)));this.own(b(this.fieldsSelectorNode,"click",d.hitch(this,this._onFieldsSelectorClick)));this.exactMatch=new F({checked:!1,label:this.nls.exactMatch},this.exactMatch);this.searchInCurrentMapExtent=new F({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this._layerDefinition={};this._fieldsCheckBox=[];this._setMessageNodeContent("")},
setDefinition:function(k){this._layerDefinition=k||{}},getDefinition:function(){return this._layerDefinition},setRelatedTr:function(k){this.tr=k},getRelatedTr:function(){return this.tr},setConfig:function(k){if("[object Object]"===Object.prototype.toString.call(k)){var f=k.url;f&&(this.config=k,this.shelter.show(),this._layerDefinition.url!==f?this._getDefinitionFromRemote(f).then(d.hitch(this,function(w){f&&w&&"error"!==w.type?(this._layerDefinition=w,this._layerDefinition.url=f,this._setSourceItems(),
this._setMessageNodeContent("")):f&&w&&"error"===w.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(e.substitute({URL:w.url},d.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setMessageNodeContent(""),this._setSourceItems(),this.shelter.hide()))}},isValidConfig:function(){var k=this.getConfig();return k.url&&k.name&&k.displayField?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.sourceUrl);this._showValidationErrorTip(this.sourceName)},
getConfig:function(){return{layerId:this._layerId,url:this.sourceUrl.get("value"),name:n.stripHTML(this.sourceName.get("value")),placeholder:n.stripHTML(this.placeholder.get("value")),searchFields:this._getSearchFields(),displayField:this.displayField.get("value"),exactMatch:this.exactMatch.getValue(),searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,zoomScale:this.zoomScale.get("value")||5E4,maxSuggestions:this.maxSuggestions.get("value")||6,maxResults:this.maxResults.get("value")||
6,type:"query"}},destroy:function(){this.inherited(arguments);this.fieldsPopup&&(this.fieldsPopup.close(),this.fieldsPopup=null);this.tr=this.nls=this.config=this._layerDefinition=null},_onSourceNameBlur:function(){this.sourceName.set("value",n.stripHTML(this.sourceName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",n.stripHTML(this.placeholder.get("value")))},_disableSourceItems:function(){this.sourceName.set("disabled",!0);this.placeholder.set("disabled",!0);this.searchFields.set("disabled",
!0);B.setStyle(this.fieldsSelectorNode,"display","none");this.displayField.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0);this.zoomScale.set("disabled",!0)},_enableSourceItems:function(){this.sourceName.set("disabled",!1);this.placeholder.set("disabled",!1);this.searchFields.set("disabled",!1);B.setStyle(this.fieldsSelectorNode,"display","inline-block");this.displayField.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",
!1);this.zoomScale.set("disabled",!1)},_setSourceItems:function(){this.sourceUrl.set("value",this.config.url);this.sourceName.set("value",n.stripHTML(this.config.name||""));this.placeholder.set("value",n.stripHTML(this.config.placeholder||""));this._setSearchFields2Node();this.searchFields.set("value",this._getSearchFieldsAlias());this._setDisplayFieldOptions();this.displayField.set("value",this.config.displayField||"");this.exactMatch.setValue(!!this.config.exactMatch);this.searchInCurrentMapExtent.setValue(!!this.config.searchInCurrentMapExtent);
this.zoomScale.set("value",this.config.zoomScale||5E4);this.maxSuggestions.set("value",this.config.maxSuggestions||6);this.maxResults.set("value",this.config.maxResults||6);this._layerId=this.config.layerId;(this._suggestible=this._layerDefinition&&this._layerDefinition.advancedQueryCapabilities&&this._layerDefinition.advancedQueryCapabilities.supportsPagination)?this._hideSuggestibleTips():this._showSuggestibleTips();this._layerDefinition&&"esriGeometryPoint"===this._layerDefinition.geometryType?
B.setStyle(this.zoomScaleTr,"display",""):B.setStyle(this.zoomScaleTr,"display","none");this._enableSourceItems()},_getDefinitionFromRemote:function(k){var f=new m,w=v({url:k,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(w);w.then(d.hitch(this,function(C){f.resolve(C)}),d.hitch(this,function(C){console.error(C);f.resolve({type:"error",url:this._getRequestUrl(k)})}));return f.promise},_setMessageNodeContent:function(k,f){B.empty(this.messageNode);k.nodeType||(k=B.toDom(k));
B.place(k,this.messageNode);f?B.setStyle(this.messageTr,"display",""):B.setStyle(this.messageTr,"display","none")},_getRequestUrl:function(k){var f=window.location.protocol;return"http:"===f?A.setHttpProtocol(k):"https:"===f?A.setHttpsProtocol(k):k},_setSearchFields2Node:function(){var k=null,f=this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length;this.config&&this.config.searchFields&&0<this.config.searchFields.length||(k=[]);if(f){var w=this._layerDefinition.fields;
k=c.filter(this.config.searchFields,function(C){return c.some(w,function(L){return L.name===C})})}else k=this.config.searchFields;this.searchFields.set("_fields",k)},_setDisplayFieldOptions:function(){var k=[];this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length?k=c.map(this._layerDefinition.fields,function(f){return{label:f.alias||f.name||"",value:f.name||""}}):this.config&&this.config.displayField&&(k=[{label:this.config.displayField,value:this.config.displayField}]);
this.displayField.set("options",k)},_getSearchFieldsAlias:function(){var k=this._getSearchFields();if(!(k&&0<k.length))return"";if(this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length){for(var f=this._layerDefinition.fields,w=c.map(f,function(r){return r&&r.name}),C=[],L=0,I=k.length;L<I;L++){var E=w.indexOf(k[L]);-1<E&&(f[E].alias?C.push(f[E].alias):C.push(f[E].name))}return C.join(",")}return k.join(",")},_getSearchFields:function(){return this.searchFields.get("_fields")},
_setSearchFields:function(k){this.searchFields.set("_fields",k)},_onSetSourceClick:function(){this._clickSet=!0;this._openServiceChooser()},_openQuerySourceChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){var k=new t({titleLabel:this.nls.setLayerSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});b.once(k,"ok",d.hitch(this,function(f){k.close();this.setDefinition(f.definition||
{});this.setConfig({layerId:f.layerInfo&&f.layerInfo.id||null,url:f.url,name:f.name||"",placeholder:"",searchFields:[],displayField:this._layerDefinition.displayField||"",exactMatch:!1,zoomScale:5E4,maxSuggestions:6,maxResults:6,type:"query"});k=null;this._setMessageNodeContent("");this._clickSet?this.emit("reselect-query-source-ok",f):this.emit("select-query-source-ok",f)}));b.once(k,"cancel",d.hitch(this,function(){k.close();k=null;this.emit("select-query-source-cancel")}))},_onFieldsSelectorClick:function(){var k=
B.create("div",{style:{maxHeight:"480px"}}),f=this._layerDefinition.fields;this._fieldsCheckBox=[];c.forEach(f,d.hitch(this,function(w,C){var L=new F({checked:this._isSearchable(w),label:w.alias||w.name});B.addClass(L.domNode,"esriCTSearchSourceFieldCheckbox");B.addClass(L.labelNode,"jimu-ellipsis");B.setAttr(L.domNode,{title:w.alias||w.name});0===C%3&&(window.isRTL?B.setStyle(L.domNode,"marginRight",0):B.setStyle(L.domNode,"marginLeft",0));L.placeAt(k);g(L.domNode).data("fieldName",w.name);this._fieldsCheckBox.push(L)}));
this.fieldsPopup=new q({titleLabel:this.nls.setSearchFields,autoHeight:!0,content:k,container:window.jimuConfig.layoutId,width:640,maxHeight:600,buttons:[{label:this.nls.common.ok,onClick:d.hitch(this,"_onSearchFieldsOk")},{label:this.nls.common.cancel,classNames:["jimu-btn-vacation"]}],onClose:d.hitch(this,function(){this.fieldsPopup=null})});B.addClass(this.fieldsPopup.domNode,this.baseClass)},_onSearchFieldsOk:function(){var k=[];c.forEach(this._fieldsCheckBox,function(f){if(f.getValue()){var w=
g(f.domNode).data("fieldName");k.push(w[0]);g(f.domNode).removeData()}});this._setSearchFields(k);this.searchFields.set("value",this._getSearchFieldsAlias());this.fieldsPopup.close()},_isSearchable:function(k){var f=this._getSearchFields();return c.some(f,d.hitch(this,function(w){return k.name===w}))},_showSuggestibleTips:function(){B.removeClass(this.tipsNode,"esriCTHidden");B.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){B.addClass(this.tipsNode,"esriCTHidden");
B.setStyle(this.maxSuggestions.domNode,"display","block")},_showValidationErrorTip:function(k){if(!k.validate()&&k.domNode&&k.focusNode){var f=k.get("disabled");f&&k.set("disabled",!1);k.focusNode.focus();setTimeout(d.hitch(this,function(){k.focusNode.blur();f&&k.set("disabled",!0);k=null}),100)}}})})},"jimu/dijit/_FeaturelayerSourcePopup":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/FeaturelayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),
function(u,B,H,D,z,a,d,c,b){return u([a,B],{width:830,height:560,titleLabel:"",dijitArgs:null,postCreate:function(){this.inherited(arguments);z.addClass(this.domNode,"jimu-featurelayer-source-popup");this._initFls();this._initLoading()},getSelectedRadioType:function(){return this.fls.getSelectedRadioType()},_initFls:function(){this.fls=new d(this.dijitArgs);this.fls.placeAt(this.contentContainerNode);this.fls.startup();this.own(H(this.fls,"ok",D.hitch(this,function(g){if(0!==g.length){var m=g[0];
if(m.definition)try{m.definition.name=m.name,m.definition.url=m.url,this.emit("ok",m)}catch(l){console.error(l)}else this.loading.show(),b({url:m.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(D.hitch(this,function(l){if(this.domNode){this.loading.hide();m.definition=l;try{m.definition.name=m.name,m.definition.url=m.url,this.emit("ok",m)}catch(t){console.error(t)}}}),D.hitch(this,function(l){console.error(l);this.domNode&&this.loading.hide()}))}})));this.own(H(this.fls,
"cancel",D.hitch(this,function(){try{this.emit("cancel")}catch(g){console.error(g)}})))},_initLoading:function(){this.loading=new c({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/FeaturelayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/RadioBtn jimu/dijit/_FeaturelayerChooserWithButtons jimu/dijit/FeaturelayerChooserFromPortal jimu/dijit/_FeaturelayerServiceChooserContent jimu/portalUrlUtils".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A){return u([B,H,D,b],{templateString:z,baseClass:"jimu-layer-source jimu-featurelayer-source",declaredClass:"jimu.dijit.FeaturelayerSource",nls:null,multiple:!1,createMapResponse:null,portalUrl:null,layerChooserFromMap:null,postMixInProperties:function(){this.nls=window.jimuNls.featureLayerSource;this.portalUrl=A.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedRadioType:function(){if(this.mapRadio.checked)return"map";
if(this.portalRadio.checked)return"portal";if(this.urlRadio.checked)return"url"},getSelectedItems:function(){var v=[];this.mapRadio.checked?v=this.flcMap.getSelectedItems():this.portalRadio.checked?v=this.flcPortal.getSelectedItems():this.urlRadio.checked&&(v=this.flcUrl.getSelectedItems());return v},startup:function(){this.inherited(arguments);this.flcMap.startup();this.flcPortal.startup();this.flcUrl.startup()},_initSelf:function(){this._initRadios();this._createFeaturelayerChooserWithButtons();
this._createFeaturelayerChooserFromPortal();this._createFeaturelayerServiceChooserContent();this._onRadioClicked()},_createFeaturelayerChooserWithButtons:function(){this.flcMap=new m({style:{width:"100%",height:"100%"},multiple:this.multiple,createMapResponse:this.createMapResponse,onlyShowWebMapLayers:!0,layerChooserFromMap:this.layerChooserFromMap});this.flcMap.operationTip=this.nls.selectLayer;this.flcMap.placeAt(this.flcContainer);this.own(c(this.flcMap,"ok",a.hitch(this,function(v){v&&0<v.length&&
this.emit("ok",v)})));this.own(c(this.flcMap,"cancel",a.hitch(this,function(){this.emit("cancel")})))},_createFeaturelayerChooserFromPortal:function(){this.flcPortal=new l({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.flcPortal.operationTip=this.nls.chooseItem;this.flcPortal.placeAt(this.hflcContainer);this.own(c(this.flcPortal,"next",a.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseLayer;this._updateOperationTip()})));
this.own(c(this.flcPortal,"back",a.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(c(this.flcPortal,"ok",a.hitch(this,function(v){v&&0<v.length&&this.emit("ok",v)})));this.own(c(this.flcPortal,"cancel",a.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createFeaturelayerServiceChooserContent:function(){this.flcUrl=
new t({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.flcUrl.operationTip=this.nls.setServiceUrl;this.flcUrl.placeAt(this.flscContainer);this.own(c(this.flcUrl,"ok",a.hitch(this,function(v){v&&0<v.length&&this.emit("ok",v)})));this.own(c(this.flcUrl,"cancel",a.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var v="featureLayerSourceRadios_"+this._getRandomString(),e=a.hitch(this,this._onRadioClicked);this.mapRadio=new g({group:v,onStateChange:e,checked:!0});
this.mapRadio.placeAt(this.mapTd,"first");this.portalRadio=new g({group:v,onStateChange:e,checked:!1});this.portalRadio.placeAt(this.portalTd,"first");this.urlRadio=new g({group:v,onStateChange:e,checked:!1});this.urlRadio.placeAt(this.urlTd,"first");this.own(c(this.mapLabel,"click",a.hitch(this,function(){this.mapRadio.check()})));this.own(c(this.portalLabel,"click",a.hitch(this,function(){this.portalRadio.check()})));this.own(c(this.urlLabel,"click",a.hitch(this,function(){this.urlRadio.check()})))},
_getRandomString:function(){var v=Math.random().toString();return v=v.slice(2,v.length)},_onRadioClicked:function(){d.setStyle(this.flcContainer,"display","none");d.setStyle(this.hflcContainer,"display","none");d.setStyle(this.flscContainer,"display","none");this.mapRadio.checked?(d.setStyle(this.flcContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(d.setStyle(this.hflcContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):
this.urlRadio.checked&&(d.setStyle(this.flscContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=this.flcMap.operationTip:this.portalRadio.checked?this.operationTip.innerHTML=this.flcPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.flcUrl.operationTip)}})})},"jimu/dijit/_FeaturelayerChooserWithButtons":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/FeaturelayerChooserFromMap".split(" "),
function(u,B,H,D,z,a,d,c,b){return z([a,d,c,B],{baseClass:"jimu-layer-chooser-with-buttons jimu-feature-layer-chooser-with-buttons",declaredClass:"jimu.dijit.FeaturelayerChooserWithButtons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"chooser-container" data-dojo-attach-point\x3d"chooserContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-trailing-margin1 jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
layerChooserFromMap:null,constructor:function(g){this.options=g},postMixInProperties:function(){this.nls=H.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.layerChooser=this.layerChooserFromMap?this.layerChooserFromMap:new b(this.options);this.layerChooser.placeAt(this.chooserContainer);D.setStyle(this.layerChooser.domNode,{width:"100%",height:"100%"});this.own(u(this.layerChooser,"tree-click",H.hitch(this,function(){0<this.getSelectedItems().length?D.removeClass(this.btnOk,
"jimu-state-disabled"):D.addClass(this.btnOk,"jimu-state-disabled")})));this.own(u(this.btnOk,"click",H.hitch(this,function(){var g=this.getSelectedItems();0<g.length&&this.emit("ok",g)})));this.own(u(this.btnCancel,"click",H.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.layerChooser.getSelectedItems()},startup:function(){this.inherited(arguments);this.layerChooser.startup()}})})},"jimu/dijit/FeaturelayerChooserFromMap":function(){define(["dojo/_base/declare",
"dojo/Deferred","dojo/_base/html","dojo/_base/lang","./LayerChooserFromMap"],function(u,B,H,D,z){return u([z],{baseClass:"jimu-featurelayer-chooser-from-map",declaredClass:"jimu.dijit.FeaturelayerChooserFromMap",types:null,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,ignoredFeaturelayerIds:null,mustSupportStatistics:!1,ignoreVirtualLayer:!1,postMixInProperties:function(){this.inherited(arguments);this.ignoredFeaturelayerIds||(this.ignoredFeaturelayerIds=[]);this.basicFilter=D.hitch(this,
this.basicFilter);this.filter=z.createFeaturelayerFilter(this.types,this.showLayerFromFeatureSet,this.showTable,this.mustSupportStatistics);this.ignoreVirtualLayer&&(this.filter=z.andCombineFilters([this.filter,D.hitch(this,this._ignoreVirtualLayerFilter)]))},postCreate:function(){this.inherited(arguments);H.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},_ignoreVirtualLayerFilter:function(a){return a.getLayerType().then(function(d){return!("ArcGISDynamicMapServiceLayer"===d||"ArcGISTiledMapServiceLayer"===
d||"GroupLayer"===d)})},basicFilter:function(a){var d=new B;0<=this.ignoredFeaturelayerIds.indexOf(a.id)?d.resolve(!1):this.onlyShowVisible&&"Table"!==a.getLayerType()?d.resolve(a.isShowInMap()):d.resolve(!0);return d},getHandledItem:function(a){var d=this.inherited(arguments),c=a&&a.layerInfo;c=c&&c.layerObject;d.url=c&&c.url||"";return d}})})},"jimu/dijit/FeaturelayerChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/FeaturelayerServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v,e,n){return u([B,H,D,l],{templateString:z,declaredClass:"jimu.dijit.FeaturelayerChooserFromPortal",baseClass:"jimu-service-chooser-from-portal jimu-featurelayer-chooser-from-portal",_serviceBrowserDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=a.mixin({},window.jimuNls.common);this.nls=a.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal);this.portalUrl=e.getStandardPortalUrl(this.portalUrl);this.multiple=!0===this.multiple?
!0:!1},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},_initSelf:function(){this.selector=new A({portalUrl:this.portalUrl,itemTypes:["Feature Service","Map Service"],onlyShowOnlineFeaturedItems:!1});this.own(b(this.selector,"item-selected",a.hitch(this,this._onItemSelected)));this.own(b(this.selector,"none-item-selected",a.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);
this.selector.startup();this.serviceBrowser=new v({multiple:this.multiple});this.own(b(this.serviceBrowser,"tree-click",a.hitch(this,this._onServiceBrowserClicked)));this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup()},_onItemSelected:function(){d.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){d.addClass(this.btnNext,"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceBrowserDef&&!this._serviceBrowserDef.isFulfilled()&&
this._serviceBrowserDef.cancel();d.setStyle(this.btnOk,"display","none");d.setStyle(this.btnNext,"display","block");d.setStyle(this.btnBack,"display","none");d.addClass(this.btnOk,"jimu-state-disabled");d.setStyle(this.selectorContainer,"display","block");d.setStyle(this.serviceBrowserContainer,"display","none");this.serviceBrowser.reset();this.emit("back")},_onBtnOkClicked:function(){var q=this.getSelectedItems();0<q.length&&this.emit("ok",q)},_onBtnNextClicked:function(){var q=this.selector.getSelectedItem();
q&&(d.setStyle(this.btnNext,"display","none"),d.setStyle(this.btnBack,"display","block"),d.setStyle(this.btnOk,"display","block"),d.addClass(this.btnOk,"jimu-state-disabled"),d.setStyle(this.selectorContainer,"display","none"),d.setStyle(this.serviceBrowserContainer,"display","block"),this.serviceBrowser.reset(),this._serviceBrowserDef=this.serviceBrowser.setUrl(q.url||q.item),this._serviceBrowserDef.then(a.hitch(this,function(){this._serviceBrowserDef=null;this._setOkStateBySelectedItems()}),a.hitch(this,
function(){this._serviceBrowserDef=null})),this.emit("next"))},_setOkStateBySelectedItems:function(){0<this.serviceBrowser.getSelectedItems().length?d.removeClass(this.btnOk,"jimu-state-disabled"):d.addClass(this.btnOk,"jimu-state-disabled")},_onServiceBrowserClicked:function(){this._setOkStateBySelectedItems()},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/FeaturelayerServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array",
"jimu/serviceBrowserRuleUtils"],function(u,B,H,D,z){return u([B],{baseClass:"jimu-featurelayer-service-browser",declaredClass:"jimu.dijit.FeaturelayerServiceBrowser",url:"",multiple:!1,types:null,isSupportQuery:!0,postMixInProperties:function(){this.inherited(arguments);this.rule=z.getFeaturelayerServiceBrowserRule(this.types,this.isSupportQuery)},getSelectedItems:function(){var a=this.inherited(arguments);return a=D.map(a,H.hitch(this,function(d){return{name:d.name,url:d.url,definition:d.definition}}))}})})},
"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingIndicator".split(" "),function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v){return u([B,H,D,z],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',
_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);d.addClass(this.domNode,"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},
setUrl:function(e){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new b;e&&"string"===typeof e&&e.replace(/\/*$/g,"")||this._def.reject();e=e.replace(/\/*$/g,"");e=a.trim(e);var n=e.match(/^http(s?):\/\//gi);n&&0<n.length||(e="http://"+e);if(!(0>=e.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=e))return e=this._getRootItem(),e=A.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,e):this._isUrlContainsServiceType(this._currentUrl)?
this._searchServiceUrl(this._currentUrl,e):this._searchFolderServiceUrl(this._currentUrl,e),this.shelter.show(),e.then(a.hitch(this,function(q){this.domNode&&this.shelter.hide();var F=this.tree.getAllLeafTreeNodeWidgets();1===F.length&&F[0].select();this._def.resolve(q)}),a.hitch(this,function(q){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(q)})),this._def;this._def.reject()},_getItem:function(e){return this.rule.getItem(e)},_getSubItemUrls:function(e){return this.rule.getSubItemUrls(e)},
_getSubItems:function(e){var n=new b;this._getSubItemUrls(e).then(a.hitch(this,function(q){q=c.map(q,a.hitch(this,function(F){return this._getItem(F)}));g(q).then(a.hitch(this,function(F){F=c.filter(F,a.hitch(this,function(k){return k&&"object"===typeof k}));n.resolve(F)}),a.hitch(this,function(F){n.reject(F)}))}),a.hitch(this,function(q){n.reject(q)}));return n},_selectFirstLeafTreeNodeWidget:function(){var e=this.tree.getAllLeafTreeNodeWidgets();1===e.length&&e[0].select()},isLeafItem:function(e){return 0<=
this.rule.leafTypes.indexOf(e.type)},isServiceTypeSupported:function(e){return this.rule.isServiceTypeSupported(e)},_getStringEndWith:function(e,n){var q="",F=e.indexOf(n);0<=F&&(q=e.slice(0,F+n.length));return q},_isUrlContainsServiceType:function(e){return this.rule.isUrlContainsServiceType(e)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(e){var n="";e=e.split("/");return n=e[e.length-1]},_searchBaseServiceUrl:function(e,
n){var q=new b;this._getRestInfo(e).then(a.hitch(this,function(F){if(this.domNode){var k=[];c.map(F.folders,a.hitch(this,function(f){var w={name:f,type:"folder",url:e+"/"+f,parent:n.id};this._addItem(w);var C=new b;this._doSearchFolderServiceUrl(w.url,w.id).then(a.hitch(this,function(L){0<L.length?c.forEach(L,a.hitch(this,function(I){I.parent=w.id;this._addItem(I)})):this._removeItem(w.id);C.resolve()}),a.hitch(this,function(L){C.reject(L)}));k.push(C);return C}));c.forEach(F.services,a.hitch(this,
function(f){if(this.isServiceTypeSupported(f.type)){f=e+"/"+f.name+"/"+f.type;var w=new b;this.rule.getItem(f).then(a.hitch(this,function(C){C&&(C.parent=n.id,this._addItem(C));w.resolve()}),a.hitch(this,function(C){console.error(C);w.reject(C)}));k.push(w)}}));g(k).then(a.hitch(this,function(){this.domNode&&q.resolve()}),a.hitch(this,function(f){console.error(f);this.domNode&&q.reject(f)}))}}),a.hitch(this,function(F){console.error(F);this.domNode&&q.reject({errorCode:"NETWORK_ERROR",error:F})}));
return q},_searchFolderServiceUrl:function(e,n){var q=new b;this._doSearchFolderServiceUrl(e,n).then(a.hitch(this,function(F){this.domNode&&(c.forEach(F,a.hitch(this,function(k){k.parent=n.id;this._addItem(k)})),q.resolve())}),a.hitch(this,function(F){console.error(F);this.domNode&&q.reject({errorCode:"NETWORK_ERROR",error:F})}));return q},_doSearchFolderServiceUrl:function(e){var n=new b,q=this._getBaseServiceUrl();this._getRestInfo(e).then(a.hitch(this,function(F){F=F.services;var k=[];F&&0<F.length&&
c.forEach(F,a.hitch(this,function(f){this.isServiceTypeSupported(f.type)&&(f=this.rule.getItem(q+"/"+f.name+"/"+f.type),k.push(f))}));g(k).then(a.hitch(this,function(f){f=c.filter(f,a.hitch(this,function(w){return w}));n.resolve(f)}),a.hitch(this,function(f){console.error(f);n.reject(f)}))}),a.hitch(this,function(F){console.error(F);n.reject(F)}));return n},_searchServiceUrl:function(e,n){var q=new b;this._getSubItems(e).then(a.hitch(this,function(F){F&&0<F.length?(c.forEach(F,a.hitch(this,function(k){k.parent=
n.id;this._addItem(k)})),q.resolve()):this._getItem(e).then(a.hitch(this,function(k){k&&(k.parent=n.id,this._addItem(k));q.resolve()}),a.hitch(this,function(k){q.reject(k)}))}),a.hitch(this,function(F){q.reject(F)}));return q},_getRestInfo:function(e){var n=new b;this.rule.getRestInfo(e).then(a.hitch(this,function(q){this.domNode&&n.resolve(q)}),a.hitch(this,function(q){this.domNode&&n.reject(q)}));return n},_clear:function(){var e=this._store.query({parent:"root"});c.forEach(e,a.hitch(this,function(n){n&&
"root"!==n.id&&this._store.remove(n.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(e){this._id++;e.id=this._id.toString();this._store.add(e);return e},_removeItem:function(e){this._store.remove(e)},_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var e=this._getRootItem();e=new m({data:[e],getChildren:function(n){return this.query({parent:n.id})}});this._store=new l(e);e=new t({store:this._store,query:{id:"root"},
mayHaveChildren:a.hitch(this,this._mayHaveChildren)});this.tree=new v({multiple:this.multiple,model:e,showRoot:!1,style:{width:"100%"},isLeafItem:a.hitch(this,this.isLeafItem),onOpen:a.hitch(this,function(n,q){this._onTreeOpen(n,q);this.emit("tree-open",n,q)}),onClick:a.hitch(this,function(n,q,F){this._onTreeClick(n,q,F);this.emit("tree-click",n,q,F)}),getIconStyle:a.hitch(this,function(n,q){var F=null;if(!n)return null;var k={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",
backgroundImage:""},f=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),w=this._getIconImageName(n,q);w||("folder"===n.type?w=q?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(n.type)&&(w=q?"folder_open_default.png":"folder_close_default.png"));w&&(k.backgroundImage="url("+f+"/css/images/"+w+")",F=k);return F})});d.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(e,n){var q="";"function"===
typeof this.rule.getIconImageName&&(q=this.rule.getIconImageName(e,n));return q},_mayHaveChildren:function(e){return"root"===e.type?!0:!this.isLeafItem(e)},_onTreeOpen:function(e,n){"root"===e.id||0<this._store.query({parent:e.id}).length||e.checking||e.checked||(e.checking=!0,this._getSubItems(e.url).then(a.hitch(this,function(q){c.forEach(q,a.hitch(this,function(F){F.parent=e.id;this._addItem(F)}));e.checking=!1;e.checked=!0}),a.hitch(this,function(q){console.error(q);e.checking=!1;e.checked=!0})))},
_onTreeClick:function(e,n,q){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/Deferred","jimu/utils","jimu/ServiceBrowserRule"],function(u,B,H,D,z){var a={combineRules:function(d){var c=new z;B.forEach(d,function(b){B.forEach(b.leafTypes,function(g){0>c.leafTypes.indexOf(g)&&c.leafTypes.push(g)});B.forEach(b.serviceTypes,function(g){0>c.serviceTypes.indexOf(g)&&
c.serviceTypes.push(g)})});c.getMatchedRule=function(b){var g=null;B.some(d,function(m){return m.isUrlContainsServiceType(b)?(g=m,!0):!1});return g};c.getItem=function(b){var g=null;return g=(g=c.getMatchedRule(b))?g.getItem(b):c.defaultGetItem(b)};c.getSubItemUrls=function(b){var g=null;return g=(g=c.getMatchedRule(b))?g.getSubItemUrls(b):c.defaultGetSubItemUrls(b)};c.getIconImageName=function(b,g){var m="";if(b.url){var l=c.getMatchedRule(b.url);l&&"function"===typeof l.getIconImageName&&(m=l.getIconImageName(b,
g))}return m};return c},getFeaturelayerServiceBrowserRule:function(d,c,b){d=u.clone(d);var g=["point","polyline","polygon"];u.isArrayLike(d)&&0<d.length?(d=B.filter(d,function(m){return 0<=g.indexOf(m)}),0===d.length&&(d=g)):d=g;return a._getFeaturelayerServiceBrowserRule(d,c,b)},_getFeaturelayerServiceBrowserRule:function(d,c,b){return new z({types:d,leafTypes:["Feature Layer","Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",
getItem:function(g){var m=new H;this.isUrlEndWithServiceType(g,this.serviceTypes)?m=this.defaultGetItem(g):this.getRestInfo(g).then(u.hitch(this,function(l){l=this._getItemByLayerDefinition(g,l);m.resolve(l)}),u.hitch(this,function(l){m.reject(l)}));return m},getSubItemUrls:function(g){var m=new H;return m=this.isUrlEndWithServiceType(g)?this._getSubUrlsByServiceUrl(g):this._getSubUrlsByGroupUrl(g)},getIconImageName:function(g,m){var l="";"MapServer"===g.type||"FeatureServer"===g.type?l=m?"mapserver_open.png":
"mapserver_close.png":g.type===this._groupLayerType?l=m?"group_layer2.png":"group_layer1.png":g.type===this._featureLayerType?(g=D.getTypeByGeometryType(g.definition&&g.definition.geometryType),"point"===g?l="point_layer1.png":"polyline"===g?l="line_layer1.png":"polygon"===g&&(l="polygon_layer1.png")):g.type===this._tableType?l="table.png":"root"===g.type&&this._currentUrl&&B.some(this.serviceTypes,u.hitch(this,function(t){return D.isStringEndWith(this._currentUrl,"/"+t)}))&&(l=m?"mapserver_open.png":
"mapserver_close.png");return l},_getSubUrlsByServiceUrl:function(g){var m=new H;this.getRestInfo(g).then(u.hitch(this,function(l){var t=[];B.forEach(l.layers,u.hitch(this,function(A){0<=A.parentLayerId||t.push(g+"/"+A.id)}));b&&B.forEach(l.tables,u.hitch(this,function(A){0<=A.parentLayerId||t.push(g+"/"+A.id)}));m.resolve(t)}),u.hitch(this,function(l){m.reject(l)}));return m},_getSubUrlsByGroupUrl:function(g){var m=new H;this.getRestInfo(g).then(u.hitch(this,function(l){var t=[];if(l.type===this._groupLayerType){var A=
this._getServiceUrlByLayerUrl(g);t=B.map(l.subLayers||[],u.hitch(this,function(v){return A+"/"+v.id}))}m.resolve(t)}),u.hitch(this,function(l){m.reject(l)}));return m},_getItemByLayerDefinition:function(g,m){var l=null,t=m.type;if(t===this._groupLayerType)l={name:m.name,type:t,url:g,definition:m};else if(t===this._featureLayerType||t===this._tableType){var A=!1;t===this._featureLayerType?A=this._validateEsriGeometryType(m.geometryType):t===this._tableType&&(A=!0);A&&(A=!1,(A=c?D.isFeaturelayerUrlSupportQuery(g,
m.capabilities):!0)&&(l={name:m.name,type:t,url:g,definition:m}))}return l},_validateEsriGeometryType:function(g){g=D.getTypeByGeometryType(g);return 0<=this.types.indexOf(g)},_getServiceUrlByLayerUrl:function(g){for(var m="",l=0;l<this.serviceTypes.length;l++){var t=this.serviceTypes[l].toLowerCase(),A=g.toLowerCase().lastIndexOf("/"+t+"/");if(0<=A){m=g.slice(0,A+t.length+1);break}}return m}})},getGeocodeServiceBrowserRule:function(){return new z({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},
getGpServiceBrowserRule:function(){return new z({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(d){var c=new H;this.isUrlEndWithServiceType(d)?c=this.defaultGetItem(d):this.getRestInfo(d).then(u.hitch(this,function(b){c.resolve({name:b.displayName||b.name,type:"GPTask",url:d,definition:b})}),u.hitch(this,function(b){c.reject(b)}));return c},getSubItemUrls:function(d){var c=new H;this.isUrlEndWithServiceType(d)?this.getRestInfo(d).then(u.hitch(this,function(b){b=B.map(b.tasks||[],
u.hitch(this,function(g){return d+"/"+g}));c.resolve(b)}),u.hitch(this,function(b){c.reject(b)})):c.resolve([]);return c},getIconImageName:function(d,c){c="";"GPServer"===d.type?c="toolbox.png":"GPTask"===d.type&&(c="tool.png");return c}})},getImageServiceBrowserRule:function(d){return new z({leafTypes:["ImageServer"],serviceTypes:["ImageServer"],getItem:function(c){var b=new H;this.isUrlEndWithServiceType(c)?this.defaultGetItem(c).then(u.hitch(this,function(g){d?D.isImageServiceSupportQuery(g.definition.capabilities)?
b.resolve(g):b.resolve(null):b.resolve(g)}),u.hitch(this,function(g){b.reject(g)})):b.resolve(null);return b},getIconImageName:function(c,b){b="";"ImageServer"===c.type&&(b="image_layer.png");return b}})},getQueryableServiceBrowserRule:function(){var d=a.getFeaturelayerServiceBrowserRule(["point","polyline","polygon"],!0,!0),c=a.getImageServiceBrowserRule(!0);return a.combineRules([d,c])}};return a})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),
function(u,B,H,D,z,a,d){return u([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(c){B.mixin(this,c);B.isArrayLike(this.leafTypes)||(this.leafTypes=[]);B.isArrayLike(this.serviceTypes)||(this.serviceTypes=[])},getItem:function(c){return this.defaultGetItem(c)},getSubItemUrls:function(c){return this.defaultGetSubItemUrls(c)},getIconImageName:function(c,b){return""},defaultGetItem:function(c){var b=new D;c=c.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(c)){var g=c.split("/"),
m=g[g.length-1],l=g[g.length-2];this.getRestInfo(c).then(B.hitch(this,function(t){b.resolve({name:l,type:m,url:c,definition:t})}),B.hitch(this,function(t){console.error(t);b.reject({errorCode:"NETWORK_ERROR",error:t})}))}else b.resolve(null);return b},defaultGetSubItemUrls:function(c){c=new D;c.resolve([]);return c},getRestInfo:function(c){var b=new D;c=c.replace(/\/*$/g,"");var g=this._restInfoCache[c];if(g)b.resolve(g);else{g={url:c,content:{f:"json"},handleAs:"json",callbackParamName:"callback",
timeout:2E4};var m=d.findCredential(c);m&&m.token&&(g.content.token=m.token);a(g).then(B.hitch(this,function(l){this._restInfoCache[c]=l;b.resolve(l)}),function(l){b.reject(l)})}return b},isServiceTypeSupported:function(c){c=c.toLowerCase();return H.some(this.serviceTypes,B.hitch(this,function(b){return b.toLowerCase()===c}))},isUrlEndWithServiceType:function(c){return H.some(this.serviceTypes,B.hitch(this,function(b){return z.isStringEndWith(c,"/"+b)}))},isUrlContainsServiceType:function(c){c=c.toLowerCase();
return H.some(this.serviceTypes,B.hitch(this,function(b){b=b.toLowerCase();return 0<=c.indexOf("/"+b)}))}})})},"jimu/dijit/_FeaturelayerServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./FeaturelayerServiceBrowser"],function(u,B,H){return u([B],{baseClass:"jimu-featurelayer-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/MapServer",
"http://myserver/arcgis/rest/services/myservice/FeatureServer"],_createServiceBrowser:function(D){return new H(D)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),function(u,
B,H,D,z,a,d,c,b,g,m,l,t,A,v){return u([B,H,D,a],{templateString:z,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=g.mixin({},window.jimuNls.common);this.nls=g.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
c.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(e){var n=new d;(this.url=e)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),n=this._onBtnValidateClick()):n.reject();return n},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?b.forEach(this._examples,g.hitch(this,function(n){c.create("div",{innerHTML:n,
"class":"example-url"},this.exampleTd)})):c.setStyle(this.exampleTr,"display","none");var e={multiple:this.multiple,_onTreeClick:g.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(e);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(l.after(this.urlInput,"validator",g.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(m(this.serviceBrowser,"error",g.hitch(this,
this._onServiceBrowserError)))},_createServiceBrowser:function(e){},_validateUrl:function(e){e=e.replace(/\/*$/g,"");if((e=e.match(/\/rest\/services\/*(.*)/gi))&&0<e.length)if(e=e[0].replace(/\/rest\/services\/*/,"")){var n=e.split("/");if(1===n.length)return!0;if(2===n.length)return this.serviceBrowser.isServiceTypeSupported(n[1]);if(3<=n.length)return e=this.serviceBrowser.isServiceTypeSupported(n[1]),n=this.serviceBrowser.isServiceTypeSupported(n[2]),e||n}else return!0;else return!1},_afterUrlValidate:function(e){e&&
(e=this.urlInput.get("value"),e=this._validateUrl(e));e?c.removeClass(this.btnValidate,"jimu-state-disabled"):c.addClass(this.btnValidate,"jimu-state-disabled");return e},_onServiceBrowserError:function(e){this._showErrorMessage(e)},_showErrorMessage:function(e){e&&"string"===typeof e?(this.errorNode.innerHTML=e,c.addClass(this.errorSection,"visible")):c.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";c.removeClass(this.errorSection,"visible")},
_onBtnValidateClick:function(){this._clearErrorMessage();var e=new d;if(this.urlInput.validate()){var n=this.urlInput.get("value");this.serviceBrowser.setUrl(n).then(g.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();e.resolve()}),g.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();e.reject()}));this.emit("validate-click")}else e.reject();return e},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?c.removeClass(this.btnOk,"jimu-state-disabled"):
c.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var e=this.getSelectedItems();0<e.length&&this.emit("ok",e)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"dojo/NodeList-data":function(){define(["./_base/kernel","./query","./_base/lang","./_base/array","./dom-attr"],function(u,B,H,D,z){var a=B.NodeList,d={},c=0,b=function(l){var t=z.get(l,"data-dojo-dataid");t||(t="pid"+c++,z.set(l,"data-dojo-dataid",t));return t},
g=u._nodeData=function(l,t,A){var v=b(l),e;d[v]||(d[v]={});if(1==arguments.length)return d[v];"string"==typeof t?2<arguments.length?d[v][t]=A:e=d[v][t]:e=H.mixin(d[v],t);return e},m=u._removeNodeData=function(l,t){l=b(l);d[l]&&(t?delete d[l][t]:delete d[l])};a._gcNodeData=u._gcNodeData=function(){var l=B("[data-dojo-dataid]").map(b),t;for(t in d)0>D.indexOf(l,t)&&delete d[t]};H.extend(a,{data:a._adaptWithCondition(g,function(l){return 0===l.length||1==l.length&&"string"==typeof l[0]}),removeData:a._adaptAsForEach(m)});
return a})},"widgets/NearMe/setting/LocatorSourceSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/Evented dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/portalUrlUtils jimu/dijit/Message jimu/dijit/_GeocodeServiceChooserContent jimu/dijit/Popup jimu/dijit/LoadingShelter esri/request esri/lang ../searchSourceUtils jimu/utils dojo/text!./LocatorSourceSetting.html jimu/dijit/CheckBox dijit/form/ValidationTextBox dijit/form/NumberTextBox".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v,e,n,q,F,k){return u([d,c,b,z],{baseClass:"jimu-widget-nearme-locator-source-setting",tr:null,nls:null,config:null,singleLineFieldName:null,templateString:F,_suggestible:!1,_locatorDefinition:null,_esriLocatorRegExp:/http(s)?:\/\/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,serviceChooserContent:null,geocoderPopup:null,_clickSet:!1,postCreate:function(){this.inherited(arguments);this.exampleHint=this.nls.locatorExample+": http://\x26lt;myServerName\x26gt;/arcgis/rest/services/World/GeocodeServer";
this.own(D(this.setButtonNode,"click",B.hitch(this,this._onSetLocatorUrlClick)));this.own(D(this.locatorName,"Blur",B.hitch(this,this._onLocatorNameBlur)));this.own(D(this.placeholder,"Blur",B.hitch(this,this._onPlaceholderBlur)));this.own(D(this.countryCode,"Blur",B.hitch(this,this._onCountryCodeBlur)));this.searchInCurrentMapExtent=new k({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this.enableLocalSearch=new k({checked:!1,label:this.nls.enableLocalSearch},
this.enableLocalSearch);this._processlocalSearchTable(!1);this.own(D(this.enableLocalSearch,"change",B.hitch(this,function(){this._processlocalSearchTable(this.enableLocalSearch.getValue())})));H.setStyle(this.enableLocalSearch.domNode,"display","none");this._setMessageNodeContent(this.exampleHint);this.config=this.config?this.config:{};this.setConfig(this.config)},setRelatedTr:function(f){this.tr=f},getRelatedTr:function(){return this.tr},setDefinition:function(f){this._locatorDefinition=f||{}},
getDefinition:function(){return this._locatorDefinition},setConfig:function(f){if("[object Object]"===Object.prototype.toString.call(f)){var w=f.url;w&&(this.config=f,this.shelter.show(),this._locatorDefinition.url!==w?this._getDefinitionFromRemote(w).then(B.hitch(this,function(C){w&&C&&"error"!==C.type?(this._locatorDefinition=C,this._locatorDefinition.url=w,this._setSourceItems(),this._setMessageNodeContent(this.exampleHint)):w&&C&&"error"===C.type&&(this._setSourceItems(),this._disableSourceItems(),
this._setMessageNodeContent(e.substitute({URL:C.url},B.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setSourceItems(),this._setMessageNodeContent(this.exampleHint),this.shelter.hide()))}},isValidConfig:function(){var f=this.getConfig();return f.url&&f.name&&f.singleLineFieldName?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.locatorUrl);this._showValidationErrorTip(this.locatorName)},getConfig:function(){return{url:this.locatorUrl.get("value"),name:q.stripHTML(this.locatorName.get("value")),
singleLineFieldName:this.singleLineFieldName,placeholder:q.stripHTML(this.placeholder.get("value")),countryCode:q.stripHTML(this.countryCode.get("value")),zoomScale:this.zoomScale.get("value")||5E4,maxSuggestions:this.maxSuggestions.get("value")||6,maxResults:this.maxResults.get("value")||6,searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,enableLocalSearch:this.enableLocalSearch.getValue(),localSearchMinScale:this.localSearchMinScale.get("value"),localSearchDistance:this.localSearchDistance.get("value"),
type:"locator"}},_onLocatorNameBlur:function(){this.locatorName.set("value",q.stripHTML(this.locatorName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",q.stripHTML(this.placeholder.get("value")))},_onCountryCodeBlur:function(){this.countryCode.set("value",q.stripHTML(this.countryCode.get("value")))},_disableSourceItems:function(){this.locatorName.set("disabled",!0);this.placeholder.set("disabled",!0);this.countryCode.set("disabled",!0);this.maxSuggestions.set("disabled",
!0);this.maxResults.set("disabled",!0);this.zoomScale.set("disabled",!0)},_enableSourceItems:function(){this.locatorName.set("disabled",!1);this.placeholder.set("disabled",!1);this.countryCode.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",!1);this.zoomScale.set("disabled",!1)},_setSourceItems:function(){var f=this.config;f.url&&(this.locatorUrl.set("value",f.url),this._processCountryCodeRow(f.url));f.name&&this.locatorName.set("value",q.stripHTML(f.name));
f.singleLineFieldName&&(this.singleLineFieldName=f.singleLineFieldName);f.placeholder&&this.placeholder.set("value",q.stripHTML(f.placeholder));f.countryCode&&this.countryCode.set("value",q.stripHTML(f.countryCode));"capabilities"in this._locatorDefinition?(H.setStyle(this.enableLocalSearch.domNode,"display",""),this._processlocalSearchTable(f.enableLocalSearch),this.enableLocalSearch.setValue(f.enableLocalSearch),f.localSearchMinScale&&f.enableLocalSearch&&this.localSearchMinScale.set("value",f.localSearchMinScale),
f.localSearchDistance&&f.enableLocalSearch&&this.localSearchDistance.set("value",f.localSearchDistance)):(this.enableLocalSearch.setValue(!1),H.setStyle(this.enableLocalSearch.domNode,"display","none"));(this._suggestible=this._locatorDefinition&&this._locatorDefinition.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?this._hideSuggestibleTips():this._showSuggestibleTips();this.searchInCurrentMapExtent.setValue(!!f.searchInCurrentMapExtent);this.zoomScale.set("value",f.zoomScale||
5E4);this.maxSuggestions.set("value",f.maxSuggestions||6);this.maxResults.set("value",f.maxResults||6);this._enableSourceItems()},_isEsriLocator:function(f){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(f)},_getDefinitionFromRemote:function(f){var w=new a;if(this._isEsriLocator(f))w.resolve({singleLineAddressField:{name:"SingleLine",type:"esriFieldTypeString",alias:"Single Line Input",required:!1,length:200,localizedNames:{},recognizedNames:{}},capabilities:"Geocode,ReverseGeocode,Suggest"});
else{var C=v({url:f,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(C);C.then(B.hitch(this,function(L){w.resolve(L)}),B.hitch(this,function(L){console.error(L);w.resolve({type:"error",url:this._getRequestUrl(f)})}))}return w.promise},_setMessageNodeContent:function(f,w){H.empty(this.messageNode);f.nodeType||(f=H.toDom(f));H.place(f,this.messageNode);w?H.addClass(this.messageNode,"esriCTErrorMessage"):H.removeClass(this.messageNode,"esriCTErrorMessage")},_getRequestUrl:function(f){var w=
window.location.protocol;return"http:"===w?g.setHttpProtocol(f):"https:"===w?g.setHttpsProtocol(f):f},_onSetLocatorUrlClick:function(){this._clickSet=!0;this._openServiceChooser()},_openLocatorChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){this.serviceChooserContent=new l({url:this.locatorUrl.get("value")||""});this.shelter=new A({hidden:!0});this.geocoderPopup=new t({titleLabel:this.nls.setGeocoderURL,autoHeight:!0,content:this.serviceChooserContent.domNode,
container:window.jimuConfig.layoutId,width:640});this.shelter.placeAt(this.geocoderPopup.domNode);H.setStyle(this.serviceChooserContent.domNode,"width","580px");H.addClass(this.serviceChooserContent.domNode,"override-geocode-service-chooser-content");this.serviceChooserContent.own(D(this.serviceChooserContent,"validate-click",B.hitch(this,function(){H.removeClass(this.serviceChooserContent.domNode,"override-geocode-service-chooser-content")})));this.serviceChooserContent.own(D(this.serviceChooserContent,
"ok",B.hitch(this,"_onSelectLocatorUrlOk")));this.serviceChooserContent.own(D(this.serviceChooserContent,"cancel",B.hitch(this,"_onSelectLocatorUrlCancel")))},_onSelectLocatorUrlOk:function(f){f&&f[0]&&f[0].url&&this.domNode&&(this.shelter.show(),v({url:f[0].url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(B.hitch(this,function(w){this.shelter.hide();w&&w.singleLineAddressField&&w.singleLineAddressField.name?(this._enableSourceItems(),this.locatorUrl.set("value",f[0].url),
this.locatorName.get("value")||this.locatorName.set("value",n.getGeocoderName(f[0].url)),"capabilities"in w?(H.setStyle(this.enableLocalSearch.domNode,"display",""),this._isEsriLocator(f[0].url)?this.enableLocalSearch.setValue(!0):this.enableLocalSearch.setValue(!1)):(this.enableLocalSearch.setValue(!1),H.setStyle(this.enableLocalSearch.domNode,"display","none")),this.singleLineFieldName=w.singleLineAddressField.name,this._processCountryCodeRow(f[0].url),this._locatorDefinition=w,this._locatorDefinition.url=
f[0].url,(this._suggestible=w.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?this._hideSuggestibleTips():this._showSuggestibleTips(),this._clickSet?this.emit("reselect-locator-url-ok",this.getConfig()):this.emit("select-locator-url-ok",this.getConfig()),this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null),this._setMessageNodeContent(this.exampleHint)):new m({message:this.nls.locatorWarning})}),B.hitch(this,function(w){console.error(w);this.shelter.hide();
new m({message:e.substitute({URL:this._getRequestUrl(f[0].url)},B.clone(this.nls.invalidUrlTip))})})))},_onSelectLocatorUrlCancel:function(){this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null,this.emit("select-locator-url-cancel"))},_processlocalSearchTable:function(f){f?(H.removeClass(this.minScaleNode,"esriCTHidden"),H.removeClass(this.radiusNode,"esriCTHidden"),this.emit("enable-local-search")):(H.addClass(this.minScaleNode,"esriCTHidden"),H.addClass(this.radiusNode,"esriCTHidden"),
this.emit("disable-local-search"))},_processCountryCodeRow:function(f){this._isEsriLocator(f)?(this.countryCode.set("value",""),H.removeClass(this.countryCodeRow,"hide-country-code-row")):H.addClass(this.countryCodeRow,"hide-country-code-row")},_showSuggestibleTips:function(){H.removeClass(this.tipsNode,"esriCTHidden");H.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){H.addClass(this.tipsNode,"esriCTHidden");H.setStyle(this.maxSuggestions.domNode,"display",
"block")},_showValidationErrorTip:function(f){if(!f.validate()&&f.domNode&&f.focusNode){var w=f.get("disabled");w&&f.set("disabled",!1);f.focusNode.focus();setTimeout(B.hitch(this,function(){f.focusNode.blur();w&&f.set("disabled",!0);f=null}),100)}}})})},"jimu/dijit/_GeocodeServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./GeocodeServiceBrowser"],function(u,B,H){return u([B],{baseClass:"jimu-geocode-service-chooser-content",_examples:["http://myserver/arcgis/rest/services",
"http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/GeocodeServer"],_createServiceBrowser:function(D){return new H(D)}})})},"jimu/dijit/GeocodeServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(u,B,H,D,z){return u([B],{baseClass:"jimu-geocode-service-browser",declaredClass:"jimu.dijit.GeocodeServiceBrowser",url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);
this.rule=z.getGeocodeServiceBrowserRule()},getSelectedItems:function(){var a=this.inherited(arguments);return a=D.map(a,H.hitch(this,function(d){return{name:d.name,url:d.url}}))}})})},"widgets/NearMe/searchSourceUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/Deferred dojo/when dojo/promise/all jimu/portalUtils esri/lang esri/request".split(" "),function(u,B,H,D,z,a,d,c){return{map:null,layerInfosObj:null,appConfig:null,_esriLocatorRegExp:/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,
setMap:function(b){this.map=b},setLayerInfosObj:function(b){this.layerInfosObj=b},setAppConfig:function(b){this.appConfig=b},getConfigInfo:function(b){if(b&&b.sources&&0<b.sources.length){var g=null;return this.searchLayer(this.map)&&b.upgradeFromGeocoder?(g=this.map.itemInfo.itemData.applicationProperties.viewing.search,g=B.map(g.layers,u.hitch(this,function(m,l){l.hintText=m;return this._getQueryTypeGeocoder(l)},g.hintText)),z(g).then(u.hitch(this,function(m){b.sources=[].concat(m).concat(b.sources);
return b}))):b}return D(this._getSoucesFromPortalAndWebmap()).then(u.hitch(this,function(m){return{allPlaceholder:"",showInfoWindowOnSelect:!0,sources:m}}))},_getSoucesFromPortalAndWebmap:function(){var b=[],g=null;this.searchLayer(this.map)&&(g=this.map.itemInfo.itemData.applicationProperties.viewing.search,B.forEach(g.layers,u.hitch(this,function(m,l){l.hintText=m;b.push(this._getQueryTypeGeocoder(l))},g.hintText)));return a.getPortalSelfInfo(this.appConfig.portalUrl).then(u.hitch(this,function(m){if((m=
m.helperServices&&m.helperServices.geocode)&&0<m.length)for(var l=0,t=m.length;l<t;l++){var A=m[l];A&&b.push(this._processSingleLine(A))}return z(b).then(u.hitch(this,function(v){for(var e=[],n=0;n<v.length;n++){var q=v[n];q&&(q&&"query"===q.type?e.push(q):(q={name:q.name||this._getGeocodeName(q.url),url:q.url,singleLineFieldName:q.singleLineFieldName,placeholder:q.placeholder||window.jimuNls.common.findAddressOrPlace||q.name||this._getGeocodeName(q.url),maxResults:6,searchInCurrentMapExtent:!1,type:"locator"},
q.enableLocalSearch=this._isEsriLocator(q.url),q.localSearchMinScale=3E5,q.localSearchDistance=5E4,e.push(q)))}return e}))}))},_getQueryTypeGeocoder:function(b){var g=this.map.getLayer(b.id),m=null,l=null,t=null;t=d.isDefined(b.subLayer)?b.id+"_"+b.subLayer:b.id;m=this.layerInfosObj.traversal(function(A){return A.id===t?(l=A,!0):!1});return g&&m&&l?(m=d.isDefined(b.subLayer)?l.url||g.url+"/"+b.subLayer:l.url||g.url,{name:l.title,layerId:t,url:m,placeholder:b.hintText||window.jimuNls.common.findAddressOrPlace,
searchFields:[b.field.name],displayField:b.field.name,exactMatch:b.field.exactMatch||!1,maxResults:6,searchInCurrentMapExtent:!1,type:"query"}):null},_isEsriLocator:function(b){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(b)},_processSingleLine:function(b){if(b.singleLineFieldName)return b;if(this._isEsriLocator(b.url))return b.singleLineFieldName="SingleLine",b;var g=new H;c({url:b.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(u.hitch(this,
function(m){m.singleLineAddressField&&m.singleLineAddressField.name?(b.singleLineFieldName=m.singleLineAddressField.name,g.resolve(b)):(console.warn(b.url+"has no singleLineFieldName"),g.resolve(null))}),u.hitch(this,function(m){console.error(m);g.resolve(null)}));return g.promise},_getGeocodeName:function(b){if("string"!==typeof b)return"geocoder";b=b.split("/");return b[b.length-2]||"geocoder"},getGeocoderName:function(b){return this._getGeocodeName(b)},hasAppSearchInfo:function(b){return b.itemInfo&&
b.itemInfo.itemData&&b.itemInfo.itemData.applicationProperties&&b.itemInfo.itemData.applicationProperties.viewing&&b.itemInfo.itemData.applicationProperties.viewing.search},searchLayer:function(b){if(!this.hasAppSearchInfo(b))return!1;b=b.itemInfo.itemData.applicationProperties.viewing.search;return b.enabled&&0!==b.layers.length?!0:!1}}})},"widgets/NearMe/setting/SymbologySettings":function(){define("dojo/_base/declare jimu/BaseWidget dojo/Evented dijit/_WidgetsInTemplateMixin dojo/text!./SymbologySettings.html jimu/dijit/SimpleTable dojo/on dojo/dom-construct dojo/_base/lang dojo/string dojo/_base/array dojo/query dijit/form/Select dijit/form/ValidationTextBox dijit/form/NumberTextBox dojo/store/Memory ./SymbolChooserPopup jimu/symbolUtils jimu/utils esri/symbols/jsonUtils jimu/dijit/Message jimu/LayerInfos/LayerInfos dojo/promise/all jimu/dijit/LoadingIndicator".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v,e,n,q,F,k,f,w,C,L){return u([B,H,D],{templateString:z,baseClass:"jimu-widget-nearme-setting-symbology",_layerNameStore:null,_layerFieldStore:{},_layerValuedStore:null,_layerDetails:{},_layerInfosObj:null,constructor:function(I){b.mixin(this,I)},postMixInProperties:function(){this.nls.common={};b.mixin(this.nls.common,window.jimuNls.common)},postCreate:function(){this._layerNameStore=null;this._layerFieldStore={};this._layerValuedStore=null;this._layerDetails=
{};this.inherited(arguments);this._initLoading();this._createSymbologyTable();this.own(d(this.btnAddSymbolsNode,"click",b.hitch(this,this._addSymbolBtnClicked)));w.getInstance(this.map,this.map.webMapResponse.itemInfo).then(b.hitch(this,function(I){this._layerInfosObj=I;this._loading.show();var E=[],r=[];E=I.getLayerInfoArray();E=E.concat(I.getTableInfoArray());m.forEach(E,b.hitch(this,function(x){r.push(x.getLayerObject());var M=[];(M=x.getSubLayers())&&0<M.length&&m.forEach(M,b.hitch(this,function(O){O&&
O.layerObject&&!O.layerObject.empty&&r.push(O.getLayerObject())}))}));C(r).then(b.hitch(this,function(){if(this.config.attributeSymbology&&0<Object.keys(this.config.attributeSymbology).length)for(var x in this.config.attributeSymbology)this.config.attributeSymbology[x].hasOwnProperty("layerId")?this._populateTableRows([this.config.attributeSymbology[x]],this.config.attributeSymbology[x].layerId):this._populateTableRows(this.config.attributeSymbology[x],x);else this._layerNameStore||this._createLayerNameStore();
this._loading.hide()}),b.hitch(this,function(){this._loading.hide()}))}))},_errorMessage:function(I){(new f({message:I})).message=I},_initLoading:function(){this._loading=new L({hidden:!0});var I=l(".widget-setting-popup")[0];this._loading.placeAt(I);this._loading.startup()},_populateTableRows:function(I,E){m.forEach(I,b.hitch(this,function(r){r.layerId=E;this._addLayerRow(r)}))},_createSymbologyTable:function(){this._symbologyTable=new a({fields:[{name:"field",title:this.nls.symbologySetting.layerNameTitle,
type:"empty",editable:!1,width:"30%"},{name:"field1",title:this.nls.symbologySetting.fieldTitle,type:"empty",editable:!0,width:"25%"},{name:"field2",title:this.nls.symbologySetting.valuesTitle,type:"empty",editable:!1,width:"20%"},{name:"field3",title:this.nls.symbologySetting.symbolTitle,type:"empty",editable:!1,width:"15%"},{name:"actions",title:this.nls.symbologySetting.actionsTitle,width:"10%",type:"actions",actions:["up","down","delete"]}],selectable:!1,autoHeight:!0});this._symbologyTable.placeAt(this.symbologyTableAttachNode);
this._symbologyTable.startup()},_addSymbolBtnClicked:function(){!this._layerNameStore||this._layerNameStore&&0>=this._layerNameStore.data.length?this._errorMessage(this.nls.errorStrings.selectLayerErrorString):this._addLayerRow()},_addLayerRow:function(I){var E;var r=this._symbologyTable.addRow({});if(E=l(".simple-table-cell",r.tr))r=r.tr,this._addLayerNameDropdown(E[0],r,I),this._addLayerFieldDropdown(E[1],r,I),this._addLayerValueDropdown(E[2],r,I),this._addSymbolPicker(E[3],r,I)},_addSymbolPicker:function(I,
E,r){var x={};E.symbol?x.symbol=k.fromJson(E.symbol):r&&r.symbol?x.symbol=k.fromJson(r.symbol):this.config&&this.config.symbols&&this.config.symbols.hasOwnProperty("graphicLocationSymbol")&&(x.symbol=k.fromJson(this.config.symbols.graphicLocationSymbol));var M={symbolChooserTitle:this._getFieldAlias(E),symbolParams:x,nls:this.nls,symbolType:"graphicLocationSymbol"},O=c.create("div",{style:"height: 27px;"},I);this._showSelectedSymbol(O,x.symbol,E);this.own(d(O,"click",b.hitch(this,function(){M.symbolChooserTitle=
this._getFieldAlias(E);M.symbolParams.symbol=k.fromJson(E.symbol);this._initSymbolChooserPopup(M,O,E)})))},_getFieldAlias:function(I){var E=I.layerNameDropDown.getValue();I=I.layerFieldDropDown.getValue();var r="";this._layerDetails[E]&&this._layerDetails[E].fields&&this._layerDetails[E].fields[I]&&this._layerDetails[E].fields[I].fieldAlias&&(r=this._layerDetails[E].fields[I].fieldAlias);return r},_initSymbolChooserPopup:function(I,E,r){var x=new n(I);x.onOkClick=b.hitch(this,function(){var M=x.symbolChooser.getSymbol();
this._showSelectedSymbol(E,M,r);x.popup.close()})},_showSelectedSymbol:function(I,E,r){c.empty(I);if(E){if(26<E.height){var x=b.clone(E.height);E.height=26}if(26<E.width){var M=b.clone(E.width);E.width=26}if(20<E.size){var O=b.clone(E.size);E.size=20}var h=q.createSymbolNode(E);h||(h=c.create("div"));c.place(h,I);x&&(E.height=x);M&&(E.width=M);O&&(E.size=O);r.symbol=E.toJson()}},_addLayerNameDropdown:function(I,E,r){I=c.create("div",{"class":"esriCTDropDownContainer"},I);this._layerNameStore||this._createLayerNameStore();
E.layerNameDropDown=new t({name:"layerSelect",store:this._layerNameStore,labelAttr:"name","class":"esriCTLayerNameDropdown"},I);E.layerNameDropDown.startup();r&&E.layerNameDropDown.set("value",r.layerId,!1);d(E.layerNameDropDown,"change",b.hitch(this,function(){this._createLayerFieldsStore(E);E.layerFieldDropDown.setStore(this._layerFieldStore);this._addLayerValueDropdown(E.cells[2],E,null)}));E.layerNameDropDown.startup()},_createLayerNameStore:function(I){var E=[];m.forEach(I||this.config.searchLayers,
b.hitch(this,function(r){E.push({name:r.title,value:r.id})}));this._layerNameStore=new e({idProperty:"value",data:E})},_addLayerFieldDropdown:function(I,E,r){c.empty(I);I=c.create("div",{"class":"esriCTDropDownContainer"},I);this._createLayerFieldsStore(E);E.layerFieldDropDown=new t({name:"fieldSelect",labelAttr:"name",store:this._layerFieldStore,"class":"esriCTLayerFieldDropDown"},I);d(E.layerFieldDropDown,"change",b.hitch(this,function(){this._addLayerValueDropdown(E.cells[2],E,null)}));r&&E.layerFieldDropDown.set("value",
r.fieldName,!1);E.layerFieldDropDown.startup()},_createLayerFieldsStore:function(I){var E=[];var r=I.layerNameDropDown.getValue();var x=this._layerInfosObj.getLayerInfoById(r).layerObject;this._layerDetails[r]||(this._layerDetails[r]={fields:{}});m.forEach(x.fields,b.hitch(this,function(M){var O;if(-1==="esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeXML".split(" ").indexOf(M.type)){var h=M.name;if(!this._layerDetails[r].fields[h])if(this._layerDetails[r].fields[h]=
{},this._layerDetails[r].fields[h].fieldAlias=M.alias,O=x.getDomain(h)){O=b.clone(O);if(O.codedValues){var p=F.getCodedValueListForCodedValueOrSubTypes(x,h);O.codedValues=b.clone(p)}this._layerDetails[r].fields[h].codedDomainStore=this._getCodedDomainStore(O);this._layerDetails[r].fields[h].type=O.type}else this._layerDetails[r].fields[h].codedDomainStore=null;E.push({name:M.alias||M.name,value:M.name})}}));this._layerFieldStore=new e({idProperty:"value",data:E})},_getCodedDomainStore:function(I){var E=
[];m.forEach(I.codedValues,b.hitch(this,function(r){E.push({name:r.label,value:r.value})}));return new e({idProperty:"value",data:E})},_addLayerValueDropdown:function(I,E,r){c.empty(I);var x=E.layerNameDropDown.getValue();var M=E.layerFieldDropDown.getValue();var O=c.create("div",{"class":"esriCTDropDownContainer esriCTLayerFieldDropDown"},I);I=c.create("div",{"class":"esriCTDropDownContainer esriCTLayerFieldDropDown"},I);var h=this._layerDetails[x].fields[M].codedDomainStore;var p=this._layerDetails[x].fields[M];
h&&"codedValue"===p.type?(E.layerValueDropDown=new t({name:"valuesSelect",labelAttr:"name",store:h,"class":"esriCTLayerValuedDropDown"},O),E.layerValueDropDown.startup(),r&&E.layerValueDropDown.set("value",r.fieldValue)):h&&"range"===p.type?(r=this._layerInfosObj.getLayerInfoById(x).layerObject,M=r.getDomain(M),E.valueTextBox=new v({"class":"esriCTLayerValuedDropDown",constraints:{min:M.minValue,max:M.maxValue}},I),E.valueTextBox.startup()):(E.valueTextBox=new A({"class":"esriCTLayerValuedDropDown"},
I),E.valueTextBox.startup(),r&&E.valueTextBox.set("value",r.fieldValue))},updateLayerOptions:function(I){var E;this._createLayerNameStore(I);m.forEach(this._symbologyTable.getRows(),b.hitch(this,function(r){r.layerNameDropDown&&0<this._layerNameStore.query({value:r.layerNameDropDown.getValue()}).length?(E=r.layerNameDropDown.getValue(),r.layerNameDropDown.setStore(this._layerNameStore),r.layerNameDropDown.set("value",E,!1),E!==r.layerNameDropDown.getValue()&&(r.layerFieldDropDown&&(this._createLayerFieldsStore(r),
r.layerFieldDropDown.setStore(this._layerFieldStore)),this._addLayerValueDropdown(r.cells[2],r,null))):this._symbologyTable.deleteRow(r)}))},getConfig:function(){var I={},E,r,x,M=!0,O=[];m.forEach(this._symbologyTable.getRows(),b.hitch(this,function(p){p.layerNameDropDown&&(x=p.layerNameDropDown.getValue(),r=this._layerInfosObj.getLayerInfoById(x).layerObject,E={},E.layerId=x,E.fieldName=p.layerFieldDropDown.getValue(),r.getDomain(E.fieldName)?E.fieldValue=p.layerValueDropDown.getValue():E.fieldValue=
p.valueTextBox.getValue(),p.symbol&&(E.symbol=p.symbol),I.hasOwnProperty(x)||(I[x]=[]),m.forEach(I[x],b.hitch(this,function(G){if(G.fieldName===E.fieldName&&G.fieldValue===E.fieldValue)return M=!1,!0})),I[x].push(E),O.push(E))}));if(M)return{isValid:M,symbolConfig:O};var h=g.substitute(this.nls.symbologySetting.invalidConfigMsg,{fieldName:E.fieldName,layerName:r.name});return{isValid:M,message:h}}})})},"widgets/NearMe/setting/FilterSetting":function(){define("dojo/on dojo/query dojo/_base/html dojo/_base/lang dojo/_base/array dojo/_base/declare dijit/_WidgetsInTemplateMixin dojo/text!./FilterSetting.html esri/lang jimu/utils jimu/BaseWidgetSetting ./SingleFilterSetting jimu/LayerInfos/LayerInfos jimu/dijit/CheckBox jimu/dijit/LoadingShelter".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A){return a([m,d],{baseClass:"jimu-widget-nearme-filter-setting",templateString:c,singleSetting:null,layerChooserSelect:null,layerInfosObj:null,selectedSearchLayers:[],postMixInProperties:function(){this.jimuNls=window.jimuNls;this.layerInfosObj=t.getInstanceSync();this.config&&(this.config=this._getConfigWithValidDataSource(this.config));this.noTaskNls=this.nls.filterSetting.noTasksTip;this.noTaskNls=b.substitute({newFilter:"\x3cspan\x3e"+this.nls.filterSetting.newFilter+
"\x3c/span\x3e"},this.noTaskNls)},_getConfigWithValidDataSource:function(v){v.filterSettings||(v.filterSettings={},v.filterSettings.filters=[],v.filterSettings.collapse=!1);v.filterSettings.filters=z.filter(v.filterSettings.filters,D.hitch(this,function(e){return e.layerId?!!this.layerInfosObj.getLayerInfoById(e.layerId):!0}));return v},postCreate:function(){this.inherited(arguments);this.selectedSearchLayers=[];this.noTaskTip.innerHTML=this.noTaskNls;this.updateLayerOptions();this.cbxCollapseFilterExp=
new A({"class":"esriCTFilterLabel",label:this.nls.filterSetting.collapseFiltersTip||""});this.cbxCollapseFilterExp.placeAt(this.cbxCollapseFilters);this.cbxCollapseFilterExp.setValue(!1);this.cbxGroupFilters=new A({"class":"esriCTFilterLabel",label:this.nls.filterSetting.groupFiltersTip||""});this.cbxGroupFilters.placeAt(this.cbxGroupFiltersNode);this.cbxGroupFilters.setValue(!1);this.cbxExpandFiltersOnLoad=new A({"class":"esriCTFilterLabel",label:this.nls.filterSetting.expandFiltersOnLoad||""});
this.cbxExpandFiltersOnLoad.placeAt(this.cbxExpandFiltersOnLoadNode);this.cbxExpandFiltersOnLoad.setValue(!1);this.config&&this.setConfig(this.config)},_onListContentClicked:function(v){v=v.target||v.srcElement;var e=g.getAncestorDom(v,function(n){return H.hasClass(n,"item")},3);e&&(H.hasClass(v,"action")?H.hasClass(v,"up")?e.previousElementSibling&&H.place(e,e.previousElementSibling,"before"):H.hasClass(v,"down")?e.nextElementSibling&&H.place(e,e.nextElementSibling,"after"):H.hasClass(v,"delete")&&
(this._deleteItem(e),this._resetSelection()):this.singleSetting?this.singleSetting.target!==e&&this.singleSetting.getConfig()&&(this.singleSetting.destroy(),this.singleSetting=null,this._createSingleSetting(e)):this._createSingleSetting(e))},_onBtnAddItemClicked:function(){if(this.singleSetting)if(this.singleSetting.getConfig())this.singleSetting.destroy(),this.singleSetting=null;else return;var v=this._createTarget();this._createSingleSetting(v,null)},_createSingleSetting:function(v){B(".item",this.listContent).removeClass("selected");
this.singleSetting&&this.singleSetting.destroy();this.singleSetting=null;this.singleSetting=new l({map:this.map,nls:this.nls,target:v,folderUrl:this.folderUrl,layerInfosObj:this.layerInfosObj,selectedSearchLayers:this.selectedSearchLayers});this.singleSetting.placeAt(this.singleSettingContent);this.own(u(this.singleSetting,"loading",D.hitch(this,function(){this.shelter.show()})));this.own(u(this.singleSetting,"unloading",D.hitch(this,function(){this.shelter.hide()})));this.own(u(this.singleSetting,
"before-destroy",D.hitch(this,function(){H.addClass(this.separator,"not-visible")})));H.addClass(v,"selected");v.singleConfig?this.singleSetting.setConfig(v.singleConfig):setTimeout(D.hitch(this,function(){this.singleSetting.showLayerChooserPopup()}),50);H.removeClass(this.separator,"not-visible");H.addClass(this.noTaskTip,"not-visible")},_createTarget:function(v){v=v||"";return H.create("div",{"class":"item",innerHTML:'\x3cdiv class\x3d"label jimu-ellipsis" title\x3d"'+v+'"\x3e'+v+'\x3c/div\x3e\x3cdiv class\x3d"actions jimu-float-trailing"\x3e\x3cdiv class\x3d"delete action jimu-float-trailing"\x3e\x3c/div\x3e\x3cdiv class\x3d"down action jimu-float-trailing"\x3e\x3c/div\x3e\x3cdiv class\x3d"up action jimu-float-trailing"\x3e\x3c/div\x3e\x3c/div\x3e'},
this.listContent)},_updateNoQueryTip:function(){0<B(".item",this.listContent).length?H.addClass(this.noTaskTip,"not-visible"):H.removeClass(this.noTaskTip,"not-visible")},setConfig:function(v){if(v.hasOwnProperty("filterSettings")){v.filterSettings.hasOwnProperty("collapse")&&this.cbxCollapseFilterExp.setValue(v.filterSettings.collapse);v.filterSettings.hasOwnProperty("groupFiltersByLayer")&&this.cbxGroupFilters.setValue(v.filterSettings.groupFiltersByLayer);v.filterSettings.hasOwnProperty("expandFiltersOnLoad")&&
this.cbxExpandFiltersOnLoad.setValue(v.filterSettings.expandFiltersOnLoad);var e=null;z.forEach(v.filterSettings.filters,D.hitch(this,function(n,q){var F=this._createTarget(n.name);F.singleConfig=n;0===q&&(e=F)}));e&&this._createSingleSetting(e)}this._updateNoQueryTip()},getConfig:function(){if(this.singleSetting&&!this.singleSetting.getConfig())return!1;var v=B(".item",this.listContent),e={collapse:this.cbxCollapseFilterExp.getValue(),groupFiltersByLayer:this.cbxGroupFilters.getValue(),expandFiltersOnLoad:this.cbxExpandFiltersOnLoad.getValue(),
filters:[]};e.filters=z.map(v,D.hitch(this,function(n){return n.singleConfig}));return e},destroy:function(){this.singleSetting&&this.singleSetting.destroy();this.singleSetting=null;this.inherited(arguments)},updateLayerOptions:function(v){var e=[];z.forEach(v||this.config.searchLayers,D.hitch(this,function(q){e.push(q.id)}));this.selectedSearchLayers=e;this.singleSetting&&this.singleSetting.updateLayerOptions(this.selectedSearchLayers);v=B(".item",this.listContent);var n=[];z.forEach(v,D.hitch(this,
function(q){(!q.singleConfig||0>this.selectedSearchLayers.indexOf(q.singleConfig.layerId))&&n.push(q)}));z.forEach(n,D.hitch(this,function(q){this._deleteItem(q)}));this._resetSelection()},_deleteItem:function(v){v&&(this.singleSetting&&this.singleSetting.target===v&&(this.singleSetting.destroy(),this.singleSetting=null),H.destroy(v))},_resetSelection:function(){var v=B(".item",this.listContent);0<v.length&&this._createSingleSetting(v[0]);this._updateNoQueryTip()}})})},"widgets/NearMe/setting/SingleFilterSetting":function(){define("dojo/on dojo/query dojo/Evented dojo/_base/lang dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SingleFilterSetting.html jimu/utils jimu/dijit/Filter jimu/dijit/Message jimu/dijit/CheckBox esri/symbols/PictureMarkerSymbol esri/symbols/jsonUtils jimu/dijit/TabContainer3 jimu/dijit/LayerChooserFromMapWithDropbox ./CustomFeaturelayerChooserFromMap jimu/dijit/SymbolPicker jimu/dijit/ImageChooser dijit/form/ValidationTextBox".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v,e,n,q){return z([a,d,c,H],{baseClass:"jimu-widget-nearme-singlefilter-setting",templateString:b,jimuNls:null,_defaultTaskIcon:null,map:null,nls:null,target:null,layerInfosObj:null,folderUrl:"",appConfig:null,postMixInProperties:function(){this.inherited(arguments);this._defaultTaskIcon=this.folderUrl+"css/images/default_task_icon.png";this.jimuNls=window.jimuNls},postCreate:function(){this.inherited(arguments);this.cbxRemoveMapFilter=new t({"class":"esriCTFilterLabel",
label:this.nls.filterSetting.enableMapFilter||""});this.cbxRemoveMapFilter.placeAt(this.useMapFilterNode);this.cbxRemoveMapFilter.setValue(!1);this.cbxAutoApplyWhenWidgetOpen=new t({"class":"esriCTFilterLabel",label:this.nls.filterSetting.autoApplyWhenWidgetOpen||""});this.cbxAutoApplyWhenWidgetOpen.placeAt(this.autoApplyWhenWidgetOpenNode);this.cbxAutoApplyWhenWidgetOpen.setValue(!1);this._recreateLayerChooserSelect(!0);this.filter=new m({enableAskForValues:!0,noFilterTip:this.nls.noFilterTip,style:"width:100%;"});
this.filter.placeAt(this.filterDiv);this._setDefaultTaskIcon();this._initTabs()},_recreateLayerChooserSelect:function(F){this.layerChooserSelect&&this.layerChooserSelect.destroy();this.layerChooserSelect=null;var k=new q({showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,createMapResponse:this.map.webMapResponse,selectedSearchLayers:this.selectedSearchLayers});this.layerChooserSelect=new n({layerChooser:k});this.layerChooserSelect.placeAt(this.layerTd);F&&this._bindEventForLayerChooserSelect(this.layerChooserSelect)},
showLayerChooserPopup:function(){this.layerChooserSelect.showLayerChooser()},destroy:function(){this.target=null;this.emit("before-destroy");this.inherited(arguments)},setConfig:function(F){var k=D.clone(F);this._showLoading();this.reset();this._recreateLayerChooserSelect(!1);var f=D.hitch(this,function(){this.domNode&&(this._bindEventForLayerChooserSelect(this.layerChooserSelect),this._hideLoading())});this.layerInfosObj.getLayerInfoById(k.layerId).getLayerObject().then(D.hitch(this,function(w){this.domNode&&
this.layerChooserSelect.setSelectedLayer(w).then(D.hitch(this,function(C){this.domNode&&(this._hideLoading(),C&&(C=k.icon?k.icon:this._defaultTaskIcon,C=k.symbol?v.fromJson(k.symbol):new A({yoffset:16,type:"picturemarkersymbol",url:C,width:24,height:24,size:16,xoffset:0}),this.symbolPicker.showBySymbol(C),this.cbxRemoveMapFilter.setValue(!k.enableMapFilter),this.nameTextBox.set("value",k.name),this.filter.buildByFilterObj(w.url,k.filter,w),this._bindEventForLayerChooserSelect(this.layerChooserSelect)))}),
D.hitch(this,function(C){console.error(C);f()}))}),D.hitch(this,function(w){console.error(w);f()}));this.cbxAutoApplyWhenWidgetOpen.setValue(k.autoApplyWhenWidgetOpen)},getConfig:function(){var F={layerId:null,url:null,name:null,filter:null,icon:null,enableMapFilter:!this.cbxRemoveMapFilter.getValue(),autoApplyWhenWidgetOpen:this.cbxAutoApplyWhenWidgetOpen.getValue()},k=this.layerChooserSelect.getSelectedItem();if(!k)return this._showMessage(this.nls.filterSetting.selectLayerTip),!1;k=k.layerInfo.layerObject;
F.layerId=k.id;F.url=k.url;F.name=this.nameTextBox.get("value");if(!F.name)return this._showMessage(this.nls.setTitleTip),!1;F.symbol=this.symbolPicker.getSymbol().toJson();F.filter=this.filter.toJson();return F.filter?this.target.singleConfig=F:(this._showMessage(window.jimuNls.filterBuilder.setFilterTip),!1)},_initTabs:function(){this.tab=new e({tabs:[{title:this.nls.filterSetting.infoTab,content:this.infoTabNode},{title:this.nls.filterSetting.expressionsTab,content:this.expressionsTabNode},{title:this.nls.filterSetting.optionsTab,
content:this.optionsTabNode}]});this.tab.placeAt(this.tabsNode);this.own(u(this.tab,"tabChanged",D.hitch(this,function(){})))},reset:function(){this._setDefaultTaskIcon();this.cbxRemoveMapFilter.setValue(!1);this.nameTextBox.set("value","");this.filter.reset()},_setDefaultTaskIcon:function(){this.symbolPicker.showByType("marker")},_onNameTextBoxChanged:function(){var F=B(".label",this.target)[0],k=this.nameTextBox.get("value");F.innerHTML=k;F.title=k},_bindEventForLayerChooserSelect:function(F){F.isBindEvent||
(this.own(u(F,"selection-change",D.hitch(this,this._onLayerChanged))),F.isBindEvent=!0)},_showMessage:function(F){new l({message:F})},_onLayerChanged:function(){this.reset();var F=this.layerChooserSelect.getSelectedItem();if(F){F=F.layerInfo;var k=F.layerObject;this.nameTextBox.set("value",F.title);this.filter.buildByExpr(k.url,"1\x3d1",k)}},_getLayerDefinitionForFilterDijit:function(F){var k=null;"esri.layers.FeatureLayer"===F.declaredClass&&(k=g.getFeatureLayerDefinition(F));k||(k={currentVersion:F.currentVersion,
fields:D.clone(F.fields)});return k},_showLoading:function(){this.emit("loading")},_hideLoading:function(){this.emit("unloading")},updateLayerOptions:function(F){this.selectedSearchLayers=F;this._recreateLayerChooserSelect(!0)}})})},"jimu/dijit/LayerChooserFromMapWithDropbox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/keys dojo/Evented dojo/Deferred dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LayerChooserFromMapWithDropbox.html jimu/LayerInfos/LayerInfos".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l){return u([b,g,a],{templateString:m,baseClass:"jimu-layer-chooser-from-map-withdropbox",declaredClass:"jimu.dijit.LayerChooserFromMapWithDropbox",_selectedItem:null,_isLayerChooserShow:!1,layerInfosObj:null,layerChooser:null,customClass:"",postMixInProperties:function(){this.inherited(arguments);this.nls=window.jimuNls.queryableLayerSource;this.nls.customSelectLayer=this.label?this.label:this.nls.selectLayer},postCreate:function(){this.inherited(arguments);this.layerInfosObj=
l.getInstanceSync();this.layerChooser.domNode.style.zIndex=1;this.layerChooser.tree.domNode.style.borderTop="0";this.layerChooser.tree.domNode.style.maxHeight="290px";this.own(D(this.layerChooser,"tree-click",B.hitch(this,this._onTreeClick)));this.own(D(this.layerChooser,"update",B.hitch(this,this._onLayerChooserUpdate)));this.own(D(document.body,"click",B.hitch(this,this._onBodyClicked)));this.own(D(document.body,"keydown",B.hitch(this,function(t){t.keyCode===z.ENTER&&this._onBodyClicked(t)})));
this.own(D(this.layerChooser.domNode,"keydown",B.hitch(this,function(t){t.keyCode===z.ESCAPE&&this.hideLayerChooser()})))},destroy:function(){this.hideLayerChooser();this.layerChooser&&this.layerChooser.destroy();this.layerChooser=null;this.inherited(arguments)},getLayerChooser:function(){return this.layerChooser},setSelectedLayer:function(t){var A=new d;if(t){var v=this.layerInfosObj.getLayerOrTableInfoById(t.id);v?this.layerChooser.filter(v).then(B.hitch(this,function(e){e?(this._onSelectNewItem({layerInfo:v,
name:v.title,url:t.url}),A.resolve(!0)):A.resolve(!1)}),B.hitch(this,function(){A.resolve(!1)})):A.resolve(!1)}else this._onSelectNewItem(null),A.resolve(!0);return A},getSelectedItem:function(){return this._selectedItem},getSelectedItems:function(){return[this._selectedItem]},_onBodyClicked:function(t){t=t.target||t.srcElement;t===this.domNode||H.isDescendant(t,this.domNode)||t===this.layerChooser.domNode||H.isDescendant(t,this.layerChooser.domNode)||this.hideLayerChooser()},_onDropDownClick:function(t){t.stopPropagation();
t.preventDefault();this._isLayerChooserShow?this.hideLayerChooser():(this.isActive=!0,this.showLayerChooser())},_onDropDownKeydown:function(t){t.keyCode===z.ENTER&&this._onDropDownClick(t)},_getSelectedItems:function(){return this.layerChooser.getSelectedItems()},showLayerChooser:function(){this.layerChooser.domNode.style.minWidth=this.domNode.clientWidth+2+"px";c.open({parent:this,popup:this.layerChooser,around:this.domNode});var t=this.layerChooser.domNode.parentNode;t&&(H.addClass(t,"jimu-layer-chooser-from-map-withdropbox-popup"),
this.customClass&&H.addClass(t,this.customClass),this.layerChooser.tree.domNode.focus());this._isLayerChooserShow=!0},hideLayerChooser:function(){c.close(this.layerChooser);this._isLayerChooserShow=!1;this.isActive&&(this.dropDownBtn.focus(),this.isActive=!1)},_onLayerChooserUpdate:function(){this._selectedItem&&this.layerChooser.onlyShowVisible&&!this._selectedItem.layerInfo.isShowInMap()&&(this._selectedItem=null,this.emit("selection-change",[]))},_onSelectNewItem:function(t){var A=B.getObject("layerInfo.id",
!1,this._selectedItem)||-1,v=B.getObject("layerInfo.id",!1,t)||-1;A=A!==v;this._selectedItem=t;this.hideLayerChooser();t=B.getObject("layerInfo.title",!1,this._selectedItem)||"";this.layerNameNode.innerHTML=t;H.setAttr(this.layerNameNode,"title",t);t=B.getObject("layerInfo.layerObject",!1,this._selectedItem);A&&this.emit("selection-change",[t])},_onTreeClick:function(){var t=this._getSelectedItems();this._onSelectNewItem(0<t.length?t[0]:null)}})})},"widgets/NearMe/setting/CustomFeaturelayerChooserFromMap":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/Deferred","jimu/dijit/LayerChooserFromMap","jimu/dijit/QueryableLayerChooserFromMap"],function(u,B,H,D,z){return u([z],{selectedSearchLayers:[],postMixInProperties:function(){this.inherited(arguments);this.filter=B.hitch(this,D.andCombineFilters([this.filter,B.hitch(this,this._customFilter)]))},_customFilter:function(a){var d=new H;a.isTable?d.resolve(!1):a.getLayerObject().then(B.hitch(this,function(c){"Feature Layer"!==c.type||-1<this.selectedSearchLayers.indexOf(c.id)?d.resolve(!0):
d.resolve(!1)}),B.hitch(this,function(){d.resolve(!1)}));return d}})})},"jimu/dijit/QueryableLayerChooserFromMap":function(){define(["dojo/_base/lang","dojo/_base/html","dojo/_base/declare","./LayerChooserFromMap"],function(u,B,H,D){return H([D],{baseClass:"jimu-queryable-layer-chooser-from-map",declaredClass:"jimu.dijit.QueryableLayerChooserFromMap",showImageLayer:!0,mustSupportStatistics:!1,ignoreVirtualLayer:!1,postMixInProperties:function(){this.inherited(arguments);this.filter=this.showImageLayer?
D.createQueryableLayerFilter(this.mustSupportStatistics):D.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,this.mustSupportStatistics);this.ignoreVirtualLayer&&(this.filter=D.andCombineFilters([this.filter,u.hitch(this,this._ignoreVirtualLayerFilter)]))},_ignoreVirtualLayerFilter:function(z){return z.getLayerType().then(function(a){return!("ArcGISDynamicMapServiceLayer"===a||"ArcGISTiledMapServiceLayer"===a||"GroupLayer"===a)})},postCreate:function(){this.inherited(arguments);B.addClass(this.domNode,
"jimu-basic-layer-chooser-from-map")},getHandledItem:function(z){var a=this.inherited(arguments),d=z&&z.layerInfo;d=d&&d.layerObject;a.url=d&&d.url||"";return a}})})},"jimu/dijit/SymbolPicker":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dijit/TooltipDialog dijit/popup dijit/registry jimu/dijit/SymbolChooser jimu/symbolUtils".split(" "),function(u,B,H,D,z,a,d,c,b,g,m,l,t,A){return u([B,
H,D],{baseClass:"jimu-symbol-picker",declaredClass:"jimu.dijit.SymbolPicker",templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"symbolNode" class\x3d"symbol-node jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"separator jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8 jimu-float-leading"\x3e\x3c/div\x3e\x3c/div\x3e',tooltipDialog:null,_isTooltipDialogOpened:!1,symbol:null,type:null,cropImage:!1,customZIndex:null,postCreate:function(){this.inherited(arguments);
this._createTooltipDialog();this._hideTooltipDialog();var v=this.symbolChooser.getSymbol();v&&this._drawSymbol(v)},destroy:function(){this._hideTooltipDialog();this.symbolChooser&&this.symbolChooser.destroy();this.symbolChooser=null;this.inherited(arguments)},_createTooltipDialog:function(){var v=a.create("div");this.tooltipDialog=new g({content:v});this.symbolChooser=new t({cropImage:this.cropImage,customZIndex:this.customZIndex,symbol:this.symbol,type:this.type});this.symbolChooser.placeAt(v);this.symbolChooser.startup();
this.own(c(this.symbolChooser,"change",z.hitch(this,function(e){this._drawSymbol(e);this.emit("change",e)})));this.own(c(this.domNode,"click",z.hitch(this,function(e){e.stopPropagation();e.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():this._showTooltipDialog()})));this.own(c(document.body,"click",z.hitch(this,function(e){var n=e.target||e.srcElement;e=this._getColorPickers();if(!(0<e.length&&d.some(e,function(k){return k.isPartOfPopup(n)})))if(e=this.tooltipDialog.domNode,
e=n===e||a.isDescendant(n,e),this.cropImage&&this.symbolChooser._isCustomImageOptionSelected()){var q=this.symbolChooser.imageChooser,F=q.msgPopupOpen;q.cropPopupOpen||F||e||this._hideTooltipDialog();q.cropPopup&&q.cropPopup.domNode||(q.cropPopupOpen=!1);q.msgPopup&&q.msgPopup.domNode||(q.msgPopupOpen=!1)}else e||this._hideTooltipDialog()})));this.own(c(this.symbolChooser,"resize",z.hitch(this,function(){this._isTooltipDialogOpened&&(this._hideTooltipDialog(),this._showTooltipDialog())})))},_getColorPickers:function(){var v=
b(".jimu-color-picker",this.symbolChooser.domNode);return d.map(v,z.hitch(this,function(e){return l.byNode(e)}))},reset:function(){this.symbol=this.type=null;a.empty(this.symbolNode);this.symbolChooser.reset()},showBySymbol:function(v){this.reset();v&&(this._drawSymbol(v),this.symbolChooser.showBySymbol(v))},showByType:function(v){this.reset();this.symbolChooser.showByType(v);(v=this.symbolChooser.getSymbol())&&this._drawSymbol(v)},getSymbol:function(){return this.symbolChooser.getSymbol()},_drawSymbol:function(v){a.empty(this.symbolNode);
v&&(v=A.createSymbolNode(v,{width:16,height:16}))&&a.place(v,this.symbolNode)},_showTooltipDialog:function(){this.tooltipDialog&&(m.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.domNode}),this._isTooltipDialogOpened=!0)},_hideTooltipDialog:function(){this.tooltipDialog&&(m.close(this.tooltipDialog),this._isTooltipDialogOpened=!1)}})})},"widgets/NearMe/utils":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dojo/_base/array","dojo/_base/lang"],function(u,B,H,D){return u([B],
{map:null,postCreate:function(){},getLayerDetailsFromMap:function(z,a,d){var c={},b;this.map&&this.map.webMapResponse&&this.map.webMapResponse.itemInfo&&this.map.webMapResponse.itemInfo.itemData&&this.map.webMapResponse.itemInfo.itemData.operationalLayers&&H.forEach(this.map.webMapResponse.itemInfo.itemData.operationalLayers,D.hitch(this,function(g){g.layerObject&&("ArcGISMapServiceLayer"===g.layerType||"ArcGISTiledMapServiceLayer"===g.layerType?(b=d&&d.substring(0,d.lastIndexOf("_")),b&&g.id!==b||
(c.isMapServer=!0,c.id=g.id+"_"+a,g.visibility&&0<=g.layerObject.visibleLayers.indexOf(parseInt(a,10))?c.visibility=!0:c.visibility=!1,z.substring(0,z.length-1).replace(/.*?:\/\//g,"")===g.url.replace(/.*?:\/\//g,"")&&(H.forEach(g.resourceInfo.layers,D.hitch(this,function(m){m.id===parseInt(a,10)&&(c.title=m.name)})),H.forEach(g.layers,D.hitch(this,function(m){m.id===parseInt(a,10)&&(m.name&&(c.title=m.name),c.popupInfo=m.popupInfo,m.layerDefinition&&(m.layerDefinition.definitionExpression&&(c.definitionExpression=
m.layerDefinition.definitionExpression),m.layerDefinition.drawingInfo&&m.layerDefinition.drawingInfo.renderer&&(c.renderer=m.layerDefinition.drawingInfo.renderer)))}))))):d&&g.id!==d||g.url.replace(/.*?:\/\//g,"")!==(z+a).replace(/.*?:\/\//g,"")||d&&g.id!==d||(c.isMapServer=!1,c.title=g.title,c.visibility=g.visibility,c.popupInfo=g.popupInfo,c.id=g.id,g.layerDefinition&&(g.layerDefinition.definitionExpression&&(c.definitionExpression=g.layerDefinition.definitionExpression),g.layerDefinition.drawingInfo&&
g.layerDefinition.drawingInfo.renderer&&(c.renderer=g.layerDefinition.drawingInfo.renderer))))}));return c}})})},"jimu/dijit/EditorXssFilter":function(){define("dojo/_base/declare dojo/_base/array dijit/_WidgetBase dojo/_base/lang dojo/Evented libs/arcgis-html-sanitizer/arcgis-html-sanitizer".split(" "),function(u,B,H,D,z,a){var d=null,c=u([H,z],{baseClass:"jimu-editor-xss-filter",declaredClass:"jimu.dijit.EditorXssFilter",sanitizer:null,xss:null,whiteList:{},graphicsWhiteList:{},postCreate:function(){this.whiteList=
this._getWhiteList();this.sanitizer=new a({whiteList:this.whiteList,safeAttrValue:D.hitch(this,function(b,g,m,l){return"style"===g?this.xss.friendlyAttrValue(m).replace(/"/g,"'"):"img"===b&&"src"===g?this.xss.escapeAttrValue(m):this.xss.safeAttrValue(b,g,m,l)}),onTag:D.hitch(this,function(b,g,m){if(m.isWhite&&this._isInWhiteList(b,this.graphicsWhiteList))return g}),onIgnoreTagAttr:D.hitch(this,function(b,g,m,l){if("data-"===g.substr(0,5))return g+'\x3d"'+this.xss.escapeAttrValue(m)+'"'}),onIgnoreTag:D.hitch(this,
function(b,g,m){if("o:"===b.substr(0,2)||"!--[if"===b||"!--[endif]--"===b)return g})},!0);this.xss=this.sanitizer.xss},sanitize:function(b){return this.sanitizer.sanitize(b)},_getWhiteList:function(){var b="title height width class style font-family id align text-align".split(" "),g={div:b,h1:b,h2:b,h3:b,h4:b,h5:b,h6:b,span:b,p:b,s:b,strong:b,em:b,u:b,ol:b,ul:b,li:b,a:["href","target"].concat(b),img:["src","alt","border"].concat(b),blockquote:b,font:["face","size","color"].concat(b),pre:b,code:b,
b:b,i:b,wbr:b,video:"autoplay controls loop muted poster preload".split(" ").concat(b),audio:["autoplay","controls","loop","muted","preload"].concat(b),source:["media","src","type"].concat(b),table:["cellpadding","cellspacing","border"].concat(b),tbody:[].concat(b),tr:["valign"].concat(b),td:["valign","colspan","rowspan","nowrap"].concat(b),th:["valign","colspan","rowspan","nowrap"].concat(b),hr:b,html:b,title:b,link:["rel","href"],style:["type"].concat(b),body:b};this.graphicsWhiteList={animate:[],
animateMotion:[],animateTransform:[],circle:[],clipPath:[],"color-profile":[],defs:[],desc:[],discard:[],ellipse:[],feBlend:[],feColorMatrix:[],feComponentTransfer:[],feComposite:[],feConvolveMatrix:[],feDiffuseLighting:[],feDisplacementMap:[],feDistantLight:[],feDropShadow:[],feFlood:[],feFuncA:[],feFuncB:[],feFuncG:[],feFuncR:[],feGaussianBlur:[],feImage:[],feMerge:[],feMergeNode:[],feMorphology:[],feOffset:[],fePointLight:[],feSpecularLighting:[],feSpotLight:[],feTile:[],feTurbulence:[],filter:[],
foreignObject:[],g:[],hatch:[],hatchpath:[],line:[],linearGradient:[],marker:[],mask:[],mesh:[],meshgradient:[],meshpatch:[],meshrow:[],metadata:[],mpath:[],path:[],pattern:[],polygon:[],polyline:[],radialGradient:[],rect:[],set:[],solidcolor:[],stop:[],svg:[],switch:[],symbol:[],text:[],textPath:[],title:[],tspan:[],use:[],view:[],object:[],canvas:b};return this._extendObjectOfArrays([g,{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],
audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],
small:[],span:[],sub:[],summary:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls loop preload src height width".split(" ")},this.graphicsWhiteList])},_extendObjectOfArrays:function(b){var g={};B.forEach(b,function(m){var l=Object.keys(m);B.forEach(l,
function(t){Array.isArray(m[t])&&Array.isArray(g[t])?g[t]=g[t].concat(m[t]):g[t]=m[t]},this)},this);return g},_isInWhiteList:function(b,g){g=Object.keys(g);var m=!1;B.forEach(g,function(l){b===l&&(m=!0)},this);return m}});c.getInstance=function(){null===d&&(d=new c);return d};return c})},"dijit/_editor/plugins/LinkDialog":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/query dojo/string ../_Plugin ../../form/DropDownButton ../range".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t){var A=H("dijit._editor.plugins.LinkDialog",m,{allowUnsafeHtml:!1,linkFilter:[[/</g,"\x26lt;"]],buttonClass:l,useDefaultCommand:!1,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",
emailRegExp:"\x3c?(mailto\\:)([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*\x3e?",htmlTemplate:'\x3ca href\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" target\x3d"${targetSelect}"\x3e${textInput}\x3c/a\x3e',tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,
linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_targetSelect'\x3e${target}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect id\x3d'${id}_targetSelect' name\x3d'targetSelect' data-dojo-type\x3d'dijit.form.Select'\x3e\x3coption selected\x3d'selected' value\x3d'_self'\x3e${currentWindow}\x3c/option\x3e\x3coption value\x3d'_blank'\x3e${newWindow}\x3c/option\x3e\x3coption value\x3d'_top'\x3e${topWindow}\x3c/option\x3e\x3coption value\x3d'_parent'\x3e${parentWindow}\x3c/option\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){this.inherited(arguments);this.button.loadDropDown=a.hitch(this,"_loadDropDown");this._connectTagEvents()},_loadDropDown:function(e){u("dojo/i18n ../../TooltipDialog ../../registry ../../form/Button ../../form/Select ../../form/ValidationTextBox dojo/i18n!../../nls/common dojo/i18n!../nls/LinkDialog".split(" "),a.hitch(this,function(n,q,F){var k=this;this.tag="insertImage"==this.command?"img":"a";n=a.delegate(n.getLocalization("dijit","common",this.lang),n.getLocalization("dijit._editor",
"LinkDialog",this.lang));var f=this.dropDown=this.button.dropDown=new q({title:n[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:a.hitch(this,"setValue"),onOpen:function(){k._onOpenDialog();q.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(a.hitch(k,"_onCloseDialog"),0)}});n.urlRegExp=this.urlRegExp;n.id=F.getUniqueId(this.editor.id);this._uniqueId=n.id;this._setContent(f.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+
g.substitute(this.linkDialogTemplate,n));f.startup();this._urlInput=F.byId(this._uniqueId+"_urlInput");this._textInput=F.byId(this._uniqueId+"_textInput");this._setButton=F.byId(this._uniqueId+"_setButton");this.own(F.byId(this._uniqueId+"_cancelButton").on("click",a.hitch(this.dropDown,"onCancel")));this._urlInput&&this.own(this._urlInput.on("change",a.hitch(this,"_checkAndFixInput")));this._textInput&&this.own(this._textInput.on("change",a.hitch(this,"_checkAndFixInput")));this._urlRegExp=new RegExp("^"+
this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=a.hitch(this,function(){var w=this._urlInput.get("value");return this._urlRegExp.test(w)||this._emailRegExp.test(w)});this.own(d(f.domNode,"keydown",a.hitch(this,a.hitch(this,function(w){!w||w.keyCode!=z.ENTER||w.shiftKey||w.metaKey||w.ctrlKey||w.altKey||this._setButton.get("disabled")||(f.onExecute(),f.execute(f.get("value")))}))));e()}))},_checkAndFixInput:function(){var e=this,n=this._urlInput.get("value");
this._delayedCheck&&(clearTimeout(this._delayedCheck),this._delayedCheck=null);this._delayedCheck=setTimeout(function(){var q=n,F=!1,k=!1;q&&1<q.length&&(q=a.trim(q),0!==q.indexOf("mailto:")&&(0<q.indexOf("/")?-1===q.indexOf("://")&&"/"!==q.charAt(0)&&q.indexOf("./")&&0!==q.indexOf("../")&&e._hostRxp.test(q)&&(F=!0):e._userAtRxp.test(q)&&(k=!0)));F&&e._urlInput.set("value","http://"+q);k&&e._urlInput.set("value","mailto:"+q);e._setButton.set("disabled",!e._isValid())},250)},_connectTagEvents:function(){this.editor.onLoadDeferred.then(a.hitch(this,
function(){this.own(d(this.editor.editNode,"mouseup",a.hitch(this,"_onMouseUp")));this.own(d(this.editor.editNode,"dblclick",a.hitch(this,"_onDblClick")))}))},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid()},_setContent:function(e){this.dropDown.set({parserScope:"dojo",content:e})},_checkValues:function(e){e&&e.urlInput&&(e.urlInput=e.urlInput.replace(/"/g,"\x26quot;"));!this.allowUnsafeHtml&&e&&e.textInput&&("function"===typeof this.linkFilter?e.textInput=this.linkFilter(e.textInput):
B.forEach(this.linkFilter,function(n){e.textInput=e.textInput.replace(n[0],n[1])}));return e},_createlinkEnabledImpl:function(){return!0},setValue:function(e){this._onCloseDialog();if(9>c("ie")){var n=t.getSelection(this.editor.window).getRangeAt(0).endContainer;3===n.nodeType&&(n=n.parentNode);n&&n.nodeName&&n.nodeName.toLowerCase()!==this.tag&&(n=this.editor.selection.getSelectedElement(this.tag));n&&n.nodeName&&n.nodeName.toLowerCase()===this.tag&&this.editor.queryCommandEnabled("unlink")&&(this.editor.selection.selectElementChildren(n),
this.editor.execCommand("unlink"))}e=this._checkValues(e);this.editor.execCommand("inserthtml",g.substitute(this.htmlTemplate,e));b("a",this.editor.document).forEach(function(q){q.innerHTML||D.has(q,"name")||q.parentNode.removeChild(q)},this)},_onCloseDialog:function(){this.editor.focused&&this.editor.focus()},_getCurrentValues:function(e){if(e&&e.tagName.toLowerCase()===this.tag){var n=e.getAttribute("_djrealurl")||e.getAttribute("href");var q=e.getAttribute("target")||"_self";var F=e.textContent||
e.innerText;this.editor.selection.selectElement(e,!0)}else F=this.editor.selection.getSelectedText();return{urlInput:n||"",textInput:F||"",targetSelect:q||""}},_onOpenDialog:function(){if(c("ie")){var e=t.getSelection(this.editor.window);if(e.rangeCount){var n=e.getRangeAt(0);var q=n.endContainer;3===q.nodeType&&(q=q.parentNode);q&&q.nodeName&&q.nodeName.toLowerCase()!==this.tag&&(q=this.editor.selection.getSelectedElement(this.tag));if(!q||q.nodeName&&q.nodeName.toLowerCase()!==this.tag)(e=this.editor.selection.getAncestorElement(this.tag))&&
e.nodeName&&e.nodeName.toLowerCase()==this.tag?(q=e,this.editor.selection.selectElement(q)):n.startContainer===n.endContainer&&(e=n.startContainer.firstChild)&&e.nodeName&&e.nodeName.toLowerCase()==this.tag&&(q=e,this.editor.selection.selectElement(q))}}else q=this.editor.selection.getAncestorElement(this.tag);this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(q))},_onDblClick:function(e){if(e&&e.target&&(e=e.target,(e.tagName?e.tagName.toLowerCase():
"")===this.tag&&D.get(e,"href"))){var n=this.editor;this.editor.selection.selectElement(e);n.onDisplayChanged();n._updateTimer&&(n._updateTimer.remove(),delete n._updateTimer);n.onNormalizedDisplayChanged();var q=this.button;setTimeout(function(){q.set("disabled",!1);q.loadAndOpenDropDown().then(function(){q.dropDown.focus&&q.dropDown.focus()})},10)}},_onMouseUp:function(){if(c("ff")){var e=this.editor.selection.getAncestorElement(this.tag);if(e){var n=t.getSelection(this.editor.window).getRangeAt(0);
if(n.collapsed&&e.childNodes.length){var q=n.cloneRange();q.selectNodeContents(e.childNodes[e.childNodes.length-1]);q.setStart(e.childNodes[0],0);1!==n.compareBoundaryPoints(q.START_TO_START,q)?n.setStartBefore(e):-1!==n.compareBoundaryPoints(q.END_TO_START,q)&&n.setStartAfter(e)}}}}}),v=H("dijit._editor.plugins.ImgLinkDialog",[A],{linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' regExp\x3d'${urlRegExp}' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'false' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
htmlTemplate:'\x3cimg src\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" alt\x3d"${textInput}" /\x3e',tag:"img",_getCurrentValues:function(e){if(e&&e.tagName.toLowerCase()===this.tag){var n=e.getAttribute("_djrealurl")||e.getAttribute("src");var q=e.getAttribute("alt");this.editor.selection.selectElement(e,!0)}else q=this.editor.selection.getSelectedText();return{urlInput:n||"",textInput:q||""}},_isValid:function(){return this._urlInput.isValid()},_connectTagEvents:function(){this.inherited(arguments);
this.editor.onLoadDeferred.then(a.hitch(this,function(){this.own(d(this.editor.editNode,"mousedown",a.hitch(this,"_selectTag")))}))},_selectTag:function(e){e&&e.target&&(e=e.target,(e.tagName?e.tagName.toLowerCase():"")===this.tag&&this.editor.selection.selectElement(e))},_checkValues:function(e){e&&e.urlInput&&(e.urlInput=e.urlInput.replace(/"/g,"\x26quot;"));e&&e.textInput&&(e.textInput=e.textInput.replace(/"/g,"\x26quot;"));return e},_onDblClick:function(e){if(e&&e.target&&(e=e.target,(e.tagName?
e.tagName.toLowerCase():"")===this.tag&&D.get(e,"src"))){var n=this.editor;this.editor.selection.selectElement(e);n.onDisplayChanged();n._updateTimer&&(n._updateTimer.remove(),delete n._updateTimer);n.onNormalizedDisplayChanged();var q=this.button;setTimeout(function(){q.set("disabled",!1);q.loadAndOpenDropDown().then(function(){q.dropDown.focus&&q.dropDown.focus()})},10)}}});m.registry.createLink=function(e){var n={command:"createLink",allowUnsafeHtml:"allowUnsafeHtml"in e?e.allowUnsafeHtml:!1};
"linkFilter"in e&&(n.linkFilter=e.linkFilter);return new A(n)};m.registry.insertImage=function(){return new v({command:"insertImage"})};A.ImgLinkDialog=v;return A})},"dijit/_editor/plugins/ViewSource":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/window ../../focus ../_Plugin ../../form/ToggleButton ../.. ../../registry dojo/i18n!../nls/commands".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v,e,n,q){var F=H("dijit._editor.plugins.ViewSource",v,{stripScripts:!0,stripComments:!0,stripIFrames:!0,stripEventHandlers:!0,readOnly:!1,_fsPlugin:null,toggle:function(){l("webkit")&&(this._vsFocused=!0);this.button.set("checked",!this.button.get("checked"))},_initButton:function(){var k=c.getLocalization("dijit._editor","commands"),f=this.editor;this.button=new e({label:k.viewSource,ownerDocument:f.ownerDocument,dir:f.dir,lang:f.lang,showLabel:!1,iconClass:this.iconClassPrefix+
" "+this.iconClassPrefix+"ViewSource",tabIndex:"-1",onChange:g.hitch(this,"_showSource")});this.button.set("readOnly",!1)},setEditor:function(k){this.editor=k;this._initButton();this.removeValueFilterHandles();this._setValueFilterHandle=B.before(this.editor,"setValue",g.hitch(this,function(f){return[this._filter(f)]}));this._getValueFilterHandle=B.after(this.editor,"getValue",g.hitch(this,function(f){return this._filter(f)}));this.editor.addKeyHandler(b.F12,!0,!0,g.hitch(this,function(f){this.button.focus();
this.toggle();f.stopPropagation();f.preventDefault();setTimeout(g.hitch(this,function(){this.editor.focused&&this.editor.focus()}),100)}))},_showSource:function(k){var f=this.editor,w=f._plugins;this._sourceShown=k;var C=this;try{this.sourceArea||this._createSourceView();if(k)f._sourceQueryCommandEnabled=f.queryCommandEnabled,f.queryCommandEnabled=function(I){return"viewsource"===I.toLowerCase()},this.editor.onDisplayChanged(),u.forEach(w,function(I){!I||I instanceof F||!I.isInstanceOf(v)||I.set("disabled",
!0)}),this._fsPlugin&&(this._fsPlugin._getAltViewNode=function(){return C.sourceArea}),this.sourceArea.value=f.get("value"),this.sourceArea.style.height=f.iframe.style.height,this.sourceArea.style.width=f.iframe.style.width,f.iframe.parentNode.style.position="relative",d.set(f.iframe,{position:"absolute",top:0,visibility:"hidden"}),d.set(this.sourceArea,{display:"block"}),this._resizeHandle=m(window,"resize",g.hitch(this,function(){var I=t.getBox(f.ownerDocument);"_prevW"in this&&"_prevH"in this&&
I.w===this._prevW&&I.h===this._prevH||(this._prevW=I.w,this._prevH=I.h,this._resizer&&(clearTimeout(this._resizer),delete this._resizer),this._resizer=setTimeout(g.hitch(this,function(){delete this._resizer;this._resize()}),10))})),setTimeout(g.hitch(this,this._resize),100),this.editor.onNormalizedDisplayChanged(),this.editor.__oldGetValue=this.editor.getValue,this.editor.getValue=g.hitch(this,function(){var I=this.sourceArea.value;return I=this._filter(I)}),this._setListener=B.after(this.editor,
"setValue",g.hitch(this,function(I){this.sourceArea.value=I||""}),!0);else{if(!f._sourceQueryCommandEnabled)return;this._setListener.remove();delete this._setListener;this._resizeHandle.remove();delete this._resizeHandle;this.editor.__oldGetValue&&(this.editor.getValue=this.editor.__oldGetValue,delete this.editor.__oldGetValue);f.queryCommandEnabled=f._sourceQueryCommandEnabled;if(!this._readOnly){var L=this.sourceArea.value;f.beginEditing();f.set("value",L);f.endEditing()}u.forEach(w,function(I){I&&
I.isInstanceOf(v)&&I.set("disabled",!1)});d.set(this.sourceArea,"display","none");d.set(f.iframe,{position:"relative",visibility:"visible"});delete f._sourceQueryCommandEnabled;this.editor.onDisplayChanged()}setTimeout(g.hitch(this,function(){var I=f.domNode.parentNode;I&&(I=q.getEnclosingWidget(I))&&I.resize&&I.resize();f.resize()}),300)}catch(I){console.log(I)}},updateState:function(){this.button.set("disabled",this.get("disabled"))},_resize:function(){var k=this.editor,f=k.getHeaderHeight(),w=
k.getFooterHeight(),C=a.position(k.domNode),L=a.getPadBorderExtents(k.iframe.parentNode),I=a.getMarginExtents(k.iframe.parentNode),E=a.getPadBorderExtents(k.domNode),r=C.w-E.w;C=C.h-(f+E.h+w);this._fsPlugin&&this._fsPlugin.isFullscreen&&(k=t.getBox(k.ownerDocument),r=k.w-E.w,C=k.h-(f+E.h+w));a.setMarginBox(this.sourceArea,{w:Math.round(r-(L.w+I.w)),h:Math.round(C-(L.h+I.h))})},_createSourceView:function(){var k=this.editor,f=k._plugins;this.sourceArea=z.create("textarea");this.readOnly&&(D.set(this.sourceArea,
"readOnly",!0),this._readOnly=!0);d.set(this.sourceArea,{padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});D.set(this.sourceArea,"aria-label",this.editor.id);z.place(this.sourceArea,k.iframe,"before");l("ie")&&k.iframe.parentNode.lastChild!==k.iframe&&d.set(k.iframe.parentNode.lastChild,{width:"0px",height:"0px",padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});k._viewsource_oldFocus=k.focus;var w=this;k.focus=function(){if(w._sourceShown)w.setSourceAreaCaret();else try{this._vsFocused?
(delete this._vsFocused,A.focus(k.editNode)):k._viewsource_oldFocus()}catch(I){console.log("ViewSource focus code error: "+I)}};var C,L;for(C=0;C<f.length;C++)if((L=f[C])&&("dijit._editor.plugins.FullScreen"===L.declaredClass||L.declaredClass===n._scopeName+"._editor.plugins.FullScreen")){this._fsPlugin=L;break}this._fsPlugin&&(this._fsPlugin._viewsource_getAltViewNode=this._fsPlugin._getAltViewNode,this._fsPlugin._getAltViewNode=function(){return w._sourceShown?w.sourceArea:this._viewsource_getAltViewNode()});
this.own(m(this.sourceArea,"keydown",g.hitch(this,function(I){this._sourceShown&&I.keyCode==b.F12&&I.ctrlKey&&I.shiftKey&&(this.button.focus(),this.button.set("checked",!1),setTimeout(g.hitch(this,function(){k.focus()}),100),I.stopPropagation(),I.preventDefault())})))},_stripScripts:function(k){k&&(k=k.replace(/<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>/ig,""),k=k.replace(/<\s*script\b([^<>]|\s)*>?/ig,""),k=k.replace(/<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>/ig,""));return k},_stripComments:function(k){k&&
(k=k.replace(/\x3c!--(.|\s){1,}?--\x3e/g,""));return k},_stripIFrames:function(k){k&&(k=k.replace(/<\s*iframe[^>]*>((.|\s)*?)<\\?\/\s*iframe\s*>/ig,""));return k},_stripEventHandlers:function(k){if(k){var f=k.match(/<[a-z]+?\b(.*?on.*?(['"]).*?\2.*?)+>/gim);if(f)for(var w=0,C=f.length;w<C;w++){var L=f[w],I=L.replace(/\s+on[a-z]*\s*=\s*(['"])(.*?)\1/igm,"");k=k.replace(L,I)}}return k},_filter:function(k){k&&(this.stripScripts&&(k=this._stripScripts(k)),this.stripComments&&(k=this._stripComments(k)),
this.stripIFrames&&(k=this._stripIFrames(k)),this.stripEventHandlers&&(k=this._stripEventHandlers(k)));return k},removeValueFilterHandles:function(){this._setValueFilterHandle&&(this._setValueFilterHandle.remove(),delete this._setValueFilterHandle);this._getValueFilterHandle&&(this._getValueFilterHandle.remove(),delete this._getValueFilterHandle)},setSourceAreaCaret:function(){var k=this.sourceArea;A.focus(k);this._sourceShown&&!this.readOnly&&(k.setSelectionRange?k.setSelectionRange(0,0):this.sourceArea.createTextRange&&
(k=k.createTextRange(),k.collapse(!0),k.moveStart("character",-99999),k.moveStart("character",0),k.moveEnd("character",0),k.select()))},destroy:function(){this._resizer&&(clearTimeout(this._resizer),delete this._resizer);this._resizeHandle&&(this._resizeHandle.remove(),delete this._resizeHandle);this._setListener&&(this._setListener.remove(),delete this._setListener);this.removeValueFilterHandles();this.inherited(arguments)}});v.registry.viewSource=v.registry.viewsource=function(k){return new F({readOnly:"readOnly"in
k?k.readOnly:!1,stripComments:"stripComments"in k?k.stripComments:!0,stripScripts:"stripScripts"in k?k.stripScripts:!0,stripIFrames:"stripIFrames"in k?k.stripIFrames:!0,stripEventHandlers:"stripEventHandlers"in k?k.stripEventHandlers:!0})};return F})},"dijit/_editor/plugins/FontChoice":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-construct dojo/i18n dojo/_base/lang dojo/string dojo/store/Memory ../../registry ../../_Widget ../../_TemplatedMixin ../../_WidgetsInTemplateMixin ../../form/FilteringSelect ../_Plugin ../range dojo/i18n!../nls/FontChoice".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v){u=H("dijit._editor.plugins._FontDropDown",[g,m,l],{label:"",plainText:!1,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${selectId}'\x3e${label}\x3c/label\x3e\x3cinput data-dojo-type\x3d'../../form/FilteringSelect' required\x3d'false' data-dojo-props\x3d'labelType:\"html\", labelAttr:\"label\", searchAttr:\"name\"' class\x3d'${comboClass}' tabIndex\x3d'-1' id\x3d'${selectId}' data-dojo-attach-point\x3d'select' value\x3d''/\x3e\x3c/span\x3e",
contextRequire:u,postMixInProperties:function(){this.inherited(arguments);this.strings=z.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=b.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments)},postCreate:function(){this.select.set("store",new c({idProperty:"value",data:B.map(this.values,function(k){var f=this.strings[k]||k;return{label:this.getLabel(k,f),name:f,value:k}},this)}));this.select.set("value",
"",!1);this.disabled=this.select.get("disabled")},_setValueAttr:function(k,f){f=!1!==f;this.select.set("value",0>B.indexOf(this.values,k)?"":k,f);f||(this.select._lastValueReported=null)},_getValueAttr:function(){return this.select.get("value")},focus:function(){this.select.focus()},_setDisabledAttr:function(k){this._set("disabled",k);this.select.set("disabled",k)}});var e=H("dijit._editor.plugins._FontNameDropDown",u,{generic:!1,command:"fontName",comboClass:"dijitFontNameCombo",postMixInProperties:function(){this.values||
(this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"]);this.inherited(arguments)},getLabel:function(k,f){return this.plainText?f:"\x3cdiv style\x3d'font-family: "+k+"'\x3e"+f+"\x3c/div\x3e"},_normalizeFontName:function(k){var f=this.values;if(!k||!f)return k;var w=k.split(",");if(1<w.length)for(var C=0,L=w.length;C<L;C++){var I=d.trim(w[C]);if(-1<B.indexOf(f,I))return I}return k},_setValueAttr:function(k,f){f=!1!==
f;k=this._normalizeFontName(k);this.generic&&(k={Arial:"sans-serif",Helvetica:"sans-serif",Myriad:"sans-serif",Times:"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive",Courier:"monospace","Courier New":"monospace",Papyrus:"fantasy","Estrangelo Edessa":"cursive",Gabriola:"fantasy"}[k]||k);this.inherited(arguments,[k,f])}}),n=H("dijit._editor.plugins._FontSizeDropDown",u,{command:"fontSize",comboClass:"dijitFontSizeCombo",values:[1,2,3,4,5,6,7],getLabel:function(k,
f){return this.plainText?f:"\x3cfont size\x3d"+k+"'\x3e"+f+"\x3c/font\x3e"},_setValueAttr:function(k,f){f=!1!==f;k.indexOf&&-1!=k.indexOf("px")&&(k={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[parseInt(k,10)]||k);this.inherited(arguments,[k,f])}}),q=H("dijit._editor.plugins._FormatBlockDropDown",u,{command:"formatBlock",comboClass:"dijitFormatBlockCombo",values:"noFormat p h1 h2 h3 pre".split(" "),postCreate:function(){this.inherited(arguments);this.set("value","noFormat",!1)},getLabel:function(k,f){return this.plainText||
"noFormat"==k?f:"\x3c"+k+"\x3e"+f+"\x3c/"+k+"\x3e"},_execCommand:function(k,f,w){if("noFormat"===w){var C;if((f=v.getSelection(k.window))&&0<f.rangeCount&&(w=f.getRangeAt(0),w)){f=w.startContainer;for(C=w.endContainer;f&&f!==k.editNode&&f!==k.document.body&&1!==f.nodeType;)f=f.parentNode;for(;C&&C!==k.editNode&&C!==k.document.body&&1!==C.nodeType;)C=C.parentNode;var L=a.hitch(this,function(x,M){if(x.childNodes&&x.childNodes.length){var O;for(O=0;O<x.childNodes.length;O++){var h=x.childNodes[O];if(1==
h.nodeType&&k.selection.inSelection(h)){var p=h.tagName?h.tagName.toLowerCase():"";-1!==B.indexOf(this.values,p)&&M.push(h);L(h,M)}}}});w=a.hitch(this,function(x){if(x&&x.length){for(k.beginEditing();x.length;)this._removeFormat(k,x.pop());k.endEditing()}});var I=[];if(f==C){for(C=f;C&&C!==k.editNode&&C!==k.document.body;){if(1==C.nodeType){var E=C.tagName?C.tagName.toLowerCase():"";if(-1!==B.indexOf(this.values,E)){var r=C;break}}C=C.parentNode}L(f,I);r&&(I=[r].concat(I))}else for(C=f;k.selection.inSelection(C);)1==
C.nodeType&&(E=C.tagName?C.tagName.toLowerCase():"",-1!==B.indexOf(this.values,E)&&I.push(C),L(C,I)),C=C.nextSibling;w(I);k.onDisplayChanged()}}else k.execCommand(f,w)},_removeFormat:function(k,f){if(k.customUndo){for(;f.firstChild;)D.place(f.firstChild,f,"before");f.parentNode.removeChild(f)}else{k.selection.selectElementChildren(f);var w=k.selection.getSelectedHtml();k.selection.selectElement(f);k.execCommand("inserthtml",w||"")}}}),F=H("dijit._editor.plugins.FontChoice",A,{useDefaultCommand:!1,
_initButton:function(){var k={fontName:e,fontSize:n,formatBlock:q}[this.command],f=this.params;this.params.custom&&(f.values=this.params.custom);var w=this.editor;this.button=new k(a.delegate({dir:w.dir,lang:w.lang},f));this.own(this.button.select.on("change",a.hitch(this,function(C){this.editor.focused&&this.editor.focus();"fontName"==this.command&&-1!=C.indexOf(" ")&&(C="'"+C+"'");this.button._execCommand?this.button._execCommand(this.editor,this.command,C):this.editor.execCommand(this.command,
C)})))},updateState:function(){var k=this.editor,f=this.command;if(k&&k.isLoaded&&f.length&&this.button){var w=this.get("disabled");this.button.set("disabled",w);if(!w){try{var C=k.queryCommandValue(f)||""}catch(I){C=""}(w=a.isString(C)&&(C.match(/'([^']*)'/)||C.match(/"([^"]*)"/)))&&(C=w[1]);"fontSize"!==f||C||(C=3);if("formatBlock"===f)if(C&&"p"!=C)0>B.indexOf(this.button.values,C)&&(C="noFormat");else{C=null;if((f=v.getSelection(this.editor.window))&&0<f.rangeCount&&(f=f.getRangeAt(0)))var L=f.endContainer;
for(;L&&L!==k.editNode&&L!==k.document;){if((f=L.tagName?L.tagName.toLowerCase():"")&&-1<B.indexOf(this.button.values,f)){C=f;break}L=L.parentNode}C||(C="noFormat")}C!==this.button.get("value")&&this.button.set("value",C,!1)}}}});B.forEach(["fontName","fontSize","formatBlock"],function(k){A.registry[k]=function(f){return new F({command:k,plainText:f.plainText})}});F._FontDropDown=u;F._FontNameDropDown=e;F._FontSizeDropDown=n;F._FormatBlockDropDown=q;return F})},"dojox/editor/plugins/Preview":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/Button dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Preview".split(" "),
function(u,B,H,D){var z=u.declare("dojox.editor.plugins.Preview",D,{useDefaultCommand:!1,styles:"",stylesheets:null,iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=u.i18n.getLocalization("dojox.editor.plugins","Preview");this.button=new B.form.Button({label:this._nlsResources.preview,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Preview",tabIndex:"-1",onClick:u.hitch(this,"_preview")})},setEditor:function(a){this.editor=a;this._initButton()},
updateState:function(){this.button.set("disabled",this.get("disabled"))},_preview:function(){try{var a=this.editor.get("value"),d="\t\t\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html; charset\x3dUTF-8'\x3e\n",c;if(this.stylesheets)for(c=0;c<this.stylesheets.length;c++)d+="\t\t\x3clink rel\x3d'stylesheet' type\x3d'text/css' href\x3d'"+this.stylesheets[c]+"'\x3e\n";this.styles&&(d+="\t\t\x3cstyle\x3e"+this.styles+"\x3c/style\x3e\n");a="\x3chtml\x3e\n\t\x3chead\x3e\n"+d+"\t\x3c/head\x3e\n\t\x3cbody\x3e\n"+
a+"\n\t\x3c/body\x3e\n\x3c/html\x3e";var b=window.open("javascript: ''",this._nlsResources.preview,"status\x3d1,menubar\x3d0,location\x3d0,toolbar\x3d0");b.document.open();b.document.write(a);b.document.close()}catch(g){console.warn(g)}}});u.subscribe(B._scopeName+".Editor.getPlugin",null,function(a){a.plugin||"preview"!==a.args.name.toLowerCase()||(a.plugin=new z({styles:"styles"in a.args?a.args.styles:"",stylesheets:"stylesheets"in a.args?a.args.stylesheets:null}))});return z})},"dijit/_editor/plugins/TextColor":function(){define("require dojo/colors dojo/_base/declare dojo/_base/lang ../_Plugin ../../form/DropDownButton".split(" "),
function(u,B,H,D,z,a){var d=H("dijit._editor.plugins.TextColor",z,{buttonClass:a,colorPicker:"dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command=this.name;this.inherited(arguments);var c=this;this.button.loadDropDown=function(b){function g(m){c.button.dropDown=new m({dir:c.editor.dir,ownerDocument:c.editor.ownerDocument,value:c.value,onChange:function(l){c.editor.execCommand(c.command,l)},onExecute:function(){c.editor.execCommand(c.command,this.get("value"))}});b()}"string"==
typeof c.colorPicker?u([c.colorPicker],g):g(c.colorPicker)}},updateState:function(){var c=this.editor,b=this.command;if(c&&c.isLoaded&&b.length){if(this.button){var g=this.get("disabled");this.button.set("disabled",g);if(g)return;try{var m=c.queryCommandValue(b)||""}catch(l){m=""}}""==m&&(m="#000000");"transparent"==m&&(m="#ffffff");"string"==typeof m?-1<m.indexOf("rgb")&&(m=B.fromRgb(m).toHex()):(m=((m&255)<<16|m&65280|(m&16711680)>>>16).toString(16),m="#000000".slice(0,7-m.length)+m);this.value=
m;(c=this.button.dropDown)&&c.get&&m!==c.get("value")&&c.set("value",m,!1)}}});z.registry.foreColor=function(c){return new d(c)};z.registry.hiliteColor=function(c){return new d(c)};return d})},"dojox/editor/plugins/ToolbarLineBreak":function(){define("dojo dijit dojox dijit/_Widget dijit/_TemplatedMixin dijit/_editor/_Plugin dojo/_base/declare".split(" "),function(u,B,H,D,z,a,d){var c=d("dojox.editor.plugins.ToolbarLineBreak",[D,z],{templateString:"\x3cspan class\x3d'dijit dijitReset'\x3e\x3cbr\x3e\x3c/span\x3e",
postCreate:function(){u.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}});u.subscribe(B._scopeName+".Editor.getPlugin",null,function(b){if(!b.plugin){var g=b.args.name.toLowerCase();if("||"===g||"toolbarlinebreak"===g)b.plugin=new a({button:new c,setEditor:function(m){this.editor=m}})}});return c})},"dojox/editor/plugins/FindReplace":function(){define("dojo dijit dojox dijit/_base/manager dijit/_base/popup dijit/_Widget dijit/_TemplatedMixin dijit/_KeyNavContainer dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/Toolbar dijit/form/CheckBox dijit/form/_TextBoxMixin dijit/form/TextBox dijit/_editor/_Plugin dijit/form/Button dijit/form/DropDownButton dijit/form/ToggleButton ./ToolbarLineBreak dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/FindReplace".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v){u.experimental("dojox.editor.plugins.FindReplace");var e=u.declare("dojox.editor.plugins._FindReplaceCloseBox",[a,d,b],{btnId:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'float: right' class\x3d'dijitInline' tabindex\x3d'-1'\x3e\x3cbutton class\x3d'dijit dijitReset dijitInline' id\x3d'${btnId}' dojoAttachPoint\x3d'button' dojoType\x3d'dijit.form.Button' tabindex\x3d'-1' iconClass\x3d'dijitEditorIconsFindReplaceClose' showLabel\x3d'false'\x3eX\x3c/button\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=B.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.btnId=this.id+"_close";this.inherited(arguments)},startup:function(){this.connect(this.button,"onClick","onClick")},onClick:function(){}}),n=u.declare("dojox.editor.plugins._FindReplaceTextBox",[a,d,b],{textId:"",label:"",toolTip:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceTextBox' title\x3d'${tooltip}' tabindex\x3d'-1'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${textId}' tabindex\x3d'-1'\x3e${label}\x3c/label\x3e\x3cinput dojoType\x3d'dijit.form.TextBox' intermediateChanges\x3d'true' class\x3d'focusTextBox' tabIndex\x3d'0' id\x3d'${textId}' dojoAttachPoint\x3d'textBox, focusNode' value\x3d'' dojoAttachEvent\x3d'onKeyPress: _onKeyPress'/\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=B.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.textId=this.id+"_text";this.inherited(arguments)},postCreate:function(){this.textBox.set("value","");this.disabled=this.textBox.get("disabled");this.connect(this.textBox,"onChange","onChange");u.attr(this.textBox.textbox,"formnovalidate","true")},_setValueAttr:function(f){this.value=f;this.textBox.set("value",f)},focus:function(){this.textBox.focus()},_setDisabledAttr:function(f){this.disabled=f;this.textBox.set("disabled",
f)},onChange:function(f){this.value=f},_onKeyPress:function(f){var w=0,C=0;!f.target||f.ctrlKey||f.altKey||f.shiftKey||(f.keyCode==u.keys.LEFT_ARROW?(w=f.target.selectionStart,C=f.target.selectionEnd,w<C&&(B.selectInputText(f.target,w,w),u.stopEvent(f))):f.keyCode==u.keys.RIGHT_ARROW&&(w=f.target.selectionStart,C=f.target.selectionEnd,w<C&&(B.selectInputText(f.target,C,C),u.stopEvent(f))))}}),q=u.declare("dojox.editor.plugins._FindReplaceCheckBox",[a,d,b],{checkId:"",label:"",tooltip:"",widget:null,
widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' tabindex\x3d'-1' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceCheckBox' title\x3d'${tooltip}' \x3e\x3cinput dojoType\x3d'dijit.form.CheckBox' tabIndex\x3d'0' id\x3d'${checkId}' dojoAttachPoint\x3d'checkBox, focusNode' value\x3d''/\x3e\x3clabel tabindex\x3d'-1' class\x3d'dijitLeft dijitInline' for\x3d'${checkId}'\x3e${label}\x3c/label\x3e\x3c/span\x3e",postMixInProperties:function(){this.id=B.getUniqueId(this.declaredClass.replace(/\./g,
"_"));this.checkId=this.id+"_check";this.inherited(arguments)},postCreate:function(){this.checkBox.set("checked",!1);this.disabled=this.checkBox.get("disabled");this.checkBox.isFocusable=function(){return!1}},_setValueAttr:function(f){this.checkBox.set("value",f)},_getValueAttr:function(){return this.checkBox.get("value")},focus:function(){this.checkBox.focus()},_setDisabledAttr:function(f){this.disabled=f;this.checkBox.set("disabled",f)}}),F=u.declare("dojox.editor.plugins._FindReplaceToolbar",m,
{postCreate:function(){this.connectKeyNavHandlers([],[]);this.connect(this.containerNode,"onclick","_onToolbarEvent");this.connect(this.containerNode,"onkeydown","_onToolbarEvent");u.addClass(this.domNode,"dijitToolbar")},addChild:function(f,w){B._KeyNavContainer.superclass.addChild.apply(this,arguments)},_onToolbarEvent:function(f){f.stopPropagation()}}),k=u.declare("dojox.editor.plugins.FindReplace",[v],{buttonClass:B.form.ToggleButton,iconClassPrefix:"dijitEditorIconsFindReplace",editor:null,button:null,
_frToolbar:null,_closeBox:null,_findField:null,_replaceField:null,_findButton:null,_replaceButton:null,_replaceAllButton:null,_caseSensitive:null,_backwards:null,_promDialog:null,_promDialogTimeout:null,_strings:null,_bookmark:null,_initButton:function(){this._strings=u.i18n.getLocalization("dojox.editor.plugins","FindReplace");this.button=new B.form.ToggleButton({label:this._strings.findReplace,showLabel:!1,iconClass:this.iconClassPrefix+" dijitEditorIconFindString",tabIndex:"-1",onChange:u.hitch(this,
"_toggleFindReplace")});u.isOpera&&this.button.set("disabled",!0);this.connect(this.button,"set",u.hitch(this,function(f,w){"disabled"===f&&this._toggleFindReplace(!w&&this._displayed,!0,!0)}))},setEditor:function(f){this.editor=f;this._initButton()},toggle:function(){this.button.set("checked",!this.button.get("checked"))},_toggleFindReplace:function(f,w,C){var L=u.marginBox(this.editor.domNode);f&&!u.isOpera?(u.style(this._frToolbar.domNode,"display","block"),this._populateFindField(),w||(this._displayed=
!0)):(u.style(this._frToolbar.domNode,"display","none"),w||(this._displayed=!1),C||this.editor.focus());this.editor.resize({h:L.h})},_populateFindField:function(){var f=this.editor._sCall("getSelectedText",[null]);this._findField&&this._findField.textBox&&(f&&this._findField.textBox.set("value",f),this._findField.textBox.focus(),B.selectInputText(this._findField.textBox.focusNode))},setToolbar:function(f){this.inherited(arguments);if(!u.isOpera){var w=this._frToolbar=new F;u.style(w.domNode,"display",
"none");u.place(w.domNode,f.domNode,"after");w.startup();this._closeBox=new e;w.addChild(this._closeBox);this._findField=new n({label:this._strings.findLabel,tooltip:this._strings.findTooltip});w.addChild(this._findField);this._replaceField=new n({label:this._strings.replaceLabel,tooltip:this._strings.replaceTooltip});w.addChild(this._replaceField);w.addChild(new H.editor.plugins.ToolbarLineBreak);this._findButton=new B.form.Button({label:this._strings.findButton,showLabel:!0,iconClass:this.iconClassPrefix+
" dijitEditorIconFind"});this._findButton.titleNode.title=this._strings.findButtonTooltip;w.addChild(this._findButton);this._replaceButton=new B.form.Button({label:this._strings.replaceButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplace"});this._replaceButton.titleNode.title=this._strings.replaceButtonTooltip;w.addChild(this._replaceButton);this._replaceAllButton=new B.form.Button({label:this._strings.replaceAllButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplaceAll"});
this._replaceAllButton.titleNode.title=this._strings.replaceAllButtonTooltip;w.addChild(this._replaceAllButton);this._caseSensitive=new q({label:this._strings.matchCase,tooltip:this._strings.matchCaseTooltip});w.addChild(this._caseSensitive);this._backwards=new q({label:this._strings.backwards,tooltip:this._strings.backwardsTooltip});w.addChild(this._backwards);this._findButton.set("disabled",!0);this._replaceButton.set("disabled",!0);this._replaceAllButton.set("disabled",!0);this.connect(this._findField,
"onChange","_checkButtons");this.connect(this._findField,"onKeyDown","_onFindKeyDown");this.connect(this._replaceField,"onKeyDown","_onReplaceKeyDown");this.connect(this._findButton,"onClick","_find");this.connect(this._replaceButton,"onClick","_replace");this.connect(this._replaceAllButton,"onClick","_replaceAll");this.connect(this._closeBox,"onClick","toggle");this._promDialog=new B.TooltipDialog;this._promDialog.startup();this._promDialog.set("content","")}},_checkButtons:function(){this._findField.get("value")?
(this._findButton.set("disabled",!1),this._replaceButton.set("disabled",!1),this._replaceAllButton.set("disabled",!1)):(this._findButton.set("disabled",!0),this._replaceButton.set("disabled",!0),this._replaceAllButton.set("disabled",!0))},_onFindKeyDown:function(f){f.keyCode==u.keys.ENTER&&(this._find(),u.stopEvent(f))},_onReplaceKeyDown:function(f){f.keyCode==u.keys.ENTER&&(this._replace()||this._replace(),u.stopEvent(f))},_find:function(f){var w=this._findField.get("value")||"";if(w){var C=this._caseSensitive.get("value"),
L=this._backwards.get("value");w=this._findText(w,C,L);!w&&f&&(this._promDialog.set("content",u.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextFind})),B.popup.open({popup:this._promDialog,around:this._findButton.domNode}),this._promDialogTimeout=setTimeout(u.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;B.popup.close(this._promDialog)}),3E3),setTimeout(u.hitch(this,function(){this.editor.focus()}),0));return w}return!1},_replace:function(f){var w=
!1,C=this.editor;C.focus();var L=this._findField.get("value")||"",I=this._replaceField.get("value")||"";if(L){var E=this._caseSensitive.get("value"),r=this._backwards.get("value"),x=C._sCall("getSelectedText",[null]);u.isMoz&&(L=u.trim(L),x=u.trim(x));L=this._filterRegexp(L,!E);x&&L.test(x)&&(C.execCommand("inserthtml",I),w=!0,r&&(this._findText(I,E,r),C._sCall("collapse",[!0])));!this._find(!1)&&f&&(this._promDialog.set("content",u.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextReplace})),
B.popup.open({popup:this._promDialog,around:this._replaceButton.domNode}),this._promDialogTimeout=setTimeout(u.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;B.popup.close(this._promDialog)}),3E3),setTimeout(u.hitch(this,function(){this.editor.focus()}),0));return w}return null},_replaceAll:function(f){var w=0;this._backwards.get("value")?this.editor.placeCursorAtEnd():this.editor.placeCursorAtStart();this._replace(!1)&&w++;var C=u.hitch(this,function(){this._replace(!1)?
(w++,setTimeout(C,10)):f&&(this._promDialog.set("content",u.string.substitute(this._strings.replaceDialogText,{0:""+w})),B.popup.open({popup:this._promDialog,around:this._replaceAllButton.domNode}),this._promDialogTimeout=setTimeout(u.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;B.popup.close(this._promDialog)}),3E3),setTimeout(u.hitch(this,function(){this._findField.focus();this._findField.textBox.focusNode.select()}),0))});C()},_findText:function(f,w,
C){var L=this.editor,I=L.window,E=!1;if(f)if(I.find)E=I.find(f,w,C,!1,!1,!1,!1);else{var r=L.document;if(r.selection||I.getSelection)if(this.editor.focus(),L=r.body.createTextRange(),E=L.duplicate(),I.getSelection().getRangeAt(0),(r=r.selection?r.selection.createRange():null)?C?L.setEndPoint("EndToStart",r):L.setEndPoint("StartToEnd",r):this._bookmark&&(I=I.getSelection().toString(),L.moveToBookmark(this._bookmark),L.text!=I?(L=E.duplicate(),this._bookmark=null):(C?E.setEndPoint("EndToStart",L):E.setEndPoint("StartToEnd",
L),L=E.duplicate())),w=w?4:0,C&&(w|=1),E=L.findText(f,L.text.length,w))L.select(),this._bookmark=L.getBookmark()}return E},_filterRegexp:function(f,w){for(var C="",L=null,I=0;I<f.length;I++)switch(L=f.charAt(I),L){case "\\":C+=L;I++;C+=f.charAt(I);break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":C+="\\";default:C+=L}C="^"+C+"$";return w?new RegExp(C,"mi"):new RegExp(C,"m")},updateState:function(){this.button.set("disabled",this.get("disabled"))},
destroy:function(){this.inherited(arguments);this._promDialogTimeout&&(clearTimeout(this._promDialogTimeout),this._promDialogTimeout=null,B.popup.close(this._promDialog));this._frToolbar&&(this._frToolbar.destroyRecursive(),this._frToolbar=null);this._promDialog&&(this._promDialog.destroyRecursive(),this._promDialog=null)}});k._FindReplaceCloseBox=e;k._FindReplaceTextBox=n;k._FindReplaceCheckBox=q;k._FindReplaceToolbar=F;u.subscribe(B._scopeName+".Editor.getPlugin",null,function(f){f.plugin||"findreplace"!==
f.args.name.toLowerCase()||(f.plugin=new k({}))});return k})},"dojox/editor/plugins/PasteFromWord":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/RichText dijit/form/Button dijit/Dialog dojox/html/format dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/PasteFromWord dojo/i18n!dijit/nls/common dojo/i18n!dijit/_editor/nls/commands".split(" "),function(u,B,H,D){var z=u.declare("dojox.editor.plugins.PasteFromWord",
D,{iconClassPrefix:"dijitAdditionalEditorIcon",width:"400px",height:"300px",_template:"\x3cdiv class\x3d'dijitPasteFromWordEmbeddedRTE'\x3e\x3cdiv style\x3d'width: ${width}; padding-top: 5px; padding-bottom: 5px;'\x3e${instructions}\x3c/div\x3e\x3cdiv id\x3d'${uId}_rte' style\x3d'width: ${width}; height: ${height}'\x3e\x3c/div\x3e\x3ctable style\x3d'width: ${width}' tabindex\x3d'-1'\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_paste'\x3e${paste}\x3c/button\x3e\x26nbsp;\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_cancel'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e",
_filters:[{regexp:/(<meta\s*[^>]*\s*>)|(<\s*link\s* href="file:[^>]*\s*>)|(<\/?\s*\w+:[^>]*\s*>)/gi,handler:""},{regexp:/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,handler:""},{regexp:/(class="Mso[^"]*")|(\x3c!--(.|\s){1,}?--\x3e)/gi,handler:""},{regexp:/(<p[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/p[^>]*>)|(<p[^>]*>\s*<font[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/\s*font\s*>\s<\/p[^>]*>)/ig,handler:""},{regexp:/(style="[^"]*mso-[^;][^"]*")|(style="margin:\s*[^;"]*;")/gi,
handler:""},{regexp:/(<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>)|(<\s*script\b([^<>]|\s)*>?)|(<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>)/ig,handler:""},{regexp:/<(\/?)o:p[^>]*>/gi,handler:""}],_initButton:function(){this._filters=this._filters.slice(0);var a=u.i18n.getLocalization("dojox.editor.plugins","PasteFromWord");u.mixin(a,u.i18n.getLocalization("dijit","common"));u.mixin(a,u.i18n.getLocalization("dijit._editor","commands"));this.button=new B.form.Button({label:a.pasteFromWord,
showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"PasteFromWord",tabIndex:"-1",onClick:u.hitch(this,"_openDialog")});this._uId=B.getUniqueId(this.editor.id);a.uId=this._uId;a.width=this.width||"400px";a.height=this.height||"300px";this._dialog=(new B.Dialog({title:a.pasteFromWord})).placeAt(u.body());this._dialog.set("content",u.string.substitute(this._template,a));u.style(u.byId(this._uId+"_rte"),"opacity",.001);this.connect(B.byId(this._uId+"_paste"),"onClick","_paste");this.connect(B.byId(this._uId+
"_cancel"),"onClick","_cancel");this.connect(this._dialog,"onHide","_clearDialog")},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(a){this.editor=a;this._initButton()},_openDialog:function(){this._dialog.show();this._rte||setTimeout(u.hitch(this,function(){this._rte=new B._editor.RichText({height:this.height||"300px"},this._uId+"_rte");this._rte.startup();this._rte.onLoadDeferred.addCallback(u.hitch(this,function(){u.animateProperty({node:this._rte.domNode,
properties:{opacity:{start:.001,end:1}}}).play()}))}),100)},_paste:function(){var a=H.html.format.prettyPrint(this._rte.get("value"));this._dialog.hide();var d;for(d=0;d<this._filters.length;d++){var c=this._filters[d];a=a.replace(c.regexp,c.handler)}a=H.html.format.prettyPrint(a);this.editor.focus();this.editor.execCommand("inserthtml",a)},_cancel:function(){this._dialog.hide()},_clearDialog:function(){this._rte.set("value","")},destroy:function(){this._rte&&this._rte.destroy();this._dialog&&this._dialog.destroyRecursive();
delete this._dialog;delete this._rte;this.inherited(arguments)}});u.subscribe(B._scopeName+".Editor.getPlugin",null,function(a){a.plugin||"pastefromword"!==a.args.name.toLowerCase()||(a.plugin=new z({width:"width"in a.args?a.args.width:"400px",height:"height"in a.args?a.args.width:"300px"}))});return z})},"dojox/html/format":function(){define(["dojo/_base/kernel","./entities","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(u,B,H,D,z){var a=u.getObject("dojox.html.format",!0);a.prettyPrint=
function(d,c,b,g,m){var l=[],t=0,A=[],v="\t",e="",n=[],q,F=/[=]([^"']+?)(\s|>)/g,k=/style=("[^"]*"|'[^']*'|\S*)/gi,f=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(c&&0<c&&10>c)for(v="",q=0;q<c;q++)v+=" ";c=D.doc.createElement("div");c.innerHTML=d;var w=B.encode,C=B.decode,L=c.ownerDocument.createElement("div"),I=function(p){p=p.cloneNode(!1);L.appendChild(p);p=L.innerHTML;L.innerHTML="";return p},E=function(){var p;for(p=0;p<t;p++)l.push(v)},r=function(){l.push("\n")},x=function(p){var G;p=p.split("\n");for(G=
0;G<p.length;G++)p[G]=u.trim(p[G]);p=p.join(" ");p=u.trim(p);if(""!==p){var N=[];if(b&&0<b){var K="";for(G=0;G<t;G++)K+=v;G=K.length;K=b;for(b>G&&(K-=G);p;)if(p.length>b){for(G=K;0<G&&" "!==p.charAt(G);G--);if(!G)for(G=K;G<p.length&&" "!==p.charAt(G);G++);var P=p.substring(0,G);P=u.trim(P);p=u.trim(p.substring(G==p.length?p.length:G+1,p.length));if(P){var Q="";for(G=0;G<t;G++)Q+=v;P=Q+P+"\n"}N.push(P)}else{Q="";for(G=0;G<t;G++)Q+=v;p=Q+p+"\n";N.push(p);p=null}return N.join("")}Q="";for(G=0;G<t;G++)Q+=
v;return Q+p+"\n"}return""},M=function(p){if(p){var G=p;G&&(G=G.replace(/&quot;/gi,'"'),G=G.replace(/&gt;/gi,"\x3e"),G=G.replace(/&lt;/gi,"\x3c"),G=G.replace(/&amp;/gi,"\x26"));var N;p=0;var K=G.split("\n"),P=[];for(G=0;G<K.length;G++){var Q=K[G],S=-1<Q.indexOf("\n");if(Q=u.trim(Q)){S=p;for(N=0;N<Q.length;N++){var y=Q.charAt(N);"{"===y?p++:"}"===y&&(p--,S=p)}y="";for(N=0;N<t+S;N++)y+=v;P.push(y+Q+"\n")}else S&&0===G&&P.push("\n")}p=P.join("")}return p},O=function(p){var G=p.nodeName.toLowerCase(),
N=u.trim(I(p));p=N.substring(0,N.indexOf("\x3e")+1);p=p.replace(F,'\x3d"$1"$2');p=p.replace(k,function(P){var Q=P.substring(0,6);P=P.substring(6,P.length);var S=P.charAt(0);P=u.trim(P.substring(1,P.length-1));P=P.split(";");var y=[];H.forEach(P,function(R){if(R=u.trim(R))R=R.substring(0,R.indexOf(":")).toLowerCase()+R.substring(R.indexOf(":"),R.length),y.push(R)});y=y.sort();P=y.join("; ");var J=u.trim(P);return J&&";"!==J?Q+S+(P+";")+S:""});var K=[];p=p.replace(f,function(P){K.push(u.trim(P));return""});
K=K.sort();p="\x3c"+G;K.length&&(p+=" "+K.join(" "));-1!=N.indexOf("\x3c/")?(A.push(G),p+="\x3e"):(p=m?p+" /\x3e":p+"\x3e",A.push(!1));a:switch(G){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "small":G=!0;break a;default:G=!1}n.push(G);e&&!G&&(l.push(x(e)),e="");G?e+=p:(E(),l.push(p),r(),t++)},h=function(p){var G=p.childNodes;if(G){var N;for(N=0;N<G.length;N++){var K=G[N];if(1===
K.nodeType){var P=u.trim(K.tagName.toLowerCase());z("ie")&&K.parentNode!=p||P&&"/"===P.charAt(0)||(O(K),"script"===P?l.push(M(K.innerHTML)):"pre"===P?(K=K.innerHTML,z("mozilla")&&(K=K.replace("\x3cbr\x3e","\n"),K=K.replace("\x3cpre\x3e",""),K=K.replace("\x3c/pre\x3e","")),"\n"!==K.charAt(K.length-1)&&(K+="\n"),l.push(K)):h(K),K=n.pop(),e&&!K&&(l.push(x(e)),e=""),(P=A.pop())?(P="\x3c/"+P+"\x3e",K?e+=P:(t--,E(),l.push(P),r())):t--)}else 3===K.nodeType||4===K.nodeType?e+=w(K.nodeValue,g):8===K.nodeType&&
(K=C(K.nodeValue,g),E(),l.push("\x3c!--"),r(),t++,l.push(x(K)),t--,E(),l.push("--\x3e"),r())}}};h(c);e&&(l.push(x(e)),e="");return l.join("")};return a})},"dojox/editor/plugins/InsertAnchor":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/range dijit/_Templated dijit/TooltipDialog dijit/form/ValidationTextBox dijit/form/Select dijit/form/Button dijit/form/DropDownButton dojo/_base/declare dojo/i18n dojo/string dojo/NodeList-dom dojox/editor/plugins/ToolbarLineBreak dojo/i18n!dojox/editor/plugins/nls/InsertAnchor dojo/i18n!dijit/nls/common".split(" "),
function(u,B,H,D){var z=u.declare("dojox.editor.plugins.InsertAnchor",D,{htmlTemplate:'\x3ca name\x3d"${anchorInput}" class\x3d"dijitEditorPluginInsertAnchorStyle"\x3e${textInput}\x3c/a\x3e',iconClassPrefix:"dijitAdditionalEditorIcon",_template:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_anchorInput'\x3e${anchor}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_anchorInput' name\x3d'anchorInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${cancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){var a=this,d=u.i18n.getLocalization("dojox.editor.plugins","InsertAnchor",this.lang),c=this.dropDown=new B.TooltipDialog({title:d.title,execute:u.hitch(this,"setValue"),onOpen:function(){a._onOpenDialog();B.TooltipDialog.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(u.hitch(a,"_onCloseDialog"),0)}});this.button=new B.form.DropDownButton({label:d.insertAnchor,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"InsertAnchor",tabIndex:"-1",
dropDown:this.dropDown});d.id=B.getUniqueId(this.editor.id);this._uniqueId=d.id;this.dropDown.set("content",c.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+u.string.substitute(this._template,d));c.startup();this._anchorInput=B.byId(this._uniqueId+"_anchorInput");this._textInput=B.byId(this._uniqueId+"_textInput");this._setButton=B.byId(this._uniqueId+"_setButton");this.connect(B.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel()});
this._anchorInput&&this.connect(this._anchorInput,"onChange","_checkInput");this._textInput&&this.connect(this._anchorInput,"onChange","_checkInput");this.editor.contentDomPreFilters.push(u.hitch(this,this._preDomFilter));this.editor.contentDomPostFilters.push(u.hitch(this,this._postDomFilter));this._setup()},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(a){this.editor=a;this._initButton()},_checkInput:function(){var a=!0;this._anchorInput.isValid()&&
(a=!1);this._setButton.set("disabled",a)},_setup:function(){this.editor.onLoadDeferred.addCallback(u.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);setTimeout(u.hitch(this,function(){this._applyStyles()}),100)}))},getAnchorStyle:function(){var a=u.moduleUrl(H._scopeName,"editor/plugins/resources").toString();if(!a.match(/^https?:\/\//i)&&!a.match(/^file:\/\//i)){var d="/"===a.charAt(0)?u.doc.location.protocol+"//"+u.doc.location.host:this._calcBaseUrl(u.global.location.href);
"/"!==d[d.length-1]&&"/"!==a.charAt(0)&&(d+="/");a=d+a}return"@media screen {\n\t.dijitEditorPluginInsertAnchorStyle {\n\t\tbackground-image: url({MODURL}/images/anchor.gif);\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-position: top left;\n\t\tborder-width: 1px;\n\t\tborder-style: dashed;\n\t\tborder-color: #D0D0D0;\n\t\tpadding-left: 20px;\n\t}\n}\n".replace(/\{MODURL\}/gi,a)},_applyStyles:function(){if(!this._styled)try{this._styled=!0;var a=this.editor.document,d=this.getAnchorStyle();if(u.isIE)a.createStyleSheet("").cssText=
d;else{var c=a.createElement("style");c.appendChild(a.createTextNode(d));a.getElementsByTagName("head")[0].appendChild(c)}}catch(b){}},_calcBaseUrl:function(a){var d=null;null!==a&&(d=a.indexOf("?"),-1!=d&&(a=a.substring(0,d)),d=a.lastIndexOf("/"),d=0<d&&d<a.length?a.substring(0,d):a);return d},_checkValues:function(a){a&&(a.anchorInput&&(a.anchorInput=a.anchorInput.replace(/"/g,"\x26quot;")),a.textInput||(a.textInput="\x26nbsp;"));return a},setValue:function(a){this._onCloseDialog();if(!this.editor.window.getSelection){var d=
B.range.getSelection(this.editor.window).getRangeAt(0).endContainer;3===d.nodeType&&(d=d.parentNode);d&&d.nodeName&&"a"!==d.nodeName.toLowerCase()&&(d=this.editor._sCall("getSelectedElement",["a"]));d&&d.nodeName&&"a"===d.nodeName.toLowerCase()&&this.editor.queryCommandEnabled("unlink")&&(this.editor._sCall("selectElementChildren",[d]),this.editor.execCommand("unlink"))}a=this._checkValues(a);this.editor.execCommand("inserthtml",u.string.substitute(this.htmlTemplate,a))},_onCloseDialog:function(){this.editor.focus()},
_getCurrentValues:function(a){if(a&&"a"===a.tagName.toLowerCase()&&u.attr(a,"name")){var d=u.attr(a,"name");var c=a.textContent||a.innerText;this.editor._sCall("selectElement",[a,!0])}else c=this.editor._sCall("getSelectedText");return{anchorInput:d||"",textInput:c||""}},_onOpenDialog:function(){if(this.editor.window.getSelection)var a=this.editor._sCall("getAncestorElement",["a"]);else a=B.range.getSelection(this.editor.window).getRangeAt(0).endContainer,3===a.nodeType&&(a=a.parentNode),a&&a.nodeName&&
"a"!==a.nodeName.toLowerCase()&&(a=this.editor._sCall("getSelectedElement",["a"]));this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(a))},_onDblClick:function(a){a&&a.target&&(a=a.target,"a"===(a.tagName?a.tagName.toLowerCase():"")&&u.attr(a,"name")&&(this.editor.onDisplayChanged(),this.editor._sCall("selectElement",[a]),setTimeout(u.hitch(this,function(){this.button.set("disabled",!1);this.button.openDropDown();this.button.dropDown.focus&&this.button.dropDown.focus()}),
10)))},_preDomFilter:function(a){u.query("a[name]:not([href])",this.editor.editNode).addClass("dijitEditorPluginInsertAnchorStyle")},_postDomFilter:function(a){a&&u.query("a[name]:not([href])",a).removeClass("dijitEditorPluginInsertAnchorStyle");return a}});u.subscribe(B._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin){var d=a.args.name;d&&(d=d.toLowerCase());"insertanchor"===d&&(a.plugin=new z)}});return z})},"dojox/editor/plugins/Blockquote":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/ToggleButton dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Blockquote".split(" "),
function(u,B,H,D){var z=u.declare("dojox.editor.plugins.Blockquote",D,{iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=u.i18n.getLocalization("dojox.editor.plugins","Blockquote");this.button=new B.form.ToggleButton({label:this._nlsResources.blockquote,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Blockquote",tabIndex:"-1",onClick:u.hitch(this,"_toggleQuote")})},setEditor:function(a){this.editor=a;this._initButton();this.connect(this.editor,
"onNormalizedDisplayChanged","updateState");a.customUndo=!0},_toggleQuote:function(a){try{var d=this.editor;d.focus();var c=this.button.get("checked"),b=B.range.getSelection(d.window),g,m,l,t;b&&0<b.rangeCount&&(g=b.getRangeAt(0));if(g){d.beginEditing();if(c)if(g.startContainer===g.endContainer){if(this._isRootInline(g.startContainer)){for(l=g.startContainer;l&&l.parentNode!==d.editNode;)l=l.parentNode;for(;l&&l.previousSibling&&(this._isTextElement(l)||1===l.nodeType&&this._isInlineFormat(this._getTagName(l)));)l=
l.previousSibling;l&&1===l.nodeType&&!this._isInlineFormat(this._getTagName(l))&&(l=l.nextSibling);if(l){var A=d.document.createElement("blockquote");u.place(A,l,"after");A.appendChild(l);for(t=A.nextSibling;t&&(this._isTextElement(t)||1===t.nodeType&&this._isInlineFormat(this._getTagName(t)));)A.appendChild(t),t=A.nextSibling}}else{for(var v=g.startContainer;(this._isTextElement(v)||this._isInlineFormat(this._getTagName(v))||"li"===this._getTagName(v))&&v!==d.editNode&&v!==d.document.body;)v=v.parentNode;
v!==d.editNode&&v!==v.ownerDocument.documentElement&&(A=d.document.createElement("blockquote"),u.place(A,v,"after"),A.appendChild(v))}A&&(d._sCall("selectElementChildren",[A]),d._sCall("collapse",[!0]))}else{var e;l=g.startContainer;for(t=g.endContainer;l&&this._isTextElement(l)&&l.parentNode!==d.editNode;)l=l.parentNode;for(e=l;e.nextSibling&&d._sCall("inSelection",[e]);)e=e.nextSibling;t=e;if(t===d.editNode||t===d.document.body){A=d.document.createElement("blockquote");u.place(A,l,"after");var n=
this._getTagName(l);if(this._isTextElement(l)||this._isInlineFormat(n))for(d=l;d&&(this._isTextElement(d)||1===d.nodeType&&this._isInlineFormat(this._getTagName(d)));)A.appendChild(d),d=A.nextSibling;else A.appendChild(l);return}t=t.nextSibling;for(e=l;e&&e!==t;){if(1===e.nodeType){if(n=this._getTagName(e),"br"!==n){if(!window.getSelection&&"p"===n&&this._isEmpty(e)){e=e.nextSibling;continue}this._isInlineFormat(n)?A||(A=d.document.createElement("blockquote"),u.place(A,e,"after")):(A&&this._isEmpty(A)&&
A.parentNode.removeChild(A),A=d.document.createElement("blockquote"),u.place(A,e,"after"));A.appendChild(e);e=A}}else this._isTextElement(e)&&(A||(A=d.document.createElement("blockquote"),u.place(A,e,"after")),A.appendChild(e),e=A);e=e.nextSibling}A&&(this._isEmpty(A)?A.parentNode.removeChild(A):(d._sCall("selectElementChildren",[A]),d._sCall("collapse",[!0])),A=null)}else if(A=!1,g.startContainer===g.endContainer){for(m=g.endContainer;m&&m!==d.editNode&&m!==d.document.body;){if("blockquote"===(m.tagName?
m.tagName.toLowerCase():"")){A=!0;break}m=m.parentNode}if(A){for(var q;m.firstChild;)q=m.firstChild,u.place(q,m,"before");m.parentNode.removeChild(m);q&&(d._sCall("selectElementChildren",[q]),d._sCall("collapse",[!0]))}}else{l=g.startContainer;for(t=g.endContainer;l&&this._isTextElement(l)&&l.parentNode!==d.editNode;)l=l.parentNode;for(g=[];l&&l.nextSibling&&d._sCall("inSelection",[l]);)l.parentNode&&"blockquote"===this._getTagName(l.parentNode)&&(l=l.parentNode),g.push(l),l=l.nextSibling;for(var F=
this._findBlockQuotes(g);F.length;){var k=F.pop();if(k.parentNode){for(;k.firstChild;)u.place(k.firstChild,k,"before");k.parentNode.removeChild(k)}}}d.endEditing()}d.onNormalizedDisplayChanged()}catch(f){}},updateState:function(){var a=this.editor,d=this.get("disabled");if(a&&a.isLoaded&&this.button&&(this.button.set("disabled",d),!d)){d=!1;var c=B.range.getSelection(a.window);if(c&&0<c.rangeCount&&(c=c.getRangeAt(0)))var b=c.endContainer;for(;b&&b!==a.editNode&&b!==a.document;){if("blockquote"===
(b.tagName?b.tagName.toLowerCase():"")){d=!0;break}b=b.parentNode}this.button.set("checked",d)}},_findBlockQuotes:function(a){var d=[];if(a){var c;for(c=0;c<a.length;c++){var b=a[c];1===b.nodeType&&("blockquote"===this._getTagName(b)&&d.push(b),b.childNodes&&0<b.childNodes.length&&(d=d.concat(this._findBlockQuotes(b.childNodes))))}}return d},_getTagName:function(a){var d="";a&&1===a.nodeType&&(d=a.tagName?a.tagName.toLowerCase():"");return d},_isRootInline:function(a){var d=this.editor;if(this._isTextElement(a)&&
a.parentNode===d.editNode||1===a.nodeType&&this._isInlineFormat(a)&&a.parentNode===d.editNode)return!0;if(this._isTextElement(a)&&this._isInlineFormat(this._getTagName(a.parentNode))){for(a=a.parentNode;a&&a!==d.editNode&&this._isInlineFormat(this._getTagName(a));)a=a.parentNode;if(a===d.editNode)return!0}return!1},_isTextElement:function(a){return a&&3===a.nodeType||4===a.nodeType?!0:!1},_isEmpty:function(a){if(a.childNodes){var d=!0,c;for(c=0;c<a.childNodes.length;c++){var b=a.childNodes[c];if(1===
b.nodeType){if("p"!==this._getTagName(b)||u.trim(b.innerHTML)){d=!1;break}}else if(this._isTextElement(b)){if((b=u.trim(b.nodeValue))&&"\x26nbsp;"!==b&&"\u00a0"!==b){d=!1;break}}else{d=!1;break}}return d}return!0},_isInlineFormat:function(a){switch(a){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "img":case "small":return!0;default:return!1}}});u.subscribe(B._scopeName+".Editor.getPlugin",
null,function(a){a.plugin||"blockquote"!==a.args.name.toLowerCase()||(a.plugin=new z({}))});return z})},"dojox/editor/plugins/UploadImage":function(){define("dojo dijit dojox dijit/_editor/_Plugin dojo/_base/connect dojo/_base/declare dojox/form/FileUploader dijit/_editor/_Plugin".split(" "),function(u,B,H,D){u.experimental("dojox.editor.plugins.UploadImage");var z=u.declare("dojox.editor.plugins.UploadImage",D,{tempImageUrl:"",iconClassPrefix:"editorIcon",useDefaultCommand:!1,uploadUrl:"",button:null,
label:"Upload",setToolbar:function(a){this.button.destroy();this.createFileInput();a.addChild(this.button)},_initButton:function(){this.command="uploadImage";this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",arguments);delete this.command},updateState:function(){this.button.set("disabled",this.get("disabled"))},createFileInput:function(){var a=u.create("span",{innerHTML:"."},document.body);u.style(a,{width:"40px",height:"20px",paddingLeft:"8px",paddingRight:"8px"});this.button=
new H.form.FileUploader({isDebug:!0,uploadUrl:this.uploadUrl,uploadOnChange:!0,selectMultipleFiles:!1,baseClass:"dojoxEditorUploadNorm",hoverClass:"dojoxEditorUploadHover",activeClass:"dojoxEditorUploadActive",disabledClass:"dojoxEditorUploadDisabled"},a);this.connect(this.button,"onChange","insertTempImage");this.connect(this.button,"onComplete","onComplete")},onComplete:function(a,d,c){a=a[0];d=u.byId(this.currentImageId,this.editor.document);c=this.downloadPath?this.downloadPath+a.name:a.file;
d.src=c;u.attr(d,"_djrealurl",c);a.width&&(d.width=a.width,d.height=a.height)},insertTempImage:function(){this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+this.tempImageUrl+'" width\x3d"32" height\x3d"32"/\x3e')}});u.subscribe(B._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin)switch(a.args.name){case "uploadImage":a.plugin=new z({url:a.args.url})}});return z})},"dojox/form/FileUploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/_base/sniff dojo/query dojo/dom dojo/dom-style dojo/dom-geometry dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-form dojo/_base/config dijit/_base/manager dojo/io/iframe dojo/_base/Color dojo/_base/unload dijit/_Widget dijit/_TemplatedMixin dijit/_Contained dojox/embed/Flash dojox/embed/flashVars dojox/html/styles".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t,A,v,e,n,q,F,k,f,w,C,L,I,E){u.deprecated("dojox.form.FileUploader","Use dojox.form.Uploader","2.0");return B("dojox.form.FileUploader",[f,w,C],{swfPath:e.uploaderPath||require.toUrl("dojox/form/resources/fileuploader.swf"),templateString:'\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d"progNode"\x3e\x3cdiv dojoAttachPoint\x3d"progTextNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d"insideNode" class\x3d"uploaderInsideNode"\x3e\x3c/div\x3e\x3c/div\x3e',uploadUrl:"",
isDebug:!1,devMode:!1,baseClass:"dojoxUploaderNorm",hoverClass:"dojoxUploaderHover",activeClass:"dojoxUploaderActive",disabledClass:"dojoxUploaderDisabled",force:"",uploaderType:"",flashObject:null,flashMovie:null,insideNode:null,deferredUploading:1,fileListId:"",uploadOnChange:!1,selectMultipleFiles:!0,htmlFieldName:"uploadedfile",flashFieldName:"flashUploadFiles",fileMask:null,minFlashVersion:9,tabIndex:-1,showProgress:!1,progressMessage:"Loading",progressBackgroundUrl:require.toUrl("dijit/themes/tundra/images/buttonActive.png"),
progressBackgroundColor:"#ededed",progressWidgetId:"",skipServerCheck:!1,serverTimeout:5E3,log:function(){this.isDebug&&console.log(Array.prototype.slice.call(arguments).join(" "))},constructor:function(){this._subs=[]},postMixInProperties:function(){this.fileList=[];this._cons=[];this.fileMask=this.fileMask||[];this.fileInputs=[];this.fileCount=0;this._disabled=this.flashReady=!1;this.force=this.force.toLowerCase();this.uploaderType=(L.available>=this.minFlashVersion||"flash"==this.force)&&"html"!=
this.force?"flash":"html";this.deferredUploading=!0===this.deferredUploading?1:this.deferredUploading;this._refNode=this.srcNodeRef;this.getButtonStyle()},startup:function(){},postCreate:function(){this.inherited(arguments);this.setButtonStyle();if("flash"==this.uploaderType)var r="createFlashUploader";else this.uploaderType="html",r="createHtmlUploader";this[r]();this.fileListId&&this.connect(b.byId(this.fileListId),"click",function(x){x=x.target.parentNode.parentNode.parentNode;x.id&&-1<x.id.indexOf("file_")&&
this.removeFile(x.id.split("file_")[1])});k.addOnUnload(this,this.destroy)},getHiddenNode:function(r){if(!r)return null;var x=null;for(r=r.parentNode;r&&"body"!=r.tagName.toLowerCase();){if("none"==g.get(r,"display")){x=r;break}r=r.parentNode}return x},getButtonStyle:function(){var r=this.srcNodeRef;(this._hiddenNode=this.getHiddenNode(r))&&g.set(this._hiddenNode,"display","block");if(!r&&this.button&&this.button.domNode){var x=!0;r=this.button.domNode.className+" dijitButtonNode";var M=this.getText(c(".dijitButtonText",
this.button.domNode)[0]);this.srcNodeRef=r=A.place('\x3cbutton id\x3d"'+this.button.id+'" class\x3d"'+r+'"\x3e'+M+"\x3c/button\x3e",this.button.domNode,"after");this.button.destroy();this.baseClass="dijitButton";this.hoverClass="dijitButtonHover";this.pressClass="dijitButtonActive";this.disabledClass="dijitButtonDisabled"}else!this.srcNodeRef&&this.button&&(r=this.button);l.get(r,"class")&&(this.baseClass+=" "+l.get(r,"class"));l.set(r,"class",this.baseClass);this.norm=this.getStyle(r);this.width=
this.norm.w;this.height=this.norm.h;"flash"==this.uploaderType?(this.over=this.getTempNodeStyle(r,this.baseClass+" "+this.hoverClass,x),this.down=this.getTempNodeStyle(r,this.baseClass+" "+this.activeClass,x),this.dsbl=this.getTempNodeStyle(r,this.baseClass+" "+this.disabledClass,x),this.fhtml={cn:this.getText(r),nr:this.norm,ov:this.over,dn:this.down,ds:this.dsbl}):(this.fhtml={cn:this.getText(r),nr:this.norm},"middle"==this.norm.va&&(this.norm.lh=this.norm.h));this.devMode&&(this.log("classes - base:",
this.baseClass," hover:",this.hoverClass,"active:",this.activeClass),this.log("fhtml:",this.fhtml),this.log("norm:",this.norm),this.log("over:",this.over),this.log("down:",this.down))},setButtonStyle:function(){g.set(this.domNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+"px",padding:"0px",lineHeight:"normal",position:"relative"});"html"==this.uploaderType&&"middle"==this.norm.va&&g.set(this.domNode,"lineHeight",this.norm.lh+"px");this.showProgress?(this.progTextNode.innerHTML=this.progressMessage,
g.set(this.progTextNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",lineHeight:this.fhtml.nr.h+0+"px",position:"absolute"}),g.set(this.progNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",position:"absolute",display:"none",backgroundImage:"url("+this.progressBackgroundUrl+")",backgroundPosition:"bottom",backgroundRepeat:"repeat-x",backgroundColor:this.progressBackgroundColor})):A.destroy(this.progNode);
g.set(this.insideNode,{position:"absolute",top:"0px",left:"0px",display:""});t.add(this.domNode,this.srcNodeRef.className);-1<this.fhtml.nr.d.indexOf("inline")&&t.add(this.domNode,"dijitInline");try{this.insideNode.innerHTML=this.fhtml.cn}catch(x){if("flash"==this.uploaderType){this.insideNode=this.insideNode.parentNode.removeChild(this.insideNode);a.body().appendChild(this.insideNode);this.insideNode.innerHTML=this.fhtml.cn;var r=z.connect(this,"onReady",this,function(){z.disconnect(r);this.insideNode=
this.insideNode.parentNode.removeChild(this.insideNode);this.domNode.appendChild(this.insideNode)})}else this.insideNode.appendChild(document.createTextNode(this.fhtml.cn))}this._hiddenNode&&g.set(this._hiddenNode,"display","none")},onChange:function(r){},onProgress:function(r){},onComplete:function(r){},onCancel:function(){},onError:function(r){},onReady:function(r){},onLoad:function(r){},submit:function(r){r=r?v.toObject(r):null;this.upload(r);return!1},upload:function(r){if(!this.fileList.length)return!1;
if(!this.uploadUrl)return console.warn("uploadUrl not provided. Aborting."),!1;this.showProgress||this.set("disabled",!0);if(this.progressWidgetId){var x=n.byId(this.progressWidgetId).domNode;"none"==g.get(x,"display")&&(this.restoreProgDisplay="none",g.set(x,"display","block"));"hidden"==g.get(x,"visibility")&&(this.restoreProgDisplay="hidden",g.set(x,"visibility","visible"))}r&&!r.target&&(this.postData=r);this.log("upload type:",this.uploaderType," - postData:",this.postData);for(r=0;r<this.fileList.length;r++)x=
this.fileList[r],x.bytesLoaded=0,x.bytesTotal=x.size||1E5,x.percent=0;"flash"==this.uploaderType?this.uploadFlash():this.uploadHTML();return!1},removeFile:function(r,x){var M;for(M=0;M<this.fileList.length;M++)if(this.fileList[M].name==r){x||this.fileList.splice(M,1);break}"flash"==this.uploaderType?this.flashMovie.removeFile(r):x||(A.destroy(this.fileInputs[M]),this.fileInputs.splice(M,1),this._renumberInputs());this.fileListId&&A.destroy("file_"+r)},destroy:function(){"flash"!=this.uploaderType||
this.flashMovie?(D.forEach(this._subs,z.unsubscribe,dojo),D.forEach(this._cons,z.disconnect,dojo),this.scrollConnect&&z.disconnect(this.scrollConnect),"flash"==this.uploaderType?(this.flashObject.destroy(),delete this.flashObject):(A.destroy(this._fileInput),A.destroy(this._formNode)),this.inherited(arguments)):this._cons.push(z.connect(this,"onLoad",this,"destroy"))},_displayProgress:function(r){!0===r?("flash"==this.uploaderType?g.set(this.insideNode,"top","-2500px"):g.set(this.insideNode,"display",
"none"),g.set(this.progNode,"display","")):!1===r?(g.set(this.insideNode,{display:"",top:"0"}),g.set(this.progNode,"display","none")):g.set(this.progNode,"width",r*this.fhtml.nr.w+"px")},_animateProgress:function(){this._displayProgress(!0);var r=!1,x=z.connect(this,"_complete",function(){z.disconnect(x);r=!0}),M=0,O=setInterval(H.hitch(this,function(){M+=5;M>this.fhtml.nr.w&&(M=0,r=!0);this._displayProgress(M/this.fhtml.nr.w);r&&(clearInterval(O),setTimeout(H.hitch(this,function(){this._displayProgress(!1)}),
500))}),50)},_error:function(r){"string"==typeof r&&(r=Error(r));this.onError(r)},_addToFileList:function(){if(this.fileListId){var r="";D.forEach(this.fileList,function(x){r+='\x3ctable id\x3d"file_'+x.name+'" class\x3d"fileToUpload"\x3e\x3ctr\x3e\x3ctd class\x3d"fileToUploadClose"\x3e\x3c/td\x3e\x3ctd class\x3d"fileToUploadName"\x3e'+x.name+'\x3c/td\x3e\x3ctd class\x3d"fileToUploadSize"\x3e'+(x.size?Math.ceil(.001*x.size)+"kb":"")+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"},this);b.byId(this.fileListId).innerHTML=
r}},_change:function(r){d("ie")&&D.forEach(r,function(x){x.name=x.name.split("\\")[x.name.split("\\").length-1]});this.selectMultipleFiles?this.fileList=this.fileList.concat(r):(this.fileList[0]&&this.removeFile(this.fileList[0].name,!0),this.fileList=r);this._addToFileList();this.onChange(r);this.uploadOnChange?("html"==this.uploaderType&&this._buildFileInput(),this.upload()):"html"==this.uploaderType&&this.selectMultipleFiles&&(this._buildFileInput(),this._connectInput())},_complete:function(r){r=
H.isArray(r)?r:[r];D.forEach(r,function(x){x.ERROR&&this._error(x.ERROR)},this);D.forEach(this.fileList,function(x){x.bytesLoaded=1;x.bytesTotal=1;x.percent=100;this._progress(x)},this);D.forEach(this.fileList,function(x){this.removeFile(x.name,!0)},this);this.onComplete(r);this.fileList=[];this._resetHTML();this.set("disabled",!1);this.restoreProgDisplay&&setTimeout(H.hitch(this,function(){g.set(n.byId(this.progressWidgetId).domNode,"none"==this.restoreProgDisplay?"display":"visibility",this.restoreProgDisplay)}),
500)},_progress:function(r){for(var x=0,M=0,O=0;O<this.fileList.length;O++){var h=this.fileList[O];h.name==r.name&&(h.bytesLoaded=r.bytesLoaded,h.bytesTotal=r.bytesTotal,h.percent=Math.ceil(h.bytesLoaded/h.bytesTotal*100),this.log(h.name,"percent:",h.percent));M+=Math.ceil(.001*h.bytesLoaded);x+=Math.ceil(.001*h.bytesTotal)}r=Math.ceil(M/x*100);this.progressWidgetId&&n.byId(this.progressWidgetId).update({progress:r+"%"});this.showProgress&&this._displayProgress(.01*r);this.onProgress(this.fileList)},
_getDisabledAttr:function(){return this._disabled},_setDisabledAttr:function(r){if(this._disabled!=r){if("flash"==this.uploaderType){if(!this.flashReady){var x=z.connect(this,"onLoad",this,function(){z.disconnect(x);this._setDisabledAttr(r)});return}this._disabled=r;this.flashMovie.doDisable(r)}else this._disabled=r,g.set(this._fileInput,"display",this._disabled?"none":"");t.toggle(this.domNode,this.disabledClass,r)}},_onFlashBlur:function(){this.flashMovie.blur();if(!this.nextFocusObject&&this.tabIndex)for(var r=
c("[tabIndex]"),x=0;x<r.length;x++)if(r[x].tabIndex>=Number(this.tabIndex)+1){this.nextFocusObject=r[x];break}this.nextFocusObject.focus()},_disconnect:function(){D.forEach(this._cons,z.disconnect,dojo)},uploadHTML:function(){this.selectMultipleFiles&&A.destroy(this._fileInput);this._setHtmlPostData();this.showProgress&&this._animateProgress();q.send({url:this.uploadUrl.toString(),form:this._formNode,handleAs:"json",error:H.hitch(this,function(r){this._error("HTML Upload Error:"+r.message)}),load:H.hitch(this,
function(r,x,M){this._complete(r)})})},createHtmlUploader:function(){this._buildForm();this._setFormStyle();this._buildFileInput();this._connectInput();this._styleContent();g.set(this.insideNode,"visibility","visible");this.onReady()},_connectInput:function(){this._disconnect();this._cons.push(z.connect(this._fileInput,"mouseover",this,function(r){t.add(this.domNode,this.hoverClass);this.onMouseOver(r)}));this._cons.push(z.connect(this._fileInput,"mouseout",this,function(r){setTimeout(H.hitch(this,
function(){t.remove(this.domNode,this.activeClass);t.remove(this.domNode,this.hoverClass);this.onMouseOut(r);this._checkHtmlCancel("off")}),0)}));this._cons.push(z.connect(this._fileInput,"mousedown",this,function(r){t.add(this.domNode,this.activeClass);t.remove(this.domNode,this.hoverClass);this.onMouseDown(r)}));this._cons.push(z.connect(this._fileInput,"mouseup",this,function(r){t.remove(this.domNode,this.activeClass);this.onMouseUp(r);this.onClick(r);this._checkHtmlCancel("up")}));this._cons.push(z.connect(this._fileInput,
"change",this,function(){this._checkHtmlCancel("change");var r=this._fileInput.value;r?this._change([{name:r,type:"",size:0}]):this._change([])}));0<=this.tabIndex&&l.set(this.domNode,"tabIndex",this.tabIndex)},_checkHtmlCancel:function(r){"change"==r&&(this.dialogIsOpen=!1);"up"==r&&(this.dialogIsOpen=!0);if("off"==r){if(this.dialogIsOpen)this.onCancel();this.dialogIsOpen=!1}},_styleContent:function(){var r=this.fhtml.nr;g.set(this.insideNode,{width:r.w+"px",height:"middle"==r.va?r.h+"px":"auto",
textAlign:r.ta,paddingTop:r.p[0]+"px",paddingRight:r.p[1]+"px",paddingBottom:r.p[2]+"px",paddingLeft:r.p[3]+"px"});try{g.set(this.insideNode,"lineHeight","inherit")}catch(x){}},_resetHTML:function(){"html"==this.uploaderType&&this._formNode&&(this.fileInputs=[],c("*",this._formNode).forEach(function(r){A.destroy(r)}),this.fileCount=0,this._buildFileInput(),this._connectInput())},_buildForm:function(){this._formNode||(9>d("ie")||d("ie")&&d("quirks")?(this._formNode=document.createElement('\x3cform enctype\x3d"multipart/form-data" method\x3d"post"\x3e'),
this._formNode.encoding="multipart/form-data",this._formNode.id=n.getUniqueId("FileUploaderForm"),this.domNode.appendChild(this._formNode)):this._formNode=A.create("form",{enctype:"multipart/form-data",method:"post",id:n.getUniqueId("FileUploaderForm")},this.domNode))},_buildFileInput:function(){this._fileInput&&(this._disconnect(),this._fileInput.id+=this.fileCount,g.set(this._fileInput,"display","none"));this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var r=
this.htmlFieldName;this.selectMultipleFiles&&(r+=this.fileCount,this.fileCount++);l.set(this._fileInput,{id:this.id,name:r,type:"file"});t.add(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);r=m.getMarginBox(this._fileInput);g.set(this._fileInput,{position:"relative",left:this.fhtml.nr.w-r.w+"px",opacity:0})},_renumberInputs:function(){if(this.selectMultipleFiles){var r;this.fileCount=0;D.forEach(this.fileInputs,function(x){r=this.htmlFieldName+this.fileCount;this.fileCount++;
l.set(x,"name",r)},this)}},_setFormStyle:function(){E.insertCssRule("#"+this._formNode.id+" input","font-size:"+Math.max(2,Math.max(Math.ceil(this.fhtml.nr.w/60),Math.ceil(this.fhtml.nr.h/15)))+"em");g.set(this.domNode,{overflow:"hidden",position:"relative"});g.set(this.insideNode,"position","absolute")},_setHtmlPostData:function(){if(this.postData)for(var r in this.postData)A.create("input",{type:"hidden",name:r,value:this.postData[r]},this._formNode)},uploadFlash:function(){try{if(this.showProgress){this._displayProgress(!0);
var r=z.connect(this,"_complete",this,function(){z.disconnect(r);this._displayProgress(!1)})}var x={},M;for(M in this.postData)x[M]=this.postData[M];this.flashMovie.doUpload(x)}catch(O){this._error("FileUploader - Sorry, the SWF failed to initialize."+O)}},createFlashUploader:function(){if(this.uploadUrl=this.uploadUrl.toString())if(0>this.uploadUrl.toLowerCase().indexOf("http")&&0!=this.uploadUrl.indexOf("/")){var r=window.location.href.split("/");r.pop();r=r.join("/")+"/";this.uploadUrl=r+this.uploadUrl;
this.log("SWF Fixed - Relative loc:",r," abs loc:",this.uploadUrl)}else this.log("SWF URL unmodified:",this.uploadUrl);else console.warn("Warning: no uploadUrl provided.");r={expressInstall:!0,path:this.swfPath.uri||this.swfPath,width:this.fhtml.nr.w,height:this.fhtml.nr.h,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName,uploadUrl:this.uploadUrl,uploadOnSelect:this.uploadOnChange,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.selectMultipleFiles,
id:this.id,isDebug:this.isDebug,devMode:this.devMode,flashButton:I.serialize("fh",this.fhtml),fileMask:I.serialize("fm",this.fileMask),noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new L(r,this.insideNode);this.flashObject.onError=H.hitch(function(x){this._error("Flash Error: "+x)});this.flashObject.onReady=H.hitch(this,function(){g.set(this.insideNode,"visibility","visible");
this.log("FileUploader flash object ready");this.onReady(this)});this.flashObject.onLoad=H.hitch(this,function(x){this.flashMovie=x;this.flashReady=!0;this.onLoad(this)});this._connectFlash()},_connectFlash:function(){this._doSub("/filesSelected","_change");this._doSub("/filesUploaded","_complete");this._doSub("/filesProgress","_progress");this._doSub("/filesError","_error");this._doSub("/filesCanceled","onCancel");this._doSub("/stageBlur","_onFlashBlur");this._doSub("/up","onMouseUp");this._doSub("/down",
"onMouseDown");this._doSub("/over","onMouseOver");this._doSub("/out","onMouseOut");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&l.set(this.domNode,"tabIndex",this.tabIndex)},_doSub:function(r,x){this._subs.push(z.subscribe(this.id+r,this,x))},urlencode:function(r){return r&&"none"!=r?r.replace(/:/g,"||").replace(/\./g,"^^").replace("url(","").replace(")","").replace(/'/g,"").replace(/"/g,""):!1},isButton:function(r){r=r.tagName.toLowerCase();
return"button"==r||"input"==r},getTextStyle:function(r){var x={};x.ff=g.get(r,"fontFamily");if(x.ff){x.ff=x.ff.replace(", ",",");x.ff=x.ff.replace(/"|'/g,"");x.ff="sans-serif"==x.ff?"Arial":x.ff;x.fw=g.get(r,"fontWeight");x.fi=g.get(r,"fontStyle");x.fs=parseInt(g.get(r,"fontSize"),10);if(-1<g.get(r,"fontSize").indexOf("%"))for(var M=r;M.tagName;){if(-1==g.get(M,"fontSize").indexOf("%")){x.fs=parseInt(g.get(M,"fontSize"),10);break}"body"==M.tagName.toLowerCase()&&(x.fs=.16*parseInt(g.get(M,"fontSize"),
10));M=M.parentNode}x.fc=(new F(g.get(r,"color"))).toHex();x.fc=parseInt(x.fc.substring(1,Infinity),16)}x.lh=g.get(r,"lineHeight");x.ta=g.get(r,"textAlign");x.ta="start"!=x.ta&&x.ta?x.ta:"left";x.va=this.isButton(r)?"middle":x.lh==x.h?"middle":g.get(r,"verticalAlign");return x},getText:function(r){r=H.trim(r.innerHTML);-1<r.indexOf("\x3c")&&(r=escape(r));return r},getStyle:function(r){var x={},M=m.getContentBox(r),O=m.getPadExtents(r);x.p=[O.t,O.w-O.l,O.h-O.t,O.l];x.w=M.w+O.w;x.h=M.h+O.h;x.d=g.get(r,
"display");M=new F(g.get(r,"backgroundColor"));x.bc=0==M.a?"#ffffff":M.toHex();x.bc=parseInt(x.bc.substring(1,Infinity),16);if(M=this.urlencode(g.get(r,"backgroundImage")))x.bi={url:M,rp:g.get(r,"backgroundRepeat"),pos:escape(g.get(r,"backgroundPosition"))},x.bi.pos||(M=g.get(r,"backgroundPositionX"),O=g.get(r,"backgroundPositionY"),x.bi.pos=escape(("left"==M?"0%":"right"==M?"100%":M)+" "+("top"==O?"0%":"bottom"==O?"100%":O)));return H.mixin(x,this.getTextStyle(r))},getTempNodeStyle:function(r,x,
M){if(M){M=A.place("\x3c"+r.tagName+"\x3e\x3cspan\x3e"+r.innerHTML+"\x3c/span\x3e\x3c/"+r.tagName+"\x3e",r.parentNode);var O=M.firstChild;t.add(O,r.className);t.add(M,x);r=this.getStyle(O)}else M=A.place("\x3c"+r.tagName+"\x3e"+r.innerHTML+"\x3c/"+r.tagName+"\x3e",r.parentNode),t.add(M,r.className),t.add(M,x),M.id=r.id,r=this.getStyle(M);A.destroy(M);return r}})})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(u,B,H,D,z,a,d,c,b,g,m,l,t){H.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");a=t._iframeName;a=a.substring(0,a.lastIndexOf("_"));var A=D.delegate(t,{create:function(){return A._frame=t.create.apply(t,arguments)},get:null,post:null,send:function(v){var e=z._ioSetArgs(v,function(w){f&&f.cancel()},function(w){var C=null;w=w.ioArgs;try{var L=w.handleAs;"xml"===L||"html"===L?C=f.response.data:(C=f.response.text,"json"===L?C=B.fromJson(C):"javascript"===L&&(C=H.eval(C)))}catch(I){C=
I}return C},function(w,C){C.ioArgs._hasError=!0;return w}),n=e.ioArgs,q="GET",F=c.byId(v.form);v.method&&"POST"===v.method.toUpperCase()&&F&&(q="POST");v={method:q,handleAs:"json"===v.handleAs||"javascript"===v.handleAs?"text":v.handleAs,form:v.form,query:F?null:v.content,data:F?v.content:null,timeout:v.timeout,ioArgs:n};v.method&&(v.method=v.method.toUpperCase());if(u.ioPublish&&H.publish&&!1!==n.args.ioPublish)var k=l.after(t,"_notifyStart",function(w){w.options.ioArgs===n&&(k.remove(),z._ioNotifyStart(e))},
!0);var f=t(n.url,v,!0);n._callNext=f._callNext;f.then(function(){e.resolve(e)}).otherwise(function(w){e.ioArgs.error=w;e.reject(w)});return e},_iframeOnload:d.global[a+"_onload"]});D.setObject("dojo.io.iframe",A);return A})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),function(u,B,H,D,z,a,d,c,b){function g(e){e=u.delegate(l,e);if(!("path"in e))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),
null;"id"in e||(e.id="dojox-embed-flash-"+m++);return e}var m=0,l={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};if(z("ie")){var t=function(e){e=g(e);if(!e)return null;var n,q=e.path;if(e.vars){var F=[];for(n in e.vars)F.push(encodeURIComponent(n)+"\x3d"+encodeURIComponent(e.vars[n]));e.params.FlashVars=F.join("\x26");delete e.vars}q='\x3cobject id\x3d"'+b.escape(String(e.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+
b.escape(String(e.width))+'" height\x3d"'+b.escape(String(e.height))+'"'+(e.style?' style\x3d"'+b.escape(String(e.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+b.escape(String(q))+'" /\x3e';if(e.params)for(n in e.params)q+='\x3cparam name\x3d"'+b.escape(n)+'" value\x3d"'+b.escape(String(e.params[n]))+'" /\x3e';return{id:e.id,markup:q+"\x3c/object\x3e"}};var A=function(){for(var e=10,n=null;!n&&7<e;)try{n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+e--)}catch(q){}return n?(e=n.GetVariable("$version").split(" ")[1].split(","),
{major:null!=e[0]?parseInt(e[0]):0,minor:null!=e[1]?parseInt(e[1]):0,rev:null!=e[2]?parseInt(e[2]):0}):{major:0,minor:0,rev:0}}();B.addOnWindowUnload(function(){console.warn("***************UNLOAD");var e=function(){};D("object").reverse().style("display","none").forEach(function(n){for(var q in n)if("FlashVars"!=q&&"function"==typeof n[q])try{n[q]=e}catch(F){}})})}else t=function(e){e=g(e);if(!e)return null;var n,q=e.path;if(e.vars){var F=[];for(n in e.vars)F.push(encodeURIComponent(n)+"\x3d"+encodeURIComponent(e.vars[n]));
e.params.flashVars=F.join("\x26");delete e.vars}q='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+b.escape(String(q))+'" id\x3d"'+b.escape(String(e.id))+'" width\x3d"'+b.escape(String(e.width))+'" height\x3d"'+b.escape(String(e.height))+'"'+(e.style?' style\x3d"'+b.escape(String(e.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(e.params)for(n in e.params)q+=" "+b.escape(n)+'\x3d"'+b.escape(String(e.params[n]))+'"';return{id:e.id,markup:q+
" /\x3e"}},A=function(){var e=navigator.plugins["Shockwave Flash"];return e&&e.description?(e=e.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=e[0]?parseInt(e[0]):0,minor:null!=e[1]?parseInt(e[1]):0,rev:null!=e[2]?parseInt(e[2]):0}):{major:0,minor:0,rev:0}}();var v=function(e,n){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");
this.available=A.major;this.minimumVersion=e.minimumVersion||9;this.domNode=this.movie=this.id=null;n&&(n=a.byId(n));setTimeout(u.hitch(this,function(){if(e.expressInstall||this.available&&this.available>=this.minimumVersion)if(e&&n)this.init(e,n);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),
100)};u.extend(v,{onReady:function(e){},onLoad:function(e){},onError:function(e){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(e,n){this.destroy();n=a.byId(n||this.domNode);if(!n)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var q=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;v.initialized&&(this.id=v.place(e,n),this.domNode=n,setTimeout(u.hitch(this,
function(){this.movie=this.byId(this.id,e.doc);this.onReady(this.movie);this._poller=setInterval(u.hitch(this,function(){try{q=this.movie.PercentLoaded()}catch(F){console.warn("this.movie.PercentLoaded() failed",F,this.movie)}if(100==q)this._onload();else if(0==q&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(e){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var e=
u.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),n;for(n in this)e[n]||delete this[n];this._poller?d(this,"Load",this,"_destroy"):this._destroy()}},byId:function(e,n){n=n||document;return n.embeds[e]?n.embeds[e]:n[e]?n[e]:window[e]?window[e]:document[e]?document[e]:null}});u.mixin(v,{minSupported:8,available:A.major,supported:A.major>=A.required,minimumRequired:A.required,version:A,initialized:!1,onInitialize:function(){v.initialized=!0},__ie_markup__:function(e){return t(e)},proxy:function(e,
n){H.forEach(n instanceof Array?n:[n],function(q){this[q]=u.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+q+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+H.map(arguments,function(F){return __flash__toXML(F)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},e)}});v.place=function(e,n){e=t(e);n=a.byId(n);n||(n=c.doc.createElement("div"),n.id=e.id+"-container",c.body().appendChild(n));return e?(n.innerHTML=e.markup,
e.id):null};v.onInitialize();u.setObject("dojox.embed.Flash",v);return v})},"dojox/embed/flashVars":function(){define(["dojo"],function(u){u.deprecated("dojox.embed.flashVars","Will be removed in 2.0","2.0");var B={serialize:function(H,D){var z=function(b){"string"==typeof b&&(b=b.replace(/;/g,"_sc_"),b=b.replace(/\./g,"_pr_"),b=b.replace(/:/g,"_cl_"));return b},a=dojox.embed.flashVars.serialize,d="";if(u.isArray(D)){for(var c=0;c<D.length;c++)d+=a(H+"."+c,z(D[c]))+";";return d.replace(/;{2,}/g,";")}if(u.isObject(D)){for(c in D)d+=
a(H+"."+c,z(D[c]))+";";return d.replace(/;{2,}/g,";")}return H+":"+D}};u.setObject("dojox.embed.flashVars",B);return B})},"dojox/html/styles":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(u,B,H,D){var z=u.getObject("dojox.html",!0),a={},d={},c=[];z.insertCssRule=function(b,g,m){m=z.getDynamicStyleSheet(m);var l=b+" {"+g+"}";console.log("insertRule:",l);D("ie")?(m.cssText+=l,console.log("ss.cssText:",m.cssText)):m.sheet?m.sheet.insertRule(l,
m._indicies.length):m.appendChild(H.doc.createTextNode(l));m._indicies.push(b+" "+g);return b};z.removeCssRule=function(b,g,m){var l=-1,t,A;for(t in a)if(!m||m===t){var v=a[t];for(A=0;A<v._indicies.length;A++)if(b+" "+g===v._indicies[A]){l=A;break}if(-1<l)break}if(!v)return console.warn("No dynamic style sheet has been created from which to remove a rule."),!1;if(-1===l)return console.warn("The css rule was not found and could not be removed."),!1;v._indicies.splice(l,1);D("ie")?v.removeRule(l):v.sheet&&
v.sheet.deleteRule(l);return!0};z.modifyCssRule=function(b,g,m){};z.getStyleSheet=function(b){if(a[b||"default"])return a[b||"default"];if(!b)return!1;var g=z.getStyleSheets();if(g[b])return z.getStyleSheets()[b];for(var m in g)if(g[m].href&&-1<g[m].href.indexOf(b))return g[m];return!1};z.getDynamicStyleSheet=function(b){b||(b="default");a[b]||(H.doc.createStyleSheet?(a[b]=H.doc.createStyleSheet(),9>D("ie")&&(a[b].title=b)):(a[b]=H.doc.createElement("style"),a[b].setAttribute("type","text/css"),H.doc.getElementsByTagName("head")[0].appendChild(a[b]),
console.log(b," ss created: ",a[b].sheet)),a[b]._indicies=[]);return a[b]};z.enableStyleSheet=function(b){if(b=z.getStyleSheet(b))b.sheet?b.sheet.disabled=!1:b.disabled=!1};z.disableStyleSheet=function(b){if(b=z.getStyleSheet(b))b.sheet?b.sheet.disabled=!0:b.disabled=!0};z.activeStyleSheet=function(b){var g=z.getToggledStyleSheets(),m;if(1===arguments.length)B.forEach(g,function(l){l.disabled=l.title===b?!1:!0});else for(m=0;m<g.length;m++)if(!1===g[m].disabled)return g[m];return!0};z.getPreferredStyleSheet=
function(){};z.getToggledStyleSheets=function(){var b;if(!c.length){var g=z.getStyleSheets();for(b in g)g[b].title&&c.push(g[b])}return c};z.getStyleSheets=function(){if(d.collected)return d;B.forEach(H.doc.styleSheets,function(b){var g=b.sheet?b.sheet:b;b=g.title||g.href;if(D("ie"))-1===g.cssText.indexOf("#default#VML")&&(g.href?d[b]=g:g.imports.length?B.forEach(g.imports,function(m){d[m.title||m.href]=m}):d[b]=g);else{d[b]=g;d[b].id=g.ownerNode.id;b=[];try{b=g[g.cssRules?"cssRules":"rules"]}catch(m){console.warn("Reading css rules from stylesheet "+
g.href+" is forbidden due to same-origin policy. See http://www.w3.org/TR/CSP/#cascading-style-sheet-css-parsing",g)}B.forEach(b,function(m){m.href&&(d[m.href]=m.styleSheet,d[m.href].id=g.ownerNode.id)})}});d.collected=!0;return d};return z})},"jimu/dijit/EditorChooseImage":function(){define("dojo dijit dijit/_editor/_Plugin jimu/dijit/ImageChooser dojo/_base/html dojo/_base/lang dojo/i18n dojo/_base/connect dojo/_base/declare".split(" "),function(u,B,H,D,z,a,d){u.experimental("dojox.editor.plugins.ChooseImage");
var c=u.declare("dojox.editor.plugins.ChooseImage",H,{iconClassPrefix:"editorIcon",useDefaultCommand:!1,_initButton:function(){this.createFileInput();this.command="chooseImage";var b=d.getLocalization("dijit._editor","commands");this.button=new B.form.Button({label:b.insertImage,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"UploadImage",tabIndex:"-1",onClick:a.hitch(this,this._chooseImage)});this.button.set("readOnly",!1);this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",
arguments);delete this.command},updateState:function(){var b=this.get("disabled");this.button.set("disabled",this.get("disabled"));!0===b?(z.addClass(this.button,"dijitButtonDisabled"),this.imageChooser.disableChooseImage()):(z.removeClass(this.button,"dijitButtonDisabled"),this.imageChooser.enableChooseImage())},createFileInput:function(){var b=u.create("span",{innerHTML:"."},document.body);this.imageChooser=new D({showSelfImg:!1,cropImage:!1,format:[D.GIF,D.JPEG,D.PNG]},b);this.connect(this.imageChooser,
"onImageChange","insertTempImage")},_chooseImage:function(){z.setStyle(this.imageChooser.domNode,"display","none");this.imageChooser.triggerImgUpload()},onComplete:function(b){b=b[0];var g=u.byId(this.currentImageId,this.editor.document);var m=this.downloadPath?this.downloadPath+b.name:b.file;g.src=m;u.attr(g,"_djrealurl",m);b.width&&(g.width=b.width,g.height=b.height)},insertTempImage:function(b,g){g=g&&g.fileName?'alt\x3d"'+g.fileName+'"':"";this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",
'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+b+'" '+g+"/\x3e")},destroy:function(){this.imageChooser&&this.imageChooser.destroy();this.inherited(arguments)}});u.subscribe(B._scopeName+".Editor.getPlugin",null,function(b){if(!b.plugin)switch(b.args.name){case "chooseImage":b.plugin=new c({url:b.args.url})}});H.registry.chooseImage=function(b){return new c(b)};return c})},"jimu/dijit/EditorTextColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),
function(u,B,H,D,z,a){B.experimental("dijit.editor.plugins.EditorTextColor");var d=D("dijit.editor.plugins.EditorTextColor",z,{buttonClass:a,colorPicker:"jimu/dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command="editorTextColor";this.hackCommand="foreColor";this.inherited(arguments);var c="",b=!1;this.params.custom&&(this.params.custom.recordUID&&(c=this.params.custom.recordUID),this.params.custom.forceAttr&&(b=this.params.custom.forceAttr));var g=this;this.button.set("iconClass",
this.iconClassPrefix+" "+this.iconClassPrefix+"ForeColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(m){function l(t){g.button.dropDown=new t({dir:g.editor.dir,ownerDocument:g.editor.ownerDocument,value:g.value,appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:c,onChange:function(A){g.editor.execCommand("useCSS",b);g.editor.execCommand("styleWithCSS",!b);g.editor.execCommand(g.hackCommand,
A)},onClose:function(){g.button.closeDropDown()}});m()}"string"===typeof g.colorPicker?u([g.colorPicker],l):l(g.colorPicker)}},updateState:function(){var c=this.editor,b=this.hackCommand;if(c&&c.isLoaded&&b.length){if(this.button){var g=this.get("disabled");this.button.set("disabled",g);if(g)return;try{var m=c.queryCommandValue(b)||""}catch(l){m=""}}""===m?m="#000000":"transparent"===m&&(m="rgba(0, 0, 0, 0)");this.value=m;(c=this.button.dropDown)&&c.getColor&&m!==c.getColor()&&(c.refreshRecords(),
c.setColor(m))}}});B.subscribe(H._scopeName+".Editor.getPlugin",null,function(c){if(!c.plugin)switch(c.args.name){case "editorTextColor":c.plugin=new d}});return d})},"jimu/dijit/EditorBackgroundColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),function(u,B,H,D,z,a){B.experimental("dijit.editor.plugins.EditorBackgroundColor");var d=D("dijit.editor.plugins.EditorBackgroundColor",z,{buttonClass:a,colorPicker:"jimu/dijit/ColorPalette",
useDefaultCommand:!1,_initButton:function(){this.command="editorBackgroundColor";this.hackCommand="hiliteColor";this.inherited(arguments);var c="";this.params.custom&&this.params.custom.recordUID&&(c=this.params.custom.recordUID);var b=this;this.button.set("iconClass",this.iconClassPrefix+" "+this.iconClassPrefix+"HiliteColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(g){function m(l){b.button.dropDown=new l({dir:b.editor.dir,ownerDocument:b.editor.ownerDocument,
value:b.value,appearance:{showTransparent:!0,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:c,onChange:function(t){b.editor.execCommand("useCSS",!1);b.editor.execCommand("styleWithCSS",!0);b.editor.execCommand(b.hackCommand,t)},onExecute:function(){b.editor.execCommand(b.hackCommand,this.get("value"))},onClose:function(){b.button.closeDropDown()}});g()}"string"===typeof b.colorPicker?u([b.colorPicker],m):m(b.colorPicker)}},updateState:function(){var c=
this.editor,b=this.hackCommand;if(c&&c.isLoaded&&b.length){if(this.button){var g=this.get("disabled");this.button.set("disabled",g);if(g)return;try{var m=c.queryCommandValue(b)||""}catch(l){m=""}}""===m?m="#000000":"transparent"===m&&(m="rgba(0, 0, 0, 0)");this.value=m;(c=this.button.dropDown)&&c.getColor&&m!==c.getColor()&&(c.refreshRecords(),c.setColor(m))}}});B.subscribe(H._scopeName+".Editor.getPlugin",null,function(c){if(!c.plugin)switch(c.args.name){case "editorBackgroundColor":c.plugin=new d}});
return d})},"widgets/NearMe/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/NearMe/setting/SymbolChooserPopup.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv class\x3d"esriCTSymbolChooserContainer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"symbolData" title\x3d"${symbolChooserTitle}" class\x3d"common-input esriCTSymbolData"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"okButton"\x3e\r\n                ${nls.common.ok}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/NearMe/setting/NetworkServiceChooser.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv class\x3d"public-search-radios esriCTSearchRadio" data-dojo-attach-point\x3d"routeSearch"\x3e\r\n        \x3cinput data-dojo-attach-point\x3d"organizationRadio" checked type\x3d"radio" name\x3d"routeSearchRadio"\r\n            class\x3d"esriCTFloatLeading portal-public-radio routeSearchRadio jimu-radio-btn" id\x3d"org_Radio"\r\n            data-dojo-type\x3d"dijit/form/RadioButton"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"organizationLabel" class\x3d"esriCTFloatLeading portal-public-label"\r\n            for\x3d"org_Radio" style\x3d"cursor: pointer;"\x3e\r\n            ${nls.networkServiceChooser.arcgislabel}\x3c/label\x3e\r\n        \x3cinput data-dojo-attach-point\x3d"inputRouteURLRadio" type\x3d"radio" name\x3d"routeSearchRadio"\r\n            class\x3d"esriCTFloatLeading online-public-radio routeSearchRadio jimu-radio-btn" id\x3d"route_URL_Radio"\r\n            data-dojo-type\x3d"dijit/form/RadioButton"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"inputRouteURLLabel" class\x3d"esriCTFloatLeading online-public-label"\r\n            for\x3d"route_URL_Radio" style\x3d"cursor: pointer;"\x3e\r\n            ${nls.networkServiceChooser.serviceURLabel}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"itemSelectDiv" class\x3d"esriCTItemSelectDiv"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"serviceUrlDiv" class\x3d"esriCTServiceUrlDiv esriCTHidden"\x3e\r\n        \x3cdiv class\x3d"serviceUrlContainer row"\x3e\r\n            \x3cdiv class\x3d"esriCTServiceLable" title\x3d"${nls.networkServiceChooser.routeURL}"\x3e\r\n                ${nls.networkServiceChooser.routeURL}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTServiceField"\x3e\r\n                \x3cdiv class\x3d"esriCTSetServiceURL" data-dojo-type\x3d"dijit/form/ValidationTextBox" trim\x3d"true" required\x3d"true"\r\n                    data-dojo-attach-point\x3d"serviceURL"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1 urlButton esriCTBtnEllipsis jimu-state-disabled"\r\n                    title\x3d"${nls.networkServiceChooser.validateRouteURL}" data-dojo-attach-point\x3d"validateRouteURL"\x3e\r\n                    ${nls.networkServiceChooser.validateRouteURL}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTExampleUrl row"\x3e\r\n            \x3cdiv class\x3d"esriCTServiceLable" title\x3d" ${nls.networkServiceChooser.exampleText}"\x3e\r\n                ${nls.networkServiceChooser.exampleText}\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTServiceField"\x3e\r\n                \x3cdiv class\x3d"esriCTHint esriCTNetworkChooserHint"\x3e\r\n                    \x3cdiv class\x3d"esriCTExampleUrl"\x3e\r\n                        ${nls.networkServiceChooser.hintRouteURL1}\x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTExampleUrl"\x3e\r\n                        ${nls.networkServiceChooser.hintRouteURL2}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"routeLayerList" class\x3d"esriCTRouteListDiv"\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"agolRouteLayerList" class\x3d"esriCTAgolRouteListDiv esriCTHidden"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n        \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"cancelButton"\x3e\r\n                ${nls.common.cancel}\x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1 jimu-state-disabled"\r\n                data-dojo-attach-point\x3d"okButton"\x3e\r\n                ${nls.common.ok}\x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext"\x3e\r\n                ${nls.common.next}\x3c/div\x3e\r\n            \x3cdiv class\x3d"jimu-btn jimu-float-trailing back esriCTHidden" data-dojo-attach-point\x3d"btnBack"\r\n                data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e\r\n                ${nls.common.back}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/ItemSelector.html":'\r\n\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cdiv\x3e${nls.groups}:\x3c/div\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cfieldset id\x3d"publicSearchRaido"\x3e\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" data-dojo-type\x3d"dijit/form/RadioButton" \r\n\t\t\t\t\t\t\tdata-label-id\x3d"portalPublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading portal-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" data-label-for\x3d"portalPublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" data-dojo-type\x3d"dijit/form/RadioButton"\r\n\t\t\t\t\t\t\tdata-label-id\x3d"onlinePublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading online-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" data-label-for\x3d"onlinePublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\t\x3c/fieldset\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/NearMe/setting/layerChooserPopup.html":'\x3cdiv data-dojo-attach-point\x3d"layerSelectorContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"layerSelectorNode" class\x3d"esriCTLayerSelectorNode"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/NearMe/setting/SearchSourceSettings.html":'\x3cdiv\x3e\r\n  \x3c!--Search source setting hint text --\x3e\r\n  \x3cdiv class\x3d"esriCTHint" style\x3d"width: 99%"\x3e\r\n    ${nls.searchSourceSetting.searchSourceSettingTitleHintText}\r\n  \x3c/div\x3e\r\n  \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTDropdownButton" role\x3d"button"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cspan\x3e ${nls.searchSourceSetting.addSearchSourceLabel}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cul class\x3d"esriCTDropdownMenu" role\x3d"menu" data-dojo-attach-point\x3d"menuItemClickNode"\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"query"\x3e${nls.searchSourceSetting.featureLayerLabel}\x3c/li\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"locator"\x3e${nls.searchSourceSetting.geocoderLabel}\x3c/li\x3e\r\n    \x3c/ul\x3e\r\n  \x3c/div\x3e\r\n \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTSources" data-dojo-attach-point\x3d"searchSources"\x3e\r\n    \x3cdiv class\x3d"esriCTSourceList jimu-float-leading"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"sourceList" style\x3d"100%"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTSourceSetting jimu-float-trailing" data-dojo-attach-point\x3d"sourceSettingNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n     \x3c!--General setting: Label--\x3e\r\n    \x3cdiv class\x3d"esriCTlabel esriCTGeneralSettingLabelStyle"\x3e\r\n      ${nls.searchSourceSetting.generalSettingLabel}\r\n    \x3c/div\x3e\r\n    \x3c!--General setting: All Place Holder Label--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSourceSetting.allPlaceholderLabel}"\x3e\r\n        ${nls.searchSourceSetting.allPlaceholderLabel}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTLayerField" style\x3d"width: 72%;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"allPlaceholder" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/TextBox" trim\x3d"true"\x3e\r\n        \x3c/div\x3e\r\n         \x3c!--General setting: All Place Holder Hint--\x3e\r\n        \x3cdiv class\x3d"esriCTHint"\x3e\r\n          ${nls.searchSourceSetting.allPlaceholderHintText}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n     \x3c!--General setting: Checkbox--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont " data-dojo-attach-point\x3d"showInfoWindowOnSelectNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/NearMe/setting/QuerySourceSetting.html":'\x3cdiv class\x3d"esriCTMainContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n  \x3c!--Select geocoder url --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.layerSource}"\x3e\r\n        ${nls.layerSource}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"sourceUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1"\r\n        data-dojo-attach-point\x3d"setSourceBtnClickNode"  title\x3d"${nls.set}"\x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint esriCTErrorMessage"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection"\x3e\r\n    \x3c!--Details section: Name --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.nameTitle}"\x3e\r\n        ${nls.nameTitle}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField "\x3e\r\n       \x3cdiv data-dojo-attach-point\x3d"sourceName" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n       data-dojo-props\x3d"trim:true,required:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"placeholder" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d"trim:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: searchFields --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.searchFields}"\x3e\r\n        ${nls.searchFields}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"searchFields" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'95%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTsearchFieldsSelector jimu-float-trailing" data-dojo-attach-point\x3d"fieldsSelectorNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: displayField --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.displayField}"\x3e\r\n        ${nls.displayField}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"displayField" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxSuggestions --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.searchLayerTips}" data-dojo-attach-point\x3d"tipsNode"\x3e${nls.searchLayerTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxResult --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: zoomScale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"zoomScaleTr"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.zoomScale}"\x3e\r\n        ${nls.zoomScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"zoomScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:50000"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: exactMatch --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"exactMatch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section: loading shelter --\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"map-td" nowrap data-dojo-attach-point\x3d"mapTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"portal-td" nowrap data-dojo-attach-point\x3d"portalTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"url-td" nowrap data-dojo-attach-point\x3d"urlTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flcContainer" class\x3d"dijit-container map-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container portal-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container url-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan title\x3d"${nls.example}:"\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/NearMe/setting/LocatorSourceSetting.html":'\x3cdiv\x3e\r\n  \x3c!--Select Locator URL --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.locatorUrl}"\x3e\r\n        ${nls.locatorUrl}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"locatorUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv title\x3d"${nls.set}" class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"setButtonNode"  \x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Locator Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection" ata-dojo-attach-point\x3d"detailsSection"\x3e\r\n    \x3c!--Details section: locatorName --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.locatorName}"\x3e\r\n        ${nls.locatorName}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"locatorName"\r\n         placeHolder\x3d"${nls.locatorName}"\r\n        required\x3d"true" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"placeholder"\r\n         placeHolder\x3d"${nls.placeholder}" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: country --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"countryCodeRow"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.countryCode}"\x3e\r\n          ${nls.countryCode}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n          \x3cdiv type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"countryCode"\r\n          placeHolder\x3d"${nls.countryCodeEg} USA,CHN" data-dojo-props\x3d\'style:{width:"97%"}\'\x3e\x3c/div\x3e\r\n          \x3ca class\x3d"jimu-float-trailing" target\x3d"_blank" href\x3d"https://developers.arcgis.com/rest/geocode/api-reference/geocode-coverage.htm"\r\n            style\x3d"line-height:30px;"\x3e${nls.questionMark}\x3c/a\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e${nls.countryCodeHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max suggestion --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.locatorTips}" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n          ${nls.locatorTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max result --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: zoom Scale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.zoomScale}"\x3e\r\n        ${nls.zoomScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"zoomScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:50000"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"enableLocalSearch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - minimum scale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"minScaleNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.minScale}"\x3e\r\n        ${nls.minScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"localSearchMinScale" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n        data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:300000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.minScaleHint}"\x3e${nls.minScaleHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - radius --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"radiusNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.radius}"\x3e\r\n        ${nls.radius}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading" data-dojo-attach-point\x3d"localSearchDistance"\r\n        data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n        data-dojo-props\x3d"constraints:{min:1},style:{width:\'75%\'},value:50000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint esriCTLocalSearchRadiusUnit"\x3e${nls.meters}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"radiusHintNode" title\x3d"${nls.radiusHint}"\x3e${nls.radiusHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: loading shelter --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e',
"url:widgets/NearMe/setting/SymbologySettings.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"btnAddSymbolsNode" class\x3d"esriCTAddSymbologyBtn" title\x3d"${nls.symbologySetting.addSymbologyBtnLabel}"\x3e\r\n        \x3cspan class\x3d"esriCTAddSymbologyIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"esriCTAddSymbologyLabel"\x3e${nls.symbologySetting.addSymbologyBtnLabel}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"symbologyTableAttachNode" class\x3d"esriCTAddLayerTableNode"\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/NearMe/setting/FilterSetting.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"esriCTFilterMsg"\x3e${nls.filterSetting.addTaskTip}\x3c/div\x3e\r\n\t\x3cdiv class\x3d"content"\x3e\r\n\t\t\x3cdiv class\x3d"items-list jimu-not-selectable"\x3e\r\n\t\t\t\x3cdiv class\x3d"add-btn" data-dojo-attach-event\x3d"click:_onBtnAddItemClicked"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"tip"\x3e${nls.filterSetting.newFilter}\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"items-list-content" data-dojo-attach-point\x3d"listContent" data-dojo-attach-event\x3d"click:_onListContentClicked"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"separator not-visible" data-dojo-attach-point\x3d"separator"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"single-setting-content" data-dojo-attach-point\x3d"singleSettingContent"\x3e\r\n\t\t\t\x3cdiv class\x3d"no-task-tip" data-dojo-attach-point\x3d"noTaskTip"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"collapse-option" \x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"cbxCollapseFilters"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"collapse-option" \x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"cbxGroupFiltersNode"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"collapse-option" \x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"cbxExpandFiltersOnLoadNode"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/NearMe/setting/SingleFilterSetting.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"esriCTFilterLabel esriCTLabelMargin"\x3e ${jimuNls.common.layer}\x3c/div\x3e\r\n\t\x3cdiv class\x3d"esriCTFilterLabel" data-dojo-attach-point\x3d"layerTd"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"tabsNode" class\x3d"esriCTTabsNode"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"infoTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTFilterLabel esriCTLabelMargin" style\x3d"margin-top: 20px"\x3e${jimuNls.common.label}\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"nameTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-event\x3d"change:_onNameTextBoxChanged"\r\n\t\t\t data-dojo-props\x3d\'required:true,trim:true\' style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTFilterLabel esriCTLabelMargin" style\x3d"margin-top: 20px"\x3e${jimuNls.common.icon}\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"symbolPicker" data-dojo-type\x3d"jimu/dijit/SymbolPicker" data-dojo-props\x3d"cropImage:true,customZIndex:2000"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"expressionsTabNode"\x3e\r\n\t\t\t\x3cdiv style\x3d"margin-top:10px;"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"esriCTFilterLabel"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"filterDiv" class\x3d"filter-div"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"optionsTabNode" style\x3d"margin-top: 20px"\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTFilterOptionsNode" data-dojo-attach-point\x3d"useMapFilterNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"esriCTFilterOptionsNode" data-dojo-attach-point\x3d"autoApplyWhenWidgetOpenNode"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/LayerChooserFromMapWithDropbox.html":'\x3cdiv\x3e\r\n\x3ctable role\x3d"listbox" aria-haspopup\x3d"true" data-dojo-attach-point\x3d"dropDownBtn" data-dojo-attach-event\x3d"onclick: _onDropDownClick,onkeydown: _onDropDownKeydown"\r\n  tabindex\x3d"0" title\x3d"${nls.customSelectLayer}" aria-label\x3d"${nls.customSelectLayer}"\x3e\r\n    \x3ccaption class\x3d"screen-readers-only-no-position"\x3e${nls.customSelectLayer}\x3c/caption\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"drop-select jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\x3e\r\n            \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/NearMe/setting/Setting.html":'\x3cdiv class\x3d"esriCTMainContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"tabDiv" class\x3d"esriCTFullHeight"\x3e\r\n         \x3c!-- Search Source Settings tab --\x3e\r\n         \x3cdiv class\x3d"esriCTSearchTabNode" data-dojo-attach-point\x3d"searchSourceTabNode" class\x3d"esriCTFullHeight"\x3e\r\n         \x3c/div\x3e\r\n        \x3c!-- Search Settings tab --\x3e\r\n        \x3cdiv class\x3d"esriCTSearchTabNode" data-dojo-attach-point\x3d"searchTabNode" class\x3d"esriCTFullHeight"\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel" data-dojo-attach-point\x3d"colorPickerLabelNode" title\x3d"${nls.searchSetting.fontColorLabel}"\x3e\r\n                    ${nls.searchSetting.fontColorLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv class\x3d"esriCTColorPickerNode" data-dojo-attach-point\x3d"colorPickerNode"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin esriCTFontColorLabelHint"\x3e\r\n                        ${nls.searchSetting.fontColorHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"highlightColorCheckBoxNode"\r\n                    data-dojo-props\x3d"checked:\'true\'" class\x3d"jimu-checkbox esriCTlabel"\r\n                    title\x3d"${nls.searchSetting.highlightColorLabel}" label\x3d" ${nls.searchSetting.highlightColorLabel}"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"highlightColorPickerParentNode"\x3e\r\n                        \x3cdiv class\x3d"esriCTColorPickerNode" data-dojo-attach-point\x3d"highlightColorPickerNode"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin esriCTFontColorLabelHint"\x3e\r\n                            ${nls.searchSetting.highlightColorHintText}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer jimu-state-disabled" data-dojo-attach-point\x3d"addLayersLabelNode"\r\n                    title\x3d"${nls.layerSelector.selectLayerLabel}"\x3e\r\n                    ${nls.layerSelector.selectLayerLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv class\x3d"esriCTSelectedLayersDiv" data-dojo-attach-point\x3d"layerListNode"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTAddLayerButton jimu-btn jimu-float-trailing" title\x3d"${nls.layerSelector.addLayerButton}"\r\n                        data-dojo-attach-point\x3d"addLayerButton"\x3e\r\n                        ${nls.layerSelector.addLayerButton}\x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                        ${nls.layerSelector.layerSelectionHint}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"setLocationCheckBoxNode" class\x3d"jimu-checkbox esriCTCheckOptionLabel"\r\n                    title\x3d"${nls.searchSetting.showToolToSelectLabel}" label\x3d"${nls.searchSetting.showToolToSelectLabel}"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin esriCTCheckboxHint"\x3e\r\n                    ${nls.searchSetting.showToolToSelectHintText}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"setCurrentLocationCheckBoxNode" class\x3d"jimu-checkbox esriCTCheckOptionLabel"\r\n                    title\x3d"${nls.searchSetting.setCurrentLocationLabel}" label\x3d"${nls.searchSetting.setCurrentLocationLabel}"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin esriCTCheckboxHint"\x3e\r\n                    ${nls.searchSetting.setCurrentLocationHintText}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"searchLayerResultNode" class\x3d"jimu-checkbox esriCTCheckOptionLabel"\r\n                    title\x3d"${nls.searchSetting.searchLayerResultLabel}" label\x3d"${nls.searchSetting.searchLayerResultLabel}"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin esriCTCheckboxHint"\x3e\r\n                    ${nls.searchSetting.searchLayerResultHint}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"bufferVisibilityCheckBox" class\x3d"jimu-checkbox esriCTCheckOptionLabel"\r\n                    title\x3d"${nls.searchSetting.bufferVisibilityLabel}" label\x3d"${nls.searchSetting.bufferVisibilityLabel}"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin esriCTCheckboxHint"\x3e\r\n                    ${nls.searchSetting.bufferVisibilityHintText}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"bufferColorSetting"\r\n                class\x3d"esriCTHidden"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel" title\x3d"${nls.searchSetting.bufferColorLabel}"\x3e\r\n                    ${nls.searchSetting.bufferColorLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"polygonSymbolNode"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTPreviewHintField"\x3e\r\n                        ${nls.searchSetting.bufferColorHintText}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n                \x3clegend class\x3d"esriCTFieldSetLegend"\x3e ${nls.searchSetting.bufferItemOptionLegend}\x3c/legend\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3c!--Extract data task radio button--\x3e\r\n                    \x3cinput class\x3d"esriCTBufferDistanceSliderRadioButton" id\x3d"bufferDistanceSliderOption" type\x3d"radio"\r\n                        class\x3d"jimu-radio-btn" data-dojo-type\x3d"dijit/form/RadioButton" checked\x3d"false"\r\n                        data-dojo-attach-point\x3d"bufferDistanceSliderRBNode" data-dojo-props\x3d"group:\'radioButtonBufferOptions\'"\x3e\r\n                    \x3c!--Extract data task download option label and hint container--\x3e\r\n                    \x3clabel class\x3d"esriCTRBLabel" for\x3d"bufferDistanceSliderOption"\x3e\r\n                        ${nls.searchSetting.bufferDistanceSliderLabel}\r\n                    \x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3c!--Extract data task radio button--\x3e\r\n                    \x3cinput class\x3d"esriCTBufferDistanceSliderRadioButton" id\x3d"bufferDistanceTextboxOption" type\x3d"radio"\r\n                        class\x3d"jimu-radio-btn" data-dojo-type\x3d"dijit/form/RadioButton"\r\n                        data-dojo-attach-point\x3d"bufferDistanceTextboxRBNode" data-dojo-props\x3d"group:\'radioButtonBufferOptions\'"\x3e\r\n                    \x3c!--Extract data task download option label and hint container--\x3e\r\n                    \x3clabel class\x3d"esriCTRBLabel" for\x3d"bufferDistanceTextboxOption"\x3e\r\n                        ${nls.searchSetting.bufferDistanceTextboxLabel}\r\n                    \x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3c!--Extract data task radio button--\x3e\r\n                    \x3cinput class\x3d"esriCTBufferDistanceSliderRadioButton" id\x3d"bufferDistanceSliderandTextboxOption" type\x3d"radio"\r\n                        class\x3d"jimu-radio-btn" data-dojo-type\x3d"dijit/form/RadioButton"\r\n                        data-dojo-attach-point\x3d"bufferDistanceSliderandTextboxRBNode"\r\n                        data-dojo-props\x3d"group:\'radioButtoradioButtonBufferOptionsnBuffer\'"\x3e\r\n                    \x3c!--Extract data task download option label and hint container--\x3e\r\n                    \x3clabel class\x3d"esriCTRBLabel" for\x3d"bufferDistanceSliderandTextboxOption"\x3e\r\n                        ${nls.searchSetting.bufferDistanceSliderandTextboxLabel}\r\n                    \x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/fieldset\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSetting.defaultBufferDistanceLabel}"\x3e\r\n                    ${nls.searchSetting.defaultBufferDistanceLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"defaultBufferDistanceNode" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                        trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                        ${nls.searchSetting.defaultBufferHintLabel}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSetting.maxBufferDistanceLabel}"\x3e\r\n                    ${nls.searchSetting.maxBufferDistanceLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"maxBufferDistanceNode" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                        trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                        ${nls.searchSetting.maxBufferHintLabel}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSetting.bufferDistanceUnitLabel}"\x3e\r\n                    ${nls.searchSetting.bufferDistanceUnitLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cselect style\x3d"width: 100%;" data-dojo-attach-point\x3d"selectBufferUnitNode" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                        \x3coption value\x3d"miles"\x3e${nls.units.miles.displayText}\x3c/option\x3e\r\n                        \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers.displayText}\x3c/option\x3e\r\n                        \x3coption value\x3d"meters"\x3e${nls.units.meters.displayText}\x3c/option\x3e\r\n                        \x3coption value\x3d"feet"\x3e${nls.units.feet.displayText}\x3c/option\x3e\r\n                    \x3c/select\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                        ${nls.searchSetting.bufferUnitLabel}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSetting.maxResultCountLabel}"\x3e\r\n                    ${nls.searchSetting.maxResultCountLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"maxResultCountNode" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                        trim\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                        ${nls.searchSetting.maxResultCountHintLabel}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSetting.noResultsFound}"\x3e\r\n                    ${nls.searchSetting.noResultsFound}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cdiv data-dojo-attach-point\x3d"noResultMesageNode"\x3e\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                        ${nls.searchSetting.noResultFoundHint}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"geoDesicCheckBoxNode" class\x3d"jimu-checkbox esriCTCheckOptionLabel"\r\n                    title\x3d"${nls.searchSetting.geoDesicParamLabel}" label\x3d"${nls.searchSetting.geoDesicParamLabel}"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin esriCTCheckboxHint"\x3e\r\n                    ${nls.searchSetting.geoDesicParamHintText}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel" data-dojo-attach-point\x3d"graphicLocationPointSymbolLabelNode"\r\n                    title\x3d"${nls.searchSetting.selectGraphicLocationSymbol}"\x3e\r\n                    ${nls.searchSetting.selectGraphicLocationSymbol}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"pointSymbolNode"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTSymbolPreviewHintField"\x3e\r\n                        ${nls.searchSetting.graphicLocationSymbolHintText}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"addressLocationPolygonSymbolNode" title\x3d"${nls.searchSetting.addressLocationPolygonHintText}"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTSymbolPreviewHintField"\x3e\r\n                        ${nls.searchSetting.addressLocationPolygonHintText}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"polylineSymbolNode" title\x3d"${nls.searchSetting.addressLocationPolylineHintText}"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTSymbolPreviewHintField"\x3e\r\n                        ${nls.searchSetting.addressLocationPolylineHintText}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"zoomToSelectedFeature" class\x3d"jimu-checkbox esriCTCheckOptionLabel"\r\n                    title\x3d"${nls.searchSetting.zoomToSelectedFeature}" label\x3d"${nls.searchSetting.zoomToSelectedFeature}"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin esriCTCheckboxHint"\x3e\r\n                    ${nls.searchSetting.zoomToSelectedFeatureHintText}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"intersectSearchLocation" class\x3d"jimu-checkbox esriCTCheckOptionLabel"\r\n                    title\x3d"${nls.searchSetting.intersectSearchLocation}" label\x3d"${nls.searchSetting.intersectSearchLocation}"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin esriCTCheckboxHint"\x3e\r\n                    ${nls.searchSetting.intersectSearchLocationHintText}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"enableProximitySearch" class\x3d"jimu-checkbox esriCTCheckOptionLabel"\r\n                    title\x3d"${nls.searchSetting.enableProximitySearch}" label\x3d"${nls.searchSetting.enableProximitySearch}"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin esriCTCheckboxHint"\x3e\r\n                    ${nls.searchSetting.enableProximitySearchHintText}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"showImageGalleryNode" class\x3d"jimu-checkbox esriCTCheckOptionLabel"\r\n                    title\x3d"${nls.searchSetting.showImageGalleryLabel}" label\x3d"${nls.searchSetting.showImageGalleryLabel}"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin esriCTCheckboxHint"\x3e\r\n                    ${nls.searchSetting.showImageGalleryHint}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"showResultCountNode" class\x3d"jimu-checkbox esriCTCheckOptionLabel"\r\n                    title\x3d"${nls.searchSetting.showResultCountOfLayerLabel}" label\x3d"${nls.searchSetting.showResultCountOfLayerLabel}"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTHint esriCTHintInline esriCTHintLeftMargin esriCTCheckboxHint"\x3e\r\n                    ${nls.searchSetting.showResultCountOfLayerHint}\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                \x3cdiv class\x3d"edit-description-title esriCTCheckOptionLabel" title\x3d"${nls.searchSetting.editDescriptionTip}"\x3e${nls.searchSetting.editDescription}\x3c/div\x3e\r\n                \x3cdiv class\x3d"edit-description-box"\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"editorDescription"\x3e\x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Direction Settings tab --\x3e\r\n        \x3cdiv class\x3d"esriCTDirectionTabNode" data-dojo-attach-point\x3d"directionTabNode"\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3cdiv class\x3d"esriCTlabel" title\x3d"${nls.routeSetting.enableDirectionLabel}"\x3e\r\n                        ${nls.routeSetting.enableDirectionLabel}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                        \x3cdiv class\x3d"esriCTCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"enableDirectionCheckBoxNode"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint esriCTHintInlineEnableDirection esriCTHintLeftMargin"\x3e\r\n                            ${nls.routeSetting.enableDirectionText}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTLayerContainer row esriCTHidden" data-dojo-attach-point\x3d"routeSettingsNode"\x3e\r\n                \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" data-dojo-attach-point\x3d"routeServiceLabelNode"\r\n                    title\x3d"${nls.routeSetting.routeServiceUrl}"\x3e\r\n                    ${nls.routeSetting.routeServiceUrl}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                    \x3cdiv class\x3d"esriCTSetRouteURL" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"routeServiceURLNode"\r\n                        trim\x3d"true" required\x3d"true" disabled\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1"\r\n                        data-dojo-attach-point\x3d"onSetBtnClickNode" title\x3d"${nls.routeSetting.buttonSet}"\x3e\r\n                        ${nls.routeSetting.buttonSet}\x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                        ${nls.routeSetting.routeServiceUrlHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3cdiv class\x3d"esriCTlabel" data-dojo-attach-point\x3d"directionLengthUnitLabelNode" title\x3d"${nls.routeSetting.directionLengthUnit}"\x3e\r\n                        ${nls.routeSetting.directionLengthUnit}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                        \x3cselect style\x3d"width: 100%;" data-dojo-attach-point\x3d"directionLengthUnitNode" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                            \x3coption value\x3d"miles"\x3e${nls.units.miles.displayText}\x3c/option\x3e\r\n                            \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers.displayText}\x3c/option\x3e\r\n                        \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint esriCTMargin"\x3e\r\n                        ${nls.routeSetting.unitsForRouteHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n                    \x3cdiv class\x3d"esriCTlabel" data-dojo-attach-point\x3d"routeSymbolLabelNode" title\x3d"${nls.routeSetting.selectRouteSymbol}"\x3e\r\n                        ${nls.routeSetting.selectRouteSymbol}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n                        \x3cdiv class\x3d"esriCTSymbolPreviewField" data-dojo-attach-point\x3d"routeSymbolNode"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint esriCTSymbolPreviewHintField"\x3e\r\n                            ${nls.routeSetting.routeSymbolHintText}\x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTHidden esriCTLayerContainer row" data-dojo-attach-point\x3d"routingDisabledMsg"\x3e\r\n                ${nls.routeSetting.routingDisabledMsg}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Symbology Settings tab --\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"symbologyTabNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n        \x3c!-- Filters Settings tab --\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"filterTabNode" class\x3d"esriCTTabNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n',
"url:widgets/NearMe/setting/css/style.css":'.jimu-widget-nearme-filter-setting{width: 100%; height: 100%;}.jimu-widget-nearme-filter-setting .not-visible{display: none;}.jimu-widget-nearme-filter-setting .content{position: relative; height: calc(100% - 90px); overflow-x: hidden;}.jimu-widget-nearme-filter-setting .content \x3e div{position: absolute; top: 0; bottom: 0; height: 100%; overflow-y: auto; overflow-x: hidden;}.jimu-widget-nearme-filter-setting .items-list{left: 0; width: 300px;}.jimu-widget-nearme-filter-setting \x3e .content \x3e .separator{left: 320px; width: 1px; background-color: #ccc;}.jimu-widget-nearme-filter-setting .single-setting-content{right: 0; left: 335px; width: 628px;}.jimu-rtl .jimu-widget-nearme-filter-setting .items-list{left: auto; right: 0;}.jimu-rtl .jimu-widget-nearme-filter-setting \x3e .content \x3e .separator{left: auto; right: 320px;}.jimu-rtl .jimu-widget-nearme-filter-setting .single-setting-content{right: auto; left: 0;}.jimu-widget-nearme-filter-setting .items-list-content{position: absolute; left: 0; right: 0; top: 37px; bottom: 0; overflow: auto; margin-bottom: 10px;}.jimu-widget-nearme-filter-setting .items-list-content .item{position: relative; width: 100%; height: 40px; border-top: 1px solid #F3F3F3; cursor: pointer;}.jimu-widget-nearme-filter-setting .items-list-content .item:hover{background-color: #F9F9F9;}.jimu-widget-nearme-filter-setting .items-list-content .item.selected{background-color: #F3F3F3 !important; border-left: 4px solid #24B5CC;}.jimu-rtl .jimu-widget-nearme-filter-setting .items-list-content .item.selected{border-left: 0; border-right: 4px solid #24B5CC;}.jimu-widget-nearme-filter-setting .items-list-content .item \x3e *{cursor: pointer;}.jimu-widget-nearme-filter-setting .items-list-content .item:first-child{border-top: 0;}.jimu-widget-nearme-filter-setting .items-list-content .item .label{position: absolute; left: 8px; right: 8px; top: 0; bottom: 0; line-height: 40px; font-size: 12px; color: #353535;}.jimu-widget-nearme-filter-setting .items-list-content .item.selected .label{font-weight: bold; color: #000;}.jimu-widget-nearme-filter-setting .items-list-content .item .actions{position: relative; display: none; height: 100%; overflow: hidden; background-color: #F9F9F9;}.jimu-widget-nearme-filter-setting .items-list-content .item:hover .actions{display: block;}.jimu-widget-nearme-filter-setting .items-list-content .item.selected .actions{background-color: #F3F3F3 !important;}.jimu-widget-nearme-filter-setting .items-list-content .item .action{width: 12px; height: 12px; background-repeat: no-repeat; background-position: center center; position: relative; top: 14px; cursor: pointer; margin: 0 5px;}.jimu-widget-nearme-filter-setting .items-list-content .item .action.up{background-image: url("images/up_normal.png");}.jimu-widget-nearme-filter-setting .items-list-content .item .action.up:hover{background-image: url("images/up_hover.png");}.jimu-widget-nearme-filter-setting .items-list-content .item .action.down{background-image: url("images/down_normal.png");}.jimu-widget-nearme-filter-setting .items-list-content .item .action.down:hover{background-image: url("images/down_hover.png");}.jimu-widget-nearme-filter-setting .items-list-content .item .action.delete{background-image: url("images/delete_normal.png");}.jimu-widget-nearme-filter-setting .items-list-content .item .action.delete:hover{background-image: url("images/delete_hover.png");}.jimu-widget-nearme-filter-setting .items-list-content .item:first-child .action.up{display: none;}.jimu-widget-nearme-filter-setting .items-list-content .item:last-child .action.down{display: none;}.jimu-widget-nearme-filter-setting .add-btn{display: inline-block; width: 100%; height: 32px; background-color: #24B5CC; color: #ffffff; text-align: center; cursor: pointer;}.jimu-widget-nearme-filter-setting .add-btn:hover{background-color: #0090A7;}.jimu-widget-nearme-filter-setting .add-btn \x3e div{display: inline-block; cursor: pointer; height: 32px; line-height: 32px; font-size: 12px;}.jimu-widget-nearme-filter-setting .add-btn .icon{position: relative; top: 1px; width: 12px; height: 12px; background: url("images/add.png") center center no-repeat; background-size: contain;}.jimu-widget-nearme-filter-setting .add-btn .tip{margin-left: 8px;}.jimu-rtl .jimu-widget-nearme-filter-setting .add-btn .tip{margin-left: 0; margin-right: 8px;}.jimu-widget-nearme-filter-setting .collapse-option .collapse-tip{margin-left: 5px;}.jimu-rtl .jimu-widget-nearme-filter-setting .collapse-option .collapse-tip{margin-left: 0; margin-right: 5px;}html.hr .jimu-widget-nearme-filter-setting.items-list{width: 280px;}html.hr .jimu-widget-nearme-filter-setting \x3e .content \x3e .separator{left: 295px;}html.hr .jimu-widget-nearme-filter-setting .single-setting-content{width: 650px;}.jimu-widget-nearme-filter-setting .esriCTFilterMsg{padding: 6px 0; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-nearme-filter-setting \x3e table{width: 100%; table-layout: fixed; border-collapse: collapse;}.jimu-widget-nearme-filter-setting \x3e table \x3e tbody \x3e tr \x3e td{padding: 5px 0;}.jimu-widget-nearme-filter-setting .click-picker{display: inline-block; border: 1px solid #D7D7D7; height: 24px; overflow: hidden; padding: 0 4px; cursor: pointer;}.jimu-widget-nearme-filter-setting .click-picker .jimu-image-chooser{position: relative; top: 4px;}.jimu-widget-nearme-filter-setting .click-picker .separator{position: relative; top: 4px; width: 1px; height: 16px; background-color: #D7D7D7; margin: 0 5px;}.jimu-widget-nearme-filter-setting .click-picker .jimu-icon{position: relative; top: 8px;}.jimu-widget-nearme-filter-setting .single-setting-content .no-task-tip{position: relative; top: 50%; margin-top: -10px;}.jimu-widget-nearme-filter-setting .single-setting-content .no-task-tip span{font-weight: bold;}.jimu-widget-nearme-filter-setting .jimu-image-chooser .hint .display-image{width: 100% !important; height: 100% !important;}.jimu-widget-nearme-filter-setting .esriCTFilterLabel{font-size: 14px; color: #596679;}.jimu-widget-nearme-filter-setting .esriCTLabelMargin{margin-bottom: 5px;}.jimu-widget-nearme-filter-setting .esriCTTabsNode{margin-top: 20px;}.jimu-widget-nearme-filter-setting .esriCTFilterOptionsNode{margin-top: 20px;}.jimu-widget-nearme-setting .esriCTMainContainer{width: 100%; height: 100%; overflow: hidden;}.jimu-widget-nearme-setting .esriCTlabel{width: 25%; padding: 5px 10px 5px 0; word-break: break-word; margin-top: 5px; margin-bottom: 5px; float: left; min-width: 250px; font-size: 14px; color: #596679;}.jimu-widget-nearme-setting .esriCTColorPickerNode{float: left; margin: 0 10px 0 0;}.jimu-widget-nearme-setting .esriCTHintInline{line-height: 30px;}.jimu-widget-nearme-setting .esriCTHintLeftMargin{margin-left: 10px;}.jimu-widget-nearme-setting .esriCTDirectionTabNode .esriCTHintInline{margin-top: 2px;}.jimu-widget-nearme-setting .esriCTDirectionTabNode .esriCTHintInlineEnableDirection{width: 90%; margin: 13px 0;}.jimu-widget-nearme-setting .row{clear: both;}.jimu-widget-nearme-setting .esriCTFullHeight{height: 100%;}.jimu-widget-nearme-setting .esriCTFullWidth{width: 100%;}.jimu-widget-nearme-setting .jimu-viewstack{height: calc(100% - 40px); overflow: auto;}.jimu-widget-nearme-setting .esriCTWidgetOpenLabel{margin-top: 20px;}input[type\x3dtext]::-ms-clear{display: none;}.jimu-widget-nearme-setting .esriCTSelectedLayersDiv{height: 50px; overflow: auto; width: 88%; float: left; border: 1px solid #d2dae2; background: #e3ecf2; margin: 0 10px 0 0px;}.jimu-widget-nearme-setting .esriCTAddLayerButton{float: right; margin-top: 9px; max-width: 70px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; padding: 0px;}.jimu-widget-nearme-setting .esriCTLayerSelectorNode{max-height: 200px; overflow: auto; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-nearme-setting .esriCTLayerSelectorNode .jimu-basic-layer-chooser-from-map .jimu-tree{position: relative !important;}.jimu-widget-nearme-setting .esriCTLayerListItem{height: 24px; color: #7989a0; padding: 0px 5px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; line-height: 22px; font-size: 14px;}.jimu-widget-nearme-setting .esriCTGeometryTypeIcon{height: 16px; width: 16px; background-repeat: no-repeat; margin: 6px 2px 0px 10px; float: left;}.jimu-widget-nearme-setting .esriCTCheckBox{float: left; height: 20px; width: 20px; margin-top: 10px; margin-right: 10px;}.jimu-widget-nearme-setting .esriCTCheckOptionLabel{font-size: 14px; color: #596679;}.jimu-widget-nearme-setting .esriCTLayerContainer{width: 100%; float: left;}.jimu-widget-nearme-setting .esriCTLayerField{width: 73%; float: left;}.jimu-widget-nearme-setting .esriCTHint{margin: 5px 0 10px 0; float: left; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-nearme-setting .esriCTCheckboxHint{width: 100%; margin: 0px 0px 10px 0px;}.jimu-widget-nearme-setting .esriCTFontColorLabelHint{width: calc(100% - 50px);}.jimu-widget-nearme-setting .esriCTSetRouteURL{width: 100%;}.jimu-widget-nearme-setting .esriCTHidden{display: none;}.jimu-widget-nearme-setting .buttonsDiv .jimu-popup .button-container{padding: 0px;}.jimu-widget-nearme-setting .esriCTFloatLeading{margin-right: 10px;}.jimu-widget-nearme-setting .esriCTServiceUrlDiv{float: left; width: 100%;}.jimu-widget-nearme-setting .esriCTRouteLayersDiv{float: left; width: 100%;}.jimu-widget-nearme-setting .esriCTItemSelectDiv{margin-top: 10px; float: left; height: 450px; width: 100%;}.jimu-widget-nearme-setting .esriCTExampleUrl{float: left; width: 100%;}.jimu-widget-nearme-setting .esriCTRouteListDiv{margin-top: 10px; float: left; width: 100%; height: 360px; overflow: auto; border: 1px solid #ccc;}.jimu-widget-nearme-setting .esriCTAgolRouteListDiv{margin-top: 10px; float: left; width: 100%; height: 450px; overflow: auto; border: 1px solid #ccc;}.jimu-widget-nearme-setting .esriCTSearchRadio{float: left; width: 100%;}.jimu-widget-nearme-setting .serviceUrlContainer{float: left; width: 100%; margin-top: 10px;}.jimu-widget-nearme-setting .esriCTServiceLable{float: left; width: 100px; line-height: 30px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-nearme-setting .esriCTServiceField{width: 85%; float: left;}.jimu-widget-nearme-setting .esriCTSetServiceURL{float: left; width: 85%;}.jimu-widget-nearme-setting .urlButton{line-height: 30px; max-width: 80px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.claro .dijitTreeRowFocused{background-repeat: repeat;}.claro .dijitTreeExpando{background-position: -93px -10px; display: none;}.claro .dijitTreeExpando: :first-child{display: block; background-position: -35px 0;}.jimu-widget-nearme-setting .esriCTSymbolChooserNode{text-align: center; cursor: pointer; min-width: 80px;}.jimu-widget-nearme-setting .esriCTSymbolPreviewText{font-size: 14px; color: #596679; padding-right: 5px; max-width: 130px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;}.jimu-widget-nearme-setting .esriCTPreviewField{width: 25%; float: left;}.jimu-widget-nearme-setting .esriCTPreviewHintField{width: 70%; line-height: 30px; margin-left: 10px;}.jimu-widget-nearme-setting .esriCTAddressLocationSymbolPreviewHint{width: 60%; float: right;}.jimu-widget-nearme-setting .esriCTSymbolPreviewHintField{width: 50%; line-height: 20px; margin-left: 5px; float: right;}.jimu-widget-nearme-setting .esriCTSymbolPreviewField{width: 35%; min-width: 250px; float: left;}.claro .dijitTextBox, .claro .dijitSelect{color: #7989a0; background-color: #fafafc; border: 1px solid #d2dae2;}.dj_webkit .claro .dijitTextBox .dijitInputInner{color: #7989a0;}.claro .dijitSelectDisabled, .claro .dijitTextBoxDisabled, .claro .dijitTextBoxDisabled .dijitInputContainer{background-color: #e3ecf2;}.jimu-widget-nearme-setting .esriCTDirectionTabNode .dijitTextBox{width: 88% !important; float: left;}.claro .dijitSelect .dijitArrowButton{background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-nearme-setting .dijitSelect .dijitButtonContents{border-style: none none none none; background-color: #fafafc;}.jimu-widget-nearme-setting .dijitTreeLabel{font-size: 14px; color: #596679;}.dijitInline.dijitIcon.dijitTreeIcon.dijitLeaf{margin-left: 2px;}.claro .dijitSelect .dijitInputField{font-size: 14px; margin-right: 8px;}.jimu-widget-nearme-setting .esriCTURLSetButton{line-height: 30px; margin: 0 0 0 10px; float: right; max-width: 70px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; padding: 0;}.jimu-widget-nearme-setting .esriCTSearchTabNode, .jimu-widget-nearme-setting .esriCTDirectionTabNode, .jimu-widget-nearme-setting .esriCTSymbologyTabNode{margin-top: 20px; height: calc(100% - 20px);}.jimu-widget-nearme-setting .esriCTSymbolChooserContainer{height: calc(100% - 50px); overflow: auto;}.jimu-widget-nearme-setting .edit-description-box {width: 99%; height: 230px; margin-bottom: 10px; position: relative; padding-top: 5px;}.jimu-widget-nearme-setting .esriCTDropdownButton{margin: 8px 0; display: inline-block; position: relative; padding-left: 16px; color: #518dca; background: url(../images/add_icon.png) no-repeat left; cursor: pointer;}.jimu-widget-nearme-setting .esriCTDropdownButton .esriCTDropdownMenu{position: absolute; display: none; list-style-type: none; top: 18px; left: 0; margin: 0; padding: 0; background: #fafafa; color: #7989a0; z-index: 999;}.jimu-rtl .jimu-widget-nearme-setting .esriCTDropdownButton .esriCTDropdownMenu{right: 0; left: auto;}.jimu-widget-nearme-setting .esriCTDropdownButton:hover .esriCTDropdownMenu{display: inline-block;}.jimu-widget-nearme-setting .esriCTDropdownMenu .esriCTDropdownItem{white-space: nowrap; height: 30px; padding: 0 25px; line-height: 30px;}.jimu-widget-nearme-setting .esriCTDropdownMenu .esriCTDropdownItem:hover{background: #edf2f5; color: #15a4fa;}.jimu-widget-nearme-setting .esriCTSources{height: 366px;}.jimu-widget-nearme-setting .esriCTSourcesExtraHeight{height: 516px !important;}.jimu-widget-nearme-setting .esriCTSourceList{width: 270px; height: 100%;}.jimu-widget-nearme-setting .esriCTSourceSetting{width: 660px; position: relative;}.jimu-widget-nearme-setting .source-table,.jimu-widget-nearme-setting .general-setting-table{width: 100%;}.jimu-widget-nearme-setting .jimu-simple-table .simple-table-field, .jimu-simple-table .simple-table-cell{cursor: pointer;}.jimu-widget-nearme-setting .esriCTSearchSourceLayerField{width: 70%;}.jimu-widget-nearme-setting .esriCTSearchSourceLabel{width: 25%; min-width: 182px;}.jimu-widget-nearme-setting .esriCTLocalSearchLabel{margin-left: 22px; width: 24%; min-width: 146px;}.jimu-widget-nearme-setting .esriCTLocalSearchRadiusUnit{line-height: 30px; float: right;} .jimu-widget-nearme-setting .esriCTSearchSourceLabelFont {font-size: 14px; color: #596679;}.jimu-widget-nearme-setting .esriCTLayerSource{width: 80% !important;}.jimu-widget-nearme-setting .esriCTsearchFieldsSelector{display: inline-block; margin: 6px 0; width: 18px; height: 18px; cursor: pointer; background: url(../images/selector.png) no-repeat center;}.jimu-widget-nearme-setting .esriCTSearchSourceURLField{width: 76%; float: left;}.jimu-widget-nearme-setting .esriCTSearchSourceLayer{width: 84% !important;}.jimu-widget-nearme-setting .esriCTURLWidthLabel{width: 145px; min-width: 145px;}.jimu-widget-nearme-setting .esriCTSearchDetailsSection{width: 175px;}.jimu-widget-nearme-setting .esriCTGeneralSettingLabelStyle{font-weight: bold;}.jimu-widget-nearme-query-source-setting .esriCTSearchSourceFieldCheckbox{width: 167px; margin-bottom: 20px; color: #596679; font-size: 14px; margin-left: 30px;}.jimu-widget-nearme-query-source-setting .esriCTSearchSourceFieldCheckbox .label{width: 140px;}.jimu-widget-nearme-setting .esriCTErrorMessage{color: #e84b4b;}.jimu-widget-nearme-setting .esriCTAddSymbologyBtn {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8; margin-top: 10px;}.jimu-widget-nearme-setting .esriCTAddSymbologyIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(../images/add_icon.png); display: inline-block; vertical-align: top;}.jimu-widget-nearme-setting .esriCTAddSymbologyLabel {line-height: 20px;}jimu-widget-nearme-setting-symbology .esriCTDropDownContainer {width: 75%; float: right;}.jimu-widget-nearme-setting .jimu-simple-table .body-section{overflow-y: hidden;}.jimu-widget-nearme-setting .esriCTLayerNameDropdown .dijitSelectLabel {text-align: left; overflow: hidden; width: 213px;}.jimu-widget-nearme-setting .esriCTLayerFieldDropDown .dijitSelectLabel {text-align: left; overflow: hidden; width: 165px;}.jimu-widget-nearme-setting .esriCTLayerValuedDropDown .dijitSelectLabel {text-align: left; overflow: hidden; width: 115px;}.jimu-widget-nearme-setting-symbology .esriCTAddLayerTableNode {padding-bottom: 10px;}.jimu-widget-nearme-setting-symbology .esriCTAddLayerTableNode .jimu-simple-table .body-section {top: 37px;}.claro .jimu-widget-nearme-setting-symbology .esriCTAddLayerTableNode .dijitSelect {height: 26px; min-width: 100%; margin-top: -4px;}.claro .jimu-widget-nearme-setting-symbology .esriCTAddLayerTableNode .dijitTextBox {width: 100%; height: 26px; margin-top: -4px;}.esriRtl .jimu-widget-nearme-setting .esriCTColorPickerNode{float: right; margin: 0 0px 0 10px;}.esriRtl .jimu-widget-nearme-setting .esriCTHint{margin: 5px 5px 10px 0px; float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTLayerField{float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTPreviewHintField{margin-right: 10px;}.esriRtl .jimu-widget-nearme-setting .esriCTlabel{padding: 5px 0px 5px 10px; float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTSelectedLayersDiv{float: right; margin-left: 10px; margin-right: 0px;}.esriRtl .jimu-widget-nearme-setting .esriCTPreviewField{float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTGeometryTypeIcon{float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTSetRouteURL{float: right; margin: 0;}.esriRtl .jimu-widget-nearme-setting .esriCTURLSetButton{float: left; margin: 0;}.esriRtl .jimu-widget-nearme-setting .esriCTSymbolPreviewField{float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTSymbolPreviewText{padding: 0 0 0 5px;}.esriRtl .jimu-widget-nearme-setting .esriCTAddLayerButton{float: left;}.esriRtl .jimu-widget-nearme-setting .esriCTServiceLable{float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTSetServiceURL{float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTSymbolPreviewHintField{float: left; margin-right: 5px; margin-left: 0px;}.esriRtl .jimu-widget-nearme-setting .esriCTCheckBox{float: right; margin-left: 10px; margin-right: 0px;}.esriRtl .jimu-widget-nearme-setting .esriCTFloatLeading{margin-left: 10px; margin-right: 0px;}.esriRtl .jimu-widget-nearme-setting .esriCTLocalSearchLabel{margin-right: 22px; margin-left: 0px;}.esriRtl .jimu-widget-nearme-setting .esriCTLocalSearchRadiusUnit{float: left;}.esriRtl .jimu-widget-nearme-setting .esriCTDropdownButton{padding-right: 16px; background: url(../images/add_icon.png) no-repeat right;}.esriRtl .jimu-widget-nearme-setting .esriCTSearchSourceURLField{float: right;}.esriRtl .jimu-widget-nearme-setting .esriCTAddressLocationSymbolPreviewHint{float: left; width: 55%;}.esriRtl .jimu-widget-nearme-setting .esriCTLayerContainer{padding-right: 5px;}.esriRtl .jimu-widget-nearme-setting .esriCTLayerList{padding-right: 5px;}.esriRtl .jimu-widget-nearme-setting .esriCTDirectionTabNode .esriCTHintInlineEnableDirection{margin-top: 13px;}.esriRtl .jimu-widget-nearme-setting .esriCTFontColorLabelHint{width: calc(100% - 60px);}input[type\x3dtext]::-ms-clear{display: none;}.jimu-widget-nearme-singlefilter-setting{height: 100%;}.esriRtl .jimu-widget-nearme-singlefilter-setting{margin: 0 10px;}.jimu-widget-nearme-singlefilter-setting \x3e div .filter-div{height: calc(100% - 20px);}.jimu-widget-nearme-setting .esriCTBufferDistanceSliderRadioButton{float: left; margin: 5px 0px 5px 20px;}.esriRtl .jimu-widget-nearme-setting .esriCTBufferDistanceSliderRadioButton{float: right; margin: 5px 20px 5px 0px;}.jimu-widget-nearme-setting .esriCTRBLabel{word-break: break-word; margin-bottom: 15px; float: left; font-size: 14px; color: #596679; margin: 5px 0px 10px 5px;}.esriRtl .jimu-widget-nearme-setting .esriCTRBLabel{float: right; margin: 5px 5px 10px 0px;}.jimu-widget-nearme-setting .esriCTFieldSet{height: auto; width: 99%; border: 1px solid #a0acbf; border-radius: 5px; font-size: 14px; color: #596679; margin-bottom: 16px; min-width: 0px;}.jimu-widget-nearme-setting .esriCTFieldSetLegend{margin-left: 20px; margin-bottom: 5px;}.esriRtl .jimu-widget-nearme-setting .esriCTFieldSetLegend{margin-right: 20px;}',
"*now":function(u){u(['dojo/i18n!*preload*widgets/NearMe/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-construct dojo/query dojo/on dojo/sniff dojo/dom-style dijit/Editor ./SymbolChooserPopup jimu/dijit/ColorPicker dojo/_base/Color jimu/utils esri/symbols/jsonUtils jimu/dijit/Message jimu/dijit/LoadingIndicator jimu/dijit/Popup ./NetworkServiceChooser ./layerChooserPopup ./SearchSourceSettings ./SymbologySettings ./FilterSetting ../utils jimu/portalUtils jimu/symbolUtils jimu/dijit/TabContainer3 jimu/dijit/EditorXssFilter dojo/dom-class dojo/html dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/ViewSource dijit/_editor/plugins/FontChoice dojox/editor/plugins/Preview dijit/_editor/plugins/TextColor dojox/editor/plugins/ToolbarLineBreak dojox/editor/plugins/FindReplace dojox/editor/plugins/PasteFromWord dojox/editor/plugins/InsertAnchor dojox/editor/plugins/Blockquote dojox/editor/plugins/UploadImage jimu/dijit/EditorChooseImage jimu/dijit/EditorTextColor jimu/dijit/EditorBackgroundColor jimu/dijit/CheckBox dojo/domReady!".split(" "),function(u,
B,H,D,z,a,d,c,b,g,m,l,t,A,v,e,n,q,F,k,f,w,C,L,I,E,r,x,M,O){return u([B,H],{baseClass:"jimu-widget-nearme-setting",_unitsDetails:{},_searchLayers:[],_loading:null,_appUtils:null,_symbolParams:{},_symbologySettingTab:null,startup:function(){this.inherited(arguments);this._initEditorPluginsCSS();this._noFeatureMessageEditor=this._initEditor(this.noResultMesageNode);this._introductionMessagetEditor=this._initEditor(this.editorDescription);this.setConfigForEditor()},postMixInProperties:function(){this.nls.common=
{};D.mixin(this.nls.common,window.jimuNls.common);this.nls.searchSetting.enableProximitySearch=this.nls.searchSetting.enableProximitySearch||"Enable proximity search";this.nls.searchSetting.enableProximitySearchHintText=this.nls.searchSetting.enableProximitySearchHintText||"Hint: Enable ability to search for locations near a selected result"},postCreate:function(){this._unitsDetails={};this._searchLayers=[];this._symbolParams={};var h={color:[255,189,1,0],outline:{color:[255,189,1,255],width:2.25,
type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"},p={color:[255,189,1,0],outline:{color:[255,189,1,255],width:2.25,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"},G={color:[21,99,184,255],width:3.75,type:"esriSLS",style:"esriSLSSolid"};this._initLoading();this._initTabs();this.editorXssFilter=x.getInstance();this._unitsDetails={miles:{bufferUnit:"UNIT_STATUTE_MILE",routeUnit:"MILES",distanceUnit:"miles",label:this.nls.units.miles.displayText,acronym:this.nls.units.miles.acronym,
value:"miles"},kilometers:{bufferUnit:"UNIT_KILOMETER",routeUnit:"KILOMETERS",distanceUnit:"kilometers",label:this.nls.units.kilometers.displayText,acronym:this.nls.units.kilometers.acronym,value:"kilometers"},meters:{bufferUnit:"UNIT_METER",routeUnit:"METER",distanceUnit:"meters",label:this.nls.units.meters.displayText,acronym:this.nls.units.meters.acronym,value:"meters"},feet:{bufferUnit:"UNIT_FOOT",routeUnit:"FEET",distanceUnit:"feet",label:this.nls.units.feet.displayText,acronym:this.nls.units.feet.acronym,
value:"feet"}};this.maxResultCountNode.set("invalidMessage",this.nls.errorStrings.invalidMaximumResultCountValue);this.defaultBufferDistanceNode.set("constraint",{min:0});this.defaultBufferDistanceNode.set("invalidMessage",this.nls.errorStrings.bufferErrorString);this.maxBufferDistanceNode.set("constraint",{min:1});this.maxBufferDistanceNode.set("invalidMessage",this.nls.errorStrings.bufferErrorString);this._appUtils=new L({map:this.map});this.own(d(this.addLayerButton,"click",D.hitch(this,this._showLayerChooserPopup)));
this.own(d(this.enableDirectionCheckBoxNode,"change",D.hitch(this,this._onEnableDirectionChange)));this.config.hasOwnProperty("enableDirection")||(this.config.enableDirection=this.map.webMapResponse.itemInfo.itemData&&this.map.webMapResponse.itemInfo.itemData.applicationProperties&&this.map.webMapResponse.itemInfo.itemData.applicationProperties.viewing&&this.map.webMapResponse.itemInfo.itemData.applicationProperties.viewing.routing&&this.map.webMapResponse.itemInfo.itemData.applicationProperties.viewing.routing.enabled?
!0:!1);this.config.enableDirection?M.remove(this.routeSettingsNode,"esriCTHidden"):M.add(this.routeSettingsNode,"esriCTHidden");this._createSymbolPicker(this.routeSymbolNode,"routeSymbol","esriGeometryPolyline",this.nls.routeSetting.selectRouteSymbol);this._createSymbolPicker(this.pointSymbolNode,"graphicLocationSymbol","esriGeometryPoint",this.nls.searchSetting.selectGraphicLocationSymbol);this.config&&this.config.symbols&&!this.config.symbols.hasOwnProperty("polylineSymbol")&&(this.config.symbols.polylineSymbol=
G,M.add(this.bufferColorSetting,"esriCTHidden"));this._createSymbolPicker(this.polylineSymbolNode,"polylineSymbol","esriGeometryPolyline",this.nls.searchSetting.popupTitleForPolyline);this.config&&this.config.symbols&&!this.config.symbols.hasOwnProperty("polygonSymbol")&&(this.config.symbols.polygonSymbol=p,M.add(this.bufferColorSetting,"esriCTHidden"));this._createSymbolPicker(this.addressLocationPolygonSymbolNode,"polygonSymbol","esriGeometryPolygon",this.nls.searchSetting.popupTitleForPolygon);
this.config&&this.config.symbols&&!this.config.symbols.hasOwnProperty("bufferSymbol")&&(this.config.symbols.bufferSymbol=h,M.add(this.bufferColorSetting,"esriCTHidden"));this._createSymbolPicker(this.polygonSymbolNode,"bufferSymbol","esriGeometryPolygon",this.nls.searchSetting.bufferColorLabel);this.own(d(this.onSetBtnClickNode,"click",D.hitch(this,this._showRouteChooser)));this._createColorPicker();this._createHighlightColorPicker();this.setConfig();this.bufferVisibilityCheckBox.checkNode&&this.own(d(this.bufferVisibilityCheckBox,
"change",D.hitch(this,this._onVisibilityChange)));this.own(d(this.highlightColorCheckBoxNode,"change",D.hitch(this,this._onHighlightColorChange)));this._createSearchSourceSettings();this._initSymbologySetting();this._initFilterSetting()},_onHighlightColorChange:function(){1==this.highlightColorCheckBoxNode.getValue()?M.remove(this.highlightColorPickerParentNode,"esriCTHidden"):M.add(this.highlightColorPickerParentNode,"esriCTHidden")},_initTabs:function(){var h={title:this.nls.searchSourceSetting.searchSourceSettingTabTitle,
content:this.searchSourceTabNode};var p={title:this.nls.searchSetting.searchSettingTabTitle,content:this.searchTabNode};this.tab=new r({tabs:[h,p,{title:this.nls.routeSetting.routeSettingTabTitle,content:this.directionTabNode},{title:this.nls.symbologySetting.symbologySettingTabTitle,content:this.symbologyTabNode},{title:this.nls.filterSetting.filterSettingTabTitle,content:this.filterTabNode}],"class":"esriCTFullHeight"});this.own(d(this.tab,"tabChanged",D.hitch(this,function(){this.tab.containerNode.scrollTop=
0})));this.tab.placeAt(this.tabDiv)},_onEnableDirectionChange:function(){this.enableDirectionCheckBoxNode.getValue()?M.remove(this.routeSettingsNode,"esriCTHidden"):M.add(this.routeSettingsNode,"esriCTHidden")},_initFilterSetting:function(){this._filterSettingTab=new C({nls:this.nls,map:this.map,config:this.config,folderUrl:this.folderUrl});this._filterSettingTab.placeAt(this.filterTabNode)},_initSymbologySetting:function(){this._symbologySettingTab=new w({nls:this.nls,map:this.map,config:this.config});
this._symbologySettingTab.placeAt(this.symbologyTabNode)},_createSearchSourceSettings:function(){var h={};this.config&&this.config.hasOwnProperty("searchSourceSettings")&&(h=this.config.searchSourceSettings);this._searchSourceSettings=new f({nls:this.nls,map:this.map,appConfig:this.appConfig,shelter:this._loading,config:h},z.create("div",{},this.searchSourceTabNode));this.own(d(this._searchSourceSettings,"invalid-source-setting",D.hitch(this,function(){this._errorMessage(this.nls.errorStrings.invalidSearchSources)})))},
getConfig:function(){if(!this._searchLayers||!this._searchLayers.length)return this._errorMessage(this.nls.errorStrings.selectLayerErrorString,this.nls.searchSetting.searchSettingTabTitle),!1;if(0>=Number(this.maxBufferDistanceNode.value))return this._errorMessage(this.nls.errorStrings.maximumBufferValueGreaterThanOne,this.nls.searchSetting.searchSettingTabTitle),!1;if(""===D.trim(this.maxBufferDistanceNode.displayedValue))return this._errorMessage(this.nls.errorStrings.invalidMaximumValue,this.nls.searchSetting.searchSettingTabTitle),
!1;if(!this.maxBufferDistanceNode.value)return this._errorMessage(this.nls.errorStrings.bufferErrorString,this.nls.searchSetting.searchSettingTabTitle),!1;if(Number(this.defaultBufferDistanceNode.value)>Number(this.maxBufferDistanceNode.value))return this._errorMessage(this.nls.errorStrings.defaultValueLessThanMax,this.nls.searchSetting.searchSettingTabTitle),!1;if(0>Number(this.defaultBufferDistanceNode.value))return this._errorMessage(this.nls.errorStrings.defaultBufferValueGreaterThanOne,this.nls.searchSetting.searchSettingTabTitle),
!1;if(""===D.trim(this.defaultBufferDistanceNode.displayedValue))return this._errorMessage(this.nls.errorStrings.invalidDefaultValue,this.nls.searchSetting.searchSettingTabTitle),!1;if(!this.defaultBufferDistanceNode.isValid())return this._errorMessage(this.nls.errorStrings.bufferErrorString,this.nls.searchSetting.searchSettingTabTitle),!1;if(""!==D.trim(this.maxResultCountNode.displayedValue)&&(isNaN(this.maxResultCountNode.value)||this.maxResultCountNode.value!==parseInt(this.maxResultCountNode.value,
10)||1>this.maxResultCountNode.value))return this._errorMessage(this.nls.errorStrings.invalidMaximumResultCountValue,this.nls.searchSetting.searchSettingTabTitle),!1;var h=this.maxResultCountNode.value;isNaN(h)&&(h=null);var p=this._symbologySettingTab.getConfig();if(p.isValid)p=p.symbolConfig;else return this._errorMessage(p.message,this.nls.symbologySetting.symbologySettingTabTitle),!1;var G=this._filterSettingTab.getConfig();if(!G)return this.tab&&this.tab.selectTab(this.nls.filterSetting.filterSettingTabTitle),
!1;var N=this._searchSourceSettings.getConfig();if(!N||0===N.sources.length)return this._errorMessage(this.nls.errorStrings.invalidSearchSources,this.nls.searchSourceSetting.searchSourceSettingTabTitle),!1;this.config={fontColor:this._fontColorPicker.color.toHex(),highlightColor:this._highlightColorPicker.color.toHex(),showSelectionColor:this.highlightColorCheckBoxNode.getValue(),searchLayers:this._searchLayers,bufferInfo:this._getBufferInfo(),defaultBufferDistance:this.defaultBufferDistanceNode.value,
maxBufferDistance:Math.round(this.maxBufferDistanceNode.value),bufferDistanceUnit:this._unitsDetails[this.selectBufferUnitNode.value],zoomToFeature:this.zoomToSelectedFeature.getValue(),intersectSearchedLocation:this.intersectSearchLocation.getValue(),enableProximitySearch:this.enableProximitySearch.getValue(),routeService:this.routeServiceURLNode.value,directionLengthUnit:this._unitsDetails[this.directionLengthUnitNode.value],selectedSearchLayerOnly:this.searchLayerResultNode.getValue(),isGeodesic:this.geoDesicCheckBoxNode.getValue(),
showLocationTool:this.setLocationCheckBoxNode.getValue(),symbols:this._symbolParams,maxResultCount:h,searchSourceSettings:N,attributeSymbology:p,filterSettings:G,showImageGallery:this.showImageGalleryNode.getValue(),showFeaturesCount:this.showResultCountNode.getValue(),editorDescription:this._getText(this._introductionMessagetEditor),noFeatureFoundMessage:this._getText(this._noFeatureMessageEditor),showCurrentLocationTool:this.setCurrentLocationCheckBoxNode.getValue(),enableDirection:this.enableDirectionCheckBoxNode.getValue()};
this.bufferDistanceSliderRBNode.get("checked")&&(this.config.bufferInputOption="slider");this.bufferDistanceTextboxRBNode.get("checked")&&(this.config.bufferInputOption="textbox");this.bufferDistanceSliderandTextboxRBNode.get("checked")&&(this.config.bufferInputOption="sliderAndTextbox");return this.config},_getBufferInfo:function(){var h={};return h={isVisible:this.bufferVisibilityCheckBox.getValue()}},setConfig:function(){var h=I.getPortal(this.appConfig.portalUrl).helperServices;this.config&&(this.config.fontColor&&
this._fontColorPicker.setColor(new t(this.config.fontColor)),this.config.highlightColor?this._highlightColorPicker.setColor(new t(this.config.highlightColor)):this._highlightColorPicker.setColor(new t("#00FFFF")),this.config.hasOwnProperty("showSelectionColor")||(this.config.showSelectionColor=!0),this.highlightColorCheckBoxNode.setValue(this.config.showSelectionColor),this._onHighlightColorChange(),this.config.searchLayers&&this._setSearchLayersInfo(this.config.searchLayers),this.config.bufferInfo&&
this._setBufferInfo(this.config.bufferInfo),this.config.maxResultCount&&this.maxResultCountNode.set("value",this.config.maxResultCount),(this.config.defaultBufferDistance||0===this.config.defaultBufferDistance)&&this.defaultBufferDistanceNode.set("value",this.config.defaultBufferDistance),(this.config.maxBufferDistance||0===this.config.maxBufferDistance)&&this.maxBufferDistanceNode.set("value",this.config.maxBufferDistance),this.config.bufferDistanceUnit&&this.selectBufferUnitNode.set("value",this.config.bufferDistanceUnit.value),
this.config.directionLengthUnit&&this.directionLengthUnitNode.set("value",this.config.directionLengthUnit.value),this.config.selectedSearchLayerOnly&&this.searchLayerResultNode.setValue(this.config.selectedSearchLayerOnly),this.config.routeService?this.routeServiceURLNode.set("value",this.config.routeService):h&&h.route&&h.route.url?this.routeServiceURLNode.set("value",h.route.url):this.routeServiceURLNode.set("value",window.location.protocol+"//route.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World"),
this.config.zoomToFeature&&this.zoomToSelectedFeature.setValue(this.config.zoomToFeature),this.config.intersectSearchedLocation&&this.intersectSearchLocation.setValue(this.config.intersectSearchedLocation),void 0===this.config.enableProximitySearch&&(this.config.enableProximitySearch=!0),this.config.enableProximitySearch&&this.enableProximitySearch.setValue(this.config.enableProximitySearch),this.config.showLocationTool&&this.setLocationCheckBoxNode.setValue(this.config.showLocationTool),this.config.isGeodesic&&
this.geoDesicCheckBoxNode.setValue(this.config.isGeodesic),this.config.hasOwnProperty("showImageGallery")||(this.config.showImageGallery=!0),this.config.showImageGallery&&this.showImageGalleryNode.setValue(this.config.showImageGallery),this.config.hasOwnProperty("showFeaturesCount")||(this.config.showFeaturesCount=!0),this.config.showFeaturesCount&&this.showResultCountNode.setValue(this.config.showFeaturesCount),this.config.showCurrentLocationTool&&this.setCurrentLocationCheckBoxNode.setValue(this.config.showCurrentLocationTool),
this.enableDirectionCheckBoxNode.setValue(this.config.enableDirection),this.config.hasOwnProperty("bufferInputOption")||(this.config.bufferInputOption="slider"),"slider"===this.config.bufferInputOption?this.bufferDistanceSliderRBNode.set("checked",!0):"textbox"===this.config.bufferInputOption?this.bufferDistanceTextboxRBNode.set("checked",!0):"sliderAndTextbox"===this.config.bufferInputOption&&this.bufferDistanceSliderandTextboxRBNode.set("checked",!0))},setConfigForEditor:function(){this.config.noFeatureFoundMessage?
this._noFeatureMessageEditor.set("value",this.editorXssFilter.sanitize(this.config.noFeatureFoundMessage)):this._noFeatureMessageEditor.set("value",this.editorXssFilter.sanitize(this.nls.searchSetting.noFeatureFoundText));this.config.editorDescription?this._introductionMessagetEditor.set("value",this.editorXssFilter.sanitize(this.config.editorDescription)):this._introductionMessagetEditor.set("value",this.editorXssFilter.sanitize(this.nls.searchSetting.searchHeaderText))},_getText:function(h){return h.focusNode.innerHTML},
_initEditor:function(h){var p=new g({plugins:["bold","italic","underline",A.getEditorTextColor("smartEditor"),A.getEditorBackgroundColor("smartEditor"),"|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","indent","outdent"],extraPlugins:["|","createLink","unlink","pastefromword","|","undo","redo","|","toolbarlinebreak",{name:"dijit._editor.plugins.FontChoice",command:"fontName",custom:"Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";")},
"fontSize","formatBlock"],style:"font-family:Verdana;"},h);b.set(p.domNode,{width:"100%",height:"100%"});p.startup();8!==c("ie")?p.resize({w:"100%",h:"100%"}):(h=O.getMarginBox(h),p.resize({w:h.w,h:h.h}));return p},_initEditorPluginsCSS:function(){var h=document.getElementsByTagName("head")[0];var p=window.apiUrl+"dojox/editor/plugins/resources/css/TextColor.css";a('link[href\x3d"'+p+'"]',h)[0]||A.loadStyleLink("editor_plugins_resources_TextColor",p);p=window.apiUrl+"dojox/editor/plugins/resources/editorPlugins.css";
a('link[href\x3d"'+p+'"]',h)[0]||A.loadStyleLink("editor_plugins_resources_editorPlugins",p);p=window.apiUrl+"dojox/editor/plugins/resources/css/PasteFromWord.css";a('link[href\x3d"'+p+'"]',h)[0]||A.loadStyleLink("editor_plugins_resources_PasteFromWord",p)},_createSymbolPicker:function(h,p,G,N){if(G){var K={};K.type=A.getSymbolTypeByGeometryType(G);this.config&&this.config.symbols&&this.config.symbols.hasOwnProperty(p)&&(K.symbol=v.fromJson(this.config.symbols[p]));var P=this._createPreviewContainer(h);
var Q={symbolChooserTitle:N,symbolParams:K,nls:this.nls,symbolType:p};this._showSelectedSymbol(P,K.symbol,p);this.own(d(P,"click",D.hitch(this,function(){K.symbol=v.fromJson(this._symbolParams[p]);this._initSymbolChooserPopup(Q,P)})))}},_createPreviewContainer:function(h){h=z.create("table",{cellspacing:"0",cellpadding:"0"},h);h=z.create("tr",{style:"height:30px"},h);var p=z.create("td",{},h);z.create("div",{innerHTML:this.nls.symbolPickerPreviewText,"class":"esriCTSymbolPreviewText"},p);h=z.create("td",
{},h);return z.create("div",{"class":"esriCTSymbolChooserNode"},h)},_initSymbolChooserPopup:function(h,p){var G=new m(h);G.onOkClick=D.hitch(this,function(){var N=G.symbolChooser.getSymbol();this._showSelectedSymbol(p,N,h.symbolType);G.popup.close()})},_showSelectedSymbol:function(h,p,G){z.empty(h);if(p){var N=E.createSymbolNode(p);N||(N=z.create("div"));z.place(N,h);this._symbolParams[G]=p.toJson()}},_createColorPicker:function(){this._fontColorPicker=new l(null,z.create("div",{},this.colorPickerNode))},
_createHighlightColorPicker:function(){this._highlightColorPicker=new l(null,z.create("div",{},this.highlightColorPickerNode))},_errorMessage:function(h,p){(new e({message:h})).message=h;this.tab&&p&&this.tab.selectTab(p)},_initLoading:function(){this._loading=new n({hidden:!0});var h=a(".widget-setting-popup")[0];this._loading.placeAt(h);this._loading.startup()},_showRouteChooser:function(){var h=new F({portalUrl:this.appConfig.portalUrl,nls:this.nls,folderUrl:this.folderUrl});var p=new q({titleLabel:this.nls.routeSetting.routeServiceUrl,
width:830,height:600,content:h});h.onOkClick=D.hitch(this,function(){h.selectRouteURL&&(this.routeServiceURLNode.set("value",h.selectRouteURL),p.close())});h.onCancelClick=D.hitch(this,function(){p.close()})},_showLayerChooserPopup:function(){var h=new k({map:this.map,nls:this.nls,configuredSearchLayer:this._searchLayers&&0<this._searchLayers.length?this._searchLayers:this.config.searchLayers});h.startup();h.onOkClick=D.hitch(this,function(){this._setSearchLayersInfo(h.searchLayers);h.popup.close();
this._symbologySettingTab&&this._symbologySettingTab.updateLayerOptions(h.searchLayers);this._filterSettingTab&&this._filterSettingTab.updateLayerOptions(h.searchLayers)})},_setSearchLayersInfo:function(h){for(var p=0;p<h.length;p++)D.mixin(h[p],this._appUtils.getLayerDetailsFromMap(h[p].baseURL,h[p].layerId,h[p].id));this._setSearchLayers(h)},_setSearchLayers:function(h){var p,G;this._searchLayers=h;z.empty(this.layerListNode);for(p=0;p<h.length;p++)if(h[p].geometryType){var N=A.getTypeByGeometryType(h[p].geometryType);
"point"===N?G="point_layer.png":"polygon"===N?G="polygon_layer.png":"polyline"===N&&(G="line_layer.png");N=z.create("div",{"class":"esriCTLayerList"},this.layerListNode);G&&z.create("div",{"class":"esriCTGeometryTypeIcon",style:{backgroundImage:"url("+this.folderUrl+"images/"+G+")"}},N);z.create("div",{"class":"esriCTLayerListItem",innerHTML:h[p].title,title:h[p].title},N)}},_setBufferInfo:function(h){h&&this.bufferVisibilityCheckBox.setValue(h.isVisible);this._onVisibilityChange()},_onVisibilityChange:function(){this.bufferVisibilityCheckBox.getValue()?
M.remove(this.bufferColorSetting,"esriCTHidden"):M.add(this.bufferColorSetting,"esriCTHidden")}})});