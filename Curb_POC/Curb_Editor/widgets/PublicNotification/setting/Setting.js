// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/PublicNotification/setting/convert":function(){define(["dojo/_base/array"],function(r){return{unitCodesToLabels:function(y,A){var m=[];r.forEach(A,function(q){switch(q){case "CENTIMETERS":m.push(y.centimeters);break;case "INCHES":m.push(y.inches);break;case "FEET":m.push(y.feet);break;case "YARDS":m.push(y.yards);break;case "METERS":m.push(y.meters);break;case "KILOMETERS":m.push(y.kilometers);break;case "MILES":m.push(y.miles);break;default:m.push(q)}});return m},labelsToUnitCodes:function(y,
A){var m=[];r.forEach(A,function(q){switch(q){case y.centimeters:m.push("CENTIMETERS");break;case y.inches:m.push("INCHES");break;case y.feet:m.push("FEET");break;case y.yards:m.push("YARDS");break;case y.meters:m.push("METERS");break;case y.kilometers:m.push("KILOMETERS");break;case y.miles:m.push("MILES");break;default:m.push(q)}});return m},toolCodesToLabels:function(y,A){var m=[];r.forEach(A,function(q){switch(q){case "POINT":m.push(y.drawingToolsPoint);break;case "LINE":m.push(y.drawingToolsLine);
break;case "POLYLINE":m.push(y.drawingToolsPolyline);break;case "POLYGON":m.push(y.drawingToolsPolygon);break;case "FREEHAND_POLYGON":m.push(y.drawingToolsFreehandPolygon);break;default:m.push(q)}});return m},labelsToToolCodes:function(y,A){var m=[];r.forEach(A,function(q){switch(q){case y.drawingToolsPoint:m.push("POINT");break;case y.drawingToolsLine:m.push("LINE");break;case y.drawingToolsPolyline:m.push("POLYLINE");break;case y.drawingToolsPolygon:m.push("POLYGON");break;case y.drawingToolsFreehandPolygon:m.push("FREEHAND_POLYGON");
break;default:m.push(q)}});return m}}})},"widgets/PublicNotification/setting/SettingAddresseesBlock":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class ./settingComponents ./SettingCheckbox ./SettingContainer ./SettingObject ./SettingOptionsTable ./SettingStaticText".split(" "),function(r,y,A,m,q,c,a,b,h,l){return y(b,{_inputControl:null,_detailsDiv:null,_detailsTitle:null,_detailsCheckbox:null,_iCurrentDetails:-1,_menuItems:[],constructor:function(u,e,x){this.nls=
e;this._inputControl=new h(null,"half-width","",e.propertyLabels.name,null,e.hints.selectionListOfOptionsToDisplay,A.hitch(this,this._onRowSelected));this._detailsTitle=new l;this._detailsCheckbox=new c(null,e.propertyLabels.useRelatedRecords,"",A.hitch(this,this._checkboxChanged));this._detailsDiv=q.container("half-width optionsTableHeaderHeight","majorTrailingVertGap",[this._detailsTitle.div(),this._detailsCheckbox.div()]);this._mainDiv=(new a(null,"flexbox "+(x||""),"majorTrailingHorizGap",e.groupingLabels.addressSources,
"full-width",[this._inputControl,this._detailsDiv])).div()},setConfig:function(){var u=[this._config[0]];var e=this._config.slice(1);this._menuItems=r.map(e,function(x){return x.name});this._menuItems=0<this._menuItems.length?[].concat(u,this._menuItems):[u];this._inputControl.setValue(this._menuItems);this._setDetails(0)},getConfig:function(u,e){var x=this._config.slice(1);this._menuItems=this._inputControl.getValue();var k=[this._menuItems[0]];r.forEach(this._menuItems.slice(1),function(w){r.some(x,
function(d){w===d.name&&k.push(d)})});this._config=k;0>this._config[0].indexOf("1")&&e.push(this.nls.problems.noAddresseeLayers)},_setDetails:function(u){var e=this._config.length-1;0<=u&&u<e&&"boolean"===typeof this._config[u+1].useRelatedRecords?(m.remove(this._detailsDiv,"hidden"),this._detailsTitle.setValue(this._config[u+1].name),this._iCurrentDetails=u,this._detailsCheckbox.setValue(this._config[u+1].useRelatedRecords)):(m.add(this._detailsDiv,"hidden"),this._iCurrentDetails=-1)},_onRowSelected:function(u){var e=
u.innerText.trim();r.some(this._menuItems,A.hitch(this,function(x,k){return x===e?(this._setDetails(k-1),!0):!1}))},_checkboxChanged:function(u){0<=this._iCurrentDetails&&(this._config[this._iCurrentDetails+1].useRelatedRecords=u)}})})},"widgets/PublicNotification/setting/settingComponents":function(){define("dojo/_base/array dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on jimu/dijit/CheckBox dijit/form/NumberTextBox dijit/form/Select dijit/form/TextBox ../generalUtils ./SettingSimpleTable".split(" "),
function(r,y,A,m,q,c,a,b,h,l,u,e){var x={container:function(k,w,d){var n=x._createDiv(k||"");if(Array.isArray(d)&&0<d.length){var p=d.length-1;r.forEach(d,function(B,g){m.place(B,n);g<p&&w&&A.add(B,w)})}return n},fieldsetContainer:function(k,w,d,n,p){var B=x._createDiv(w||"");w=m.create("fieldset",{"class":"fieldset"},B);k&&m.create("legend",{"class":"fieldsetLegend",innerHTML:k},w);var g=x._createDiv(("fieldsetMainContainer "+(d||"")).trim(),w);if(Array.isArray(p)&&0<p.length){var v=p.length-1;r.forEach(p,
function(C,z){m.place(C,g);z<v&&n&&A.add(C,n)})}return B},addTextButtonDropdownCtl:function(k,w,d){var n;k=x._createDiv(("addTextButton-button "+(k||"")).trim());var p=x._createDiv("button",k);x._createSpan("button-text",p).innerHTML=w;w=n=m.create("ul",{"class":"addTextButton-menu"},k);r.forEach(d,function(B){m.create("li",{"class":"addTextButton-item",innerHTML:B},n)});return{div:k,ctl:w}},checkboxCtl:function(k,w,d){k=x._createDiv(k);var n=new a({style:"margin-top: 3px;"});n.setLabel(d);n.setValue(w);
m.place(n.domNode,k);n.startup();return{div:k,ctl:n}},dropdownCtl:function(k,w,d){k=x._createDiv(k);return{div:k,ctl:x.dropdown(k,w,d)}},dropdown:function(k,w,d){w=new h({options:d,"class":w});m.place(w.domNode,k);w.startup();return w},iconButton:function(k,w){k=x._createDiv(k);q.set(k,"display","inline-block");k.title=w;return k},numberInputCtl:function(k,w,d){k=x._createDiv(k);w={style:"width: 100%;",required:!0,placeHolder:w};d&&(w.constraints=d);d=new b(w);d.startup();m.place(d.domNode,k);return{div:k,
ctl:d}},tableCtl:function(k,w,d){k=x._createDiv(k);w=new e(w);w.placeAt(k);w.startup();Array.isArray(d)&&0<d.length&&w.addRows(d);return{div:k,ctl:w}},text:function(k,w){k=x._createDiv(k||"");k.innerHTML=u.sanitizeNoTags(w||"");return k},textButton:function(k,w,d){k=x._createDiv(("jimu-btn "+(k||"")).trim());k.innerHTML=w;d&&(k.title=d);return k},textButtonCtl:function(k,w,d){var n=x._createDiv(("jimu-btn "+(k||"")).trim());n.innerHTML=w;d&&(n.title=d);return{div:function(){return n},ctl:n}},textInputCtl:function(k,
w,d){k=x._createDiv(k||"");var n={style:"width:100%;"};w&&(n.placeholder=w);var p=new l(n);p.setDisabled("undefined"!==typeof d?d:!1);p.startup();var B=c.pausable(p,"change",y.hitch(p,function(g){B.pause();p.set("value",u.sanitizeNoTags(g));B.resume()}));p.own(B);m.place(p.domNode,k);return{div:k,ctl:p}},_createSpan:function(k,w){return x._createSpanDiv(!0,k,w)},_createDiv:function(k,w){return x._createSpanDiv(!1,k,w)},_createSpanDiv:function(k,w,d){var n={};w&&(n["class"]=w);k=m.create(k?"span":
"div",n);d&&m.place(k,d);return k}};return x})},"widgets/PublicNotification/generalUtils":function(){define(["jimu/utils"],function(r){return{sanitizeNoTags:function(y){if(!y)return y;var A=r.sanitizeHTML(y);y=/<(?:!--(?:(?:-*[^->])*--+|-?)|script\b(?:[^"'>]|"[^"]*"|'[^']*')*>[\s\S]*?<\/script\s*|style\b(?:[^"'>]|"[^"]*"|'[^']*')*>[\s\S]*?<\/style\s*|\/?[a-z](?:[^"'>]|"[^"]*"|'[^']*')*)>/gi;do{var m=A;A=A.replace(y,"")}while(A!==m);return A=A.replace(/</g,"\x26lt;").trim()}}})},"widgets/PublicNotification/setting/SettingSimpleTable":function(){define(["dojo/_base/declare",
"dojo/_base/html","jimu/dijit/SimpleTable"],function(r,y,A){return r(A,{_onRowMoved:null,constructor:function(m){},deleteRow:function(m){if(m){var q=this.getRowData(m);var c=m.rowIndex;y.destroy(m);this.updateUI();this._onDeleteRow(m,q,c)}},_onDeleteRow:function(m,q,c){this.emit("row-delete",m,q,c)}})})},"widgets/PublicNotification/setting/SettingCheckbox":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","./settingComponents","./SettingObject"],function(r,y,A,m,q){return r(q,{_inputControl:null,
constructor:function(c,a,b,h){c=[];a=m.checkboxCtl("inline-block",!1,a);c.push(a.div);this._inputControl=a.ctl;h&&this.own(A(this._inputControl,"change",y.hitch(this,h)));b&&c.push(m.container("variable-width","minorTrailingVertGap",[m.text("hint",b)]));this._mainDiv=m.container("full-width flexbox","minorTrailingHorizGap",c)},setValue:function(c){this._inputControl&&this._inputControl.setValue(c)},getValue:function(){if(this._inputControl)return this._inputControl.getValue()},setConfig:function(){this._inputControl&&
this._config&&this.setValue(this._config)},getConfig:function(c,a){this._inputControl&&(this._config=this.getValue())}})})},"widgets/PublicNotification/setting/SettingObject":function(){define(["dojo/_base/declare","dijit/Destroyable"],function(r,y){return r(y,{"-chains-":{setConfig:"after",getConfig:"before"},_name:null,_config:null,_mainDiv:null,constructor:function(A){this._name=A},div:function(){return this._mainDiv},setConfig:function(A){this._name&&(this._config=A[this._name])},getConfig:function(A,
m){this._name&&(A[this._name]=this._config)}})})},"widgets/PublicNotification/setting/SettingContainer":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","./settingComponents","./SettingObject"],function(r,y,A,m,q){return y(q,{_contents:[],constructor:function(c,a,b,h,l,u){Array.isArray(h)?(this._contents=h,this._mainDiv=m.container(a||"",b,this._getContentDivs(this._contents))):(this._contents=u,this._mainDiv=m.fieldsetContainer(h,l,a||"",b,this._getContentDivs(this._contents)))},
setConfig:function(c){r.forEach(this._contents,A.hitch(this,function(a){a.setConfig(this._config||c)}))},getConfig:function(c,a){this._name&&(this._config={});r.forEach(this._contents,A.hitch(this,function(b){b.getConfig(this._config||c,a)}))},_getContentDivs:function(c){return r.map(c,function(a){return a.div?a.div():a})}})})},"widgets/PublicNotification/setting/SettingOptionsTable":function(){define("dojo/_base/array dojo/_base/declare dojo/on dojo/query ./settingComponents ./SettingObject".split(" "),
function(r,y,A,m,q,c){return y(c,{_inputControl:null,_isFlagged:!0,constructor:function(a,b,h,l,u,e,x,k,w){a=[];l=[{name:"selected",title:"",width:"32px",type:"checkbox",editable:!1},{name:"item",title:l,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"40px",type:"actions",actions:["up","down"]}];"function"===typeof k&&(this._isFlagged=!1,l=l.slice(1),l[1].width="60px",l[1].actions.push("delete"));h=q.tableCtl(h,{autoHeight:!0,selectable:"function"===typeof x,fields:l},u);a.push(h.div);
this._inputControl=h.ctl;x&&this.own(A(this._inputControl,"row-select",x));k&&this.own(A(this._inputControl,"row-delete",k));w&&(this.own(A(this._inputControl,"row-up",function(d){w(d,!0)})),this.own(A(this._inputControl,"row-down",function(d){w(d,!1)})));e&&a.push(q.text("hint",e));this._mainDiv=q.container(b||"","minorTrailingVertGap",a)},addRowToTable:function(a){this._inputControl&&this._inputControl.addRow(a)},selectTableRow:function(a){(a=this._getRowTR(a))&&this._inputControl.selectRow(a)},
renameTableRow:function(a,b){(a=this._getRowTR(a))&&this._inputControl.editRow(a,{item:b})},setValue:function(a){this._inputControl&&(this._inputControl.addRows(this._isFlagged?this._convertTableConfigToTableLines(a):a),this.selectTableRow(0))},getValue:function(){if(this._inputControl){var a=this._inputControl.getData();return this._isFlagged?this._convertTableLinesToTableConfig(a):a}return null},setConfig:function(){this._inputControl&&this._config&&this.setValue(this._config)},getConfig:function(a,
b){this._inputControl&&(this._config=this.getValue())},_getRowTR:function(a){if(this._inputControl&&0<=a){var b=m(".simple-table-row",this._inputControl.domNode);return a<b.length?b[a]:null}return null},_convertTableConfigToTableLines:function(a){var b=a[0];return r.map(a.slice(1),function(h,l){return{item:h,selected:"1"===b[l]}})},_convertTableLinesToTableConfig:function(a){var b="";a=r.map(a,function(h){b+=h.selected?"1":"0";return h.item});return a=[b].concat(a)}})})},"widgets/PublicNotification/setting/SettingStaticText":function(){define(["dojo/_base/declare",
"jimu/utils","./settingComponents","./SettingObject"],function(r,y,A,m){return r(m,{constructor:function(q,c,a){this._name="";this._mainDiv=A.text(c,a)},setValue:function(q){this._mainDiv.innerHTML=y.sanitizeHTML(q||"")},getValue:function(){return this._mainDiv.innerHTML}})})},"widgets/PublicNotification/setting/SettingBufferBlock":function(){define("dojo/_base/declare dojo/_base/lang ./settingComponents ./SettingInputWithDropdownLabeled ./SettingObject ./SettingOptionsTable ./SettingStaticText".split(" "),
function(r,y,A,m,q,c,a){return r(q,{_inputControlDistance:null,_inputControlTable:null,_defaultConfig:{bufferDistance:100,bufferUnits:"FEET",bufferUnitsMenu:"10100 FEET YARDS METERS KILOMETERS MILES".split(" ")},constructor:function(b,h,l,u,e,x,k,w,d){b=[];this._defaultConfig=x;this._inputControlDistance=new m(null,!0,"full-width",u,e,k,w,d,null,"","",this._createLargeDistanceUnitsDropdownItemsList(),{min:0});b.push(this._inputControlDistance.div());this._inputControlTable=new c("bufferUnitsMenu",
"details-value","",h.propertyLabels.units,null,h.hints.selectionListOfOptionsToDisplay);b.push(A.container("full-width flexbox","minorTrailingHorizGap",[(new a(null,"details-label static-text",h.propertyLabels.bufferUnits)).div(),this._inputControlTable.div()]));this._mainDiv=A.container(l||"","majorTrailingVertGap",b)},setValue:function(b){this._inputControl&&this._inputControl.set("value",b)},setConfig:function(){y.mixin({},this._defaultConfig,this._config);this._inputControlDistance&&this._inputControlTable&&
(this._inputControlDistance.setValue(this._config.bufferDistance),this._inputControlDistance.setModifier(this._config.bufferUnits),this._inputControlTable.setConfig(this._config))},getConfig:function(b,h){this._inputControlDistance&&this._inputControlTable&&(this._config.bufferDistance=this._inputControlDistance.getValue(),this._config.bufferUnits=this._inputControlDistance.getModifier(),this._inputControlTable.getConfig(this._config))},_createLargeDistanceUnitsDropdownItemsList:function(){return[{label:jimuNls.units.feet,
value:"FEET"},{label:jimuNls.units.yards,value:"YARDS"},{label:jimuNls.units.meters,value:"METERS"},{label:jimuNls.units.kilometers,value:"KILOMETERS"},{label:jimuNls.units.miles,value:"MILES"}]}})})},"widgets/PublicNotification/setting/SettingInputWithDropdownLabeled":function(){define(["dojo/_base/declare","./SettingDropdown","./SettingInputLabeled","./SettingObject"],function(r,y,A,m){return r(m,{_inputControl:null,_inputModifier:null,constructor:function(q,c,a,b,h,l,u,e,x,k,w,d,n){this._inputModifier=
new y(null,k,w,d);this._inputControl=new A(null,c,a,b,h,l,u,e,x,this._inputModifier,n);this._mainDiv=this._inputControl.div()},setValue:function(q){this._inputControl&&this._inputControl.setValue(q)},setModifier:function(q){this._inputModifier&&this._inputModifier.setValue(q)},getValue:function(){return this._inputControl?this._inputControl.getValue():null},getModifier:function(){return this._inputModifier?this._inputModifier.getValue():null},setConfig:function(){this._inputControl&&this._config&&
this.setValue(this._config)},getConfig:function(q,c){this._inputControl&&(this._config=this.getValue())}})})},"widgets/PublicNotification/setting/SettingDropdown":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","./settingComponents","./SettingObject"],function(r,y,A,m,q){return r(q,{_inputControl:null,constructor:function(c,a,b,h){c=m.dropdownCtl(a,b,h);this._mainDiv=c.div;this._inputControl=c.ctl;this.own(A(this._inputControl,"change",y.hitch(this,this._onChange)))},setValue:function(c){this._inputControl&&
this._inputControl.set("value",c)},getValue:function(){return this._inputControl?this._inputControl.get("value"):null},setConfig:function(){this._inputControl&&this._config&&this.setValue(this._config)},getConfig:function(c,a){this._inputControl&&(this._config=this.getValue())},_onChange:function(c){this._config=c}})})},"widgets/PublicNotification/setting/SettingInputLabeled":function(){define(["dojo/_base/declare","./settingComponents","./SettingObject"],function(r,y,A){return r(A,{_inputControl:null,
constructor:function(m,q,c,a,b,h,l,u,e,x,k,w){m=[];var d=[];e||x?(e&&("string"===typeof e?d.push(y.text("static-text",e)):d.push(e.div())),q=q?y.numberInputCtl("variable-width inline-block",l,k):y.textInputCtl("variable-width inline-block",l,w),d.push(q.div),this._inputControl=q.ctl,x&&("string"===typeof x?d.push(y.text("static-text",x)):d.push(x.div())),m.push(y.container("full-width flexbox","minorTrailingHorizGap",d))):(q=q?y.numberInputCtl("full-width inline-block",l,k):y.textInputCtl("full-width inline-block",
l,w),m.push(q.div),this._inputControl=q.ctl);u&&m.push(y.text("hint",u));this._mainDiv=y.container("flexbox "+(c||""),"minorTrailingHorizGap",[y.container("inline-block "+(a?a:""),"",[y.text("static-text",h)]),y.container("inline-block "+(b?b:""),"minorTrailingVertGap",m)])},setValue:function(m){this._inputControl&&this._inputControl.set("value",m)},getValue:function(){return this._inputControl?this._inputControl.get("value"):null},setConfig:function(){this._inputControl&&this._config&&this.setValue(this._config)},
getConfig:function(m,q){this._inputControl&&(this._config=this.getValue())}})})},"widgets/PublicNotification/setting/SettingCheckboxLabeled":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on","./settingComponents","./SettingObject"],function(r,y,A,m,q){return r(q,{_inputControl:null,constructor:function(c,a,b,h,l,u,e){c=[];l=m.checkboxCtl("inline-block",!1,l);c.push(l.div);this._inputControl=l.ctl;e&&this.own(A(this._inputControl,"change",y.hitch(this,e)));u&&c.push(m.text("hint",
u));this._mainDiv=m.container("flexbox "+(a||""),"minorTrailingHorizGap",[m.container("inline-block "+(b?b:""),"",[]),m.container("inline-block "+(h?h:""),"minorTrailingVertGap",c)])},setValue:function(c){this._inputControl&&this._inputControl.setValue(c)},getValue:function(){if(this._inputControl)return this._inputControl.getValue()},setConfig:function(){this._inputControl&&this._config&&this.setValue(this._config)},getConfig:function(c,a){this._inputControl&&(this._config=this.getValue())}})})},
"widgets/PublicNotification/setting/SettingLabelFormats":function(){define(["dojo/_base/array","dojo/_base/declare","./SettingContainer","./SettingObject","./SettingOptionsTable"],function(r,y,A,m,q){return y(m,{_inputControl:null,constructor:function(c,a,b){this.nls=a;this._inputControl=new q(null,"half-width","",a.propertyLabels.description,null,a.hints.selectionListOfOptionsToDisplay);this._mainDiv=(new A(null,"flexbox "+(b||""),"majorTrailingHorizGap",a.groupingLabels.labelFormats,"full-width",
[this._inputControl])).div()},setConfig:function(){var c=[this._config[0]];var a=this._config.slice(1);a=r.map(a,function(b){return b.name});a=0<a.length?[].concat(c,a):[c];this._inputControl.setValue(a)},getConfig:function(c,a){var b=this._config.slice(1);c=this._inputControl.getValue();var h=[c[0]];r.forEach(c.slice(1),function(l){r.some(b,function(u){l===u.name&&h.push(u)})});this._config=h;0>this._config[0].indexOf("1")&&a.push(this.nls.problems.noNotificationLabelFormats)}})})},"widgets/PublicNotification/setting/SettingSearchSourcesBlock":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/_base/html dojo/on dojo/string jimu/dijit/_GeocodeServiceChooserContent jimu/dijit/Popup jimu/dijit/LoadingShelter jimu/portalUrlUtils jimu/dijit/Message esri/request esri/lang ./convert ./QuerySourceSetting ./settingComponents ./SettingBoxedDivs ./SettingBufferBlock ./SettingCheckboxLabeled ./SettingContainer ./SettingDropdownLabeled ./SettingFieldListLabeled ./SettingInputLabeled ./SettingObject ./SettingOptionsTable ./SettingStaticText".split(" "),
function(r,y,A,m,q,c,a,b,h,l,u,e,x,k,w,d,n,p,B,g,v,C,z,G,F,D,E,O){return y(D,{_inputControl:null,_mainControl:null,_detailsDiv:null,_detailsTitle:null,_detailsCheckbox:null,_sourceDisplay:null,_iCurrentSource:-1,_sourceMenuItems:[],_newSourceTypeMenuItems:[],_nls:null,_webmapFeatureLayers:[],_fieldListPicker:null,_displayFieldInput:null,constructor:function(J,H,I,M,Q,U){this._nls=H;this._map=M;this._webmapFeatureLayers=Q;this._portalUrl=U;this._newSourceTypeMenuItems=[H.groupingLabels.featureLayerDetails,
H.groupingLabels.geocoderDetails];this._inputControl=new E(null,"third-width","",H.propertyLabels.name,null,"",A.hitch(this,this._onRowSelected),A.hitch(this,this._onRowDeleted),A.hitch(this,this._onRowMoved));this._detailsDiv=p.container("two-thirds-width","majorTrailingVertGap",[]);J=p.addTextButtonDropdownCtl("",H.buttons.addSearchSource,this._newSourceTypeMenuItems);this.own(a(J.ctl,"click",A.hitch(this,this._onAddSearchSourceMenuItemClick)));this._mainControl=new C(null,I||"","majorTrailingVertGap",
H.groupingLabels.searchSources,"full-width",[new F("allPlaceholder",!1,"full-width","third-width","two-thirds-width",H.propertyLabels.placeholderTextForAllSources),new v("showInfoWindowOnSelect","full-width","third-width","two-thirds-width",H.propertyLabels.showPopupForFoundItem),new B(null,[J.div,p.container("full-width flexbox","majorTrailingHorizGap",[this._inputControl.div(),this._detailsDiv])])]);this._mainDiv=this._mainControl.div()},setConfig:function(){this._mainControl.setConfig(this._config);
this._sourceMenuItems=r.map(this._config.sources,function(J){return{item:J.name}});this._inputControl.setValue(this._sourceMenuItems);0<this._sourceMenuItems.length&&this._inputControl.selectTableRow(0)},getConfig:function(J,H){this._mainControl.getConfig(this._config);this._setDetails(-1);r.forEach(this._config.sources,function(I){"locator"===I.type?I.url||H.push(b.substitute(this._nls.problems.noSearchSourceURL,{sourceName:I.name})):0===I.searchFields.length&&H.push(b.substitute(this._nls.problems.noSearchSourceFields,
{sourceName:I.name}));0>I.buffer.bufferUnitsMenu[0].indexOf("1")&&H.push(b.substitute(this._nls.problems.noBufferUnitsForSearchSource,{sourceName:I.name}))},this)},_onAddSearchSourceMenuItemClick:function(J){var H={};if(J.target.innerText===this._newSourceTypeMenuItems[0]){var I=new n({nls:this._nls.querySourceSetting,map:this._map,appConfig:{portalUrl:this._portalUrl}});var M=A.clone(this._config.searchSourceTemplates.query);I.setConfig({name:M.name||"",placeholder:M.placeholder||"",searchFields:M.searchFields||
[],displayField:M.displayField||"",maxSuggestions:M.maxSuggestions||6,maxResults:M.maxResults||6,zoomScale:M.zoomScale||5E4,exactMatch:M.exactMatch,searchInCurrentMapExtent:M.searchInCurrentMapExtent,type:M.type||"query",layerId:M.layerId,url:M.url||""});I._openQuerySourceChooser();I.own(a(I,"select-query-source-ok",A.hitch(this,function(Q){M.name=Q.name;M.layerId=Q.layerInfo?Q.layerInfo.id:null;M.url=Q.url;M.buffer=A.clone(this._config.bufferTemplate);M.fieldMenuItems=[];(Q=Q.definition&&Q.definition.fields)&&
r.map(Q,function(U){M.fieldMenuItems.push({label:U.alias||U.name,value:U.name})});this._config.sources.push(M);H.item=M.name;this._sourceMenuItems.push(H);this._inputControl.addRowToTable(H);this._inputControl.selectTableRow(this._config.sources.length-1);I.destroy();I=null})));I.own(a(I,"select-query-source-cancel",function(){I.destroy();I=null}))}else M=A.clone(this._config.searchSourceTemplates.locator),M.buffer=A.clone(this._config.bufferTemplate),this._openServiceChooser(M,H)},_openServiceChooser:function(J,
H){var I=J&&H?!1:!0;this.serviceChooserContent=new h({url:I?this._sourceDisplay._contents[0].getValue():""});this.shelter=new u({hidden:!0});this.geocoderPopup=new l({titleLabel:this._nls.querySourceSetting.setGeocoderURL,autoHeight:!0,content:this.serviceChooserContent.domNode,container:window.jimuConfig.layoutId,width:640,configItem:J||this._config.sources[this._iCurrentSource],menuEntry:H||this._sourceMenuItems[this._iCurrentSource],update:I});this.shelter.placeAt(this.geocoderPopup.domNode);c.setStyle(this.serviceChooserContent.domNode,
"width","580px");c.addClass(this.serviceChooserContent.domNode,"override-geocode-service-chooser-content");this.serviceChooserContent.own(a(this.serviceChooserContent,"validate-click",A.hitch(this,function(){c.removeClass(this.serviceChooserContent.domNode,"override-geocode-service-chooser-content")})));this.serviceChooserContent.own(a(this.serviceChooserContent,"ok",A.hitch(this,"_onSelectLocatorUrlOk")));this.serviceChooserContent.own(a(this.serviceChooserContent,"cancel",A.hitch(this,"_onSelectLocatorUrlCancel")))},
_onSelectLocatorUrlOk:function(J){if(J&&J[0]&&J[0].url){this.shelter.show();var H=J[0].url;k({url:H,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(A.hitch(this,function(I){this.shelter.hide();if(I&&I.singleLineAddressField&&I.singleLineAddressField.name){var M=this.geocoderPopup.configItem;M.singleLineFieldName=I.singleLineAddressField.name;"string"===typeof H?(I=H.split("/"),M.name=I[I.length-2]||"geocoder"):M.name="geocoder";M.url=H;I=this.geocoderPopup.menuEntry;I.item=
M.name;this._sourceDisplay&&this._sourceDisplay._contents&&this._sourceDisplay._contents[0]&&this._sourceDisplay._contents[0].getValue&&this._sourceDisplay._contents[0].getValue()!==H&&(this._sourceDisplay._contents[0].setValue(H),this._sourceDisplay._contents[1].setValue(M.name));this.geocoderPopup.update?(this._config.sources[this._iCurrentSource]=M,this._sourceMenuItems[this._iCurrentSource]=I):(this._config.sources.push(M),this._sourceMenuItems.push(I),this._inputControl.addRowToTable(I));this._setDetails(this._iCurrentSource);
this._inputControl.selectTableRow(this.geocoderPopup.update?this._iCurrentSource:this._config.sources.length-1);this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null)}else new x({message:this._nls.querySourceSetting.locatorWarning})}),A.hitch(this,function(I){console.error(I);this.shelter.hide();new x({message:w.substitute({URL:this._getRequestUrl(H)},A.clone(this._nls.querySourceSetting.invalidUrlTip))})}))}},_getRequestUrl:function(J){var H=window.location.protocol;return"http:"===
H?e.setHttpProtocol(J):"https:"===H?e.setHttpsProtocol(J):J},_onSelectLocatorUrlCancel:function(){this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null,this.emit("select-locator-url-cancel"))},_setDetails:function(J){var H=this._sourceMenuItems.length;this._removeCurrentDetails();if(0<=J&&J<H){H=this._config.sources[J];if("query"===H.type)this._fieldListPicker=new G("searchFields",this._nls,"full-width","details-label","details-value",this._nls.propertyLabels.searchFields,this._nls.hints.csvNameList,
H.fieldMenuItems),this._displayFieldInput=new z("displayField","full-width","details-label","details-value",this._nls.propertyLabels.displayField,"",H.fieldMenuItems,A.hitch(this,this._onChangeField)),this._sourceDisplay=new C(null,"","majorTrailingVertGap",this._nls.groupingLabels.featureLayerDetails,"full-width",[new C(null,"full-width","minorTrailingHorizGap",[new O(null,"details-label inline-block",this._nls.querySourceSetting.layerSource),new O(null,"details-value inline-block wrapText",H.url)]),
new F("name",!1,"full-width","details-label","details-value",this._nls.propertyLabels.name,H.name),new F("placeholder",!1,"full-width","details-label","details-value",this._nls.propertyLabels.placeholderText),this._fieldListPicker,this._displayFieldInput,new F("maxSuggestions",!0,"full-width","details-label","details-value",this._nls.propertyLabels.maximumSuggestions,"6",null,null,null,{min:1,max:10,places:0}),new F("maxResults",!0,"full-width","details-label","details-value",this._nls.propertyLabels.maximumResults,
"6",null,null,null,{min:1,max:10,places:0}),new F("zoomScale",!0,"full-width","details-label","details-value",this._nls.propertyLabels.zoomScale,"50000","","1:",null,{min:0,places:0}),new v("exactMatch","full-width","details-label","details-value",this._nls.propertyLabels.exactMatch),new v("searchInCurrentMapExtent","full-width","details-label","details-value",this._nls.propertyLabels.limitSearchToMapExtent),new g("buffer",this._nls,"full-width","details-label","details-value",this._config.bufferTemplate,
this._nls.propertyLabels.bufferDefaultDistance,"100")]);else if("locator"===H.type){var I=p.textButtonCtl("",this._nls.querySourceSetting.set,this._nls.querySourceSetting.set);this.own(a(I.ctl,"click",A.hitch(this,this._openServiceChooser,void 0,void 0)));this._sourceDisplay=new C(null,"","majorTrailingVertGap",this._nls.groupingLabels.geocoderDetails,"full-width",[new F("url",!1,"full-width","details-label","details-value",this._nls.propertyLabels.url,void 0,void 0,void 0,I,void 0,!0),new F("name",
!1,"full-width","details-label","details-value",this._nls.propertyLabels.name),new F("placeholder",!1,"full-width","details-label","details-value",this._nls.propertyLabels.placeholderText),new F("countryCode",!1,"full-width","details-label","details-value",this._nls.propertyLabels.countryRegionCodes,this._nls.placeholders.countryRegionCodes),new F("maxSuggestions",!0,"full-width","details-label","details-value",this._nls.propertyLabels.maximumSuggestions,"6",null,null,null,{min:1,max:10,places:0}),
new F("maxResults",!0,"full-width","details-label","details-value",this._nls.propertyLabels.maximumResults,"6",null,null,null,{min:1,max:10,places:0}),new F("zoomScale",!0,"full-width","details-label","details-value",this._nls.propertyLabels.zoomScale,"50000","","1:",null,{min:0,places:0}),new v("searchInCurrentMapExtent","full-width","details-label","details-value",this._nls.propertyLabels.limitSearchToMapExtent),new g("buffer",this._nls,"full-width","details-label","details-value",this._config.bufferTemplate,
this._nls.propertyLabels.bufferDefaultDistance,"100")])}this._sourceDisplay&&(H.buffer.bufferUnitsMenu=d.unitCodesToLabels(jimuNls.units,H.buffer.bufferUnitsMenu),this._sourceDisplay.setConfig(H),q.place(this._sourceDisplay.div(),this._detailsDiv),m.remove(this._detailsDiv,"hidden"),this._iCurrentSource=J)}},_convertLayerIdToLayerName:function(J){var H=J;r.some(this._webmapFeatureLayers,function(I){return I.layerId===J?(H=I.name,!0):!1});return H},_convertLayerNameToLayerId:function(J){var H=J;r.some(this._webmapFeatureLayers,
function(I){return I.name===J?(H=I.layerId,!0):!1});return H},_onChangeFeatureLayer:function(J){var H=[];if(0<=this._iCurrentSource){var I=this._config.sources[this._iCurrentSource];r.some(this._webmapFeatureLayers,A.hitch(this,function(M){return J===M.layerId?(I.name=M.layerId,I.searchFields=[],I.displayField=M.displayField,I.layerId=M.layerId,I.url=M.url,r.map(M.fields,function(Q){H.push({label:Q.alias||Q.name,value:Q.name})}),this._fieldListPicker.setFieldList(H),this._fieldListPicker.setDisplay(),
this._displayFieldInput.setOptions(H),this._inputControl.renameTableRow(this._iCurrentSource,M.name),!0):!1}))}},_onChangeField:function(J){if(0<=this._iCurrentSource){var H=this._config.sources[this._iCurrentSource];H.displayField=J}},_onRowSelected:function(J){this._setDetails(J.rowIndex)},_onRowMoved:function(J,H){this._removeCurrentDetails();var I=H?J.rowIndex+1:J.rowIndex-1;H=this._sourceMenuItems.splice(I,1);I=this._config.sources.splice(I,1);this._sourceMenuItems.splice(J.rowIndex,0,H[0]);
this._config.sources.splice(J.rowIndex,0,I[0]);this._inputControl.selectTableRow(J.rowIndex)},_onRowDeleted:function(J,H,I){this._removeCurrentDetails();this._sourceMenuItems.splice(I,1);this._config.sources.splice(I,1);0<this._sourceMenuItems.length&&this._inputControl.selectTableRow(0)},_removeCurrentDetails:function(){if(0<=this._iCurrentSource){m.add(this._detailsDiv,"hidden");var J=this._config.sources[this._iCurrentSource];this._sourceDisplay.getConfig(J);J.buffer.bufferUnitsMenu=d.labelsToUnitCodes(jimuNls.units,
J.buffer.bufferUnitsMenu);"query"===J.type&&(J.name=this._convertLayerIdToLayerName(J.name));q.empty(this._detailsDiv);this._sourceDisplay=null;this._iCurrentSource=-1}}})})},"jimu/dijit/_GeocodeServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./GeocodeServiceBrowser"],function(r,y,A){return r([y],{baseClass:"jimu-geocode-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/GeocodeServer"],
_createServiceBrowser:function(m){return new A(m)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),function(r,y,A,m,q,c,a,b,h,l,u,e,x,k,w){return r([y,A,m,c],{templateString:q,
_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=l.mixin({},window.jimuNls.common);this.nls=l.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);b.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=
!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(d){var n=new a;(this.url=d)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),n=this._onBtnValidateClick()):n.reject();return n},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?h.forEach(this._examples,l.hitch(this,function(n){b.create("div",{innerHTML:n,"class":"example-url"},this.exampleTd)})):b.setStyle(this.exampleTr,"display",
"none");var d={multiple:this.multiple,_onTreeClick:l.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(d);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(e.after(this.urlInput,"validator",l.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(u(this.serviceBrowser,"error",l.hitch(this,this._onServiceBrowserError)))},_createServiceBrowser:function(d){},_validateUrl:function(d){d=
d.replace(/\/*$/g,"");if((d=d.match(/\/rest\/services\/*(.*)/gi))&&0<d.length)if(d=d[0].replace(/\/rest\/services\/*/,"")){var n=d.split("/");if(1===n.length)return!0;if(2===n.length)return this.serviceBrowser.isServiceTypeSupported(n[1]);if(3<=n.length)return d=this.serviceBrowser.isServiceTypeSupported(n[1]),n=this.serviceBrowser.isServiceTypeSupported(n[2]),d||n}else return!0;else return!1},_afterUrlValidate:function(d){d&&(d=this.urlInput.get("value"),d=this._validateUrl(d));d?b.removeClass(this.btnValidate,
"jimu-state-disabled"):b.addClass(this.btnValidate,"jimu-state-disabled");return d},_onServiceBrowserError:function(d){this._showErrorMessage(d)},_showErrorMessage:function(d){d&&"string"===typeof d?(this.errorNode.innerHTML=d,b.addClass(this.errorSection,"visible")):b.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";b.removeClass(this.errorSection,"visible")},_onBtnValidateClick:function(){this._clearErrorMessage();var d=new a;if(this.urlInput.validate()){var n=
this.urlInput.get("value");this.serviceBrowser.setUrl(n).then(l.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();d.resolve()}),l.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();d.reject()}));this.emit("validate-click")}else d.reject();return d},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?b.removeClass(this.btnOk,"jimu-state-disabled"):b.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},
_onBtnOkClick:function(){var d=this.getSelectedItems();0<d.length&&this.emit("ok",d)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"jimu/dijit/GeocodeServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(r,y,A,m,q){return r([y],{baseClass:"jimu-geocode-service-browser",declaredClass:"jimu.dijit.GeocodeServiceBrowser",url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);
this.rule=q.getGeocodeServiceBrowserRule()},getSelectedItems:function(){var c=this.inherited(arguments);return c=m.map(c,A.hitch(this,function(a){return{name:a.name,url:a.url}}))}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingIndicator".split(" "),
function(r,y,A,m,q,c,a,b,h,l,u,e,x,k,w){return r([y,A,m,q],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,
"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(d){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new h;d&&"string"===typeof d&&d.replace(/\/*$/g,"")||this._def.reject();d=d.replace(/\/*$/g,"");d=c.trim(d);var n=d.match(/^http(s?):\/\//gi);n&&0<n.length||
(d="http://"+d);if(!(0>=d.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=d))return d=this._getRootItem(),d=k.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,d):this._isUrlContainsServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,d):this._searchFolderServiceUrl(this._currentUrl,d),this.shelter.show(),d.then(c.hitch(this,function(p){this.domNode&&this.shelter.hide();var B=this.tree.getAllLeafTreeNodeWidgets();1===B.length&&
B[0].select();this._def.resolve(p)}),c.hitch(this,function(p){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(p)})),this._def;this._def.reject()},_getItem:function(d){return this.rule.getItem(d)},_getSubItemUrls:function(d){return this.rule.getSubItemUrls(d)},_getSubItems:function(d){var n=new h;this._getSubItemUrls(d).then(c.hitch(this,function(p){p=b.map(p,c.hitch(this,function(B){return this._getItem(B)}));l(p).then(c.hitch(this,function(B){B=b.filter(B,c.hitch(this,
function(g){return g&&"object"===typeof g}));n.resolve(B)}),c.hitch(this,function(B){n.reject(B)}))}),c.hitch(this,function(p){n.reject(p)}));return n},_selectFirstLeafTreeNodeWidget:function(){var d=this.tree.getAllLeafTreeNodeWidgets();1===d.length&&d[0].select()},isLeafItem:function(d){return 0<=this.rule.leafTypes.indexOf(d.type)},isServiceTypeSupported:function(d){return this.rule.isServiceTypeSupported(d)},_getStringEndWith:function(d,n){var p="",B=d.indexOf(n);0<=B&&(p=d.slice(0,B+n.length));
return p},_isUrlContainsServiceType:function(d){return this.rule.isUrlContainsServiceType(d)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(d){var n="";d=d.split("/");return n=d[d.length-1]},_searchBaseServiceUrl:function(d,n){var p=new h;this._getRestInfo(d).then(c.hitch(this,function(B){if(this.domNode){var g=[];b.map(B.folders,c.hitch(this,function(v){var C={name:v,type:"folder",url:d+"/"+v,parent:n.id};this._addItem(C);
var z=new h;this._doSearchFolderServiceUrl(C.url,C.id).then(c.hitch(this,function(G){0<G.length?b.forEach(G,c.hitch(this,function(F){F.parent=C.id;this._addItem(F)})):this._removeItem(C.id);z.resolve()}),c.hitch(this,function(G){z.reject(G)}));g.push(z);return z}));b.forEach(B.services,c.hitch(this,function(v){if(this.isServiceTypeSupported(v.type)){v=d+"/"+v.name+"/"+v.type;var C=new h;this.rule.getItem(v).then(c.hitch(this,function(z){z&&(z.parent=n.id,this._addItem(z));C.resolve()}),c.hitch(this,
function(z){console.error(z);C.reject(z)}));g.push(C)}}));l(g).then(c.hitch(this,function(){this.domNode&&p.resolve()}),c.hitch(this,function(v){console.error(v);this.domNode&&p.reject(v)}))}}),c.hitch(this,function(B){console.error(B);this.domNode&&p.reject({errorCode:"NETWORK_ERROR",error:B})}));return p},_searchFolderServiceUrl:function(d,n){var p=new h;this._doSearchFolderServiceUrl(d,n).then(c.hitch(this,function(B){this.domNode&&(b.forEach(B,c.hitch(this,function(g){g.parent=n.id;this._addItem(g)})),
p.resolve())}),c.hitch(this,function(B){console.error(B);this.domNode&&p.reject({errorCode:"NETWORK_ERROR",error:B})}));return p},_doSearchFolderServiceUrl:function(d){var n=new h,p=this._getBaseServiceUrl();this._getRestInfo(d).then(c.hitch(this,function(B){B=B.services;var g=[];B&&0<B.length&&b.forEach(B,c.hitch(this,function(v){this.isServiceTypeSupported(v.type)&&(v=this.rule.getItem(p+"/"+v.name+"/"+v.type),g.push(v))}));l(g).then(c.hitch(this,function(v){v=b.filter(v,c.hitch(this,function(C){return C}));
n.resolve(v)}),c.hitch(this,function(v){console.error(v);n.reject(v)}))}),c.hitch(this,function(B){console.error(B);n.reject(B)}));return n},_searchServiceUrl:function(d,n){var p=new h;this._getSubItems(d).then(c.hitch(this,function(B){B&&0<B.length?(b.forEach(B,c.hitch(this,function(g){g.parent=n.id;this._addItem(g)})),p.resolve()):this._getItem(d).then(c.hitch(this,function(g){g&&(g.parent=n.id,this._addItem(g));p.resolve()}),c.hitch(this,function(g){p.reject(g)}))}),c.hitch(this,function(B){p.reject(B)}));
return p},_getRestInfo:function(d){var n=new h;this.rule.getRestInfo(d).then(c.hitch(this,function(p){this.domNode&&n.resolve(p)}),c.hitch(this,function(p){this.domNode&&n.reject(p)}));return n},_clear:function(){var d=this._store.query({parent:"root"});b.forEach(d,c.hitch(this,function(n){n&&"root"!==n.id&&this._store.remove(n.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(d){this._id++;d.id=this._id.toString();this._store.add(d);return d},_removeItem:function(d){this._store.remove(d)},
_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var d=this._getRootItem();d=new u({data:[d],getChildren:function(n){return this.query({parent:n.id})}});this._store=new e(d);d=new x({store:this._store,query:{id:"root"},mayHaveChildren:c.hitch(this,this._mayHaveChildren)});this.tree=new w({multiple:this.multiple,model:d,showRoot:!1,style:{width:"100%"},isLeafItem:c.hitch(this,this.isLeafItem),onOpen:c.hitch(this,function(n,p){this._onTreeOpen(n,p);
this.emit("tree-open",n,p)}),onClick:c.hitch(this,function(n,p,B){this._onTreeClick(n,p,B);this.emit("tree-click",n,p,B)}),getIconStyle:c.hitch(this,function(n,p){var B=null;if(!n)return null;var g={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},v=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),C=this._getIconImageName(n,p);C||("folder"===n.type?C=p?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(n.type)&&
(C=p?"folder_open_default.png":"folder_close_default.png"));C&&(g.backgroundImage="url("+v+"/css/images/"+C+")",B=g);return B})});a.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(d,n){var p="";"function"===typeof this.rule.getIconImageName&&(p=this.rule.getIconImageName(d,n));return p},_mayHaveChildren:function(d){return"root"===d.type?!0:!this.isLeafItem(d)},_onTreeOpen:function(d,n){"root"===d.id||0<this._store.query({parent:d.id}).length||
d.checking||d.checked||(d.checking=!0,this._getSubItems(d.url).then(c.hitch(this,function(p){b.forEach(p,c.hitch(this,function(B){B.parent=d.id;this._addItem(B)}));d.checking=!1;d.checked=!0}),c.hitch(this,function(p){console.error(p);d.checking=!1;d.checked=!0})))},_onTreeClick:function(d,n,p){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),
function(r,y,A,m,q,c,a){return A("dijit.tree.ObjectStoreModel",a,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(b){q.mixin(this,b);this.childrenCache={}},getRoot:function(b,h){if(this.root)b(this.root);else{var l=this.store.query(this.query);l.then&&this.own(l);c(l,q.hitch(this,function(u){if(1!=u.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+u.length+" items, but must return exactly one");this.root=u[0];b(this.root);l.observe&&l.observe(q.hitch(this,
function(e){this.onChange(e)}),!0)}),h)}},mayHaveChildren:function(){return!0},getChildren:function(b,h,l){var u=this.store.getIdentity(b);if(this.childrenCache[u])c(this.childrenCache[u],h,l);else{var e=this.childrenCache[u]=this.store.getChildren(b);e.then&&this.own(e);e.observe&&this.own(e.observe(q.hitch(this,function(x,k,w){this.onChange(x);k!=w&&c(e,q.hitch(this,"onChildrenChange",b))}),!0));c(e,h,l)}},isItem:function(){return!0},getIdentity:function(b){return this.store.getIdentity(b)},getLabel:function(b){return b[this.labelAttr]},
newItem:function(b,h,l,u){return this.store.put(b,{parent:h,before:u})},pasteItem:function(b,h,l,u,e,x){var k=new m;if(h===l&&!u&&!x)return k.resolve(!0),k;h&&!u?this.getChildren(h,q.hitch(this,function(w){w=[].concat(w);var d=r.indexOf(w,b);w.splice(d,1);this.onChildrenChange(h,w);k.resolve(this.store.put(b,{overwrite:!0,parent:l,oldParent:h,before:x,isCopy:!1}))})):k.resolve(this.store.put(b,{overwrite:!0,parent:l,oldParent:h,before:x,isCopy:!0}));return k},onChange:function(){},onChildrenChange:function(){},
onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),function(r,y,A,m,q,c,a,b,h,l,u,e,x,k,w,d){var n=r([w._TreeNode,x],{templateString:m,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);
c.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=c.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=c.toDom('\x3cinput type\x3d"checkbox" /\x3e');c.addClass(this.checkNode,"jimu-tree-check-node");c.place(this.checkNode,this.contentNode,"first");this.own(u(this.checkNode,"click",q.hitch(this,this._onClick)));this.own(u(this.rowNode,"keydown",q.hitch(this,function(p,B){B.target=p;B.keyCode!==e.ENTER&&B.keyCode!==
e.SPACE||this._onClick(B)},this.checkNode)));this.isLeaf?this.groupId?c.setStyle(this.checkNode,"display","none"):c.setStyle(this.checkNode,"display","inline"):c.setStyle(this.checkNode,"display","none");this.isLeaf?c.addClass(this.domNode,"jimu-tree-leaf-node"):c.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,c.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,c.removeClass(this.domNode,
"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(p){(p.target||p.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,p):this.tree._onClick(this,p)},_onChange:function(){this.isLeaf&&setTimeout(q.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return r([w,
x],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+d.getRandomString()},postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,"jimu-tree");this.own(l.before(this,"onClick",q.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&c.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0;c.setAttr(this.domNode,"tabindex",0)},removeItem:function(p){this.model.store.remove(p)},
getAllItems:function(){var p=this.getAllTreeNodeWidgets();return a.map(p,q.hitch(this,function(B){var g=B.item;g.selected=B.checkNode.checked;return g}))},getSelectedItems:function(){var p=this.getAllTreeNodeWidgets();p=a.filter(p,q.hitch(this,function(B){return B.checkNode.checked}));return a.map(p,q.hitch(this,function(B){return B.item}))},getFilteredItems:function(p){var B=this.getAllTreeNodeWidgets();B=a.map(B,q.hitch(this,function(g){var v=g.item;v.selected=g.checkNode.checked;return v}));return a.filter(B,
q.hitch(this,function(g){return p(g)}))},getTreeNodeByItemId:function(p){for(var B=this._getAllTreeNodeDoms(),g=0;g<B.length;g++){var v=k.byNode(B[g]);if(v.item.id.toString()===p.toString())return v}return null},selectItem:function(p){(p=this.getTreeNodeByItemId(p))&&p.isLeaf&&this.selectNodeWidget(p)},unselectItem:function(p){(p=this.getTreeNodeByItemId(p))&&p.isLeaf&&p.unselect()},getAllLeafTreeNodeWidgets:function(){var p=this.getAllTreeNodeWidgets();return a.filter(p,q.hitch(this,function(B){return B.isLeaf}))},
getAllTreeNodeWidgets:function(){var p=this._getAllTreeNodeDoms();return a.map(p,q.hitch(this,function(B){return k.byNode(B)}))},isLeafItem:function(p){return p&&p.isLeaf},_getAllTreeNodeDoms:function(){return h(".dijitTreeNode",this.domNode)},_createTreeNode:function(p){p.isLeaf=this.isLeafItem(p.item);this.multiple||(p.groupId=this.uniqueId);return new n(p)},_onTreeNodeSelect:function(p){this.emit("item-select",{item:p.item,treeNode:p})},_onTreeNodeUnselect:function(p){this.emit("item-unselect",
{item:p.item,treeNode:p})},selectNodeWidget:function(p){this.multiple||this.unselectAllLeafNodeWidgets();p.select()},_jimuBeforeClick:function(p,B,g){B.isLeaf&&(c.hasClass(g.target||g.srcElement,"jimu-tree-check-node")||(this.multiple?B.toggleSelect():this.selectNodeWidget(B)));return arguments},_onCheckNodeClick:function(p,B,g){!this.multiple&&B&&this.unselectAllLeafNodeWidgets();b.stop(g);this.focusNode(p);setTimeout(q.hitch(this,function(){B?this.selectNodeWidget(p):p.unselect();this.onClick(p.item,
p,g)}),0)},unselectAllLeafNodeWidgets:function(){var p=this.getAllLeafTreeNodeWidgets();a.forEach(p,q.hitch(this,function(B){B.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(r,y,A,m,q,c,a,b,h,l,u,e,x,k,w,d,n,p,B,g,v,C,z,G,F,D,E,O,J,H,I,M,Q,U,ca){function S(f){return d.delegate(f.promise||f,{addCallback:function(t){this.then(t)},addErrback:function(t){this.otherwise(t)}})}var ba=m("dijit._TreeNode",[F,D,E,O,J],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(f){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=f;this._set("label",f);x("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:I,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(f){var t=Math.max(f,0)*this.tree._nodePixelIndent+"px";l.set(this.domNode,
"backgroundPosition",t+" 0px");l.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",t);r.forEach(this.getChildren(),function(K){K.set("indent",f+1)});this._set("indent",f)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(f){var t=this.tree,K=t.model;t._v10Compat&&f===K.root&&(f=null);this._applyClassAndStyle(f,"icon","Icon");this._applyClassAndStyle(f,"label","Label");this._applyClassAndStyle(f,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(f,t,K){var L="_"+t+"Class";t+="Node";var N=this[L];this[L]=this.tree["get"+K+"Class"](f,this.isExpanded);b.replace(this[t],this[L]||"",N||"");l.set(this[t],this.tree["get"+K+"Style"](f,this.isExpanded)||{})},_updateLayout:function(){var f=this.getParent();f=!f||!f.rowNode||"none"==f.rowNode.style.display;b.toggle(this.domNode,"dijitTreeIsRoot",f);b.toggle(this.domNode,"dijitTreeIsLast",!f&&!this.getNextSibling())},_setExpando:function(f){var t=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];f=f?0:this.isExpandable?this.isExpanded?1:2:3;b.replace(this.expandoNode,t[f],t);this.expandoNodeText.innerHTML=["*","-","+","*"][f]},expand:function(){if(this._expandDeferred)return S(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");b.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var f=e.wipeIn({node:this.containerNode,duration:G.defaultDuration}),t=this._expandDeferred=new q(function(){f.stop()});y.after(f,"onEnd",function(){t.resolve(!0)},!0);f.play();return S(t)},collapse:function(){if(this._collapseDeferred)return S(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");b.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var f=e.wipeOut({node:this.containerNode,duration:G.defaultDuration}),t=this._collapseDeferred=new q(function(){f.stop()});y.after(f,"onEnd",
function(){t.resolve(!0)},!0);f.play();return S(t)},indent:0,setChildItems:function(f){var t=this.tree,K=t.model,L=[],N=t.focusedChild,X=this.getChildren();r.forEach(X,function(P){E.prototype.removeChild.call(this,P)},this);this.defer(function(){r.forEach(X,function(P){if(!P._destroyed&&!P.getParent()){t.dndController.removeTreeNode(P);(function da(R){var Y=K.getIdentity(R.item),aa=t._itemNodesMap[Y];1==aa.length?delete t._itemNodesMap[Y]:(Y=r.indexOf(aa,R),-1!=Y&&aa.splice(Y,1));r.forEach(R.getChildren(),
da)})(P);if(t.persist){var V=r.map(P.getTreePath(),function(R){return t.model.getIdentity(R)}).join("/"),T;for(T in t._openedNodes)T.substr(0,V.length)==V&&delete t._openedNodes[T];t._saveExpandedNodes()}t.lastFocusedChild&&!a.isDescendant(t.lastFocusedChild.domNode,t.domNode)&&delete t.lastFocusedChild;N&&!a.isDescendant(N.domNode,t.domNode)&&t.focus();P.destroyRecursive()}})});this.state="Loaded";f&&0<f.length?(this.isExpandable=!0,r.forEach(f,function(P){var V=K.getIdentity(P),T=t._itemNodesMap[V];
if(T)for(var Z=0;Z<T.length;Z++)if(T[Z]&&!T[Z].getParent()){var R=T[Z];R.set("indent",this.indent+1);break}R||(R=this.tree._createTreeNode({item:P,tree:t,isExpandable:K.mayHaveChildren(P),label:t.getLabel(P),labelType:t.model&&t.model.labelType||"text",tooltip:t.getTooltip(P),ownerDocument:t.ownerDocument,dir:t.dir,lang:t.lang,textDir:t.textDir,indent:this.indent+1}),T?T.push(R):t._itemNodesMap[V]=[R]);this.addChild(R);(this.tree.autoExpand||this.tree._state(R))&&L.push(t._expandNode(R))},this),r.forEach(this.getChildren(),
function(P){P._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);f=c(L);this.tree._startPaint(f);return S(f)},getTreePath:function(){for(var f=this,t=[];f&&f!==this.tree.rootNode;)t.unshift(f.item),f=f.getParent();t.unshift(this.tree.rootNode.item);return t},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(f){this.inherited(arguments);var t=this.getChildren();0==t.length&&(this.isExpandable=!1,
this.collapse());r.forEach(t,function(K){K._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(f){this.labelNode.setAttribute("aria-selected",f?"true":"false");b.toggle(this.rowNode,"dijitTreeRowSelected",f)},focus:function(){C.focus(this.focusNode)}});x("dojo-bidi")&&ba.extend({_setTextDirAttr:function(f){!f||this.textDir==f&&this._created||(this._set("textDir",f),this.applyTextDir(this.labelNode),r.forEach(this.getChildren(),function(t){t.set("textDir",
f)},this))}});var W=m("dijit.Tree",[F,H,D,J],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:M,persist:!1,autoExpand:!1,dndController:ca,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(f,t){p.publish(this.id,d.mixin({tree:this,event:f},t||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new q;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var f=this;this.own(n(this.containerNode,
n.selector(".dijitTreeNode",B.enter),function(L){f._onNodeMouseEnter(z.byNode(this),L)}),n(this.containerNode,n.selector(".dijitTreeNode",B.leave),function(L){f._onNodeMouseLeave(z.byNode(this),L)}),n(this.containerNode,n.selector(".dijitTreeRow",v.press),function(L){f._onNodePress(z.getEnclosingWidget(this),L)}),n(this.containerNode,n.selector(".dijitTreeRow",v),function(L){f._onClick(z.getEnclosingWidget(this),L)}),n(this.containerNode,n.selector(".dijitTreeRow","dblclick"),function(L){f._onDblClick(z.getEnclosingWidget(this),
L)}));this.model||this._store2model();this.own(y.after(this.model,"onChange",d.hitch(this,"_onItemChange"),!0),y.after(this.model,"onChildrenChange",d.hitch(this,"_onItemChildrenChange"),!0),y.after(this.model,"onDelete",d.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){d.isString(this.dndController)&&(this.dndController=d.getObject(this.dndController));for(var t={},K=0;K<this.dndParams.length;K++)this[this.dndParams[K]]&&(t[this.dndParams[K]]=this[this.dndParams[K]]);
this.dndController=new this.dndController(this,t)}this._load();this.onLoadDeferred=S(this.pendingCommandsPromise);this.onLoadDeferred.then(d.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;k.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var f={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(f.mayHaveChildren=d.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(f.getChildren=d.hitch(this,function(t,K,L){this.getItemChildren(this._v10Compat&&t===this.model.root?null:t,K,L)}));this.model=new U(f);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(d.hitch(this,function(f){var t=this.rootNode=this.tree._createTreeNode({item:f,tree:this,isExpandable:!0,label:this.label||this.getLabel(f),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(t.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(t.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(t.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
t.labelNode.setAttribute("role","presentation"),t.labelNode.removeAttribute("aria-selected"),t.containerNode.setAttribute("role","tree"),t.containerNode.setAttribute("aria-expanded","true"),t.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(t.domNode);f=this.model.getIdentity(f);this._itemNodesMap[f]?this._itemNodesMap[f].push(t):this._itemNodesMap[f]=[t];t._updateLayout();this._expandNode(t).then(d.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),d.hitch(this,function(f){console.error(this,": error loading root: ",f)}))},getNodesByItem:function(f){if(!f)return[];f=d.isString(f)?f:this.model.getIdentity(f);return[].concat(this._itemNodesMap[f])},_setSelectedItemAttr:function(f){this.set("selectedItems",[f])},_setSelectedItemsAttr:function(f){var t=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(d.hitch(this,function(){var K=
r.map(f,function(N){return!N||d.isString(N)?N:t.model.getIdentity(N)}),L=[];r.forEach(K,function(N){L=L.concat(t._itemNodesMap[N]||[])});this.set("selectedNodes",L)}))},_setPathAttr:function(f){return f.length?S(this.set("paths",[f]).then(function(t){return t[0]})):S(this.set("paths",[]).then(function(t){return t[0]}))},_setPathsAttr:function(f){function t(L,N){var X=L.shift(),P=r.filter(N,function(V){return V.getIdentity()==X})[0];if(P)return L.length?K._expandNode(P).then(function(){return t(L,
P.getChildren())}):P;throw new W.PathError("Could not expand path at "+X);}var K=this;return S(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return c(r.map(f,function(L){L=r.map(L,function(N){return N&&d.isObject(N)?K.model.getIdentity(N):N});if(L.length)return t(L,[K.rootNode]);throw new W.PathError("Empty path");}))}).then(function(L){K.set("selectedNodes",L);return K.paths}))},_setSelectedNodeAttr:function(f){this.set("selectedNodes",[f])},_setSelectedNodesAttr:function(f){this.dndController.setSelection(f)},
expandAll:function(){function f(K){return t._expandNode(K).then(function(){var L=r.filter(K.getChildren()||[],function(N){return N.isExpandable});return c(r.map(L,f))})}var t=this;return S(f(this.rootNode))},collapseAll:function(){function f(K){var L=r.filter(K.getChildren()||[],function(N){return N.isExpandable});L=c(r.map(L,f));return!K.isExpanded||K==t.rootNode&&!t.showRoot?L:L.then(function(){return t._collapseNode(K)})}var t=this;return S(f(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(f){return this.model.getLabel(f)},getIconClass:function(f,t){return!f||this.model.mayHaveChildren(f)?t?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(f,t){(f=this._getNext(t))&&f.isTreeNode&&this.focusNode(f)},_onUpArrow:function(f,t){if(f=t.getPreviousSibling())for(t=f;t.isExpandable&&t.isExpanded&&
t.hasChildren();)t=t.getChildren(),t=t[t.length-1];else if(f=t.getParent(),this.showRoot||f!==this.rootNode)t=f;t&&t.isTreeNode&&this.focusNode(t)},_onRightArrow:function(f,t){t.isExpandable&&!t.isExpanded?this._expandNode(t):t.hasChildren()&&(t=t.getChildren()[0])&&t.isTreeNode&&this.focusNode(t)},_onLeftArrow:function(f,t){t.isExpandable&&t.isExpanded?this._collapseNode(t):(f=t.getParent())&&f.isTreeNode&&(this.showRoot||f!==this.rootNode)&&this.focusNode(f)},focusLastChild:function(){var f=this._getLast();
f&&f.isTreeNode&&this.focusNode(f)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var f=this.rootNode;f.isExpanded;){var t=f.getChildren();if(!t.length)break;f=t[t.length-1]}return f},_getNext:function(f){if(f.isExpandable&&f.isExpanded&&f.hasChildren())return f.getChildren()[0];for(;f&&f.isTreeNode;){var t=f.getNextSibling();if(t)return t;f=f.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(f,t){return a.isDescendant(f,
t.expandoNode)||a.isDescendant(f,t.expandoNodeText)},_onNodePress:function(f,t){this.focusNode(f)},__click:function(f,t,K,L){var N=this.isExpandoNode(t.target,f);f.isExpandable&&(K||N)?this._onExpandoClick({node:f}):(this._publish("execute",{item:f.item,node:f,evt:t}),this[L](f.item,f,t),this.focusNode(f));t.stopPropagation();t.preventDefault()},_onClick:function(f,t){this.__click(f,t,this.openOnClick,"onClick")},_onDblClick:function(f,t){this.__click(f,t,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(f){f=
f.node;this.focusNode(f);f.isExpanded?this._collapseNode(f):this._expandNode(f)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(f){k.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(f)},_getRootOrFirstNode:function(){k.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(f){f._expandNodeDeferred&&
delete f._expandNodeDeferred;if("Loading"!=f.state&&f.isExpanded){var t=f.collapse();this.onClose(f.item,f);this._state(f,!1);this._startPaint(t);return t}},_expandNode:function(f){if(f._expandNodeDeferred)return f._expandNodeDeferred;var t=this.model,K=f.item,L=this;f._loadDeferred||(f.markProcessing(),f._loadDeferred=new q,t.getChildren(K,function(N){f.unmarkProcessing();f.setChildItems(N).then(function(){f._loadDeferred.resolve(N)})},function(N){console.error(L,": error loading "+f.label+" children: ",
N);f._loadDeferred.reject(N)}));t=f._loadDeferred.then(d.hitch(this,function(){var N=f.expand();this.onOpen(f.item,f);this._state(f,!0);return N}));this._startPaint(t);return t},focusNode:function(f){for(var t=[],K=this.domNode;K&&K.tagName&&"IFRAME"!==K.tagName.toUpperCase();K=K.parentNode)t.push({domNode:K.contentWindow||K,scrollLeft:K.scrollLeft||0,scrollTop:K.scrollTop||0});this.focusChild(f);this.defer(function(){for(var L=0,N=t.length;L<N;L++)t[L].domNode.scrollLeft=t[L].scrollLeft,t[L].domNode.scrollTop=
t[L].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(f){var t=this.model.getIdentity(f);if(t=this._itemNodesMap[t]){var K=this.getLabel(f),L=this.getTooltip(f);r.forEach(t,function(N){N.set({item:f,label:K,tooltip:L});N._updateItemClasses(f)})}},_onItemChildrenChange:function(f,t){f=this.model.getIdentity(f);(f=this._itemNodesMap[f])&&r.forEach(f,function(K){K.setChildItems(t)})},_onItemDelete:function(f){f=this.model.getIdentity(f);var t=this._itemNodesMap[f];
t&&(r.forEach(t,function(K){this.dndController.removeTreeNode(K);var L=K.getParent();L&&L.removeChild(K);this.lastFocusedChild&&!a.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!a.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();K.destroyRecursive()},this),delete this._itemNodesMap[f])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var f=A(this.cookieName);f&&r.forEach(f.split(","),function(t){this._openedNodes[t]=
!0},this)}},_state:function(f,t){if(!this.persist)return!1;var K=r.map(f.getTreePath(),function(L){return this.model.getIdentity(L)},this).join("/");if(1===arguments.length)return this._openedNodes[K];t?this._openedNodes[K]=!0:delete this._openedNodes[K];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var f=[],t;for(t in this._openedNodes)f.push(t);A(this.cookieName,f.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),
delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!d.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(f){f&&h.setMarginBox(this.domNode,f);this._nodePixelIndent=h.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(d.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},
_outstandingPaintOperations:0,_startPaint:function(f){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var t=d.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});g(f,t,t)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);
this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(f){return new ba(f)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});x("dojo-bidi")&&W.extend({_setTextDirAttr:function(f){f&&this.textDir!=f&&(this._set("textDir",f),this.rootNode.set("textDir",f))}});W.PathError=u("TreePathError");W._TreeNode=ba;return W})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(r,y,A,m){return A("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(q){m.mixin(this,q);this.connects=[];q=this.store;if(!q.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");q.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([y.after(q,
"onNew",m.hitch(this,"onNewItem"),!0),y.after(q,"onDelete",m.hitch(this,"onDeleteItem"),!0),y.after(q,"onSet",m.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var q;q=this.connects.pop();)q.remove()},getRoot:function(q,c){this.root?q(this.root):this.store.fetch({query:this.query,onComplete:m.hitch(this,function(a){if(1!=a.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+a.length+" items, but must return exactly one");this.root=a[0];q(this.root)}),onError:c})},mayHaveChildren:function(q){return r.some(this.childrenAttrs,
function(c){return this.store.hasAttribute(q,c)},this)},getChildren:function(q,c,a){var b=this.store;if(b.isItemLoaded(q)){for(var h=[],l=0;l<this.childrenAttrs.length;l++){var u=b.getValues(q,this.childrenAttrs[l]);h=h.concat(u)}var e=0;this.deferItemLoadingUntilExpand||r.forEach(h,function(k){b.isItemLoaded(k)||e++});0==e?c(h):r.forEach(h,function(k,w){b.isItemLoaded(k)||b.loadItem({item:k,onItem:function(d){h[w]=d;0==--e&&c(h)},onError:a})})}else{var x=m.hitch(this,arguments.callee);b.loadItem({item:q,
onItem:function(k){x(k,c,a)},onError:a})}},isItem:function(q){return this.store.isItem(q)},fetchItemByIdentity:function(q){this.store.fetchItemByIdentity(q)},getIdentity:function(q){return this.store.getIdentity(q)},getLabel:function(q){return this.labelAttr?this.store.getValue(q,this.labelAttr):this.store.getLabel(q)},newItem:function(q,c,a){var b={parent:c,attribute:this.childrenAttrs[0]},h;this.newItemIdAttr&&q[this.newItemIdAttr]?this.fetchItemByIdentity({identity:q[this.newItemIdAttr],scope:this,
onItem:function(l){l?this.pasteItem(l,null,c,!0,a):(h=this.store.newItem(q,b))&&void 0!=a&&this.pasteItem(h,c,c,!1,a)}}):(h=this.store.newItem(q,b))&&void 0!=a&&this.pasteItem(h,c,c,!1,a)},pasteItem:function(q,c,a,b,h){var l=this.store,u=this.childrenAttrs[0];c&&r.forEach(this.childrenAttrs,function(x){if(l.containsValue(c,x,q)){if(!b){var k=r.filter(l.getValues(c,x),function(w){return w!=q});l.setValues(c,x,k)}u=x}});if(a)if("number"==typeof h){var e=l.getValues(a,u).slice();e.splice(h,0,q);l.setValues(a,
u,e)}else l.setValues(a,u,l.getValues(a,u).concat(q))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(q,c){c&&this.getChildren(c.item,m.hitch(this,function(a){this.onChildrenChange(c.item,a)}))},onDeleteItem:function(q){this.onDelete(q)},onSetItem:function(q,c){if(-1!=r.indexOf(this.childrenAttrs,c))this.getChildren(q,m.hitch(this,function(a){this.onChildrenChange(q,a)}));else this.onChange(q)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(r,y,A,m,q){return y("dijit.tree.ForestStoreModel",q,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(c){this.root={store:this,root:!0,id:c.rootId,label:c.rootLabel,children:c.rootChildren}},mayHaveChildren:function(c){return c===this.root||this.inherited(arguments)},getChildren:function(c,a,b){c===this.root?this.root.children?a(this.root.children):this.store.fetch({query:this.query,onComplete:m.hitch(this,
function(h){this.root.children=h;a(h)}),onError:b}):this.inherited(arguments)},isItem:function(c){return c===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(c){if(c.identity==this.root.id){var a=c.scope||A.global;c.onItem&&c.onItem.call(a,this.root)}else this.inherited(arguments)},getIdentity:function(c){return c===this.root?this.root.id:this.inherited(arguments)},getLabel:function(c){return c===this.root?this.root.label:this.inherited(arguments)},newItem:function(c,a,b){return a===
this.root?(this.onNewRootItem(c),this.store.newItem(c)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(c,a,b,h,l){if(a===this.root&&!h)this.onLeaveRoot(c);this.inherited(arguments,[c,a===this.root?null:a,b===this.root?null:b,h,l]);if(b===this.root)this.onAddToRoot(c)},onAddToRoot:function(c){console.log(this,": item ",c," added to root")},onLeaveRoot:function(c){console.log(this,": item ",c," removed from root")},_requeryTop:function(){var c=this.root.children||[];this.store.fetch({query:this.query,
onComplete:m.hitch(this,function(a){this.root.children=a;if(c.length!=a.length||r.some(c,function(b,h){return a[h]!=b}))this.onChildrenChange(this.root,a)})})},onNewItem:function(c,a){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(c){-1!=r.indexOf(this.root.children,c)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(c,a,b,h){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),
function(r,y,A,m,q,c,a,b,h,l,u){return y("dijit.tree._dndSelector",u,{constructor:function(){this.selection={};this.anchor=null;this.events.push(b(this.tree.domNode,h.press,m.hitch(this,"onMouseDown")),b(this.tree.domNode,h.release,m.hitch(this,"onMouseUp")),b(this.tree.domNode,h.move,m.hitch(this,"onMouseMove")),b(this.tree.domNode,l.press,m.hitch(this,"onClickPress")),b(this.tree.domNode,l.release,m.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var e=[],x=this.selection,
k;for(k in x)e.push(x[k]);return e},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(e,x){this.setSelection(this.getSelectedTreeNodes().concat([e]));x&&(this.anchor=e);return e},removeTreeNode:function(e){var x=r.filter(this.getSelectedTreeNodes(),function(k){return!c.isDescendant(k.domNode,e.domNode)});this.setSelection(x);return e},isTreeNodeSelected:function(e){return e.id&&!!this.selection[e.id]},
setSelection:function(e){var x=this.getSelectedTreeNodes();r.forEach(this._setDifference(x,e),m.hitch(this,function(k){k.setSelected(!1);this.anchor==k&&delete this.anchor;delete this.selection[k.id]}));r.forEach(this._setDifference(e,x),m.hitch(this,function(k){k.setSelected(!0);this.selection[k.id]=k}));this._updateSelectionProperties()},_setDifference:function(e,x){r.forEach(x,function(k){k.__exclude__=!0});e=r.filter(e,function(k){return!k.__exclude__});r.forEach(x,function(k){delete k.__exclude__});
return e},_updateSelectionProperties:function(){var e=this.getSelectedTreeNodes(),x=[],k=[];r.forEach(e,function(w){var d=w.getTreePath();k.push(w);x.push(d)},this);e=r.map(k,function(w){return w.item});this.tree._set("paths",x);this.tree._set("path",x[0]||[]);this.tree._set("selectedNodes",k);this.tree._set("selectedNode",k[0]||null);this.tree._set("selectedItems",e);this.tree._set("selectedItem",e[0]||null)},onClickPress:function(e){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(e.target,
this.current))){"mousedown"==e.type&&a.isLeft(e)&&e.preventDefault();var x="keydown"==e.type?this.tree.focusedChild:this.current;if(x){var k=q.getCopyKeyState(e),w=x.id;this.singular||e.shiftKey||!this.selection[w]?(this._doDeselect=!1,this.userSelect(x,k,e.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(e){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==e.type?this.tree.focusedChild:this.current,q.getCopyKeyState(e),e.shiftKey))},onMouseMove:function(){this._doDeselect=
!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(e,x){if(e===x)return 0;if("sourceIndex"in document.documentElement)return e.sourceIndex-x.sourceIndex;if("compareDocumentPosition"in document.documentElement)return e.compareDocumentPosition(x)&2?1:-1;if(document.createRange){var k=doc.createRange();k.setStartBefore(e);e=doc.createRange();e.setStartBefore(x);return k.compareBoundaryPoints(k.END_TO_END,e)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");
},userSelect:function(e,x,k){if(this.singular)this.anchor==e&&x?this.selectNone():(this.setSelection([e]),this.anchor=e);else if(k&&this.anchor){x=this._compareNodes(this.anchor.rowNode,e.rowNode);k=this.anchor;0>x?x=k:(x=e,e=k);for(k=[];x!=e;)k.push(x),x=this.tree._getNext(x);k.push(e);this.setSelection(k)}else this.selection[e.id]&&x?this.removeTreeNode(e):x?this.addTreeNode(e,!0):(this.setSelection([e]),this.anchor=e)},getItem:function(e){return{data:this.selection[e],type:["treeNode"]}},forInSelectedItems:function(e,
x){x=x||A.global;for(var k in this.selection)e.call(x,this.getItem(k),k,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(r,y,A,m,q,c){return y("dijit.tree._dndContainer",null,{constructor:function(a,b){this.tree=a;this.node=a.domNode;m.mixin(this,b);this.containerState="";A.add(this.node,"dojoDndContainer");this.events=[q(this.node,c.enter,m.hitch(this,"onOverEvent")),q(this.node,c.leave,
m.hitch(this,"onOutEvent")),r.after(this.tree,"_onNodeMouseEnter",m.hitch(this,"onMouseOver"),!0),r.after(this.tree,"_onNodeMouseLeave",m.hitch(this,"onMouseOut"),!0),q(this.node,"dragstart, selectstart",function(h){h.preventDefault()})]},destroy:function(){for(var a;a=this.events.pop();)a.remove();this.node=this.parent=null},onMouseOver:function(a){this.current=a},onMouseOut:function(){this.current=null},_changeState:function(a,b){var h="dojoDnd"+a;a=a.toLowerCase()+"State";A.replace(this.node,h+
b,h+this[a]);this[a]=b},_addItemClass:function(a,b){A.add(a,"dojoDndItem"+b)},_removeItemClass:function(a,b){A.remove(a,"dojoDndItem"+b)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/Deferred","jimu/utils","jimu/ServiceBrowserRule"],function(r,y,A,m,q){var c={combineRules:function(a){var b=new q;y.forEach(a,function(h){y.forEach(h.leafTypes,
function(l){0>b.leafTypes.indexOf(l)&&b.leafTypes.push(l)});y.forEach(h.serviceTypes,function(l){0>b.serviceTypes.indexOf(l)&&b.serviceTypes.push(l)})});b.getMatchedRule=function(h){var l=null;y.some(a,function(u){return u.isUrlContainsServiceType(h)?(l=u,!0):!1});return l};b.getItem=function(h){var l=null;return l=(l=b.getMatchedRule(h))?l.getItem(h):b.defaultGetItem(h)};b.getSubItemUrls=function(h){var l=null;return l=(l=b.getMatchedRule(h))?l.getSubItemUrls(h):b.defaultGetSubItemUrls(h)};b.getIconImageName=
function(h,l){var u="";if(h.url){var e=b.getMatchedRule(h.url);e&&"function"===typeof e.getIconImageName&&(u=e.getIconImageName(h,l))}return u};return b},getFeaturelayerServiceBrowserRule:function(a,b,h){a=r.clone(a);var l=["point","polyline","polygon"];r.isArrayLike(a)&&0<a.length?(a=y.filter(a,function(u){return 0<=l.indexOf(u)}),0===a.length&&(a=l)):a=l;return c._getFeaturelayerServiceBrowserRule(a,b,h)},_getFeaturelayerServiceBrowserRule:function(a,b,h){return new q({types:a,leafTypes:["Feature Layer",
"Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",getItem:function(l){var u=new A;this.isUrlEndWithServiceType(l,this.serviceTypes)?u=this.defaultGetItem(l):this.getRestInfo(l).then(r.hitch(this,function(e){e=this._getItemByLayerDefinition(l,e);u.resolve(e)}),r.hitch(this,function(e){u.reject(e)}));return u},getSubItemUrls:function(l){var u=new A;return u=this.isUrlEndWithServiceType(l)?this._getSubUrlsByServiceUrl(l):
this._getSubUrlsByGroupUrl(l)},getIconImageName:function(l,u){var e="";"MapServer"===l.type||"FeatureServer"===l.type?e=u?"mapserver_open.png":"mapserver_close.png":l.type===this._groupLayerType?e=u?"group_layer2.png":"group_layer1.png":l.type===this._featureLayerType?(l=m.getTypeByGeometryType(l.definition&&l.definition.geometryType),"point"===l?e="point_layer1.png":"polyline"===l?e="line_layer1.png":"polygon"===l&&(e="polygon_layer1.png")):l.type===this._tableType?e="table.png":"root"===l.type&&
this._currentUrl&&y.some(this.serviceTypes,r.hitch(this,function(x){return m.isStringEndWith(this._currentUrl,"/"+x)}))&&(e=u?"mapserver_open.png":"mapserver_close.png");return e},_getSubUrlsByServiceUrl:function(l){var u=new A;this.getRestInfo(l).then(r.hitch(this,function(e){var x=[];y.forEach(e.layers,r.hitch(this,function(k){0<=k.parentLayerId||x.push(l+"/"+k.id)}));h&&y.forEach(e.tables,r.hitch(this,function(k){0<=k.parentLayerId||x.push(l+"/"+k.id)}));u.resolve(x)}),r.hitch(this,function(e){u.reject(e)}));
return u},_getSubUrlsByGroupUrl:function(l){var u=new A;this.getRestInfo(l).then(r.hitch(this,function(e){var x=[];if(e.type===this._groupLayerType){var k=this._getServiceUrlByLayerUrl(l);x=y.map(e.subLayers||[],r.hitch(this,function(w){return k+"/"+w.id}))}u.resolve(x)}),r.hitch(this,function(e){u.reject(e)}));return u},_getItemByLayerDefinition:function(l,u){var e=null,x=u.type;if(x===this._groupLayerType)e={name:u.name,type:x,url:l,definition:u};else if(x===this._featureLayerType||x===this._tableType){var k=
!1;x===this._featureLayerType?k=this._validateEsriGeometryType(u.geometryType):x===this._tableType&&(k=!0);k&&(k=!1,(k=b?m.isFeaturelayerUrlSupportQuery(l,u.capabilities):!0)&&(e={name:u.name,type:x,url:l,definition:u}))}return e},_validateEsriGeometryType:function(l){l=m.getTypeByGeometryType(l);return 0<=this.types.indexOf(l)},_getServiceUrlByLayerUrl:function(l){for(var u="",e=0;e<this.serviceTypes.length;e++){var x=this.serviceTypes[e].toLowerCase(),k=l.toLowerCase().lastIndexOf("/"+x+"/");if(0<=
k){u=l.slice(0,k+x.length+1);break}}return u}})},getGeocodeServiceBrowserRule:function(){return new q({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},getGpServiceBrowserRule:function(){return new q({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(a){var b=new A;this.isUrlEndWithServiceType(a)?b=this.defaultGetItem(a):this.getRestInfo(a).then(r.hitch(this,function(h){b.resolve({name:h.displayName||h.name,type:"GPTask",url:a,definition:h})}),r.hitch(this,function(h){b.reject(h)}));
return b},getSubItemUrls:function(a){var b=new A;this.isUrlEndWithServiceType(a)?this.getRestInfo(a).then(r.hitch(this,function(h){h=y.map(h.tasks||[],r.hitch(this,function(l){return a+"/"+l}));b.resolve(h)}),r.hitch(this,function(h){b.reject(h)})):b.resolve([]);return b},getIconImageName:function(a,b){b="";"GPServer"===a.type?b="toolbox.png":"GPTask"===a.type&&(b="tool.png");return b}})},getImageServiceBrowserRule:function(a){return new q({leafTypes:["ImageServer"],serviceTypes:["ImageServer"],getItem:function(b){var h=
new A;this.isUrlEndWithServiceType(b)?this.defaultGetItem(b).then(r.hitch(this,function(l){a?m.isImageServiceSupportQuery(l.definition.capabilities)?h.resolve(l):h.resolve(null):h.resolve(l)}),r.hitch(this,function(l){h.reject(l)})):h.resolve(null);return h},getIconImageName:function(b,h){h="";"ImageServer"===b.type&&(h="image_layer.png");return h}})},getQueryableServiceBrowserRule:function(){var a=c.getFeaturelayerServiceBrowserRule(["point","polyline","polygon"],!0,!0),b=c.getImageServiceBrowserRule(!0);
return c.combineRules([a,b])}};return c})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),function(r,y,A,m,q,c,a){return r([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(b){y.mixin(this,b);y.isArrayLike(this.leafTypes)||(this.leafTypes=[]);y.isArrayLike(this.serviceTypes)||(this.serviceTypes=[])},getItem:function(b){return this.defaultGetItem(b)},getSubItemUrls:function(b){return this.defaultGetSubItemUrls(b)},
getIconImageName:function(b,h){return""},defaultGetItem:function(b){var h=new m;b=b.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(b)){var l=b.split("/"),u=l[l.length-1],e=l[l.length-2];this.getRestInfo(b).then(y.hitch(this,function(x){h.resolve({name:e,type:u,url:b,definition:x})}),y.hitch(this,function(x){console.error(x);h.reject({errorCode:"NETWORK_ERROR",error:x})}))}else h.resolve(null);return h},defaultGetSubItemUrls:function(b){b=new m;b.resolve([]);return b},getRestInfo:function(b){var h=
new m;b=b.replace(/\/*$/g,"");var l=this._restInfoCache[b];if(l)h.resolve(l);else{l={url:b,content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4};var u=a.findCredential(b);u&&u.token&&(l.content.token=u.token);c(l).then(y.hitch(this,function(e){this._restInfoCache[b]=e;h.resolve(e)}),function(e){h.reject(e)})}return h},isServiceTypeSupported:function(b){b=b.toLowerCase();return A.some(this.serviceTypes,y.hitch(this,function(h){return h.toLowerCase()===b}))},isUrlEndWithServiceType:function(b){return A.some(this.serviceTypes,
y.hitch(this,function(h){return q.isStringEndWith(b,"/"+h)}))},isUrlContainsServiceType:function(b){b=b.toLowerCase();return A.some(this.serviceTypes,y.hitch(this,function(h){h=h.toLowerCase();return 0<=b.indexOf("/"+h)}))}})})},"widgets/PublicNotification/setting/QuerySourceSetting":function(){define("dojo/_base/declare dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./QuerySourceSetting.html dojo/_base/lang dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented jimu/dijit/_FeaturelayerSourcePopup jimu/portalUrlUtils esri/request esri/lang jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox jimu/dijit/LoadingShelter dijit/form/ValidationTextBox dojo/NodeList-data".split(" "),
function(r,y,A,m,q,c,a,b,h,l,u,e,x,k,w,d,n,p,B){return r([A,m,q,e],{baseClass:"jimu-widget-search-query-source-setting",templateString:c,nls:null,appConfig:null,map:null,tr:null,config:null,fieldsPopup:null,_layerDefinition:null,_fieldsCheckBox:null,_layerId:null,_suggestible:!1,_clickSet:!1,_defaultZoomScale:null,postCreate:function(){this.inherited(arguments);this.zoomScale.set("placeHolder",window.jimuNls.common.defaults);this.exactMatch=new B({checked:!1,label:this.nls.exactMatch},this.exactMatch);
this.searchInCurrentMapExtent=new B({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this._layerDefinition={};this._fieldsCheckBox=[];this._setMessageNodeContent("")},setDefinition:function(g){this._layerDefinition=g||{}},getDefinition:function(){return this._layerDefinition},setRelatedTr:function(g){this.tr=g},getRelatedTr:function(){return this.tr},setConfig:function(g){if("[object Object]"===Object.prototype.toString.call(g)){var v=g.url;v&&(this.config=g,this.shelter.show(),
this._layerDefinition.url!==v?this._getDefinitionFromRemote(v).then(a.hitch(this,function(C){v&&C&&"error"!==C.type?(this._layerDefinition=C,this._layerDefinition.url=v,this._setSourceItems(),this._setMessageNodeContent("")):v&&C&&"error"===C.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(d.substitute({URL:C.url},a.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setMessageNodeContent(""),this._setSourceItems(),this.shelter.hide()))}},isValidConfig:function(){var g=
this.getConfig();return g.url&&g.name&&g.displayField?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.sourceUrl);this._showValidationErrorTip(this.sourceName)},getConfig:function(){return{layerId:this._layerId,url:this.sourceUrl.get("value"),name:n.stripHTML(this.sourceName.get("value")),placeholder:n.stripHTML(this.placeholder.get("value")),searchFields:this._getSearchFields(),displayField:this.displayField.get("value"),exactMatch:this.exactMatch.getValue(),searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,
zoomScale:this.zoomScale.get("value")||this._defaultZoomScale,maxSuggestions:this.maxSuggestions.get("value")||6,maxResults:this.maxResults.get("value")||6,type:"query"}},destroy:function(){this.inherited(arguments);this.fieldsPopup&&(this.fieldsPopup.close(),this.fieldsPopup=null);this.tr=this.nls=this.config=this._layerDefinition=null},_onSourceNameBlur:function(){this.sourceName.set("value",n.stripHTML(this.sourceName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",n.stripHTML(this.placeholder.get("value")))},
_disableSourceItems:function(){this.sourceName.set("disabled",!0);this.placeholder.set("disabled",!0);this.searchFields.set("disabled",!0);y.setStyle(this.fieldsSelectorNode,"display","none");this.displayField.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0);this.zoomScale.set("disabled",!0)},_enableSourceItems:function(){this.sourceName.set("disabled",!1);this.placeholder.set("disabled",!1);this.searchFields.set("disabled",!1);y.setStyle(this.fieldsSelectorNode,
"display","inline-block");this.displayField.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",!1);this.zoomScale.set("disabled",!1)},_setSourceItems:function(){this.sourceUrl.set("value",this.config.url);this.sourceName.set("value",n.stripHTML(this.config.name||""));this.placeholder.set("value",n.stripHTML(this.config.placeholder||""));this._setSearchFields2Node();this.searchFields.set("value",this._getSearchFieldsAlias());this._setDisplayFieldOptions();this.displayField.set("value",
this.config.displayField||"");this.exactMatch.setValue(!!this.config.exactMatch);this.searchInCurrentMapExtent.setValue(!!this.config.searchInCurrentMapExtent);this.zoomScale.set("value",this.config.zoomScale||this._defaultZoomScale);this.maxSuggestions.set("value",this.config.maxSuggestions||6);this.maxResults.set("value",this.config.maxResults||6);this._layerId=this.config.layerId;(this._suggestible=this._layerDefinition&&this._layerDefinition.advancedQueryCapabilities&&this._layerDefinition.advancedQueryCapabilities.supportsPagination)?
this._hideSuggestibleTips():this._showSuggestibleTips();this._enableSourceItems()},_getDefinitionFromRemote:function(g){var v=new u,C=w({url:g,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(C);C.then(a.hitch(this,function(z){v.resolve(z)}),a.hitch(this,function(z){console.error(z);v.resolve({type:"error",url:this._getRequestUrl(g)})}));return v.promise},_setMessageNodeContent:function(g,v){y.empty(this.messageNode);g.nodeType||(g=y.toDom(g));y.place(g,this.messageNode);
v?y.setStyle(this.messageTr,"display",""):y.setStyle(this.messageTr,"display","none")},_getRequestUrl:function(g){var v=window.location.protocol;return"http:"===v?k.setHttpProtocol(g):"https:"===v?k.setHttpsProtocol(g):g},_setSearchFields2Node:function(){var g=null,v=this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length;this.config&&this.config.searchFields&&0<this.config.searchFields.length||(g=[]);if(v){var C=this._layerDefinition.fields;g=b.filter(this.config.searchFields,
function(z){return b.some(C,function(G){return G.name===z})})}else g=this.config.searchFields;this.searchFields.set("_fields",g)},_setDisplayFieldOptions:function(){var g=[];this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length?g=b.map(this._layerDefinition.fields,function(v){return{label:v.alias||v.name||"",value:v.name||""}}):this.config&&this.config.displayField&&(g=[{label:this.config.displayField,value:this.config.displayField}]);this.displayField.set("options",
g)},_getSearchFieldsAlias:function(){var g=this._getSearchFields();if(!(g&&0<g.length))return"";if(this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length){for(var v=this._layerDefinition.fields,C=b.map(v,function(E){return E&&E.name}),z=[],G=0,F=g.length;G<F;G++){var D=C.indexOf(g[G]);-1<D&&z.push(v[D].alias)}return z.join(",")}return g.join(",")},_getSearchFields:function(){return this.searchFields.get("_fields")},_setSearchFields:function(g){this.searchFields.set("_fields",
g)},_onSetSourceClick:function(){this._clickSet=!0;this._openServiceChooser()},_openQuerySourceChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){var g=new x({titleLabel:this.nls.setLayerSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});h.once(g,"ok",a.hitch(this,function(v){g.close();this.setDefinition(v.definition||{});this.setConfig({layerId:v.layerInfo&&v.layerInfo.id||
null,url:v.url,name:v.name||"",placeholder:"",searchFields:[],displayField:this._layerDefinition.displayField||"",exactMatch:!1,zoomScale:this._defaultZoomScale,maxSuggestions:6,maxResults:6,type:"query"});g=null;this._setMessageNodeContent("");this._clickSet?this.emit("reselect-query-source-ok",v):this.emit("select-query-source-ok",v)}));h.once(g,"cancel",a.hitch(this,function(){g.close();g=null;this.emit("select-query-source-cancel")}))},_onFieldsSelectorClick:function(){var g=y.create("div",{style:{maxHeight:"480px"}}),
v=this._layerDefinition.fields;this._fieldsCheckBox=[];b.forEach(v,a.hitch(this,function(C,z){var G=new B({checked:this._isSearchable(C),label:C.alias||C.name});y.addClass(G.domNode,"fields-checkbox");y.addClass(G.labelNode,"jimu-ellipsis");y.setAttr(G.domNode,{title:C.alias||C.name});0===z%3&&(window.isRTL?y.setStyle(G.domNode,"marginRight",0):y.setStyle(G.domNode,"marginLeft",0));G.placeAt(g);l(G.domNode).data("fieldName",C.name);this._fieldsCheckBox.push(G)}));this.fieldsPopup=new p({titleLabel:this.nls.setSearchFields,
autoHeight:!0,content:g,container:window.jimuConfig.layoutId,width:640,maxHeight:600,buttons:[{label:this.nls.ok,onClick:a.hitch(this,"_onSearchFieldsOk")},{label:this.nls.cancel,classNames:["jimu-btn-vacation"]}],onClose:a.hitch(this,function(){this.fieldsPopup=null})});y.addClass(this.fieldsPopup.domNode,"jimu-widget-search-query-source-setting-fields")},_onSearchFieldsOk:function(){var g=[];b.forEach(this._fieldsCheckBox,function(v){if(v.getValue()){var C=l(v.domNode).data("fieldName");g.push(C[0]);
l(v.domNode).removeData()}});this._setSearchFields(g);this.searchFields.set("value",this._getSearchFieldsAlias());this.fieldsPopup.close()},_isSearchable:function(g){var v=this._getSearchFields();return b.some(v,a.hitch(this,function(C){return g.name===C}))},_showSuggestibleTips:function(){y.addClass(this.tipsNode,"source-tips-show");y.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){y.removeClass(this.tipsNode,"source-tips-show");y.setStyle(this.maxSuggestions.domNode,
"display","block")},_showValidationErrorTip:function(g){if(!g.validate()&&g.domNode&&g.focusNode){var v=g.get("disabled");v&&g.set("disabled",!1);g.focusNode.focus();setTimeout(a.hitch(this,function(){g.focusNode.blur();v&&g.set("disabled",!0);g=null}),100)}}})})},"jimu/dijit/_FeaturelayerSourcePopup":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/FeaturelayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),function(r,
y,A,m,q,c,a,b,h){return r([c,y],{width:830,height:560,titleLabel:"",dijitArgs:null,postCreate:function(){this.inherited(arguments);q.addClass(this.domNode,"jimu-featurelayer-source-popup");this._initFls();this._initLoading()},getSelectedRadioType:function(){return this.fls.getSelectedRadioType()},_initFls:function(){this.fls=new a(this.dijitArgs);this.fls.placeAt(this.contentContainerNode);this.fls.startup();this.own(A(this.fls,"ok",m.hitch(this,function(l){if(0!==l.length){var u=l[0];if(u.definition)try{u.definition.name=
u.name,u.definition.url=u.url,this.emit("ok",u)}catch(e){console.error(e)}else this.loading.show(),h({url:u.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(m.hitch(this,function(e){if(this.domNode){this.loading.hide();u.definition=e;try{u.definition.name=u.name,u.definition.url=u.url,this.emit("ok",u)}catch(x){console.error(x)}}}),m.hitch(this,function(e){console.error(e);this.domNode&&this.loading.hide()}))}})));this.own(A(this.fls,"cancel",m.hitch(this,function(){try{this.emit("cancel")}catch(l){console.error(l)}})))},
_initLoading:function(){this.loading=new b({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/FeaturelayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/RadioBtn jimu/dijit/_FeaturelayerChooserWithButtons jimu/dijit/FeaturelayerChooserFromPortal jimu/dijit/_FeaturelayerServiceChooserContent jimu/portalUrlUtils".split(" "),
function(r,y,A,m,q,c,a,b,h,l,u,e,x,k){return r([y,A,m,h],{templateString:q,baseClass:"jimu-layer-source jimu-featurelayer-source",declaredClass:"jimu.dijit.FeaturelayerSource",nls:null,multiple:!1,createMapResponse:null,portalUrl:null,layerChooserFromMap:null,postMixInProperties:function(){this.nls=window.jimuNls.featureLayerSource;this.portalUrl=k.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedRadioType:function(){if(this.mapRadio.checked)return"map";
if(this.portalRadio.checked)return"portal";if(this.urlRadio.checked)return"url"},getSelectedItems:function(){var w=[];this.mapRadio.checked?w=this.flcMap.getSelectedItems():this.portalRadio.checked?w=this.flcPortal.getSelectedItems():this.urlRadio.checked&&(w=this.flcUrl.getSelectedItems());return w},startup:function(){this.inherited(arguments);this.flcMap.startup();this.flcPortal.startup();this.flcUrl.startup()},_initSelf:function(){this._initRadios();this._createFeaturelayerChooserWithButtons();
this._createFeaturelayerChooserFromPortal();this._createFeaturelayerServiceChooserContent();this._onRadioClicked()},_createFeaturelayerChooserWithButtons:function(){this.flcMap=new u({style:{width:"100%",height:"100%"},multiple:this.multiple,createMapResponse:this.createMapResponse,onlyShowWebMapLayers:!0,layerChooserFromMap:this.layerChooserFromMap});this.flcMap.operationTip=this.nls.selectLayer;this.flcMap.placeAt(this.flcContainer);this.own(b(this.flcMap,"ok",c.hitch(this,function(w){w&&0<w.length&&
this.emit("ok",w)})));this.own(b(this.flcMap,"cancel",c.hitch(this,function(){this.emit("cancel")})))},_createFeaturelayerChooserFromPortal:function(){this.flcPortal=new e({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.flcPortal.operationTip=this.nls.chooseItem;this.flcPortal.placeAt(this.hflcContainer);this.own(b(this.flcPortal,"next",c.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseLayer;this._updateOperationTip()})));
this.own(b(this.flcPortal,"back",c.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(b(this.flcPortal,"ok",c.hitch(this,function(w){w&&0<w.length&&this.emit("ok",w)})));this.own(b(this.flcPortal,"cancel",c.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createFeaturelayerServiceChooserContent:function(){this.flcUrl=
new x({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.flcUrl.operationTip=this.nls.setServiceUrl;this.flcUrl.placeAt(this.flscContainer);this.own(b(this.flcUrl,"ok",c.hitch(this,function(w){w&&0<w.length&&this.emit("ok",w)})));this.own(b(this.flcUrl,"cancel",c.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var w="featureLayerSourceRadios_"+this._getRandomString(),d=c.hitch(this,this._onRadioClicked);this.mapRadio=new l({group:w,onStateChange:d,checked:!0});
this.mapRadio.placeAt(this.mapTd,"first");this.portalRadio=new l({group:w,onStateChange:d,checked:!1});this.portalRadio.placeAt(this.portalTd,"first");this.urlRadio=new l({group:w,onStateChange:d,checked:!1});this.urlRadio.placeAt(this.urlTd,"first");this.own(b(this.mapLabel,"click",c.hitch(this,function(){this.mapRadio.check()})));this.own(b(this.portalLabel,"click",c.hitch(this,function(){this.portalRadio.check()})));this.own(b(this.urlLabel,"click",c.hitch(this,function(){this.urlRadio.check()})))},
_getRandomString:function(){var w=Math.random().toString();return w=w.slice(2,w.length)},_onRadioClicked:function(){a.setStyle(this.flcContainer,"display","none");a.setStyle(this.hflcContainer,"display","none");a.setStyle(this.flscContainer,"display","none");this.mapRadio.checked?(a.setStyle(this.flcContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(a.setStyle(this.hflcContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):
this.urlRadio.checked&&(a.setStyle(this.flscContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=this.flcMap.operationTip:this.portalRadio.checked?this.operationTip.innerHTML=this.flcPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.flcUrl.operationTip)}})})},"jimu/dijit/_FeaturelayerChooserWithButtons":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/FeaturelayerChooserFromMap".split(" "),
function(r,y,A,m,q,c,a,b,h){return q([c,a,b,y],{baseClass:"jimu-layer-chooser-with-buttons jimu-feature-layer-chooser-with-buttons",declaredClass:"jimu.dijit.FeaturelayerChooserWithButtons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"chooser-container" data-dojo-attach-point\x3d"chooserContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-trailing-margin1 jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
layerChooserFromMap:null,constructor:function(l){this.options=l},postMixInProperties:function(){this.nls=A.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.layerChooser=this.layerChooserFromMap?this.layerChooserFromMap:new h(this.options);this.layerChooser.placeAt(this.chooserContainer);m.setStyle(this.layerChooser.domNode,{width:"100%",height:"100%"});this.own(r(this.layerChooser,"tree-click",A.hitch(this,function(){0<this.getSelectedItems().length?m.removeClass(this.btnOk,
"jimu-state-disabled"):m.addClass(this.btnOk,"jimu-state-disabled")})));this.own(r(this.btnOk,"click",A.hitch(this,function(){var l=this.getSelectedItems();0<l.length&&this.emit("ok",l)})));this.own(r(this.btnCancel,"click",A.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.layerChooser.getSelectedItems()},startup:function(){this.inherited(arguments);this.layerChooser.startup()}})})},"jimu/dijit/FeaturelayerChooserFromMap":function(){define(["dojo/_base/declare",
"dojo/Deferred","dojo/_base/html","dojo/_base/lang","./LayerChooserFromMap"],function(r,y,A,m,q){return r([q],{baseClass:"jimu-featurelayer-chooser-from-map",declaredClass:"jimu.dijit.FeaturelayerChooserFromMap",types:null,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,ignoredFeaturelayerIds:null,mustSupportStatistics:!1,ignoreVirtualLayer:!1,postMixInProperties:function(){this.inherited(arguments);this.ignoredFeaturelayerIds||(this.ignoredFeaturelayerIds=[]);this.basicFilter=m.hitch(this,
this.basicFilter);this.filter=q.createFeaturelayerFilter(this.types,this.showLayerFromFeatureSet,this.showTable,this.mustSupportStatistics);this.ignoreVirtualLayer&&(this.filter=q.andCombineFilters([this.filter,m.hitch(this,this._ignoreVirtualLayerFilter)]))},postCreate:function(){this.inherited(arguments);A.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},_ignoreVirtualLayerFilter:function(c){return c.getLayerType().then(function(a){return!("ArcGISDynamicMapServiceLayer"===a||"ArcGISTiledMapServiceLayer"===
a||"GroupLayer"===a)})},basicFilter:function(c){var a=new y;0<=this.ignoredFeaturelayerIds.indexOf(c.id)?a.resolve(!1):this.onlyShowVisible&&"Table"!==c.getLayerType()?a.resolve(c.isShowInMap()):a.resolve(!0);return a},getHandledItem:function(c){var a=this.inherited(arguments),b=c&&c.layerInfo;b=b&&b.layerObject;a.url=b&&b.url||"";return a}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(r,y,A,m,q,c,a,b,h,l,u,e,x,k,w,d,n,p){var B=A([m,q,c,y],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,onlyFilterCurrentLayerWhenAddItem:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);x.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new p({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=e.hitch(this,this.basicFilter);
this.filter=B.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(g){var v=new b;this.onlyShowVisible?v.resolve(g.isShowInMap()):v.resolve(!0);return v},filter:function(g){g=new b;g.resolve(!0);return g},getSelectedItems:function(){var g=this.tree.getSelectedItems();return k.map(g,e.hitch(this,function(v){return this.getHandledItem(v)}))},getAllItems:function(){var g=this.tree.getAllItems(),v=[];k.forEach(g,
e.hitch(this,function(C){"root"!==C.id&&(C=this.getHandledItem(C),v.push(C))}));return v},getHandledItem:function(g){return{name:g.name,layerInfo:g.layerInfo}},_isLeafItem:function(g){return g.isLeaf},setCreateMapResponse:function(g){this.createMapResponse=g;n.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(e.hitch(this,function(v){this.layerInfosObj=v;this.own(r(this.layerInfosObj,"layerInfosChanged",e.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&
this.own(r(this.layerInfosObj,"layerInfosIsShowInMapChanged",e.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(g,v){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(g){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(g){this._clear();x.setStyle(this.errorTipSection,"display","block");var v=[];this.onlyShowWebMapLayers?(v=g.getLayerInfoArrayOfWebmap(),
v=v.concat(g.getTableInfoArrayOfWebmap())):(v=g.getLayerInfoArray(),v=v.concat(g.getTableInfoArray()));0!==v.length&&(x.setStyle(this.errorTipSection,"display","none"),k.forEach(v,e.hitch(this,function(C){this._addDirectLayerInfo(C)})))},_addDirectLayerInfo:function(g){g&&g.getLayerObject().then(e.hitch(this,function(){this._addItem("root",g)}),e.hitch(this,function(v){console.error(v)}))},_clear:function(){var g=this._store.query({parent:"root"});k.forEach(g,e.hitch(this,function(v){v&&"root"!==
v.id&&this._store.remove(v.id)}))},_addItem:function(g,v){var C=null,z=v.getLayerType(),G=this.filter(v);u({layerType:z,valid:G}).then(e.hitch(this,function(F){if(F.valid){var D=e.hitch(this,function(H,I){this._id++;C={name:v.title||"",parent:g,layerInfo:v,type:F.layerType,layerClass:v.layerObject.declaredClass,id:this._id.toString(),isLeaf:H,hasChildren:I};this._store.add(C)}),E=v.getSubLayers(),O=0===E.length,J=!0;this.onlyFilterCurrentLayerWhenAddItem?(O&&(J=!1),D(O,J)):O?D(O,!1):(E=k.map(E,e.hitch(this,
function(H){return this.filter(H)})),u(E).then(e.hitch(this,function(H){(H=k.some(H,function(I){return I}))&&D(O,H)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var g=this._getRootItem();g=new a({data:[g],getChildren:function(v){return this.query({parent:v.id})}});this._store=new h(g);g=new l({store:this._store,query:{id:"root"},mayHaveChildren:e.hitch(this,this._mayHaveChildren)});this.tree=new d({multiple:this.multiple,
model:g,showRoot:!1,isLeafItem:e.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:e.hitch(this,function(v,C){"root"!==v.id&&this._onTreeOpen(v,C)}),onClick:e.hitch(this,function(v,C,z){this._onTreeClick(v,C,z);this.emit("tree-click",v,C,z)}),getIconStyle:e.hitch(this,function(v,C){var z=null;if(!v||"root"===v.id)return null;var G={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},F=window.location.protocol+"//"+window.location.host+
require.toUrl("jimu");if(v=this._getIconInfo(v,C).imageName)G.backgroundImage="url("+F+"/css/images/"+v+")",z=G;return z}),getIconClass:e.hitch(this,function(v,C){return this._getIconInfo(v,C).className}),getTooltip:e.hitch(this,function(v){return this.displayTooltipForTreeNode?v.layerInfo.title:""})});x.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(g){return g.hasChildren},_getIconInfo:function(g,v){var C="",z="";"ArcGISDynamicMapServiceLayer"===
g.type||"ArcGISTiledMapServiceLayer"===g.type?v?(C="mapserver_open.png",z="mapservice-layer-icon open"):(C="mapserver_close.png",z="mapservice-layer-icon close"):"GroupLayer"===g.type?v?(C="group_layer2.png",z="group-layer-icon open"):(C="group_layer1.png",z="group-layer-icon close"):"FeatureLayer"===g.type?(g=w.getTypeByGeometryType(g.layerInfo.layerObject.geometryType),"point"===g?(C="point_layer1.png",z="point-layer-icon"):"polyline"===g?(C="line_layer1.png",z="line-layer-icon"):"polygon"===g&&
(C="polygon_layer1.png",z="polygon-layer-icon")):"Table"===g.type?(C="table.png",z="table-icon"):"ArcGISImageServiceLayer"===g.type||"ArcGISImageServiceVectorLayer"===g.type?(C="image_layer.png",z="iamge-layer-icon"):v?(C="mapserver_open.png",z="mapservice-layer-icon open"):(C="mapserver_close.png",z="mapservice-layer-icon close");return{imageName:C,className:z}},_onTreeOpen:function(g,v){if("root"!==g.id){var C=[];v=[];C=g.layerInfo.getSubLayers();g.checked||(this.shelter.show(),v=k.map(C,e.hitch(this,
function(z){return z.getLayerObject()})),u(v).then(e.hitch(this,function(){this.domNode&&(k.forEach(C,e.hitch(this,function(z){this._addItem(g.id,z)})),g.checked=!0,this.shelter.hide())}),e.hitch(this,function(z){console.error(z);this.shelter.hide()})))}},_onTreeClick:function(g,v,C){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});B.createFilterByLayerType=function(g){e.isArrayLike(g)||(g=[]);return function(v){var C=
new b;if(0===g.length)C.resolve(!0);else{var z=[];v.traversal(function(G){z.push(G.getLayerType())});u(z).then(function(G){for(var F=0;F<G.length;F++)for(var D=0;D<g.length;D++)if(G[F]===g[D]){C.resolve(!0);return}C.resolve(!1)},function(G){console.error(G);C.reject(G)})}return C}};B.createFeaturelayerFilter=function(g,v,C,z){var G=["point","polyline","polygon"];g&&0<g.length?(g=k.filter(g,function(F){return 0<=G.indexOf(F)}),0===g.length&&(g=G)):g=G;return function(F){var D=F.getLayerType();F=F.getLayerObject();
return u({layerType:D,layerObject:F}).then(function(E){var O=E.layerType;E=E.layerObject;if("ArcGISDynamicMapServiceLayer"===O||"ArcGISTiledMapServiceLayer"===O||"GroupLayer"===O||"FeatureCollection"===O)return!0;if("FeatureLayer"===O){O=w.getTypeByGeometryType(E.geometryType);O=0<=k.indexOf(g,O);var J=B._shouldPassStatisticsCheck(z,E);return E.url?(E=w.isFeaturelayerUrlSupportQuery(E.url,E.capabilities),O&&E&&J):v&&O}return"Table"===O?(O=w.isFeaturelayerUrlSupportQuery(E.url,E.capabilities),E=B._shouldPassStatisticsCheck(z,
E),C&&O&&E):!1})}};B.createImageServiceLayerFilter=function(g,v){return function(C){var z=C.getLayerType();C=C.getLayerObject();return u({layerType:z,layerObject:C}).then(function(G){var F=G.layerType,D=G.layerObject;return"ArcGISImageServiceLayer"===F||"ArcGISImageServiceVectorLayer"===F?g?w.isImageServiceSupportQuery(G.layerObject.capabilities)?v?B._shouldPassStatisticsCheck(v,D):!0:!1:!0:!1})}};B._shouldPassStatisticsCheck=function(g,v){return g?(g=!1,g=v.advancedQueryCapabilities?!!v.advancedQueryCapabilities.supportsStatistics:
!!v.supportsStatistics):!0};B.createQueryableLayerFilter=function(g){var v=B.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,g);g=B.createImageServiceLayerFilter(!0,g);return B.orCombineFilters([v,g])};B.andCombineFilters=function(g){return B._combineFilters(g,!0)};B.orCombineFilters=function(g){return B._combineFilters(g,!1)};B._combineFilters=function(g,v){return function(C){var z=new b,G=k.map(g,function(F){return F(C)});u(G).then(function(F){var D=!1;D=v?k.every(F,function(E){return E}):
k.some(F,function(E){return E});z.resolve(D)},function(F){console.error(F);z.reject(F)});return z}};return B})},"jimu/dijit/FeaturelayerChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/FeaturelayerServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(r,y,A,m,q,c,a,b,h,l,u,e,x,k,w,d,n){return r([y,A,m,e],{templateString:q,declaredClass:"jimu.dijit.FeaturelayerChooserFromPortal",baseClass:"jimu-service-chooser-from-portal jimu-featurelayer-chooser-from-portal",_serviceBrowserDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=c.mixin({},window.jimuNls.common);this.nls=c.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal);this.portalUrl=d.getStandardPortalUrl(this.portalUrl);this.multiple=!0===this.multiple?
!0:!1},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},_initSelf:function(){this.selector=new k({portalUrl:this.portalUrl,itemTypes:["Feature Service","Map Service"],onlyShowOnlineFeaturedItems:!1});this.own(h(this.selector,"item-selected",c.hitch(this,this._onItemSelected)));this.own(h(this.selector,"none-item-selected",c.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);
this.selector.startup();this.serviceBrowser=new w({multiple:this.multiple});this.own(h(this.serviceBrowser,"tree-click",c.hitch(this,this._onServiceBrowserClicked)));this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup()},_onItemSelected:function(){a.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){a.addClass(this.btnNext,"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceBrowserDef&&!this._serviceBrowserDef.isFulfilled()&&
this._serviceBrowserDef.cancel();a.setStyle(this.btnOk,"display","none");a.setStyle(this.btnNext,"display","block");a.setStyle(this.btnBack,"display","none");a.addClass(this.btnOk,"jimu-state-disabled");a.setStyle(this.selectorContainer,"display","block");a.setStyle(this.serviceBrowserContainer,"display","none");this.serviceBrowser.reset();this.emit("back")},_onBtnOkClicked:function(){var p=this.getSelectedItems();0<p.length&&this.emit("ok",p)},_onBtnNextClicked:function(){var p=this.selector.getSelectedItem();
p&&(a.setStyle(this.btnNext,"display","none"),a.setStyle(this.btnBack,"display","block"),a.setStyle(this.btnOk,"display","block"),a.addClass(this.btnOk,"jimu-state-disabled"),a.setStyle(this.selectorContainer,"display","none"),a.setStyle(this.serviceBrowserContainer,"display","block"),this.serviceBrowser.reset(),this._serviceBrowserDef=this.serviceBrowser.setUrl(p.url||p.item),this._serviceBrowserDef.then(c.hitch(this,function(){this._serviceBrowserDef=null;this._setOkStateBySelectedItems()}),c.hitch(this,
function(){this._serviceBrowserDef=null})),this.emit("next"))},_setOkStateBySelectedItems:function(){0<this.serviceBrowser.getSelectedItems().length?a.removeClass(this.btnOk,"jimu-state-disabled"):a.addClass(this.btnOk,"jimu-state-disabled")},_onServiceBrowserClicked:function(){this._setOkStateBySelectedItems()},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on dojo/dom-style jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable jimu/dijit/BindLabelPropsMixin dijit/form/RadioButton".split(" "),
function(r,y,A,m,q,c,a,b,h,l,u,e,x,k,w,d,n,p,B,g,v,C,z,G,F){return r([A,m,q,F,a],{templateString:c,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,showMyContent:!0,showMyOrganization:!0,showMyGroups:!0,showPublic:!0,showOnlyEditableGroups:!1,postMixInProperties:function(){this.portalUrl=g.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";l.forEach(this.itemTypes,b.hitch(this,function(D,E){this._itemTypes+=
'"'+D+'"';E!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";l.forEach(this.typeKeywords,b.hitch(this,function(D,E){this._typeKeywords+='"'+D+'"';E!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var D=this._getPortalUrl();
this.portal=p.getPortal(D);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=n.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=n.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){var D={title:this.nls.myContent,content:this.mycontentTabNode},E={title:this.nls.myOrganization,content:this.organizationTabNode},
O={title:this.nls.myGroup,content:this.groupTabNode},J={title:this.nls.publicMap,content:this.publicTabNode};d.set(this.mycontentTabNode,"display","none");d.set(this.organizationTabNode,"display","none");d.set(this.groupTabNode,"display","none");d.set(this.publicTabNode,"display","none");var H=[];this.showMyContent&&(H.push(D),d.set(this.mycontentTabNode,"display","block"));this.showMyOrganization&&(H.push(E),d.set(this.organizationTabNode,"display","block"));this.showMyGroups&&(H.push(O),d.set(this.groupTabNode,
"display","block"));this.showPublic&&(H.push(J),d.set(this.publicTabNode,"display","block"));this.tab=new z({tabs:H},this.tabNode);this.own(w(this.tab,"tabChanged",b.hitch(this,function(I){u.setStyle(this.signinSection,"display","none");I!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){u.setStyle(this.signinSection,"display","none");var D=k(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",
this.domNode);B.userHaveSignInPortal(this._getPortalUrl())?D.style("display","block"):(D.style("display","none"),this._isPublicTabShow||u.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){var D=this._getPortalUrl();D=g.getServerByUrl(D);this.portalPublicRaido.set("disabled",!1);this.onlinePublicRaido.set("disabled",!1);this.portalPublicRaido.set("checked",!0);var E=!1;g.isArcGIScom(D)?(E=!0,this.portalPublicLabel.innerHTML="ArcGIS.com"):(this.portalPublicLabel.innerHTML=
D,E=this.showOnlineItems?!1:!0);E&&(this.onlinePublicRaido.set("disabled",!0),u.setStyle(this.onlinePublicRaido,"display","none"),u.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var D="esri_"+(h.locale&&h.locale.slice(0,2)||"en").toLowerCase(),E=l.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
b.hitch(this,function(J){return J!==D})),O="";l.forEach(E,b.hitch(this,function(J){O+=" -owner:"+J+" "}));E=" ";this.portal&&this.portal.user&&this.portal.user.orgId&&(E=" orgid:"+this.portal.user.orgId+" ");E=E+this._itemTypeQueryString+" AND access:public "+O+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:E});this._filterPublicPortalQuery=this._getQuery({q:E,basicQ:E});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(D){return b.mixin({start:1,num:16,f:"json"},D||{})},_getPortalUrl:function(){return g.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(w(this.publicPortalItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(w(this.publicOnlineItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(w(this.organizationItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(w(this.groupItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));
this.own(w(this.mycontentItemTable,"item-dom-clicked",b.hitch(this,this._onItemDomClicked)));this.own(w(this.publicPortalItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(w(this.publicOnlineItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(w(this.organizationItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(w(this.groupItemTable,"update",b.hitch(this,this._onItemTableUpdate)));this.own(w(this.mycontentItemTable,"update",b.hitch(this,this._onItemTableUpdate)));
var D=this._getPortalUrl();this.portalPublicRaido.get("disabled")||(this.publicPortalItemTable.set("portalUrl",D),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.get("disabled")||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",
this._filterPublicOnlineQuery))},_initPublic:function(){this.own(w(this.portalPublicRaido,"click",b.hitch(this,this._onPublicRaidoClicked)));this.own(w(this.onlinePublicRaido,"click",b.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.get("checked")?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.get("checked")&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},
_onPublicSearch:function(D){(D=D&&b.trim(D))?(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.get("checked")?(this._filterPublicPortalQuery.q=D+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.get("checked")&&(this._filterPublicOnlineQuery.q=D+" "+this._itemTypeQueryString+" AND access:public "+
this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(w(this.groupsSelect,"change",b.hitch(this,this._onGroupsSelectChange)));var D=g.getServerByUrl(this._getPortalUrl());g.isArcGIScom(D)&&(D="ArcGIS.com");B.userHaveSignInPortal(this._getPortalUrl())&&
this._onSignIn()},_onOrganizationSearch:function(D){if(D=D&&b.trim(D)){if(this._allOrganizationQuery){var E=this._allOrganizationQuery.q;E&&(this._filterOrganizationQuery.q=D+" "+E,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(D){if(D=D&&b.trim(D)){if(this._allMyContentQuery){var E=this._allMyContentQuery.q;E&&(this._filterMyContentQuery.q=D+" "+
E,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},_onGroupSearch:function(D){if(D=D&&b.trim(D)){if(this._allGroupQuery){var E=this._allGroupQuery.q;E&&(this._filterGroupQuery.q=D+" "+E,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=
!0;var D=this._getPortalUrl();p.getPortal(D).getUser().then(b.hitch(this,function(E){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(E),this._searchMyContent(E),this._searchGroups(E))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(D){this.organizationItemTable.clear();D=" orgid:"+D.orgId+
" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var E=this._getPortalUrl();this._allOrganizationQuery=this._getQuery({q:D});this._filterOrganizationQuery=this._getQuery({q:D});this.organizationItemTable.set("portalUrl",E);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(D){this.mycontentItemTable.clear();var E=this._getPortalUrl();D="owner:"+D.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;
this._allMyContentQuery=this._getQuery({q:D});this._filterMyContentQuery=this._getQuery({q:D});this.mycontentItemTable.set("portalUrl",E);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(D){this._resetGroupsSection();u.setStyle(this.groupsSection,"display","flex");D=D.getGroups();if(0<D.length){u.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();u.empty(this.groupsSelect);for(var E=0;E<D.length;E++){var O=D[E];u.create("option",
{value:O.id,innerHTML:O.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(D.length)},_resetGroupsSection:function(){u.setStyle(this.groupsSection,"display","none");u.empty(this.groupsSelect);u.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();u.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(D){0===D?u.setStyle(this.groupsSection,
"top","15px"):u.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var D=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===D)u.setStyle(this.groupSearch,"display","none"),this.groupItemTable.hide();else{u.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var E=this._getPortalUrl();D="group:"+D+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:D});this._filterGroupQuery=this._getQuery({q:D});
this.groupItemTable.set("portalUrl",E);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(D){var E=u.hasClass(D,"jimu-state-active");k(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");E&&u.addClass(D,"jimu-state-active");(D=this.getSelectedItem())?this.emit("item-selected",D):this.emit("none-item-selected")},getSelectedItem:function(){var D=null,E=k(".item.jimu-state-active",this.domNode);
0<E.length&&(D=b.mixin({},E[0].item));return D}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),function(r,y,A,m,q,c,a,b,h,l,u,e,x,k,w,d){return r([y,A,m,c],{templateString:q,declaredClass:"jimu.dijit.ItemTable",
baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"desktopapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=w.getStandardPortalUrl(this.portalUrl));
this.showAllItemsSection();this.searchAllItems()},show:function(){h.setStyle(this.domNode,"display","block")},hide:function(){h.setStyle(this.domNode,"display","none")},searchAllItems:function(n){this.showAllItemsSection();n&&(this.query=a.mixin({},n),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),k.getPortal(this.portalUrl).queryItems(this.query).then(a.hitch(this,function(p){this.domNode&&(this.allItemsShelter.hide(),
this.query.start=p.nextStart,this._createItems(p,this.allItemTbody))}),a.hitch(this,function(p){console.error(p);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(n){this.showFilterItemsSection();n&&(this.filteredQuery=a.clone(n),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&(this.filteredItemShelter.show(),k.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(a.hitch(this,function(p){this.domNode&&
(this.showFilterItemsSection(),n&&this.clearFilteredItemsSection(),this.filteredQuery.start=p.nextStart,this._createItems(p,this.filteredItemsTbody),this._filterItemCallback())}),a.hitch(this,function(p){console.error(p);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?(h.setStyle(this.filteredItemsTableDiv,"display","block"),h.setStyle(this.searchNoneTipSection,"display","none")):(h.setStyle(this.filteredItemsTableDiv,
"display","none"),h.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){h.empty(this.allItemTbody)},clearFilteredItemsSection:function(){h.empty(this.filteredItemsTbody)},showAllItemsSection:function(){h.setStyle(this.allItemsSection,"display","block");h.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){h.setStyle(this.allItemsSection,"display","none");
h.setStyle(this.filteredItemsSection,"display","block");h.setStyle(this.filteredItemsTableDiv,"display","block");h.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&this.searchFilteredItems()},_isScrollToBottom:function(n){return x.isScrollToBottom(n)},_createItems:function(n,p){n=n.results;var B=
b.map(this.types,a.hitch(this,function(D){return D.toLowerCase()}));n=b.filter(n,a.hitch(this,function(D){D=D.type&&D.type.toLowerCase()||"";return 0<=b.indexOf(B,D)}));if(0!==n.length){var g=u("td.empty",p),v;if(0<g.length){var C=Math.min(n.length,g.length),z=n.splice(0,C);for(v=0;v<C;v++){var G=g[v];var F=this._createItem(z[v]);h.place(F,G);h.removeClass(G,"empty")}}if(0!==n.length){g=Math.ceil(n.length/2);for(v=0;v<g;v++)for(F=h.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e"),
h.place(F,p),C=u("td",F),z=0;z<C.length;z++)G=C[z],(F=n[2*v+z])?(F=this._createItem(F),h.place(F,G)):h.addClass(G,"empty");this.emit("update")}}},_getItemCount:function(n){return u(".item",n).length},_createItem:function(n){var p=h.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
p.item=n;var B=u(".item-thumbnail",p)[0],g=u(".item-name",p)[0],v=u(".item-type-owner",p)[0],C=u(".item-date",p)[0],z=u(".item-details",p)[0],G=u(".none-thumbnail-tip",p)[0];if(!n.thumbnailUrl){var F=this._defaultThumbnail[n.type];F&&(n.thumbnailUrl=require.toUrl("jimu")+"/images/"+F)}n.thumbnailUrl?h.setStyle(B,"backgroundImage","url("+n.thumbnailUrl+")"):G.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(C=u(".item-info",p)[0],this.onCreateItemContent(n,C)):(g.innerHTML=
n.title,g.title=g.innerHTML,v.innerHTML=n.type+" by "+n.owner,v.title=v.innerHTML,B=new Date,B.setTime(n.modified),C.innerHTML=B.toLocaleString(),C.title=C.innerHTML,z.innerHTML=this.nls.moreDetails,z.href=n.detailsPageUrl||"#");return p},_onItemsTableClicked:function(n){var p=n.target||n.srcElement;n=null;h.hasClass(p,"item-thumbnail")?n=p.parentNode:h.hasClass(p,"none-thumbnail-tip")&&(n=p.parentNode.parentNode);n&&(p=h.hasClass(n,"jimu-state-active"),u(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
p?h.removeClass(n,"jimu-state-active"):h.addClass(n,"jimu-state-active"),this.emit("item-dom-clicked",n))},getSelectedItem:function(){var n=null,p=u(".item.jimu-state-active",this.domNode);0<p.length&&(n=a.mixin({},p[0].item));return n}})})},"jimu/dijit/FeaturelayerServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(r,y,A,m,q){return r([y],{baseClass:"jimu-featurelayer-service-browser",declaredClass:"jimu.dijit.FeaturelayerServiceBrowser",
url:"",multiple:!1,types:null,isSupportQuery:!0,postMixInProperties:function(){this.inherited(arguments);this.rule=q.getFeaturelayerServiceBrowserRule(this.types,this.isSupportQuery)},getSelectedItems:function(){var c=this.inherited(arguments);return c=m.map(c,A.hitch(this,function(a){return{name:a.name,url:a.url,definition:a.definition}}))}})})},"jimu/dijit/_FeaturelayerServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./FeaturelayerServiceBrowser"],
function(r,y,A){return r([y],{baseClass:"jimu-featurelayer-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/MapServer","http://myserver/arcgis/rest/services/myservice/FeatureServer"],_createServiceBrowser:function(m){return new A(m)}})})},"dojo/NodeList-data":function(){define(["./_base/kernel","./query","./_base/lang","./_base/array","./dom-attr"],function(r,y,A,m,q){var c=y.NodeList,
a={},b=0,h=function(e){var x=q.get(e,"data-dojo-dataid");x||(x="pid"+b++,q.set(e,"data-dojo-dataid",x));return x},l=r._nodeData=function(e,x,k){var w=h(e),d;a[w]||(a[w]={});if(1==arguments.length)return a[w];"string"==typeof x?2<arguments.length?a[w][x]=k:d=a[w][x]:d=A.mixin(a[w],x);return d},u=r._removeNodeData=function(e,x){e=h(e);a[e]&&(x?delete a[e][x]:delete a[e])};c._gcNodeData=r._gcNodeData=function(){var e=y("[data-dojo-dataid]").map(h),x;for(x in a)0>m.indexOf(e,x)&&delete a[x]};A.extend(c,
{data:c._adaptWithCondition(l,function(e){return 0===e.length||1==e.length&&"string"==typeof e[0]}),removeData:c._adaptAsForEach(u)});return c})},"widgets/PublicNotification/setting/SettingBoxedDivs":function(){define(["dojo/_base/declare","./settingComponents","./SettingObject"],function(r,y,A){return r(A,{constructor:function(m,q){this._mainDiv=y.container(null,null,q)}})})},"widgets/PublicNotification/setting/SettingDropdownLabeled":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/on",
"./settingComponents","./SettingObject"],function(r,y,A,m,q){return r(q,{_inputControl:null,_inputControlDiv:null,_inputControlOnChange:null,_disableNextOnChange:!1,constructor:function(c,a,b,h,l,u,e,x){c=[];e=m.dropdownCtl(null,"full-width",e);c.push(e.div);this._inputControl=e.ctl;this._inputControlDiv=e.div;this._inputControlOnChange=x;this.own(A(this._inputControl,"change",y.hitch(this,this._onChange)));u&&c.push(m.text("hint",u));this._mainDiv=m.container("flexbox "+(a||""),"minorTrailingHorizGap",
[m.container("inline-block "+(b?b:""),"",[m.text("static-text",l)]),m.container("inline-block "+(h?h:""),"minorTrailingVertGap",c)])},setValue:function(c){this._inputControl&&this._inputControl.set("value",c)},getValue:function(){return this._inputControl?this._inputControl.get("value"):null},setConfig:function(){this._inputControl&&this._config&&this._config!==this.getValue()&&(this._disableNextOnChange=!0,this.setValue(this._config))},getConfig:function(c,a){this._inputControl&&(this._config=this.getValue())},
setOptions:function(c){this._inputControl&&this._inputControl.destroy();this._inputControl=m.dropdown(this._inputControlDiv,"full-width",c,this._inputControlOnChange)},_onChange:function(c){this._disableNextOnChange?this._disableNextOnChange=!1:this._inputControlOnChange(c)}})})},"widgets/PublicNotification/setting/SettingFieldListLabeled":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query jimu/dijit/CheckBox jimu/dijit/Popup ./settingComponents ./SettingObject".split(" "),
function(r,y,A,m,q,c,a,b,h,l,u,e,x){return y(x,{_echoArea:null,_fieldMenuItems:[],_fieldsCheckBoxes:[],_fieldsPopup:null,_nls:null,_label:"",constructor:function(k,w,d,n,p,B,g,v){k=[];var C=[];this._nls=w;this._label=B;this._fieldMenuItems=v;this._echoArea=e.text("variable-width inline-block readOnlyTextField");C.push(this._echoArea);w=e.iconButton("edit-button",w.tooltips.openFieldSelector);this.own(b(w,"click",A.hitch(this,this._onFieldsSelectorClick)));C.push(w);k.push(e.container("full-width flexbox",
"minorTrailingHorizGap",C));g&&k.push(e.text("hint",g));this._mainDiv=e.container("flexbox "+(d||""),"minorTrailingHorizGap",[e.container("inline-block "+(n?n:""),"",[e.text("static-text",B)]),e.container("inline-block "+(p?p:""),"minorTrailingVertGap",k)])},setDisplay:function(k){this._echoArea&&(this._echoArea.innerHTML=Array.isArray(k)&&0<k.length?k.join(","):"")},setConfig:function(){var k=[];Array.isArray(this._config)&&0<this._config.length&&r.forEach(this._config,A.hitch(this,function(w){r.some(this._fieldMenuItems,
function(d){return w===d.value?(k.push(d.label),!0):!1})}));this.setDisplay(k)},setFieldList:function(k){this._fieldMenuItems=k},_onFieldsSelectorClick:function(){var k=c.create("div",{style:{maxHeight:"480px"}});this._fieldsCheckBoxes=[];r.forEach(this._fieldMenuItems,A.hitch(this,function(w,d){var n=new l({checked:this._arrayContains(this._config,w.value),label:w.label});q.add(n.domNode,"fields-checkbox");q.add(n.labelNode,"jimu-ellipsis");m.set(n.domNode,"title",w.label);0===d%3&&(window.isRTL?
a.set(n.domNode,"marginRight",0):a.set(n.domNode,"marginLeft",0));n.placeAt(k);h(n.domNode).data("fieldName",w.value);this._fieldsCheckBoxes.push(n)}));this._fieldsPopup=new u({titleLabel:this._label,autoHeight:!0,content:k,container:window.jimuConfig.layoutId,width:640,maxHeight:600,buttons:[{label:jimuNls.common.ok,onClick:A.hitch(this,"_onSearchFieldsOk")},{label:jimuNls.common.cancel,classNames:["jimu-btn-vacation"]}],onClose:A.hitch(this,function(){this._fieldsPopup=null})});q.add(this._fieldsPopup.domNode,
"jimu-widget-public-notification-setting-fields")},_arrayContains:function(k,w){return r.some(k,function(d){return d===w})},_onSearchFieldsOk:function(){var k=[],w=[];r.forEach(this._fieldsCheckBoxes,function(d){if(d.getValue()){var n=h(d.domNode).data("fieldName");k.push(n[0]);h(d.domNode).removeData();w.push(d.label)}});this._config=k;this.setDisplay(w);this._fieldsPopup.close()}})})},"widgets/PublicNotification/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css",
"dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan title\x3d"${nls.example}:"\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/PublicNotification/setting/QuerySourceSetting.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"source-url-section"\x3e\r\n    \x3ctable class\x3d"source-table"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd class\x3d"first"\x3e\r\n            \x3cspan class\x3d"source-label"\x3e${nls.layerSource}\x3c/span\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"second"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"sourceUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n          \x3ctd class\x3d"third"\x3e\r\n            \x3cspan title\x3d"${nls.set}" class\x3d"jimu-btn" data-dojo-attach-event\x3d"click:_onSetSourceClick"\x3e${nls.set}\x3c/span\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3ctd class\x3d"first"\x3e\x3c/td\x3e\r\n          \x3ctd class\x3d"second" colspan\x3d"2"\x3e\r\n            \x3cspan data-dojo-attach-point\x3d"messageNode" class\x3d"tip error-message"\x3e\x3c/span\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"source-details-section"\x3e\r\n    \x3ctable class\x3d"source-table"\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d"first"\x3e\r\n          \x3cspan class\x3d"source-label"\x3e${nls.name}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d"second"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"sourceName" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-event\x3d"Blur:_onSourceNameBlur" data-dojo-props\x3d"trim:true,required:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d"first"\x3e\r\n          \x3cspan class\x3d"source-label"\x3e${nls.placeholder}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d"second"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"placeholder" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-event\x3d"Blur:_onPlaceholderBlur" data-dojo-props\x3d"trim:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d"first"\x3e\r\n          \x3cspan class\x3d"source-label"\x3e${nls.searchFields}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d"second"\x3e\r\n          \x3cdiv class\x3d"search-fields"\x3e\r\n            \x3c!-- \x3cspan class\x3d"fields jimu-float-leading" data-dojo-attach-point\x3d"fieldsNode"\x3e\x3c/span\x3e --\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"searchFields" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'95%\'}"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"search-fields-selector jimu-float-trailing" data-dojo-attach-point\x3d"fieldsSelectorNode" data-dojo-attach-event\x3d"click:_onFieldsSelectorClick"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d"first"\x3e\r\n          \x3cspan class\x3d"source-label"\x3e${nls.displayField}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d"second"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"displayField" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d"first"\x3e\r\n          \x3cspan class\x3d"source-label"\x3e${nls.maxSuggestions}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d"second"\x3e\r\n          \x3cdiv class\x3d"source-tips" title\x3d"${nls.searchLayerTips}" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n            \x3cem\x3e${nls.searchLayerTips}\x3c/em\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd class\x3d"first"\x3e\r\n          \x3cspan class\x3d"source-label"\x3e${nls.maxResults}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d"second"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr data-dojo-attach-point\x3d"zoomScaleTr"\x3e\r\n        \x3ctd class\x3d"first"\x3e\r\n          \x3cspan class\x3d"source-label"\x3e${nls.zoomScale}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd class\x3d"second"\x3e\r\n          \x3cspan class\x3d"jimu-float-leading" style\x3d"line-height:30px;"\x3e1: \x3c/span\x3e\r\n          \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"zoomScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'}"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/table\x3e\r\n    \x3ctable class\x3d"source-table"\x3e\r\n      \x3ctbody\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd class\x3d"first"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"exactMatch"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n        \x3ctr\x3e\r\n          \x3ctd class\x3d"first"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n          \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n      \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:jimu/dijit/templates/FeaturelayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"map-td" nowrap data-dojo-attach-point\x3d"mapTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"portal-td" nowrap data-dojo-attach-point\x3d"portalTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"url-td" nowrap data-dojo-attach-point\x3d"urlTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flcContainer" class\x3d"dijit-container map-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container portal-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container url-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ItemSelector.html":'\r\n\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cdiv\x3e${nls.groups}:\x3c/div\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cfieldset id\x3d"publicSearchRaido"\x3e\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" data-dojo-type\x3d"dijit/form/RadioButton" \r\n\t\t\t\t\t\t\tdata-label-id\x3d"portalPublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading portal-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" data-label-for\x3d"portalPublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" data-dojo-type\x3d"dijit/form/RadioButton"\r\n\t\t\t\t\t\t\tdata-label-id\x3d"onlinePublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading online-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" data-label-for\x3d"onlinePublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\t\x3c/fieldset\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/PublicNotification/setting/Setting.html":'\x3cdiv data-dojo-attach-point\x3d"mainContainer" class\x3d"main-container"\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"tabsContainer" class\x3d"full-height"\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/PublicNotification/setting/css/style.css":'.jimu-widget-public-notification-setting .addTextButton-button {margin: 8px 0; display: inline-block; position: relative; padding-left: 22px; color: #518dca; background: url("images/add_icon.png") no-repeat left; cursor: pointer;}.jimu-rtl .jimu-widget-public-notification-setting .addTextButton-button {padding-left: 0; padding-right: 22px; background-position: right;}.jimu-widget-public-notification-setting .addTextButton-button .addTextButton-menu {position: absolute; display: none; list-style-type: none; top: 16px; left: 0; margin: 0; padding: 0; background: #fafafa; color: #7989a0; z-index: 999;}.jimu-rtl .jimu-widget-public-notification-setting .addTextButton-button .addTextButton-menu {right: 0; left: auto;}.jimu-widget-public-notification-setting .addTextButton-button:hover .addTextButton-menu {display: inline-block;}.jimu-widget-public-notification-setting .addTextButton-menu .addTextButton-item {white-space: nowrap; height: 30px; padding: 0 25px; line-height: 30px;}.jimu-widget-public-notification-setting .addTextButton-menu .addTextButton-item:hover {background: #edf2f5; color: #15a4fa;}.jimu-widget-public-notification-setting .fieldset {height: auto; width: 100%; border: 1px solid #a0acbf; border-radius: 5px; color: #596679; min-width: 0px;}.jimu-ltr .jimu-widget-public-notification-setting .fieldsetLegend {margin-left: 20px;}.jimu-rtl .jimu-widget-public-notification-setting .fieldsetLegend {margin-right: 20px;}.jimu-widget-public-notification-setting .fieldsetMainContainer {padding: 8px;}.jimu-widget-public-notification-setting.main-container {width: 100%; height: 100%; overflow: hidden; font-size: 14px;}.jimu-widget-public-notification-setting .jimu-viewstack {height: calc(100% - 42px);}.jimu-widget-public-notification-setting .view {overflow: auto;}.jimu-widget-public-notification-setting .tab-contents {padding: 10px 2px 1px 2px;}.jimu-widget-public-notification-setting .category-panel {width: 270px; overflow-y: auto; overflow-x: hidden;}.jimu-widget-public-notification-setting .details-panel {width: calc(100% - 290px); overflow-y: auto; overflow-x: hidden;}.jimu-widget-public-notification-setting .details-label {width: 120px; vertical-align: top;}.jimu-widget-public-notification-setting .details-value {width: calc(100% - 125px);}.jimu-widget-public-notification-setting .jimu-btn {line-height: 28px;}.jimu-ltr .jimu-widget-public-notification-setting .majorTrailingHorizGap {margin-right: 24px;}.jimu-rtl .jimu-widget-public-notification-setting .majorTrailingHorizGap {margin-left: 24px;}.jimu-ltr .jimu-widget-public-notification-setting .minorTrailingHorizGap {margin-right: 5px;}.jimu-rtl .jimu-widget-public-notification-setting .minorTrailingHorizGap {margin-left: 5px;}.jimu-widget-public-notification-setting .majorTrailingVertGap {margin-bottom: 12px;}.jimu-widget-public-notification-setting .minorTrailingVertGap {margin-bottom: 2px;}.jimu-widget-public-notification-setting .edit-button {background: url(images/edit_icon.png) no-repeat center; cursor: pointer; width: 20px; height: 30px; -webkit-flex-shrink: 0; flex-shrink: 0;}.jimu-widget-public-notification-setting .edit-button:hover {background-color: rgba(36, 181, 204, 0.4);}.jimu-widget-public-notification-setting .hint {font-size: 12px; font-style: italic; color: #999999; margin-top: 5px;}.jimu-widget-public-notification-setting .static-text {margin-top: 5px;}.jimu-ltr .jimu-widget-public-notification-setting .dijitNumberTextBox .dijitInputInner {text-align: left;}.jimu-rtl .jimu-widget-public-notification-setting .dijitNumberTextBox .dijitInputInner {text-align: right;}.jimu-widget-public-notification-setting .italic {font-style: italic;}.jimu-widget-public-notification-setting .full-width {width: 100%;}.jimu-widget-public-notification-setting .full-height {height: 100%;}.jimu-widget-public-notification-setting .half-width {width: 50%;}.jimu-widget-public-notification-setting .third-width {width: 33%;}.jimu-widget-public-notification-setting .two-thirds-width {width: 66%;}.jimu-ltr .jimu-widget-public-notification-setting .indented {padding-left: 22px;}.jimu-rtl .jimu-widget-public-notification-setting .indented {padding-right: 22px;}.jimu-widget-public-notification-setting .clear {clear: both;}.jimu-widget-public-notification-setting .inline-block {display: inline-block;}.jimu-widget-public-notification-setting .flexbox {display: -webkit-flex; display: flex;}.jimu-widget-public-notification-setting .variable-width {-webkit-flex-grow: 1; flex-grow: 1;}.jimu-widget-public-notification-setting .optionsTableHeaderHeight {margin-top: 36px;}.jimu-widget-public-notification-setting .hidden {visibility: hidden;}.jimu-widget-public-notification-setting .hiddenEmpty {display: none;}.jimu-widget-public-notification-setting .readOnlyTextField {border: solid #d9dde0 1px; padding: 5px 10px; min-height: 30px;}.jimu-widget-public-notification-setting-fields .fields-checkbox {width: 167px; margin-bottom: 20px; color: #596679; font-size: 14px; margin-left: 30px;}.jimu-widget-public-notification-setting-fields .fields-checkbox .label {width: 140px;}.jimu-rtl .jimu-widget-public-notification-setting-fields .fields-checkbox {margin-right: 30px; margin-left: auto;}.jimu-widget-public-notification-setting .wrapText {word-wrap: break-word; overflow-wrap: break-word;}.override-geocode-service-chooser-content {width: 580px !important; min-height: 150px !important;}.override-geocode-service-chooser-content .service-browser-container{display: none;}.jimu-widget-public-notification-setting .esriCTMarginZero {margin-bottom: 0px; color: #596679;}',
"*now":function(r){r(['dojo/i18n!*preload*widgets/PublicNotification/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/string jimu/BaseWidgetSetting jimu/dijit/Message jimu/dijit/TabContainer3 jimu/LayerInfos/LayerInfos ./convert ./SettingAddresseesBlock ./SettingBufferBlock ./SettingCheckbox ./SettingCheckboxLabeled ./SettingContainer ./SettingInputLabeled ./SettingLabelFormats ./SettingOptionsTable ./SettingSearchSourcesBlock ./SettingStaticText dojo/domReady!".split(" "),function(r,y,A,m,q,c,a,b,h,l,u,e,x,
k,w,d,n,p,B,g,v,C){return y([b],{baseClass:"jimu-widget-public-notification-setting",_descriptions:[],_guidance:null,_webmapFeatureLayers:[],useSelectionDrawToolsChk:null,postCreate:function(){this.inherited(arguments);u.getInstance(this.map,this.map.itemInfo).then(A.hitch(this,function(z){this._webmapFeatureLayers=this._getWebmapFeatureLayers(z);this._descriptions=[];this._descriptions.push(this._createSearchSourceSettings());this._descriptions.push(this._createAddressSourceSettings());this._descriptions.push(this._createNotificationSettings());
this._updateAddresseeSources(z);this.setConfig(this.config);this._initTabs(this.tabsContainer,this._descriptions)}))},setConfig:function(z){this.config=A.mixin({},z||{},this.config);this.config.searchSourceSettings.drawing.tools=e.toolCodesToLabels(this.nls.propertyLabels,this.config.searchSourceSettings.drawing.tools);this.config.searchSourceSettings.drawing.buffer.bufferUnitsMenu=e.unitCodesToLabels(jimuNls.units,this.config.searchSourceSettings.drawing.buffer.bufferUnitsMenu);this.config.notificationSettings.labelFormats=
this._initializeLabelFormats(this.config.notificationSettings.labelFormats,this.config.labelFormatTemplates);r.forEach(this._descriptions,A.hitch(this,function(G){G.content.setConfig(this.config)}))},getConfig:function(){var z=[];r.forEach(this._descriptions,A.hitch(this,function(G){G.content.getConfig(this.config,z)}));this.config.searchSourceSettings.search&&this.config.searchSourceSettings.search.sources&&0!==this.config.searchSourceSettings.search.sources.length||z.push(this.nls.problems.noSearchSourcesConfigured);
this.config.searchSourceSettings.geometryServiceURL||z.push(this.nls.problems.noGeometryServiceURL);0>this.config.searchSourceSettings.drawing.buffer.bufferUnitsMenu[0].indexOf("1")&&z.push(this.nls.problems.noBufferUnitsForDrawingTools);this.config.searchSourceSettings.drawing.tools=e.labelsToToolCodes(this.nls.propertyLabels,this.config.searchSourceSettings.drawing.tools);this.config.searchSourceSettings.drawing.buffer.bufferUnitsMenu=e.labelsToUnitCodes(jimuNls.units,this.config.searchSourceSettings.drawing.buffer.bufferUnitsMenu);
return 0<z.length?(new h({message:"\x3cul\x3e\x3cli\x3e"+z.join("\x3c/li\x3e\x3cli\x3e")+"\x3c/li\x3e\x3c/ul\x3e"}),!1):this.useSelectionDrawToolsChk._inputControl.checked&&!this._isSearchSourceFeaureLayerConfigured()?(new h({message:this.nls.problems.noSearchSourceFeaureLayerConfigured}),!1):this.config},getDataSources:function(){},destroy:function(){r.forEach(this._descriptions,function(z){z.node&&q.destroy(z.node)});this._descriptions=[];this.inherited(arguments)},_initializeLabelFormats:function(z,
G){if(Array.isArray(z)&&2<=z.length)return z;var F=[a.rep("0",G.length)];r.forEach(G,function(D){var E={hint:""};"CSV"===D.labelSpec.type?E.name=this.nls.placeholders.descriptionCSV:(E.name=a.substitute(this.nls.placeholders.descriptionPDF,D.descriptionPDF),D.descriptionPDF.averyPartNumber&&(E.hint=a.substitute(this.nls.placeholders.averyExample,D.descriptionPDF)));E.labelSpec=A.clone(D.labelSpec);F.push(E)},this);return F},_getWebmapFeatureLayers:function(z){var G=[];z=z.getLayerInfoArray();r.forEach(z,
function(F){"ArcGISFeatureLayer"===F.originOperLayer.layerType&&G.push({name:F.title,layerId:F.id,url:F.originOperLayer.url,displayField:F.originOperLayer.layerObject.displayField,fields:F.originOperLayer.layerObject.fields})});return G},_updateAddresseeSources:function(z){var G=[],F=[""];z=z.getLayerInfoArray();r.forEach(z,function(E){E.originOperLayer.popupInfo&&E.originOperLayer.popupInfo.description&&G.push(E)});this.config.addresseeSourceSettings.sources=this.config.addresseeSourceSettings.sources||
[""];var D=this.config.addresseeSourceSettings.sources[0];z=this.config.addresseeSourceSettings.sources.slice(1);r.forEach(z,function(E,O){var J=-1;r.some(G,function(H,I){return H.title===E.name?(J=I,!0):!1})&&(F[0]+=D[O],F.push(E),G.splice(J,1))});r.forEach(G,function(E){F[0]+="0";F.push({name:E.title,useRelatedRecords:0===E.layerObject.relationships.length?null:!1})});this.config.addresseeSourceSettings.sources=F},_initTabs:function(z,G){var F=[];r.forEach(G,function(E){F.push({title:E.title,content:E.node})});
var D=new l({tabs:F,"class":"full-height"});D.placeAt(z);this.own(c(D,"tabChanged",A.hitch(this,function(){D.containerNode.scrollTop=0})))},_createSearchSourceSettings:function(){var z=this.nls;var G={title:z.searchSourceSetting.title,node:q.create("div",{"class":"tab-contents"}),content:null};this.useSelectionDrawToolsChk=new w("select",z.propertyLabels.useSelectionDrawTools);G.content=new n("searchSourceSettings","","majorTrailingVertGap",[new C(null,"full-width hint",z.searchSourceSetting.mainHint),
new p("geometryServiceURL",!1,"full-width","details-label","details-value",z.propertyLabels.urlToGeometryService),new v("search",z,"",this.map,this._webmapFeatureLayers,this.appConfig.portalUrl),new n("drawing","flexbox","majorTrailingHorizGap",z.groupingLabels.drawingTools,"full-width",[new n("","","majorTrailingVertGap",[new g("tools","category-panel","",z.propertyLabels.tool,null,z.hints.selectionListOfOptionsToDisplay),this.useSelectionDrawToolsChk]),new k("buffer",z,"details-panel","details-label",
"details-value",this.config.bufferTemplate,z.propertyLabels.bufferDefaultDistance,"100")])]);q.place(G.content.div(),G.node);return G},_createAddressSourceSettings:function(){var z=this.nls;var G={title:z.addressSourceSetting.title,node:q.create("div",{"class":"tab-contents"}),content:null};var F=new w("showReviewButton",z.propertyLabels.reviewCheckboxLabel);m.add(F._mainDiv,"esriCTMarginZero");G.content=new n("addresseeSourceSettings","","majorTrailingVertGap",[new C(null,"full-width hint",z.addressSourceSetting.mainHint),
new x("sources",z),F,new C(null,"full-width hint",z.hints.reviewButtonHint)]);q.place(G.content.div(),G.node);return G},_createNotificationSettings:function(){var z=this.nls;var G={title:z.notificationSetting.title,node:q.create("div",{"class":"tab-contents"}),content:null};this._guidance=new n("guidance","inline-block indented"+(this.config.notificationSettings.labelPageOptions.showGuidance?"":" hiddenEmpty"),"majorTrailingVertGap",[new d("showLabelOutlines","full-width","half-width","half-width",
z.propertyLabels.showLabelOutlines),new d("showGrid","full-width","half-width","half-width",z.propertyLabels.showGridTickMarks),new p("noteFontSizePx",!0,"full-width","half-width","half-width",z.propertyLabels.fontSizeAlignmentNote,"7","","",z.propertyLabels.pixels,{min:4,max:12,places:0}),new p("gridBlackPercent",!0,"full-width","half-width","half-width",z.propertyLabels.gridDarkness,"25","","",z.propertyLabels.percentBlack,{min:0,max:100,places:0}),new p("labelBorderBlackPercent",!0,"full-width",
"half-width","half-width",z.propertyLabels.labelBorderDarkness,"100","","",z.propertyLabels.percentBlack,{min:0,max:100,places:0}),new p("leftIn",!0,"full-width","half-width","half-width",z.propertyLabels.gridlineLeftInset,"0.1667","","",jimuNls.units.inches,{min:0}),new p("rightIn",!0,"full-width","half-width","half-width",z.propertyLabels.gridlineRightInset,"0.1667","","",jimuNls.units.inches,{min:0}),new p("majorTickIn",!0,"full-width","half-width","half-width",z.propertyLabels.gridlineMajorTickMarksGap,
"1","","",jimuNls.units.inches,{min:.039}),new p("minorTickIn",!0,"full-width","half-width","half-width",z.propertyLabels.gridlineMinorTickMarksGap,"0.1","","",jimuNls.units.inches,{min:.039})]);G.content=new n("notificationSettings","","majorTrailingVertGap",[new C(null,"full-width hint",z.notificationSetting.mainHint),new B("labelFormats",z,""),new n("labelPageOptions","flexbox","majorTrailingHorizGap",z.groupingLabels.printingOptions,"full-width",[new n(null,"half-width inline-block","majorTrailingVertGap",
[new p("rasterResolutionPxPerIn",!0,"full-width hiddenEmpty","","full-width",z.propertyLabels.rasterResolution,"150",z.hints.rasterResolution,"",z.propertyLabels.pixelsPerInch,{min:100,max:200,places:0}),new w("useVectorFonts",z.propertyLabels.useVectorFonts),new w("addCSVHeader",z.propertyLabels.addCSVHeader)]),new n(null,"half-width inline-block","majorTrailingVertGap",[new w("showGuidance",z.propertyLabels.showAlignmentAids,"",A.hitch(this,this._showHideGuidance)),this._guidance])])]);q.place(G.content.div(),
G.node);return G},_showHideGuidance:function(z){z?m.remove(this._guidance._mainDiv,"hiddenEmpty"):m.add(this._guidance._mainDiv,"hiddenEmpty")},_isSearchSourceFeaureLayerConfigured:function(){var z=!1,G=r.filter(r.map(this.config.searchSourceSettings.search.sources,function(F){if("query"===F.type)return F.layerId}),function(F){return F});0<r.filter(this._webmapFeatureLayers,function(F){return 0<=G.indexOf(F.layerId)}).length&&(z=!0);return z}})});