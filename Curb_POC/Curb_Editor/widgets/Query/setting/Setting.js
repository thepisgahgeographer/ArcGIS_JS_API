// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/_QueryableLayerSourcePopup":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/declare jimu/dijit/Popup jimu/dijit/QueryableLayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),function(x,C,E,B,w,d,n,c,k){return w([d,C],{width:830,height:560,titleLabel:"",dijitArgs:null,postCreate:function(){this.inherited(arguments);B.addClass(this.domNode,"jimu-queryable-layer-source-popup");this._initFls();this._initLoading()},getSelectedRadioType:function(){return this.sourceDijit.getSelectedRadioType()},
_initFls:function(){this.sourceDijit=new n(this.dijitArgs);this.sourceDijit.placeAt(this.contentContainerNode);this.sourceDijit.startup();this.own(x(this.sourceDijit,"ok",E.hitch(this,function(q){if(0!==q.length){var g=q[0];if(g.definition)try{g.definition.name=g.name,g.definition.url=g.url,this.emit("ok",g)}catch(e){console.error(e)}else this.loading.show(),k({url:g.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(E.hitch(this,function(e){if(this.domNode){this.loading.hide();
g.definition=e;try{g.definition.name=g.name,g.definition.url=g.url,this.emit("ok",g)}catch(v){console.error(v)}}}),E.hitch(this,function(e){console.error(e);this.domNode&&this.loading.hide()}))}})));this.own(x(this.sourceDijit,"cancel",E.hitch(this,function(){try{this.emit("cancel")}catch(q){console.error(q)}})))},_initLoading:function(){this.loading=new c({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/QueryableLayerSource":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/QueryableLayerSource.html dijit/form/RadioButton jimu/dijit/_QueryableLayerChooserWithButtons jimu/dijit/QueryableServiceChooserFromPortal jimu/dijit/_QueryableServiceChooserContent jimu/portalUrlUtils".split(" "),
function(x,C,E,B,w,d,n,c,k,q,g,e,v,r){return w([d,n,c,C],{templateString:k,baseClass:"jimu-layer-source jimu-queryable-layer-source",declaredClass:"jimu.dijit.QueryableLayerSource",nls:null,multiple:!1,createMapResponse:null,mustSupportStatistics:!1,portalUrl:null,postMixInProperties:function(){this.nls=window.jimuNls.queryableLayerSource;this.portalUrl=r.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedRadioType:function(){if(this.mapRadio.checked)return"map";
if(this.portalRadio.checked)return"portal";if(this.urlRadio.checked)return"url"},getSelectedItems:function(){var t=[];this.mapRadio.checked?t=this.queryableLayerChooserFromMap.getSelectedItems():this.portalRadio.checked?t=this.queryableServiceChooserFromPortal.getSelectedItems():this.urlRadio.checked&&(t=this.queryableServiceChooserContent.getSelectedItems());return t},startup:function(){this.inherited(arguments);this.queryableLayerChooserFromMap.startup();this.queryableServiceChooserFromPortal.startup();
this.queryableServiceChooserContent.startup()},_initSelf:function(){this._initRadios();this._createQueryableLayerChooserWithButtons();this._createQueryableServiceChooserFromPortal();this._createQueryableServiceChooserContent();this._onRadioClicked()},_createQueryableLayerChooserWithButtons:function(){this.queryableLayerChooserFromMap=new g({style:{width:"100%",height:"100%"},multiple:this.multiple,createMapResponse:this.createMapResponse,mustSupportStatistics:this.mustSupportStatistics,onlyShowWebMapLayers:!0});
this.queryableLayerChooserFromMap.operationTip=this.nls.selectLayer;this.queryableLayerChooserFromMap.placeAt(this.mapDijitContainer);this.own(x(this.queryableLayerChooserFromMap,"ok",E.hitch(this,function(t){t&&0<t.length&&this.emit("ok",t)})));this.own(x(this.queryableLayerChooserFromMap,"cancel",E.hitch(this,function(){this.emit("cancel")})))},_createQueryableServiceChooserFromPortal:function(){this.queryableServiceChooserFromPortal=new e({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",
height:"100%"}});this.queryableServiceChooserFromPortal.operationTip=this.nls.chooseItem;this.queryableServiceChooserFromPortal.placeAt(this.portalDijitContainer);this.own(x(this.queryableServiceChooserFromPortal,"next",E.hitch(this,function(){this.queryableServiceChooserFromPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseLayer;this._updateOperationTip()})));this.own(x(this.queryableServiceChooserFromPortal,"back",E.hitch(this,function(){this.queryableServiceChooserFromPortal.operationTip=
this.nls.chooseItem;this._updateOperationTip()})));this.own(x(this.queryableServiceChooserFromPortal,"ok",E.hitch(this,function(t){t&&0<t.length&&this.emit("ok",t)})));this.own(x(this.queryableServiceChooserFromPortal,"cancel",E.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createQueryableServiceChooserContent:function(){this.queryableServiceChooserContent=
new v({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.queryableServiceChooserContent.operationTip=this.nls.setServiceUrl;this.queryableServiceChooserContent.placeAt(this.urlDijitContainer);this.own(x(this.queryableServiceChooserContent,"ok",E.hitch(this,function(t){t&&0<t.length&&this.emit("ok",t)})));this.own(x(this.queryableServiceChooserContent,"cancel",E.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var t="queryableLayerSourceRadios_"+this._getRandomString(),
b=E.hitch(this,this._onRadioClicked);this.mapRadio=new q({name:t,style:"margin-bottom: 1px;",checked:!0});this.own(x(this.mapRadio,"change",b));this.mapRadio.placeAt(this.mapTd,"first");this.portalRadio=new q({name:t,style:"margin-bottom: 1px;",checked:!1});this.own(x(this.portalRadio,"change",b));this.portalRadio.placeAt(this.portalTd,"first");this.urlRadio=new q({name:t,style:"margin-bottom: 1px;",checked:!1});this.own(x(this.urlRadio,"change",b));this.urlRadio.placeAt(this.urlTd,"first");this.own(x(this.mapLabel,
"click",E.hitch(this,function(){this.mapRadio.set("checked",!0)})));this.own(x(this.portalLabel,"click",E.hitch(this,function(){this.portalRadio.set("checked",!0)})));this.own(x(this.urlLabel,"click",E.hitch(this,function(){this.urlRadio.set("checked",!0)})))},_getRandomString:function(){var t=Math.random().toString();return t=t.slice(2,t.length)},_onRadioClicked:function(){B.setStyle(this.mapDijitContainer,"display","none");B.setStyle(this.portalDijitContainer,"display","none");B.setStyle(this.urlDijitContainer,
"display","none");this.mapRadio.checked?(B.setStyle(this.mapDijitContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(B.setStyle(this.portalDijitContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):this.urlRadio.checked&&(B.setStyle(this.urlDijitContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=
this.queryableLayerChooserFromMap.operationTip:this.portalRadio.checked?this.operationTip.innerHTML=this.queryableServiceChooserFromPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.queryableServiceChooserContent.operationTip)}})})},"jimu/dijit/_QueryableLayerChooserWithButtons":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/QueryableLayerChooserFromMap".split(" "),
function(x,C,E,B,w,d,n,c,k){return x([C,E,B,c],{baseClass:"jimu-layer-chooser-with-buttons jimu-queryable-layer-chooser-with-buttons",declaredClass:"jimu.dijit.QueryableLayerChooserWithButtons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"chooser-container" data-dojo-attach-point\x3d"chooserContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-trailing-margin1 jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
constructor:function(q){this.options=q},postMixInProperties:function(){this.nls=w.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.queryableLayerChooserFromMap=new k(this.options);this.queryableLayerChooserFromMap.placeAt(this.chooserContainer);d.setStyle(this.queryableLayerChooserFromMap.domNode,{width:"100%",height:"100%"});this.own(n(this.queryableLayerChooserFromMap,"tree-click",w.hitch(this,function(){0<this.getSelectedItems().length?d.removeClass(this.btnOk,
"jimu-state-disabled"):d.addClass(this.btnOk,"jimu-state-disabled")})));this.own(n(this.btnOk,"click",w.hitch(this,function(){var q=this.getSelectedItems();0<q.length&&this.emit("ok",q)})));this.own(n(this.btnCancel,"click",w.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.queryableLayerChooserFromMap.getSelectedItems()},startup:function(){this.inherited(arguments);this.queryableLayerChooserFromMap.startup()}})})},"jimu/dijit/QueryableLayerChooserFromMap":function(){define(["dojo/_base/lang",
"dojo/_base/html","dojo/_base/declare","./LayerChooserFromMap"],function(x,C,E,B){return E([B],{baseClass:"jimu-queryable-layer-chooser-from-map",declaredClass:"jimu.dijit.QueryableLayerChooserFromMap",showImageLayer:!0,mustSupportStatistics:!1,ignoreVirtualLayer:!1,postMixInProperties:function(){this.inherited(arguments);this.filter=this.showImageLayer?B.createQueryableLayerFilter(this.mustSupportStatistics):B.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,this.mustSupportStatistics);
this.ignoreVirtualLayer&&(this.filter=B.andCombineFilters([this.filter,x.hitch(this,this._ignoreVirtualLayerFilter)]))},_ignoreVirtualLayerFilter:function(w){return w.getLayerType().then(function(d){return!("ArcGISDynamicMapServiceLayer"===d||"ArcGISTiledMapServiceLayer"===d||"GroupLayer"===d)})},postCreate:function(){this.inherited(arguments);C.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},getHandledItem:function(w){var d=this.inherited(arguments),n=w&&w.layerInfo;n=n&&n.layerObject;
d.url=n&&n.url||"";return d}})})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),function(x,C,E,B,w,d,n,c,k,q,g,e,v,r,t,b,f,p){var z=E([B,w,d,C],
{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,
displayTooltipForTreeNode:!1,onlyFilterCurrentLayerWhenAddItem:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);v.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new p({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=e.hitch(this,this.basicFilter);this.filter=z.andCombineFilters([this.basicFilter,this.filter]);
this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(a){var l=new c;this.onlyShowVisible?l.resolve(a.isShowInMap()):l.resolve(!0);return l},filter:function(a){a=new c;a.resolve(!0);return a},getSelectedItems:function(){var a=this.tree.getSelectedItems();return r.map(a,e.hitch(this,function(l){return this.getHandledItem(l)}))},getAllItems:function(){var a=this.tree.getAllItems(),l=[];r.forEach(a,e.hitch(this,function(A){"root"!==A.id&&(A=this.getHandledItem(A),
l.push(A))}));return l},getHandledItem:function(a){return{name:a.name,layerInfo:a.layerInfo}},_isLeafItem:function(a){return a.isLeaf},setCreateMapResponse:function(a){this.createMapResponse=a;f.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(e.hitch(this,function(l){this.layerInfosObj=l;this.own(x(this.layerInfosObj,"layerInfosChanged",e.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(x(this.layerInfosObj,"layerInfosIsShowInMapChanged",
e.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(a,l){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(a){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(a){this._clear();v.setStyle(this.errorTipSection,"display","block");var l=[];this.onlyShowWebMapLayers?(l=a.getLayerInfoArrayOfWebmap(),l=l.concat(a.getTableInfoArrayOfWebmap())):(l=a.getLayerInfoArray(),
l=l.concat(a.getTableInfoArray()));0!==l.length&&(v.setStyle(this.errorTipSection,"display","none"),r.forEach(l,e.hitch(this,function(A){this._addDirectLayerInfo(A)})))},_addDirectLayerInfo:function(a){a&&a.getLayerObject().then(e.hitch(this,function(){this._addItem("root",a)}),e.hitch(this,function(l){console.error(l)}))},_clear:function(){var a=this._store.query({parent:"root"});r.forEach(a,e.hitch(this,function(l){l&&"root"!==l.id&&this._store.remove(l.id)}))},_addItem:function(a,l){var A=null,
D=l.getLayerType(),G=this.filter(l);g({layerType:D,valid:G}).then(e.hitch(this,function(F){if(F.valid){var m=e.hitch(this,function(M,O){this._id++;A={name:l.title||"",parent:a,layerInfo:l,type:F.layerType,layerClass:l.layerObject.declaredClass,id:this._id.toString(),isLeaf:M,hasChildren:O};this._store.add(A)}),y=l.getSubLayers(),I=0===y.length,L=!0;this.onlyFilterCurrentLayerWhenAddItem?(I&&(L=!1),m(I,L)):I?m(I,!1):(y=r.map(y,e.hitch(this,function(M){return this.filter(M)})),g(y).then(e.hitch(this,
function(M){(M=r.some(M,function(O){return O}))&&m(I,M)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var a=this._getRootItem();a=new n({data:[a],getChildren:function(l){return this.query({parent:l.id})}});this._store=new k(a);a=new q({store:this._store,query:{id:"root"},mayHaveChildren:e.hitch(this,this._mayHaveChildren)});this.tree=new b({multiple:this.multiple,model:a,showRoot:!1,isLeafItem:e.hitch(this,this._isLeafItem),
style:{width:"100%"},onOpen:e.hitch(this,function(l,A){"root"!==l.id&&this._onTreeOpen(l,A)}),onClick:e.hitch(this,function(l,A,D){this._onTreeClick(l,A,D);this.emit("tree-click",l,A,D)}),getIconStyle:e.hitch(this,function(l,A){var D=null;if(!l||"root"===l.id)return null;var G={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},F=window.location.protocol+"//"+window.location.host+require.toUrl("jimu");if(l=this._getIconInfo(l,A).imageName)G.backgroundImage=
"url("+F+"/css/images/"+l+")",D=G;return D}),getIconClass:e.hitch(this,function(l,A){return this._getIconInfo(l,A).className}),getTooltip:e.hitch(this,function(l){return this.displayTooltipForTreeNode?l.layerInfo.title:""})});v.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(a){return a.hasChildren},_getIconInfo:function(a,l){var A="",D="";"ArcGISDynamicMapServiceLayer"===a.type||"ArcGISTiledMapServiceLayer"===a.type?l?(A="mapserver_open.png",
D="mapservice-layer-icon open"):(A="mapserver_close.png",D="mapservice-layer-icon close"):"GroupLayer"===a.type?l?(A="group_layer2.png",D="group-layer-icon open"):(A="group_layer1.png",D="group-layer-icon close"):"FeatureLayer"===a.type?(a=t.getTypeByGeometryType(a.layerInfo.layerObject.geometryType),"point"===a?(A="point_layer1.png",D="point-layer-icon"):"polyline"===a?(A="line_layer1.png",D="line-layer-icon"):"polygon"===a&&(A="polygon_layer1.png",D="polygon-layer-icon")):"Table"===a.type?(A="table.png",
D="table-icon"):"ArcGISImageServiceLayer"===a.type||"ArcGISImageServiceVectorLayer"===a.type?(A="image_layer.png",D="iamge-layer-icon"):l?(A="mapserver_open.png",D="mapservice-layer-icon open"):(A="mapserver_close.png",D="mapservice-layer-icon close");return{imageName:A,className:D}},_onTreeOpen:function(a,l){if("root"!==a.id){var A=[];l=[];A=a.layerInfo.getSubLayers();a.checked||(this.shelter.show(),l=r.map(A,e.hitch(this,function(D){return D.getLayerObject()})),g(l).then(e.hitch(this,function(){this.domNode&&
(r.forEach(A,e.hitch(this,function(D){this._addItem(a.id,D)})),a.checked=!0,this.shelter.hide())}),e.hitch(this,function(D){console.error(D);this.shelter.hide()})))}},_onTreeClick:function(a,l,A){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});z.createFilterByLayerType=function(a){e.isArrayLike(a)||(a=[]);return function(l){var A=new c;if(0===a.length)A.resolve(!0);else{var D=[];l.traversal(function(G){D.push(G.getLayerType())});
g(D).then(function(G){for(var F=0;F<G.length;F++)for(var m=0;m<a.length;m++)if(G[F]===a[m]){A.resolve(!0);return}A.resolve(!1)},function(G){console.error(G);A.reject(G)})}return A}};z.createFeaturelayerFilter=function(a,l,A,D){var G=["point","polyline","polygon"];a&&0<a.length?(a=r.filter(a,function(F){return 0<=G.indexOf(F)}),0===a.length&&(a=G)):a=G;return function(F){var m=F.getLayerType();F=F.getLayerObject();return g({layerType:m,layerObject:F}).then(function(y){var I=y.layerType;y=y.layerObject;
if("ArcGISDynamicMapServiceLayer"===I||"ArcGISTiledMapServiceLayer"===I||"GroupLayer"===I||"FeatureCollection"===I)return!0;if("FeatureLayer"===I){I=t.getTypeByGeometryType(y.geometryType);I=0<=r.indexOf(a,I);var L=z._shouldPassStatisticsCheck(D,y);return y.url?(y=t.isFeaturelayerUrlSupportQuery(y.url,y.capabilities),I&&y&&L):l&&I}return"Table"===I?(I=t.isFeaturelayerUrlSupportQuery(y.url,y.capabilities),y=z._shouldPassStatisticsCheck(D,y),A&&I&&y):!1})}};z.createImageServiceLayerFilter=function(a,
l){return function(A){var D=A.getLayerType();A=A.getLayerObject();return g({layerType:D,layerObject:A}).then(function(G){var F=G.layerType,m=G.layerObject;return"ArcGISImageServiceLayer"===F||"ArcGISImageServiceVectorLayer"===F?a?t.isImageServiceSupportQuery(G.layerObject.capabilities)?l?z._shouldPassStatisticsCheck(l,m):!0:!1:!0:!1})}};z._shouldPassStatisticsCheck=function(a,l){return a?(a=!1,a=l.advancedQueryCapabilities?!!l.advancedQueryCapabilities.supportsStatistics:!!l.supportsStatistics):!0};
z.createQueryableLayerFilter=function(a){var l=z.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,a);a=z.createImageServiceLayerFilter(!0,a);return z.orCombineFilters([l,a])};z.andCombineFilters=function(a){return z._combineFilters(a,!0)};z.orCombineFilters=function(a){return z._combineFilters(a,!1)};z._combineFilters=function(a,l){return function(A){var D=new c,G=r.map(a,function(F){return F(A)});g(G).then(function(F){var m=!1;m=l?r.every(F,function(y){return y}):r.some(F,function(y){return y});
D.resolve(m)},function(F){console.error(F);D.reject(F)});return D}};return z})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(x,C,E,B,w,d,n){return E("dijit.tree.ObjectStoreModel",n,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(c){w.mixin(this,c);this.childrenCache={}},getRoot:function(c,k){if(this.root)c(this.root);else{var q=this.store.query(this.query);
q.then&&this.own(q);d(q,w.hitch(this,function(g){if(1!=g.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+g.length+" items, but must return exactly one");this.root=g[0];c(this.root);q.observe&&q.observe(w.hitch(this,function(e){this.onChange(e)}),!0)}),k)}},mayHaveChildren:function(){return!0},getChildren:function(c,k,q){var g=this.store.getIdentity(c);if(this.childrenCache[g])d(this.childrenCache[g],k,q);else{var e=this.childrenCache[g]=this.store.getChildren(c);e.then&&this.own(e);
e.observe&&this.own(e.observe(w.hitch(this,function(v,r,t){this.onChange(v);r!=t&&d(e,w.hitch(this,"onChildrenChange",c))}),!0));d(e,k,q)}},isItem:function(){return!0},getIdentity:function(c){return this.store.getIdentity(c)},getLabel:function(c){return c[this.labelAttr]},newItem:function(c,k,q,g){return this.store.put(c,{parent:k,before:g})},pasteItem:function(c,k,q,g,e,v){var r=new B;if(k===q&&!g&&!v)return r.resolve(!0),r;k&&!g?this.getChildren(k,w.hitch(this,function(t){t=[].concat(t);var b=x.indexOf(t,
c);t.splice(b,1);this.onChildrenChange(k,t);r.resolve(this.store.put(c,{overwrite:!0,parent:q,oldParent:k,before:v,isCopy:!1}))})):r.resolve(this.store.put(c,{overwrite:!0,parent:q,oldParent:k,before:v,isCopy:!0}));return r},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(x,C,E,B,w,d,n,c,k,q,g,e,v,r,t,b){var f=x([t._TreeNode,v],{templateString:B,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);d.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=d.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=d.toDom('\x3cinput type\x3d"checkbox" /\x3e');d.addClass(this.checkNode,"jimu-tree-check-node");d.place(this.checkNode,this.contentNode,
"first");this.own(g(this.checkNode,"click",w.hitch(this,this._onClick)));this.own(g(this.rowNode,"keydown",w.hitch(this,function(p,z){z.target=p;z.keyCode!==e.ENTER&&z.keyCode!==e.SPACE||this._onClick(z)},this.checkNode)));this.isLeaf?this.groupId?d.setStyle(this.checkNode,"display","none"):d.setStyle(this.checkNode,"display","inline"):d.setStyle(this.checkNode,"display","none");this.isLeaf?d.addClass(this.domNode,"jimu-tree-leaf-node"):d.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&
(this.checkNode.checked=!0,d.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,d.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(p){(p.target||p.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,p):this.tree._onClick(this,p)},_onChange:function(){this.isLeaf&&setTimeout(w.hitch(this,
function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return x([t,v],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+b.getRandomString()},postCreate:function(){this.inherited(arguments);d.addClass(this.domNode,"jimu-tree");this.own(q.before(this,"onClick",w.hitch(this,this._jimuBeforeClick)));
this.rootLoadingIndicator&&d.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0;d.setAttr(this.domNode,"tabindex",0)},removeItem:function(p){this.model.store.remove(p)},getAllItems:function(){var p=this.getAllTreeNodeWidgets();return n.map(p,w.hitch(this,function(z){var a=z.item;a.selected=z.checkNode.checked;return a}))},getSelectedItems:function(){var p=this.getAllTreeNodeWidgets();p=n.filter(p,w.hitch(this,function(z){return z.checkNode.checked}));return n.map(p,
w.hitch(this,function(z){return z.item}))},getFilteredItems:function(p){var z=this.getAllTreeNodeWidgets();z=n.map(z,w.hitch(this,function(a){var l=a.item;l.selected=a.checkNode.checked;return l}));return n.filter(z,w.hitch(this,function(a){return p(a)}))},getTreeNodeByItemId:function(p){for(var z=this._getAllTreeNodeDoms(),a=0;a<z.length;a++){var l=r.byNode(z[a]);if(l.item.id.toString()===p.toString())return l}return null},selectItem:function(p){(p=this.getTreeNodeByItemId(p))&&p.isLeaf&&this.selectNodeWidget(p)},
unselectItem:function(p){(p=this.getTreeNodeByItemId(p))&&p.isLeaf&&p.unselect()},getAllLeafTreeNodeWidgets:function(){var p=this.getAllTreeNodeWidgets();return n.filter(p,w.hitch(this,function(z){return z.isLeaf}))},getAllTreeNodeWidgets:function(){var p=this._getAllTreeNodeDoms();return n.map(p,w.hitch(this,function(z){return r.byNode(z)}))},isLeafItem:function(p){return p&&p.isLeaf},_getAllTreeNodeDoms:function(){return k(".dijitTreeNode",this.domNode)},_createTreeNode:function(p){p.isLeaf=this.isLeafItem(p.item);
this.multiple||(p.groupId=this.uniqueId);return new f(p)},_onTreeNodeSelect:function(p){this.emit("item-select",{item:p.item,treeNode:p})},_onTreeNodeUnselect:function(p){this.emit("item-unselect",{item:p.item,treeNode:p})},selectNodeWidget:function(p){this.multiple||this.unselectAllLeafNodeWidgets();p.select()},_jimuBeforeClick:function(p,z,a){z.isLeaf&&(d.hasClass(a.target||a.srcElement,"jimu-tree-check-node")||(this.multiple?z.toggleSelect():this.selectNodeWidget(z)));return arguments},_onCheckNodeClick:function(p,
z,a){!this.multiple&&z&&this.unselectAllLeafNodeWidgets();c.stop(a);this.focusNode(p);setTimeout(w.hitch(this,function(){z?this.selectNodeWidget(p):p.unselect();this.onClick(p.item,p,a)}),0)},unselectAllLeafNodeWidgets:function(){var p=this.getAllLeafTreeNodeWidgets();n.forEach(p,w.hitch(this,function(z){z.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(x,C,E,B,w,d,n,c,k,q,g,e,v,r,t,b,f,p,z,a,l,A,D,G,F,m,y,I,L,M,O,X,da,aa,ba){function Q(h){return b.delegate(h.promise||h,{addCallback:function(u){this.then(u)},addErrback:function(u){this.otherwise(u)}})}var Z=B("dijit._TreeNode",[F,m,y,I,L],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(h){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=h;this._set("label",h);v("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:O,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(h){var u=Math.max(h,0)*this.tree._nodePixelIndent+"px";q.set(this.domNode,
"backgroundPosition",u+" 0px");q.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",u);x.forEach(this.getChildren(),function(H){H.set("indent",h+1)});this._set("indent",h)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(h){var u=this.tree,H=u.model;u._v10Compat&&h===H.root&&(h=null);this._applyClassAndStyle(h,"icon","Icon");this._applyClassAndStyle(h,"label","Label");this._applyClassAndStyle(h,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(h,u,H){var J="_"+u+"Class";u+="Node";var K=this[J];this[J]=this.tree["get"+H+"Class"](h,this.isExpanded);c.replace(this[u],this[J]||"",K||"");q.set(this[u],this.tree["get"+H+"Style"](h,this.isExpanded)||{})},_updateLayout:function(){var h=this.getParent();h=!h||!h.rowNode||"none"==h.rowNode.style.display;c.toggle(this.domNode,"dijitTreeIsRoot",h);c.toggle(this.domNode,"dijitTreeIsLast",!h&&!this.getNextSibling())},_setExpando:function(h){var u=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];h=h?0:this.isExpandable?this.isExpanded?1:2:3;c.replace(this.expandoNode,u[h],u);this.expandoNodeText.innerHTML=["*","-","+","*"][h]},expand:function(){if(this._expandDeferred)return Q(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");c.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var h=e.wipeIn({node:this.containerNode,duration:G.defaultDuration}),u=this._expandDeferred=new w(function(){h.stop()});C.after(h,"onEnd",function(){u.resolve(!0)},!0);h.play();return Q(u)},collapse:function(){if(this._collapseDeferred)return Q(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");c.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var h=e.wipeOut({node:this.containerNode,duration:G.defaultDuration}),u=this._collapseDeferred=new w(function(){h.stop()});C.after(h,"onEnd",
function(){u.resolve(!0)},!0);h.play();return Q(u)},indent:0,setChildItems:function(h){var u=this.tree,H=u.model,J=[],K=u.focusedChild,U=this.getChildren();x.forEach(U,function(N){y.prototype.removeChild.call(this,N)},this);this.defer(function(){x.forEach(U,function(N){if(!N._destroyed&&!N.getParent()){u.dndController.removeTreeNode(N);(function ca(P){var V=H.getIdentity(P.item),Y=u._itemNodesMap[V];1==Y.length?delete u._itemNodesMap[V]:(V=x.indexOf(Y,P),-1!=V&&Y.splice(V,1));x.forEach(P.getChildren(),
ca)})(N);if(u.persist){var S=x.map(N.getTreePath(),function(P){return u.model.getIdentity(P)}).join("/"),R;for(R in u._openedNodes)R.substr(0,S.length)==S&&delete u._openedNodes[R];u._saveExpandedNodes()}u.lastFocusedChild&&!n.isDescendant(u.lastFocusedChild.domNode,u.domNode)&&delete u.lastFocusedChild;K&&!n.isDescendant(K.domNode,u.domNode)&&u.focus();N.destroyRecursive()}})});this.state="Loaded";h&&0<h.length?(this.isExpandable=!0,x.forEach(h,function(N){var S=H.getIdentity(N),R=u._itemNodesMap[S];
if(R)for(var W=0;W<R.length;W++)if(R[W]&&!R[W].getParent()){var P=R[W];P.set("indent",this.indent+1);break}P||(P=this.tree._createTreeNode({item:N,tree:u,isExpandable:H.mayHaveChildren(N),label:u.getLabel(N),labelType:u.model&&u.model.labelType||"text",tooltip:u.getTooltip(N),ownerDocument:u.ownerDocument,dir:u.dir,lang:u.lang,textDir:u.textDir,indent:this.indent+1}),R?R.push(P):u._itemNodesMap[S]=[P]);this.addChild(P);(this.tree.autoExpand||this.tree._state(P))&&J.push(u._expandNode(P))},this),x.forEach(this.getChildren(),
function(N){N._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);h=d(J);this.tree._startPaint(h);return Q(h)},getTreePath:function(){for(var h=this,u=[];h&&h!==this.tree.rootNode;)u.unshift(h.item),h=h.getParent();u.unshift(this.tree.rootNode.item);return u},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(h){this.inherited(arguments);var u=this.getChildren();0==u.length&&(this.isExpandable=!1,
this.collapse());x.forEach(u,function(H){H._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(h){this.labelNode.setAttribute("aria-selected",h?"true":"false");c.toggle(this.rowNode,"dijitTreeRowSelected",h)},focus:function(){A.focus(this.focusNode)}});v("dojo-bidi")&&Z.extend({_setTextDirAttr:function(h){!h||this.textDir==h&&this._created||(this._set("textDir",h),this.applyTextDir(this.labelNode),x.forEach(this.getChildren(),function(u){u.set("textDir",
h)},this))}});var T=B("dijit.Tree",[F,M,m,L],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:X,persist:!1,autoExpand:!1,dndController:ba,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(h,u){p.publish(this.id,b.mixin({tree:this,event:h},u||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new w;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var h=this;this.own(f(this.containerNode,
f.selector(".dijitTreeNode",z.enter),function(J){h._onNodeMouseEnter(D.byNode(this),J)}),f(this.containerNode,f.selector(".dijitTreeNode",z.leave),function(J){h._onNodeMouseLeave(D.byNode(this),J)}),f(this.containerNode,f.selector(".dijitTreeRow",l.press),function(J){h._onNodePress(D.getEnclosingWidget(this),J)}),f(this.containerNode,f.selector(".dijitTreeRow",l),function(J){h._onClick(D.getEnclosingWidget(this),J)}),f(this.containerNode,f.selector(".dijitTreeRow","dblclick"),function(J){h._onDblClick(D.getEnclosingWidget(this),
J)}));this.model||this._store2model();this.own(C.after(this.model,"onChange",b.hitch(this,"_onItemChange"),!0),C.after(this.model,"onChildrenChange",b.hitch(this,"_onItemChildrenChange"),!0),C.after(this.model,"onDelete",b.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){b.isString(this.dndController)&&(this.dndController=b.getObject(this.dndController));for(var u={},H=0;H<this.dndParams.length;H++)this[this.dndParams[H]]&&(u[this.dndParams[H]]=this[this.dndParams[H]]);
this.dndController=new this.dndController(this,u)}this._load();this.onLoadDeferred=Q(this.pendingCommandsPromise);this.onLoadDeferred.then(b.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;r.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var h={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(h.mayHaveChildren=b.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(h.getChildren=b.hitch(this,function(u,H,J){this.getItemChildren(this._v10Compat&&u===this.model.root?null:u,H,J)}));this.model=new aa(h);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(b.hitch(this,function(h){var u=this.rootNode=this.tree._createTreeNode({item:h,tree:this,isExpandable:!0,label:this.label||this.getLabel(h),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(u.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(u.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(u.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
u.labelNode.setAttribute("role","presentation"),u.labelNode.removeAttribute("aria-selected"),u.containerNode.setAttribute("role","tree"),u.containerNode.setAttribute("aria-expanded","true"),u.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(u.domNode);h=this.model.getIdentity(h);this._itemNodesMap[h]?this._itemNodesMap[h].push(u):this._itemNodesMap[h]=[u];u._updateLayout();this._expandNode(u).then(b.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),b.hitch(this,function(h){console.error(this,": error loading root: ",h)}))},getNodesByItem:function(h){if(!h)return[];h=b.isString(h)?h:this.model.getIdentity(h);return[].concat(this._itemNodesMap[h])},_setSelectedItemAttr:function(h){this.set("selectedItems",[h])},_setSelectedItemsAttr:function(h){var u=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(b.hitch(this,function(){var H=
x.map(h,function(K){return!K||b.isString(K)?K:u.model.getIdentity(K)}),J=[];x.forEach(H,function(K){J=J.concat(u._itemNodesMap[K]||[])});this.set("selectedNodes",J)}))},_setPathAttr:function(h){return h.length?Q(this.set("paths",[h]).then(function(u){return u[0]})):Q(this.set("paths",[]).then(function(u){return u[0]}))},_setPathsAttr:function(h){function u(J,K){var U=J.shift(),N=x.filter(K,function(S){return S.getIdentity()==U})[0];if(N)return J.length?H._expandNode(N).then(function(){return u(J,
N.getChildren())}):N;throw new T.PathError("Could not expand path at "+U);}var H=this;return Q(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return d(x.map(h,function(J){J=x.map(J,function(K){return K&&b.isObject(K)?H.model.getIdentity(K):K});if(J.length)return u(J,[H.rootNode]);throw new T.PathError("Empty path");}))}).then(function(J){H.set("selectedNodes",J);return H.paths}))},_setSelectedNodeAttr:function(h){this.set("selectedNodes",[h])},_setSelectedNodesAttr:function(h){this.dndController.setSelection(h)},
expandAll:function(){function h(H){return u._expandNode(H).then(function(){var J=x.filter(H.getChildren()||[],function(K){return K.isExpandable});return d(x.map(J,h))})}var u=this;return Q(h(this.rootNode))},collapseAll:function(){function h(H){var J=x.filter(H.getChildren()||[],function(K){return K.isExpandable});J=d(x.map(J,h));return!H.isExpanded||H==u.rootNode&&!u.showRoot?J:J.then(function(){return u._collapseNode(H)})}var u=this;return Q(h(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(h){return this.model.getLabel(h)},getIconClass:function(h,u){return!h||this.model.mayHaveChildren(h)?u?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(h,u){(h=this._getNext(u))&&h.isTreeNode&&this.focusNode(h)},_onUpArrow:function(h,u){if(h=u.getPreviousSibling())for(u=h;u.isExpandable&&u.isExpanded&&
u.hasChildren();)u=u.getChildren(),u=u[u.length-1];else if(h=u.getParent(),this.showRoot||h!==this.rootNode)u=h;u&&u.isTreeNode&&this.focusNode(u)},_onRightArrow:function(h,u){u.isExpandable&&!u.isExpanded?this._expandNode(u):u.hasChildren()&&(u=u.getChildren()[0])&&u.isTreeNode&&this.focusNode(u)},_onLeftArrow:function(h,u){u.isExpandable&&u.isExpanded?this._collapseNode(u):(h=u.getParent())&&h.isTreeNode&&(this.showRoot||h!==this.rootNode)&&this.focusNode(h)},focusLastChild:function(){var h=this._getLast();
h&&h.isTreeNode&&this.focusNode(h)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var h=this.rootNode;h.isExpanded;){var u=h.getChildren();if(!u.length)break;h=u[u.length-1]}return h},_getNext:function(h){if(h.isExpandable&&h.isExpanded&&h.hasChildren())return h.getChildren()[0];for(;h&&h.isTreeNode;){var u=h.getNextSibling();if(u)return u;h=h.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(h,u){return n.isDescendant(h,
u.expandoNode)||n.isDescendant(h,u.expandoNodeText)},_onNodePress:function(h,u){this.focusNode(h)},__click:function(h,u,H,J){var K=this.isExpandoNode(u.target,h);h.isExpandable&&(H||K)?this._onExpandoClick({node:h}):(this._publish("execute",{item:h.item,node:h,evt:u}),this[J](h.item,h,u),this.focusNode(h));u.stopPropagation();u.preventDefault()},_onClick:function(h,u){this.__click(h,u,this.openOnClick,"onClick")},_onDblClick:function(h,u){this.__click(h,u,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(h){h=
h.node;this.focusNode(h);h.isExpanded?this._collapseNode(h):this._expandNode(h)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(h){r.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(h)},_getRootOrFirstNode:function(){r.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(h){h._expandNodeDeferred&&
delete h._expandNodeDeferred;if("Loading"!=h.state&&h.isExpanded){var u=h.collapse();this.onClose(h.item,h);this._state(h,!1);this._startPaint(u);return u}},_expandNode:function(h){if(h._expandNodeDeferred)return h._expandNodeDeferred;var u=this.model,H=h.item,J=this;h._loadDeferred||(h.markProcessing(),h._loadDeferred=new w,u.getChildren(H,function(K){h.unmarkProcessing();h.setChildItems(K).then(function(){h._loadDeferred.resolve(K)})},function(K){console.error(J,": error loading "+h.label+" children: ",
K);h._loadDeferred.reject(K)}));u=h._loadDeferred.then(b.hitch(this,function(){var K=h.expand();this.onOpen(h.item,h);this._state(h,!0);return K}));this._startPaint(u);return u},focusNode:function(h){for(var u=[],H=this.domNode;H&&H.tagName&&"IFRAME"!==H.tagName.toUpperCase();H=H.parentNode)u.push({domNode:H.contentWindow||H,scrollLeft:H.scrollLeft||0,scrollTop:H.scrollTop||0});this.focusChild(h);this.defer(function(){for(var J=0,K=u.length;J<K;J++)u[J].domNode.scrollLeft=u[J].scrollLeft,u[J].domNode.scrollTop=
u[J].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(h){var u=this.model.getIdentity(h);if(u=this._itemNodesMap[u]){var H=this.getLabel(h),J=this.getTooltip(h);x.forEach(u,function(K){K.set({item:h,label:H,tooltip:J});K._updateItemClasses(h)})}},_onItemChildrenChange:function(h,u){h=this.model.getIdentity(h);(h=this._itemNodesMap[h])&&x.forEach(h,function(H){H.setChildItems(u)})},_onItemDelete:function(h){h=this.model.getIdentity(h);var u=this._itemNodesMap[h];
u&&(x.forEach(u,function(H){this.dndController.removeTreeNode(H);var J=H.getParent();J&&J.removeChild(H);this.lastFocusedChild&&!n.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!n.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();H.destroyRecursive()},this),delete this._itemNodesMap[h])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var h=E(this.cookieName);h&&x.forEach(h.split(","),function(u){this._openedNodes[u]=
!0},this)}},_state:function(h,u){if(!this.persist)return!1;var H=x.map(h.getTreePath(),function(J){return this.model.getIdentity(J)},this).join("/");if(1===arguments.length)return this._openedNodes[H];u?this._openedNodes[H]=!0:delete this._openedNodes[H];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var h=[],u;for(u in this._openedNodes)h.push(u);E(this.cookieName,h.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),
delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!b.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(h){h&&k.setMarginBox(this.domNode,h);this._nodePixelIndent=k.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(b.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},
_outstandingPaintOperations:0,_startPaint:function(h){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var u=b.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});a(h,u,u)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);
this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(h){return new Z(h)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});v("dojo-bidi")&&T.extend({_setTextDirAttr:function(h){h&&this.textDir!=h&&(this._set("textDir",h),this.rootNode.set("textDir",h))}});T.PathError=g("TreePathError");T._TreeNode=Z;return T})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(x,C,E,B){return E("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(w){B.mixin(this,w);this.connects=[];w=this.store;if(!w.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");w.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([C.after(w,
"onNew",B.hitch(this,"onNewItem"),!0),C.after(w,"onDelete",B.hitch(this,"onDeleteItem"),!0),C.after(w,"onSet",B.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var w;w=this.connects.pop();)w.remove()},getRoot:function(w,d){this.root?w(this.root):this.store.fetch({query:this.query,onComplete:B.hitch(this,function(n){if(1!=n.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+n.length+" items, but must return exactly one");this.root=n[0];w(this.root)}),onError:d})},mayHaveChildren:function(w){return x.some(this.childrenAttrs,
function(d){return this.store.hasAttribute(w,d)},this)},getChildren:function(w,d,n){var c=this.store;if(c.isItemLoaded(w)){for(var k=[],q=0;q<this.childrenAttrs.length;q++){var g=c.getValues(w,this.childrenAttrs[q]);k=k.concat(g)}var e=0;this.deferItemLoadingUntilExpand||x.forEach(k,function(r){c.isItemLoaded(r)||e++});0==e?d(k):x.forEach(k,function(r,t){c.isItemLoaded(r)||c.loadItem({item:r,onItem:function(b){k[t]=b;0==--e&&d(k)},onError:n})})}else{var v=B.hitch(this,arguments.callee);c.loadItem({item:w,
onItem:function(r){v(r,d,n)},onError:n})}},isItem:function(w){return this.store.isItem(w)},fetchItemByIdentity:function(w){this.store.fetchItemByIdentity(w)},getIdentity:function(w){return this.store.getIdentity(w)},getLabel:function(w){return this.labelAttr?this.store.getValue(w,this.labelAttr):this.store.getLabel(w)},newItem:function(w,d,n){var c={parent:d,attribute:this.childrenAttrs[0]},k;this.newItemIdAttr&&w[this.newItemIdAttr]?this.fetchItemByIdentity({identity:w[this.newItemIdAttr],scope:this,
onItem:function(q){q?this.pasteItem(q,null,d,!0,n):(k=this.store.newItem(w,c))&&void 0!=n&&this.pasteItem(k,d,d,!1,n)}}):(k=this.store.newItem(w,c))&&void 0!=n&&this.pasteItem(k,d,d,!1,n)},pasteItem:function(w,d,n,c,k){var q=this.store,g=this.childrenAttrs[0];d&&x.forEach(this.childrenAttrs,function(v){if(q.containsValue(d,v,w)){if(!c){var r=x.filter(q.getValues(d,v),function(t){return t!=w});q.setValues(d,v,r)}g=v}});if(n)if("number"==typeof k){var e=q.getValues(n,g).slice();e.splice(k,0,w);q.setValues(n,
g,e)}else q.setValues(n,g,q.getValues(n,g).concat(w))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(w,d){d&&this.getChildren(d.item,B.hitch(this,function(n){this.onChildrenChange(d.item,n)}))},onDeleteItem:function(w){this.onDelete(w)},onSetItem:function(w,d){if(-1!=x.indexOf(this.childrenAttrs,d))this.getChildren(w,B.hitch(this,function(n){this.onChildrenChange(w,n)}));else this.onChange(w)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(x,C,E,B,w){return C("dijit.tree.ForestStoreModel",w,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(d){this.root={store:this,root:!0,id:d.rootId,label:d.rootLabel,children:d.rootChildren}},mayHaveChildren:function(d){return d===this.root||this.inherited(arguments)},getChildren:function(d,n,c){d===this.root?this.root.children?n(this.root.children):this.store.fetch({query:this.query,onComplete:B.hitch(this,
function(k){this.root.children=k;n(k)}),onError:c}):this.inherited(arguments)},isItem:function(d){return d===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(d){if(d.identity==this.root.id){var n=d.scope||E.global;d.onItem&&d.onItem.call(n,this.root)}else this.inherited(arguments)},getIdentity:function(d){return d===this.root?this.root.id:this.inherited(arguments)},getLabel:function(d){return d===this.root?this.root.label:this.inherited(arguments)},newItem:function(d,n,c){return n===
this.root?(this.onNewRootItem(d),this.store.newItem(d)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(d,n,c,k,q){if(n===this.root&&!k)this.onLeaveRoot(d);this.inherited(arguments,[d,n===this.root?null:n,c===this.root?null:c,k,q]);if(c===this.root)this.onAddToRoot(d)},onAddToRoot:function(d){console.log(this,": item ",d," added to root")},onLeaveRoot:function(d){console.log(this,": item ",d," removed from root")},_requeryTop:function(){var d=this.root.children||[];this.store.fetch({query:this.query,
onComplete:B.hitch(this,function(n){this.root.children=n;if(d.length!=n.length||x.some(d,function(c,k){return n[k]!=c}))this.onChildrenChange(this.root,n)})})},onNewItem:function(d,n){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(d){-1!=x.indexOf(this.root.children,d)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(d,n,c,k){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),
function(x,C,E,B,w,d,n,c,k,q,g){return C("dijit.tree._dndSelector",g,{constructor:function(){this.selection={};this.anchor=null;this.events.push(c(this.tree.domNode,k.press,B.hitch(this,"onMouseDown")),c(this.tree.domNode,k.release,B.hitch(this,"onMouseUp")),c(this.tree.domNode,k.move,B.hitch(this,"onMouseMove")),c(this.tree.domNode,q.press,B.hitch(this,"onClickPress")),c(this.tree.domNode,q.release,B.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var e=[],v=this.selection,
r;for(r in v)e.push(v[r]);return e},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(e,v){this.setSelection(this.getSelectedTreeNodes().concat([e]));v&&(this.anchor=e);return e},removeTreeNode:function(e){var v=x.filter(this.getSelectedTreeNodes(),function(r){return!d.isDescendant(r.domNode,e.domNode)});this.setSelection(v);return e},isTreeNodeSelected:function(e){return e.id&&!!this.selection[e.id]},
setSelection:function(e){var v=this.getSelectedTreeNodes();x.forEach(this._setDifference(v,e),B.hitch(this,function(r){r.setSelected(!1);this.anchor==r&&delete this.anchor;delete this.selection[r.id]}));x.forEach(this._setDifference(e,v),B.hitch(this,function(r){r.setSelected(!0);this.selection[r.id]=r}));this._updateSelectionProperties()},_setDifference:function(e,v){x.forEach(v,function(r){r.__exclude__=!0});e=x.filter(e,function(r){return!r.__exclude__});x.forEach(v,function(r){delete r.__exclude__});
return e},_updateSelectionProperties:function(){var e=this.getSelectedTreeNodes(),v=[],r=[];x.forEach(e,function(t){var b=t.getTreePath();r.push(t);v.push(b)},this);e=x.map(r,function(t){return t.item});this.tree._set("paths",v);this.tree._set("path",v[0]||[]);this.tree._set("selectedNodes",r);this.tree._set("selectedNode",r[0]||null);this.tree._set("selectedItems",e);this.tree._set("selectedItem",e[0]||null)},onClickPress:function(e){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(e.target,
this.current))){"mousedown"==e.type&&n.isLeft(e)&&e.preventDefault();var v="keydown"==e.type?this.tree.focusedChild:this.current;if(v){var r=w.getCopyKeyState(e),t=v.id;this.singular||e.shiftKey||!this.selection[t]?(this._doDeselect=!1,this.userSelect(v,r,e.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(e){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==e.type?this.tree.focusedChild:this.current,w.getCopyKeyState(e),e.shiftKey))},onMouseMove:function(){this._doDeselect=
!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(e,v){if(e===v)return 0;if("sourceIndex"in document.documentElement)return e.sourceIndex-v.sourceIndex;if("compareDocumentPosition"in document.documentElement)return e.compareDocumentPosition(v)&2?1:-1;if(document.createRange){var r=doc.createRange();r.setStartBefore(e);e=doc.createRange();e.setStartBefore(v);return r.compareBoundaryPoints(r.END_TO_END,e)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");
},userSelect:function(e,v,r){if(this.singular)this.anchor==e&&v?this.selectNone():(this.setSelection([e]),this.anchor=e);else if(r&&this.anchor){v=this._compareNodes(this.anchor.rowNode,e.rowNode);r=this.anchor;0>v?v=r:(v=e,e=r);for(r=[];v!=e;)r.push(v),v=this.tree._getNext(v);r.push(e);this.setSelection(r)}else this.selection[e.id]&&v?this.removeTreeNode(e):v?this.addTreeNode(e,!0):(this.setSelection([e]),this.anchor=e)},getItem:function(e){return{data:this.selection[e],type:["treeNode"]}},forInSelectedItems:function(e,
v){v=v||E.global;for(var r in this.selection)e.call(v,this.getItem(r),r,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(x,C,E,B,w,d){return C("dijit.tree._dndContainer",null,{constructor:function(n,c){this.tree=n;this.node=n.domNode;B.mixin(this,c);this.containerState="";E.add(this.node,"dojoDndContainer");this.events=[w(this.node,d.enter,B.hitch(this,"onOverEvent")),w(this.node,d.leave,
B.hitch(this,"onOutEvent")),x.after(this.tree,"_onNodeMouseEnter",B.hitch(this,"onMouseOver"),!0),x.after(this.tree,"_onNodeMouseLeave",B.hitch(this,"onMouseOut"),!0),w(this.node,"dragstart, selectstart",function(k){k.preventDefault()})]},destroy:function(){for(var n;n=this.events.pop();)n.remove();this.node=this.parent=null},onMouseOver:function(n){this.current=n},onMouseOut:function(){this.current=null},_changeState:function(n,c){var k="dojoDnd"+n;n=n.toLowerCase()+"State";E.replace(this.node,k+
c,k+this[n]);this[n]=c},_addItemClass:function(n,c){E.add(n,"dojoDndItem"+c)},_removeItemClass:function(n,c){E.remove(n,"dojoDndItem"+c)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/dijit/QueryableServiceChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/QueryableServiceChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/QueryableServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(x,C,E,B,w,d,n,c,k,q,g,e,v,r,t,b,f){return x([C,E,B,e],{templateString:w,declaredClass:"jimu.dijit.QueryableServiceChooserFromPortal",baseClass:"jimu-service-chooser-from-portal jimu-queryable-service-chooser-from-portal",_serviceBrowserDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=d.mixin({},window.jimuNls.common);this.nls=d.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal);this.portalUrl=b.getStandardPortalUrl(this.portalUrl);this.multiple=!0===this.multiple?
!0:!1},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},_initSelf:function(){this.selector=new r({portalUrl:this.portalUrl,itemTypes:["Feature Service","Map Service","Image Service"],onlyShowOnlineFeaturedItems:!1});this.own(k(this.selector,"item-selected",d.hitch(this,this._onItemSelected)));this.own(k(this.selector,"none-item-selected",d.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);
this.selector.startup();this.serviceBrowser=new t({multiple:this.multiple});this.own(k(this.serviceBrowser,"tree-click",d.hitch(this,this._onServiceBrowserClicked)));this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup()},_onItemSelected:function(){n.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){n.addClass(this.btnNext,"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceBrowserDef&&!this._serviceBrowserDef.isFulfilled()&&
this._serviceBrowserDef.cancel();n.setStyle(this.btnOk,"display","none");n.setStyle(this.btnNext,"display","block");n.setStyle(this.btnBack,"display","none");n.addClass(this.btnOk,"jimu-state-disabled");n.setStyle(this.selectorContainer,"display","block");n.setStyle(this.serviceBrowserContainer,"display","none");this.serviceBrowser.reset();this.emit("back")},_onBtnOkClicked:function(){var p=this.selector.getSelectedItem(),z=this.getSelectedItems();p&&0<z.length&&(c.forEach(z,d.hitch(this,function(a){a.portalUrl=
p.portalUrl;a.itemId=p.id})),this.emit("ok",z))},_onBtnNextClicked:function(){var p=this.selector.getSelectedItem();p&&(n.setStyle(this.btnNext,"display","none"),n.setStyle(this.btnBack,"display","block"),n.setStyle(this.btnOk,"display","block"),n.addClass(this.btnOk,"jimu-state-disabled"),n.setStyle(this.selectorContainer,"display","none"),n.setStyle(this.serviceBrowserContainer,"display","block"),this.serviceBrowser.reset(),this._serviceBrowserDef=this.serviceBrowser.setUrl(p.url||p.item),this._serviceBrowserDef.then(d.hitch(this,
function(){this._serviceBrowserDef=null;this._setOkStateBySelectedItems()}),d.hitch(this,function(){this._serviceBrowserDef=null})),this.emit("next"))},_setOkStateBySelectedItems:function(){0<this.serviceBrowser.getSelectedItems().length?n.removeClass(this.btnOk,"jimu-state-disabled"):n.addClass(this.btnOk,"jimu-state-disabled")},_onServiceBrowserClicked:function(){this._setOkStateBySelectedItems()},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on dojo/dom-style jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable jimu/dijit/BindLabelPropsMixin dijit/form/RadioButton".split(" "),
function(x,C,E,B,w,d,n,c,k,q,g,e,v,r,t,b,f,p,z,a,l,A,D,G,F){return x([E,B,w,F,n],{templateString:d,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,showMyContent:!0,showMyOrganization:!0,showMyGroups:!0,showPublic:!0,showOnlyEditableGroups:!1,postMixInProperties:function(){this.portalUrl=a.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";q.forEach(this.itemTypes,c.hitch(this,function(m,y){this._itemTypes+=
'"'+m+'"';y!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";q.forEach(this.typeKeywords,c.hitch(this,function(m,y){this._typeKeywords+='"'+m+'"';y!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var m=this._getPortalUrl();
this.portal=p.getPortal(m);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=f.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=f.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){var m={title:this.nls.myContent,content:this.mycontentTabNode},y={title:this.nls.myOrganization,content:this.organizationTabNode},
I={title:this.nls.myGroup,content:this.groupTabNode},L={title:this.nls.publicMap,content:this.publicTabNode};b.set(this.mycontentTabNode,"display","none");b.set(this.organizationTabNode,"display","none");b.set(this.groupTabNode,"display","none");b.set(this.publicTabNode,"display","none");var M=[];this.showMyContent&&(M.push(m),b.set(this.mycontentTabNode,"display","block"));this.showMyOrganization&&(M.push(y),b.set(this.organizationTabNode,"display","block"));this.showMyGroups&&(M.push(I),b.set(this.groupTabNode,
"display","block"));this.showPublic&&(M.push(L),b.set(this.publicTabNode,"display","block"));this.tab=new D({tabs:M},this.tabNode);this.own(t(this.tab,"tabChanged",c.hitch(this,function(O){g.setStyle(this.signinSection,"display","none");O!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){g.setStyle(this.signinSection,"display","none");var m=r(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",
this.domNode);z.userHaveSignInPortal(this._getPortalUrl())?m.style("display","block"):(m.style("display","none"),this._isPublicTabShow||g.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){var m=this._getPortalUrl();m=a.getServerByUrl(m);this.portalPublicRaido.set("disabled",!1);this.onlinePublicRaido.set("disabled",!1);this.portalPublicRaido.set("checked",!0);var y=!1;a.isArcGIScom(m)?(y=!0,this.portalPublicLabel.innerHTML="ArcGIS.com"):(this.portalPublicLabel.innerHTML=
m,y=this.showOnlineItems?!1:!0);y&&(this.onlinePublicRaido.set("disabled",!0),g.setStyle(this.onlinePublicRaido,"display","none"),g.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var m="esri_"+(k.locale&&k.locale.slice(0,2)||"en").toLowerCase(),y=q.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
c.hitch(this,function(L){return L!==m})),I="";q.forEach(y,c.hitch(this,function(L){I+=" -owner:"+L+" "}));y=" ";this.portal&&this.portal.user&&this.portal.user.orgId&&(y=" orgid:"+this.portal.user.orgId+" ");y=y+this._itemTypeQueryString+" AND access:public "+I+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:y});this._filterPublicPortalQuery=this._getQuery({q:y,basicQ:y});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(m){return c.mixin({start:1,num:16,f:"json"},m||{})},_getPortalUrl:function(){return a.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(t(this.publicPortalItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(t(this.publicOnlineItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(t(this.organizationItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(t(this.groupItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));
this.own(t(this.mycontentItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(t(this.publicPortalItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(t(this.publicOnlineItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(t(this.organizationItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(t(this.groupItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(t(this.mycontentItemTable,"update",c.hitch(this,this._onItemTableUpdate)));
var m=this._getPortalUrl();this.portalPublicRaido.get("disabled")||(this.publicPortalItemTable.set("portalUrl",m),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.get("disabled")||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",
this._filterPublicOnlineQuery))},_initPublic:function(){this.own(t(this.portalPublicRaido,"click",c.hitch(this,this._onPublicRaidoClicked)));this.own(t(this.onlinePublicRaido,"click",c.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.get("checked")?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.get("checked")&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},
_onPublicSearch:function(m){(m=m&&c.trim(m))?(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.get("checked")?(this._filterPublicPortalQuery.q=m+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.get("checked")&&(this._filterPublicOnlineQuery.q=m+" "+this._itemTypeQueryString+" AND access:public "+
this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(t(this.groupsSelect,"change",c.hitch(this,this._onGroupsSelectChange)));var m=a.getServerByUrl(this._getPortalUrl());a.isArcGIScom(m)&&(m="ArcGIS.com");z.userHaveSignInPortal(this._getPortalUrl())&&
this._onSignIn()},_onOrganizationSearch:function(m){if(m=m&&c.trim(m)){if(this._allOrganizationQuery){var y=this._allOrganizationQuery.q;y&&(this._filterOrganizationQuery.q=m+" "+y,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(m){if(m=m&&c.trim(m)){if(this._allMyContentQuery){var y=this._allMyContentQuery.q;y&&(this._filterMyContentQuery.q=m+" "+
y,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},_onGroupSearch:function(m){if(m=m&&c.trim(m)){if(this._allGroupQuery){var y=this._allGroupQuery.q;y&&(this._filterGroupQuery.q=m+" "+y,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=
!0;var m=this._getPortalUrl();p.getPortal(m).getUser().then(c.hitch(this,function(y){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(y),this._searchMyContent(y),this._searchGroups(y))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(m){this.organizationItemTable.clear();m=" orgid:"+m.orgId+
" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var y=this._getPortalUrl();this._allOrganizationQuery=this._getQuery({q:m});this._filterOrganizationQuery=this._getQuery({q:m});this.organizationItemTable.set("portalUrl",y);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(m){this.mycontentItemTable.clear();var y=this._getPortalUrl();m="owner:"+m.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;
this._allMyContentQuery=this._getQuery({q:m});this._filterMyContentQuery=this._getQuery({q:m});this.mycontentItemTable.set("portalUrl",y);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(m){this._resetGroupsSection();g.setStyle(this.groupsSection,"display","flex");m=m.getGroups();if(0<m.length){g.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();g.empty(this.groupsSelect);for(var y=0;y<m.length;y++){var I=m[y];g.create("option",
{value:I.id,innerHTML:I.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(m.length)},_resetGroupsSection:function(){g.setStyle(this.groupsSection,"display","none");g.empty(this.groupsSelect);g.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();g.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(m){0===m?g.setStyle(this.groupsSection,
"top","15px"):g.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var m=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===m)g.setStyle(this.groupSearch,"display","none"),this.groupItemTable.hide();else{g.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var y=this._getPortalUrl();m="group:"+m+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:m});this._filterGroupQuery=this._getQuery({q:m});
this.groupItemTable.set("portalUrl",y);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(m){var y=g.hasClass(m,"jimu-state-active");r(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");y&&g.addClass(m,"jimu-state-active");(m=this.getSelectedItem())?this.emit("item-selected",m):this.emit("none-item-selected")},getSelectedItem:function(){var m=null,y=r(".item.jimu-state-active",this.domNode);
0<y.length&&(m=c.mixin({},y[0].item));return m}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),function(x,C,E,B,w,d,n,c,k,q,g,e,v,r,t,b){return x([C,E,B,d],{templateString:w,declaredClass:"jimu.dijit.ItemTable",
baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"desktopapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=t.getStandardPortalUrl(this.portalUrl));
this.showAllItemsSection();this.searchAllItems()},show:function(){k.setStyle(this.domNode,"display","block")},hide:function(){k.setStyle(this.domNode,"display","none")},searchAllItems:function(f){this.showAllItemsSection();f&&(this.query=n.mixin({},f),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),r.getPortal(this.portalUrl).queryItems(this.query).then(n.hitch(this,function(p){this.domNode&&(this.allItemsShelter.hide(),
this.query.start=p.nextStart,this._createItems(p,this.allItemTbody))}),n.hitch(this,function(p){console.error(p);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(f){this.showFilterItemsSection();f&&(this.filteredQuery=n.clone(f),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&(this.filteredItemShelter.show(),r.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(n.hitch(this,function(p){this.domNode&&
(this.showFilterItemsSection(),f&&this.clearFilteredItemsSection(),this.filteredQuery.start=p.nextStart,this._createItems(p,this.filteredItemsTbody),this._filterItemCallback())}),n.hitch(this,function(p){console.error(p);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?(k.setStyle(this.filteredItemsTableDiv,"display","block"),k.setStyle(this.searchNoneTipSection,"display","none")):(k.setStyle(this.filteredItemsTableDiv,
"display","none"),k.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){k.empty(this.allItemTbody)},clearFilteredItemsSection:function(){k.empty(this.filteredItemsTbody)},showAllItemsSection:function(){k.setStyle(this.allItemsSection,"display","block");k.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){k.setStyle(this.allItemsSection,"display","none");
k.setStyle(this.filteredItemsSection,"display","block");k.setStyle(this.filteredItemsTableDiv,"display","block");k.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&this.searchFilteredItems()},_isScrollToBottom:function(f){return v.isScrollToBottom(f)},_createItems:function(f,p){f=f.results;var z=
c.map(this.types,n.hitch(this,function(m){return m.toLowerCase()}));f=c.filter(f,n.hitch(this,function(m){m=m.type&&m.type.toLowerCase()||"";return 0<=c.indexOf(z,m)}));if(0!==f.length){var a=g("td.empty",p),l;if(0<a.length){var A=Math.min(f.length,a.length),D=f.splice(0,A);for(l=0;l<A;l++){var G=a[l];var F=this._createItem(D[l]);k.place(F,G);k.removeClass(G,"empty")}}if(0!==f.length){a=Math.ceil(f.length/2);for(l=0;l<a;l++)for(F=k.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e"),
k.place(F,p),A=g("td",F),D=0;D<A.length;D++)G=A[D],(F=f[2*l+D])?(F=this._createItem(F),k.place(F,G)):k.addClass(G,"empty");this.emit("update")}}},_getItemCount:function(f){return g(".item",f).length},_createItem:function(f){var p=k.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
p.item=f;var z=g(".item-thumbnail",p)[0],a=g(".item-name",p)[0],l=g(".item-type-owner",p)[0],A=g(".item-date",p)[0],D=g(".item-details",p)[0],G=g(".none-thumbnail-tip",p)[0];if(!f.thumbnailUrl){var F=this._defaultThumbnail[f.type];F&&(f.thumbnailUrl=require.toUrl("jimu")+"/images/"+F)}f.thumbnailUrl?k.setStyle(z,"backgroundImage","url("+f.thumbnailUrl+")"):G.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(A=g(".item-info",p)[0],this.onCreateItemContent(f,A)):(a.innerHTML=
f.title,a.title=a.innerHTML,l.innerHTML=f.type+" by "+f.owner,l.title=l.innerHTML,z=new Date,z.setTime(f.modified),A.innerHTML=z.toLocaleString(),A.title=A.innerHTML,D.innerHTML=this.nls.moreDetails,D.href=f.detailsPageUrl||"#");return p},_onItemsTableClicked:function(f){var p=f.target||f.srcElement;f=null;k.hasClass(p,"item-thumbnail")?f=p.parentNode:k.hasClass(p,"none-thumbnail-tip")&&(f=p.parentNode.parentNode);f&&(p=k.hasClass(f,"jimu-state-active"),g(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
p?k.removeClass(f,"jimu-state-active"):k.addClass(f,"jimu-state-active"),this.emit("item-dom-clicked",f))},getSelectedItem:function(){var f=null,p=g(".item.jimu-state-active",this.domNode);0<p.length&&(f=n.mixin({},p[0].item));return f}})})},"jimu/dijit/QueryableServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(x,C,E,B,w){return x([C],{declaredClass:"jimu.dijit.QueryableServiceBrowser",baseClass:"jimu-queryable-service-browser",
url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=w.getQueryableServiceBrowserRule()},getSelectedItems:function(){var d=this.inherited(arguments);return d=B.map(d,E.hitch(this,function(n){return{name:n.name,url:n.url,definition:n.definition}}))}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingIndicator".split(" "),
function(x,C,E,B,w,d,n,c,k,q,g,e,v,r,t){return x([C,E,B,w],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);n.addClass(this.domNode,
"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(b){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new k;b&&"string"===typeof b&&b.replace(/\/*$/g,"")||this._def.reject();b=b.replace(/\/*$/g,"");b=d.trim(b);var f=b.match(/^http(s?):\/\//gi);f&&0<f.length||
(b="http://"+b);if(!(0>=b.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=b))return b=this._getRootItem(),b=r.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,b):this._isUrlContainsServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,b):this._searchFolderServiceUrl(this._currentUrl,b),this.shelter.show(),b.then(d.hitch(this,function(p){this.domNode&&this.shelter.hide();var z=this.tree.getAllLeafTreeNodeWidgets();1===z.length&&
z[0].select();this._def.resolve(p)}),d.hitch(this,function(p){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(p)})),this._def;this._def.reject()},_getItem:function(b){return this.rule.getItem(b)},_getSubItemUrls:function(b){return this.rule.getSubItemUrls(b)},_getSubItems:function(b){var f=new k;this._getSubItemUrls(b).then(d.hitch(this,function(p){p=c.map(p,d.hitch(this,function(z){return this._getItem(z)}));q(p).then(d.hitch(this,function(z){z=c.filter(z,d.hitch(this,
function(a){return a&&"object"===typeof a}));f.resolve(z)}),d.hitch(this,function(z){f.reject(z)}))}),d.hitch(this,function(p){f.reject(p)}));return f},_selectFirstLeafTreeNodeWidget:function(){var b=this.tree.getAllLeafTreeNodeWidgets();1===b.length&&b[0].select()},isLeafItem:function(b){return 0<=this.rule.leafTypes.indexOf(b.type)},isServiceTypeSupported:function(b){return this.rule.isServiceTypeSupported(b)},_getStringEndWith:function(b,f){var p="",z=b.indexOf(f);0<=z&&(p=b.slice(0,z+f.length));
return p},_isUrlContainsServiceType:function(b){return this.rule.isUrlContainsServiceType(b)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(b){var f="";b=b.split("/");return f=b[b.length-1]},_searchBaseServiceUrl:function(b,f){var p=new k;this._getRestInfo(b).then(d.hitch(this,function(z){if(this.domNode){var a=[];c.map(z.folders,d.hitch(this,function(l){var A={name:l,type:"folder",url:b+"/"+l,parent:f.id};this._addItem(A);
var D=new k;this._doSearchFolderServiceUrl(A.url,A.id).then(d.hitch(this,function(G){0<G.length?c.forEach(G,d.hitch(this,function(F){F.parent=A.id;this._addItem(F)})):this._removeItem(A.id);D.resolve()}),d.hitch(this,function(G){D.reject(G)}));a.push(D);return D}));c.forEach(z.services,d.hitch(this,function(l){if(this.isServiceTypeSupported(l.type)){l=b+"/"+l.name+"/"+l.type;var A=new k;this.rule.getItem(l).then(d.hitch(this,function(D){D&&(D.parent=f.id,this._addItem(D));A.resolve()}),d.hitch(this,
function(D){console.error(D);A.reject(D)}));a.push(A)}}));q(a).then(d.hitch(this,function(){this.domNode&&p.resolve()}),d.hitch(this,function(l){console.error(l);this.domNode&&p.reject(l)}))}}),d.hitch(this,function(z){console.error(z);this.domNode&&p.reject({errorCode:"NETWORK_ERROR",error:z})}));return p},_searchFolderServiceUrl:function(b,f){var p=new k;this._doSearchFolderServiceUrl(b,f).then(d.hitch(this,function(z){this.domNode&&(c.forEach(z,d.hitch(this,function(a){a.parent=f.id;this._addItem(a)})),
p.resolve())}),d.hitch(this,function(z){console.error(z);this.domNode&&p.reject({errorCode:"NETWORK_ERROR",error:z})}));return p},_doSearchFolderServiceUrl:function(b){var f=new k,p=this._getBaseServiceUrl();this._getRestInfo(b).then(d.hitch(this,function(z){z=z.services;var a=[];z&&0<z.length&&c.forEach(z,d.hitch(this,function(l){this.isServiceTypeSupported(l.type)&&(l=this.rule.getItem(p+"/"+l.name+"/"+l.type),a.push(l))}));q(a).then(d.hitch(this,function(l){l=c.filter(l,d.hitch(this,function(A){return A}));
f.resolve(l)}),d.hitch(this,function(l){console.error(l);f.reject(l)}))}),d.hitch(this,function(z){console.error(z);f.reject(z)}));return f},_searchServiceUrl:function(b,f){var p=new k;this._getSubItems(b).then(d.hitch(this,function(z){z&&0<z.length?(c.forEach(z,d.hitch(this,function(a){a.parent=f.id;this._addItem(a)})),p.resolve()):this._getItem(b).then(d.hitch(this,function(a){a&&(a.parent=f.id,this._addItem(a));p.resolve()}),d.hitch(this,function(a){p.reject(a)}))}),d.hitch(this,function(z){p.reject(z)}));
return p},_getRestInfo:function(b){var f=new k;this.rule.getRestInfo(b).then(d.hitch(this,function(p){this.domNode&&f.resolve(p)}),d.hitch(this,function(p){this.domNode&&f.reject(p)}));return f},_clear:function(){var b=this._store.query({parent:"root"});c.forEach(b,d.hitch(this,function(f){f&&"root"!==f.id&&this._store.remove(f.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(b){this._id++;b.id=this._id.toString();this._store.add(b);return b},_removeItem:function(b){this._store.remove(b)},
_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var b=this._getRootItem();b=new g({data:[b],getChildren:function(f){return this.query({parent:f.id})}});this._store=new e(b);b=new v({store:this._store,query:{id:"root"},mayHaveChildren:d.hitch(this,this._mayHaveChildren)});this.tree=new t({multiple:this.multiple,model:b,showRoot:!1,style:{width:"100%"},isLeafItem:d.hitch(this,this.isLeafItem),onOpen:d.hitch(this,function(f,p){this._onTreeOpen(f,p);
this.emit("tree-open",f,p)}),onClick:d.hitch(this,function(f,p,z){this._onTreeClick(f,p,z);this.emit("tree-click",f,p,z)}),getIconStyle:d.hitch(this,function(f,p){var z=null;if(!f)return null;var a={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},l=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),A=this._getIconImageName(f,p);A||("folder"===f.type?A=p?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(f.type)&&
(A=p?"folder_open_default.png":"folder_close_default.png"));A&&(a.backgroundImage="url("+l+"/css/images/"+A+")",z=a);return z})});n.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(b,f){var p="";"function"===typeof this.rule.getIconImageName&&(p=this.rule.getIconImageName(b,f));return p},_mayHaveChildren:function(b){return"root"===b.type?!0:!this.isLeafItem(b)},_onTreeOpen:function(b,f){"root"===b.id||0<this._store.query({parent:b.id}).length||
b.checking||b.checked||(b.checking=!0,this._getSubItems(b.url).then(d.hitch(this,function(p){c.forEach(p,d.hitch(this,function(z){z.parent=b.id;this._addItem(z)}));b.checking=!1;b.checked=!0}),d.hitch(this,function(p){console.error(p);b.checking=!1;b.checked=!0})))},_onTreeClick:function(b,f,p){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/Deferred",
"jimu/utils","jimu/ServiceBrowserRule"],function(x,C,E,B,w){var d={combineRules:function(n){var c=new w;C.forEach(n,function(k){C.forEach(k.leafTypes,function(q){0>c.leafTypes.indexOf(q)&&c.leafTypes.push(q)});C.forEach(k.serviceTypes,function(q){0>c.serviceTypes.indexOf(q)&&c.serviceTypes.push(q)})});c.getMatchedRule=function(k){var q=null;C.some(n,function(g){return g.isUrlContainsServiceType(k)?(q=g,!0):!1});return q};c.getItem=function(k){var q=null;return q=(q=c.getMatchedRule(k))?q.getItem(k):
c.defaultGetItem(k)};c.getSubItemUrls=function(k){var q=null;return q=(q=c.getMatchedRule(k))?q.getSubItemUrls(k):c.defaultGetSubItemUrls(k)};c.getIconImageName=function(k,q){var g="";if(k.url){var e=c.getMatchedRule(k.url);e&&"function"===typeof e.getIconImageName&&(g=e.getIconImageName(k,q))}return g};return c},getFeaturelayerServiceBrowserRule:function(n,c,k){n=x.clone(n);var q=["point","polyline","polygon"];x.isArrayLike(n)&&0<n.length?(n=C.filter(n,function(g){return 0<=q.indexOf(g)}),0===n.length&&
(n=q)):n=q;return d._getFeaturelayerServiceBrowserRule(n,c,k)},_getFeaturelayerServiceBrowserRule:function(n,c,k){return new w({types:n,leafTypes:["Feature Layer","Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",getItem:function(q){var g=new E;this.isUrlEndWithServiceType(q,this.serviceTypes)?g=this.defaultGetItem(q):this.getRestInfo(q).then(x.hitch(this,function(e){e=this._getItemByLayerDefinition(q,e);g.resolve(e)}),
x.hitch(this,function(e){g.reject(e)}));return g},getSubItemUrls:function(q){var g=new E;return g=this.isUrlEndWithServiceType(q)?this._getSubUrlsByServiceUrl(q):this._getSubUrlsByGroupUrl(q)},getIconImageName:function(q,g){var e="";"MapServer"===q.type||"FeatureServer"===q.type?e=g?"mapserver_open.png":"mapserver_close.png":q.type===this._groupLayerType?e=g?"group_layer2.png":"group_layer1.png":q.type===this._featureLayerType?(q=B.getTypeByGeometryType(q.definition&&q.definition.geometryType),"point"===
q?e="point_layer1.png":"polyline"===q?e="line_layer1.png":"polygon"===q&&(e="polygon_layer1.png")):q.type===this._tableType?e="table.png":"root"===q.type&&this._currentUrl&&C.some(this.serviceTypes,x.hitch(this,function(v){return B.isStringEndWith(this._currentUrl,"/"+v)}))&&(e=g?"mapserver_open.png":"mapserver_close.png");return e},_getSubUrlsByServiceUrl:function(q){var g=new E;this.getRestInfo(q).then(x.hitch(this,function(e){var v=[];C.forEach(e.layers,x.hitch(this,function(r){0<=r.parentLayerId||
v.push(q+"/"+r.id)}));k&&C.forEach(e.tables,x.hitch(this,function(r){0<=r.parentLayerId||v.push(q+"/"+r.id)}));g.resolve(v)}),x.hitch(this,function(e){g.reject(e)}));return g},_getSubUrlsByGroupUrl:function(q){var g=new E;this.getRestInfo(q).then(x.hitch(this,function(e){var v=[];if(e.type===this._groupLayerType){var r=this._getServiceUrlByLayerUrl(q);v=C.map(e.subLayers||[],x.hitch(this,function(t){return r+"/"+t.id}))}g.resolve(v)}),x.hitch(this,function(e){g.reject(e)}));return g},_getItemByLayerDefinition:function(q,
g){var e=null,v=g.type;if(v===this._groupLayerType)e={name:g.name,type:v,url:q,definition:g};else if(v===this._featureLayerType||v===this._tableType){var r=!1;v===this._featureLayerType?r=this._validateEsriGeometryType(g.geometryType):v===this._tableType&&(r=!0);r&&(r=!1,(r=c?B.isFeaturelayerUrlSupportQuery(q,g.capabilities):!0)&&(e={name:g.name,type:v,url:q,definition:g}))}return e},_validateEsriGeometryType:function(q){q=B.getTypeByGeometryType(q);return 0<=this.types.indexOf(q)},_getServiceUrlByLayerUrl:function(q){for(var g=
"",e=0;e<this.serviceTypes.length;e++){var v=this.serviceTypes[e].toLowerCase(),r=q.toLowerCase().lastIndexOf("/"+v+"/");if(0<=r){g=q.slice(0,r+v.length+1);break}}return g}})},getGeocodeServiceBrowserRule:function(){return new w({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},getGpServiceBrowserRule:function(){return new w({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(n){var c=new E;this.isUrlEndWithServiceType(n)?c=this.defaultGetItem(n):this.getRestInfo(n).then(x.hitch(this,
function(k){c.resolve({name:k.displayName||k.name,type:"GPTask",url:n,definition:k})}),x.hitch(this,function(k){c.reject(k)}));return c},getSubItemUrls:function(n){var c=new E;this.isUrlEndWithServiceType(n)?this.getRestInfo(n).then(x.hitch(this,function(k){k=C.map(k.tasks||[],x.hitch(this,function(q){return n+"/"+q}));c.resolve(k)}),x.hitch(this,function(k){c.reject(k)})):c.resolve([]);return c},getIconImageName:function(n,c){c="";"GPServer"===n.type?c="toolbox.png":"GPTask"===n.type&&(c="tool.png");
return c}})},getImageServiceBrowserRule:function(n){return new w({leafTypes:["ImageServer"],serviceTypes:["ImageServer"],getItem:function(c){var k=new E;this.isUrlEndWithServiceType(c)?this.defaultGetItem(c).then(x.hitch(this,function(q){n?B.isImageServiceSupportQuery(q.definition.capabilities)?k.resolve(q):k.resolve(null):k.resolve(q)}),x.hitch(this,function(q){k.reject(q)})):k.resolve(null);return k},getIconImageName:function(c,k){k="";"ImageServer"===c.type&&(k="image_layer.png");return k}})},
getQueryableServiceBrowserRule:function(){var n=d.getFeaturelayerServiceBrowserRule(["point","polyline","polygon"],!0,!0),c=d.getImageServiceBrowserRule(!0);return d.combineRules([n,c])}};return d})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),function(x,C,E,B,w,d,n){return x([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(c){C.mixin(this,c);C.isArrayLike(this.leafTypes)||
(this.leafTypes=[]);C.isArrayLike(this.serviceTypes)||(this.serviceTypes=[])},getItem:function(c){return this.defaultGetItem(c)},getSubItemUrls:function(c){return this.defaultGetSubItemUrls(c)},getIconImageName:function(c,k){return""},defaultGetItem:function(c){var k=new B;c=c.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(c)){var q=c.split("/"),g=q[q.length-1],e=q[q.length-2];this.getRestInfo(c).then(C.hitch(this,function(v){k.resolve({name:e,type:g,url:c,definition:v})}),C.hitch(this,function(v){console.error(v);
k.reject({errorCode:"NETWORK_ERROR",error:v})}))}else k.resolve(null);return k},defaultGetSubItemUrls:function(c){c=new B;c.resolve([]);return c},getRestInfo:function(c){var k=new B;c=c.replace(/\/*$/g,"");var q=this._restInfoCache[c];if(q)k.resolve(q);else{q={url:c,content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4};var g=n.findCredential(c);g&&g.token&&(q.content.token=g.token);d(q).then(C.hitch(this,function(e){this._restInfoCache[c]=e;k.resolve(e)}),function(e){k.reject(e)})}return k},
isServiceTypeSupported:function(c){c=c.toLowerCase();return E.some(this.serviceTypes,C.hitch(this,function(k){return k.toLowerCase()===c}))},isUrlEndWithServiceType:function(c){return E.some(this.serviceTypes,C.hitch(this,function(k){return w.isStringEndWith(c,"/"+k)}))},isUrlContainsServiceType:function(c){c=c.toLowerCase();return E.some(this.serviceTypes,C.hitch(this,function(k){k=k.toLowerCase();return 0<=c.indexOf("/"+k)}))}})})},"jimu/dijit/_QueryableServiceChooserContent":function(){define(["dojo/_base/declare",
"./_BasicServiceChooserContent","./QueryableServiceBrowser"],function(x,C,E){return x([C],{baseClass:"jimu-queryable-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/myservice/MapServer","http://myserver/arcgis/rest/services/myservice/FeatureServer","http://myserver/arcgis/rest/services/myservice/ImageServer"],_createServiceBrowser:function(B){return new E(B)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),
function(x,C,E,B,w,d,n,c,k,q,g,e,v,r,t){return x([C,E,B,d],{templateString:w,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=q.mixin({},window.jimuNls.common);this.nls=q.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
c.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(b){var f=new n;(this.url=b)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),f=this._onBtnValidateClick()):f.reject();return f},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?k.forEach(this._examples,q.hitch(this,function(f){c.create("div",{innerHTML:f,
"class":"example-url"},this.exampleTd)})):c.setStyle(this.exampleTr,"display","none");var b={multiple:this.multiple,_onTreeClick:q.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(b);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(e.after(this.urlInput,"validator",q.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(g(this.serviceBrowser,"error",q.hitch(this,
this._onServiceBrowserError)))},_createServiceBrowser:function(b){},_validateUrl:function(b){b=b.replace(/\/*$/g,"");if((b=b.match(/\/rest\/services\/*(.*)/gi))&&0<b.length)if(b=b[0].replace(/\/rest\/services\/*/,"")){var f=b.split("/");if(1===f.length)return!0;if(2===f.length)return this.serviceBrowser.isServiceTypeSupported(f[1]);if(3<=f.length)return b=this.serviceBrowser.isServiceTypeSupported(f[1]),f=this.serviceBrowser.isServiceTypeSupported(f[2]),b||f}else return!0;else return!1},_afterUrlValidate:function(b){b&&
(b=this.urlInput.get("value"),b=this._validateUrl(b));b?c.removeClass(this.btnValidate,"jimu-state-disabled"):c.addClass(this.btnValidate,"jimu-state-disabled");return b},_onServiceBrowserError:function(b){this._showErrorMessage(b)},_showErrorMessage:function(b){b&&"string"===typeof b?(this.errorNode.innerHTML=b,c.addClass(this.errorSection,"visible")):c.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";c.removeClass(this.errorSection,"visible")},
_onBtnValidateClick:function(){this._clearErrorMessage();var b=new n;if(this.urlInput.validate()){var f=this.urlInput.get("value");this.serviceBrowser.setUrl(f).then(q.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();b.resolve()}),q.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();b.reject()}));this.emit("validate-click")}else b.reject();return b},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?c.removeClass(this.btnOk,"jimu-state-disabled"):
c.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var b=this.getSelectedItems();0<b.length&&this.emit("ok",b)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"widgets/Query/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/Deferred jimu/utils jimu/portalUrlUtils jimu/LayerInfos/LayerInfos esri/request esri/kernel esri/symbols/PictureMarkerSymbol esri/symbols/jsonUtils".split(" "),function(x,
C,E,B,w,d,n,c,k,q){return{getDefaultPopupInfo:function(g,e,v){var r={title:"",fieldInfos:[],description:null,showAttachments:!1,mediaInfos:[]};v=!!v;if(g.displayField){var t=this._getRealFieldName(g.displayField,g);r.title="{"+t+"}"}else if(t=B.getObjectIdField(g))r.title="{"+t+"}";r.showAttachments=!!g.hasAttachments;t=g=g.fields;e||(t=C.filter(g,x.hitch(this,function(b){return"esriFieldTypeGeometry"!==b.type})));e=C.map(t,x.hitch(this,function(b){b=B.getDefaultPortalFieldInfo(b);b.visible=v;return b}));
r.fieldInfos=e;return r},_getRealFieldName:function(g,e){g=g.toUpperCase();if(e.fields&&0<e.fields.length)for(var v=0;v<e.fields.length;v++)if(e.fields[v].name.toUpperCase()===g)return e.fields[v].name;return""},getPortalFieldInfosWithoutShape:function(g,e){return C.filter(e,x.hitch(this,function(v){return(v=B.getFieldInfoByFieldName(g.fields,v.fieldName))?"esriFieldTypeGeometry"!==v.type:!0}))},getPopupInfoByAttributes:function(g,e){var v=this.getDefaultPopupInfo(g,!1),r=[],t={},b;for(b in e){r.push(b);
var f=B.getFieldInfoByFieldName(g.fields,b).type;if("esriFieldTypeSingle"===f||"esriFieldTypeDouble"===f)f=e[b],null!==f&&void 0!==f&&(f=parseFloat(f),isNaN(f)||(f=f.toString().split("."),2===f.length&&(t[b]=f[1].length)))}v.fieldInfos=C.filter(v.fieldInfos,x.hitch(this,function(p){var z=p.fieldName;t.hasOwnProperty(z)&&(p.format.places=t[z]);return r.indexOf(z)}));return v},upgradePopupToPopupInfo:function(g,e){var v=this.getDefaultPopupInfo(g,!1,!1);v.title=e.title||"";v.title=v.title.replace("${",
"{");if(e.fields){var r={};C.forEach(e.fields,x.hitch(this,function(t){r[t.name]=t}));C.forEach(v.fieldInfos,x.hitch(this,function(t){var b=t.fieldName,f=r[b];f&&(t.label=f.alias||t.label,t.visible=!0,"image"===f.specialType&&(b="{"+b+"}",v.mediaInfos.push({title:"",type:"image",caption:t.label,value:{sourceURL:b,linkURL:b}})))}))}return v},isImageServiceLayer:function(g){return g.url&&-1<g.url.indexOf("/ImageServer")},isTable:function(g){return"Table"===g.type},getConfigWithValidDataSource:function(g){g=
x.clone(g);var e=d.getInstanceSync();g.queries=C.filter(g.queries,x.hitch(this,function(v){return(v=v.webMapLayerId)?e.getLayerInfoById(v)?!0:!!e.getTableInfoById(v):!0}));return g},removePopupInfoUnsupportFields:function(g,e){var v=C.map(g.fields,x.hitch(this,function(r){return r.name}));e.fieldInfos&&0<e.fieldInfos.length&&(e.fieldInfos=C.filter(e.fieldInfos,x.hitch(this,function(r){return 0<=v.indexOf(r.fieldName)})))},overridePopupTemplateMethodGetAttachments:function(g,e,v){g.getAttachments=
function(r){var t=new E;try{var b=r.attributes[v],f=e+"/"+b+"/attachments";r={url:f,content:{f:"json"},callbackParamName:"callback"};var p="",z=c.id.findCredential(e);z&&z.token&&(p="?token\x3d"+z.token);n(r).then(function(a){a=a.attachmentInfos;C.forEach(a,function(l){l.url=f+"/"+l.id+p;l.objectId=b});t.resolve(a)},function(a){t.reject(a)})}catch(a){console.error(a)}return t}},isServiceSupportsOrderBy:function(g){var e=!1;g.advancedQueryCapabilities&&g.advancedQueryCapabilities.supportsOrderBy&&
(e=!0);return e},isServiceSupportsPagination:function(g){var e=!1;g.advancedQueryCapabilities&&g.advancedQueryCapabilities.supportsPagination&&(e=!0);return e},isSupportObjectIds:function(g){var e=0,v=B.getObjectIdField(g);g.currentVersion&&(e=parseFloat(g.currentVersion));return!!v&&(10<=e||g.hasOwnProperty("typeIdField"))},getQueryType:function(g){var e=-1;return e=this.isServiceSupportsOrderBy(g)&&this.isServiceSupportsPagination(g)?1:this.isSupportObjectIds(g)?2:3},getWebMapPopupInfoByUrl:function(g,
e){var v=null;e=e.replace(/\/*$/g,"");var r=w.removeProtocol(e);C.some(g.operationalLayers,x.hitch(this,function(t){if(t&&t.url){var b=w.removeProtocol(t.url.replace(/\/*$/g,""));if(t.popupInfo){if(b===r)return v=t.popupInfo,!0}else if(t.layers&&0<t.layers.length)return C.some(t.layers,x.hitch(this,function(f){return b+"/"+f.id===r?(v=t.popupInfo,!0):!1}))}return!1}));return v},getPopupInfoForRelatedLayer:function(g,e,v){(g=this.getWebMapPopupInfoByUrl(g,e))||(g=this.getDefaultPopupInfo(v,!1,!0));
!g.title&&(v=B.getObjectIdField(v))&&(g.title="{"+v+"}");return g},dynamicUpdateConfigIcon:function(g,e){e=window.location.protocol+"//"+window.location.hostname+e;g.icon&&"object"===typeof g.icon?g.icon=q.fromJson(g.icon):"string"===typeof g.icon&&(e=new k({yoffset:16,type:"picturemarkersymbol",url:g.icon?g.icon:e,width:24,height:24,size:16,xoffset:0}),g.icon=e)},tryGetLayerObject:function(g){var e=new E;if(!g)return e.resolve(),e;g=this._tryGetLayerInfo(g);if(!g)return console.error("Invalid data source"),
e.resolve(),e;g.getLayerObject().then(function(v){e.resolve(v)}.bind(this),function(v){e.reject(v)});return e},_tryGetLayerInfo:function(g){var e=d.getInstanceSync(),v=e.getLayerInfoById(g);v||(v=e.getTableInfoById(g));return v}}})},"widgets/Query/setting/SingleQuerySetting":function(){define("dojo/on dojo/query dojo/Evented dojo/Deferred dojo/_base/lang dojo/_base/html dijit/_WidgetBase dojo/_base/declare dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SingleQuerySetting.html dojo/promise/all jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox jimu/dijit/TabContainer3 jimu/dijit/Message jimu/LayerInfos/LayerInfos jimu/dijit/_QueryableLayerSourcePopup ../utils ./PopupConfig ./SpatialFilterConfig esri/request esri/symbols/jsonUtils jimu/dijit/Filter jimu/dijit/SymbolPicker jimu/dijit/LoadingIndicator jimu/dijit/ImageChooser dijit/form/ValidationTextBox dijit/form/RadioButton".split(" "),
function(x,C,E,B,w,d,n,c,k,q,g,e,v,r,t,b,f,p,z,a,l,A,D,G,F){return c([n,k,q,E],{baseClass:"jimu-widget-single-query-setting",templateString:g,popupConfig:null,spatialFilterConfig:null,jimuNls:null,_webMapLayerId:null,_defaultTaskIcon:null,map:null,nls:null,target:null,tr:null,appConfig:null,folderUrl:null,_layerDefinition:null,_filterParts:null,postMixInProperties:function(){this.inherited(arguments);this._defaultTaskIcon=this.folderUrl+"css/images/default_task_icon.png";this.jimuNls=window.jimuNls},
postCreate:function(){this.inherited(arguments);this._initSelf()},destroy:function(){this.target=null;this.emit("before-destroy");this.filter&&this.filter.destroy();this.filterPopup&&(this.filterPopup.onClose=w.hitch(this,function(){return!0}),this.filterPopup.close());this.inherited(arguments)},setConfig:function(m){if(m.webMapLayerId){var y=m.webMapLayerId,I=p.getInstanceSync(),L=I.getLayerInfoById(y);L||(L=I.getTableInfoById(y));if(!L)return;y=L.getUrl();m.url=y}this._setConfig(m)},_setConfig:function(m){this.config=
m;if(this._isObject(this.config)){this._filterParts=m.filter;var y=m.url||"";if(y&&"string"===typeof y)if(this.showBigShelter(),this.tab.showShelter(),this._layerDefinition&&this._layerDefinition.url===y)this._resetByConfig(this.config,this._layerDefinition,this._layerObject).promise.always(w.hitch(this,function(){this.hideBigShelter();this.tab.hideShelter()}));else{this._layerObject=this._layerDefinition=null;var I=D({url:y,handAs:"json",content:{f:"json"},callbackParamName:"callback"});m=a.tryGetLayerObject(m.webMapLayerId);
e([I,m]).then(function(L){var M=L[1];this.domNode&&(this._layerDefinition=L[0],this._layerDefinition.url=y,this._layerObject=M,this._resetByConfig(this.config,this._layerDefinition,this._layerObject).promise.always(w.hitch(this,function(){this.hideBigShelter();this.tab.hideShelter()})))}.bind(this),function(L){console.error(L);this.domNode&&this.hideBigShelter()}.bind(this))}}},getConfig:function(){var m={url:"",name:"",icon:"",filter:null,showSQL:!1,spatialFilter:null,popupInfo:"",orderByFields:[],
useLayerSymbol:!0,resultsSymbol:"",canModifySymbol:this.cbxModifySymbol.getValue(),enableExport:!1,defaultExpand:!0,singleResultLayer:!0,webMapLayerId:this._webMapLayerId};if(!this._layerDefinition)return this.scrollToDom(this.generalTable),new f({message:this.nls.setSourceTip}),null;m.url=this._layerDefinition.url;if(!this.queryNameTextBox.validate())return v.showValidationErrorTipForFormDijit(this.queryNameTextBox),null;var y=this.queryNameTextBox.get("value");y=v.sanitizeHTML(y);m.name=y;m.icon=
this.symbolPicker.getSymbol().toJson();y=this.filter.toJson();if(!y)return new f({message:this.nls.setFilterTip}),null;m.filter=y;m.showSQL=this.cbxShowSQL.getValue();if(a.isTable(this._layerDefinition))m.spatialFilter=null;else{y=this.spatialFilterConfig.getConfig();if(!y)return null;m.spatialFilter=y}y=this.popupConfig.getConfig();if(!y)return null;m.orderByFields=y.orderByFields;m.popupInfo=y.popupInfo;y=null;if(a.isTable(this._layerDefinition))m.useLayerSymbol=!1,m.resultsSymbol=null;else if(a.isImageServiceLayer(this._layerDefinition))if(m.useLayerSymbol=
!1,y=this.layerSymbolPicker.getSymbol())m.resultsSymbol=y.toJson();else return console.error("Can't get symbol from SymbolPicker"),null;else if(this.radioCustomSymbol.checked)if(m.useLayerSymbol=!1,y=this.layerSymbolPicker.getSymbol())m.resultsSymbol=y.toJson();else return console.error("Can't get symbol from SymbolPicker"),null;else m.useLayerSymbol=!0,m.resultsSymbol=null;m.singleResultLayer=this.radioOneLayerPerTask.checked;m.enableExport=this.cbxExport.getValue();m.defaultExpand=this.cbxExpand.getValue();
m.customResultName=this.cbxCRN.getValue();this.target._layerDefinition=this._layerDefinition;this.target._layerObject=this._layerObject;this.target.singleConfig=m;m.webMapLayerId&&(m.url="");return m},scrollToDom:function(m){m=d.coords(m).y;var y=d.coords(this.domNode).y;this.domNode.parentNode.scrollTop=m-y},showBigShelter:function(){this.emit("loading")},hideBigShelter:function(){this.emit("unloading")},showQueryDefinition:function(){this.tab.selectTab(this.nls.queryDefinition)},showResultsSetting:function(){this.tab.selectTab(this.nls.results)},
_initSelf:function(){this._initTabs();this._initInfoTab();this._initFilterTab();this._initResultSettingTab();this._initOptionsTab()},_initTabs:function(){this.tab=new b({tabs:[{title:this.nls.infoText,content:this.infoTabNode},{title:this.nls.filters,content:this.definitionTabNode},{title:this.nls.results,content:this.resultsTabNode},{title:this.nls.optionsText,content:this.optionsTabNode}]});this.tab.placeAt(this.detailSection);this.tab.showShelter();this.own(x(this.tab,"tabChanged",w.hitch(this,
function(m){m===this.nls.filters&&this._updateSqlDivByFilter()})))},_initInfoTab:function(){this._setDefaultTaskIcon()},_initFilterTab:function(){this.filter=new F({enableAskForValues:!0,noFilterTip:this.nls.noFilterTip,style:"width:100%;"});this.filter.placeAt(this.filterDiv);this.cbxShowSQL=new t({label:this.nls.displaySQLTip});this.cbxShowSQL.labelNode&&d.addClass(this.cbxShowSQL.labelNode,"light-stress");this.cbxShowSQL.check();this.cbxShowSQL.placeAt(this.showSQLSection);this._initSpatialFilterConfig()},
_resetAttributeFilter:function(){this.filter.reset();this._updateSqlDivByFilter()},resetFilter:function(m){this.filter&&this._layerDefinition&&this.filter.build({url:this._layerDefinition.url,partsObj:m,layerDefinition:this._layerObject||this._layerDefinition,featureLayerId:this._webMapLayerId})},_updateSqlDivByFilter:function(){var m="",y=this.filter.toJson();y?m=y.expr?y.displaySQL?y.displaySQL:"1\x3d1"===y.expr?this.nls.noExpressionDefinedTip:y.expr:this.nls.specifyFilterAtRuntimeTip:console.log("can't get partsObj from filter");
m&&(this.sqlDiv.innerHTML=m)},_onBtnFilterClicked:function(){this.filterPopup?this.filterPopup.show():this.filterPopup=new r({width:680,height:485,content:this.filter,buttons:[{label:this.nls.ok,onClick:w.hitch(this,function(){(this._filterParts=this.filter.toJson())?(this._updateSqlDivByFilter(),this.filterPopup.hide()):new f({message:this.nls.setFilterTip})})},{label:this.nls.cancel,onClick:w.hitch(this,function(){this.resetFilter(this._filterParts);this.filterPopup.hide()})}],onClose:w.hitch(this,
function(){this.resetFilter(this._filterParts);this.filterPopup.hide();return!1})})},_initSpatialFilterConfig:function(){this.spatialFilterConfig=new A({nls:this.nls});this.spatialFilterConfig.placeAt(this.spatialFilterDiv)},_initResultSettingTab:function(){this._initPopupConfig();this.cbxModifySymbol.setLabel(this.nls.changeSymbolAtRuntime);this.cbxModifySymbol.uncheck()},_initPopupConfig:function(){this.popupConfig=new l({nls:this.nls,sqs:this});this.popupConfig.placeAt(this.popupContainer)},_showSymbolSection:function(){d.removeClass(this.symbolSection,
"not-visible")},_hideSymbolSection:function(){d.addClass(this.symbolSection,"not-visible")},_initOptionsTab:function(){this.cbxExport=new t({label:this.nls.exportTip});this.cbxExport.placeAt(this.exportSection);d.addClass(this.cbxExport.domNode,"small-font-size");this.cbxExpand=new t({label:this.nls.expandTip,checked:!0});this.cbxExpand.placeAt(this.expandSection);d.addClass(this.cbxExpand.domNode,"small-font-size");this.cbxCRN=new t({label:this.nls.customResultNameTip,checked:!0});this.cbxCRN.placeAt(this.customResultNameSection);
d.addClass(this.cbxCRN.domNode,"small-font-size")},_onQueryNameChanged:function(){var m=C(".label",this.target)[0],y=this.queryNameTextBox.get("value");y=v.sanitizeHTML(y);m.innerHTML=y;m.title=y},_clear:function(){this.urlTextBox.set("value","");this._layerObject=this._layerDefinition=null;this.queryNameTextBox.set("value","");this._setDefaultTaskIcon();this._resetAttributeFilter();d.removeClass(this.spatialFilterDiv,"not-visible");this.spatialFilterConfig.reset();this.cbxShowSQL.check();this.tab.showShelter();
this.popupConfig.onLayerChange(!0);this.radioServiceSymbol.set("disabled",!1);this.radioCustomSymbol.set("checked",!0);this.layerSymbolPicker.reset();this.cbxModifySymbol.uncheck();this.radioOneLayerPerTask.set("checked",!0);this.cbxExport.uncheck()},_onBtnSetSourceClicked:function(){var m=new z({titleLabel:this.nls.setDataSource,dijitArgs:{style:{height:"100%"},multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl}});this.own(x(m,"ok",w.hitch(this,function(y){var I=
m.getSelectedRadioType();m.close();m=null;this.setNewLayerDefinition(y,I,null)})));this.own(x(m,"cancel",w.hitch(this,function(){m.close();m=null})));m.startup()},setNewLayerDefinition:function(m,y,I){m.definition.name=m.name;m.definition.url=m.url;m.url!==(this._layerDefinition&&this._layerDefinition.url)&&this._resetByNewLayerDefinition(m,y,I)},_resetByNewLayerDefinition:function(m,y,I){var L=m.definition;this._clear();if(L){var M=null;"map"===y&&m.layerInfo&&(M=m.layerInfo.id);this._layerDefinition=
L;this._webMapLayerId=M;a.tryGetLayerObject(this._webMapLayerId).then(function(O){this._layerObject=O;O=L.url;this.urlTextBox.set("value",O);this.queryNameTextBox.set("value",I||L.name);this.tab.hideShelter();this._resetAttributeFilter();this._layerDefinition&&this.filter.build({url:O,expr:"1\x3d1",layerDefinition:this._layerObject||this._layerDefinition,featureLayerId:this._webMapLayerId}).promise.always(w.hitch(this,function(){this._updateSqlDivByFilter()}));a.isTable(this._layerDefinition)?d.addClass(this.spatialFilterDiv,
"not-visible"):d.removeClass(this.spatialFilterDiv,"not-visible");this.popupConfig.onLayerChange(!!this._webMapLayerId);this._webMapLayerId&&this.popupConfig.setConfig({popupInfo:{readFromWebMap:!0},orderByFields:[]});this._handleSymbolSection(L);this.cbxModifySymbol.uncheck()}.bind(this))}},_handleSymbolSection:function(m,y){var I="";this._showSymbolSection();a.isTable(m)?(this.radioServiceSymbol.set("disabled",!0),this._hideSymbolSection(),this.layerSymbolPicker.reset()):a.isImageServiceLayer(m)?
(this.radioServiceSymbol.set("disabled",!0),this.radioCustomSymbol.set("checked",!0),I="fill"):(this.radioServiceSymbol.set("disabled",!1),m.geometryType&&(m=v.getTypeByGeometryType(m.geometryType),"point"===m?I="marker":"polyline"===m?I="line":"polygon"===m&&(I="fill")));I&&(this.layerSymbolPicker.showByType(I),y&&this.layerSymbolPicker.showBySymbol(y))},_setDefaultTaskIcon:function(){this.symbolPicker.showByType("marker")},_resetByConfig:function(m,y,I){var L=new B;m=w.clone(m);this._upgradeConfigForLowerVersion(y,
m);this._webMapLayerId=m.webMapLayerId;this.urlTextBox.set("value",m.url);this.queryNameTextBox.set("value",m.name||"");m.icon?this.symbolPicker.showBySymbol(m.icon):this._setDefaultTaskIcon();var M=m.filter;this._resetAttributeFilter();var O=null;I={url:y.url,layerDefinition:I||y,featureLayerId:this._webMapLayerId};this._isObject(M)?I.partsObj=M:I.expr="1\x3d1";O=this.filter.build(I);O.promise.always(w.hitch(this,function(){this._updateSqlDivByFilter();L.resolve()}));this.cbxShowSQL.setValue(m.showSQL);
this.spatialFilterConfig.reset();a.isTable(this._layerDefinition)?d.addClass(this.spatialFilterDiv,"not-visible"):(d.removeClass(this.spatialFilterDiv,"not-visible"),m.spatialFilter&&this.spatialFilterConfig.setConfig(m.spatialFilter));this.popupConfig.onLayerChange(!!this._webMapLayerId);this.popupConfig.setConfig({popupInfo:m.popupInfo,orderByFields:m.orderByFields});I=null;if(m.resultsSymbol)try{I=G.fromJson(m.resultsSymbol)}catch(X){console.error(X)}this._handleSymbolSection(y,I);m.useLayerSymbol&&
this.radioServiceSymbol.set("checked",!0);this.cbxModifySymbol.setValue(m.canModifySymbol);m.singleResultLayer?this.radioOneLayerPerTask.set("checked",!0):this.radioMultipleLayerPerTask.set("checked",!0);this.cbxExport.setValue(m.enableExport);this.cbxExpand.setValue(m.defaultExpand);this.cbxCRN.setValue(m.customResultName);return L},_upgradeConfigForLowerVersion:function(m,y){y.popup&&!y.popupInfo&&(y.popupInfo=a.upgradePopupToPopupInfo(m,y.popup));a.dynamicUpdateConfigIcon(y,this._defaultTaskIcon)},
_isObject:function(m){return m&&"object"===typeof m}})})},"widgets/Query/setting/PopupConfig":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./PopupConfig.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query jimu/utils jimu/dijit/SimpleTable jimu/dijit/Popup dijit/TooltipDialog dijit/Menu dijit/MenuItem dijit/popup ./SortFields ../utils".split(" "),function(x,C,E,B,w,d,n,c,k,q,g,e,v,r,t,b,f,p,z){return x([C,
E,B],{baseClass:"jimu-query-setting-popup-config",templateString:w,_currentOrderByFields:null,_validSortFieldTypes:"esriFieldTypeOID esriFieldTypeString esriFieldTypeDate esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble".split(" "),nls:null,sqs:null,postCreate:function(){this.inherited(arguments);this.own(k(this.portalRadio,"change",d.hitch(this,this._updateClassWhenRadioChanged)));this._currentOrderByFields=[];this._initFieldsTable();this._initAddFields();this.onLayerChange(!0);
this._updateClassWhenRadioChanged()},onLayerChange:function(a){this._clear();a?this.portalRadio.set("disabled",!1):this.portalRadio.set("disabled",!0);this._updateClassWhenRadioChanged();if(a=this._getLayerDefinition()){this._clear();var l={popupInfo:null,orderByFields:[]};l.popupInfo=this._getDefaultPopupInfo();this.setConfig(l);this._updateSortingIcon(a)}},setConfig:function(a){this._clear();this.config=d.clone(a);var l=this._getLayerDefinition();l&&(this._updateSortingIcon(l),this._setPopupInfoForUI(a.popupInfo),
this._setOrderByFields(a.orderByFields))},getConfig:function(){var a={popupInfo:this._getPopupInfoByUI(),orderByFields:this._getOrderByFields()};return a.popupInfo?a:null},destroy:function(){this.sqs=null;this.titleTextBox.focusNode.blur();this.inherited(arguments)},_clear:function(){n.addClass(this.sortFieldsIcon,"jimu-state-disabled");this._currentOrderByFields=[];this.titleTextBox.set("value","");this.displayFieldsTextBox.set("value","");this.fieldsTable.clear();this._resetMenu();this._addEmptyMenuItem()},
_getLayerDefinition:function(){return this.sqs._layerDefinition},_updateClassWhenRadioChanged:function(){!this.portalRadio.disabled&&this.portalRadio.checked?n.addClass(this.domNode,"portal-radio-selected"):n.removeClass(this.domNode,"portal-radio-selected")},_setPopupInfoForUI:function(a){var l=this._getDefaultPopupInfo();this._setCustomPopupInfoForUI(l);!this.portalRadio.disabled&&a.readFromWebMap?(this.customRadio.set("checked",!1),this.portalRadio.set("checked",!0)):(this.portalRadio.set("checked",
!1),this.customRadio.set("checked",!0),this._setCustomPopupInfoForUI(a));this._updateClassWhenRadioChanged()},_setCustomPopupInfoForUI:function(a){var l=this._getLayerDefinition(),A=z.getPortalFieldInfosWithoutShape(l,a.fieldInfos);a.title&&"string"===typeof a.title?this.titleTextBox.set("value",a.title||""):this.titleTextBox.set("value","");this._updateDisplayFieldsTextBox(A);var D=[],G=c.map(l.fields,d.hitch(this,function(F){return F.name}));c.forEach(a.mediaInfos,d.hitch(this,function(F){if(0<
G.length&&"image"===F.type&&F.value){var m=F.value.sourceURL,y=null;c.some(G,d.hitch(this,function(I){return"{"+I+"}"===m?(y=I,!0):!1}));y&&D.push(y)}}));this._resetMenu();this.fieldsTable.clear();0<A.length?c.forEach(A,d.hitch(this,function(F){this._addMenuItem(F);var m=0<=D.indexOf(F.fieldName);this._addRow(F,m)})):this._addEmptyMenuItem()},_updateDisplayFieldsTextBox:function(a){a=c.filter(a,d.hitch(this,function(l){return l.visible}));a=c.map(a,function(l){return l.label}).join(";  ");this.displayFieldsTextBox.set("value",
a)},_addRow:function(a,l){a=d.clone(a);a.specialType=l?"image":"none";this.fieldsTable.addRow(a)},_addMenuItem:function(a){var l=new b({label:a.fieldName+" {"+a.fieldName+"}",onClick:d.hitch(this,function(){var A=this.titleTextBox.get("value")+"{"+a.fieldName+"}";this.titleTextBox.set("value",A);A=this.menu.getParent();n.setStyle(A.domNode.parentNode,"display","none")})});this.menu.addChild(l)},_addEmptyMenuItem:function(){var a=new b({label:this.nls.noField,onClick:d.hitch(this,function(){var l=
this.menu.getParent();n.setStyle(l.domNode.parentNode,"display","none")})});this.menu.addChild(a)},_getPopupInfoByUI:function(){var a=null;if(this.customRadio.checked){if(a=this._getCustomPopupInfoByUI())a.readFromWebMap=!1}else a={readFromWebMap:!0};return a},_getCustomPopupInfoByUI:function(){var a={title:"",fieldInfos:[],description:null,showAttachments:!1,mediaInfos:[]},l=this._getLayerDefinition();if(!this.titleTextBox.validate())return this.sqs.showResultsSetting(),this.sqs.scrollToDom(this.titleTextBox.domNode),
g.showValidationErrorTipForFormDijit(this.titleTextBox),null;a.title=this.titleTextBox.get("value");a.showAttachments=!!l.hasAttachments;l=this._getPortalFieldInfosAndMediaInfosByUI();a.fieldInfos=l.portalFieldInfos;a.mediaInfos=l.mediaInfos;return a},_getPortalFieldInfosAndMediaInfosByUI:function(){var a=this.fieldsTable.getData(),l=[];return{portalFieldInfos:c.map(a,d.hitch(this,function(A){var D=A.fieldName,G=this._getDefaultPortalFieldInfo(D);G.label=A.label||G.label;(G.visible=A.visible)&&"image"===
A.specialType&&(A="{"+D+"}",l.push({title:"",type:"image",caption:D,value:{sourceURL:A,linkURL:A}}));return G})),mediaInfos:l}},_getDefaultPopupInfo:function(){var a=this._getLayerDefinition();return z.getDefaultPopupInfo(a,!1)},_getDefaultPortalFieldInfo:function(a){a=this._getServiceFildInfo(a);return g.getDefaultPortalFieldInfo(a)},_getServiceFildInfo:function(a){var l=null;l=this._getLayerDefinition();return l=g.getFieldInfoByFieldName(l.fields,a)},_getSortedFieldInfos:function(a,l){var A=[],
D={};c.forEach(l,d.hitch(this,function(F){D[F.name]=F}));var G=[];G=G.concat(a);c.forEach(l,d.hitch(this,function(F){F=F.name;0>G.indexOf(F)&&G.push(F)}));return A=c.map(G,d.hitch(this,function(F){return D[F]}))},_onBtnSetDisplayFieldsClicked:function(){var a=new v({width:640,height:380,titleLabel:this.nls.setDisplayFields,content:this.displayFieldsDiv,onClose:d.hitch(this,function(){this.prevPortalFieldInfos&&this._setCustomPopupInfoForUI(this.prevPortalFieldInfos);n.place(this.displayFieldsDiv,
this.displayFieldsSection);a.content=""}),buttons:[{label:this.nls.ok,onClick:d.hitch(this,function(){var l=this._getPortalFieldInfosAndMediaInfosByUI().portalFieldInfos;this._updateDisplayFieldsTextBox(l);this.prevPortalFieldInfos=null;a.close()})},{label:this.nls.cancel,onClick:d.hitch(this,function(){a.close()})}]});setTimeout(d.hitch(this,function(){this.prevPortalFieldInfos=this._getPopupInfoByUI()}),200)},_setOrderByFields:function(a){a=a||[];var l=this.sortFieldsDiv.innerHTML="";a=c.map(a,
d.hitch(this,function(A,D){var G=A.split(" ");A=G[0];var F="ASC";G[1]&&"string"===typeof G[1]&&(G[1]=G[1].toUpperCase(),"DESC"===G[1]&&(F="DESC"));G=F.toLowerCase();G="\x3cspan\x3e"+A+'\x3c/span\x3e\x3cspan class\x3d"sort-arrow '+G+'"\x3e\x3c/span\x3e';D!==a.length-1&&(G+="\x3cspan\x3e,\x26nbsp;\x3c/span\x3e");l+=G;return A+" "+F}));l&&(l="\x3cspan\x3e\x26nbsp;\x26nbsp;\x3c/span\x3e"+l);this.sortFieldsDiv.innerHTML=l;this._currentOrderByFields=a},_getOrderByFields:function(){var a=this._getLayerDefinition();
return this._shouldEnableSorting(a)?this._currentOrderByFields:[]},_updateSortingIcon:function(a){this._shouldEnableSorting(a)?n.removeClass(this.sortFieldsIcon,"jimu-state-disabled"):n.addClass(this.sortFieldsIcon,"jimu-state-disabled")},_shouldEnableSorting:function(a){return this._isServiceSupportsPagination(a)&&this._isServiceSupportsOrderBy(a)},_onBtnSortFieldsClicked:function(){var a=this._getLayerDefinition();if(a&&this._shouldEnableSorting(a))var l=new p({nls:this.nls,layerDefinition:a,orderByFields:d.clone(this._currentOrderByFields),
validSortFieldTypes:this._validSortFieldTypes}),A=new v({width:640,height:380,titleLabel:this.nls.setSortingFields,content:l,onClose:d.hitch(this,function(){l.destroy()}),buttons:[{label:this.nls.ok,onClick:d.hitch(this,function(){var D=l.getOrderByFields();this._setOrderByFields(D);A.close()})},{label:this.nls.cancel,onClick:d.hitch(this,function(){A.close()})}]})},_initFieldsTable:function(){var a={autoHeight:!1,style:"height:187px",fields:[{name:"visible",title:this.nls.visibility,type:"checkbox"},
{name:"fieldName",title:this.nls.name,type:"text",editable:!1},{name:"label",title:this.nls.alias,type:"text",editable:!0},{name:"specialType",title:this.nls.specialType,type:"extension",create:d.hitch(this,this._createSpecialType),setValue:d.hitch(this,this._setValue4SpecialType),getValue:d.hitch(this,this._getValueOfSpecialType)},{name:"actions",title:this.nls.actions,type:"actions",actions:["up","down"]}]};this.fieldsTable=new e(a);this.fieldsTable.placeAt(this.fieldsContainer);this.fieldsTable.startup()},
_createSpecialType:function(a){a=n.create("select",{},a);n.create("option",{value:"none",label:this.nls.none,selected:!0,innerHTML:this.nls.none},a);n.create("option",{value:"image",label:this.nls.image,innerHTML:this.nls.image},a)},_setValue4SpecialType:function(a,l){q("select",a)[0].value=l},_getValueOfSpecialType:function(a){return q("select",a)[0].value},_initAddFields:function(){var a=n.create("div");this.tooltipDialog=new r({style:"cursor:pointer",content:a});this.menu=new t;this.menu.placeAt(a);
this.own(k(document.body,"click",d.hitch(this,function(){f.close(this.tooltipDialog)})))},_onAddClicked:function(a){a.stopPropagation();a.preventDefault();f.close(this.tooltipDialog);f.open({popup:this.tooltipDialog,around:this.btnAddFields})},_resetMenu:function(){var a=this.menu.getChildren();c.forEach(a,d.hitch(this,function(l){this.menu.removeChild(l)}))},_isServiceSupportsPagination:function(a){var l=!1;a.advancedQueryCapabilities&&a.advancedQueryCapabilities.supportsPagination&&(l=!0);return l},
_isServiceSupportsOrderBy:function(a){var l=!1;a.advancedQueryCapabilities&&a.advancedQueryCapabilities.supportsOrderBy&&(l=!0);return l}})})},"widgets/Query/setting/SortFields":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/form/Select dojo/text!./SortFields.html dojo/on dojo/query dojo/_base/lang dojo/_base/array dojo/_base/html jimu/dijit/SimpleTable".split(" "),function(x,C,E,B,w,d,n,c,k,q,g,e,v){return x([C,E,B],
{baseClass:"jimu-query-setting-sort-fields",templateString:n,_allFieldNames:null,_sortTipClassName:"sort-tip",_fieldNameSelectClassName:"field-name-select",_sortTypeSelectClassName:"sort-type-select",nls:null,layerDefinition:null,orderByFields:null,validSortFieldTypes:[],postCreate:function(){this.inherited(arguments);var r=g.filter(this.layerDefinition.fields,q.hitch(this,function(t){return 0<=this.validSortFieldTypes.indexOf(t.type)}));this._allFieldNames=g.map(r,function(t){return t.name});this._initTable();
this.orderByFields?this._setOrderByFields(this.orderByFields):this.orderByFields=[]},_initTable:function(){var r={autoHeight:!1,style:"height:187px",fields:[{name:"sortTip",title:this.nls.field,type:"text",width:"100px"},{name:"fieldName",title:"",type:"extension",create:q.hitch(this,this._create4FieldName),setValue:q.hitch(this,this._setValue4FieldName),getValue:q.hitch(this,this._getValue4FieldName)},{name:"sortType",title:this.nls.sortingOrder,type:"extension",create:q.hitch(this,this._create4SortType),
setValue:q.hitch(this,this._setValue4SortType),getValue:q.hitch(this,this._getValue4SortType)},{name:"actions",title:this.nls.actions,type:"actions",actions:["up","down","delete"],width:"120px"}]};this.table=new v(r);this.own(c(this.table,"row-up",q.hitch(this,this._onTableRowUp)));this.own(c(this.table,"row-down",q.hitch(this,this._onTableRowDown)));this.table.placeAt(this.tableDiv);this.table.startup()},getOrderByFields:function(){var r=this.table.getData();return g.map(r,q.hitch(this,function(t){return t.fieldName+
" "+t.sortType}))},_getFieldAlias:function(r){for(var t=this.layerDefinition.fields,b=0;b<t.length;b++)if(t[b].name===r)return r=t[b].alias||r;return r},_getRestFields:function(){var r=this._getAllFieldSelects(),t=g.map(r,q.hitch(this,function(b){return b.get("value")}));return g.filter(this._allFieldNames,q.hitch(this,function(b){return 0>t.indexOf(b)}))},_onAddNewClicked:function(){var r=this._getRestFields();if(0!==r.length){var t="";t=0===this.table.getRows().length?this.nls.sortBy:this.nls.thenBy;
this.table.addRow({sortTip:t,fieldName:r[0],sortType:"ASC"})}},_setOrderByFields:function(r){this.table.clear();r=r||[];g.forEach(r,q.hitch(this,function(t,b){var f=t.split(" ");t=f[0];var p="ASC";f[1]&&"string"===typeof f[1]&&(f[1]=f[1].toUpperCase(),"DESC"===f[1]&&(p="DESC"));f="";f=0===b?this.nls.sortBy:this.nls.thenBy;this.table.addRow({sortTip:f,fieldName:t,sortType:p})}))},_getAllFieldSelects:function(){var r=k("."+this._fieldNameSelectClassName,this.table.tbody);return g.map(r,q.hitch(this,
function(t){return w.byNode(t)}))},_getSelectFromTd:function(r,t){r=k("."+t,r)[0];return w.byNode(r)},_onTableRowUp:function(){this._resetSortTips()},_onTableRowDown:function(){this._resetSortTips()},_getAllSortTipDivs:function(){return k(".sortTip .normal-text-div",this.table.tbody)},_resetSortTips:function(){var r=this.table.getRows();g.forEach(r,q.hitch(this,function(t,b){var f="";f=0===b?this.nls.sortBy:this.nls.thenBy;this.table.editRow(t,{sortTip:f})}));r=this._getAllSortTipDivs();g.forEach(r,
q.hitch(this,function(t,b){t.innerHTML=0===b?this.nls.sortBy:this.nls.thenBy}))},_create4FieldName:function(r){var t=this._getRestFields(),b=new d({style:"width:120px;height:20px;"});e.addClass(b.domNode,this._fieldNameSelectClassName);b.placeAt(r);g.forEach(t,q.hitch(this,function(f){var p=this._getFieldAlias(f);b.addOption({value:f,label:p})}));this.own(c(b,"change",q.hitch(this,this._onFieldNameSelectChanged)))},_setValue4FieldName:function(r,t){this._getSelectFromTd(r,this._fieldNameSelectClassName).set("value",
t)},_getValue4FieldName:function(r){return this._getSelectFromTd(r,this._fieldNameSelectClassName).get("value")},_onFieldNameSelectChanged:function(){var r=this._getAllFieldSelects();g.forEach(r,q.hitch(this,function(t){var b=t.get("value"),f=t.getOptions();f=g.filter(f,q.hitch(this,function(p){return p.value!==b}));t.removeOption(f);f=this._getRestFields();g.forEach(f,q.hitch(this,function(p){if(p!==b){var z=this._getFieldAlias(p);t.addOption({value:p,label:z})}}))}))},_create4SortType:function(r){var t=
new d({style:"width:120px;height:20px;"});e.addClass(t.domNode,this._sortTypeSelectClassName);t.placeAt(r);t.addOption({value:"ASC",label:this.nls.ascending,selected:!0});t.addOption({value:"DESC",label:this.nls.descending})},_setValue4SortType:function(r,t){r=this._getSelectFromTd(r,this._sortTypeSelectClassName);"ASC"!==t&&"DESC"!==t||r.set("value",t)},_getValue4SortType:function(r){return this._getSelectFromTd(r,this._sortTypeSelectClassName).get("value")}})})},"widgets/Query/setting/SpatialFilterConfig":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SpatialFilterConfig.html dojo/on dojo/query dojo/_base/lang dojo/_base/html dojo/_base/array ./SearchDistance ./RelationshipsSelector jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox".split(" "),
function(x,C,E,B,w,d,n,c,k,q,g,e,v,r,t){return x([C,E,B],{baseClass:"jimu-query-setting-spatialfilter-config",templateString:w,_allRelationshipInfos:null,nls:null,config:null,postCreate:function(){this.inherited(arguments);this._allRelationshipInfos=[{relationship:"SPATIAL_REL_WITHIN",nls:this.nls.contain,label:this.nls.contain},{relationship:"SPATIAL_REL_CROSSES",nls:this.nls.cross,label:this.nls.cross},{relationship:"SPATIAL_REL_ENVELOPEINTERSECTS",nls:this.nls.envelopeIntersect,label:this.nls.envelopeIntersect},
{relationship:"SPATIAL_REL_INDEXINTERSECTS",nls:this.nls.indexIntersect,label:this.nls.indexIntersect},{relationship:"SPATIAL_REL_INTERSECTS",nls:this.nls.intersect,label:this.nls.intersect},{relationship:"SPATIAL_REL_OVERLAPS",nls:this.nls.overlap,label:this.nls.overlap},{relationship:"SPATIAL_REL_TOUCHES",nls:this.nls.touch,label:this.nls.touch},{relationship:"SPATIAL_REL_CONTAINS",nls:this.nls.within,label:this.nls.within}];this._initSelf();this.reset();this.config&&this.setConfig(this.config)},
setConfig:function(b){this.reset();this.config=c.clone(b);this.config.currentMapExtent?(this.cbxMapExtent.check(),this.config.currentMapExtent["default"]?this._makeDefaultItem(this.mapExtentSection):this._makeNotDefaultItem(this.mapExtentSection)):this.cbxMapExtent.uncheck();this.config.drawing?(this.cbxDrawGraphic.check(),this.config.drawing["default"]?this._makeDefaultItem(this.drawGraphicSection):this._makeNotDefaultItem(this.drawGraphicSection),this._selectDrawingTools(this.config.drawing.geometryTypes),
this.config.drawing.buffer?(this.cbxDrawBufferSetting.check(),this.drawingSearchDistance.setConfig(this.config.drawing.buffer)):this.cbxDrawBufferSetting.uncheck()):this.cbxDrawGraphic.uncheck();this.config.useFeatures?(this.cbxUseFeatures.check(),this.config.useFeatures["default"]?this._makeDefaultItem(this.useFeaturesSection):this._makeNotDefaultItem(this.useFeaturesSection),this._setRelationshipsForTextBox(this.config.useFeatures.relationships),this.config.useFeatures.buffer?(this.cbxFeatureBufferSetting.check(),
this.featuresSearchDistance.setConfig(this.config.useFeatures.buffer)):this.cbxFeatureBufferSetting.uncheck()):this.cbxUseFeatures.uncheck();this.config.fullLayerExtent?(this.cbxLayerExtent.check(),this.config.fullLayerExtent["default"]?this._makeDefaultItem(this.layerExtentSection):this._makeNotDefaultItem(this.layerExtentSection)):this.cbxLayerExtent.uncheck();q.forEach([this.cbxMapExtent,this.cbxDrawGraphic,this.cbxUseFeatures,this.cbxLayerExtent],c.hitch(this,function(f){f.labelNode&&k.addClass(f.labelNode,
"light-stress")}));this._hideDrawGraphicSettting();this._hideFeaturesSetting()},getConfig:function(){var b={currentMapExtent:null,drawing:null,useFeatures:null,fullLayerExtent:null};this.cbxMapExtent.getValue()&&(b.currentMapExtent={"default":this._isDefaultItem(this.mapExtentSection)});if(this.cbxDrawGraphic.getValue()&&(b.drawing={"default":!1,geometryTypes:[],buffer:null},b.drawing["default"]=this._isDefaultItem(this.drawGraphicSection),b.drawing.geometryTypes=this._getSelectedDrawingTools(),this.cbxDrawBufferSetting.getValue())){var f=
this.drawingSearchDistance.getConfig();if(!f)return;b.drawing.buffer=f}if(this.cbxUseFeatures.getValue()&&(b.useFeatures={"default":!1,relationships:[],buffer:null},b.useFeatures["default"]=this._isDefaultItem(this.useFeaturesSection),b.useFeatures.relationships=this._getRelationshipsFromTextBox(),this.cbxFeatureBufferSetting.getValue())){f=this.featuresSearchDistance.getConfig();if(!f)return;b.useFeatures.buffer=f}this.cbxLayerExtent.getValue()&&(b.fullLayerExtent={"default":this._isDefaultItem(this.layerExtentSection)});
return b},reset:function(){this.cbxMapExtent.uncheck();this.cbxDrawGraphic.uncheck();this._selectDrawingTools(["POINT","POLYLINE","EXTENT"]);this.drawingSearchDistance.reset();this._hideDrawGraphicSettting();this.cbxUseFeatures.uncheck();this._resetToDefaultRelationshipForTextBox();this.featuresSearchDistance.reset();this._hideFeaturesSetting();this.cbxLayerExtent.uncheck()},_initSelf:function(){this.cbxMapExtent=new t({label:this.nls.useCurrentExtentTip,onChange:c.hitch(this,function(){this._onCbxChanged(this.cbxMapExtent,
this.mapExtentSection)})});this.cbxMapExtent.placeAt(this.cbxMapExtentDiv);this.cbxDrawGraphic=new t({label:this.nls.useDrawGraphicTip,onChange:c.hitch(this,function(b){b?this._showDrawGraphicSettting():this._hideDrawGraphicSettting();this._onCbxChanged(this.cbxDrawGraphic,this.drawGraphicSection)})});this.cbxDrawGraphic.placeAt(this.cbxDrawGraphicDiv);this.cbxUseFeatures=new t({label:this.nls.useFeaturesTip,onChange:c.hitch(this,function(b){b?this._showFeaturesSetting():this._hideFeaturesSetting();
this._onCbxChanged(this.cbxUseFeatures,this.useFeaturesSection)})});this.cbxUseFeatures.placeAt(this.cbxUseFeaturesDiv);this.cbxLayerExtent=new t({label:this.nls.noSpatialLimitTip,onChange:c.hitch(this,function(){this._onCbxChanged(this.cbxLayerExtent,this.layerExtentSection)})});this.cbxLayerExtent.placeAt(this.cbxLayerExtentDiv);this.drawingSearchDistance=new g({nls:this.nls});this.drawingSearchDistance.placeAt(this.drawingSearchDistanceDiv);this.cbxDrawBufferSetting=new t({label:this.nls.bufferSettings});
k.addClass(this.cbxDrawBufferSetting.domNode,"buffer-checkbox");this.own(d(this.cbxDrawBufferSetting,"change",c.hitch(this,function(){this.cbxDrawBufferSetting.getValue()?this.drawingSearchDistance.enable():this.drawingSearchDistance.disable()})));this.cbxDrawBufferSetting.placeAt(this.drawBufferSettingCbxDiv);this.featuresSearchDistance=new g({nls:this.nls});this.featuresSearchDistance.placeAt(this.featuresSearchDistanceDiv);this.cbxFeatureBufferSetting=new t({label:this.nls.bufferSettings});k.addClass(this.cbxFeatureBufferSetting.domNode,
"buffer-checkbox");this.own(d(this.cbxFeatureBufferSetting,"change",c.hitch(this,function(){this.cbxFeatureBufferSetting.getValue()?this.featuresSearchDistance.enable():this.featuresSearchDistance.disable()})));this.cbxFeatureBufferSetting.placeAt(this.featureBufferSettingCbxDiv)},_onCbxChanged:function(b,f){b.getValue()?0===n(".spatial-filter-item.default",this.domNode).length&&this._makeDefaultItem(f):this._makeNotDefaultItem(f)},_onBtnMakeDefaultClicked:function(b){if(b=v.getAncestorDom(b.target||
b.srcElement,c.hitch(this,function(p){return k.hasClass(p,"spatial-filter-item")}),this.domNode)){var f=this._getCbxBySpatialFiterItemDom(b);f&&(f.getValue()?this._makeDefaultItem(b):this._makeNotDefaultItem(b))}},_isDefaultItem:function(b){return k.hasClass(b,"default")},_makeDefaultItem:function(b){var f=this._getCbxBySpatialFiterItemDom(b);f&&f.getValue()&&(n(".spatial-filter-item",this.domNode).removeClass("default"),k.addClass(b,"default"))},_makeNotDefaultItem:function(b){var f=q.filter([{spatialFilterItemDom:this.mapExtentSection,
cbx:this.cbxMapExtent},{spatialFilterItemDom:this.drawGraphicSection,cbx:this.cbxDrawGraphic},{spatialFilterItemDom:this.useFeaturesSection,cbx:this.cbxUseFeatures},{spatialFilterItemDom:this.layerExtentSection,cbx:this.cbxLayerExtent}],function(p){return p.cbx.getValue()});0===f.length?n(".spatial-filter-item",this.domNode).removeClass("default"):1===f.length?this._makeDefaultItem(f[0].spatialFilterItemDom):2<=f.length&&(f=q.filter(f,function(p){return p.spatialFilterItemDom!==b}),q.some(f,function(p){return k.hasClass(p.spatialFilterItemDom,
"default")})||this._makeDefaultItem(f[0].spatialFilterItemDom))},_getCbxBySpatialFiterItemDom:function(b){var f=null;b===this.mapExtentSection?f=this.cbxMapExtent:b===this.drawGraphicSection?f=this.cbxDrawGraphic:b===this.useFeaturesSection?f=this.cbxUseFeatures:b===this.layerExtentSection&&(f=this.cbxLayerExtent);return f},_onDrawGraphicArrowIconClicked:function(){k.hasClass(this.drawGraphicSettting,"hidden-setting")?this._showDrawGraphicSettting():this._hideDrawGraphicSettting()},_showDrawGraphicSettting:function(){k.removeClass(this.drawGraphicSettting,
"hidden-setting");this._updateDrawGraphicArrowIcon();k.addClass(this.featuresSetting,"hidden-setting");this._updateFeaturesArrowIcon()},_hideDrawGraphicSettting:function(){k.addClass(this.drawGraphicSettting,"hidden-setting");this._updateDrawGraphicArrowIcon()},_updateDrawGraphicArrowIcon:function(){k.hasClass(this.drawGraphicSettting,"hidden-setting")?k.removeClass(this.arrowIconDrawGraphic,"opened"):k.addClass(this.arrowIconDrawGraphic,"opened")},_onFeaturesArrowIconClicked:function(){k.hasClass(this.featuresSetting,
"hidden-setting")?this._showFeaturesSetting():this._hideFeaturesSetting()},_showFeaturesSetting:function(){k.addClass(this.drawGraphicSettting,"hidden-setting");this._updateDrawGraphicArrowIcon();k.removeClass(this.featuresSetting,"hidden-setting");this._updateFeaturesArrowIcon()},_hideFeaturesSetting:function(){k.addClass(this.featuresSetting,"hidden-setting");this._updateFeaturesArrowIcon()},_updateFeaturesArrowIcon:function(){k.hasClass(this.featuresSetting,"hidden-setting")?k.removeClass(this.arrowIconFeatures,
"opened"):k.addClass(this.arrowIconFeatures,"opened")},_onDrawingToolsContainerClicked:function(b){b=b.target||b.srcElement;var f=null;k.hasClass(b,"draw-item")?f=b:k.hasClass(b,"draw-item-icon")&&(f=b.parentNode);f&&(k.toggleClass(f,"selected"),0===n(".selected",this.drawingToolsContainer).length&&k.addClass(f,"selected"))},_selectDrawingTools:function(b){var f=n(".draw-item",this.drawingToolsContainer);q.forEach(f,c.hitch(this,function(p){var z=p.getAttribute("data-geotype");0<=b.indexOf(z)?k.addClass(p,
"selected"):k.removeClass(p,"selected")}))},_getSelectedDrawingTools:function(){var b=[];b=n(".draw-item.selected",this.drawingToolsContainer);return b=q.map(b,c.hitch(this,function(f){return f.getAttribute("data-geotype")}))},_onBtnRelationshipClicked:function(){var b=this._getRelationshipsFromTextBox(),f=new e({nls:this.nls,allRelationshipInfos:c.clone(this._allRelationshipInfos)}),p=new r({width:640,height:405,titleLabel:this.nls.setSpatialRelationships,content:f,onClose:c.hitch(this,function(){f.destroy();
f=null}),buttons:[{label:this.nls.ok,onClick:c.hitch(this,function(){var z=f.getSelectedRelationships();this._setRelationshipsForTextBox(z);p.close()})},{label:this.nls.cancel,onClick:c.hitch(this,function(){p.close()})}]});f.setSelectedRelationshipInfos(b)},_resetToDefaultRelationshipForTextBox:function(){this._setRelationshipsForTextBox([{relationship:"SPATIAL_REL_INTERSECTS",label:this.nls.intersect}])},_setRelationshipsForTextBox:function(b){this.relationshipTextBox.relationships=c.clone(b);b=
q.map(b,function(f){return f.label}).join("; ");this.relationshipTextBox.set("value",b);this.relationshipTextBox.domNode.title=b},_getRelationshipsFromTextBox:function(){var b=[];this.relationshipTextBox.relationships&&(b=q.map(this.relationshipTextBox.relationships,function(f){return{relationship:f.relationship,label:f.label}}));return b}})})},"widgets/Query/setting/SearchDistance":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SearchDistance.html dojo/_base/lang jimu/utils dijit/form/Select dijit/form/NumberTextBox".split(" "),
function(x,C,E,B,w,d,n){return x([C,E,B],{baseClass:"jimu-query-setting-searchdistance",templateString:w,_allUnitInfos:null,nls:null,config:null,postCreate:function(){this.inherited(arguments);this.reset();this.config&&this.setConfig(this.config)},setConfig:function(c){this.reset();this.config=d.clone(c);this.numberTextBox.set("value",this.config.defaultDistance);this.defaultUnitSelect.set("value",this.config.defaultUnit)},getConfig:function(){var c={defaultDistance:0,defaultUnit:""};if(this.numberTextBox.validate())return c.defaultDistance=
this.numberTextBox.get("value"),c.defaultUnit=this.defaultUnitSelect.get("value"),c;n.showValidationErrorTipForFormDijit(this.numberTextBox)},reset:function(){this.numberTextBox.set("value",0);this.defaultUnitSelect.set("value","MILES")},enable:function(){this.numberTextBox.set("disabled",!1);this.defaultUnitSelect.set("disabled",!1)},disable:function(){this.numberTextBox.set("disabled",!0);this.defaultUnitSelect.set("disabled",!0)}})})},"widgets/Query/setting/RelationshipsSelector":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/_base/array jimu/dijit/SimpleTable".split(" "),
function(x,C,E,B,w,d,n){return x([C,E,B],{baseClass:"jimu-query-setting-relationships-selector",templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"tableDiv"\x3e\x3c/div\x3e\x3c/div\x3e',nls:null,allRelationshipInfos:null,postCreate:function(){this.inherited(arguments);this._initTable()},setSelectedRelationshipInfos:function(c){if(c&&0<=c.length){var k=w.clone(c),q=d.map(k,function(e){return e.relationship});c=this.table.getRows();var g={};d.forEach(c,w.hitch(this,function(e){var v=this.table.getRowData(e);
v=q.indexOf(v.relationship);0<=v?(this.table.editRow(e,{cbx:!0,label:k[v].label}),g[v]=e):this.table.editRow(e,{cbx:!1})}));for(c=q.length-1;0<=c;c--)g[c]&&this.table.moveToTop(g[c])}},getSelectedRelationships:function(){var c=this.table.getData();c=d.filter(c,w.hitch(this,function(k){return k.cbx}));return d.map(c,w.hitch(this,function(k){return{relationship:k.relationship,label:k.label}}))},_initTable:function(){this.table=new n({autoHeight:!1,style:"height:277px",fields:[{name:"cbx",title:"",type:"checkbox",
width:"40px"},{name:"relationship",title:"",type:"text",hidden:!0},{name:"nls",title:this.nls.relationship,type:"text"},{name:"label",title:this.nls.label,type:"text",editable:!0},{name:"actions",title:this.nls.actions,type:"actions",actions:["up","down"],width:"120px"}]});this.table.placeAt(this.tableDiv);var c=d.map(this.allRelationshipInfos,w.hitch(this,function(k){return{cbx:!0,relationship:k.relationship,nls:k.nls,label:k.label}}));this.table.addRows(c)}})})},"jimu/dijit/SymbolPicker":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dijit/TooltipDialog dijit/popup dijit/registry jimu/dijit/SymbolChooser jimu/symbolUtils".split(" "),
function(x,C,E,B,w,d,n,c,k,q,g,e,v,r){return x([C,E,B],{baseClass:"jimu-symbol-picker",declaredClass:"jimu.dijit.SymbolPicker",templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"symbolNode" class\x3d"symbol-node jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"separator jimu-float-leading"\x3e\x3c/div\x3e\x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8 jimu-float-leading"\x3e\x3c/div\x3e\x3c/div\x3e',tooltipDialog:null,_isTooltipDialogOpened:!1,symbol:null,type:null,cropImage:!1,
customZIndex:null,postCreate:function(){this.inherited(arguments);this._createTooltipDialog();this._hideTooltipDialog();var t=this.symbolChooser.getSymbol();t&&this._drawSymbol(t)},destroy:function(){this._hideTooltipDialog();this.symbolChooser&&this.symbolChooser.destroy();this.symbolChooser=null;this.inherited(arguments)},_createTooltipDialog:function(){var t=d.create("div");this.tooltipDialog=new q({content:t});this.symbolChooser=new v({cropImage:this.cropImage,customZIndex:this.customZIndex,symbol:this.symbol,
type:this.type});this.symbolChooser.placeAt(t);this.symbolChooser.startup();this.own(c(this.symbolChooser,"change",w.hitch(this,function(b){this._drawSymbol(b);this.emit("change",b)})));this.own(c(this.domNode,"click",w.hitch(this,function(b){b.stopPropagation();b.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():this._showTooltipDialog()})));this.own(c(document.body,"click",w.hitch(this,function(b){var f=b.target||b.srcElement;b=this._getColorPickers();if(!(0<b.length&&n.some(b,
function(a){return a.isPartOfPopup(f)})))if(b=this.tooltipDialog.domNode,b=f===b||d.isDescendant(f,b),this.cropImage&&this.symbolChooser._isCustomImageOptionSelected()){var p=this.symbolChooser.imageChooser,z=p.msgPopupOpen;p.cropPopupOpen||z||b||this._hideTooltipDialog();p.cropPopup&&p.cropPopup.domNode||(p.cropPopupOpen=!1);p.msgPopup&&p.msgPopup.domNode||(p.msgPopupOpen=!1)}else b||this._hideTooltipDialog()})));this.own(c(this.symbolChooser,"resize",w.hitch(this,function(){this._isTooltipDialogOpened&&
(this._hideTooltipDialog(),this._showTooltipDialog())})))},_getColorPickers:function(){var t=k(".jimu-color-picker",this.symbolChooser.domNode);return n.map(t,w.hitch(this,function(b){return e.byNode(b)}))},reset:function(){this.symbol=this.type=null;d.empty(this.symbolNode);this.symbolChooser.reset()},showBySymbol:function(t){this.reset();t&&(this._drawSymbol(t),this.symbolChooser.showBySymbol(t))},showByType:function(t){this.reset();this.symbolChooser.showByType(t);(t=this.symbolChooser.getSymbol())&&
this._drawSymbol(t)},getSymbol:function(){return this.symbolChooser.getSymbol()},_drawSymbol:function(t){d.empty(this.symbolNode);t&&(t=r.createSymbolNode(t,{width:16,height:16}))&&d.place(t,this.symbolNode)},_showTooltipDialog:function(){this.tooltipDialog&&(g.open({parent:this.getParent(),popup:this.tooltipDialog,around:this.domNode}),this._isTooltipDialogOpened=!0)},_hideTooltipDialog:function(){this.tooltipDialog&&(g.close(this.tooltipDialog),this._isTooltipDialogOpened=!1)}})})},"widgets/Query/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/QueryableLayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"map-td" nowrap data-dojo-attach-point\x3d"mapTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"portal-td" nowrap data-dojo-attach-point\x3d"portalTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"url-td" nowrap data-dojo-attach-point\x3d"urlTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"mapDijitContainer" class\x3d"dijit-container map-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"portalDijitContainer" class\x3d"dijit-container portal-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"urlDijitContainer" class\x3d"dijit-container url-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/QueryableServiceChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ItemSelector.html":'\r\n\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cdiv\x3e${nls.groups}:\x3c/div\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cfieldset id\x3d"publicSearchRaido"\x3e\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" data-dojo-type\x3d"dijit/form/RadioButton" \r\n\t\t\t\t\t\t\tdata-label-id\x3d"portalPublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading portal-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" data-label-for\x3d"portalPublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" data-dojo-type\x3d"dijit/form/RadioButton"\r\n\t\t\t\t\t\t\tdata-label-id\x3d"onlinePublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading online-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" data-label-for\x3d"onlinePublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\t\x3c/fieldset\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan title\x3d"${nls.example}:"\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/SingleQuerySetting.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"filterDiv" style\x3d"height:1px;visibility:hidden;overflow:hidden;"\x3e\x3c/div\x3e\r\n\t\r\n\t\x3ctable data-dojo-attach-point\x3d"generalTable" class\x3d"general" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"first-td"\x3e${nls.querySource}\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\x3ctable cellpadding\x3d"0" cellspacing\x3d"0" style\x3d"width:100%;border-collapse:collapse;"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true,trim:true,disabled:true\' style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:40px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"setting-btn jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnSetSourceClicked" title\x3d"${nls.setSource}"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-setting"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"detailSection" class\x3d"detail"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"infoTabNode"\x3e\r\n\t\t\t\x3ctable class\x3d"general" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e${jimuNls.common.title}\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"queryNameTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true,trim:true\' style\x3d"width:100%;" data-dojo-attach-event\x3d"change:_onQueryNameChanged"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e${nls.icon}\x3c/td\x3e\r\n\t\t\t\t\t\t\x3ctd class\x3d"second-td"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"symbolPicker" data-dojo-type\x3d"jimu/dijit/SymbolPicker" data-dojo-props\x3d"cropImage:true,customZIndex:2000"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"definitionTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"attribute-filter-section"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"stress"\x3e${nls.queryCriteira}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"attribute-filter-content"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"jimu-widget-note" style\x3d"margin-top:5px;"\x3e${nls.defineWhereClause}\x3c/div\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;margin-top:4px;"\x3e\r\n\t\t\t\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\t\t\x3ccol width\x3d"40"\x3e\x3c/col\x3e\r\n\t\t\t\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"attribute-sql jimu-widget-note" data-dojo-attach-point\x3d"sqlDiv" style\x3d"border:1px solid #ccc;padding:7px 8px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"setting-btn jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnFilterClicked" title\x3d"${nls.setSource}"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-setting"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\t\x3cdiv style\x3d"margin-top:13px;" data-dojo-attach-point\x3d"showSQLSection"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"spatial-filter-section" data-dojo-attach-point\x3d"spatialFilterDiv"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"resultsTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"popup-section"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"stress"\x3e${nls.content}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"popupContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"symbolSection" class\x3d"symbol-section" style\x3d"margin-top:14px;"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"stress" style\x3d"margin-bottom:15px;"\x3e${nls.symbol}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv style\x3d"margin-top:5px;"\x3e\r\n\t\t\t\t\t\x3cfieldset id\x3d"symbolRadioGroup"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"radio-label-container"\x3e\r\n\t\t\t\t\t\t\t\x3cinput data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"radioServiceSymbol" class\x3d"jimu-radio-btn" name\x3d"symbolRadioGroup" /\x3e\r\n\t\t\t\t\t\t\t\x3clabel for\x3d"radioServiceSymbol" data-dojo-attach-point\x3d"labelServiceSymbol"\x3e${nls.serviceSymbolTip}\x3c/label\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"radio-label-container" style\x3d"margin-top:8px;"\x3e\r\n\t\t\t\t\t\t\t\x3cinput data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"radioCustomSymbol" checked class\x3d"jimu-radio-btn" name\x3d"symbolRadioGroup"/\x3e\r\n\t\t\t\t\t\t\t\x3clabel for\x3d"radioCustomSymbol" data-dojo-attach-point\x3d"labelCustomSymbol"\x3e${nls.setSymbol}\x3c/label\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"layerSymbolPicker" data-dojo-type\x3d"jimu/dijit/SymbolPicker"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/fieldset\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"small-font-size" data-dojo-attach-point\x3d"cbxModifySymbol" style\x3d"margin-top:8px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"optionsTabNode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"cbxKeepResultsDiv" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"export-section" data-dojo-attach-point\x3d"exportSection"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv style\x3d"margin-top: 5px;" data-dojo-attach-point\x3d"expandSection"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv style\x3d"margin-top: 5px;" data-dojo-attach-point\x3d"customResultNameSection"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"create-layer-section"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"stress"\x3e${nls.createLayerForTaskTip}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv style\x3d"margin-top:15px;"\x3e\r\n\t\t\t\t\t\x3cfieldset id\x3d"resLayerRadioGroup"\x3e\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\x3cdiv class\x3d"radio-label-container"\x3e\r\n\t\t\t\t\t\t\t\x3cinput name\x3d"resLayerRadioGroup" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"radioOneLayerPerTask" checked class\x3d"jimu-radio-btn"/\x3e\r\n\t\t\t\t\t\t\t\x3clabel for\x3d"radioOneLayerPerTask" data-dojo-attach-point\x3d"labelOneLayerPerTask"\x3e${nls.oneLayerForTaskTip}\x3c/label\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"radio-label-container" style\x3d"margin-top:15px;"\x3e\r\n\t\t\t\t\t\t\t\x3cinput name\x3d"resLayerRadioGroup" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"radioMultipleLayerPerTask" class\x3d"jimu-radio-btn"/\x3e\r\n\t\t\t\t\t\t\t\x3clabel for\x3d"radioMultipleLayerPerTask" data-dojo-attach-point\x3d"labelMultipleLayerPerTask"\x3e${nls.multipleLayerForTaskTip}\x3c/label\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\t\t\x3c/fieldset\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/PopupConfig.html":'\x3cdiv\x3e\r\n\t\x3cdiv style\x3d"margin-top:15px;margin-bottom:10px;"\x3e\r\n\t\t\x3cfieldset id\x3d"popupcontent"\x3e\r\n\t\t\t\x3cdiv class\x3d"radio-label-container radio-div portal-radio-div"\x3e\r\n\t\t\t\t\x3cinput name\x3d"popupcontent" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"portalRadio" class\x3d"jimu-radio-btn"/\x3e\r\n\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.webMapPopupTip}\x3c/label\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"radio-label-container radio-div custom-radio-div" style\x3d"margin-top:10px;"\x3e\r\n\t\t\t\t\x3cinput name\x3d"popupcontent" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"customRadio" class\x3d"jimu-radio-btn"/\x3e\r\n\t\t\t\t\x3clabel data-dojo-attach-point\x3d"customLabel"\x3e${nls.customPopupTip}\x3c/label\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/fieldset\x3e\r\n\t\x3c/div\x3e\r\n\t\x3ctable class\x3d"title-sorting-table"\x3e\r\n\t\t\x3ccolgroup\x3e\r\n\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\x3ccol width\x3d"38px"\x3e\x3c/col\x3e\r\n\t\t\x3c/colgroup\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr class\x3d"indent-tr"\x3e\r\n\t\t\t\t\x3ctd colspan\x3d"2" class\x3d"indent-td" style\x3d"padding-bottom:4px;"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"light-stress"\x3e${nls.resultItemTitle}:\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr class\x3d"indent-tr"\x3e\r\n\t\t\t\t\x3ctd class\x3d"indent-td"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"titleTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n\t\t\t\t\tdata-dojo-props\x3d\'required:true,trim:true\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnAddFields" data-dojo-attach-event\x3d"onclick:_onAddClicked" class\x3d"setting-btn btn-add-fields jimu-float-trailing"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr class\x3d"indent-tr"\x3e\r\n\t\t\t\t\x3ctd colspan\x3d"2" class\x3d"indent-td" style\x3d"padding-top:10px;padding-bottom:4px;"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"light-stress"\x3e${nls.resultItemContent}:\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr class\x3d"indent-tr"\x3e\r\n\t\t\t\t\x3ctd class\x3d"indent-td"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"displayFieldsTextBox" class\x3d"display-fields-textbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n\t\t\t\t\tdata-dojo-props\x3d\'required:true,trim:true,disabled:true\' style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnSetDisplayFields" class\x3d"setting-btn btn-display-fields jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnSetDisplayFieldsClicked"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-edit"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd colspan\x3d"2" style\x3d"padding-top:15px;padding-bottom:7px;"\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"light-stress"\x3e${nls.sortingFields}:\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd data-dojo-attach-point\x3d"tdSortFields"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"sortFieldsDiv" class\x3d"sort-fields-div jimu-ellipsis"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnSortFields" class\x3d"setting-btn btn-sort-fields jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnSortFieldsClicked"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-edit" data-dojo-attach-point\x3d"sortFieldsIcon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"displayFieldsSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"displayFieldsDiv"\x3e\r\n\t\t\t\x3cdiv style\x3d"margin-top:7px;margin-bottom:8px;font-size:12px;"\x3e${nls.fieldsSetTip}\x3c/div\x3e\r\n\t\t  \x3cdiv data-dojo-attach-point\x3d"fieldsContainer"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/SortFields.html":'\x3cdiv\x3e\r\n\t\x3cdiv\x3e${nls.configureFieldsTip}\x3c/div\x3e\r\n\t\x3cdiv class\x3d"add-with-icon" data-dojo-attach-event\x3d"onclick:_onAddNewClicked"\x3e\r\n\t\t\x3cspan class\x3d"jimu-icon jimu-icon-add"\x3e\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"add-label"\x3e${nls.addNew}\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"tableDiv"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/Query/setting/SpatialFilterConfig.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"stress"\x3e${nls.spatialFilter}\x3c/div\x3e\r\n\t\x3cdiv class\x3d"spatial-filter-content"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-widget-note" style\x3d"margin-top:5px;"\x3e${nls.spatialFilterTip}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"spatial-filter-items" style\x3d"margin-top:5px;"\x3e\r\n\t\t\t\x3cdiv class\x3d"spatial-filter-item" data-dojo-attach-point\x3d"mapExtentSection"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"spatial-filter-item-head"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"cbx-title-default"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"checkbox-container" data-dojo-attach-point\x3d"cbxMapExtentDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"make-default" data-dojo-attach-event\x3d"onclick:_onBtnMakeDefaultClicked" title\x3d"${nls.makeDefault}"\x3e${nls.makeDefault}\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"default-text" title\x3d"${nls.defaultOption}"\x3e${nls.defaultOption}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"icon-placeholder"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv class\x3d"spatial-filter-item" data-dojo-attach-point\x3d"drawGraphicSection"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"spatial-filter-item-head"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"cbx-title-default"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"checkbox-container cbx-draw-graphic-div" data-dojo-attach-point\x3d"cbxDrawGraphicDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"make-default" data-dojo-attach-event\x3d"onclick:_onBtnMakeDefaultClicked" title\x3d"${nls.makeDefault}"\x3e${nls.makeDefault}\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"default-text" title\x3d"${nls.defaultOption}"\x3e${nls.defaultOption}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"icon-placeholder arrow-icon" data-dojo-attach-point\x3d"arrowIconDrawGraphic" data-dojo-attach-event\x3d"onclick:_onDrawGraphicArrowIconClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"drawGraphicSettting" class\x3d"draw-graphic-setting hidden-setting leading-padding20"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"drawing-tools-section"\x3e\r\n\t\t\t\t\t\t\x3cdiv style\x3d"font-weight:bold;"\x3e${nls.drawingTools}\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"drawingToolsContainer" class\x3d"drawing-tools-container" data-dojo-attach-event\x3d"onclick:_onDrawingToolsContainerClicked"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item point" data-geotype\x3d"POINT"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item line" data-geotype\x3d"LINE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item polyline" data-geotype\x3d"POLYLINE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item freehand-polyline" data-geotype\x3d"FREEHAND_POLYLINE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item triangle" data-geotype\x3d"TRIANGLE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item extent" data-geotype\x3d"EXTENT"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item circle" data-geotype\x3d"CIRCLE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item ellipse" data-geotype\x3d"ELLIPSE"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item polygon" data-geotype\x3d"POLYGON"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item freehand-polygon" data-geotype\x3d"FREEHAND_POLYGON"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"draw-item-icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"search-distance-section" \x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"drawBufferSettingCbxDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"search-distance-div" data-dojo-attach-point\x3d"drawingSearchDistanceDiv" style\x3d"margin-top:5px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv class\x3d"spatial-filter-item" data-dojo-attach-point\x3d"useFeaturesSection"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"spatial-filter-item-head"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"cbx-title-default"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"checkbox-container cbx-use-features-div" data-dojo-attach-point\x3d"cbxUseFeaturesDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"make-default" data-dojo-attach-event\x3d"onclick:_onBtnMakeDefaultClicked" title\x3d"${nls.makeDefault}"\x3e${nls.makeDefault}\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"default-text" title\x3d"${nls.defaultOption}"\x3e${nls.defaultOption}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"icon-placeholder arrow-icon" data-dojo-attach-point\x3d"arrowIconFeatures" data-dojo-attach-event\x3d"onclick:_onFeaturesArrowIconClicked"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"featuresSetting" class\x3d"features-setting hidden-setting leading-padding20"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"relationships-section" style\x3d"margin-top:10px;"\x3e\r\n\t\t\t\t\t\t\x3cdiv style\x3d"font-weight:bold;"\x3e${nls.availableSpatialRelationships}\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"relationships-selector-div"\x3e\r\n\t\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"relationshipTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3cdiv class\x3d"setting-btn jimu-float-trailing" data-dojo-attach-event\x3d"onclick:_onBtnRelationshipClicked"\x3e\r\n\t\t\t\t\t\t\t\t\x3cdiv class\x3d"jimu-icon jimu-icon-setting"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"search-distance-section" style\x3d"margin-top:10px;"\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"featureBufferSettingCbxDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"search-distance-div" data-dojo-attach-point\x3d"featuresSearchDistanceDiv" style\x3d"margin-top:5px;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv class\x3d"spatial-filter-item" data-dojo-attach-point\x3d"layerExtentSection"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"spatial-filter-item-head"\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"cbx-title-default"\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"checkbox-container" data-dojo-attach-point\x3d"cbxLayerExtentDiv"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"make-default" data-dojo-attach-event\x3d"onclick:_onBtnMakeDefaultClicked" title\x3d"${nls.makeDefault}"\x3e${nls.makeDefault}\x3c/div\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"default-text" title\x3d"${nls.defaultOption}"\x3e${nls.defaultOption}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv class\x3d"icon-placeholder"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/SearchDistance.html":'\x3cdiv\x3e\r\n\t\x3ctable style\x3d"table-layout:fixed;"\x3e\r\n\t\t\x3ccolgroup\x3e\r\n\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\x3ccol width\x3d"15px"\x3e\x3c/col\x3e\r\n\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\x3c/colgroup\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"padding-bottom:5px;"\x3e${nls.defaultDistance}\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e${nls.defaultUnit}\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"numberTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n\t\t\t\t\t data-dojo-props\x3d\'"required":true,intermediateChanges:true,constraints:{min:0,pattern:"#####0.##########"}\'\r\n\t\t\t\t\t style\x3d"width:100%;" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\x3c/td\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cselect data-dojo-type\x3d"dijit/form/Select" class\x3d"restrict-select-width" data-dojo-attach-point\x3d"defaultUnitSelect" style\x3d"width:100%;"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"MILES" selected\x3e${nls.miles}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"KILOMETERS"\x3e${nls.kilometers}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"FEET"\x3e${nls.feet}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"METERS"\x3e${nls.meters}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"YARDS"\x3e${nls.yards}\x3c/option\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"NAUTICAL_MILES"\x3e${nls.nauticalMiles}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/Setting.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"query-label hor-center"\x3e${nls.querySettings}\x3c/div\x3e\r\n\t\x3cdiv style\x3d"margin-top:3px;" class\x3d"add-task-tip hor-center"\x3e${nls.addTaskTip}\x3c/div\x3e\r\n\t\x3cdiv class\x3d"content"\x3e\r\n\r\n\t\t\x3cdiv class\x3d"items-list jimu-not-selectable"\x3e\r\n\t\t\t\x3cdiv class\x3d"add-btn" data-dojo-attach-event\x3d"click:_onBtnAddItemClicked"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"icon"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"tip"\x3e${nls.newQuery}\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"items-list-content" data-dojo-attach-point\x3d"listContent" data-dojo-attach-event\x3d"click:_onListContentClicked"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"separator not-visible" data-dojo-attach-point\x3d"separator"\x3e\x3c/div\x3e\r\n\t\t\r\n\t\t\x3cdiv class\x3d"single-setting-content" data-dojo-attach-point\x3d"singleSettingContent"\x3e\r\n\t\t\t\x3cdiv class\x3d"no-query-tip" data-dojo-attach-point\x3d"noQueryTip"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"general-setting"\x3e\r\n\t\t\x3cdiv class\x3d"query-label hor-center"\x3e${nls.optionsText}\x3c/div\x3e\r\n\t\t\r\n\t\t\x3cdiv class\x3d"check-box-container hor-center"\x3e\r\n\t\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"normal-font-size" data-dojo-attach-point\x3d"cbxHideLayersAfterWidgetClosed" data-dojo-props\x3d\'checked:true\'\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\r\n\r\n\t\t\x3cdiv style\x3d"margin-bottom: 19px;" class\x3d"query-label"\x3e${nls.tabLabels}:\x3c/div\x3e\r\n\t\t\x3cdiv style\x3d"margin-bottom: 19px;" class\x3d"tab-labels-container"\x3e\r\n\t\t\t\x3cdiv class\x3d"label-box-group"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"query-sub-label text-over-flow" title\x3d"${nls.tasks}"\x3e${nls.tasks}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"general-text-box" data-dojo-attach-point\x3d"labelTasksTextBox" data-dojo-type\x3d"dijit/form/TextBox" value\x3d"${nls.tasks}"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv class\x3d"label-box-group margin-lr-60"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"query-sub-label text-over-flow" title\x3d"${nls.results}"\x3e${nls.results}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"general-text-box" data-dojo-attach-point\x3d"labelResultsTextBox" data-dojo-type\x3d"dijit/form/TextBox" value\x3d"${nls.results}"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-event\x3d"change:_onShowFilterLabelCbxChanged" style\x3d"margin-bottom: 13px;" data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"normal-font-size" data-dojo-attach-point\x3d"cbxShowFilterLabels" data-dojo-props\x3d\'checked:true\'\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"filterLabelOptionContainer" class\x3d"tab-labels-container"\x3e\r\n\t\t\t\x3cdiv class\x3d"label-box-group"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"query-sub-label text-over-flow" title\x3d"${nls.queryCriteira}"\x3e${nls.queryCriteira}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"general-text-box" data-dojo-attach-point\x3d"criteiraTextBox" data-dojo-type\x3d"dijit/form/TextBox" value\x3d"${nls.queryCriteira}"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv class\x3d"label-box-group margin-lr-60"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"query-sub-label text-over-flow" title\x3d"${nls.spatialFilter}"\x3e${nls.spatialFilter}\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"general-text-box" data-dojo-attach-point\x3d"spatialTextBox" data-dojo-type\x3d"dijit/form/TextBox" value\x3d"${nls.spatialFilter}"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Query/setting/css/style.css":'.jimu-widget-query-setting {width: 100%; font-size: 12px;}.jimu-widget-query-setting .add-task-tip {font-size: 12px; color: #666666;}.jimu-widget-query-setting .not-visible {display: none;}.jimu-widget-query-setting \x3e .content {position: relative; left: 0; right: 0; top: 24.5px; bottom: 0; height: 457px;}.jimu-widget-query-setting \x3e .content \x3e div {position: absolute; top: 0; bottom: 0; height: 100%;}.jimu-widget-query-setting .items-list {left: 0; width: 300px;}.jimu-widget-query-setting \x3e .content \x3e .separator {left: 320px; width: 1px; background-color: #ccc;}.jimu-widget-query-setting .single-setting-content {right: 5px; width: 620px;}.jimu-widget-query-setting.ie-ff .single-setting-content {width: 610px;}.jimu-rtl .jimu-widget-query-setting .items-list {left: auto; right: 0;}.jimu-rtl .jimu-widget-query-setting \x3e .content \x3e .separator {left: auto; right: 320px;}.jimu-rtl .jimu-widget-query-setting .single-setting-content {right: auto; left: 5px;}.jimu-widget-query-setting .items-list-content {position: absolute; left: 0; right: 0; top: 50px; bottom: 0; overflow: auto;}.jimu-widget-query-setting .items-list-content .item {position: relative; width: 100%; height: 40px; border-top: 1px solid #F3F3F3; cursor: pointer;}.jimu-widget-query-setting .items-list-content .item:hover {background-color: #F9F9F9;}.jimu-widget-query-setting .items-list-content .item.selected {background-color: #F3F3F3 !important; border-left: 4px solid #24B5CC;}.jimu-rtl .jimu-widget-query-setting .items-list-content .item.selected {border-left: 0; border-right: 4px solid #24B5CC;}.jimu-widget-query-setting .items-list-content .item \x3e * {cursor: pointer;}.jimu-widget-query-setting .items-list-content .item:first-child {border-top: 0;}.jimu-widget-query-setting .items-list-content .item .label {position: absolute; left: 8px; right: 8px; top: 0; bottom: 0; line-height: 40px; font-size: 12px; color: #353535;}.jimu-widget-query-setting .items-list-content .item.selected .label {font-weight: bold; color: #000;}.jimu-widget-query-setting .items-list-content .item .actions {position: relative; display: none; height: 100%; overflow: hidden; background-color: #F9F9F9;}.jimu-widget-query-setting .items-list-content .item:hover .actions {display: block;}.jimu-widget-query-setting .items-list-content .item.selected .actions {background-color: #F3F3F3 !important;}.jimu-widget-query-setting .items-list-content .item .action {width: 12px; height: 12px; background-repeat: no-repeat; background-position: center center; position: relative; top: 14px; cursor: pointer; margin: 0 5px;}.jimu-widget-query-setting .items-list-content .item .action.up {background-image: url("images/up_normal.png");}.jimu-widget-query-setting .items-list-content .item .action.up:hover {background-image: url("images/up_hover.png");}.jimu-widget-query-setting .items-list-content .item .action.down {background-image: url("images/down_normal.png");}.jimu-widget-query-setting .items-list-content .item .action.down:hover {background-image: url("images/down_hover.png");}.jimu-widget-query-setting .items-list-content .item .action.delete {background-image: url("images/delete_normal.png");}.jimu-widget-query-setting .items-list-content .item .action.delete:hover {background-image: url("images/delete_hover.png");}.jimu-widget-query-setting .items-list-content .item:first-child .action.up {display: none;}.jimu-widget-query-setting .items-list-content .item:last-child .action.down {display: none;}.jimu-widget-query-setting .add-btn {display: inline-block; width: 100%; height: 32px; background-color: #24B5CC; color: #ffffff; text-align: center; cursor: pointer;}.jimu-widget-query-setting .add-btn:hover {background-color: #0090A7;}.jimu-widget-query-setting .add-btn \x3e div {display: inline-block; cursor: pointer; height: 32px; line-height: 32px; font-size: 12px;}.jimu-widget-query-setting .add-btn .icon {position: relative; top: 1px; width: 12px; height: 12px; background: url("images/add.png") center center no-repeat; background-size: contain;}.jimu-widget-query-setting .add-btn .tip {margin-left: 8px;}.jimu-rtl .jimu-widget-query-setting .add-btn .tip {margin-left: 0; margin-right: 8px;}.jimu-widget-query-setting .hide {display: none !important;}.jimu-widget-query-setting .hor-center {display: flex; align-items: center;}.jimu-widget-query-setting .query-label {font-size: 16px; color: #000000; font-family: "Avenir Medium"; height: 22px;}.jimu-widget-query-setting .add-task-tip {font-size: 12px; height: 16px;}.jimu-widget-query-setting .text-over-flow {white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-query-setting \x3e .content {bottom: 90px;}.jimu-widget-query-setting \x3e .general-setting {position: relative; left: 0; right: 0; top: 24.5px; margin-bottom: 10px;}.jimu-widget-query-setting .check-box-container {height: 19px; margin-bottom: 15px; margin-top: 5px;}.jimu-widget-query-setting \x3e .general-setting .tab-labels-container {margin-left: 28px; display: flex; align-items: center; height: 30px;}.jimu-rtl .jimu-widget-query-setting \x3e .general-setting .tab-labels-container {margin-right: 28px; margin-left: 0;}.jimu-widget-query-setting \x3e .general-setting .tab-labels-container .label-box-group {display: flex; align-items: center; width: 325px; justify-content: space-between;}.jimu-widget-query-setting \x3e .general-setting .tab-labels-container .label-box-group.margin-lr-60 {margin-left: 60px;}.jimu-rtl .jimu-widget-query-setting \x3e .general-setting .tab-labels-container .label-box-group.margin-lr-60 {margin-right: 60px; margin-left: 0;}.jimu-widget-query-setting \x3e .general-setting .query-sub-label {width: 100px; font-size: 14px;}.jimu-widget-query-setting \x3e .general-setting .general-text-box {width: 220px; height: 30px;}.jimu-widget-query-setting .jimu-checkbox.normal-font-size .label {font-size: 14px;}.jimu-widget-query-setting .jimu-checkbox.small-font-size .label {font-size: 12px; margin-top: 3px;}.jimu-widget-query-setting .stress {font-size: 14px; font-weight: bold; color: #000;}.jimu-widget-query-setting .light-stress {font-family: \'Avenir Medium\'; font-size: 12px; color: #353535;}.jimu-widget-query-setting .radio-label-container \x3e * {vertical-align: middle;}.jimu-widget-query-setting .radio-label-container input {margin-left: 2px; vertical-align: middle;}.jimu-rtl .jimu-widget-query-setting .radio-label-container input {margin-left: 0; margin-right: 2px;}.jimu-widget-query-setting .jimu-checkbox.buffer-checkbox .label {font-size: 12px; font-weight: bold;}.jimu-widget-query-setting .leading-padding20 {padding-left: 20px;}.jimu-rtl .jimu-widget-query-setting .leading-padding20 {padding-left: 0; padding-right: 20px;}.jimu-widget-query-setting .single-setting-content .no-query-tip {position: relative; top: 50%; margin-top: -10px;}.jimu-widget-query-setting .single-setting-content .no-query-tip span {font-weight: bold;}.jimu-widget-single-query-setting {position: relative; width: 100%; height: 100%;}.jimu-widget-single-query-setting .click-picker {display: inline-block; border: 1px solid #D7D7D7; height: 24px; overflow: hidden; padding: 0 4px; cursor: pointer;}.jimu-widget-single-query-setting .click-picker .jimu-image-chooser {position: relative; top: 4px;}.jimu-widget-single-query-setting .click-picker .separator {position: relative; top: 4px; width: 1px; height: 16px; background-color: #D7D7D7; margin: 0 5px;}.jimu-widget-single-query-setting .click-picker .jimu-icon {position: relative; top: 8px;}.jimu-widget-single-query-setting .setting-btn {width: 30px; height: 30px; border: 1px solid #D7D7D7; cursor: pointer;}.jimu-widget-single-query-setting .setting-btn .jimu-icon {position: relative; left: 7px; top: 7px;}.jimu-rtl .jimu-widget-single-query-setting .setting-btn .jimu-icon {left: auto; right: 7px;}.jimu-widget-single-query-setting table.general {width: 100%; border-collapse: collapse;}.jimu-widget-single-query-setting table.general\x3etbody\x3etr\x3etd {height: 40px;}.jimu-widget-single-query-setting table.general\x3etbody\x3etr\x3e.first-td {width: 100px;}.jimu-widget-single-query-setting table.general\x3etbody\x3etr\x3e.second-td {width: auto;}.jimu-widget-single-query-setting .detail {position: absolute; width: 100%; left: 0; right: 0; top: 55px; bottom: 0;}.jimu-widget-single-query-setting .detail .jimu-tab3 {height: 100%;}.jimu-widget-single-query-setting .detail .jimu-tab3 \x3e .jimu-viewstack {position: absolute; width: 100%; left: 0; right: 0; top: 55px; bottom: 0;}.jimu-widget-single-query-setting .detail .jimu-tab3 \x3e .jimu-viewstack \x3e .view {overflow: auto;}.jimu-widget-single-query-setting .tab-item-div {height: 30px; line-height: 30px;}.jimu-widget-single-query-setting .title-sorting-table {table-layout: fixed; width: 100%;}.jimu-widget-single-query-setting .spatial-filter-section {margin-top: 20px;}.jimu-widget-single-query-setting .draw-graphic-setting .search-distance-section {margin-top: 7px;}.jimu-widget-single-query-setting .create-layer-section {margin-top: 22px;}.jimu-widget-single-query-setting .cbx-at-div {margin-top: 15px;}.jimu-widget-single-query-setting .cbx-rt-div {margin-top: 15px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item {margin-top: 10px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item-head {display: flex; align-items: flex-start;}.jimu-query-setting-spatialfilter-config .spatial-filter-item-head .cbx-title-default {display: flex; flex-grow: 1; align-items: flex-start; justify-content: space-between;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .checkbox-container {max-width: 510px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .checkbox-container .jimu-checkbox{align-items: flex-start;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .default-text {max-width: 100px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; color: green; cursor: pointer; display: none; margin-right: 5px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item.default .default-text {display: block; color: #9B9B9B; background-color: #F3F3F3; font-size: 12px; padding: 2px 6px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .make-default {cursor: pointer; max-width: 100px; display: none; font-size: 12px; background-color: #24B5CC; color: #ffffff; padding: 2px 6px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-right: 5px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item:hover .make-default {display: block;}.jimu-query-setting-spatialfilter-config .spatial-filter-item.default:hover .make-default {display: none;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .icon-placeholder {width: 13px; height: 13px; cursor: pointer;}.jimu-rtl .jimu-query-setting-spatialfilter-config .spatial-filter-item .icon-placeholder {float: left; margin-left: 0; margin-right: 10px;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .arrow-icon {background: url(images/arrow-right.png) center center no-repeat;}.jimu-rtl .jimu-query-setting-spatialfilter-config .spatial-filter-item .arrow-icon {background: url(images/arrow-left.png) center center no-repeat;}.jimu-query-setting-spatialfilter-config .spatial-filter-item .arrow-icon.opened {background-color: green; background: url(images/arrow-down.png) center center no-repeat !important;}.jimu-query-setting-spatialfilter-config .hidden-setting {display: none;}.jimu-query-setting-spatialfilter-config .draw-graphic-setting .drawing-tools-section {margin-top: 10px;}.jimu-query-setting-spatialfilter-config .drawing-tools-container {margin-top: 5px; overflow: hidden;}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item {float: left; width: 48px; height: 48px; cursor: pointer; background-repeat: no-repeat; background-position: center center; margin-left: 5px; position: relative; border: 1px solid #DBDBDB; border-radius: 1px;}.jimu-rtl .jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item {float: right; margin-left: 0; margin-right: 5px;}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item:first-child {margin-left: 0 !important; margin-right: 0 !important;}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item .draw-item-icon {position: absolute; left: 2px; top: 2px; width: 16px; height: 16px; display: none; background: url(images/checked.png) center center no-repeat; background-color: #fff;}.jimu-rtl .jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item .draw-item-icon {left: auto; right: 2px;}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.selected .draw-item-icon {display: block;}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.point {background-image: url(../../../../jimu.js/css/images/draw_point.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.line {background-image: url(../../../../jimu.js/css/images/draw_line.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.polyline {background-image: url(../../../../jimu.js/css/images/draw_polyline.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.freehand-polyline {background-image: url(../../../../jimu.js/css/images/draw_freehand_polyline.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.triangle {background-image: url(../../../../jimu.js/css/images/draw_triangle.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.extent {background-image: url(../../../../jimu.js/css/images/draw_extent.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.circle {background-image: url(../../../../jimu.js/css/images/draw_circle.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.ellipse {background-image: url(../../../../jimu.js/css/images/draw_ellipse.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.polygon {background-image: url(../../../../jimu.js/css/images/draw_polygon.png);}.jimu-query-setting-spatialfilter-config .drawing-tools-container .draw-item.freehand-polygon {background-image: url(../../../../jimu.js/css/images/draw_freehand_polygon.png);}.jimu-query-setting-spatialfilter-config .cbx-draw-graphic-div .jimu-checkbox .label,.jimu-query-setting-spatialfilter-config .cbx-use-features-div .jimu-checkbox .label {flex-grow: 1;}.jimu-query-setting-spatialfilter-config .relationships-selector-div {position: relative; overflow: hidden; margin-top: 5px;}.jimu-query-setting-spatialfilter-config .relationships-selector-div \x3e .dijitTextBox {position: absolute; width: auto; left: 0; right: 50px;}.jimu-rtl .jimu-query-setting-spatialfilter-config .relationships-selector-div \x3e .dijitTextBox {left: 50px; right: 0;}.jimu-query-setting-searchdistance \x3e table {table-layout: fixed; width: 100%; border-collapse: collapse;}.jimu-query-setting-popup-config .dijitTextBox .dijitInputInner {font-size: 12px !important;}.jimu-query-setting-popup-config .custom-radio-div {margin-top: 5px;}.jimu-query-setting-popup-config.portal-radio-selected .indent-tr {display: none;}.jimu-query-setting-popup-config .indent-td {padding-left: 18px;}.jimu-rtl .jimu-query-setting-popup-config .indent-td {padding-left: 0; padding-right: 18px;}.jimu-query-setting-popup-config .sort-fields-div {width: 100%; height: 30px; line-height: 30px; border: 1px solid #d2dae2; background-color: #e3ecf2; color: #7989a0; font-size: 14px;}.jimu-query-setting-popup-config .sort-fields-div span {float: left; display: inline-block; height: 30px; line-height: 30px;}.jimu-query-setting-popup-config .sort-arrow {width: 13px;}.jimu-query-setting-popup-config .sort-arrow.asc {background: center center no-repeat url(images/up_arrow.png);}.jimu-query-setting-popup-config .sort-arrow.desc {background: center center no-repeat url(images/down_arrow.png);}.jimu-query-setting-sort-fields .add-with-icon {margin-top: 4px;}.jimu-query-setting-sort-fields .sort-tip {display: inline-block;}',
"*now":function(x){x(['dojo/i18n!*preload*widgets/Query/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/on dojo/sniff dojo/query dojo/Deferred dojo/_base/lang dojo/_base/html dojo/_base/array dojo/promise/all dojo/_base/declare dijit/_WidgetsInTemplateMixin esri/lang jimu/BaseWidgetSetting jimu/dijit/_QueryableLayerSourcePopup jimu/utils jimu/filterUtils jimu/LayerInfos/LayerInfos jimu/ServiceDefinitionManager ../utils ./SingleQuerySetting jimu/dijit/CheckBox jimu/dijit/TabContainer dijit/form/TextBox".split(" "),function(x,C,E,B,w,d,n,c,k,q,g,e,v,r,t,b,f,p,z){return k([e,q],{baseClass:"jimu-widget-query-setting",
singleSetting:null,noQueryNls:"",sdm:null,postMixInProperties:function(){this.inherited(arguments);this.layerInfosObj=b.getInstanceSync();this.config&&(this.config=p.getConfigWithValidDataSource(this.config),this._updateConfig(),this._setUrlForConfig(this.config));this.noQueryNls=this.nls.noTasksTip;this.noQueryNls=g.substitute({newQuery:"\x3cspan\x3e"+this.nls.newQuery+"\x3c/span\x3e"},this.noQueryNls)},_updateConfig:function(){this.config&&this.config.queries&&0<this.config.queries.length&&n.forEach(this.config.queries,
w.hitch(this,function(a){this._rebuildFilter(a.url,a.filter)}));this.config&&("undefined"===typeof this.config.showFilterLabel&&(this.config.showFilterLabel=!0),"undefined"===typeof this.config.criteiraLabel&&(this.config.criteiraLabel=this.nls.queryCriteira),"undefined"===typeof this.config.spatialFilterLabel&&(this.config.spatialFilterLabel=this.nls.spatialFilter))},_rebuildFilter:function(a,l){try{if(l){delete l.expr;var A=new t;A.isHosted=r.isHostedService(a);A.getExprByFilterObj(l)}}catch(D){console.log(D)}},
postCreate:function(){this.inherited(arguments);this.sdm=f.getInstance();this.noQueryTip.innerHTML=this.noQueryNls;this.cbxHideLayersAfterWidgetClosed.setLabel(this.nls.hideLayersTip);this.cbxShowFilterLabels.setLabel(this.nls.showFilterLabelTip);this.config&&this.setConfig(this.config);C("mac")?d.addClass(this.domNode,"mac"):d.addClass(this.domNode,"not-mac");(r.has("ie")||r.has("ff")||r.has("edge"))&&d.addClass(this.domNode,"ie-ff")},getDataSources:function(){var a=this.getConfig();if(a&&0!==a.queries.length)return this._setUrlForConfig(a),
a=n.map(a.queries,w.hitch(this,function(l,A){return this._getSingleDataSource(l,A)})),c(a);a=new B;a.resolve([]);return a},_setUrlForConfig:function(a){a.queries&&0<a.queries.length&&n.forEach(a.queries,w.hitch(this,function(l){if(l.webMapLayerId){var A=this.layerInfosObj.getLayerOrTableInfoById(l.webMapLayerId);A&&(l.url=A.getUrl())}}))},_getSingleDataSource:function(a,l){return this.sdm.getServiceDefinition(a.url).then(w.hitch(this,function(A){return{id:l,type:"Features",label:a.name,dataSchema:r.getDataSchemaFromLayerDefinition(A)}}))},
_onBtnAddItemClicked:function(){if(this.singleSetting)if(this.singleSetting.getConfig())this.singleSetting.destroy(),this.singleSetting=null;else return;var a=new v({titleLabel:this.nls.setDataSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});this.own(x(a,"ok",w.hitch(this,function(l){var A=a.getSelectedRadioType();a.close();a=null;this.singleSetting&&(this.singleSetting.destroy(),this.singleSetting=null);var D=this._createTarget();
this._createSingleSetting(D,null);this.singleSetting.setNewLayerDefinition(l,A,l.name||"")})));this.own(x(a,"cancel",w.hitch(this,function(){a.close();a=null})));a.startup()},_createSingleSetting:function(a){E(".item",this.listContent).removeClass("selected");this.singleSetting&&this.singleSetting.destroy();this.singleSetting=null;this.singleSetting=new z({map:this.map,nls:this.nls,target:a,_layerDefinition:a._layerDefinition,_layerObject:a._layerObject,appConfig:this.appConfig,folderUrl:this.folderUrl});
this.singleSetting.placeAt(this.singleSettingContent);this.own(x(this.singleSetting,"loading",w.hitch(this,function(){this.shelter.show()})));this.own(x(this.singleSetting,"unloading",w.hitch(this,function(){this.shelter.hide()})));this.own(x(this.singleSetting,"before-destroy",w.hitch(this,function(){d.addClass(this.separator,"not-visible")})));d.addClass(a,"selected");a.singleConfig&&this.singleSetting.setConfig(a.singleConfig);d.removeClass(this.separator,"not-visible");d.addClass(this.noQueryTip,
"not-visible")},_createTarget:function(a){a=a||"";return d.create("div",{"class":"item",innerHTML:'\x3cdiv class\x3d"label jimu-ellipsis" title\x3d"'+a+'"\x3e'+a+'\x3c/div\x3e\x3cdiv class\x3d"actions jimu-float-trailing"\x3e\x3cdiv class\x3d"delete action jimu-float-trailing"\x3e\x3c/div\x3e\x3cdiv class\x3d"down action jimu-float-trailing"\x3e\x3c/div\x3e\x3cdiv class\x3d"up action jimu-float-trailing"\x3e\x3c/div\x3e\x3c/div\x3e'},this.listContent)},_onListContentClicked:function(a){a=a.target||
a.srcElement;var l=r.getAncestorDom(a,function(A){return d.hasClass(A,"item")},3);l&&(d.hasClass(a,"action")?d.hasClass(a,"up")?l.previousElementSibling&&d.place(l,l.previousElementSibling,"before"):d.hasClass(a,"down")?l.nextElementSibling&&d.place(l,l.nextElementSibling,"after"):d.hasClass(a,"delete")&&(this.singleSetting&&this.singleSetting.target===l&&(this.singleSetting.destroy(),this.singleSetting=null),d.destroy(l),a=E(".item",this.listContent),0<a.length&&this._createSingleSetting(a[0]),this._updateNoQueryTip()):
this.singleSetting?this.singleSetting.target!==l&&this.singleSetting.getConfig()&&(this.singleSetting.destroy(),this.singleSetting=null,this._createSingleSetting(l)):this._createSingleSetting(l))},_updateNoQueryTip:function(){0<E(".item",this.listContent).length?d.addClass(this.noQueryTip,"not-visible"):d.removeClass(this.noQueryTip,"not-visible")},setConfig:function(a){this._setUrlForConfig(a);this.cbxHideLayersAfterWidgetClosed.setValue(a.hideLayersAfterWidgetClosed);a.labelTasks&&this.labelTasksTextBox.set("value",
a.labelTasks);a.labelResults&&this.labelResultsTextBox.set("value",a.labelResults);this.cbxShowFilterLabels.setValue(a.showFilterLabel);a.criteiraLabel&&this.criteiraTextBox.set("value",a.criteiraLabel);a.spatialFilterLabel&&this.spatialTextBox.set("value",a.spatialFilterLabel);var l=null;n.forEach(a.queries,w.hitch(this,function(A,D){var G=this._createTarget(A.name);G.singleConfig=A;0===D&&(l=G)}));l&&this._createSingleSetting(l);this._updateNoQueryTip()},getConfig:function(){if(this.singleSetting&&
!this.singleSetting.getConfig())return!1;var a=E(".item",this.listContent),l={hideLayersAfterWidgetClosed:this.cbxHideLayersAfterWidgetClosed.getValue(),labelTasks:r.sanitizeHTML(this.labelTasksTextBox.get("value")),labelResults:r.sanitizeHTML(this.labelResultsTextBox.get("value")),showFilterLabel:this.cbxShowFilterLabels.getValue(),criteiraLabel:r.sanitizeHTML(this.criteiraTextBox.get("value")),spatialFilterLabel:r.sanitizeHTML(this.spatialTextBox.get("value")),queries:[]};l.queries=n.map(a,w.hitch(this,
function(A){A.singleConfig&&A.singleConfig.webMapLayerId&&(A.singleConfig.url="");return A.singleConfig}));return l},destroy:function(){this.singleSetting&&this.singleSetting.destroy();this.singleSetting=null;this.inherited(arguments)},_onShowFilterLabelCbxChanged:function(a){a?this._showFilterLabelOption():this._hideFilterLabelOption()},_showFilterLabelOption:function(){d.removeClass(this.filterLabelOptionContainer,"hide")},_hideFilterLabelOption:function(){d.addClass(this.filterLabelOptionContainer,
"hide")}})});