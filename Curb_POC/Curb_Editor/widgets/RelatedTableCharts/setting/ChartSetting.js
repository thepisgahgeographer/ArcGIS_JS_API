// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/RelatedTableCharts/setting/ChartSetting.html":'\x3cdiv class\x3d"esriCTFullHeight"\x3e\r\n    \x3c!-- Settings tab --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"settingsTabNode" class\x3d"esriCTFullHeight"\x3e\r\n        \x3cdiv class\x3d"esriCTChartSettingsNode"\x3e\r\n            \x3cdiv class\x3d"esriCTmainContainer"\x3e\r\n                \x3c!-- Section Title --\x3e\r\n                \x3cdiv\x3e\r\n                    \x3cdiv class\x3d"esriCTChartTitleDiv esriCTChartTitleDivContainer"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.ChartSetting.sectionTitle}"\x3e\r\n                            ${nls.ChartSetting.sectionTitle}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                            \x3cdiv class\x3d"esriCTControlWidth" data-dojo-attach-point\x3d"sectionTitleTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                                required\x3d"true" trim\x3d"true" data-dojo-attach-event\x3d"change:_onSectionTitleChanged"\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.ChartSetting.sectionTitleHintText}"\x3e\r\n                                ${nls.ChartSetting.sectionTitleHintText}\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Chart Title --\x3e\r\n                \x3cdiv\x3e\r\n                    \x3cdiv class\x3d"esriCTChartTitleDiv esriCTChartTitleDivContainer"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.ChartSetting.chartTitle}"\x3e\r\n                            ${nls.ChartSetting.chartTitle}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                            \x3cdiv class\x3d"esriCTControlWidth" data-dojo-attach-point\x3d"chartTitleTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.ChartSetting.chartTitleHintText}"\x3e\r\n                                ${nls.ChartSetting.chartTitleHintText}\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldSelectorDiv" data-dojo-attach-point\x3d"titleFieldSelectorDiv"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Chart Description --\x3e\r\n                \x3cdiv\x3e\r\n                    \x3cdiv class\x3d"esriCTChartDescriptionDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartSettingLabel esriCTChartDescriptionLabel" title\x3d"${nls.ChartSetting.chartDescription}"\x3e\r\n                            ${nls.ChartSetting.chartDescription}\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTChartDescriptionDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldInput editorDescriptionContainer"\x3e\r\n                            \x3ctextarea class\x3d"esriCTChartDescription" data-dojo-attach-point\x3d"chartDescriptionInput" rows\x3d"5"\x3e\x3c/textarea\x3e\r\n                            \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.ChartSetting.chartDescriptionHintText}"\x3e\r\n                                ${nls.ChartSetting.chartDescriptionHintText}\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldSelectorDiv" data-dojo-attach-point\x3d"descriptionFieldSelectorDiv"\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Select chart type--\x3e\r\n                \x3cdiv class\x3d"esriCTChartChartTypeDiv esriCTFieldRow"\x3e\r\n                    \x3cdiv class\x3d"esriCTChartSettingLabel" data-dojo-attach-point\x3d"chartTypeLabelNode" title\x3d"${nls.ChartSetting.chartType}"\x3e\r\n                        ${nls.ChartSetting.chartType}\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldInput" style\x3d"width: 80%;"\x3e\r\n                        \x3cdiv class\x3d"esriCTMarginRight"\x3e\r\n                            \x3cinput class\x3d"esriCTCursorPointer jimu-radio-btn" checked\x3d"checked" value\x3d"rdoBarChart" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                name\x3d"chart" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-point\x3d"rdoBarChart" /\x3e\r\n                            \x3clabel class\x3d"esriCTChartTypeEllipsis esriCTCursorPointer" for\x3d"rdoBarChart" data-dojo-attach-point\x3d"barLabel" title\x3d"${nls.ChartSetting.barChart}"\x3e\r\n                                ${nls.ChartSetting.barChart}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTMarginRight"\x3e\r\n                            \x3cinput class\x3d"esriCTCursorPointer jimu-radio-btn" value\x3d"rdoPieChart" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"chart"\r\n                                data-dojo-attach-point\x3d"rdoPieChart" data-dojo-attach-event\x3d"change:_onChartTypeChanged" /\x3e\r\n                            \x3clabel class\x3d"esriCTChartTypeEllipsis esriCTCursorPointer" for\x3d"rdoPieChart" data-dojo-attach-point\x3d"pieLabel" title\x3d"${nls.ChartSetting.pieChart}"\x3e\r\n                                ${nls.ChartSetting.pieChart}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTMarginRight"\x3e\r\n                            \x3cinput class\x3d"esriCTCursorPointer jimu-radio-btn" value\x3d"rdoPolarChart" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"chart"\r\n                                data-dojo-attach-point\x3d"rdoPolarChart" data-dojo-attach-event\x3d"change:_onChartTypeChanged" /\x3e\r\n                            \x3clabel class\x3d"esriCTChartTypeEllipsis esriCTCursorPointer" for\x3d"rdoPolarChart" data-dojo-attach-point\x3d"polarLabel" title\x3d"${nls.ChartSetting.polarChart}"\x3e\r\n                                ${nls.ChartSetting.polarChart}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                        \x3c!-- Line chart --\x3e\r\n                        \x3cdiv class\x3d"esriCTMarginRight"\x3e\r\n                            \x3cinput class\x3d"esriCTCursorPointer jimu-radio-btn" value\x3d"rdoLineChart" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"chart"\r\n                                data-dojo-attach-point\x3d"rdoLineChart" data-dojo-attach-event\x3d"change:_onChartTypeChanged" /\x3e\r\n                            \x3clabel class\x3d"esriCTChartTypeEllipsis esriCTCursorPointer" for\x3d"rdoLineChart" data-dojo-attach-point\x3d"polarLabel" title\x3d"${nls.ChartSetting.lineChart}"\x3e\r\n                                ${nls.ChartSetting.lineChart}\x3c/label\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"labelSection"\x3e\r\n                    \x3c!-- Data Series Field - Bar, Pie \x26 Polar chart --\x3e\r\n                    \x3cdiv class\x3d"esriCTControlWidth esriCTLeftAlign esriCTFieldRow"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartDescriptionDiv"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.ChartSetting.dataSeriesField}" data-dojo-attach-point\x3d"dataSeriesFieldLabel"\x3e\r\n                                ${nls.ChartSetting.dataSeriesField}\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                                \x3cdiv data-dojo-attach-point\x3d"dataSeriesFieldDropdownParentContainer"\x3e\r\n                                    \x3cselect style\x3d"width: 232px;" data-dojo-attach-point\x3d"dataSeriesFieldDropdown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                                    \x3c/select\x3e\r\n                                \x3c/div\x3e\r\n                                \x3c!-- For line chart --\x3e\r\n                                \x3cdiv class\x3d"esriCTHidden" data-dojo-attach-point\x3d"dataSeriesFieldPickerLineChart"\x3e\r\n                                    \x3cdiv class\x3d"esriCTlineChartValueFieldsContainer" data-dojo-attach-point\x3d"lineChartValueFieldsContainer"\x3e\r\n                                        \x3cdiv class\x3d"esriCTlineChartValueFields" data-dojo-attach-point\x3d"lineChartValueFieldsTextbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                                            data-dojo-props\x3d"required:true,trim:true,disabled:true"\x3e\x3c/div\x3e\r\n                                    \x3c/div\x3e\r\n                                    \x3cdiv class\x3d"esriCTlineChartValueFieldsSelector jimu-float-trailing" data-dojo-attach-point\x3d"lineChartFieldsSelectorNode"\x3e\x3c/div\x3e\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- Label Field - Bar, Pie \x26 Polar chart --\x3e\r\n                    \x3cdiv class\x3d"esriCTControlWidth esriCTLeftAlign esriCTFieldRow esriCTChartChartTypeDiv"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartDescriptionDiv"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.ChartSetting.labelField}" data-dojo-attach-point\x3d"labelSeriesField"\x3e\r\n                                ${nls.ChartSetting.labelField}\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                                \x3c!-- Bar, Pie \x26 Polar chart label dropdown  --\x3e\r\n                                \x3cdiv class\x3d"esriCTLabelSeriesFieldDropdown" data-dojo-attach-point\x3d"labelSeriesFieldDropdownContainer"\x3e\r\n                                    \x3cselect style\x3d"width: 232px;" data-dojo-attach-point\x3d"labelSeriesFieldDropdown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                                    \x3c/select\x3e\r\n                                \x3c/div\x3e\r\n                                \x3c!-- Line chart value dropdown --\x3e\r\n                                \x3cdiv class\x3d"esriCTLineLabelSeriesFieldDropdown esriCTHidden" data-dojo-attach-point\x3d"lineValueSeriesFieldDropdownContainer"\x3e\r\n                                    \x3cselect style\x3d"width: 232px;" data-dojo-attach-point\x3d"lineSequenceSeriesFieldDropdown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                                    \x3c/select\x3e\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n\r\n                \x3c/div\x3e\r\n                \x3c!-- Chart Color --\x3e\r\n                \x3cdiv\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d" ${nls.ChartSetting.chartColor}"\x3e\r\n                            ${nls.ChartSetting.chartColor}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartColorMargin esriCTSingleColorContainer"\x3e\r\n                                \x3cdiv class\x3d"jimu-trailing-margin2 esriCTLeftAlign esriCTChartColorWidth"\x3e\r\n                                    \x3cinput class\x3d"esriCTCursorPointer jimu-radio-btn" checked\x3d"checked" value\x3d"rdoSingleColor" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton"\r\n                                        name\x3d"ChartColor" data-dojo-attach-point\x3d"rdoSingleColor" /\x3e\r\n                                    \x3clabel class\x3d"esriCTChartColorEllipsis esriCTCursorPointer" for\x3d"rdoSingleColor" title\x3d"${nls.ChartSetting.singleColor}"\x3e\r\n                                        ${nls.ChartSetting.singleColor}\x3c/label\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriCTColorPicker" data-dojo-attach-point\x3d"colorPicker" data-dojo-type\x3d"jimu/dijit/ColorPicker"\x3e\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTChartColorMargin esriCTChartColorHeight"\x3e\r\n                                \x3cdiv class\x3d"jimu-trailing-margin2 esriCTLeftAlign esriCTChartColorWidth esriCTColorByThemeContainer"\x3e\r\n                                    \x3cinput class\x3d"esriCTCursorPointer jimu-radio-btn" value\x3d"rdoColorByTheme" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"ChartColor"\r\n                                        data-dojo-attach-point\x3d"rdoColorByTheme" data-dojo-attach-event\x3d"change:_onChartColorChanged"\r\n                                    /\x3e\r\n                                    \x3clabel class\x3d"esriCTChartColorEllipsis esriCTCursorPointer" for\x3d"rdoColorByTheme" title\x3d"${nls.ChartSetting.colorByTheme}"\x3e\r\n                                        ${nls.ChartSetting.colorByTheme}\x3c/label\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriCTThemeSelectorDiv" data-dojo-attach-point\x3d"themeSelectorDiv"\x3e\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTChartColorMargin esriCTHidden" data-dojo-attach-point\x3d"colorByFieldContainer"\x3e\r\n                                \x3cdiv class\x3d"jimu-trailing-margin2 esriCTLeftAlign esriCTChartColorWidth"\x3e\r\n                                    \x3cinput class\x3d"esriCTCursorPointer jimu-radio-btn" value\x3d"rdoColorByFieldValue" type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" name\x3d"ChartColor"\r\n                                        data-dojo-attach-point\x3d"rdoColorByFieldValue" data-dojo-attach-event\x3d"change:_onChartColorChanged"\r\n                                    /\x3e\r\n                                    \x3clabel class\x3d"esriCTChartColorEllipsis esriCTCursorPointer" for\x3d"rdoColorByFieldValue" title\x3d"${nls.ChartSetting.colorByFieldValue}"\x3e\r\n                                        ${nls.ChartSetting.colorByFieldValue}\x3c/label\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cselect style\x3d"width: 232px;" data-dojo-attach-point\x3d"colorByFieldValueDropdown" data-dojo-type\x3d"dijit/form/Select"\x3e\r\n                                \x3c/select\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTColorByFieldContainer esriCTHidden" data-dojo-attach-point\x3d"colorByFieldTableContainer"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartTypeDiv"\x3e\r\n                            \x3cdiv data-dojo-attach-point\x3d"colorByFieldTablePanel"\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"axisSection"\x3e\r\n                    \x3c!-- X-axis label --\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"xAxisArea"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartTitleDiv"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.ChartSetting.xAxisTitle}"\x3e\r\n                                ${nls.ChartSetting.xAxisTitle}\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                                \x3cdiv class\x3d"esriCTControlWidth" data-dojo-attach-point\x3d"xAxisTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.ChartSetting.xAxisHintText}"\x3e\r\n                                    ${nls.ChartSetting.xAxisHintText}\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldSelectorDiv" data-dojo-attach-point\x3d"xAxisFieldSelectorDiv"\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3c!-- Y-axis label --\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"yAxisArea"\x3e\r\n                        \x3cdiv class\x3d"esriCTChartTitleDiv"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.ChartSetting.yAxisTitle}"\x3e\r\n                                ${nls.ChartSetting.yAxisTitle}\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                                \x3cdiv class\x3d"esriCTControlWidth" data-dojo-attach-point\x3d"yAxisTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.ChartSetting.yAxisHintText}"\x3e\r\n                                    ${nls.ChartSetting.yAxisHintText}\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldSelectorDiv" data-dojo-attach-point\x3d"yAxisFieldSelectorDiv"\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"polarChartSection" class\x3d"esriCTHidden esriCTPolarChartSection"\x3e\r\n                    \x3cdiv\x3e\r\n                        \x3cdiv class\x3d"esriCTChartTitleDiv"\x3e\r\n                            \x3cdiv class\x3d"esriCTChartSettingLabel" title\x3d"${nls.ChartSetting.polarChartPolygonFillLabel}"\x3e\r\n                                ${nls.ChartSetting.polarChartPolygonFillLabel}\r\n                            \x3c/div\x3e\r\n                            \x3cdiv class\x3d"esriCTFieldInput"\x3e\r\n                                \x3cdiv class\x3d"esriCTCheckBox" checked\x3d"true" data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"polarChartFillColor"\x3e\r\n                                \x3c/div\x3e\r\n                                \x3cdiv class\x3d"esriCTHint esriCTHintInline" title\x3d"${nls.ChartSetting.polarChartPolygonFillHintText}"\x3e\r\n                                    ${nls.ChartSetting.polarChartPolygonFillHintText}\r\n                                \x3c/div\x3e\r\n                            \x3c/div\x3e\r\n                        \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv data-dojo-attach-point\x3d"polarChartFieldInfos"\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.ChartSetting.polarChartSelectFieldsHintText}"\x3e\r\n                        ${nls.ChartSetting.polarChartSelectFieldsHintText}\r\n                    \x3c/div\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTViewLayoutButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-event\x3d"onclick:_updatePreview"\r\n        data-dojo-attach-point\x3d"viewLayoutButton"\x3e\r\n        ${nls.ChartSetting.viewLayoutLabel}\r\n    \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/dom-attr dojo/dom-construct dojo/_base/declare dojo/_base/lang dojo/on dojo/Evented dojo/text!./ChartSetting.html jimu/dijit/TabContainer3 ./ChartThemeSelector ./FieldSelector jimu/dijit/ColorPicker dojo/dom-class dojo/query dojo/_base/Color dojo/_base/array esri/tasks/query esri/tasks/QueryTask dojo/dom-style jimu/dijit/Message ../ChartLayout dijit/popup dojox/charting/themes/GreySkies jimu/dijit/SimpleTable jimu/utils jimu/dijit/Popup dojo/_base/html jimu/dijit/CheckBox dojo/query dijit/form/DateTextBox dijit/form/TimeTextBox dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/ViewSource dijit/_editor/plugins/FontChoice dojox/editor/plugins/Preview dijit/_editor/plugins/TextColor dojox/editor/plugins/ToolbarLineBreak dojox/editor/plugins/FindReplace dojox/editor/plugins/PasteFromWord dojox/editor/plugins/InsertAnchor dojox/editor/plugins/Blockquote dojox/editor/plugins/UploadImage jimu/dijit/CheckBox jimu/dijit/EditorTextColor jimu/dijit/EditorBackgroundColor".split(" "),
function(D,E,F,k,r,G,h,l,H,I,J,K,L,M,g,v,t,m,N,O,u,P,Q,w,R,z,S,A,p,T,x){return G([D,E,F,H],{baseClass:"jimu-widget-RelatedTableCharts-setting",templateString:I,_widgets:[],_stringFieldType:"esriFieldTypeString",_oidFieldType:"esriFieldTypeOID",_numberFieldTypes:["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],_lineChartValueFieldsType:["esriFieldTypeDate","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],
_chartColorType:{singleColor:"SingleColor",byThemeColor:"ColorByTheme",byFieldValue:"ColorByFieldValue"},_editor:null,_displayFieldsTable:null,selectedNode:null,fieldColorPicker:null,defaultColor:"#000000",tr:null,layerDetails:null,config:{},constructor:function(){this._widgets=[]},startup:function(){this.inherited(arguments)},postCreate:function(){this._createColorByFieldTable();this._initSelf();this._initChartDescInput()},destroy:function(){this.tr=null;delete this.tr;m.forEach(this._widgets,function(a){a.destroy()});
this._widgets=[];this.inherited(arguments)},getConfig:function(a){var b={sectionTitle:"",chartTitle:"",description:"",chartType:"",dataSeriesField:"",labelField:"",chartColor:{},labelXAxis:"",labelYAxis:""};if(a&&""===this.sectionTitleTextBox.get("value"))return this._errorMessage(this.nls.ChartSetting.errMsgSectionTitle,this.nls.chartSettingLabel),!1;b.sectionTitle=this.sectionTitleTextBox.get("value");b.chartTitle=this.chartTitleTextBox.get("value");b.description=this.chartDescriptionInput.value;
b.chartType=this._getChartType();if(a&&this.rdoColorByFieldValue.checked&&"esriCTEmptyOption"===this.colorByFieldValueDropdown.value)return this._errorMessage(this.nls.ChartSetting.errMsgFieldByValue,this.nls.chartSettingLabel),!1;b.chartColor=h.clone(this._getChartColorConfig());if("PolarChart"!==b.chartType){if("LineChart"===b.chartType){if(""===this.lineChartValueFieldsTextbox.get("value"))return g.contains(this.lineChartValueFieldsContainer,"esriCTValueFieldErrorMessage")||g.add(this.lineChartValueFieldsContainer,
"esriCTValueFieldErrorMessage"),this._errorMessage(this.nls.ChartSetting.errMsgDataSeriesField,this.nls.chartSettingLabel),!1;g.contains(this.lineChartValueFieldsContainer,"esriCTErrorMessage")&&g.remove(this.lineChartValueFieldsContainer,"esriCTErrorMessage");b.dataSeriesField=this._getValueFieldsByValue(this.lineChartValueFieldsTextbox.get("value"));b.labelField=this.lineSequenceSeriesFieldDropdown.get("value")}else b.dataSeriesField=this.dataSeriesFieldDropdown.get("value"),b.labelField=this.labelSeriesFieldDropdown.get("value");
b.labelXAxis=this.xAxisTextBox.get("value");b.labelYAxis=this.yAxisTextBox.get("value")}else{var d={},c,e=0;var f=this._displayFieldsTable.getData();b.polarChartConfig={};for(c=0;c<f.length;c++)a={},f[c].isVisible&&(a.fieldName=f[c].fieldName,a.alias=f[c].alias,a.isVisible=f[c].isVisible,d[f[c].fieldName]=a,e++);if(3>e)return this._errorMessage(this.nls.ChartSetting.errMsgPolarFieldsRequired,this.nls.chartSettingLabel),!1;b.showPolygonFill=this.polarChartFillColor.getValue();b.polarChartConfig=d}return b},
setConfig:function(a){if(a){a.sectionTitle&&""!==a.sectionTitle?this.sectionTitleTextBox.set("value",a.sectionTitle):this.sectionTitleTextBox.set("value",this.layerDetails.polygonLayerInfo.title);a.chartTitle&&this.chartTitleTextBox.set("value",a.chartTitle);if(a.description){var b=a.description.replace(/&quot;/g,"");this.chartDescriptionInput.value=S.stripHTML(b)}a.chartType?this._setChartType(a.chartType):this._setChartType("BarChart");a.dataSeriesField&&("LineChart"===a.chartType?(b=this._setCofigDataSeriesValueForline(a.dataSeriesField),
this.lineChartValueFieldsTextbox.set("value",b),this._setColorByFieldValueOptions()):this.dataSeriesFieldDropdown.set("value",a.dataSeriesField));a.labelField&&("LineChart"===a.chartType?this.lineSequenceSeriesFieldDropdown.set("value",a.labelField):this.labelSeriesFieldDropdown.set("value",a.labelField));this.polarChartFillColor.setValue(a.showPolygonFill);a.labelXAxis&&this.xAxisTextBox.set("value",a.labelXAxis);a.labelYAxis&&this.yAxisTextBox.set("value",a.labelYAxis);setTimeout(h.hitch(this,function(){a.chartColor&&
this._setChartColorType(a.chartColor,a.chartType)}),100)}else this.sectionTitleTextBox.set("value",this.layerDetails.polygonLayerInfo.title)},_createColorByFieldTable:function(){this.colorByFieldTable=new z({fields:[{name:this.nls.ChartSetting.fieldColorColor,title:this.nls.ChartSetting.fieldColorColor,"class":"label",type:"empty",width:"60px"},{name:this.nls.ChartSetting.fieldColorLabel,title:this.nls.ChartSetting.fieldColorLabel,"class":"label",type:"empty"}]},this.colorByFieldTablePanel);this.colorByFieldTable.startup();
this.own(l(this.colorByFieldTable.domNode.childNodes[1],"scroll",h.hitch(this,function(){w.close(this.fieldColorPicker.tooltipDialog)})))},_errorMessage:function(a,b){(new P({message:a})).message=a;this.tab&&b&&this.tab.getSelectedTitle()!==b&&this.tab.selectTab(b)},_getChartType:function(){var a;this.rdoBarChart.get("checked")?a="BarChart":this.rdoPieChart.get("checked")?a="PieChart":this.rdoPolarChart.get("checked")?a="PolarChart":this.rdoLineChart.get("checked")&&(a="LineChart");return a},_setChartType:function(a){"BarChart"===
a?this.rdoBarChart.set("checked",!0):"PieChart"===a?this.rdoPieChart.set("checked",!0):"PolarChart"===a?this.rdoPolarChart.set("checked",!0):this.rdoLineChart.set("checked",!0)},_initSelf:function(){this.colorPicker.setColor(new t(this.defaultColor));this._initFieldSelectors();this._createRelatedLayerFieldOptions(this.dataSeriesFieldDropdown,!1,this._numberFieldTypes);this._createRelatedLayerFieldOptions(this.labelSeriesFieldDropdown,!0,null);this._createRelatedLayerFieldOptions(this.lineSequenceSeriesFieldDropdown,
!1,this._lineChartValueFieldsType);this._createFieldColorPicker();this.chartThemeSelector||(this.chartThemeSelector=this._createThemeSelector(this.themeSelectorDiv));l(this.colorPicker,"click",h.hitch(this,function(){this.rdoSingleColor.set("checked",!0)}));l(this.themeSelectorDiv,"click",h.hitch(this,function(){this.rdoColorByTheme.set("checked",!0)}));l(this.colorByFieldValueDropdown,"click",h.hitch(this,function(){this.rdoColorByFieldValue.set("checked",!0)}));this.own(l(this.lineChartFieldsSelectorNode,
"click",h.hitch(this,this._onFieldsSelectorClick)));this.layerDetails.polygonLayerInfo.supportsDistinct&&(g.remove(this.colorByFieldContainer,"esriCTHidden"),this._createColorByFieldSelector());this._createPolarChartFieldsGrid()},_createPolarChartFieldsGrid:function(){this._displayFieldsTable=new z({fields:[{name:"isVisible",title:this.nls.ChartSetting.visibilityText,type:"checkbox","class":"update",width:"100px"},{name:"fieldName",title:this.nls.ChartSetting.fieldNameText,type:"text",width:"230px"},
{name:"alias",title:this.nls.ChartSetting.aliasNameText,type:"text",editable:"true",width:"230px"}],selectable:!1});this._displayFieldsTable.placeAt(this.polarChartFieldInfos);this._displayFieldsTable.startup();this._createFieldsRows()},_createFieldsRows:function(){var a,b="",d="";var c=this.layerDetails.relatedLayerInfo.fields;var e=this.config&&this.config.polarChartConfig;for(a=0;a<c.length;a++)-1!==this._numberFieldTypes.indexOf(c[a].type)&&(e&&e.hasOwnProperty(c[a].name)?(b=e[c[a].name].isVisible,
d=e[c[a].name].alias):(b=c[a].isVisible,d=c[a].alias),this._displayFieldsTable.addRow({isVisible:""===b?!1:b,fieldName:c[a].name,alias:""===d?c[a].name:d}))},_createFieldColorPicker:function(){this.fieldColorPicker=new M;this.fieldColorPicker.startup();l(this.fieldColorPicker.tooltipDialog,"close",h.hitch(this,function(){var a=v(".jimu-state-active",this.colorByFieldTableContainer);0<a.length&&a.removeClass("jimu-state-active")}));l(this.fieldColorPicker,"change",h.hitch(this,function(){var a=this.fieldColorPicker.color.toHex();
var b=v(".jimu-state-active .fieldColorPicker",this.colorByFieldTableContainer);0<b.length?g.contains(this.selectedNode.parentElement.parentElement,"jimu-state-active")?m.forEach(b,h.hitch(this,function(d){u.set(d,"backgroundColor",a);k.set(d.parentElement.parentElement,"field_Color",a)})):(u.set(this.selectedNode,"backgroundColor",a),k.set(this.selectedNode.parentElement.parentElement,"field_Color",a)):(u.set(this.selectedNode,"backgroundColor",a),k.set(this.selectedNode.parentElement.parentElement,
"field_Color",a))}))},_onChartColorChanged:function(){this.rdoColorByFieldValue.get("checked")?("esriCTEmptyOption"!==this.colorByFieldValueDropdown.value&&g.remove(this.colorByFieldTableContainer,"esriCTHidden"),this.polarChartFillColor.setStatus(!0)):(this.rdoColorByTheme.get("checked")?(this.polarChartFillColor.check(),this.polarChartFillColor.setStatus(!1)):this.polarChartFillColor.setStatus(!0),g.add(this.colorByFieldTableContainer,"esriCTHidden"))},_setChartColorType:function(a){a&&a.colorType&&
(this.rdoSingleColor.set("checked",!1),a.colorType===this._chartColorType.singleColor?(this.rdoSingleColor.set("checked",!0),this.colorPicker.setColor(new t(a.colorInfo))):a.colorType===this._chartColorType.byThemeColor?(this.rdoColorByTheme.set("checked",!0),this.config.chartColor&&this.config.chartColor.colorType===this._chartColorType.byThemeColor&&this.chartThemeSelector&&setTimeout(h.hitch(this,function(){this.chartThemeSelector.selectTheme(a.colorInfo)}),500)):a.colorType===this._chartColorType.byFieldValue&&
(this.rdoColorByFieldValue.set("checked",!0),this.colorByFieldValueDropdown.set("value",a.colorInfo.layerField),g.remove(this.colorByFieldTableContainer,"esriCTHidden")))},_initTabs:function(){var a={title:this.nls.ChartSetting.settingTabTitle,content:this.settingsTabNode};var b={title:this.nls.ChartSetting.layoutTabTitle,content:this.layoutTabNode};this.tab=new J({tabs:[a,b]});this.tab.placeAt(this.tabDiv);this.own(l(this.tab,"tabChanged",h.hitch(this,function(d){d===b.title&&this._updatePreview()})))},
_updatePreview:function(){var a={chartConfig:this.getConfig(),isPreview:!0};a.chartConfig&&("esriCTEmptyOption"===a.chartConfig.labelField&&(a.chartConfig.labelField=" "),a.chartData=this._createStaticDataForLayout(a.chartConfig.chartType,a.chartConfig.labelField,a.chartConfig.dataSeriesField),a=new Q({config:a,nls:this.nls}),a.startup(),new A({titleLabel:this.nls.ChartSetting.viewLayoutLabel,width:800,height:450,content:a}))},_createStaticDataForLayout:function(a,b,d){var c={chartSeries:[],chartLabels:[],
selectedTheme:R};switch(a){case "BarChart":c.chartSeries=[{y:65},{y:35},{y:40},{y:55},{y:50}];c.chartLabels=[{value:1,y:65,text:""},{value:2,y:35,text:""},{value:3,y:40,text:""},{value:4,y:55,text:""},{value:5,y:50,text:""}];c.fill="#7989a0";break;case "PieChart":c.chartSeries=[{y:65,text:"{"+d+" %}"},{y:35,text:"{"+b+"}"}];c.chartLabels=[{value:1,y:65},{value:2,y:35}];break;case "PolarChart":var e=this._displayFieldsTable.getData();c.chartSeries=[];for(b=0;5>b;b++){d={};var f={};for(a=0;a<e.length;a++)e[a].isVisible&&
(d[e[a].alias]=20);f[b]={data:d};c.chartSeries.push(f)}break;case "LineChart":if(""!==this.lineChartValueFieldsTextbox.value&&void 0!==this.lineChartValueFieldsTextbox.value&&null!==this.lineChartValueFieldsTextbox.value){var n=11;var q=10;this.lineChartValueFieldsTextbox.value.split(",").forEach(function(U,B){var y;0!==B&&(n+=10);q+=10;c.chartSeries.push([]);for(y=0;10>y;y++){var C=Math.floor(Math.random()*(q-n+1))+n;c.chartSeries[B].push({y:C,tooltip:C+"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;",seriesName:U})}})}else c.chartSeries.push([{y:45,
tooltip:"45\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:43,tooltip:"43\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:15,tooltip:"15\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:26,tooltip:"26\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:38,tooltip:"38\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:10,tooltip:"10\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:47,tooltip:"47\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:19,tooltip:"19\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:47,tooltip:"47\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:23,tooltip:"23\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"}]),
c.chartSeries.push([{y:93,tooltip:"93\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:98,tooltip:"98\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:41,tooltip:"41\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:81,tooltip:"81\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:94,tooltip:"94\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:98,tooltip:"98\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:99,tooltip:"99\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:44,tooltip:"44\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},{y:58,tooltip:"58\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"},
{y:73,tooltip:"73\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp"}]);c.chartLabels.push([{value:1,text:"1"},{value:2,text:"2"},{value:3,text:"3"},{value:4,text:"4"},{value:5,text:"5"},{value:6,text:"6"},{value:7,text:"7"},{value:8,text:"8"},{value:9,text:"9"},{value:10,text:"10"}])}return c},_initFieldSelectors:function(){this._createFieldSelector(this.titleFieldSelectorDiv,this.chartTitleTextBox,this.layerDetails.polygonLayerInfo.fields);this._createFieldSelector(this.descriptionFieldSelectorDiv,this.chartDescriptionInput,
this.layerDetails.polygonLayerInfo.fields);this._createFieldSelector(this.xAxisFieldSelectorDiv,this.xAxisTextBox,this.layerDetails.polygonLayerInfo.fields);this._createFieldSelector(this.yAxisFieldSelectorDiv,this.yAxisTextBox,this.layerDetails.polygonLayerInfo.fields)},_createFieldSelector:function(a,b,d){a=new L({fields:d,showOnlyNumericFields:!1,hideOnSelect:!0},r.create("div",{},a));a.onSelect=h.hitch(this,function(c){c=k.get(b,"value")+"{"+c.name+"}";b.set?b.set("value",c):k.set(b,"value",c)});
this._widgets.push(a);return a},_createThemeSelector:function(a){a=new K({nls:this.nls.ChartSetting},r.create("div",{},a));this._widgets.push(a);a.startup();return a},_onSectionTitleChanged:function(){this.emit("sectionTitleChanged",this.sectionTitleTextBox.get("value"))},showMainLoadingIndicator:function(){this.emit("showLoadingIndicator")},hideMainLoadingIndicator:function(){this.emit("hideLoadingIndicator")},_onChartTypeChanged:function(){this.rdoPolarChart.get("checked")?(g.add(this.labelSection,
"esriCTHidden"),g.add(this.axisSection,"esriCTHidden"),g.remove(this.polarChartSection,"esriCTHidden")):(g.remove(this.labelSection,"esriCTHidden"),g.add(this.polarChartSection,"esriCTHidden"),this.rdoPieChart.get("checked")?g.add(this.axisSection,"esriCTHidden"):g.remove(this.axisSection,"esriCTHidden"));this.rdoLineChart.get("checked")?(k.set(this.dataSeriesFieldLabel,"innerHTML",this.nls.ChartSetting.lineDataSeriesField),k.set(this.labelSeriesField,"innerHTML",this.nls.ChartSetting.lineLabelSeriesField),
k.set(this.dataSeriesFieldLabel,"title",this.nls.ChartSetting.lineDataSeriesField),k.set(this.labelSeriesField,"title",this.nls.ChartSetting.lineLabelSeriesField),g.add(this.dataSeriesFieldDropdownParentContainer,"esriCTHidden"),g.add(this.labelSeriesFieldDropdownContainer,"esriCTHidden"),g.remove(this.dataSeriesFieldPickerLineChart,"esriCTHidden"),g.remove(this.lineValueSeriesFieldDropdownContainer,"esriCTHidden"),this.lineChartValueFieldsTextbox.set("value",this.lineChartValueFieldsTextbox.value),
this._setColorByFieldValueOptions()):(k.set(this.dataSeriesFieldLabel,"innerHTML",this.nls.ChartSetting.dataSeriesField),k.set(this.labelSeriesField,"innerHTML",this.nls.ChartSetting.labelField),k.set(this.dataSeriesFieldLabel,"title",this.nls.ChartSetting.dataSeriesField),k.set(this.labelSeriesField,"title",this.nls.ChartSetting.labelField),g.add(this.dataSeriesFieldPickerLineChart,"esriCTHidden"),g.add(this.lineValueSeriesFieldDropdownContainer,"esriCTHidden"),g.remove(this.dataSeriesFieldDropdownParentContainer,
"esriCTHidden"),g.remove(this.labelSeriesFieldDropdownContainer,"esriCTHidden"),this._createRelatedLayerFieldOptions(this.colorByFieldValueDropdown,!0),g.add(this.colorByFieldTableContainer,"esriCTHidden"))},_createRelatedLayerFieldOptions:function(a,b,d){a.set("options",[]);if(a){var c={},e,f;if((e=this.layerDetails.relatedLayerInfo.fields)&&0<e.length)for(b&&a.addOption({value:"esriCTEmptyOption",label:this.nls.ChartSetting.defaultFieldSelectLabel,selected:!0}),f=0;f<e.length;f++)c=!0,d&&0>d.indexOf(e[f].type)&&
(c=!1),c&&(c={value:e[f].name,label:e[f].name,alias:e[f].alias,selected:!1,fieldType:e[f].type},0!==f||b||(c.selected=!0),a.addOption(c))}},_createColorByFieldSelector:function(){this._createRelatedLayerFieldOptions(this.colorByFieldValueDropdown,!0);l(this.colorByFieldValueDropdown,"change",h.hitch(this,function(a){this.showMainLoadingIndicator();"esriCTEmptyOption"===a?(this._removeTableRows(),g.add(this.colorByFieldTableContainer,"esriCTHidden"),this.hideMainLoadingIndicator()):this._getDistintValueForLayerField(a)}))},
_getDistintValueForLayerField:function(a){this._selectedUniqueValues=[];var b=new O(this.layerDetails.relatedLayerInfo.url);var d=new N;d.where="1\x3d1";d.returnDistinctValues=!0;d.returnGeometry=!1;d.outFields=[a];b.execute(d,h.hitch(this,function(c){m.forEach(c.features,h.hitch(this,function(e){this._selectedUniqueValues.push(e.attributes[a])}));0<this._selectedUniqueValues.length&&c.fields&&0<c.fields.length&&c.fields[0].type?(c=h.clone(c.fields[0]),1<this._selectedUniqueValues.length&&this._sortUniqueValueData(c.type),
this._createTableRows(c)):(this._errorMessage(this.nls.ChartSetting.errMsgFieldValuesNotFound,this.nls.chartSettingLabel),this.hideMainLoadingIndicator())}),h.hitch(this,function(){this._errorMessage(this.nls.ChartSetting.errMsgFieldValuesNotFound,this.nls.chartSettingLabel);this.hideMainLoadingIndicator()}))},_removeTableRows:function(){var a,b;if((a=this.colorByFieldTable.getRows())&&0<a.length)for(b=0;b<a.length;b++)this.colorByFieldTable.deleteRow(a[b])},_createTableRows:function(a){var b,d;this._removeTableRows();
g.remove(this.colorByFieldTableContainer,"esriCTHidden");m.forEach(this._selectedUniqueValues,h.hitch(this,function(c){var e=this.colorByFieldTable.addRow({});var f=c;e.success&&e.tr&&("esriFieldTypeDate"===a.type&&(f=this._getLocaleFormatedDate(c)),b=e.tr,d=v(".simple-table-cell",b),this._createColorPicker(b,c,d[0]),this._createLabelFields(f,d[1]));b&&l(b,"click",h.hitch(this,function(n){this._toggleRowSelection(n.currentTarget)}))}));this.hideMainLoadingIndicator()},_toggleRowSelection:function(a){g.contains(a,
"jimu-state-active")?g.remove(a,"jimu-state-active"):g.add(a,"jimu-state-active")},_createLabelFields:function(a,b){r.create("label",{innerHTML:a,title:a},b)},_createColorPicker:function(a,b,d){d=r.create("div",{"class":"fieldColorPicker"},d);var c=this.config&&this.config.chartColor&&this.config.chartColor.colorInfo&&this.config.chartColor.colorInfo.layerFieldValues&&this.config.chartColor.colorInfo.layerFieldValues[b]?this.config.chartColor.colorInfo.layerFieldValues[b]:this.defaultColor;u.set(d,
"backgroundColor",c);k.set(a,"fieldVal",b);k.set(a,"field_Color",c);l(d,"click",h.hitch(this,function(e){e.stopPropagation();e.preventDefault();this.selectedNode=e.currentTarget;var f=k.get(this.selectedNode.parentElement.parentElement,"field_Color");this.fieldColorPicker.setColor(new t(f));this.fieldColorPicker.picker.setColor((new t(f)).toHex(),!0);w.open({popup:this.fieldColorPicker.tooltipDialog,around:e.currentTarget})}))},_getColorByFieldValue:function(){var a,b={},d={};var c=this.colorByFieldTable.getRows();
for(a=0;a<c.length;a++)d[k.get(c[a],"fieldVal")]=k.get(c[a],"field_Color");b.layerFieldValues=d;b.layerField=this.colorByFieldValueDropdown.value;return b},_getChartColorConfig:function(){var a={};this.rdoSingleColor.checked?(a.colorType=this._chartColorType.singleColor,a.colorInfo=this.colorPicker.getColor().toHex()):this.rdoColorByTheme.checked?(a.colorType=this._chartColorType.byThemeColor,a.colorInfo=this.chartThemeSelector.selectedTheme):this.rdoColorByFieldValue.checked&&(a.colorType=this._chartColorType.byFieldValue,
a.colorInfo=this._getColorByFieldValue());return a},_sortUniqueValueData:function(a){"esriFieldTypeString"===a?this._selectedUniqueValues.sort():this._selectedUniqueValues.sort(h.hitch(this,function(b,d){return b-d}))},_getLocaleFormatedDate:function(a){return(new Date(a)).toLocaleDateString()},_initChartDescInput:function(){this.own(l(this.chartDescriptionInput,"keydown, change",h.hitch(this,function(){this.chartDescriptionInput.style.height="auto";this.chartDescriptionInput.style.height=this.chartDescriptionInput.scrollHeight+
"px"})))},_onFieldsSelectorClick:function(){var a=[];var b=p.create("div",{style:{maxHeight:"480px"}});var d=this.dataSeriesFieldDropdown.options;a=this.lineChartValueFieldsTextbox.value.split(",");this._fieldsCheckBox=[];m.forEach(d,h.hitch(this,function(c,e){var f=new T({checked:-1!==a.indexOf(c.alias)?!0:!1,label:c.alias||c.name});p.addClass(f.domNode,"esriCTSearchSourceFieldCheckbox");p.addClass(f.labelNode,"jimu-ellipsis");p.setAttr(f.domNode,{title:c.alias||c.name});0===e%3&&(window.isRTL?p.setStyle(f.domNode,
"marginRight",0):p.setStyle(f.domNode,"marginLeft",0));f.placeAt(b);x(f.domNode).data("fieldName",c.alias);this._fieldsCheckBox.push(f)}));this.fieldsPopup=new A({titleLabel:this.nls.ChartSetting.setValueFields,autoHeight:!0,content:b,container:window.jimuConfig.layoutId,width:640,maxHeight:600,buttons:[{label:this.nls.ok,onClick:h.hitch(this,"_onValueFieldsOk")},{label:this.nls.cancel,classNames:["jimu-btn-vacation"]}],onClose:h.hitch(this,function(){this.fieldsPopup=null})});p.addClass(this.fieldsPopup.domNode,
this.baseClass)},_onValueFieldsOk:function(){var a=[];m.forEach(this._fieldsCheckBox,function(b){if(b.getValue()){var d=x(b.domNode).data("fieldName");a.push(d[0]);x(b.domNode).removeData()}});0!==a.length&&g.contains(this.lineChartValueFieldsContainer,"esriCTValueFieldErrorMessage")&&g.remove(this.lineChartValueFieldsContainer,"esriCTValueFieldErrorMessage");this._setLineChartValueFields(a);this.lineChartValueFieldsTextbox.set("value",this._getLineChartValueFieldAlias());this.fieldsPopup.close();
this._setColorByFieldValueOptions()},_setColorByFieldValueOptions:function(){var a=[];var b=[];b.push({value:"esriCTEmptyOption",label:this.nls.ChartSetting.defaultFieldSelectLabel});a=this._getValueFieldsByValue(this.lineChartValueFieldsTextbox.get("value"));var d=!1;""!==a&&(a=a.split(","),m.forEach(a,h.hitch(this,function(c){b.push({label:c,value:c})})),b.some(h.hitch(this,function(c){if(c.value===this.colorByFieldValueDropdown.value)return d=!0})));this.colorByFieldValueDropdown.set("options",
b);d?this.colorByFieldValueDropdown.setValue(this.colorByFieldValueDropdown.getValue()):this.colorByFieldValueDropdown.setValue(b[0].value)},_getLineChartValueFieldAlias:function(){var a;var b=this._getLineChartValueFields();if(!(b&&0<b.length))return"";if(this.layerDetails.relatedLayerInfo&&this.layerDetails.relatedLayerInfo.fields&&0<this.layerDetails.relatedLayerInfo.fields.length){var d=this.layerDetails.relatedLayerInfo.fields;var c=m.map(d,function(q){return q&&q.alias});var e=[];var f=b.length;
for(a=0;a<f;a++){var n=c.indexOf(b[a]);-1<n&&(d[n].alias?e.push(d[n].alias):e.push(d[n].name))}return e.join(",")}return b.join(",")},_setLineChartValueFields:function(a){this.lineChartValueFieldsTextbox.set("_fields",a)},_getLineChartValueFields:function(){return this.lineChartValueFieldsTextbox.get("_fields")},_getValueFieldsByValue:function(a){var b=[],d=[];b=a.split(",");m.forEach(this.layerDetails.relatedLayerInfo.fields,h.hitch(this,function(c){-1!==b.indexOf(c.alias)&&d.push(c.name)}));return d.join(",")},
_setCofigDataSeriesValueForline:function(a){var b=[],d=[];b=a.split(",");m.forEach(this.layerDetails.relatedLayerInfo.fields,h.hitch(this,function(c){-1!==b.indexOf(c.name)&&d.push(c.alias)}));return d.join(",")},closeColorPicker:function(){w.close(this.fieldColorPicker.tooltipDialog)}})});