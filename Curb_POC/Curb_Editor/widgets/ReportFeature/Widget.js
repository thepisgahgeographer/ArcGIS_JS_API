// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/ReportFeature/SelectFeatureDialog":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on dojo/string dojo/dom-construct dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin dojo/query dojo/i18n!esri/nls/jsapi esri/main esri/layers/FeatureLayer esri/toolbars/draw esri/tasks/IdentifyTask esri/tasks/query esri/tasks/IdentifyParameters esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleFillSymbol esri/geometry/Extent esri/tasks/datareviewer/ReviewerResultsTask ./InfoWindowContent dojo/text!./SelectFeatureDialog.html".split(" "),
function(w,p,x,u,e,k,l,B,y,f,a,b,c,d,m,r,h,g,n,q,t,z,A,F){var H=new g({type:"esriSMS",style:"esriSMSCircle",size:12,xoffset:0,yoffset:0,color:[0,0,255,51],outline:{type:"esriSLS",style:"esriSLSSolid",color:[0,0,255,128],width:1}}),J=new n({type:"esriSLS",style:"esriSLSSolid",color:[0,0,255,51],width:2}),K=new q({type:"esriSFS",style:"esriSFSSolid",color:[0,0,255,26],outline:{type:"esriSLS",style:"esriSLSSolid",color:[0,0,255,128],width:1}});return w([B,y],{templateString:F,baseClass:"drs-widget-selectFeature",
buildRendering:function(){this.inherited(arguments);this._initDom()},_initDom:function(){var v=this.getLayerOptions();void 0!==v&&""!==v&&k.place(v,this.selectLayer)},postCreate:function(){this.inherited(arguments);this._initEvents()},_initEvents:function(){var v=this;this.selectionToolbar=new d(this.map);this.selectionToolbar.on("draw-end",x.hitch(this,this.addGraphic));this.own(u(this.selectLayer,"change",function(C){a.toolbars.draw.addPoint=v.nls.selectFeatureMapPoint;(C=C.target.value)?v.startSelectFeature(C):
v.cancelSelectFeature()}));this.own(u(this.map.infoWindow,"hide",function(){var C=f(".actionsPane");void 0!==C&&null!==C&&0<C.length&&(C[0].style.display="");v.emit("InfoWindowHide")}))},startSelectFeature:function(v){var C=p.filter(this.config.layers,function(D){return D.id===v});if(void 0!==C&&0<C.length&&(C=this.map.getLayer(v),void 0===C)){this.emit("Error",{},[this.nls.errorMapService]);return}this.selectionToolbar.activate(d.POINT);l.set(this.clickAFeatureNode,"display","")},addGraphic:function(v){var C=
this.selectLayer.value,D=p.filter(this.config.layers,function(G){return G.id===C});v=v.geometry;if("ArcGISMapServiceLayer"===D[0].layerType)this.identifyTask=new m(D[0].url),this._identifyFeatures(v);else{null!==this.featureLayer&&void 0!==this.featureLayer&&(this.featureLayer=null);this.featureLayer=new c(D[0].url,{outFields:["*"],mode:b.layers.FeatureLayer.MODE_SELECTION});D=new r;var E=10*(this.map.extent.getWidth()/this.map.width);v=new t(v.x-E,v.y-E,v.x+E,v.y+E,this.map.spatialReference);D.geometry=
v;this.featureLayer.selectFeatures(D,c.SELECTION_NEW,x.hitch(this,function(G){1<G.length?this.emit("Message",{},[this.nls.manyFeaturesSelected]):1===G.length?(this.selectionToolbar.deactivate(),this._onTaskComplete(G[0])):this.emit("Message",{},[this.nls.noFeatureSelected])}))}},cancelSelectFeature:function(){null!==this.selectionToolbar&&void 0!==this.selectionToolbar&&""===this.selectLayer.value&&this.selectionToolbar.deactivate();l.set(this.clickAFeatureNode,"display","none")},_identifyFeatures:function(v){var C=
this,D=new h;this.identifying||(this.identifying=!0,l.set(this.loadingFeaturesNode,"display",""),D.returnGeometry=!0,D.width=this.map.width,D.height=this.map.height,D.tolerance=3,D.geometry=v,D.mapExtent=this.map.extent,D.spatialReference=this.map.spatialReference,this.identifyTask.execute(D).then(function(E){0<E.length?(C.selectionToolbar.deactivate(),C._onTaskComplete(E[0].feature)):(l.set(C.loadingFeaturesNode,"display","none"),C.identifying=!1,this.emit("Message",{},[this.nls.noFeatureSelected]))},
function(E){C._onIdentifyError(E)}))},_onTaskComplete:function(v){var C=this;this.identifying=!1;l.set(this.loadingFeaturesNode,"display","none");if(v){var D=this.selectLayer.value,E=p.filter(this.config.layers,function(L){return L.id===D});this._selectedFeature=v;switch(v.geometry.type){case "point":v.setSymbol(H);var G=v.geometry;var I=this.map.centerAt(v.geometry);break;case "polyline":v.setSymbol(J);G=v.geometry.getExtent().getCenter();v.setSymbol(J);I=this.map.centerAt(G);break;case "polygon":v.setSymbol(K),
G=v.geometry.getCentroid(),I=this.map.centerAt(G)}I.then(function(){C._showInfoWindow(E[0].alias,G,v)})}},_showInfoWindow:function(v,C,D){var E=this;this.infoWindowContent=new A({nls:this.nls,title:this.nls.select,includeReportedBy:this.config.includeReportedBy,defaultUserName:this.config.defaultUserName,onReportSubmit:function(G){E.submitReport(G)}},k.create("div"));this.map.infoWindow.setTitle(this.nls.infoWindowTitle);this.infoWindowContent.startup();this.infoWindowContent.set("layerName",v);this.infoWindowContent.set("graphic",
D);u.once(this.map.infoWindow,"hide",function(){E.selectionToolbar.activate(d.POINT);E.map.setInfoWindowOnClick(!1)});this.map.infoWindow.destroyDijits();f(".actionsPane")[0].style.display="none";this.map.infoWindow.setContent(this.infoWindowContent.domNode);this.map.infoWindow.resize(300,600);this.map.infoWindow.show(C);this.emit("SelectFeature")},_onIdentifyError:function(v){this.identifying=!1;l.set(this.loadingFeaturesNode,"display","none");this.emit("Error",{},[this.nls.errorIdentify,v])},submitReport:function(v){var C=
this;v.sessionId=this._sessionId;this.map.infoWindow.hide();this._reviewerResultsTask.writeFeatureAsResult(v,this._selectedFeature).then(function(D,E){C._onWriteFeatureAsResultComplete(D,E)},function(D){C._onWriteFeatureAsResultError(D)})},_onWriteFeatureAsResultComplete:function(v){v&&v.success?(this.emit("Message",{},["",this.nls.reportMessage]),this.selectionToolbar.activate(d.POINT)):this.emit("Error",{}[this.nls.errorReportMessage])},_onWriteFeatureAsResultError:function(v){this.selectionToolbar.activate(d.POINT);
this.emit("Error",{},[v.message,v])},reset:function(){this.selectLayer.selectedIndex=0;this.cancelSelectFeature();void 0!==this.infoWindowContent&&null!==this.infoWindowContent&&this.infoWindowContent.destroyRecursive();this.map.setInfoWindowOnClick(!1)},setDrsUrl:function(v){this._reviewerResultsTask=new z(v)},setReviewerSession:function(v){isNaN(v)?this._sessionId=1:this._sessionId=parseInt(v,10)},getLayerOptions:function(){var v="";p.forEach(this.config.layers,function(C){!0===C.show&&(v+=e.substitute('\x3coption value\x3d"${id}"\x3e${alias}\x3c/option\x3e',
C))});return v}})})},"esri/tasks/IdentifyTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../request ../geometry/normalizeUtils ./Task ./IdentifyResult".split(" "),function(w,p,x,u,e,k,l,B,y){w=w(B,{declaredClass:"esri.tasks.IdentifyTask",_eventMap:{complete:["results"]},constructor:function(f,a){this._url.path+="/identify";this._handler=p.hitch(this,this._handler);this.gdbVersion=a&&a.gdbVersion;this.registerConnectEvents()},__msigns:[{n:"execute",c:3,
a:[{i:0,p:["geometry"]}],e:2}],_handler:function(f,a,b,c,d){try{var m=[];x.forEach(f.results,function(r,h){m[h]=new y(r)});this._successHandler([m],"onComplete",b,d)}catch(r){this._errorHandler(r,c,d)}},execute:function(f,a,b,c){var d=c.assembly;f=this._encode(p.mixin({},this._url.query,{f:"json"},f.toJson(d&&d[0])));var m=this._handler,r=this._errorHandler;this.gdbVersion&&(f.gdbVersion=this.gdbVersion);return k({url:this._url.path,content:f,callbackParamName:"callback",load:function(h,g){m(h,g,
a,b,c.dfd)},error:function(h){r(h,b,c.dfd)}})},onComplete:function(){}});l._createWrappers(w);u("extend-esri")&&p.setObject("tasks.IdentifyTask",w,e);return w})},"esri/tasks/IdentifyResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../graphic ../geometry/jsonUtils".split(" "),function(w,p,x,u,e,k){w=w(null,{declaredClass:"esri.tasks.IdentifyResult",constructor:function(l){p.mixin(this,l);this.feature=new e(l.geometry?k.fromJson(l.geometry):null,null,l.attributes);delete this.geometry;
delete this.attributes}});x("extend-esri")&&p.setObject("tasks.IdentifyResult",w,u);return w})},"esri/tasks/IdentifyParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has ../kernel ../layerUtils ../geometry/jsonUtils ../geometry/scaleUtils".split(" "),function(w,p,x,u,e,k,l,B,y){var f=w(null,{declaredClass:"esri.tasks.IdentifyParameters",constructor:function(){this.layerOption=f.LAYER_OPTION_TOP},geometry:null,spatialReference:null,layerIds:null,
tolerance:null,returnGeometry:!1,returnFieldName:!1,returnUnformattedValues:!1,mapExtent:null,width:400,height:400,dpi:96,layerDefinitions:null,timeExtent:null,layerTimeOptions:null,dynamicLayerInfos:null,toJson:function(a){var b=a&&a.geometry||this.geometry,c=this.mapExtent,d=this.spatialReference,m=this.layerIds;a={tolerance:this.tolerance,returnGeometry:this.returnGeometry,returnFieldName:this.returnFieldName,returnUnformattedValues:this.returnUnformattedValues,imageDisplay:this.width+","+this.height+
","+this.dpi,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision};if(b){var r=b.toJson();delete r.spatialReference;a.geometry=u.toJson(r);a.geometryType=B.getJsonType(b)}d?a.sr=d.wkid||u.toJson(d.toJson()):b&&b.spatialReference?a.sr=b.spatialReference.wkid||u.toJson(b.spatialReference.toJson()):c&&c.spatialReference&&(a.sr=c.spatialReference.wkid||u.toJson(c.spatialReference.toJson()));c&&(a.mapExtent=c.xmin+","+c.ymin+","+c.xmax+","+c.ymax);a.layers=this.layerOption;
m&&(a.layers+=":"+m.join(","));a.layerDefs=l._serializeLayerDefinitions(this.layerDefinitions,!0);b=this.timeExtent;a.time=b?b.toJson().join(","):null;a.layerTimeOptions=l._serializeTimeOptions(this.layerTimeOptions);if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length){c=y.getScale({extent:c,width:this.width,spatialReference:c.spatialReference});var h=l._getLayersForScale(c,this.dynamicLayerInfos),g=[];x.forEach(this.dynamicLayerInfos,function(n){if(!n.subLayerIds){var q=n.id;if((!this.layerIds||
this.layerIds&&-1!==x.indexOf(this.layerIds,q))&&-1!==x.indexOf(h,q)){var t={id:q};t.source=n.source&&n.source.toJson();var z;this.layerDefinitions&&this.layerDefinitions[q]&&(z=this.layerDefinitions[q]);z&&(t.definitionExpression=z);var A;this.layerTimeOptions&&this.layerTimeOptions[q]&&(A=this.layerTimeOptions[q]);A&&(t.layerTimeOptions=A.toJson());g.push(t)}}},this);c=u.toJson(g);"[]"===c&&(c="[{}]");a.dynamicLayers=c}return a}});p.mixin(f,{LAYER_OPTION_TOP:"top",LAYER_OPTION_VISIBLE:"visible",
LAYER_OPTION_ALL:"all"});e("extend-esri")&&p.setObject("tasks.IdentifyParameters",f,k);return f})},"esri/tasks/datareviewer/ReviewerResultsTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/json dojo/has ./_DRSBaseTask ../../request ../FeatureSet ../../layers/FeatureEditResult ../../kernel".split(" "),function(w,p,x,u,e,k,l,B,y,f,a){w=w(l,{declaredClass:"esri.tasks.datareviewer.ReviewerResultsTask",constructor:function(b){this.onGetResultsComplete=p.hitch(this,
this.onGetResultsComplete);this.onWriteResultComplete=p.hitch(this,this.onWriteResultComplete);this.onWriteFeatureAsResultComplete=p.hitch(this,this.onWriteFeatureAsResultComplete);this.onGetLayerDefinitionComplete=p.hitch(this,this.onGetLayerDefinitionComplete);this.onGetBatchRunDetailsComplete=p.hitch(this,this.onGetBatchRunDetailsComplete)},getResults:function(b,c){var d=this._successHandler,m=this._errorHandler,r=this._appendQueryParams,h=this._url+"/ReviewerResults/getResults";h=r(h);var g=new u;
b={queryParameters:b.toJSON(),f:"json"};null!==c&&void 0!==c&&(b.filtersArray=c.toJSON());B({callbackParamName:"callback",url:h,content:b}).then(p.hitch(this,function(n,q){if(void 0!==n.error)q=Error(),q.message=n.error.message,q.code=n.error.code,m(q,g);else try{if(void 0===n.features||void 0===n.fieldAliases||void 0===n.fields)m(null,g);else{var t=new y(n);d({featureSet:t},"onGetResultsComplete",g)}}catch(z){m(z,g)}}),function(n,q){m(n,g)});return g},writeResult:function(b,c){var d=this._successHandler,
m=this._errorHandler,r=this._appendQueryParams,h=this._url+"/ReviewerResults/writeResult";h=r(h);var g=new u;B({callbackParamName:"callback",url:h,content:{reviewerAttributes:b.toJSON(),geometry:e.stringify(c.toJson()),f:"json"}}).then(p.hitch(this,function(n,q){q=Error();if(void 0!==n.error)q.message=n.error.message,q.code=n.error.code,m(q,g);else try{void 0!==n.result&&"error"===n.result?(q.message=n.messages,q.code=n.result,m(q,g)):"success"===n.result?d({success:!0},"onWriteResultComplete",g):
m(null,g)}catch(t){m(t,g)}}),function(n,q){m(n,g)});return g},writeFeatureAsResult:function(b,c){var d=this._successHandler,m=this._errorHandler,r=this._appendQueryParams,h=this._url+"/ReviewerResults/writeFeatureAsResult";h=r(h);var g=new u;B({callbackParamName:"callback",url:h,content:{reviewerAttributes:b.toJSON(),feature:e.stringify(c.toJson()),f:"json"}}).then(p.hitch(this,function(n,q){q=Error();if(void 0!==n.error)q.message=n.error.message,q.code=n.error.code,m(q,g);else try{void 0!==n.result&&
"error"===n.result?(q.message=n.messages,q.code=n.result,m(q,g)):"success"===n.result?d({success:!0},"onWriteFeatureAsResultComplete",g):m(null,g)}catch(t){m(t,g)}}),function(n,q){m(n,g)});return g},getLayerDefinition:function(b){var c=this._successHandler,d=this._errorHandler,m=this._appendQueryParams,r=this._url+"/ReviewerResults/getLayerDefinition";r=m(r);var h=new u;m={f:"json"};if(null!==b||void 0!==b)m.filtersArray=b.toJSON();B({callbackParamName:"callback",url:r,content:m}).then(p.hitch(this,
function(g,n){if(void 0!==g.error)n=Error(),n.message=g.error.message,n.code=g.error.code,d(n,h);else try{void 0===g.whereClause?d(null,h):c({whereClause:g.whereClause},"onGetLayerDefinitionComplete",h)}catch(q){d(q,h)}}),function(g,n){d(g,h)});return h},getBatchRunDetails:function(b){var c=this._successHandler,d=this._errorHandler,m=this._appendQueryParams,r=this._url+"/ReviewerResults/getBatchRunDetails";r=m(r);var h=new u;B({callbackParamName:"callback",url:r,content:{batchRunIds:e.stringify(b),
f:"json"}}).then(p.hitch(this,function(g,n){if(void 0!==g.error)n=Error(),n.message=g.error.message,n.code=g.error.code,d(n,h);else try{if(void 0===g.features||void 0===g.fieldAliases||void 0===g.fields)d(null,h);else{var q=new y(g);c({featureSet:q},"onGetBatchRunDetailsComplete",h)}}catch(t){d(t,h)}}),function(g,n){d(g,h)});return h},updateLifecycleStatus:function(b,c,d,m){var r=this._successHandler,h=this._errorHandler,g=this._appendQueryParams,n=this._url+"/ReviewerResults/updateLifecycleStatus";
n=g(n);var q=new u;B({callbackParamName:"callback",url:n,content:{sessionId:b,lifecycleStatus:c,technicianName:d,filtersArray:m.toJSON(),f:"json"}}).then(p.hitch(this,function(t,z){if(void 0!==t.error)z=Error(),z.message=t.error.message,z.code=t.error.code,h(z,q);else try{var A=[];x.forEach(t.updateResults,function(F){var H=new f;H.error=Error(F.description);H.success=F.success;H.objectId=F.objectId;A.push(H)});r({featureEditResults:A},"onUpdateLifecycleStatusComplete",q)}catch(F){h(F,q)}}),function(t,
z){h(t,q)});return q},getResultsFieldNames:function(){return"recordId objectId subtype category sessionId checktitle resourceName checkName notes severity reviewStatus correctionStatus verificationStatus reviewTechnician correctionTechnician verificationTechnician reviewDateUtc correctionDateUtc verificationDateUtc lifecycleStatus".split(" ")},onGetResultsComplete:function(b){},onWriteResultComplete:function(b){},onWriteFeatureAsResultComplete:function(b){},onGetLayerDefinitionComplete:function(b){},
onGetBatchRunDetailsComplete:function(b){},onUpdateLifecycleStatusComplete:function(b){}});k("extend-esri")&&p.setObject("tasks.datareviewer.ReviewerResultsTask",w,a);return w})},"esri/tasks/datareviewer/_DRSBaseTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dojo/has ../../request ../../urlUtils ../../kernel ../Task ./ReviewerSession".split(" "),function(w,p,x,u,e,k,l,B,y,f){w=w(y,{declaredClass:"esri.tasks.datareviewer.DRSBaseTask",_url:null,_queryParams:null,
_reviewerMapServerUrl:null,constructor:function(a){"/"==a[a.length-1]&&(a=a.slice(0,-1));a=l.urlToObject(a);this._url=a.path;this._queryParams=a.query;a=this._url.toLowerCase().lastIndexOf("/exts/");0<a&&(this._reviewerMapServerUrl=this._url.substring(0,a));this._successHandler=p.hitch(this,this._successHandler);this._errorHandler=p.hitch(this,this._errorHandler);this._appendQueryParams=p.hitch(this,this._appendQueryParams);this.onError=p.hitch(this,this.onError)},_appendQueryParams:function(a){if(this._queryParams)for(var b in this._queryParams)a=
l.urlToObject(a).query?a+("\x26"+b+"\x3d"+this._queryParams[b]):a+("?"+b+"\x3d"+this._queryParams[b]);return a},_successHandler:function(a,b,c){b&&this[b].apply(this,[a]);c&&c.resolve(a)},_errorHandler:function(a,b){null===a&&(a=Error("Unexpected response received from server"),a.code=500);this.onError(a);b&&b.reject(a)},getReviewerMapServerUrl:function(){var a=null;if(a=this._reviewerMapServerUrl){if(this._queryParams)for(var b in this._queryParams)a=l.urlToObject(a).query?a+("\x26"+b+"\x3d"+this._queryParams[b]):
a+("?"+b+"\x3d"+this._queryParams[b]);return a}return null},getLifecycleStatusStrings:function(){var a=this._successHandler,b=this._errorHandler,c=this._appendQueryParams,d=this._url+"/Utilities/getLifecycleStatusStrings";d=c(d);var m=new u;k({callbackParamName:"callback",url:d,content:{f:"json"}}).then(p.hitch(this,function(r,h){if(void 0!==r.error)h=Error(),h.message=r.error.message,h.code=r.error.code,b(h,m);else try{var g=r.lifecycleStatusString;if(void 0===g)b(null,m);else{var n=[];x.forEach(g,
function(q,t){n[q.descriptionCode]=q.descriptionString});a({lifecycleStatusStrings:n},"onGetLifecycleStatusStringsComplete",m)}}catch(q){b(q,m)}}),function(r,h){b(r,m)});return m},createReviewerSession:function(a,b){var c=this._successHandler,d=this._errorHandler,m=this._appendQueryParams,r=this._url+"/Utilities/createReviewerSession";r=m(r);var h=new u;k({callbackParamName:"callback",url:r,content:{sessionName:a,sessionProperties:b.toJsonSessionOptions(),f:"json"}}).then(p.hitch(this,function(g,
n){if(void 0!==g.error)n=Error(),n.message=g.error.message,n.code=g.error.code,d(n,h);else try{if(void 0===g.sessionAttributes)d(null,h);else{var q=g.sessionAttributes,t=new f(q.sessionId,q.sessionName,q.userName,q.versionName);c({reviewerSession:t},"onCreateReviewerSessionComplete",h)}}catch(z){d(z,h)}}),function(g,n){d(g,h)});return h},getReviewerSessions:function(){var a=this._successHandler,b=this._errorHandler,c=this._appendQueryParams,d=this._url+"/Utilities/getReviewerSessions";d=c(d);var m=
new u;k({callbackParamName:"callback",url:d,content:{f:"json"}}).then(p.hitch(this,function(r,h){if(void 0!==r.error)h=Error(),h.message=r.error.message,h.code=r.error.code,b(h,m);else try{var g=r.sessionAttributes;if(void 0===g)b(null,m);else{var n=[];x.forEach(g,function(q,t){n[t]=new f(q.sessionId,q.sessionName,q.userName,q.versionName)});a({reviewerSessions:n},"onGetReviewerSessionsComplete",m)}}catch(q){b(q,m)}}),function(r,h){b(r,m)});return m},getCustomFieldNames:function(){var a=this._successHandler,
b=this._errorHandler,c="BATCHJOBCHECKGROUP CHECKTITLE FEATUREOBJECTCLASS LIFECYCLEPHASE LIFECYCLESTATUS SESSIONID SEVERITY SUBTYPE".split(" "),d=this._appendQueryParams,m=this._url+"/Dashboard";m=d(m);var r=new u;k({callbackParamName:"callback",url:m,content:{f:"json"}}).then(p.hitch(this,function(h,g){if(void 0!==h.error)g=Error(),g.message=h.error.message,g.code=h.error.code,b(g,r);else try{var n=[];void 0===h.reviewerResultsBy&&b(null,r);x.forEach(h.reviewerResultsBy,function(q,t){-1===c.indexOf(q.name)&&
n.push(q.name)});a({customFieldNames:n},"onGetCustomFieldNamesComplete",r)}catch(q){b(q,r)}}),function(h,g){b(h,r)});return r},onGetLifecycleStatusStringsComplete:function(a){},onGetReviewerSessionsComplete:function(a){},onCreateReviewerSessionComplete:function(a){},onGetCustomFieldNamesComplete:function(a){},onError:function(a){}});e("extend-esri")&&p.setObject("tasks.datareviewer.DRSBaseTask",w,B);return w})},"esri/tasks/datareviewer/ReviewerSession":function(){define(["dojo/_base/declare","dojo/has",
"dojo/_base/lang","../../kernel"],function(w,p,x,u){w=w(null,{declaredClass:"esri.tasks.datareviewer.ReviewerSession",sessionId:NaN,sessionName:"",userName:"",versionName:"",constructor:function(e,k,l,B){this.sessionId=e;this.sessionName=k;this.userName=l;void 0!==B&&(this.versionName=B)},toString:function(){return isNaN(this.sessionId)?null:"Session "+this.sessionId+" : "+this.sessionName}});p("extend-esri")&&x.setObject("tasks.datareviewer.ReviewerSession",w,u);return w})},"widgets/ReportFeature/InfoWindowContent":function(){define("dojo/_base/declare dojo/_base/array dojo/on dojo/dom-construct dojo/dom-class dojo/query dijit/_WidgetBase dijit/_TemplatedMixin esri/tasks/datareviewer/ReviewerAttributes dojo/text!./InfoWindowContent.html dojox/validate jimu/tokenUtils dojox/validate/check dojo/NodeList-dom".split(" "),
function(w,p,x,u,e,k,l,B,y,f,a,b){return w([l,B],{baseClass:"drs-feature-info-window",templateString:f,infoTitle:null,_setGraphicAttr:function(c){this.setGraphic(c)},_setLayerNameAttr:function(c){this.setLayerName(c)},_setNlsAttr:function(c){this.setLocalizedStrings(c)},postCreate:function(){this.inherited(arguments);this._initEvents()},_initEvents:function(){var c=this;"logon"===this.includeReportedBy||"default"===this.includeReportedBy?this.showHideDynamicRows(!1):this.showHideDynamicRows(!0);this.own(x(this.formNode,
"submit",function(d){d.preventDefault();c._onFormSubmit()}))},showHideDynamicRows:function(c){var d=k(".dynamicRow",this.formNode);if(void 0!==d&&null!==d&&0<d.length)for(var m=0;m<d.length;m++)d[m].style.display=c?"":"none"},setLayerName:function(c){this.formNode.reset();this.layerName=c;this.reviewerAttributes||(this.reviewerAttributes=new y);this.reviewerAttributes.resourceName=c;this.reviewerAttributes.severity=5;this.reviewerAttributes.lifecycleStatus=1;this.layerNode.innerHTML=this.layerName;
this.statusNode.focus()},setGraphic:function(c){this.graphic=c},setLocalizedStrings:function(c){var d=this.params.title;this.statusNode.options.length=0;var m="";this.nls=c;if(d===this.nls.select)for(var r in c)-1<r.indexOf("selectReviewStatus")&&(m=m+"\x3coption\x3e"+c[r]+"\x3c/option\x3e");else for(var h in c)-1<h.indexOf("drawReviewStatus")&&(m=m+"\x3coption\x3e"+c[h]+"\x3c/option\x3e");m&&u.place(m,this.statusNode,"last")},_onFormSubmit:function(){if(this.isFormValid()){if("default"===this.includeReportedBy)this.reviewerAttributes.reviewTechnician=
this.defaultUserName;else if("logon"===this.includeReportedBy){var c=b.getPortalCredential(b.getPortalUrl());this.reviewerAttributes.reviewTechnician=c.userId}else 0<this.reportedByNode.value.length&&(this.reviewerAttributes.reviewTechnician=this.reportedByNode.value);this.reviewerAttributes.notes=this.notesNode.value;this.reviewerAttributes.reviewStatus=this.statusNode.value;this.reviewerAttributes.severity=this.severityNode.value;this.emit("ReportSubmit",{},[this.reviewerAttributes])}},isFormValid:function(){var c=
{trim:["notes","reviewTechnician"],required:["reviewStatus"]};"user"===this.includeReportedBy&&c.required.push("reviewTechnician");c=a.check(this.formNode,c);var d=c.hasMissing();k("input, select",this.formNode).removeClass("drs-input-err");d&&p.forEach(c.getMissing(),function(m){e.add(this.formNode[m],"drs-input-err")},this);return!d}})})},"esri/tasks/datareviewer/ReviewerAttributes":function(){define(["dojo/_base/declare","dojo/json","dojo/has","dojo/_base/lang","../../kernel"],function(w,p,x,u,
e){w=w(null,{declaredClass:"esri.tasks.datareviewer.ReviewerAttributes",sessionId:NaN,severity:NaN,resourceName:null,reviewStatus:null,reviewTechnician:null,notes:null,subtype:"",lifecycleStatus:NaN,constructor:function(){},toJSON:function(){var k={};isNaN(this.sessionId)||(k.sessionId=this.sessionId);isNaN(this.severity)||(k.severity=this.severity);null!==this.resourceName&&(k.resourceName=this.resourceName);null!==this.reviewStatus&&(k.reviewStatus=this.reviewStatus);null!==this.reviewTechnician&&
(k.reviewTechnician=this.reviewTechnician);null!==this.notes&&(k.notes=this.notes);null!==this.subtype&&(k.subtype=this.subtype);isNaN(this.lifecycleStatus)||(k.lifecycleStatus=this.lifecycleStatus);return p.stringify(k)}});x("extend-esri")&&u.setObject("tasks.datareviewer.ReviewerAttributes",w,e);return w})},"dojox/validate":function(){define(["./validate/_base"],function(w){return w})},"dojox/validate/_base":function(){define(["dojo/_base/lang","dojo/regexp","dojo/number","./regexp"],function(w,
p,x,u){var e=w.getObject("dojox.validate",!0);e.isText=function(k,l){l="object"==typeof l?l:{};return/^\s*$/.test(k)||"number"==typeof l.length&&l.length!=k.length||"number"==typeof l.minlength&&l.minlength>k.length||"number"==typeof l.maxlength&&l.maxlength<k.length?!1:!0};e._isInRangeCache={};e.isInRange=function(k,l){k=x.parse(k,l);if(isNaN(k))return!1;l="object"==typeof l?l:{};var B="number"==typeof l.max?l.max:Infinity,y="number"==typeof l.min?l.min:-Infinity,f=e._isInRangeCache;l=k+"max"+B+
"min"+y+"dec"+("string"==typeof l.decimal?l.decimal:".");if("undefined"!=typeof f[l])return f[l];f[l]=!(k<y||k>B);return f[l]};e.isNumberFormat=function(k,l){return(new RegExp("^"+u.numberFormat(l)+"$","i")).test(k)};e.isValidLuhn=function(k){var l=0;w.isString(k)||(k=String(k));k=k.replace(/[- ]/g,"");var B=k.length%2;for(var y=0;y<k.length;y++){var f=parseInt(k.charAt(y));y%2==B&&(f*=2);9<f&&(f-=9);l+=f}return!(l%10)};return e})},"dojox/validate/check":function(){define(["dojo/_base/kernel","dojo/_base/lang",
"./_base"],function(w,p,x){w.experimental("dojox.validate.check");x.check=function(u,e){var k=[],l=[],B={isSuccessful:function(){return!this.hasInvalid()&&!this.hasMissing()},hasMissing:function(){return 0<k.length},getMissing:function(){return k},isMissing:function(h){for(var g=0;g<k.length;g++)if(h==k[g])return!0;return!1},hasInvalid:function(){return 0<l.length},getInvalid:function(){return l},isInvalid:function(h){for(var g=0;g<l.length;g++)if(h==l[g])return!0;return!1}},y=function(h,g){return"undefined"==
typeof g[h]};if(e.trim instanceof Array)for(var f=0;f<e.trim.length;f++){var a=u[e.trim[f]];y("type",a)||"text"!=a.type&&"textarea"!=a.type&&"password"!=a.type||(a.value=a.value.replace(/(^\s*|\s*$)/g,""))}if(e.uppercase instanceof Array)for(f=0;f<e.uppercase.length;f++)a=u[e.uppercase[f]],y("type",a)||"text"!=a.type&&"textarea"!=a.type&&"password"!=a.type||(a.value=a.value.toUpperCase());if(e.lowercase instanceof Array)for(f=0;f<e.lowercase.length;f++)a=u[e.lowercase[f]],y("type",a)||"text"!=a.type&&
"textarea"!=a.type&&"password"!=a.type||(a.value=a.value.toLowerCase());if(e.ucfirst instanceof Array)for(f=0;f<e.ucfirst.length;f++)a=u[e.ucfirst[f]],y("type",a)||"text"!=a.type&&"textarea"!=a.type&&"password"!=a.type||(a.value=a.value.replace(/\b\w+\b/g,function(h){return h.substring(0,1).toUpperCase()+h.substring(1).toLowerCase()}));if(e.digit instanceof Array)for(f=0;f<e.digit.length;f++)a=u[e.digit[f]],y("type",a)||"text"!=a.type&&"textarea"!=a.type&&"password"!=a.type||(a.value=a.value.replace(/\D/g,
""));if(e.required instanceof Array)for(f=0;f<e.required.length;f++)if(p.isString(e.required[f]))if(a=u[e.required[f]],!y("type",a)&&("text"==a.type||"textarea"==a.type||"password"==a.type||"file"==a.type)&&/^\s*$/.test(a.value))k[k.length]=a.name;else if(!(y("type",a)||"select-one"!=a.type&&"select-multiple"!=a.type||-1!=a.selectedIndex&&!/^\s*$/.test(a.options[a.selectedIndex].value)))k[k.length]=a.name;else if(a instanceof Array){for(var b=!1,c=0;c<a.length;c++)a[c].checked&&(b=!0);b||(k[k.length]=
a[0].name)}if(e.required instanceof Array)for(f=0;f<e.required.length;f++)if(p.isObject(e.required[f])){var d;for(d in e.required[f]){a=u[d];var m=e.required[f][d]}if(a instanceof Array){for(c=b=0;c<a.length;c++)a[c].checked&&b++;b<m&&(k[k.length]=a[0].name)}else if(!y("type",a)&&"select-multiple"==a.type){for(c=b=0;c<a.options.length;c++)a.options[c].selected&&!/^\s*$/.test(a.options[c].value)&&b++;b<m&&(k[k.length]=a.name)}}if(p.isObject(e.dependencies))for(d in e.dependencies)a=u[d],y("type",a)||
"text"!=a.type&&"textarea"!=a.type&&"password"!=a.type||/\S+/.test(a.value)||B.isMissing(a.name)||(f=u[e.dependencies[d]],"text"!=f.type&&"textarea"!=f.type&&"password"!=f.type||/^\s*$/.test(f.value)||(k[k.length]=a.name));if(p.isObject(e.constraints))for(d in e.constraints)if((a=u[d])&&(y("tagName",a)||!(0<=a.tagName.toLowerCase().indexOf("input")||0<=a.tagName.toLowerCase().indexOf("textarea"))||!/^\s*$/.test(a.value))){if(p.isFunction(e.constraints[d]))var r=e.constraints[d](a.value);else if(p.isFunction(p.getObject(d,
!1,e.constraints)))r=p.getObject(d,!1,e.constraints)(a.value);else if(p.isArray(e.constraints[d]))if(p.isArray(e.constraints[d][0]))for(f=0;f<e.constraints[d].length&&(r=x.evaluateConstraint(e,e.constraints[d][f],d,a),r.isValid);f++);else r=p.isFunction(p.getObject(d,!1,e.constraints))?x.evaluateConstraint(e,e.constraints[e.constraints[d]],d,a):x.evaluateConstraint(e,e.constraints[d],d,a);r?"boolean"===typeof r||r.isValid||(l[l.length]={field:a.name,message:r.message}):l[l.length]=a.name}if(p.isObject(e.confirm))for(d in e.confirm)a=
u[d],f=u[e.confirm[d]],y("type",a)||y("type",f)||"text"!=a.type&&"textarea"!=a.type&&"password"!=a.type||f.type!=a.type||f.value==a.value||B.isInvalid(a.name)||/^\s*$/.test(f.value)||(l[l.length]=a.name);return B};x.evaluateConstraint=function(u,e,k,l){u=e[0];e=e.slice(1);e.unshift(l.value);return"undefined"!=typeof u&&"string"!=typeof u?u.apply(null,e):"undefined"!=typeof u&&"string"==typeof u&&p.isFunction(p.getObject(u))?p.getObject(u).apply(null,e):!1};return x.check})},"widgets/ReportFeature/DrawErrorDialog":function(){define("dojo/_base/declare dojo/_base/array dojo/on dojo/string dojo/dom-construct dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin dojo/query dojo/i18n!esri/nls/jsapi esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleFillSymbol esri/geometry/Polygon esri/tasks/datareviewer/ReviewerResultsTask ./InfoWindowContent dojo/text!./DrawErrorDialog.html".split(" "),
function(w,p,x,u,e,k,l,B,y,f,a,b,c,d,m,r,h){var g=new a({type:"esriSMS",style:"esriSMSCircle",size:12,xoffset:0,yoffset:0,color:[0,0,255,51],outline:{type:"esriSLS",style:"esriSLSSolid",color:[0,0,255,128],width:1}}),n=new b({type:"esriSLS",style:"esriSLSSolid",color:[0,0,255,51],width:2}),q=new c({type:"esriSFS",style:"esriSFSSolid",color:[0,0,255,26],outline:{type:"esriSLS",style:"esriSLSSolid",color:[0,0,255,128],width:1}});return w([l,B],{templateString:h,baseClass:"drs-draw-error-dialog",buildRendering:function(){this.inherited(arguments);
this._initDom()},_initDom:function(){var t=this.getLayerOptions();void 0!==t&&""!==t&&e.place(t,this.selectLayer)},_setDrawBoxAttr:function(t){this.setDrawBox(t)},setDrawBox:function(t){this.drawBox=t;this.drawBox.placeAt(this.drawBoxNode);this.drawBox.setMap(this.map);this.drawBox.setPointSymbol(g);this.drawBox.setLineSymbol(n);this.drawBox.setPolygonSymbol(q)},postCreate:function(){this.inherited(arguments);this._initEvents()},startup:function(){this.inherited(arguments);this.drawBox.startup()},
_initEvents:function(){var t=this;this.own(x(this.selectLayer,"change",function(z){var A=z.target.value;z=p.filter(t.config.layers,function(F){return F.id===A});void 0!==z&&0<z.length&&void 0===t.map.getLayer(A)?t.emit("Error",{},[t.nls.errorMapService]):(f.toolbars.draw.addPoint=t.nls.drawFeatureMapPoint,A?t.startDrawing():t.cancelDrawing())}));this.own(x(this.map.infoWindow,"hide",function(){var z=y(".actionsPane");void 0!==z&&null!==z&&0<z.length&&(z[0].style.display="");t.emit("InfoWindowHide")}));
this.own(x(this.drawBox,"DrawEnd",function(z,A,F){t._onDrawEnd(z,A,F)}))},startDrawing:function(){k.set(this.drawErrorInstructionsNode,"display","");k.set(this.drawBoxNode,"display","")},cancelDrawing:function(){this.drawBox.clear();this.drawBox.deactivate();k.set(this.drawErrorInstructionsNode,"display","none");k.set(this.drawBoxNode,"display","none")},_onDrawEnd:function(t){var z=this,A=t.geometry;if("extent"===A.type){var F=new d(A.spatialReference);F.addRing([[A.xmin,A.ymin],[A.xmin,A.ymax],[A.xmax,
A.ymax],[A.xmax,A.ymin],[A.xmin,A.ymin]]);A=F}this._resultGeometry=A;this.drawBox.clear();this.drawBox.deactivate();if(null!==this._resultGeometry){switch(this._resultGeometry.type){case "polyline":A=this._resultGeometry.getExtent().getCenter();break;case "polygon":A=this._resultGeometry.getCentroid();break;default:A=this._resultGeometry}this.map.infoWindow.setTitle(this.nls.infoWindowTitle);this.infoWindowContent=new r({nls:this.nls,title:this.nls.draw,includeReportedBy:this.config.includeReportedBy,
defaultUserName:this.config.defaultUserName,onReportSubmit:function(H){z.submitReport(H)}},e.create("div"));this.infoWindowContent.startup();F=p.filter(z.config.layers,function(H){return H.id===z.selectLayer.value});this.infoWindowContent.set("layerName",F[0].alias);this.infoWindowContent.set("graphic",t);x.once(this.map.infoWindow,"hide",function(){z.map.setInfoWindowOnClick(!1)});this.map.infoWindow.destroyDijits();y(".actionsPane")[0].style.display="none";this.map.infoWindow.setContent(this.infoWindowContent.domNode);
this.map.infoWindow.resize(300,600);this.map.infoWindow.show(A);this.emit("DrawEnd")}},submitReport:function(t){var z=this;t.sessionId=this._sessionId;this.map.infoWindow.hide();this._reviewerResultsTask.writeResult(t,this._resultGeometry).then(function(A){z._onWriteResultComplete(A)},function(A){z._onWriteResultError(A)})},_onWriteResultComplete:function(t){t&&t.success?this.emit("Message",{},["",this.nls.reportMessage]):this.emit("Error",{}[this.nls.errorReportMessage])},_onWriteResultError:function(t){this.emit("Error",
{},[t.message,t])},destroy:function(){this.drawBox&&(this.drawBox.destroy(),this.drawBox=null);this.inherited(arguments)},reset:function(){this.selectLayer.selectedIndex=0;void 0!==this.infoWindowContent&&null!==this.infoWindowContent&&this.infoWindowContent.destroyRecursive();this.map.setInfoWindowOnClick(!1);this.cancelDrawing()},setDrsUrl:function(t){this._reviewerResultsTask=new m(t)},setReviewerSession:function(t){isNaN(t)?this._sessionId=1:this._sessionId=parseInt(t,10)},getLayerOptions:function(){var t=
"";p.forEach(this.config.layers,function(z){!0===z.show&&(t+=u.substitute('\x3coption value\x3d"${id}"\x3e${alias}\x3c/option\x3e',z))});return t}})})},"widgets/ReportFeature/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/ReportFeature/InfoWindowContent.html":'\x3cdiv\x3e\r\n  \x3cform data-dojo-attach-point\x3d"formNode" class\x3d"drs-info-window-form"\x3e\r\n    \x3cdiv\x3e\r\n      \x3clabel\x3e${nls.layerLabel}\x3c/label\x3e\r\n      \x3cspan data-dojo-attach-point\x3d"layerNode" style\x3d"width:100%; padding: 0 3px 0 0;"\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3clabel\x3e${nls.reviewStatusLabel}\x3c/label\x3e\r\n      \x3cselect data-dojo-attach-point\x3d"statusNode" name\x3d"reviewStatus" class\x3d"jimu-input drs-infowindow-input drs-infowindow-input"\x3e\r\n        \x3coption\x3e\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3clabel\x3e${nls.notesLabel}\x3c/label\x3e\r\n      \x3ctextarea data-dojo-attach-point\x3d"notesNode" name\x3d"notes" class\x3d"jimu-input drs-infowindow-input" rows\x3d"2" \x3e\x3c/textarea\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv\x3e\r\n      \x3clabel\x3e${nls.severityLabel}\x3c/label\x3e\r\n      \x3cselect data-dojo-attach-point\x3d"severityNode" name\x3d"severity" class\x3d"jimu-input drs-infowindow-input"\x3e\r\n        \x3coption\x3e1\x3c/option\x3e\r\n        \x3coption\x3e2\x3c/option\x3e\r\n        \x3coption\x3e3\x3c/option\x3e\r\n        \x3coption\x3e4\x3c/option\x3e\r\n        \x3coption selected\x3e5\x3c/option\x3e\r\n      \x3c/select\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"dynamicRow"\x3e\r\n      \x3clabel\x3e${nls.reportedByLabel}\x3c/label\x3e\r\n      \x3cinput type\x3d"text" data-dojo-attach-point\x3d"reportedByNode" name\x3d"reviewTechnician" class\x3d"jimu-input drs-infowindow-input"/\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"drs-buttons jimu-align-trailing"\x3e\r\n      \x3cinput type\x3d"submit" value\x3d"${nls.reportButton}" class\x3d"jimu-btn"/\x3e\r\n    \x3c/div\x3e\r\n  \x3c/form\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/ReportFeature/SelectFeatureDialog.html":'\x3cdiv\x3e\r\n\t\x3cp style\x3d"width:90%;height:25px;margin: 20px 5px 0px 7px;"\x3e${nls.chooseALayer}: \x3c/p\x3e\r\n\t\x3cselect data-dojo-attach-point\x3d"selectLayer"  class\x3d"jimu-input" style\x3d"width:90%;height:31px;margin: 5px 5px 5px 7px;"\x3e\r\n    \x3coption value\x3d""\x3e\x3c/option\x3e\r\n  \x3c/select\x3e\r\n  \r\n  \x3cp style\x3d"display: none;" data-dojo-attach-point\x3d"clickAFeatureNode"  style\x3d"width:90%;height:25px;margin: 5px 5px 5px 7px;" \x3e${nls.clickAFeature}\x3c/p\x3e\r\n  \x3cp class\x3d"drs-loading-features" style\x3d"display: none;" data-dojo-attach-point\x3d"loadingFeaturesNode" \x3e${nls.loadingFeatures}\x3c/p\x3e\r\n\x3c/div\x3e',
"url:widgets/ReportFeature/DrawErrorDialog.html":'\x3cdiv\x3e\r\n\t\x3cp style\x3d"width:90%;height:25px;margin: 20px 5px 0px 7px;"\x3e${nls.chooseALayer}: \x3c/p\x3e\r\n\t\x3cselect data-dojo-attach-point\x3d"selectLayer" class\x3d"jimu-input" style\x3d"width:90%;height:31px;margin: 5px 5px 5px 7px;"\x3e\r\n    \x3coption value\x3d""\x3e\x3c/option\x3e\r\n  \x3c/select\x3e\r\n  \r\n  \x3cp style\x3d"display: none;" data-dojo-attach-point\x3d"drawErrorInstructionsNode" style\x3d"width:90%;height:25px;margin: 5px 5px 5px 7px;" \x3e${nls.drawErrorInstructions}\x3c/p\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"drawBoxNode" style\x3d"display: none"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/ReportFeature/Widget.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"report-feature-content" data-dojo-attach-point\x3d"content"\x3e\r\n\t\t\x3cdiv class\x3d"select-tab-node" data-dojo-attach-point\x3d"selectTabNode" id\x3d"selectTabNode"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"selectFeatureDialogNode"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"draw-tab-node" data-dojo-attach-point\x3d"drawTabNode"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"drawErrorDialogNode"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/ReportFeature/css/style.css":".drs-widget-report-feature .report-feature-content{position: relative; width:100%; height:100%;}.drs-widget-report-feature\x3e.jimu-tab\x3e.control{margin:-14px -14px 0px -14px;}.BoxTheme .drs-widget-report-feature\x3e.jimu-tab\x3e.control{margin:0px -14px 0px -14px;}.drs-widget-report-feature .drs-loading-features {background: url('../images/loading.gif') no-repeat left center; padding-left: 20px;}.drs-info-window-form .drs-input-err {border-color: #f00;}.drs-info-window-form label {display: block; margin-top: 1em;}.drs-info-window-form .drs-buttons {margin-top: 1em;}.drs-info-window-form textarea.jimu-input {width: 100%;}.TabTheme .drs-widget-report-feature .jimu-tab\x3e.control\x3e.tab.jimu-state-selected{border-top: 0;}.drs-widget-report-feature .jimu-widget-frame.jimu-container {overflow-x: auto; overflow-y: auto; position: relative; padding: 0px 0px 14px 0px; background-color: white;}.drs-widget-report-feature .selectLayer{border-color: #d2dae2; background-color: #fafafc; color: #555555; font-size: 14x;}.drs-widget-report-feature .selectLayer:active{border-color: #c3c3c3; background-color: #ffffff; color: #000000; font-family: \"AVENIR LT STD 35 LIGHT\"; font-size: 14x;}.drs-infowindow-input{width:100%; padding: 1px 3px 0 0; font-size: 13px;}",
"*now":function(w){w(['dojo/i18n!*preload*widgets/ReportFeature/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidget jimu/dijit/TabContainer jimu/PanelManager jimu/dijit/Message jimu/dijit/DrawBox esri/toolbars/draw dojo/i18n!esri/nls/jsapi dojo/_base/lang ./SelectFeatureDialog ./DrawErrorDialog".split(" "),function(w,p,x,u,e,k,l,B,y,f,a){return w([p],{baseClass:"drs-widget-report-feature",name:"ReportFeature",_defaultToolString:"",buildRendering:function(){this.inherited(arguments);this._initDom()},_initDom:function(){var b=this;this.selectFeatureDialog=new f({config:this.config,
nls:this.nls,map:this.map,onSelectFeature:function(){b.close()},onInfoWindowHide:function(){},onMessage:function(c,d){b.showMessage(c,d)},onError:function(c,d){b.showError(c,d)}},this.selectFeatureDialogNode);this.drawErrorDialog=new a({config:this.config,nls:this.nls,map:this.map,drawBox:new k({types:["point","polyline","polygon"],showClear:!1}),onDrawEnd:function(){b.close()},onInfoWindowHide:y.hitch(this,function(){if(void 0!==b.selectFeatureDialog.infoWindowContent&&null!==b.selectFeatureDialog.infoWindowContent||
null!==b.drawErrorDialog.infoWindowContent&&void 0!==b.drawErrorDialog.infoWindowContent)b.open(),b.selectFeatureDialog.infoWindowContent&&b.selectFeatureDialog.infoWindowContent.destroyRecursive(),b.drawErrorDialog.infoWindowContent&&b.drawErrorDialog.infoWindowContent.destroyRecursive(),b.selectFeatureDialog.infoWindowContent=null,b.drawErrorDialog.infoWindowContent=null}),onMessage:function(c,d){b.showMessage(c,d)},onError:function(c,d){b.showError(c,d)}},this.drawErrorDialogNode);this.tabContainer=
new x({tabs:[{title:this.nls.select,content:this.selectTabNode},{title:this.nls.draw,content:this.drawTabNode}],selected:this.nls.select},this.content)},postCreate:function(){var b=this.config.drsUrl,c=this.config.sessionID;this.inherited(arguments);this._initEvents();this.selectFeatureDialog.setDrsUrl(b);this.selectFeatureDialog.setReviewerSession(c);this.drawErrorDialog.setDrsUrl(b);this.drawErrorDialog.setReviewerSession(c)},_initEvents:function(){var b=this;this.own(this.tabContainer.on("tabChanged",
function(c){b.tabContainer.selected=c;b.map.setInfoWindowOnClick(!1);c===b.nls.select?(void 0!==b.drawErrorDialog.drawBox&&b.drawErrorDialog.drawBox.deactivate(),b.selectFeatureDialog.reset()):c===b.nls.draw&&(void 0!==b.selectFeatureDialog.selectionToolbar&&b.selectFeatureDialog.selectionToolbar.deactivate(),b.drawErrorDialog.reset())}))},startup:function(){this.inherited(arguments);this.selectFeatureDialog.startup();this.drawErrorDialog.startup();this.tabContainer.startup()},open:function(){var b=
this.getPanel();u.getInstance().openPanel(b.id)},close:function(){u.getInstance().closePanel(this.id+"_panel")},onClose:function(){null!==this.selectFeatureDialog.selectionToolbar&&void 0!==this.selectFeatureDialog.selectionToolbar&&(this.selectFeatureDialog.selectionToolbar.deactivate(),B.toolbars.draw.addPoint=this._defaultToolString);this.map.setInfoWindowOnClick(!0)},onOpen:function(){""===this._defaultToolString&&(this._defaultToolString=B.toolbars.draw.addPoint);this.tabContainer.selected===
this.nls.select&&""!==this.selectFeatureDialog.selectLayer.value&&(B.toolbars.draw.addPoint=this.nls.selectFeatureMapPoint)},onActive:function(){this.map.setInfoWindowOnClick(!1);this.tabContainer.selected===this.nls.select&&null!==this.selectFeatureDialog.selectionToolbar&&void 0!==this.selectFeatureDialog.selectionToolbar&&""!==this.selectFeatureDialog.selectLayer.value&&this.selectFeatureDialog.selectionToolbar.activate(l.POINT)},showMessage:function(b,c){new e({message:b,titleLabel:c})},showError:function(b,
c){new e({message:b,titleLabel:this.nls.errorTitle,type:"error"});console.error(c||b)}})});