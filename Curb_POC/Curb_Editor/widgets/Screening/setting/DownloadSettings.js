// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/Screening/setting/DownloadSettings.html":'\x3cdiv\x3e\r\n  \x3c!--Download Settings--\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.downloadTab.downloadLegend}\x3c/legend\x3e\r\n    \x3c!--Sync enable download Option--\x3e\r\n    \x3cform data-dojo-attach-point\x3d"downloadOptionForm" class\x3d"esriCTDownloadOptionForm"\x3e\r\n      \x3c!--Sync-enable feature service option--\x3e\r\n      \x3cdiv class\x3d"esriCTSyncEnableOptionDiv"\x3e\r\n        \x3c!--Sync-enable radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" id\x3d"syncEnableOption" name\x3d"downloadOption" type\x3d"radio" class\x3d"jimu-radio-btn"\r\n          data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"syncEnable" data-dojo-attach-point\x3d"syncEnableRadioButton"\r\n          data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3clabel class\x3d"esriCTDownloadOptionLabel esriCTDownloadLabel" for\x3d"syncEnableOption"\x3e\r\n          ${nls.downloadTab.syncEnableOptionLabel}\r\n        \x3c/label\x3e\r\n        \x3c!--Sync-enable download option label and hint container--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadLabelDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.syncEnableOptionHint}\r\n            \x3cbr\x3e${nls.downloadTab.syncEnableOptionNote}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Table representation of download file options for each layer--\x3e\r\n      \x3cdiv class\x3d"esriCTLayerDownloadOptionTable" data-dojo-attach-point\x3d"downloadOptionTable"\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Extract data task geoprocessing service option--\x3e\r\n      \x3cdiv class\x3d"esriCTGPServiceOptionDiv"\x3e\r\n        \x3c!--Extract data task radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" id\x3d"gpServiceOption" name\x3d"downloadOption" type\x3d"radio" class\x3d"jimu-radio-btn"\r\n          data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"extractDataTask" data-dojo-attach-point\x3d"gpServiceRadioButton"\r\n          data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3c!--Extract data task download option label and hint container--\x3e\r\n        \x3clabel class\x3d"esriCTDownloadOptionLabel esriCTDownloadLabel" for\x3d"gpServiceOption"\x3e\r\n          ${nls.downloadTab.extractDataTaskOptionLabel}\r\n        \x3c/label\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadLabelDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.extractDataTaskOptionHint}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Extract data task INPUT Container--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabInputContainer esriCTHidden" data-dojo-attach-point\x3d"extractDataTaskInputContainer"\x3e\r\n        \x3c!--Extract data task INPUT TEXTBOX label--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.GPTaskLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Extract data task TEXTBOX--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"extractDataTaskTextBox" class\x3d"esriCTDownloadTabTextbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Set Button--\x3e\r\n        \x3cdiv class\x3d"jimu-btn jimu-float-trailing esriCTDownloadTabSetButton" data-dojo-attach-point\x3d"extractDataTaskSetButton"\r\n          title\x3d"${nls.downloadTab.setButtonLabel}"\x3e\r\n          ${nls.downloadTab.setButtonLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--User cannot download--\x3e\r\n      \x3cdiv class\x3d"esriCTCannotDownloadOptionDiv"\x3e\r\n        \x3c!--User cannot download radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" id\x3d"cannotDownloadOption" name\x3d"downloadOption" type\x3d"radio" class\x3d"jimu-radio-btn"\r\n          data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"cannotDownload" data-dojo-attach-point\x3d"cannotDownloadRadioButton"\r\n          data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3c!--User cannot download option label div--\x3e\r\n        \x3clabel class\x3d"esriCTDownloadOptionLabel esriCTDownloadLabel" for\x3d"cannotDownloadOption"\x3e\r\n          ${nls.downloadTab.cannotDownloadOptionLabel}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/form\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3c!--Report Settings--\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.downloadTab.reportLegend}\x3c/legend\x3e\r\n    \x3cdiv class\x3d"esriCTReportSettingsContainer"\x3e\r\n      \x3c!--Print service URL container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabInputContainer" data-dojo-attach-point\x3d"printGPServiceInputContainer"\x3e\r\n        \x3c!--Print Service url LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.printGPServiceLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Print Service url TEXTBOX--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"printGPServiceTextBox" class\x3d"esriCTDownloadTabTextbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Set BUTTON--\x3e\r\n        \x3cdiv class\x3d"jimu-btn jimu-float-trailing esriCTDownloadTabSetButton" data-dojo-attach-point\x3d"printGPServiceSetButton"\r\n          title\x3d"${nls.downloadTab.setButtonLabel}"\x3e\r\n          ${nls.downloadTab.setButtonLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Print service URL container ends--\x3e\r\n      \x3c!-- Print layout container starts --\x3e\r\n      \x3c!-- Defaut layout starts --\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"defaultLayoutTable" class\x3d"esriCTDefaultLayoutTable"\x3e\x3c/div\x3e\r\n      \x3c!-- Default layout ends --\x3e\r\n      \x3c!-- Custom Layout button starts --\x3e\r\n      \x3cdiv class\x3d"esriCTAddCustomLayoutParentContainer esriCTCustomOptionBtnAddSection esriCTCustomOptionButtonDisable"\r\n        data-dojo-attach-point\x3d"addCustomOptionButton"\x3e\r\n        \x3cspan class\x3d"esriCTCustomOptionBtnAddIcon esriCTCustomOptionBtnAddIconDisable" data-dojo-attach-point\x3d"addCustomOptionButtonIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"esriCTCustomOptionBtnAddLabel"\x3e${nls.downloadTab.addCustomLayoutTitle}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTHint esriCTCustomLayoutHintText"\x3e${nls.downloadTab.customLayoutOptionHint}\x3c/div\x3e\r\n      \x3c!-- Custom Layout button ends --\x3e\r\n      \x3c!-- Custom layout starts --\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"customLayoutTable" class\x3d"esriCTCustomLayoutTable"\x3e\x3c/div\x3e\r\n      \x3c!-- Custom layout ends --\x3e\r\n      \x3c!-- Default print layout option starts --\x3e\r\n      \x3cdiv class\x3d"esriCTDefaultPrintTemplateContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDefaultPrintTemplateText"\x3e${nls.downloadTab.reportDefaultOptionLabel}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDefaultPrintTemplateDropdown" data-dojo-attach-point\x3d"defaultPrintTemplateDropdown"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Default print layout option ends --\x3e\r\n      \x3c!-- Print layout container ends --\x3e\r\n      \x3c!--Logo chooser starts--\x3e\r\n      \x3cdiv class\x3d"esriCTLogoChooserMainContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.logoLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTLogoChooserDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTImageChooserPreviewContainer"\x3e\r\n            \x3cimg class\x3d"esriCTImageChooserPreview" data-dojo-attach-point\x3d"imageChooserPreview"\x3e\r\n            \x3cdiv class\x3d"esriCTLogoChooser" data-dojo-attach-point\x3d"logoChooserNode"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.logoChooserHint}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Logo chooser ends--\x3e\r\n      \x3c!--Report Title container start--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"reportTitle"\x3e\r\n        \x3c!--Report Title  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.reportTitleLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Report Title  TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"reportTitleTextBox" class\x3d"esriCTDownloadTabReportInputNode" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Report Title container end--\x3e\r\n      \x3c!--No data string representation starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"noDataTextRepresentation"\x3e\r\n        \x3c!--No data String Representation  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.noDataTextRepresentation}\r\n        \x3c/div\x3e\r\n        \x3c!--No data string representation TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"noDataTextRepresentationTextBox" class\x3d"esriCTDownloadTabReportInputNode"\r\n          data-dojo-type\x3d"dijit/form/TextBox" value\x3d"${nls.downloadTab.noDataDefaultText}"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--No data string representation ends--\x3e\r\n      \x3c!--NA string representation starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"naTextRepresentation"\x3e\r\n        \x3c!--NA String Representation  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.naTextRepresentation}\r\n        \x3c/div\x3e\r\n        \x3c!--NA string representation TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"naTextRepresentationTextBox" class\x3d"esriCTDownloadTabReportInputNode"\r\n          data-dojo-type\x3d"dijit/form/TextBox" value\x3d"${nls.downloadTab.notApplicableDefaultText}"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--NA String Representation ends--\x3e\r\n      \x3c!--Column title Color Picker container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"reportTitle"\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.columnTitleColorPickerLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabReportInputNode"\x3e\r\n          \x3cdiv class\x3d"esriCTColorPickerPreviewField" data-dojo-attach-point\x3d"columnTitleColorPickerNode"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Column title Color Picker container ends--\x3e\r\n      \x3c!-- Display summary in report option starts --\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryParentContainer"\x3e\r\n          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n            data-dojo-attach-point\x3d"displaySummaryInReportCheckBox" checked\x3d"true"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryLabel"\x3e\r\n          ${nls.downloadTab.displaySummaryLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Display summary in report option ends --\x3e\r\n      \x3c!-- Hide rows having all values zero in report option starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryParentContainer"\x3e\r\n          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n            data-dojo-attach-point\x3d"hideAllZeroRowCheckBox" checked\x3d"false"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryLabel"\x3e\r\n          ${nls.downloadTab.hideZeroValueRowLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Hide rows having all values zero in report option ends--\x3e\r\n      \x3c!-- Hide rows having all values NULL in report option starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryParentContainer"\x3e\r\n          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n            data-dojo-attach-point\x3d"hideNullRowCheckBox" checked\x3d"false"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryLabel"\x3e\r\n          ${nls.downloadTab.hideNullValueRowLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Hide rows having all values NULL in report option ends--\x3e\r\n      \x3c!--Footnote container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTFootnoteContainer"\x3e\r\n        \x3c!--Footnote LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.footnoteLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Footnote TextEditor--\x3e\r\n        \x3cdiv class\x3d"esriCTFootnoteTextArea" data-dojo-attach-point\x3d"footNoteEditor"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Footnote container ends--\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dojo/text!./DownloadSettings.html dojo/dom-class dojo/_base/lang dojo/on dojo/query dojo/dom-attr dojo/_base/html dojo/dom-construct dojo/string dojo/_base/Color jimu/BaseWidgetSetting jimu/dijit/CheckBox jimu/dijit/SimpleTable jimu/dijit/GpSource jimu/dijit/Popup jimu/dijit/Message jimu/dijit/ImageChooser jimu/portalUtils jimu/dijit/ColorPicker esri/request dojo/query dijit/form/Select dijit/form/ValidationTextBox dojo/_base/array jimu/dijit/PageUtils jimu/utils dojo/DeferredList dijit/Editor dojo/sniff dijit/form/RadioButton dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/ViewSource dijit/_editor/plugins/FontChoice dojox/editor/plugins/Preview dijit/_editor/plugins/TextColor dojox/editor/plugins/ToolbarLineBreak dijit/ToolbarSeparator dojox/editor/plugins/FindReplace dojox/editor/plugins/PasteFromWord dojox/editor/plugins/InsertAnchor dojox/editor/plugins/Blockquote dojox/editor/plugins/UploadImage jimu/dijit/EditorChooseImage jimu/dijit/EditorTextColor jimu/dijit/EditorBackgroundColor".split(" "),
function(F,G,H,h,e,k,r,B,x,l,u,I,J,K,C,D,L,M,y,N,O,v,z,A,E,f,w,p,P,Q,R){return F([J,G],{templateString:H,baseClass:"jimu-widget-screening-download-settings",map:null,loadingIndicator:null,downloadOptions:null,_layerIndex:0,_layers:[],_extractDataTaskDownloadOptions:[],_extractDataTaskURL:"",_printTaskURL:"",_logo:"",_tableHeaderColor:null,_defaultOptions:{"A3 Portrait":{Orientation:"Portrait",SizeName:"A3"},"A3 Landscape":{Orientation:"Landscape",SizeName:"A3"},"A4 Portrait":{Orientation:"Portrait",
SizeName:"A4"},"A4 Landscape":{Orientation:"Landscape",SizeName:"A4"},"Letter ANSI A Portrait":{Orientation:"Portrait",SizeName:"Letter_ANSI_A"},"Letter ANSI A Landscape":{Orientation:"Landscape",SizeName:"Letter_ANSI_A"},"Tabloid ANSI B Portrait":{Orientation:"Portrait",SizeName:"Tabloid_ANSI_B"},"Tabloid ANSI B Landscape":{Orientation:"Landscape",SizeName:"Tabloid_ANSI_B"}},_pageSize:[],_customLayoutTable:null,_buddyTaskChoiceList:{},_customDropdownOption:[],_defaultPrintTemplateDropdownOption:[],
_printServiceChoiceList:[],_defaultPrintTemplateDropdownOptionObj:null,_clonedConfigurationCustomOptions:null,_buddyTaskEndPoint:["Get Layout Templates Info","Get Layout Templates Info Task"],_lastSelectedCustomDropdownRow:null,_isCustomOptionNoDefault:!1,_footNoteEditorObj:null,constructor:function(a){this.downloadOptions=this.loadingIndicator=this.map=null;this._layerIndex=0;this._layers=[];this._extractDataTaskDownloadOptions=[];this._logo=this._printTaskURL=this._extractDataTaskURL="";this._customLayoutTable=
this._tableHeaderColor=null;this._buddyTaskChoiceList={};this._customDropdownOption=[];this._defaultPrintTemplateDropdownOption=[];this._printServiceChoiceList=[];this._lastSelectedCustomDropdownRow=this._clonedConfigurationCustomOptions=this._defaultPrintTemplateDropdownOptionObj=null;e.mixin(this,a)},postCreate:function(){this._initEditor();this._pageSize=[{value:null,label:null},{value:"MILLIMETER",label:this.nls.downloadTab.pageSizeUnits.millimeters},{value:"INCH",label:this.nls.units.inches},
{value:"POINT",label:this.nls.downloadTab.pageSizeUnits.points},{value:"CENTIMETER",label:this.nls.units.centimeters}];var a,b,c,d;this._initSyncEnableOptionTable();this._syncEnableOptionTable&&(this._layers=[],this._syncEnableOptionTable.clear());if(this.downloadOptions&&this.downloadOptions.layers){this._layers=this.downloadOptions.layers;var g=[];f.forEach(this.downloadOptions.layers,e.hitch(this,function(m){m=v({url:m.url+"?f\x3dpjson"});g.push(m)}));(new P(g)).then(e.hitch(this,function(m){f.forEach(m,
e.hitch(this,function(n,q){n[0]?(n={version:n[1].currentVersion,capabilities:n[1].capabilities},this.downloadOptions.layers[q]&&this._setFileOptionDataInTable(this.downloadOptions.layers[q],n)):n[1].name&&"Error"===n[1].name||(n={version:this.layerInfosObj.getLayerInfoById(this.downloadOptions.layers[q].id).layerObject.version,capabilities:""},this._setFileOptionDataInTable(this.downloadOptions.layers[q],n))}))}))}this.downloadOptions&&this.downloadOptions.type?this._chooseDownloadOption(this.downloadOptions.type,
!0):this.syncEnableRadioButton.set("checked",!0);this._attachDownloadOptionEvent();this.reportSettings&&this.reportSettings.printTaskURL&&""!==this.reportSettings.printTaskURL?(this.printGPServiceTextBox.set("value",this.reportSettings.printTaskURL),this._printTaskURL=this.reportSettings.printTaskURL):(d=N.getPortal(this.appConfig.portalUrl).helperServices)&&d.printTask.url&&(this.printGPServiceTextBox.set("value",d.printTask.url),this._printTaskURL=d.printTask.url);this.reportSettings&&this.reportSettings.footnote&&
""!==this.reportSettings.footnote&&this._footNoteEditorObj.set("value",this.reportSettings.footnote);var t={portalUrl:this.appConfig.portalUrl};this.own(k(this.extractDataTaskSetButton,"click",e.hitch(this,function(){a=new D(t);c=this._onSetButtonClick(a);this._attachExtractDataTaskGPSourceEvents(a,c)})));this.own(k(this.printGPServiceSetButton,"click",e.hitch(this,function(){b=new D(t);c=this._onSetButtonClick(b);this._attachPrintReportGPSourceEvents(b,c)})));this._initImageChooser();this._tableHeaderColor=
this._createColorPicker(this.reportSettings.columnTitleColor,this.columnTitleColorPickerNode);this.reportSettings.hasOwnProperty("noDataConfiguredText")&&this.noDataTextRepresentationTextBox.set("value",this.reportSettings.noDataConfiguredText);this.reportSettings.hasOwnProperty("naTextConfiguredValue")&&this.naTextRepresentationTextBox.set("value",this.reportSettings.naTextConfiguredValue);this.reportSettings.hasOwnProperty("displaySummaryInReport")&&this.displaySummaryInReportCheckBox.setValue(this.reportSettings.displaySummaryInReport);
this.reportSettings.hasOwnProperty("hideZeroValueRow")&&this.hideAllZeroRowCheckBox.setValue(this.reportSettings.hideZeroValueRow);this.reportSettings.hasOwnProperty("hideNullValueRow")&&this.hideNullRowCheckBox.setValue(this.reportSettings.hideNullValueRow);this.reportTitleTextBox.set("value",this.reportSettings.reportTitle);this.own(k(this.addCustomOptionButton,"click",e.hitch(this,function(){h.contains(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable")||(this._isCustomOptionNoDefault&&
this._emptyDefaultDropDown(),this._addCustomOptionsInTable())})));this._clonedConfigurationCustomOptions=e.clone(this.reportSettings);this._destroyLayouts();this.loadingIndicator.show();this._fetchChoiceList()},_attachExtractDataTaskGPSourceEvents:function(a,b){this.own(k(a,"ok",e.hitch(this,function(c){c&&0<c.length&&c[0].url&&this._requestExtractDataTaskURLInfo(c[0].url,b)})));this.own(k(a,"cancel",e.hitch(this,function(){b.close()})))},getExtractDataTaskURL:function(){return this._extractDataTaskURL?
this._extractDataTaskURL:""},_attachPrintReportGPSourceEvents:function(a,b){this.own(k(a,"ok",e.hitch(this,function(c){c&&0<c.length&&c[0].url?(this.printGPServiceTextBox.set("value",c[0].url),this._printTaskURL=c[0].url,this._clonedConfigurationCustomOptions=null,this._destroyLayouts(),this.loadingIndicator.show(),this._fetchChoiceList()):(this.printGPServiceTextBox.set("value",""),this._printTaskURL="");b.close()})));this.own(k(a,"cancel",e.hitch(this,function(){b.close()})))},_destroyLayouts:function(){l.empty(this.defaultLayoutTable);
l.empty(this.customLayoutTable);l.empty(this.defaultPrintTemplateDropdown);this._customLayoutTable=null;this._buddyTaskChoiceList={};this._customDropdownOption=[];this._printServiceChoiceList=[];this._defaultPrintTemplateDropdownOption=[];this._customLayoutTable&&l.destroy(this._customLayoutTable);this._defaultPrintTemplateDropdownOptionObj&&l.destroy(this._defaultPrintTemplateDropdownOptionObj.domNode);this._isCustomOptionNoDefault=!1},_initSyncEnableOptionTable:function(){this._syncEnableOptionTable=
new C({fields:[{name:this.nls.downloadTab.syncEnableTableHeaderTitle.layerNameLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.layerNameLabel,type:"empty",width:"40%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.csvFileFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.csvFileFormatLabel,"class":"esriCTTableHeader",type:"empty",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.fileGDBFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.fileGDBFormatLabel,
"class":"esriCTTableHeader",type:"empty",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.ShapefileFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.ShapefileFormatLabel,type:"empty","class":"esriCTTableHeader",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.allowDownloadLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.allowDownloadLabel,"class":"esriCTTableHeader",type:"empty",width:"15%"}],selectable:!1});this._syncEnableOptionTable.placeAt(this.downloadOptionTable);
this._syncEnableOptionTable.startup()},_setFileOptionDataInTable:function(a,b){var c=this._syncEnableOptionTable.addRow({});c.success&&c.tr&&this.checkLayerForDownloadOptions({url:a.url,id:a.id,layerName:a.layerName,allowDownload:a.allowDownload,layerVersion:b.version,capabilities:b.capabilities},c.tr.rowIndex)},checkLayerForDownloadOptions:function(a,b){var c=this._getTableRow(b);if(c.success&&c.tr){var d={url:a.url,layerName:a.layerName,id:a.id,allowDownload:a.hasOwnProperty("allowDownload")?a.allowDownload:
!0};this._addLayerTitle(c.tr,a.layerName);this._addFileOption(c.tr,1);d.downloadingFileOption=[];d.downloadingFileOption.push("csv");1<a.capabilities.split("Sync").length&&10.4<=a.layerVersion&&(this._addFileOption(c.tr,2),d.downloadingFileOption.push("filegdb"),p.isHostedService(a.url)&&(this._addFileOption(c.tr,3),d.downloadingFileOption.push("shapefile")));this._addAllowDownloadCheckbox(c.tr,d);this._setLayerDownloadInfo(d,b);this.loadingIndicator.hide()}},_getTableRow:function(a){-1<a&&this._syncEnableOptionTable.tbody.rows[a]?
(a={tr:this._syncEnableOptionTable.tbody.rows[a],success:!0},this._removeFileOptions(a.tr)):a=this._syncEnableOptionTable.addRow({});return a},_setLayerDownloadInfo:function(a,b){-1<b?this._layers.splice(b,1,a):this._layers.push(a)},_addLayerTitle:function(a,b){if(a=r(".simple-table-cell",a)[0])a.innerHTML=b},_removeFileOptions:function(a){var b;a=r(".simple-table-cell",a);for(b=1;4>b;b++)h.remove(a[b],"esriCTAvailableDownloadOption")},_addFileOption:function(a,b){(a=r(".simple-table-cell",a)[b])&&
h.add(a,"esriCTAvailableDownloadOption")},_addAllowDownloadCheckbox:function(a,b){if(a=r(".simple-table-cell",a)[4]){l.empty(a);var c=new K({checked:b.allowDownload,"class":"esriCTAllowDownloadCheckbox"});c.placeAt(a);this.own(k(c,"change",e.hitch(this,function(){b.allowDownload=B.get(c,"checked")})))}},_attachDownloadOptionEvent:function(){var a=r("input[type\x3dradio]:checked",this.downloadOptionForm)[0].value;var b=r("input",this.downloadOptionForm);f.forEach(b,e.hitch(this,function(c){this.own(k(c,
"click",e.hitch(this,function(d){c.value!==a&&(this._chooseDownloadOption(d.currentTarget.value,!1),a=d.currentTarget.value)})))}))},_chooseDownloadOption:function(a,b){switch(a){case "syncEnable":this.syncEnableRadioButton.set("checked",!0);h.remove(this.downloadOptionTable,"esriCTHidden");h.add(this.extractDataTaskInputContainer,"esriCTHidden");b&&this._resetExtractDataTaskOption(!0);break;case "extractDataTask":this.gpServiceRadioButton.set("checked",!0);h.add(this.downloadOptionTable,"esriCTHidden");
h.remove(this.extractDataTaskInputContainer,"esriCTHidden");b&&this.downloadOptions&&this.downloadOptions.extractDataTaskURL&&this._resetExtractDataTaskOption(!1);break;case "cannotDownload":this.cannotDownloadRadioButton.set("checked",!0),h.add(this.downloadOptionTable,"esriCTHidden"),h.add(this.extractDataTaskInputContainer,"esriCTHidden"),b&&this._resetExtractDataTaskOption(!0)}},getLayers:function(){return this._layers},deleteRow:function(a){this._syncEnableOptionTable.deleteRow(this._syncEnableOptionTable.tbody.rows[a]);
this._layers.splice(a,1)},rowUp:function(a){if(-1<a&&this._syncEnableOptionTable.tbody.rows[a+1]){x.place(this._syncEnableOptionTable.tbody.rows[a],this._syncEnableOptionTable.tbody.rows[a+1],"after");this._syncEnableOptionTable.updateUI();var b=this._layers[a];var c=this._layers[a+1];this._layers.splice(a,2,c,b)}},rowDown:function(a){if(a<this._syncEnableOptionTable.tbody.rows.length&&this._syncEnableOptionTable.tbody.rows[a-1]){x.place(this._syncEnableOptionTable.tbody.rows[a],this._syncEnableOptionTable.tbody.rows[a-
1],"before");this._syncEnableOptionTable.updateUI();var b=this._layers[a];var c=this._layers[a-1];this._layers.splice(a-1,2,b,c)}},_onSetButtonClick:function(a){return new L({titleLabel:this.nls.downloadTab.setGPTaskTitle,width:830,height:560,content:a})},_requestExtractDataTaskURLInfo:function(a,b){var c=!1;this.loadingIndicator.show();v({url:a+"?f\x3dpjson"}).then(e.hitch(this,function(d){(c=this._validateExtractDataTask(d))?(this.extractDataTaskTextBox.set("value",a),this._extractDataTaskURL=a):
(this._showMessage(this.nls.downloadTab.errorMessages.invalidGPTaskURL),this.extractDataTaskTextBox.set("value",""),this._extractDataTaskURL="");b.close();this.loadingIndicator.hide()}),e.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.invalidGPTaskURL);this.extractDataTaskTextBox.set("value","");this._extractDataTaskURL="";this.loadingIndicator.hide();b.close()}))},_validateExtractDataTask:function(a){var b,c;var d=b=c=!1;return a&&"esriExecutionTypeAsynchronous"===a.executionType&&
(f.forEach(a.parameters,e.hitch(this,function(g){switch(g.name){case "Area_of_Interest":d=this._checkAOIParam(g);break;case "Feature_Format":b=this._checkFeatureFormatParam(g);break;case "Output_Zip_File":c=this._checkOutputParam(g)}})),d&&b&&c)?!0:!1},_checkAOIParam:function(a){return"GPFeatureRecordSetLayer"===a.dataType?a.defaultValue&&"esriGeometryPolygon"!==a.defaultValue.geometryType?!1:!0:!1},_checkFeatureFormatParam:function(a){var b=!1;this._extractDataTaskDownloadOptions=[];return"GPString"===
a.dataType&&a.choiceList&&0<a.choiceList.length?(this._extractDataTaskDownloadOptions.push("csv"),-1<a.choiceList.indexOf("File Geodatabase - GDB - .gdb")&&(this._extractDataTaskDownloadOptions.push("filegdb"),b=!0),-1<a.choiceList.indexOf("Shapefile - SHP - .shp")&&(this._extractDataTaskDownloadOptions.push("shapefile"),b=!0),b):!1},_checkOutputParam:function(a){return"GPDataFile"===a.dataType?!0:!1},_showMessage:function(a){(new M({message:a})).message=a},getDownloadingFileOptions:function(){var a=
[];var b=r("input[type\x3dradio]:checked",this.downloadOptionForm)[0].value;"syncEnable"===b?a=this._getSyncEnableDownloadingOptions(this._layers):"extractDataTask"===b&&(a=this._extractDataTaskDownloadOptions);return a},_getSyncEnableDownloadingOptions:function(a){var b=[];f.some(a,e.hitch(this,function(c){c.allowDownload&&f.some(c.downloadingFileOption,e.hitch(this,function(d){-1===b.indexOf(d)&&b.push(d)}))}));return b},getPrintReportGPServiceURL:function(){return this._printTaskURL?this._printTaskURL:
""},getReportTitle:function(){return this.reportTitleTextBox.value},getNoDataText:function(){return this.noDataTextRepresentationTextBox.value},getNaTextValue:function(){return this.naTextRepresentationTextBox.value},getTableHeaderColor:function(){var a=this._tableHeaderColor.color.toHex();return a?a:""},getFootnoteForReport:function(){return this._footNoteEditorObj.focusNode.innerHTML?this._footNoteEditorObj.focusNode.innerHTML:""},_initImageChooser:function(){this.logoChooser=new y({cropImage:!1,
showSelfImg:!1,goldenWidth:50,goldenHeight:50,displayImg:this.imageChooserPreview,format:[y.GIF,y.PNG,y.JPEG]});this.logoChooser.placeAt(this.logoChooserNode);this._createLogoPreview();h.add(this.logoChooser.domNode,"esriCTImageChooserContent")},_createLogoPreview:function(){var a=this.folderUrl+"/images/default-logo.png";if(this.reportSettings&&this.reportSettings.logo){var b=this.reportSettings.logo;-1<b.indexOf("${appPath}")?(a=this.folderUrl.slice(0,this.folderUrl.lastIndexOf("widgets")),a=u.substitute(b,
{appPath:a})):a=b}B.set(this.imageChooserPreview,"src",a)},getLogo:function(){return this.logoChooser&&this.logoChooser.imageData?this.logoChooser.getImageData():this.reportSettings&&this.reportSettings.logo?this.reportSettings.logo:"${appPath}/widgets/Screening/images/default-logo.png"},_resetExtractDataTaskOption:function(a){a?(this.extractDataTaskTextBox.set("value",""),this._extractDataTaskURL="",this._extractDataTaskDownloadOptions=[]):(this.extractDataTaskTextBox.set("value",this.downloadOptions.extractDataTaskURL),
this._extractDataTaskURL=this.downloadOptions.extractDataTaskURL,this._extractDataTaskDownloadOptions=this.downloadOptions.downloadingFileOptions)},_createColorPicker:function(a,b){b=l.create("table",{cellspacing:"0",cellpadding:"0"},b);b=l.create("tr",{style:"height:30px"},b);l.create("td",{},b);b=l.create("td",{},b);b=l.create("div",{"class":"esriCTColorChooserNode"},b);b=new O(null,l.create("div",{},b));b.setColor(new I(a));return b},_addFieldsRow:function(a,b){var c=this._customLayoutTable.addRow({});
if(c.success&&c.tr){c=c.tr;var d=z(".simple-table-cell",c);var g=d[0];var t=d[1];var m=d[2];var n=d[3];d=a.Width;var q=a.Height;var S=null!==d&&""!==d&&void 0!==d||null!==q&&""!==q&&void 0!==q?a.PageUnits?a.PageUnits:null:null;this._displayLayout(g,c,a.SizeName);this._displayWidth(t,c,d,b);this._displayHeight(m,c,q,b);this._displayPageUnits(n,S,c)}},_emptyDefaultDropDown:function(){for(var a in this._defaultOptions)this._defaultOptions.hasOwnProperty(a)&&w.PageSizes[this._defaultOptions[a].SizeName]&&
this._defaultPrintTemplateDropdownOptionObj.removeOption({label:a,value:a})},_addOptionsInDefaultDropdown:function(){for(var a in this._defaultOptions)this._defaultOptions.hasOwnProperty(a)&&w.PageSizes[this._defaultOptions[a].SizeName]&&this._defaultPrintTemplateDropdownOptionObj.addOption({label:a,value:a});this._defaultPrintTemplateDropdownOptionObj.set("value","Letter ANSI A Portrait")},_removeCustomOptionFromDefaultDropdown:function(){f.forEach(this._customDropdownOption,e.hitch(this,function(a){this._defaultPrintTemplateDropdownOptionObj.removeOption({label:a.value,
value:a.value})}));this._defaultPrintTemplateDropdownOption=[];f.forEach(this._defaultPrintTemplateDropdownOptionObj.options,e.hitch(this,function(a){this._defaultPrintTemplateDropdownOption.push({label:a.value,value:a.value})}))},_addConfiguredCustomOptionInDefaultDropdown:function(){if(this._customLayoutTable){var a=this._customLayoutTable.getRows();f.forEach(a,e.hitch(this,function(b){var c=!1;p.has("ie")||p.has("edge")?f.forEach(this._defaultPrintTemplateDropdownOptionObj.options,e.hitch(this,
function(d){d.value===b.customOptionLayoutDropdownObj.value&&(c=!0)})):c=this._defaultPrintTemplateDropdownOptionObj.options.find(function(d){return d.value===b.customOptionLayoutDropdownObj.value});c||this._defaultPrintTemplateDropdownOptionObj.addOption({label:b.customOptionLayoutDropdownObj.value,value:b.customOptionLayoutDropdownObj.value})}))}},_displayLayout:function(a,b,c){c=new A({"class":"esriCTFieldChooserDropdown",options:e.clone(this._customDropdownOption),value:c});c.placeAt(a);this.own(k(c,
"MouseEnter",e.hitch(this,function(d){this._lastSelectedCustomDropdownRow=d.currentTarget.parentNode.parentNode})));this.own(k(c,"click",e.hitch(this,function(d){this._lastSelectedCustomDropdownRow=d.currentTarget.parentNode.parentNode})));this.own(k(c,"change",e.hitch(this,function(d){this._buddyTaskChoiceList[d]?this._lastSelectedCustomDropdownRow&&(this._lastSelectedCustomDropdownRow.customOptionHeightTextbox.set("value",this._buddyTaskChoiceList[d].pageSize[1]),this._lastSelectedCustomDropdownRow.customOptionWidthTextbox.set("value",
this._buddyTaskChoiceList[d].pageSize[0]),this._buddyTaskChoiceList[d].pageUnits?this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value",this._buddyTaskChoiceList[d].pageUnits):this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value","")):(this._lastSelectedCustomDropdownRow.customOptionHeightTextbox.set("value",""),this._lastSelectedCustomDropdownRow.customOptionWidthTextbox.set("value",""),this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value",
""));this._removeCustomOptionFromDefaultDropdown();this._addConfiguredCustomOptionInDefaultDropdown()})));c.startup();b.customOptionLayoutDropdownObj=c},_displayWidth:function(a,b,c,d){d||isNaN(parseFloat(c))||(c=parseFloat(c));c=new E({"class":"esriCTFieldValidationTextBox",regExp:"^\\d+(\\.\\d+)?$",invalidMessage:this.nls.downloadTab.errorMessages.invalidWidth,value:c,required:!0});c.placeAt(a);c.startup();b.customOptionWidthTextbox=c},_displayHeight:function(a,b,c,d){d||isNaN(parseFloat(c))||(c=
parseFloat(c));c=new E({"class":"esriCTFieldValidationTextBox",regExp:"^\\d+(\\.\\d+)?$",invalidMessage:this.nls.downloadTab.errorMessages.invalidHeight,value:c,required:!0});c.placeAt(a);c.startup();b.customOptionHeightTextbox=c},_displayPageUnits:function(a,b,c){b=new A({"class":"esriCTFieldChooserDropdown",options:e.clone(this._pageSize),required:!0,value:b});b.placeAt(a);b.startup();c.customOptionPageUnitsDropdownObj=b},_getDistinctFieldsOptionsObj:function(a){var b=[];f.forEach(a,e.hitch(this,
function(c){b.push({label:this._entireFieldObj[c].alias||this._entireFieldObj[c].name,value:c})}));return b},_addDefaultPrintTemplateOptions:function(){this._defaultPrintTemplateDropdownOptionObj=new A({"class":"esriCTFieldChooserDropdown",options:this._defaultPrintTemplateDropdownOption});this._defaultPrintTemplateDropdownOptionObj.placeAt(this.defaultPrintTemplateDropdown);this._defaultPrintTemplateDropdownOptionObj.startup();this._clonedConfigurationCustomOptions&&""!==this._clonedConfigurationCustomOptions.defaultPrintOption&&
null!==this._clonedConfigurationCustomOptions.defaultPrintOption&&void 0!==this._clonedConfigurationCustomOptions.defaultPrintOption?this._defaultPrintTemplateDropdownOptionObj.set("value",this._clonedConfigurationCustomOptions.defaultPrintOption):this._defaultPrintTemplateDropdownOptionObj.set("value","Letter ANSI A Portrait")},_disableAddCustomLayoutButton:function(){h.add(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable");h.add(this.addCustomOptionButtonIcon,"esriCTCustomOptionBtnAddIconDisable")},
_enableAddCustomLayoutButton:function(){h.remove(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable");h.remove(this.addCustomOptionButtonIcon,"esriCTCustomOptionBtnAddIconDisable")},_fetchChoiceList:function(){this.loadingIndicator.show();v({url:this._printTaskURL,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(e.hitch(this,function(a){this._extractChoiceList(a);this._createCustomOptionDropdownList();0<this._customDropdownOption.length?this._checkBuddyTask(a):(this._disableAddCustomLayoutButton(),
this._addDefaultPrintTemplateOptions(),this.loadingIndicator.hide())}),e.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchChoiceList);this.loadingIndicator.hide()}))},_extractChoiceList:function(a){f.forEach(a.parameters,e.hitch(this,function(b){"Layout_Template"===b.name&&"Layout Template"===b.displayName&&(this._printServiceChoiceList=b.choiceList)}))},_checkBuddyTask:function(){v({url:this._printTaskURL.slice(0,this._printTaskURL.lastIndexOf("/")),content:{f:"json"},
handleAs:"json",callbackParamName:"callback"}).then(e.hitch(this,function(a){if(1<a.tasks.length){for(var b,c=0;c<a.tasks.length;c++)if(-1!==this._buddyTaskEndPoint.indexOf(a.tasks[c])){b=a.tasks[c];break}b?this._executeBuddyTaskSync(b):(0<this._customDropdownOption.length?(this._enableAddCustomLayoutButton(),this._displayChoiceList()):this._disableAddCustomLayoutButton(),this.loadingIndicator.hide())}else 0<this._customDropdownOption.length?(this._enableAddCustomLayoutButton(),this._displayChoiceList()):
(this._disableAddCustomLayoutButton(),this._addDefaultPrintTemplateOptions()),this.loadingIndicator.hide()}),e.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchbuddyTaskName);this.loadingIndicator.hide()}))},_executeBuddyTaskSync:function(a){v({url:this._printTaskURL.slice(0,this._printTaskURL.lastIndexOf("/"))+"/"+a+"/execute",content:{f:"json",outSR:102100},handleAs:"json",callbackParamName:"callback"}).then(e.hitch(this,function(b){0<b.results[0].value.length?
(this._enableAddCustomLayoutButton(),f.forEach(b.results[0].value,e.hitch(this,function(c){this._buddyTaskChoiceList[c.layoutTemplate]=c})),this._displayChoiceList()):this._disableAddCustomLayoutButton();this.loadingIndicator.hide()}),e.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchbuddyTaskDimension);this.loadingIndicator.hide()}))},_displayChoiceList:function(){this._createCustomLayoutTable();this._clonedConfigurationCustomOptions&&this._clonedConfigurationCustomOptions.customOptions&&
0<this._clonedConfigurationCustomOptions.customOptions.length&&this._addConfiguredCustomOptionsInTable();this._addDefaultPrintTemplateOptions()},_createCustomLayoutTable:function(){this._customLayoutTable=new C({fields:[{name:"field",title:"Layout",type:"empty",editable:"false",width:"40%"},{name:"field",title:"Width",type:"empty",editable:"true",width:"15%"},{name:"field",title:"Height",type:"empty",editable:"true",width:"15%"},{name:"field",title:"Page Units",type:"empty",editable:"false",width:"20%"},
{name:"actions",title:this.nls.common.actions,"class":"actions",type:"actions",actions:["up","down","delete"],width:"10%"}]});this._customLayoutTable.placeAt(this.customLayoutTable);x.setStyle(this._customLayoutTable.domNode,{height:"100%"});this._customLayoutTable.startup();this.own(k(this._customLayoutTable,"row-delete",e.hitch(this,function(){this._removeCustomOptionFromDefaultDropdown();0===this._customLayoutTable.getRows().length&&this._isCustomOptionNoDefault&&this._addOptionsInDefaultDropdown();
this._addConfiguredCustomOptionInDefaultDropdown()})))},_addConfiguredCustomOptionsInTable:function(){f.forEach(this._clonedConfigurationCustomOptions.customOptions,e.hitch(this,function(a){this._addFieldsRow(a,!0)}))},_addCustomOptionsInTable:function(){var a=this._customDropdownOption[0].value,b,c;var d=c=null;var g=this._pageSize[0].value;this._buddyTaskChoiceList[a]&&(c=this._buddyTaskChoiceList[a].pageSize[1],d=this._buddyTaskChoiceList[a].pageSize[0],this._buddyTaskChoiceList[a]&&this._buddyTaskChoiceList[a].pageUnits&&
(g=this._buddyTaskChoiceList[a].pageUnits));var t={};t[a]={Height:c,Width:d,SizeName:a,MapLayout:a,PageUnits:g};this._addFieldsRow(t[a],!1);p.has("ie")||p.has("edge")?f.forEach(this._defaultPrintTemplateDropdownOptionObj.options,e.hitch(this,function(m){m.value===a&&(b=m)})):b=this._defaultPrintTemplateDropdownOptionObj.options.find(function(m){return m.value===a});b||this._defaultPrintTemplateDropdownOptionObj.addOption({label:a,value:a,selected:!1})},_createCustomOptionDropdownList:function(){var a=
!1;f.forEach(this._printServiceChoiceList,e.hitch(this,function(c){var d=e.clone(c);if("MAP_ONLY"!==d){if(this._defaultOptions[d]){a=!0;var g=this._defaultOptions[d];this._defaultPrintTemplateDropdownOption.push({label:w.PageSizes[g.SizeName].SizeName+" "+w.Orientation[g.Orientation].Text,value:c})}this._defaultOptions[d]||this._customDropdownOption.push({value:d,label:d})}}));this._clonedConfigurationCustomOptions&&f.forEach(this._clonedConfigurationCustomOptions.customOptions,e.hitch(this,function(c){this._defaultPrintTemplateDropdownOption.push({label:c.SizeName,
value:c.SizeName})}));if(!(a||(0<this._customDropdownOption.length&&(this._isCustomOptionNoDefault=!0),this._clonedConfigurationCustomOptions&&this._clonedConfigurationCustomOptions.customOptions&&0<this._clonedConfigurationCustomOptions.customOptions.length)))for(var b in this._defaultOptions)this._defaultOptions.hasOwnProperty(b)&&w.PageSizes[this._defaultOptions[b].SizeName]&&this._defaultPrintTemplateDropdownOption.push({label:b,value:b})},getCustomOptions:function(){var a=[];if(this._customLayoutTable){var b=
this._customLayoutTable.getRows();f.forEach(b,e.hitch(this,function(c){a.push({SizeName:c.customOptionLayoutDropdownObj.value,Width:c.customOptionWidthTextbox.getValue(),Height:c.customOptionHeightTextbox.getValue(),MapLayout:c.customOptionLayoutDropdownObj.value,PageUnits:c.customOptionPageUnitsDropdownObj.value})}))}return a},validateCustomOptions:function(){var a=[];if(this._customLayoutTable){var b=this._customLayoutTable.getRows();f.forEach(b,e.hitch(this,function(c){c.customOptionWidthTextbox.isValid()||
a.push(u.substitute(this.nls.downloadTab.errorMessages.invalidLayoutWidth,{customLayoutOptionValue:c.customOptionLayoutDropdownObj.value}));c.customOptionHeightTextbox.isValid()||a.push(u.substitute(this.nls.downloadTab.errorMessages.invalidLayoutHeight,{customLayoutOptionValue:c.customOptionLayoutDropdownObj.value}));c.customOptionPageUnitsDropdownObj.isValid()||a.push(u.substitute(this.nls.downloadTab.errorMessages.invalidLayoutPageUnits,{customLayoutOptionValue:c.customOptionLayoutDropdownObj.value}))}))}if(0<
a.length)return a;f.forEach(b,e.hitch(this,function(c){a.push({SizeName:c.customOptionLayoutDropdownObj.value})}));(b=this._getDuplicateValue(a))&&0<b.length?(a=[],a.push(u.substitute(this.nls.downloadTab.errorMessages.duplicateCustomOption,{duplicateValueSizeName:b[0].SizeName}))):a=[];return a},_getDuplicateValue:function(a){var b=0,c=a.length;for(b;b<c;b++){var d=a[b];var g=p.has("ie")||p.has("edge")?Object.create(a):Object.assign([],a);g.splice(b,1);d=this._filterArray(g,d);if(0<d.length)break}return d},
_filterArray:function(a,b){return a.filter(function(c){return Object.keys(b).every(function(d){return c[d]===b[d]})})},getDefaultPrintOption:function(){return this._defaultPrintTemplateDropdownOptionObj.value},closeDownloadTabDropdowns:function(){this._defaultPrintTemplateDropdownOptionObj&&this._defaultPrintTemplateDropdownOptionObj.closeDropDown();if(this._customLayoutTable){var a=this._customLayoutTable.getRows();f.forEach(a,e.hitch(this,function(b){b.customOptionLayoutDropdownObj.closeDropDown();
b.customOptionPageUnitsDropdownObj.closeDropDown()}))}},_initEditor:function(){this._initEditorPluginsCSS();this._footNoteEditorObj=new Q({plugins:"undo redo | cut copy paste selectAll | bold italic underline | foreColor | insertHorizontalRule removeFormat delete |".split(" "),extraPlugins:["createLink","unlink",{name:"dijit._editor.plugins.FontChoice",command:"fontName",custom:"Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";")},"fontSize"],style:"font-family:Verdana;"},
this.footNoteEditor);x.setStyle(this._footNoteEditorObj.domNode,{width:"100%",height:"100%"});this._footNoteEditorObj.startup();8!==R("ie")&&this._footNoteEditorObj.resize({w:"100%",h:"100%"})},_initEditorPluginsCSS:function(){var a=document.getElementsByTagName("head")[0],b=window.apiUrl+"dojox/editor/plugins/resources/css/TextColor.css";z('link[href\x3d"'+b+'"]',a)[0]||p.loadStyleLink("editor_plugins_resources_TextColor",b);b=window.apiUrl+"dojox/editor/plugins/resources/editorPlugins.css";z('link[href\x3d"'+
b+'"]',a)[0]||p.loadStyleLink("editor_plugins_resources_editorPlugins",b);b=window.apiUrl+"dojox/editor/plugins/resources/css/PasteFromWord.css";z('link[href\x3d"'+b+'"]',a)[0]||p.loadStyleLink("editor_plugins_resources_PasteFromWord",b)},getDisplaySummaryCheckBoxStatus:function(){return this.displaySummaryInReportCheckBox.get("checked")},getRowshavingAllZeroValueCheckBoxStatus:function(){return this.hideAllZeroRowCheckBox.get("checked")},getRowshavingAllNullValueCheckBoxStatus:function(){return this.hideNullRowCheckBox.get("checked")}})});