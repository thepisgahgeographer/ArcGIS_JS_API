// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Screening/setting/SymbolChooserPopup":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/text!./SymbolChooserPopup.html jimu/dijit/SymbolChooser jimu/dijit/Popup dojo/domReady!".split(" "),function(x,E,K,J,w,a,b,c,f,k){return x([E,K],{templateString:c,baseClass:"jimu-widget-screening-setting",postCreate:function(){this.own(b(this.okButton,"click",J.hitch(this,this._onOKButtonClicked)));
this._initSymbolChooser();this._createSymbolChooserPopup()},_initSymbolChooser:function(){this.symbolChooser=new f(this.symbolParams,a.create("div",{},this.symbolData));this.symbolChooser.startup()},_createSymbolChooserPopup:function(){this.popup=new k({titleLabel:this.symbolChooserTitle,width:420,height:400,content:this.domNode})},_onOKButtonClicked:function(){if(!w.contains(this.okButton,"jimu-state-disabled"))this.onOkClick()},onOkClick:function(q){return q}})})},"widgets/Screening/setting/DownloadSettings":function(){define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dojo/text!./DownloadSettings.html dojo/dom-class dojo/_base/lang dojo/on dojo/query dojo/dom-attr dojo/_base/html dojo/dom-construct dojo/string dojo/_base/Color jimu/BaseWidgetSetting jimu/dijit/CheckBox jimu/dijit/SimpleTable jimu/dijit/GpSource jimu/dijit/Popup jimu/dijit/Message jimu/dijit/ImageChooser jimu/portalUtils jimu/dijit/ColorPicker esri/request dojo/query dijit/form/Select dijit/form/ValidationTextBox dojo/_base/array jimu/dijit/PageUtils jimu/utils dojo/DeferredList dijit/Editor dojo/sniff dijit/form/RadioButton dijit/_editor/plugins/LinkDialog dijit/_editor/plugins/ViewSource dijit/_editor/plugins/FontChoice dojox/editor/plugins/Preview dijit/_editor/plugins/TextColor dojox/editor/plugins/ToolbarLineBreak dijit/ToolbarSeparator dojox/editor/plugins/FindReplace dojox/editor/plugins/PasteFromWord dojox/editor/plugins/InsertAnchor dojox/editor/plugins/Blockquote dojox/editor/plugins/UploadImage jimu/dijit/EditorChooseImage jimu/dijit/EditorTextColor jimu/dijit/EditorBackgroundColor".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F,d,l,u,I,m,g,A,D,N,O,L,z,C,Q,S,p){return x([t,E],{templateString:K,baseClass:"jimu-widget-screening-download-settings",map:null,loadingIndicator:null,downloadOptions:null,_layerIndex:0,_layers:[],_extractDataTaskDownloadOptions:[],_extractDataTaskURL:"",_printTaskURL:"",_logo:"",_tableHeaderColor:null,_defaultOptions:{"A3 Portrait":{Orientation:"Portrait",SizeName:"A3"},"A3 Landscape":{Orientation:"Landscape",SizeName:"A3"},"A4 Portrait":{Orientation:"Portrait",
SizeName:"A4"},"A4 Landscape":{Orientation:"Landscape",SizeName:"A4"},"Letter ANSI A Portrait":{Orientation:"Portrait",SizeName:"Letter_ANSI_A"},"Letter ANSI A Landscape":{Orientation:"Landscape",SizeName:"Letter_ANSI_A"},"Tabloid ANSI B Portrait":{Orientation:"Portrait",SizeName:"Tabloid_ANSI_B"},"Tabloid ANSI B Landscape":{Orientation:"Landscape",SizeName:"Tabloid_ANSI_B"}},_pageSize:[],_customLayoutTable:null,_buddyTaskChoiceList:{},_customDropdownOption:[],_defaultPrintTemplateDropdownOption:[],
_printServiceChoiceList:[],_defaultPrintTemplateDropdownOptionObj:null,_clonedConfigurationCustomOptions:null,_buddyTaskEndPoint:["Get Layout Templates Info","Get Layout Templates Info Task"],_lastSelectedCustomDropdownRow:null,_isCustomOptionNoDefault:!1,_footNoteEditorObj:null,constructor:function(e){this.downloadOptions=this.loadingIndicator=this.map=null;this._layerIndex=0;this._layers=[];this._extractDataTaskDownloadOptions=[];this._logo=this._printTaskURL=this._extractDataTaskURL="";this._customLayoutTable=
this._tableHeaderColor=null;this._buddyTaskChoiceList={};this._customDropdownOption=[];this._defaultPrintTemplateDropdownOption=[];this._printServiceChoiceList=[];this._lastSelectedCustomDropdownRow=this._clonedConfigurationCustomOptions=this._defaultPrintTemplateDropdownOptionObj=null;w.mixin(this,e)},postCreate:function(){this._initEditor();this._pageSize=[{value:null,label:null},{value:"MILLIMETER",label:this.nls.downloadTab.pageSizeUnits.millimeters},{value:"INCH",label:this.nls.units.inches},
{value:"POINT",label:this.nls.downloadTab.pageSizeUnits.points},{value:"CENTIMETER",label:this.nls.units.centimeters}];var e,v,h,r;this._initSyncEnableOptionTable();this._syncEnableOptionTable&&(this._layers=[],this._syncEnableOptionTable.clear());if(this.downloadOptions&&this.downloadOptions.layers){this._layers=this.downloadOptions.layers;var H=[];L.forEach(this.downloadOptions.layers,w.hitch(this,function(P){P=A({url:P.url+"?f\x3dpjson"});H.push(P)}));(new Q(H)).then(w.hitch(this,function(P){L.forEach(P,
w.hitch(this,function(y,G){y[0]?(y={version:y[1].currentVersion,capabilities:y[1].capabilities},this.downloadOptions.layers[G]&&this._setFileOptionDataInTable(this.downloadOptions.layers[G],y)):y[1].name&&"Error"===y[1].name||(y={version:this.layerInfosObj.getLayerInfoById(this.downloadOptions.layers[G].id).layerObject.version,capabilities:""},this._setFileOptionDataInTable(this.downloadOptions.layers[G],y))}))}))}this.downloadOptions&&this.downloadOptions.type?this._chooseDownloadOption(this.downloadOptions.type,
!0):this.syncEnableRadioButton.set("checked",!0);this._attachDownloadOptionEvent();this.reportSettings&&this.reportSettings.printTaskURL&&""!==this.reportSettings.printTaskURL?(this.printGPServiceTextBox.set("value",this.reportSettings.printTaskURL),this._printTaskURL=this.reportSettings.printTaskURL):(r=m.getPortal(this.appConfig.portalUrl).helperServices)&&r.printTask.url&&(this.printGPServiceTextBox.set("value",r.printTask.url),this._printTaskURL=r.printTask.url);this.reportSettings&&this.reportSettings.footnote&&
""!==this.reportSettings.footnote&&this._footNoteEditorObj.set("value",this.reportSettings.footnote);var M={portalUrl:this.appConfig.portalUrl};this.own(a(this.extractDataTaskSetButton,"click",w.hitch(this,function(){e=new d(M);h=this._onSetButtonClick(e);this._attachExtractDataTaskGPSourceEvents(e,h)})));this.own(a(this.printGPServiceSetButton,"click",w.hitch(this,function(){v=new d(M);h=this._onSetButtonClick(v);this._attachPrintReportGPSourceEvents(v,h)})));this._initImageChooser();this._tableHeaderColor=
this._createColorPicker(this.reportSettings.columnTitleColor,this.columnTitleColorPickerNode);this.reportSettings.hasOwnProperty("noDataConfiguredText")&&this.noDataTextRepresentationTextBox.set("value",this.reportSettings.noDataConfiguredText);this.reportSettings.hasOwnProperty("naTextConfiguredValue")&&this.naTextRepresentationTextBox.set("value",this.reportSettings.naTextConfiguredValue);this.reportSettings.hasOwnProperty("displaySummaryInReport")&&this.displaySummaryInReportCheckBox.setValue(this.reportSettings.displaySummaryInReport);
this.reportSettings.hasOwnProperty("hideZeroValueRow")&&this.hideAllZeroRowCheckBox.setValue(this.reportSettings.hideZeroValueRow);this.reportSettings.hasOwnProperty("hideNullValueRow")&&this.hideNullRowCheckBox.setValue(this.reportSettings.hideNullValueRow);this.reportTitleTextBox.set("value",this.reportSettings.reportTitle);this.own(a(this.addCustomOptionButton,"click",w.hitch(this,function(){J.contains(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable")||(this._isCustomOptionNoDefault&&
this._emptyDefaultDropDown(),this._addCustomOptionsInTable())})));this._clonedConfigurationCustomOptions=w.clone(this.reportSettings);this._destroyLayouts();this.loadingIndicator.show();this._fetchChoiceList()},_attachExtractDataTaskGPSourceEvents:function(e,v){this.own(a(e,"ok",w.hitch(this,function(h){h&&0<h.length&&h[0].url&&this._requestExtractDataTaskURLInfo(h[0].url,v)})));this.own(a(e,"cancel",w.hitch(this,function(){v.close()})))},getExtractDataTaskURL:function(){return this._extractDataTaskURL?
this._extractDataTaskURL:""},_attachPrintReportGPSourceEvents:function(e,v){this.own(a(e,"ok",w.hitch(this,function(h){h&&0<h.length&&h[0].url?(this.printGPServiceTextBox.set("value",h[0].url),this._printTaskURL=h[0].url,this._clonedConfigurationCustomOptions=null,this._destroyLayouts(),this.loadingIndicator.show(),this._fetchChoiceList()):(this.printGPServiceTextBox.set("value",""),this._printTaskURL="");v.close()})));this.own(a(e,"cancel",w.hitch(this,function(){v.close()})))},_destroyLayouts:function(){k.empty(this.defaultLayoutTable);
k.empty(this.customLayoutTable);k.empty(this.defaultPrintTemplateDropdown);this._customLayoutTable=null;this._buddyTaskChoiceList={};this._customDropdownOption=[];this._printServiceChoiceList=[];this._defaultPrintTemplateDropdownOption=[];this._customLayoutTable&&k.destroy(this._customLayoutTable);this._defaultPrintTemplateDropdownOptionObj&&k.destroy(this._defaultPrintTemplateDropdownOptionObj.domNode);this._isCustomOptionNoDefault=!1},_initSyncEnableOptionTable:function(){this._syncEnableOptionTable=
new F({fields:[{name:this.nls.downloadTab.syncEnableTableHeaderTitle.layerNameLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.layerNameLabel,type:"empty",width:"40%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.csvFileFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.csvFileFormatLabel,"class":"esriCTTableHeader",type:"empty",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.fileGDBFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.fileGDBFormatLabel,
"class":"esriCTTableHeader",type:"empty",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.ShapefileFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.ShapefileFormatLabel,type:"empty","class":"esriCTTableHeader",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.allowDownloadLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.allowDownloadLabel,"class":"esriCTTableHeader",type:"empty",width:"15%"}],selectable:!1});this._syncEnableOptionTable.placeAt(this.downloadOptionTable);
this._syncEnableOptionTable.startup()},_setFileOptionDataInTable:function(e,v){var h=this._syncEnableOptionTable.addRow({});h.success&&h.tr&&this.checkLayerForDownloadOptions({url:e.url,id:e.id,layerName:e.layerName,allowDownload:e.allowDownload,layerVersion:v.version,capabilities:v.capabilities},h.tr.rowIndex)},checkLayerForDownloadOptions:function(e,v){var h=this._getTableRow(v);if(h.success&&h.tr){var r={url:e.url,layerName:e.layerName,id:e.id,allowDownload:e.hasOwnProperty("allowDownload")?e.allowDownload:
!0};this._addLayerTitle(h.tr,e.layerName);this._addFileOption(h.tr,1);r.downloadingFileOption=[];r.downloadingFileOption.push("csv");1<e.capabilities.split("Sync").length&&10.4<=e.layerVersion&&(this._addFileOption(h.tr,2),r.downloadingFileOption.push("filegdb"),C.isHostedService(e.url)&&(this._addFileOption(h.tr,3),r.downloadingFileOption.push("shapefile")));this._addAllowDownloadCheckbox(h.tr,r);this._setLayerDownloadInfo(r,v);this.loadingIndicator.hide()}},_getTableRow:function(e){-1<e&&this._syncEnableOptionTable.tbody.rows[e]?
(e={tr:this._syncEnableOptionTable.tbody.rows[e],success:!0},this._removeFileOptions(e.tr)):e=this._syncEnableOptionTable.addRow({});return e},_setLayerDownloadInfo:function(e,v){-1<v?this._layers.splice(v,1,e):this._layers.push(e)},_addLayerTitle:function(e,v){if(e=b(".simple-table-cell",e)[0])e.innerHTML=v},_removeFileOptions:function(e){var v;e=b(".simple-table-cell",e);for(v=1;4>v;v++)J.remove(e[v],"esriCTAvailableDownloadOption")},_addFileOption:function(e,v){(e=b(".simple-table-cell",e)[v])&&
J.add(e,"esriCTAvailableDownloadOption")},_addAllowDownloadCheckbox:function(e,v){if(e=b(".simple-table-cell",e)[4]){k.empty(e);var h=new B({checked:v.allowDownload,"class":"esriCTAllowDownloadCheckbox"});h.placeAt(e);this.own(a(h,"change",w.hitch(this,function(){v.allowDownload=c.get(h,"checked")})))}},_attachDownloadOptionEvent:function(){var e=b("input[type\x3dradio]:checked",this.downloadOptionForm)[0].value;var v=b("input",this.downloadOptionForm);L.forEach(v,w.hitch(this,function(h){this.own(a(h,
"click",w.hitch(this,function(r){h.value!==e&&(this._chooseDownloadOption(r.currentTarget.value,!1),e=r.currentTarget.value)})))}))},_chooseDownloadOption:function(e,v){switch(e){case "syncEnable":this.syncEnableRadioButton.set("checked",!0);J.remove(this.downloadOptionTable,"esriCTHidden");J.add(this.extractDataTaskInputContainer,"esriCTHidden");v&&this._resetExtractDataTaskOption(!0);break;case "extractDataTask":this.gpServiceRadioButton.set("checked",!0);J.add(this.downloadOptionTable,"esriCTHidden");
J.remove(this.extractDataTaskInputContainer,"esriCTHidden");v&&this.downloadOptions&&this.downloadOptions.extractDataTaskURL&&this._resetExtractDataTaskOption(!1);break;case "cannotDownload":this.cannotDownloadRadioButton.set("checked",!0),J.add(this.downloadOptionTable,"esriCTHidden"),J.add(this.extractDataTaskInputContainer,"esriCTHidden"),v&&this._resetExtractDataTaskOption(!0)}},getLayers:function(){return this._layers},deleteRow:function(e){this._syncEnableOptionTable.deleteRow(this._syncEnableOptionTable.tbody.rows[e]);
this._layers.splice(e,1)},rowUp:function(e){if(-1<e&&this._syncEnableOptionTable.tbody.rows[e+1]){f.place(this._syncEnableOptionTable.tbody.rows[e],this._syncEnableOptionTable.tbody.rows[e+1],"after");this._syncEnableOptionTable.updateUI();var v=this._layers[e];var h=this._layers[e+1];this._layers.splice(e,2,h,v)}},rowDown:function(e){if(e<this._syncEnableOptionTable.tbody.rows.length&&this._syncEnableOptionTable.tbody.rows[e-1]){f.place(this._syncEnableOptionTable.tbody.rows[e],this._syncEnableOptionTable.tbody.rows[e-
1],"before");this._syncEnableOptionTable.updateUI();var v=this._layers[e];var h=this._layers[e-1];this._layers.splice(e-1,2,v,h)}},_onSetButtonClick:function(e){return new l({titleLabel:this.nls.downloadTab.setGPTaskTitle,width:830,height:560,content:e})},_requestExtractDataTaskURLInfo:function(e,v){var h=!1;this.loadingIndicator.show();A({url:e+"?f\x3dpjson"}).then(w.hitch(this,function(r){(h=this._validateExtractDataTask(r))?(this.extractDataTaskTextBox.set("value",e),this._extractDataTaskURL=e):
(this._showMessage(this.nls.downloadTab.errorMessages.invalidGPTaskURL),this.extractDataTaskTextBox.set("value",""),this._extractDataTaskURL="");v.close();this.loadingIndicator.hide()}),w.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.invalidGPTaskURL);this.extractDataTaskTextBox.set("value","");this._extractDataTaskURL="";this.loadingIndicator.hide();v.close()}))},_validateExtractDataTask:function(e){var v,h;var r=v=h=!1;return e&&"esriExecutionTypeAsynchronous"===e.executionType&&
(L.forEach(e.parameters,w.hitch(this,function(H){switch(H.name){case "Area_of_Interest":r=this._checkAOIParam(H);break;case "Feature_Format":v=this._checkFeatureFormatParam(H);break;case "Output_Zip_File":h=this._checkOutputParam(H)}})),r&&v&&h)?!0:!1},_checkAOIParam:function(e){return"GPFeatureRecordSetLayer"===e.dataType?e.defaultValue&&"esriGeometryPolygon"!==e.defaultValue.geometryType?!1:!0:!1},_checkFeatureFormatParam:function(e){var v=!1;this._extractDataTaskDownloadOptions=[];return"GPString"===
e.dataType&&e.choiceList&&0<e.choiceList.length?(this._extractDataTaskDownloadOptions.push("csv"),-1<e.choiceList.indexOf("File Geodatabase - GDB - .gdb")&&(this._extractDataTaskDownloadOptions.push("filegdb"),v=!0),-1<e.choiceList.indexOf("Shapefile - SHP - .shp")&&(this._extractDataTaskDownloadOptions.push("shapefile"),v=!0),v):!1},_checkOutputParam:function(e){return"GPDataFile"===e.dataType?!0:!1},_showMessage:function(e){(new u({message:e})).message=e},getDownloadingFileOptions:function(){var e=
[];var v=b("input[type\x3dradio]:checked",this.downloadOptionForm)[0].value;"syncEnable"===v?e=this._getSyncEnableDownloadingOptions(this._layers):"extractDataTask"===v&&(e=this._extractDataTaskDownloadOptions);return e},_getSyncEnableDownloadingOptions:function(e){var v=[];L.some(e,w.hitch(this,function(h){h.allowDownload&&L.some(h.downloadingFileOption,w.hitch(this,function(r){-1===v.indexOf(r)&&v.push(r)}))}));return v},getPrintReportGPServiceURL:function(){return this._printTaskURL?this._printTaskURL:
""},getReportTitle:function(){return this.reportTitleTextBox.value},getNoDataText:function(){return this.noDataTextRepresentationTextBox.value},getNaTextValue:function(){return this.naTextRepresentationTextBox.value},getTableHeaderColor:function(){var e=this._tableHeaderColor.color.toHex();return e?e:""},getFootnoteForReport:function(){return this._footNoteEditorObj.focusNode.innerHTML?this._footNoteEditorObj.focusNode.innerHTML:""},_initImageChooser:function(){this.logoChooser=new I({cropImage:!1,
showSelfImg:!1,goldenWidth:50,goldenHeight:50,displayImg:this.imageChooserPreview,format:[I.GIF,I.PNG,I.JPEG]});this.logoChooser.placeAt(this.logoChooserNode);this._createLogoPreview();J.add(this.logoChooser.domNode,"esriCTImageChooserContent")},_createLogoPreview:function(){var e=this.folderUrl+"/images/default-logo.png";if(this.reportSettings&&this.reportSettings.logo){var v=this.reportSettings.logo;-1<v.indexOf("${appPath}")?(e=this.folderUrl.slice(0,this.folderUrl.lastIndexOf("widgets")),e=q.substitute(v,
{appPath:e})):e=v}c.set(this.imageChooserPreview,"src",e)},getLogo:function(){return this.logoChooser&&this.logoChooser.imageData?this.logoChooser.getImageData():this.reportSettings&&this.reportSettings.logo?this.reportSettings.logo:"${appPath}/widgets/Screening/images/default-logo.png"},_resetExtractDataTaskOption:function(e){e?(this.extractDataTaskTextBox.set("value",""),this._extractDataTaskURL="",this._extractDataTaskDownloadOptions=[]):(this.extractDataTaskTextBox.set("value",this.downloadOptions.extractDataTaskURL),
this._extractDataTaskURL=this.downloadOptions.extractDataTaskURL,this._extractDataTaskDownloadOptions=this.downloadOptions.downloadingFileOptions)},_createColorPicker:function(e,v){v=k.create("table",{cellspacing:"0",cellpadding:"0"},v);v=k.create("tr",{style:"height:30px"},v);k.create("td",{},v);v=k.create("td",{},v);v=k.create("div",{"class":"esriCTColorChooserNode"},v);v=new g(null,k.create("div",{},v));v.setColor(new n(e));return v},_addFieldsRow:function(e,v){var h=this._customLayoutTable.addRow({});
if(h.success&&h.tr){h=h.tr;var r=D(".simple-table-cell",h);var H=r[0];var M=r[1];var P=r[2];var y=r[3];r=e.Width;var G=e.Height;var R=null!==r&&""!==r&&void 0!==r||null!==G&&""!==G&&void 0!==G?e.PageUnits?e.PageUnits:null:null;this._displayLayout(H,h,e.SizeName);this._displayWidth(M,h,r,v);this._displayHeight(P,h,G,v);this._displayPageUnits(y,R,h)}},_emptyDefaultDropDown:function(){for(var e in this._defaultOptions)this._defaultOptions.hasOwnProperty(e)&&z.PageSizes[this._defaultOptions[e].SizeName]&&
this._defaultPrintTemplateDropdownOptionObj.removeOption({label:e,value:e})},_addOptionsInDefaultDropdown:function(){for(var e in this._defaultOptions)this._defaultOptions.hasOwnProperty(e)&&z.PageSizes[this._defaultOptions[e].SizeName]&&this._defaultPrintTemplateDropdownOptionObj.addOption({label:e,value:e});this._defaultPrintTemplateDropdownOptionObj.set("value","Letter ANSI A Portrait")},_removeCustomOptionFromDefaultDropdown:function(){L.forEach(this._customDropdownOption,w.hitch(this,function(e){this._defaultPrintTemplateDropdownOptionObj.removeOption({label:e.value,
value:e.value})}));this._defaultPrintTemplateDropdownOption=[];L.forEach(this._defaultPrintTemplateDropdownOptionObj.options,w.hitch(this,function(e){this._defaultPrintTemplateDropdownOption.push({label:e.value,value:e.value})}))},_addConfiguredCustomOptionInDefaultDropdown:function(){if(this._customLayoutTable){var e=this._customLayoutTable.getRows();L.forEach(e,w.hitch(this,function(v){var h=!1;C.has("ie")||C.has("edge")?L.forEach(this._defaultPrintTemplateDropdownOptionObj.options,w.hitch(this,
function(r){r.value===v.customOptionLayoutDropdownObj.value&&(h=!0)})):h=this._defaultPrintTemplateDropdownOptionObj.options.find(function(r){return r.value===v.customOptionLayoutDropdownObj.value});h||this._defaultPrintTemplateDropdownOptionObj.addOption({label:v.customOptionLayoutDropdownObj.value,value:v.customOptionLayoutDropdownObj.value})}))}},_displayLayout:function(e,v,h){h=new N({"class":"esriCTFieldChooserDropdown",options:w.clone(this._customDropdownOption),value:h});h.placeAt(e);this.own(a(h,
"MouseEnter",w.hitch(this,function(r){this._lastSelectedCustomDropdownRow=r.currentTarget.parentNode.parentNode})));this.own(a(h,"click",w.hitch(this,function(r){this._lastSelectedCustomDropdownRow=r.currentTarget.parentNode.parentNode})));this.own(a(h,"change",w.hitch(this,function(r){this._buddyTaskChoiceList[r]?this._lastSelectedCustomDropdownRow&&(this._lastSelectedCustomDropdownRow.customOptionHeightTextbox.set("value",this._buddyTaskChoiceList[r].pageSize[1]),this._lastSelectedCustomDropdownRow.customOptionWidthTextbox.set("value",
this._buddyTaskChoiceList[r].pageSize[0]),this._buddyTaskChoiceList[r].pageUnits?this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value",this._buddyTaskChoiceList[r].pageUnits):this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value","")):(this._lastSelectedCustomDropdownRow.customOptionHeightTextbox.set("value",""),this._lastSelectedCustomDropdownRow.customOptionWidthTextbox.set("value",""),this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value",
""));this._removeCustomOptionFromDefaultDropdown();this._addConfiguredCustomOptionInDefaultDropdown()})));h.startup();v.customOptionLayoutDropdownObj=h},_displayWidth:function(e,v,h,r){r||isNaN(parseFloat(h))||(h=parseFloat(h));h=new O({"class":"esriCTFieldValidationTextBox",regExp:"^\\d+(\\.\\d+)?$",invalidMessage:this.nls.downloadTab.errorMessages.invalidWidth,value:h,required:!0});h.placeAt(e);h.startup();v.customOptionWidthTextbox=h},_displayHeight:function(e,v,h,r){r||isNaN(parseFloat(h))||(h=
parseFloat(h));h=new O({"class":"esriCTFieldValidationTextBox",regExp:"^\\d+(\\.\\d+)?$",invalidMessage:this.nls.downloadTab.errorMessages.invalidHeight,value:h,required:!0});h.placeAt(e);h.startup();v.customOptionHeightTextbox=h},_displayPageUnits:function(e,v,h){v=new N({"class":"esriCTFieldChooserDropdown",options:w.clone(this._pageSize),required:!0,value:v});v.placeAt(e);v.startup();h.customOptionPageUnitsDropdownObj=v},_getDistinctFieldsOptionsObj:function(e){var v=[];L.forEach(e,w.hitch(this,
function(h){v.push({label:this._entireFieldObj[h].alias||this._entireFieldObj[h].name,value:h})}));return v},_addDefaultPrintTemplateOptions:function(){this._defaultPrintTemplateDropdownOptionObj=new N({"class":"esriCTFieldChooserDropdown",options:this._defaultPrintTemplateDropdownOption});this._defaultPrintTemplateDropdownOptionObj.placeAt(this.defaultPrintTemplateDropdown);this._defaultPrintTemplateDropdownOptionObj.startup();this._clonedConfigurationCustomOptions&&""!==this._clonedConfigurationCustomOptions.defaultPrintOption&&
null!==this._clonedConfigurationCustomOptions.defaultPrintOption&&void 0!==this._clonedConfigurationCustomOptions.defaultPrintOption?this._defaultPrintTemplateDropdownOptionObj.set("value",this._clonedConfigurationCustomOptions.defaultPrintOption):this._defaultPrintTemplateDropdownOptionObj.set("value","Letter ANSI A Portrait")},_disableAddCustomLayoutButton:function(){J.add(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable");J.add(this.addCustomOptionButtonIcon,"esriCTCustomOptionBtnAddIconDisable")},
_enableAddCustomLayoutButton:function(){J.remove(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable");J.remove(this.addCustomOptionButtonIcon,"esriCTCustomOptionBtnAddIconDisable")},_fetchChoiceList:function(){this.loadingIndicator.show();A({url:this._printTaskURL,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(w.hitch(this,function(e){this._extractChoiceList(e);this._createCustomOptionDropdownList();0<this._customDropdownOption.length?this._checkBuddyTask(e):(this._disableAddCustomLayoutButton(),
this._addDefaultPrintTemplateOptions(),this.loadingIndicator.hide())}),w.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchChoiceList);this.loadingIndicator.hide()}))},_extractChoiceList:function(e){L.forEach(e.parameters,w.hitch(this,function(v){"Layout_Template"===v.name&&"Layout Template"===v.displayName&&(this._printServiceChoiceList=v.choiceList)}))},_checkBuddyTask:function(){A({url:this._printTaskURL.slice(0,this._printTaskURL.lastIndexOf("/")),content:{f:"json"},
handleAs:"json",callbackParamName:"callback"}).then(w.hitch(this,function(e){if(1<e.tasks.length){for(var v,h=0;h<e.tasks.length;h++)if(-1!==this._buddyTaskEndPoint.indexOf(e.tasks[h])){v=e.tasks[h];break}v?this._executeBuddyTaskSync(v):(0<this._customDropdownOption.length?(this._enableAddCustomLayoutButton(),this._displayChoiceList()):this._disableAddCustomLayoutButton(),this.loadingIndicator.hide())}else 0<this._customDropdownOption.length?(this._enableAddCustomLayoutButton(),this._displayChoiceList()):
(this._disableAddCustomLayoutButton(),this._addDefaultPrintTemplateOptions()),this.loadingIndicator.hide()}),w.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchbuddyTaskName);this.loadingIndicator.hide()}))},_executeBuddyTaskSync:function(e){A({url:this._printTaskURL.slice(0,this._printTaskURL.lastIndexOf("/"))+"/"+e+"/execute",content:{f:"json",outSR:102100},handleAs:"json",callbackParamName:"callback"}).then(w.hitch(this,function(v){0<v.results[0].value.length?
(this._enableAddCustomLayoutButton(),L.forEach(v.results[0].value,w.hitch(this,function(h){this._buddyTaskChoiceList[h.layoutTemplate]=h})),this._displayChoiceList()):this._disableAddCustomLayoutButton();this.loadingIndicator.hide()}),w.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchbuddyTaskDimension);this.loadingIndicator.hide()}))},_displayChoiceList:function(){this._createCustomLayoutTable();this._clonedConfigurationCustomOptions&&this._clonedConfigurationCustomOptions.customOptions&&
0<this._clonedConfigurationCustomOptions.customOptions.length&&this._addConfiguredCustomOptionsInTable();this._addDefaultPrintTemplateOptions()},_createCustomLayoutTable:function(){this._customLayoutTable=new F({fields:[{name:"field",title:"Layout",type:"empty",editable:"false",width:"40%"},{name:"field",title:"Width",type:"empty",editable:"true",width:"15%"},{name:"field",title:"Height",type:"empty",editable:"true",width:"15%"},{name:"field",title:"Page Units",type:"empty",editable:"false",width:"20%"},
{name:"actions",title:this.nls.common.actions,"class":"actions",type:"actions",actions:["up","down","delete"],width:"10%"}]});this._customLayoutTable.placeAt(this.customLayoutTable);f.setStyle(this._customLayoutTable.domNode,{height:"100%"});this._customLayoutTable.startup();this.own(a(this._customLayoutTable,"row-delete",w.hitch(this,function(){this._removeCustomOptionFromDefaultDropdown();0===this._customLayoutTable.getRows().length&&this._isCustomOptionNoDefault&&this._addOptionsInDefaultDropdown();
this._addConfiguredCustomOptionInDefaultDropdown()})))},_addConfiguredCustomOptionsInTable:function(){L.forEach(this._clonedConfigurationCustomOptions.customOptions,w.hitch(this,function(e){this._addFieldsRow(e,!0)}))},_addCustomOptionsInTable:function(){var e=this._customDropdownOption[0].value,v,h;var r=h=null;var H=this._pageSize[0].value;this._buddyTaskChoiceList[e]&&(h=this._buddyTaskChoiceList[e].pageSize[1],r=this._buddyTaskChoiceList[e].pageSize[0],this._buddyTaskChoiceList[e]&&this._buddyTaskChoiceList[e].pageUnits&&
(H=this._buddyTaskChoiceList[e].pageUnits));var M={};M[e]={Height:h,Width:r,SizeName:e,MapLayout:e,PageUnits:H};this._addFieldsRow(M[e],!1);C.has("ie")||C.has("edge")?L.forEach(this._defaultPrintTemplateDropdownOptionObj.options,w.hitch(this,function(P){P.value===e&&(v=P)})):v=this._defaultPrintTemplateDropdownOptionObj.options.find(function(P){return P.value===e});v||this._defaultPrintTemplateDropdownOptionObj.addOption({label:e,value:e,selected:!1})},_createCustomOptionDropdownList:function(){var e=
!1;L.forEach(this._printServiceChoiceList,w.hitch(this,function(h){var r=w.clone(h);if("MAP_ONLY"!==r){if(this._defaultOptions[r]){e=!0;var H=this._defaultOptions[r];this._defaultPrintTemplateDropdownOption.push({label:z.PageSizes[H.SizeName].SizeName+" "+z.Orientation[H.Orientation].Text,value:h})}this._defaultOptions[r]||this._customDropdownOption.push({value:r,label:r})}}));this._clonedConfigurationCustomOptions&&L.forEach(this._clonedConfigurationCustomOptions.customOptions,w.hitch(this,function(h){this._defaultPrintTemplateDropdownOption.push({label:h.SizeName,
value:h.SizeName})}));if(!(e||(0<this._customDropdownOption.length&&(this._isCustomOptionNoDefault=!0),this._clonedConfigurationCustomOptions&&this._clonedConfigurationCustomOptions.customOptions&&0<this._clonedConfigurationCustomOptions.customOptions.length)))for(var v in this._defaultOptions)this._defaultOptions.hasOwnProperty(v)&&z.PageSizes[this._defaultOptions[v].SizeName]&&this._defaultPrintTemplateDropdownOption.push({label:v,value:v})},getCustomOptions:function(){var e=[];if(this._customLayoutTable){var v=
this._customLayoutTable.getRows();L.forEach(v,w.hitch(this,function(h){e.push({SizeName:h.customOptionLayoutDropdownObj.value,Width:h.customOptionWidthTextbox.getValue(),Height:h.customOptionHeightTextbox.getValue(),MapLayout:h.customOptionLayoutDropdownObj.value,PageUnits:h.customOptionPageUnitsDropdownObj.value})}))}return e},validateCustomOptions:function(){var e=[];if(this._customLayoutTable){var v=this._customLayoutTable.getRows();L.forEach(v,w.hitch(this,function(h){h.customOptionWidthTextbox.isValid()||
e.push(q.substitute(this.nls.downloadTab.errorMessages.invalidLayoutWidth,{customLayoutOptionValue:h.customOptionLayoutDropdownObj.value}));h.customOptionHeightTextbox.isValid()||e.push(q.substitute(this.nls.downloadTab.errorMessages.invalidLayoutHeight,{customLayoutOptionValue:h.customOptionLayoutDropdownObj.value}));h.customOptionPageUnitsDropdownObj.isValid()||e.push(q.substitute(this.nls.downloadTab.errorMessages.invalidLayoutPageUnits,{customLayoutOptionValue:h.customOptionLayoutDropdownObj.value}))}))}if(0<
e.length)return e;L.forEach(v,w.hitch(this,function(h){e.push({SizeName:h.customOptionLayoutDropdownObj.value})}));(v=this._getDuplicateValue(e))&&0<v.length?(e=[],e.push(q.substitute(this.nls.downloadTab.errorMessages.duplicateCustomOption,{duplicateValueSizeName:v[0].SizeName}))):e=[];return e},_getDuplicateValue:function(e){var v=0,h=e.length;for(v;v<h;v++){var r=e[v];var H=C.has("ie")||C.has("edge")?Object.create(e):Object.assign([],e);H.splice(v,1);r=this._filterArray(H,r);if(0<r.length)break}return r},
_filterArray:function(e,v){return e.filter(function(h){return Object.keys(v).every(function(r){return h[r]===v[r]})})},getDefaultPrintOption:function(){return this._defaultPrintTemplateDropdownOptionObj.value},closeDownloadTabDropdowns:function(){this._defaultPrintTemplateDropdownOptionObj&&this._defaultPrintTemplateDropdownOptionObj.closeDropDown();if(this._customLayoutTable){var e=this._customLayoutTable.getRows();L.forEach(e,w.hitch(this,function(v){v.customOptionLayoutDropdownObj.closeDropDown();
v.customOptionPageUnitsDropdownObj.closeDropDown()}))}},_initEditor:function(){this._initEditorPluginsCSS();this._footNoteEditorObj=new S({plugins:"undo redo | cut copy paste selectAll | bold italic underline | foreColor | insertHorizontalRule removeFormat delete |".split(" "),extraPlugins:["createLink","unlink",{name:"dijit._editor.plugins.FontChoice",command:"fontName",custom:"Arial;Comic Sans MS;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";")},"fontSize"],style:"font-family:Verdana;"},
this.footNoteEditor);f.setStyle(this._footNoteEditorObj.domNode,{width:"100%",height:"100%"});this._footNoteEditorObj.startup();8!==p("ie")&&this._footNoteEditorObj.resize({w:"100%",h:"100%"})},_initEditorPluginsCSS:function(){var e=document.getElementsByTagName("head")[0],v=window.apiUrl+"dojox/editor/plugins/resources/css/TextColor.css";D('link[href\x3d"'+v+'"]',e)[0]||C.loadStyleLink("editor_plugins_resources_TextColor",v);v=window.apiUrl+"dojox/editor/plugins/resources/editorPlugins.css";D('link[href\x3d"'+
v+'"]',e)[0]||C.loadStyleLink("editor_plugins_resources_editorPlugins",v);v=window.apiUrl+"dojox/editor/plugins/resources/css/PasteFromWord.css";D('link[href\x3d"'+v+'"]',e)[0]||C.loadStyleLink("editor_plugins_resources_PasteFromWord",v)},getDisplaySummaryCheckBoxStatus:function(){return this.displaySummaryInReportCheckBox.get("checked")},getRowshavingAllZeroValueCheckBoxStatus:function(){return this.hideAllZeroRowCheckBox.get("checked")},getRowshavingAllNullValueCheckBoxStatus:function(){return this.hideNullRowCheckBox.get("checked")}})})},
"jimu/dijit/GpSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/GpSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/GpChooserFromPortal jimu/dijit/_GpServiceChooserContent jimu/portalUrlUtils dijit/form/RadioButton".split(" "),function(x,E,K,J,w,a,b,c,f,k,q,n){var t=0;return x([E,K,J,f],{templateString:w,baseClass:"jimu-gp-source",declaredClass:"jimu.dijit.GpSource",nls:null,multiple:!1,
portalUrl:null,uniqueID:null,mode:null,constructor:function(){this.inherited(arguments);this.uniqueID=++t},postMixInProperties:function(){this.nls=window.jimuNls.gpSource;this.portalUrl=n.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){var B=[];this.portalRadio.checked?B=this.gpcPortal.getSelectedItems():this.urlRadio.checked&&(B=this.gpcUrl.getSelectedItems());return B},startup:function(){this._started||(this.inherited(arguments),
this.gpcPortal.startup(),this.gpcUrl.startup());this._started=!0},_initSelf:function(){this._initRadios();this._createGpChooserFromPortal();this._createGpServiceChooserContent();this._onRadioClicked("url");this.own(c(this.urlRadio,"click",a.hitch(this,function(){this._onRadioClicked("url")})));this.own(c(this.portalRadio,"click",a.hitch(this,function(){this._onRadioClicked("portal")})))},_createGpChooserFromPortal:function(){this.gpcPortal=new k({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",
height:"100%"}});this.gpcPortal.operationTip=this.nls.chooseItem;this.gpcPortal.placeAt(this.hflcContainer);this.own(c(this.gpcPortal,"next",a.hitch(this,function(){this.gpcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseTask;this._updateOperationTip()})));this.own(c(this.gpcPortal,"back",a.hitch(this,function(){this.gpcPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(c(this.gpcPortal,"ok",a.hitch(this,function(B){B&&0<B.length&&this.emit("ok",B)})));
this.own(c(this.gpcPortal,"cancel",a.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createGpServiceChooserContent:function(){this.gpcUrl=new q({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.gpcUrl.operationTip=this.nls.setServiceUrl;this.gpcUrl.placeAt(this.flscContainer);this.own(c(this.gpcUrl,"ok",a.hitch(this,
function(B){B&&0<B.length&&this.emit("ok",B)})));this.own(c(this.gpcUrl,"cancel",a.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var B="gpSourceRadios_"+this._getRandomString();this.portalRadio.name=B;b.setAttr(this.portalRadio,"id","portalRadio_"+this._getRandomString());b.setAttr(this.portalLabel,"for",this.portalRadio.id);this.urlRadio.name=B;b.setAttr(this.urlRadio,"id","urlRadio_"+this._getRandomString());b.setAttr(this.urlLabel,"for",this.urlRadio.id)},_getRandomString:function(){var B=
Math.random().toString();return B=B.slice(2,B.length)},_onRadioClicked:function(B){this.mode!==B&&(this.mode=B,"portal"===B?(this.portalRadio.set("checked",!0),this.urlRadio.set("checked",!1),b.setStyle(this.hflcContainer,"display","block"),b.setStyle(this.flscContainer,"display","none"),this.operationTip.innerHTML=this.nls.chooseItem):"url"===B&&(this.portalRadio.set("checked",!1),this.urlRadio.set("checked",!0),b.setStyle(this.hflcContainer,"display","none"),b.setStyle(this.flscContainer,"display",
"block"),this.operationTip.innerHTML=this.nls.setServiceUrl,setTimeout(a.hitch(this,function(){this.gpcUrl.focusInput()}),50)),this._updateOperationTip())},_updateOperationTip:function(){if(this.portalRadio.checked){this.operationTip.innerHTML=this.gpcPortal.operationTip;var B=this.gpcPortal.browserContainer;B.style.top=0;var F=this.operationTip.clientHeight;19<=F&&(B.style.top=F-19+"px")}else this.urlRadio.checked&&(this.operationTip.innerHTML=this.gpcUrl.operationTip)}})})},"jimu/dijit/GpChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/GpChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/GpServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F,d,l){return x([E,K,J,n],{templateString:w,declaredClass:"jimu.dijit.GpChooserFromPortal",baseClass:"jimu-gp-chooser-from-portal",_serviceDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=a.mixin({},window.jimuNls.common);this.portalUrl=d.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.gpServiceBrowser.getSelectedItems()},_initSelf:function(){this.selector=
new B({portalUrl:this.portalUrl,itemTypes:["Geoprocessing Service"],onlyShowOnlineFeaturedItems:!1});this.own(f(this.selector,"item-selected",a.hitch(this,this._onItemSelected)));this.own(f(this.selector,"none-item-selected",a.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);this.selector.startup();this.gpServiceBrowser._onTreeClick=a.hitch(this,this._onBrowserClicked)},_onItemSelected:function(){b.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){b.addClass(this.btnNext,
"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceDef&&!this._serviceDef.isFulfilled()&&this._serviceDef.cancel();b.setStyle(this.btnOk,"display","none");b.setStyle(this.btnNext,"display","block");b.setStyle(this.btnBack,"display","none");b.addClass(this.btnOk,"jimu-state-disabled");b.setStyle(this.selectorContainer,"display","block");b.setStyle(this.browserContainer,"display","none");this._reset();this.emit("back")},_onBtnOkClicked:function(){var u=this.getSelectedItems();0<u.length&&
this.emit("ok",u)},_onBtnNextClicked:function(){var u=this.selector.getSelectedItem();u&&(this._reset(),b.setStyle(this.btnNext,"display","none"),b.setStyle(this.btnBack,"display","block"),b.setStyle(this.btnOk,"display","block"),b.addClass(this.btnOk,"jimu-state-disabled"),b.setStyle(this.selectorContainer,"display","none"),b.setStyle(this.browserContainer,"display","block"),this.gpServiceBrowser.setUrl(u.url||u.item).then(a.hitch(this,function(){0<this.getSelectedItems().length&&b.removeClass(this.btnOk,
"jimu-state-disabled")})),this.emit("next"))},_reset:function(){this.gpServiceBrowser.reset()},_onBrowserClicked:function(){0<this.gpServiceBrowser.getSelectedItems().length?b.removeClass(this.btnOk,"jimu-state-disabled"):b.addClass(this.btnOk,"jimu-state-disabled")},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on dojo/dom-style jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable jimu/dijit/BindLabelPropsMixin dijit/form/RadioButton".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F,d,l,u,I,m,g,A,D,N,O){return x([K,J,w,O,b],{templateString:a,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,showMyContent:!0,showMyOrganization:!0,showMyGroups:!0,showPublic:!0,showOnlyEditableGroups:!1,postMixInProperties:function(){this.portalUrl=m.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";k.forEach(this.itemTypes,c.hitch(this,function(L,z){this._itemTypes+=
'"'+L+'"';z!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";k.forEach(this.typeKeywords,c.hitch(this,function(L,z){this._typeKeywords+='"'+L+'"';z!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var L=this._getPortalUrl();
this.portal=u.getPortal(L);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=l.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=l.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){var L={title:this.nls.myContent,content:this.mycontentTabNode},z={title:this.nls.myOrganization,content:this.organizationTabNode},
C={title:this.nls.myGroup,content:this.groupTabNode},Q={title:this.nls.publicMap,content:this.publicTabNode};d.set(this.mycontentTabNode,"display","none");d.set(this.organizationTabNode,"display","none");d.set(this.groupTabNode,"display","none");d.set(this.publicTabNode,"display","none");var S=[];this.showMyContent&&(S.push(L),d.set(this.mycontentTabNode,"display","block"));this.showMyOrganization&&(S.push(z),d.set(this.organizationTabNode,"display","block"));this.showMyGroups&&(S.push(C),d.set(this.groupTabNode,
"display","block"));this.showPublic&&(S.push(Q),d.set(this.publicTabNode,"display","block"));this.tab=new D({tabs:S},this.tabNode);this.own(F(this.tab,"tabChanged",c.hitch(this,function(p){q.setStyle(this.signinSection,"display","none");p!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){q.setStyle(this.signinSection,"display","none");var L=B(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",
this.domNode);I.userHaveSignInPortal(this._getPortalUrl())?L.style("display","block"):(L.style("display","none"),this._isPublicTabShow||q.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){var L=this._getPortalUrl();L=m.getServerByUrl(L);this.portalPublicRaido.set("disabled",!1);this.onlinePublicRaido.set("disabled",!1);this.portalPublicRaido.set("checked",!0);var z=!1;m.isArcGIScom(L)?(z=!0,this.portalPublicLabel.innerHTML="ArcGIS.com"):(this.portalPublicLabel.innerHTML=
L,z=this.showOnlineItems?!1:!0);z&&(this.onlinePublicRaido.set("disabled",!0),q.setStyle(this.onlinePublicRaido,"display","none"),q.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var L="esri_"+(f.locale&&f.locale.slice(0,2)||"en").toLowerCase(),z=k.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
c.hitch(this,function(Q){return Q!==L})),C="";k.forEach(z,c.hitch(this,function(Q){C+=" -owner:"+Q+" "}));z=" ";this.portal&&this.portal.user&&this.portal.user.orgId&&(z=" orgid:"+this.portal.user.orgId+" ");z=z+this._itemTypeQueryString+" AND access:public "+C+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:z});this._filterPublicPortalQuery=this._getQuery({q:z,basicQ:z});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(L){return c.mixin({start:1,num:16,f:"json"},L||{})},_getPortalUrl:function(){return m.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(F(this.publicPortalItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(F(this.publicOnlineItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(F(this.organizationItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(F(this.groupItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));
this.own(F(this.mycontentItemTable,"item-dom-clicked",c.hitch(this,this._onItemDomClicked)));this.own(F(this.publicPortalItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(F(this.publicOnlineItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(F(this.organizationItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(F(this.groupItemTable,"update",c.hitch(this,this._onItemTableUpdate)));this.own(F(this.mycontentItemTable,"update",c.hitch(this,this._onItemTableUpdate)));
var L=this._getPortalUrl();this.portalPublicRaido.get("disabled")||(this.publicPortalItemTable.set("portalUrl",L),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.get("disabled")||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",
this._filterPublicOnlineQuery))},_initPublic:function(){this.own(F(this.portalPublicRaido,"click",c.hitch(this,this._onPublicRaidoClicked)));this.own(F(this.onlinePublicRaido,"click",c.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.get("checked")?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.get("checked")&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},
_onPublicSearch:function(L){(L=L&&c.trim(L))?(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.get("checked")?(this._filterPublicPortalQuery.q=L+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.get("checked")&&(this._filterPublicOnlineQuery.q=L+" "+this._itemTypeQueryString+" AND access:public "+
this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(F(this.groupsSelect,"change",c.hitch(this,this._onGroupsSelectChange)));var L=m.getServerByUrl(this._getPortalUrl());m.isArcGIScom(L)&&(L="ArcGIS.com");I.userHaveSignInPortal(this._getPortalUrl())&&
this._onSignIn()},_onOrganizationSearch:function(L){if(L=L&&c.trim(L)){if(this._allOrganizationQuery){var z=this._allOrganizationQuery.q;z&&(this._filterOrganizationQuery.q=L+" "+z,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(L){if(L=L&&c.trim(L)){if(this._allMyContentQuery){var z=this._allMyContentQuery.q;z&&(this._filterMyContentQuery.q=L+" "+
z,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},_onGroupSearch:function(L){if(L=L&&c.trim(L)){if(this._allGroupQuery){var z=this._allGroupQuery.q;z&&(this._filterGroupQuery.q=L+" "+z,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=
!0;var L=this._getPortalUrl();u.getPortal(L).getUser().then(c.hitch(this,function(z){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(z),this._searchMyContent(z),this._searchGroups(z))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(L){this.organizationItemTable.clear();L=" orgid:"+L.orgId+
" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var z=this._getPortalUrl();this._allOrganizationQuery=this._getQuery({q:L});this._filterOrganizationQuery=this._getQuery({q:L});this.organizationItemTable.set("portalUrl",z);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(L){this.mycontentItemTable.clear();var z=this._getPortalUrl();L="owner:"+L.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;
this._allMyContentQuery=this._getQuery({q:L});this._filterMyContentQuery=this._getQuery({q:L});this.mycontentItemTable.set("portalUrl",z);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(L){this._resetGroupsSection();q.setStyle(this.groupsSection,"display","flex");L=L.getGroups();if(0<L.length){q.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();q.empty(this.groupsSelect);for(var z=0;z<L.length;z++){var C=L[z];q.create("option",
{value:C.id,innerHTML:C.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(L.length)},_resetGroupsSection:function(){q.setStyle(this.groupsSection,"display","none");q.empty(this.groupsSelect);q.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();q.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(L){0===L?q.setStyle(this.groupsSection,
"top","15px"):q.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var L=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===L)q.setStyle(this.groupSearch,"display","none"),this.groupItemTable.hide();else{q.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var z=this._getPortalUrl();L="group:"+L+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:L});this._filterGroupQuery=this._getQuery({q:L});
this.groupItemTable.set("portalUrl",z);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(L){var z=q.hasClass(L,"jimu-state-active");B(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");z&&q.addClass(L,"jimu-state-active");(L=this.getSelectedItem())?this.emit("item-selected",L):this.emit("none-item-selected")},getSelectedItem:function(){var L=null,z=B(".item.jimu-state-active",this.domNode);
0<z.length&&(L=c.mixin({},z[0].item));return L}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F,d){return x([E,K,J,a],{templateString:w,declaredClass:"jimu.dijit.ItemTable",
baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"desktopapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=F.getStandardPortalUrl(this.portalUrl));
this.showAllItemsSection();this.searchAllItems()},show:function(){f.setStyle(this.domNode,"display","block")},hide:function(){f.setStyle(this.domNode,"display","none")},searchAllItems:function(l){this.showAllItemsSection();l&&(this.query=b.mixin({},l),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),B.getPortal(this.portalUrl).queryItems(this.query).then(b.hitch(this,function(u){this.domNode&&(this.allItemsShelter.hide(),
this.query.start=u.nextStart,this._createItems(u,this.allItemTbody))}),b.hitch(this,function(u){console.error(u);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(l){this.showFilterItemsSection();l&&(this.filteredQuery=b.clone(l),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&(this.filteredItemShelter.show(),B.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(b.hitch(this,function(u){this.domNode&&
(this.showFilterItemsSection(),l&&this.clearFilteredItemsSection(),this.filteredQuery.start=u.nextStart,this._createItems(u,this.filteredItemsTbody),this._filterItemCallback())}),b.hitch(this,function(u){console.error(u);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?(f.setStyle(this.filteredItemsTableDiv,"display","block"),f.setStyle(this.searchNoneTipSection,"display","none")):(f.setStyle(this.filteredItemsTableDiv,
"display","none"),f.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){f.empty(this.allItemTbody)},clearFilteredItemsSection:function(){f.empty(this.filteredItemsTbody)},showAllItemsSection:function(){f.setStyle(this.allItemsSection,"display","block");f.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){f.setStyle(this.allItemsSection,"display","none");
f.setStyle(this.filteredItemsSection,"display","block");f.setStyle(this.filteredItemsTableDiv,"display","block");f.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&this.searchFilteredItems()},_isScrollToBottom:function(l){return t.isScrollToBottom(l)},_createItems:function(l,u){l=l.results;var I=
c.map(this.types,b.hitch(this,function(L){return L.toLowerCase()}));l=c.filter(l,b.hitch(this,function(L){L=L.type&&L.type.toLowerCase()||"";return 0<=c.indexOf(I,L)}));if(0!==l.length){var m=q("td.empty",u),g;if(0<m.length){var A=Math.min(l.length,m.length),D=l.splice(0,A);for(g=0;g<A;g++){var N=m[g];var O=this._createItem(D[g]);f.place(O,N);f.removeClass(N,"empty")}}if(0!==l.length){m=Math.ceil(l.length/2);for(g=0;g<m;g++)for(O=f.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e"),
f.place(O,u),A=q("td",O),D=0;D<A.length;D++)N=A[D],(O=l[2*g+D])?(O=this._createItem(O),f.place(O,N)):f.addClass(N,"empty");this.emit("update")}}},_getItemCount:function(l){return q(".item",l).length},_createItem:function(l){var u=f.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
u.item=l;var I=q(".item-thumbnail",u)[0],m=q(".item-name",u)[0],g=q(".item-type-owner",u)[0],A=q(".item-date",u)[0],D=q(".item-details",u)[0],N=q(".none-thumbnail-tip",u)[0];if(!l.thumbnailUrl){var O=this._defaultThumbnail[l.type];O&&(l.thumbnailUrl=require.toUrl("jimu")+"/images/"+O)}l.thumbnailUrl?f.setStyle(I,"backgroundImage","url("+l.thumbnailUrl+")"):N.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(A=q(".item-info",u)[0],this.onCreateItemContent(l,A)):(m.innerHTML=
l.title,m.title=m.innerHTML,g.innerHTML=l.type+" by "+l.owner,g.title=g.innerHTML,I=new Date,I.setTime(l.modified),A.innerHTML=I.toLocaleString(),A.title=A.innerHTML,D.innerHTML=this.nls.moreDetails,D.href=l.detailsPageUrl||"#");return u},_onItemsTableClicked:function(l){var u=l.target||l.srcElement;l=null;f.hasClass(u,"item-thumbnail")?l=u.parentNode:f.hasClass(u,"none-thumbnail-tip")&&(l=u.parentNode.parentNode);l&&(u=f.hasClass(l,"jimu-state-active"),q(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
u?f.removeClass(l,"jimu-state-active"):f.addClass(l,"jimu-state-active"),this.emit("item-dom-clicked",l))},getSelectedItem:function(){var l=null,u=q(".item.jimu-state-active",this.domNode);0<u.length&&(l=b.mixin({},u[0].item));return l}})})},"jimu/dijit/GpServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(x,E,K,J,w){return x([E],{baseClass:"jimu-gp-service-browser",declaredClass:"jimu.dijit.GpServiceBrowser",
url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=w.getGpServiceBrowserRule()},getSelectedItems:function(){var a=this.inherited(arguments);return a=J.map(a,K.hitch(this,function(b){return{name:b.name,url:b.url}}))}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingIndicator".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F){return x([E,K,J,w],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);b.addClass(this.domNode,
"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(d){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new f;d&&"string"===typeof d&&d.replace(/\/*$/g,"")||this._def.reject();d=d.replace(/\/*$/g,"");d=a.trim(d);var l=d.match(/^http(s?):\/\//gi);l&&0<l.length||
(d="http://"+d);if(!(0>=d.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=d))return d=this._getRootItem(),d=B.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,d):this._isUrlContainsServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,d):this._searchFolderServiceUrl(this._currentUrl,d),this.shelter.show(),d.then(a.hitch(this,function(u){this.domNode&&this.shelter.hide();var I=this.tree.getAllLeafTreeNodeWidgets();1===I.length&&
I[0].select();this._def.resolve(u)}),a.hitch(this,function(u){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(u)})),this._def;this._def.reject()},_getItem:function(d){return this.rule.getItem(d)},_getSubItemUrls:function(d){return this.rule.getSubItemUrls(d)},_getSubItems:function(d){var l=new f;this._getSubItemUrls(d).then(a.hitch(this,function(u){u=c.map(u,a.hitch(this,function(I){return this._getItem(I)}));k(u).then(a.hitch(this,function(I){I=c.filter(I,a.hitch(this,
function(m){return m&&"object"===typeof m}));l.resolve(I)}),a.hitch(this,function(I){l.reject(I)}))}),a.hitch(this,function(u){l.reject(u)}));return l},_selectFirstLeafTreeNodeWidget:function(){var d=this.tree.getAllLeafTreeNodeWidgets();1===d.length&&d[0].select()},isLeafItem:function(d){return 0<=this.rule.leafTypes.indexOf(d.type)},isServiceTypeSupported:function(d){return this.rule.isServiceTypeSupported(d)},_getStringEndWith:function(d,l){var u="",I=d.indexOf(l);0<=I&&(u=d.slice(0,I+l.length));
return u},_isUrlContainsServiceType:function(d){return this.rule.isUrlContainsServiceType(d)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(d){var l="";d=d.split("/");return l=d[d.length-1]},_searchBaseServiceUrl:function(d,l){var u=new f;this._getRestInfo(d).then(a.hitch(this,function(I){if(this.domNode){var m=[];c.map(I.folders,a.hitch(this,function(g){var A={name:g,type:"folder",url:d+"/"+g,parent:l.id};this._addItem(A);
var D=new f;this._doSearchFolderServiceUrl(A.url,A.id).then(a.hitch(this,function(N){0<N.length?c.forEach(N,a.hitch(this,function(O){O.parent=A.id;this._addItem(O)})):this._removeItem(A.id);D.resolve()}),a.hitch(this,function(N){D.reject(N)}));m.push(D);return D}));c.forEach(I.services,a.hitch(this,function(g){if(this.isServiceTypeSupported(g.type)){g=d+"/"+g.name+"/"+g.type;var A=new f;this.rule.getItem(g).then(a.hitch(this,function(D){D&&(D.parent=l.id,this._addItem(D));A.resolve()}),a.hitch(this,
function(D){console.error(D);A.reject(D)}));m.push(A)}}));k(m).then(a.hitch(this,function(){this.domNode&&u.resolve()}),a.hitch(this,function(g){console.error(g);this.domNode&&u.reject(g)}))}}),a.hitch(this,function(I){console.error(I);this.domNode&&u.reject({errorCode:"NETWORK_ERROR",error:I})}));return u},_searchFolderServiceUrl:function(d,l){var u=new f;this._doSearchFolderServiceUrl(d,l).then(a.hitch(this,function(I){this.domNode&&(c.forEach(I,a.hitch(this,function(m){m.parent=l.id;this._addItem(m)})),
u.resolve())}),a.hitch(this,function(I){console.error(I);this.domNode&&u.reject({errorCode:"NETWORK_ERROR",error:I})}));return u},_doSearchFolderServiceUrl:function(d){var l=new f,u=this._getBaseServiceUrl();this._getRestInfo(d).then(a.hitch(this,function(I){I=I.services;var m=[];I&&0<I.length&&c.forEach(I,a.hitch(this,function(g){this.isServiceTypeSupported(g.type)&&(g=this.rule.getItem(u+"/"+g.name+"/"+g.type),m.push(g))}));k(m).then(a.hitch(this,function(g){g=c.filter(g,a.hitch(this,function(A){return A}));
l.resolve(g)}),a.hitch(this,function(g){console.error(g);l.reject(g)}))}),a.hitch(this,function(I){console.error(I);l.reject(I)}));return l},_searchServiceUrl:function(d,l){var u=new f;this._getSubItems(d).then(a.hitch(this,function(I){I&&0<I.length?(c.forEach(I,a.hitch(this,function(m){m.parent=l.id;this._addItem(m)})),u.resolve()):this._getItem(d).then(a.hitch(this,function(m){m&&(m.parent=l.id,this._addItem(m));u.resolve()}),a.hitch(this,function(m){u.reject(m)}))}),a.hitch(this,function(I){u.reject(I)}));
return u},_getRestInfo:function(d){var l=new f;this.rule.getRestInfo(d).then(a.hitch(this,function(u){this.domNode&&l.resolve(u)}),a.hitch(this,function(u){this.domNode&&l.reject(u)}));return l},_clear:function(){var d=this._store.query({parent:"root"});c.forEach(d,a.hitch(this,function(l){l&&"root"!==l.id&&this._store.remove(l.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(d){this._id++;d.id=this._id.toString();this._store.add(d);return d},_removeItem:function(d){this._store.remove(d)},
_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var d=this._getRootItem();d=new q({data:[d],getChildren:function(l){return this.query({parent:l.id})}});this._store=new n(d);d=new t({store:this._store,query:{id:"root"},mayHaveChildren:a.hitch(this,this._mayHaveChildren)});this.tree=new F({multiple:this.multiple,model:d,showRoot:!1,style:{width:"100%"},isLeafItem:a.hitch(this,this.isLeafItem),onOpen:a.hitch(this,function(l,u){this._onTreeOpen(l,u);
this.emit("tree-open",l,u)}),onClick:a.hitch(this,function(l,u,I){this._onTreeClick(l,u,I);this.emit("tree-click",l,u,I)}),getIconStyle:a.hitch(this,function(l,u){var I=null;if(!l)return null;var m={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},g=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),A=this._getIconImageName(l,u);A||("folder"===l.type?A=u?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(l.type)&&
(A=u?"folder_open_default.png":"folder_close_default.png"));A&&(m.backgroundImage="url("+g+"/css/images/"+A+")",I=m);return I})});b.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(d,l){var u="";"function"===typeof this.rule.getIconImageName&&(u=this.rule.getIconImageName(d,l));return u},_mayHaveChildren:function(d){return"root"===d.type?!0:!this.isLeafItem(d)},_onTreeOpen:function(d,l){"root"===d.id||0<this._store.query({parent:d.id}).length||
d.checking||d.checked||(d.checking=!0,this._getSubItems(d.url).then(a.hitch(this,function(u){c.forEach(u,a.hitch(this,function(I){I.parent=d.id;this._addItem(I)}));d.checking=!1;d.checked=!0}),a.hitch(this,function(u){console.error(u);d.checking=!1;d.checked=!0})))},_onTreeClick:function(d,l,u){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),
function(x,E,K,J,w,a,b){return K("dijit.tree.ObjectStoreModel",b,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(c){w.mixin(this,c);this.childrenCache={}},getRoot:function(c,f){if(this.root)c(this.root);else{var k=this.store.query(this.query);k.then&&this.own(k);a(k,w.hitch(this,function(q){if(1!=q.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+q.length+" items, but must return exactly one");this.root=q[0];c(this.root);k.observe&&k.observe(w.hitch(this,
function(n){this.onChange(n)}),!0)}),f)}},mayHaveChildren:function(){return!0},getChildren:function(c,f,k){var q=this.store.getIdentity(c);if(this.childrenCache[q])a(this.childrenCache[q],f,k);else{var n=this.childrenCache[q]=this.store.getChildren(c);n.then&&this.own(n);n.observe&&this.own(n.observe(w.hitch(this,function(t,B,F){this.onChange(t);B!=F&&a(n,w.hitch(this,"onChildrenChange",c))}),!0));a(n,f,k)}},isItem:function(){return!0},getIdentity:function(c){return this.store.getIdentity(c)},getLabel:function(c){return c[this.labelAttr]},
newItem:function(c,f,k,q){return this.store.put(c,{parent:f,before:q})},pasteItem:function(c,f,k,q,n,t){var B=new J;if(f===k&&!q&&!t)return B.resolve(!0),B;f&&!q?this.getChildren(f,w.hitch(this,function(F){F=[].concat(F);var d=x.indexOf(F,c);F.splice(d,1);this.onChildrenChange(f,F);B.resolve(this.store.put(c,{overwrite:!0,parent:k,oldParent:f,before:t,isCopy:!1}))})):B.resolve(this.store.put(c,{overwrite:!0,parent:k,oldParent:f,before:t,isCopy:!0}));return B},onChange:function(){},onChildrenChange:function(){},
onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F,d){var l=x([F._TreeNode,t],{templateString:J,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);
a.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=a.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=a.toDom('\x3cinput type\x3d"checkbox" /\x3e');a.addClass(this.checkNode,"jimu-tree-check-node");a.place(this.checkNode,this.contentNode,"first");this.own(q(this.checkNode,"click",w.hitch(this,this._onClick)));this.own(q(this.rowNode,"keydown",w.hitch(this,function(u,I){I.target=u;I.keyCode!==n.ENTER&&I.keyCode!==
n.SPACE||this._onClick(I)},this.checkNode)));this.isLeaf?this.groupId?a.setStyle(this.checkNode,"display","none"):a.setStyle(this.checkNode,"display","inline"):a.setStyle(this.checkNode,"display","none");this.isLeaf?a.addClass(this.domNode,"jimu-tree-leaf-node"):a.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,a.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,a.removeClass(this.domNode,
"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(u){(u.target||u.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,u):this.tree._onClick(this,u)},_onChange:function(){this.isLeaf&&setTimeout(w.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return x([F,
t],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+d.getRandomString()},postCreate:function(){this.inherited(arguments);a.addClass(this.domNode,"jimu-tree");this.own(k.before(this,"onClick",w.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&a.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0;a.setAttr(this.domNode,"tabindex",0)},removeItem:function(u){this.model.store.remove(u)},
getAllItems:function(){var u=this.getAllTreeNodeWidgets();return b.map(u,w.hitch(this,function(I){var m=I.item;m.selected=I.checkNode.checked;return m}))},getSelectedItems:function(){var u=this.getAllTreeNodeWidgets();u=b.filter(u,w.hitch(this,function(I){return I.checkNode.checked}));return b.map(u,w.hitch(this,function(I){return I.item}))},getFilteredItems:function(u){var I=this.getAllTreeNodeWidgets();I=b.map(I,w.hitch(this,function(m){var g=m.item;g.selected=m.checkNode.checked;return g}));return b.filter(I,
w.hitch(this,function(m){return u(m)}))},getTreeNodeByItemId:function(u){for(var I=this._getAllTreeNodeDoms(),m=0;m<I.length;m++){var g=B.byNode(I[m]);if(g.item.id.toString()===u.toString())return g}return null},selectItem:function(u){(u=this.getTreeNodeByItemId(u))&&u.isLeaf&&this.selectNodeWidget(u)},unselectItem:function(u){(u=this.getTreeNodeByItemId(u))&&u.isLeaf&&u.unselect()},getAllLeafTreeNodeWidgets:function(){var u=this.getAllTreeNodeWidgets();return b.filter(u,w.hitch(this,function(I){return I.isLeaf}))},
getAllTreeNodeWidgets:function(){var u=this._getAllTreeNodeDoms();return b.map(u,w.hitch(this,function(I){return B.byNode(I)}))},isLeafItem:function(u){return u&&u.isLeaf},_getAllTreeNodeDoms:function(){return f(".dijitTreeNode",this.domNode)},_createTreeNode:function(u){u.isLeaf=this.isLeafItem(u.item);this.multiple||(u.groupId=this.uniqueId);return new l(u)},_onTreeNodeSelect:function(u){this.emit("item-select",{item:u.item,treeNode:u})},_onTreeNodeUnselect:function(u){this.emit("item-unselect",
{item:u.item,treeNode:u})},selectNodeWidget:function(u){this.multiple||this.unselectAllLeafNodeWidgets();u.select()},_jimuBeforeClick:function(u,I,m){I.isLeaf&&(a.hasClass(m.target||m.srcElement,"jimu-tree-check-node")||(this.multiple?I.toggleSelect():this.selectNodeWidget(I)));return arguments},_onCheckNodeClick:function(u,I,m){!this.multiple&&I&&this.unselectAllLeafNodeWidgets();c.stop(m);this.focusNode(u);setTimeout(w.hitch(this,function(){I?this.selectNodeWidget(u):u.unselect();this.onClick(u.item,
u,m)}),0)},unselectAllLeafNodeWidgets:function(){var u=this.getAllLeafTreeNodeWidgets();b.forEach(u,w.hitch(this,function(I){I.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F,d,l,u,I,m,g,A,D,N,O,L,z,C,Q,S,p,e,v,h,r){function H(y){return d.delegate(y.promise||y,{addCallback:function(G){this.then(G)},addErrback:function(G){this.otherwise(G)}})}var M=J("dijit._TreeNode",[O,L,z,C,Q],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(y){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=y;this._set("label",y);t("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:p,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(y){var G=Math.max(y,0)*this.tree._nodePixelIndent+"px";k.set(this.domNode,
"backgroundPosition",G+" 0px");k.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",G);x.forEach(this.getChildren(),function(R){R.set("indent",y+1)});this._set("indent",y)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(y){var G=this.tree,R=G.model;G._v10Compat&&y===R.root&&(y=null);this._applyClassAndStyle(y,"icon","Icon");this._applyClassAndStyle(y,"label","Label");this._applyClassAndStyle(y,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(y,G,R){var T="_"+G+"Class";G+="Node";var U=this[T];this[T]=this.tree["get"+R+"Class"](y,this.isExpanded);c.replace(this[G],this[T]||"",U||"");k.set(this[G],this.tree["get"+R+"Style"](y,this.isExpanded)||{})},_updateLayout:function(){var y=this.getParent();y=!y||!y.rowNode||"none"==y.rowNode.style.display;c.toggle(this.domNode,"dijitTreeIsRoot",y);c.toggle(this.domNode,"dijitTreeIsLast",!y&&!this.getNextSibling())},_setExpando:function(y){var G=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];y=y?0:this.isExpandable?this.isExpanded?1:2:3;c.replace(this.expandoNode,G[y],G);this.expandoNodeText.innerHTML=["*","-","+","*"][y]},expand:function(){if(this._expandDeferred)return H(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");c.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var y=n.wipeIn({node:this.containerNode,duration:N.defaultDuration}),G=this._expandDeferred=new w(function(){y.stop()});E.after(y,"onEnd",function(){G.resolve(!0)},!0);y.play();return H(G)},collapse:function(){if(this._collapseDeferred)return H(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");c.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var y=n.wipeOut({node:this.containerNode,duration:N.defaultDuration}),G=this._collapseDeferred=new w(function(){y.stop()});E.after(y,"onEnd",
function(){G.resolve(!0)},!0);y.play();return H(G)},indent:0,setChildItems:function(y){var G=this.tree,R=G.model,T=[],U=G.focusedChild,Y=this.getChildren();x.forEach(Y,function(V){z.prototype.removeChild.call(this,V)},this);this.defer(function(){x.forEach(Y,function(V){if(!V._destroyed&&!V.getParent()){G.dndController.removeTreeNode(V);(function da(W){var aa=R.getIdentity(W.item),ca=G._itemNodesMap[aa];1==ca.length?delete G._itemNodesMap[aa]:(aa=x.indexOf(ca,W),-1!=aa&&ca.splice(aa,1));x.forEach(W.getChildren(),
da)})(V);if(G.persist){var Z=x.map(V.getTreePath(),function(W){return G.model.getIdentity(W)}).join("/"),X;for(X in G._openedNodes)X.substr(0,Z.length)==Z&&delete G._openedNodes[X];G._saveExpandedNodes()}G.lastFocusedChild&&!b.isDescendant(G.lastFocusedChild.domNode,G.domNode)&&delete G.lastFocusedChild;U&&!b.isDescendant(U.domNode,G.domNode)&&G.focus();V.destroyRecursive()}})});this.state="Loaded";y&&0<y.length?(this.isExpandable=!0,x.forEach(y,function(V){var Z=R.getIdentity(V),X=G._itemNodesMap[Z];
if(X)for(var ba=0;ba<X.length;ba++)if(X[ba]&&!X[ba].getParent()){var W=X[ba];W.set("indent",this.indent+1);break}W||(W=this.tree._createTreeNode({item:V,tree:G,isExpandable:R.mayHaveChildren(V),label:G.getLabel(V),labelType:G.model&&G.model.labelType||"text",tooltip:G.getTooltip(V),ownerDocument:G.ownerDocument,dir:G.dir,lang:G.lang,textDir:G.textDir,indent:this.indent+1}),X?X.push(W):G._itemNodesMap[Z]=[W]);this.addChild(W);(this.tree.autoExpand||this.tree._state(W))&&T.push(G._expandNode(W))},this),
x.forEach(this.getChildren(),function(V){V._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);y=a(T);this.tree._startPaint(y);return H(y)},getTreePath:function(){for(var y=this,G=[];y&&y!==this.tree.rootNode;)G.unshift(y.item),y=y.getParent();G.unshift(this.tree.rootNode.item);return G},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(y){this.inherited(arguments);var G=this.getChildren();0==G.length&&
(this.isExpandable=!1,this.collapse());x.forEach(G,function(R){R._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(y){this.labelNode.setAttribute("aria-selected",y?"true":"false");c.toggle(this.rowNode,"dijitTreeRowSelected",y)},focus:function(){A.focus(this.focusNode)}});t("dojo-bidi")&&M.extend({_setTextDirAttr:function(y){!y||this.textDir==y&&this._created||(this._set("textDir",y),this.applyTextDir(this.labelNode),x.forEach(this.getChildren(),
function(G){G.set("textDir",y)},this))}});var P=J("dijit.Tree",[O,S,L,Q],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:e,persist:!1,autoExpand:!1,dndController:r,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,
checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(y,G){u.publish(this.id,d.mixin({tree:this,event:y},G||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new w;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var y=
this;this.own(l(this.containerNode,l.selector(".dijitTreeNode",I.enter),function(T){y._onNodeMouseEnter(D.byNode(this),T)}),l(this.containerNode,l.selector(".dijitTreeNode",I.leave),function(T){y._onNodeMouseLeave(D.byNode(this),T)}),l(this.containerNode,l.selector(".dijitTreeRow",g.press),function(T){y._onNodePress(D.getEnclosingWidget(this),T)}),l(this.containerNode,l.selector(".dijitTreeRow",g),function(T){y._onClick(D.getEnclosingWidget(this),T)}),l(this.containerNode,l.selector(".dijitTreeRow",
"dblclick"),function(T){y._onDblClick(D.getEnclosingWidget(this),T)}));this.model||this._store2model();this.own(E.after(this.model,"onChange",d.hitch(this,"_onItemChange"),!0),E.after(this.model,"onChildrenChange",d.hitch(this,"_onItemChildrenChange"),!0),E.after(this.model,"onDelete",d.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){d.isString(this.dndController)&&(this.dndController=d.getObject(this.dndController));for(var G={},R=0;R<this.dndParams.length;R++)this[this.dndParams[R]]&&
(G[this.dndParams[R]]=this[this.dndParams[R]]);this.dndController=new this.dndController(this,G)}this._load();this.onLoadDeferred=H(this.pendingCommandsPromise);this.onLoadDeferred.then(d.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;B.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var y={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(y.mayHaveChildren=
d.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&(y.getChildren=d.hitch(this,function(G,R,T){this.getItemChildren(this._v10Compat&&G===this.model.root?null:G,R,T)}));this.model=new h(y);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(d.hitch(this,function(y){var G=this.rootNode=this.tree._createTreeNode({item:y,tree:this,isExpandable:!0,label:this.label||this.getLabel(y),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?
0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(G.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(G.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(G.containerNode.setAttribute("aria-labelledby",
this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),G.labelNode.setAttribute("role","presentation"),G.labelNode.removeAttribute("aria-selected"),G.containerNode.setAttribute("role","tree"),G.containerNode.setAttribute("aria-expanded","true"),G.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(G.domNode);y=this.model.getIdentity(y);this._itemNodesMap[y]?this._itemNodesMap[y].push(G):this._itemNodesMap[y]=[G];G._updateLayout();
this._expandNode(G).then(d.hitch(this,function(){this._destroyed||(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),d.hitch(this,function(y){console.error(this,": error loading root: ",y)}))},getNodesByItem:function(y){if(!y)return[];y=d.isString(y)?y:this.model.getIdentity(y);return[].concat(this._itemNodesMap[y])},_setSelectedItemAttr:function(y){this.set("selectedItems",[y])},_setSelectedItemsAttr:function(y){var G=this;return this.pendingCommandsPromise=
this.pendingCommandsPromise.always(d.hitch(this,function(){var R=x.map(y,function(U){return!U||d.isString(U)?U:G.model.getIdentity(U)}),T=[];x.forEach(R,function(U){T=T.concat(G._itemNodesMap[U]||[])});this.set("selectedNodes",T)}))},_setPathAttr:function(y){return y.length?H(this.set("paths",[y]).then(function(G){return G[0]})):H(this.set("paths",[]).then(function(G){return G[0]}))},_setPathsAttr:function(y){function G(T,U){var Y=T.shift(),V=x.filter(U,function(Z){return Z.getIdentity()==Y})[0];
if(V)return T.length?R._expandNode(V).then(function(){return G(T,V.getChildren())}):V;throw new P.PathError("Could not expand path at "+Y);}var R=this;return H(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return a(x.map(y,function(T){T=x.map(T,function(U){return U&&d.isObject(U)?R.model.getIdentity(U):U});if(T.length)return G(T,[R.rootNode]);throw new P.PathError("Empty path");}))}).then(function(T){R.set("selectedNodes",T);return R.paths}))},_setSelectedNodeAttr:function(y){this.set("selectedNodes",
[y])},_setSelectedNodesAttr:function(y){this.dndController.setSelection(y)},expandAll:function(){function y(R){return G._expandNode(R).then(function(){var T=x.filter(R.getChildren()||[],function(U){return U.isExpandable});return a(x.map(T,y))})}var G=this;return H(y(this.rootNode))},collapseAll:function(){function y(R){var T=x.filter(R.getChildren()||[],function(U){return U.isExpandable});T=a(x.map(T,y));return!R.isExpanded||R==G.rootNode&&!G.showRoot?T:T.then(function(){return G._collapseNode(R)})}
var G=this;return H(y(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(y){return this.model.getLabel(y)},getIconClass:function(y,G){return!y||this.model.mayHaveChildren(y)?G?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(y,G){(y=this._getNext(G))&&y.isTreeNode&&this.focusNode(y)},
_onUpArrow:function(y,G){if(y=G.getPreviousSibling())for(G=y;G.isExpandable&&G.isExpanded&&G.hasChildren();)G=G.getChildren(),G=G[G.length-1];else if(y=G.getParent(),this.showRoot||y!==this.rootNode)G=y;G&&G.isTreeNode&&this.focusNode(G)},_onRightArrow:function(y,G){G.isExpandable&&!G.isExpanded?this._expandNode(G):G.hasChildren()&&(G=G.getChildren()[0])&&G.isTreeNode&&this.focusNode(G)},_onLeftArrow:function(y,G){G.isExpandable&&G.isExpanded?this._collapseNode(G):(y=G.getParent())&&y.isTreeNode&&
(this.showRoot||y!==this.rootNode)&&this.focusNode(y)},focusLastChild:function(){var y=this._getLast();y&&y.isTreeNode&&this.focusNode(y)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var y=this.rootNode;y.isExpanded;){var G=y.getChildren();if(!G.length)break;y=G[G.length-1]}return y},_getNext:function(y){if(y.isExpandable&&y.isExpanded&&y.hasChildren())return y.getChildren()[0];for(;y&&y.isTreeNode;){var G=y.getNextSibling();if(G)return G;
y=y.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(y,G){return b.isDescendant(y,G.expandoNode)||b.isDescendant(y,G.expandoNodeText)},_onNodePress:function(y,G){this.focusNode(y)},__click:function(y,G,R,T){var U=this.isExpandoNode(G.target,y);y.isExpandable&&(R||U)?this._onExpandoClick({node:y}):(this._publish("execute",{item:y.item,node:y,evt:G}),this[T](y.item,y,G),this.focusNode(y));G.stopPropagation();G.preventDefault()},_onClick:function(y,G){this.__click(y,G,this.openOnClick,
"onClick")},_onDblClick:function(y,G){this.__click(y,G,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(y){y=y.node;this.focusNode(y);y.isExpanded?this._collapseNode(y):this._expandNode(y)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(y){B.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(y)},_getRootOrFirstNode:function(){B.deprecated(this.declaredClass+
"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(y){y._expandNodeDeferred&&delete y._expandNodeDeferred;if("Loading"!=y.state&&y.isExpanded){var G=y.collapse();this.onClose(y.item,y);this._state(y,!1);this._startPaint(G);return G}},_expandNode:function(y){if(y._expandNodeDeferred)return y._expandNodeDeferred;var G=this.model,R=y.item,T=this;y._loadDeferred||(y.markProcessing(),y._loadDeferred=new w,G.getChildren(R,function(U){y.unmarkProcessing();
y.setChildItems(U).then(function(){y._loadDeferred.resolve(U)})},function(U){console.error(T,": error loading "+y.label+" children: ",U);y._loadDeferred.reject(U)}));G=y._loadDeferred.then(d.hitch(this,function(){var U=y.expand();this.onOpen(y.item,y);this._state(y,!0);return U}));this._startPaint(G);return G},focusNode:function(y){for(var G=[],R=this.domNode;R&&R.tagName&&"IFRAME"!==R.tagName.toUpperCase();R=R.parentNode)G.push({domNode:R.contentWindow||R,scrollLeft:R.scrollLeft||0,scrollTop:R.scrollTop||
0});this.focusChild(y);this.defer(function(){for(var T=0,U=G.length;T<U;T++)G[T].domNode.scrollLeft=G[T].scrollLeft,G[T].domNode.scrollTop=G[T].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(y){var G=this.model.getIdentity(y);if(G=this._itemNodesMap[G]){var R=this.getLabel(y),T=this.getTooltip(y);x.forEach(G,function(U){U.set({item:y,label:R,tooltip:T});U._updateItemClasses(y)})}},_onItemChildrenChange:function(y,G){y=this.model.getIdentity(y);
(y=this._itemNodesMap[y])&&x.forEach(y,function(R){R.setChildItems(G)})},_onItemDelete:function(y){y=this.model.getIdentity(y);var G=this._itemNodesMap[y];G&&(x.forEach(G,function(R){this.dndController.removeTreeNode(R);var T=R.getParent();T&&T.removeChild(R);this.lastFocusedChild&&!b.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!b.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();R.destroyRecursive()},this),delete this._itemNodesMap[y])},
_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var y=K(this.cookieName);y&&x.forEach(y.split(","),function(G){this._openedNodes[G]=!0},this)}},_state:function(y,G){if(!this.persist)return!1;var R=x.map(y.getTreePath(),function(T){return this.model.getIdentity(T)},this).join("/");if(1===arguments.length)return this._openedNodes[R];G?this._openedNodes[R]=!0:delete this._openedNodes[R];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var y=
[],G;for(G in this._openedNodes)y.push(G);K(this.cookieName,y.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!d.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(y){y&&f.setMarginBox(this.domNode,y);this._nodePixelIndent=f.position(this.tree.indentDetector).w||
this._nodePixelIndent;this.expandChildrenDeferred.then(d.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},_outstandingPaintOperations:0,_startPaint:function(y){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var G=d.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});
m(y,G,G)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(y){return new M(y)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});t("dojo-bidi")&&P.extend({_setTextDirAttr:function(y){y&&this.textDir!=y&&(this._set("textDir",
y),this.rootNode.set("textDir",y))}});P.PathError=q("TreePathError");P._TreeNode=M;return P})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(x,E,K,J){return K("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(w){J.mixin(this,w);this.connects=[];w=this.store;if(!w.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");
w.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([E.after(w,"onNew",J.hitch(this,"onNewItem"),!0),E.after(w,"onDelete",J.hitch(this,"onDeleteItem"),!0),E.after(w,"onSet",J.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var w;w=this.connects.pop();)w.remove()},getRoot:function(w,a){this.root?w(this.root):this.store.fetch({query:this.query,onComplete:J.hitch(this,function(b){if(1!=b.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+b.length+
" items, but must return exactly one");this.root=b[0];w(this.root)}),onError:a})},mayHaveChildren:function(w){return x.some(this.childrenAttrs,function(a){return this.store.hasAttribute(w,a)},this)},getChildren:function(w,a,b){var c=this.store;if(c.isItemLoaded(w)){for(var f=[],k=0;k<this.childrenAttrs.length;k++){var q=c.getValues(w,this.childrenAttrs[k]);f=f.concat(q)}var n=0;this.deferItemLoadingUntilExpand||x.forEach(f,function(B){c.isItemLoaded(B)||n++});0==n?a(f):x.forEach(f,function(B,F){c.isItemLoaded(B)||
c.loadItem({item:B,onItem:function(d){f[F]=d;0==--n&&a(f)},onError:b})})}else{var t=J.hitch(this,arguments.callee);c.loadItem({item:w,onItem:function(B){t(B,a,b)},onError:b})}},isItem:function(w){return this.store.isItem(w)},fetchItemByIdentity:function(w){this.store.fetchItemByIdentity(w)},getIdentity:function(w){return this.store.getIdentity(w)},getLabel:function(w){return this.labelAttr?this.store.getValue(w,this.labelAttr):this.store.getLabel(w)},newItem:function(w,a,b){var c={parent:a,attribute:this.childrenAttrs[0]},
f;this.newItemIdAttr&&w[this.newItemIdAttr]?this.fetchItemByIdentity({identity:w[this.newItemIdAttr],scope:this,onItem:function(k){k?this.pasteItem(k,null,a,!0,b):(f=this.store.newItem(w,c))&&void 0!=b&&this.pasteItem(f,a,a,!1,b)}}):(f=this.store.newItem(w,c))&&void 0!=b&&this.pasteItem(f,a,a,!1,b)},pasteItem:function(w,a,b,c,f){var k=this.store,q=this.childrenAttrs[0];a&&x.forEach(this.childrenAttrs,function(t){if(k.containsValue(a,t,w)){if(!c){var B=x.filter(k.getValues(a,t),function(F){return F!=
w});k.setValues(a,t,B)}q=t}});if(b)if("number"==typeof f){var n=k.getValues(b,q).slice();n.splice(f,0,w);k.setValues(b,q,n)}else k.setValues(b,q,k.getValues(b,q).concat(w))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(w,a){a&&this.getChildren(a.item,J.hitch(this,function(b){this.onChildrenChange(a.item,b)}))},onDeleteItem:function(w){this.onDelete(w)},onSetItem:function(w,a){if(-1!=x.indexOf(this.childrenAttrs,a))this.getChildren(w,J.hitch(this,function(b){this.onChildrenChange(w,
b)}));else this.onChange(w)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(x,E,K,J,w){return E("dijit.tree.ForestStoreModel",w,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(a){this.root={store:this,root:!0,id:a.rootId,label:a.rootLabel,children:a.rootChildren}},mayHaveChildren:function(a){return a===this.root||this.inherited(arguments)},getChildren:function(a,b,c){a===
this.root?this.root.children?b(this.root.children):this.store.fetch({query:this.query,onComplete:J.hitch(this,function(f){this.root.children=f;b(f)}),onError:c}):this.inherited(arguments)},isItem:function(a){return a===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(a){if(a.identity==this.root.id){var b=a.scope||K.global;a.onItem&&a.onItem.call(b,this.root)}else this.inherited(arguments)},getIdentity:function(a){return a===this.root?this.root.id:this.inherited(arguments)},getLabel:function(a){return a===
this.root?this.root.label:this.inherited(arguments)},newItem:function(a,b,c){return b===this.root?(this.onNewRootItem(a),this.store.newItem(a)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(a,b,c,f,k){if(b===this.root&&!f)this.onLeaveRoot(a);this.inherited(arguments,[a,b===this.root?null:b,c===this.root?null:c,f,k]);if(c===this.root)this.onAddToRoot(a)},onAddToRoot:function(a){console.log(this,": item ",a," added to root")},onLeaveRoot:function(a){console.log(this,": item ",
a," removed from root")},_requeryTop:function(){var a=this.root.children||[];this.store.fetch({query:this.query,onComplete:J.hitch(this,function(b){this.root.children=b;if(a.length!=b.length||x.some(a,function(c,f){return b[f]!=c}))this.onChildrenChange(this.root,b)})})},onNewItem:function(a,b){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(a){-1!=x.indexOf(this.root.children,a)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(a,b,c,f){this._requeryTop();this.inherited(arguments)}})})},
"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),function(x,E,K,J,w,a,b,c,f,k,q){return E("dijit.tree._dndSelector",q,{constructor:function(){this.selection={};this.anchor=null;this.events.push(c(this.tree.domNode,f.press,J.hitch(this,"onMouseDown")),c(this.tree.domNode,f.release,J.hitch(this,"onMouseUp")),c(this.tree.domNode,f.move,J.hitch(this,
"onMouseMove")),c(this.tree.domNode,k.press,J.hitch(this,"onClickPress")),c(this.tree.domNode,k.release,J.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var n=[],t=this.selection,B;for(B in t)n.push(t[B]);return n},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(n,t){this.setSelection(this.getSelectedTreeNodes().concat([n]));t&&(this.anchor=n);return n},removeTreeNode:function(n){var t=
x.filter(this.getSelectedTreeNodes(),function(B){return!a.isDescendant(B.domNode,n.domNode)});this.setSelection(t);return n},isTreeNodeSelected:function(n){return n.id&&!!this.selection[n.id]},setSelection:function(n){var t=this.getSelectedTreeNodes();x.forEach(this._setDifference(t,n),J.hitch(this,function(B){B.setSelected(!1);this.anchor==B&&delete this.anchor;delete this.selection[B.id]}));x.forEach(this._setDifference(n,t),J.hitch(this,function(B){B.setSelected(!0);this.selection[B.id]=B}));this._updateSelectionProperties()},
_setDifference:function(n,t){x.forEach(t,function(B){B.__exclude__=!0});n=x.filter(n,function(B){return!B.__exclude__});x.forEach(t,function(B){delete B.__exclude__});return n},_updateSelectionProperties:function(){var n=this.getSelectedTreeNodes(),t=[],B=[];x.forEach(n,function(F){var d=F.getTreePath();B.push(F);t.push(d)},this);n=x.map(B,function(F){return F.item});this.tree._set("paths",t);this.tree._set("path",t[0]||[]);this.tree._set("selectedNodes",B);this.tree._set("selectedNode",B[0]||null);
this.tree._set("selectedItems",n);this.tree._set("selectedItem",n[0]||null)},onClickPress:function(n){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(n.target,this.current))){"mousedown"==n.type&&b.isLeft(n)&&n.preventDefault();var t="keydown"==n.type?this.tree.focusedChild:this.current;if(t){var B=w.getCopyKeyState(n),F=t.id;this.singular||n.shiftKey||!this.selection[F]?(this._doDeselect=!1,this.userSelect(t,B,n.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(n){this._doDeselect&&
(this._doDeselect=!1,this.userSelect("keyup"==n.type?this.tree.focusedChild:this.current,w.getCopyKeyState(n),n.shiftKey))},onMouseMove:function(){this._doDeselect=!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(n,t){if(n===t)return 0;if("sourceIndex"in document.documentElement)return n.sourceIndex-t.sourceIndex;if("compareDocumentPosition"in document.documentElement)return n.compareDocumentPosition(t)&2?1:-1;if(document.createRange){var B=doc.createRange();B.setStartBefore(n);
n=doc.createRange();n.setStartBefore(t);return B.compareBoundaryPoints(B.END_TO_END,n)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");},userSelect:function(n,t,B){if(this.singular)this.anchor==n&&t?this.selectNone():(this.setSelection([n]),this.anchor=n);else if(B&&this.anchor){t=this._compareNodes(this.anchor.rowNode,n.rowNode);B=this.anchor;0>t?t=B:(t=n,n=B);for(B=[];t!=n;)B.push(t),t=this.tree._getNext(t);B.push(n);this.setSelection(B)}else this.selection[n.id]&&
t?this.removeTreeNode(n):t?this.addTreeNode(n,!0):(this.setSelection([n]),this.anchor=n)},getItem:function(n){return{data:this.selection[n],type:["treeNode"]}},forInSelectedItems:function(n,t){t=t||K.global;for(var B in this.selection)n.call(t,this.getItem(B),B,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(x,E,K,J,w,a){return E("dijit.tree._dndContainer",null,{constructor:function(b,c){this.tree=
b;this.node=b.domNode;J.mixin(this,c);this.containerState="";K.add(this.node,"dojoDndContainer");this.events=[w(this.node,a.enter,J.hitch(this,"onOverEvent")),w(this.node,a.leave,J.hitch(this,"onOutEvent")),x.after(this.tree,"_onNodeMouseEnter",J.hitch(this,"onMouseOver"),!0),x.after(this.tree,"_onNodeMouseLeave",J.hitch(this,"onMouseOut"),!0),w(this.node,"dragstart, selectstart",function(f){f.preventDefault()})]},destroy:function(){for(var b;b=this.events.pop();)b.remove();this.node=this.parent=
null},onMouseOver:function(b){this.current=b},onMouseOut:function(){this.current=null},_changeState:function(b,c){var f="dojoDnd"+b;b=b.toLowerCase()+"State";K.replace(this.node,f+c,f+this[b]);this[b]=c},_addItemClass:function(b,c){K.add(b,"dojoDndItem"+c)},_removeItemClass:function(b,c){K.remove(b,"dojoDndItem"+c)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang",
"dojo/_base/array","dojo/Deferred","jimu/utils","jimu/ServiceBrowserRule"],function(x,E,K,J,w){var a={combineRules:function(b){var c=new w;E.forEach(b,function(f){E.forEach(f.leafTypes,function(k){0>c.leafTypes.indexOf(k)&&c.leafTypes.push(k)});E.forEach(f.serviceTypes,function(k){0>c.serviceTypes.indexOf(k)&&c.serviceTypes.push(k)})});c.getMatchedRule=function(f){var k=null;E.some(b,function(q){return q.isUrlContainsServiceType(f)?(k=q,!0):!1});return k};c.getItem=function(f){var k=null;return k=
(k=c.getMatchedRule(f))?k.getItem(f):c.defaultGetItem(f)};c.getSubItemUrls=function(f){var k=null;return k=(k=c.getMatchedRule(f))?k.getSubItemUrls(f):c.defaultGetSubItemUrls(f)};c.getIconImageName=function(f,k){var q="";if(f.url){var n=c.getMatchedRule(f.url);n&&"function"===typeof n.getIconImageName&&(q=n.getIconImageName(f,k))}return q};return c},getFeaturelayerServiceBrowserRule:function(b,c,f){b=x.clone(b);var k=["point","polyline","polygon"];x.isArrayLike(b)&&0<b.length?(b=E.filter(b,function(q){return 0<=
k.indexOf(q)}),0===b.length&&(b=k)):b=k;return a._getFeaturelayerServiceBrowserRule(b,c,f)},_getFeaturelayerServiceBrowserRule:function(b,c,f){return new w({types:b,leafTypes:["Feature Layer","Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",getItem:function(k){var q=new K;this.isUrlEndWithServiceType(k,this.serviceTypes)?q=this.defaultGetItem(k):this.getRestInfo(k).then(x.hitch(this,function(n){n=this._getItemByLayerDefinition(k,
n);q.resolve(n)}),x.hitch(this,function(n){q.reject(n)}));return q},getSubItemUrls:function(k){var q=new K;return q=this.isUrlEndWithServiceType(k)?this._getSubUrlsByServiceUrl(k):this._getSubUrlsByGroupUrl(k)},getIconImageName:function(k,q){var n="";"MapServer"===k.type||"FeatureServer"===k.type?n=q?"mapserver_open.png":"mapserver_close.png":k.type===this._groupLayerType?n=q?"group_layer2.png":"group_layer1.png":k.type===this._featureLayerType?(k=J.getTypeByGeometryType(k.definition&&k.definition.geometryType),
"point"===k?n="point_layer1.png":"polyline"===k?n="line_layer1.png":"polygon"===k&&(n="polygon_layer1.png")):k.type===this._tableType?n="table.png":"root"===k.type&&this._currentUrl&&E.some(this.serviceTypes,x.hitch(this,function(t){return J.isStringEndWith(this._currentUrl,"/"+t)}))&&(n=q?"mapserver_open.png":"mapserver_close.png");return n},_getSubUrlsByServiceUrl:function(k){var q=new K;this.getRestInfo(k).then(x.hitch(this,function(n){var t=[];E.forEach(n.layers,x.hitch(this,function(B){0<=B.parentLayerId||
t.push(k+"/"+B.id)}));f&&E.forEach(n.tables,x.hitch(this,function(B){0<=B.parentLayerId||t.push(k+"/"+B.id)}));q.resolve(t)}),x.hitch(this,function(n){q.reject(n)}));return q},_getSubUrlsByGroupUrl:function(k){var q=new K;this.getRestInfo(k).then(x.hitch(this,function(n){var t=[];if(n.type===this._groupLayerType){var B=this._getServiceUrlByLayerUrl(k);t=E.map(n.subLayers||[],x.hitch(this,function(F){return B+"/"+F.id}))}q.resolve(t)}),x.hitch(this,function(n){q.reject(n)}));return q},_getItemByLayerDefinition:function(k,
q){var n=null,t=q.type;if(t===this._groupLayerType)n={name:q.name,type:t,url:k,definition:q};else if(t===this._featureLayerType||t===this._tableType){var B=!1;t===this._featureLayerType?B=this._validateEsriGeometryType(q.geometryType):t===this._tableType&&(B=!0);B&&(B=!1,(B=c?J.isFeaturelayerUrlSupportQuery(k,q.capabilities):!0)&&(n={name:q.name,type:t,url:k,definition:q}))}return n},_validateEsriGeometryType:function(k){k=J.getTypeByGeometryType(k);return 0<=this.types.indexOf(k)},_getServiceUrlByLayerUrl:function(k){for(var q=
"",n=0;n<this.serviceTypes.length;n++){var t=this.serviceTypes[n].toLowerCase(),B=k.toLowerCase().lastIndexOf("/"+t+"/");if(0<=B){q=k.slice(0,B+t.length+1);break}}return q}})},getGeocodeServiceBrowserRule:function(){return new w({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},getGpServiceBrowserRule:function(){return new w({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(b){var c=new K;this.isUrlEndWithServiceType(b)?c=this.defaultGetItem(b):this.getRestInfo(b).then(x.hitch(this,
function(f){c.resolve({name:f.displayName||f.name,type:"GPTask",url:b,definition:f})}),x.hitch(this,function(f){c.reject(f)}));return c},getSubItemUrls:function(b){var c=new K;this.isUrlEndWithServiceType(b)?this.getRestInfo(b).then(x.hitch(this,function(f){f=E.map(f.tasks||[],x.hitch(this,function(k){return b+"/"+k}));c.resolve(f)}),x.hitch(this,function(f){c.reject(f)})):c.resolve([]);return c},getIconImageName:function(b,c){c="";"GPServer"===b.type?c="toolbox.png":"GPTask"===b.type&&(c="tool.png");
return c}})},getImageServiceBrowserRule:function(b){return new w({leafTypes:["ImageServer"],serviceTypes:["ImageServer"],getItem:function(c){var f=new K;this.isUrlEndWithServiceType(c)?this.defaultGetItem(c).then(x.hitch(this,function(k){b?J.isImageServiceSupportQuery(k.definition.capabilities)?f.resolve(k):f.resolve(null):f.resolve(k)}),x.hitch(this,function(k){f.reject(k)})):f.resolve(null);return f},getIconImageName:function(c,f){f="";"ImageServer"===c.type&&(f="image_layer.png");return f}})},
getQueryableServiceBrowserRule:function(){var b=a.getFeaturelayerServiceBrowserRule(["point","polyline","polygon"],!0,!0),c=a.getImageServiceBrowserRule(!0);return a.combineRules([b,c])}};return a})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),function(x,E,K,J,w,a,b){return x([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(c){E.mixin(this,c);E.isArrayLike(this.leafTypes)||
(this.leafTypes=[]);E.isArrayLike(this.serviceTypes)||(this.serviceTypes=[])},getItem:function(c){return this.defaultGetItem(c)},getSubItemUrls:function(c){return this.defaultGetSubItemUrls(c)},getIconImageName:function(c,f){return""},defaultGetItem:function(c){var f=new J;c=c.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(c)){var k=c.split("/"),q=k[k.length-1],n=k[k.length-2];this.getRestInfo(c).then(E.hitch(this,function(t){f.resolve({name:n,type:q,url:c,definition:t})}),E.hitch(this,function(t){console.error(t);
f.reject({errorCode:"NETWORK_ERROR",error:t})}))}else f.resolve(null);return f},defaultGetSubItemUrls:function(c){c=new J;c.resolve([]);return c},getRestInfo:function(c){var f=new J;c=c.replace(/\/*$/g,"");var k=this._restInfoCache[c];if(k)f.resolve(k);else{k={url:c,content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4};var q=b.findCredential(c);q&&q.token&&(k.content.token=q.token);a(k).then(E.hitch(this,function(n){this._restInfoCache[c]=n;f.resolve(n)}),function(n){f.reject(n)})}return f},
isServiceTypeSupported:function(c){c=c.toLowerCase();return K.some(this.serviceTypes,E.hitch(this,function(f){return f.toLowerCase()===c}))},isUrlEndWithServiceType:function(c){return K.some(this.serviceTypes,E.hitch(this,function(f){return w.isStringEndWith(c,"/"+f)}))},isUrlContainsServiceType:function(c){c=c.toLowerCase();return K.some(this.serviceTypes,E.hitch(this,function(f){f=f.toLowerCase();return 0<=c.indexOf("/"+f)}))}})})},"jimu/dijit/_GpServiceChooserContent":function(){define(["dojo/_base/declare",
"./_BasicServiceChooserContent","./GpServiceBrowser"],function(x,E,K){return x([E],{baseClass:"jimu-gp-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/myservice/GpServer","http://sampleserver6.arcgisonline.com/arcgis/rest/services/Elevation/ESRI_Elevation_World/GPServer/Viewshed"],_createServiceBrowser:function(J){return new K(J)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F){return x([E,K,J,a],{templateString:w,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=k.mixin({},window.jimuNls.common);this.nls=k.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
c.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(d){var l=new b;(this.url=d)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),l=this._onBtnValidateClick()):l.reject();return l},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?f.forEach(this._examples,k.hitch(this,function(l){c.create("div",{innerHTML:l,
"class":"example-url"},this.exampleTd)})):c.setStyle(this.exampleTr,"display","none");var d={multiple:this.multiple,_onTreeClick:k.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(d);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(n.after(this.urlInput,"validator",k.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(q(this.serviceBrowser,"error",k.hitch(this,
this._onServiceBrowserError)))},_createServiceBrowser:function(d){},_validateUrl:function(d){d=d.replace(/\/*$/g,"");if((d=d.match(/\/rest\/services\/*(.*)/gi))&&0<d.length)if(d=d[0].replace(/\/rest\/services\/*/,"")){var l=d.split("/");if(1===l.length)return!0;if(2===l.length)return this.serviceBrowser.isServiceTypeSupported(l[1]);if(3<=l.length)return d=this.serviceBrowser.isServiceTypeSupported(l[1]),l=this.serviceBrowser.isServiceTypeSupported(l[2]),d||l}else return!0;else return!1},_afterUrlValidate:function(d){d&&
(d=this.urlInput.get("value"),d=this._validateUrl(d));d?c.removeClass(this.btnValidate,"jimu-state-disabled"):c.addClass(this.btnValidate,"jimu-state-disabled");return d},_onServiceBrowserError:function(d){this._showErrorMessage(d)},_showErrorMessage:function(d){d&&"string"===typeof d?(this.errorNode.innerHTML=d,c.addClass(this.errorSection,"visible")):c.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";c.removeClass(this.errorSection,"visible")},
_onBtnValidateClick:function(){this._clearErrorMessage();var d=new b;if(this.urlInput.validate()){var l=this.urlInput.get("value");this.serviceBrowser.setUrl(l).then(k.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();d.resolve()}),k.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();d.reject()}));this.emit("validate-click")}else d.reject();return d},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?c.removeClass(this.btnOk,"jimu-state-disabled"):
c.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var d=this.getSelectedItems();0<d.length&&this.emit("ok",d)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"jimu/dijit/PageUtils":function(){define([],function(){var x={};x.Orientation={Landscape:{Type:"Landscape",Text:window.jimuNls.report.landscape},Portrait:{Type:"Portrait",Text:window.jimuNls.report.portrait}};x.PageSizes={A0:{Height:46.8,Width:33.1,SizeName:window.jimuNls.report.a0,
MapLayout:"MAP_ONLY"},A1:{Height:33.1,Width:23.4,SizeName:window.jimuNls.report.a1,MapLayout:"MAP_ONLY"},A2:{Height:23.4,Width:16.5,SizeName:window.jimuNls.report.a2,MapLayout:"MAP_ONLY"},A3:{Height:16.5,Width:11.7,SizeName:window.jimuNls.report.a3,MapLayout:"A3"},A4:{Height:11.7,Width:8.3,SizeName:window.jimuNls.report.a4,MapLayout:"A4"},A5:{Height:8.3,Width:5.8,SizeName:window.jimuNls.report.a5,MapLayout:"MAP_ONLY"},Letter_ANSI_A:{Height:11,Width:8.5,SizeName:window.jimuNls.report.letter+" "+window.jimuNls.report.ansi_a,
MapLayout:"Letter ANSI A"},Tabloid_ANSI_B:{Height:17,Width:11,SizeName:window.jimuNls.report.tabloid+" "+window.jimuNls.report.ansi_b,MapLayout:"Tabloid ANSI B"},ANSI_C:{Height:22,Width:17,SizeName:window.jimuNls.report.ansi_c,MapLayout:"MAP_ONLY"},ANSI_D:{Height:34,Width:22,SizeName:window.jimuNls.report.ansi_d,MapLayout:"MAP_ONLY"},ANSI_E:{Height:44,Width:34,SizeName:window.jimuNls.report.ansi_e,MapLayout:"MAP_ONLY"},Legal:{Height:14,Width:8.5,SizeName:window.jimuNls.report.legal,MapLayout:"MAP_ONLY"},
Custom:window.jimuNls.common.custom};x.getPageSizeInPixels=function(E,K){return{Height:E.Height*K,Width:E.Width*K}};return x})},"dijit/Editor":function(){define("require dojo/_base/array dojo/_base/declare dojo/Deferred dojo/i18n dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/keys dojo/_base/lang dojo/sniff dojo/string dojo/topic ./_Container ./Toolbar ./ToolbarSeparator ./layout/_LayoutWidget ./form/ToggleButton ./_editor/_Plugin ./_editor/plugins/EnterKeyHandling ./_editor/html ./_editor/range ./_editor/RichText ./main dojo/i18n!./_editor/nls/commands".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F,d,l,u,I,m,g,A,D,N,O){function L(C){return new m({command:C.name})}function z(C){return new m({buttonClass:I,command:C.name})}K=K("dijit.Editor",N,{plugins:null,extraPlugins:null,constructor:function(){q.isArray(this.plugins)||(this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",g]);this._plugins=
[];this._editInterval=1E3*this.editActionInterval;if(n("ie")||n("trident")||n("edge"))this.events.push("onBeforeDeactivate"),this.events.push("onBeforeActivate")},postMixInProperties:function(){this.setValueDeferred=new J;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);q.isArray(this.extraPlugins)&&(this.plugins=this.plugins.concat(this.extraPlugins));this.commands=w.getLocalization("dijit._editor",
"commands",this.lang);n("webkit")&&f.set(this.domNode,"KhtmlUserSelect","none")},startup:function(){this.inherited(arguments);this.toolbar||(this.toolbar=new d({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,"aria-label":this.id}),this.header.appendChild(this.toolbar.domNode));E.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(!0);b.add(this.iframe.parentNode,"dijitEditorIFrameContainer");b.add(this.iframe,"dijitEditorIFrame");a.set(this.iframe,"allowTransparency",
!0);this.toolbar.startup();this.onNormalizedDisplayChanged()},destroy:function(){E.forEach(this._plugins,function(C){C&&C.destroy&&C.destroy()});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments)},addPlugin:function(C,Q){var S=q.isString(C)?{name:C}:q.isFunction(C)?{ctor:C}:C;if(!S.setEditor){var p={args:S,plugin:null,editor:this};S.name&&(m.registry[S.name]?p.plugin=m.registry[S.name](S):B.publish(O._scopeName+".Editor.getPlugin",p));if(!p.plugin)try{var e=
S.ctor||q.getObject(S.name)||x(S.name);e&&(p.plugin=new e(S))}catch(v){throw Error(this.id+": cannot find plugin ["+S.name+"]");}if(!p.plugin)throw Error(this.id+": cannot find plugin ["+S.name+"]");C=p.plugin}1<arguments.length?this._plugins[Q]=C:this._plugins.push(C);C.setEditor(this);q.isFunction(C.setToolbar)&&C.setToolbar(this.toolbar)},resize:function(C){C&&u.prototype.resize.apply(this,arguments)},layout:function(){var C=this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+c.getPadBorderExtents(this.iframe.parentNode).h+
c.getMarginExtents(this.iframe.parentNode).h);this.editingArea.style.height=C+"px";this.iframe&&(this.iframe.style.height="100%");this._layoutMode=!0},_onIEMouseDown:function(C){var Q,S=this.document.body,p=S.clientWidth,e=S.clientHeight,v=S.clientLeft,h=S.offsetWidth,r=S.offsetHeight,H=S.offsetLeft;/^rtl$/i.test(S.dir||"")?p<h&&C.x>p&&C.x<h&&(Q=!0):C.x<v&&C.x>H&&(Q=!0);Q||e<r&&C.y>e&&C.y<r&&(Q=!0);Q||(delete this._cursorToStart,delete this._savedSelection,"BODY"==C.target.tagName&&this.defer("placeCursorAtEnd"),
this.inherited(arguments))},onBeforeActivate:function(){this._restoreSelection()},onBeforeDeactivate:function(C){this.customUndo&&this.endEditing(!0);"BODY"!=C.target.tagName&&this._saveSelection()},customUndo:!0,editActionInterval:3,beginEditing:function(C){this._inEditing||(this._inEditing=!0,this._beginEditing(C));0<this.editActionInterval&&(this._editTimer&&this._editTimer.remove(),this._editTimer=this.defer("endEditing",this._editInterval))},_steps:[],_undoedSteps:[],execCommand:function(C){if(!this.customUndo||
"undo"!=C&&"redo"!=C){this.customUndo&&(this.endEditing(),this._beginEditing());var Q=this.inherited(arguments);this.customUndo&&this._endEditing();return Q}return this[C]()},_pasteImpl:function(){return this._clipboardCommand("paste")},_cutImpl:function(){return this._clipboardCommand("cut")},_copyImpl:function(){return this._clipboardCommand("copy")},_clipboardCommand:function(C){try{var Q=this.document.execCommand(C,!1,null);if(n("webkit")&&!Q)throw{};}catch(S){Q=t.substitute,alert(Q(this.commands.systemShortcut,
[this.commands[C],Q(this.commands[n("mac")?"appleKey":"ctrlKey"],[{cut:"X",copy:"C",paste:"V"}[C]])])),Q=!1}return Q},queryCommandEnabled:function(C){return!this.customUndo||"undo"!=C&&"redo"!=C?this.inherited(arguments):"undo"==C?1<this._steps.length:0<this._undoedSteps.length},_moveToBookmark:function(C){var Q=C.mark,S=C.mark;C=C.isCollapsed;var p;if(S)if(9>n("ie")||9===n("ie")&&n("quirks"))if(q.isArray(S))Q=[],E.forEach(S,function(h){Q.push(D.getNode(h,this.editNode))},this),this.selection.moveToBookmark({mark:Q,
isCollapsed:C});else{if(S.startContainer&&S.endContainer&&(p=D.getSelection(this.window))&&p.removeAllRanges){p.removeAllRanges();C=D.create(this.window);var e=D.getNode(S.startContainer,this.editNode);var v=D.getNode(S.endContainer,this.editNode);e&&v&&(C.setStart(e,S.startOffset),C.setEnd(v,S.endOffset),p.addRange(C))}}else(p=D.getSelection(this.window))&&p.removeAllRanges&&(p.removeAllRanges(),C=D.create(this.window),e=D.getNode(S.startContainer,this.editNode),v=D.getNode(S.endContainer,this.editNode),
e&&v&&(C.setStart(e,S.startOffset),C.setEnd(v,S.endOffset),p.addRange(C)))},_changeToStep:function(C,Q){this.setValue(Q.text);(C=Q.bookmark)&&this._moveToBookmark(C)},undo:function(){var C=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var Q=this._steps.pop();Q&&0<this._steps.length&&(this.focus(),this._changeToStep(Q,this._steps[this._steps.length-1]),this._undoedSteps.push(Q),this.onDisplayChanged(),delete this._undoRedoActive,C=!0);delete this._undoRedoActive}return C},
redo:function(){var C=!1;if(!this._undoRedoActive){this._undoRedoActive=!0;this.endEditing(!0);var Q=this._undoedSteps.pop();Q&&0<this._steps.length&&(this.focus(),this._changeToStep(this._steps[this._steps.length-1],Q),this._steps.push(Q),this.onDisplayChanged(),C=!0);delete this._undoRedoActive}return C},endEditing:function(C){this._editTimer&&(this._editTimer=this._editTimer.remove());this._inEditing&&(this._endEditing(C),this._inEditing=!1)},_getBookmark:function(){var C=this.selection.getBookmark(),
Q=[];if(C&&C.mark){var S=C.mark;if(9>n("ie")||9===n("ie")&&n("quirks")){var p=D.getSelection(this.window);if(q.isArray(S))E.forEach(C.mark,function(v){Q.push(D.getIndex(v,this.editNode).o)},this),C.mark=Q;else if(p){var e;p.rangeCount&&(e=p.getRangeAt(0));C.mark=e?e.cloneRange():this.selection.getBookmark()}}try{C.mark&&C.mark.startContainer&&(Q=D.getIndex(C.mark.startContainer,this.editNode).o,C.mark={startContainer:Q,startOffset:C.mark.startOffset,endContainer:C.mark.endContainer===C.mark.startContainer?
Q:D.getIndex(C.mark.endContainer,this.editNode).o,endOffset:C.mark.endOffset})}catch(v){C.mark=null}}return C},_beginEditing:function(){0===this._steps.length&&this._steps.push({text:A.getChildrenHtml(this.editNode),bookmark:this._getBookmark()})},_endEditing:function(){var C=A.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:C,bookmark:this._getBookmark()})},onKeyDown:function(C){n("ie")||this.iframe||C.keyCode!=k.TAB||this.tabIndent||this._saveSelection();if(this.customUndo){var Q=
C.keyCode;if(C.ctrlKey&&!C.shiftKey&&!C.altKey){if(90==Q||122==Q){C.stopPropagation();C.preventDefault();this.undo();return}if(89==Q||121==Q){C.stopPropagation();C.preventDefault();this.redo();return}}this.inherited(arguments);switch(Q){case k.ENTER:case k.BACKSPACE:case k.DELETE:this.beginEditing();break;case 88:case 86:if(C.ctrlKey&&!C.altKey&&!C.metaKey){this.endEditing();88==C.keyCode?this.beginEditing("cut"):this.beginEditing("paste");this.defer("endEditing",1);break}default:if(!C.ctrlKey&&!C.altKey&&
!C.metaKey&&(C.keyCode<k.F1||C.keyCode>k.F15)){this.beginEditing();break}case k.ALT:this.endEditing();break;case k.UP_ARROW:case k.DOWN_ARROW:case k.LEFT_ARROW:case k.RIGHT_ARROW:case k.HOME:case k.END:case k.PAGE_UP:case k.PAGE_DOWN:this.endEditing(!0);case k.CTRL:case k.SHIFT:case k.TAB:}}else this.inherited(arguments)},_onBlur:function(){this.inherited(arguments);this.endEditing(!0)},_saveSelection:function(){try{this._savedSelection=this._getBookmark()}catch(C){}},_restoreSelection:function(){this._savedSelection&&
(delete this._cursorToStart,this.selection.isCollapsed()&&this._moveToBookmark(this._savedSelection),delete this._savedSelection)},onClick:function(){this.endEditing(!0);this.inherited(arguments)},replaceValue:function(C){this.customUndo?this.isClosed?this.setValue(C):(this.beginEditing(),C||(C="\x26#160;"),this.setValue(C),this.endEditing()):this.inherited(arguments)},_setDisabledAttr:function(C){this.setValueDeferred.then(q.hitch(this,function(){!this.disabled&&C||!this._buttonEnabledPlugins&&C?
E.forEach(this._plugins,function(Q){Q.set("disabled",!0)}):this.disabled&&!C&&E.forEach(this._plugins,function(Q){Q.set("disabled",!1)})}));this.inherited(arguments)},_setStateClass:function(){try{this.inherited(arguments),this.document&&this.document.body&&(f.set(this.document.body,"color",f.get(this.iframe,"color")),f.set(this.document.body,"background-color",f.get(this.iframe,"background-color")))}catch(C){}}});q.mixin(m.registry,{undo:L,redo:L,cut:L,copy:L,paste:L,insertOrderedList:L,insertUnorderedList:L,
indent:L,outdent:L,justifyCenter:L,justifyFull:L,justifyLeft:L,justifyRight:L,"delete":L,selectAll:L,removeFormat:L,unlink:L,insertHorizontalRule:L,bold:z,italic:z,underline:z,strikethrough:z,subscript:z,superscript:z,"|":function(){return new m({setEditor:function(C){this.editor=C;this.button=new l({ownerDocument:C.ownerDocument})}})}});return K})},"dijit/Toolbar":function(){define("require dojo/_base/declare dojo/has dojo/keys dojo/ready ./_Widget ./_KeyNavContainer ./_TemplatedMixin".split(" "),
function(x,E,K,J,w,a,b,c){K("dijit-legacy-requires")&&w(0,function(){x(["dijit/ToolbarSeparator"])});return E("dijit.Toolbar",[a,c,b],{templateString:'\x3cdiv class\x3d"dijit" role\x3d"toolbar" tabIndex\x3d"${tabIndex}" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e',baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev()},_onRightArrow:function(){this.focusNext()}})})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],
function(x,E,K,J){return x("dijit.ToolbarSeparator",[K,J],{templateString:'\x3cdiv class\x3d"dijitToolbarSeparator dijitInline" role\x3d"presentation"\x3e\x3c/div\x3e',buildRendering:function(){this.inherited(arguments);E.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"dijit/_editor/_Plugin":function(){define(["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../Destroyable","../form/Button"],function(x,E,K,J,w){E=E("dijit._editor._Plugin",J,{constructor:function(a){this.params=
a||{};K.mixin(this,this.params);this._attrPairNames={}},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:!0,buttonClass:w,disabled:!1,getLabel:function(a){return this.editor.commands[a]},_initButton:function(){if(this.command.length){var a=this.getLabel(this.command),b=this.editor,c=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);this.button||(a=K.mixin({label:a,ownerDocument:b.ownerDocument,dir:b.dir,
lang:b.lang,showLabel:!1,iconClass:c,dropDown:this.dropDown,tabIndex:"-1"},this.params||{}),delete a.name,this.button=new this.buttonClass(a))}this.get("disabled")&&this.button&&this.button.set("disabled",this.get("disabled"))},destroy:function(){this.dropDown&&this.dropDown.destroyRecursive();this.inherited(arguments)},connect:function(a,b,c){this.own(x.connect(a,b,this,c))},updateState:function(){var a=this.editor,b=this.command;if(a&&a.isLoaded&&b.length){var c=this.get("disabled");if(this.button)try{var f=
a._implCommand(b);var k=!c&&(this[f]?this[f](b):a.queryCommandEnabled(b));this.enabled!==k&&(this.enabled=k,this.button.set("disabled",!k));if(k&&"boolean"==typeof this.button.checked){var q=a.queryCommandState(b);this.checked!==q&&(this.checked=q,this.button.set("checked",a.queryCommandState(b)))}}catch(n){console.log(n)}}},setEditor:function(a){this.editor=a;this._initButton();this.button&&this.useDefaultCommand&&(this.editor.queryCommandAvailable(this.command)?this.own(this.button.on("click",K.hitch(this.editor,
"execCommand",this.command,this.commandArg))):this.button.domNode.style.display="none");this.own(this.editor.on("NormalizedDisplayChanged",K.hitch(this,"updateState")))},setToolbar:function(a){this.button&&a.addChild(this.button)},set:function(a,b){if("object"===typeof a){for(var c in a)this.set(c,a[c]);return this}c=this._getAttrNames(a);if(this[c.s])var f=this[c.s].apply(this,Array.prototype.slice.call(arguments,1));else this._set(a,b);return f||this},get:function(a){var b=this._getAttrNames(a);
return this[b.g]?this[b.g]():this[a]},_setDisabledAttr:function(a){this._set("disabled",a);this.updateState()},_getAttrNames:function(a){var b=this._attrPairNames;if(b[a])return b[a];var c=a.charAt(0).toUpperCase()+a.substr(1);return b[a]={s:"_set"+c+"Attr",g:"_get"+c+"Attr"}},_set:function(a,b){this[a]=b}});E.registry={};return E})},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dojo/_base/declare dojo/dom-construct dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/_base/window dojo/window ../_Plugin ../RichText ../range".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q){return x("dijit._editor.plugins.EnterKeyHandling",f,{blockNodeForEnter:"BR",constructor:function(n){n&&("blockNodeForEnter"in n&&(n.blockNodeForEnter=n.blockNodeForEnter.toUpperCase()),J.mixin(this,n))},setEditor:function(n){if(this.editor!==n)if(this.editor=n,"BR"==this.blockNodeForEnter)this.editor.customUndo=!0,n.onLoadDeferred.then(J.hitch(this,function(B){this.own(w(n.document,"keydown",J.hitch(this,function(F){if(F.keyCode==K.ENTER){var d=J.mixin({},F);d.shiftKey=
!0;this.handleEnterKey(d)||(F.stopPropagation(),F.preventDefault())}})));9<=a("ie")&&10>=a("ie")&&this.own(w(n.document,"paste",J.hitch(this,function(F){setTimeout(J.hitch(this,function(){var d=this.editor.document.selection.createRange();d.move("character",-1);d.select();d.move("character",1);d.select()}),0)})));return B}));else if(this.blockNodeForEnter){var t=J.hitch(this,"handleEnterKey");n.addKeyHandler(13,0,0,t);n.addKeyHandler(13,0,1,t);this.own(this.editor.on("KeyPressed",J.hitch(this,"onKeyPressed")))}},
onKeyPressed:function(){if(this._checkListLater){if(this.editor.selection.isCollapsed()){var n=this.editor.selection.getAncestorElement("LI");if(n){a("mozilla")&&"LI"==n.parentNode.parentNode.nodeName&&(n=n.parentNode.parentNode);var t=n.firstChild;!t||1!=t.nodeType||"UL"!=t.nodeName&&"OL"!=t.nodeName||(n.insertBefore(t.ownerDocument.createTextNode("\u00a0"),t),t=q.create(this.editor.window),t.setStart(n.firstChild,0),n=q.getSelection(this.editor.window,!0),n.removeAllRanges(),n.addRange(t))}else k.prototype.execCommand.call(this.editor,
"formatblock",this.blockNodeForEnter),(n=this.editor.selection.getAncestorElement(this.blockNodeForEnter))?(n.innerHTML=this.bogusHtmlContent,9>=a("ie")&&(n=this.editor.document.selection.createRange(),n.move("character",-1),n.select())):console.error("onKeyPressed: Cannot find the new block node")}this._checkListLater=!1}this._pressedEnterInBlock&&(this._pressedEnterInBlock.previousSibling&&this.removeTrailingBr(this._pressedEnterInBlock.previousSibling),delete this._pressedEnterInBlock)},bogusHtmlContent:"\x26#160;",
blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(n){var t,B=this.editor.document,F;if(n.shiftKey){n=this.editor.selection.getParentElement();if(t=q.getAncestor(n,this.blockNodes)){if("LI"==t.tagName)return!0;n=q.getSelection(this.editor.window);var d=n.getRangeAt(0);d.collapsed||(d.deleteContents(),n=q.getSelection(this.editor.window),d=n.getRangeAt(0));if(q.atBeginningOfContainer(t,d.startContainer,d.startOffset)){var l=B.createElement("br");d=q.create(this.editor.window);t.insertBefore(l,
t.firstChild);d.setStartAfter(l);n.removeAllRanges();n.addRange(d)}else if(q.atEndOfContainer(t,d.startContainer,d.startOffset))d=q.create(this.editor.window),l=B.createElement("br"),t.appendChild(l),t.appendChild(B.createTextNode("\u00a0")),d.setStart(t.lastChild,0),n.removeAllRanges(),n.addRange(d);else{if((F=d.startContainer)&&3==F.nodeType){var u=F.nodeValue;var I=B.createTextNode(u.substring(0,d.startOffset));var m=B.createTextNode(u.substring(d.startOffset));t=B.createElement("br");""==m.nodeValue&&
a("webkit")&&(m=B.createTextNode("\u00a0"));E.place(I,F,"after");E.place(t,I,"after");E.place(m,t,"after");E.destroy(F);d=q.create(this.editor.window);d.setStart(m,0);n.removeAllRanges();n.addRange(d);return!1}return!0}}else n=q.getSelection(this.editor.window),n.rangeCount?(d=n.getRangeAt(0))&&d.startContainer&&(d.collapsed||(d.deleteContents(),n=q.getSelection(this.editor.window),d=n.getRangeAt(0)),(F=d.startContainer)&&3==F.nodeType?(t=d.startOffset,F.length<t&&(m=this._adjustNodeAndOffset(F,t),
F=m.node,t=m.offset),u=F.nodeValue,I=B.createTextNode(u.substring(0,t)),m=B.createTextNode(u.substring(t)),t=B.createElement("br"),m.length||(m=B.createTextNode("\u00a0")),I.length?E.place(I,F,"after"):I=F,E.place(t,I,"after"),E.place(m,t,"after"),E.destroy(F)):(0<=d.startOffset&&(l=F.childNodes[d.startOffset]),t=B.createElement("br"),m=B.createTextNode("\u00a0"),l?(E.place(t,l,"before"),E.place(m,t,"after")):(F.appendChild(t),F.appendChild(m))),d=q.create(this.editor.window),d.setStart(m,0),d.setEnd(m,
m.length),n.removeAllRanges(),n.addRange(d),this.editor.selection.collapse(!0)):k.prototype.execCommand.call(this.editor,"inserthtml","\x3cbr\x3e");return!1}var g=!0;n=q.getSelection(this.editor.window);d=n.getRangeAt(0);d.collapsed||(d.deleteContents(),n=q.getSelection(this.editor.window),d=n.getRangeAt(0));l=q.getBlockAncestor(d.endContainer,null,this.editor.editNode);var A=l.blockNode;if(this._checkListLater=A&&("LI"==A.nodeName||"LI"==A.parentNode.nodeName))return a("mozilla")&&(this._pressedEnterInBlock=
A),/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(A.innerHTML)&&(A.innerHTML="",a("webkit")&&(d=q.create(this.editor.window),d.setStart(A,0),n.removeAllRanges(),n.addRange(d)),this._checkListLater=!1),!0;if(!l.blockNode||l.blockNode===this.editor.editNode){try{k.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter)}catch(D){}l={blockNode:this.editor.selection.getAncestorElement(this.blockNodeForEnter),
blockContainer:this.editor.editNode};if(l.blockNode){if(l.blockNode!=this.editor.editNode&&!(l.blockNode.textContent||l.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)return this.removeTrailingBr(l.blockNode),!1}else l.blockNode=this.editor.editNode;n=q.getSelection(this.editor.window);d=n.getRangeAt(0)}A=B.createElement(this.blockNodeForEnter);A.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(l.blockNode);m=d.endOffset;g=d.endContainer;g.length<m&&(m=this._adjustNodeAndOffset(g,m),g=
m.node,m=m.offset);if(q.atEndOfContainer(l.blockNode,g,m))l.blockNode===l.blockContainer?l.blockNode.appendChild(A):E.place(A,l.blockNode,"after"),g=!1,d=q.create(this.editor.window),d.setStart(A,0),n.removeAllRanges(),n.addRange(d),this.editor.height&&c.scrollIntoView(A);else if(q.atBeginningOfContainer(l.blockNode,d.startContainer,d.startOffset))E.place(A,l.blockNode,l.blockNode===l.blockContainer?"first":"before"),A.nextSibling&&this.editor.height&&(d=q.create(this.editor.window),d.setStart(A.nextSibling,
0),n.removeAllRanges(),n.addRange(d),c.scrollIntoView(A.nextSibling)),g=!1;else{l.blockNode===l.blockContainer?l.blockNode.appendChild(A):E.place(A,l.blockNode,"after");g=!1;l.blockNode.style&&A.style&&l.blockNode.style.cssText&&(A.style.cssText=l.blockNode.style.cssText);if((F=d.startContainer)&&3==F.nodeType){m=d.endOffset;F.length<m&&(m=this._adjustNodeAndOffset(F,m),F=m.node,m=m.offset);u=F.nodeValue;I=B.createTextNode(u.substring(0,m));m=B.createTextNode(u.substring(m,u.length));E.place(I,F,
"before");E.place(m,F,"after");E.destroy(F);for(d=I.parentNode;d!==l.blockNode;){u=B.createElement(d.tagName);d.style&&u.style&&d.style.cssText&&(u.style.cssText=d.style.cssText);"FONT"===d.tagName&&(d.color&&(u.color=d.color),d.face&&(u.face=d.face),d.size&&(u.size=d.size));for(;m;)F=m.nextSibling,u.appendChild(m),m=F;E.place(u,d,"after");I=d;m=u;d=d.parentNode}if(1==m.nodeType||3==m.nodeType&&m.nodeValue)A.innerHTML="";for(I=m;m;)F=m.nextSibling,A.appendChild(m),m=F}d=q.create(this.editor.window);
B=I;if("BR"!==this.blockNodeForEnter){for(;B;)t=B,B=F=B.firstChild;t&&t.parentNode?(A=t.parentNode,d.setStart(A,0),n.removeAllRanges(),n.addRange(d),this.editor.height&&c.scrollIntoView(A),a("mozilla")&&(this._pressedEnterInBlock=l.blockNode)):g=!0}else d.setStart(A,0),n.removeAllRanges(),n.addRange(d),this.editor.height&&c.scrollIntoView(A),a("mozilla")&&(this._pressedEnterInBlock=l.blockNode)}return g},_adjustNodeAndOffset:function(n,t){for(;n.length<t&&n.nextSibling&&3==n.nextSibling.nodeType;)t-=
n.length,n=n.nextSibling;return{node:n,offset:t}},removeTrailingBr:function(n){if(n=/P|DIV|LI/i.test(n.tagName)?n:this.editor.selection.getParentOfType(n,["P","DIV","LI"]))n.lastChild&&(1<n.childNodes.length&&3==n.lastChild.nodeType&&/^[\s\xAD]*$/.test(n.lastChild.nodeValue)||"BR"==n.lastChild.tagName)&&E.destroy(n.lastChild),n.childNodes.length||(n.innerHTML=this.bogusHtmlContent)}})})},"dijit/_editor/RichText":function(){define("dojo/_base/array dojo/_base/config dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/query dojo/domReady dojo/sniff dojo/string dojo/topic dojo/_base/unload dojo/_base/url dojo/window ../_Widget ../_CssStateMixin ../selection ./range ./html ../focus ../main".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F,d,l,u,I,m,g,A,D,N,O,L,z,C,Q){var S=K("dijit._editor.RichText",[D,N],{constructor:function(p){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};p&&t.isString(p.value)&&(this.value=p.value);this.onLoadDeferred=new J},baseClass:"dijitEditor",inheritWidth:!1,focusOnLoad:!1,name:"",styleSheets:"",height:"300px",minHeight:"1em",
isClosed:!0,isLoaded:!1,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:!1,disableSpellCheck:!1,postCreate:function(){"textarea"===this.domNode.tagName.toLowerCase()&&console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");this.contentPreFilters=[t.trim,t.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);l("mozilla")&&(this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters),
this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters));l("webkit")&&(this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters),this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters));if(l("ie")||l("trident"))this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters),this.contentDomPostFilters=[t.hitch(this,"_stripBreakerNodes")].concat(this.contentDomPostFilters);this.contentDomPostFilters=[t.hitch(this,
"_stripTrailingEmptyNodes")].concat(this.contentDomPostFilters);this.inherited(arguments);I.publish(Q._scopeName+"._editor.RichText::init",this)},startup:function(){this.inherited(arguments);this.open();this.setupDefaultShortcuts()},setupDefaultShortcuts:function(){var p=t.hitch(this,function(h,r){return function(){return!this.execCommand(h,r)}}),e={b:p("bold"),i:p("italic"),u:p("underline"),a:p("selectall"),s:function(){this.save(!0)},m:function(){this.isTabIndent=!this.isTabIndent},1:p("formatblock",
"h1"),2:p("formatblock","h2"),3:p("formatblock","h3"),4:p("formatblock","h4"),"\\":p("insertunorderedlist")};l("ie")||(e.Z=p("redo"));for(var v in e)this.addKeyHandler(v,!0,!1,e[v])},events:["onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:!1,_localizeEditorCommands:function(){if(S._editorCommandsLocalized)this._local2NativeFormatNames=S._local2NativeFormatNames,this._native2LocalFormatNames=S._native2LocalFormatNames;else{S._editorCommandsLocalized=!0;S._local2NativeFormatNames={};
S._native2LocalFormatNames={};this._local2NativeFormatNames=S._local2NativeFormatNames;this._native2LocalFormatNames=S._native2LocalFormatNames;for(var p="div p pre h1 h2 h3 h4 h5 h6 ol ul address".split(" "),e="",v,h=0;v=p[h++];)e="l"!==v.charAt(1)?e+("\x3c"+v+"\x3e\x3cspan\x3econtent\x3c/span\x3e\x3c/"+v+"\x3e\x3cbr/\x3e"):e+("\x3c"+v+"\x3e\x3cli\x3econtent\x3c/li\x3e\x3c/"+v+"\x3e\x3cbr/\x3e");var r=c.create("div",{style:{position:"absolute",top:"0px",zIndex:10,opacity:.01},innerHTML:e});this.ownerDocumentBody.appendChild(r);
p=t.hitch(this,function(){for(var H=r.firstChild;H;)try{this.selection.selectElement(H.firstChild);var M=H.tagName.toLowerCase();this._local2NativeFormatNames[M]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[M]]=M;H=H.nextSibling.nextSibling}catch(P){}c.destroy(r)});this.defer(p)}},open:function(p){if(!this.onLoadDeferred||0<=this.onLoadDeferred.fired)this.onLoadDeferred=new J;this.isClosed||this.close();I.publish(Q._scopeName+"._editor.RichText::open",
this);1===arguments.length&&p.nodeName&&(this.domNode=p);var e=this.domNode;if(t.isString(this.value)){var v=this.value;e.innerHTML=""}else if(e.nodeName&&"textarea"==e.nodeName.toLowerCase()){var h=this.textarea=e;this.name=h.name;v=h.value;e=this.domNode=this.ownerDocument.createElement("div");e.setAttribute("widgetId",this.id);h.removeAttribute("widgetId");e.cssText=h.cssText;e.className+=" "+h.className;c.place(e,h,"before");var r=t.hitch(this,function(){k.set(h,{display:"block",position:"absolute",
top:"-1000px"});if(l("ie")){var y=h.style;this.__overflow=y.overflow;y.overflow="hidden"}});l("ie")?this.defer(r,10):r();if(h.form){var H=h.value;this.reset=function(){this.getValue()!==H&&this.replaceValue(H)};B(h.form,"submit",t.hitch(this,function(){a.set(h,"disabled",this.disabled);h.value=this.getValue()}))}}else v=z.getChildrenHtml(e),e.innerHTML="";this.value=v;e.nodeName&&"LI"===e.nodeName&&(e.innerHTML=" \x3cbr\x3e");this.header=e.ownerDocument.createElement("div");e.appendChild(this.header);
this.editingArea=e.ownerDocument.createElement("div");e.appendChild(this.editingArea);this.footer=e.ownerDocument.createElement("div");e.appendChild(this.footer);this.name||(this.name=this.id+"_AUTOGEN");if(""!==this.name&&(!E.useXDomain||E.allowXdRichTextSave)){if((v=w.byId(Q._scopeName+"._editor.RichText.value"))&&""!==v.value){r=v.value.split(this._SEPARATOR);for(var M=0,P;P=r[M++];)if(P=P.split(this._NAME_CONTENT_SEP),P[0]===this.name){this.value=P[1];r=r.splice(M,1);v.value=r.join(this._SEPARATOR);
break}}S._globalSaveHandler||(S._globalSaveHandler={},m.addOnUnload(function(){for(var y in S._globalSaveHandler){var G=S._globalSaveHandler[y];t.isFunction(G)&&G()}}));S._globalSaveHandler[this.id]=t.hitch(this,"_saveContent")}this.isClosed=!1;v=this.editorObject=this.iframe=this.ownerDocument.createElement("iframe");v.id=this.id+"_iframe";v.style.border="none";v.style.width="100%";this._layoutMode?v.style.height="100%":7<=l("ie")?(this.height&&(v.style.height=this.height),this.minHeight&&(v.style.minHeight=
this.minHeight)):v.style.height=this.height?this.height:this.minHeight;v.frameBorder=0;v._loadFunc=t.hitch(this,function(y){this.window=y;this.document=y.document;this.selection=new O.SelectionManager(y);l("ie")&&this._localizeEditorCommands();this.onLoad(this.get("value"))});r=this._getIframeDocTxt().replace(/\\/g,"\\\\").replace(/'/g,"\\'");r=11>l("ie")?'javascript:document.open();try{parent.window;}catch(e){document.domain\x3d"'+document.domain+"\";}document.write('"+r+"');document.close()":"javascript: '"+
r+"'";this.editingArea.appendChild(v);v.src=r;"LI"===e.nodeName&&(e.lastChild.style.marginTop="-1.2em");b.add(this.domNode,this.baseClass)},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var p=k.getComputedStyle(this.domNode);if(this["aria-label"])var e=this["aria-label"];else{var v=F('label[for\x3d"'+this.id+'"]',this.ownerDocument)[0]||w.byId(this["aria-labelledby"],this.ownerDocument);v&&(e=v.textContent||v.innerHTML||"")}v="\x3cdiv id\x3d'dijitEditorBody' role\x3d'textbox' aria-multiline\x3d'true' "+
(e?" aria-label\x3d'"+u.escape(e)+"'":"")+"\x3e\x3c/div\x3e";var h=[p.fontWeight,p.fontSize,p.fontFamily].join(" "),r=p.lineHeight;r=0<=r.indexOf("px")?parseFloat(r)/parseFloat(p.fontSize):0<=r.indexOf("em")?parseFloat(r):"normal";var H="",M=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(P){P=P.replace(/^;/ig,"")+";";var y=P.split(":")[0];if(y){y=t.trim(y);y=y.toLowerCase();var G,R="";for(G=0;G<y.length;G++){var T=y.charAt(G);switch(T){case "-":G++,T=y.charAt(G).toUpperCase();default:R+=
T}}k.set(M.domNode,R,"")}H+=P+";"});this.iframe.setAttribute("title",e);return["\x3c!DOCTYPE html\x3e","\x3chtml lang\x3d'"+(this.lang||q.locale.replace(/-.*/,""))+"'"+(this.isLeftToRight()?"":" dir\x3d'rtl'")+"\x3e\n","\x3chead\x3e\n\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html'\x3e\n",e?"\x3ctitle\x3e"+u.escape(e)+"\x3c/title\x3e":"","\x3cstyle\x3e\n\tbody,html {\n\t\tbackground:transparent;\n\t\tpadding: 1px 0 0 0;\n\t\tmargin: -1px 0 0 0;\n\t}\n\tbody,html,#dijitEditorBody { outline: none; }html { height: 100%; width: 100%; overflow: hidden; }\n",
this.height?"\tbody,#dijitEditorBody { height: 100%; width: 100%; overflow: auto; }\n":"\tbody,#dijitEditorBody { min-height: "+this.minHeight+"; width: 100%; overflow-x: auto; overflow-y: hidden; }\n","\tbody{\n\t\ttop:0px;\n\t\tleft:0px;\n\t\tright:0px;\n\t\tfont:",h,";\n",this.height||l("opera")?"":"\t\tposition: fixed;\n","\t\tline-height:",r,";\n\t}\n\tp{ margin: 1em 0; }\n\tli \x3e ul:-moz-first-node, li \x3e ol:-moz-first-node{ padding-top: 1.2em; }\n",l("ie")||l("trident")||l("edge")?"":"\tli{ min-height:1.2em; }\n",
"\x3c/style\x3e\n",this._applyEditingAreaStyleSheets(),"\n\x3c/head\x3e\n\x3cbody role\x3d'application'",e?" aria-label\x3d'"+u.escape(e)+"'":"","onload\x3d'try{frameElement \x26\x26 frameElement._loadFunc(window,document)}catch(e){document.domain\x3d\""+document.domain+"\";frameElement._loadFunc(window,document)}' ","style\x3d'"+H+"'\x3e",v,"\x3c/body\x3e\n\x3c/html\x3e"].join("")},_applyEditingAreaStyleSheets:function(){var p=[];this.styleSheets&&(p=this.styleSheets.split(";"),this.styleSheets=
"");p=p.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];for(var e="",v=0,h,r=A.get(this.ownerDocument);h=p[v++];)h=(new g(r.location,h)).toString(),this.editingAreaStyleSheets.push(h),e+='\x3clink rel\x3d"stylesheet" type\x3d"text/css" href\x3d"'+h+'"/\x3e';return e},addStyleSheet:function(p){var e=p.toString(),v=A.get(this.ownerDocument);if("."===e.charAt(0)||"/"!==e.charAt(0)&&!p.host)e=(new g(v.location,e)).toString();-1<x.indexOf(this.editingAreaStyleSheets,e)||(this.editingAreaStyleSheets.push(e),
this.onLoadDeferred.then(t.hitch(this,function(){if(this.document.createStyleSheet)this.document.createStyleSheet(e);else{var h=this.document.getElementsByTagName("head")[0],r=this.document.createElement("link");r.rel="stylesheet";r.type="text/css";r.href=e;h.appendChild(r)}})))},removeStyleSheet:function(p){var e=p.toString(),v=A.get(this.ownerDocument);if("."===e.charAt(0)||"/"!==e.charAt(0)&&!p.host)e=(new g(v.location,e)).toString();p=x.indexOf(this.editingAreaStyleSheets,e);-1!==p&&(delete this.editingAreaStyleSheets[p],
F('link[href\x3d"'+e+'"]',this.window.document).orphan())},disabled:!1,_mozSettingProps:{styleWithCSS:!1},_setDisabledAttr:function(p){p=!!p;this._set("disabled",p);if(this.isLoaded){var e=l("ie")&&(this.isLoaded||!this.focusOnLoad);e&&(this.editNode.unselectable="on");this.editNode.contentEditable=!p;this.editNode.tabIndex=p?"-1":this.tabIndex;e&&this.defer(function(){this.editNode&&(this.editNode.unselectable="off")});if(l("mozilla")&&!p&&this._mozSettingProps){p=this._mozSettingProps;for(var v in p)if(p.hasOwnProperty(v))try{this.document.execCommand(v,
!1,p[v])}catch(h){}}this._disabledOK=!0}},onLoad:function(p){this.window.__registeredWindow||(this.window.__registeredWindow=!0,this._iframeRegHandle=C.registerIframe(this.iframe));this.editNode=this.document.body.firstChild;var e=this;this.beforeIframeNode=c.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"before");this.afterIframeNode=c.place("\x3cdiv tabIndex\x3d-1\x3e\x3c/div\x3e",this.iframe,"after");this.iframe.onfocus=this.document.onfocus=function(){e.editNode.focus()};this.focusNode=
this.editNode;var v=this.events.concat(this.captureEvents),h=this.iframe?this.document:this.editNode;this.own.apply(this,x.map(v,function(r){var H=r.toLowerCase().replace(/^on/,"");return B(h,H,t.hitch(this,r))},this));this.own(B(h,"mouseup",t.hitch(this,"onClick")));l("ie")&&(this.own(B(this.document,"mousedown",t.hitch(this,"_onIEMouseDown"))),this.editNode.style.zoom=1);l("webkit")&&(this._webkitListener=this.own(B(this.document,"mouseup",t.hitch(this,"onDisplayChanged")))[0],this.own(B(this.document,
"mousedown",t.hitch(this,function(r){r=r.target;!r||r!==this.document.body&&r!==this.document||this.defer("placeCursorAtEnd")}))));if(l("ie"))try{this.document.execCommand("RespectVisibilityInDesign",!0,null)}catch(r){}this.isLoaded=!0;this.set("disabled",this.disabled);v=t.hitch(this,function(){this.setValue(p);this.onLoadDeferred&&!this.onLoadDeferred.isFulfilled()&&this.onLoadDeferred.resolve(!0);this.onDisplayChanged();this.focusOnLoad&&d(t.hitch(this,"defer","focus",this.updateInterval));this.value=
this.getValue(!0)});this.setValueDeferred?this.setValueDeferred.then(v):v()},onKeyDown:function(p){if(p.keyCode===n.SHIFT||p.keyCode===n.ALT||p.keyCode===n.META||p.keyCode===n.CTRL)return!0;p.keyCode===n.TAB&&this.isTabIndent&&(p.stopPropagation(),p.preventDefault(),this.queryCommandEnabled(p.shiftKey?"outdent":"indent")&&this.execCommand(p.shiftKey?"outdent":"indent"));if(p.keyCode==n.TAB&&!this.isTabIndent&&!p.ctrlKey&&!p.altKey)return p.shiftKey?this.beforeIframeNode.focus():this.afterIframeNode.focus(),
!0;9>l("ie")&&p.keyCode===n.BACKSPACE&&"Control"===this.document.selection.type&&(p.stopPropagation(),p.preventDefault(),this.execCommand("delete"));l("ff")&&(p.keyCode===n.PAGE_UP||p.keyCode===n.PAGE_DOWN)&&this.editNode.clientHeight>=this.editNode.scrollHeight&&p.preventDefault();var e=this._keyHandlers[p.keyCode],v=arguments;e&&!p.altKey&&x.some(e,function(h){if(!(h.shift^p.shiftKey||h.ctrl^(p.ctrlKey||p.metaKey)))return h.handler.apply(this,v)||p.preventDefault(),!0},this);this.defer("onKeyPressed",
1);return!0},onKeyUp:function(){},setDisabled:function(p){q.deprecated("dijit.Editor::setDisabled is deprecated",'use dijit.Editor::attr("disabled",boolean) instead',2);this.set("disabled",p)},_setValueAttr:function(p){this.setValue(p)},_setDisableSpellCheckAttr:function(p){this.document?a.set(this.document.body,"spellcheck",!p):this.onLoadDeferred.then(t.hitch(this,function(){a.set(this.document.body,"spellcheck",!p)}));this._set("disableSpellCheck",p)},addKeyHandler:function(p,e,v,h){"string"==
typeof p&&(p=p.toUpperCase().charCodeAt(0));t.isArray(this._keyHandlers[p])||(this._keyHandlers[p]=[]);this._keyHandlers[p].push({shift:v||!1,ctrl:e||!1,handler:h})},onKeyPressed:function(){this.onDisplayChanged()},onClick:function(p){this.onDisplayChanged(p)},_onIEMouseDown:function(){this.focused||this.disabled||this.focus()},_onBlur:function(p){(l("ie")||l("trident"))&&this.defer(function(){C.curNode||this.ownerDocumentBody.focus()});this.inherited(arguments);var e=this.getValue(!0);if(e!==this.value)this.onChange(e);
this._set("value",e)},_onFocus:function(p){this.disabled||(this._disabledOK||this.set("disabled",!1),this.inherited(arguments))},blur:function(){!l("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus?this.window.document.documentElement.focus():this.ownerDocumentBody.focus&&this.ownerDocumentBody.focus()},focus:function(){this.isLoaded?9>l("ie")?this.iframe.fireEvent("onfocus",document.createEventObject()):this.editNode.focus():this.focusOnLoad=!0},updateInterval:200,
_updateTimer:null,onDisplayChanged:function(){this._updateTimer&&this._updateTimer.remove();this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval)},onNormalizedDisplayChanged:function(){delete this._updateTimer},onChange:function(){},_normalizeCommand:function(p,e){p=p.toLowerCase();"formatblock"===p?l("safari")&&void 0===e&&(p="heading"):"hilitecolor"!==p||l("mozilla")||(p="backcolor");return p},_implCommand:function(p){return"_"+this._normalizeCommand(p)+"EnabledImpl"},_qcaCache:{},
queryCommandAvailable:function(p){var e=this._qcaCache[p];return void 0!==e?e:this._qcaCache[p]=this._queryCommandAvailable(p)},_queryCommandAvailable:function(p){switch(p.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":case "cut":case "copy":case "paste":return!0;
case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":return l("ie")||l("trident")||l("edge");case "inserttable":case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":return!l("webkit");default:return!1}},execCommand:function(p,e){this.focused&&this.focus();p=this._normalizeCommand(p,e);if(void 0!==e){if("heading"===p)throw Error("unimplemented");"formatblock"===
p&&(l("ie")||l("trident"))&&(e="\x3c"+e+"\x3e")}var v="_"+p+"Impl";if(this[v])var h=this[v](e);else if((e=1<arguments.length?e:null)||"createlink"!==p)h=this.document.execCommand(p,!1,e);this.onDisplayChanged();return h},queryCommandEnabled:function(p){if(this.disabled||!this._disabledOK)return!1;p=this._normalizeCommand(p);var e=this._implCommand(p);return this[e]?this[e](p):this._browserQueryCommandEnabled(p)},queryCommandState:function(p){if(this.disabled||!this._disabledOK)return!1;p=this._normalizeCommand(p);
try{return this.document.queryCommandState(p)}catch(e){return!1}},queryCommandValue:function(p){if(this.disabled||!this._disabledOK)return!1;p=this._normalizeCommand(p);if(l("ie")&&"formatblock"===p)p=this._native2LocalFormatNames[this.document.queryCommandValue(p)];else if(l("mozilla")&&"hilitecolor"===p){try{var e=this.document.queryCommandValue("styleWithCSS")}catch(v){e=!1}this.document.execCommand("styleWithCSS",!1,!0);p=this.document.queryCommandValue(p);this.document.execCommand("styleWithCSS",
!1,e)}else p=this.document.queryCommandValue(p);return p},_sCall:function(p,e){return this.selection[p].apply(this.selection,e)},placeCursorAtStart:function(){this.focus();var p=!1;if(l("mozilla"))for(var e=this.editNode.firstChild;e;){if(3===e.nodeType){if(0<e.nodeValue.replace(/^\s+|\s+$/g,"").length){p=!0;this.selection.selectElement(e);break}}else if(1===e.nodeType){p=!0;var v=e.tagName?e.tagName.toLowerCase():"";/br|input|img|base|meta|area|basefont|hr|link/.test(v)?this.selection.selectElement(e):
this.selection.selectElementChildren(e);break}e=e.nextSibling}else p=!0,this.selection.selectElementChildren(this.editNode);p&&this.selection.collapse(!0)},placeCursorAtEnd:function(){this.focus();var p=!1;if(l("mozilla"))for(var e=this.editNode.lastChild;e;){if(3===e.nodeType){if(0<e.nodeValue.replace(/^\s+|\s+$/g,"").length){p=!0;this.selection.selectElement(e);break}}else if(1===e.nodeType){p=!0;this.selection.selectElement(e.lastChild||e);break}e=e.previousSibling}else p=!0,this.selection.selectElementChildren(this.editNode);
p&&this.selection.collapse(!1)},getValue:function(p){return!this.textarea||!this.isClosed&&this.isLoaded?this.isLoaded?this._postFilterContent(null,p):this.value:this.textarea.value},_getValueAttr:function(){return this.getValue(!0)},setValue:function(p){if(this.isLoaded){if(!this.textarea||!this.isClosed&&this.isLoaded){p=this._preFilterContent(p);var e=this.isClosed?this.domNode:this.editNode;e.innerHTML=p;this._preDomFilterContent(e)}else this.textarea.value=p;this.onDisplayChanged();this._set("value",
this.getValue(!0))}else this.onLoadDeferred.then(t.hitch(this,function(){this.setValue(p)}))},replaceValue:function(p){this.isClosed?this.setValue(p):this.window&&this.window.getSelection&&!l("mozilla")?this.setValue(p):this.window&&this.window.getSelection?(p=this._preFilterContent(p),this.execCommand("selectall"),this.execCommand("inserthtml",p),this._preDomFilterContent(this.editNode)):this.document&&this.document.selection&&this.setValue(p);this._set("value",this.getValue(!0))},_preFilterContent:function(p){var e=
p;x.forEach(this.contentPreFilters,function(v){v&&(e=v(e))});return e},_preDomFilterContent:function(p){p=p||this.editNode;x.forEach(this.contentDomPreFilters,function(e){e&&t.isFunction(e)&&e(p)},this)},_postFilterContent:function(p,e){if(t.isString(p))var v=p;else p=p||this.editNode,this.contentDomPostFilters.length&&(e&&(p=t.clone(p)),x.forEach(this.contentDomPostFilters,function(h){p=h(p)})),v=z.getChildrenHtml(p);t.trim(v.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length||(v="");x.forEach(this.contentPostFilters,
function(h){v=h(v)});return v},_saveContent:function(){var p=w.byId(Q._scopeName+"._editor.RichText.value");p&&(p.value&&(p.value+=this._SEPARATOR),p.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(!0))},escapeXml:function(p,e){p=p.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");e||(p=p.replace(/'/gm,"\x26#39;"));return p},getNodeHtml:function(p){q.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",
2);return z.getNodeHtml(p)},getNodeChildrenHtml:function(p){q.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return z.getChildrenHtml(p)},close:function(p){if(!this.isClosed){arguments.length||(p=!0);p&&this._set("value",this.getValue(!0));this.interval&&clearInterval(this.interval);this._webkitListener&&(this._webkitListener.remove(),delete this._webkitListener);l("ie")&&(this.iframe.onfocus=null);this.iframe._loadFunc=null;this._iframeRegHandle&&
(this._iframeRegHandle.remove(),delete this._iframeRegHandle);if(this.textarea){var e=this.textarea.style;e.position="";e.left=e.top="";l("ie")&&(e.overflow=this.__overflow,this.__overflow=null);this.textarea.value=this.value;c.destroy(this.domNode);this.domNode=this.textarea}else this.domNode.innerHTML=this.value;delete this.iframe;b.remove(this.domNode,this.baseClass);this.isClosed=!0;this.isLoaded=!1;delete this.editNode;delete this.focusNode;this.window&&this.window._frameElement&&(this.window._frameElement=
null);this.editorObject=this.editingArea=this.document=this.window=null}},destroy:function(){this.isClosed||this.close(!1);this._updateTimer&&this._updateTimer.remove();this.inherited(arguments);S._globalSaveHandler&&delete S._globalSaveHandler[this.id]},_removeMozBogus:function(p){return p.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"")},_removeWebkitBogus:function(p){p=p.replace(/\sclass="webkit-block-placeholder"/gi,"");p=p.replace(/\sclass="apple-style-span"/gi,
"");return p=p.replace(/<meta charset="utf-8" \/>/gi,"")},_normalizeFontStyle:function(p){return p.replace(/<(\/)?strong([ >])/gi,"\x3c$1b$2").replace(/<(\/)?em([ >])/gi,"\x3c$1i$2")},_preFixUrlAttributes:function(p){return p.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl\x3d$2$3$5$2")},_browserQueryCommandEnabled:function(p){if(!p)return!1;
if(l("ie")||l("trident")||l("edge"))return this.focused&&!this.disabled;var e=9>l("ie")?this.document.selection.createRange():this.document;try{return e.queryCommandEnabled(p)}catch(v){return!1}},_createlinkEnabledImpl:function(){var p=!0;return p=l("opera")?this.window.getSelection().isCollapsed?!0:this.document.queryCommandEnabled("createlink"):this._browserQueryCommandEnabled("createlink")},_unlinkEnabledImpl:function(){var p=!0;return p=l("mozilla")||l("webkit")||l("ie")||l("trident")||l("edge")?
this.selection.hasAncestorElement("a"):this._browserQueryCommandEnabled("unlink")},_inserttableEnabledImpl:function(){var p=!0;return p=l("mozilla")||l("webkit")?!0:this._browserQueryCommandEnabled("inserttable")},_cutEnabledImpl:function(){var p=!0;l("webkit")?((p=this.window.getSelection())&&(p=p.toString()),p=!!p):p=this._browserQueryCommandEnabled("cut");return p},_copyEnabledImpl:function(){var p=!0;l("webkit")?((p=this.window.getSelection())&&(p=p.toString()),p=!!p):p=this._browserQueryCommandEnabled("copy");
return p},_pasteEnabledImpl:function(){var p=!0;return l("webkit")?!0:p=this._browserQueryCommandEnabled("paste")},_inserthorizontalruleImpl:function(p){return l("ie")?this._inserthtmlImpl("\x3chr\x3e"):this.document.execCommand("inserthorizontalrule",!1,p)},_unlinkImpl:function(p){return this.queryCommandEnabled("unlink")&&(l("mozilla")||l("webkit"))?(p=this.selection.getAncestorElement("a"),this.selection.selectElement(p),this.document.execCommand("unlink",!1,null)):this.document.execCommand("unlink",
!1,p)},_hilitecolorImpl:function(p){if(!this._handleTextColorOrProperties("hilitecolor",p))if(l("mozilla")){this.document.execCommand("styleWithCSS",!1,!0);console.log("Executing color command.");var e=this.document.execCommand("hilitecolor",!1,p);this.document.execCommand("styleWithCSS",!1,!1)}else e=this.document.execCommand("hilitecolor",!1,p);return e},_backcolorImpl:function(p){l("ie")&&(p=p?p:null);var e=this._handleTextColorOrProperties("backcolor",p);e||(e=this.document.execCommand("backcolor",
!1,p));return e},_forecolorImpl:function(p){l("ie")&&(p=p?p:null);var e=!1;(e=this._handleTextColorOrProperties("forecolor",p))||(e=this.document.execCommand("forecolor",!1,p));return e},_inserthtmlImpl:function(p){p=this._preFilterContent(p);var e=!0;if(9>l("ie")){var v=this.document.selection.createRange();if("CONTROL"===this.document.selection.type.toUpperCase()){for(var h=v.item(0);v.length;)v.remove(v.item(0));h.outerHTML=p}else v.pasteHTML(p);v.select()}else if(8>l("trident")){var r=L.getSelection(this.window);
if(r&&r.rangeCount&&r.getRangeAt){v=r.getRangeAt(0);v.deleteContents();var H=c.create("div");H.innerHTML=p;for(h=this.document.createDocumentFragment();p=H.firstChild;)var M=h.appendChild(p);v.insertNode(h);M&&(v=v.cloneRange(),v.setStartAfter(M),v.collapse(!1),r.removeAllRanges(),r.addRange(v))}}else l("mozilla")&&!p.length?this.selection.remove():e=this.document.execCommand("inserthtml",!1,p);return e},_boldImpl:function(p){var e=!1;if(l("ie")||l("trident"))this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("bold");
e||(e=this.document.execCommand("bold",!1,p));return e},_italicImpl:function(p){var e=!1;if(l("ie")||l("trident"))this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("italic");e||(e=this.document.execCommand("italic",!1,p));return e},_underlineImpl:function(p){var e=!1;if(l("ie")||l("trident"))this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("underline");e||(e=this.document.execCommand("underline",!1,p));return e},_strikethroughImpl:function(p){var e=!1;if(l("ie")||l("trident"))this._adaptIESelection(),
e=this._adaptIEFormatAreaAndExec("strikethrough");e||(e=this.document.execCommand("strikethrough",!1,p));return e},_superscriptImpl:function(p){var e=!1;if(l("ie")||l("trident"))this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("superscript");e||(e=this.document.execCommand("superscript",!1,p));return e},_subscriptImpl:function(p){var e=!1;if(l("ie")||l("trident"))this._adaptIESelection(),e=this._adaptIEFormatAreaAndExec("subscript");e||(e=this.document.execCommand("subscript",!1,p));return e},
_fontnameImpl:function(p){if(l("ie")||l("trident"))var e=this._handleTextColorOrProperties("fontname",p);e||(e=this.document.execCommand("fontname",!1,p));return e},_fontsizeImpl:function(p){if(l("ie")||l("trident"))var e=this._handleTextColorOrProperties("fontsize",p);e||(e=this.document.execCommand("fontsize",!1,p));return e},_insertorderedlistImpl:function(p){var e=!1;if(l("ie")||l("trident")||l("edge"))e=this._adaptIEList("insertorderedlist",p);e||(e=this.document.execCommand("insertorderedlist",
!1,p));return e},_insertunorderedlistImpl:function(p){var e=!1;if(l("ie")||l("trident")||l("edge"))e=this._adaptIEList("insertunorderedlist",p);e||(e=this.document.execCommand("insertunorderedlist",!1,p));return e},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header)},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer)},_getNodeChildrenHeight:function(p){var e=0;if(p&&p.childNodes){var v;for(v=0;v<p.childNodes.length;v++){var h=f.position(p.childNodes[v]);
e+=h.h}}return e},_isNodeEmpty:function(p,e){return 1===p.nodeType?0<p.childNodes.length?this._isNodeEmpty(p.childNodes[0],e):!0:3===p.nodeType?""===p.nodeValue.substring(e):!1},_removeStartingRangeFromRange:function(p,e){if(p.nextSibling)e.setStart(p.nextSibling,0);else{for(p=p.parentNode;p&&null==p.nextSibling;)p=p.parentNode;p&&e.setStart(p.nextSibling,0)}return e},_adaptIESelection:function(){var p=L.getSelection(this.window);if(p&&p.rangeCount&&!p.isCollapsed){for(var e=p.getRangeAt(0),v=e.startContainer,
h=e.startOffset;3===v.nodeType&&h>=v.length&&v.nextSibling;)h-=v.length,v=v.nextSibling;for(var r=null;this._isNodeEmpty(v,h)&&v!==r;)r=v,e=this._removeStartingRangeFromRange(v,e),v=e.startContainer,h=0;p.removeAllRanges();p.addRange(e)}},_adaptIEFormatAreaAndExec:function(p){var e=L.getSelection(this.window),v=this.document,h;if(p&&e&&e.isCollapsed){if(this.queryCommandValue(p)){p=this._tagNamesForCommand(p);var r=e.getRangeAt(0);var H=r.startContainer;if(3===H.nodeType){var M=r.endOffset;H.length<
M&&(M=this._adjustNodeAndOffset(P,M),H=M.node,M=M.offset)}for(;H&&H!==this.editNode;){var P=H.tagName?H.tagName.toLowerCase():"";if(-1<x.indexOf(p,P)){var y=H;break}H=H.parentNode}if(y&&(P=r.startContainer,p=v.createElement(y.tagName),c.place(p,y,"after"),P&&3===P.nodeType)){M=r.endOffset;P.length<M&&(M=this._adjustNodeAndOffset(P,M),P=M.node,M=M.offset);H=P.nodeValue;r=v.createTextNode(H.substring(0,M));var G=H.substring(M,H.length);G&&(h=v.createTextNode(G));c.place(r,P,"before");if(h){var R=v.createElement("span");
R.className="ieFormatBreakerSpan";c.place(R,P,"after");c.place(h,R,"after");h=R}c.destroy(P);M=r.parentNode;for(P=[];M!==y;){H=M.tagName;r={tagName:H};P.push(r);H=v.createElement(H);M.style&&H.style&&M.style.cssText&&(H.style.cssText=M.style.cssText,r.cssText=M.style.cssText);"FONT"===M.tagName&&(M.color&&(H.color=M.color,r.color=M.color),M.face&&(H.face=M.face,r.face=M.face),M.size&&(H.size=M.size,r.size=M.size));M.className&&(H.className=M.className,r.className=M.className);if(h)for(;h;)r=h.nextSibling,
H.appendChild(h),h=r;H.tagName==M.tagName?(R=v.createElement("span"),R.className="ieFormatBreakerSpan",c.place(R,M,"after"),c.place(H,R,"after")):c.place(H,M,"after");r=M;h=H;M=M.parentNode}if(h){if(1===h.nodeType||3===h.nodeType&&h.nodeValue)p.innerHTML="";for(;h;)r=h.nextSibling,p.appendChild(h),h=r}if(P.length){r=P.pop();h=v.createElement(r.tagName);r.cssText&&h.style&&(h.style.cssText=r.cssText);r.className&&(h.className=r.className);"FONT"===r.tagName&&(r.color&&(h.color=r.color),r.face&&(h.face=
r.face),r.size&&(h.size=r.size));for(c.place(h,p,"before");P.length;)r=P.pop(),y=v.createElement(r.tagName),r.cssText&&y.style&&(y.style.cssText=r.cssText),r.className&&(y.className=r.className),"FONT"===r.tagName&&(r.color&&(y.color=r.color),r.face&&(y.face=r.face),r.size&&(y.size=r.size)),h.appendChild(y),h=y;y=v.createTextNode(".");R.appendChild(y);h.appendChild(y)}else R=v.createElement("span"),R.className="ieFormatBreakerSpan",y=v.createTextNode("."),R.appendChild(y),c.place(R,p,"before");h=
L.create(this.window);h.setStart(y,0);h.setEnd(y,y.length);e.removeAllRanges();e.addRange(h);this.selection.collapse(!1);y.parentNode.innerHTML="";p.firstChild||c.destroy(p);return!0}return!1}r=e.getRangeAt(0);if((P=r.startContainer)&&3===P.nodeType)return M=r.startOffset,P.length<M&&(M=this._adjustNodeAndOffset(P,M),P=M.node,M=M.offset),H=P.nodeValue,r=v.createTextNode(H.substring(0,M)),G=H.substring(M),""!==G&&(h=v.createTextNode(H.substring(M))),R=v.createElement("span"),y=v.createTextNode("."),
R.appendChild(y),r.length?c.place(r,P,"after"):r=P,c.place(R,r,"after"),h&&c.place(h,R,"after"),c.destroy(P),h=L.create(this.window),h.setStart(y,0),h.setEnd(y,y.length),e.removeAllRanges(),e.addRange(h),v.execCommand(p),c.place(R.firstChild,R,"before"),c.destroy(R),h.setStart(y,0),h.setEnd(y,y.length),e.removeAllRanges(),e.addRange(h),this.selection.collapse(!1),y.parentNode.innerHTML="",!0}else return!1},_adaptIEList:function(p){var e=L.getSelection(this.window);if(e.isCollapsed&&e.rangeCount&&
!this.queryCommandValue(p)){var v=e.getRangeAt(0),h=v.startContainer;if(h&&3==h.nodeType&&!v.startOffset)return v="ul","insertorderedlist"===p&&(v="ol"),p=this.document.createElement(v),v=c.create("li",null,p),c.place(p,h,"before"),v.appendChild(h),c.create("br",null,p,"after"),p=L.create(this.window),p.setStart(h,0),p.setEnd(h,h.length),e.removeAllRanges(),e.addRange(p),this.selection.collapse(!0),!0}return!1},_handleTextColorOrProperties:function(p,e){var v=L.getSelection(this.window),h=this.document,
r,H;e=e||null;if(p&&v&&v.isCollapsed&&v.rangeCount){var M=v.getRangeAt(0);if((r=M.startContainer)&&3===r.nodeType){var P=M.startOffset;r.length<P&&(M=this._adjustNodeAndOffset(r,P),r=M.node,P=M.offset);var y=r.nodeValue;M=h.createTextNode(y.substring(0,P));""!==y.substring(P)&&(H=h.createTextNode(y.substring(P)));y=h.createElement("span");P=h.createTextNode(".");y.appendChild(P);h=h.createElement("span");y.appendChild(h);M.length?c.place(M,r,"after"):M=r;c.place(y,M,"after");H&&c.place(H,y,"after");
c.destroy(r);r=L.create(this.window);r.setStart(P,0);r.setEnd(P,P.length);v.removeAllRanges();v.addRange(r);if(l("webkit")){v="color";if("hilitecolor"===p||"backcolor"===p)v="backgroundColor";k.set(y,v,e);this.selection.remove();c.destroy(h);y.innerHTML="\x26#160;";this.selection.selectElement(y);this.focus()}else this.execCommand(p,e),c.place(y.firstChild,y,"before"),c.destroy(y),r.setStart(P,0),r.setEnd(P,P.length),v.removeAllRanges(),v.addRange(r),this.selection.collapse(!1),P.parentNode.removeChild(P);
return!0}}return!1},_adjustNodeAndOffset:function(p,e){for(;p.length<e&&p.nextSibling&&3===p.nextSibling.nodeType;)e-=p.length,p=p.nextSibling;return{node:p,offset:e}},_tagNamesForCommand:function(p){return"bold"===p?["b","strong"]:"italic"===p?["i","em"]:"strikethrough"===p?["s","strike"]:"superscript"===p?["sup"]:"subscript"===p?["sub"]:"underline"===p?["u"]:[]},_stripBreakerNodes:function(p){if(this.isLoaded)return F(".ieFormatBreakerSpan",p).forEach(function(e){for(;e.firstChild;)c.place(e.firstChild,
e,"before");c.destroy(e)}),p},_stripTrailingEmptyNodes:function(p){function e(v){return/^(p|div|br)$/i.test(v.nodeName)&&0==v.children.length&&/^[\s\xA0]*$/.test(v.textContent||v.innerText||"")||3===v.nodeType&&/^[\s\xA0]*$/.test(v.nodeValue)}for(;p.lastChild&&e(p.lastChild);)c.destroy(p.lastChild);return p},_setTextDirAttr:function(p){this._set("textDir",p);this.onLoadDeferred.then(t.hitch(this,function(){this.editNode.dir=p}))}});return S})},"dijit/_editor/range":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/lang"],function(x,E,K){var J={getIndex:function(b,c){for(var f=[],k=[],q=b,n,t;b!=c;){var B=0;for(n=b.parentNode;t=n.childNodes[B++];)if(t===b){--B;break}f.unshift(B);k.unshift(B-n.childNodes.length);b=n}if(0<f.length&&3==q.nodeType){for(t=q.previousSibling;t&&3==t.nodeType;)f[f.length-1]--,t=t.previousSibling;for(t=q.nextSibling;t&&3==t.nodeType;)k[k.length-1]++,t=t.nextSibling}return{o:f,r:k}},getNode:function(b,c){if(!K.isArray(b)||0==b.length)return c;var f=c;
x.every(b,function(k){if(0<=k&&k<f.childNodes.length)f=f.childNodes[k];else return f=null,!1;return!0});return f},getCommonAncestor:function(b,c,f){f=f||b.ownerDocument.body;var k=function(t){for(var B=[];t;)if(B.unshift(t),t!==f)t=t.parentNode;else break;return B};b=k(b);c=k(c);k=Math.min(b.length,c.length);for(var q=b[0],n=1;n<k;n++)if(b[n]===c[n])q=b[n];else break;return q},getAncestor:function(b,c,f){for(f=f||b.ownerDocument.body;b&&b!==f;){var k=b.nodeName.toUpperCase();if(c.test(k))return b;
b=b.parentNode}return null},BlockTagNames:/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/,getBlockAncestor:function(b,c,f){f=f||b.ownerDocument.body;c=c||J.BlockTagNames;for(var k=null,q;b&&b!==f;){var n=b.nodeName.toUpperCase();!k&&c.test(n)&&(k=b);!q&&/^(?:BODY|TD|TH|CAPTION)$/.test(n)&&(q=b);b=b.parentNode}return{blockNode:k,blockContainer:q||b.ownerDocument.body}},atBeginningOfContainer:function(b,c,f){var k=!1,q=0==f;q||3!=c.nodeType||/^[\s\xA0]+$/.test(c.nodeValue.substr(0,f))&&(q=
!0);if(q)for(k=!0;c&&c!==b;){if(c.previousSibling){k=!1;break}c=c.parentNode}return k},atEndOfContainer:function(b,c,f){var k=!1,q=f==(c.length||c.childNodes.length);q||3!=c.nodeType||/^[\s\xA0]+$/.test(c.nodeValue.substr(f))&&(q=!0);if(q)for(k=!0;c&&c!==b;){if(c.nextSibling){k=!1;break}c=c.parentNode}return k},adjacentNoneTextNode:function(b,c){var f=b;b=0-b.length||0;for(c=c?"nextSibling":"previousSibling";f&&3==f.nodeType;)b+=f.length,f=f[c];return[f,b]},create:function(b){b=b||window;return b.getSelection?
b.document.createRange():new a},getSelection:function(b,c){if(b.getSelection)return b.getSelection();b=new w.selection(b);c||b._getCurrentSelection();return b}};if(!window.getSelection)var w=J.ie={cachedSelection:{},selection:function(b){this._ranges=[];this.addRange=function(c,f){this._ranges.push(c);f||c._select();this.rangeCount=this._ranges.length};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0};this.getRangeAt=function(c){return this._ranges[c]};this._getCurrentSelection=function(){this.removeAllRanges();
var c=b.document.selection.createRange();c="CONTROL"==b.document.selection.type.toUpperCase()?new a(w.decomposeControlRange(c)):new a(w.decomposeTextRange(c));this.addRange(c,!0),this.isCollapsed=c.collapsed}},decomposeControlRange:function(b){var c=b.item(0),f=b.item(b.length-1);b=c.parentNode;var k=f.parentNode;c=J.getIndex(c,b).o[0];f=J.getIndex(f,k).o[0]+1;return[b,c,k,f]},getEndPoint:function(b,c){var f=b.duplicate();f.collapse(!c);var k="EndTo"+(c?"End":"Start"),q=f.parentElement(),n;if(0<q.childNodes.length)x.every(q.childNodes,
function(F,d){if(3!=F.nodeType)if(f.moveToElementText(F),0<f.compareEndPoints(k,b))if(n&&3==n.nodeType){t=n;var l=!0}else return t=q,B=d,!1;else{if(d==q.childNodes.length-1)return t=q,B=q.childNodes.length,!1}else d==q.childNodes.length-1&&(t=F,l=!0);if(l&&t)return t=(F=J.adjacentNoneTextNode(t)[0])?F.nextSibling:q.firstChild,d=J.adjacentNoneTextNode(t),F=d[0],d=d[1],F?(f.moveToElementText(F),f.collapse(!1)):f.moveToElementText(q),f.setEndPoint(k,b),B=f.text.length-d,!1;n=F;return!0});else{var t=
q;var B=0}c||1!=t.nodeType||B!=t.childNodes.length||(c=t.nextSibling)&&3==c.nodeType&&(t=c,B=0);return[t,B]},setEndPoint:function(b,c,f){b=b.duplicate();var k;if(3!=c.nodeType)if(0<f){if(k=c.childNodes[f-1])if(3==k.nodeType)c=k,f=k.length;else if(k.nextSibling&&3==k.nextSibling.nodeType)c=k.nextSibling,f=0;else{b.moveToElementText(k.nextSibling?k:c);var q=k.parentNode;k=q.insertBefore(k.ownerDocument.createTextNode(" "),k.nextSibling);b.collapse(!1);q.removeChild(k)}}else b.moveToElementText(c),b.collapse(!0);
3==c.nodeType&&(k=J.adjacentNoneTextNode(c),q=k[0],k=k[1],q?(b.moveToElementText(q),b.collapse(!1),"inherit"!=q.contentEditable&&k++):(b.moveToElementText(c.parentNode),b.collapse(!0),b.move("character",1),b.move("character",-1)),f+=k,0<f&&b.move("character",f)!=f&&console.error("Error when moving!"));return b},decomposeTextRange:function(b){var c=w.getEndPoint(b),f=c[0],k=c[1],q=c[0];c=c[1];b.htmlText.length&&(b.htmlText==b.text?c=k+b.text.length:(c=w.getEndPoint(b,!0),q=c[0],c=c[1]));return[f,k,
q,c]},setRange:function(b,c,f,k,q,n){c=w.setEndPoint(b,c,f);b.setEndPoint("StartToStart",c);if(!n)var t=w.setEndPoint(b,k,q);b.setEndPoint("EndToEnd",t||c);return b}},a=J.W3CRange=E(null,{constructor:function(){0<arguments.length?(this.setStart(arguments[0][0],arguments[0][1]),this.setEnd(arguments[0][2],arguments[0][3])):(this.startContainer=this.commonAncestorContainer=null,this.startOffset=0,this.endContainer=null,this.endOffset=0,this.collapsed=!0)},_updateInternal:function(){this.commonAncestorContainer=
this.startContainer!==this.endContainer?J.getCommonAncestor(this.startContainer,this.endContainer):this.startContainer;this.collapsed=this.startContainer===this.endContainer&&this.startOffset==this.endOffset},setStart:function(b,c){c=parseInt(c);if(this.startContainer!==b||this.startOffset!=c)delete this._cachedBookmark,this.startContainer=b,this.startOffset=c,this.endContainer?this._updateInternal():this.setEnd(b,c)},setEnd:function(b,c){c=parseInt(c);if(this.endContainer!==b||this.endOffset!=c)delete this._cachedBookmark,
this.endContainer=b,this.endOffset=c,this.startContainer?this._updateInternal():this.setStart(b,c)},setStartAfter:function(b,c){this._setPoint("setStart",b,c,1)},setStartBefore:function(b,c){this._setPoint("setStart",b,c,0)},setEndAfter:function(b,c){this._setPoint("setEnd",b,c,1)},setEndBefore:function(b,c){this._setPoint("setEnd",b,c,0)},_setPoint:function(b,c,f,k){f=J.getIndex(c,c.parentNode).o;this[b](c.parentNode,f.pop()+k)},_getIERange:function(){var b=(this._body||this.endContainer.ownerDocument.body).createTextRange();
w.setRange(b,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return b},getBookmark:function(){this._getIERange();return this._cachedBookmark},_select:function(){this._getIERange().select()},deleteContents:function(){var b=this.startContainer,c=this._getIERange();3!==b.nodeType||this.startOffset||this.setStartBefore(b);c.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=!0},cloneRange:function(){var b=new a([this.startContainer,
this.startOffset,this.endContainer,this.endOffset]);b._body=this._body;return b},detach:function(){this.startContainer=this.commonAncestorContainer=this._body=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=!0}});K.setObject("dijit.range",J);return J})},"dijit/_editor/html":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(x,E,K){var J={};E.setObject("dijit._editor.html",J);var w=J.escapeXml=function(a,b){a=a.replace(/&/gm,"\x26amp;").replace(/</gm,
"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;");b||(a=a.replace(/'/gm,"\x26#39;"));return a};J.getNodeHtml=function(a){var b=[];J.getNodeHtmlHelper(a,b);return b.join("")};J.getNodeHtmlHelper=function(a,b){switch(a.nodeType){case 1:var c=a.nodeName.toLowerCase();if(!c||"/"==c.charAt(0))return"";b.push("\x3c",c);var f=[],k={},q;if(K("dom-attributes-explicit")||K("dom-attributes-specified-flag"))for(var n=0;q=a.attributes[n++];){var t=q.name;"_dj"===t.substr(0,3)||K("dom-attributes-specified-flag")&&
!q.specified||t in k||(q=q.value,("src"==t||"href"==t)&&a.getAttribute("_djrealurl")&&(q=a.getAttribute("_djrealurl")),8===K("ie")&&"style"===t&&(q=q.replace("HEIGHT:","height:").replace("WIDTH:","width:")),f.push([t,q]),k[t]=q)}else{var B=(/^input$|^img$/i.test(a.nodeName)?a:a.cloneNode(!1)).outerHTML;k=B.match(/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi);B=B.substr(0,B.indexOf("\x3e"));x.forEach(k,function(F){if(F){var d=F.indexOf("\x3d");if(0<d&&(F=F.substring(0,d),"_dj"!=F.substr(0,3)))if("src"!=F&&"href"!=
F||!a.getAttribute("_djrealurl")){switch(F){case "style":var l=a.style.cssText.toLowerCase();break;case "class":l=a.className;break;case "width":if("img"===c){(d=/width=(\S+)/i.exec(B))&&(l=d[1]);break}case "height":if("img"===c){(d=/height=(\S+)/i.exec(B))&&(l=d[1]);break}default:l=a.getAttribute(F)}null!=l&&f.push([F,l.toString()])}else f.push([F,a.getAttribute("_djrealurl")])}},this)}f.sort(function(F,d){return F[0]<d[0]?-1:F[0]==d[0]?0:1});for(k=0;q=f[k++];)b.push(" ",q[0],'\x3d"',"string"===
typeof q[1]?w(q[1],!0):q[1],'"');switch(c){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":b.push(" /\x3e");break;case "script":b.push("\x3e",a.innerHTML,"\x3c/",c,"\x3e");break;default:b.push("\x3e"),a.hasChildNodes()&&J.getChildrenHtmlHelper(a,b),b.push("\x3c/",c,"\x3e")}break;case 4:case 3:b.push(w(a.nodeValue,!0));break;case 8:b.push("\x3c!--",w(a.nodeValue,!0),"--\x3e");break;default:b.push("\x3c!-- Element not recognized - Type: ",a.nodeType," Name: ",
a.nodeName,"--\x3e")}};J.getChildrenHtml=function(a){var b=[];J.getChildrenHtmlHelper(a,b);return b.join("")};J.getChildrenHtmlHelper=function(a,b){if(a)for(var c=a.childNodes||a,f=!K("ie")||c!==a,k,q=0;k=c[q++];)f&&k.parentNode!=a||J.getNodeHtmlHelper(k,b)};return J})},"dijit/_editor/plugins/LinkDialog":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/query dojo/string ../_Plugin ../../form/DropDownButton ../range".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t){var B=K("dijit._editor.plugins.LinkDialog",q,{allowUnsafeHtml:!1,linkFilter:[[/</g,"\x26lt;"]],buttonClass:n,useDefaultCommand:!1,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",
emailRegExp:"\x3c?(mailto\\:)([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*\x3e?",htmlTemplate:'\x3ca href\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" target\x3d"${targetSelect}"\x3e${textInput}\x3c/a\x3e',tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,
linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_targetSelect'\x3e${target}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cselect id\x3d'${id}_targetSelect' name\x3d'targetSelect' data-dojo-type\x3d'dijit.form.Select'\x3e\x3coption selected\x3d'selected' value\x3d'_self'\x3e${currentWindow}\x3c/option\x3e\x3coption value\x3d'_blank'\x3e${newWindow}\x3c/option\x3e\x3coption value\x3d'_top'\x3e${topWindow}\x3c/option\x3e\x3coption value\x3d'_parent'\x3e${parentWindow}\x3c/option\x3e\x3c/select\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){this.inherited(arguments);this.button.loadDropDown=a.hitch(this,"_loadDropDown");this._connectTagEvents()},_loadDropDown:function(d){x("dojo/i18n ../../TooltipDialog ../../registry ../../form/Button ../../form/Select ../../form/ValidationTextBox dojo/i18n!../../nls/common dojo/i18n!../nls/LinkDialog".split(" "),a.hitch(this,function(l,u,I){var m=this;this.tag="insertImage"==this.command?"img":"a";l=a.delegate(l.getLocalization("dijit","common",this.lang),l.getLocalization("dijit._editor",
"LinkDialog",this.lang));var g=this.dropDown=this.button.dropDown=new u({title:l[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:a.hitch(this,"setValue"),onOpen:function(){m._onOpenDialog();u.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(a.hitch(m,"_onCloseDialog"),0)}});l.urlRegExp=this.urlRegExp;l.id=I.getUniqueId(this.editor.id);this._uniqueId=l.id;this._setContent(g.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+
k.substitute(this.linkDialogTemplate,l));g.startup();this._urlInput=I.byId(this._uniqueId+"_urlInput");this._textInput=I.byId(this._uniqueId+"_textInput");this._setButton=I.byId(this._uniqueId+"_setButton");this.own(I.byId(this._uniqueId+"_cancelButton").on("click",a.hitch(this.dropDown,"onCancel")));this._urlInput&&this.own(this._urlInput.on("change",a.hitch(this,"_checkAndFixInput")));this._textInput&&this.own(this._textInput.on("change",a.hitch(this,"_checkAndFixInput")));this._urlRegExp=new RegExp("^"+
this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=a.hitch(this,function(){var A=this._urlInput.get("value");return this._urlRegExp.test(A)||this._emailRegExp.test(A)});this.own(b(g.domNode,"keydown",a.hitch(this,a.hitch(this,function(A){!A||A.keyCode!=w.ENTER||A.shiftKey||A.metaKey||A.ctrlKey||A.altKey||this._setButton.get("disabled")||(g.onExecute(),g.execute(g.get("value")))}))));d()}))},_checkAndFixInput:function(){var d=this,l=this._urlInput.get("value");
this._delayedCheck&&(clearTimeout(this._delayedCheck),this._delayedCheck=null);this._delayedCheck=setTimeout(function(){var u=l,I=!1,m=!1;u&&1<u.length&&(u=a.trim(u),0!==u.indexOf("mailto:")&&(0<u.indexOf("/")?-1===u.indexOf("://")&&"/"!==u.charAt(0)&&u.indexOf("./")&&0!==u.indexOf("../")&&d._hostRxp.test(u)&&(I=!0):d._userAtRxp.test(u)&&(m=!0)));I&&d._urlInput.set("value","http://"+u);m&&d._urlInput.set("value","mailto:"+u);d._setButton.set("disabled",!d._isValid())},250)},_connectTagEvents:function(){this.editor.onLoadDeferred.then(a.hitch(this,
function(){this.own(b(this.editor.editNode,"mouseup",a.hitch(this,"_onMouseUp")));this.own(b(this.editor.editNode,"dblclick",a.hitch(this,"_onDblClick")))}))},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid()},_setContent:function(d){this.dropDown.set({parserScope:"dojo",content:d})},_checkValues:function(d){d&&d.urlInput&&(d.urlInput=d.urlInput.replace(/"/g,"\x26quot;"));!this.allowUnsafeHtml&&d&&d.textInput&&("function"===typeof this.linkFilter?d.textInput=this.linkFilter(d.textInput):
E.forEach(this.linkFilter,function(l){d.textInput=d.textInput.replace(l[0],l[1])}));return d},_createlinkEnabledImpl:function(){return!0},setValue:function(d){this._onCloseDialog();if(9>c("ie")){var l=t.getSelection(this.editor.window).getRangeAt(0).endContainer;3===l.nodeType&&(l=l.parentNode);l&&l.nodeName&&l.nodeName.toLowerCase()!==this.tag&&(l=this.editor.selection.getSelectedElement(this.tag));l&&l.nodeName&&l.nodeName.toLowerCase()===this.tag&&this.editor.queryCommandEnabled("unlink")&&(this.editor.selection.selectElementChildren(l),
this.editor.execCommand("unlink"))}d=this._checkValues(d);this.editor.execCommand("inserthtml",k.substitute(this.htmlTemplate,d));f("a",this.editor.document).forEach(function(u){u.innerHTML||J.has(u,"name")||u.parentNode.removeChild(u)},this)},_onCloseDialog:function(){this.editor.focused&&this.editor.focus()},_getCurrentValues:function(d){if(d&&d.tagName.toLowerCase()===this.tag){var l=d.getAttribute("_djrealurl")||d.getAttribute("href");var u=d.getAttribute("target")||"_self";var I=d.textContent||
d.innerText;this.editor.selection.selectElement(d,!0)}else I=this.editor.selection.getSelectedText();return{urlInput:l||"",textInput:I||"",targetSelect:u||""}},_onOpenDialog:function(){if(c("ie")){var d=t.getSelection(this.editor.window);if(d.rangeCount){var l=d.getRangeAt(0);var u=l.endContainer;3===u.nodeType&&(u=u.parentNode);u&&u.nodeName&&u.nodeName.toLowerCase()!==this.tag&&(u=this.editor.selection.getSelectedElement(this.tag));if(!u||u.nodeName&&u.nodeName.toLowerCase()!==this.tag)(d=this.editor.selection.getAncestorElement(this.tag))&&
d.nodeName&&d.nodeName.toLowerCase()==this.tag?(u=d,this.editor.selection.selectElement(u)):l.startContainer===l.endContainer&&(d=l.startContainer.firstChild)&&d.nodeName&&d.nodeName.toLowerCase()==this.tag&&(u=d,this.editor.selection.selectElement(u))}}else u=this.editor.selection.getAncestorElement(this.tag);this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(u))},_onDblClick:function(d){if(d&&d.target&&(d=d.target,(d.tagName?d.tagName.toLowerCase():
"")===this.tag&&J.get(d,"href"))){var l=this.editor;this.editor.selection.selectElement(d);l.onDisplayChanged();l._updateTimer&&(l._updateTimer.remove(),delete l._updateTimer);l.onNormalizedDisplayChanged();var u=this.button;setTimeout(function(){u.set("disabled",!1);u.loadAndOpenDropDown().then(function(){u.dropDown.focus&&u.dropDown.focus()})},10)}},_onMouseUp:function(){if(c("ff")){var d=this.editor.selection.getAncestorElement(this.tag);if(d){var l=t.getSelection(this.editor.window).getRangeAt(0);
if(l.collapsed&&d.childNodes.length){var u=l.cloneRange();u.selectNodeContents(d.childNodes[d.childNodes.length-1]);u.setStart(d.childNodes[0],0);1!==l.compareBoundaryPoints(u.START_TO_START,u)?l.setStartBefore(d):-1!==l.compareBoundaryPoints(u.END_TO_START,u)&&l.setStartAfter(d)}}}}}),F=K("dijit._editor.plugins.ImgLinkDialog",[B],{linkDialogTemplate:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_urlInput'\x3e${url}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' regExp\x3d'${urlRegExp}' required\x3d'true' id\x3d'${id}_urlInput' name\x3d'urlInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' required\x3d'false' id\x3d'${id}_textInput' name\x3d'textInput' data-dojo-props\x3d'intermediateChanges:true'/\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
htmlTemplate:'\x3cimg src\x3d"${urlInput}" _djrealurl\x3d"${urlInput}" alt\x3d"${textInput}" /\x3e',tag:"img",_getCurrentValues:function(d){if(d&&d.tagName.toLowerCase()===this.tag){var l=d.getAttribute("_djrealurl")||d.getAttribute("src");var u=d.getAttribute("alt");this.editor.selection.selectElement(d,!0)}else u=this.editor.selection.getSelectedText();return{urlInput:l||"",textInput:u||""}},_isValid:function(){return this._urlInput.isValid()},_connectTagEvents:function(){this.inherited(arguments);
this.editor.onLoadDeferred.then(a.hitch(this,function(){this.own(b(this.editor.editNode,"mousedown",a.hitch(this,"_selectTag")))}))},_selectTag:function(d){d&&d.target&&(d=d.target,(d.tagName?d.tagName.toLowerCase():"")===this.tag&&this.editor.selection.selectElement(d))},_checkValues:function(d){d&&d.urlInput&&(d.urlInput=d.urlInput.replace(/"/g,"\x26quot;"));d&&d.textInput&&(d.textInput=d.textInput.replace(/"/g,"\x26quot;"));return d},_onDblClick:function(d){if(d&&d.target&&(d=d.target,(d.tagName?
d.tagName.toLowerCase():"")===this.tag&&J.get(d,"src"))){var l=this.editor;this.editor.selection.selectElement(d);l.onDisplayChanged();l._updateTimer&&(l._updateTimer.remove(),delete l._updateTimer);l.onNormalizedDisplayChanged();var u=this.button;setTimeout(function(){u.set("disabled",!1);u.loadAndOpenDropDown().then(function(){u.dropDown.focus&&u.dropDown.focus()})},10)}}});q.registry.createLink=function(d){var l={command:"createLink",allowUnsafeHtml:"allowUnsafeHtml"in d?d.allowUnsafeHtml:!1};
"linkFilter"in d&&(l.linkFilter=d.linkFilter);return new B(l)};q.registry.insertImage=function(){return new F({command:"insertImage"})};B.ImgLinkDialog=F;return B})},"dijit/_editor/plugins/ViewSource":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/window ../../focus ../_Plugin ../../form/ToggleButton ../.. ../../registry dojo/i18n!../nls/commands".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F,d,l,u){var I=K("dijit._editor.plugins.ViewSource",F,{stripScripts:!0,stripComments:!0,stripIFrames:!0,stripEventHandlers:!0,readOnly:!1,_fsPlugin:null,toggle:function(){n("webkit")&&(this._vsFocused=!0);this.button.set("checked",!this.button.get("checked"))},_initButton:function(){var m=c.getLocalization("dijit._editor","commands"),g=this.editor;this.button=new d({label:m.viewSource,ownerDocument:g.ownerDocument,dir:g.dir,lang:g.lang,showLabel:!1,iconClass:this.iconClassPrefix+
" "+this.iconClassPrefix+"ViewSource",tabIndex:"-1",onChange:k.hitch(this,"_showSource")});this.button.set("readOnly",!1)},setEditor:function(m){this.editor=m;this._initButton();this.removeValueFilterHandles();this._setValueFilterHandle=E.before(this.editor,"setValue",k.hitch(this,function(g){return[this._filter(g)]}));this._getValueFilterHandle=E.after(this.editor,"getValue",k.hitch(this,function(g){return this._filter(g)}));this.editor.addKeyHandler(f.F12,!0,!0,k.hitch(this,function(g){this.button.focus();
this.toggle();g.stopPropagation();g.preventDefault();setTimeout(k.hitch(this,function(){this.editor.focused&&this.editor.focus()}),100)}))},_showSource:function(m){var g=this.editor,A=g._plugins;this._sourceShown=m;var D=this;try{this.sourceArea||this._createSourceView();if(m)g._sourceQueryCommandEnabled=g.queryCommandEnabled,g.queryCommandEnabled=function(O){return"viewsource"===O.toLowerCase()},this.editor.onDisplayChanged(),x.forEach(A,function(O){!O||O instanceof I||!O.isInstanceOf(F)||O.set("disabled",
!0)}),this._fsPlugin&&(this._fsPlugin._getAltViewNode=function(){return D.sourceArea}),this.sourceArea.value=g.get("value"),this.sourceArea.style.height=g.iframe.style.height,this.sourceArea.style.width=g.iframe.style.width,g.iframe.parentNode.style.position="relative",b.set(g.iframe,{position:"absolute",top:0,visibility:"hidden"}),b.set(this.sourceArea,{display:"block"}),this._resizeHandle=q(window,"resize",k.hitch(this,function(){var O=t.getBox(g.ownerDocument);"_prevW"in this&&"_prevH"in this&&
O.w===this._prevW&&O.h===this._prevH||(this._prevW=O.w,this._prevH=O.h,this._resizer&&(clearTimeout(this._resizer),delete this._resizer),this._resizer=setTimeout(k.hitch(this,function(){delete this._resizer;this._resize()}),10))})),setTimeout(k.hitch(this,this._resize),100),this.editor.onNormalizedDisplayChanged(),this.editor.__oldGetValue=this.editor.getValue,this.editor.getValue=k.hitch(this,function(){var O=this.sourceArea.value;return O=this._filter(O)}),this._setListener=E.after(this.editor,
"setValue",k.hitch(this,function(O){this.sourceArea.value=O||""}),!0);else{if(!g._sourceQueryCommandEnabled)return;this._setListener.remove();delete this._setListener;this._resizeHandle.remove();delete this._resizeHandle;this.editor.__oldGetValue&&(this.editor.getValue=this.editor.__oldGetValue,delete this.editor.__oldGetValue);g.queryCommandEnabled=g._sourceQueryCommandEnabled;if(!this._readOnly){var N=this.sourceArea.value;g.beginEditing();g.set("value",N);g.endEditing()}x.forEach(A,function(O){O&&
O.isInstanceOf(F)&&O.set("disabled",!1)});b.set(this.sourceArea,"display","none");b.set(g.iframe,{position:"relative",visibility:"visible"});delete g._sourceQueryCommandEnabled;this.editor.onDisplayChanged()}setTimeout(k.hitch(this,function(){var O=g.domNode.parentNode;O&&(O=u.getEnclosingWidget(O))&&O.resize&&O.resize();g.resize()}),300)}catch(O){console.log(O)}},updateState:function(){this.button.set("disabled",this.get("disabled"))},_resize:function(){var m=this.editor,g=m.getHeaderHeight(),A=
m.getFooterHeight(),D=a.position(m.domNode),N=a.getPadBorderExtents(m.iframe.parentNode),O=a.getMarginExtents(m.iframe.parentNode),L=a.getPadBorderExtents(m.domNode),z=D.w-L.w;D=D.h-(g+L.h+A);this._fsPlugin&&this._fsPlugin.isFullscreen&&(m=t.getBox(m.ownerDocument),z=m.w-L.w,D=m.h-(g+L.h+A));a.setMarginBox(this.sourceArea,{w:Math.round(z-(N.w+O.w)),h:Math.round(D-(N.h+O.h))})},_createSourceView:function(){var m=this.editor,g=m._plugins;this.sourceArea=w.create("textarea");this.readOnly&&(J.set(this.sourceArea,
"readOnly",!0),this._readOnly=!0);b.set(this.sourceArea,{padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});J.set(this.sourceArea,"aria-label",this.editor.id);w.place(this.sourceArea,m.iframe,"before");n("ie")&&m.iframe.parentNode.lastChild!==m.iframe&&b.set(m.iframe.parentNode.lastChild,{width:"0px",height:"0px",padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});m._viewsource_oldFocus=m.focus;var A=this;m.focus=function(){if(A._sourceShown)A.setSourceAreaCaret();else try{this._vsFocused?
(delete this._vsFocused,B.focus(m.editNode)):m._viewsource_oldFocus()}catch(O){console.log("ViewSource focus code error: "+O)}};var D,N;for(D=0;D<g.length;D++)if((N=g[D])&&("dijit._editor.plugins.FullScreen"===N.declaredClass||N.declaredClass===l._scopeName+"._editor.plugins.FullScreen")){this._fsPlugin=N;break}this._fsPlugin&&(this._fsPlugin._viewsource_getAltViewNode=this._fsPlugin._getAltViewNode,this._fsPlugin._getAltViewNode=function(){return A._sourceShown?A.sourceArea:this._viewsource_getAltViewNode()});
this.own(q(this.sourceArea,"keydown",k.hitch(this,function(O){this._sourceShown&&O.keyCode==f.F12&&O.ctrlKey&&O.shiftKey&&(this.button.focus(),this.button.set("checked",!1),setTimeout(k.hitch(this,function(){m.focus()}),100),O.stopPropagation(),O.preventDefault())})))},_stripScripts:function(m){m&&(m=m.replace(/<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>/ig,""),m=m.replace(/<\s*script\b([^<>]|\s)*>?/ig,""),m=m.replace(/<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>/ig,""));return m},_stripComments:function(m){m&&
(m=m.replace(/\x3c!--(.|\s){1,}?--\x3e/g,""));return m},_stripIFrames:function(m){m&&(m=m.replace(/<\s*iframe[^>]*>((.|\s)*?)<\\?\/\s*iframe\s*>/ig,""));return m},_stripEventHandlers:function(m){if(m){var g=m.match(/<[a-z]+?\b(.*?on.*?(['"]).*?\2.*?)+>/gim);if(g)for(var A=0,D=g.length;A<D;A++){var N=g[A],O=N.replace(/\s+on[a-z]*\s*=\s*(['"])(.*?)\1/igm,"");m=m.replace(N,O)}}return m},_filter:function(m){m&&(this.stripScripts&&(m=this._stripScripts(m)),this.stripComments&&(m=this._stripComments(m)),
this.stripIFrames&&(m=this._stripIFrames(m)),this.stripEventHandlers&&(m=this._stripEventHandlers(m)));return m},removeValueFilterHandles:function(){this._setValueFilterHandle&&(this._setValueFilterHandle.remove(),delete this._setValueFilterHandle);this._getValueFilterHandle&&(this._getValueFilterHandle.remove(),delete this._getValueFilterHandle)},setSourceAreaCaret:function(){var m=this.sourceArea;B.focus(m);this._sourceShown&&!this.readOnly&&(m.setSelectionRange?m.setSelectionRange(0,0):this.sourceArea.createTextRange&&
(m=m.createTextRange(),m.collapse(!0),m.moveStart("character",-99999),m.moveStart("character",0),m.moveEnd("character",0),m.select()))},destroy:function(){this._resizer&&(clearTimeout(this._resizer),delete this._resizer);this._resizeHandle&&(this._resizeHandle.remove(),delete this._resizeHandle);this._setListener&&(this._setListener.remove(),delete this._setListener);this.removeValueFilterHandles();this.inherited(arguments)}});F.registry.viewSource=F.registry.viewsource=function(m){return new I({readOnly:"readOnly"in
m?m.readOnly:!1,stripComments:"stripComments"in m?m.stripComments:!0,stripScripts:"stripScripts"in m?m.stripScripts:!0,stripIFrames:"stripIFrames"in m?m.stripIFrames:!0,stripEventHandlers:"stripEventHandlers"in m?m.stripEventHandlers:!0})};return I})},"dijit/_editor/plugins/FontChoice":function(){define("require dojo/_base/array dojo/_base/declare dojo/dom-construct dojo/i18n dojo/_base/lang dojo/string dojo/store/Memory ../../registry ../../_Widget ../../_TemplatedMixin ../../_WidgetsInTemplateMixin ../../form/FilteringSelect ../_Plugin ../range dojo/i18n!../nls/FontChoice".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F){x=K("dijit._editor.plugins._FontDropDown",[k,q,n],{label:"",plainText:!1,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${selectId}'\x3e${label}\x3c/label\x3e\x3cinput data-dojo-type\x3d'../../form/FilteringSelect' required\x3d'false' data-dojo-props\x3d'labelType:\"html\", labelAttr:\"label\", searchAttr:\"name\"' class\x3d'${comboClass}' tabIndex\x3d'-1' id\x3d'${selectId}' data-dojo-attach-point\x3d'select' value\x3d''/\x3e\x3c/span\x3e",
contextRequire:x,postMixInProperties:function(){this.inherited(arguments);this.strings=w.getLocalization("dijit._editor","FontChoice");this.label=this.strings[this.command];this.id=f.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.selectId=this.id+"_select";this.inherited(arguments)},postCreate:function(){this.select.set("store",new c({idProperty:"value",data:E.map(this.values,function(m){var g=this.strings[m]||m;return{label:this.getLabel(m,g),name:g,value:m}},this)}));this.select.set("value",
"",!1);this.disabled=this.select.get("disabled")},_setValueAttr:function(m,g){g=!1!==g;this.select.set("value",0>E.indexOf(this.values,m)?"":m,g);g||(this.select._lastValueReported=null)},_getValueAttr:function(){return this.select.get("value")},focus:function(){this.select.focus()},_setDisabledAttr:function(m){this._set("disabled",m);this.select.set("disabled",m)}});var d=K("dijit._editor.plugins._FontNameDropDown",x,{generic:!1,command:"fontName",comboClass:"dijitFontNameCombo",postMixInProperties:function(){this.values||
(this.values=this.generic?["serif","sans-serif","monospace","cursive","fantasy"]:["Arial","Times New Roman","Comic Sans MS","Courier New"]);this.inherited(arguments)},getLabel:function(m,g){return this.plainText?g:"\x3cdiv style\x3d'font-family: "+m+"'\x3e"+g+"\x3c/div\x3e"},_normalizeFontName:function(m){var g=this.values;if(!m||!g)return m;var A=m.split(",");if(1<A.length)for(var D=0,N=A.length;D<N;D++){var O=b.trim(A[D]);if(-1<E.indexOf(g,O))return O}return m},_setValueAttr:function(m,g){g=!1!==
g;m=this._normalizeFontName(m);this.generic&&(m={Arial:"sans-serif",Helvetica:"sans-serif",Myriad:"sans-serif",Times:"serif","Times New Roman":"serif","Comic Sans MS":"cursive","Apple Chancery":"cursive",Courier:"monospace","Courier New":"monospace",Papyrus:"fantasy","Estrangelo Edessa":"cursive",Gabriola:"fantasy"}[m]||m);this.inherited(arguments,[m,g])}}),l=K("dijit._editor.plugins._FontSizeDropDown",x,{command:"fontSize",comboClass:"dijitFontSizeCombo",values:[1,2,3,4,5,6,7],getLabel:function(m,
g){return this.plainText?g:"\x3cfont size\x3d"+m+"'\x3e"+g+"\x3c/font\x3e"},_setValueAttr:function(m,g){g=!1!==g;m.indexOf&&-1!=m.indexOf("px")&&(m={10:1,13:2,16:3,18:4,24:5,32:6,48:7}[parseInt(m,10)]||m);this.inherited(arguments,[m,g])}}),u=K("dijit._editor.plugins._FormatBlockDropDown",x,{command:"formatBlock",comboClass:"dijitFormatBlockCombo",values:"noFormat p h1 h2 h3 pre".split(" "),postCreate:function(){this.inherited(arguments);this.set("value","noFormat",!1)},getLabel:function(m,g){return this.plainText||
"noFormat"==m?g:"\x3c"+m+"\x3e"+g+"\x3c/"+m+"\x3e"},_execCommand:function(m,g,A){if("noFormat"===A){var D;if((g=F.getSelection(m.window))&&0<g.rangeCount&&(A=g.getRangeAt(0),A)){g=A.startContainer;for(D=A.endContainer;g&&g!==m.editNode&&g!==m.document.body&&1!==g.nodeType;)g=g.parentNode;for(;D&&D!==m.editNode&&D!==m.document.body&&1!==D.nodeType;)D=D.parentNode;var N=a.hitch(this,function(C,Q){if(C.childNodes&&C.childNodes.length){var S;for(S=0;S<C.childNodes.length;S++){var p=C.childNodes[S];if(1==
p.nodeType&&m.selection.inSelection(p)){var e=p.tagName?p.tagName.toLowerCase():"";-1!==E.indexOf(this.values,e)&&Q.push(p);N(p,Q)}}}});A=a.hitch(this,function(C){if(C&&C.length){for(m.beginEditing();C.length;)this._removeFormat(m,C.pop());m.endEditing()}});var O=[];if(g==D){for(D=g;D&&D!==m.editNode&&D!==m.document.body;){if(1==D.nodeType){var L=D.tagName?D.tagName.toLowerCase():"";if(-1!==E.indexOf(this.values,L)){var z=D;break}}D=D.parentNode}N(g,O);z&&(O=[z].concat(O))}else for(D=g;m.selection.inSelection(D);)1==
D.nodeType&&(L=D.tagName?D.tagName.toLowerCase():"",-1!==E.indexOf(this.values,L)&&O.push(D),N(D,O)),D=D.nextSibling;A(O);m.onDisplayChanged()}}else m.execCommand(g,A)},_removeFormat:function(m,g){if(m.customUndo){for(;g.firstChild;)J.place(g.firstChild,g,"before");g.parentNode.removeChild(g)}else{m.selection.selectElementChildren(g);var A=m.selection.getSelectedHtml();m.selection.selectElement(g);m.execCommand("inserthtml",A||"")}}}),I=K("dijit._editor.plugins.FontChoice",B,{useDefaultCommand:!1,
_initButton:function(){var m={fontName:d,fontSize:l,formatBlock:u}[this.command],g=this.params;this.params.custom&&(g.values=this.params.custom);var A=this.editor;this.button=new m(a.delegate({dir:A.dir,lang:A.lang},g));this.own(this.button.select.on("change",a.hitch(this,function(D){this.editor.focused&&this.editor.focus();"fontName"==this.command&&-1!=D.indexOf(" ")&&(D="'"+D+"'");this.button._execCommand?this.button._execCommand(this.editor,this.command,D):this.editor.execCommand(this.command,
D)})))},updateState:function(){var m=this.editor,g=this.command;if(m&&m.isLoaded&&g.length&&this.button){var A=this.get("disabled");this.button.set("disabled",A);if(!A){try{var D=m.queryCommandValue(g)||""}catch(O){D=""}(A=a.isString(D)&&(D.match(/'([^']*)'/)||D.match(/"([^"]*)"/)))&&(D=A[1]);"fontSize"!==g||D||(D=3);if("formatBlock"===g)if(D&&"p"!=D)0>E.indexOf(this.button.values,D)&&(D="noFormat");else{D=null;if((g=F.getSelection(this.editor.window))&&0<g.rangeCount&&(g=g.getRangeAt(0)))var N=g.endContainer;
for(;N&&N!==m.editNode&&N!==m.document;){if((g=N.tagName?N.tagName.toLowerCase():"")&&-1<E.indexOf(this.button.values,g)){D=g;break}N=N.parentNode}D||(D="noFormat")}D!==this.button.get("value")&&this.button.set("value",D,!1)}}}});E.forEach(["fontName","fontSize","formatBlock"],function(m){B.registry[m]=function(g){return new I({command:m,plainText:g.plainText})}});I._FontDropDown=x;I._FontNameDropDown=d;I._FontSizeDropDown=l;I._FormatBlockDropDown=u;return I})},"dojox/editor/plugins/Preview":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/Button dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Preview".split(" "),
function(x,E,K,J){var w=x.declare("dojox.editor.plugins.Preview",J,{useDefaultCommand:!1,styles:"",stylesheets:null,iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=x.i18n.getLocalization("dojox.editor.plugins","Preview");this.button=new E.form.Button({label:this._nlsResources.preview,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Preview",tabIndex:"-1",onClick:x.hitch(this,"_preview")})},setEditor:function(a){this.editor=a;this._initButton()},
updateState:function(){this.button.set("disabled",this.get("disabled"))},_preview:function(){try{var a=this.editor.get("value"),b="\t\t\x3cmeta http-equiv\x3d'Content-Type' content\x3d'text/html; charset\x3dUTF-8'\x3e\n",c;if(this.stylesheets)for(c=0;c<this.stylesheets.length;c++)b+="\t\t\x3clink rel\x3d'stylesheet' type\x3d'text/css' href\x3d'"+this.stylesheets[c]+"'\x3e\n";this.styles&&(b+="\t\t\x3cstyle\x3e"+this.styles+"\x3c/style\x3e\n");a="\x3chtml\x3e\n\t\x3chead\x3e\n"+b+"\t\x3c/head\x3e\n\t\x3cbody\x3e\n"+
a+"\n\t\x3c/body\x3e\n\x3c/html\x3e";var f=window.open("javascript: ''",this._nlsResources.preview,"status\x3d1,menubar\x3d0,location\x3d0,toolbar\x3d0");f.document.open();f.document.write(a);f.document.close()}catch(k){console.warn(k)}}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(a){a.plugin||"preview"!==a.args.name.toLowerCase()||(a.plugin=new w({styles:"styles"in a.args?a.args.styles:"",stylesheets:"stylesheets"in a.args?a.args.stylesheets:null}))});return w})},"dijit/_editor/plugins/TextColor":function(){define("require dojo/colors dojo/_base/declare dojo/_base/lang ../_Plugin ../../form/DropDownButton".split(" "),
function(x,E,K,J,w,a){var b=K("dijit._editor.plugins.TextColor",w,{buttonClass:a,colorPicker:"dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command=this.name;this.inherited(arguments);var c=this;this.button.loadDropDown=function(f){function k(q){c.button.dropDown=new q({dir:c.editor.dir,ownerDocument:c.editor.ownerDocument,value:c.value,onChange:function(n){c.editor.execCommand(c.command,n)},onExecute:function(){c.editor.execCommand(c.command,this.get("value"))}});f()}"string"==
typeof c.colorPicker?x([c.colorPicker],k):k(c.colorPicker)}},updateState:function(){var c=this.editor,f=this.command;if(c&&c.isLoaded&&f.length){if(this.button){var k=this.get("disabled");this.button.set("disabled",k);if(k)return;try{var q=c.queryCommandValue(f)||""}catch(n){q=""}}""==q&&(q="#000000");"transparent"==q&&(q="#ffffff");"string"==typeof q?-1<q.indexOf("rgb")&&(q=E.fromRgb(q).toHex()):(q=((q&255)<<16|q&65280|(q&16711680)>>>16).toString(16),q="#000000".slice(0,7-q.length)+q);this.value=
q;(c=this.button.dropDown)&&c.get&&q!==c.get("value")&&c.set("value",q,!1)}}});w.registry.foreColor=function(c){return new b(c)};w.registry.hiliteColor=function(c){return new b(c)};return b})},"dojox/editor/plugins/ToolbarLineBreak":function(){define("dojo dijit dojox dijit/_Widget dijit/_TemplatedMixin dijit/_editor/_Plugin dojo/_base/declare".split(" "),function(x,E,K,J,w,a,b){var c=b("dojox.editor.plugins.ToolbarLineBreak",[J,w],{templateString:"\x3cspan class\x3d'dijit dijitReset'\x3e\x3cbr\x3e\x3c/span\x3e",
postCreate:function(){x.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(f){if(!f.plugin){var k=f.args.name.toLowerCase();if("||"===k||"toolbarlinebreak"===k)f.plugin=new a({button:new c,setEditor:function(q){this.editor=q}})}});return c})},"dojox/editor/plugins/FindReplace":function(){define("dojo dijit dojox dijit/_base/manager dijit/_base/popup dijit/_Widget dijit/_TemplatedMixin dijit/_KeyNavContainer dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/Toolbar dijit/form/CheckBox dijit/form/_TextBoxMixin dijit/form/TextBox dijit/_editor/_Plugin dijit/form/Button dijit/form/DropDownButton dijit/form/ToggleButton ./ToolbarLineBreak dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/FindReplace".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F){x.experimental("dojox.editor.plugins.FindReplace");var d=x.declare("dojox.editor.plugins._FindReplaceCloseBox",[a,b,f],{btnId:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'float: right' class\x3d'dijitInline' tabindex\x3d'-1'\x3e\x3cbutton class\x3d'dijit dijitReset dijitInline' id\x3d'${btnId}' dojoAttachPoint\x3d'button' dojoType\x3d'dijit.form.Button' tabindex\x3d'-1' iconClass\x3d'dijitEditorIconsFindReplaceClose' showLabel\x3d'false'\x3eX\x3c/button\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=E.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.btnId=this.id+"_close";this.inherited(arguments)},startup:function(){this.connect(this.button,"onClick","onClick")},onClick:function(){}}),l=x.declare("dojox.editor.plugins._FindReplaceTextBox",[a,b,f],{textId:"",label:"",toolTip:"",widget:null,widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceTextBox' title\x3d'${tooltip}' tabindex\x3d'-1'\x3e\x3clabel class\x3d'dijitLeft dijitInline' for\x3d'${textId}' tabindex\x3d'-1'\x3e${label}\x3c/label\x3e\x3cinput dojoType\x3d'dijit.form.TextBox' intermediateChanges\x3d'true' class\x3d'focusTextBox' tabIndex\x3d'0' id\x3d'${textId}' dojoAttachPoint\x3d'textBox, focusNode' value\x3d'' dojoAttachEvent\x3d'onKeyPress: _onKeyPress'/\x3e\x3c/span\x3e",
postMixInProperties:function(){this.id=E.getUniqueId(this.declaredClass.replace(/\./g,"_"));this.textId=this.id+"_text";this.inherited(arguments)},postCreate:function(){this.textBox.set("value","");this.disabled=this.textBox.get("disabled");this.connect(this.textBox,"onChange","onChange");x.attr(this.textBox.textbox,"formnovalidate","true")},_setValueAttr:function(g){this.value=g;this.textBox.set("value",g)},focus:function(){this.textBox.focus()},_setDisabledAttr:function(g){this.disabled=g;this.textBox.set("disabled",
g)},onChange:function(g){this.value=g},_onKeyPress:function(g){var A=0,D=0;!g.target||g.ctrlKey||g.altKey||g.shiftKey||(g.keyCode==x.keys.LEFT_ARROW?(A=g.target.selectionStart,D=g.target.selectionEnd,A<D&&(E.selectInputText(g.target,A,A),x.stopEvent(g))):g.keyCode==x.keys.RIGHT_ARROW&&(A=g.target.selectionStart,D=g.target.selectionEnd,A<D&&(E.selectInputText(g.target,D,D),x.stopEvent(g))))}}),u=x.declare("dojox.editor.plugins._FindReplaceCheckBox",[a,b,f],{checkId:"",label:"",tooltip:"",widget:null,
widgetsInTemplate:!0,templateString:"\x3cspan style\x3d'white-space: nowrap' tabindex\x3d'-1' class\x3d'dijit dijitReset dijitInline dijitEditorFindReplaceCheckBox' title\x3d'${tooltip}' \x3e\x3cinput dojoType\x3d'dijit.form.CheckBox' tabIndex\x3d'0' id\x3d'${checkId}' dojoAttachPoint\x3d'checkBox, focusNode' value\x3d''/\x3e\x3clabel tabindex\x3d'-1' class\x3d'dijitLeft dijitInline' for\x3d'${checkId}'\x3e${label}\x3c/label\x3e\x3c/span\x3e",postMixInProperties:function(){this.id=E.getUniqueId(this.declaredClass.replace(/\./g,
"_"));this.checkId=this.id+"_check";this.inherited(arguments)},postCreate:function(){this.checkBox.set("checked",!1);this.disabled=this.checkBox.get("disabled");this.checkBox.isFocusable=function(){return!1}},_setValueAttr:function(g){this.checkBox.set("value",g)},_getValueAttr:function(){return this.checkBox.get("value")},focus:function(){this.checkBox.focus()},_setDisabledAttr:function(g){this.disabled=g;this.checkBox.set("disabled",g)}}),I=x.declare("dojox.editor.plugins._FindReplaceToolbar",q,
{postCreate:function(){this.connectKeyNavHandlers([],[]);this.connect(this.containerNode,"onclick","_onToolbarEvent");this.connect(this.containerNode,"onkeydown","_onToolbarEvent");x.addClass(this.domNode,"dijitToolbar")},addChild:function(g,A){E._KeyNavContainer.superclass.addChild.apply(this,arguments)},_onToolbarEvent:function(g){g.stopPropagation()}}),m=x.declare("dojox.editor.plugins.FindReplace",[F],{buttonClass:E.form.ToggleButton,iconClassPrefix:"dijitEditorIconsFindReplace",editor:null,button:null,
_frToolbar:null,_closeBox:null,_findField:null,_replaceField:null,_findButton:null,_replaceButton:null,_replaceAllButton:null,_caseSensitive:null,_backwards:null,_promDialog:null,_promDialogTimeout:null,_strings:null,_bookmark:null,_initButton:function(){this._strings=x.i18n.getLocalization("dojox.editor.plugins","FindReplace");this.button=new E.form.ToggleButton({label:this._strings.findReplace,showLabel:!1,iconClass:this.iconClassPrefix+" dijitEditorIconFindString",tabIndex:"-1",onChange:x.hitch(this,
"_toggleFindReplace")});x.isOpera&&this.button.set("disabled",!0);this.connect(this.button,"set",x.hitch(this,function(g,A){"disabled"===g&&this._toggleFindReplace(!A&&this._displayed,!0,!0)}))},setEditor:function(g){this.editor=g;this._initButton()},toggle:function(){this.button.set("checked",!this.button.get("checked"))},_toggleFindReplace:function(g,A,D){var N=x.marginBox(this.editor.domNode);g&&!x.isOpera?(x.style(this._frToolbar.domNode,"display","block"),this._populateFindField(),A||(this._displayed=
!0)):(x.style(this._frToolbar.domNode,"display","none"),A||(this._displayed=!1),D||this.editor.focus());this.editor.resize({h:N.h})},_populateFindField:function(){var g=this.editor._sCall("getSelectedText",[null]);this._findField&&this._findField.textBox&&(g&&this._findField.textBox.set("value",g),this._findField.textBox.focus(),E.selectInputText(this._findField.textBox.focusNode))},setToolbar:function(g){this.inherited(arguments);if(!x.isOpera){var A=this._frToolbar=new I;x.style(A.domNode,"display",
"none");x.place(A.domNode,g.domNode,"after");A.startup();this._closeBox=new d;A.addChild(this._closeBox);this._findField=new l({label:this._strings.findLabel,tooltip:this._strings.findTooltip});A.addChild(this._findField);this._replaceField=new l({label:this._strings.replaceLabel,tooltip:this._strings.replaceTooltip});A.addChild(this._replaceField);A.addChild(new K.editor.plugins.ToolbarLineBreak);this._findButton=new E.form.Button({label:this._strings.findButton,showLabel:!0,iconClass:this.iconClassPrefix+
" dijitEditorIconFind"});this._findButton.titleNode.title=this._strings.findButtonTooltip;A.addChild(this._findButton);this._replaceButton=new E.form.Button({label:this._strings.replaceButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplace"});this._replaceButton.titleNode.title=this._strings.replaceButtonTooltip;A.addChild(this._replaceButton);this._replaceAllButton=new E.form.Button({label:this._strings.replaceAllButton,showLabel:!0,iconClass:this.iconClassPrefix+" dijitEditorIconReplaceAll"});
this._replaceAllButton.titleNode.title=this._strings.replaceAllButtonTooltip;A.addChild(this._replaceAllButton);this._caseSensitive=new u({label:this._strings.matchCase,tooltip:this._strings.matchCaseTooltip});A.addChild(this._caseSensitive);this._backwards=new u({label:this._strings.backwards,tooltip:this._strings.backwardsTooltip});A.addChild(this._backwards);this._findButton.set("disabled",!0);this._replaceButton.set("disabled",!0);this._replaceAllButton.set("disabled",!0);this.connect(this._findField,
"onChange","_checkButtons");this.connect(this._findField,"onKeyDown","_onFindKeyDown");this.connect(this._replaceField,"onKeyDown","_onReplaceKeyDown");this.connect(this._findButton,"onClick","_find");this.connect(this._replaceButton,"onClick","_replace");this.connect(this._replaceAllButton,"onClick","_replaceAll");this.connect(this._closeBox,"onClick","toggle");this._promDialog=new E.TooltipDialog;this._promDialog.startup();this._promDialog.set("content","")}},_checkButtons:function(){this._findField.get("value")?
(this._findButton.set("disabled",!1),this._replaceButton.set("disabled",!1),this._replaceAllButton.set("disabled",!1)):(this._findButton.set("disabled",!0),this._replaceButton.set("disabled",!0),this._replaceAllButton.set("disabled",!0))},_onFindKeyDown:function(g){g.keyCode==x.keys.ENTER&&(this._find(),x.stopEvent(g))},_onReplaceKeyDown:function(g){g.keyCode==x.keys.ENTER&&(this._replace()||this._replace(),x.stopEvent(g))},_find:function(g){var A=this._findField.get("value")||"";if(A){var D=this._caseSensitive.get("value"),
N=this._backwards.get("value");A=this._findText(A,D,N);!A&&g&&(this._promDialog.set("content",x.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextFind})),E.popup.open({popup:this._promDialog,around:this._findButton.domNode}),this._promDialogTimeout=setTimeout(x.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;E.popup.close(this._promDialog)}),3E3),setTimeout(x.hitch(this,function(){this.editor.focus()}),0));return A}return!1},_replace:function(g){var A=
!1,D=this.editor;D.focus();var N=this._findField.get("value")||"",O=this._replaceField.get("value")||"";if(N){var L=this._caseSensitive.get("value"),z=this._backwards.get("value"),C=D._sCall("getSelectedText",[null]);x.isMoz&&(N=x.trim(N),C=x.trim(C));N=this._filterRegexp(N,!L);C&&N.test(C)&&(D.execCommand("inserthtml",O),A=!0,z&&(this._findText(O,L,z),D._sCall("collapse",[!0])));!this._find(!1)&&g&&(this._promDialog.set("content",x.string.substitute(this._strings.eofDialogText,{0:this._strings.eofDialogTextReplace})),
E.popup.open({popup:this._promDialog,around:this._replaceButton.domNode}),this._promDialogTimeout=setTimeout(x.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;E.popup.close(this._promDialog)}),3E3),setTimeout(x.hitch(this,function(){this.editor.focus()}),0));return A}return null},_replaceAll:function(g){var A=0;this._backwards.get("value")?this.editor.placeCursorAtEnd():this.editor.placeCursorAtStart();this._replace(!1)&&A++;var D=x.hitch(this,function(){this._replace(!1)?
(A++,setTimeout(D,10)):g&&(this._promDialog.set("content",x.string.substitute(this._strings.replaceDialogText,{0:""+A})),E.popup.open({popup:this._promDialog,around:this._replaceAllButton.domNode}),this._promDialogTimeout=setTimeout(x.hitch(this,function(){clearTimeout(this._promDialogTimeout);this._promDialogTimeout=null;E.popup.close(this._promDialog)}),3E3),setTimeout(x.hitch(this,function(){this._findField.focus();this._findField.textBox.focusNode.select()}),0))});D()},_findText:function(g,A,
D){var N=this.editor,O=N.window,L=!1;if(g)if(O.find)L=O.find(g,A,D,!1,!1,!1,!1);else{var z=N.document;if(z.selection||O.getSelection)if(this.editor.focus(),N=z.body.createTextRange(),L=N.duplicate(),O.getSelection().getRangeAt(0),(z=z.selection?z.selection.createRange():null)?D?N.setEndPoint("EndToStart",z):N.setEndPoint("StartToEnd",z):this._bookmark&&(O=O.getSelection().toString(),N.moveToBookmark(this._bookmark),N.text!=O?(N=L.duplicate(),this._bookmark=null):(D?L.setEndPoint("EndToStart",N):L.setEndPoint("StartToEnd",
N),N=L.duplicate())),A=A?4:0,D&&(A|=1),L=N.findText(g,N.text.length,A))N.select(),this._bookmark=N.getBookmark()}return L},_filterRegexp:function(g,A){for(var D="",N=null,O=0;O<g.length;O++)switch(N=g.charAt(O),N){case "\\":D+=N;O++;D+=g.charAt(O);break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":D+="\\";default:D+=N}D="^"+D+"$";return A?new RegExp(D,"mi"):new RegExp(D,"m")},updateState:function(){this.button.set("disabled",this.get("disabled"))},
destroy:function(){this.inherited(arguments);this._promDialogTimeout&&(clearTimeout(this._promDialogTimeout),this._promDialogTimeout=null,E.popup.close(this._promDialog));this._frToolbar&&(this._frToolbar.destroyRecursive(),this._frToolbar=null);this._promDialog&&(this._promDialog.destroyRecursive(),this._promDialog=null)}});m._FindReplaceCloseBox=d;m._FindReplaceTextBox=l;m._FindReplaceCheckBox=u;m._FindReplaceToolbar=I;x.subscribe(E._scopeName+".Editor.getPlugin",null,function(g){g.plugin||"findreplace"!==
g.args.name.toLowerCase()||(g.plugin=new m({}))});return m})},"dojox/editor/plugins/PasteFromWord":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/RichText dijit/form/Button dijit/Dialog dojox/html/format dojo/_base/connect dojo/_base/declare dojo/i18n dojo/string dojo/i18n!dojox/editor/plugins/nls/PasteFromWord dojo/i18n!dijit/nls/common dojo/i18n!dijit/_editor/nls/commands".split(" "),function(x,E,K,J){var w=x.declare("dojox.editor.plugins.PasteFromWord",
J,{iconClassPrefix:"dijitAdditionalEditorIcon",width:"400px",height:"300px",_template:"\x3cdiv class\x3d'dijitPasteFromWordEmbeddedRTE'\x3e\x3cdiv style\x3d'width: ${width}; padding-top: 5px; padding-bottom: 5px;'\x3e${instructions}\x3c/div\x3e\x3cdiv id\x3d'${uId}_rte' style\x3d'width: ${width}; height: ${height}'\x3e\x3c/div\x3e\x3ctable style\x3d'width: ${width}' tabindex\x3d'-1'\x3e\x3ctbody\x3e\x3ctr\x3e\x3ctd align\x3d'center'\x3e\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_paste'\x3e${paste}\x3c/button\x3e\x26nbsp;\x3cbutton type\x3d'button' dojoType\x3d'dijit.form.Button' id\x3d'${uId}_cancel'\x3e${buttonCancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e",
_filters:[{regexp:/(<meta\s*[^>]*\s*>)|(<\s*link\s* href="file:[^>]*\s*>)|(<\/?\s*\w+:[^>]*\s*>)/gi,handler:""},{regexp:/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,handler:""},{regexp:/(class="Mso[^"]*")|(\x3c!--(.|\s){1,}?--\x3e)/gi,handler:""},{regexp:/(<p[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/p[^>]*>)|(<p[^>]*>\s*<font[^>]*>\s*(&nbsp;|\u00A0)*\s*<\/\s*font\s*>\s<\/p[^>]*>)/ig,handler:""},{regexp:/(style="[^"]*mso-[^;][^"]*")|(style="margin:\s*[^;"]*;")/gi,
handler:""},{regexp:/(<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>)|(<\s*script\b([^<>]|\s)*>?)|(<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>)/ig,handler:""},{regexp:/<(\/?)o:p[^>]*>/gi,handler:""}],_initButton:function(){this._filters=this._filters.slice(0);var a=x.i18n.getLocalization("dojox.editor.plugins","PasteFromWord");x.mixin(a,x.i18n.getLocalization("dijit","common"));x.mixin(a,x.i18n.getLocalization("dijit._editor","commands"));this.button=new E.form.Button({label:a.pasteFromWord,
showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"PasteFromWord",tabIndex:"-1",onClick:x.hitch(this,"_openDialog")});this._uId=E.getUniqueId(this.editor.id);a.uId=this._uId;a.width=this.width||"400px";a.height=this.height||"300px";this._dialog=(new E.Dialog({title:a.pasteFromWord})).placeAt(x.body());this._dialog.set("content",x.string.substitute(this._template,a));x.style(x.byId(this._uId+"_rte"),"opacity",.001);this.connect(E.byId(this._uId+"_paste"),"onClick","_paste");this.connect(E.byId(this._uId+
"_cancel"),"onClick","_cancel");this.connect(this._dialog,"onHide","_clearDialog")},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(a){this.editor=a;this._initButton()},_openDialog:function(){this._dialog.show();this._rte||setTimeout(x.hitch(this,function(){this._rte=new E._editor.RichText({height:this.height||"300px"},this._uId+"_rte");this._rte.startup();this._rte.onLoadDeferred.addCallback(x.hitch(this,function(){x.animateProperty({node:this._rte.domNode,
properties:{opacity:{start:.001,end:1}}}).play()}))}),100)},_paste:function(){var a=K.html.format.prettyPrint(this._rte.get("value"));this._dialog.hide();var b;for(b=0;b<this._filters.length;b++){var c=this._filters[b];a=a.replace(c.regexp,c.handler)}a=K.html.format.prettyPrint(a);this.editor.focus();this.editor.execCommand("inserthtml",a)},_cancel:function(){this._dialog.hide()},_clearDialog:function(){this._rte.set("value","")},destroy:function(){this._rte&&this._rte.destroy();this._dialog&&this._dialog.destroyRecursive();
delete this._dialog;delete this._rte;this.inherited(arguments)}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(a){a.plugin||"pastefromword"!==a.args.name.toLowerCase()||(a.plugin=new w({width:"width"in a.args?a.args.width:"400px",height:"height"in a.args?a.args.width:"300px"}))});return w})},"dojox/html/format":function(){define(["dojo/_base/kernel","./entities","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(x,E,K,J,w){var a=x.getObject("dojox.html.format",!0);a.prettyPrint=
function(b,c,f,k,q){var n=[],t=0,B=[],F="\t",d="",l=[],u,I=/[=]([^"']+?)(\s|>)/g,m=/style=("[^"]*"|'[^']*'|\S*)/gi,g=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(c&&0<c&&10>c)for(F="",u=0;u<c;u++)F+=" ";c=J.doc.createElement("div");c.innerHTML=b;var A=E.encode,D=E.decode,N=c.ownerDocument.createElement("div"),O=function(e){e=e.cloneNode(!1);N.appendChild(e);e=N.innerHTML;N.innerHTML="";return e},L=function(){var e;for(e=0;e<t;e++)n.push(F)},z=function(){n.push("\n")},C=function(e){var v;e=e.split("\n");for(v=
0;v<e.length;v++)e[v]=x.trim(e[v]);e=e.join(" ");e=x.trim(e);if(""!==e){var h=[];if(f&&0<f){var r="";for(v=0;v<t;v++)r+=F;v=r.length;r=f;for(f>v&&(r-=v);e;)if(e.length>f){for(v=r;0<v&&" "!==e.charAt(v);v--);if(!v)for(v=r;v<e.length&&" "!==e.charAt(v);v++);var H=e.substring(0,v);H=x.trim(H);e=x.trim(e.substring(v==e.length?e.length:v+1,e.length));if(H){var M="";for(v=0;v<t;v++)M+=F;H=M+H+"\n"}h.push(H)}else{M="";for(v=0;v<t;v++)M+=F;e=M+e+"\n";h.push(e);e=null}return h.join("")}M="";for(v=0;v<t;v++)M+=
F;return M+e+"\n"}return""},Q=function(e){if(e){var v=e;v&&(v=v.replace(/&quot;/gi,'"'),v=v.replace(/&gt;/gi,"\x3e"),v=v.replace(/&lt;/gi,"\x3c"),v=v.replace(/&amp;/gi,"\x26"));var h;e=0;var r=v.split("\n"),H=[];for(v=0;v<r.length;v++){var M=r[v],P=-1<M.indexOf("\n");if(M=x.trim(M)){P=e;for(h=0;h<M.length;h++){var y=M.charAt(h);"{"===y?e++:"}"===y&&(e--,P=e)}y="";for(h=0;h<t+P;h++)y+=F;H.push(y+M+"\n")}else P&&0===v&&H.push("\n")}e=H.join("")}return e},S=function(e){var v=e.nodeName.toLowerCase(),
h=x.trim(O(e));e=h.substring(0,h.indexOf("\x3e")+1);e=e.replace(I,'\x3d"$1"$2');e=e.replace(m,function(H){var M=H.substring(0,6);H=H.substring(6,H.length);var P=H.charAt(0);H=x.trim(H.substring(1,H.length-1));H=H.split(";");var y=[];K.forEach(H,function(R){if(R=x.trim(R))R=R.substring(0,R.indexOf(":")).toLowerCase()+R.substring(R.indexOf(":"),R.length),y.push(R)});y=y.sort();H=y.join("; ");var G=x.trim(H);return G&&";"!==G?M+P+(H+";")+P:""});var r=[];e=e.replace(g,function(H){r.push(x.trim(H));return""});
r=r.sort();e="\x3c"+v;r.length&&(e+=" "+r.join(" "));-1!=h.indexOf("\x3c/")?(B.push(v),e+="\x3e"):(e=q?e+" /\x3e":e+"\x3e",B.push(!1));a:switch(v){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "small":v=!0;break a;default:v=!1}l.push(v);d&&!v&&(n.push(C(d)),d="");v?d+=e:(L(),n.push(e),z(),t++)},p=function(e){var v=e.childNodes;if(v){var h;for(h=0;h<v.length;h++){var r=v[h];if(1===
r.nodeType){var H=x.trim(r.tagName.toLowerCase());w("ie")&&r.parentNode!=e||H&&"/"===H.charAt(0)||(S(r),"script"===H?n.push(Q(r.innerHTML)):"pre"===H?(r=r.innerHTML,w("mozilla")&&(r=r.replace("\x3cbr\x3e","\n"),r=r.replace("\x3cpre\x3e",""),r=r.replace("\x3c/pre\x3e","")),"\n"!==r.charAt(r.length-1)&&(r+="\n"),n.push(r)):p(r),r=l.pop(),d&&!r&&(n.push(C(d)),d=""),(H=B.pop())?(H="\x3c/"+H+"\x3e",r?d+=H:(t--,L(),n.push(H),z())):t--)}else 3===r.nodeType||4===r.nodeType?d+=A(r.nodeValue,k):8===r.nodeType&&
(r=D(r.nodeValue,k),L(),n.push("\x3c!--"),z(),t++,n.push(C(r)),t--,L(),n.push("--\x3e"),z())}}};p(c);d&&(n.push(C(d)),d="");return n.join("")};return a})},"dojox/editor/plugins/InsertAnchor":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/_base/manager dijit/_editor/range dijit/_Templated dijit/TooltipDialog dijit/form/ValidationTextBox dijit/form/Select dijit/form/Button dijit/form/DropDownButton dojo/_base/declare dojo/i18n dojo/string dojo/NodeList-dom dojox/editor/plugins/ToolbarLineBreak dojo/i18n!dojox/editor/plugins/nls/InsertAnchor dojo/i18n!dijit/nls/common".split(" "),
function(x,E,K,J){var w=x.declare("dojox.editor.plugins.InsertAnchor",J,{htmlTemplate:'\x3ca name\x3d"${anchorInput}" class\x3d"dijitEditorPluginInsertAnchorStyle"\x3e${textInput}\x3c/a\x3e',iconClassPrefix:"dijitAdditionalEditorIcon",_template:"\x3ctable role\x3d'presentation'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_anchorInput'\x3e${anchor}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_anchorInput' name\x3d'anchorInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel for\x3d'${id}_textInput'\x3e${text}\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cinput dojoType\x3d'dijit.form.ValidationTextBox' required\x3d'true' id\x3d'${id}_textInput' name\x3d'textInput' intermediateChanges\x3d'true'\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'submit' id\x3d'${id}_setButton'\x3e${set}\x3c/button\x3e\x3cbutton dojoType\x3d'dijit.form.Button' type\x3d'button' id\x3d'${id}_cancelButton'\x3e${cancel}\x3c/button\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e",
_initButton:function(){var a=this,b=x.i18n.getLocalization("dojox.editor.plugins","InsertAnchor",this.lang),c=this.dropDown=new E.TooltipDialog({title:b.title,execute:x.hitch(this,"setValue"),onOpen:function(){a._onOpenDialog();E.TooltipDialog.prototype.onOpen.apply(this,arguments)},onCancel:function(){setTimeout(x.hitch(a,"_onCloseDialog"),0)}});this.button=new E.form.DropDownButton({label:b.insertAnchor,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"InsertAnchor",tabIndex:"-1",
dropDown:this.dropDown});b.id=E.getUniqueId(this.editor.id);this._uniqueId=b.id;this.dropDown.set("content",c.title+"\x3cdiv style\x3d'border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'\x3e\x3c/div\x3e"+x.string.substitute(this._template,b));c.startup();this._anchorInput=E.byId(this._uniqueId+"_anchorInput");this._textInput=E.byId(this._uniqueId+"_textInput");this._setButton=E.byId(this._uniqueId+"_setButton");this.connect(E.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel()});
this._anchorInput&&this.connect(this._anchorInput,"onChange","_checkInput");this._textInput&&this.connect(this._anchorInput,"onChange","_checkInput");this.editor.contentDomPreFilters.push(x.hitch(this,this._preDomFilter));this.editor.contentDomPostFilters.push(x.hitch(this,this._postDomFilter));this._setup()},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(a){this.editor=a;this._initButton()},_checkInput:function(){var a=!0;this._anchorInput.isValid()&&
(a=!1);this._setButton.set("disabled",a)},_setup:function(){this.editor.onLoadDeferred.addCallback(x.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);setTimeout(x.hitch(this,function(){this._applyStyles()}),100)}))},getAnchorStyle:function(){var a=x.moduleUrl(K._scopeName,"editor/plugins/resources").toString();if(!a.match(/^https?:\/\//i)&&!a.match(/^file:\/\//i)){var b="/"===a.charAt(0)?x.doc.location.protocol+"//"+x.doc.location.host:this._calcBaseUrl(x.global.location.href);
"/"!==b[b.length-1]&&"/"!==a.charAt(0)&&(b+="/");a=b+a}return"@media screen {\n\t.dijitEditorPluginInsertAnchorStyle {\n\t\tbackground-image: url({MODURL}/images/anchor.gif);\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-position: top left;\n\t\tborder-width: 1px;\n\t\tborder-style: dashed;\n\t\tborder-color: #D0D0D0;\n\t\tpadding-left: 20px;\n\t}\n}\n".replace(/\{MODURL\}/gi,a)},_applyStyles:function(){if(!this._styled)try{this._styled=!0;var a=this.editor.document,b=this.getAnchorStyle();if(x.isIE)a.createStyleSheet("").cssText=
b;else{var c=a.createElement("style");c.appendChild(a.createTextNode(b));a.getElementsByTagName("head")[0].appendChild(c)}}catch(f){}},_calcBaseUrl:function(a){var b=null;null!==a&&(b=a.indexOf("?"),-1!=b&&(a=a.substring(0,b)),b=a.lastIndexOf("/"),b=0<b&&b<a.length?a.substring(0,b):a);return b},_checkValues:function(a){a&&(a.anchorInput&&(a.anchorInput=a.anchorInput.replace(/"/g,"\x26quot;")),a.textInput||(a.textInput="\x26nbsp;"));return a},setValue:function(a){this._onCloseDialog();if(!this.editor.window.getSelection){var b=
E.range.getSelection(this.editor.window).getRangeAt(0).endContainer;3===b.nodeType&&(b=b.parentNode);b&&b.nodeName&&"a"!==b.nodeName.toLowerCase()&&(b=this.editor._sCall("getSelectedElement",["a"]));b&&b.nodeName&&"a"===b.nodeName.toLowerCase()&&this.editor.queryCommandEnabled("unlink")&&(this.editor._sCall("selectElementChildren",[b]),this.editor.execCommand("unlink"))}a=this._checkValues(a);this.editor.execCommand("inserthtml",x.string.substitute(this.htmlTemplate,a))},_onCloseDialog:function(){this.editor.focus()},
_getCurrentValues:function(a){if(a&&"a"===a.tagName.toLowerCase()&&x.attr(a,"name")){var b=x.attr(a,"name");var c=a.textContent||a.innerText;this.editor._sCall("selectElement",[a,!0])}else c=this.editor._sCall("getSelectedText");return{anchorInput:b||"",textInput:c||""}},_onOpenDialog:function(){if(this.editor.window.getSelection)var a=this.editor._sCall("getAncestorElement",["a"]);else a=E.range.getSelection(this.editor.window).getRangeAt(0).endContainer,3===a.nodeType&&(a=a.parentNode),a&&a.nodeName&&
"a"!==a.nodeName.toLowerCase()&&(a=this.editor._sCall("getSelectedElement",["a"]));this.dropDown.reset();this._setButton.set("disabled",!0);this.dropDown.set("value",this._getCurrentValues(a))},_onDblClick:function(a){a&&a.target&&(a=a.target,"a"===(a.tagName?a.tagName.toLowerCase():"")&&x.attr(a,"name")&&(this.editor.onDisplayChanged(),this.editor._sCall("selectElement",[a]),setTimeout(x.hitch(this,function(){this.button.set("disabled",!1);this.button.openDropDown();this.button.dropDown.focus&&this.button.dropDown.focus()}),
10)))},_preDomFilter:function(a){x.query("a[name]:not([href])",this.editor.editNode).addClass("dijitEditorPluginInsertAnchorStyle")},_postDomFilter:function(a){a&&x.query("a[name]:not([href])",a).removeClass("dijitEditorPluginInsertAnchorStyle");return a}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin){var b=a.args.name;b&&(b=b.toLowerCase());"insertanchor"===b&&(a.plugin=new w)}});return w})},"dojox/editor/plugins/Blockquote":function(){define("dojo dijit dojox dijit/_editor/_Plugin dijit/form/ToggleButton dojo/_base/connect dojo/_base/declare dojo/i18n dojo/i18n!dojox/editor/plugins/nls/Blockquote".split(" "),
function(x,E,K,J){var w=x.declare("dojox.editor.plugins.Blockquote",J,{iconClassPrefix:"dijitAdditionalEditorIcon",_initButton:function(){this._nlsResources=x.i18n.getLocalization("dojox.editor.plugins","Blockquote");this.button=new E.form.ToggleButton({label:this._nlsResources.blockquote,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Blockquote",tabIndex:"-1",onClick:x.hitch(this,"_toggleQuote")})},setEditor:function(a){this.editor=a;this._initButton();this.connect(this.editor,
"onNormalizedDisplayChanged","updateState");a.customUndo=!0},_toggleQuote:function(a){try{var b=this.editor;b.focus();var c=this.button.get("checked"),f=E.range.getSelection(b.window),k,q,n,t;f&&0<f.rangeCount&&(k=f.getRangeAt(0));if(k){b.beginEditing();if(c)if(k.startContainer===k.endContainer){if(this._isRootInline(k.startContainer)){for(n=k.startContainer;n&&n.parentNode!==b.editNode;)n=n.parentNode;for(;n&&n.previousSibling&&(this._isTextElement(n)||1===n.nodeType&&this._isInlineFormat(this._getTagName(n)));)n=
n.previousSibling;n&&1===n.nodeType&&!this._isInlineFormat(this._getTagName(n))&&(n=n.nextSibling);if(n){var B=b.document.createElement("blockquote");x.place(B,n,"after");B.appendChild(n);for(t=B.nextSibling;t&&(this._isTextElement(t)||1===t.nodeType&&this._isInlineFormat(this._getTagName(t)));)B.appendChild(t),t=B.nextSibling}}else{for(var F=k.startContainer;(this._isTextElement(F)||this._isInlineFormat(this._getTagName(F))||"li"===this._getTagName(F))&&F!==b.editNode&&F!==b.document.body;)F=F.parentNode;
F!==b.editNode&&F!==F.ownerDocument.documentElement&&(B=b.document.createElement("blockquote"),x.place(B,F,"after"),B.appendChild(F))}B&&(b._sCall("selectElementChildren",[B]),b._sCall("collapse",[!0]))}else{var d;n=k.startContainer;for(t=k.endContainer;n&&this._isTextElement(n)&&n.parentNode!==b.editNode;)n=n.parentNode;for(d=n;d.nextSibling&&b._sCall("inSelection",[d]);)d=d.nextSibling;t=d;if(t===b.editNode||t===b.document.body){B=b.document.createElement("blockquote");x.place(B,n,"after");var l=
this._getTagName(n);if(this._isTextElement(n)||this._isInlineFormat(l))for(b=n;b&&(this._isTextElement(b)||1===b.nodeType&&this._isInlineFormat(this._getTagName(b)));)B.appendChild(b),b=B.nextSibling;else B.appendChild(n);return}t=t.nextSibling;for(d=n;d&&d!==t;){if(1===d.nodeType){if(l=this._getTagName(d),"br"!==l){if(!window.getSelection&&"p"===l&&this._isEmpty(d)){d=d.nextSibling;continue}this._isInlineFormat(l)?B||(B=b.document.createElement("blockquote"),x.place(B,d,"after")):(B&&this._isEmpty(B)&&
B.parentNode.removeChild(B),B=b.document.createElement("blockquote"),x.place(B,d,"after"));B.appendChild(d);d=B}}else this._isTextElement(d)&&(B||(B=b.document.createElement("blockquote"),x.place(B,d,"after")),B.appendChild(d),d=B);d=d.nextSibling}B&&(this._isEmpty(B)?B.parentNode.removeChild(B):(b._sCall("selectElementChildren",[B]),b._sCall("collapse",[!0])),B=null)}else if(B=!1,k.startContainer===k.endContainer){for(q=k.endContainer;q&&q!==b.editNode&&q!==b.document.body;){if("blockquote"===(q.tagName?
q.tagName.toLowerCase():"")){B=!0;break}q=q.parentNode}if(B){for(var u;q.firstChild;)u=q.firstChild,x.place(u,q,"before");q.parentNode.removeChild(q);u&&(b._sCall("selectElementChildren",[u]),b._sCall("collapse",[!0]))}}else{n=k.startContainer;for(t=k.endContainer;n&&this._isTextElement(n)&&n.parentNode!==b.editNode;)n=n.parentNode;for(k=[];n&&n.nextSibling&&b._sCall("inSelection",[n]);)n.parentNode&&"blockquote"===this._getTagName(n.parentNode)&&(n=n.parentNode),k.push(n),n=n.nextSibling;for(var I=
this._findBlockQuotes(k);I.length;){var m=I.pop();if(m.parentNode){for(;m.firstChild;)x.place(m.firstChild,m,"before");m.parentNode.removeChild(m)}}}b.endEditing()}b.onNormalizedDisplayChanged()}catch(g){}},updateState:function(){var a=this.editor,b=this.get("disabled");if(a&&a.isLoaded&&this.button&&(this.button.set("disabled",b),!b)){b=!1;var c=E.range.getSelection(a.window);if(c&&0<c.rangeCount&&(c=c.getRangeAt(0)))var f=c.endContainer;for(;f&&f!==a.editNode&&f!==a.document;){if("blockquote"===
(f.tagName?f.tagName.toLowerCase():"")){b=!0;break}f=f.parentNode}this.button.set("checked",b)}},_findBlockQuotes:function(a){var b=[];if(a){var c;for(c=0;c<a.length;c++){var f=a[c];1===f.nodeType&&("blockquote"===this._getTagName(f)&&b.push(f),f.childNodes&&0<f.childNodes.length&&(b=b.concat(this._findBlockQuotes(f.childNodes))))}}return b},_getTagName:function(a){var b="";a&&1===a.nodeType&&(b=a.tagName?a.tagName.toLowerCase():"");return b},_isRootInline:function(a){var b=this.editor;if(this._isTextElement(a)&&
a.parentNode===b.editNode||1===a.nodeType&&this._isInlineFormat(a)&&a.parentNode===b.editNode)return!0;if(this._isTextElement(a)&&this._isInlineFormat(this._getTagName(a.parentNode))){for(a=a.parentNode;a&&a!==b.editNode&&this._isInlineFormat(this._getTagName(a));)a=a.parentNode;if(a===b.editNode)return!0}return!1},_isTextElement:function(a){return a&&3===a.nodeType||4===a.nodeType?!0:!1},_isEmpty:function(a){if(a.childNodes){var b=!0,c;for(c=0;c<a.childNodes.length;c++){var f=a.childNodes[c];if(1===
f.nodeType){if("p"!==this._getTagName(f)||x.trim(f.innerHTML)){b=!1;break}}else if(this._isTextElement(f)){if((f=x.trim(f.nodeValue))&&"\x26nbsp;"!==f&&"\u00a0"!==f){b=!1;break}}else{b=!1;break}}return b}return!0},_isInlineFormat:function(a){switch(a){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "img":case "small":return!0;default:return!1}}});x.subscribe(E._scopeName+".Editor.getPlugin",
null,function(a){a.plugin||"blockquote"!==a.args.name.toLowerCase()||(a.plugin=new w({}))});return w})},"dojox/editor/plugins/UploadImage":function(){define("dojo dijit dojox dijit/_editor/_Plugin dojo/_base/connect dojo/_base/declare dojox/form/FileUploader dijit/_editor/_Plugin".split(" "),function(x,E,K,J){x.experimental("dojox.editor.plugins.UploadImage");var w=x.declare("dojox.editor.plugins.UploadImage",J,{tempImageUrl:"",iconClassPrefix:"editorIcon",useDefaultCommand:!1,uploadUrl:"",button:null,
label:"Upload",setToolbar:function(a){this.button.destroy();this.createFileInput();a.addChild(this.button)},_initButton:function(){this.command="uploadImage";this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",arguments);delete this.command},updateState:function(){this.button.set("disabled",this.get("disabled"))},createFileInput:function(){var a=x.create("span",{innerHTML:"."},document.body);x.style(a,{width:"40px",height:"20px",paddingLeft:"8px",paddingRight:"8px"});this.button=
new K.form.FileUploader({isDebug:!0,uploadUrl:this.uploadUrl,uploadOnChange:!0,selectMultipleFiles:!1,baseClass:"dojoxEditorUploadNorm",hoverClass:"dojoxEditorUploadHover",activeClass:"dojoxEditorUploadActive",disabledClass:"dojoxEditorUploadDisabled"},a);this.connect(this.button,"onChange","insertTempImage");this.connect(this.button,"onComplete","onComplete")},onComplete:function(a,b,c){a=a[0];b=x.byId(this.currentImageId,this.editor.document);c=this.downloadPath?this.downloadPath+a.name:a.file;
b.src=c;x.attr(b,"_djrealurl",c);a.width&&(b.width=a.width,b.height=a.height)},insertTempImage:function(){this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+this.tempImageUrl+'" width\x3d"32" height\x3d"32"/\x3e')}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(a){if(!a.plugin)switch(a.args.name){case "uploadImage":a.plugin=new w({url:a.args.url})}});return w})},"dojox/form/FileUploader":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/window dojo/_base/sniff dojo/query dojo/dom dojo/dom-style dojo/dom-geometry dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-form dojo/_base/config dijit/_base/manager dojo/io/iframe dojo/_base/Color dojo/_base/unload dijit/_Widget dijit/_TemplatedMixin dijit/_Contained dojox/embed/Flash dojox/embed/flashVars dojox/html/styles".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F,d,l,u,I,m,g,A,D,N,O,L){x.deprecated("dojox.form.FileUploader","Use dojox.form.Uploader","2.0");return E("dojox.form.FileUploader",[g,A,D],{swfPath:d.uploaderPath||require.toUrl("dojox/form/resources/fileuploader.swf"),templateString:'\x3cdiv\x3e\x3cdiv dojoAttachPoint\x3d"progNode"\x3e\x3cdiv dojoAttachPoint\x3d"progTextNode"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv dojoAttachPoint\x3d"insideNode" class\x3d"uploaderInsideNode"\x3e\x3c/div\x3e\x3c/div\x3e',uploadUrl:"",
isDebug:!1,devMode:!1,baseClass:"dojoxUploaderNorm",hoverClass:"dojoxUploaderHover",activeClass:"dojoxUploaderActive",disabledClass:"dojoxUploaderDisabled",force:"",uploaderType:"",flashObject:null,flashMovie:null,insideNode:null,deferredUploading:1,fileListId:"",uploadOnChange:!1,selectMultipleFiles:!0,htmlFieldName:"uploadedfile",flashFieldName:"flashUploadFiles",fileMask:null,minFlashVersion:9,tabIndex:-1,showProgress:!1,progressMessage:"Loading",progressBackgroundUrl:require.toUrl("dijit/themes/tundra/images/buttonActive.png"),
progressBackgroundColor:"#ededed",progressWidgetId:"",skipServerCheck:!1,serverTimeout:5E3,log:function(){this.isDebug&&console.log(Array.prototype.slice.call(arguments).join(" "))},constructor:function(){this._subs=[]},postMixInProperties:function(){this.fileList=[];this._cons=[];this.fileMask=this.fileMask||[];this.fileInputs=[];this.fileCount=0;this._disabled=this.flashReady=!1;this.force=this.force.toLowerCase();this.uploaderType=(N.available>=this.minFlashVersion||"flash"==this.force)&&"html"!=
this.force?"flash":"html";this.deferredUploading=!0===this.deferredUploading?1:this.deferredUploading;this._refNode=this.srcNodeRef;this.getButtonStyle()},startup:function(){},postCreate:function(){this.inherited(arguments);this.setButtonStyle();if("flash"==this.uploaderType)var z="createFlashUploader";else this.uploaderType="html",z="createHtmlUploader";this[z]();this.fileListId&&this.connect(f.byId(this.fileListId),"click",function(C){C=C.target.parentNode.parentNode.parentNode;C.id&&-1<C.id.indexOf("file_")&&
this.removeFile(C.id.split("file_")[1])});m.addOnUnload(this,this.destroy)},getHiddenNode:function(z){if(!z)return null;var C=null;for(z=z.parentNode;z&&"body"!=z.tagName.toLowerCase();){if("none"==k.get(z,"display")){C=z;break}z=z.parentNode}return C},getButtonStyle:function(){var z=this.srcNodeRef;(this._hiddenNode=this.getHiddenNode(z))&&k.set(this._hiddenNode,"display","block");if(!z&&this.button&&this.button.domNode){var C=!0;z=this.button.domNode.className+" dijitButtonNode";var Q=this.getText(c(".dijitButtonText",
this.button.domNode)[0]);this.srcNodeRef=z=B.place('\x3cbutton id\x3d"'+this.button.id+'" class\x3d"'+z+'"\x3e'+Q+"\x3c/button\x3e",this.button.domNode,"after");this.button.destroy();this.baseClass="dijitButton";this.hoverClass="dijitButtonHover";this.pressClass="dijitButtonActive";this.disabledClass="dijitButtonDisabled"}else!this.srcNodeRef&&this.button&&(z=this.button);n.get(z,"class")&&(this.baseClass+=" "+n.get(z,"class"));n.set(z,"class",this.baseClass);this.norm=this.getStyle(z);this.width=
this.norm.w;this.height=this.norm.h;"flash"==this.uploaderType?(this.over=this.getTempNodeStyle(z,this.baseClass+" "+this.hoverClass,C),this.down=this.getTempNodeStyle(z,this.baseClass+" "+this.activeClass,C),this.dsbl=this.getTempNodeStyle(z,this.baseClass+" "+this.disabledClass,C),this.fhtml={cn:this.getText(z),nr:this.norm,ov:this.over,dn:this.down,ds:this.dsbl}):(this.fhtml={cn:this.getText(z),nr:this.norm},"middle"==this.norm.va&&(this.norm.lh=this.norm.h));this.devMode&&(this.log("classes - base:",
this.baseClass," hover:",this.hoverClass,"active:",this.activeClass),this.log("fhtml:",this.fhtml),this.log("norm:",this.norm),this.log("over:",this.over),this.log("down:",this.down))},setButtonStyle:function(){k.set(this.domNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+"px",padding:"0px",lineHeight:"normal",position:"relative"});"html"==this.uploaderType&&"middle"==this.norm.va&&k.set(this.domNode,"lineHeight",this.norm.lh+"px");this.showProgress?(this.progTextNode.innerHTML=this.progressMessage,
k.set(this.progTextNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",lineHeight:this.fhtml.nr.h+0+"px",position:"absolute"}),k.set(this.progNode,{width:this.fhtml.nr.w+"px",height:this.fhtml.nr.h+0+"px",padding:"0px",margin:"0px",left:"0px",position:"absolute",display:"none",backgroundImage:"url("+this.progressBackgroundUrl+")",backgroundPosition:"bottom",backgroundRepeat:"repeat-x",backgroundColor:this.progressBackgroundColor})):B.destroy(this.progNode);
k.set(this.insideNode,{position:"absolute",top:"0px",left:"0px",display:""});t.add(this.domNode,this.srcNodeRef.className);-1<this.fhtml.nr.d.indexOf("inline")&&t.add(this.domNode,"dijitInline");try{this.insideNode.innerHTML=this.fhtml.cn}catch(C){if("flash"==this.uploaderType){this.insideNode=this.insideNode.parentNode.removeChild(this.insideNode);a.body().appendChild(this.insideNode);this.insideNode.innerHTML=this.fhtml.cn;var z=w.connect(this,"onReady",this,function(){w.disconnect(z);this.insideNode=
this.insideNode.parentNode.removeChild(this.insideNode);this.domNode.appendChild(this.insideNode)})}else this.insideNode.appendChild(document.createTextNode(this.fhtml.cn))}this._hiddenNode&&k.set(this._hiddenNode,"display","none")},onChange:function(z){},onProgress:function(z){},onComplete:function(z){},onCancel:function(){},onError:function(z){},onReady:function(z){},onLoad:function(z){},submit:function(z){z=z?F.toObject(z):null;this.upload(z);return!1},upload:function(z){if(!this.fileList.length)return!1;
if(!this.uploadUrl)return console.warn("uploadUrl not provided. Aborting."),!1;this.showProgress||this.set("disabled",!0);if(this.progressWidgetId){var C=l.byId(this.progressWidgetId).domNode;"none"==k.get(C,"display")&&(this.restoreProgDisplay="none",k.set(C,"display","block"));"hidden"==k.get(C,"visibility")&&(this.restoreProgDisplay="hidden",k.set(C,"visibility","visible"))}z&&!z.target&&(this.postData=z);this.log("upload type:",this.uploaderType," - postData:",this.postData);for(z=0;z<this.fileList.length;z++)C=
this.fileList[z],C.bytesLoaded=0,C.bytesTotal=C.size||1E5,C.percent=0;"flash"==this.uploaderType?this.uploadFlash():this.uploadHTML();return!1},removeFile:function(z,C){var Q;for(Q=0;Q<this.fileList.length;Q++)if(this.fileList[Q].name==z){C||this.fileList.splice(Q,1);break}"flash"==this.uploaderType?this.flashMovie.removeFile(z):C||(B.destroy(this.fileInputs[Q]),this.fileInputs.splice(Q,1),this._renumberInputs());this.fileListId&&B.destroy("file_"+z)},destroy:function(){"flash"!=this.uploaderType||
this.flashMovie?(J.forEach(this._subs,w.unsubscribe,dojo),J.forEach(this._cons,w.disconnect,dojo),this.scrollConnect&&w.disconnect(this.scrollConnect),"flash"==this.uploaderType?(this.flashObject.destroy(),delete this.flashObject):(B.destroy(this._fileInput),B.destroy(this._formNode)),this.inherited(arguments)):this._cons.push(w.connect(this,"onLoad",this,"destroy"))},_displayProgress:function(z){!0===z?("flash"==this.uploaderType?k.set(this.insideNode,"top","-2500px"):k.set(this.insideNode,"display",
"none"),k.set(this.progNode,"display","")):!1===z?(k.set(this.insideNode,{display:"",top:"0"}),k.set(this.progNode,"display","none")):k.set(this.progNode,"width",z*this.fhtml.nr.w+"px")},_animateProgress:function(){this._displayProgress(!0);var z=!1,C=w.connect(this,"_complete",function(){w.disconnect(C);z=!0}),Q=0,S=setInterval(K.hitch(this,function(){Q+=5;Q>this.fhtml.nr.w&&(Q=0,z=!0);this._displayProgress(Q/this.fhtml.nr.w);z&&(clearInterval(S),setTimeout(K.hitch(this,function(){this._displayProgress(!1)}),
500))}),50)},_error:function(z){"string"==typeof z&&(z=Error(z));this.onError(z)},_addToFileList:function(){if(this.fileListId){var z="";J.forEach(this.fileList,function(C){z+='\x3ctable id\x3d"file_'+C.name+'" class\x3d"fileToUpload"\x3e\x3ctr\x3e\x3ctd class\x3d"fileToUploadClose"\x3e\x3c/td\x3e\x3ctd class\x3d"fileToUploadName"\x3e'+C.name+'\x3c/td\x3e\x3ctd class\x3d"fileToUploadSize"\x3e'+(C.size?Math.ceil(.001*C.size)+"kb":"")+"\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e"},this);f.byId(this.fileListId).innerHTML=
z}},_change:function(z){b("ie")&&J.forEach(z,function(C){C.name=C.name.split("\\")[C.name.split("\\").length-1]});this.selectMultipleFiles?this.fileList=this.fileList.concat(z):(this.fileList[0]&&this.removeFile(this.fileList[0].name,!0),this.fileList=z);this._addToFileList();this.onChange(z);this.uploadOnChange?("html"==this.uploaderType&&this._buildFileInput(),this.upload()):"html"==this.uploaderType&&this.selectMultipleFiles&&(this._buildFileInput(),this._connectInput())},_complete:function(z){z=
K.isArray(z)?z:[z];J.forEach(z,function(C){C.ERROR&&this._error(C.ERROR)},this);J.forEach(this.fileList,function(C){C.bytesLoaded=1;C.bytesTotal=1;C.percent=100;this._progress(C)},this);J.forEach(this.fileList,function(C){this.removeFile(C.name,!0)},this);this.onComplete(z);this.fileList=[];this._resetHTML();this.set("disabled",!1);this.restoreProgDisplay&&setTimeout(K.hitch(this,function(){k.set(l.byId(this.progressWidgetId).domNode,"none"==this.restoreProgDisplay?"display":"visibility",this.restoreProgDisplay)}),
500)},_progress:function(z){for(var C=0,Q=0,S=0;S<this.fileList.length;S++){var p=this.fileList[S];p.name==z.name&&(p.bytesLoaded=z.bytesLoaded,p.bytesTotal=z.bytesTotal,p.percent=Math.ceil(p.bytesLoaded/p.bytesTotal*100),this.log(p.name,"percent:",p.percent));Q+=Math.ceil(.001*p.bytesLoaded);C+=Math.ceil(.001*p.bytesTotal)}z=Math.ceil(Q/C*100);this.progressWidgetId&&l.byId(this.progressWidgetId).update({progress:z+"%"});this.showProgress&&this._displayProgress(.01*z);this.onProgress(this.fileList)},
_getDisabledAttr:function(){return this._disabled},_setDisabledAttr:function(z){if(this._disabled!=z){if("flash"==this.uploaderType){if(!this.flashReady){var C=w.connect(this,"onLoad",this,function(){w.disconnect(C);this._setDisabledAttr(z)});return}this._disabled=z;this.flashMovie.doDisable(z)}else this._disabled=z,k.set(this._fileInput,"display",this._disabled?"none":"");t.toggle(this.domNode,this.disabledClass,z)}},_onFlashBlur:function(){this.flashMovie.blur();if(!this.nextFocusObject&&this.tabIndex)for(var z=
c("[tabIndex]"),C=0;C<z.length;C++)if(z[C].tabIndex>=Number(this.tabIndex)+1){this.nextFocusObject=z[C];break}this.nextFocusObject.focus()},_disconnect:function(){J.forEach(this._cons,w.disconnect,dojo)},uploadHTML:function(){this.selectMultipleFiles&&B.destroy(this._fileInput);this._setHtmlPostData();this.showProgress&&this._animateProgress();u.send({url:this.uploadUrl.toString(),form:this._formNode,handleAs:"json",error:K.hitch(this,function(z){this._error("HTML Upload Error:"+z.message)}),load:K.hitch(this,
function(z,C,Q){this._complete(z)})})},createHtmlUploader:function(){this._buildForm();this._setFormStyle();this._buildFileInput();this._connectInput();this._styleContent();k.set(this.insideNode,"visibility","visible");this.onReady()},_connectInput:function(){this._disconnect();this._cons.push(w.connect(this._fileInput,"mouseover",this,function(z){t.add(this.domNode,this.hoverClass);this.onMouseOver(z)}));this._cons.push(w.connect(this._fileInput,"mouseout",this,function(z){setTimeout(K.hitch(this,
function(){t.remove(this.domNode,this.activeClass);t.remove(this.domNode,this.hoverClass);this.onMouseOut(z);this._checkHtmlCancel("off")}),0)}));this._cons.push(w.connect(this._fileInput,"mousedown",this,function(z){t.add(this.domNode,this.activeClass);t.remove(this.domNode,this.hoverClass);this.onMouseDown(z)}));this._cons.push(w.connect(this._fileInput,"mouseup",this,function(z){t.remove(this.domNode,this.activeClass);this.onMouseUp(z);this.onClick(z);this._checkHtmlCancel("up")}));this._cons.push(w.connect(this._fileInput,
"change",this,function(){this._checkHtmlCancel("change");var z=this._fileInput.value;z?this._change([{name:z,type:"",size:0}]):this._change([])}));0<=this.tabIndex&&n.set(this.domNode,"tabIndex",this.tabIndex)},_checkHtmlCancel:function(z){"change"==z&&(this.dialogIsOpen=!1);"up"==z&&(this.dialogIsOpen=!0);if("off"==z){if(this.dialogIsOpen)this.onCancel();this.dialogIsOpen=!1}},_styleContent:function(){var z=this.fhtml.nr;k.set(this.insideNode,{width:z.w+"px",height:"middle"==z.va?z.h+"px":"auto",
textAlign:z.ta,paddingTop:z.p[0]+"px",paddingRight:z.p[1]+"px",paddingBottom:z.p[2]+"px",paddingLeft:z.p[3]+"px"});try{k.set(this.insideNode,"lineHeight","inherit")}catch(C){}},_resetHTML:function(){"html"==this.uploaderType&&this._formNode&&(this.fileInputs=[],c("*",this._formNode).forEach(function(z){B.destroy(z)}),this.fileCount=0,this._buildFileInput(),this._connectInput())},_buildForm:function(){this._formNode||(9>b("ie")||b("ie")&&b("quirks")?(this._formNode=document.createElement('\x3cform enctype\x3d"multipart/form-data" method\x3d"post"\x3e'),
this._formNode.encoding="multipart/form-data",this._formNode.id=l.getUniqueId("FileUploaderForm"),this.domNode.appendChild(this._formNode)):this._formNode=B.create("form",{enctype:"multipart/form-data",method:"post",id:l.getUniqueId("FileUploaderForm")},this.domNode))},_buildFileInput:function(){this._fileInput&&(this._disconnect(),this._fileInput.id+=this.fileCount,k.set(this._fileInput,"display","none"));this._fileInput=document.createElement("input");this.fileInputs.push(this._fileInput);var z=
this.htmlFieldName;this.selectMultipleFiles&&(z+=this.fileCount,this.fileCount++);n.set(this._fileInput,{id:this.id,name:z,type:"file"});t.add(this._fileInput,"dijitFileInputReal");this._formNode.appendChild(this._fileInput);z=q.getMarginBox(this._fileInput);k.set(this._fileInput,{position:"relative",left:this.fhtml.nr.w-z.w+"px",opacity:0})},_renumberInputs:function(){if(this.selectMultipleFiles){var z;this.fileCount=0;J.forEach(this.fileInputs,function(C){z=this.htmlFieldName+this.fileCount;this.fileCount++;
n.set(C,"name",z)},this)}},_setFormStyle:function(){L.insertCssRule("#"+this._formNode.id+" input","font-size:"+Math.max(2,Math.max(Math.ceil(this.fhtml.nr.w/60),Math.ceil(this.fhtml.nr.h/15)))+"em");k.set(this.domNode,{overflow:"hidden",position:"relative"});k.set(this.insideNode,"position","absolute")},_setHtmlPostData:function(){if(this.postData)for(var z in this.postData)B.create("input",{type:"hidden",name:z,value:this.postData[z]},this._formNode)},uploadFlash:function(){try{if(this.showProgress){this._displayProgress(!0);
var z=w.connect(this,"_complete",this,function(){w.disconnect(z);this._displayProgress(!1)})}var C={},Q;for(Q in this.postData)C[Q]=this.postData[Q];this.flashMovie.doUpload(C)}catch(S){this._error("FileUploader - Sorry, the SWF failed to initialize."+S)}},createFlashUploader:function(){if(this.uploadUrl=this.uploadUrl.toString())if(0>this.uploadUrl.toLowerCase().indexOf("http")&&0!=this.uploadUrl.indexOf("/")){var z=window.location.href.split("/");z.pop();z=z.join("/")+"/";this.uploadUrl=z+this.uploadUrl;
this.log("SWF Fixed - Relative loc:",z," abs loc:",this.uploadUrl)}else this.log("SWF URL unmodified:",this.uploadUrl);else console.warn("Warning: no uploadUrl provided.");z={expressInstall:!0,path:this.swfPath.uri||this.swfPath,width:this.fhtml.nr.w,height:this.fhtml.nr.h,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName,uploadUrl:this.uploadUrl,uploadOnSelect:this.uploadOnChange,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.selectMultipleFiles,
id:this.id,isDebug:this.isDebug,devMode:this.devMode,flashButton:O.serialize("fh",this.fhtml),fileMask:O.serialize("fm",this.fileMask),noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new N(z,this.insideNode);this.flashObject.onError=K.hitch(function(C){this._error("Flash Error: "+C)});this.flashObject.onReady=K.hitch(this,function(){k.set(this.insideNode,"visibility","visible");
this.log("FileUploader flash object ready");this.onReady(this)});this.flashObject.onLoad=K.hitch(this,function(C){this.flashMovie=C;this.flashReady=!0;this.onLoad(this)});this._connectFlash()},_connectFlash:function(){this._doSub("/filesSelected","_change");this._doSub("/filesUploaded","_complete");this._doSub("/filesProgress","_progress");this._doSub("/filesError","_error");this._doSub("/filesCanceled","onCancel");this._doSub("/stageBlur","_onFlashBlur");this._doSub("/up","onMouseUp");this._doSub("/down",
"onMouseDown");this._doSub("/over","onMouseOver");this._doSub("/out","onMouseOut");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus()});0<=this.tabIndex&&n.set(this.domNode,"tabIndex",this.tabIndex)},_doSub:function(z,C){this._subs.push(w.subscribe(this.id+z,this,C))},urlencode:function(z){return z&&"none"!=z?z.replace(/:/g,"||").replace(/\./g,"^^").replace("url(","").replace(")","").replace(/'/g,"").replace(/"/g,""):!1},isButton:function(z){z=z.tagName.toLowerCase();
return"button"==z||"input"==z},getTextStyle:function(z){var C={};C.ff=k.get(z,"fontFamily");if(C.ff){C.ff=C.ff.replace(", ",",");C.ff=C.ff.replace(/"|'/g,"");C.ff="sans-serif"==C.ff?"Arial":C.ff;C.fw=k.get(z,"fontWeight");C.fi=k.get(z,"fontStyle");C.fs=parseInt(k.get(z,"fontSize"),10);if(-1<k.get(z,"fontSize").indexOf("%"))for(var Q=z;Q.tagName;){if(-1==k.get(Q,"fontSize").indexOf("%")){C.fs=parseInt(k.get(Q,"fontSize"),10);break}"body"==Q.tagName.toLowerCase()&&(C.fs=.16*parseInt(k.get(Q,"fontSize"),
10));Q=Q.parentNode}C.fc=(new I(k.get(z,"color"))).toHex();C.fc=parseInt(C.fc.substring(1,Infinity),16)}C.lh=k.get(z,"lineHeight");C.ta=k.get(z,"textAlign");C.ta="start"!=C.ta&&C.ta?C.ta:"left";C.va=this.isButton(z)?"middle":C.lh==C.h?"middle":k.get(z,"verticalAlign");return C},getText:function(z){z=K.trim(z.innerHTML);-1<z.indexOf("\x3c")&&(z=escape(z));return z},getStyle:function(z){var C={},Q=q.getContentBox(z),S=q.getPadExtents(z);C.p=[S.t,S.w-S.l,S.h-S.t,S.l];C.w=Q.w+S.w;C.h=Q.h+S.h;C.d=k.get(z,
"display");Q=new I(k.get(z,"backgroundColor"));C.bc=0==Q.a?"#ffffff":Q.toHex();C.bc=parseInt(C.bc.substring(1,Infinity),16);if(Q=this.urlencode(k.get(z,"backgroundImage")))C.bi={url:Q,rp:k.get(z,"backgroundRepeat"),pos:escape(k.get(z,"backgroundPosition"))},C.bi.pos||(Q=k.get(z,"backgroundPositionX"),S=k.get(z,"backgroundPositionY"),C.bi.pos=escape(("left"==Q?"0%":"right"==Q?"100%":Q)+" "+("top"==S?"0%":"bottom"==S?"100%":S)));return K.mixin(C,this.getTextStyle(z))},getTempNodeStyle:function(z,C,
Q){if(Q){Q=B.place("\x3c"+z.tagName+"\x3e\x3cspan\x3e"+z.innerHTML+"\x3c/span\x3e\x3c/"+z.tagName+"\x3e",z.parentNode);var S=Q.firstChild;t.add(S,z.className);t.add(Q,C);z=this.getStyle(S)}else Q=B.place("\x3c"+z.tagName+"\x3e"+z.innerHTML+"\x3c/"+z.tagName+"\x3e",z.parentNode),t.add(Q,z.className),t.add(Q,C),Q.id=z.id,z=this.getStyle(Q);B.destroy(Q);return z}})})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t){K.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");a=t._iframeName;a=a.substring(0,a.lastIndexOf("_"));var B=J.delegate(t,{create:function(){return B._frame=t.create.apply(t,arguments)},get:null,post:null,send:function(F){var d=w._ioSetArgs(F,function(A){g&&g.cancel()},function(A){var D=null;A=A.ioArgs;try{var N=A.handleAs;"xml"===N||"html"===N?D=g.response.data:(D=g.response.text,"json"===N?D=E.fromJson(D):"javascript"===N&&(D=K.eval(D)))}catch(O){D=
O}return D},function(A,D){D.ioArgs._hasError=!0;return A}),l=d.ioArgs,u="GET",I=c.byId(F.form);F.method&&"POST"===F.method.toUpperCase()&&I&&(u="POST");F={method:u,handleAs:"json"===F.handleAs||"javascript"===F.handleAs?"text":F.handleAs,form:F.form,query:I?null:F.content,data:I?F.content:null,timeout:F.timeout,ioArgs:l};F.method&&(F.method=F.method.toUpperCase());if(x.ioPublish&&K.publish&&!1!==l.args.ioPublish)var m=n.after(t,"_notifyStart",function(A){A.options.ioArgs===l&&(m.remove(),w._ioNotifyStart(d))},
!0);var g=t(l.url,F,!0);l._callNext=g._callNext;g.then(function(){d.resolve(d)}).otherwise(function(A){d.ioArgs.error=A;d.reject(A)});return d},_iframeOnload:b.global[a+"_onload"]});J.setObject("dojo.io.iframe",B);return B})},"dojox/embed/Flash":function(){define("dojo/_base/lang dojo/_base/unload dojo/_base/array dojo/query dojo/has dojo/dom dojo/on dojo/window dojo/string".split(" "),function(x,E,K,J,w,a,b,c,f){function k(d){d=x.delegate(n,d);if(!("path"in d))return console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided."),
null;"id"in d||(d.id="dojox-embed-flash-"+q++);return d}var q=0,n={expressInstall:!1,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};if(w("ie")){var t=function(d){d=k(d);if(!d)return null;var l,u=d.path;if(d.vars){var I=[];for(l in d.vars)I.push(encodeURIComponent(l)+"\x3d"+encodeURIComponent(d.vars[l]));d.params.FlashVars=I.join("\x26");delete d.vars}u='\x3cobject id\x3d"'+f.escape(String(d.id))+'" classid\x3d"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width\x3d"'+
f.escape(String(d.width))+'" height\x3d"'+f.escape(String(d.height))+'"'+(d.style?' style\x3d"'+f.escape(String(d.style))+'"':"")+'\x3e\x3cparam name\x3d"movie" value\x3d"'+f.escape(String(u))+'" /\x3e';if(d.params)for(l in d.params)u+='\x3cparam name\x3d"'+f.escape(l)+'" value\x3d"'+f.escape(String(d.params[l]))+'" /\x3e';return{id:d.id,markup:u+"\x3c/object\x3e"}};var B=function(){for(var d=10,l=null;!l&&7<d;)try{l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+d--)}catch(u){}return l?(d=l.GetVariable("$version").split(" ")[1].split(","),
{major:null!=d[0]?parseInt(d[0]):0,minor:null!=d[1]?parseInt(d[1]):0,rev:null!=d[2]?parseInt(d[2]):0}):{major:0,minor:0,rev:0}}();E.addOnWindowUnload(function(){console.warn("***************UNLOAD");var d=function(){};J("object").reverse().style("display","none").forEach(function(l){for(var u in l)if("FlashVars"!=u&&"function"==typeof l[u])try{l[u]=d}catch(I){}})})}else t=function(d){d=k(d);if(!d)return null;var l,u=d.path;if(d.vars){var I=[];for(l in d.vars)I.push(encodeURIComponent(l)+"\x3d"+encodeURIComponent(d.vars[l]));
d.params.flashVars=I.join("\x26");delete d.vars}u='\x3cembed type\x3d"application/x-shockwave-flash" src\x3d"'+f.escape(String(u))+'" id\x3d"'+f.escape(String(d.id))+'" width\x3d"'+f.escape(String(d.width))+'" height\x3d"'+f.escape(String(d.height))+'"'+(d.style?' style\x3d"'+f.escape(String(d.style))+'" ':"")+'pluginspage\x3d"'+window.location.protocol+'//www.adobe.com/go/getflashplayer" ';if(d.params)for(l in d.params)u+=" "+f.escape(l)+'\x3d"'+f.escape(String(d.params[l]))+'"';return{id:d.id,markup:u+
" /\x3e"}},B=function(){var d=navigator.plugins["Shockwave Flash"];return d&&d.description?(d=d.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."),{major:null!=d[0]?parseInt(d[0]):0,minor:null!=d[1]?parseInt(d[1]):0,rev:null!=d[2]?parseInt(d[2]):0}):{major:0,minor:0,rev:0}}();var F=function(d,l){if(-1<location.href.toLowerCase().indexOf("file://"))throw Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");
this.available=B.major;this.minimumVersion=d.minimumVersion||9;this.domNode=this.movie=this.id=null;l&&(l=a.byId(l));setTimeout(x.hitch(this,function(){if(d.expressInstall||this.available&&this.available>=this.minimumVersion)if(d&&l)this.init(d,l);else this.onError("embed.Flash was not provided with the proper arguments.");else if(this.available)this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);else this.onError("Flash is not installed.")}),
100)};x.extend(F,{onReady:function(d){},onLoad:function(d){},onError:function(d){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie)},init:function(d,l){this.destroy();l=a.byId(l||this.domNode);if(!l)throw Error("dojox.embed.Flash: no domNode reference has been passed.");var u=0;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;F.initialized&&(this.id=F.place(d,l),this.domNode=l,setTimeout(x.hitch(this,
function(){this.movie=this.byId(this.id,d.doc);this.onReady(this.movie);this._poller=setInterval(x.hitch(this,function(){try{u=this.movie.PercentLoaded()}catch(I){console.warn("this.movie.PercentLoaded() failed",I,this.movie)}if(100==u)this._onload();else if(0==u&&this._pollCount++>this._pollMax)throw clearInterval(this._poller),Error("Building SWF failed.");}),this.pollTime)}),1))},_destroy:function(){try{this.domNode.removeChild(this.movie)}catch(d){}this.id=this.movie=this.domNode=null},destroy:function(){if(this.movie){var d=
x.delegate({id:!0,movie:!0,domNode:!0,onReady:!0,onLoad:!0}),l;for(l in this)d[l]||delete this[l];this._poller?b(this,"Load",this,"_destroy"):this._destroy()}},byId:function(d,l){l=l||document;return l.embeds[d]?l.embeds[d]:l[d]?l[d]:window[d]?window[d]:document[d]?document[d]:null}});x.mixin(F,{minSupported:8,available:B.major,supported:B.major>=B.required,minimumRequired:B.required,version:B,initialized:!1,onInitialize:function(){F.initialized=!0},__ie_markup__:function(d){return t(d)},proxy:function(d,
l){K.forEach(l instanceof Array?l:[l],function(u){this[u]=x.hitch(this,function(){return function(){return eval(this.movie.CallFunction('\x3cinvoke name\x3d"'+u+'" returntype\x3d"javascript"\x3e\x3carguments\x3e'+K.map(arguments,function(I){return __flash__toXML(I)}).join("")+"\x3c/arguments\x3e\x3c/invoke\x3e"))}.apply(this,arguments||[])})},d)}});F.place=function(d,l){d=t(d);l=a.byId(l);l||(l=c.doc.createElement("div"),l.id=d.id+"-container",c.body().appendChild(l));return d?(l.innerHTML=d.markup,
d.id):null};F.onInitialize();x.setObject("dojox.embed.Flash",F);return F})},"dojox/embed/flashVars":function(){define(["dojo"],function(x){x.deprecated("dojox.embed.flashVars","Will be removed in 2.0","2.0");var E={serialize:function(K,J){var w=function(f){"string"==typeof f&&(f=f.replace(/;/g,"_sc_"),f=f.replace(/\./g,"_pr_"),f=f.replace(/:/g,"_cl_"));return f},a=dojox.embed.flashVars.serialize,b="";if(x.isArray(J)){for(var c=0;c<J.length;c++)b+=a(K+"."+c,w(J[c]))+";";return b.replace(/;{2,}/g,";")}if(x.isObject(J)){for(c in J)b+=
a(K+"."+c,w(J[c]))+";";return b.replace(/;{2,}/g,";")}return K+":"+J}};x.setObject("dojox.embed.flashVars",E);return E})},"dojox/html/styles":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(x,E,K,J){var w=x.getObject("dojox.html",!0),a={},b={},c=[];w.insertCssRule=function(f,k,q){q=w.getDynamicStyleSheet(q);var n=f+" {"+k+"}";console.log("insertRule:",n);J("ie")?(q.cssText+=n,console.log("ss.cssText:",q.cssText)):q.sheet?q.sheet.insertRule(n,
q._indicies.length):q.appendChild(K.doc.createTextNode(n));q._indicies.push(f+" "+k);return f};w.removeCssRule=function(f,k,q){var n=-1,t,B;for(t in a)if(!q||q===t){var F=a[t];for(B=0;B<F._indicies.length;B++)if(f+" "+k===F._indicies[B]){n=B;break}if(-1<n)break}if(!F)return console.warn("No dynamic style sheet has been created from which to remove a rule."),!1;if(-1===n)return console.warn("The css rule was not found and could not be removed."),!1;F._indicies.splice(n,1);J("ie")?F.removeRule(n):F.sheet&&
F.sheet.deleteRule(n);return!0};w.modifyCssRule=function(f,k,q){};w.getStyleSheet=function(f){if(a[f||"default"])return a[f||"default"];if(!f)return!1;var k=w.getStyleSheets();if(k[f])return w.getStyleSheets()[f];for(var q in k)if(k[q].href&&-1<k[q].href.indexOf(f))return k[q];return!1};w.getDynamicStyleSheet=function(f){f||(f="default");a[f]||(K.doc.createStyleSheet?(a[f]=K.doc.createStyleSheet(),9>J("ie")&&(a[f].title=f)):(a[f]=K.doc.createElement("style"),a[f].setAttribute("type","text/css"),K.doc.getElementsByTagName("head")[0].appendChild(a[f]),
console.log(f," ss created: ",a[f].sheet)),a[f]._indicies=[]);return a[f]};w.enableStyleSheet=function(f){if(f=w.getStyleSheet(f))f.sheet?f.sheet.disabled=!1:f.disabled=!1};w.disableStyleSheet=function(f){if(f=w.getStyleSheet(f))f.sheet?f.sheet.disabled=!0:f.disabled=!0};w.activeStyleSheet=function(f){var k=w.getToggledStyleSheets(),q;if(1===arguments.length)E.forEach(k,function(n){n.disabled=n.title===f?!1:!0});else for(q=0;q<k.length;q++)if(!1===k[q].disabled)return k[q];return!0};w.getPreferredStyleSheet=
function(){};w.getToggledStyleSheets=function(){var f;if(!c.length){var k=w.getStyleSheets();for(f in k)k[f].title&&c.push(k[f])}return c};w.getStyleSheets=function(){if(b.collected)return b;E.forEach(K.doc.styleSheets,function(f){var k=f.sheet?f.sheet:f;f=k.title||k.href;if(J("ie"))-1===k.cssText.indexOf("#default#VML")&&(k.href?b[f]=k:k.imports.length?E.forEach(k.imports,function(q){b[q.title||q.href]=q}):b[f]=k);else{b[f]=k;b[f].id=k.ownerNode.id;f=[];try{f=k[k.cssRules?"cssRules":"rules"]}catch(q){console.warn("Reading css rules from stylesheet "+
k.href+" is forbidden due to same-origin policy. See http://www.w3.org/TR/CSP/#cascading-style-sheet-css-parsing",k)}E.forEach(f,function(q){q.href&&(b[q.href]=q.styleSheet,b[q.href].id=k.ownerNode.id)})}});b.collected=!0;return b};return w})},"jimu/dijit/EditorChooseImage":function(){define("dojo dijit dijit/_editor/_Plugin jimu/dijit/ImageChooser dojo/_base/html dojo/_base/lang dojo/i18n dojo/_base/connect dojo/_base/declare".split(" "),function(x,E,K,J,w,a,b){x.experimental("dojox.editor.plugins.ChooseImage");
var c=x.declare("dojox.editor.plugins.ChooseImage",K,{iconClassPrefix:"editorIcon",useDefaultCommand:!1,_initButton:function(){this.createFileInput();this.command="chooseImage";var f=b.getLocalization("dijit._editor","commands");this.button=new E.form.Button({label:f.insertImage,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"UploadImage",tabIndex:"-1",onClick:a.hitch(this,this._chooseImage)});this.button.set("readOnly",!1);this.editor.commands[this.command]="Upload Image";this.inherited("_initButton",
arguments);delete this.command},updateState:function(){var f=this.get("disabled");this.button.set("disabled",this.get("disabled"));!0===f?(w.addClass(this.button,"dijitButtonDisabled"),this.imageChooser.disableChooseImage()):(w.removeClass(this.button,"dijitButtonDisabled"),this.imageChooser.enableChooseImage())},createFileInput:function(){var f=x.create("span",{innerHTML:"."},document.body);this.imageChooser=new J({showSelfImg:!1,cropImage:!1,format:[J.GIF,J.JPEG,J.PNG]},f);this.connect(this.imageChooser,
"onImageChange","insertTempImage")},_chooseImage:function(){w.setStyle(this.imageChooser.domNode,"display","none");this.imageChooser.triggerImgUpload()},onComplete:function(f){f=f[0];var k=x.byId(this.currentImageId,this.editor.document);var q=this.downloadPath?this.downloadPath+f.name:f.file;k.src=q;x.attr(k,"_djrealurl",q);f.width&&(k.width=f.width,k.height=f.height)},insertTempImage:function(f,k){k=k&&k.fileName?'alt\x3d"'+k.fileName+'"':"";this.currentImageId="img_"+(new Date).getTime();this.editor.execCommand("inserthtml",
'\x3cimg id\x3d"'+this.currentImageId+'" src\x3d"'+f+'" '+k+"/\x3e")},destroy:function(){this.imageChooser&&this.imageChooser.destroy();this.inherited(arguments)}});x.subscribe(E._scopeName+".Editor.getPlugin",null,function(f){if(!f.plugin)switch(f.args.name){case "chooseImage":f.plugin=new c({url:f.args.url})}});K.registry.chooseImage=function(f){return new c(f)};return c})},"jimu/dijit/EditorTextColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),
function(x,E,K,J,w,a){E.experimental("dijit.editor.plugins.EditorTextColor");var b=J("dijit.editor.plugins.EditorTextColor",w,{buttonClass:a,colorPicker:"jimu/dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command="editorTextColor";this.hackCommand="foreColor";this.inherited(arguments);var c="",f=!1;this.params.custom&&(this.params.custom.recordUID&&(c=this.params.custom.recordUID),this.params.custom.forceAttr&&(f=this.params.custom.forceAttr));var k=this;this.button.set("iconClass",
this.iconClassPrefix+" "+this.iconClassPrefix+"ForeColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(q){function n(t){k.button.dropDown=new t({dir:k.editor.dir,ownerDocument:k.editor.ownerDocument,value:k.value,appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:c,onChange:function(B){k.editor.execCommand("useCSS",f);k.editor.execCommand("styleWithCSS",!f);k.editor.execCommand(k.hackCommand,
B)},onClose:function(){k.button.closeDropDown()}});q()}"string"===typeof k.colorPicker?x([k.colorPicker],n):n(k.colorPicker)}},updateState:function(){var c=this.editor,f=this.hackCommand;if(c&&c.isLoaded&&f.length){if(this.button){var k=this.get("disabled");this.button.set("disabled",k);if(k)return;try{var q=c.queryCommandValue(f)||""}catch(n){q=""}}""===q?q="#000000":"transparent"===q&&(q="rgba(0, 0, 0, 0)");this.value=q;(c=this.button.dropDown)&&c.getColor&&q!==c.getColor()&&(c.refreshRecords(),
c.setColor(q))}}});E.subscribe(K._scopeName+".Editor.getPlugin",null,function(c){if(!c.plugin)switch(c.args.name){case "editorTextColor":c.plugin=new b}});return b})},"jimu/dijit/EditorBackgroundColor":function(){define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),function(x,E,K,J,w,a){E.experimental("dijit.editor.plugins.EditorBackgroundColor");var b=J("dijit.editor.plugins.EditorBackgroundColor",w,{buttonClass:a,colorPicker:"jimu/dijit/ColorPalette",
useDefaultCommand:!1,_initButton:function(){this.command="editorBackgroundColor";this.hackCommand="hiliteColor";this.inherited(arguments);var c="";this.params.custom&&this.params.custom.recordUID&&(c=this.params.custom.recordUID);var f=this;this.button.set("iconClass",this.iconClassPrefix+" "+this.iconClassPrefix+"HiliteColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(k){function q(n){f.button.dropDown=new n({dir:f.editor.dir,ownerDocument:f.editor.ownerDocument,
value:f.value,appearance:{showTransparent:!0,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:c,onChange:function(t){f.editor.execCommand("useCSS",!1);f.editor.execCommand("styleWithCSS",!0);f.editor.execCommand(f.hackCommand,t)},onExecute:function(){f.editor.execCommand(f.hackCommand,this.get("value"))},onClose:function(){f.button.closeDropDown()}});k()}"string"===typeof f.colorPicker?x([f.colorPicker],q):q(f.colorPicker)}},updateState:function(){var c=
this.editor,f=this.hackCommand;if(c&&c.isLoaded&&f.length){if(this.button){var k=this.get("disabled");this.button.set("disabled",k);if(k)return;try{var q=c.queryCommandValue(f)||""}catch(n){q=""}}""===q?q="#000000":"transparent"===q&&(q="rgba(0, 0, 0, 0)");this.value=q;(c=this.button.dropDown)&&c.getColor&&q!==c.getColor()&&(c.refreshRecords(),c.setColor(q))}}});E.subscribe(K._scopeName+".Editor.getPlugin",null,function(c){if(!c.plugin)switch(c.args.name){case "editorBackgroundColor":c.plugin=new b}});
return b})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F,d,l,u){var I=K([J,w,a,E],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',
_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,onlyFilterCurrentLayerWhenAddItem:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);t.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new u({hidden:!0});this.shelter.placeAt(this.domNode);
this.shelter.startup();this._createTree();this.basicFilter=n.hitch(this,this.basicFilter);this.filter=I.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(m){var g=new c;this.onlyShowVisible?g.resolve(m.isShowInMap()):g.resolve(!0);return g},filter:function(m){m=new c;m.resolve(!0);return m},getSelectedItems:function(){var m=this.tree.getSelectedItems();return B.map(m,n.hitch(this,function(g){return this.getHandledItem(g)}))},
getAllItems:function(){var m=this.tree.getAllItems(),g=[];B.forEach(m,n.hitch(this,function(A){"root"!==A.id&&(A=this.getHandledItem(A),g.push(A))}));return g},getHandledItem:function(m){return{name:m.name,layerInfo:m.layerInfo}},_isLeafItem:function(m){return m.isLeaf},setCreateMapResponse:function(m){this.createMapResponse=m;l.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(n.hitch(this,function(g){this.layerInfosObj=g;this.own(x(this.layerInfosObj,"layerInfosChanged",
n.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(x(this.layerInfosObj,"layerInfosIsShowInMapChanged",n.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(m,g){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(m){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(m){this._clear();t.setStyle(this.errorTipSection,
"display","block");var g=[];this.onlyShowWebMapLayers?(g=m.getLayerInfoArrayOfWebmap(),g=g.concat(m.getTableInfoArrayOfWebmap())):(g=m.getLayerInfoArray(),g=g.concat(m.getTableInfoArray()));0!==g.length&&(t.setStyle(this.errorTipSection,"display","none"),B.forEach(g,n.hitch(this,function(A){this._addDirectLayerInfo(A)})))},_addDirectLayerInfo:function(m){m&&m.getLayerObject().then(n.hitch(this,function(){this._addItem("root",m)}),n.hitch(this,function(g){console.error(g)}))},_clear:function(){var m=
this._store.query({parent:"root"});B.forEach(m,n.hitch(this,function(g){g&&"root"!==g.id&&this._store.remove(g.id)}))},_addItem:function(m,g){var A=null,D=g.getLayerType(),N=this.filter(g);q({layerType:D,valid:N}).then(n.hitch(this,function(O){if(O.valid){var L=n.hitch(this,function(S,p){this._id++;A={name:g.title||"",parent:m,layerInfo:g,type:O.layerType,layerClass:g.layerObject.declaredClass,id:this._id.toString(),isLeaf:S,hasChildren:p};this._store.add(A)}),z=g.getSubLayers(),C=0===z.length,Q=
!0;this.onlyFilterCurrentLayerWhenAddItem?(C&&(Q=!1),L(C,Q)):C?L(C,!1):(z=B.map(z,n.hitch(this,function(S){return this.filter(S)})),q(z).then(n.hitch(this,function(S){(S=B.some(S,function(p){return p}))&&L(C,S)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var m=this._getRootItem();m=new b({data:[m],getChildren:function(g){return this.query({parent:g.id})}});this._store=new f(m);m=new k({store:this._store,query:{id:"root"},
mayHaveChildren:n.hitch(this,this._mayHaveChildren)});this.tree=new d({multiple:this.multiple,model:m,showRoot:!1,isLeafItem:n.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:n.hitch(this,function(g,A){"root"!==g.id&&this._onTreeOpen(g,A)}),onClick:n.hitch(this,function(g,A,D){this._onTreeClick(g,A,D);this.emit("tree-click",g,A,D)}),getIconStyle:n.hitch(this,function(g,A){var D=null;if(!g||"root"===g.id)return null;var N={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",
backgroundImage:""},O=window.location.protocol+"//"+window.location.host+require.toUrl("jimu");if(g=this._getIconInfo(g,A).imageName)N.backgroundImage="url("+O+"/css/images/"+g+")",D=N;return D}),getIconClass:n.hitch(this,function(g,A){return this._getIconInfo(g,A).className}),getTooltip:n.hitch(this,function(g){return this.displayTooltipForTreeNode?g.layerInfo.title:""})});t.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(m){return m.hasChildren},
_getIconInfo:function(m,g){var A="",D="";"ArcGISDynamicMapServiceLayer"===m.type||"ArcGISTiledMapServiceLayer"===m.type?g?(A="mapserver_open.png",D="mapservice-layer-icon open"):(A="mapserver_close.png",D="mapservice-layer-icon close"):"GroupLayer"===m.type?g?(A="group_layer2.png",D="group-layer-icon open"):(A="group_layer1.png",D="group-layer-icon close"):"FeatureLayer"===m.type?(m=F.getTypeByGeometryType(m.layerInfo.layerObject.geometryType),"point"===m?(A="point_layer1.png",D="point-layer-icon"):
"polyline"===m?(A="line_layer1.png",D="line-layer-icon"):"polygon"===m&&(A="polygon_layer1.png",D="polygon-layer-icon")):"Table"===m.type?(A="table.png",D="table-icon"):"ArcGISImageServiceLayer"===m.type||"ArcGISImageServiceVectorLayer"===m.type?(A="image_layer.png",D="iamge-layer-icon"):g?(A="mapserver_open.png",D="mapservice-layer-icon open"):(A="mapserver_close.png",D="mapservice-layer-icon close");return{imageName:A,className:D}},_onTreeOpen:function(m,g){if("root"!==m.id){var A=[];g=[];A=m.layerInfo.getSubLayers();
m.checked||(this.shelter.show(),g=B.map(A,n.hitch(this,function(D){return D.getLayerObject()})),q(g).then(n.hitch(this,function(){this.domNode&&(B.forEach(A,n.hitch(this,function(D){this._addItem(m.id,D)})),m.checked=!0,this.shelter.hide())}),n.hitch(this,function(D){console.error(D);this.shelter.hide()})))}},_onTreeClick:function(m,g,A){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});I.createFilterByLayerType=
function(m){n.isArrayLike(m)||(m=[]);return function(g){var A=new c;if(0===m.length)A.resolve(!0);else{var D=[];g.traversal(function(N){D.push(N.getLayerType())});q(D).then(function(N){for(var O=0;O<N.length;O++)for(var L=0;L<m.length;L++)if(N[O]===m[L]){A.resolve(!0);return}A.resolve(!1)},function(N){console.error(N);A.reject(N)})}return A}};I.createFeaturelayerFilter=function(m,g,A,D){var N=["point","polyline","polygon"];m&&0<m.length?(m=B.filter(m,function(O){return 0<=N.indexOf(O)}),0===m.length&&
(m=N)):m=N;return function(O){var L=O.getLayerType();O=O.getLayerObject();return q({layerType:L,layerObject:O}).then(function(z){var C=z.layerType;z=z.layerObject;if("ArcGISDynamicMapServiceLayer"===C||"ArcGISTiledMapServiceLayer"===C||"GroupLayer"===C||"FeatureCollection"===C)return!0;if("FeatureLayer"===C){C=F.getTypeByGeometryType(z.geometryType);C=0<=B.indexOf(m,C);var Q=I._shouldPassStatisticsCheck(D,z);return z.url?(z=F.isFeaturelayerUrlSupportQuery(z.url,z.capabilities),C&&z&&Q):g&&C}return"Table"===
C?(C=F.isFeaturelayerUrlSupportQuery(z.url,z.capabilities),z=I._shouldPassStatisticsCheck(D,z),A&&C&&z):!1})}};I.createImageServiceLayerFilter=function(m,g){return function(A){var D=A.getLayerType();A=A.getLayerObject();return q({layerType:D,layerObject:A}).then(function(N){var O=N.layerType,L=N.layerObject;return"ArcGISImageServiceLayer"===O||"ArcGISImageServiceVectorLayer"===O?m?F.isImageServiceSupportQuery(N.layerObject.capabilities)?g?I._shouldPassStatisticsCheck(g,L):!0:!1:!0:!1})}};I._shouldPassStatisticsCheck=
function(m,g){return m?(m=!1,m=g.advancedQueryCapabilities?!!g.advancedQueryCapabilities.supportsStatistics:!!g.supportsStatistics):!0};I.createQueryableLayerFilter=function(m){var g=I.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,m);m=I.createImageServiceLayerFilter(!0,m);return I.orCombineFilters([g,m])};I.andCombineFilters=function(m){return I._combineFilters(m,!0)};I.orCombineFilters=function(m){return I._combineFilters(m,!1)};I._combineFilters=function(m,g){return function(A){var D=
new c,N=B.map(m,function(O){return O(A)});q(N).then(function(O){var L=!1;L=g?B.every(O,function(z){return z}):B.some(O,function(z){return z});D.resolve(L)},function(O){console.error(O);D.reject(O)});return D}};return I})},"jimu/dijit/LayerChooserFromMapWithDropbox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/keys dojo/Evented dojo/Deferred dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LayerChooserFromMapWithDropbox.html jimu/LayerInfos/LayerInfos".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n){return x([f,k,a],{templateString:q,baseClass:"jimu-layer-chooser-from-map-withdropbox",declaredClass:"jimu.dijit.LayerChooserFromMapWithDropbox",_selectedItem:null,_isLayerChooserShow:!1,layerInfosObj:null,layerChooser:null,customClass:"",postMixInProperties:function(){this.inherited(arguments);this.nls=window.jimuNls.queryableLayerSource;this.nls.customSelectLayer=this.label?this.label:this.nls.selectLayer},postCreate:function(){this.inherited(arguments);this.layerInfosObj=
n.getInstanceSync();this.layerChooser.domNode.style.zIndex=1;this.layerChooser.tree.domNode.style.borderTop="0";this.layerChooser.tree.domNode.style.maxHeight="290px";this.own(J(this.layerChooser,"tree-click",E.hitch(this,this._onTreeClick)));this.own(J(this.layerChooser,"update",E.hitch(this,this._onLayerChooserUpdate)));this.own(J(document.body,"click",E.hitch(this,this._onBodyClicked)));this.own(J(document.body,"keydown",E.hitch(this,function(t){t.keyCode===w.ENTER&&this._onBodyClicked(t)})));
this.own(J(this.layerChooser.domNode,"keydown",E.hitch(this,function(t){t.keyCode===w.ESCAPE&&this.hideLayerChooser()})))},destroy:function(){this.hideLayerChooser();this.layerChooser&&this.layerChooser.destroy();this.layerChooser=null;this.inherited(arguments)},getLayerChooser:function(){return this.layerChooser},setSelectedLayer:function(t){var B=new b;if(t){var F=this.layerInfosObj.getLayerOrTableInfoById(t.id);F?this.layerChooser.filter(F).then(E.hitch(this,function(d){d?(this._onSelectNewItem({layerInfo:F,
name:F.title,url:t.url}),B.resolve(!0)):B.resolve(!1)}),E.hitch(this,function(){B.resolve(!1)})):B.resolve(!1)}else this._onSelectNewItem(null),B.resolve(!0);return B},getSelectedItem:function(){return this._selectedItem},getSelectedItems:function(){return[this._selectedItem]},_onBodyClicked:function(t){t=t.target||t.srcElement;t===this.domNode||K.isDescendant(t,this.domNode)||t===this.layerChooser.domNode||K.isDescendant(t,this.layerChooser.domNode)||this.hideLayerChooser()},_onDropDownClick:function(t){t.stopPropagation();
t.preventDefault();this._isLayerChooserShow?this.hideLayerChooser():(this.isActive=!0,this.showLayerChooser())},_onDropDownKeydown:function(t){t.keyCode===w.ENTER&&this._onDropDownClick(t)},_getSelectedItems:function(){return this.layerChooser.getSelectedItems()},showLayerChooser:function(){this.layerChooser.domNode.style.minWidth=this.domNode.clientWidth+2+"px";c.open({parent:this,popup:this.layerChooser,around:this.domNode});var t=this.layerChooser.domNode.parentNode;t&&(K.addClass(t,"jimu-layer-chooser-from-map-withdropbox-popup"),
this.customClass&&K.addClass(t,this.customClass),this.layerChooser.tree.domNode.focus());this._isLayerChooserShow=!0},hideLayerChooser:function(){c.close(this.layerChooser);this._isLayerChooserShow=!1;this.isActive&&(this.dropDownBtn.focus(),this.isActive=!1)},_onLayerChooserUpdate:function(){this._selectedItem&&this.layerChooser.onlyShowVisible&&!this._selectedItem.layerInfo.isShowInMap()&&(this._selectedItem=null,this.emit("selection-change",[]))},_onSelectNewItem:function(t){var B=E.getObject("layerInfo.id",
!1,this._selectedItem)||-1,F=E.getObject("layerInfo.id",!1,t)||-1;B=B!==F;this._selectedItem=t;this.hideLayerChooser();t=E.getObject("layerInfo.title",!1,this._selectedItem)||"";this.layerNameNode.innerHTML=t;K.setAttr(this.layerNameNode,"title",t);t=E.getObject("layerInfo.layerObject",!1,this._selectedItem);B&&this.emit("selection-change",[t])},_onTreeClick:function(){var t=this._getSelectedItems();this._onSelectNewItem(0<t.length?t[0]:null)}})})},"widgets/Screening/setting/FieldPicker":function(){define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dijit/form/Select dijit/form/ValidationTextBox dojo/_base/array dojo/_base/lang dojo/_base/html dojo/on jimu/BaseWidget dojo/text!./FieldPicker.html dojo/Evented jimu/dijit/SimpleTable dojo/query dojo/dom-class jimu/utils jimu/dijit/CheckBox".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F){return x([f,E,q],{templateString:k,baseClass:"jimu-widget-screening-setting",_fieldsTable:null,_entireFieldsArr:[],_selectedFieldsArr:[],_entireFieldObj:{},_configuredField:null,_configuredLabel:null,constructor:function(d){this._fieldsTable=null;this._entireFieldsArr=[];this._selectedFieldsArr=[];this._entireFieldObj={};this._configuredLabel=this._configuredField=null;a.mixin(this,d)},postMixInProperties:function(){this.nls.common={};a.mixin(this.nls.common,
window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this._init()},_init:function(){this._clearData();this._addValidFields();this._createFieldsTable();this._attachEventsToElement();this._displayPreviousConfiguredFields();this._setPreviousGroupByFieldCheckboxStatus()},_clearData:function(){this._entireFieldsArr=[];this._selectedFieldsArr=[]},_displayPreviousConfiguredFields:function(){var d;if(this.selectedFields)for(d in this.selectedFields)this._configuredField=d,this._configuredLabel=
this.selectedFields[d].label,this.btnAddField.click()},_addValidFields:function(){var d;var l="esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeSmallInteger esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate".split(" ");var u=["string","number","date"];w.forEach(this.featureLayer.fields,a.hitch(this,function(I){this._entireFieldObj[I.name]=I;-1<l.indexOf(I.type)&&(this._entireFieldsArr.push(I.name),this._entireFieldObj[I.name]=a.clone(I),this.selectedFields&&this.selectedFields[I.name]&&
(this._entireFieldObj[I.name].label=this.selectedFields[I.name].label))}));this.layerInfo&&this.layerInfo.originOperLayer&&this.layerInfo.originOperLayer.popupInfo?d=this.layerInfo.originOperLayer.popupInfo:this.layerInfo&&this.layerInfo.getPopupInfo&&this.layerInfo.getPopupInfo()&&(d=this.layerInfo.getPopupInfo());d&&d.expressionInfos&&w.forEach(d.expressionInfos,a.hitch(this,function(I){I=a.clone(I);I.name="expression/"+I.name;this._entireFieldObj[I.name]=I;-1<u.indexOf(I.returnType)&&(this._entireFieldsArr.push(I.name),
this._entireFieldObj[I.name].alias=I.title+" {"+I.name+"}",this.selectedFields&&this.selectedFields[I.name]&&(this._entireFieldObj[I.name].label=this.selectedFields[I.name].label))}));0===this._entireFieldsArr.length&&this._disableAddFieldButton()},_createFieldsTable:function(){this._fieldsTable=new n({fields:[{name:"layer",title:this.nls.analysisTab.addFieldsNameTitle,"class":"label",type:"empty",width:"40%"},{name:"field",title:this.nls.common.label,type:"empty",editable:"true",width:"40%"},{name:"actions",
title:this.nls.common.actions,"class":"actions",type:"actions",actions:["up","down","delete"],width:"20%"}]});this._fieldsTable.placeAt(this.fieldTable);b.setStyle(this._fieldsTable.domNode,{height:"100%"});this._fieldsTable.startup()},_attachEventsToElement:function(){this.own(c(this.btnAddField,"click",a.hitch(this,function(){if(!B.contains(this.btnAddField,"esriCTDisabled")){var d=this._getDistinctFields(this._entireFieldsArr,this._selectedFieldsArr);this._addFieldsRow(d)}})));this.own(c(this._fieldsTable,
"row-delete",a.hitch(this,function(d){this._deleteFieldRow(d)})))},_addFieldsRow:function(d){var l=this._fieldsTable.addRow({});if(l.success&&l.tr){l=l.tr;var u=t(".simple-table-cell",l);var I=u[0];u=u[1];this._addFieldDropdown(d,I,l);this._addLabelTextbox(u,l)}},_deleteFieldRow:function(d){B.remove(this.btnAddField,"esriCTDisabled");var l=this._selectedFieldsArr.indexOf(d.fieldDropdownInstance.value);-1<l&&this._selectedFieldsArr.splice(l,1);this._addSelectedFieldInOtherDropdown(d.fieldDropdownInstance.value,
null)},_addFieldDropdown:function(d,l,u){d=this._getDistinctFieldsOptionsObj(d);d=new K({"class":"esriCTFieldChooserDropdown",options:d});d.placeAt(l);d.startup();this._configuredField&&d.set("value",this._configuredField);u.fieldDropdownInstance=d;this.own(c(d,"change",a.hitch(this,function(I){var m=this._selectedFieldsArr[u.rowIndex];this._selectedFieldsArr[u.rowIndex]=I;this._addSelectedFieldInOtherDropdown(m,I);this._removeSelectedFieldFromOtherDropdown(I)})));this._selectedFieldsArr.push(d.value);
this._removeSelectedFieldFromOtherDropdown(d.value);this._disableAddFieldButton()},_disableAddFieldButton:function(){this._selectedFieldsArr.length===this._entireFieldsArr.length&&B.add(this.btnAddField,"esriCTDisabled")},_addLabelTextbox:function(d,l){var u=new J({"class":"esriCTFieldValidationTextBox"});u.placeAt(d);u.startup();this._configuredLabel&&(u.set("value",this._configuredLabel),this._configuredLabel=null);l.fieldLabelInstance=u},_getDistinctFieldsOptionsObj:function(d){var l=[];w.forEach(d,
a.hitch(this,function(u){l.push({label:this._entireFieldObj[u].alias||this._entireFieldObj[u].name,value:u})}));return l},_removeSelectedFieldFromOtherDropdown:function(d){var l=this._fieldsTable.getRows();w.forEach(l,a.hitch(this,function(u){d!==u.fieldDropdownInstance.value&&u.fieldDropdownInstance.removeOption(d)}))},_addSelectedFieldInOtherDropdown:function(d,l){var u=this._fieldsTable.getRows();w.forEach(u,a.hitch(this,function(I){l!==I.fieldDropdownInstance.value&&I.fieldDropdownInstance.addOption({label:this._entireFieldObj[d].alias,
value:d})}))},okButtonClicked:function(){var d={};var l={};var u=this._fieldsTable.getRows();0===u.length?this.selectedFields=null:(w.forEach(u,a.hitch(this,function(I){this._entireFieldObj[I.fieldDropdownInstance.value].label=F.stripHTML(a.trim(I.fieldLabelInstance.value));d[I.fieldDropdownInstance.value]=this._entireFieldObj[I.fieldDropdownInstance.value]})),this.selectedFields=d);l.selectedFields=this.selectedFields;l.groupbyfieldCheckBoxStatus=this.groupByFieldCheckBox.get("checked");return l},
_getDistinctFields:function(d,l){return d.filter(function(u){return 0>l.indexOf(u)})},_setPreviousGroupByFieldCheckboxStatus:function(){""!==this.groupbyfieldCheckBoxStatus&&null!==this.groupbyfieldCheckBoxStatus&&void 0!==this.groupbyfieldCheckBoxStatus&&this.groupByFieldCheckBox.setValue(this.groupbyfieldCheckBoxStatus)}})})},"widgets/Screening/setting/SearchSourceSettings":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./SearchSourceSettings.html dojo/_base/html jimu/dijit/SimpleTable ./QuerySourceSetting ./LocatorSourceSetting jimu/LayerInfos/LayerInfos ../searchSourceUtils jimu/utils dojo/when esri/lang dojo/_base/lang dojo/_base/array dojo/query dojo/on dojo/dom-class jimu/dijit/CheckBox dojo/domReady!".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F,d,l,u,I,m){return x([E,K,J],{baseClass:"jimu-widget-screening-search-source-settings",templateString:w,startup:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(u(this.menuItemClickNode,"click",F.hitch(this,this._onMenuItemClick)));this._createSourceListTable();this.showInfoWindowOnSelect=new m({checked:!1,label:this.nls.searchSourceSetting.generalSettingCheckboxLabel},this.showInfoWindowOnSelectNode);this.config&&
this.config.sources||(this.config.sources=[]);k.getInstance(this.map,this.map.itemInfo).then(F.hitch(this,function(g){this.layerInfosObj=g;q.setMap(this.map);q.setLayerInfosObj(this.layerInfosObj);q.setAppConfig(this.appConfig);t(q.getConfigInfo(this.config)).then(F.hitch(this,this._loadConfig))}))},_loadConfig:function(g){this.domNode&&this.setConfig(g)},setConfig:function(g){this.config=g;g=g.sources;this.allPlaceholder.set("value",n.stripHTML(this.config.allPlaceholder));this.showInfoWindowOnSelect.setValue(B.isDefined(this.config.showInfoWindowOnSelect)?
!!this.config.showInfoWindowOnSelect:!0);d.forEach(g,F.hitch(this,function(A,D){var N=this.sourceList.addRow({name:A.name||""});N&&N.success?(this._setRelatedConfig(N.tr,A),0===D&&setTimeout(F.hitch(this,function(){this.sourceList.selectRow(N.tr)}),100)):console.error("add row failed ",N)}))},getConfig:function(){if(this._currentSourceSetting)if(this._currentSourceSetting.isValidConfig())this._closeSourceSetting();else return null;var g={allPlaceholder:n.stripHTML(this.allPlaceholder.get("value")),
showInfoWindowOnSelect:this.showInfoWindowOnSelect.checked},A=this.sourceList.getRows(),D=[];d.forEach(A,F.hitch(this,function(N){var O=this._getRelatedConfig(N);delete O._definition;this._removeRelatedConfig(N);D.push(O)}));g.sources=D;return g},destroy:function(){q.setMap(null);q.setLayerInfosObj(null);q.setAppConfig(null);this.inherited(arguments)},_onAllPlaceholderBlur:function(){this.allPlaceholder.set("value",n.stripHTML(this.allPlaceholder.get("value")))},_createSourceListTable:function(){this.sourceList=
new b({autoHeight:!1,selectable:!0,fields:[{name:"name",title:this.nls.common.name,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"70px",type:"actions",actions:["up","down","delete"]}]},this.sourceList);a.setStyle(this.sourceList.domNode,"height","100%");this.sourceList.startup();this.own(u(this.sourceList,"row-select",F.hitch(this,this._onSourceItemSelected)));this.own(u(this.sourceList,"row-delete",F.hitch(this,this._onSourceItemRemoved)))},_onSourceItemRemoved:function(g){this._currentSourceSetting&&
this._currentSourceSetting.getRelatedTr()===g&&(this._currentSourceSetting.destroy(),this._currentSourceSetting=null)},_onSourceItemSelected:function(g){var A=this._getRelatedConfig(g),D=this._currentSourceSetting&&this._currentSourceSetting.tr;A&&g!==D&&(this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?(this._currentSourceSetting.showValidationTip(),this.sourceList.selectRow(D)):(I.remove(this.searchSources,"esriCTSourcesExtraHeight"),"query"===A.type?this._createNewQuerySourceSettingFromSourceList(A,
A._definition||{},g):"locator"===A.type&&this._createNewLocatorSourceSettingFromSourceList(A,A._definition||{},g)))},_setRelatedConfig:function(g,A){l(g).data("config",F.clone(A))},_getRelatedConfig:function(g){return l(g).data("config")[0]},_removeRelatedConfig:function(g){return l(g).removeData("config")},_onMenuItemClick:function(g){g=g&&g.target&&a.getAttr(g.target,"type");this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?this.emit("invalid-source-setting"):(I.remove(this.searchSources,
"esriCTSourcesExtraHeight"),"locator"===g?this._addNewLocator():"query"===g&&this._addNewQuerySource())},_addNewLocator:function(){this._createNewLocatorSourceSettingFromMenuItem({},{})},_addNewQuerySource:function(){this._createNewQuerySourceSettingFromMenuItem({},{})},_createNewLocatorSourceSettingFromMenuItem:function(g,A){var D=new f({nls:F.mixin(this.nls.searchSourceSetting,window.jimuNls.units),map:this.map});D.setDefinition(A);D.setConfig({url:g.url||"",name:g.name||"",singleLineFieldName:g.singleLineFieldName||
"",placeholder:g.placeholder||"",countryCode:g.countryCode||"",maxSuggestions:g.maxSuggestions||6,maxResults:g.maxResults||6,searchInCurrentMapExtent:!!g.searchInCurrentMapExtent,type:"locator"});D._openLocatorChooser();D.own(u(D,"select-locator-url-ok",F.hitch(this,function(N){(N=this.sourceList.addRow({name:N.name||"New Geocoder"},this.sourceList.getRows().length))&&N.success&&(this._currentSourceSetting&&this._closeSourceSetting(),D.setRelatedTr(N.tr),D.placeAt(this.sourceSettingNode),this.sourceList.selectRow(N.tr),
this._currentSourceSetting=D)})));D.own(u(D,"reselect-locator-url-ok",F.hitch(this,function(N){var O=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(O,{name:N.name})})));D.own(u(D,"select-locator-url-cancel",F.hitch(this,function(){this._currentSourceSetting!==D&&(D.destroy(),D=null)})))},_createNewLocatorSourceSettingFromSourceList:function(g,A,D){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new f({nls:F.mixin(this.nls.searchSourceSetting,window.jimuNls.units),
map:this.map});this._currentSourceSetting.own(u(this._currentSourceSetting,"enable-local-search",F.hitch(this,function(){I.add(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.own(u(this._currentSourceSetting,"disable-local-search",F.hitch(this,function(){I.remove(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.setDefinition(A);this._currentSourceSetting.setConfig({url:g.url||"",name:g.name||"",singleLineFieldName:g.singleLineFieldName||"",
placeholder:g.placeholder||"",countryCode:g.countryCode||"",maxSuggestions:g.maxSuggestions||6,maxResults:g.maxResults||6,searchInCurrentMapExtent:!!g.searchInCurrentMapExtent,enableLocalSearch:!!g.enableLocalSearch,localSearchMinScale:g.localSearchMinScale,localSearchDistance:g.localSearchDistance,type:"locator"});this._currentSourceSetting.setRelatedTr(D);this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.own(u(this._currentSourceSetting,"reselect-locator-url-ok",
F.hitch(this,function(N){var O=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(O,{name:N.name})})))},_closeSourceSetting:function(){var g=this._currentSourceSetting.getRelatedTr(),A=this._currentSourceSetting.getConfig();A._definition=this._currentSourceSetting.getDefinition();this._setRelatedConfig(g,A);this.sourceList.editRow(g,{name:A.name});this._currentSourceSetting.destroy()},_createNewQuerySourceSettingFromMenuItem:function(g,A){var D=new c({nls:this.nls.searchSourceSetting,
map:this.map,appConfig:this.appConfig});D.setDefinition(A);D.setConfig({url:g.url,name:g.name||"",layerId:g.layerId,placeholder:g.placeholder||"",searchFields:g.searchFields||[],displayField:g.displayField||A.displayField||"",exactMatch:!!g.exactMatch,maxSuggestions:g.maxSuggestions||6,maxResults:g.maxResults||6,searchInCurrentMapExtent:!!g.searchInCurrentMapExtent,type:"query"});D._openQuerySourceChooser();D.own(u(D,"select-query-source-ok",F.hitch(this,function(N){(N=this.sourceList.addRow({name:N.name},
0))&&N.success&&(this._currentSourceSetting&&this._closeSourceSetting(),D.setRelatedTr(N.tr),D.placeAt(this.sourceSettingNode),this.sourceList.selectRow(N.tr),this._currentSourceSetting=D)})));D.own(u(D,"reselect-query-source-ok",F.hitch(this,function(N){var O=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(O,{name:N.name})})));D.own(u(D,"select-query-source-cancel",F.hitch(this,function(){this._currentSourceSetting!==D&&(D.destroy(),D=null)})))},_createNewQuerySourceSettingFromSourceList:function(g,
A,D){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new c({nls:this.nls.searchSourceSetting,map:this.map,appConfig:this.appConfig});this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.setDefinition(A);this._currentSourceSetting.setConfig({url:g.url,name:g.name||"",layerId:g.layerId,placeholder:g.placeholder||"",searchFields:g.searchFields||[],displayField:g.displayField||A.displayField||"",exactMatch:!!g.exactMatch,maxSuggestions:g.maxSuggestions||
6,maxResults:g.maxResults||6,searchInCurrentMapExtent:!!g.searchInCurrentMapExtent,type:"query"});this._currentSourceSetting.setRelatedTr(D);this._currentSourceSetting.own(u(this._currentSourceSetting,"reselect-query-source",F.hitch(this,function(N){var O=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(O,{name:N.name})})))}})})},"widgets/Screening/setting/QuerySourceSetting":function(){define("dojo/_base/declare dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./QuerySourceSetting.html dojo/_base/lang dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented jimu/dijit/_FeaturelayerSourcePopup jimu/portalUrlUtils esri/request esri/lang jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox jimu/dijit/LoadingShelter dijit/form/ValidationTextBox dojo/NodeList-data".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F,d,l,u,I){return x([K,J,w,n],{baseClass:"jimu-widget-screening-query-source-setting",templateString:a,_layerDefinition:null,_fieldsCheckBox:null,_layerId:null,_suggestible:!1,_clickSet:!1,nls:null,appConfig:null,map:null,tr:null,config:null,fieldsPopup:null,constructor:function(m){this._layerId=this._fieldsCheckBox=this._layerDefinition=null;this._clickSet=this._suggestible=!1;this.fieldsPopup=this.config=this.tr=this.map=this.appConfig=this.nls=null;b.mixin(this,
m)},postMixInProperties:function(){this.nls.common={};this.nls.common=window.jimuNls.common},postCreate:function(){this.inherited(arguments);this.own(f(this.setSourceBtnClickNode,"click",b.hitch(this,this._onSetSourceClick)));this.own(f(this.sourceName,"Blur",b.hitch(this,this._onSourceNameBlur)));this.own(f(this.placeholder,"Blur",b.hitch(this,this._onPlaceholderBlur)));this.own(f(this.fieldsSelectorNode,"click",b.hitch(this,this._onFieldsSelectorClick)));this.exactMatch=new I({checked:!1,label:this.nls.exactMatch},
this.exactMatch);this.searchInCurrentMapExtent=new I({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this._layerDefinition={};this._fieldsCheckBox=[];this._setMessageNodeContent("")},setDefinition:function(m){this._layerDefinition=m||{}},getDefinition:function(){return this._layerDefinition},setRelatedTr:function(m){this.tr=m},getRelatedTr:function(){return this.tr},setConfig:function(m){if("[object Object]"===Object.prototype.toString.call(m)){var g=m.url;g&&(this.config=
m,this.shelter.show(),this._layerDefinition.url!==g?this._getDefinitionFromRemote(g).then(b.hitch(this,function(A){g&&A&&"error"!==A.type?(this._layerDefinition=A,this._layerDefinition.url=g,this._setSourceItems(),this._setMessageNodeContent("")):g&&A&&"error"===A.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(d.substitute({URL:A.url},b.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setMessageNodeContent(""),this._setSourceItems(),this.shelter.hide()))}},
isValidConfig:function(){var m=this.getConfig();return m.url&&m.name&&m.displayField?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.sourceUrl);this._showValidationErrorTip(this.sourceName)},getConfig:function(){return{layerId:this._layerId,url:this.sourceUrl.get("value"),name:l.stripHTML(this.sourceName.get("value")),placeholder:l.stripHTML(this.placeholder.get("value")),searchFields:this._getSearchFields(),displayField:this.displayField.get("value"),exactMatch:this.exactMatch.getValue(),
searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,maxSuggestions:this.maxSuggestions.get("value")||6,maxResults:this.maxResults.get("value")||6,type:"query"}},destroy:function(){this.inherited(arguments);this.fieldsPopup&&(this.fieldsPopup.close(),this.fieldsPopup=null);this.tr=this.nls=this.config=this._layerDefinition=null},_onSourceNameBlur:function(){this.sourceName.set("value",l.stripHTML(this.sourceName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",
l.stripHTML(this.placeholder.get("value")))},_disableSourceItems:function(){this.sourceName.set("disabled",!0);this.placeholder.set("disabled",!0);this.searchFields.set("disabled",!0);E.setStyle(this.fieldsSelectorNode,"display","none");this.displayField.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0)},_enableSourceItems:function(){this.sourceName.set("disabled",!1);this.placeholder.set("disabled",!1);this.searchFields.set("disabled",!1);E.setStyle(this.fieldsSelectorNode,
"display","inline-block");this.displayField.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",!1)},_setSourceItems:function(){this.sourceUrl.set("value",this.config.url);this.sourceName.set("value",l.stripHTML(this.config.name||""));this.placeholder.set("value",l.stripHTML(this.config.placeholder||""));this._setSearchFields2Node();this.searchFields.set("value",this._getSearchFieldsAlias());this._setDisplayFieldOptions();this.displayField.set("value",this.config.displayField||
"");this.exactMatch.setValue(!!this.config.exactMatch);this.searchInCurrentMapExtent.setValue(!!this.config.searchInCurrentMapExtent);this.maxSuggestions.set("value",this.config.maxSuggestions||6);this.maxResults.set("value",this.config.maxResults||6);this._layerId=this.config.layerId;(this._suggestible=this._layerDefinition&&this._layerDefinition.advancedQueryCapabilities&&this._layerDefinition.advancedQueryCapabilities.supportsPagination)?this._hideSuggestibleTips():this._showSuggestibleTips();
this._enableSourceItems()},_getDefinitionFromRemote:function(m){var g=new q,A=F({url:m,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(A);A.then(b.hitch(this,function(D){g.resolve(D)}),b.hitch(this,function(D){console.error(D);g.resolve({type:"error",url:this._getRequestUrl(m)})}));return g.promise},_setMessageNodeContent:function(m,g){E.empty(this.messageNode);m.nodeType||(m=E.toDom(m));E.place(m,this.messageNode);g?E.setStyle(this.messageTr,"display",""):E.setStyle(this.messageTr,
"display","none")},_getRequestUrl:function(m){var g=window.location.protocol;return"http:"===g?B.setHttpProtocol(m):"https:"===g?B.setHttpsProtocol(m):m},_setSearchFields2Node:function(){var m=null,g=this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length;this.config&&this.config.searchFields&&0<this.config.searchFields.length||(m=[]);if(g){var A=this._layerDefinition.fields;m=c.filter(this.config.searchFields,function(D){return c.some(A,function(N){return N.name===
D})})}else m=this.config.searchFields;this.searchFields.set("_fields",m)},_setDisplayFieldOptions:function(){var m=[];this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length?m=c.map(this._layerDefinition.fields,function(g){return{label:g.alias||g.name||"",value:g.name||""}}):this.config&&this.config.displayField&&(m=[{label:this.config.displayField,value:this.config.displayField}]);this.displayField.set("options",m)},_getSearchFieldsAlias:function(){var m=this._getSearchFields();
if(!(m&&0<m.length))return"";if(this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length){for(var g=this._layerDefinition.fields,A=c.map(g,function(z){return z&&z.name}),D=[],N=0,O=m.length;N<O;N++){var L=A.indexOf(m[N]);-1<L&&(g[L].alias?D.push(g[L].alias):D.push(g[L].name))}return D.join(",")}return m.join(",")},_getSearchFields:function(){return this.searchFields.get("_fields")},_setSearchFields:function(m){this.searchFields.set("_fields",m)},_onSetSourceClick:function(){this._clickSet=
!0;this._openServiceChooser()},_openQuerySourceChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){var m=new t({titleLabel:this.nls.setLayerSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});f.once(m,"ok",b.hitch(this,function(g){m.close();this.setDefinition(g.definition||{});this.setConfig({layerId:g.layerInfo&&g.layerInfo.id||null,url:g.url,name:g.name||"",placeholder:"",
searchFields:[],displayField:this._layerDefinition.displayField||"",exactMatch:!1,maxSuggestions:6,maxResults:6,type:"query"});m=null;this._setMessageNodeContent("");this._clickSet?this.emit("reselect-query-source-ok",g):this.emit("select-query-source-ok",g)}));f.once(m,"cancel",b.hitch(this,function(){m.close();m=null;this.emit("select-query-source-cancel")}))},_onFieldsSelectorClick:function(){var m=E.create("div",{style:{maxHeight:"480px"}}),g=this._layerDefinition.fields;this._fieldsCheckBox=
[];c.forEach(g,b.hitch(this,function(A,D){var N=new I({checked:this._isSearchable(A),label:A.alias||A.name});E.addClass(N.domNode,"esriCTSearchSourceFieldCheckbox");E.addClass(N.labelNode,"jimu-ellipsis");E.setAttr(N.domNode,{title:A.alias||A.name});0===D%3&&(window.isRTL?E.setStyle(N.domNode,"marginRight",0):E.setStyle(N.domNode,"marginLeft",0));N.placeAt(m);k(N.domNode).data("fieldName",A.name);this._fieldsCheckBox.push(N)}));this.fieldsPopup=new u({titleLabel:this.nls.setSearchFields,autoHeight:!0,
content:m,container:window.jimuConfig.layoutId,width:640,maxHeight:600,buttons:[{label:this.nls.common.ok,onClick:b.hitch(this,"_onSearchFieldsOk")},{label:this.nls.common.cancel}],onClose:b.hitch(this,function(){this.fieldsPopup=null})});E.addClass(this.fieldsPopup.domNode,this.baseClass)},_onSearchFieldsOk:function(){var m=[];c.forEach(this._fieldsCheckBox,function(g){if(g.getValue()){var A=k(g.domNode).data("fieldName");m.push(A[0]);k(g.domNode).removeData()}});this._setSearchFields(m);this.searchFields.set("value",
this._getSearchFieldsAlias());this.fieldsPopup.close()},_isSearchable:function(m){var g=this._getSearchFields();return c.some(g,b.hitch(this,function(A){return m.name===A}))},_showSuggestibleTips:function(){E.removeClass(this.tipsNode,"esriCTHidden");E.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){E.addClass(this.tipsNode,"esriCTHidden");E.setStyle(this.maxSuggestions.domNode,"display","block")},_showValidationErrorTip:function(m){if(!m.validate()&&m.domNode&&
m.focusNode){var g=m.get("disabled");g&&m.set("disabled",!1);m.focusNode.focus();setTimeout(b.hitch(this,function(){m.focusNode.blur();g&&m.set("disabled",!0);m=null}),100)}}})})},"jimu/dijit/_FeaturelayerSourcePopup":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/FeaturelayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),function(x,E,K,J,w,a,b,c,f){return x([a,E],{width:830,height:560,titleLabel:"",dijitArgs:null,
postCreate:function(){this.inherited(arguments);w.addClass(this.domNode,"jimu-featurelayer-source-popup");this._initFls();this._initLoading()},getSelectedRadioType:function(){return this.fls.getSelectedRadioType()},_initFls:function(){this.fls=new b(this.dijitArgs);this.fls.placeAt(this.contentContainerNode);this.fls.startup();this.own(K(this.fls,"ok",J.hitch(this,function(k){if(0!==k.length){var q=k[0];if(q.definition)try{q.definition.name=q.name,q.definition.url=q.url,this.emit("ok",q)}catch(n){console.error(n)}else this.loading.show(),
f({url:q.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(J.hitch(this,function(n){if(this.domNode){this.loading.hide();q.definition=n;try{q.definition.name=q.name,q.definition.url=q.url,this.emit("ok",q)}catch(t){console.error(t)}}}),J.hitch(this,function(n){console.error(n);this.domNode&&this.loading.hide()}))}})));this.own(K(this.fls,"cancel",J.hitch(this,function(){try{this.emit("cancel")}catch(k){console.error(k)}})))},_initLoading:function(){this.loading=new c({hidden:!0});
this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/FeaturelayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/RadioBtn jimu/dijit/_FeaturelayerChooserWithButtons jimu/dijit/FeaturelayerChooserFromPortal jimu/dijit/_FeaturelayerServiceChooserContent jimu/portalUrlUtils".split(" "),function(x,E,K,J,
w,a,b,c,f,k,q,n,t,B){return x([E,K,J,f],{templateString:w,baseClass:"jimu-layer-source jimu-featurelayer-source",declaredClass:"jimu.dijit.FeaturelayerSource",nls:null,multiple:!1,createMapResponse:null,portalUrl:null,layerChooserFromMap:null,postMixInProperties:function(){this.nls=window.jimuNls.featureLayerSource;this.portalUrl=B.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedRadioType:function(){if(this.mapRadio.checked)return"map";
if(this.portalRadio.checked)return"portal";if(this.urlRadio.checked)return"url"},getSelectedItems:function(){var F=[];this.mapRadio.checked?F=this.flcMap.getSelectedItems():this.portalRadio.checked?F=this.flcPortal.getSelectedItems():this.urlRadio.checked&&(F=this.flcUrl.getSelectedItems());return F},startup:function(){this.inherited(arguments);this.flcMap.startup();this.flcPortal.startup();this.flcUrl.startup()},_initSelf:function(){this._initRadios();this._createFeaturelayerChooserWithButtons();
this._createFeaturelayerChooserFromPortal();this._createFeaturelayerServiceChooserContent();this._onRadioClicked()},_createFeaturelayerChooserWithButtons:function(){this.flcMap=new q({style:{width:"100%",height:"100%"},multiple:this.multiple,createMapResponse:this.createMapResponse,onlyShowWebMapLayers:!0,layerChooserFromMap:this.layerChooserFromMap});this.flcMap.operationTip=this.nls.selectLayer;this.flcMap.placeAt(this.flcContainer);this.own(c(this.flcMap,"ok",a.hitch(this,function(F){F&&0<F.length&&
this.emit("ok",F)})));this.own(c(this.flcMap,"cancel",a.hitch(this,function(){this.emit("cancel")})))},_createFeaturelayerChooserFromPortal:function(){this.flcPortal=new n({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.flcPortal.operationTip=this.nls.chooseItem;this.flcPortal.placeAt(this.hflcContainer);this.own(c(this.flcPortal,"next",a.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseLayer;this._updateOperationTip()})));
this.own(c(this.flcPortal,"back",a.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(c(this.flcPortal,"ok",a.hitch(this,function(F){F&&0<F.length&&this.emit("ok",F)})));this.own(c(this.flcPortal,"cancel",a.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createFeaturelayerServiceChooserContent:function(){this.flcUrl=
new t({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.flcUrl.operationTip=this.nls.setServiceUrl;this.flcUrl.placeAt(this.flscContainer);this.own(c(this.flcUrl,"ok",a.hitch(this,function(F){F&&0<F.length&&this.emit("ok",F)})));this.own(c(this.flcUrl,"cancel",a.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var F="featureLayerSourceRadios_"+this._getRandomString(),d=a.hitch(this,this._onRadioClicked);this.mapRadio=new k({group:F,onStateChange:d,checked:!0});
this.mapRadio.placeAt(this.mapTd,"first");this.portalRadio=new k({group:F,onStateChange:d,checked:!1});this.portalRadio.placeAt(this.portalTd,"first");this.urlRadio=new k({group:F,onStateChange:d,checked:!1});this.urlRadio.placeAt(this.urlTd,"first");this.own(c(this.mapLabel,"click",a.hitch(this,function(){this.mapRadio.check()})));this.own(c(this.portalLabel,"click",a.hitch(this,function(){this.portalRadio.check()})));this.own(c(this.urlLabel,"click",a.hitch(this,function(){this.urlRadio.check()})))},
_getRandomString:function(){var F=Math.random().toString();return F=F.slice(2,F.length)},_onRadioClicked:function(){b.setStyle(this.flcContainer,"display","none");b.setStyle(this.hflcContainer,"display","none");b.setStyle(this.flscContainer,"display","none");this.mapRadio.checked?(b.setStyle(this.flcContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(b.setStyle(this.hflcContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):
this.urlRadio.checked&&(b.setStyle(this.flscContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=this.flcMap.operationTip:this.portalRadio.checked?this.operationTip.innerHTML=this.flcPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.flcUrl.operationTip)}})})},"jimu/dijit/_FeaturelayerChooserWithButtons":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/FeaturelayerChooserFromMap".split(" "),
function(x,E,K,J,w,a,b,c,f){return w([a,b,c,E],{baseClass:"jimu-layer-chooser-with-buttons jimu-feature-layer-chooser-with-buttons",declaredClass:"jimu.dijit.FeaturelayerChooserWithButtons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"chooser-container" data-dojo-attach-point\x3d"chooserContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-trailing-margin1 jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
layerChooserFromMap:null,constructor:function(k){this.options=k},postMixInProperties:function(){this.nls=K.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.layerChooser=this.layerChooserFromMap?this.layerChooserFromMap:new f(this.options);this.layerChooser.placeAt(this.chooserContainer);J.setStyle(this.layerChooser.domNode,{width:"100%",height:"100%"});this.own(x(this.layerChooser,"tree-click",K.hitch(this,function(){0<this.getSelectedItems().length?J.removeClass(this.btnOk,
"jimu-state-disabled"):J.addClass(this.btnOk,"jimu-state-disabled")})));this.own(x(this.btnOk,"click",K.hitch(this,function(){var k=this.getSelectedItems();0<k.length&&this.emit("ok",k)})));this.own(x(this.btnCancel,"click",K.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.layerChooser.getSelectedItems()},startup:function(){this.inherited(arguments);this.layerChooser.startup()}})})},"jimu/dijit/FeaturelayerChooserFromMap":function(){define(["dojo/_base/declare",
"dojo/Deferred","dojo/_base/html","dojo/_base/lang","./LayerChooserFromMap"],function(x,E,K,J,w){return x([w],{baseClass:"jimu-featurelayer-chooser-from-map",declaredClass:"jimu.dijit.FeaturelayerChooserFromMap",types:null,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,ignoredFeaturelayerIds:null,mustSupportStatistics:!1,ignoreVirtualLayer:!1,postMixInProperties:function(){this.inherited(arguments);this.ignoredFeaturelayerIds||(this.ignoredFeaturelayerIds=[]);this.basicFilter=J.hitch(this,
this.basicFilter);this.filter=w.createFeaturelayerFilter(this.types,this.showLayerFromFeatureSet,this.showTable,this.mustSupportStatistics);this.ignoreVirtualLayer&&(this.filter=w.andCombineFilters([this.filter,J.hitch(this,this._ignoreVirtualLayerFilter)]))},postCreate:function(){this.inherited(arguments);K.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},_ignoreVirtualLayerFilter:function(a){return a.getLayerType().then(function(b){return!("ArcGISDynamicMapServiceLayer"===b||"ArcGISTiledMapServiceLayer"===
b||"GroupLayer"===b)})},basicFilter:function(a){var b=new E;0<=this.ignoredFeaturelayerIds.indexOf(a.id)?b.resolve(!1):this.onlyShowVisible&&"Table"!==a.getLayerType()?b.resolve(a.isShowInMap()):b.resolve(!0);return b},getHandledItem:function(a){var b=this.inherited(arguments),c=a&&a.layerInfo;c=c&&c.layerObject;b.url=c&&c.url||"";return b}})})},"jimu/dijit/FeaturelayerChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/FeaturelayerServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F,d,l){return x([E,K,J,n],{templateString:w,declaredClass:"jimu.dijit.FeaturelayerChooserFromPortal",baseClass:"jimu-service-chooser-from-portal jimu-featurelayer-chooser-from-portal",_serviceBrowserDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=a.mixin({},window.jimuNls.common);this.nls=a.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal);this.portalUrl=d.getStandardPortalUrl(this.portalUrl);this.multiple=!0===this.multiple?
!0:!1},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},_initSelf:function(){this.selector=new B({portalUrl:this.portalUrl,itemTypes:["Feature Service","Map Service"],onlyShowOnlineFeaturedItems:!1});this.own(f(this.selector,"item-selected",a.hitch(this,this._onItemSelected)));this.own(f(this.selector,"none-item-selected",a.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);
this.selector.startup();this.serviceBrowser=new F({multiple:this.multiple});this.own(f(this.serviceBrowser,"tree-click",a.hitch(this,this._onServiceBrowserClicked)));this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup()},_onItemSelected:function(){b.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){b.addClass(this.btnNext,"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceBrowserDef&&!this._serviceBrowserDef.isFulfilled()&&
this._serviceBrowserDef.cancel();b.setStyle(this.btnOk,"display","none");b.setStyle(this.btnNext,"display","block");b.setStyle(this.btnBack,"display","none");b.addClass(this.btnOk,"jimu-state-disabled");b.setStyle(this.selectorContainer,"display","block");b.setStyle(this.serviceBrowserContainer,"display","none");this.serviceBrowser.reset();this.emit("back")},_onBtnOkClicked:function(){var u=this.getSelectedItems();0<u.length&&this.emit("ok",u)},_onBtnNextClicked:function(){var u=this.selector.getSelectedItem();
u&&(b.setStyle(this.btnNext,"display","none"),b.setStyle(this.btnBack,"display","block"),b.setStyle(this.btnOk,"display","block"),b.addClass(this.btnOk,"jimu-state-disabled"),b.setStyle(this.selectorContainer,"display","none"),b.setStyle(this.serviceBrowserContainer,"display","block"),this.serviceBrowser.reset(),this._serviceBrowserDef=this.serviceBrowser.setUrl(u.url||u.item),this._serviceBrowserDef.then(a.hitch(this,function(){this._serviceBrowserDef=null;this._setOkStateBySelectedItems()}),a.hitch(this,
function(){this._serviceBrowserDef=null})),this.emit("next"))},_setOkStateBySelectedItems:function(){0<this.serviceBrowser.getSelectedItems().length?b.removeClass(this.btnOk,"jimu-state-disabled"):b.addClass(this.btnOk,"jimu-state-disabled")},_onServiceBrowserClicked:function(){this._setOkStateBySelectedItems()},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/FeaturelayerServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array",
"jimu/serviceBrowserRuleUtils"],function(x,E,K,J,w){return x([E],{baseClass:"jimu-featurelayer-service-browser",declaredClass:"jimu.dijit.FeaturelayerServiceBrowser",url:"",multiple:!1,types:null,isSupportQuery:!0,postMixInProperties:function(){this.inherited(arguments);this.rule=w.getFeaturelayerServiceBrowserRule(this.types,this.isSupportQuery)},getSelectedItems:function(){var a=this.inherited(arguments);return a=J.map(a,K.hitch(this,function(b){return{name:b.name,url:b.url,definition:b.definition}}))}})})},
"jimu/dijit/_FeaturelayerServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./FeaturelayerServiceBrowser"],function(x,E,K){return x([E],{baseClass:"jimu-featurelayer-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/MapServer","http://myserver/arcgis/rest/services/myservice/FeatureServer"],_createServiceBrowser:function(J){return new K(J)}})})},
"dojo/NodeList-data":function(){define(["./_base/kernel","./query","./_base/lang","./_base/array","./dom-attr"],function(x,E,K,J,w){var a=E.NodeList,b={},c=0,f=function(n){var t=w.get(n,"data-dojo-dataid");t||(t="pid"+c++,w.set(n,"data-dojo-dataid",t));return t},k=x._nodeData=function(n,t,B){var F=f(n),d;b[F]||(b[F]={});if(1==arguments.length)return b[F];"string"==typeof t?2<arguments.length?b[F][t]=B:d=b[F][t]:d=K.mixin(b[F],t);return d},q=x._removeNodeData=function(n,t){n=f(n);b[n]&&(t?delete b[n][t]:
delete b[n])};a._gcNodeData=x._gcNodeData=function(){var n=E("[data-dojo-dataid]").map(f),t;for(t in b)0>J.indexOf(n,t)&&delete b[t]};K.extend(a,{data:a._adaptWithCondition(k,function(n){return 0===n.length||1==n.length&&"string"==typeof n[0]}),removeData:a._adaptAsForEach(q)});return a})},"widgets/Screening/setting/LocatorSourceSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/Evented dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/portalUrlUtils jimu/dijit/Message jimu/dijit/_GeocodeServiceChooserContent jimu/dijit/Popup jimu/dijit/LoadingShelter esri/request esri/lang ../searchSourceUtils jimu/utils dojo/text!./LocatorSourceSetting.html jimu/dijit/CheckBox dijit/form/ValidationTextBox dijit/form/NumberTextBox".split(" "),
function(x,E,K,J,w,a,b,c,f,k,q,n,t,B,F,d,l,u,I,m){return x([b,c,f,w],{baseClass:"jimu-widget-screening-locator-source-setting",templateString:I,_clickSet:!1,_suggestible:!1,_locatorDefinition:null,_esriLocatorRegExp:/http(s)?:\/\/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,tr:null,nls:null,config:null,geocoderPopup:null,singleLineFieldName:null,serviceChooserContent:null,constructor:function(g){this._suggestible=this._clickSet=!1;this._locatorDefinition=null;this._esriLocatorRegExp=
/http(s)?:\/\/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g;this.serviceChooserContent=this.singleLineFieldName=this.geocoderPopup=this.config=this.nls=this.tr=null;E.mixin(this,g)},postCreate:function(){this.inherited(arguments);this.exampleHint=this.nls.locatorExample+": http://\x26lt;myServerName\x26gt;/arcgis/rest/services/World/GeocodeServer";this.own(J(this.setButtonNode,"click",E.hitch(this,this._onSetLocatorUrlClick)));this.own(J(this.locatorName,"Blur",E.hitch(this,
this._onLocatorNameBlur)));this.own(J(this.placeholder,"Blur",E.hitch(this,this._onPlaceholderBlur)));this.own(J(this.countryCode,"Blur",E.hitch(this,this._onCountryCodeBlur)));this.searchInCurrentMapExtent=new m({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this.enableLocalSearch=new m({checked:!1,label:this.nls.enableLocalSearch},this.enableLocalSearch);this._processLocalSearchTable(!1);this.own(J(this.enableLocalSearch,"change",E.hitch(this,function(){this._processLocalSearchTable(this.enableLocalSearch.getValue())})));
K.setStyle(this.enableLocalSearch.domNode,"display","none");this._setMessageNodeContent(this.exampleHint);this.config=this.config?this.config:{};this.setConfig(this.config)},setRelatedTr:function(g){this.tr=g},getRelatedTr:function(){return this.tr},setDefinition:function(g){this._locatorDefinition=g||{}},getDefinition:function(){return this._locatorDefinition},setConfig:function(g){if("[object Object]"===Object.prototype.toString.call(g)){var A=g.url;A&&(this.config=g,this.shelter.show(),this._locatorDefinition.url!==
A?this._getDefinitionFromRemote(A).then(E.hitch(this,function(D){A&&D&&"error"!==D.type?(this._locatorDefinition=D,this._locatorDefinition.url=A,this._setSourceItems(),this._setMessageNodeContent(this.exampleHint)):A&&D&&"error"===D.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(d.substitute({URL:D.url},E.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setSourceItems(),this._setMessageNodeContent(this.exampleHint),this.shelter.hide()))}},isValidConfig:function(){var g=
this.getConfig();return g.url&&g.name&&g.singleLineFieldName?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.locatorUrl);this._showValidationErrorTip(this.locatorName)},getConfig:function(){return{url:this.locatorUrl.get("value"),name:u.stripHTML(this.locatorName.get("value")),singleLineFieldName:this.singleLineFieldName,placeholder:u.stripHTML(this.placeholder.get("value")),countryCode:u.stripHTML(this.countryCode.get("value")),maxSuggestions:this.maxSuggestions.get("value")||
6,maxResults:this.maxResults.get("value")||6,searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,enableLocalSearch:this.enableLocalSearch.getValue(),localSearchMinScale:this.localSearchMinScale.get("value"),localSearchDistance:this.localSearchDistance.get("value"),type:"locator"}},_onLocatorNameBlur:function(){this.locatorName.set("value",u.stripHTML(this.locatorName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",u.stripHTML(this.placeholder.get("value")))},
_onCountryCodeBlur:function(){this.countryCode.set("value",u.stripHTML(this.countryCode.get("value")))},_disableSourceItems:function(){this.locatorName.set("disabled",!0);this.placeholder.set("disabled",!0);this.countryCode.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0)},_enableSourceItems:function(){this.locatorName.set("disabled",!1);this.placeholder.set("disabled",!1);this.countryCode.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",
!1)},_setSourceItems:function(){var g=this.config;g.url&&(this.locatorUrl.set("value",g.url),this._processCountryCodeRow(g.url));g.name&&this.locatorName.set("value",u.stripHTML(g.name));g.singleLineFieldName&&(this.singleLineFieldName=g.singleLineFieldName);g.placeholder&&this.placeholder.set("value",u.stripHTML(g.placeholder));g.countryCode&&this.countryCode.set("value",u.stripHTML(g.countryCode));"capabilities"in this._locatorDefinition?(K.setStyle(this.enableLocalSearch.domNode,"display",""),
this._processLocalSearchTable(g.enableLocalSearch),this.enableLocalSearch.setValue(g.enableLocalSearch),g.localSearchMinScale&&g.enableLocalSearch&&this.localSearchMinScale.set("value",g.localSearchMinScale),g.localSearchDistance&&g.enableLocalSearch&&this.localSearchDistance.set("value",g.localSearchDistance)):(this.enableLocalSearch.setValue(!1),K.setStyle(this.enableLocalSearch.domNode,"display","none"));(this._suggestible=this._locatorDefinition&&this._locatorDefinition.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?
this._hideSuggestibleTips():this._showSuggestibleTips();this.searchInCurrentMapExtent.setValue(!!g.searchInCurrentMapExtent);this.maxSuggestions.set("value",g.maxSuggestions||6);this.maxResults.set("value",g.maxResults||6);this._enableSourceItems()},_isEsriLocator:function(g){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(g)},_getDefinitionFromRemote:function(g){var A=new a;if(this._isEsriLocator(g))A.resolve({singleLineAddressField:{name:"SingleLine",type:"esriFieldTypeString",
alias:"Single Line Input",required:!1,length:200,localizedNames:{},recognizedNames:{}},capabilities:"Geocode,ReverseGeocode,Suggest"});else{var D=F({url:g,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(D);D.then(E.hitch(this,function(N){A.resolve(N)}),E.hitch(this,function(N){console.error(N);A.resolve({type:"error",url:this._getRequestUrl(g)})}))}return A.promise},_setMessageNodeContent:function(g,A){K.empty(this.messageNode);g.nodeType||(g=K.toDom(g));K.place(g,this.messageNode);
A?K.addClass(this.messageNode,"esriCTErrorMessage"):K.removeClass(this.messageNode,"esriCTErrorMessage")},_getRequestUrl:function(g){var A=window.location.protocol;return"http:"===A?k.setHttpProtocol(g):"https:"===A?k.setHttpsProtocol(g):g},_onSetLocatorUrlClick:function(){this._clickSet=!0;this._openServiceChooser()},_openLocatorChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){this.serviceChooserContent=new n({url:this.locatorUrl.get("value")||""});
this.shelter=new B({hidden:!0});this.geocoderPopup=new t({titleLabel:this.nls.setGeocoderURL,autoHeight:!0,content:this.serviceChooserContent.domNode,container:window.jimuConfig.layoutId,width:640});this.shelter.placeAt(this.geocoderPopup.domNode);K.setStyle(this.serviceChooserContent.domNode,"width","580px");K.addClass(this.serviceChooserContent.domNode,"override-geocode-service-chooser-content");this.serviceChooserContent.own(J(this.serviceChooserContent,"validate-click",E.hitch(this,function(){K.removeClass(this.serviceChooserContent.domNode,
"override-geocode-service-chooser-content")})));this.serviceChooserContent.own(J(this.serviceChooserContent,"ok",E.hitch(this,"_onSelectLocatorUrlOk")));this.serviceChooserContent.own(J(this.serviceChooserContent,"cancel",E.hitch(this,"_onSelectLocatorUrlCancel")))},_onSelectLocatorUrlOk:function(g){g&&g[0]&&g[0].url&&this.domNode&&(this.shelter.show(),F({url:g[0].url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(E.hitch(this,function(A){this.shelter.hide();A&&A.singleLineAddressField&&
A.singleLineAddressField.name?(this._enableSourceItems(),this.locatorUrl.set("value",g[0].url),this.locatorName.get("value")||this.locatorName.set("value",l.getGeocoderName(g[0].url)),"capabilities"in A?(K.setStyle(this.enableLocalSearch.domNode,"display",""),this._isEsriLocator(g[0].url)?this.enableLocalSearch.setValue(!0):this.enableLocalSearch.setValue(!1)):(this.enableLocalSearch.setValue(!1),K.setStyle(this.enableLocalSearch.domNode,"display","none")),this.singleLineFieldName=A.singleLineAddressField.name,
this._processCountryCodeRow(g[0].url),this._locatorDefinition=A,this._locatorDefinition.url=g[0].url,(this._suggestible=A.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?this._hideSuggestibleTips():this._showSuggestibleTips(),this._clickSet?this.emit("reselect-locator-url-ok",this.getConfig()):this.emit("select-locator-url-ok",this.getConfig()),this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null),this._setMessageNodeContent(this.exampleHint)):new q({message:this.nls.locatorWarning})}),
E.hitch(this,function(A){console.error(A);this.shelter.hide();new q({message:d.substitute({URL:this._getRequestUrl(g[0].url)},E.clone(this.nls.invalidUrlTip))})})))},_onSelectLocatorUrlCancel:function(){this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null,this.emit("select-locator-url-cancel"))},_processLocalSearchTable:function(g){g?(K.removeClass(this.minScaleNode,"esriCTHidden"),K.removeClass(this.radiusNode,"esriCTHidden"),this.emit("enable-local-search")):(K.addClass(this.minScaleNode,
"esriCTHidden"),K.addClass(this.radiusNode,"esriCTHidden"),this.emit("disable-local-search"))},_processCountryCodeRow:function(g){this._isEsriLocator(g)?(this.countryCode.set("value",""),K.removeClass(this.countryCodeRow,"hide-country-code-row")):K.addClass(this.countryCodeRow,"hide-country-code-row")},_showSuggestibleTips:function(){K.removeClass(this.tipsNode,"esriCTHidden");K.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){K.addClass(this.tipsNode,"esriCTHidden");
K.setStyle(this.maxSuggestions.domNode,"display","block")},_showValidationErrorTip:function(g){if(!g.validate()&&g.domNode&&g.focusNode){var A=g.get("disabled");A&&g.set("disabled",!1);g.focusNode.focus();setTimeout(E.hitch(this,function(){g.focusNode.blur();A&&g.set("disabled",!0);g=null}),100)}}})})},"jimu/dijit/_GeocodeServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./GeocodeServiceBrowser"],function(x,E,K){return x([E],{baseClass:"jimu-geocode-service-chooser-content",
_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/GeocodeServer"],_createServiceBrowser:function(J){return new K(J)}})})},"jimu/dijit/GeocodeServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(x,E,K,J,w){return x([E],{baseClass:"jimu-geocode-service-browser",declaredClass:"jimu.dijit.GeocodeServiceBrowser",
url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=w.getGeocodeServiceBrowserRule()},getSelectedItems:function(){var a=this.inherited(arguments);return a=J.map(a,K.hitch(this,function(b){return{name:b.name,url:b.url}}))}})})},"widgets/Screening/searchSourceUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/Deferred dojo/when dojo/promise/all jimu/portalUtils esri/lang esri/request".split(" "),function(x,E,K,J,w,a,b,c){return{map:null,layerInfosObj:null,
appConfig:null,_esriLocatorRegExp:/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,setMap:function(f){this.map=f},setLayerInfosObj:function(f){this.layerInfosObj=f},setAppConfig:function(f){this.appConfig=f},getConfigInfo:function(f){if(f&&f.sources&&0<f.sources.length){var k=null;return this.searchLayer(this.map)&&f.upgradeFromGeocoder?(k=this.map.itemInfo.itemData.applicationProperties.viewing.search,k=E.map(k.layers,x.hitch(this,function(q,n){n.hintText=q;return this._getQueryTypeGeocoder(n)},
k.hintText)),w(k).then(x.hitch(this,function(q){f.sources=[].concat(q).concat(f.sources);return f}))):f}return J(this._getSourcesFromPortalAndWebmap()).then(x.hitch(this,function(q){return{allPlaceholder:"",showInfoWindowOnSelect:!0,sources:q}}))},_getSourcesFromPortalAndWebmap:function(){var f=[],k=null;this.searchLayer(this.map)&&(k=this.map.itemInfo.itemData.applicationProperties.viewing.search,E.forEach(k.layers,x.hitch(this,function(q,n){n.hintText=q;f.push(this._getQueryTypeGeocoder(n))},k.hintText)));
return a.getPortalSelfInfo(this.appConfig.portalUrl).then(x.hitch(this,function(q){if((q=q.helperServices&&q.helperServices.geocode)&&0<q.length)for(var n=0,t=q.length;n<t;n++){var B=q[n];B&&f.push(this._processSingleLine(B))}return w(f).then(x.hitch(this,function(F){for(var d=[],l=0;l<F.length;l++){var u=F[l];u&&(u&&"query"===u.type?d.push(u):(u={name:u.name||this._getGeocodeName(u.url),url:u.url,singleLineFieldName:u.singleLineFieldName,placeholder:u.placeholder||u.name||this._getGeocodeName(u.url),
maxResults:6,searchInCurrentMapExtent:!1,type:"locator"},u.enableLocalSearch=this._isEsriLocator(u.url),u.localSearchMinScale=3E5,u.localSearchDistance=5E4,d.push(u)))}return d}))}))},_getQueryTypeGeocoder:function(f){var k=this.map.getLayer(f.id),q=null,n=null,t=null;t=b.isDefined(f.subLayer)?f.id+"_"+f.subLayer:f.id;q=this.layerInfosObj.traversal(function(B){return B.id===t?(n=B,!0):!1});return k&&q&&n?(q=b.isDefined(f.subLayer)?n.url||k.url+"/"+f.subLayer:n.url||k.url,{name:n.title,layerId:t,url:q,
placeholder:f.hintText,searchFields:[f.field.name],displayField:f.field.name,exactMatch:f.field.exactMatch||!1,maxResults:6,searchInCurrentMapExtent:!1,type:"query"}):null},_isEsriLocator:function(f){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(f)},_processSingleLine:function(f){if(f.singleLineFieldName)return f;if(this._isEsriLocator(f.url))return f.singleLineFieldName="SingleLine",f;var k=new K;c({url:f.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(x.hitch(this,
function(q){q.singleLineAddressField&&q.singleLineAddressField.name?(f.singleLineFieldName=q.singleLineAddressField.name,k.resolve(f)):(console.warn(f.url+"has no singleLineFieldName"),k.resolve(null))}),x.hitch(this,function(q){console.error(q);k.resolve(null)}));return k.promise},_getGeocodeName:function(f){if("string"!==typeof f)return"geocoder";f=f.split("/");return f[f.length-2]||"geocoder"},getGeocoderName:function(f){return this._getGeocodeName(f)},hasAppSearchInfo:function(f){return f.itemInfo&&
f.itemInfo.itemData&&f.itemInfo.itemData.applicationProperties&&f.itemInfo.itemData.applicationProperties.viewing&&f.itemInfo.itemData.applicationProperties.viewing.search},searchLayer:function(f){if(!this.hasAppSearchInfo(f))return!1;f=f.itemInfo.itemData.applicationProperties.viewing.search;return f.enabled&&0!==f.layers.length?!0:!1}}})},"widgets/Screening/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},
"url:widgets/Screening/setting/SymbolChooserPopup.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n  \x3cdiv class\x3d"esriCTSymbolChooserContainer"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"symbolData" title\x3d"${symbolChooserTitle}" class\x3d"common-input esriCTSymbolData"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n    \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n      \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"okButton"\x3e\r\n        ${nls.common.ok}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/DownloadSettings.html":'\x3cdiv\x3e\r\n  \x3c!--Download Settings--\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.downloadTab.downloadLegend}\x3c/legend\x3e\r\n    \x3c!--Sync enable download Option--\x3e\r\n    \x3cform data-dojo-attach-point\x3d"downloadOptionForm" class\x3d"esriCTDownloadOptionForm"\x3e\r\n      \x3c!--Sync-enable feature service option--\x3e\r\n      \x3cdiv class\x3d"esriCTSyncEnableOptionDiv"\x3e\r\n        \x3c!--Sync-enable radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" id\x3d"syncEnableOption" name\x3d"downloadOption" type\x3d"radio" class\x3d"jimu-radio-btn"\r\n          data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"syncEnable" data-dojo-attach-point\x3d"syncEnableRadioButton"\r\n          data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3clabel class\x3d"esriCTDownloadOptionLabel esriCTDownloadLabel" for\x3d"syncEnableOption"\x3e\r\n          ${nls.downloadTab.syncEnableOptionLabel}\r\n        \x3c/label\x3e\r\n        \x3c!--Sync-enable download option label and hint container--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadLabelDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.syncEnableOptionHint}\r\n            \x3cbr\x3e${nls.downloadTab.syncEnableOptionNote}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Table representation of download file options for each layer--\x3e\r\n      \x3cdiv class\x3d"esriCTLayerDownloadOptionTable" data-dojo-attach-point\x3d"downloadOptionTable"\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Extract data task geoprocessing service option--\x3e\r\n      \x3cdiv class\x3d"esriCTGPServiceOptionDiv"\x3e\r\n        \x3c!--Extract data task radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" id\x3d"gpServiceOption" name\x3d"downloadOption" type\x3d"radio" class\x3d"jimu-radio-btn"\r\n          data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"extractDataTask" data-dojo-attach-point\x3d"gpServiceRadioButton"\r\n          data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3c!--Extract data task download option label and hint container--\x3e\r\n        \x3clabel class\x3d"esriCTDownloadOptionLabel esriCTDownloadLabel" for\x3d"gpServiceOption"\x3e\r\n          ${nls.downloadTab.extractDataTaskOptionLabel}\r\n        \x3c/label\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadLabelDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.extractDataTaskOptionHint}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Extract data task INPUT Container--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabInputContainer esriCTHidden" data-dojo-attach-point\x3d"extractDataTaskInputContainer"\x3e\r\n        \x3c!--Extract data task INPUT TEXTBOX label--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.GPTaskLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Extract data task TEXTBOX--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"extractDataTaskTextBox" class\x3d"esriCTDownloadTabTextbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Set Button--\x3e\r\n        \x3cdiv class\x3d"jimu-btn jimu-float-trailing esriCTDownloadTabSetButton" data-dojo-attach-point\x3d"extractDataTaskSetButton"\r\n          title\x3d"${nls.downloadTab.setButtonLabel}"\x3e\r\n          ${nls.downloadTab.setButtonLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--User cannot download--\x3e\r\n      \x3cdiv class\x3d"esriCTCannotDownloadOptionDiv"\x3e\r\n        \x3c!--User cannot download radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" id\x3d"cannotDownloadOption" name\x3d"downloadOption" type\x3d"radio" class\x3d"jimu-radio-btn"\r\n          data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"cannotDownload" data-dojo-attach-point\x3d"cannotDownloadRadioButton"\r\n          data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3c!--User cannot download option label div--\x3e\r\n        \x3clabel class\x3d"esriCTDownloadOptionLabel esriCTDownloadLabel" for\x3d"cannotDownloadOption"\x3e\r\n          ${nls.downloadTab.cannotDownloadOptionLabel}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/form\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3c!--Report Settings--\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.downloadTab.reportLegend}\x3c/legend\x3e\r\n    \x3cdiv class\x3d"esriCTReportSettingsContainer"\x3e\r\n      \x3c!--Print service URL container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabInputContainer" data-dojo-attach-point\x3d"printGPServiceInputContainer"\x3e\r\n        \x3c!--Print Service url LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.printGPServiceLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Print Service url TEXTBOX--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"printGPServiceTextBox" class\x3d"esriCTDownloadTabTextbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Set BUTTON--\x3e\r\n        \x3cdiv class\x3d"jimu-btn jimu-float-trailing esriCTDownloadTabSetButton" data-dojo-attach-point\x3d"printGPServiceSetButton"\r\n          title\x3d"${nls.downloadTab.setButtonLabel}"\x3e\r\n          ${nls.downloadTab.setButtonLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Print service URL container ends--\x3e\r\n      \x3c!-- Print layout container starts --\x3e\r\n      \x3c!-- Defaut layout starts --\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"defaultLayoutTable" class\x3d"esriCTDefaultLayoutTable"\x3e\x3c/div\x3e\r\n      \x3c!-- Default layout ends --\x3e\r\n      \x3c!-- Custom Layout button starts --\x3e\r\n      \x3cdiv class\x3d"esriCTAddCustomLayoutParentContainer esriCTCustomOptionBtnAddSection esriCTCustomOptionButtonDisable"\r\n        data-dojo-attach-point\x3d"addCustomOptionButton"\x3e\r\n        \x3cspan class\x3d"esriCTCustomOptionBtnAddIcon esriCTCustomOptionBtnAddIconDisable" data-dojo-attach-point\x3d"addCustomOptionButtonIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"esriCTCustomOptionBtnAddLabel"\x3e${nls.downloadTab.addCustomLayoutTitle}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTHint esriCTCustomLayoutHintText"\x3e${nls.downloadTab.customLayoutOptionHint}\x3c/div\x3e\r\n      \x3c!-- Custom Layout button ends --\x3e\r\n      \x3c!-- Custom layout starts --\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"customLayoutTable" class\x3d"esriCTCustomLayoutTable"\x3e\x3c/div\x3e\r\n      \x3c!-- Custom layout ends --\x3e\r\n      \x3c!-- Default print layout option starts --\x3e\r\n      \x3cdiv class\x3d"esriCTDefaultPrintTemplateContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDefaultPrintTemplateText"\x3e${nls.downloadTab.reportDefaultOptionLabel}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDefaultPrintTemplateDropdown" data-dojo-attach-point\x3d"defaultPrintTemplateDropdown"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Default print layout option ends --\x3e\r\n      \x3c!-- Print layout container ends --\x3e\r\n      \x3c!--Logo chooser starts--\x3e\r\n      \x3cdiv class\x3d"esriCTLogoChooserMainContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.logoLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTLogoChooserDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTImageChooserPreviewContainer"\x3e\r\n            \x3cimg class\x3d"esriCTImageChooserPreview" data-dojo-attach-point\x3d"imageChooserPreview"\x3e\r\n            \x3cdiv class\x3d"esriCTLogoChooser" data-dojo-attach-point\x3d"logoChooserNode"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.logoChooserHint}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Logo chooser ends--\x3e\r\n      \x3c!--Report Title container start--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"reportTitle"\x3e\r\n        \x3c!--Report Title  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.reportTitleLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Report Title  TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"reportTitleTextBox" class\x3d"esriCTDownloadTabReportInputNode" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Report Title container end--\x3e\r\n      \x3c!--No data string representation starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"noDataTextRepresentation"\x3e\r\n        \x3c!--No data String Representation  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.noDataTextRepresentation}\r\n        \x3c/div\x3e\r\n        \x3c!--No data string representation TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"noDataTextRepresentationTextBox" class\x3d"esriCTDownloadTabReportInputNode"\r\n          data-dojo-type\x3d"dijit/form/TextBox" value\x3d"${nls.downloadTab.noDataDefaultText}"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--No data string representation ends--\x3e\r\n      \x3c!--NA string representation starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"naTextRepresentation"\x3e\r\n        \x3c!--NA String Representation  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.naTextRepresentation}\r\n        \x3c/div\x3e\r\n        \x3c!--NA string representation TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"naTextRepresentationTextBox" class\x3d"esriCTDownloadTabReportInputNode"\r\n          data-dojo-type\x3d"dijit/form/TextBox" value\x3d"${nls.downloadTab.notApplicableDefaultText}"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--NA String Representation ends--\x3e\r\n      \x3c!--Column title Color Picker container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"reportTitle"\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.columnTitleColorPickerLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabReportInputNode"\x3e\r\n          \x3cdiv class\x3d"esriCTColorPickerPreviewField" data-dojo-attach-point\x3d"columnTitleColorPickerNode"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Column title Color Picker container ends--\x3e\r\n      \x3c!-- Display summary in report option starts --\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryParentContainer"\x3e\r\n          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n            data-dojo-attach-point\x3d"displaySummaryInReportCheckBox" checked\x3d"true"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryLabel"\x3e\r\n          ${nls.downloadTab.displaySummaryLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Display summary in report option ends --\x3e\r\n      \x3c!-- Hide rows having all values zero in report option starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryParentContainer"\x3e\r\n          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n            data-dojo-attach-point\x3d"hideAllZeroRowCheckBox" checked\x3d"false"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryLabel"\x3e\r\n          ${nls.downloadTab.hideZeroValueRowLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Hide rows having all values zero in report option ends--\x3e\r\n      \x3c!-- Hide rows having all values NULL in report option starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryParentContainer"\x3e\r\n          \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n            data-dojo-attach-point\x3d"hideNullRowCheckBox" checked\x3d"false"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDisplaySummaryLabel"\x3e\r\n          ${nls.downloadTab.hideNullValueRowLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Hide rows having all values NULL in report option ends--\x3e\r\n      \x3c!--Footnote container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTFootnoteContainer"\x3e\r\n        \x3c!--Footnote LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.footnoteLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Footnote TextEditor--\x3e\r\n        \x3cdiv class\x3d"esriCTFootnoteTextArea" data-dojo-attach-point\x3d"footNoteEditor"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Footnote container ends--\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/GpSource.html":'\x3cdiv\x3e\r\n  \x3cdiv style\x3d"display: flex;"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cinput name\x3d"gpsource_mode" id\x3d"gpsource_fromportal_${uniqueID}" data-dojo-attach-point\x3d"portalRadio" data-dojo-type\x3d"dijit/form/RadioButton"/\x3e\r\n      \x3clabel for\x3d"gpsource_fromportal_${uniqueID}" data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"margin-left: 20px;"\x3e\r\n      \x3cinput name\x3d"gpsource_mode" id\x3d"gpsource_fromurl_${uniqueID}" data-dojo-attach-point\x3d"urlRadio" data-dojo-type\x3d"dijit/form/RadioButton"/\x3e\r\n      \x3clabel for\x3d"gpsource_fromurl_${uniqueID}" data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"source-content"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container hflc-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container flsc-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/GpChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"layers" data-dojo-attach-point\x3d"browserContainer"\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/GpServiceBrowser" data-dojo-attach-point\x3d"gpServiceBrowser"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing cancel" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ItemSelector.html":'\r\n\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cdiv\x3e${nls.groups}:\x3c/div\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cfieldset id\x3d"publicSearchRaido"\x3e\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" data-dojo-type\x3d"dijit/form/RadioButton" \r\n\t\t\t\t\t\t\tdata-label-id\x3d"portalPublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading portal-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" data-label-for\x3d"portalPublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" data-dojo-type\x3d"dijit/form/RadioButton"\r\n\t\t\t\t\t\t\tdata-label-id\x3d"onlinePublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading online-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" data-label-for\x3d"onlinePublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\t\x3c/fieldset\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan title\x3d"${nls.example}:"\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/LayerChooserFromMapWithDropbox.html":'\x3cdiv\x3e\r\n\x3ctable role\x3d"listbox" aria-haspopup\x3d"true" data-dojo-attach-point\x3d"dropDownBtn" data-dojo-attach-event\x3d"onclick: _onDropDownClick,onkeydown: _onDropDownKeydown"\r\n  tabindex\x3d"0" title\x3d"${nls.customSelectLayer}" aria-label\x3d"${nls.customSelectLayer}"\x3e\r\n    \x3ccaption class\x3d"screen-readers-only-no-position"\x3e${nls.customSelectLayer}\x3c/caption\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"drop-select jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\x3e\r\n            \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/Screening/setting/FieldPicker.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"tableArea" class\x3d"esriCTLayerFieldSelector"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"btnAddField" class\x3d"esriCTBtnAddSection"\x3e\r\n      \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"esriCTBtnAddLabel" data-dojo-attach-point\x3d"addFieldLabel"\x3e\r\n        ${nls.analysisTab.addFieldsLabel}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTGroupByFieldContainer"\x3e\r\n      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" data-dojo-attach-point\x3d"groupByFieldCheckBox"\r\n        class\x3d"esriCTGroupByFieldCheckBox" checked\x3d"true"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTGroupByFieldColumnLabel"\x3e\r\n        ${nls.analysisTab.allowGroupingLabel}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTHint"\x3e${nls.analysisTab.groupingHintDescription}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTHidden esriCTNoLayersOrFieldsForAnalysisLabel" data-dojo-attach-point\x3d"lblNoValidFields"\x3e\r\n      ${nls.analysisTab.noValidFieldsForAnalysis}\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"fieldTable"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/SearchSourceSettings.html":'\x3cdiv\x3e\r\n  \x3c!--Search source setting hint text --\x3e\r\n  \x3cdiv class\x3d"esriCTHint" style\x3d"width: 99%"\x3e ${nls.searchSourceSetting.searchSourceSettingTitleHintText}\r\n  \x3c/div\x3e\r\n  \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTDropdownButton" role\x3d"button"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cspan\x3e ${nls.searchSourceSetting.addSearchSourceLabel}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cul class\x3d"esriCTDropdownMenu" role\x3d"menu" data-dojo-attach-point\x3d"menuItemClickNode"\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"query"\x3e${nls.searchSourceSetting.featureLayerLabel}\x3c/li\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"locator"\x3e${nls.searchSourceSetting.geocoderLabel}\x3c/li\x3e\r\n    \x3c/ul\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTSources" data-dojo-attach-point\x3d"searchSources"\x3e\r\n    \x3cdiv class\x3d"esriCTSourceList jimu-float-leading"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"sourceList" style\x3d"100%"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTSourceSetting jimu-float-trailing" data-dojo-attach-point\x3d"sourceSettingNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n    \x3c!--General setting: Label--\x3e\r\n    \x3cdiv class\x3d"esriCTlabel esriCTGeneralSettingLabelStyle"\x3e\r\n      ${nls.searchSourceSetting.generalSettingLabel}\r\n    \x3c/div\x3e\r\n    \x3c!--General setting: All Place Holder Label--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSourceSetting.allPlaceholderLabel}"\x3e\r\n        ${nls.searchSourceSetting.allPlaceholderLabel}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTLayerField esriCTSearchSourceFloatRight" style\x3d"width: 72%;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"allPlaceholder" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/TextBox" trim\x3d"true"\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--General setting: All Place Holder Hint--\x3e\r\n        \x3cdiv class\x3d"esriCTHint"\x3e\r\n          ${nls.searchSourceSetting.allPlaceholderHintText}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--General setting: Checkbox--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont " data-dojo-attach-point\x3d"showInfoWindowOnSelectNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/QuerySourceSetting.html":'\x3cdiv class\x3d"esriCTMainContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n  \x3c!--Select geocoder url --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.layerSource}"\x3e\r\n        ${nls.layerSource}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"sourceUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"setSourceBtnClickNode"\r\n          title\x3d"${nls.set}"\x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint esriCTErrorMessage"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection"\x3e\r\n    \x3c!--Details section: Name --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.common.name}"\x3e\r\n        ${nls.common.name}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"sourceName" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,required:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"placeholder" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: searchFields --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.searchFields}"\x3e\r\n        ${nls.searchFields}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"searchFields" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'95%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTsearchFieldsSelector jimu-float-trailing" data-dojo-attach-point\x3d"fieldsSelectorNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: displayField --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.displayField}"\x3e\r\n        ${nls.displayField}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"displayField" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxSuggestions --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.searchLayerTips}" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n          ${nls.searchLayerTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxResult --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: exactMatch --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"exactMatch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section: loading shelter --\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"map-td" nowrap data-dojo-attach-point\x3d"mapTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"portal-td" nowrap data-dojo-attach-point\x3d"portalTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"url-td" nowrap data-dojo-attach-point\x3d"urlTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flcContainer" class\x3d"dijit-container map-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container portal-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container url-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/LocatorSourceSetting.html":'\x3cdiv\x3e\r\n  \x3c!--Select Locator URL --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.locatorUrl}"\x3e\r\n        ${nls.locatorUrl}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"locatorUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv title\x3d"${nls.set}" class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"setButtonNode"\x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Locator Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection" ata-dojo-attach-point\x3d"detailsSection"\x3e\r\n    \x3c!--Details section: locatorName --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.locatorName}"\x3e\r\n        ${nls.locatorName}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"locatorName" placeHolder\x3d"${nls.locatorName}"\r\n          required\x3d"true" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"placeholder" placeHolder\x3d"${nls.placeholder}"\r\n          data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: country --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"countryCodeRow"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.countryCode}"\x3e\r\n          ${nls.countryCode}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n          \x3cdiv type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"countryCode" placeHolder\x3d"${nls.countryCodeEg} USA,CHN"\r\n            data-dojo-props\x3d\'style:{width:"97%"}\'\x3e\x3c/div\x3e\r\n          \x3ca class\x3d"jimu-float-trailing" target\x3d"_blank" href\x3d"https://developers.arcgis.com/rest/geocode/api-reference/geocode-coverage.htm"\r\n            style\x3d"line-height:30px;"\x3e${nls.questionMark}\x3c/a\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e${nls.countryCodeHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max suggestion --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n          ${nls.locatorTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max result --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"enableLocalSearch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - minimum scale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"minScaleNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.minScale}"\x3e\r\n        ${nls.minScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"localSearchMinScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:300000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.minScaleHint}"\x3e${nls.minScaleHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - radius --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"radiusNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.radius}"\x3e\r\n        ${nls.radius}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading" data-dojo-attach-point\x3d"localSearchDistance" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'75%\'},value:50000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint esriCTLocalSearchRadiusUnit"\x3e${nls.meters}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"radiusHintNode" title\x3d"${nls.radiusHint}"\x3e${nls.radiusHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: loading shelter --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e',
"url:widgets/Screening/setting/Setting.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n  \x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n    \x3cdiv class\x3d"esriCTTabDiv" data-dojo-attach-point\x3d"tabContainer"\x3e\r\n      \x3c!--Analysis tab contents--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"analysisTabNode" class\x3d"esriCTTabNode"\x3e\r\n        \x3c!--Add Layers section --\x3e\r\n        \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n          \x3cdiv\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"selectAnalysisLayerLabel" class\x3d"esriCTSelectAnalysisLayerLabel"\x3e\r\n              ${nls.analysisTab.selectAnalysisLayerLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"btnAddLayer" class\x3d"esriCTBtnAddSection"\x3e\r\n              \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n              \x3cspan class\x3d"esriCTBtnAddLabel"\x3e${nls.analysisTab.addLayerLabel}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTHidden esriCTNoLayersOrFieldsForAnalysisLabel" data-dojo-attach-point\x3d"lblNoValidLayers"\x3e\r\n              ${nls.analysisTab.noValidLayersForAnalysis}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e${nls.analysisTab.addLayersHintText}\x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTAddLayerTableNode" data-dojo-attach-point\x3d"addLayerTableNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Add Layers section end--\x3e\r\n        \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n          \x3c!--AOI Tools section--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n              ${nls.analysisTab.aoiToolsLegendLabel}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"aoiToolsSection"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3cdiv class\x3d"esriCTAnalysisAOIToolsDescriptionLabel esriCTEllipsis"\x3e\r\n                  ${nls.analysisTab.aoiToolsDescriptionLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--Place Name section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"placeNameCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.placenameLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"placeNameTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Place Name section ends--\x3e\r\n                  \x3c!--Draw Tool section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"drawToolCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.drawToolsLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"drawToolTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Draw Tool section ends--\x3e\r\n                  \x3c!--Upload Shapfile section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"uploadShapefileCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.uploadShapeFileLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"uploadShapeFileTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Upload Shapfile section ends--\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--Co-ordinates section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"coordinatesCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.coordinatesLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"coordinatesTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Co-ordinates section ends--\x3e\r\n                  \x3c!--Traverses Units section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTTraverseUnits"\x3e\r\n                    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n                      \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select"\r\n                        data-dojo-attach-point\x3d"traverseUnitsNode"\x3e\r\n                        \x3coption value\x3d"uSSurveyFeet" selected\x3d"selected"\x3e${nls.units.uSSurveyFeet}\x3c/option\x3e\r\n                        \x3coption value\x3d"meters"\x3e${nls.units.meters}\x3c/option\x3e\r\n                      \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                      ${nls.analysisTab.coordinatesDrpDwnHintText}\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Traverses Units section ends--\x3e\r\n                  \x3c!--Traverse Direction Units section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTTraverseUnits esriCTTraverseDirectionUnits"\x3e\r\n                    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n                      \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select"\r\n                        data-dojo-attach-point\x3d"traverseDirectionUnitsNode"\x3e\r\n                        \x3coption value\x3d"decimalDegree" selected\x3d"selected"\x3e${nls.units.decimalDegree}\x3c/option\x3e\r\n                        \x3coption value\x3d"degreeMinuteSeconds"\x3e${nls.units.degreeMinuteSeconds}\x3c/option\x3e\r\n                      \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                      ${nls.analysisTab.coordinatesBearingDrpDwnHintText}\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Traverse Direction Units section ends--\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--AOI Tools section ends--\x3e\r\n          \x3c!-- Select draw tools starts --\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet esriCTHidden" data-dojo-attach-point\x3d"selectDrawToolFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.analysisTab.drawToolsSettingsFieldsetLabel}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"esriCTSelectDrawToolMainContainer"\x3e\r\n              \x3cdiv class\x3d"esriCTSelectDrawToolLabel"\x3e\r\n                ${nls.analysisTab.selectDrawToolsText}\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTSelectDrawToolsParentContainer"\x3e\r\n                \x3c!-- Point tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectPointToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTPointToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"pointSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPointToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolPointLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Point tool ends --\x3e\r\n                \x3c!-- Polyline tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectPolylineToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTPolylineToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"polylineSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPolylineToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolPolylineLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Polyline tool ends --\x3e\r\n                \x3c!-- Extent tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectExtentToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTExtentToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"extentSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTExtentToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolExtentLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Extent tool ends --\x3e\r\n                \x3c!-- Polygon tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectPolygonToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTPolygonToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"polygonSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPolygonToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolPolygonLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Polygon tool ends --\x3e\r\n                \x3c!-- Circle tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectCircleToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTCircleToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"circleSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTCircleToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolCircleLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Circle tool ends --\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTSelectToolLayersParentContainer"\x3e\r\n              \x3cdiv\x3e${nls.analysisTab.drawToolSelectableLayersLabel}\x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTHint"\x3e${nls.analysisTab.drawToolSelectableLayersHint}\x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTSelectDrawToolLayerTableNode" data-dojo-attach-point\x3d"drawToolSelectableLayerContainer"\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!-- Select draw tools ends --\x3e\r\n          \x3c!--Allow Uploading shapefiles section starts--\x3e\r\n          \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"uploadShapefileSection"\x3e\r\n              \x3c!--upload shapefile options section starts--\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                  data-dojo-attach-point\x3d"allowUploadShapefileCheckBox"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                  ${nls.analysisTab.allowShapefilesUploadLabel}\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTHint"\x3e\r\n                ${nls.analysisTab.allowShapefilesUploadLabelHintText}\r\n              \x3c/div\x3e\r\n              \x3c!--upload shapefile options section ends--\x3e\r\n              \x3c!--layer analysis options section starts--\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                  data-dojo-attach-point\x3d"allowVisibleLayerAnalysisCheckBox"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                  ${nls.analysisTab.allowVisibleLayerAnalysisLabel}\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTHint"\x3e\r\n                ${nls.analysisTab.allowVisibleLayerAnalysisHintText}\r\n              \x3c/div\x3e\r\n              \x3c!--layer analysis options section ends--\x3e\r\n              \x3c!--Area units options section starts--\x3e\r\n              \x3c!-- \x3cdiv class\x3d"esriCTAreaUnitsMainContainer"\x3e --\x3e\r\n              \x3c!-- Area unit --\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsLabel"\x3e\r\n                  ${nls.analysisTab.areaUnitsLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsDropDownContainer"\x3e\r\n                  \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select"\r\n                    data-dojo-attach-point\x3d"areaUnitsDropDown"\x3e\r\n                    \x3coption selected\x3d"selected" value\x3d"SquareFeet"\x3e${nls.units.areaSquareFeetUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Acres"\x3e${nls.units.areaAcresUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"SquareMeters"\x3e${nls.units.areaSquareMetersUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"SquareKilometers"\x3e${nls.units.areaSquareKilometersUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Hectares"\x3e${nls.units.areaHectaresUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"SquareMiles"\x3e${nls.units.areaSquareMilesUnit}\x3c/option\x3e\r\n                  \x3c/select\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!-- Line unit --\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsLabel"\x3e\r\n                  ${nls.analysisTab.lengthUnitsLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsDropDownContainer"\x3e\r\n                  \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select"\r\n                    data-dojo-attach-point\x3d"lengthUnitsDropDown"\x3e\r\n                    \x3coption selected\x3d"selected" value\x3d"Feet"\x3e${nls.units.lengthFeetUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Miles"\x3e${nls.units.lengthMilesUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Meters"\x3e${nls.units.lengthMetersUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Kilometers"\x3e${nls.units.lengthKilometersUnit}\x3c/option\x3e\r\n                  \x3c/select\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!-- \x3c/div\x3e --\x3e\r\n              \x3c!--units options section ends--\x3e\r\n              \x3c!--max feature for analysis starts--\x3e\r\n              \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisMainDiv"\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisLabel"\x3e\r\n                  ${nls.analysisTab.maxFeatureForAnalysisLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureInputDiv"\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureInputParentContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTMaxFeatureTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                      data-dojo-attach-point\x3d"maxFeatureCountTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureHint esriCTHint"\x3e\r\n                    ${nls.analysisTab.maxFeatureForAnalysisHintText}\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!--max feature for analysis ends--\x3e\r\n              \x3c!--search tolerance--\x3e\r\n              \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisMainDiv" data-dojo-attach-point\x3d"toleranceSection"\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisLabel" data-dojo-attach-point\x3d"searchToleranceLabel"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureInputDiv"\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureInputParentContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTMaxFeatureTextBox esriCTTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                      data-dojo-attach-point\x3d"searchToleranceTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureHint esriCTHint"\x3e\r\n                    ${nls.analysisTab.searchToleranceHint}\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!--search tolerance ends--\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!--Allow Uploading shapefiles section ends--\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Analysis tab contents end--\x3e\r\n      \x3c!--Download tab contents--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"downloadTabNode" class\x3d"esriCTTabNode"\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Download tab contents end--\x3e\r\n      \x3c!--General tab contents--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"generalTabNode" class\x3d"esriCTTabNode"\x3e\r\n        \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n          \x3c!--Tab Labels Fieldset starts--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.generalTab.tabLabelsLegend}\x3c/legend\x3e\r\n            \x3c!--Tab Label Fieldset Content Section starts--\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"tabLabelsSection"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--AOI Tab label section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.AOITabLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"aoiTabTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--AOI Tab label section ends--\x3e\r\n                  \x3c!--Reports Tab label section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.ReportTabLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n                      data-dojo-attach-point\x3d"reportsTabTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Reports Tab label section ends--\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!--Tab Label Fieldset Content Section starts--\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--Tab Labels Fieldset ends--\x3e\r\n          \x3c!--Buffer Settings Fieldset starts--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.generalTab.bufferSettingsLegend}\x3c/legend\x3e\r\n            \x3c!--Buffer Settings Fieldset Content Section starts--\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"bufferSettingsSection"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3c!--Default Buffer Settings section starts--\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--Default Buffer Distance section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.defaultBufferDistanceLabel}\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                        data-dojo-attach-point\x3d"defaultBufferDistanceTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Default Buffer Distance section ends--\x3e\r\n                  \x3c!--Buffer Units section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.defaultBufferUnitsLabel}\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTGeneralDropDownContainer"\x3e\r\n                        \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select"\r\n                          data-dojo-attach-point\x3d"defaultBufferUnitsNode"\x3e\r\n                          \x3coption value\x3d"UNIT_FOOT"\x3e${nls.units.feet}\x3c/option\x3e\r\n                          \x3coption value\x3d"UNIT_STATUTE_MILE"\x3e${nls.units.miles}\x3c/option\x3e\r\n                          \x3coption value\x3d"UNIT_KILOMETER"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n                          \x3coption value\x3d"UNIT_METER"\x3e${nls.units.meters}\x3c/option\x3e\r\n                        \x3c/select\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Buffer Units section ends--\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--Default Buffer Settings section ends--\x3e\r\n                \x3c!--Buffer Symbology section starts--\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions esriCTGeneralBufferSymbologyContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                        \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTEllipsis"\x3e\r\n                          ${nls.generalTab.aoiBufferSymbologyLabel}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"aoiSymbolNode"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint esriCTGeneraBufferSymbologylHint"\x3e\r\n                          ${nls.generalTab.generalBufferSymbologyHint}\r\n                        \x3c/div\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--Buffer Symbology section starts--\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!--Tab Label Fieldset Content Section starts--\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--Buffer Settings Fieldset ends--\x3e\r\n          \x3c!--AOI Graphics Symbology Fieldset starts--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n              ${nls.generalTab.aoiGraphicsSymbologyLegend}\x3c/legend\x3e\r\n            \x3c!--AOI Graphics Symbology Fieldset Content Section starts--\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3cdiv class\x3d"esriCTHint"\x3e\r\n                  ${nls.generalTab.aoiGraphicsSymbologyHint}\r\n                \x3c/div\x3e\r\n                \x3c!--AOI Point Symbology section starts--\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTEllipsis"\x3e\r\n                    ${nls.generalTab.pointSymbologyLabel}\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"pointSymbolNode"\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTEllipsis"\x3e\r\n                    ${nls.generalTab.lineSymbologyLabel}\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"lineSymbolNode"\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTEllipsis"\x3e\r\n                    ${nls.generalTab.polygonSymbologyLabel}\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPolygonPreview" data-dojo-attach-point\x3d"polygonSymbolNode"\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--AOI Point Symbology section ends--\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!--AOI Graphics Symbology Fieldset Content Section ends--\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--AOI Graphics Symbology Fieldset ends--\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--General tab contents end--\x3e\r\n      \x3c!-- Search Source Settings tab --\x3e\r\n      \x3cdiv class\x3d"esriCTTabNode" data-dojo-attach-point\x3d"searchSourceTabNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/css/style.css":".jimu-widget-screening-setting .esriCTMainConfigurationContainer {width: 100%; height: 100%; color: #596679; font-size: 14px;}.jimu-widget-screening-setting .jimu-tab3 {height: 100%; overflow: hidden;}.jimu-widget-screening-setting .esriCTFieldError {float: right; line-height: 0;}.jimu-widget-screening-setting .jimu-viewstack {height: calc(100% - 45px); overflow: auto;}.jimu-widget-screening-setting .esriCTHidden {display: none;}.jimu-widget-screening-setting .esriCTTabNode {padding-right: 20px; margin-top: 20px; height: calc(100% - 20px);}.jimu-widget-screening-setting .esriCTTabContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-screening-setting .row {clear: both;}.jimu-widget-screening-setting .esriCTEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-screening-setting .esriCTHint {margin: 5px 5px 10px 0px; float: left; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-screening-setting::-ms-clear {display: none;}.jimu-widget-screening-setting .esriCTFieldSet {height: auto; width: 100%; border: 1px solid #a0acbf; border-radius: 5px; font-size: 14px; color: #596679; margin-bottom: 10px; min-width: 0px;}.jimu-widget-screening-setting .esriCTFieldSetLegend {margin-left: 20px;}.jimu-widget-screening-setting .esriCTFieldSetOptionsContainer {width: 100%; float: left;}.esriRtl .jimu-widget-screening-setting .esriCTFieldSetOptionsContainer {float: right;}.jimu-widget-screening-setting .esriCTTextBox {width: 90%; margin-top: 10px;}.jimu-widget-screening-setting .esriCTFieldsetMainContainer {clear: both; width: 95%; margin: 0 auto; padding-top: 5px;}.jimu-widget-screening-setting .esriCTFieldsetContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-screening-setting .esriCTInputsSection {height: auto; width: 100%; float: left;}.jimu-widget-screening-setting .esriCTFieldsLabel {float: left; padding-left: 10px; width: 80%;}.jimu-widget-screening-setting .esriCTCheckBox {float: left; margin-right: 0px;}.jimu-widget-screening-setting .esriCTAnalysisAOIToolsDescriptionLabel {padding: 10px 0; width: 100%;}.jimu-widget-screening-setting .esriCTAOIToolsOptions {width: 33%; float: left; padding-top: 10px;}.jimu-widget-screening-setting .esriCTTraverseUnits {width: 31%; float: left; padding-right: 10px; padding-top: 36px;}.jimu-widget-screening-setting .esriCTTraverseDirectionUnits {margin-left: 16px;}.jimu-widget-screening-setting .esriCTDropBox {width: 100%;}.jimu-widget-screening-setting .esriCTDropDownContainer {width: 100%; float: left; padding-bottom: 5px;}.jimu-widget-screening-setting .esriCTFieldChooserDropdown, .jimu-widget-screening-setting .esriCTFieldValidationTextBox {height: 26px; width: 100%; float: left;}.jimu-widget-screening-setting .esriCTAddLayerTableNode {margin-top: 30px; margin-bottom: 20px;}.jimu-widget-screening-setting .esriCTSelectDrawToolLayerTableNode {margin-top: 30px; margin-bottom: 20px;}.jimu-widget-screening-setting .esriCTBtnAddSection, .jimu-widget-screening-setting .esriCTCustomOptionBtnAddSection {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-screening-setting .esriCTLayerFieldSelector .jimu-simple-table {max-height: 350px !important;}.jimu-widget-screening-setting .esriCTBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-screening-setting .esriCTCustomOptionBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/custom-button-enable.png); display: inline-block; vertical-align: top;}.jimu-widget-screening-setting .esriCTCustomOptionBtnAddIconDisable {background-image: url(images/custom-button-disable.png) !important;}.jimu-widget-screening-setting .esriCTBtnAddLabel, .jimu-widget-screening-setting .esriCTCustomOptionBtnAddLabel {height: 100%; line-height: 20px; margin-left: 7px; text-decoration: none; display: inline-block; vertical-align: top;}.jimu-widget-screening-setting .esriCTDisabled {cursor: default; color: #a0acbf; opacity: 0.6;}.jimu-widget-screening-setting .esriCTSelectAnalysisLayerLabel {padding-left: 0px; float: left; text-align: center; vertical-align: middle; padding-right: 10px;}.jimu-widget-screening-setting .esriCTNoLayersOrFieldsForAnalysisLabel {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-screening-setting .esriCTTRPreviewText {height: 26px;}.jimu-widget-screening-setting .esriCTLayerLabelTextBox {width: 100%; height: 29px; float: left;}.jimu-widget-screening-setting .esriCTLayerInputCell {padding-left: 0;}.jimu-widget-screening-setting .esriCTAllowShapeFileOption {padding-bottom: 5px;}.jimu-widget-screening-setting .esriCTAreaUnitsLabel {float: left; padding-left: 0px; width: 40%;}.jimu-widget-screening-setting .esriCTAreaUnitsDropDownContainer {width: 60%; float: left;}.jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisMainDiv {width: 100%; float: left; padding-top: 10px;}.jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisLabel {float: left; padding-left: 0px; width: 40%;}.jimu-widget-screening-setting .esriCTMaxFeatureInputDiv, .jimu-widget-screening-setting .esriCTMaxFeatureHint {float: left;}.jimu-widget-screening-setting .esriCTMaxFeatureInputParentContainer {clear: both; width: 100%; overflow: hidden;}.jimu-widget-screening-setting .esriCTMaxFeatureTextBox {width: 200px; float: left; margin: 0px 5px 0px 0px;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisMainDiv {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisLabel {float: right;}.jimu-widget-screening-setting .esriCTMaxFeatureInputDiv {width: 60%;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureInputDiv, .esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureHint {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureInputDiv {width: 60%;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureTextBox {float: right; margin: 0px 0px 0px 0px;}.jimu-widget-screening-setting .esriCTDownloadRadioButton {float: left;}.jimu-widget-screening-setting .esriCTDownloadLabelDiv {float: left; width: 97%; margin-left: 27px;}.jimu-widget-screening-setting .esriCTDownloadLabel {float: left; margin-left: 10px;}.jimu-widget-screening-setting .esriCTLayerDownloadOptionTable {margin-bottom: 15px;}.jimu-widget-screening-setting .esriCTTableHeader {text-align: center;}.jimu-widget-screening-setting .esriCTAvailableDownloadOption {background: url(../css/images/check.png) center no-repeat;}.jimu-widget-screening-setting .esriCTHidden {display: none;}.jimu-widget-screening-setting .esriCTDownloadTabInputContainer {width: 100%; float: left; margin-bottom: 15px;}.jimu-widget-screening-setting .esriCTDownloadTabReportTitleContainer {width: 100%; float: left; margin-bottom: 15px; padding-top: 15px;}.jimu-widget-screening-setting .esriCTDownloadTabLabel {width: 35%; line-height: 30px; float: left; clear: left; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;}.jimu-widget-screening-setting .esriCTDownloadTabTextbox {width: 55%; float: left;}.jimu-widget-screening-setting .esriCTDownloadTabReportInputNode {width: 65%; float: left;}.jimu-widget-screening-setting .esriCTDownloadTabSetButton {width: 8%; float: left; margin-left: 17px; line-height: 28px;}.jimu-widget-screening-setting .esriCTDownloadTabFieldSet {padding: 15px 0px;}.jimu-widget-screening-setting .esriCTDownloadOptionForm, .jimu-widget-screening-setting .esriCTReportSettingsContainer {margin: 0px auto; width: 96%;}.jimu-widget-screening-setting .esriCTFootnoteTextArea {width: 65% !important; padding: 5px !important; float: right; color: #596679;}.jimu-widget-screening-setting .esriCTLogoChooserDiv {width: 65%; float: left;}.jimu-widget-screening-setting .esriCTImageChooserPreviewContainer {position: relative;}.jimu-widget-screening-setting .esriCTImageChooserPreview {position: absolute; top: 0; bottom: 0; margin: auto; max-height: 100%;}.jimu-widget-screening-setting .esriCTImageChooserContent {height: 50px !important; width: 50px !important;}.jimu-widget-screening-setting .esriCTColorChooserNode {text-align: center; cursor: pointer; min-width: 80px;}.jimu-widget-screening-setting .esriCTColorPickerPreviewField {float: left; margin-bottom: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadLabelDiv {float: right; margin-right: 27px; margin-left: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadLabel {float: right; margin-right: 10px; margin-left: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadRadioButton {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadTabSetButton {float: left; margin-left: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadTabTextbox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadTabLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTColorPickerPreviewField {float: right;}.jimu-widget-screening-setting .esriCTGeneralFieldSetOptions {width: 45%; float: left; padding-top: 10px;}.jimu-widget-screening-setting .esriCTGeneralDropDownContainer {width: 90%; float: left; margin-top: 10px;}.jimu-widget-screening-setting .esriCTGeneralSymbologyLabel {max-width: 50%; width: auto; min-width: 15px; float: left; color: rgb(89, 102, 121); font-size: 14px; line-height: 40px;}.jimu-widget-screening-setting .esriCTGeneralBufferSymbologyContainer {width: 100%;}.jimu-widget-screening-setting .esriCTGeneraBufferSymbologylHint {clear: both;}.jimu-widget-screening-setting .esriCTBufferSettingsFieldsLabel {float: left; padding-left: 0px; width: 80%;}.jimu-widget-screening-setting .esriCTSymbolChooserNode {cursor: pointer; min-width: 80px;}.jimu-widget-screening-setting .esriCTSymbolPreviewText {padding-right: 5px; color: #596679; font-size: 14px; max-width: 130px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;}.jimu-widget-screening-setting .esriCTPreviewField {float: left; margin-bottom: 5px; padding: 5px 0px 0px 45px;}.jimu-widget-screening-setting .esriCTSymbolChooserContainer {height: calc(100% - 50px); overflow: auto;}.jimu-widget-screening-setting .esriCTPolygonPreview {float: left; margin-top: 5px; margin-bottom: 5px; padding: 5px 0px 0px 0px;}.claro .dijitTextBox, .claro .dijitSelect {color: #7989a0; background-color: #fafafc; border: 1px solid #d2dae2;}.dj_webkit .claro .dijitTextBox .dijitInputInner {color: #7989a0;}.claro .dijitSelectDisabled, .claro .dijitTextBoxDisabled, .claro .dijitTextBoxDisabled .dijitInputContainer {background-color: #e3ecf2;}.claro .dijitSelect .dijitInputField {background-color: #fafafc !important; color: #7989a0; font-size: 14px;}.claro .dijitTextBox, .claro .dijitSelect {border-color: #d2dae2;}.claro .dijitSelect .dijitArrowButton {background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-screening-setting .dijitSelect .dijitButtonContents {border-style: none none none none; background-color: #fafafc;}.jimu-widget-screening-setting .esriCTURLSetButton {height: 30px; line-height: 30px; margin: 0 0 0 10px; float: right; max-width: 70px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-screening-setting .esriCTlabel {width: 25%; padding: 5px 10px 5px 0px; word-break: break-all; margin-top: 5px; margin-bottom: 5px; float: left; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; min-width: 250px; color: #596679; font-size: 14px;}.jimu-widget-screening-setting .esriCTDropdownButton {margin: 8px 0; display: inline-block; background-repeat: no-repeat; background-position: left; position: relative; padding-left: 16px; color: #518dca; background-image: url(images/add.png); cursor: pointer;}.jimu-widget-screening-setting .esriCTDropdownButton .esriCTDropdownMenu {position: absolute; display: none; list-style-type: none; top: 18px; left: 0; margin: 0; padding: 0; background: #fafafa; color: #7989a0; z-index: 999;}.esriRtl .jimu-widget-screening-setting .esriCTDropdownButton .esriCTDropdownMenu {right: 0; left: auto;}.jimu-widget-screening-setting .esriCTDropdownButton:hover .esriCTDropdownMenu {display: inline-block;}.jimu-widget-screening-setting .esriCTDropdownMenu .esriCTDropdownItem {white-space: nowrap; height: 30px; padding: 0 25px; line-height: 30px;}.jimu-widget-screening-setting .esriCTDropdownMenu .esriCTDropdownItem:hover {background: #edf2f5; color: #15a4fa;}.jimu-widget-screening-setting .esriCTSources {height: 366px;}.jimu-widget-screening-setting .esriCTSourcesExtraHeight {height: 516px !important;}.jimu-widget-screening-setting .esriCTSourceList {width: 270px; height: 100%;}.jimu-widget-screening-setting .esriCTSourceSetting {width: 650px; position: relative;}.jimu-widget-screening-setting .source-table, .jimu-widget-screening-setting .general-setting-table {width: 100%;}.jimu-widget-screening-setting .esriCTSearchSourceLayerField {width: 70%;}.jimu-widget-screening-setting .esriCTSearchSourceLabel {width: 25%; min-width: 182px;}.jimu-widget-screening-setting .esriCTLocalSearchLabel {margin-left: 22px; width: 24%; min-width: 146px;}.jimu-widget-screening-setting .esriCTSearchSourceLabelFont {font-size: 14px; color: #596679;}.jimu-widget-screening-setting .esriCTLayerSource {width: 80% !important;}.jimu-widget-screening-setting .esriCTsearchFieldsSelector {display: inline-block; background-repeat: no-repeat; background-position: center; margin: 6px 0; width: 18px; height: 18px; cursor: pointer; background-image: url(images/selector.png);}.jimu-widget-screening-setting .esriCTSearchSourceURLField {width: 82%; float: left;}.jimu-widget-screening-setting .esriCTSearchSourceLayer {width: 84% !important;}.jimu-widget-screening-setting .esriCTURLWidthLabel {width: 105px; min-width: 105px;}.jimu-widget-screening-setting .esriCTSearchDetailsSection {width: 175px;}.jimu-widget-screening-setting .esriCTGeneralSettingLabelStyle {font-weight: bold;}.jimu-widget-screening-query-source-setting .esriCTSearchSourceFieldCheckbox {width: 167px; margin-bottom: 20px; color: #596679; font-size: 14px; margin-left: 30px;}.jimu-widget-screening-query-source-setting .esriCTSearchSourceFieldCheckbox .label {width: 140px;}.jimu-widget-screening-setting .jimu-simple-table .simple-table-field, .jimu-simple-table .simple-table-cell {cursor: pointer;}.jimu-widget-screening-setting .esriCTLayerContainer {width: 100%; float: left; margin: 0px;}.jimu-widget-screening-setting .esriCTLayerField {float: left;}.jimu-widget-screening-setting .esriCTSearchSourceURLField {width: 82%; float: left;}.jimu-widget-screening-setting .esriCTLocalSearchRadiusUnit {line-height: 30px; float: right;}.jimu-widget-screening-setting .esriCTErrorMessage {color: #e84b4b;}.esriRtl .jimu-widget-screening-setting .esriCTInputsSection {height: auto; width: 100%; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTTabNode {padding-left: 20px; padding-right: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTHint {float: right; margin: 5px 0px 10px 5px;}.esriRtl .jimu-widget-screening-setting .esriCTDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTFieldSetLegend {margin-right: 20px;}.esriRtl .jimu-widget-screening-setting .esriCTFieldsetContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTFieldsLabel {padding-left: 0px; padding-right: 10px; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTAOIToolsOptions {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTAnalysisAOIToolsDescriptionLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTBtnAddLabel {margin-right: 7px;}.esriRtl .jimu-widget-screening-setting .esriCTSelectAnalysisLayerLabel {padding-right: 0px; float: right; padding-left: 10px;}.esriRtl .jimu-widget-screening-setting .esriCTLayerInputCell {padding-left: 8px; padding-right: 0;}.esriRtl .jimu-widget-screening-setting .esriCTAreaUnitsLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTAreaUnitsDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralFieldSetOptions {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTBufferSettingsFieldsLabel {float: right; padding-left: 0px; width: 80%;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPreviewField {float: right; padding: 5px 45px 0px 0px;}.esriRtl .jimu-widget-screening-setting .esriCTInputsSection {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralSymbologyLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPolygonPreview {padding-right: 0px; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTlabel {padding: 5px 0px 5px 10px; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTDropdownButton {padding-right: 16px; background-position: right;}.esriRtl .jimu-widget-screening-setting .esriCTSearchSourceURLField {float: left;}.esriRtl .jimu-widget-screening-setting .esriCTLocalSearchRadiusUnit {float: left;}.esriRtl .jimu-widget-screening-setting .esriCTTraverseUnits {float: right; width: 30%; padding-right: 0;}.esriRtl .jimu-widget-screening-setting .esriCTTraverseDirectionUnits {margin-left: 0px; margin-right: 25px;}.esriRtl .jimu-widget-screening-setting .esriCTURLSetButton {float: left; margin: 0px 0px 0px 0px;}.jimu-widget-screening-setting .esriRTLTabContainerNode{overflow: overlay;}.jimu-widget-screening-download-settings .esriCTDefaultLayoutTable {padding-bottom: 15px;}.jimu-widget-screening-download-settings .esriCTCustomLayoutTable {padding-bottom: 15px;}.jimu-widget-screening-download-settings .esriCTAddCustomLayoutParentContainer {clear: both; float: left;}.jimu-widget-screening-download-settings .esriCTAddLayoutText {float: left; padding-left: 10px;}.jimu-widget-screening-download-settings .esriCTCustomLayoutHintText {clear: both}.jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateContainer {clear: both; width: 100%; padding-bottom: 15px; overflow: auto;}.jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateText {float: left; width: 35%;}.jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateDropdown {float: left; width: 33%;}.jimu-widget-screening-download-settings .esriCTCustomOptionButtonDisable {color: #808080 !important; cursor: default;}.esriRtl .jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateText {float: right;}.esriRtl .jimu-widget-screening-download-settings .esriCTAddCustomLayoutParentContainer {float: right;}.esriRtl .jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateDropdown {float: right;}.jimu-widget-screening-setting .esriCTSelectDrawToolsParentContainer {width: 100%; height: 100%; clear: both; overflow: hidden; padding: 10px;}.jimu-widget-screening-setting .esriCTSelectPointToolParentContainer {width: 25%; float: left;}.jimu-widget-screening-setting .esriCTSelectPolylineToolParentContainer {width: 25%; float: left;}.jimu-widget-screening-setting .esriCTSelectExtentToolParentContainer {width: 25%; float: left;}.jimu-widget-screening-setting .esriCTSelectPolygonToolParentContainer {width: 25%; float: left;}.jimu-widget-screening-setting .esriCTSelectCircleToolParentContainer {width: 25%; float: left; padding-top: 10px;}.esriRtl .jimu-widget-screening-setting .esriCTSelectPointToolParentContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTSelectPolylineToolParentContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTSelectExtentToolParentContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTSelectPolygonToolParentContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTSelectCircleToolParentContainer {float: right;}.jimu-widget-screening-setting .esriCTPointToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTPolylineToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTExtentToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTPolygonToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTCircleToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTPointToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.jimu-widget-screening-setting .esriCTPolylineToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.jimu-widget-screening-setting .esriCTExtentToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.jimu-widget-screening-setting .esriCTPolygonToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.jimu-widget-screening-setting .esriCTCircleToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTPointToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPolylineToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTExtentToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPolygonToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTCircleToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPointToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTPolylineToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTExtentToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTPolygonToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTCircleToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.jimu-widget-screening-setting .esriCTSelectDrawToolMainContainer {padding-left: 10px;}.esriRtl .jimu-widget-screening-setting .esriCTSelectDrawToolMainContainer {padding-left: 0px; padding-right: 10px;}.jimu-widget-screening-setting .esriCTSelectToolLayersParentContainer {padding-left: 10px; padding-right: 10px;}.jimu-widget-screening-setting .esriCTGroupByFieldContainer {width: 100%; overflow: hidden; clear: both; padding-top: 5px; padding-bottom: 5px; font-size: 13px;}.jimu-widget-screening-setting .esriCTGroupByFieldCheckBox {float: left;}.jimu-widget-screening-setting .esriCTGroupByFieldColumnLabel {float: left; padding-left: 5px;}.jimu-widget-screening-setting .esriCTDisplaySummaryParentContainer {float: left;}.esriRtl .jimu-widget-screening-setting .esriCTDisplaySummaryParentContainer {float: right;}.jimu-widget-screening-setting .esriCTDisplaySummaryLabel {float: left; padding-left: 10px;}.esriRtl .jimu-widget-screening-setting .esriCTDisplaySummaryLabel {float: right; padding-left: 0px; padding-right: 10px;}",
"*now":function(x){x(['dojo/i18n!*preload*widgets/Screening/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dijit/_WidgetsInTemplateMixin jimu/dijit/TabContainer3 jimu/BaseWidgetSetting dojo/_base/lang dojo/on dojo/query dojo/_base/array jimu/utils esri/symbols/jsonUtils dojo/dom-construct jimu/symbolUtils jimu/utils jimu/dijit/LoadingIndicator ./SymbolChooserPopup ./DownloadSettings dojo/query dijit/registry jimu/dijit/Message jimu/dijit/Popup dijit/form/ValidationTextBox jimu/dijit/SimpleTable dojo/dom-class jimu/dijit/LayerChooserFromMap jimu/dijit/LayerChooserFromMapWithDropbox ./FieldPicker ./SearchSourceSettings dojo/string dojo/Deferred dojo/promise/all dojo/dom-style jimu/LayerInfos/LayerInfos esri/request dijit/form/Select".split(" "),function(x,
E,K,J,w,a,b,c,f,k,q,n,t,B,F,d,l,u,I,m,g,A,D,N,O,L,z,C,Q,S,p,e,v){return x([J,E],{baseClass:"jimu-widget-screening-setting",_configurationTabsContainer:null,_symbolParams:{},_addLayerTable:null,_curRow:null,_totalLayers:[],_idsOfSelectedLayers:[],_layerInfosObj:null,_selectLayerTable:null,constructor:function(h){this._configurationTabsContainer=null;this._symbolParams={};this._curRow=this._addLayerTable=null;this._totalLayers=[];this._idsOfSelectedLayers=[];this._selectLayerTable=null;w.mixin(this,
h)},postMixInProperties:function(){this.nls.common={};w.mixin(this.nls.common,window.jimuNls.common);w.mixin(this.nls.units,window.jimuNls.units)},postCreate:function(){e.getInstance(this.map,this.map.itemInfo).then(w.hitch(this,function(h){this._layerInfosObj=h;this._initLoading();this._initConfiguration();this._initLayerSelector();this._initDownloadTab();this._attachComponentEvents()}))},_attachComponentEvents:function(){this.own(a(this.drawToolCheckBox,"change",w.hitch(this,function(h){h?D.remove(this.selectDrawToolFieldSet,
"esriCTHidden"):D.add(this.selectDrawToolFieldSet,"esriCTHidden")})))},getConfig:function(){if(l(".esriCTFieldError",this.addLayerTableNode).length!==l(".esriCTFieldError \x3e .esriCTHidden",this.addLayerTableNode).length)return this._showErrorMsgforInvalidFields(),!1;var h=this._downloadTab.getExtractDataTaskURL();if(this._validateConfigForCheckBoxes()&&this._validateConfigForInputFields(this.aoiToolsSection,this.nls.errorMsg.textboxFieldsEmptyErrorMsg,"analysis")&&this._validateConfigForInputFields(this.toleranceSection,
this.nls.errorMsg.invalidSearchToleranceErrorMsg,"analysis")&&this._validateConfigForInputFields(this.tabLabelsSection,this.nls.errorMsg.textboxFieldsEmptyErrorMsg,"general")&&this._validateConfigForBufferDistanceFields(this.bufferSettingsSection,this.nls.errorMsg.bufferDistanceFieldsErrorMsg)&&this._validateGPTaskDownloadOption(h)&&this._validateLayers()&&this._validateMaxFeatureCount()&&this._validateCustomOptions()&&this._validateDrawTools()){var r=this._searchSourceSettings.getConfig();if(!r||
0===r.sources.length)return this._errorMessage(this.nls.searchSourceSetting.invalidSearchSources,this.nls.searchSourceSetting.searchSourceSettingTabTitle),!1;var H=this.placeNameTextBox.get("value");this.config.placenameButtonText=t.stripHTML(H?H:"");this.config.showPlacenameWidget=this.placeNameCheckBox.checked;this.config.showDrawToolsWidget=this.drawToolCheckBox.checked;this.config.showShapefileWidget=this.uploadShapefileCheckBox.checked;this.config.showCoordinatesWidget=this.coordinatesCheckBox.checked;
this.config.allowShapefilesUpload=this.allowUploadShapefileCheckBox.checked;this.config.allowVisibleLayerAnalysisOnly=this.allowVisibleLayerAnalysisCheckBox.checked;H=this.aoiTabTextBox.get("value");this.config.aoiTabText=t.stripHTML(H?H:"");H=this.reportsTabTextBox.get("value");this.config.reportTabText=t.stripHTML(H?H:"");H=this.drawToolTextBox.get("value");this.config.drawToolsButtonText=t.stripHTML(H?H:"");H=this.uploadShapeFileTextBox.get("value");this.config.shapefileButtonText=t.stripHTML(H?
H:"");H=this.coordinatesTextBox.get("value");this.config.coordinatesButtonText=t.stripHTML(H?H:"");this.config.traverseUnit=this.traverseUnitsNode.get("value");this.config.traverseDirectionUnit=this.traverseDirectionUnitsNode.get("value");this.config.maxFeaturesForAnalysis=this.maxFeatureCountTextBox.get("value");this.config.areaUnits=this.areaUnitsDropDown.get("value");this.config.lengthUnits=this.lengthUnitsDropDown.get("value");this.config.defaultBufferDistance=this.defaultBufferDistanceTextBox.get("value");
this.config.defaultBufferUnit=this.defaultBufferUnitsNode.get("value");this.config.searchTolerance=this.searchToleranceTextBox.get("value");this.config.placenameSymbology=this._symbolParams;this.config.coordinatesSymbology=this._symbolParams;this.config.shapefileSymbology=this._symbolParams;this.config.drawToolSymbology=this._symbolParams;this.config.aoiSymbol=this._symbolParams.aoiSymbol;this.config.layers=this._getSelectedLayers(!1);this.config.searchSourceSettings=r;this.config.downloadSettings=
{type:l("input[type\x3dradio]:checked",this.downloadTabNode)[0].value,layers:this._downloadTab.getLayers(),extractDataTaskURL:h,downloadingFileOptions:this._downloadTab.getDownloadingFileOptions()};this.config.reportSettings={printTaskURL:this._downloadTab.getPrintReportGPServiceURL(),footnote:this._downloadTab.getFootnoteForReport(),logo:this._downloadTab.getLogo(),columnTitleColor:this._downloadTab.getTableHeaderColor(),reportTitle:this._downloadTab.getReportTitle(),noDataConfiguredText:this._downloadTab.getNoDataText(),
naTextConfiguredValue:this._downloadTab.getNaTextValue(),customOptions:this._downloadTab.getCustomOptions(),defaultPrintOption:this._downloadTab.getDefaultPrintOption(),displaySummaryInReport:this._downloadTab.getDisplaySummaryCheckBoxStatus(),hideZeroValueRow:this._downloadTab.getRowshavingAllZeroValueCheckBoxStatus(),hideNullValueRow:this._downloadTab.getRowshavingAllNullValueCheckBoxStatus()};this.config.drawToolSelectableLayers=this._getDrawToolSelectableLayers();this.pointSelectToolCheckBox&&
(this.config.showPointTool=this.pointSelectToolCheckBox.checked);this.polylineSelectToolCheckBox&&(this.config.showPolylineTool=this.polylineSelectToolCheckBox.checked);this.extentSelectToolCheckBox&&(this.config.showExtentTool=this.extentSelectToolCheckBox.checked);this.polygonSelectToolCheckBox&&(this.config.showPolygonTool=this.polygonSelectToolCheckBox.checked);this.circleSelectToolCheckBox&&(this.config.showCircleTool=this.circleSelectToolCheckBox.checked);return this.config}return!1},_getDrawToolSelectableLayers:function(){var h=
[];var r=this._selectLayerTable.getRows();c.forEach(r,w.hitch(this,function(H){H=this._selectLayerTable.getRowData(H);H.selectable&&h.push(H.selectableLayerID)}));return h},_validateLayers:function(){var h=!0;0===this._getSelectedLayers(!1).length&&(h=!1,this._errorMessage(this.nls.errorMsg.noLayerSelected,this.nls.analysisTab.analysisTabLabel));return h},_validateDuplicateLabelsForFields:function(h){var r=!0,H=[],M;for(M in h){H=[];for(var P in h)h[M]===h[P]&&H.push({label:P,item:h[M]});if(1<H.length)break}this._showDuplicateLabelsErrorMessage(H)||
(r=!1);return r},_showDuplicateLabelsErrorMessage:function(h){if(1<h.length){var r="";c.forEach(h,w.hitch(this,function(H,M){r+=H.label;M<h.length-1&&(r+=",")}));this._errorMessage(C.substitute(this.nls.errorMsg.duplicateFieldsLabels,{labelText:h[0].item,itemNames:r}),this.nls.analysisTab.analysisTabLabel);return!1}return!0},_initConfiguration:function(){this._symbolParams={};this.defaultBufferDistanceTextBox.constraints={min:0};this.defaultBufferDistanceTextBox.validator=w.hitch(this,function(){return this._numberValidator(this.defaultBufferDistanceTextBox)});
this.maxFeatureCountTextBox.constraints={min:1,places:0};this.searchToleranceTextBox.constraints={min:0};this.searchToleranceTextBox.intermediateChanges=!0;var h=[{node:this.pointSymbolNode,symbolType:"point",geometryType:"esriGeometryPoint",title:this.nls.generalTab.pointSymbolChooserPopupTitle},{node:this.lineSymbolNode,symbolType:"polyline",geometryType:"esriGeometryLine",title:this.nls.generalTab.lineSymbolChooserPopupTitle},{node:this.polygonSymbolNode,symbolType:"polygon",geometryType:"esriGeometryPolygon",
title:this.nls.generalTab.polygonSymbolChooserPopupTitle},{node:this.aoiSymbolNode,symbolType:"aoiSymbol",geometryType:"esriGeometryPolygon",title:this.nls.generalTab.aoiSymbolChooserPopupTitle}];this._initTabs();this._enableDisableAOIToolsTextBox();c.forEach(h,w.hitch(this,function(r){this._createSymbolPicker(r.node,r.symbolType,r.geometryType,r.title)}));a(this.lengthUnitsDropDown,"change",w.hitch(this,function(r){this._displaySearchTolerance(r)}));this.searchToleranceTextBox.validator=w.hitch(this,
function(){return this._numberValidator(this.searchToleranceTextBox)})},_numberValidator:function(h){h=h.get("value");return isNaN(h)?!1:!0},_initTabs:function(){var h={title:this.nls.analysisTab.analysisTabLabel,content:this.analysisTabNode};var r={title:this.nls.downloadTab.downloadTabLabel,content:this.downloadTabNode};this._configurationTabsContainer=new K({tabs:[h,r,{title:this.nls.generalTab.generalTabLabel,content:this.generalTabNode},{title:this.nls.searchSourceSetting.searchSourceSettingTabTitle,
content:this.searchSourceTabNode}]},this.tabContainer);this.own(a(this._configurationTabsContainer,"tabChanged",w.hitch(this,function(){this._configurationTabsContainer.containerNode.scrollTop=0})));this.own(a(this._configurationTabsContainer.containerNode,"scroll",w.hitch(this,function(){var H=this._addLayerTable.getRows();c.forEach(H,w.hitch(this,function(M){M.layerSelector&&M.layerSelector.hideLayerChooser()}));this._searchSourceSettings&&this._searchSourceSettings._currentSourceSetting&&this._searchSourceSettings._currentSourceSetting.displayField&&
this._searchSourceSettings._currentSourceSetting.displayField.closeDropDown();this.traverseUnitsNode.closeDropDown();this.traverseDirectionUnitsNode.closeDropDown();this.areaUnitsDropDown.closeDropDown();this.lengthUnitsDropDown.closeDropDown();this.defaultBufferUnitsNode.closeDropDown();this._downloadTab.closeDownloadTabDropdowns()})));this._configurationTabsContainer.startup();t.has("chrome")&&D.add(this._configurationTabsContainer.containerNode,"esriRTLTabContainerNode")},_initLoading:function(){this.loading=
new B({hidden:!0});var h=b(".widget-setting-popup")[0];this.loading.placeAt(h);this.loading.startup()},_createSearchSourceSettings:function(){var h={};this.config&&this.config.hasOwnProperty("searchSourceSettings")&&(h=this.config.searchSourceSettings);this._searchSourceSettings=new z({nls:this.nls,map:this.map,appConfig:this.appConfig,shelter:this.loading,config:h},q.create("div",{},this.searchSourceTabNode));this.own(a(this._searchSourceSettings,"invalid-source-setting",w.hitch(this,function(){this._errorMessage(this.nls.searchSourceSetting.invalidSearchSources,
this.nls.searchSourceSetting.searchSourceSettingTabTitle)})))},setConfig:function(){if(this.config){this.config.aoiTabText?this.aoiTabTextBox.set("value",this.config.aoiTabText):this.aoiTabTextBox.set("value",this.nls.generalTab.aoiTabText);this.config.reportTabText?this.reportsTabTextBox.set("value",this.config.reportTabText):this.reportsTabTextBox.set("value",this.nls.generalTab.reportTabText);this.config.placenameButtonText?this.placeNameTextBox.set("value",this.config.placenameButtonText):this.placeNameTextBox.set("value",
this.nls.analysisTab.placenameButtonText);this.config.drawToolsButtonText?this.drawToolTextBox.set("value",this.config.drawToolsButtonText):this.drawToolTextBox.set("value",this.nls.analysisTab.drawToolsButtonText);this.config.shapefileButtonText?this.uploadShapeFileTextBox.set("value",this.config.shapefileButtonText):this.uploadShapeFileTextBox.set("value",this.nls.analysisTab.shapefileButtonText);this.config.coordinatesButtonText?this.coordinatesTextBox.set("value",this.config.coordinatesButtonText):
this.coordinatesTextBox.set("value",this.nls.analysisTab.coordinatesButtonText);(this.config.defaultBufferDistance||0===this.config.defaultBufferDistance)&&this.defaultBufferDistanceTextBox.set("value",this.config.defaultBufferDistance);this.config.traverseUnit&&this._setDropDownSavedOptionSelected(this.traverseUnitsNode,this.config.traverseUnit);this.config.traverseDirectionUnit&&this._setDropDownSavedOptionSelected(this.traverseDirectionUnitsNode,this.config.traverseDirectionUnit);this.config.areaUnits&&
("Standard"===this.config.areaUnits||"Metric"===this.config.areaUnits||"Feet"===this.config.areaUnits||"Miles"===this.config.areaUnits||"Meters"===this.config.areaUnits||"Kilometers"===this.config.areaUnits||"Hectares"===this.config.areaUnits?(this._setBackwardCompatibilityAreaUnit(this.areaUnitsDropDown,this.config.areaUnits),this.config.hasOwnProperty("lengthUnits")||this._setBackwardCompatibilityLengthUnit(this.lengthUnitsDropDown,this.config.areaUnits)):this._setDropDownSavedOptionSelected(this.areaUnitsDropDown,
this.config.areaUnits));this.config.lengthUnits&&this._setDropDownSavedOptionSelected(this.lengthUnitsDropDown,this.config.lengthUnits);this.config.maxFeaturesForAnalysis&&this.maxFeatureCountTextBox.set("value",this.config.maxFeaturesForAnalysis);this.config.defaultBufferUnit&&this._setDropDownSavedOptionSelected(this.defaultBufferUnitsNode,this.config.defaultBufferUnit);(this.config.searchTolerance||0===this.config.searchTolerance)&&this.searchToleranceTextBox.set("value",this.config.searchTolerance);
this.config.hasOwnProperty("lengthUnits")?this._displaySearchTolerance(this.lengthUnitsDropDown.get("value")):this._displaySearchTolerance(this.areaUnitsDropDown.get("value"));this.placeNameCheckBox.setValue(this.config.showPlacenameWidget);this.drawToolCheckBox.setValue(this.config.showDrawToolsWidget);this.drawToolCheckBox.checked?D.remove(this.selectDrawToolFieldSet,"esriCTHidden"):D.add(this.selectDrawToolFieldSet,"esriCTHidden");this.uploadShapefileCheckBox.setValue(this.config.showShapefileWidget);
this.coordinatesCheckBox.setValue(this.config.showCoordinatesWidget);this.allowUploadShapefileCheckBox.setValue(this.config.allowShapefilesUpload);this.allowVisibleLayerAnalysisCheckBox.setValue(this.config.allowVisibleLayerAnalysisOnly);if(this._addLayerTable&&this.config.layers){this._addLayerTable.clear();for(var h=0;h<this.config.layers.length;h++)this._populateLayerTableRow(this.config.layers[h],!1)}this._createSearchSourceSettings();this.config.hasOwnProperty("showPointTool")&&this.pointSelectToolCheckBox.setValue(this.config.showPointTool);
this.config.hasOwnProperty("showPolylineTool")&&this.polylineSelectToolCheckBox.setValue(this.config.showPolylineTool);this.config.hasOwnProperty("showExtentTool")&&this.extentSelectToolCheckBox.setValue(this.config.showExtentTool);this.config.hasOwnProperty("showPolygonTool")&&this.polygonSelectToolCheckBox.setValue(this.config.showPolygonTool);this.config.hasOwnProperty("showCircleTool")?this.circleSelectToolCheckBox.setValue(this.config.showCircleTool):this.circleSelectToolCheckBox.setValue("false")}},
_displaySearchTolerance:function(h){this.searchToleranceLabel.innerHTML="Feet"===h||"Miles"===h?this.nls.analysisTab.searchToleranceLabelText+" ("+this.nls.units.feet+")":"Meters"===h||"Kilometers"===h||"Hectares"===h?this.nls.analysisTab.searchToleranceLabelText+" ("+this.nls.units.meters+")":this.nls.analysisTab.searchToleranceLabelText},_onEditLayerClicked:function(h){var r=h.layerInfo;this._curRow=h;h.layerSelector&&h.layerSelector.hideLayerChooser();r||(r={selectedFields:null},h.layerInfo=r);
r.layerLabel=h.labelText.value;h.layerSelector.getSelectedItem()&&(h.layerSelector.getSelectedItem().name&&(r.layerName=h.layerSelector.getSelectedItem().name),h.layerSelector.getSelectedItem().layerInfo&&(r.layer=h.layerSelector.getSelectedItem().layerInfo));r={nls:this.nls,featureLayer:r.layer.layerObject,selectedFields:h.selectedFields,groupbyfieldCheckBoxStatus:h.groupbyfieldCheckBoxStatus,layerGridInfo:r,layerInfo:this._layerInfosObj.getLayerInfoById(r.layer.layerObject.id)};this._createFieldSelectorPopup(r,
h)},_createFieldSelectorPopup:function(h,r){var H=!0;var M=h.layerGridInfo.selectedFields;var P=new L(h);var y=q.create("button",{title:this.nls.common.ok});y.label=this.nls.common.ok;var G=q.create("button",{title:this.nls.common.cancel});G.label=this.nls.common.cancel;var R=new m({titleLabel:this.nls.analysisTab.addFieldsPopupTitle+": "+r.layerSelector.getSelectedItem().name,content:P,width:830,height:500,autoHeight:!0,buttons:[y,G]});y.onClick=w.hitch(this,function(){var T={};H=!0;var U=P.okButtonClicked();
this._curRow.selectedFields=U.selectedFields;this._curRow.groupbyfieldCheckBoxStatus=U.groupbyfieldCheckBoxStatus;this._validateFields(this._curRow.selectedFields,this._curRow);for(var Y in this._curRow.selectedFields)""!==this._curRow.selectedFields[Y].label.trim()&&(T[this._curRow.selectedFields[Y].alias]=this._curRow.selectedFields[Y].label.trim());(H=this._validateDuplicateLabelsForFields(T))?(this._curRow=null,P.destroy(),P=null,R.close()):this._curRow.selectedFields=h.layerGridInfo.selectedFields=
M});G.onClick=w.hitch(this,function(){this._curRow=null;P.destroy();P=null;R.close()})},_enableDisableAOIToolsTextBox:function(){this.own(a(this.placeNameCheckBox,"change",w.hitch(this,function(h){h?this.placeNameTextBox.set("disabled",!1):this.placeNameTextBox.set("disabled",!0)})));this.own(a(this.drawToolCheckBox,"change",w.hitch(this,function(h){h?this.drawToolTextBox.set("disabled",!1):this.drawToolTextBox.set("disabled",!0)})));this.own(a(this.uploadShapefileCheckBox,"change",w.hitch(this,function(h){h?
this.uploadShapeFileTextBox.set("disabled",!1):this.uploadShapeFileTextBox.set("disabled",!0)})));this.own(a(this.coordinatesCheckBox,"change",w.hitch(this,function(h){h?(this.coordinatesTextBox.set("disabled",!1),this.traverseUnitsNode.set("disabled",!1),this.traverseDirectionUnitsNode.set("disabled",!1)):(this.coordinatesTextBox.set("disabled",!0),this.traverseUnitsNode.set("disabled",!0),this.traverseDirectionUnitsNode.set("disabled",!0))})))},_setBackwardCompatibilityAreaUnit:function(h,r){switch(r){case "Standard":r=
"Acres";h.set("value","Acres");break;case "Metric":r="SquareKilometers";h.set("value","SquareKilometers");break;case "Feet":r="SquareFeet";h.set("value","SquareFeet");break;case "Miles":r="Acres";h.set("value","Acres");break;case "Meters":r="SquareMeters";h.set("value","SquareMeters");break;case "Kilometers":r="SquareKilometers";h.set("value","SquareKilometers");break;case "Hectares":r="Hectares",h.set("value","Hectares")}c.forEach(h.options,w.hitch(this,function(H){H.selected=H.value===r?"selected":
!1}))},_setBackwardCompatibilityLengthUnit:function(h,r){switch(r){case "Standard":r="Miles";h.set("value","Miles");break;case "Metric":r="Kilometers";h.set("value","Kilometers");break;case "Feet":r="Feet";h.set("value","Feet");break;case "Miles":r="Miles";h.set("value","Miles");break;case "Meters":r="Meters";h.set("value","Meters");break;case "Kilometers":r="Kilometers";h.set("value","Kilometers");break;case "Hectares":r="Kilometers",h.set("value","Kilometers")}c.forEach(h.options,w.hitch(this,function(H){H.selected=
H.value===r?"selected":!1}))},_setDropDownSavedOptionSelected:function(h,r){h.setValue(r);c.forEach(h.options,w.hitch(this,function(H){H.selected=H.value===r?"selected":!1}))},_validateConfigForInputFields:function(h,r,H){var M=!0;c.some(l(".esriCTTextBox",h),w.hitch(this,function(P){if(u.byNode(P)&&!u.byNode(P).disabled&&!u.byNode(P).isValid())return"analysis"===H?this._errorMessage(r,this.nls.analysisTab.analysisTabLabel):this._errorMessage(r,this.nls.generalTab.generalTabLabel),M=!1,!0}));return M},
_validateConfigForBufferDistanceFields:function(h,r){var H=!0;c.some(l(".esriCTTextBox",h),w.hitch(this,function(M){if(u.byNode(M)&&(!u.byNode(M).isValid()||isNaN(u.byNode(M).get("value"))))return this._errorMessage(r,this.nls.generalTab.generalTabLabel),H=!1,!0}));return H},_validateConfigForCheckBoxes:function(){var h=!1;c.some(l(".esriCTCheckBox",this.aoiToolsSection),w.hitch(this,function(r){if(u.byNode(r).checked)return h=!0}));h||this._errorMessage(this.nls.errorMsg.atLeastOneCheckboxCheckedErrorMsg,
this.nls.analysisTab.analysisTabLabel);return h},_errorMessage:function(h,r){(new I({message:h,buttons:[{label:this.nls.common.ok}]})).message=h;this._configurationTabsContainer&&r&&this._configurationTabsContainer.getSelectedTitle()!==r&&this._configurationTabsContainer.selectTab(r)},_createSymbolPicker:function(h,r,H,M){var P={};if(H){P.type=f.getSymbolTypeByGeometryType(H);P.symbol=this.config&&this.config.placenameSymbology[r]?k.fromJson(this.config.placenameSymbology[r]):k.fromJson(this.config.aoiSymbol);
var y=this._createPreviewContainer(h,!1);var G={symbolChooserTitle:M,symbolParams:P,symbolType:r,nls:this.nls};this._showSelectedSymbol(y,P.symbol,r);this.own(a(y,"click",w.hitch(this,function(){P.symbol=k.fromJson(this._symbolParams[r]);this._initSymbolChooserPopup(G,y)})))}return y},_createPreviewContainer:function(h,r){r?(h=q.create("table",{cellspacing:"0",cellpadding:"0"},h),h=q.create("tr",{"class":"esriCTTRPreviewText"},h),r=q.create("td",{},h),q.create("div",{innerHTML:this.nls.generalTab.previewLabel,
"class":"esriCTSymbolPreviewText"},r),h=q.create("td",{},h),h=q.create("div",{"class":"esriCTSymbolChooserNode"},h)):h=q.create("div",{"class":"esriCTSymbolChooserNode"},h);return h},_initSymbolChooserPopup:function(h,r){var H=new F(h);H.onOkClick=w.hitch(this,function(){var M;H.symbolChooser.getValidSymbol?(M=H.symbolChooser.getValidSymbol())?(this._showSelectedSymbol(r,M,h.symbolType),H.popup.close()):this._errorMessage(this.nls.generalTab.invalidSymbolValue):(M=H.symbolChooser.getSymbol(),this._showSelectedSymbol(r,
M,h.symbolType),H.popup.close())})},_showSelectedSymbol:function(h,r,H){q.empty(h);if(r){var M=n.createSymbolNode(r);M||(M=q.create("div"));q.place(M,h);this._symbolParams[H]=r.toJson()}},_initDownloadTab:function(){this._downloadTab=new d({map:this.map,downloadOptions:this.config.downloadSettings,reportSettings:this.config.reportSettings,loadingIndicator:this.loading,nls:this.nls,appConfig:this.appConfig,folderUrl:this.folderUrl,layerInfosObj:this._layerInfosObj});this._downloadTab.placeAt(this.downloadTabNode)},
_setDownloadInfo:function(h){var r;if(this._downloadTab&&(r=this._getLayerInfo(h,!0))){var H=v({url:r.url+"?f\x3dpjson"});H.then(w.hitch(this,function(M){r.capabilities=M.capabilities;this._downloadTab.checkLayerForDownloadOptions(r,h.rowIndex)}))}},_removeDownloadInfo:function(h){this._downloadTab&&this._downloadTab.deleteRow(h)},_validateGPTaskDownloadOption:function(h){return"extractDataTask"===l("input[type\x3dradio]:checked",this.downloadTabNode)[0].value&&""===h?(this._errorMessage(this.nls.downloadTab.errorMessages.noExtractDataTaskURL,
this.nls.downloadTab.downloadTabLabel),!1):!0},_getSelectedLayers:function(h){var r,H=[];var M=this._addLayerTable.getRows();c.forEach(M,w.hitch(this,function(P){P.layerSelector&&(r=this._getLayerInfo(P,h),r.selectedFields=P.selectedFields,r.groupbyfieldCheckBoxStatus=P.groupbyfieldCheckBoxStatus,H.push(r))}));return H},_getLayerInfo:function(h,r){var H;if(H=h.layerSelector.getSelectedItem()){var M={url:H.layerInfo.layerObject.url,geometryType:H.layerInfo.layerObject.geometryType,id:H.layerInfo.id,
label:t.stripHTML(h.labelText&&h.labelText.value?h.labelText.value.trim():""),layerName:H.layerInfo.title,layerVersion:H.layerInfo.layerObject.version};r&&(M.capabilities=H.layerInfo.layerObject.capabilities);h.layerInfo&&h.layerInfo.selectedFields&&(M.selectedFields=h.layerInfo.selectedFields);M.layerId=H.layerId?H.layerId:M.url.substr(M.url.lastIndexOf("/")+1,M.url.length);h=M.url.substr(0,M.url.lastIndexOf("/")+1);M.baseURL=h}return M},_createLayerChooserMapArgs:function(){return{multiple:!1,createMapResponse:this.map.webMapResponse,
filter:N.createFeaturelayerFilter([],!1,!1)}},_initLayerSelector:function(){this.loading.show();this._idsOfSelectedLayers=[];this._totalLayers=[];var h=this._createLayerChooserMapArgs();this._layerChooserFromMap=new N(h);this._layerChooserFromMap.startup();h=this._layerChooserFromMap.layerInfosObj.getLayerInfoArray();var r=[];this._getAllFilteredLayers(h,r);S(r).then(w.hitch(this,function(){this.loading.hide();0<this._totalLayers.length?D.remove(this.btnAddLayer,"esriCTDisabled"):(D.add(this.btnAddLayer,
"esriCTDisabled"),D.remove(this.lblNoValidLayers,"esriCTHidden"));this._createAddLayerGrid();this._createSelectLayerGrid();this.setConfig(this.config);this.own(a(this.btnAddLayer,"click",w.hitch(this,this._addLayerButtonClicked)));this._populateSelectableLayer()}))},_getAllFilteredLayers:function(h,r){c.forEach(h,w.hitch(this,function(H){if(H.isLeaf()){var M=new Q;this._layerChooserFromMap.filter(H).then(w.hitch(this,function(P){P&&this._totalLayers.push(H);M.resolve()}));r.push(M)}else this._getAllFilteredLayers(H.newSubLayers,
r)}))},_captureAddLayerTableEvents:function(){var h,r,H;this.own(a(this._addLayerTable,"actions-edit",w.hitch(this,this._onEditLayerClicked)));this.own(a(this._addLayerTable,"row-up",w.hitch(this,function(M){h=this._idsOfSelectedLayers[M.rowIndex];r=this._idsOfSelectedLayers[M.rowIndex+1];this._idsOfSelectedLayers.splice(M.rowIndex,2,r,h);this._downloadTab&&this._downloadTab.rowUp(M.rowIndex)})));this.own(a(this._addLayerTable,"row-down",w.hitch(this,function(M){H=this._idsOfSelectedLayers[M.rowIndex];
r=this._idsOfSelectedLayers[M.rowIndex-1];this._idsOfSelectedLayers.splice(M.rowIndex-1,2,H,r);this._downloadTab&&this._downloadTab.rowDown(M.rowIndex)})));this._addLayerTable.onBeforeRowDelete=w.hitch(this,this._deleteLayer)},_createAddLayerGrid:function(){this._addLayerTable=new A({fields:[{name:"field",title:this.nls.analysisTab.addLayerNameTitle,type:"empty",editable:"true",width:"200px"},{name:"field",title:this.nls.common.label,type:"empty",editable:"true",width:"200px"},{name:"actions",title:this.nls.common.actions,
width:"80px",type:"actions",actions:["up","down","edit","delete"]}],selectable:!1});this._addLayerTable.placeAt(this.addLayerTableNode);this._captureAddLayerTableEvents();this._addLayerTable.startup()},_createSelectLayerGrid:function(){this._selectLayerTable=new A({fields:[{name:"selectable",title:"",type:"checkbox","class":"isSelectable",width:"5%",editable:!0,hidden:!1},{name:"selectableLayerName",title:this.nls.analysisTab.addLayerNameTitle,type:"text",editable:!1,width:"95%",hidden:!1},{name:"selectableLayerID",
title:"",type:"text",editable:!1,width:"0%",hidden:!0}],selectable:!1});this._selectLayerTable.placeAt(this.drawToolSelectableLayerContainer);this._selectLayerTable.startup()},_populateSelectableLayer:function(){c.forEach(this._totalLayers,w.hitch(this,function(h){var r=!0;this.config&&this.config.hasOwnProperty("drawToolSelectableLayers")&&(r=!1,-1<this.config.drawToolSelectableLayers.indexOf(h.id)&&(r=!0));this._selectLayerTable.addRow({selectable:r,selectableLayerName:h.title,selectableLayerID:h.id})}))},
_addLayerLabel:function(h,r){var H=l(".simple-table-cell",h)[1];D.add(H,"esriCTLayerInputCell");var M=new g({"class":"esriCTLayerLabelTextBox"});M.placeAt(H);M.startup();h.labelText=M;r&&h.labelText.set("value",r)},_populateLayerTableRow:function(h,r){var H;var M=this._addLayerTable.addRow({});if(M.success&&M.tr){M=M.tr;var P=h.selectedFields;if(!P){P={};if(H=h.getPopupInfo())var y=H.fieldInfos;var G=h.layerObject.fields;c.forEach(y,w.hitch(this,function(R){R.visible&&R.fieldName.toLowerCase()!==
h.layerObject.objectIdField.toLowerCase()&&(c.forEach(G,w.hitch(this,function(T){R.fieldName===T.name&&(R=w.clone(R),R.label=null,P[R.fieldName]=R)})),!P.hasOwnProperty(R.fieldName)&&H&&H.expressionInfos&&c.forEach(H.expressionInfos,w.hitch(this,function(T){T=w.clone(T);T.name="expression/"+T.name;R.fieldName===T.name&&(P[R.fieldName]=T,P[R.fieldName].alias=T.title+" {"+T.name+"}")})))}));0===Object.keys(P).length&&(P=null)}this._validateFields(P,M);M.layerInfo=h;M.selectedFields=P;M.groupbyfieldCheckBoxStatus=
h.groupbyfieldCheckBoxStatus;this._addLayerLabel(M,h.label);this._addLayerDropDown(M,h,r)}},_validateFields:function(h,r){var H;(H=l(".simple-table-cell",r)[2])&&!h?(r.errorDiv||(r.errorDiv=q.create("div",{"class":"esriCTFieldError"},H),r.errorSpan=q.create("span",{"class":"jimu-icon jimu-icon-error",title:this.nls.errorMsg.noFieldSelected},r.errorDiv)),D.remove(r.errorSpan,"esriCTHidden")):this._enableOk(r)},_enableOk:function(h){h&&h.errorSpan&&(D.add(h.errorSpan,"esriCTHidden"),l(".esriCTFieldError",
this.addLayerTableNode).length===l(".esriCTFieldError \x3e .esriCTHidden",this.addLayerTableNode).length&&(h=b(".button-container")[0],p.set(h.children[2],"display","inline-block"),p.set(h.children[3],"display","none")))},_addLayerButtonClicked:function(){if(!D.contains(this.btnAddLayer,"esriCTDisabled")){this.loading.show();var h=this._pickUnusedLayer();this._populateLayerTableRow(h[0],!0)}},_pickUnusedLayer:function(){return this._idsOfSelectedLayers.length<this._totalLayers.length?c.filter(this._totalLayers,
w.hitch(this,function(h){return 0>this._idsOfSelectedLayers.indexOf(h.id)})):this._totalLayers},_addLayerDropDown:function(h,r,H){h.layerSelector&&h.layerSelector.destroy();var M=this._createLayerChooserMapArgs();var P=new N(M);P.startup();var y=l(".simple-table-cell",h)[0];D.add(y,"esriCTLayerInputCell");P=new O({layerChooser:P});P.placeAt(y);P.startup();h.layerSelector=P;if(r&&(P.setSelectedLayer(r),this._addLayer(h,r,H),M.createMapResponse.errors&&M.createMapResponse.errors[0]&&M.createMapResponse.errors[0].name&&
"Error"===M.createMapResponse.errors[0].name&&null===P.getSelectedItem())){for(H=0;H<this.config.downloadSettings.layers.length;H++)if(r.url===this.config.downloadSettings.layers[H].url){this.config.downloadSettings.layers.splice(H,1);break}this._deleteLayer(h);this._addLayerTable.deleteRow(h)}this.own(a(P,"selection-change",w.hitch(this,function(G){G&&0<G.length&&G[0]&&G[0].hasOwnProperty("id")?h.layerInfo&&G[0].id!==h.layerInfo.id&&(this._updateLayer(h,G),h.layerInfo=G[0]):(this._errorMessage(this.nls.errorMsg.errorInSelectingLayer),
this._deleteLayer(h),this._addLayerTable.deleteRow(h))})))},_addLayer:function(h,r,H){r&&r.hasOwnProperty("id")&&(this._idsOfSelectedLayers.push(r.id),H&&this._setDownloadInfo(h))},_updateLayer:function(h,r){this.loading.show();this._idsOfSelectedLayers[h.rowIndex]=r[0].id;this._setDownloadInfo(h);var H=this._layerInfosObj.getLayerInfoById(r[0].id);var M={};if(r=H.getPopupInfo())var P=r.fieldInfos;var y=H.layerObject.fields;c.forEach(P,w.hitch(this,function(G){G.visible&&G.fieldName.toLowerCase()!==
H.layerObject.objectIdField.toLowerCase()&&c.forEach(y,w.hitch(this,function(R){G.fieldName===R.name&&(G=w.clone(G),G.label=null,M[G.fieldName]=G)}))}));0===Object.keys(M).length&&(M=null);h.selectedFields=M;this._validateFields(h.selectedFields,h);this.loading.hide()},_deleteLayer:function(h){this.loading.show();h.layerSelector&&h.layerSelector.destroy();this._removeDownloadInfo(h.rowIndex);this._idsOfSelectedLayers.splice(h.rowIndex,1);D.remove(this.btnAddLayer,"esriCTDisabled");this._enableOk(h);
this.loading.hide();return!0},_validateMaxFeatureCount:function(){if(0<this.maxFeatureCountTextBox.get("value")&&this.maxFeatureCountTextBox.isValid())return!0;this._errorMessage(this.nls.errorMsg.errorInMaxFeatureCount,this.nls.analysisTab.analysisTabLabel);return!1},_showErrorMsgforInvalidFields:function(){var h=this._addLayerTable.getRows();for(var r in h){var H=h[r];var M=b(".esriCTFieldError",H);var P=b(".esriCTFieldError \x3e .esriCTHidden",H);if(M.length!==P.length){this._errorMessage(this.nls.analysisTab.invalidLayerErrorMsg+
" "+H.layerSelector.getSelectedItem().name,this.nls.analysisTab.analysisTabLabel);break}}},_validateCustomOptions:function(){var h=this._downloadTab.validateCustomOptions();return 0<h.length?(this._errorMessage(h[0],this.nls.downloadTab.downloadTabLabel),!1):!0},_validateDrawTools:function(){return!this.drawToolCheckBox.checked||this.pointSelectToolCheckBox.checked||this.polylineSelectToolCheckBox.checked||this.extentSelectToolCheckBox.checked||this.polygonSelectToolCheckBox.checked||this.circleSelectToolCheckBox.checked||
0!==this._getDrawToolSelectableLayers().length?!0:(this._errorMessage(this.nls.analysisTab.selectingDrawToolErrorMessage,this.nls.analysisTab.analysisTabLabel),!1)}})});