// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/FeatureSetChooserForMultipleLayers":function(){define("dojo/on dojo/sniff dojo/mouse dojo/query dojo/Evented dojo/_base/html dojo/_base/lang dojo/_base/array dojo/promise/all dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeatureSetChooserForMultipleLayers.html dijit/popup dijit/TooltipDialog jimu/utils jimu/dijit/DrawBox jimu/dijit/_FeatureSetChooserCore jimu/SelectionManager jimu/dijit/FeatureActionPopupMenu".split(" "),
function(q,c,r,f,l,g,h,u,A,B,H,E,C,F,n,t,x,d,p,w,z){return B([H,E,C,l],{baseClass:"jimu-multiple-layers-featureset-chooser",declaredClass:"jimu.dijit.FeatureSetChooserForMultipleLayers",templateString:F,drawBox:null,_instances:null,_tooltipDialogTimeoutId1:-1,_tooltipDialogClientX1:-1,_tooltipDialogTimeoutId2:-1,_tooltipDialogClientX2:-1,_tooltipTimeout:1E3,_currentGeoTypeInfo:null,_geoTypeInfos:null,map:null,updateSelection:!1,fullyWithin:!1,geoTypes:null,actions:null,postMixInProperties:function(){this.inherited(arguments);
this.nls=window.jimuNls.featureSetChooser;var a="POINT EXTENT POLYGON CIRCLE POLYLINE FREEHAND_POLYGON".split(" ");this.geoTypes&&0<this.geoTypes.length&&(this.geoTypes=u.filter(this.geoTypes,h.hitch(this,function(m){return 0<=a.indexOf(m)})));this.geoTypes&&0!==this.geoTypes.length||(this.geoTypes=["EXTENT"])},postCreate:function(){this.inherited(arguments);this._instances=[];this.popupMenu=z.getInstance();f(".select-text",this.domNode)[0].innerHTML=this.nls.select;f(".clear-text",this.domNode)[0].innerHTML=
window.jimuNls.common.clear;this._initTooltipDialogs();this._initDrawBox();this._geoTypeInfos=[];this.actions=[];0===this.geoTypes.length&&this.geoTypes.push("EXTENT");1===this.geoTypes.length?g.addClass(this.domNode,"single-geotype"):g.addClass(this.domNode,"multiple-geotypes");var a={POINT:["icon-select-by-point",this.nls.selectByPoint,this.drawBox.pointIcon],EXTENT:["icon-select-by-rect",this.nls.selectByRectangle,this.drawBox.extentIcon],POLYGON:["icon-select-by-polygon",this.nls.selectByPolygon,
this.drawBox.polygonIcon],CIRCLE:["icon-select-by-circle",this.nls.selectByCircle,this.drawBox.circleIcon],POLYLINE:["icon-select-by-line",this.nls.selectByLine,this.drawBox.polylineIcon],FREEHAND_POLYGON:["icon-select-by-freehand-polygon",this.nls.selectByFreehandPolygon,this.drawBox.freehandPolygonIcon]},m=-1;u.forEach("POINT EXTENT POLYGON CIRCLE POLYLINE FREEHAND_POLYGON".split(" "),h.hitch(this,function(b){var e=a[b];if(0<=this.geoTypes.indexOf(b)){var k={geoType:b,action:{iconClass:e[0],label:e[1],
data:{}},dom:e[2]};e={iconClass:e[0],label:e[1],data:{},onExecute:h.hitch(this,this._onDrawItemClicked,k)};this._geoTypeInfos.push(k);this.actions.push(e);"EXTENT"===b&&(m=this._geoTypeInfos.length-1)}}));this.own(q(this.btnSelect,"click",h.hitch(this,function(){x.simulateClickEvent(this._currentGeoTypeInfo.dom);this._hideDrawItems()})));0<=m?(this._setCurrentGeoInfo(this._geoTypeInfos[m]),g.addClass(this.geoTypeIcon,"icon-select-by-rect")):(this._setCurrentGeoInfo(this._geoTypeInfos[0]),g.addClass(this.geoTypeIcon,
this._geoTypeInfos[0].action.iconClass));this.deactivate()},_initTooltipDialogs:function(){var a=c("mac")?"\u2318":"Ctrl",m="- "+this.nls.newSelectionTip+" ("+this.nls.dragMouse+")",b="- "+this.nls.addSelectionTip+" (Shift+"+this.nls.dragBox+")",e="- "+this.nls.removeSelectionTip+" ("+a+"+"+this.nls.dragBox+")",k="- "+this.nls.newSelectionTip+" ("+this.nls.drawShap+")",v="- "+this.nls.addSelectionTip+" (Shift+"+this.nls.darw+")",y="- "+this.nls.removeSelectionTip+" ("+a+"+"+this.nls.darw+")";a=g.create("div",
{innerHTML:'\x3cdiv class\x3d"title"\x3e\x3c/div\x3e\x3cdiv class\x3d"item new-selection-item"\x3e\x3c/div\x3e\x3cdiv class\x3d"item add-selection-item"\x3e\x3c/div\x3e\x3cdiv class\x3d"item remove-selection-item"\x3e\x3c/div\x3e',"class":"dialog-content"});var D=f(".title",a)[0],I=f(".new-selection-item",a)[0],J=f(".add-selection-item",a)[0],K=f(".remove-selection-item",a)[0];this.tooltipDialog1=new t({content:a});g.addClass(this.tooltipDialog1.domNode,"jimu-multiple-layers-featureset-chooser-tooltipdialog");
this.own(q(this.btnSelect,"mousemove",h.hitch(this,function(G){this._tooltipDialogClientX1=G.clientX})));this.own(q(this.btnSelect,r.enter,h.hitch(this,function(){clearTimeout(this._tooltipDialogTimeoutId1);this._tooltipDialogTimeoutId1=-1;this._tooltipDialogTimeoutId1=setTimeout(h.hitch(this,function(){if(this.tooltipDialog1){var G=this._currentGeoTypeInfo.geoType;"EXTENT"===G?(I.innerHTML=m,J.innerHTML=b,K.innerHTML=e,D.innerHTML=this.nls.selectByRectangle):(I.innerHTML=k,J.innerHTML=v,K.innerHTML=
y,"POLYGON"===G?D.innerHTML=this.nls.selectByPolygon:"CIRCLE"===G?D.innerHTML=this.nls.selectByCircle:"POLYLINE"===G?D.innerHTML=this.nls.selectByLine:"FREEHAND_POLYGON"===G?D.innerHTML=this.nls.selectByFreehandPolygon:"POINT"===G&&(D.innerHTML=this.nls.selectByPoint));n.open({parent:this.getParent(),popup:this.tooltipDialog1,around:this.btnSelect,position:["below"]});0<=this._tooltipDialogClientX1&&(this.tooltipDialog1.domNode.parentNode.style.left=this._tooltipDialogClientX1+"px")}}),this._tooltipTimeout)})));
this.own(q(this.btnSelect,r.leave,h.hitch(this,function(){clearTimeout(this._tooltipDialogTimeoutId1);this._tooltipDialogTimeoutId1=-1;this._hideTooltipDialog(this.tooltipDialog1)})));a=g.create("div",{innerHTML:this.nls.unselectAllSelectionTip,"class":"dialog-content"});this.tooltipDialog2=new t({content:a});g.addClass(this.tooltipDialog2.domNode,"jimu-multiple-layers-featureset-chooser-tooltipdialog");this.own(q(this.btnClear,"mousemove",h.hitch(this,function(G){this._tooltipDialogClientX2=G.clientX})));
this.own(q(this.btnClear,r.enter,h.hitch(this,function(){clearTimeout(this._tooltipDialogTimeoutId2);this._tooltipDialogTimeoutId2=-1;this._tooltipDialogTimeoutId2=setTimeout(h.hitch(this,function(){this.tooltipDialog2&&(n.open({parent:this.getParent(),popup:this.tooltipDialog2,around:this.btnClear,position:["below"]}),0<=this._tooltipDialogClientX2&&(this.tooltipDialog2.domNode.parentNode.style.left=this._tooltipDialogClientX2+"px"))}),this._tooltipTimeout)})));this.own(q(this.btnClear,r.leave,h.hitch(this,
function(){clearTimeout(this._tooltipDialogTimeoutId2);this._tooltipDialogTimeoutId2=-1;this._hideTooltipDialog(this.tooltipDialog2)})))},_onArrowClicked:function(a){a.stopPropagation();a=g.position(a.target);this._showDrawItems(a)},_setCurrentGeoInfo:function(a){var m=this._currentGeoTypeInfo&&this._currentGeoTypeInfo.geoType;this._currentGeoTypeInfo&&g.removeClass(this.currentDrawItem,this._currentGeoTypeInfo.geoType);this._currentGeoTypeInfo=a;g.addClass(this.currentDrawItem,this._currentGeoTypeInfo.geoType);
this.isActive()?m!==this._currentGeoTypeInfo.geoType&&x.simulateClickEvent(this._currentGeoTypeInfo.dom):x.simulateClickEvent(this._currentGeoTypeInfo.dom)},_showDrawItems:function(a){this.popupMenu.setActions(this.actions);this.popupMenu.markAsSelected(this._currentGeoTypeInfo.action);this.popupMenu.show(a)},_hideDrawItems:function(){this.popupMenu.hide()},_onDrawItemClicked:function(a){this._hideDrawItems();this._setCurrentGeoInfo(a);g.removeClass(this.geoTypeIcon,"icon-select-by-point icon-select-by-circle icon-select-by-rect icon-select-by-polygon icon-select-by-line icon-select-by-freehand-polygon".split(" "));
switch(a.geoType){case "POLYGON":g.addClass(this.geoTypeIcon,"icon-select-by-polygon");break;case "CIRCLE":g.addClass(this.geoTypeIcon,"icon-select-by-circle");break;case "POLYLINE":g.addClass(this.geoTypeIcon,"icon-select-by-line");break;case "FREEHAND_POLYGON":g.addClass(this.geoTypeIcon,"icon-select-by-freehand-polygon");break;case "POINT":g.addClass(this.geoTypeIcon,"icon-select-by-point");break;default:g.addClass(this.geoTypeIcon,"icon-select-by-rect")}},_initDrawBox:function(){this.drawBox=
new d({map:this.map,showClear:!0,keepOneGraphic:!0,deactivateAfterDrawing:!1,geoTypes:this.geoTypes});this.own(q(this.drawBox,"user-clear",h.hitch(this,this._onDrawBoxUserClear)));this.own(q(this.drawBox,"draw-end",h.hitch(this,this._onDrawEnd)));this.own(q(this.drawBox,"draw-activate",h.hitch(this,function(){this.map.infoWindow.hide();g.addClass(this.currentDrawItem,"pressed");g.addClass(this.btnSelect,"selected")})));this.own(q(this.drawBox,"draw-deactivate",h.hitch(this,function(){g.removeClass(this.currentDrawItem,
"pressed");g.removeClass(this.btnSelect,"selected")})));this.own(q(this.btnClear,"click",h.hitch(this,function(){x.simulateClickEvent(this.drawBox.btnClear)})))},disable:function(){this.drawBox.disable();g.addClass(this.domNode,"disabled")},enable:function(){this.drawBox.enable();g.removeClass(this.domNode,"disabled")},isActive:function(){return this.drawBox.isActive()},activate:function(){if(!this.isActive()){var a=this._currentGeoTypeInfo;a||(a=this._geoTypeInfos[0]);this._setCurrentGeoInfo(a)}},
deactivate:function(){this.drawBox.deactivate()},setFeatureLayers:function(a){var m=u.filter(this._instances,h.hitch(this,function(e){return 0>a.indexOf(e.featureLayer)}));u.forEach(m,h.hitch(this,function(e){this._removeInstance(e)}));var b=u.map(this._instances,h.hitch(this,function(e){return e.featureLayer}));u.forEach(a,h.hitch(this,function(e){0>b.indexOf(e)&&this.addFeatureLayer(e)}))},addFeatureLayer:function(a){"esri.layers.FeatureLayer"!==a.declaredClass||this._findInstanceByLayer(a)||(a=
new p({map:this.map,featureLayer:a,drawBox:this.drawBox,updateSelection:this.updateSelection,fullyWithin:this.fullyWithin}),this._instances.push(a))},removeFeatureLayer:function(a){"esri.layers.FeatureLayer"===a.declaredClass&&(a=this._findInstanceByLayer(a))&&this._removeInstance(a)},setDisplayLayerVisibility:function(a,m){(a=w.getInstance().getDisplayLayer(a.id))&&(m?a.show():a.hide())},_removeInstance:function(a){if(a){var m=this._instances.indexOf(a);0<=m&&(a.destroy(),this._instances.splice(m,
1))}},_findInstanceByLayer:function(a){var m=null;u.some(this._instances,h.hitch(this,function(b){return b.featureLayer===a?(m=b,!0):!1}));return m},clear:function(a){u.forEach(this._instances,h.hitch(this,function(m){m.clear(a)}))},destroy:function(){this._hideTooltipDialog(this.tooltipDialog1);this._hideTooltipDialog(this.tooltipDialog2);u.forEach(this._instances,h.hitch(this,function(a){a.destroy()}));this._instances=[];this.drawBox&&this.drawBox.destroy();this.drawBox=null;this.inherited(arguments)},
_hideTooltipDialog:function(a){a&&n.close(a)},_onDrawBoxUserClear:function(){this.clear(!0);this.emit("user-clear")},_onDrawEnd:function(a,m,b,e,k,v){this.drawBox.clear();0<this._instances.length&&setTimeout(h.hitch(this,function(){if(0<this._instances.length){this.emit("loading");this.disable();var y=u.map(this._instances,h.hitch(this,function(D){return D.getFeatures()}));A(y).always(h.hitch(this,function(){this.enable();this._currentGeoTypeInfo&&x.simulateClickEvent(this._currentGeoTypeInfo.dom);
this.emit("unloading",a,m,b,e,k,v)}))}}),50)}})})},"jimu/dijit/_FeatureSetChooserCore":function(){define("dojo/on dojo/sniff dojo/Evented dojo/Deferred dojo/_base/lang dojo/_base/array dojo/_base/declare jimu/utils jimu/symbolUtils jimu/SelectionManager jimu/LayerInfos/LayerInfos esri/graphic esri/tasks/query esri/tasks/QueryTask esri/layers/FeatureLayer esri/symbols/jsonUtils esri/geometry/geometryEngine".split(" "),function(q,c,r,f,l,g,h,u,A,B,H,E,C,F,n,t,x){return h([r],{baseClass:"jimu-featureset-chooser-core",
_middleFeatureLayer:null,_isLoading:!1,_def:null,_isDestroyed:!1,_handles:null,selectionManager:null,layerInfosObj:null,layerInfo:null,map:null,featureLayer:null,drawBox:null,updateSelection:!1,fullyWithin:!1,constructor:function(d){l.mixin(this,d);this.layerInfosObj=H.getInstanceSync();this.selectionManager=B.getInstance();this.featureLayer.getSelectionSymbol()||this.selectionManager.setSelectionSymbol(this.featureLayer);d=u.getFeatureLayerDefinition(this.featureLayer);delete d.id;this._middleFeatureLayer=
new n({layerDefinition:d,featureSet:null},{id:"featureLayer_"+u.getRandomString()});d=null;var p=this._middleFeatureLayer.geometryType;"esriGeometryPoint"===p?d=A.getDefaultMarkerSymbol():"esriGeometryPolyline"===p?d=A.getDefaultLineSymbol():"esriGeometryPolygon"===p&&(d=t.fromJson({style:"esriSFSSolid",color:[79,129,189,77],type:"esriSFS",outline:{style:"esriSLSSolid",color:[54,93,141,255],width:1.5,type:"esriSLS"}}));this._middleFeatureLayer.setSelectionSymbol(d);d=q(this.drawBox,"user-clear",l.hitch(this,
this._onDrawBoxUserClear));p=q(this.drawBox,"draw-end",l.hitch(this,this._onDrawEnd));this._handles=[d,p];if(this.layerInfo=this.layerInfosObj.getLayerInfoById(this.featureLayer.id))d=q(this.layerInfo,"filterChanged",l.hitch(this,this._handleFilterChange)),this._handles.push(d)},hideMiddleFeatureLayer:function(){if(this._middleFeatureLayer){this._middleFeatureLayer.hide();var d=this.selectionManager.getDisplayLayer(this._middleFeatureLayer.id);d&&d.hide()}},showMiddleFeatureLayer:function(){if(this._middleFeatureLayer){this._middleFeatureLayer.show();
var d=this.selectionManager.getDisplayLayer(this._middleFeatureLayer.id);d&&d.show()}},clear:function(d){this.drawBox.clear();this._clearMiddleFeatureLayer();d&&this.selectionManager.clearSelection(this.featureLayer)},getFeatures:function(){var d=new f,p=l.hitch(this,function(){var z=this.syncGetFeatures();d.resolve(z)}),w=l.hitch(this,function(z){d.reject(z)});1===this._getDeferredStatus(this._def)?this._def.then(p,w):p();return d},syncGetFeatures:function(){return(this.updateSelection?this.featureLayer:
this._middleFeatureLayer).getSelectedFeatures()},isLoading:function(){return 1===this._getDeferredStatus(this._def)},_onLoading:function(){this.drawBox.deactivate();this.emit("loading")},_onUnloading:function(){this.emit("unloading")},_getDeferredStatus:function(d){var p=0;return p=d?d.isResolved()?2:d.isRejected()?-1:1:0},_onDrawEnd:function(d,p,w,z,a,m){if(this.isLoading())throw"should not draw when loading";if(this.featureLayer.visible){var b=new f;this._def=b;var e=n.SELECTION_NEW;z&&(e=n.SELECTION_ADD);
c("mac")?m&&(e=n.SELECTION_SUBTRACT):a&&(e=n.SELECTION_SUBTRACT);this.emit("loading");this._getFeaturesByGeometry(d.geometry).then(l.hitch(this,function(k){this.selectionManager.updateSelectionByFeatures(this.updateSelection?this.featureLayer:this._middleFeatureLayer,k,e);this._onUnloading();b.resolve(k)}),l.hitch(this,function(k){console.error(k);this._onUnloading();b.reject(k)}))}},_addTolerance:function(d){var p=2.54*this.map.getScale()/9600;return x.buffer(d,10*p,"meters")},_getFeaturesByGeometry:function(d){"point"!==
d.type&&"polyline"!==d.type||"esriGeometryPoint"!==this.featureLayer.geometryType||(d=this._addTolerance(d));var p=new f,w=[];if(this.featureLayer.getMap()&&this.featureLayer.mode!==n.MODE_SELECTION)d=this.selectionManager.getClientFeaturesByGeometry(this.featureLayer,d,this.fullyWithin),0<d.length&&(w=g.map(d,l.hitch(this,function(a){return new E(a.toJson())}))),p.resolve(w);else{w=new C;w.geometry=d;w.outSpatialReference=this.map.spatialReference;w.returnGeometry=!0;w.spatialRelationship=this.fullyWithin?
C.SPATIAL_REL_CONTAINS:C.SPATIAL_REL_INTERSECTS;(d=this.featureLayer.getDefinitionExpression())||(d="1\x3d1");if(this.layerInfo){var z=this.layerInfo.getFilter();z&&(d="("+d+") AND ("+z+")")}d&&(w.where=d);w.outFields=["*"];(new F(this.featureLayer.url)).execute(w).then(l.hitch(this,function(a){p.resolve(a.features)}),l.hitch(this,function(a){p.reject(a)}))}return p},_onDrawBoxUserClear:function(){this.clear()},_clearMiddleFeatureLayer:function(){this._middleFeatureLayer&&(this._middleFeatureLayer.clear(),
this.selectionManager.clearSelection(this._middleFeatureLayer))},_handleFilterChange:function(){var d=this.layerInfo.getFilter()||"1\x3d1",p=this.featureLayer.getSelectedFeatures(),w=this.featureLayer.objectIdField;if(p&&0<p.length){var z=g.map(p,function(m){return m.attributes[w]}),a=new C;a.where=w+" in ("+z.join(",")+") AND "+d;(new F(this.featureLayer.url)).executeForIds(a).then(l.hitch(this,function(m){g.forEach(p,function(b){0<=m.indexOf(b.attributes[w])?b.show():b.hide()});this.selectionManager._isLayerNeedDisplayLayer(this.featureLayer)&&
this.selectionManager._updateDisplayLayer(this.featureLayer,p,n.SELECTION_NEW);this.featureLayer.emit("selection-complete",{features:this.featureLayer.getSelectedFeatures()})}),l.hitch(this,function(m){console.error(m)}))}},destroy:function(){this._isDestroyed||(g.forEach(this._handles,l.hitch(this,function(d){d.remove()})),this._handles=null,this.clear());this._isDestroyed=!0}})})},"widgets/Select/layerUtil":function(){define(["dojo/_base/array","dojo/promise/all","dojo/Deferred"],function(q,c,r){return{getLayerInfoArray:function(f){var l=
new r,g=[];f.traversal(function(h){g.push(h)});f=q.map(g,function(h){return h.getLayerType()});c(f).then(function(h){var u=[];q.forEach(h,function(A,B){"FeatureLayer"===A&&u.push(g[B])});l.resolve(u)});return l}}})},"widgets/Select/SelectableLayerItem":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/event dojo/_base/array dojo/on dojo/Evented dojo/dom-geometry jimu/utils jimu/dijit/FeatureActionPopupMenu dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SelectableLayerItem.html ./ClearSelectionAction".split(" "),
function(q,c,r,f,l,g,h,u,A,B,H,E,C,F,n){return q([H,E,C,h],{baseClass:"selectable-layer-item",templateString:F,layerName:"layer",layerVisible:!0,checked:!1,allowExport:!1,inited:!1,postCreate:function(){this.inherited(arguments);this.popupMenu=B.getInstance()},init:function(t){this.featureLayer=t;t=this._filteredSelection().length;this.layerName=this.layerInfo.title||"layer";this.selectedCountNode.innerHTML=t;0<t?c.removeClass(this.domNode,"no-action"):c.addClass(this.domNode,"no-action");this.own(g(this.featureLayer,
"selection-complete",r.hitch(this,function(){var x=this._filteredSelection().length;this.selectedCountNode.innerHTML=x;0===x?c.addClass(this.domNode,"no-action"):c.removeClass(this.domNode,"no-action")})));this.own(g(this.featureLayer,"selection-clear",r.hitch(this,function(){this.selectedCountNode.innerHTML=0;c.addClass(this.domNode,"no-action")})));this.layerNameNode.innerHTML=A.sanitizeHTML(this.layerName);this.layerNameNode.title=this.layerName;this.layerVisible||c.addClass(this.domNode,"invisible");
this.checked?c.addClass(this.selectableCheckBox,"checked"):c.removeClass(this.selectableCheckBox,"checked");this.own(g(this.selectableCheckBox,"click",r.hitch(this,this._toggleChecked)));this.own(g(this.layerContent,"click",r.hitch(this,this._toggleContent)));this.own(g(this.actionBtn,"click",r.hitch(this,this._showActions)));this.inited=!0;this.emit("inited")},isLayerVisible:function(){return this.layerVisible},isChecked:function(){return this.checked},updateLayerVisibility:function(){var t=this.layerInfo.isShowInMap()&&
this.layerInfo.isInScale();t!==this.layerVisible&&((this.layerVisible=t)?c.removeClass(this.domNode,"invisible"):c.addClass(this.domNode,"invisible"),this.emit("stateChange",{visible:this.layerVisible,layerInfo:this.layerInfo,featureLayer:this.featureLayer}))},turnOn:function(){c.addClass(this.selectableCheckBox,"checked");this.checked=!0},turnOff:function(){c.removeClass(this.selectableCheckBox,"checked");this.checked=!1},toggleChecked:function(){(this.checked=!this.checked)?c.addClass(this.selectableCheckBox,
"checked"):c.removeClass(this.selectableCheckBox,"checked")},_toggleChecked:function(t){f.stop(t);c.toggleClass(this.selectableCheckBox,"checked");this.checked=c.hasClass(this.selectableCheckBox,"checked");this.emit("stateChange",{checked:this.checked,layerInfo:this.layerInfo})},_toggleContent:function(t){f.stop(t);c.hasClass(this.domNode,"no-action")||this.emit("switchToDetails",this)},_showActions:function(t){f.stop(t);if(!c.hasClass(this.domNode,"no-action")){var x=this._filteredSelection(),d=
A.toFeatureSet(x);this.popupMenu.prepareActions(d,this.allowExport).then(r.hitch(this,function(){var p=u.position(t.target);0<x.length&&this.popupMenu.appendAction(new n({folderUrl:this.folderUrl,data:this.featureLayer}));this.popupMenu.show(p,this.nls.actionsTitle)}))}},_filteredSelection:function(){var t=this.featureLayer.getSelectedFeatures()||[];return l.filter(t,function(x){return x.visible})}})})},"widgets/Select/ClearSelectionAction":function(){define(["dojo/_base/declare","jimu/BaseFeatureAction",
"jimu/SelectionManager"],function(q,c,r){return q(c,{name:"ClearSelection",iconClass:"icon-clear-selection",constructor:function(){this.label=window.jimuNls.featureActions.ClearSelection},isFeatureSupported:function(f){return 0<f.features.length&&f.geometryType},onExecute:function(f){r.getInstance().clearSelection(f)},getIcon:function(f){return this.folderUrl+"images/"+this.name+"_"+f+"."+this.iconFormat}})})},"widgets/Select/FeatureItem":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/event dojo/on dojo/dom-geometry dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./FeatureItem.html jimu/utils jimu/symbolUtils jimu/dijit/FeatureActionPopupMenu jimu/featureActions/PanTo jimu/featureActions/ShowPopup".split(" "),
function(q,c,r,f,l,g,h,u,A,B,H,E,C,F){return q([h,u],{baseClass:"graphic-item",templateString:A,allowExport:!1,postCreate:function(){this.inherited(arguments);if(this.featureLayer&&this.featureLayer.renderer&&this.featureLayer.renderer.getSymbol)var n=this.featureLayer.renderer.getSymbol(this.graphic);else this.graphic.symbol&&(n=this.graphic.symbol);n&&(n=H.createSymbolNode(n,{width:36,height:36}),r.place(n,this.iconNode));this.popupMenu=E.getInstance();n=this.featureLayer&&this.featureLayer.infoTemplate&&
"function"===typeof this.featureLayer.infoTemplate.title?this.featureLayer.infoTemplate.title(this.graphic):this.graphic.attributes[this.displayField]||this.graphic.attributes[this.objectIdField];this.nameNode.innerHTML=B.sanitizeHTML(n);this.nameNode.title=n;this.own(l(this.actionBtn,"click",c.hitch(this,this._showActions)));this.own(l(this.iconNode,"click",c.hitch(this,this._highlight)));this.own(l(this.nameNode,"click",c.hitch(this,this._highlight)))},_highlight:function(){var n=B.toFeatureSet([this.graphic]),
t=new C({map:this.map});(new F({map:this.map})).onExecute(n);t.onExecute(n)},_showActions:function(n){f.stop(n);var t=B.toFeatureSet([this.graphic]);this.popupMenu.prepareActions(t,this.allowExport).then(c.hitch(this,function(){var x=g.position(n.target);this.popupMenu.show(x)}))}})})},"widgets/Select/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/FeatureSetChooserForMultipleLayers.html":'\x3cdiv class\x3d"jimu-not-selectable"\x3e\r\n  \x3cdiv class\x3d"draw-item-btn" tabindex\x3d"0"\x3e\r\n    \x3cdiv class\x3d"current-draw-item" data-dojo-attach-point\x3d"currentDrawItem"\x3e\r\n      \x3cdiv class\x3d"btn-select" data-dojo-attach-point\x3d"btnSelect"\x3e\r\n        \x3cdiv class\x3d"labels"\x3e\r\n            \x3cdiv class\x3d"feature-action" data-dojo-attach-point\x3d"geoTypeIcon"\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"select-text"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"arrow feature-action icon-drop-down" data-dojo-attach-event\x3d"click:_onArrowClicked"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"btn-clear" data-dojo-attach-point\x3d"btnClear" tabindex\x3d"0"\x3e\r\n    \x3cdiv class\x3d"feature-action icon-clear-selection"\x3e\x3c/div\x3e\x3cdiv class\x3d"clear-text"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Select/SelectableLayerItem.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"layer-row" data-dojo-attach-point\x3d"layerContent"\x3e\r\n    \x3cdiv class\x3d"selectable-check" title\x3d"${nls.toggleSelectability}"\r\n         data-dojo-attach-point\x3d"selectableCheckBox"\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"selected-num" data-dojo-attach-point\x3d"selectedCountNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"feature-action icon-more" title\x3d"${nls.showActions}"\r\n    data-dojo-attach-point\x3d"actionBtn"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Select/FeatureItem.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"feature-item-row"\x3e\r\n    \x3cdiv class\x3d"feature-icon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"light-label label-node jimu-ellipsis" data-dojo-attach-point\x3d"nameNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"action-btn feature-action icon-more" title\x3d"${nls.showActions}"\r\n     data-dojo-attach-point\x3d"actionBtn"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/Select/Widget.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"layer-node" data-dojo-attach-point\x3d"layerListNode"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cdiv class\x3d"select-dijit-container" data-dojo-attach-point\x3d"selectDijitNode"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"seperator"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"tool-section"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading label"\x3e${nls.layer}\x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing setting feature-action icon-operation" data-dojo-attach-point\x3d"settingNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"layer-nodes" \x3e\r\n      \x3cdiv class\x3d"layer-items" data-dojo-attach-point\x3d"layerItemsNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"details-node" data-dojo-attach-point\x3d"detailsNode"\x3e\r\n    \x3cdiv class\x3d"header"\x3e\r\n      \x3cdiv class\x3d"switch-back jimu-float-leading" data-dojo-attach-point\x3d"switchBackBtn"\x3e\r\n        \x3cdiv class\x3d"feature-action" data-dojo-attach-point\x3d"switchBackIcon"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"selectedLayerName"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"content" data-dojo-attach-point\x3d"featureContent"\x3e\r\n\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Select/css/style.css":'.jimu-widget-select {width: 100%; height: 100%; min-width: 280px; overflow: hidden;}.jimu-widget-select .jimu-viewstack {height: 100%;}.jimu-widget-select .jimu-viewstack .view {position: relative;}.jimu-widget-select .tool-section {height: 36px; position: relative;}.jimu-widget-select .tool-section .label {font-size: 14px; line-height: 36px; margin: 0 10px;}.jimu-widget-select .tool-section .setting {width: 16px; height: 16px; margin: 10px; cursor: pointer;}.jimu-widget-select .selectable-check {width: 36px; height: 36px; cursor: pointer; background: url(images/unchecked.svg) no-repeat center;}.jimu-widget-select .selectable-check:hover {background: url(images/unchecked_hover.svg) no-repeat center;}.jimu-widget-select .selectable-check.checked {background: url(images/checked.svg) no-repeat center;}.jimu-widget-select .selectable-check.checked:hover {background: url(images/checked_hover.svg) no-repeat center;}.jimu-widget-select .seperator {width: 100%; height: 1px; background: #D7D7D7; margin-top: 20px;}.jimu-widget-select .title {font-family: "Avenir Light"; font-size: 12px; line-height: 16px; color: #000000; margin: 20px 0;}.jimu-widget-select .normal-label, .jimu-widget-select .light-label, .jimu-widget-select .selectable-layer-item .layer-row .layer-name, .jimu-widget-select .selectable-layer-item .layer-row .selected-num, .jimu-widget-select .medium-label {line-height: 36px; height: 36px; font-size: 12px; color: #000000;}.jimu-widget-select .light-label, .jimu-widget-select .selectable-layer-item .layer-row .layer-name, .jimu-widget-select .selectable-layer-item .layer-row .selected-num {font-family: "Avenir Light";}.jimu-widget-select .medium-label {font-family: "Avenir Medium";}.jimu-widget-select .layer-nodes {position: absolute; top: 100px; bottom: 0; width: 100%; overflow: auto;}.jimu-widget-select .jimu-multiple-layers-featureset-chooser .draw-item {padding: 0;}.jimu-widget-select .jimu-multiple-layers-featureset-chooser .btn-clear {padding: 0; width: 30%;}.jimu-rtl .jimu-widget-select .jimu-multiple-layers-featureset-chooser .btn-clear {float: left;}.jimu-widget-select .selectable-layer-item {width: 100%; height: 36px; position: relative;}.jimu-widget-select .selectable-layer-item .layer-row {height: 36px; position: relative; cursor: pointer;}.jimu-widget-select .selectable-layer-item .layer-row \x3e div {display: inline-block;}.jimu-widget-select .selectable-layer-item .layer-row .layer-name {margin: 0 5px; position: absolute; left: 36px; right: 72px;}.jimu-rtl .jimu-widget-select .selectable-layer-item .layer-row .layer-name {left: 72px; right: 36px;}.jimu-widget-select .selectable-layer-item .layer-row .selected-num {width: 36px; margin: 0 5px; text-align: center; position: absolute; right: 36px;}.jimu-rtl .jimu-widget-select .selectable-layer-item .layer-row .selected-num {right: auto; left: 36px;}.jimu-widget-select .selectable-layer-item .layer-row .feature-action {position: absolute; right: 0; width: 36px; height: 36px; padding: 10px;}.jimu-rtl .jimu-widget-select .selectable-layer-item .layer-row .feature-action {right: auto; left: 0;}.jimu-widget-select .selectable-layer-item:hover {background-color: #E5E5E5;}.jimu-widget-select .selectable-layer-item:hover .selected-num {font-weight: bold;}.jimu-widget-select .selectable-layer-item.no-action .selected-num {font-weight: normal;}.jimu-widget-select .selectable-layer-item.no-action:hover {background-color: #FFFFFF;}.jimu-widget-select .selectable-layer-item.no-action .layer-row {cursor: default;}.jimu-widget-select .selectable-layer-item.no-action .layer-row .feature-action {cursor: default;}.jimu-widget-select .selectable-layer-item.no-action .layer-row .feature-action:hover {color: rgba(0, 0, 0, 0.5);}.jimu-widget-select .selectable-layer-item.no-action .selected-num {color: #B7B7B7;}.jimu-widget-select .selectable-layer-item.no-action .selected-num:hover {font-weight: normal;}.jimu-widget-select .selectable-layer-item.invisible .selectable-check {background: url(images/unchecked_invisible.svg) no-repeat center;}.jimu-widget-select .selectable-layer-item.invisible .selectable-check:hover {background: url(images/unchecked_invisible_hover.svg) no-repeat center;}.jimu-widget-select .selectable-layer-item.invisible .selectable-check.checked {background: url(images/checked_invisible.svg) no-repeat center;}.jimu-widget-select .selectable-layer-item.invisible .selectable-check.checked:hover {background: url(images/checked_invisible_hover.svg) no-repeat center;}.jimu-widget-select .selectable-layer-item.invisible .layer-name {color: #B7B7B7;}.jimu-widget-select .details-node {widows: 100%;}.jimu-widget-select .details-node .header {height: 40px; text-align: center;}.jimu-widget-select .details-node .header .switch-back {width: 40px; height: 40px;}.jimu-widget-select .details-node .header .switch-back .feature-action {margin: 12px;}.jimu-widget-select .details-node .header .layer-name {font-family: "Avenir Medium"; font-size: 14px; font-size: 14px; color: #000000; height: 40px; line-height: 40px;}.jimu-widget-select .details-node .content {position: absolute; top: 40px; bottom: 0; width: 100%; overflow: auto;}.jimu-widget-select .details-node .content .graphic-item {height: 36px; width: 100%; position: relative;}.jimu-widget-select .details-node .content .graphic-item:hover {background: #E5E5E5;}.jimu-widget-select .details-node .content .graphic-item .feature-item-row {position: relative; height: 36px; cursor: pointer;}.jimu-widget-select .details-node .content .graphic-item .feature-item-row .feature-icon {position: absolute; left: 0; width: 36px; height: 36px;}.jimu-rtl .jimu-widget-select .details-node .content .graphic-item .feature-item-row .feature-icon {left: auto; right: 0;}.jimu-widget-select .details-node .content .graphic-item .feature-item-row .action-btn {position: absolute; right: 0; padding: 10px;}.jimu-rtl .jimu-widget-select .details-node .content .graphic-item .feature-item-row .action-btn {right: auto; left: 0;}.jimu-widget-select .details-node .content .graphic-item .feature-item-row .label-node {position: absolute; left: 36px; right: 36px; margin: 0 10px;}',
"*now":function(q){q(['dojo/i18n!*preload*widgets/Select/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/promise/all dijit/_WidgetsInTemplateMixin esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleFillSymbol esri/symbols/jsonUtils esri/Color jimu/BaseWidget jimu/WidgetManager jimu/dijit/ViewStack jimu/dijit/FeatureSetChooserForMultipleLayers jimu/LayerInfos/LayerInfos jimu/SelectionManager jimu/dijit/FeatureActionPopupMenu jimu/utils ./layerUtil ./SelectableLayerItem ./FeatureItem jimu/dijit/LoadingShelter".split(" "),function(q,
c,r,f,l,g,h,u,A,B,H,E,C,F,n,t,x,d,p,w,z,a,m){return q([C,h],{baseClass:"jimu-widget-select",postMixInProperties:function(){this.inherited(arguments);c.mixin(this.nls,window.jimuNls.common)},postCreate:function(){this.inherited(arguments);var b=new E(this.config.selectionColor);this.defaultPointSymbol=new u(u.STYLE_CIRCLE,16,null,b);this.defaultLineSymbol=new A(A.STYLE_SOLID,b,2);this.defaultFillSymbol=new B(B.STYLE_SOLID,this.defaultLineSymbol,new E([b.r,b.g,b.b,.3]));this.popupMenu=p.getInstance();
this.layerMapper={};this.layerObjectArray=[];this.layerItems=[];this.selectDijit=new t({map:this.map,updateSelection:!0,fullyWithin:"wholly"===this.config.selectionMode,geoTypes:this.config.geometryTypes||["EXTENT"]});r.place(this.selectDijit.domNode,this.selectDijitNode);this.selectDijit.startup();this.own(l(this.selectDijit,"user-clear",c.hitch(this,this._clearAllSelections)));this.own(l(this.selectDijit,"loading",c.hitch(this,function(){this.shelter.show()})));this.own(l(this.selectDijit,"unloading",
c.hitch(this,function(){var k={};f.forEach(this.layerObjectArray,c.hitch(this,function(v){k[v.id]=this._getSelectedFeaturesOID(v)}));this.publishData({selectionInfo:k});this.shelter.hide()})));this.viewStack=new n({viewType:"dom",views:[this.layerListNode,this.detailsNode]});r.place(this.viewStack.domNode,this.domNode);this.own(l(this.switchBackBtn,"click",c.hitch(this,this._switchToLayerList)));window.isRTL?r.addClass(this.switchBackIcon,"icon-arrow-forward"):r.addClass(this.switchBackIcon,"icon-arrow-back");
this._switchToLayerList();var e=x.getInstanceSync();z.getLayerInfoArray(e).then(c.hitch(this,function(k){this._initLayers(this._filterLayerInfo(k))}));this.own(l(e,"layerInfosChanged",c.hitch(this,function(){this.shelter.show();z.getLayerInfoArray(e).then(c.hitch(this,function(k){this._initLayers(this._filterLayerInfo(k))}))})));this.own(l(e,"layerInfosIsShowInMapChanged",c.hitch(this,this._layerVisibilityChanged)));this.own(l(this.map,"zoom-end",c.hitch(this,this._layerVisibilityChanged)));this.own(l(this.settingNode,
"click",c.hitch(this,function(k){k.stopPropagation();k=r.position(k.target);this.showPopup(k)})))},_getSelectedFeaturesOID:function(b){var e=[];b.hasOwnProperty("objectIdField")&&f.forEach(b.getSelectedFeatures(),c.hitch(this,function(k){e.push(k.attributes[b.objectIdField])}));return e},showPopup:function(b){var e=[{iconClass:"no-icon",label:this.nls.turnonAll,data:{},onExecute:c.hitch(this,this._turnOnAllLayers)},{iconClass:"no-icon",label:this.nls.turnoffAll,data:{},onExecute:c.hitch(this,this._turnOffAllLayers)},
{iconClass:"no-icon",label:this.nls.toggleSelect,data:{},onExecute:c.hitch(this,this._toggleAllLayers)}];this.popupMenu.setActions(e);this.popupMenu.show(b)},onDeActive:function(){this.selectDijit.isActive()&&this.selectDijit.deactivate();this._restoreSelectionSymbol()},onActive:function(){this._setSelectionSymbol();!1===this.config.enableByDefault||this.selectDijit.isActive()||this.selectDijit.activate()},onOpen:function(){F.getInstance().activateWidget(this)},onDestroy:function(){this.selectDijit.isActive()&&
this.selectDijit.deactivate();this._clearAllSelections()},_filterLayerInfo:function(b){if(!this.config.layerState)return b;var e=x.getInstanceSync().getLayerInfoArrayOfWebmap();return f.filter(b,c.hitch(this,function(k){return this.config.layerState[k.id]&&!1===this.config.layerState[k.id].selected?!1!==this.config.includeRuntimeLayers?f.every(e,function(v){return k.getRootLayerInfo().id!==v.id}):!1:!0}))},_initLayers:function(b){var e={};f.forEach(this.layerItems,c.hitch(this,function(k){e[k.layerInfo.id]=
k.isChecked()}));this.layerObjectArray=[];this.layerItems=[];this.selectionSymbols={};r.empty(this.layerItemsNode);this.shelter.show();g(this._obtainLayerObjects(b)).then(c.hitch(this,function(k){f.forEach(k,c.hitch(this,function(v,y){if(v&&v.objectIdField&&v.geometryType){y=b[y];var D=y.isShowInMap()&&y.isInScale();y=new a({layerInfo:y,checked:D&&!1!==e[y.id],layerVisible:D,folderUrl:this.folderUrl,allowExport:this.config?this.config.allowExport:!1,map:this.map,nls:this.nls});this.own(l(y,"switchToDetails",
c.hitch(this,this._switchToDetails)));this.own(l(y,"stateChange",c.hitch(this,function(I){this.shelter.show();"visible"in I&&this.selectDijit.setDisplayLayerVisibility(I.featureLayer,I.visible);this.selectDijit.setFeatureLayers(this._getSelectableLayers());this.shelter.hide()})));y.init(v);r.place(y.domNode,this.layerItemsNode);y.startup();this.layerItems.push(y);this.layerObjectArray.push(v);v.getSelectionSymbol()||this._setDefaultSymbol(v);y=v.getSelectionSymbol();this.selectionSymbols[v.id]=y.toJson()}}));
this.selectDijit.setFeatureLayers(this._getSelectableLayers());this._setSelectionSymbol();this.shelter.hide()}))},_turnOffAllLayers:function(){this.shelter.show();f.forEach(this.layerItems,c.hitch(this,function(b){b.turnOff()}));this.selectDijit.setFeatureLayers([]);this.shelter.hide()},_turnOnAllLayers:function(){this.shelter.show();f.forEach(this.layerItems,c.hitch(this,function(b){b.turnOn()}));this.selectDijit.setFeatureLayers(this._getSelectableLayers());this.shelter.hide()},_toggleAllLayers:function(){this.shelter.show();
f.forEach(this.layerItems,c.hitch(this,function(b){b.toggleChecked()}));this.selectDijit.setFeatureLayers(this._getSelectableLayers());this.shelter.hide()},_setSelectionSymbol:function(){f.forEach(this.layerObjectArray,function(b){this._setDefaultSymbol(b)},this)},_setDefaultSymbol:function(b){"esriGeometryPoint"===b.geometryType||"esriGeometryMultipoint"===b.geometryType?b.setSelectionSymbol(this.defaultPointSymbol):"esriGeometryPolyline"===b.geometryType?b.setSelectionSymbol(this.defaultLineSymbol):
"esriGeometryPolygon"===b.geometryType?b.setSelectionSymbol(this.defaultFillSymbol):console.warn("unknown geometryType: "+b.geometryType)},_restoreSelectionSymbol:function(){f.forEach(this.layerObjectArray,function(b){var e=this.selectionSymbols[b.id];e&&b.setSelectionSymbol(H.fromJson(e))},this)},_layerVisibilityChanged:function(){f.forEach(this.layerItems,function(b){b.updateLayerVisibility()},this)},_getSelectableLayers:function(){var b=[];f.forEach(this.layerItems,function(e){e.isLayerVisible()&&
e.isChecked()&&b.push(e.featureLayer)},this);return b},_clearAllSelections:function(){var b=d.getInstance();f.forEach(this.layerObjectArray,function(e){b.clearSelection(e)})},_obtainLayerObjects:function(b){return f.map(b,function(e){return e.getLayerObject()})},_switchToDetails:function(b){r.empty(this.featureContent);this.viewStack.switchView(1);this.selectedLayerName.innerHTML=w.sanitizeHTML(b.layerName);this.selectedLayerName.title=b.layerName;b.layerInfo.getLayerObject().then(c.hitch(this,function(e){var k=
e.getSelectedFeatures();0<k.length&&f.forEach(k,c.hitch(this,function(v){v=new m({graphic:v,map:this.map,featureLayer:e,displayField:e.displayField,objectIdField:e.objectIdField,allowExport:this.config?this.config.allowExport:!1,nls:this.nls});r.place(v.domNode,this.featureContent);v.startup()}))}))},_switchToLayerList:function(){this.viewStack.switchView(0)}})});