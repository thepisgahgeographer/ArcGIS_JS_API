// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("dojo/_base/lang dojo/Deferred esri/geometry/webMercatorUtils esri/SpatialReference esri/geometry/coordinateFormatter esri/geometry/Point".split(" "),function(k,g,l,m,n,p){var d={};n.load();d.getProjectedGeometry=function(c,a,b){var e=new g;if(l.canProject(c,a)){var f=l.project(c,a);e.resolve(f)}else b.project([c],a,function(h){f=h[0];e.resolve(f)},function(){e.reject(null)});return e.promise};d.getMapCoordinates=function(c){switch(c.type){case "polygon":var a=c.getCentroid();break;case "polyline":a=
c.getPoint(0,0);break;case "point":a=c}return a};d.getCoordinatesData=function(c,a){var b={};var e=new g;var f=new m(4326);b.MapSpatialReference=d.getMapCoordinates(c);d.getProjectedGeometry(b.MapSpatialReference,f,a).then(k.hitch(this,function(h){b.LatLong=h;this._getMGRSCoordinatesData(e,b)}),k.hitch(this,function(){b.LatLong={x:"",y:""};b.MGRS={MGRS:""};e.resolve(b)}));return e.promise};d._getMGRSCoordinatesData=function(c,a){var b="";b=new p(a.LatLong.x,a.LatLong.y,new m({wkid:4326}));b=n.toMgrs(b,
"automatic",5);a.MGRS={MGRS:b};c.resolve(a)};d.getCoordinatesDataWhenXYEmpty=function(c){var a={},b=new g;a.MapSpatialReference={x:"",y:""};a.LatLong=c;this._getMGRSCoordinatesData(b,a);return b.promise};return d});