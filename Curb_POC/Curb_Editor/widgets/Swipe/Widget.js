// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Swipe/utils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojo/_base/html"],function(u,z,m,n){var l={defaultColor:"#dadada",handlerPosition:{top:null,bottom:null,left:null,right:null},_isNewAddedLayer:function(c,k){k=k.getLayerInfoArrayOfWebmap();for(var e=0,t=k.length;e<t;e++)if(k[e].id===c.id)return!1;return!0},zoomToCurrentLayer:function(c){var k=c.config.isZoom,e=c.layerInfosObj;c=c.getSelection();var t;c&&c[0]&&(t=c[0]);k&&t&&(k=e.getLayerInfoById(t))&&
k.zoomTo&&k.zoomTo()},shouldHideInfoWindow:function(c,k){if(!k.map.infoWindow.isShowing)return!1;var e=k.map.infoWindow.getSelectedFeature();return c&&z.some(c,function(t){var C=e&&e.getLayer&&e.getLayer(),w=k.layerInfosObj.getLayerInfoById(t.id);w=C&&w&&w.traversal(function(q){return q.id===C.id});return C===t||w},k)},getVisibleLayerInfos:function(c,k){c=c.getLayerInfoArray();if(k){for(var e=[],t=0,C=c.length;t<C;t++){var w=c[t];if(w.isShowInMap())e.push(w);else for(var q=0,A=k.length;q<A;q++)k[q]===
w.id&&e.push(w)}return e}return z.filter(c,function(B){return B.isShowInMap()})},isDefaultSelectedLayerAndInShow:function(c,k,e,t){if("mult"===t){if(e&&e.defaultLayers&&e.defaultLayers.length){c=c.value;for(var C=0,w=e.defaultLayers.length;C<w;C++)if(c===e.defaultLayers[C]&&(t=k.getLayerInfoById(c),t.isShowInMap()))return!0}}else if(e&&e.layer&&(c=c.value,c===e.layer&&(t=k.getLayerInfoById(c),t.isShowInMap())))return!0;return!1},isTherePreconfiguredLayer:function(c,k){if(k)return!0;if(c&&c.layerState){c=
c.layerState;for(var e in c)if(c.hasOwnProperty(e)&&!0===c[e].selected)return!0}return!1},processColor:function(c){return c?new m(c):new m(l.defaultColor)},getScreenMiddle:function(c){var k=0,e=0;c&&(c.root?(c=n.getMarginBox(c.root),k=c.w/2,e=c.h/2):c.width&&c.height&&(k=c.width/2,e=c.height/2));return{left:k,top:e}},hideSelectorPopup:function(c){n.addClass(c,"hide")},showSelectorPopup:function(c){n.removeClass(c,"hide")},hackToRefreshSwipe:function(c){setTimeout(u.hitch(c,function(){c.swipeDijit.swipe&&
c.swipeDijit.swipe()}),200)},cleanHandlerPosition:function(){l.handlerPosition={top:null,bottom:null,left:null,right:null}},isCacheHandlerPosition:function(){return l.handlerPosition.top||l.handlerPosition.bottom||l.handlerPosition.left||l.handlerPosition.right?!0:!1},saveHandlerPosition:function(c){c&&(l.handlerPosition.top=c.top,l.handlerPosition.bottom=c.bottom,l.handlerPosition.left=c.left,l.handlerPosition.right=c.right)},setHandlerPosition:function(c,k,e){k.style&&"scope"===k.style?(l.handlerPosition.top&&
(c.top=l.handlerPosition.top-9),l.handlerPosition.bottom&&(c.bottom=l.handlerPosition.bottom),l.handlerPosition.left&&(c.left=l.handlerPosition.left-9),l.handlerPosition.right&&(c.right=l.handlerPosition.right)):k.invertPlacement?(l.handlerPosition.right&&(c.right=l.handlerPosition.right),l.handlerPosition.left&&(c.left=l.handlerPosition.left),l.handlerPosition.bottom&&(c.bottom=l.handlerPosition.bottom),l.handlerPosition.top&&(c.top=l.handlerPosition.top)):(l.handlerPosition.right&&(c.left=l.handlerPosition.right),
l.handlerPosition.left&&(c.right=l.handlerPosition.left),l.handlerPosition.bottom&&(c.top=l.handlerPosition.bottom),l.handlerPosition.top&&(c.bottom=l.handlerPosition.top));0>c.top&&(c.top=0);c.top>e.height&&(c.top=e.height);0>c.left&&(c.left=0);c.left>e.width&&(c.left=e.width)},getLayerNode:function(c){return c._heatmapManager&&c._heatmapManager.imageLayer&&c._heatmapManager.imageLayer._div||c._div},getLayerTransform:function(c,k){var e=c.layer;c={dx:0,dy:0};if(e.getNavigationTransform)c=e.getNavigationTransform();
else if(e._getTransform){if(k=e._getTransform())c.dx=k.dx,c.dy=k.dy}else(e=l.getLayerNode(e).style)&&"css-transforms"===k.map.navigationMode&&(e=k._getTransformValue(e))&&(k=k._parseTransformValue(e),c.dx=k.x,c.dy=k.y);return c}};return l})},"widgets/Swipe/MultSelector/MultSelector":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/on jimu/utils dojo/_base/html ./a11y/MultSelector dojo/text!./MultSelector.html jimu/dijit/CheckBox dijit/form/Select dojox/form/CheckedMultiSelect dijit/form/ValidationTextBox xstyle/css!dojox/form/resources/CheckedMultiSelect.css".split(" "),
function(u,z,m,n,l,c,k,e,t,C,w){u=z([n,l,c,u],{templateString:w,_LAST_VALUEL:"",postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.a11y_initEvents();this.own(k(this.selector,"change",m.hitch(this,function(q){this._updateMultSelectorLabel(this._getOptionsLabelsByValues(q));this._LAST_VALUEL&&(this.selector.dropDownButton.toggleDropDown(),this.selector.dropDownButton.toggleDropDown());this._LAST_VALUEL.toString()!==q.toString()&&(this.selector.dropDownButton.dropDown.lastFocusedChild&&
this.selector.dropDownButton.dropDown.lastFocusedChild.domNode&&this.selector.dropDownButton.dropDown.lastFocusedChild.domNode.focus(),this.emit("change",q),this._LAST_VALUEL=q)})))},initOptions:function(q,A){this.disable();this._initMultSelectorLabel();var B=null;A&&(B=this.selector.getOptions());this.selector.removeOption(this.selector.getOptions());for(var E=[],y=0,d=q.length;y<d;y++){var f=q[y];this.selector.addOption(f);this._hasOptionMultSelected(f,A?B:q)&&E.push(f.value)}this.selector.set("value",
E);this._updateMultSelectorLabel(this._getOptionsLabelsByValues(E));this.enable()},setOptions:function(q){this.selector.set("options",q)},getOptions:function(){return this.selector.get("options")},reset:function(){this.selector.set("options",[{value:"",label:""}]);this.selector.reset()},setValue:function(q){this.setConfig(q)},setConfig:function(q){this._setMultSelectorEmpty();this.selector.set("value",q)},getConfig:function(){return this.selector.getValue()},disable:function(){this.selector.set("disabled",
!0);this._DISABLED=!0},enable:function(){this.selector.set("disabled",!1);this._DISABLED=!1},_initMultSelectorLabel:function(){this.selector.labelDiv&&(t.empty(this.selector.labelDiv),t.destroy(this.selector.labelDiv),this.selector.labelDiv=null);this.a11y_initSelectorLabel();this.selector.labelDiv=t.create("div",{"class":"dijitReset dijitInline dijitButtonText multselector-label-container",tabindex:"-1"},this.selector.dropDownButton._buttonNode,"first");t.addClass(this.selector.labelDiv,"label-max-height");
t.addClass(this.selector.dropDownMenu.domNode,"mult-selector-dropdown-max-height");this._updateMultSelectorLabel([this.nls.defaultLayerHolder])},_setMultSelectorEmpty:function(){this.selector.set("value",[]);this._updateMultSelectorLabel([this.nls.defaultLayerHolder])},_updateMultSelectorLabel:function(q){t.empty(this.selector.labelDiv);q&&0!==q.length||this._setMultSelectorEmpty();for(var A=0,B=q.length;A<B;A++)t.create("div",{"class":"dijitReset dijitButtonText multselector-label",innerHTML:e.sanitizeHTML(q[A])},
this.selector.labelDiv)},_getOptionsLabelsByValues:function(q){for(var A=this.getOptions(),B=[],E=0,y=A.length;E<y;E++)for(var d=A[E],f=0,g=q.length;f<g;f++)d.value===q[f]&&B.push(d.label);return B},_hasOptionMultSelected:function(q,A){for(var B=0,E=A.length;B<E;B++){var y=A[B];if(y.value===q.value&&!0===y.selected)return!0}return!1}});u.extend(C);return u})},"widgets/Swipe/MultSelector/a11y/MultSelector":function(){define(["dojo/_base/lang","dojo/on","dojo/query","dojo/_base/html","dijit/a11yclick"],
function(u,z,m,n,l){return{a11y_init:function(){},a11y_initEvents:function(){this.own(z(this.selector,l,u.hitch(this,function(){this.selector.dropDownButton.toggleDropDown();for(var c=m(".dijitReset.dijitMenuItemLabel",this.selector.dropDown.domNode),k=0,e=c.length;k<e;k++){var t=c[k];n.attr(t,"title",t.innerText)}})))},a11y_initSelectorLabel:function(){var c=m(".dijitButtonText",this.selector.dropDownButton.buttonNode)[0];n.addClass(c,"hide");n.addClass(this.selector.dropDownButton.buttonNode,"hide");
n.setAttr(this.selector.dropDownButton.titleNode,"tabindex",-1)}}})},"esri/dijit/LayerSwipe":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/has ../kernel dijit/_WidgetBase dijit/_TemplatedMixin dojo/on dojo/text!./templates/LayerSwipe.html dojo/i18n!../nls/jsapi dojo/dom-class dojo/dom-style dojo/dnd/move dojo/dnd/Mover dojo/sniff dojo/dom-geometry ../geometry/Point dojo/Deferred dojo/promise/all".split(" "),function(u,z,m,n,l,c,k,e,t,C,w,q,A,B,E,y,d,f,g){var r=z([B],{onFirstMove:function(a){var b=
this.node.style,h=this.host;switch(b.position){case "relative":case "absolute":var v=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute",b=y.getMarginBox(this.node),v=b.l,b=b.t}this.marginBox.l=v-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(h&&h.onFirstMove)h.onFirstMove(this,a);this.events.shift().remove()}});u=z("esri.dijit.LayerSwipe",[c,k,u],{templateString:t,options:{theme:"LayerSwipe",layers:[],enabled:!0,type:"vertical",invertPlacement:!1,
clip:9},constructor:function(a,b){a=m.mixin({},this.options,a);this.domNode=b;this._i18n=C;this.set("map",a.map);this.set("layers",a.layers);this.set("top",a.top);this.set("left",a.left);this.set("theme",a.theme);this.set("enabled",a.enabled);this.set("type",a.type);this.set("clip",a.clip);this.set("invertPlacement",a.invertPlacement);this.watch("theme",this._updateThemeWatch);this.watch("enabled",this._enabled);this.watch("type",this._type);this.watch("invertPlacement",this._invertPlacement);this._css=
{handleContainer:"handleContainer",handle:"handle"};this._listeners=[]},startup:function(){this.inherited(arguments);this.map||(this.destroy(),console.log("LayerSwipe::map required"));this.set("layers",this.layers);this.layers.length||(this.destroy(),console.log("LayerSwipe::layer required"));this._allLoaded().then(m.hitch(this,function(){this._init()}),function(a){console.log("LayerSwipe::"+a.message)})},destroy:function(){this._removeEvents();this._unclipLayers();this.inherited(arguments)},swipe:function(){this._swipe()},
enable:function(){this.set("enabled",!0)},disable:function(){this.set("enabled",!1)},_allLoaded:function(){for(var a=[],b=0;b<this.layers.length;b++){"string"===typeof this.layers[b]&&(this.layers[b]=this.map.getLayer(this.layers[b]),this.layers[b]||console.log("LayerSwipe::Could not get layer by ID"));var h=new f;this.layers[b].loaded?h.resolve("layer loaded"):this._layerLoadedPromise(b,h);a.push(h.promise)}var v=new f;if(this.map.loaded)v.resolve("map loaded");else e.once(this.map,"load",m.hitch(this,
function(){v.resolve("map loaded")}));a.push(v.promise);return g(a)},_layerLoadedPromise:function(a,b){e.once(this.layers[a],"load",function(){b.resolve("layer loaded")})},_mb:function(){var a=y.getMarginBox(this.map.root);return{t:0,l:0,w:a.l+a.w,h:a.h+a.t}},_setInitialPosition:function(){var a;var b=a=0;var h=y.getMarginBox(this._moveableNode);var v=this.get("type");var p=this.get("top");var x=this.get("left");var D=this.get("invertPlacement");"scope"===v?(b="undefined"!==typeof p?p:this.map.height/
2-h.h/2,a="undefined"!==typeof x?x:this.map.width/2-h.w/2):"horizontal"===v?(b=this.map.height/4-h.h/2,b="undefined"!==typeof p?p:D?this.map.height-b:b):(a=this.map.width/4-h.w/2,a="undefined"!==typeof x?x:D?this.map.width-a:a);q.set(this._moveableNode,{top:b+"px",left:a+"px"})},_setSwipeType:function(){var a=this.get("moveable"),b=this.get("type");b&&(a&&a.destroy(),w.add(this._moveableNode,b),a=new A.parentConstrainedMoveable(this._moveableNode,{area:"content",within:!0,handle:this._moveableNode,
constraints:m.hitch(this,this._mb),mover:r}),this.set("moveable",a),this._setInitialPosition())},_init:function(){this._setSwipeType();this._setupEvents();this._enabled();this.set("loaded",!0);this.emit("load",{});this.swipe()},_removeEvents:function(){if(this._listeners&&this._listeners.length)for(var a=0;a<this._listeners.length;a++)this._listeners[a]&&this._listeners[a].remove();this._listeners=[]},_repositionMover:function(){var a=y.getMarginBox(this._moveableNode);a&&(a.t>this.map.height||0>
a.t||a.l>this.map.width||0>a.l)&&this._setInitialPosition()},_setupEvents:function(){this._removeEvents();this._mapResize=e.pausable(this.map,"resize",m.hitch(this,function(){this._repositionMover()}));this._listeners.push(this._mapResize);this._swipeMove=e.pausable(this.moveable,"Move",m.hitch(this,function(){this.swipe()}));this._listeners.push(this._swipeMove);this._swipePanEnd=e.pausable(this.map,"pan-end",m.hitch(this,function(){this._swipe()}));this._listeners.push(this._swipePanEnd);this._mapUpdateStart=
e.pausable(this.map,"update-start",m.hitch(this,function(){this._swipe()}));this._listeners.push(this._mapUpdateStart);this._mapUpdateEnd=e.pausable(this.map,"update-end",m.hitch(this,function(){this._swipe()}));this._listeners.push(this._mapUpdateEnd);this._swipePan=e.pausable(this.map,"pan",m.hitch(this,function(){this._swipe()}));this._listeners.push(this._swipePan);this._toolClick=e.pausable(this._moveableNode,"click",m.hitch(this,function(a){if("scope"===this.get("type")){a=this._clickPosition(a);
try{if(a)this.map.onClick(a,"other")}catch(b){console.log("LayerSwipe::scope click error")}this._clickCoords=null}}));this._listeners.push(this._toolClick);this._toolDblClick=e.pausable(this._moveableNode,"dblclick",m.hitch(this,function(a){if("scope"===this.get("type")){a=this._clickPosition(a);try{if(a)this.map.navigationManager.mouseEvents.onDblClick(a,"other")}catch(b){console.log("LayerSwipe::scope dblclick error")}this._clickCoords=null}}));this._listeners.push(this._toolDblClick);this._evtCoords=
e.pausable(this.moveable,"MouseDown",m.hitch(this,function(a){"scope"===this.get("type")&&(this._clickCoords={x:a.x,y:a.y})}));this._listeners.push(this._evtCoords)},_clickPosition:function(a){if(this._clickCoords&&this._clickCoords.x===a.x&&this._clickCoords.y===a.y){var b=y.position(this.map.root,!0),h=a.pageX-b.x;b=a.pageY-b.y;a.x=h;a.y=b;a.screenPoint={x:h,y:b};a.mapPoint=this.map.toMap(new d(h,b,this.map.spatialReference));return a}return null},_getLayerNode:function(a){return a._heatmapManager&&
a._heatmapManager.imageLayer&&a._heatmapManager.imageLayer._div||a._div},_positionValues:function(a){var b={layer:a,layerNode:this._getLayerNode(a),layerGraphics:a._heatmapManager?null:a.graphics,swipeType:this.get("type"),l:0,r:0,t:0,b:0};var h=this.get("clip");var v=this.get("invertPlacement");a=y.getMarginBox(this._moveableNode);if("vertical"===b.swipeType||"horizontal"===b.swipeType){if(b.layerNode){var p=y.getMarginBox(b.layerNode);var x=Math.abs(p.t);var D=Math.abs(p.l)}var F=y.getMarginBox(this.map.root)}"vertical"===
b.swipeType?(v?p&&0<p.l?(b.l=a.l-D,b.r=this.map.width-D):p&&0>p.l?(b.l=a.l+D,b.r=this.map.width+D):(b.l=a.l,b.r=this.map.width):p&&0<p.l?(b.l=0-D,b.r=a.l-D):p&&0>p.l?(b.l=0+D,b.r=a.l+D):(b.l=0,b.r=a.l),p&&0<p.t?(b.t=0-x,b.b=F.h-x):p&&0>p.t?(b.t=0+x,b.b=F.h+x):(b.t=0,b.b=F.h)):"horizontal"===b.swipeType?(v?p&&0<p.t?(b.t=a.t-x,b.b=this.map.height-x):p&&0>p.t?(b.t=a.t+x,b.b=this.map.height+x):(b.t=a.t,b.b=this.map.height):p&&0<p.t?(b.t=0-x,b.b=a.t-x):p&&0>p.t?(b.t=0+x,b.b=a.t+x):(b.t=0,b.b=a.t),p&&0<
p.l?(b.l=0-D,b.r=F.w-D):p&&0>p.l?(b.l=0+D,b.r=F.w+D):(b.l=0,b.r=F.w)):"scope"===b.swipeType&&(b.layerGraphics?(b.l=a.l,b.r=a.w,b.t=a.t,b.b=a.h,"undefined"!==typeof h&&(b.l+=h,b.r+=-(2*h),b.t+=h,b.b+=-(2*h))):(b.l=a.l,b.r=b.l+a.w,b.t=a.t,b.b=b.t+a.h,"undefined"!==typeof h&&(b.l+=h,b.r+=-h,b.t+=h,b.b+=-h)));return b},_clipLayer:function(a){if(a.layerNode)if(a.layerGraphics){var b=a.layer.getNavigationTransform();b&&(b.hasOwnProperty("dx")&&(a.l+=-b.dx),b.hasOwnProperty("dy")&&(a.t+=-b.dy));a.layerNode.setClip({x:a.l,
y:a.t,width:a.r,height:a.b})}else if(b=a.layerNode.style,a&&b&&a.hasOwnProperty("r")&&a.hasOwnProperty("l")&&a.hasOwnProperty("t")&&a.hasOwnProperty("b"))"css-transforms"===this.map.navigationMode?b&&(b=this._getTransformValue(b))&&(b=this._parseTransformValue(b),a.l-=b.x,a.r-=b.x,a.t-=b.y,a.b-=b.y):b&&"scope"===a.swipeType&&(b=this._parseScopeStyle(b),a.l-=b.x,a.r-=b.x,a.t-=b.y,a.b-=b.y),b=E("ie"),q.set(a.layerNode,"clip",b&&8>b?"rect("+a.t+"px "+a.r+"px "+a.b+"px "+a.l+"px)":"rect("+a.t+"px, "+
a.r+"px, "+a.b+"px, "+a.l+"px)")},_swipe:function(){if(this.get("loaded")&&this.get("enabled")){var a={layers:[]};if(this.layers&&this.layers.length)for(var b=0;b<this.layers.length;b++){var h=this._positionValues(this.layers[b]);this._clipLayer(h);a.layers.push({layer:this.layers[b],left:h.l,right:h.r,top:h.t,bottom:h.b})}this.emit("swipe",a)}},_getTransformValue:function(a){var b;if(a){var h=["transform","-webkit-transform","-ms-transform","-moz-transform","-o-transform"];for(var v=0;v<h.length&&
!(b=a[h[v]]);v++){try{b=a.getPropertyValue(h[v])}catch(p){}if(b)break}}return b},_parseTransformValue:function(a){var b={x:0,y:0};-1!==a.toLowerCase().indexOf("translate3d")?a=a.replace("translate3d(","").replace(")","").replace(/px/ig,"").replace(/\s/i,"").split(","):-1!==a.toLowerCase().indexOf("translate")&&(a=a.replace("translate(","").replace(")","").replace(/px/ig,"").replace(/\s/i,"").split(","));try{b.x=parseFloat(a[0]),b.y=parseFloat(a[1])}catch(h){console.log("LayerSwipe::Error parsing transform number")}return b},
_parseScopeStyle:function(a){var b={x:0,y:0};try{b.x=parseFloat(a.left.replace(/px/ig,"").replace(/\s/i,"")),b.y=parseFloat(a.top.replace(/px/ig,"").replace(/\s/i,""))}catch(h){console.log("LayerSwipe::Error parsing div style float")}return b},_updateThemeWatch:function(a,b,h){w.remove(this.domNode,b);w.add(this.domNode,h)},_type:function(a,b){b&&w.remove(this._moveableNode,b);this._setSwipeType();this._setupEvents();this.swipe()},_pauseEvents:function(){if(this._listeners&&this._listeners.length)for(var a=
0;a<this._listeners.length;a++)this._listeners[a].pause()},_resumeEvents:function(){if(this._listeners&&this._listeners.length)for(var a=0;a<this._listeners.length;a++)this._listeners[a].resume()},_unclipLayers:function(){if(this.get("loaded")&&this.layers&&this.layers.length)for(var a=0;a<this.layers.length;a++){var b=this._getLayerNode(this.layers[a]),h=this.layers[a].graphics;b&&(h?(b.setClip&&b.setClip(null),(b=b.rawNode||b)&&b.hasOwnProperty("setAttribute")&&q.set(b,"clip","")):(h=E("ie"),q.set(b,
"clip",h&&8>h?"rect(auto auto auto auto)":"auto")))}},_invertPlacement:function(){this.swipe()},_enabled:function(){this.get("enabled")?(q.set(this.domNode,"display","block"),this._resumeEvents(),this.swipe()):(this._pauseEvents(),q.set(this.domNode,"display","none"),this._unclipLayers())}});n("extend-esri")&&m.setObject("dijit.LayerSwipe",u,l);return u})},"widgets/Swipe/a11y/Widget":function(){define(["dojo/_base/lang","dojo/on","dojo/_base/html","jimu/utils","dijit/a11yclick"],function(u,z,m,n,
l){return{a11y_init:function(){m.setAttr(this.domNode,"aria-label",this.nls._widgetLabel);this._LAST_FOCUS_NODE=null;n.initFirstFocusNode(this.domNode,this.showDetailIcon);"mult"===this._SWIPE_MODE?this.multLayersSelector.selector&&(this._LAST_FOCUS_NODE=this.multLayersSelector.selector.dropDownButton._popupStateNode):this._LAST_FOCUS_NODE=this.singleLayersContainer;this.a11y_setFocusUnfold()},a11y_setFocusUnfold:function(){n.initLastFocusNode(this.domNode,this._LAST_FOCUS_NODE)},a11y_setFocusFold:function(){n.initLastFocusNode(this.domNode,
this.showDetailIcon)},a11y_updateFocusNodes:function(c){c&&c.isFouceToFirstNode&&this.showDetailIcon.focus()},a11y_initEvents:function(){this.own(z(this.showDetailIcon,l,u.hitch(this,this._onShowDetailIconClick)))}}})},"widgets/Swipe/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Swipe/MultSelector/MultSelector.html":'\x3cdiv class\x3d"mult-selector"\x3e\r\n\t\x3cselect data-dojo-type\x3d"dojox/form/CheckedMultiSelect" multiple\x3d"true" dropDown\x3d"true"\r\n\t\tdata-dojo-attach-point\x3d"selector"\x3e\x3c/select\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/templates/LayerSwipe.html":'\x3cdiv class\x3d"${theme}" role\x3d"presentation"\x3e\r\n    \x3cdiv title\x3d"${_i18n.widgets.layerSwipe.title}" data-dojo-attach-point\x3d"_moveableNode"\x3e\r\n        \x3cdiv class\x3d"${_css.handleContainer}"\x3e\r\n            \x3cdiv class\x3d"${_css.handle}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/Swipe/Widget.html":'\x3cdiv class\x3d"jimu-widget-swipe"\x3e\r\n\t\x3cdiv class\x3d"swipe-layer-menu" data-dojo-attach-point\x3d"swipeLayersMenu"\x3e\r\n\t\t\x3cdiv class\x3d"swipe-icon jimu-float-trailing" data-dojo-attach-point\x3d"swipeIcon"\x3e\r\n\t\t\t\x3cdiv class\x3d"swipe-icon-inner" data-dojo-attach-point\x3d"swipeImg"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"titles" data-dojo-attach-point\x3d"titlesNode "\x3e\r\n\t\t\t\x3cdiv class\x3d"hint" data-dojo-attach-point\x3d"hintNode"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv class\x3d"show-detail-icon" data-dojo-attach-point\x3d"showDetailIcon" title\x3d"${nls.hideList}" tabindex\x3d"0"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"selectors" data-dojo-attach-point\x3d"selectorsContainer"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"singleLayersContainer"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"singleSelectorContainer" tabindex\x3d"0"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"multLayersContainer" class\x3d"hide mult-layers-container"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"multSelectorContainer" tabindex\x3d"0"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"layerSwipe"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Swipe/css/style.css":'.mult-selector .dojoxCheckedMultiSelect{width: 100%;}.mult-selector .label-max-height{max-height: 84px; overflow-y: auto;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton{width: 100%; border: none !important; background-color: transparent !important; table-layout: fixed;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .multselector-label-container{width: 100%; overflow-x: hidden;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .multselector-label-container::-webkit-scrollbar{background:#000;} .mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonNode .multselector-label-container .multselector-label{width: 100%; font-family: none !important; height: 26px; text-align: left !important; padding: 4px 10px; text-overflow: ellipsis; white-space: nowrap; table-layout: fixed; overflow: hidden; text-align: start;}.jimu-rtl .mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonNode .multselector-label-container .multselector-label{text-align: right !important;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitArrowButton {width: 100%; display: flex; background-color: transparent;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitArrowButton .dijitArrowButtonInner{align-self: center;}.mult-selector .dojoxCheckedMultiSelectHover .dijitDownArrowButtonHover,.mult-selector .dojoxCheckedMultiSelectButtonFocused .dijitArrowButton{background-color: transparent !important;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonContents {border: none;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu.mult-selector-dropdown-max-height{max-height: 260px; overflow-y: auto;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable {background-color: transparent; table-layout: fixed;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable .dijitMenuItem{height: 26px;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable .dijitMenuItem,.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable .dijitMenuItem td{border: none;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitReset .dijitMenuItemIconCell{width: 36px; padding: 0 10px; padding: 3px 10px; border: none;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dojoxCheckedMultiSelectSelectedOption{height: 26px;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dojoxCheckedMultiSelectCheckBoxInput{display: none;} .claro .LaunchpadTheme .mult-selector .dijitDropDownButton .dijitArrowButtonInner:before,.claro .LaunchpadTheme .mult-selector .dijitArrowButton:before {content: "n"; display: none;}.claro .LaunchpadTheme .jimu-widget-swipe .mult-selector .dijitArrowButton {padding: 0; height: 100%;}.claro .LaunchpadTheme .mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonNode .multselector-label-container .multselector-label{font-size: 14px; height: 30px;}.jimu-widget-swipe {border-radius: 5px; transition: all 0.6s;}.jimu-widget-swipe.hide,.jimu-widget-swipe .hide{display: none;}.jimu-widget-swipe.transparent{opacity: 0.5;}.jimu-widget-swipe .swipe-icon{width: 30px; height: 100%; padding: 5px; cursor: pointer;}.jimu-widget-swipe .swipe-icon .swipe-icon-inner{width: 20px; height: 20px; background-position: center; background-repeat: no-repeat; background-image: url("images/loading.gif");}.jimu-widget-swipe .swipe-icon.swipe-icon-loaded{width: 50px; height: 18px; padding: 0; display: none;}.jimu-widget-swipe .swipe-layer-menu{width: 315px; font-size: 14px; padding: 14px; z-index: 50; color: #fff; background: #474747;}.jimu-rtl .jimu-widget-swipe .swipe-layer-menu{right: 32px; left: auto;}.jimu-widget-swipe .swipe-layer-menu .hint{display: inline-block; font-weight: bold; width: 100%;}.jimu-widget-swipe .swipe-layer-menu .show-detail-icon{width: 12px; height: 16px; background-position: center; background-repeat: no-repeat; background-image: url("images/up.svg");}.jimu-widget-swipe .swipe-layer-menu .show-detail-icon:hover{background-image: url("images/up_hover.svg");}.jimu-widget-swipe .swipe-layer-menu .show-detail-icon.fold{background-image: url("images/down.svg");}.jimu-widget-swipe .swipe-layer-menu .show-detail-icon.fold:hover{background-image: url("images/down_hover.svg");}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelect {color: #FFF; background-color:transparent !important; table-layout: fixed;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelect .dijitInputField {padding: 1px 10px; overflow: hidden; width: 100%;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelect .dijitInputField .dijitSelectLabel.dijitValidationTextBoxLabel{text-overflow: ellipsis; white-space: nowrap; overflow: hidden; text-align: initial; width: 100%;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelectHover,.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelectFocused {border-color:#b5bcc7;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitArrowButton{padding: 0; border: none; background-image: none;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelect .dijitButtonContents {border-style: none; border-width: 0; background: transparent !important;}.claro .jimu-widget-swipe .swipe-layer-menu .dijitSelect .dijitArrowButton {border-style: none; border-width: 0; background: transparent; width: 16px !important;}.jimu-widget-swipe .titles{display: flex; justify-content: center; align-items: center;}.jimu-widget-swipe .selectors{padding-top: 10px;}.jimu-widget-swipe .mult-layers-container{border: 1px solid #b5bcc7; width: 287px;}.jimu-widget-swipe-popup{width: 287px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; table-layout: fixed;}.jimu-widget-swipe-popup::-webkit-scrollbar-thumb{-webkit-border-radius:4px; border-radius:4px; background:#666;}.jimu-widget-swipe-popup::-webkit-scrollbar{background:#000;} .jimu-widget-swipe-popup.dijitMenu .dijitMenuItemSelected{border: none; background-image: none; background: transparent;}.jimu-widget-swipe-popup.dijitMenu .dijitMenuItemSelected td {color: #FFF; background-color: transparent; background-image: none;}.jimu-widget-swipe-popup.dijitMenu .dijitReset {color: #FFF; width: 100%; background-color: transparent;}.jimu-widget-swipe-popup.dijitMenu.dojoxCheckedMultiSelectMenu,.jimu-widget-swipe-popup.dijitMenuTable.dijitSelectMenu {background: #2A2A2A; height: 100%; height: calc(100% + 4px); overflow: hidden auto !important; padding: 2px;}.jimu-widget-swipe-popup.dijitMenu .dijitMenuItem td{border-width: 0; border: none; overflow-x: hidden; text-overflow: ellipsis; white-space: nowrap; table-layout: fixed; padding: 4px;}.jimu-widget-swipe-popup.dijitMenu .dijitMenuItemHover td{background: #4A4A4A; color: #FFF;}',
"*now":function(u){u(['dojo/i18n!*preload*widgets/Swipe/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/html dojo/query dojo/on dojo/Deferred ./utils ./MultSelector/MultSelector jimu/utils jimu/BaseWidget jimu/LayerInfos/LayerInfos dijit/_WidgetsInTemplateMixin esri/dijit/LayerSwipe dijit/form/Select ./a11y/Widget".split(" "),function(u,z,m,n,l,c,k,e,t,C,w,q,A,B,E,y){u=u([w,A],{baseClass:"jimu-widget-swipe",swipeDijit:null,layerInfosObj:null,_loadDef:null,_obtainedLabelLayers:[],_LAST_SELECTED:null,getSwipeModeByConfig:function(){this._SWIPE_MODE=
"";this.config.layerMode&&"mult"===this.config.layerMode?(this._SWIPE_MODE="mult",n.addClass(this.singleLayersContainer,"hide"),n.removeClass(this.multLayersContainer,"hide")):(this._SWIPE_MODE="single",n.removeClass(this.singleLayersContainer,"hide"),n.addClass(this.multLayersContainer,"hide"));return this._SWIPE_MODE},createSelector:function(){"mult"===this._SWIPE_MODE?(this.multLayersSelector=new t({nls:this.nls},this.multSelectorContainer),this.multLayersSelector.startup(),this.own(c(this.multLayersSelector,
"change",m.hitch(this,this.onSwipeLayersChange)))):(this.singleSelector=new E({style:"width:100%"},this.singleSelectorContainer),this.own(c(this.singleSelector,"Change",m.hitch(this,this.onSwipeLayersChange))),this.own(c(this.singleSelector,"Click",m.hitch(this,this.onSwipeLayersClick))),this.own(c(this.singleSelector.dropDown.domNode,"mouseenter",m.hitch(this,this.onDropMouseEnter))),this.own(c(this.singleSelector.dropDown.domNode,"mouseleave",m.hitch(this,this.onDropMouseLeave))),this.own(c(this.swipeLayersMenu,
"mouseleave",m.hitch(this,this.onMenuMouseLeave))));this.a11y_init()},setDefaultOptions:function(d,f){var g=[];if(this.config.layerState){if(e.isTherePreconfiguredLayer(this.config)){var r=this.config.layerState,a;for(a in r)if(r.hasOwnProperty(a)&&!0===r[a].selected){var b=this.layerInfosObj.getLayerInfoById(a);b&&b.isShowInMap()&&g.push({value:a,label:b.title})}}r=0;for(a=d.length;r<a;r++)b=d[r],e._isNewAddedLayer(b,this.layerInfosObj)&&b.isShowInMap()&&g.push({value:b.id,label:b.title})}else g=
z.map(d,m.hitch(this,function(x){return{label:x.title,value:x.id}}));d=!0===this.config.isHidePanel;r=0;for(a=g.length;r<a;r++){b=g[r];if(this._LAST_SELECTED&&this._LAST_SELECTED.mode===this.config.layerMode)for(var h=0,v=this._LAST_SELECTED.selected.length;h<v;h++){if(b.value===this._LAST_SELECTED.selected[h]){b.selected=!0;var p=b.value}}else this._isDefaultSelectedOption(b)&&(b.selected=!0,p=b.value);if(d){if(h=e.isDefaultSelectedLayerAndInShow(b,this.layerInfosObj,this.config,this._SWIPE_MODE))b.selected=
!0,f=!1;"mult"===this._SWIPE_MODE||h||(b.selected=!1)}}f&&"mult"!==this._SWIPE_MODE&&(p=this.singleSelector.get("value"));"mult"===this._SWIPE_MODE?this.multLayersSelector.initOptions(g,f):!0===d?(f=this.layerInfosObj.getLayerInfoById(this.config.layer))&&!f.isShowInMap()?(this.singleSelector.set("options",[{value:"",label:"",selected:!1}]),this.singleSelector.reset()):(this.singleSelector.set("options",g),this.singleSelector.setValue(this.config.layer)):this.singleSelector.set("options",g);this.disableSelectors();
g=this.getSelection();!0!==d&&("mult"===this._SWIPE_MODE?g&&"undefined"!==typeof g.length&&0===g.length&&(p=this.multLayersSelector.getOptions())&&"undefined"!==p.length&&0<p.length&&p[0].value&&this.multLayersSelector.setValue(p[0].value):p?this.singleSelector.set("value",p):g&&g.length&&1===g.length&&this.singleSelector.options&&"undefined"!==this.singleSelector.options.length&&0<this.singleSelector.options.length&&this.singleSelector.options[0].value&&this.singleSelector.set("value",this.singleSelector.options[0].value));
this._LAST_SELECTED={mode:this._SWIPE_MODE,selected:this.getSelection()};this.enableSelectors();this.toggleSelectorPopup()},_isSwipeBaseMap:function(){var d=this.getSelection();if(d&&d.length)for(var f=0,g=d.length;f<g;f++){var r=this.layerInfosObj.getLayerInfoById(d[f]);if(r&&r.isShowInMap())return!1}return!0},_isDefaultSelectedOption:function(d){var f=[];"mult"===this._SWIPE_MODE?f=this.config.defaultLayers:f.push(this.config.layer);for(var g=0,r=f.length;g<r;g++)if(f[g]===d.value)return!0;return!1},
toggleSelectorPopup:function(){e.showSelectorPopup(this.domNode);!0===this.config.isHidePanel&&e.hideSelectorPopup(this.domNode);var d=this.getOptions();d&&("mult"===this._SWIPE_MODE?0===d.length&&e.hideSelectorPopup(this.domNode):(0===d.length||1===d.length)&&e.hideSelectorPopup(this.domNode))},disableSelectors:function(){"mult"===this._SWIPE_MODE?this.multLayersSelector.disable():this.singleSelector.set("disabled",!0)},enableSelectors:function(){"mult"===this._SWIPE_MODE?this.multLayersSelector.enable():
this.singleSelector.set("disabled",!1)},getSelection:function(){var d=[];"mult"===this._SWIPE_MODE?d=this.multLayersSelector.getConfig():d.push(this.singleSelector.get("value"));return d},isSelected:function(d,f){f||(f=this.getSelection());for(var g=0,r=f.length;g<r;g++)if(d===f[g])return!0;return!1},getOptions:function(){var d=[];return d="mult"===this._SWIPE_MODE?this.multLayersSelector.getOptions():this.singleSelector.getOptions()},setSelection:function(){},onSelectorChange:function(){},_removeSingleSelectorOption:function(d){this.singleSelector.removeOption(d);
0===this.singleSelector.getOptions().length&&(this.singleSelector.set("options",[{value:"",label:""}]),this.singleSelector.reset())},postCreate:function(){this.inherited(arguments);this.config.style||(this.config.style="vertical");this.config.defaultLayers||(this.config.defaultLayers=[]);e.cleanHandlerPosition();this.getSwipeModeByConfig();this.openAtStartAysn=!0;this.createSelector();this.own(c(this.map,"layer-add",m.hitch(this,this._onMainMapBasemapChange)));this.a11y_initEvents()},_enableSwipe:function(){this._obtainedLabelLayers&&
this._obtainedLabelLayers.length&&0<this._obtainedLabelLayers.length&&(this._obtainedLabelLayers=[]);this.swipeDijit.enable()},_disableSwipe:function(){this.swipeDijit&&this.swipeDijit.disable&&(this.swipeDijit.disable(),z.forEach(this._obtainedLabelLayers,m.hitch(this,function(d){d.restoreLabelControl()})))},onOpen:function(){!0!==this._isTestSizeFlag&&this._loadLayerInfos().then(m.hitch(this,function(){var d=e.getVisibleLayerInfos(this.layerInfosObj);this.setDefaultOptions(d);this.createSwipeDijit()}))},
onClose:function(){!0!==this._isTestSizeFlag&&(this._LAST_SELECTED={mode:this._SWIPE_MODE,selected:this.getSelection()},this._loadDef.isResolved()?this._disableSwipe():this._loadDef.isFulfilled()||this._loadDef.cancel())},createSwipeDijit:function(){this.destroySwipeDijit();var d=[],f=this.getSelection();if(0===f.length)d=this._getLayerParams(null);else if("mult"===this._SWIPE_MODE)for(var g=0,r=f.length;g<r;g++)d=d.concat(this._getLayerParams(f[g]));else d=this._getLayerParams(f[0]);f={type:this.config.style||
"vertical",map:this.map,layers:d,invertPlacement:this.config.invertPlacement};e.isCacheHandlerPosition()?e.setHandlerPosition(f,this.config,this.map):(g=e.getScreenMiddle(this.map),f.top=g.top,f.left=g.left,"scope"===this.config.style&&(f.top-=130,f.left-=130));this.swipeDijit=new B(f,this.layerSwipe);this.swipeDijit.startup();this._setHandleColor();this._enableSwipe();n.place(this.swipeDijit.domNode,this.map.root,"before");this._autoHideInfoWindow(d);this.swipeDijit.on("swipe",m.hitch(this,function(a){var b=
z.map(a.layers,function(v){return v.layer});if(a&&a.layers[0]){var h=e.getLayerNode(a.layers[0].layer);this.config.invertPlacement?(h=e.getLayerTransform(a.layers[0],this.swipeDijit),a.layers[0].left+=h.dx,a.layers[0].top+=h.dy):h&&h.style&&"css-transforms"===this.map.navigationMode&&(a.layers[0].right-=a.layers[0].left,a.layers[0].left=0,a.layers[0].bottom-=a.layers[0].top,a.layers[0].top=0)}e.saveHandlerPosition(a.layers[0]);this._autoHideInfoWindow(b)}));e.hackToRefreshSwipe(this);this._initPopupStyle()},
_getLayerParams:function(d){var f=[];this._isSwipeBaseMap()?(d=this.layerInfosObj.getBasemapLayers(),z.forEach(d,m.hitch(this,function(g){f.push(this.map.getLayer(g.id))}))):(d=this.layerInfosObj.getLayerInfoById(d))&&d.traversal?d.traversal(m.hitch(this,function(g){var r=this.map.getLayer(g.id);r&&(f.push(r),this._obtainLabelControl(g,f))})):(d=this.layerInfosObj.getBasemapLayers(),z.forEach(d,m.hitch(this,function(g){f.push(this.map.getLayer(g.id))})));return f},destroySwipeDijit:function(){if(this.swipeDijit&&
this.swipeDijit.destroy){try{this.swipeDijit.destroy()}catch(d){console.log(d)}this.swipeDijit=null;this._restoreAllLabelControl();this.layerSwipe=n.create("div",{},this.swipeLayersMenu,"after")}},onSwipeLayersChange:function(){this.swipeDijit&&("mult"===this._SWIPE_MODE?this.createSwipeDijit():(this.createSwipeDijit(),e.zoomToCurrentLayer(this)),this.toggleSelectorPopup(),this.initSwipeLayersUi())},onLayerInfosIsShowInMapChanged:function(){if(this.swipeDijit&&this.swipeDijit.enabled){var d=this.getSelection();
if("mult"!==this._SWIPE_MODE){if(d&&d[0]&&""!==d[0]){d=d[0];var f=this.layerInfosObj.getLayerInfoById(d);f&&!f.isShowInMap()&&this._removeSingleSelectorOption(d)}d=this.getSelection()}d=e.getVisibleLayerInfos(this.layerInfosObj,d);this.setDefaultOptions(d,!0)}},_onMainMapBasemapChange:function(d){d.layer&&d.layer._basemapGalleryLayerType&&(d=this.getOptions(),d&&0<d.length||!this._loadDef.isResolved()||(d=e.getVisibleLayerInfos(this.layerInfosObj),this.setDefaultOptions(d),this.createSwipeDijit()))},
onLayerInfosChanged:function(d,f,g){if(this.swipeDijit&&this.swipeDijit.enabled){var r=this.getSelection();d=e.getVisibleLayerInfos(this.layerInfosObj);var a=!1;r&&r[0]&&(a=!0);"added"===f?(f=g.id,!0!==this.config.isHidePanel&&(this._LAST_SELECTED.selected=[],this._LAST_SELECTED.selected.push(f)),this.setDefaultOptions(d,!0),!1===a&&!0!==this.config.isHidePanel&&("mult"!==this._SWIPE_MODE?this.singleSelector.set("value",f):this.multLayersSelector.setValue(f))):"removed"===f&&(f=g.id,g=this.isSelected(f),
d=e.getVisibleLayerInfos(this.layerInfosObj),g?(this._LAST_SELECTED=null,"mult"!==this._SWIPE_MODE?(this._removeSingleSelectorOption(f),this.setDefaultOptions(d),this.createSwipeDijit()):this.setDefaultOptions(d)):"mult"!==this._SWIPE_MODE?(this._removeSingleSelectorOption(f),this.toggleSelectorPopup()):this.setDefaultOptions(d))}},destroy:function(){this.destroySwipeDijit();this.inherited(arguments)},_loadLayerInfos:function(){var d=new k;this._loadDef=d;this._loadDef.isResolved()?d.resolve():q.getInstance(this.map,
this.map.itemInfo).then(m.hitch(this,function(f){d.isCanceled()||(this.layerInfosObj=f,this.own(c(f,"layerInfosChanged",m.hitch(this,this.onLayerInfosChanged))),this.own(c(f,"layerInfosIsShowInMapChanged",m.hitch(this,this.onLayerInfosIsShowInMapChanged))),this._setHintStr(),n.addClass(this.swipeIcon,"swipe-icon-loaded"),d.resolve())}));return d},_autoHideInfoWindow:function(d){e.shouldHideInfoWindow(d,this)&&this.map.infoWindow.hide()},_obtainLabelControl:function(d,f){var g=d.obtainLabelControl();
g&&(f.push(g),this._obtainedLabelLayers.push(d))},_restoreAllLabelControl:function(){z.forEach(this._obtainedLabelLayers,m.hitch(this,function(d){d.restoreLabelControl()}));this._obtainedLabelLayers=[]},_setHandleColor:function(){if(this.swipeDijit&&"scope"!==this.config.style){var d=this.swipeDijit.moveable.node,f=l(".handleContainer",this.esriTimeSlider)[0],g=l(".handle",f)[0];d&&n.setStyle(d,"backgroundColor",e.processColor(this.config.handleColor).toHex());f&&n.setStyle(f,"backgroundColor",e.processColor(this.config.handleColor).toHex());
g&&n.setStyle(g,"backgroundColor",e.processColor(this.config.handleColor).toHex())}},_getSelectorDom:function(){return"mult"===this._SWIPE_MODE?l(".dojoxCheckedMultiSelect\x3etable",this.multLayersSelector.domNode)[0]:this.singleSelector.domNode},initSwipeLayersUi:function(){var d=this._getSelectorDom(),f=n.getMarginBox(d);350<f.w+28?n.setStyle(this.domNode,"maxWidth",f.w+28+"px"):n.setStyle(this.domNode,"maxWidth","");if("mult"===this._SWIPE_MODE){d=l(".multselector-label",d);f=0;for(var g=d.length;f<
g;f++){var r=d[f];n.attr(r,"title",r.innerText)}}else d=l(".dijitSelectLabel.dijitValidationTextBoxLabel",d)[0],n.attr(d,"title",d.innerText)},onDropMouseEnter:function(){this._mouseOnDropDown=!0},onDropMouseLeave:function(){this._mouseOnDropDown=!1;this.singleSelector.dropDown.onCancel()},onMenuMouseLeave:function(){setTimeout(m.hitch(this,function(){if(!this._mouseOnDropDown)this.singleSelector.dropDown.onCancel()}),10)},onSwipeLayersClick:function(){for(var d=l(".dijitReset.dijitMenuItemLabel",
this.singleSelector.dropDown.domNode),f=0,g=d.length;f<g;f++){var r=d[f];n.attr(r,"title",r.innerText)}},_initPopupStyle:function(){"mult"===this._SWIPE_MODE?n.addClass(this.multLayersSelector.selector.dropDownMenu.domNode,"jimu-widget-swipe-popup"):n.addClass(this.singleSelector.dropDown.domNode,"jimu-widget-swipe-popup")},_onShowDetailIconClick:function(){n.toggleClass(this.showDetailIcon,"fold");n.hasClass(this.showDetailIcon,"fold")?(n.addClass(this.selectorsContainer,"hide"),n.setAttr(this.showDetailIcon,
"title",this.nls.showList),n.addClass(this.domNode,"transparent"),this.a11y_setFocusFold()):(n.removeClass(this.selectorsContainer,"hide"),n.setAttr(this.showDetailIcon,"title",this.nls.hideList),n.removeClass(this.domNode,"transparent"),this.a11y_setFocusUnfold());this._setHintStr()},_setHintStr:function(){if(n.hasClass(this.showDetailIcon,"fold")){var d=0;d="mult"===this._SWIPE_MODE?this.multLayersSelector.getConfig().length:""===this.singleSelector.getValue()?0:1;this.hintNode.innerHTML=C.sanitizeHTML(d+
" "+this.nls.nItemsSelected)}else this.hintNode.innerHTML="scope"===this.config.style?this.nls.spyglassText:this.nls.swipeText}});u.extend(y);return u});