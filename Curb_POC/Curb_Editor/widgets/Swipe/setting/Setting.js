// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Swipe/utils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojo/_base/html"],function(u,E,C,v){var f={defaultColor:"#dadada",handlerPosition:{top:null,bottom:null,left:null,right:null},_isNewAddedLayer:function(c,h){h=h.getLayerInfoArrayOfWebmap();for(var g=0,p=h.length;g<p;g++)if(h[g].id===c.id)return!1;return!0},zoomToCurrentLayer:function(c){var h=c.config.isZoom,g=c.layerInfosObj;c=c.getSelection();var p;c&&c[0]&&(p=c[0]);h&&p&&(h=g.getLayerInfoById(p))&&
h.zoomTo&&h.zoomTo()},shouldHideInfoWindow:function(c,h){if(!h.map.infoWindow.isShowing)return!1;var g=h.map.infoWindow.getSelectedFeature();return c&&E.some(c,function(p){var r=g&&g.getLayer&&g.getLayer(),e=h.layerInfosObj.getLayerInfoById(p.id);e=r&&e&&e.traversal(function(b){return b.id===r.id});return r===p||e},h)},getVisibleLayerInfos:function(c,h){c=c.getLayerInfoArray();if(h){for(var g=[],p=0,r=c.length;p<r;p++){var e=c[p];if(e.isShowInMap())g.push(e);else for(var b=0,k=h.length;b<k;b++)h[b]===
e.id&&g.push(e)}return g}return E.filter(c,function(m){return m.isShowInMap()})},isDefaultSelectedLayerAndInShow:function(c,h,g,p){if("mult"===p){if(g&&g.defaultLayers&&g.defaultLayers.length){c=c.value;for(var r=0,e=g.defaultLayers.length;r<e;r++)if(c===g.defaultLayers[r]&&(p=h.getLayerInfoById(c),p.isShowInMap()))return!0}}else if(g&&g.layer&&(c=c.value,c===g.layer&&(p=h.getLayerInfoById(c),p.isShowInMap())))return!0;return!1},isTherePreconfiguredLayer:function(c,h){if(h)return!0;if(c&&c.layerState){c=
c.layerState;for(var g in c)if(c.hasOwnProperty(g)&&!0===c[g].selected)return!0}return!1},processColor:function(c){return c?new C(c):new C(f.defaultColor)},getScreenMiddle:function(c){var h=0,g=0;c&&(c.root?(c=v.getMarginBox(c.root),h=c.w/2,g=c.h/2):c.width&&c.height&&(h=c.width/2,g=c.height/2));return{left:h,top:g}},hideSelectorPopup:function(c){v.addClass(c,"hide")},showSelectorPopup:function(c){v.removeClass(c,"hide")},hackToRefreshSwipe:function(c){setTimeout(u.hitch(c,function(){c.swipeDijit.swipe&&
c.swipeDijit.swipe()}),200)},cleanHandlerPosition:function(){f.handlerPosition={top:null,bottom:null,left:null,right:null}},isCacheHandlerPosition:function(){return f.handlerPosition.top||f.handlerPosition.bottom||f.handlerPosition.left||f.handlerPosition.right?!0:!1},saveHandlerPosition:function(c){c&&(f.handlerPosition.top=c.top,f.handlerPosition.bottom=c.bottom,f.handlerPosition.left=c.left,f.handlerPosition.right=c.right)},setHandlerPosition:function(c,h,g){h.style&&"scope"===h.style?(f.handlerPosition.top&&
(c.top=f.handlerPosition.top-9),f.handlerPosition.bottom&&(c.bottom=f.handlerPosition.bottom),f.handlerPosition.left&&(c.left=f.handlerPosition.left-9),f.handlerPosition.right&&(c.right=f.handlerPosition.right)):h.invertPlacement?(f.handlerPosition.right&&(c.right=f.handlerPosition.right),f.handlerPosition.left&&(c.left=f.handlerPosition.left),f.handlerPosition.bottom&&(c.bottom=f.handlerPosition.bottom),f.handlerPosition.top&&(c.top=f.handlerPosition.top)):(f.handlerPosition.right&&(c.left=f.handlerPosition.right),
f.handlerPosition.left&&(c.right=f.handlerPosition.left),f.handlerPosition.bottom&&(c.top=f.handlerPosition.bottom),f.handlerPosition.top&&(c.bottom=f.handlerPosition.top));0>c.top&&(c.top=0);c.top>g.height&&(c.top=g.height);0>c.left&&(c.left=0);c.left>g.width&&(c.left=g.width)},getLayerNode:function(c){return c._heatmapManager&&c._heatmapManager.imageLayer&&c._heatmapManager.imageLayer._div||c._div},getLayerTransform:function(c,h){var g=c.layer;c={dx:0,dy:0};if(g.getNavigationTransform)c=g.getNavigationTransform();
else if(g._getTransform){if(h=g._getTransform())c.dx=h.dx,c.dy=h.dy}else(g=f.getLayerNode(g).style)&&"css-transforms"===h.map.navigationMode&&(g=h._getTransformValue(g))&&(h=h._parseTransformValue(g),c.dx=h.x,c.dy=h.y);return c}};return f})},"widgets/Swipe/setting/LayersSetting":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/on dojo/_base/array dojo/_base/html jimu/LayerInfos/LayerInfos jimu/dijit/LayerChooserFromMapLite dojo/Deferred ../MultSelector/MultSelector dojo/text!./LayersSetting.html jimu/dijit/LoadingShelter jimu/utils jimu/dijit/CheckBox dijit/form/Select dojox/form/CheckedMultiSelect dijit/form/ValidationTextBox".split(" "),
function(u,E,C,v,f,c,h,g,p,r,e,b,k,m,B,A){return E([v,f,c,u],{templateString:m,postCreate:function(){this.shelter=new B({hidden:!0});this.defaultLayersSelector=new k({nls:this.nls},this.defaultLayersSelectorContainer);this.defaultLayersSelector.startup();this.shelter.show();this._getLayerInfoObj(this.map).then(C.hitch(this,function(){this._setDefaultLayerByState(this.config.layerState)}),function(w){console.log(w)}).always(C.hitch(this,function(){this.shelter.hide()}));this.own(h(this.singleLayerRaido,
"change",C.hitch(this,function(){this.singleLayerRaido.checked&&(p.addClass(this.defaultLayersContainer,"hide"),p.removeClass(this.swipeLayersContainer,"hide"),this.emit("change",{mode:"single"}))})));this.own(h(this.multipleLayerRaido,"change",C.hitch(this,function(){this.multipleLayerRaido.checked&&(p.removeClass(this.defaultLayersContainer,"hide"),p.addClass(this.swipeLayersContainer,"hide"),this.emit("change",{mode:"mult"}))})));this.inherited(arguments)},startup:function(){this.inherited(arguments)},
setConfig:function(w){this.config=w;"mult"===this.config.layerMode?this.multipleLayerRaido.setChecked(!0):this.singleLayerRaido.setChecked(!0);this._layerChooserFromMap||(this._layerChooserFromMap=new e({showTables:!1,onlyShowWebMapLayers:!0,customFilter:C.hitch(this,function(n){var t=new b,l=r.getInstanceSync().getLayerInfoArrayOfWebmap();g.some(l,function(q){if(q.id===n.id)return!0},this)?n.isRootLayer()?t.resolve(!0):this.map.getLayer(n.id)?t.resolve(!0):t.resolve(!1):t.resolve(!1);return t}),
layerState:this.config.layerState}),this._layerChooserFromMap.placeAt(this.layersChooser),this._layerChooserFromMap.startup(),g.forEach(this._layerInfosObj.getLayerInfoArray(),function(n){n&&n.layerObject&&n.layerObject.declaredClass&&("esri.layers.ArcGISDynamicMapServiceLayer"===n.layerObject.declaredClass||"esri.layers.ArcGISTiledMapServiceLayer"===n.layerObject.declaredClass||"esri.layers.FeatureCollection"===n.layerObject.declaredClass)&&(n=this._layerChooserFromMap.getLayerAssociateDomNodesById(n.id))&&
p.addClass(n.collapseIcon,"transparent")},this),this.own(h(this._layerChooserFromMap,"tree-click",C.hitch(this,function(){var n=this._layerChooserFromMap.getState();this._setDefaultLayerByState(n);this._isLayersChooserStateEmpty()&&(this.swipeLayers.set("options",[{value:"",label:""}]),this.swipeLayers.reset(),this.defaultLayersSelector.reset())}))));w=this._getOptionsFromState(this.config.layerState);this._isSelectedLayerInOptions(w)&&this.swipeLayers.set("value",this.config.layer);this.config.defaultLayers||
(this.config.defaultLayers=[]);this.defaultLayersSelector.setConfig(this.config.defaultLayers)},getConfig:function(w){w.layerMode=this.multipleLayerRaido.checked?"mult":"single";w.layer=this.swipeLayers.get("value");w.defaultLayers=this.defaultLayersSelector.getConfig();w.layerState=this._layerChooserFromMap.getState();return this.config},setLayerInfoText:function(w){this.layerTextNode.innerHTML=A.sanitizeHTML(w)},_getLayerInfoObj:function(w){return r.getInstance(w,w.itemInfo).then(C.hitch(this,function(n){this._layerInfosObj=
n;n=this._layerInfosObj.getLayerInfoArray();n=g.filter(n,C.hitch(this,function(t){if(!this._isNewAddedLayer(t))return!0}));n=g.map(n,function(t){return{label:t.title,value:t.id}});this.swipeLayers.set("options",n);this.defaultLayersSelector.setOptions(n)}))},_isSelectedLayerInOptions:function(w){for(var n=this.config.layer||this.swipeLayers.getValue(),t=0,l=w.length;t<l;t++)if(w[t].value===n)return!0;return!1},_setDefaultLayerByState:function(w){"undefined"===typeof w||null===w?this.defaultLayersSelector.initOptions(this.swipeLayers.getOptions(),
!0):(w=this._getOptionsFromState(w,!0),this.swipeLayers.set("options",C.clone(w)),this._isSelectedLayerInOptions(w)&&0!==w.length?this.swipeLayers.setValue(this.config.layer||this.swipeLayers.getValue()):this.swipeLayers.reset(),this.defaultLayersSelector.initOptions(w,!0))},_getOptionsFromState:function(w,n){var t=[];if(!w)return t;for(var l in w)if(w.hasOwnProperty(l)){var q=w[l];if(!0===q.selected){var y=this._layerInfosObj.getLayerInfoById(l);y&&!this._isNewAddedLayer(y)&&(y=y.title)&&(y={value:l,
label:y},n&&q.selected&&(y.selected=!0),t.push(y))}}return t},_isNewAddedLayer:function(w){for(var n=this._layerInfosObj.getLayerInfoArrayOfWebmap(),t=0,l=n.length;t<l;t++)if(n[t].id===w.id)return!1;return!0},_isLayersChooserStateEmpty:function(){return 0===this._getOptionsFromState(this._layerChooserFromMap.getState()).length?!0:!1}})})},"jimu/dijit/LayerChooserFromMapLite":function(){define("dojo/on dojo/_base/declare dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/dijit/CheckBox jimu/dijit/LayerChooserFromMap jimu/LayerStructure".split(" "),
function(u,E,C,v,f,c,h,g,p){var r=E([g],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"treeSection" class\x3d"tree-section"\x3e\x3cul data-dojo-attach-point\x3d"treeUl" class\x3d"tree-ul tree-root-ul"\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e',
map:null,layerStateController:null,layerState:null,customFilter:null,onlySelectLeafLayer:!1,displayLayerTypeIcon:!0,showTables:!0,viewMode:!1,onlyShowWebMapLayers:!1,layerStructure:null,_layerDatas:null,_eventHandles:null,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){f.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");f.addClass(this.domNode,"jimu-basic-layer-chooser-from-map-lite");this._layerDatas={};this._eventHandles=[];this.layerStructure=
this.map?p.createInstance(this.map):p.getInstance();this.layerInfosObj=this.layerStructure._layerInfos;this.layerState=this._clearLayerState(this.layerState)||{};this.layerStateController||(this.layerStateController=new r.LayerStateController);var e=this.customFilter?v.hitch(this,this.customFilter):v.hitch(this,this.filter);this.filter=g.andCombineFilters([this.basicFilter,e]);this._createTree()},_createTree:function(){if(this.onlyShowWebMapLayers){var e=this.layerStructure.getWebmapLayerNodes();
var b=this.layerStructure.getWebmapTableNodes()}else e=this.layerStructure.getLayerNodes(),b=this.layerStructure.getTableNodes();0<this._createLayerNodes(e.concat(this.showTables?b:[]),this.treeUl)&&(f.setStyle(this.errorTipSection,"display","none"),this.layerStateController.restoreState(this.layerState,this.layerStructure))},_createLayerNodes:function(e,b){var k=c.map(e,function(B){return this.filter(B._layerInfo)},this),m=0;C(k).then(v.hitch(this,function(B){c.forEach(B,function(A,w){A&&(this._createLayerNode(e[w],
b),m++)},this)}));return m},_createLayerNode:function(e,b){var k=f.create("li",{"class":"tree-node-li",id:"layerchooserlite-tree-node-li-"+e.id},b),m=f.create("div",{"class":"tree-node-div"},k);b=f.create("span",{"class":"tree-node-column-span collapse-span"},m);var B=f.create("span",{"class":"tree-node-column-span check-box-span"},m);B=f.create("div",{"class":"tree-node-column-div check-box-div"},B);var A=f.create("span",{"class":"tree-node-column-span icon-span "+(this.displayLayerTypeIcon?"display":
"")},m);var w=(w=this.layerState[e.id])?w.selected:this.layerStateController.getState(e);w=new h({checked:w},B);var n=f.create("span",{"class":"tree-node-column-span title-span",innerHTML:e.title},m),t=f.create("ul",{"class":"tree-ul tree-subnode-ul",style:"display:none; "},k);k={layerNode:e,layerNodeLi:k,layerNodeDiv:m,collapseSpan:b,iconSpan:A,checkBox:w,subLayerNodeUl:t,hasBeenOpened:!1};this._layerDatas[e.id]=k;e.isLeaf()||(f.addClass(b,"is-leaf"),f.addClass(n,"is-leaf"),e=u(b,"click",v.hitch(this,
this._onCollapse,k)),this._eventHandles.push(e),e=u(n,"click",v.hitch(this,this._onCollapse,k)),this._eventHandles.push(e),this.onlySelectLeafLayer&&(w.setStatus(!1),f.setStyle(B,"display","none")));!0===this.viewMode&&w.setStatus(!1);e=u(w.domNode,"click",v.hitch(this,this._onCheckBoxChange,k));this._eventHandles.push(e);this._setIconImage(k,!1);return k},_setIconImage:function(e,b){if(this.displayLayerTypeIcon){var k=e.layerNode,m=k.getLayerType(),B=k.getLayerObject();C({layerType:m,layerObject:B}).then(v.hitch(this,
function(A){if(A.layerType&&A.layerObject){var w={type:A.layerType,layerInfo:k._layerInfo};A=window.location.protocol+"//"+window.location.host+require.toUrl("jimu");(w=this._getIconInfo(w,b).imageName)&&f.setStyle(e.iconSpan,"background-image","url("+A+"/css/images/"+w+")")}}))}},_getCheckBoxValue:function(e){return e.getStatus()?e.getValue():!1},_clearLayerState:function(e){var b={};e&&this.layerStructure.traversal(v.hitch(this,function(k){e[k.id]&&(b[k.id]={selected:e[k.id].selected})}));return b},
_selectOrDeselectLayer:function(e,b){if(e=this._layerDatas[e])e.checkBox.setValue(b),this._onCheckBoxChange(e)},selectLayer:function(e){this._selectOrDeselectLayer(e,!0)},deselectLayer:function(e){this._selectOrDeselectLayer(e,!1)},getState:function(){var e=v.clone(this.layerState),b;for(b in this._layerDatas)this._layerDatas.hasOwnProperty(b)&&"function"!==typeof this._layerDatas[b]&&(this._getCheckBoxValue(this._layerDatas[b].checkBox)?e[b]={selected:!0}:e[b]={selected:!1});return e},restoreState:function(e){this.layerState=
this._clearLayerState(e);for(var b in this._layerDatas)if(this._layerDatas.hasOwnProperty(b)&&"function"!==typeof this._layerDatas[b]){var k=(e=this._layerDatas[b])&&e.checkBox,m=this.layerState[b];m?k.setValue(m.selected):k.setValue(this.layerStateController.getState(e.layerNode))}this.layerStateController.restoreState(this.layerState,this.layerStructure)},setViewMode:function(e){for(var b in this._layerDatas)if(this._layerDatas.hasOwnProperty(b)&&"function"!==typeof this._layerDatas[b]){var k=this._layerDatas[b];
k=k&&k.checkBox;!0===e?(this.viewMode=!0,k.setStatus(!1)):(this.viewMode=!1,k.setStatus(!0))}},getSelectedLayerNodes:function(){var e=[],b=this.getState(),k;for(k in b)if(b.hasOwnProperty(k)&&"function"!==typeof b[k]&&b[k].selected){var m=this.layerStructure.getNodeById(k);m&&e.push(m)}return e},getLoadedLayerNodes:function(){var e=[],b;for(b in this._layerDatas)if(this._layerDatas.hasOwnProperty(b)&&"function"!==typeof this._layerDatas[b]){var k=this.layerStructure.getNodeById(b);k&&e.push(k)}return e},
getLayerAssociateDomNodesById:function(e){var b=null;(e=this._layerDatas[e])&&(b={collapseIcon:e.collapseSpan,checkBox:e.checkBox.domNode,layerTypeIcon:e.iconSpan});return b},getSelectedItems:function(){var e=[];return e=c.map(this.getSelectedLayerNodes(),function(b){return{name:b.title,url:b.getUrl(),layerInfo:b._layerInfo}},this)},getAllItems:function(){return[]},_clear:function(){this._layerDatas={};c.forEach(this._eventHandles,function(e){e.remove()},this);this._eventHandles=[];f.empty(this.treeUl)},
destroy:function(){this._clear();this.map&&this.layerStructure.destroy();this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)},_onCollapse:function(e){var b="none"===f.getStyle(e.subLayerNodeUl,"display")?!0:!1;b?(f.setStyle(e.subLayerNodeUl,"display","block"),f.addClass(e.collapseSpan,"opened")):(f.setStyle(e.subLayerNodeUl,"display","none"),f.removeClass(e.collapseSpan,"opened"));this._setIconImage(e,b);e.hasBeenOpened||(this._createLayerNodes(e.layerNode.getSubNodes(),
e.subLayerNodeUl),e.hasBeenOpened=!0)},_onCheckBoxChange:function(e,b){this.layerStateController.setState(e.layerNode,this._getCheckBoxValue(e.checkBox));this.emit("selection-change",e.layerNode,this._getCheckBoxValue(e.checkBox));this._onTreeClick(e,b)},_onLayerInfosChanged:function(){this._createTree();this.emit("update")},_onLayerInfosIsShowInMapChanged:function(){this._createTree();this.emit("update")},_onTreeClick:function(e,b){e={name:e.layerNode.title||"",parent:null,layerInfo:e.layerNode._layerInfo,
type:null,layerClass:null,id:null,isLeaf:e.layerNode.isLeaf(),hasChildren:e.layerNode.isLeaf()?!1:!0};this.emit("tree-click",e,null,b)}});r.LayerStateController=E(null,{getState:function(e){return!0},setState:function(e,b){return this},restoreState:function(e,b){return this}});r.LayerVisibilityStateController=E(r.LayerStateController,{getState:function(e){return e.isToggledOn()},setState:function(e,b){e.toggle();return this},restoreState:function(e,b){var k={layerOptions:{}},m;for(m in e)e.hasOwnProperty(m)&&
"function"!==typeof e[m]&&(k.layerOptions[m]={visible:e[m].selected});b.restoreState(k);return this}});r.layerVisibilityStateController=new r.LayerVisibilityStateController;r.LayerLegendStateController=E(r.LayerStateController,{getState:function(e){return e.isShowLegend()}});r.layerLegendStateController=new r.LayerLegendStateController;return r})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(u,E,C,v,f,c,h,g,p,r,e,b,k,m,B,A,w,n){var t=C([v,f,c,E],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,onlyFilterCurrentLayerWhenAddItem:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);k.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new n({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=b.hitch(this,this.basicFilter);
this.filter=t.andCombineFilters([this.basicFilter,this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(l){var q=new g;this.onlyShowVisible?q.resolve(l.isShowInMap()):q.resolve(!0);return q},filter:function(l){l=new g;l.resolve(!0);return l},getSelectedItems:function(){var l=this.tree.getSelectedItems();return m.map(l,b.hitch(this,function(q){return this.getHandledItem(q)}))},getAllItems:function(){var l=this.tree.getAllItems(),q=[];m.forEach(l,
b.hitch(this,function(y){"root"!==y.id&&(y=this.getHandledItem(y),q.push(y))}));return q},getHandledItem:function(l){return{name:l.name,layerInfo:l.layerInfo}},_isLeafItem:function(l){return l.isLeaf},setCreateMapResponse:function(l){this.createMapResponse=l;w.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(b.hitch(this,function(q){this.layerInfosObj=q;this.own(u(this.layerInfosObj,"layerInfosChanged",b.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&
this.own(u(this.layerInfosObj,"layerInfosIsShowInMapChanged",b.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(l,q){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(l){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(l){this._clear();k.setStyle(this.errorTipSection,"display","block");var q=[];this.onlyShowWebMapLayers?(q=l.getLayerInfoArrayOfWebmap(),
q=q.concat(l.getTableInfoArrayOfWebmap())):(q=l.getLayerInfoArray(),q=q.concat(l.getTableInfoArray()));0!==q.length&&(k.setStyle(this.errorTipSection,"display","none"),m.forEach(q,b.hitch(this,function(y){this._addDirectLayerInfo(y)})))},_addDirectLayerInfo:function(l){l&&l.getLayerObject().then(b.hitch(this,function(){this._addItem("root",l)}),b.hitch(this,function(q){console.error(q)}))},_clear:function(){var l=this._store.query({parent:"root"});m.forEach(l,b.hitch(this,function(q){q&&"root"!==
q.id&&this._store.remove(q.id)}))},_addItem:function(l,q){var y=null,D=q.getLayerType(),I=this.filter(q);e({layerType:D,valid:I}).then(b.hitch(this,function(G){if(G.valid){var L=b.hitch(this,function(P,T){this._id++;y={name:q.title||"",parent:l,layerInfo:q,type:G.layerType,layerClass:q.layerObject.declaredClass,id:this._id.toString(),isLeaf:P,hasChildren:T};this._store.add(y)}),H=q.getSubLayers(),J=0===H.length,Q=!0;this.onlyFilterCurrentLayerWhenAddItem?(J&&(Q=!1),L(J,Q)):J?L(J,!1):(H=m.map(H,b.hitch(this,
function(P){return this.filter(P)})),e(H).then(b.hitch(this,function(P){(P=m.some(P,function(T){return T}))&&L(J,P)})))}}))},_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var l=this._getRootItem();l=new h({data:[l],getChildren:function(q){return this.query({parent:q.id})}});this._store=new p(l);l=new r({store:this._store,query:{id:"root"},mayHaveChildren:b.hitch(this,this._mayHaveChildren)});this.tree=new A({multiple:this.multiple,
model:l,showRoot:!1,isLeafItem:b.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:b.hitch(this,function(q,y){"root"!==q.id&&this._onTreeOpen(q,y)}),onClick:b.hitch(this,function(q,y,D){this._onTreeClick(q,y,D);this.emit("tree-click",q,y,D)}),getIconStyle:b.hitch(this,function(q,y){var D=null;if(!q||"root"===q.id)return null;var I={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},G=window.location.protocol+"//"+window.location.host+
require.toUrl("jimu");if(q=this._getIconInfo(q,y).imageName)I.backgroundImage="url("+G+"/css/images/"+q+")",D=I;return D}),getIconClass:b.hitch(this,function(q,y){return this._getIconInfo(q,y).className}),getTooltip:b.hitch(this,function(q){return this.displayTooltipForTreeNode?q.layerInfo.title:""})});k.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(l){return l.hasChildren},_getIconInfo:function(l,q){var y="",D="";"ArcGISDynamicMapServiceLayer"===
l.type||"ArcGISTiledMapServiceLayer"===l.type?q?(y="mapserver_open.png",D="mapservice-layer-icon open"):(y="mapserver_close.png",D="mapservice-layer-icon close"):"GroupLayer"===l.type?q?(y="group_layer2.png",D="group-layer-icon open"):(y="group_layer1.png",D="group-layer-icon close"):"FeatureLayer"===l.type?(l=B.getTypeByGeometryType(l.layerInfo.layerObject.geometryType),"point"===l?(y="point_layer1.png",D="point-layer-icon"):"polyline"===l?(y="line_layer1.png",D="line-layer-icon"):"polygon"===l&&
(y="polygon_layer1.png",D="polygon-layer-icon")):"Table"===l.type?(y="table.png",D="table-icon"):"ArcGISImageServiceLayer"===l.type||"ArcGISImageServiceVectorLayer"===l.type?(y="image_layer.png",D="iamge-layer-icon"):q?(y="mapserver_open.png",D="mapservice-layer-icon open"):(y="mapserver_close.png",D="mapservice-layer-icon close");return{imageName:y,className:D}},_onTreeOpen:function(l,q){if("root"!==l.id){var y=[];q=[];y=l.layerInfo.getSubLayers();l.checked||(this.shelter.show(),q=m.map(y,b.hitch(this,
function(D){return D.getLayerObject()})),e(q).then(b.hitch(this,function(){this.domNode&&(m.forEach(y,b.hitch(this,function(D){this._addItem(l.id,D)})),l.checked=!0,this.shelter.hide())}),b.hitch(this,function(D){console.error(D);this.shelter.hide()})))}},_onTreeClick:function(l,q,y){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});t.createFilterByLayerType=function(l){b.isArrayLike(l)||(l=[]);return function(q){var y=
new g;if(0===l.length)y.resolve(!0);else{var D=[];q.traversal(function(I){D.push(I.getLayerType())});e(D).then(function(I){for(var G=0;G<I.length;G++)for(var L=0;L<l.length;L++)if(I[G]===l[L]){y.resolve(!0);return}y.resolve(!1)},function(I){console.error(I);y.reject(I)})}return y}};t.createFeaturelayerFilter=function(l,q,y,D){var I=["point","polyline","polygon"];l&&0<l.length?(l=m.filter(l,function(G){return 0<=I.indexOf(G)}),0===l.length&&(l=I)):l=I;return function(G){var L=G.getLayerType();G=G.getLayerObject();
return e({layerType:L,layerObject:G}).then(function(H){var J=H.layerType;H=H.layerObject;if("ArcGISDynamicMapServiceLayer"===J||"ArcGISTiledMapServiceLayer"===J||"GroupLayer"===J||"FeatureCollection"===J)return!0;if("FeatureLayer"===J){J=B.getTypeByGeometryType(H.geometryType);J=0<=m.indexOf(l,J);var Q=t._shouldPassStatisticsCheck(D,H);return H.url?(H=B.isFeaturelayerUrlSupportQuery(H.url,H.capabilities),J&&H&&Q):q&&J}return"Table"===J?(J=B.isFeaturelayerUrlSupportQuery(H.url,H.capabilities),H=t._shouldPassStatisticsCheck(D,
H),y&&J&&H):!1})}};t.createImageServiceLayerFilter=function(l,q){return function(y){var D=y.getLayerType();y=y.getLayerObject();return e({layerType:D,layerObject:y}).then(function(I){var G=I.layerType,L=I.layerObject;return"ArcGISImageServiceLayer"===G||"ArcGISImageServiceVectorLayer"===G?l?B.isImageServiceSupportQuery(I.layerObject.capabilities)?q?t._shouldPassStatisticsCheck(q,L):!0:!1:!0:!1})}};t._shouldPassStatisticsCheck=function(l,q){return l?(l=!1,l=q.advancedQueryCapabilities?!!q.advancedQueryCapabilities.supportsStatistics:
!!q.supportsStatistics):!0};t.createQueryableLayerFilter=function(l){var q=t.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,l);l=t.createImageServiceLayerFilter(!0,l);return t.orCombineFilters([q,l])};t.andCombineFilters=function(l){return t._combineFilters(l,!0)};t.orCombineFilters=function(l){return t._combineFilters(l,!1)};t._combineFilters=function(l,q){return function(y){var D=new g,I=m.map(l,function(G){return G(y)});e(I).then(function(G){var L=!1;L=q?m.every(G,function(H){return H}):
m.some(G,function(H){return H});D.resolve(L)},function(G){console.error(G);D.reject(G)});return D}};return t})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),function(u,E,C,v,f,c,h){return C("dijit.tree.ObjectStoreModel",h,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(g){f.mixin(this,g);this.childrenCache={}},getRoot:function(g,p){if(this.root)g(this.root);
else{var r=this.store.query(this.query);r.then&&this.own(r);c(r,f.hitch(this,function(e){if(1!=e.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+e.length+" items, but must return exactly one");this.root=e[0];g(this.root);r.observe&&r.observe(f.hitch(this,function(b){this.onChange(b)}),!0)}),p)}},mayHaveChildren:function(){return!0},getChildren:function(g,p,r){var e=this.store.getIdentity(g);if(this.childrenCache[e])c(this.childrenCache[e],p,r);else{var b=this.childrenCache[e]=
this.store.getChildren(g);b.then&&this.own(b);b.observe&&this.own(b.observe(f.hitch(this,function(k,m,B){this.onChange(k);m!=B&&c(b,f.hitch(this,"onChildrenChange",g))}),!0));c(b,p,r)}},isItem:function(){return!0},getIdentity:function(g){return this.store.getIdentity(g)},getLabel:function(g){return g[this.labelAttr]},newItem:function(g,p,r,e){return this.store.put(g,{parent:p,before:e})},pasteItem:function(g,p,r,e,b,k){var m=new v;if(p===r&&!e&&!k)return m.resolve(!0),m;p&&!e?this.getChildren(p,f.hitch(this,
function(B){B=[].concat(B);var A=u.indexOf(B,g);B.splice(A,1);this.onChildrenChange(p,B);m.resolve(this.store.put(g,{overwrite:!0,parent:r,oldParent:p,before:k,isCopy:!1}))})):m.resolve(this.store.put(g,{overwrite:!0,parent:r,oldParent:p,before:k,isCopy:!0}));return m},onChange:function(){},onChildrenChange:function(){},onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),
function(u,E,C,v,f,c,h,g,p,r,e,b,k,m,B,A){var w=u([B._TreeNode,k],{templateString:v,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=c.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=c.toDom('\x3cinput type\x3d"checkbox" /\x3e');c.addClass(this.checkNode,"jimu-tree-check-node");c.place(this.checkNode,this.contentNode,
"first");this.own(e(this.checkNode,"click",f.hitch(this,this._onClick)));this.own(e(this.rowNode,"keydown",f.hitch(this,function(n,t){t.target=n;t.keyCode!==b.ENTER&&t.keyCode!==b.SPACE||this._onClick(t)},this.checkNode)));this.isLeaf?this.groupId?c.setStyle(this.checkNode,"display","none"):c.setStyle(this.checkNode,"display","inline"):c.setStyle(this.checkNode,"display","none");this.isLeaf?c.addClass(this.domNode,"jimu-tree-leaf-node"):c.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&
(this.checkNode.checked=!0,c.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,c.removeClass(this.domNode,"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(n){(n.target||n.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,n):this.tree._onClick(this,n)},_onChange:function(){this.isLeaf&&setTimeout(f.hitch(this,
function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return u([B,k],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+A.getRandomString()},postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,"jimu-tree");this.own(r.before(this,"onClick",f.hitch(this,this._jimuBeforeClick)));
this.rootLoadingIndicator&&c.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0;c.setAttr(this.domNode,"tabindex",0)},removeItem:function(n){this.model.store.remove(n)},getAllItems:function(){var n=this.getAllTreeNodeWidgets();return h.map(n,f.hitch(this,function(t){var l=t.item;l.selected=t.checkNode.checked;return l}))},getSelectedItems:function(){var n=this.getAllTreeNodeWidgets();n=h.filter(n,f.hitch(this,function(t){return t.checkNode.checked}));return h.map(n,
f.hitch(this,function(t){return t.item}))},getFilteredItems:function(n){var t=this.getAllTreeNodeWidgets();t=h.map(t,f.hitch(this,function(l){var q=l.item;q.selected=l.checkNode.checked;return q}));return h.filter(t,f.hitch(this,function(l){return n(l)}))},getTreeNodeByItemId:function(n){for(var t=this._getAllTreeNodeDoms(),l=0;l<t.length;l++){var q=m.byNode(t[l]);if(q.item.id.toString()===n.toString())return q}return null},selectItem:function(n){(n=this.getTreeNodeByItemId(n))&&n.isLeaf&&this.selectNodeWidget(n)},
unselectItem:function(n){(n=this.getTreeNodeByItemId(n))&&n.isLeaf&&n.unselect()},getAllLeafTreeNodeWidgets:function(){var n=this.getAllTreeNodeWidgets();return h.filter(n,f.hitch(this,function(t){return t.isLeaf}))},getAllTreeNodeWidgets:function(){var n=this._getAllTreeNodeDoms();return h.map(n,f.hitch(this,function(t){return m.byNode(t)}))},isLeafItem:function(n){return n&&n.isLeaf},_getAllTreeNodeDoms:function(){return p(".dijitTreeNode",this.domNode)},_createTreeNode:function(n){n.isLeaf=this.isLeafItem(n.item);
this.multiple||(n.groupId=this.uniqueId);return new w(n)},_onTreeNodeSelect:function(n){this.emit("item-select",{item:n.item,treeNode:n})},_onTreeNodeUnselect:function(n){this.emit("item-unselect",{item:n.item,treeNode:n})},selectNodeWidget:function(n){this.multiple||this.unselectAllLeafNodeWidgets();n.select()},_jimuBeforeClick:function(n,t,l){t.isLeaf&&(c.hasClass(l.target||l.srcElement,"jimu-tree-check-node")||(this.multiple?t.toggleSelect():this.selectNodeWidget(t)));return arguments},_onCheckNodeClick:function(n,
t,l){!this.multiple&&t&&this.unselectAllLeafNodeWidgets();g.stop(l);this.focusNode(n);setTimeout(f.hitch(this,function(){t?this.selectNodeWidget(n):n.unselect();this.onClick(n.item,n,l)}),0)},unselectAllLeafNodeWidgets:function(){var n=this.getAllLeafTreeNodeWidgets();h.forEach(n,f.hitch(this,function(t){t.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(u,E,C,v,f,c,h,g,p,r,e,b,k,m,B,A,w,n,t,l,q,y,D,I,G,L,H,J,Q,P,T,Z,da,aa,ba){function N(a){return A.delegate(a.promise||a,{addCallback:function(d){this.then(d)},addErrback:function(d){this.otherwise(d)}})}var Y=v("dijit._TreeNode",[G,L,H,J,Q],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(a){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=a;this._set("label",a);k("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:T,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(a){var d=Math.max(a,0)*this.tree._nodePixelIndent+"px";r.set(this.domNode,
"backgroundPosition",d+" 0px");r.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",d);u.forEach(this.getChildren(),function(x){x.set("indent",a+1)});this._set("indent",a)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(a){var d=this.tree,x=d.model;d._v10Compat&&a===x.root&&(a=null);this._applyClassAndStyle(a,"icon","Icon");this._applyClassAndStyle(a,"label","Label");this._applyClassAndStyle(a,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(a,d,x){var z="_"+d+"Class";d+="Node";var F=this[z];this[z]=this.tree["get"+x+"Class"](a,this.isExpanded);g.replace(this[d],this[z]||"",F||"");r.set(this[d],this.tree["get"+x+"Style"](a,this.isExpanded)||{})},_updateLayout:function(){var a=this.getParent();a=!a||!a.rowNode||"none"==a.rowNode.style.display;g.toggle(this.domNode,"dijitTreeIsRoot",a);g.toggle(this.domNode,"dijitTreeIsLast",!a&&!this.getNextSibling())},_setExpando:function(a){var d=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];a=a?0:this.isExpandable?this.isExpanded?1:2:3;g.replace(this.expandoNode,d[a],d);this.expandoNodeText.innerHTML=["*","-","+","*"][a]},expand:function(){if(this._expandDeferred)return N(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");g.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var a=b.wipeIn({node:this.containerNode,duration:I.defaultDuration}),d=this._expandDeferred=new f(function(){a.stop()});E.after(a,"onEnd",function(){d.resolve(!0)},!0);a.play();return N(d)},collapse:function(){if(this._collapseDeferred)return N(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");g.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var a=b.wipeOut({node:this.containerNode,duration:I.defaultDuration}),d=this._collapseDeferred=new f(function(){a.stop()});E.after(a,"onEnd",
function(){d.resolve(!0)},!0);a.play();return N(d)},indent:0,setChildItems:function(a){var d=this.tree,x=d.model,z=[],F=d.focusedChild,U=this.getChildren();u.forEach(U,function(K){H.prototype.removeChild.call(this,K)},this);this.defer(function(){u.forEach(U,function(K){if(!K._destroyed&&!K.getParent()){d.dndController.removeTreeNode(K);(function ca(M){var V=x.getIdentity(M.item),X=d._itemNodesMap[V];1==X.length?delete d._itemNodesMap[V]:(V=u.indexOf(X,M),-1!=V&&X.splice(V,1));u.forEach(M.getChildren(),
ca)})(K);if(d.persist){var R=u.map(K.getTreePath(),function(M){return d.model.getIdentity(M)}).join("/"),O;for(O in d._openedNodes)O.substr(0,R.length)==R&&delete d._openedNodes[O];d._saveExpandedNodes()}d.lastFocusedChild&&!h.isDescendant(d.lastFocusedChild.domNode,d.domNode)&&delete d.lastFocusedChild;F&&!h.isDescendant(F.domNode,d.domNode)&&d.focus();K.destroyRecursive()}})});this.state="Loaded";a&&0<a.length?(this.isExpandable=!0,u.forEach(a,function(K){var R=x.getIdentity(K),O=d._itemNodesMap[R];
if(O)for(var W=0;W<O.length;W++)if(O[W]&&!O[W].getParent()){var M=O[W];M.set("indent",this.indent+1);break}M||(M=this.tree._createTreeNode({item:K,tree:d,isExpandable:x.mayHaveChildren(K),label:d.getLabel(K),labelType:d.model&&d.model.labelType||"text",tooltip:d.getTooltip(K),ownerDocument:d.ownerDocument,dir:d.dir,lang:d.lang,textDir:d.textDir,indent:this.indent+1}),O?O.push(M):d._itemNodesMap[R]=[M]);this.addChild(M);(this.tree.autoExpand||this.tree._state(M))&&z.push(d._expandNode(M))},this),u.forEach(this.getChildren(),
function(K){K._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);a=c(z);this.tree._startPaint(a);return N(a)},getTreePath:function(){for(var a=this,d=[];a&&a!==this.tree.rootNode;)d.unshift(a.item),a=a.getParent();d.unshift(this.tree.rootNode.item);return d},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(a){this.inherited(arguments);var d=this.getChildren();0==d.length&&(this.isExpandable=!1,
this.collapse());u.forEach(d,function(x){x._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(a){this.labelNode.setAttribute("aria-selected",a?"true":"false");g.toggle(this.rowNode,"dijitTreeRowSelected",a)},focus:function(){y.focus(this.focusNode)}});k("dojo-bidi")&&Y.extend({_setTextDirAttr:function(a){!a||this.textDir==a&&this._created||(this._set("textDir",a),this.applyTextDir(this.labelNode),u.forEach(this.getChildren(),function(d){d.set("textDir",
a)},this))}});var S=v("dijit.Tree",[G,P,L,Q],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:Z,persist:!1,autoExpand:!1,dndController:ba,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(a,d){n.publish(this.id,A.mixin({tree:this,event:a},d||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new f;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(w(this.containerNode,
w.selector(".dijitTreeNode",t.enter),function(z){a._onNodeMouseEnter(D.byNode(this),z)}),w(this.containerNode,w.selector(".dijitTreeNode",t.leave),function(z){a._onNodeMouseLeave(D.byNode(this),z)}),w(this.containerNode,w.selector(".dijitTreeRow",q.press),function(z){a._onNodePress(D.getEnclosingWidget(this),z)}),w(this.containerNode,w.selector(".dijitTreeRow",q),function(z){a._onClick(D.getEnclosingWidget(this),z)}),w(this.containerNode,w.selector(".dijitTreeRow","dblclick"),function(z){a._onDblClick(D.getEnclosingWidget(this),
z)}));this.model||this._store2model();this.own(E.after(this.model,"onChange",A.hitch(this,"_onItemChange"),!0),E.after(this.model,"onChildrenChange",A.hitch(this,"_onItemChildrenChange"),!0),E.after(this.model,"onDelete",A.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){A.isString(this.dndController)&&(this.dndController=A.getObject(this.dndController));for(var d={},x=0;x<this.dndParams.length;x++)this[this.dndParams[x]]&&(d[this.dndParams[x]]=this[this.dndParams[x]]);
this.dndController=new this.dndController(this,d)}this._load();this.onLoadDeferred=N(this.pendingCommandsPromise);this.onLoadDeferred.then(A.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;m.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var a={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(a.mayHaveChildren=A.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(a.getChildren=A.hitch(this,function(d,x,z){this.getItemChildren(this._v10Compat&&d===this.model.root?null:d,x,z)}));this.model=new aa(a);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(A.hitch(this,function(a){var d=this.rootNode=this.tree._createTreeNode({item:a,tree:this,isExpandable:!0,label:this.label||this.getLabel(a),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(d.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(d.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(d.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
d.labelNode.setAttribute("role","presentation"),d.labelNode.removeAttribute("aria-selected"),d.containerNode.setAttribute("role","tree"),d.containerNode.setAttribute("aria-expanded","true"),d.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(d.domNode);a=this.model.getIdentity(a);this._itemNodesMap[a]?this._itemNodesMap[a].push(d):this._itemNodesMap[a]=[d];d._updateLayout();this._expandNode(d).then(A.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),A.hitch(this,function(a){console.error(this,": error loading root: ",a)}))},getNodesByItem:function(a){if(!a)return[];a=A.isString(a)?a:this.model.getIdentity(a);return[].concat(this._itemNodesMap[a])},_setSelectedItemAttr:function(a){this.set("selectedItems",[a])},_setSelectedItemsAttr:function(a){var d=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(A.hitch(this,function(){var x=
u.map(a,function(F){return!F||A.isString(F)?F:d.model.getIdentity(F)}),z=[];u.forEach(x,function(F){z=z.concat(d._itemNodesMap[F]||[])});this.set("selectedNodes",z)}))},_setPathAttr:function(a){return a.length?N(this.set("paths",[a]).then(function(d){return d[0]})):N(this.set("paths",[]).then(function(d){return d[0]}))},_setPathsAttr:function(a){function d(z,F){var U=z.shift(),K=u.filter(F,function(R){return R.getIdentity()==U})[0];if(K)return z.length?x._expandNode(K).then(function(){return d(z,
K.getChildren())}):K;throw new S.PathError("Could not expand path at "+U);}var x=this;return N(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return c(u.map(a,function(z){z=u.map(z,function(F){return F&&A.isObject(F)?x.model.getIdentity(F):F});if(z.length)return d(z,[x.rootNode]);throw new S.PathError("Empty path");}))}).then(function(z){x.set("selectedNodes",z);return x.paths}))},_setSelectedNodeAttr:function(a){this.set("selectedNodes",[a])},_setSelectedNodesAttr:function(a){this.dndController.setSelection(a)},
expandAll:function(){function a(x){return d._expandNode(x).then(function(){var z=u.filter(x.getChildren()||[],function(F){return F.isExpandable});return c(u.map(z,a))})}var d=this;return N(a(this.rootNode))},collapseAll:function(){function a(x){var z=u.filter(x.getChildren()||[],function(F){return F.isExpandable});z=c(u.map(z,a));return!x.isExpanded||x==d.rootNode&&!d.showRoot?z:z.then(function(){return d._collapseNode(x)})}var d=this;return N(a(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(a){return this.model.getLabel(a)},getIconClass:function(a,d){return!a||this.model.mayHaveChildren(a)?d?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(a,d){(a=this._getNext(d))&&a.isTreeNode&&this.focusNode(a)},_onUpArrow:function(a,d){if(a=d.getPreviousSibling())for(d=a;d.isExpandable&&d.isExpanded&&
d.hasChildren();)d=d.getChildren(),d=d[d.length-1];else if(a=d.getParent(),this.showRoot||a!==this.rootNode)d=a;d&&d.isTreeNode&&this.focusNode(d)},_onRightArrow:function(a,d){d.isExpandable&&!d.isExpanded?this._expandNode(d):d.hasChildren()&&(d=d.getChildren()[0])&&d.isTreeNode&&this.focusNode(d)},_onLeftArrow:function(a,d){d.isExpandable&&d.isExpanded?this._collapseNode(d):(a=d.getParent())&&a.isTreeNode&&(this.showRoot||a!==this.rootNode)&&this.focusNode(a)},focusLastChild:function(){var a=this._getLast();
a&&a.isTreeNode&&this.focusNode(a)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var a=this.rootNode;a.isExpanded;){var d=a.getChildren();if(!d.length)break;a=d[d.length-1]}return a},_getNext:function(a){if(a.isExpandable&&a.isExpanded&&a.hasChildren())return a.getChildren()[0];for(;a&&a.isTreeNode;){var d=a.getNextSibling();if(d)return d;a=a.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(a,d){return h.isDescendant(a,
d.expandoNode)||h.isDescendant(a,d.expandoNodeText)},_onNodePress:function(a,d){this.focusNode(a)},__click:function(a,d,x,z){var F=this.isExpandoNode(d.target,a);a.isExpandable&&(x||F)?this._onExpandoClick({node:a}):(this._publish("execute",{item:a.item,node:a,evt:d}),this[z](a.item,a,d),this.focusNode(a));d.stopPropagation();d.preventDefault()},_onClick:function(a,d){this.__click(a,d,this.openOnClick,"onClick")},_onDblClick:function(a,d){this.__click(a,d,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(a){a=
a.node;this.focusNode(a);a.isExpanded?this._collapseNode(a):this._expandNode(a)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(a){m.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(a)},_getRootOrFirstNode:function(){m.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(a){a._expandNodeDeferred&&
delete a._expandNodeDeferred;if("Loading"!=a.state&&a.isExpanded){var d=a.collapse();this.onClose(a.item,a);this._state(a,!1);this._startPaint(d);return d}},_expandNode:function(a){if(a._expandNodeDeferred)return a._expandNodeDeferred;var d=this.model,x=a.item,z=this;a._loadDeferred||(a.markProcessing(),a._loadDeferred=new f,d.getChildren(x,function(F){a.unmarkProcessing();a.setChildItems(F).then(function(){a._loadDeferred.resolve(F)})},function(F){console.error(z,": error loading "+a.label+" children: ",
F);a._loadDeferred.reject(F)}));d=a._loadDeferred.then(A.hitch(this,function(){var F=a.expand();this.onOpen(a.item,a);this._state(a,!0);return F}));this._startPaint(d);return d},focusNode:function(a){for(var d=[],x=this.domNode;x&&x.tagName&&"IFRAME"!==x.tagName.toUpperCase();x=x.parentNode)d.push({domNode:x.contentWindow||x,scrollLeft:x.scrollLeft||0,scrollTop:x.scrollTop||0});this.focusChild(a);this.defer(function(){for(var z=0,F=d.length;z<F;z++)d[z].domNode.scrollLeft=d[z].scrollLeft,d[z].domNode.scrollTop=
d[z].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(a){var d=this.model.getIdentity(a);if(d=this._itemNodesMap[d]){var x=this.getLabel(a),z=this.getTooltip(a);u.forEach(d,function(F){F.set({item:a,label:x,tooltip:z});F._updateItemClasses(a)})}},_onItemChildrenChange:function(a,d){a=this.model.getIdentity(a);(a=this._itemNodesMap[a])&&u.forEach(a,function(x){x.setChildItems(d)})},_onItemDelete:function(a){a=this.model.getIdentity(a);var d=this._itemNodesMap[a];
d&&(u.forEach(d,function(x){this.dndController.removeTreeNode(x);var z=x.getParent();z&&z.removeChild(x);this.lastFocusedChild&&!h.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!h.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();x.destroyRecursive()},this),delete this._itemNodesMap[a])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var a=C(this.cookieName);a&&u.forEach(a.split(","),function(d){this._openedNodes[d]=
!0},this)}},_state:function(a,d){if(!this.persist)return!1;var x=u.map(a.getTreePath(),function(z){return this.model.getIdentity(z)},this).join("/");if(1===arguments.length)return this._openedNodes[x];d?this._openedNodes[x]=!0:delete this._openedNodes[x];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var a=[],d;for(d in this._openedNodes)a.push(d);C(this.cookieName,a.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),
delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!A.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(a){a&&p.setMarginBox(this.domNode,a);this._nodePixelIndent=p.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(A.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},
_outstandingPaintOperations:0,_startPaint:function(a){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var d=A.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});l(a,d,d)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);
this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(a){return new Y(a)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});k("dojo-bidi")&&S.extend({_setTextDirAttr:function(a){a&&this.textDir!=a&&(this._set("textDir",a),this.rootNode.set("textDir",a))}});S.PathError=e("TreePathError");S._TreeNode=Y;return S})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(u,E,C,v){return C("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(f){v.mixin(this,f);this.connects=[];f=this.store;if(!f.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");f.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([E.after(f,
"onNew",v.hitch(this,"onNewItem"),!0),E.after(f,"onDelete",v.hitch(this,"onDeleteItem"),!0),E.after(f,"onSet",v.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var f;f=this.connects.pop();)f.remove()},getRoot:function(f,c){this.root?f(this.root):this.store.fetch({query:this.query,onComplete:v.hitch(this,function(h){if(1!=h.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+h.length+" items, but must return exactly one");this.root=h[0];f(this.root)}),onError:c})},mayHaveChildren:function(f){return u.some(this.childrenAttrs,
function(c){return this.store.hasAttribute(f,c)},this)},getChildren:function(f,c,h){var g=this.store;if(g.isItemLoaded(f)){for(var p=[],r=0;r<this.childrenAttrs.length;r++){var e=g.getValues(f,this.childrenAttrs[r]);p=p.concat(e)}var b=0;this.deferItemLoadingUntilExpand||u.forEach(p,function(m){g.isItemLoaded(m)||b++});0==b?c(p):u.forEach(p,function(m,B){g.isItemLoaded(m)||g.loadItem({item:m,onItem:function(A){p[B]=A;0==--b&&c(p)},onError:h})})}else{var k=v.hitch(this,arguments.callee);g.loadItem({item:f,
onItem:function(m){k(m,c,h)},onError:h})}},isItem:function(f){return this.store.isItem(f)},fetchItemByIdentity:function(f){this.store.fetchItemByIdentity(f)},getIdentity:function(f){return this.store.getIdentity(f)},getLabel:function(f){return this.labelAttr?this.store.getValue(f,this.labelAttr):this.store.getLabel(f)},newItem:function(f,c,h){var g={parent:c,attribute:this.childrenAttrs[0]},p;this.newItemIdAttr&&f[this.newItemIdAttr]?this.fetchItemByIdentity({identity:f[this.newItemIdAttr],scope:this,
onItem:function(r){r?this.pasteItem(r,null,c,!0,h):(p=this.store.newItem(f,g))&&void 0!=h&&this.pasteItem(p,c,c,!1,h)}}):(p=this.store.newItem(f,g))&&void 0!=h&&this.pasteItem(p,c,c,!1,h)},pasteItem:function(f,c,h,g,p){var r=this.store,e=this.childrenAttrs[0];c&&u.forEach(this.childrenAttrs,function(k){if(r.containsValue(c,k,f)){if(!g){var m=u.filter(r.getValues(c,k),function(B){return B!=f});r.setValues(c,k,m)}e=k}});if(h)if("number"==typeof p){var b=r.getValues(h,e).slice();b.splice(p,0,f);r.setValues(h,
e,b)}else r.setValues(h,e,r.getValues(h,e).concat(f))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(f,c){c&&this.getChildren(c.item,v.hitch(this,function(h){this.onChildrenChange(c.item,h)}))},onDeleteItem:function(f){this.onDelete(f)},onSetItem:function(f,c){if(-1!=u.indexOf(this.childrenAttrs,c))this.getChildren(f,v.hitch(this,function(h){this.onChildrenChange(f,h)}));else this.onChange(f)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(u,E,C,v,f){return E("dijit.tree.ForestStoreModel",f,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(c){this.root={store:this,root:!0,id:c.rootId,label:c.rootLabel,children:c.rootChildren}},mayHaveChildren:function(c){return c===this.root||this.inherited(arguments)},getChildren:function(c,h,g){c===this.root?this.root.children?h(this.root.children):this.store.fetch({query:this.query,onComplete:v.hitch(this,
function(p){this.root.children=p;h(p)}),onError:g}):this.inherited(arguments)},isItem:function(c){return c===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(c){if(c.identity==this.root.id){var h=c.scope||C.global;c.onItem&&c.onItem.call(h,this.root)}else this.inherited(arguments)},getIdentity:function(c){return c===this.root?this.root.id:this.inherited(arguments)},getLabel:function(c){return c===this.root?this.root.label:this.inherited(arguments)},newItem:function(c,h,g){return h===
this.root?(this.onNewRootItem(c),this.store.newItem(c)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(c,h,g,p,r){if(h===this.root&&!p)this.onLeaveRoot(c);this.inherited(arguments,[c,h===this.root?null:h,g===this.root?null:g,p,r]);if(g===this.root)this.onAddToRoot(c)},onAddToRoot:function(c){console.log(this,": item ",c," added to root")},onLeaveRoot:function(c){console.log(this,": item ",c," removed from root")},_requeryTop:function(){var c=this.root.children||[];this.store.fetch({query:this.query,
onComplete:v.hitch(this,function(h){this.root.children=h;if(c.length!=h.length||u.some(c,function(g,p){return h[p]!=g}))this.onChildrenChange(this.root,h)})})},onNewItem:function(c,h){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(c){-1!=u.indexOf(this.root.children,c)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(c,h,g,p){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),
function(u,E,C,v,f,c,h,g,p,r,e){return E("dijit.tree._dndSelector",e,{constructor:function(){this.selection={};this.anchor=null;this.events.push(g(this.tree.domNode,p.press,v.hitch(this,"onMouseDown")),g(this.tree.domNode,p.release,v.hitch(this,"onMouseUp")),g(this.tree.domNode,p.move,v.hitch(this,"onMouseMove")),g(this.tree.domNode,r.press,v.hitch(this,"onClickPress")),g(this.tree.domNode,r.release,v.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var b=[],k=this.selection,
m;for(m in k)b.push(k[m]);return b},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(b,k){this.setSelection(this.getSelectedTreeNodes().concat([b]));k&&(this.anchor=b);return b},removeTreeNode:function(b){var k=u.filter(this.getSelectedTreeNodes(),function(m){return!c.isDescendant(m.domNode,b.domNode)});this.setSelection(k);return b},isTreeNodeSelected:function(b){return b.id&&!!this.selection[b.id]},
setSelection:function(b){var k=this.getSelectedTreeNodes();u.forEach(this._setDifference(k,b),v.hitch(this,function(m){m.setSelected(!1);this.anchor==m&&delete this.anchor;delete this.selection[m.id]}));u.forEach(this._setDifference(b,k),v.hitch(this,function(m){m.setSelected(!0);this.selection[m.id]=m}));this._updateSelectionProperties()},_setDifference:function(b,k){u.forEach(k,function(m){m.__exclude__=!0});b=u.filter(b,function(m){return!m.__exclude__});u.forEach(k,function(m){delete m.__exclude__});
return b},_updateSelectionProperties:function(){var b=this.getSelectedTreeNodes(),k=[],m=[];u.forEach(b,function(B){var A=B.getTreePath();m.push(B);k.push(A)},this);b=u.map(m,function(B){return B.item});this.tree._set("paths",k);this.tree._set("path",k[0]||[]);this.tree._set("selectedNodes",m);this.tree._set("selectedNode",m[0]||null);this.tree._set("selectedItems",b);this.tree._set("selectedItem",b[0]||null)},onClickPress:function(b){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(b.target,
this.current))){"mousedown"==b.type&&h.isLeft(b)&&b.preventDefault();var k="keydown"==b.type?this.tree.focusedChild:this.current;if(k){var m=f.getCopyKeyState(b),B=k.id;this.singular||b.shiftKey||!this.selection[B]?(this._doDeselect=!1,this.userSelect(k,m,b.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(b){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==b.type?this.tree.focusedChild:this.current,f.getCopyKeyState(b),b.shiftKey))},onMouseMove:function(){this._doDeselect=
!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(b,k){if(b===k)return 0;if("sourceIndex"in document.documentElement)return b.sourceIndex-k.sourceIndex;if("compareDocumentPosition"in document.documentElement)return b.compareDocumentPosition(k)&2?1:-1;if(document.createRange){var m=doc.createRange();m.setStartBefore(b);b=doc.createRange();b.setStartBefore(k);return m.compareBoundaryPoints(m.END_TO_END,b)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");
},userSelect:function(b,k,m){if(this.singular)this.anchor==b&&k?this.selectNone():(this.setSelection([b]),this.anchor=b);else if(m&&this.anchor){k=this._compareNodes(this.anchor.rowNode,b.rowNode);m=this.anchor;0>k?k=m:(k=b,b=m);for(m=[];k!=b;)m.push(k),k=this.tree._getNext(k);m.push(b);this.setSelection(m)}else this.selection[b.id]&&k?this.removeTreeNode(b):k?this.addTreeNode(b,!0):(this.setSelection([b]),this.anchor=b)},getItem:function(b){return{data:this.selection[b],type:["treeNode"]}},forInSelectedItems:function(b,
k){k=k||C.global;for(var m in this.selection)b.call(k,this.getItem(m),m,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(u,E,C,v,f,c){return E("dijit.tree._dndContainer",null,{constructor:function(h,g){this.tree=h;this.node=h.domNode;v.mixin(this,g);this.containerState="";C.add(this.node,"dojoDndContainer");this.events=[f(this.node,c.enter,v.hitch(this,"onOverEvent")),f(this.node,c.leave,
v.hitch(this,"onOutEvent")),u.after(this.tree,"_onNodeMouseEnter",v.hitch(this,"onMouseOver"),!0),u.after(this.tree,"_onNodeMouseLeave",v.hitch(this,"onMouseOut"),!0),f(this.node,"dragstart, selectstart",function(p){p.preventDefault()})]},destroy:function(){for(var h;h=this.events.pop();)h.remove();this.node=this.parent=null},onMouseOver:function(h){this.current=h},onMouseOut:function(){this.current=null},_changeState:function(h,g){var p="dojoDnd"+h;h=h.toLowerCase()+"State";C.replace(this.node,p+
g,p+this[h]);this[h]=g},_addItemClass:function(h,g){C.add(h,"dojoDndItem"+g)},_removeItemClass:function(h,g){C.remove(h,"dojoDndItem"+g)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"widgets/Swipe/MultSelector/MultSelector":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/on jimu/utils dojo/_base/html ./a11y/MultSelector dojo/text!./MultSelector.html jimu/dijit/CheckBox dijit/form/Select dojox/form/CheckedMultiSelect dijit/form/ValidationTextBox xstyle/css!dojox/form/resources/CheckedMultiSelect.css".split(" "),
function(u,E,C,v,f,c,h,g,p,r,e){u=E([v,f,c,u],{templateString:e,_LAST_VALUEL:"",postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this.a11y_initEvents();this.own(h(this.selector,"change",C.hitch(this,function(b){this._updateMultSelectorLabel(this._getOptionsLabelsByValues(b));this._LAST_VALUEL&&(this.selector.dropDownButton.toggleDropDown(),this.selector.dropDownButton.toggleDropDown());this._LAST_VALUEL.toString()!==b.toString()&&(this.selector.dropDownButton.dropDown.lastFocusedChild&&
this.selector.dropDownButton.dropDown.lastFocusedChild.domNode&&this.selector.dropDownButton.dropDown.lastFocusedChild.domNode.focus(),this.emit("change",b),this._LAST_VALUEL=b)})))},initOptions:function(b,k){this.disable();this._initMultSelectorLabel();var m=null;k&&(m=this.selector.getOptions());this.selector.removeOption(this.selector.getOptions());for(var B=[],A=0,w=b.length;A<w;A++){var n=b[A];this.selector.addOption(n);this._hasOptionMultSelected(n,k?m:b)&&B.push(n.value)}this.selector.set("value",
B);this._updateMultSelectorLabel(this._getOptionsLabelsByValues(B));this.enable()},setOptions:function(b){this.selector.set("options",b)},getOptions:function(){return this.selector.get("options")},reset:function(){this.selector.set("options",[{value:"",label:""}]);this.selector.reset()},setValue:function(b){this.setConfig(b)},setConfig:function(b){this._setMultSelectorEmpty();this.selector.set("value",b)},getConfig:function(){return this.selector.getValue()},disable:function(){this.selector.set("disabled",
!0);this._DISABLED=!0},enable:function(){this.selector.set("disabled",!1);this._DISABLED=!1},_initMultSelectorLabel:function(){this.selector.labelDiv&&(p.empty(this.selector.labelDiv),p.destroy(this.selector.labelDiv),this.selector.labelDiv=null);this.a11y_initSelectorLabel();this.selector.labelDiv=p.create("div",{"class":"dijitReset dijitInline dijitButtonText multselector-label-container",tabindex:"-1"},this.selector.dropDownButton._buttonNode,"first");p.addClass(this.selector.labelDiv,"label-max-height");
p.addClass(this.selector.dropDownMenu.domNode,"mult-selector-dropdown-max-height");this._updateMultSelectorLabel([this.nls.defaultLayerHolder])},_setMultSelectorEmpty:function(){this.selector.set("value",[]);this._updateMultSelectorLabel([this.nls.defaultLayerHolder])},_updateMultSelectorLabel:function(b){p.empty(this.selector.labelDiv);b&&0!==b.length||this._setMultSelectorEmpty();for(var k=0,m=b.length;k<m;k++)p.create("div",{"class":"dijitReset dijitButtonText multselector-label",innerHTML:g.sanitizeHTML(b[k])},
this.selector.labelDiv)},_getOptionsLabelsByValues:function(b){for(var k=this.getOptions(),m=[],B=0,A=k.length;B<A;B++)for(var w=k[B],n=0,t=b.length;n<t;n++)w.value===b[n]&&m.push(w.label);return m},_hasOptionMultSelected:function(b,k){for(var m=0,B=k.length;m<B;m++){var A=k[m];if(A.value===b.value&&!0===A.selected)return!0}return!1}});u.extend(r);return u})},"widgets/Swipe/MultSelector/a11y/MultSelector":function(){define(["dojo/_base/lang","dojo/on","dojo/query","dojo/_base/html","dijit/a11yclick"],
function(u,E,C,v,f){return{a11y_init:function(){},a11y_initEvents:function(){this.own(E(this.selector,f,u.hitch(this,function(){this.selector.dropDownButton.toggleDropDown();for(var c=C(".dijitReset.dijitMenuItemLabel",this.selector.dropDown.domNode),h=0,g=c.length;h<g;h++){var p=c[h];v.attr(p,"title",p.innerText)}})))},a11y_initSelectorLabel:function(){var c=C(".dijitButtonText",this.selector.dropDownButton.buttonNode)[0];v.addClass(c,"hide");v.addClass(this.selector.dropDownButton.buttonNode,"hide");
v.setAttr(this.selector.dropDownButton.titleNode,"tabindex",-1)}}})},"widgets/Swipe/setting/Placement":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/on dojo/_base/html dojo/text!./Placement.html".split(" "),function(u,E,C,v,f,c,h,g,p){return E([v,f,c,u],{templateString:p,state:{direction:""},postCreate:function(){this.inherited(arguments)},startup:function(){this.own(h(this.showLeftSide,"click",C.hitch(this,
function(){this._setDisplay(this.showLeftSide)})));this.own(h(this.showRigthSide,"click",C.hitch(this,function(){this._setDisplay(this.showRigthSide)})));this.own(h(this.showUpSide,"click",C.hitch(this,function(){this._setDisplay(this.showUpSide)})));this.own(h(this.showDownSide,"click",C.hitch(this,function(){this._setDisplay(this.showDownSide)})));this.setVH(this.config.style);this.initInvert(this.config.invertPlacement);this.inherited(arguments)},setConfig:function(){},getConfig:function(){var r=
!1;if(g.hasClass(this.showLeftSide,"selected")||g.hasClass(this.showUpSide,"selected"))r=!1;else if(g.hasClass(this.showRigthSide,"selected")||g.hasClass(this.showDownSide,"selected"))r=!0;return r},setVH:function(r){"scope"===r?g.addClass(this.domNode,"hide"):(g.removeClass(this.domNode,"hide"),g.removeClass(this.vertical,"hide"),g.removeClass(this.horizontal,"hide"),"horizontal"===r?(g.addClass(this.vertical,"hide"),this.state.direction="horizontal"):(g.addClass(this.horizontal,"hide"),this.state.direction=
"vertical"),r=this.getConfig(),this.initInvert(r))},initInvert:function(r){g.removeClass(this.showLeftSide,"selected");g.removeClass(this.showRigthSide,"selected");g.removeClass(this.showUpSide,"selected");g.removeClass(this.showDownSide,"selected");r?"vertical"===this.state.direction?g.addClass(this.showRigthSide,"selected"):g.addClass(this.showDownSide,"selected"):"vertical"===this.state.direction?g.addClass(this.showLeftSide,"selected"):g.addClass(this.showUpSide,"selected")},_setDisplay:function(r){g.removeClass(this.showLeftSide,
"selected");g.removeClass(this.showRigthSide,"selected");g.removeClass(this.showUpSide,"selected");g.removeClass(this.showDownSide,"selected");r&&g.addClass(r,"selected")}})})},"jimu/dijit/ColorPickerButton":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/_base/Color dijit/TooltipDialog dijit/popup jimu/dijit/ColorSelector".split(" "),function(u,E,C,v,f,c,h,g,p,r){return u([E,C],{baseClass:"jimu-color-picker-btn",declaredClass:"jimu.dijit.ColorPickerButton",
templateString:'\x3cdiv\x3e\x3cdiv class\x3d"color-node" data-dojo-attach-point\x3d"colorNode"\x3e\x3c/div\x3e\x3cdiv class\x3d"seperator"\x3e\x3c/div\x3e\x3cdiv class\x3d"action-node" data-dojo-attach-point\x3d"actionNode"\x3e\x3c/div\x3e\x3c/div\x3e',_isTooltipDialogOpened:!1,color:null,showHex:!0,showHsv:!0,showRgb:!0,ensureMode:!1,postMixInProperties:function(){this.nls=window.jimuNls.common},postCreate:function(){this.inherited(arguments);this.color?this.color instanceof h||(this.color=new h(this.color)):
this.color=new h("#ccc");f.setStyle(this.colorNode,"backgroundColor",this.color.toHex());this.colorNode.title=this.color.toHex();this.showLabel&&this._changeLabel(this.color);this._createTooltipDialog(this.domNode);this._hideTooltipDialog();this.own(c(this.colorNode,"click",v.hitch(this,this._onNodeClick)));this.own(c(this.actionNode,"click",v.hitch(this,this._onNodeClick)));this.own(c(document.body,"click",v.hitch(this,function(e){this.isPartOfPopup(e.target||e.srcElement)||this._hideTooltipDialog()})))},
_onNodeClick:function(e){e.stopPropagation();e.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():this._showTooltipDialog()},destroy:function(){p.close(this.tooltipDialog);this.picker.destroy();this.tooltipDialog.destroy();this.inherited(arguments)},isPartOfPopup:function(e){var b=this.tooltipDialog.domNode;return e===b||f.isDescendant(e,b)},hideTooltipDialog:function(){this._hideTooltipDialog()},_showTooltipDialog:function(){p.open({parent:this.getParent(),popup:this.tooltipDialog,
around:this.domNode});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){p.close(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var e=f.create("div");this.tooltipDialog=new g({content:e});f.addClass(this.tooltipDialog.domNode,"jimu-color-picker-dialog");this.picker=new r({showHex:this.showHex,showRgb:this.showRgb,showHsv:this.showHsv,value:this.color.toHex(),onChange:v.hitch(this,function(k){this.ensureMode||(k=new h(k),this.setColor(k))})});this.picker.placeAt(e);
this.picker.startup();if(this.ensureMode){var b=f.create("div",{"class":"jimu-btn jimu-btn-vacation jimu-float-trailing jimu-leading-margin1",title:this.nls.cancel,innerHTML:this.nls.cancel},e);this.own(c(b,"click",v.hitch(this,function(){this._hideTooltipDialog()})));b=f.create("div",{"class":"jimu-btn jimu-float-trailing jimu-leading-margin1",title:this.nls.ok,innerHTML:this.nls.ok},e);this.own(c(b,"click",v.hitch(this,function(){var k=this.picker.get("value");this.setColor(new h(k));this._hideTooltipDialog()})));
e=f.create("div",{"class":"jimu-btn jimu-float-trailing jimu-leading-margin1",title:this.nls.apply,innerHTML:this.nls.apply},e);this.own(c(e,"click",v.hitch(this,function(){var k=this.picker.get("value");this.setColor(new h(k))})))}},setColor:function(e){if(e instanceof h){var b=this.color,k="";b&&(k=b.toHex());b=e.toHex();this.color=e;f.setStyle(this.colorNode,"backgroundColor",b);k!==b&&(this.picker.set("value",b),this.onChange(new h(b)))}},getColor:function(){return this.color},onChange:function(e){}})})},
"widgets/Swipe/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:widgets/Swipe/MultSelector/MultSelector.html":'\x3cdiv class\x3d"mult-selector"\x3e\r\n\t\x3cselect data-dojo-type\x3d"dojox/form/CheckedMultiSelect" multiple\x3d"true" dropDown\x3d"true"\r\n\t\tdata-dojo-attach-point\x3d"selector"\x3e\x3c/select\x3e\r\n\x3c/div\x3e',
"url:widgets/Swipe/setting/LayersSetting.html":'\x3cdiv class\x3d"default-layer-setting"\x3e\r\n\t\x3cdiv class\x3d"layer-section swipe-mode"\x3e\r\n\t\t\x3cspan class\x3d"layer-text sub-title"\x3e${nls.swipeMode}\x3c/span\x3e\r\n\t\t\x3cdiv class\x3d"swipe-radio"\x3e\r\n\t\t\t\x3cinput data-dojo-attach-point\x3d"singleLayerRaido" data-dojo-type\x3d"dijit/form/RadioButton" type\x3d"radio" class\x3d"jimu-radio-btn blue-radio"\r\n\t\t\t name\x3d"modeRaido" id\x3d"singleLayerRaido" /\x3e\r\n\t\t\t\x3clabel data-dojo-attach-point\x3d"singleLayerRaidoLabel" for\x3d"singleLayerRaido"\x3e${nls.singleLayer}\x3c/label\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"swipe-radio"\x3e\r\n\t\t\t\x3cinput data-dojo-attach-point\x3d"multipleLayerRaido" data-dojo-type\x3d"dijit/form/RadioButton" type\x3d"radio" class\x3d"jimu-radio-btn blue-radio"\r\n\t\t\t name\x3d"modeRaido" id\x3d"multipleLayerRaido" /\x3e\r\n\t\t\t\x3clabel data-dojo-attach-point\x3d"multipleLayerRaidoLabel" for\x3d"multipleLayerRaido"\x3e${nls.MultipleLayers}\x3c/label\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"layer-section"\x3e\r\n\t\t\x3cspan class\x3d"layer-text"\x3e${nls.layersAvailable}\x3c/span\x3e\r\n\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error hide" data-dojo-attach-point\x3d"layersChooserError"\x3e\x3c/span\x3e\r\n\t\t\x3cdiv class\x3d"layers-chooser" data-dojo-attach-point\x3d"layersChooser"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"layer-section"\x3e\r\n\t\t\x3cspan class\x3d"layer-text" data-dojo-attach-point\x3d"layerTextNode"\x3e${nls.layerText}\x3c/span\x3e\r\n\t\t\x3cdiv class\x3d"select-container default-layers-selector"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"swipeLayersContainer"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"swipeLayers"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"defaultLayersContainer" class\x3d"hide"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"defaultLayersSelectorContainer"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3clabel class\x3d"layer-hint"\x3e${nls.layerHint}\x3c/label\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Swipe/setting/Placement.html":'\x3cdiv class\x3d"default-layer-setting placement"\x3e\r\n\t\x3cspan class\x3d"layer-text sub-title"\x3e${nls.placement}\x3c/span\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"vertical" class\x3d"vh"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"showLeftSide" title\x3d"${nls.showLeftSide}"\r\n\t\t\tclass\x3d"show-leftside placement-icons selected"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"showRigthSide" title\x3d"${nls.showRigthSide}"\r\n\t\tclass\x3d"show-rightside placement-icons"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"horizontal" class\x3d"vh hide"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"showUpSide" title\x3d"${nls.showUpSide}"\r\n\t\t\tclass\x3d"show-upside placement-icons selected"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"showDownSide" title\x3d"${nls.showDownSide}"\r\n\t\t\tclass\x3d"show-downside placement-icons"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Swipe/setting/Setting.html":'\x3cdiv style\x3d"width:100%;height:300px;"\x3e\r\n  \x3cdiv class\x3d"style-section"\x3e\r\n    \x3cspan class\x3d"style-text"\x3e${nls.styleText}\x3c/span\x3e\r\n    \x3cdiv class\x3d"style-items"\x3e\r\n      \x3cdiv class\x3d"style-item jimu-float-leading jimu-leading-margin2" data-dojo-attach-point\x3d"verticalNode"\x3e\r\n        \x3cdiv class\x3d"style-vertical style-item-image"\x3e\x3c/div\x3e\r\n        \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" id\x3d"vertical-radio" data-dojo-attach-point\x3d"vertical"/\x3e\r\n        \x3clabel for\x3d"vertical-radio"\x3e${nls.vertical}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"style-item jimu-float-leading jimu-leading-margin2" data-dojo-attach-point\x3d"horizontalNode"\x3e\r\n        \x3cdiv class\x3d"style-horizontal style-item-image"\x3e\x3c/div\x3e\r\n        \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" id\x3d"horizontal-radio" data-dojo-attach-point\x3d"horizontal"/\x3e\r\n        \x3clabel for\x3d"horizontal-radio"\x3e${nls.horizontal}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"style-item jimu-float-leading jimu-leading-margin2" data-dojo-attach-point\x3d"scopeNode"\x3e\r\n        \x3cdiv class\x3d"style-scope style-item-image"\x3e\x3c/div\x3e\r\n        \x3cinput data-dojo-type\x3d"dijit/form/RadioButton" id\x3d"scope-radio" data-dojo-attach-point\x3d"scope"/\x3e\r\n        \x3clabel for\x3d"scope-radio"\x3e${nls.scope}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"layer-section" data-dojo-attach-point\x3d"placementContainer"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv class\x3d"layer-section" data-dojo-attach-point\x3d"handlerColorPicker"\x3e\r\n      \x3cspan class\x3d"layer-text sub-title"\x3e${nls.barColor}\x3c/span\x3e\r\n      \x3cdiv class\x3d"handler-color-picker" data-dojo-attach-point\x3d"colorPicker" data-dojo-type\x3d"jimu/dijit/ColorPickerButton"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"layer-section"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"layersSettingContainer"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"layer-section" data-dojo-attach-point\x3d"isZoomNodeContainer"\x3e\r\n    \x3cdiv class\x3d"layer-text zoom-node" data-dojo-attach-point\x3d"isZoomNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"layer-section"\x3e\r\n    \x3cdiv class\x3d"layer-text zoom-node" data-dojo-attach-point\x3d"isHidePanelNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Swipe/setting/css/style.css":'.mult-selector .dojoxCheckedMultiSelect{width: 100%;}.mult-selector .label-max-height{max-height: 84px; overflow-y: auto;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton{width: 100%; border: none !important; background-color: transparent !important; table-layout: fixed;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .multselector-label-container{width: 100%; overflow-x: hidden;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .multselector-label-container::-webkit-scrollbar{background:#000;} .mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonNode .multselector-label-container .multselector-label{width: 100%; font-family: none !important; height: 26px; text-align: left !important; padding: 4px 10px; text-overflow: ellipsis; white-space: nowrap; table-layout: fixed; overflow: hidden; text-align: start;}.jimu-rtl .mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonNode .multselector-label-container .multselector-label{text-align: right !important;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitArrowButton {width: 100%; display: flex; background-color: transparent;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitArrowButton .dijitArrowButtonInner{align-self: center;}.mult-selector .dojoxCheckedMultiSelectHover .dijitDownArrowButtonHover,.mult-selector .dojoxCheckedMultiSelectButtonFocused .dijitArrowButton{background-color: transparent !important;}.mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonContents {border: none;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu.mult-selector-dropdown-max-height{max-height: 260px; overflow-y: auto;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable {background-color: transparent; table-layout: fixed;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable .dijitMenuItem{height: 26px;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable .dijitMenuItem,.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitMenuTable .dijitMenuItem td{border: none;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dijitReset .dijitMenuItemIconCell{width: 36px; padding: 0 10px; padding: 3px 10px; border: none;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dojoxCheckedMultiSelectSelectedOption{height: 26px;}.dijitMenuPopup .dojoxCheckedMultiSelectMenu .dojoxCheckedMultiSelectCheckBoxInput{display: none;} .claro .LaunchpadTheme .mult-selector .dijitDropDownButton .dijitArrowButtonInner:before,.claro .LaunchpadTheme .mult-selector .dijitArrowButton:before {content: "n"; display: none;}.claro .LaunchpadTheme .jimu-widget-swipe .mult-selector .dijitArrowButton {padding: 0; height: 100%;}.claro .LaunchpadTheme .mult-selector .dojoxCheckedMultiSelect .dojoxCheckedMultiSelectButton .dijitButtonNode .multselector-label-container .multselector-label{font-size: 14px; height: 30px;}.jimu-widget-swipe-setting{margin:0; padding:0; font-size:14px; color: #000;}.jimu-widget-swipe-setting .hide{display: none !important;}.jimu-widget-swipe-setting .transparent{visibility: hidden;}.jimu-widget-swipe-setting .style-text,.jimu-widget-swipe-setting .layer-text{font-weight: bold;}.jimu-widget-swipe-setting .style-section .style-items{margin: 5px 0 5px 0; overflow: hidden; font-size: 10px;}.jimu-widget-swipe-setting .style-section .style-item {text-align: center; color: #000; cursor: pointer;}.jimu-widget-swipe-setting .style-section .style-item label {font-size: 14px;}.jimu-widget-swipe-setting .style-section .style-item:first-child{margin-left: 0;}.jimu-rtl .style-item:first-child {margin-left: 2em; margin-right: 0;}.jimu-widget-swipe-setting .style-section .style-item-image{position: relative; width: 166px; height: 100px; margin-bottom: 10px;}.jimu-widget-swipe-setting .sub-title{min-width: 120px;}.jimu-widget-swipe-setting .layers-chooser{width: 100%; height: 130px; overflow-y: scroll; border: 1px solid #D7D7D7;}.jimu-widget-swipe-setting .default-layers-selector{border: 1px solid #D7D7D7;}.jimu-widget-swipe-setting .layers-chooser .jimu-basic-layer-chooser-from-map {position: relative;}.jimu-widget-swipe-setting .layers-chooser .jimu-basic-layer-chooser-from-map .jimu-tree{position: relative !important;}.jimu-widget-swipe-setting .layers-chooser .jimu-basic-layer-chooser-from-map-lite .tree-root-ul{border: none;}.jimu-widget-swipe-setting .style-item .style-vertical{background: url(images/vertical.png) center center; background-size: contain; background-repeat: no-repeat;}.jimu-widget-swipe-setting .style-item .style-horizontal{background: url(images/horizontal.png) center center; background-size: contain; background-repeat: no-repeat;}.jimu-widget-swipe-setting .style-item .style-scope{background: url(images/scope.png) center center; background-size: contain; background-repeat: no-repeat;}.jimu-widget-swipe-setting .placement{display: flex; align-items: center;}.jimu-widget-swipe-setting .placement .vh{display: flex;}.jimu-widget-swipe-setting .placement .placement-icons{display: flex; background-size: contain; background-repeat: no-repeat; background-position: center; height: 24px; width: 24px; margin: 0 10px;}.jimu-widget-swipe-setting .placement .show-leftside{background-image: url(images/l2r.svg);}.jimu-widget-swipe-setting .placement .show-leftside.selected{background-image: url(images/l2r_selected.svg);}.jimu-widget-swipe-setting .placement .show-rightside{background-image: url(images/r2l.svg); margin: 0;}.jimu-widget-swipe-setting .placement .show-rightside.selected{background-image: url(images/r2l_selected.svg);}.jimu-widget-swipe-setting .placement .show-upside{background-image: url(images/u2d.svg);}.jimu-widget-swipe-setting .placement .show-upside.selected{background-image: url(images/u2d_selected.svg);}.jimu-widget-swipe-setting .placement .show-downside{background-image: url(images/d2u.svg); margin: 0;}.jimu-widget-swipe-setting .placement .show-downside.selected{background-image: url(images/d2u_selected.svg);}.jimu-widget-swipe-setting .layer-text{margin: 10px 0 10px 0; display: inline-block;}.jimu-widget-swipe-setting .layer-hint{display: inline-block; margin-top: 5px; color: #a0acbf; font-size: 12px; font-style: italic;}.claro .jimu-widget-swipe-setting .dijitSelect {color: #7989a0;}.claro .jimu-widget-swipe-setting .dijitSelectHover,.claro .jimu-widget-swipe-setting .dijitSelectFocused {border-color: #759dc0;}.claro .jimu-widget-swipe-setting .dijitSelect .dijitButtonContents {border-style: none; background: #fafafc !important;}.claro .jimu-widget-swipe-setting .dijitSelect .dijitArrowButton {border-style: none; background: #fafafc !important;}.jimu-widget-swipe-setting .layer-section .dijitValidationTextBox {width: 100%; border: none;}.jimu-widget-swipe-setting .swipe-mode{display: flex; margin-top: 5px; align-items: center;}.jimu-widget-swipe-setting .default-layer-setting .swipe-radio{margin: 0 10px;}.jimu-widget-swipe-setting .layer-section .jimu-icon-error{vertical-align: sub;}.jimu-widget-swipe-setting .layers-chooser.error {-webkit-animation: swipe-err-glow 800ms ease-out infinite alternate; -moz-animation: swipe-err-glow 800ms ease-out infinite alternate; -o-animation: swipe-err-glow 800ms ease-out infinite alternate; -ms-animation: swipe-err-glow 800ms ease-out infinite alternate; animation: swipe-err-glow 800ms ease-out infinite alternate; box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF; outline: none;}@-webkit-keyframes swipe-err-glow {0% {border-color: rgb(179, 22, 22); box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF;} 100% {border-color: #F00; box-shadow: 0 0 10px rgba(255, 0, 0, .6), inset 0 0 10px rgba(255, 0, 0, .4), 0 2px 0 #FFF;}}@-moz-keyframes swipe-err-glow {0% {border-color: rgb(179, 22, 22); box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF;} 100% {border-color: #F00; box-shadow: 0 0 10px rgba(255, 0, 0, .6), inset 0 0 10px rgba(255, 0, 0, .4), 0 2px 0 #FFF;}}@-o-keyframes swipe-err-glow {0% {border-color: rgb(179, 22, 22); box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF;} 100% {border-color: #F00; box-shadow: 0 0 10px rgba(255, 0, 0, .6), inset 0 0 10px rgba(255, 0, 0, .4), 0 2px 0 #FFF;}}@-ms-keyframes swipe-err-glow {0% {border-color: rgb(179, 22, 22); box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF;} 100% {border-color: #F00; box-shadow: 0 0 10px rgba(255, 0, 0, .6), inset 0 0 10px rgba(255, 0, 0, .4), 0 2px 0 #FFF;}}@keyframes swipe-err-glow {0% {border-color: rgb(179, 22, 22); box-shadow: 0 0 3px rgba(255, 0, 0, .2), inset 0 0 3px rgba(255, 0, 0, .1), 0 2px 0 #FFF;} 100% {border-color:#F00; box-shadow: 0 0 10px rgba(255, 0, 0, .6), inset 0 0 10px rgba(255, 0, 0, .4), 0 2px 0 #FFF;}}.jimu-widget-swipe-setting .bar-color-tip{margin-top: 0;}.jimu-widget-swipe-setting .handler-color-picker{display: inline-block; vertical-align: middle; margin: 0 6px;}.jimu-widget-swipe-setting .layer-text.zoom-node{margin: 10px 0 0 0;}',
"*now":function(u){u(['dojo/i18n!*preload*widgets/Swipe/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/on dojo/_base/html ../utils ./LayersSetting ./Placement jimu/dijit/LoadingShelter jimu/dijit/CheckBox jimu/dijit/RadioBtn dijit/form/Select jimu/dijit/ColorPickerButton".split(" "),function(u,E,C,v,f,c,h,g,p,r,e){return u([E,C],{baseClass:"jimu-widget-swipe-setting",_selectedStyle:"",postCreate:function(){this.placement=new p({nls:this.nls,config:this.config},this.placementContainer);this.placement.startup();
this.own(f(this.verticalNode,"click",v.hitch(this,function(){this._selectItem("vertical")})));this.own(f(this.horizontalNode,"click",v.hitch(this,function(){this._selectItem("horizontal")})));this.own(f(this.scopeNode,"click",v.hitch(this,function(){this._selectItem("scope")})));this.shelter=new r({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this.layersSetting=new g({nls:this.nls,map:this.map,config:this.config},this.layersSettingContainer);this.layersSetting.startup();this.own(f(this.layersSetting,
"change",v.hitch(this,function(b){b.mode&&("single"===b.mode?c.removeClass(this.isZoomNodeContainer,"hide"):c.addClass(this.isZoomNodeContainer,"hide"))})));this.isZoomCheckBox=new e({label:this.nls.isZoom,checked:!1},this.isZoomNode);this.isHidePanel=new e({label:this.nls.hidePanel,checked:!1},this.isHidePanelNode)},startup:function(){this.inherited(arguments);this.setConfig(this.config)},getConfig:function(){this.config.style=this._selectedStyle;this.config.isZoom=this.isZoomCheckBox.getValue();
this.config.isHidePanel=this.isHidePanel.getValue();this.config.handleColor=this.colorPicker.getColor().toHex();this.config=this.layersSetting.getConfig(this.config);this.config.invertPlacement=this.placement.getConfig();return this.config},setConfig:function(b){this.config=b;this.config.style?this._selectItem(this.config.style):this._selectItem("vertical");this.layersSetting.setConfig(this.config);!0===this.config.isZoom?this.isZoomCheckBox.setValue(!0):this.isZoomCheckBox.setValue(!1);!0===this.config.isHidePanel?
this.isHidePanel.setValue(!0):this.isHidePanel.setValue(!1);this.config.handleColor?this.colorPicker.setColor(h.processColor(this.config.handleColor)):this.colorPicker.setColor(h.processColor())},_selectItem:function(b){var k="";this.placement.setVH(b);"scope"===b?(k=this.nls.spyglassText,c.addClass(this.handlerColorPicker,"hide")):(k=this.nls.layerText,c.removeClass(this.handlerColorPicker,"hide"));this.layersSetting.setLayerInfoText(k);this[b]&&this[b].setChecked&&this[b].setChecked(!0);this._selectedStyle=
b}})});