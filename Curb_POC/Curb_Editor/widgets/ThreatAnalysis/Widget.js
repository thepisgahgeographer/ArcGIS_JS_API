// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/CoordinateControl":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/on dojo/has dojo/query dojo/dom-attr dojo/dom-class dojo/dom-style dojo/string dojo/topic dojo/keys dojo/Deferred dojo/Evented dojo/dom dojo/dom-construct dojo/aspect jimu/BaseWidget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/registry dijit/Tooltip dijit/TooltipDialog dijit/popup dojo/text!./templates/CoordinateControl.html esri/geometry/webMercatorUtils esri/graphic esri/geometry/Point esri/request esri/SpatialReference esri/tasks/GeometryService esri/tasks/ProjectParameters esri/toolbars/draw jimu/dijit/Message ./_CoordinateControlFormatNotation ./_CoordinateControlConfirmNotation dojo/_base/sniff dijit/form/TextBox dijit/form/Textarea dijit/form/Select dijit/InlineEditBox".split(" "),
function(J,F,c,g,v,w,z,k,b,h,n,d,p,C,B,I,N,q,r,x,y,A,K,G,H,t,E,P,S,L,U,W,Z,fa,ha,ia){return J([q,r,x,C],{templateString:H,baseClass:"jimu-coordinate-control",parentWidget:null,input:!0,label:null,showCopyButton:!1,showFormatButton:!1,zoomScale:null,showDeleteButton:!0,showExpandButton:!0,showDrawPoint:!0,drawButtonLabel:null,drawToolTip:null,graphicsLayer:null,type:"DD",inputFromText:!0,addSign:!1,hasCustomLabel:!1,postMixInProperties:function(){this.nls=window.jimuNls.coordinateControl;this.isRenderIdForAttrs=
!0},constructor:function(a){J.safeMixin(this,a);this.uid=a.id||y.getUniqueId("cc");null===this.parentWidget&&console.error("No parentWidget parameter supplied: Parameter is mandatory");null===this.label&&console.info("No label parameter supplied (optional): Coordinate Control will have no label");null===this.zoomScale&&console.info("No zoomScale parameter supplied (optional): Coordinate Control will have no zoom button");null===this.drawButtonLabel&&console.info("No drawButtonLabel parameter supplied (optional): Coordinate Control will have no draw button");
null===this.graphicsLayer&&console.info("No graphicsLayer parameter supplied: Input graphics will not be shown on map")},postCreate:function(){this._frmtdlg=new K({id:this.uid+"_formatCoordinateTooltip",content:new ha({nls:this.nls,ct:this.type}),style:"width: 400px",onClose:c.hitch(this,this.popupDidClose)});N.after(this._frmtdlg,"onShow",c.hitch(this,function(){this._frmtdlg.content.frmtSelect.focus()}));N.after(this._frmtdlg,"onClose",c.hitch(this,function(){this.formatButton.focus()}));this.own(g(this._frmtdlg,
"keydown",c.hitch(this,function(a){a.keyCode===d.ESCAPE&&G.close(this._frmtdlg)})));"DartTheme"===this.parentWidget.appConfig.theme.name&&k.add(this._frmtdlg.domNode,"coordinateControlDialog");this.defaultFormat&&(this._frmtdlg.content.formats[this.type].defaultFormat=this.defaultFormat);this.geomsrvc=new U(this.parentWidget.appConfig.geometryService);this.dt=new Z(this.parentWidget.map);this.initUI();this.setUIListeners()},initUI:function(){null===this.label?this.setHidden(this.coordNameContainer,
!1):this.coordName.setValue(this.label);this.input?(this.zoomButton.parentNode.style.display="none",this.setHidden(this.expandButton,!0),this.setHidden(this.removeControlBtn,!0),this.coordName.set("disabled","disabled"),this.coordName.set("value",this.label+" ("+this._frmtdlg.content.ct+")"),this.showDrawPoint?(this.drawPointButton.title=this.drawButtonLabel,null===this.drawToolTip&&(this.drawToolTip=this.nls.tooltip)):this.setHidden(this.drawPointButton,!0)):(this.coordtext.disabled=!0,this.coordtext.placeholder=
"",this.setHidden(this.drawPointButton,!0),this.showExpandButton||(this.setHidden(this.expandButton,!0),k.remove(this.domNode,"coordinateContainer"),k.add(this.domNode,"outputCoordinateContainer"),k.add(this.cpbtn,"outputCopyBtn"),this.coordtext.readOnly=!0),this.showDeleteButton||this.setHidden(this.removeControlBtn,!0));this.showCopyButton||(this.setHidden(this.cpbtn,!0),k.add(this.cpbtn,"inputCopyBtn"),z.set(this.cpbtn,"title",this.nls.copyAll));this.showFormatButton||this.setHidden(this.formatButton,
!0);null===this.zoomScale&&this.setHidden(this.zoomButton,!0);this.formatButton.title=this.input?this.nls.formatInput:this.nls.formatOutput;z.set(this.formatButton,"aria-label",this.formatButton.title)},setUIListeners:function(){this.input||n.subscribe("INPUTPOINTDIDCHANGE",c.hitch(this,this.mapWasClicked));n.subscribe("INPUTERROR",c.hitch(this,this.inputError));n.subscribe("VALIDINPUT",c.hitch(this,function(a){this.toggleZoomButton(a)}));this.own(g(this.expandButton,"click",c.hitch(this,this.expandButtonWasClicked)));
this.own(g(this.expandButton,"keydown",c.hitch(this,function(a){if(a.keyCode===d.ENTER||a.keyCode===d.SPACE)this.expandButtonWasClicked(a),a.preventDefault()})));this.own(g(this.zoomButton,"click",c.hitch(this,this.zoomButtonWasClicked)));this.own(g(this.zoomButton,"keydown",c.hitch(this,function(a){a.keyCode!==d.ENTER&&a.keyCode!==d.SPACE||this.zoomButtonWasClicked(a)})));this.own(g(this.coordName,"change",c.hitch(this,this.coordNameDidChange)));this.cpbtn.addEventListener("click",c.hitch(this,this.cpBtnWasClicked));
this.own(g(this.cpbtn,"keydown",c.hitch(this,function(a){a.keyCode!==d.ENTER&&a.keyCode!==d.SPACE||this.cpBtnWasClicked(a)})));this.subVal1CpBtn.addEventListener("click",c.hitch(this,this.cpSubBtnWasClicked));this.own(g(this.subVal1CpBtn,"keydown",c.hitch(this,function(a){a.keyCode!==d.ENTER&&a.keyCode!==d.SPACE||this.cpSubBtnWasClicked(a)})));this.subVal2CpBtn.addEventListener("click",c.hitch(this,this.cpSubBtnWasClicked));this.own(g(this.subVal2CpBtn,"keydown",c.hitch(this,function(a){a.keyCode!==
d.ENTER&&a.keyCode!==d.SPACE||this.cpSubBtnWasClicked(a)})));this.subVal3CpBtn.addEventListener("click",c.hitch(this,this.cpSubBtnWasClicked));this.own(g(this.subVal3CpBtn,"keydown",c.hitch(this,function(a){a.keyCode!==d.ENTER&&a.keyCode!==d.SPACE||this.cpSubBtnWasClicked(a)})));this.subVal4CpBtn.addEventListener("click",c.hitch(this,this.cpSubBtnWasClicked));this.own(g(this.subVal4CpBtn,"keydown",c.hitch(this,function(a){a.keyCode!==d.ENTER&&a.keyCode!==d.SPACE||this.cpSubBtnWasClicked(a)})));this.own(g(this.formatButton,
"click",c.hitch(this,this.formatButtonWasClicked)));this.own(g(this.formatButton,"keydown",c.hitch(this,function(a){a.keyCode!==d.ENTER&&a.keyCode!==d.SPACE||this.formatButtonWasClicked(a)})));this.own(g(this.drawPointButton,"click",c.hitch(this,this.drawPointButtonWasClicked)));this.own(g(this.drawPointButton,"keydown",c.hitch(this,function(a){a.keyCode!==d.ENTER&&a.keyCode!==d.SPACE||this.drawPointButtonWasClicked(a)})));this.own(g(this.removeControlBtn,"keydown",c.hitch(this,function(a){a.keyCode!==
d.ENTER&&a.keyCode!==d.SPACE||this.remove()})));this.own(g(this._frmtdlg.content.applyButton,"click",c.hitch(this,this.formatDialogApplyButtonClicked)));this.own(g(this._frmtdlg.content.applyButton,"keydown",c.hitch(this,function(a){a.keyCode!==d.ENTER&&a.keyCode!==d.SPACE||this.formatDialogApplyButtonClicked()})));this.own(g(this._frmtdlg.content.cancelButton,"click",c.hitch(this,function(){G.close(this._frmtdlg)})));this.own(g(this._frmtdlg.content.cancelButton,"keydown",c.hitch(this,function(a){a.keyCode!==
d.ENTER&&a.keyCode!==d.SPACE||G.close(this._frmtdlg)})));this.own(g(this.coordtext,"keydown",c.hitch(this,this.coordTextInputKeyWasPressed)));this.own(g(this.coordtext,"input",c.hitch(this,function(){this.currentClickPointDD=null;this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display="none");this.emit("coordinates-deleted",{})})));this.own(this.geomsrvc.on("error",c.hitch(this,this.geomSrvcDidFail)));this.own(g(this.dt,"draw-complete",c.hitch(this,this.drawComplete)));this.own(N.after(this.parentWidget,
"onClose",c.hitch(this,function(){this.input&&k.contains(this.drawPointButton,"drawPointBtn-active")&&this.deactivateDrawTool();this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&"closed"===this.parentWidget.state&&G.close(this._frmtdlg)})));this.own(N.after(this.parentWidget,"onOpen",c.hitch(this,function(){var a=this.parentWidget.getParent().getParent().domNode;this.own(g(a,"click",c.hitch(this,function(f){"settingBtn"!==f.target.className&&this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&"active"===
this.parentWidget.state&&G.close(this._frmtdlg)})))})))},formatDialogApplyButtonClicked:function(){this.type=this._frmtdlg.content.ct;this.updateDisplay();this.input?this.coordName.set("value",this.label+" ("+this._frmtdlg.content.ct+")"):this.hasCustomLabel&&this.coordName.set("value",this.label);G.close(this._frmtdlg)},popupDidClose:function(){if(this._frmtdlg.content.isCanceled)this.addSign!==this._frmtdlg.content.addSignChkBox.checked&&this._frmtdlg.content.addSignChkBox.setValue(this.addSign);
else{this.addSign=this._frmtdlg.content.addSignChkBox.checked;var a=this._frmtdlg.content.ct;this.type!==a&&(this.type=a,this.updateDisplay())}},coordNameDidChange:function(){this.hasCustomLabel=!0},cpSubBtnWasClicked:function(a){this[a.currentTarget.id.split("~")[0]].select();try{var f=document.execCommand("copy")}catch(l){f=!1}this.showToolTip(a.currentTarget.id,f?this.nls.copySuccessful:this.nls.copyFailed)},cpBtnWasClicked:function(a){a.preventDefault();if(this.input){a=y.toArray().filter(function(e){return"jimu-coordinate-control"===
e.baseClass&&!e.input});var f=a.map(function(e){if(e.coordtext)return e.coordtext.value}).join("\r\n");a=this.coordtext.value;this.coordtext.value=a+"\r\n"+f;this.selectText(this.coordtext);try{var l=document.execCommand("copy")}catch(e){l=!1}this.coordtext.value=a}else{this.selectText(this.coordtext);try{l=document.execCommand("copy")}catch(e){l=!1}}this.showToolTip(this.cpbtn.id,l?this.nls.copySuccessful:this.nls.copyFailed)},selectText:function(a){var f=document.getSelection();f.removeAllRanges();
a.focus();var l=/Edge/.test(navigator.userAgent),e=!!window.MSInputMethodContext&&!!document.documentMode;if(v("ff")||v("chrome")||v("safari"))!this.input&&this.coordtext.disabled?(this.coordtext.disabled=!1,a.select(),this.coordtext.disabled=!0):a.select();l&&a.select();e&&(l=document.createRange(),l.selectNode(a),f.addRange(l))},showToolTip:function(a,f){var l=B.byId(a);A.show(f,l);setTimeout(function(){A.hide(l)},1E3)},geomSrvcDidComplete:function(a){0>=a[0].length?(new fa({message:this.nls.parseCoordinatesError}),
n.publish("INPUTERROR")):(this.currentClickPointDD=this.currentClickPoint=new P(a[0][0],a[0][1],new L({wkid:4326})),this.input&&(this.currentClickPoint.spatialReference.equals(this.parentWidget.map.spatialReference)?this.parentWidget.map.centerAt(this.currentClickPoint):this.getProjectedPoint(this.currentClickPoint).then(c.hitch(this,function(f){this.currentClickPoint=f;this.parentWidget.map.centerAt(this.currentClickPoint)}),c.hitch(this,function(f){console.error(f);n.publish("INPUTERROR")})),this.updateDisplay(),
n.publish("INPUTPOINTDIDCHANGE",{mapPoint:this.currentClickPointDD,inputFromText:!0}),n.publish("VALIDINPUT",{show:!0})))},geomSrvcDidFail:function(){new fa({message:this.nls.parseCoordinatesError});n.publish("INPUTERROR")},coordTextInputKeyWasPressed:function(a){if(a.keyCode===d.ENTER){a.preventDefault();var f=this.getCleanInput(a.currentTarget.value);this.getCoordinateType(f).then(c.hitch(this,function(l){if(l)if(1===l.length){var e=this.processCoordTextInput(f,l[0],!1);this.getXYNotation(e,l[0].conversionType).then(c.hitch(this,
function(Q){0<Q[0].length?this.geomSrvcDidComplete(Q):this.geomSrvcDidFail()}))}else this.confirmNotationDialog||(this.confirmNotationDialog=new ia({title:this.nls.comfirmInputNotation,nls:this.nls,options:l,style:"width: 400px",hasSkipCheckBox:!1,theme:this.parentWidget.appConfig.theme.name})),this.confirmNotationDialog.show().then(c.hitch(this,function(){var Q=F.filter(l,function(V){return V.name===this.confirmNotationDialog.comboOptions.get("value")},this),T=this.processCoordTextInput(f,Q[0],!1);
this.getXYNotation(T,Q[0].conversionType).then(c.hitch(this,function(V){0<V[0].length?this.geomSrvcDidComplete(V):this.geomSrvcDidFail()}))},function(){}));else new fa({message:this.nls.parseCoordinatesError}),n.publish("INPUTERROR")}));z.set(this.coordtext,"value",f);this.emit("get-coordinate-complete",f);this.currentClickPoint=null}if(a.keyCode===d.BACKSPACE||a.keyCode===d.DELETE)this.currentClickPointDD=null,this.zoomButton&&this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display=
"none"),this.emit("coordinates-deleted",{})},getFormattedCoordinateText:function(){return this.coordtext.value},getCurrentMapCoordinate:function(){return this.currentClickPoint},getMapCoordinateDD:function(){return this.currentClickPointDD},deactivateDrawTool:function(){this.dt.deactivate();k.remove(this.drawPointButton,"drawPointBtn-active")},processCoordTextInput:function(a,f,l){var e=f.pattern.exec(a),Q=!1,T=f.name;switch(f.name){case "DD":var V=e[2];var aa=e[7];var X=e[10];var ba=e[16];var ca=
e[3].replace(/[,:]/,".");var da=e[11].replace(/[,:]/,".");T="DD";break;case "DDrev":V=e[11];aa=e[16];X=e[2];ba=e[8];ca=e[12].replace(/[,:]/,".");da=e[3].replace(/[,:]/,".");T="DD";break;case "DDM":V=e[2];aa=e[7];X=e[10];ba=e[15];ca=e[3];var ka=e[4].replace(/[,:]/,".");da=e[11];var m=e[12].replace(/[,:]/,".");T="DDM";break;case "DDMrev":V=e[10];aa=e[15];X=e[2];ba=e[7];ca=e[11];ka=e[12].replace(/[,:]/,".");da=e[3];m=e[4].replace(/[,:]/,".");T="DDM";break;case "DMS":V=e[2];aa=e[8];X=e[11];ba=e[17];ca=
e[3];ka=e[4];var u=e[5].replace(/[,:]/,".");da=e[12];m=e[13];var D=e[14].replace(/[,:]/,".");T="DMS";break;case "DMSrev":V=e[11],aa=e[17],X=e[2],ba=e[8],ca=e[12],ka=e[13],u=e[14].replace(/[,:]/,"."),da=e[3],m=e[4],D=e[5].replace(/[,:]/,"."),T="DMS"}V&&aa?(Q=!0,V=(new RegExp(/[Ss-]/)).test(V)?"-":"+"):V=V&&(new RegExp(/[Ss-]/)).test(V)?"-":aa&&(new RegExp(/[Ss-]/)).test(aa)?"-":"+";X&&ba?(Q=!0,X=(new RegExp(/[Ww-]/)).test(X)?"-":"+"):X=X&&(new RegExp(/[Ww-]/)).test(X)?"-":ba&&(new RegExp(/[Ww-]/)).test(ba)?
"-":"+";Q&&(l||new fa({message:this.nls.latLongWarningMessage}));switch(T){case "DD":a=V+ca+","+X+da;break;case "DDM":a=V+ca+" "+ka+","+X+da+" "+m;break;case "DMS":a=V+ca+" "+ka+" "+u+","+X+da+" "+m+" "+D}return a},zoomButtonWasClicked:function(){this.currentClickPoint&&(this.parentWidget.map.getZoom()<this.zoomScale?this.parentWidget.map.centerAt(this.currentClickPoint).then(c.hitch(this,function(){this.parentWidget.map.setScale(this.zoomScale)})):this.parentWidget.map.centerAt(this.currentClickPoint))},
setHidden:function(a,f){b.set(a,"display","none");f&&I.destroy(a.parentNode)},setVisible:function(a){b.set(a,"display","inline-flex")},remove:function(){this._frmtdlg&&this._frmtdlg.domNode.offsetParent&&G.close(this._frmtdlg);this.destroyRecursive();this.emit("removeCoordsControl")},mapWasClicked:function(a){this.currentClickPoint=a.mapPoint;this.getDDPoint(a.mapPoint).then(c.hitch(this,function(f){this.currentClickPointDDDD=this.currentClickPointDD=f;this.inputFromText=a.inputFromText?!0:!1;this.updateDisplay()}),
c.hitch(this,function(f){console.error(f)}))},getDDPoint:function(a){var f=new p,l=new L(3857);t.canProject(a,l)?f.resolve(t.webMercatorToGeographic(t.project(a,l))):(l={url:this.geomsrvc.url+"/findTransformations",content:{f:"json",inSR:JSON.stringify(a.spatialReference.toJson()),outSR:4326,extentOfInterest:JSON.stringify(this.parentWidget.map.extent)},handleAs:"json",callbackParamName:"callback"},(new S(l,{usePost:!1})).then(c.hitch(this,function(e){e=(e=e&&e.transformations?e.transformations:void 0)&&
0<e.length?e[0].wkid:void 0;var Q=new W;Q.outSR=new L(4326);Q.geometries=[a];Q.transformForward=!0;Q.transformation=e;this.geomsrvc.project(Q,c.hitch(this,function(T){f.resolve(T[0])}),function(T){f.reject(T)})}),c.hitch(this,function(e){f.reject(e)})));return f},getProjectedPoint:function(a){var f=new p;if(t.canProject(a,this.parentWidget.map))f.resolve(t.geographicToWebMercator(a));else{var l={url:this.geomsrvc.url+"/findTransformations",content:{f:"json",inSR:4326,outSR:JSON.stringify(this.parentWidget.map.spatialReference.toJson()),
extentOfInterest:JSON.stringify(this.parentWidget.map.extent)},handleAs:"json",callbackParamName:"callback"};(new S(l,{usePost:!1})).then(c.hitch(this,function(e){e=(e=e&&e.transformations?e.transformations:void 0)&&0<e.length?e[0].geoTransforms[0].wkid:void 0;var Q=new W;Q.outSR=new L(this.parentWidget.map.spatialReference);Q.geometries=[a];Q.transformForward=!0;Q.transformation=e;this.geomsrvc.project(Q,c.hitch(this,function(T){f.resolve(T[0])}),function(T){f.reject(T)})}),c.hitch(this,function(e){f.reject(e)}))}return f},
expandButtonWasClicked:function(){k.toggle(this.coordcontrols,"expanded");k.contains(this.coordcontrols,"expanded")?(k.remove(this.expandButton,"expandBtn"),k.add(this.expandButton,"collapseBtn"),z.set(this.expandButton,"aria-expanded","true")):(k.remove(this.expandButton,"collapseBtn"),k.add(this.expandButton,"expandBtn"),z.set(this.expandButton,"aria-expanded","false"));this.setSubCoordUI(k.contains(this.coordcontrols,"expanded"));this._setCoordControlsTabindex(k.contains(this.coordcontrols,"expanded"));
this.emit("expandButtonClicked",k.contains(this.coordcontrols,"expanded"))},_setCoordControlsTabindex:function(a){var f=[];if(a){var l=0;a=-1}else l=-1,a=0;f=w("input[tabindex\x3d'"+a+"']",this.coordcontrols);f=f.concat(w("span[tabindex\x3d'"+a+"']",this.coordcontrols));F.forEach(f,c.hitch(this,function(e){z.set(e,"tabindex",l)}))},formatButtonWasClicked:function(){this._frmtdlg.content.setCt(this.type);G.open({popup:this._frmtdlg,around:this.formatButton})},drawPointButtonWasClicked:function(){if(k.contains(this.drawPointButton,
"drawPointBtn-active"))this.dt.deactivate(),this.parentWidget.map.enableMapNavigation();else{this.parentWidget.map.disableMapNavigation();this.dt.activate(Z.POINT);var a=this.dt._tooltip;a&&(a.innerHTML=this.drawToolTip)}k.toggle(this.drawPointButton,"drawPointBtn-active")},drawComplete:function(a){var f={};f.mapPoint=a.geometry;this.parentWidget.map.enableMapNavigation();this.mapWasClicked(f)},setSubCoordUI:function(a){if(a){a="165px";switch(this.type){case "DD":case "DMS":case "DDM":this.sub1label.innerHTML=
"Lat";this.sub2label.innerHTML="Lon";this.setHidden(this.sub3,!1);this.setHidden(this.sub4,!1);a="90px";break;case "GARS":this.sub1label.innerHTML="Lon";this.sub2label.innerHTML="Lat";this.sub3label.innerHTML="Quadrant";this.sub4label.innerHTML="Key";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "GEOREF":this.sub1label.innerHTML="15\u00b0 Quad";this.sub2label.innerHTML="1\u00b0 Quad";this.sub3label.innerHTML="Easting";this.setVisible(this.sub3);this.sub4label.innerHTML="Northing";
this.setVisible(this.sub4);break;case "USNG":case "MGRS":this.sub1label.innerHTML="GZD";this.sub2label.innerHTML="Grid Sq";this.sub3label.innerHTML="Easting";this.sub4label.innerHTML="Northing";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "UTM":this.sub1label.innerHTML="Zone";this.sub2label.innerHTML="Band";this.sub3label.innerHTML="Easting";this.sub4label.innerHTML="Northing";this.setVisible(this.sub3);this.setVisible(this.sub4);break;case "UTM_H":this.sub1label.innerHTML="Zone",
this.sub2label.innerHTML="Hemisphere",this.sub3label.innerHTML="Easting",this.sub4label.innerHTML="Northing",this.setVisible(this.sub3),this.setVisible(this.sub4)}b.set(this.coordcontrols,"display","block");b.set(this.coordcontrols,"height",a);b.set(this.coordcontrols,"width","300px")}else b.set(this.coordcontrols,"display","none"),b.set(this.coordcontrols,"height","0px");a=this.uid.split("_")[1];z.set(this["cc_"+a+"sub1val"],"aria-label",this.sub1label.innerHTML);z.set(this["cc_"+a+"sub2val"],"aria-label",
this.sub2label.innerHTML);z.set(this["cc_"+a+"sub3val"],"aria-label",this.sub3label.innerHTML);z.set(this["cc_"+a+"sub4val"],"aria-label",this.sub4label.innerHTML)},setCoordUI:function(a){if(a){var f=this.uid.split("_")[1];if(!this["cc_"+f+"sub1val"]||this.input&&this.inputFromText)return;var l=this._frmtdlg.content.formats[this.type];l=l.useCustom?l.customFormat:l.defaultFormat;switch(this.type){case "DD":a=this.getFormattedDDStr(a,l,this.addSign);this["cc_"+f+"sub1val"].value=h.substitute("${xcrd}",
{xcrd:a.latdeg});this["cc_"+f+"sub2val"].value=h.substitute("${ycrd}",{ycrd:a.londeg});var e=a.formatResult;break;case "DDM":a=this.getFormattedDDMStr(a,l,this.addSign);this["cc_"+f+"sub1val"].value=h.substitute("${latd} ${latm}",{latd:a.latdeg,latm:a.latmin});this["cc_"+f+"sub2val"].value=h.substitute("${lond} ${lonm}",{lond:a.londeg,lonm:a.lonmin});e=a.formatResult;break;case "DMS":a=this.getFormattedDMSStr(a,l,this.addSign);this["cc_"+f+"sub1val"].value=h.substitute("${latd} ${latm} ${lats}",{latd:a.latdeg,
latm:a.latmin,lats:a.latsec});this["cc_"+f+"sub2val"].value=h.substitute("${lond} ${lonm} ${lons}",{lond:a.londeg,lonm:a.lonmin,lons:a.lonsec});e=a.formatResult;break;case "USNG":a=this.getFormattedUSNGStr(a,l,!1);this["cc_"+f+"sub1val"].value=a.gzd;this["cc_"+f+"sub2val"].value=a.grdsq;this["cc_"+f+"sub3val"].value=a.easting;this["cc_"+f+"sub4val"].value=a.northing;e=a.formatResult;break;case "MGRS":a=this.getFormattedMGRSStr(a,l,!1);this["cc_"+f+"sub1val"].value=a.gzd;this["cc_"+f+"sub2val"].value=
a.grdsq;this["cc_"+f+"sub3val"].value=a.easting;this["cc_"+f+"sub4val"].value=a.northing;e=a.formatResult;break;case "GARS":a=this.getFormattedGARSStr(a,l,!1);this["cc_"+f+"sub1val"].value=a.lon;this["cc_"+f+"sub2val"].value=a.lat;this["cc_"+f+"sub3val"].value=a.quadrant;this["cc_"+f+"sub4val"].value=a.key;e=a.formatResult;break;case "GEOREF":a=this.getFormattedGEOREFStr(a,l,!1);this["cc_"+f+"sub1val"].value=a.lon+a.lat;this["cc_"+f+"sub2val"].value=a.quadrant15lon+a.quadrant15lat;this["cc_"+f+"sub3val"].value=
a.quadrant1lon;this["cc_"+f+"sub4val"].value=a.quadrant1lat;e=a.formatResult;break;case "UTM":a=this.getFormattedUTMStr(a,l,!1);a.bandLetter.match(/^[AaBbYyZz]/)?(this["cc_"+f+"sub1val"].value="",this["cc_"+f+"sub2val"].value="",this["cc_"+f+"sub3val"].value="",this["cc_"+f+"sub4val"].value="",a.formatResult=""):(this["cc_"+f+"sub1val"].value=a.zone,this["cc_"+f+"sub2val"].value=a.bandLetter,this["cc_"+f+"sub3val"].value=a.easting,this["cc_"+f+"sub4val"].value=a.westing);e=a.formatResult;break;case "UTM_H":a=
this.getFormattedUTMHStr(a,l,!1),a.hemisphere.match(/^[AaBbYyZz]/)?(this["cc_"+f+"sub1val"].value="",this["cc_"+f+"sub2val"].value="",this["cc_"+f+"sub3val"].value="",this["cc_"+f+"sub4val"].value="",a.formatResult=""):(this["cc_"+f+"sub1val"].value=a.zone,this["cc_"+f+"sub2val"].value=a.hemisphere,this["cc_"+f+"sub3val"].value=a.easting,this["cc_"+f+"sub4val"].value=a.westing),e=a.formatResult}}else e="";this.coordcontrols&&this.setSubCoordUI(k.contains(this.coordcontrols,"expanded"));this.coordtext&&
(z.set(this.coordtext,"value",e),this.emit("get-coordinate-complete",e))},getFormattedCoordinates:function(){this.getCoordValues(this.currentClickPointDD,this.type,4).then(c.hitch(this,function(a){this.setCoordUI(a)}),c.hitch(this,function(a){console.log(a)}))},updateDisplay:function(){this.currentClickPoint&&(this.currentClickPointDD||(this.currentClickPointDD=this.currentClickPoint),this.getFormattedCoordinates(this.currentClickPointDD),this.input&&(null!==this.graphicsLayer&&(this.graphicsLayer.clear(),
this.currentClickPoint.spatialReference.equals(this.parentWidget.map.spatialReference)?this.graphicsLayer.add(new E(this.currentClickPoint)):this.getProjectedPoint(this.currentClickPointDD).then(c.hitch(this,function(a){this.graphicsLayer.add(new E(a))}),c.hitch(this,function(a){console.error(a)}))),n.publish("INPUTPOINTDIDCHANGE",{mapPoint:this.currentClickPointDD,inputFromText:!0}),n.publish("VALIDINPUT",{show:!0})))},clear:function(){this.coordtext.value="";this.currentClickPointDDDD=this.currentClickPointDD=
this.currentClickPoint=null;this.graphicsLayer.clear()},inputError:function(){this.setCoordUI();this.toggleZoomButton(!1)},toggleZoomButton:function(a){this.zoomButton.parentNode&&(this.zoomButton.parentNode.style.display=a?"inline-block":"none")},getCleanInput:function(a){a=a.replace(/\n/g,"");a=a.replace(/\s+/g," ").trim();return a.toUpperCase()},getCoordValues:function(a,f,l){var e=new p;a={sr:4326,coordinates:[[a.x,a.y]],conversionType:f.name?f.name:f,numOfDigits:l||6,rounding:!0,addSpaces:!1};
switch(f){case "DD":a.numOfDigits=6;break;case "USNG":a.numOfDigits=5;break;case "MGRS":a.conversionMode="mgrsDefault";a.numOfDigits=5;break;case "UTM_H":a.conversionType="utm";a.conversionMode="utmNorthSouth";a.addSpaces=!0;break;case "UTM":a.conversionType="utm";a.conversionMode="utmDefault";a.addSpaces=!0;break;case "GARS":a.conversionMode="garsDefault"}this.geomsrvc.toGeoCoordinateString(a).then(function(Q){e.resolve(Q)},function(){e.resolve(null)});return e.promise},getXYNotation:function(a,
f){var l=new p;var e=f.name?f.name:f;f={sr:4326,conversionType:e,strings:[]};switch(e){case "DD":case "DDM":case "DMS":f.numOfDigits=2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");f.strings.push(a);break;case "DDrev":f.conversionType="DD";f.numOfDigits=2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");f.strings.push(a);break;case "DDMrev":f.conversionType="DDM";f.numOfDigits=2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");f.strings.push(a);break;case "DMSrev":f.conversionType=
"DMS";f.numOfDigits=2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");f.strings.push(a);break;case "USNG":f.strings.push(a);f.addSpaces="false";break;case "MGRS":f.conversionMode="mgrsNewStyle";f.strings.push(a);f.addSpaces="false";break;case "UTM_H":f.conversionType="utm";f.conversionMode="utmNorthSouth";f.strings.push(a);break;case "UTM":f.conversionType="utm";f.conversionMode="utmDefault";f.strings.push(a);break;case "GARS":f.conversionMode="garsCenter";f.strings.push(a);break;case "GEOREF":f.strings.push(a)}this.geomsrvc.fromGeoCoordinateString(f).then(function(Q){l.resolve(Q)},
function(){l.resolve(null)});return l.promise},getNotations:function(){return[{name:"DD",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDLatLongNotation,conversionType:"DD"},{name:"DDrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)/,
/([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDLongLatNotation,conversionType:"DD"},{name:"DDM",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/[\s]*$/].map(function(a){return a.source}).join("")),
notationType:this.nls.DDMLatLongNotation,conversionType:"DDM"},{name:"DDMrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),notationType:this.nls.DDMLongLatNotation,conversionType:"DDM"},{name:"DMS",pattern:new RegExp([/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)/,
/([,:;\s|\/\\]+)/,/(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),notationType:this.nls.DMSLatLongNotation,conversionType:"DMS"},{name:"DMSrev",pattern:new RegExp([/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)/,/([,:;\s|\/\\]+)/,/(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/].map(function(a){return a.source}).join("")),
notationType:this.nls.DMSLongLatNotation,conversionType:"DMS"},{name:"GARS",pattern:/^\d{3}[a-zA-Z]{2}[1-4]?[1-9]?$/,notationType:this.nls.GARSNotation,conversionType:"GARS"},{name:"GEOREF",pattern:/^[a-zA-Z]{4}\d{1,8}$/,notationType:this.nls.GEOREFNotation,conversionType:"GEOREF"},{name:"MGRS",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)/,
/(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*/,/(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})/,/$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/].map(function(a){return a.source}).join("")),notationType:this.nls.MGRSNotation,conversionType:"MGRS"},{name:"UTM",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/].map(function(a){return a.source}).join("")),
notationType:this.nls.UTMBandNotation,conversionType:"UTM"},{name:"UTM (H)",pattern:new RegExp([/^\d{1,2}[-,;:\s]*[NnSs][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]+\d{1,7}\.?\d*[mM]?$/].map(function(a){return a.source}).join("")),notationType:this.nls.UTMHemNotation,conversionType:"UTM_H"}]},getCoordinateType:function(a){var f=this.getCleanInput(a);a=new p;var l=this.getNotations();f=F.filter(l,function(e){return e.pattern.test(this.v)},{v:f});0<f.length?a.resolve(f):a.resolve(null);return a.promise},getFormattedDDStr:function(a,
f,l){var e={};e.sourceValue=a;e.sourceFormatString=f;a=a[0].split(/[ ,]+/);e.latdeg=a[0].replace(/[nNsS]/,"");e.londeg=a[1].replace(/[eEwW]/,"");l&&("N"===a[0].slice(-1)?e.latdeg="+"+e.latdeg:e.latdeg="-"+e.latdeg,"W"===a[1].slice(-1)?e.londeg="-"+e.londeg:e.londeg="+"+e.londeg);f=f.replace(/X/,e.londeg);f=f.replace(/[eEwW]/,a[1].slice(-1));f=f.replace(/[nNsS]/,a[0].slice(-1));f=f.replace(/Y/,e.latdeg);e.formatResult=f;return e},getFormattedDDMStr:function(a,f,l){var e={};e.sourceValue=a;e.sourceFormatString=
f;e.parts=a[0].split(/[ ,]+/);e.latdeg=e.parts[0];e.latmin=e.parts[1].replace(/[nNsS]/,"");e.londeg=e.parts[2];e.lonmin=e.parts[3].replace(/[eEwW]/,"");l&&("N"===e.parts[1].slice(-1)?e.latdeg="+"+e.latdeg:e.latdeg="-"+e.latdeg,"W"===e.parts[3].slice(-1)?e.londeg="-"+e.londeg:e.londeg="+"+e.londeg);a=f.replace(/[EeWw]/,e.parts[3].slice(-1));a=a.replace(/Y/,e.lonmin);a=a.replace(/X/,e.londeg);a=a.replace(/[NnSs]/,e.parts[1].slice(-1));a=a.replace(/B/,e.latmin);a=a.replace(/A/,e.latdeg);e.formatResult=
a;return e},getFormattedDMSStr:function(a,f,l){var e={};e.sourceValue=a;e.sourceFormatString=f;e.parts=a[0].split(/[ ,]+/);e.latdeg=e.parts[0];e.latmin=e.parts[1];e.latsec=e.parts[2].replace(/[NnSs]/,"");e.londeg=e.parts[3];e.lonmin=e.parts[4];e.parts[5]&&(e.lonsec=e.parts[5].replace(/[EWew]/,""));l&&("N"===e.parts[2].slice(-1)?e.latdeg="+"+e.latdeg:e.latdeg="-"+e.latdeg,"W"===e.parts[5].slice(-1)?e.londeg="-"+e.londeg:e.londeg="+"+e.londeg);a=f.replace(/A/,e.latdeg);a=a.replace(/B/,e.latmin);a=a.replace(/C/,
e.latsec);a=a.replace(/X/,e.londeg);a=a.replace(/Y/,e.lonmin);a=a.replace(/Z/,e.lonsec);a=a.replace(/[NnSs]/,e.parts[2].slice(-1));e.parts[5]&&(a=a.replace(/[EeWw]/,e.parts[5].slice(-1)));e.formatResult=a;return e},getFormattedUSNGStr:function(a,f){var l={};l.sourceValue=a;l.sourceFormatString=f;a[0].match(/^[ABYZ]/)?l.gzd=a[0].match(/[ABYZ]/)[0].trim():l.gzd=a[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();a[0].replace(l.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)&&(l.grdsq=a[0].replace(l.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim());
a[0].replace(l.gzd+l.grdsq,"").match(/^\d{1,5}/)&&(l.easting=a[0].replace(l.gzd+l.grdsq,"").match(/^\d{1,5}/)[0].trim());a[0].replace(l.gzd+l.grdsq,"").match(/\d{1,5}$/)&&(l.northing=a[0].replace(l.gzd+l.grdsq,"").match(/\d{1,5}$/)[0].trim());a=f.replace(/Y/,l.northing);a=a.replace(/X/,l.easting);a=a.replace(/S/,l.grdsq);a=a.replace(/Z/,l.gzd);l.formatResult=a;return l},getFormattedMGRSStr:function(a,f){var l={};l.sourceValue=a;l.sourceFormatString=f;a[0].match(/^[ABYZ]/)?l.gzd=a[0].match(/[ABYZ]/)[0].trim():
l.gzd=a[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();l.grdsq=a[0].replace(l.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();l.easting=a[0].replace(l.gzd+l.grdsq,"").match(/^\d{1,5}/)[0].trim();l.northing=a[0].replace(l.gzd+l.grdsq,"").match(/\d{1,5}$/)[0].trim();a=f.replace(/Y/,l.northing);a=a.replace(/X/,l.easting);a=a.replace(/S/,l.grdsq);a=a.replace(/Z/,l.gzd);l.formatResult=a;return l},getFormattedGARSStr:function(a,f){var l={};l.sourceValue=a;l.sourceFormatString=f;l.lon=a[0].match(/\d{3}/);l.lat=a[0].match(/[a-zA-Z]{2}/);
a=a[0].match(/\d*$/);l.quadrant=a[0][0];l.key=a[0][1];f=f.replace(/K/,l.key);f=f.replace(/Q/,l.quadrant);f=f.replace(/Y/,l.lat);f=f.replace(/X/,l.lon);l.formatResult=f;return l},getFormattedGEOREFStr:function(a,f){var l={};l.sourceValue=a;l.sourceFormatString=f;l.lon=a[0].match(/[a-zA-Z]{1}/)[0].trim();l.lat=a[0].replace(l.lon,"").match(/[a-zA-Z]{1}/)[0].trim();l.quadrant15lon=a[0].replace(l.lon+l.lat,"").match(/[a-zA-Z]{1}/)[0].trim();l.quadrant15lat=a[0].replace(l.lon+l.lat+l.quadrant15lon,"").match(/[a-zA-Z]{1}/)[0].trim();
a=a[0].replace(l.lon+l.lat+l.quadrant15lon+l.quadrant15lat,"");l.quadrant1lon=a.substr(0,a.length/2);l.quadrant1lat=a.substr(a.length/2,a.length);f=f.replace(/Y/,l.quadrant1lat);f=f.replace(/X/,l.quadrant1lon);f=f.replace(/D/,l.quadrant15lat);f=f.replace(/C/,l.quadrant15lon);f=f.replace(/B/,l.lat);f=f.replace(/A/,l.lon);l.formatResult=f;return l},getFormattedUTMStr:function(a,f){var l={};l.sourceValue=a;l.sourceFormatString=f;l.parts=a[0].split(/[ ,]+/);l.zone=l.parts[0].replace(/[A-Z]/,"");l.bandLetter=
l.parts[0].slice(-1);l.easting=l.parts[1];l.westing=l.parts[2];a=f.replace(/Y/,l.westing);a=a.replace(/X/,l.easting);a=a.replace(/B/,l.bandLetter);a=a.replace(/Z/,l.zone);l.formatResult=a;return l},getFormattedUTMHStr:function(a,f){var l={};l.sourceValue=a;l.sourceFormatString=f;l.parts=a[0].split(/[ ,]+/);l.zone=l.parts[0].replace(/[A-Z]/,"");l.hemisphere=l.parts[0].slice(-1);l.easting=l.parts[1];l.westing=l.parts[2];a=f.replace(/Y/,l.westing);a=a.replace(/X/,l.easting);a=a.replace(/H/,l.hemisphere);
a=a.replace(/Z/,l.zone);l.formatResult=a;return l}})})},"jimu/dijit/_CoordinateControlFormatNotation":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/on dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),function(J,F,c,g,v,w,z,k){return J([w,z,k],{baseClass:"jimu-coordinate-control",templateString:'\x3cdiv\x3e\x3cspan class\x3d"formatText"\x3e${nls.editCoordinateDialogTitle}\x3c/span\x3e\x3cdiv class\x3d"controlContainer"\x3e\x3cselect tabindex\x3d"0" class\x3d"selectFormat" data-dojo-attach-point\x3d"frmtSelect" aria-label\x3d"${nls.editCoordinateDialogTitle}" data-dojo-type\x3d"jimu/dijit/formSelect"\x3e\x3c/select\x3e\x3cinput tabindex\x3d"0" type\x3d"text" data-dojo-attach-point\x3d"frmtVal" class\x3d"formatInput"\x3e\x3c/input\x3e\x3cdiv class\x3d"settingsContainer" data-dojo-attach-point\x3d"prefixContainer"\x3e\x3cdiv class\x3d"formatText" data-dojo-attach-point\x3d"addSignChkBox" label\x3d"${nls.posNegPrefixLabel}" data-dojo-type\x3d"jimu/dijit/CheckBox"/\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"btnContainer"\x3e\x3cdiv tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.applyButtonLabel}" data-dojo-attach-point\x3d"applyButton" class\x3d"jimu-btn"\x3e${nls.applyButtonLabel}\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"cancelButton" tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.cancelButtonLabel}" class\x3d"jimu-btn formatCoordCancelButton"\x3e${nls.cancelButtonLabel}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
isCanceled:!1,formats:{},setCt:function(b){this.ct=b;this.frmtSelect.set("value",this.ct)},postCreate:function(){this.formats={DD:{defaultFormat:"YN XE",customFormat:null,useCustom:!1},DDM:{defaultFormat:"A\u00b0 B'N X\u00b0 Y'E",customFormat:null,useCustom:!1},DMS:{defaultFormat:"A\u00b0 B' C\"N X\u00b0 Y' Z\"E",customFormat:null,useCustom:!1},GARS:{defaultFormat:"XYQK",customFormat:null,useCustom:!1},GEOREF:{defaultFormat:"ABCDXY",customFormat:null,useCustom:!1},MGRS:{defaultFormat:"ZSXY",customFormat:null,
useCustom:!1},USNG:{defaultFormat:"ZSXY",customFormat:null,useCustom:!1},UTM:{defaultFormat:"ZB X Y",customFormat:null,useCustom:!1},UTM_H:{defaultFormat:"ZH X Y",customFormat:null,useCustom:!1}};var b=[],h;for(h in this.formats){var n={value:h,label:this.nls.notations[h]};b.push(n)}this.frmtSelect.addOption(b);v.set(this.frmtVal,"value",this.formats[this.ct].defaultFormat);this.own(g(this.frmtSelect,"change",F.hitch(this,this.frmtSelectValueDidChange)));this.own(g(this.frmtVal,"change",F.hitch(this,
this.formatValDidChange)));this.own(g(this.cancelButton,"click",F.hitch(this,function(){this.isCanceled=!0})));this.own(g(this.applyButton,"click",F.hitch(this,function(){this.isCanceled=!1})));this.displayPrefixContainer()},formatValDidChange:function(){var b=v.get(this.frmtVal,"value"),h=this.frmtSelect.get("value");this.formats[h].customFormat=b;this.formats[h].useCustom=!0},frmtSelectValueDidChange:function(b){var h=this.formats[b].useCustom?this.formats[b].customFormat:this.formats[b].defaultFormat;
this.ct=b;v.set(this.frmtVal,"value",h);this.displayPrefixContainer()},displayPrefixContainer:function(){switch(this.ct){case "DD":case "DDM":case "DMS":c.set(this.prefixContainer,{display:""});break;default:c.set(this.prefixContainer,{display:"none"})}}})})},"jimu/dijit/_CoordinateControlConfirmNotation":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/aspect dojo/keys dojo/query dijit/Dialog dijit/form/Select dojo/_base/lang".split(" "),
function(J,F,c,g,v,w,z,k,b,h,n){return J([b],{baseClass:"jimu-coordinate-control",numberOfInputs:0,selectOptions:{},comboOptions:{},dfd:null,constructor:function(d){n.mixin(this,d);this.numberOfInputs=d.options.length;this.selectOptions=d.options},postCreate:function(){this.inherited("postCreate",arguments);this.closable=!1;this.closeButtonNode.style.display="none";"DartTheme"===this.theme&&v.add(this.containerNode,"coordinateControlDialog");this.message=g.create("div",{style:"margin-bottom: 5px"},
this.containerNode,"first");this.message.innerHTML=this.numberOfInputs+" "+this.nls.multipleNotationLabel;this.comboOptions=new h({style:{width:"99%"},"aria-label":this.numberOfInputs+" "+this.nls.multipleNotationLabel},g.create("div",{},this.containerNode,"last"));this.own(w.after(this.comboOptions,"onChange",c.hitch(this,this._onComboOptionsChanged)));for(var d=0;d<this.selectOptions.length;d++)this.comboOptions.addOption({value:this.selectOptions[d].name,label:this.selectOptions[d].notationType});
this.buttonDiv=g.create("div",{"class":"buttonContainer",style:"margin-top:10px;"+(window.isRTL?"text-align:left":"text-align:right")},this.containerNode,"last");this.okButton=g.create("div",{innerHTML:this.nls.applyButtonLabel,"class":"jimu-btn",role:"button",tabindex:"0","aria-label":this.nls.applyButtonLabel,onclick:n.hitch(this,function(){this.hide();this.dfd.resolve()}),onkeypress:n.hitch(this,function(p){if(p.keyCode===z.ENTER||p.keyCode===z.SPACE)this.hide(),this.dfd.resolve()})},this.buttonDiv,
"first");this.cancelButton=g.create("div",{innerHTML:this.nls.cancelButtonLabel,"class":"jimu-btn",style:"margin: 0 5px 0 5px",role:"button",tabindex:"0","aria-label":this.nls.cancelButtonLabel,onclick:n.hitch(this,function(){this.hide();this.dfd.cancel()}),onkeypress:n.hitch(this,function(p){if(p.keyCode===z.ENTER||p.keyCode===z.SPACE)this.hide(),this.dfd.cancel()})},this.buttonDiv,"last")},show:function(){this.inherited("show",arguments);this.dfd=new F;var d=this._getDOMElement(".dijitSelectLabel",
this.comboOptions.domNode);d&&v.add(d,"dijitSelectLabelConfirmNotation");return this.dfd},_onComboOptionsChanged:function(){var d=this._getDOMElement(".dijitSelectLabel",this.comboOptions.domNode);d&&v.add(d,"dijitSelectLabelConfirmNotation")},_getDOMElement:function(d,p){return(d=k(d,p))&&1===d.length?d[0]:null}})})},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(J,F,c,g){return J("dijit.form.Textarea",[g,c],
{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);F.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"})}})})},"dijit/form/_ExpandingTextAreaMixin":function(){define("dojo/_base/declare dojo/dom-construct dojo/has dojo/_base/lang dojo/on dojo/_base/window ../Viewport".split(" "),function(J,F,c,g,v,w,z){c.add("textarea-needs-help-shrinking",
function(){var k=w.body(),b=F.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},k,"last"),h=b.scrollHeight>=b.clientHeight;k.removeChild(b);return h});return J("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments);
this.resize()},postCreate:function(){this.inherited(arguments);var k=this.textbox;k.style.overflowY="hidden";this.own(v(k,"focus, resize",g.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments);this.own(z.on("resize",g.hitch(this,"_resizeLater")));this._resizeLater()},_onInput:function(k){this.inherited(arguments);this.resize()},_estimateHeight:function(){var k=this.textbox;k.rows=(k.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){function k(){var I=
!1;""===b.value&&(b.value=" ",I=!0);var N=b.scrollHeight;I&&(b.value="");return N}var b=this.textbox;"hidden"==b.style.overflowY&&(b.scrollTop=0);if(!this.busyResizing){this.busyResizing=!0;if(k()||b.offsetHeight){var h=k()+Math.max(b.offsetHeight-b.clientHeight,0),n=h+"px";n!=b.style.height&&(b.style.height=n,b.rows=1);if(c("textarea-needs-help-shrinking")){var d=k(),p=b.style.minHeight,C=4,B=b.scrollTop;b.style.minHeight=n;for(b.style.height="auto";0<h;){b.style.minHeight=Math.max(h-C,4)+"px";n=
k();d-=n;h-=d;if(d<C)break;d=n;C<<=1}b.style.height=h+"px";b.style.minHeight=p;b.scrollTop=B}b.style.overflowY=k()>b.clientHeight?"auto":"hidden";"hidden"==b.style.overflowY&&(b.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})})},"dijit/InlineEditBox":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/when ./a11yclick ./focus ./_Widget ./_TemplatedMixin ./_WidgetsInTemplateMixin ./_Container ./form/Button ./form/_TextBoxMixin ./form/TextBox dojo/text!./templates/InlineEditBox.html dojo/i18n!./nls/common".split(" "),
function(J,F,c,g,v,w,z,k,b,h,n,d,p,C,B,I,N,q,r,x,y,A,K,G,H){r=g("dijit._InlineEditor",[q,r,x],{templateString:H,contextRequire:J,postMixInProperties:function(){this.inherited(arguments);this.messages=b.getLocalization("dijit","common",this.lang);F.forEach(["buttonSave","buttonCancel"],function(t){this[t]||(this[t]=this.messages[t])},this)},buildRendering:function(){this.inherited(arguments);var t="string"==typeof this.editor?d.getObject(this.editor)||J(this.editor):this.editor,E=this.sourceStyle,
P="line-height:"+E.lineHeight+";",S=k.getComputedStyle(this.domNode);F.forEach(["Weight","Family","Size","Style"],function(U){S["font"+U]!=E["font"+U]&&(P+="font-"+U+":"+E["font"+U]+";")},this);F.forEach("marginTop marginBottom marginLeft marginRight position left top right bottom float clear display".split(" "),function(U){this.domNode.style[U]=E[U]},this);var L=this.inlineEditBox.width;"100%"==L?(P+="width:100%;",this.domNode.style.display="block"):P+="width:"+(L+(Number(L)==L?"px":""))+";";L=d.delegate(this.inlineEditBox.editorParams,
{style:P,dir:this.dir,lang:this.lang,textDir:this.textDir});this.editWidget=new t(L,this.editorPlaceholder);this.inlineEditBox.autoSave&&(this.saveButton.destroy(),this.cancelButton.destroy(),this.saveButton=this.cancelButton=null,z.destroy(this.buttonContainer))},postCreate:function(){this.inherited(arguments);var t=this.editWidget;this.inlineEditBox.autoSave?this.own(c.after(t,"onChange",d.hitch(this,"_onChange"),!0),p(t,"keydown",d.hitch(this,"_onKeyDown"))):"intermediateChanges"in t&&(t.set("intermediateChanges",
!0),this.own(c.after(t,"onChange",d.hitch(this,"_onIntermediateChange"),!0)),this.saveButton.set("disabled",!0))},startup:function(){this.editWidget.startup();this.inherited(arguments)},_onIntermediateChange:function(){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(!0);this.inherited(arguments)},getValue:function(){var t=this.editWidget;return String(t.get("displayedValue"in t||"_getDisplayedValueAttr"in t?"displayedValue":
"value"))},_onKeyDown:function(t){this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&!t.altKey&&!t.ctrlKey&&(t.keyCode==n.ESCAPE?(t.stopPropagation(),t.preventDefault(),this.cancel(!0)):t.keyCode==n.ENTER&&"INPUT"==t.target.tagName&&(t.stopPropagation(),t.preventDefault(),this._onChange()))},_onBlur:function(){this.inherited(arguments);this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(this.getValue()==this._resetValue?this.cancel(!1):this.enableSave()&&this.save(!1))},_onChange:function(){this.inlineEditBox.autoSave&&
this.inlineEditBox.editing&&this.enableSave()&&N.focus(this.inlineEditBox.displayNode)},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():!0},focus:function(){this.editWidget.focus();this.editWidget.focusNode&&(N._onFocusNode(this.editWidget.focusNode),"INPUT"==this.editWidget.focusNode.tagName&&this.defer(function(){K.selectInputText(this.editWidget.focusNode)}))}});q=g("dijit.InlineEditBox"+(C("dojo-bidi")?"_NoBidi":""),q,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",
renderAsHtml:!1,editor:G,editorWrapper:r,editorParams:{},disabled:!1,onChange:function(){},onCancel:function(){},width:"100%",value:"",noValueIndicator:6>=C("ie")?"\x3cspan style\x3d'font-family: wingdings; text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e":"\x3cspan style\x3d'text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e",constructor:function(){this.editorParams=
{}},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;this.own(p(this.displayNode,I,d.hitch(this,"_onClick")),p(this.displayNode,"mouseover, focus",d.hitch(this,"_onMouseOver")),p(this.displayNode,"mouseout, blur",d.hitch(this,"_onMouseOut")));this.displayNode.setAttribute("role","button");this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0);this.value||"value"in this.params||(this.value=d.trim(this.renderAsHtml?this.displayNode.innerHTML:
this.displayNode.innerText||this.displayNode.textContent||""));this.value||(this.displayNode.innerHTML=this.noValueIndicator);w.add(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(t){h.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",t)},_setDisabledAttr:function(t){this.domNode.setAttribute("aria-disabled",t?"true":"false");t?this.displayNode.removeAttribute("tabIndex"):this.displayNode.setAttribute("tabIndex",
0);w.toggle(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",t);this._set("disabled",t)},_onMouseOver:function(){this.disabled||w.add(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){w.remove(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(t){this.disabled||(t&&(t.stopPropagation(),t.preventDefault()),this._onMouseOut(),this.defer("edit"))},edit:function(){if(!this.disabled&&!this.editing){this._set("editing",!0);this._savedTabIndex=
v.get(this.displayNode,"tabIndex")||"0";if(!this.wrapperWidget){var t=z.create("span",null,this.domNode,"before");this.wrapperWidget=new ("string"==typeof this.editorWrapper?d.getObject(this.editorWrapper):this.editorWrapper)({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:k.getComputedStyle(this.displayNode),save:d.hitch(this,"save"),cancel:d.hitch(this,"cancel"),
textDir:this.textDir},t);this.wrapperWidget._started||this.wrapperWidget.startup();this._started||this.startup()}var E=this.wrapperWidget;w.add(this.displayNode,"dijitOffScreen");w.remove(E.domNode,"dijitOffScreen");k.set(E.domNode,{visibility:"visible"});v.set(this.displayNode,"tabIndex","-1");var P=E.editWidget,S=this;B(P.onLoadDeferred,d.hitch(E,function(){P.set("displayedValue"in P||"_setDisplayedValueAttr"in P?"displayedValue":"value",S.value);this.defer(function(){E.saveButton&&E.saveButton.set("disabled",
"intermediateChanges"in P);this.focus();this._resetValue=this.getValue()})}))}},_onBlur:function(){this.inherited(arguments)},destroy:function(){this.wrapperWidget&&!this.wrapperWidget._destroyed&&(this.wrapperWidget.destroy(),delete this.wrapperWidget);this.inherited(arguments)},_showText:function(t){var E=this.wrapperWidget;k.set(E.domNode,{visibility:"hidden"});w.add(E.domNode,"dijitOffScreen");w.remove(this.displayNode,"dijitOffScreen");v.set(this.displayNode,"tabIndex",this._savedTabIndex);t&&
N.focus(this.displayNode)},save:function(t){if(!this.disabled&&this.editing){this._set("editing",!1);var E=this.wrapperWidget.getValue();this.set("value",E);this._showText(t)}},setValue:function(t){h.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0");return this.set("value",t)},_setValueAttr:function(t){t=d.trim(t);var E=this.renderAsHtml?t:t.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;").replace(/\n/g,
"\x3cbr\x3e");this.displayNode.innerHTML=this.editorParams&&"password"===this.editorParams.type?"********":E||this.noValueIndicator;this._set("value",t);this._started&&this.defer(function(){this.onChange(t)})},getValue:function(){h.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0");return this.get("value")},cancel:function(t){!this.disabled&&this.editing&&(this._set("editing",!1),this.defer("onCancel"),this._showText(t))}});C("dojo-bidi")&&(q=g("dijit.InlineEditBox",
q,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.displayNode)}}));q._InlineEditor=r;return q})},"esri/dijit/util/busyIndicator":function(){define("dijit/registry dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-construct dojox/widget/Standby require".split(" "),function(J,F,c,g,v,w,z){var k={_defaultStandbyParams:{image:z.toUrl("../images/loading-throb.gif"),color:"#fff",opacity:.75,duration:200},create:function(b){if(b=this._normalizeParams(b))return b=new w(k._toStandbyParams(b)),
v.place(b.domNode,c.doc.body),k._createHandle(b)},_normalizeParams:function(b){if(b){if(b.target)return b;if("string"===typeof b){var h=J.byId(b);b=h?h.domNode:g.byId(b)}else b=b.domNode?b.domNode:g.byId(b);if(b)return{target:b}}},_toStandbyParams:function(b){b.imageUrl&&(b.image=b.imageUrl);b.backgroundColor&&(b.color=b.backgroundColor);b.backgroundOpacity&&(b.opacity=b.backgroundOpacity);b.fadeDuration&&(b.duration=b.fadeDuration);return F.mixin({},k._defaultStandbyParams,b)},_createHandle:function(b){return{show:function(){b&&
b.show()},hide:function(){b&&b.hide()},destroy:function(){b&&(b.destroy(),b=null)}}}};return k})},"dojox/widget/Standby":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/event dojo/_base/sniff dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/window dojo/_base/window dojo/_base/fx dojo/fx dijit/_Widget dijit/_TemplatedMixin dijit/registry".split(" "),function(J,F,c,g,v,w,z,k,b,h,n,d,p,C,B,I,N){J.experimental("dojox.widget.Standby");
return F("dojox.widget.Standby",[B,I],{image:require.toUrl("dojox/widget/Standby/images/loading.gif").toString(),imageText:"Please Wait...",text:"Please wait...",centerIndicator:"image",target:"",color:"#C0C0C0",duration:500,zIndex:"auto",opacity:.75,templateString:'\x3cdiv\x3e\x3cdiv style\x3d"display: none; opacity: 0; z-index: 9999; position: absolute; cursor:wait;" dojoAttachPoint\x3d"_underlayNode"\x3e\x3c/div\x3e\x3cimg src\x3d"${image}" style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px; left: 0px; cursor:wait;" dojoAttachPoint\x3d"_imageNode"\x3e\x3cdiv style\x3d"opacity: 0; display: none; z-index: -10000; position: absolute; top: 0px;" dojoAttachPoint\x3d"_textNode"\x3e\x3c/div\x3e\x3c/div\x3e',
_underlayNode:null,_imageNode:null,_textNode:null,_centerNode:null,_displayed:!1,_resizeCheck:null,_started:!1,_parent:null,startup:function(q){if(!this._started){if("string"===typeof this.target){var r=N.byId(this.target);this.target=r?r.domNode:w.byId(this.target)}this.text&&(this._textNode.innerHTML=this.text);"image"===this.centerIndicator?(this._centerNode=this._imageNode,z.set(this._imageNode,"src",this.image),z.set(this._imageNode,"alt",this.imageText)):this._centerNode=this._textNode;h.set(this._underlayNode,
{display:"none",backgroundColor:this.color});h.set(this._centerNode,"display","none");this.connect(this._underlayNode,"onclick","_ignore");this.domNode.parentNode&&this.domNode.parentNode!=d.body()&&d.body().appendChild(this.domNode);7==v("ie")&&(this._ieFixNode=k.create("div"),h.set(this._ieFixNode,{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}),d.body().appendChild(this._ieFixNode));this.inherited(arguments)}},show:function(){this._displayed||(this._anim&&(this._anim.stop(),delete this._anim),
this._displayed=!0,this._size(),this._disableOverflow(),this._fadeIn())},hide:function(){if(this._displayed)try{this._anim&&(this._anim.stop(),delete this._anim),this._size()}catch(q){console.error(q)}finally{this._fadeOut(),this._displayed=!1,null!==this._resizeCheck&&(clearInterval(this._resizeCheck),this._resizeCheck=null)}},isVisible:function(){return this._displayed},onShow:function(){},onHide:function(){},uninitialize:function(){this._displayed=!1;this._resizeCheck&&clearInterval(this._resizeCheck);
h.set(this._centerNode,"display","none");h.set(this._underlayNode,"display","none");7==v("ie")&&this._ieFixNode&&(d.body().removeChild(this._ieFixNode),delete this._ieFixNode);this._anim&&(this._anim.stop(),delete this._anim);this._centerNode=this._textNode=this._imageNode=this.target=null;this.inherited(arguments)},_size:function(){if(this._displayed){var q=z.get(d.body(),"dir");q&&(q=q.toLowerCase());var r=this._scrollerWidths(),x=this.target,y=h.get(this._centerNode,"display");h.set(this._centerNode,
"display","block");var A=b.position(x,!0);if(x===d.body()||x===d.doc)A=n.getBox(),A.x=A.l,A.y=A.t;var K=b.getMarginBox(this._centerNode);h.set(this._centerNode,"display",y);if(this._ieFixNode){var G=-this._ieFixNode.offsetTop/1E3;A.x=Math.floor((A.x+.9)/G);A.y=Math.floor((A.y+.9)/G);A.w=Math.floor((A.w+.9)/G);A.h=Math.floor((A.h+.9)/G)}var H=h.get(x,"zIndex"),t=y=H;if("auto"===this.zIndex)if("auto"!=H)y=parseInt(y,10),t=parseInt(t,10);else{var E=x;if(E&&E!==d.body()&&E!==d.doc)for(E=x.parentNode,
G=-1E5;E&&E!==d.body();)(H=h.get(E,"zIndex"))&&"auto"!==H&&(H=parseInt(H,10),G<H&&(G=H,y=H+1,t=H+1)),E=E.parentNode}else y=parseInt(this.zIndex,10),t=parseInt(this.zIndex,10);h.set(this._centerNode,"zIndex",t);h.set(this._underlayNode,"zIndex",y);if((y=x.parentNode)&&y!==d.body()&&x!==d.body()&&x!==d.doc){E=A.h;t=A.w;x=b.position(y,!0);this._ieFixNode&&(G=-this._ieFixNode.offsetTop/1E3,x.x=Math.floor((x.x+.9)/G),x.y=Math.floor((x.y+.9)/G),x.w=Math.floor((x.w+.9)/G),x.h=Math.floor((x.h+.9)/G));x.w-=
y.scrollHeight>y.clientHeight&&0<y.clientHeight?r.v:0;x.h-=y.scrollWidth>y.clientWidth&&0<y.clientWidth?r.h:0;"rtl"===q&&(v("opera")?(A.x+=y.scrollHeight>y.clientHeight&&0<y.clientHeight?r.v:0,x.x+=y.scrollHeight>y.clientHeight&&0<y.clientHeight?r.v:0):v("ie")?x.x+=y.scrollHeight>y.clientHeight&&0<y.clientHeight?r.v:0:v("webkit"));x.w<A.w&&(A.w-=x.w);x.h<A.h&&(A.h-=x.h);var P=x.y,S=x.y+x.h,L=A.y,U=A.y+E;q=x.x;G=x.x+x.w;H=A.x;var W=A.x+t;if(U>P&&L<P)A.y=x.y,E-=P-L,A.h=E<x.h?E:A.h-2*(y.scrollWidth>
y.clientWidth&&0<y.clientWidth?r.h:0);else if(L<S&&U>S)A.h=S-L;else if(U<=P||L>=S)A.h=0;if(W>q&&H<q)A.x=x.x,t-=q-H,A.w=t<x.w?t:A.w-2*(y.scrollHeight>y.clientHeight&&0<y.clientHeight?r.w:0);else if(H<G&&W>G)A.w=G-H;else if(W<=q||H>=G)A.w=0}0<A.h&&0<A.w?(h.set(this._underlayNode,{display:"block",width:A.w+"px",height:A.h+"px",top:A.y+"px",left:A.x+"px"}),r=["borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"],this._cloneStyles(r),v("ie")||(r=
"MozBorderRadius MozBorderRadiusTopleft MozBorderRadiusTopright MozBorderRadiusBottomleft MozBorderRadiusBottomright WebkitBorderRadius WebkitBorderTopLeftRadius WebkitBorderTopRightRadius WebkitBorderBottomLeftRadius WebkitBorderBottomRightRadius".split(" "),this._cloneStyles(r,this)),r=A.h/2-K.h/2,y=A.w/2-K.w/2,A.h>=K.h&&A.w>=K.w?h.set(this._centerNode,{top:r+A.y+"px",left:y+A.x+"px",display:"block"}):h.set(this._centerNode,"display","none")):(h.set(this._underlayNode,"display","none"),h.set(this._centerNode,
"display","none"));if(null===this._resizeCheck){var Z=this;this._resizeCheck=setInterval(function(){Z._size()},100)}}},_cloneStyles:function(q){c.forEach(q,function(r){h.set(this._underlayNode,r,h.get(this.target,r))},this)},_fadeIn:function(){var q=this,r=p.animateProperty({duration:q.duration,node:q._underlayNode,properties:{opacity:{start:0,end:q.opacity}}}),x=p.animateProperty({duration:q.duration,node:q._centerNode,properties:{opacity:{start:0,end:1}},onEnd:function(){q.onShow();delete q._anim}});
this._anim=C.combine([r,x]);this._anim.play()},_fadeOut:function(){var q=this,r=p.animateProperty({duration:q.duration,node:q._underlayNode,properties:{opacity:{start:q.opacity,end:0}},onEnd:function(){h.set(this.node,{display:"none",zIndex:"-1000"})}}),x=p.animateProperty({duration:q.duration,node:q._centerNode,properties:{opacity:{start:1,end:0}},onEnd:function(){h.set(this.node,{display:"none",zIndex:"-1000"});q.onHide();q._enableOverflow();delete q._anim}});this._anim=C.combine([r,x]);this._anim.play()},
_ignore:function(q){q&&g.stop(q)},_scrollerWidths:function(){var q=k.create("div");h.set(q,{position:"absolute",opacity:0,overflow:"hidden",width:"50px",height:"50px",zIndex:"-100",top:"-200px",padding:"0px",margin:"0px"});var r=k.create("div");h.set(r,{width:"200px",height:"10px"});q.appendChild(r);d.body().appendChild(q);r=b.getContentBox(q);h.set(q,"overflow","scroll");var x=b.getContentBox(q);d.body().removeChild(q);return{v:r.w-x.w,h:r.h-x.h}},_setTextAttr:function(q){this.text=this._textNode.innerHTML=
q},_setColorAttr:function(q){h.set(this._underlayNode,"backgroundColor",q);this.color=q},_setImageTextAttr:function(q){z.set(this._imageNode,"alt",q);this.imageText=q},_setImageAttr:function(q){z.set(this._imageNode,"src",q);this.image=q},_setCenterIndicatorAttr:function(q){this.centerIndicator=q;"image"===q?(this._centerNode=this._imageNode,h.set(this._textNode,"display","none")):(this._centerNode=this._textNode,h.set(this._imageNode,"display","none"))},_setTargetAttr:function(q){if("string"===typeof q){var r=
N.byId(q);this._set("target",r?r.domNode:w.byId(q))}else this._set("target",q)},_disableOverflow:function(){if(this.target===d.body()||this.target===d.doc){this._overflowDisabled=!0;var q=d.body();this._oldOverflow=q.style&&q.style.overflow?h.get(q,"overflow"):"";if(v("ie")&&!v("quirks")){if(q.parentNode&&q.parentNode.style&&q.parentNode.style.overflow)this._oldBodyParentOverflow=q.parentNode.style.overflow;else try{this._oldBodyParentOverflow=h.get(q.parentNode,"overflow")}catch(r){this._oldBodyParentOverflow=
"scroll"}h.set(q.parentNode,"overflow","hidden")}h.set(q,"overflow","hidden")}},_enableOverflow:function(){if(this._overflowDisabled){delete this._overflowDisabled;var q=d.body();v("ie")&&!v("quirks")&&(q.parentNode.style.overflow=this._oldBodyParentOverflow,delete this._oldBodyParentOverflow);h.set(q,"overflow",this._oldOverflow);if(v("webkit")){var r=k.create("div",{style:{height:"2px"}});q.appendChild(r);setTimeout(function(){q.removeChild(r)},0)}delete this._oldOverflow}}})})},"widgets/ThreatAnalysis/js/ThreatAnalysisSettings":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/html dojo/on dojo/dom dojo/keys ./ColorPickerEditor jimu/BaseWidget dijit/_WidgetsInTemplateMixin dojo/text!../templates/ThreatAnalysisSettings.html dojo/_base/lang dojo/Evented dojo/dom-class dojo/query dojo/dom-attr dijit/registry dijit/focus jimu/utils jimu/dijit/formSelect jimu/dijit/SymbolChooser".split(" "),
function(J,F,c,g,v,w,z,k,b,h,n,d,p,C,B,I,N,q){return J([k,b,d],{baseClass:"jimu-widget-threatAnalysisSetting",templateString:h,selectedSettings:{},colorPickerNodes:[],constructor:function(r){n.mixin(this,r)},startup:function(){var r={fireballDiaOutlineColor:{color:"#d10e40",transparency:0,type:"esriSLSSolid"},fireballDiaFillColor:{color:"#d10e40",transparency:.88,type:"esriSFSSolid"},safeDistanceOutlineColor:{color:"#ffffff",transparency:0,type:"esriSLSNull"},safeDistanceFillColor:{color:"#ffd700",
transparency:.78,type:"esriSFSSolid"}};this.colorPickerNodes=C(".colorPicker",this.domNode);F.forEach(this.colorPickerNodes,n.hitch(this,function(y){y=new z({nls:this.nls,type:p.contains(y,"Line")?"line":"fill"},y);this.own(y.on("ColorPickerEditorChanged",n.hitch(this,function(){this.onSettingsChanged()})));y.setValues({color:this.config.threatAnalysis.symbology[y.id]?this.config.threatAnalysis.symbology[y.id].color:r[y.id].color,transparency:this.config.threatAnalysis.symbology[y.id]?this.config.threatAnalysis.symbology[y.id].transparency:
r[y.id].transparency});y.startup();y.dropdown.set("value",this.config.threatAnalysis.symbology[y.id]?this.config.threatAnalysis.symbology[y.id].type:r[y.id].type)}));var x=C(".jimu-color-pickerPopup",this.domNode);F.forEach(x,n.hitch(this,function(y){this.own(g(y,"keydown",n.hitch(this,function(A){A.keyCode!==w.ENTER&&A.keyCode!==w.SPACE||A.currentTarget.click()})))}));this.onSettingsChanged()},postCreate:function(){this.inherited(arguments);p.add(this.domNode,"SettingsContainer FullWidth");this._handleClickEvents()},
_handleClickEvents:function(){this.own(g(this.mandatorySettingsButton,"click",n.hitch(this,function(){this._openCloseNodes(this.mandatorySettingsButton,this.mandatoryContainer)})));this.own(g(this.mandatorySettingsButton,"keydown",n.hitch(this,function(r){r.keyCode!==w.ENTER&&r.keyCode!==w.SPACE||this._openCloseNodes(this.mandatorySettingsButton,this.mandatoryContainer)})));this.own(g(this.safeSettingsButton,"click",n.hitch(this,function(){this._openCloseNodes(this.safeSettingsButton,this.safeContainer)})));
this.own(g(this.safeSettingsButton,"keydown",n.hitch(this,function(r){if(r.keyCode===w.ENTER||r.keyCode===w.SPACE)this._openCloseNodes(this.safeSettingsButton,this.safeContainer),this._setLastFocusNode()})));this.own(g(this.fireballDiaSettingsButton,"click",n.hitch(this,function(){this._openCloseNodes(this.fireballDiaSettingsButton,this.fireBallContainer)})));this.own(g(this.fireballDiaSettingsButton,"keydown",n.hitch(this,function(r){if(r.keyCode===w.ENTER||r.keyCode===w.SPACE)this._openCloseNodes(this.fireballDiaSettingsButton,
this.fireBallContainer),this._setLastFocusNode()})));this.own(g(this.safeDistanceSettingsButton,"click",n.hitch(this,function(){this._openCloseNodes(this.safeDistanceSettingsButton,this.safeDistanceContainer)})));this.own(g(this.safeDistanceSettingsButton,"keydown",n.hitch(this,function(r){if(r.keyCode===w.ENTER||r.keyCode===w.SPACE)this._openCloseNodes(this.safeDistanceSettingsButton,this.safeDistanceContainer),this._setLastFocusNode()})))},validInputs:function(){var r=!0;F.some(this.colorPickerNodes,
function(x){if(!I.byId(x.id).validateSpinner())return r=!1,!0},this);return r},_openCloseNodes:function(r,x){var y=C(".container",this.domNode),A=C(".SettingsButtonIcon",this.domNode),K=!1;this.validInputs()&&(r&&p.contains(r,"LabelSettingsRightButton")&&(K=!0),F.forEach(y,n.hitch(this,function(G){c.addClass(G,"controlGroupHidden")})),F.forEach(A,n.hitch(this,function(G,H){c.removeClass(G,"LabelSettingsDownButton");c.addClass(G,"LabelSettingsRightButton");B.set(G,"aria-expanded","false");H===A.length-
1&&setTimeout(n.hitch(this,function(){this._setLastFocusNode()}),100)})),K?(c.removeClass(x,"controlGroupHidden"),c.removeClass(r,"LabelSettingsRightButton"),c.addClass(r,"LabelSettingsDownButton"),B.set(r,"aria-expanded","true"),r=C(".jimu-color-picker",x),r.length&&N.focus(r[0])):N.focus(r))},onClose:function(){this.onSettingsChanged();this._openCloseNodes()},onSettingsChanged:function(){F.forEach(this.colorPickerNodes,n.hitch(this,function(r){var x={color:void 0!==I.byId(r.id)?I.byId(r.id).getValues().color:
this.config.threatAnalysis.symbology[r.id].color,transparency:void 0!==I.byId(r.id)?I.byId(r.id).getValues().transparency:this.config.threatAnalysis.symbology[r.id].transparency,type:void 0!==I.byId(r.id)?I.byId(r.id).dropdown.getValue():this.config.threatAnalysis.symbology[r.id].type};this.selectedSettings[r.id]=x}));this.emit("ThreatSettingsChanged",this.selectedSettings)},_setLastFocusNode:function(){if(p.contains(this.safeDistanceSettingsButton,"LabelSettingsDownButton")){var r=C(".dijit",v.byId("safeDistanceFillColor").lastElementChild)[0];
q.initLastFocusNode(this.refDomNode,r)}else q.initLastFocusNode(this.refDomNode,this.safeDistanceSettingsButton)}})})},"widgets/ThreatAnalysis/js/ColorPickerEditor":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/_base/Color dojo/on dojo/dom-attr dojo/query dojo/_base/html jimu/BaseWidget dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/ColorPickerEditor.html dijit/form/HorizontalSlider jimu/dijit/ColorPickerPopup dijit/form/NumberSpinner".split(" "),
function(J,F,c,g,v,w,z,k,b,h,n,d,p,C){return J([b,h,n],{_defaultColor:"#485566",templateString:d,nls:null,postMixInProperties:function(){this.inherited(arguments);this.isRenderIdForAttrs=!0},postCreate:function(){this.colorPicker=new C({color:this._defaultColor,tabindex:"0",role:"button"},this.colorPicker);this.colorPicker.startup();this.own(this.colorPicker.on("change",c.hitch(this,function(){this.onColorPickerEditorChanged()})));this.slider=new p({name:"slider",value:100,minimum:0,maximum:100,discreteValues:101,
intermediateChanges:!0,showButtons:!1,style:"display: inline-block;"},this.sliderBar);this.slider.startup();var B=[],I,N="esriSLSDash esriSLSDashDot esriSLSDashDotDot esriSLSDot esriSLSLongDash esriSLSLongDashDot esriSLSNull esriSLSShortDash esriSLSShortDashDot esriSLSShortDashDotDot esriSLSShortDot esriSLSSolid".split(" "),q="esriSFSBackwardDiagonal esriSFSCross esriSFSDiagonalCross esriSFSForwardDiagonal esriSFSHorizontal esriSFSNull esriSFSSolid esriSFSVertical".split(" ");"line"===this.type?F.forEach(N,
c.hitch(this,function(r){I={value:r,label:this.nls.lineStyles[r]};B.push(I)})):F.forEach(q,c.hitch(this,function(r){I={value:r,label:this.nls.fillStyles[r]};B.push(I)}));this.dropdown.addOption(B);this.inherited(arguments)},startup:function(){this._setAriaLabelForEditorNodes();this.own(v(this.slider,"change",c.hitch(this,function(B){isNaN(B)||!1!==this._isSameVal()||(B>this.spinner.maximum?(this.spinner.setValue(0),this.spinner.setValue(this.spinner.maximum)):this.spinner.setValue(B))})));this.own(v(this.spinner,
"change",c.hitch(this,function(B){isNaN(B)||!1===this._isSameVal()&&B<=this.slider.maximum&&this.slider.setValue(B)})));this.own(v(this.dropdown,"change",c.hitch(this,function(){this.onColorPickerEditorChanged()})));this._stylePolyfill();this.inherited(arguments)},_setAriaLabelForEditorNodes:function(){var B="fill"===this.type?this.nls.fill:this.nls.outline;w.set(this.colorPicker.domNode,"aria-label",B+" "+this.nls.colorPicker);w.set(this.slider,"aria-label",B+" "+this.nls.transparencyLabel);w.set(this.spinner,
"aria-label",B+" "+this.nls.transparencyLabel);w.set(this.dropdown,"aria-label",B+" "+this.nls.style)},_isSameVal:function(){return this.slider.getValue()===this.spinner.getValue()},getValues:function(){var B=null,I=null;(I=this.colorPicker.getColor())&&I.toHex&&(B=I.toHex());I=this.spinner.getValue()/100;return{color:B,transparency:I}},setValues:function(B){if("object"===typeof B||"string"===typeof B)this.colorPicker.setColor(new g(B.color)),B.transparency="undefined"===typeof B.transparency?0:100*
B.transparency,this.slider.setValue(B.transparency),this.spinner.setValue(B.transparency)},_stylePolyfill:function(){var B=z(".dijitSliderLeftBumper",this.domNode)[0];B&&B.parentNode&&k.setStyle(B.parentNode,"background-color","#24b5cc")},onColorPickerEditorChanged:function(){},validateSpinner:function(){var B=!0;this.spinner.isValid()||(this._shake(this.spinner.domNode,16),this.spinner.focus(),B=!1);return B},_shake:function(B,I){function N(){if(15>q){B.style.transform="translate(0px, 0px)";I-=r;
var A=x(-I,I),K=x(-I,I);B.style.transform="translate("+A+"px, "+K+"px)";q+=1;requestAnimationFrame(N)}15<=q&&(B.style.transform="translate(0, 0)",y._shakingElements.splice(y._shakingElements.indexOf(B),1))}var q=1,r=I/15,x=function(A,K){return Math.floor(Math.random()*(K-A+1))+A};this._shakingElements||(this._shakingElements=[]);if(-1===this._shakingElements.indexOf(B)){this._shakingElements.push(B);var y=this;N()}}})})},"jimu/dijit/ColorPickerPopup":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/_base/lang dojo/_base/html dojo/on dojo/_base/Color dijit/TooltipDialog dijit/popup jimu/dijit/ColorPalette jimu/utils".split(" "),
function(J,F,c,g,v,w,z,k,b,h,n){return J([F,c],{baseClass:"jimu-color-pickerPopup",declaredClass:"jimu.dijit.ColorPickerPopup",templateString:'\x3cdiv class\x3d"jimu-color-picker"\x3e\x3c/div\x3e',_isTooltipDialogOpened:!1,color:null,showLabel:!1,around:null,_ENABLE:!0,recordUID:"",postCreate:function(){this.inherited(arguments);this._createTooltipDialog(this.domNode);this._hideTooltipDialog()},destroy:function(){b.close(this.tooltipDialog);this.picker.destroy();this.tooltipDialog.destroy();this.inherited(arguments)},
enable:function(){this._ENABLE=!0;v.removeClass(this.domNode,"disable")},disable:function(){this._ENABLE=!1;v.addClass(this.domNode,"disable")},isPartOfPopup:function(d){var p=this.tooltipDialog.domNode;return d===p||v.isDescendant(d,p)},hideTooltipDialog:function(){this._hideTooltipDialog()},showTooltipDialog:function(){this._showTooltipDialog()},initUI:function(){this.picker.initUI()},isOpen:function(){return this._isTooltipDialogOpened},_showTooltipDialog:function(){b.open({parent:this.getParent(),
popup:this.tooltipDialog,around:this.around?this.around:this.domNode,orient:this.orient});this._isTooltipDialogOpened=!0},_hideTooltipDialog:function(){b.hide(this.tooltipDialog);this._isTooltipDialogOpened=!1},_createTooltipDialog:function(){var d=v.create("div");this.tooltipDialog=new k({content:d});v.addClass(this.tooltipDialog.domNode,"jimu-color-picker-popup-dialog");var p=new h({appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerOK:!0,showColorPickerApply:!0,showCoustomRecord:!0,
closeDialogWhenChange:!0},recordUID:this.recordUID,onChange:g.hitch(this,function(C){C&&(C=new z(C),this.setColor(C),this.onChange(C))})});p.placeAt(d);p.startup();this.own(w(p,"close",g.hitch(this,function(){this._hideTooltipDialog()})));this.own(w(p,"change-style",g.hitch(this,function(){this._hideTooltipDialog();this._showTooltipDialog()})));this.own(w(this.domNode,"click",g.hitch(this,function(C){C.stopPropagation();C.preventDefault();this._isTooltipDialogOpened?this._hideTooltipDialog():!1!==
this._ENABLE&&this._showTooltipDialog()})));this.own(w(document,"click",g.hitch(this,function(C){this.isPartOfPopup(C.srcElement||C.target)||this._hideTooltipDialog()})));this.picker=p},setColor:function(d){if(d instanceof z){null===this.color&&!0===this.showLabel&&this._changeLabel(d);var p=d.toHex();this.color=d;v.setStyle(this.domNode,"backgroundColor",p);this.picker&&(this.picker.refreshRecords(),this.picker.setColor(p,!1,!0));this.showLabel&&this._changeLabel(this.color)}},getColor:function(){return this.color},
_changeLabel:function(d){v.empty(this.domNode);v.create("span",{innerHTML:d.toHex(),className:"color-label",style:{color:n.invertColor(d.toHex())}},this.domNode)},onChange:function(d){d&&this.showLabel&&this._changeLabel(d)},changeColor:function(){this.picker&&this.picker.changeColor();this.showLabel&&this._changeLabel(this.color)},setTitle:function(d){this.domNode.title=d},getTooltipDialog:function(){return this.tooltipDialog||null}})})},"widgets/ThreatAnalysis/js/portal-utils":function(){define("esri/request dojo/json dojo/topic dojo/_base/lang esri/arcgis/Portal esri/layers/FeatureLayer jimu/LayerInfos/LayerInfos jimu/utils".split(" "),
function(J,F,c,g,v,w,z,k){return{saveToPortal:function(b){(new v.Portal(b.appConfig.portalUrl)).signIn().then(g.hitch(this,function(h){var n=h.credential.token,d=h.orgId,p=h.username;if("org_user"===h.role)b.publishMessage.innerHTML=k.sanitizeHTML(b.nls.createService.format(b.nls.userRole)),c.publish("setLastFocusNode",!1);else if(b.url)h=new w(b.url+"?token\x3d"+n,{id:b.layerName,outFields:["*"]}),h._wabProperties={itemLayerInfo:{portalUrl:b.appConfig.portalUrl,itemId:b.itemId}},h.applyEdits(b.graphics,
null,null).then(g.hitch(this,function(){c.publish("clear")})).otherwise(g.hitch(this,function(){c.publish("clear")})),c.publish("setBusyIndicator",!1),b.publishMessage.innerHTML=b.nls.successfullyAppended+('\x3cbr /\x3e\x3ca role\x3d"link" tabindex\x3d"0" aria-label\x3d"'+b.nls.successfullyAppended+'" href\x3d"'+b.appConfig.portalUrl+"home/item.html?id\x3d"+b.serviceItemId+'" target\x3d"_blank"\x3e'+b.nls.manageWebLayerText+"\x3c/a\x3e"),c.publish("setLastFocusNode",!0);else{var C=b.appConfig.portalUrl+
"sharing/content/users/"+p+"/createService";this.isNameAvailable(b.appConfig.portalUrl+"sharing/rest/portals/"+d+"/isServiceNameAvailable",n,b.layerName).then(g.hitch(this,function(B){B.available?(c.publish("setBusyIndicator",!0),this.createFeatureService(C,n,this.getFeatureServiceParams(b.layerName,b.map)).then(g.hitch(this,function(I){if(I.success){var N=I.serviceurl.replace(/rest/g,"rest/admin")+"/addToDefinition";this.addDefinitionToService(N,n,this.getLayerParams(b.layerName,b.map,b.renderer,
b.nls)).then(g.hitch(this,function(q){if(q.success){q=new w(I.serviceurl+"/0?token\x3d"+n,{id:b.layerName,outFields:["*"]});q._wabProperties={itemLayerInfo:{portalUrl:b.appConfig.portalUrl,itemId:I.itemId}};b.map.addLayer(q);if(q.loaded){var r=z.getInstanceSync().getLayerInfoById(b.layerName);r.enablePopup()}else q.on("load",g.hitch(this,function(){r=z.getInstanceSync().getLayerInfoById(b.layerName);r.enablePopup()}));q.applyEdits(b.graphics,null,null).then(g.hitch(this,function(){c.publish("clear")})).otherwise(g.hitch(this,
function(){c.publish("clear")}));c.publish("setBusyIndicator",!1);b.publishMessage.innerHTML=b.nls.successfullyPublished+('\x3cbr /\x3e\x3ca role\x3d"link" tabindex\x3d"0" aria-label\x3d"'+b.nls.successfullyPublished+'" href\x3d"'+b.appConfig.portalUrl+"home/item.html?id\x3d"+I.itemId+'" target\x3d"_blank"\x3e'+b.nls.manageWebLayerText+"\x3c/a\x3e");c.publish("setLastFocusNode",!0)}}),g.hitch(this,function(q){c.publish("setBusyIndicator",!1);b.publishMessage.innerHTML=k.sanitizeHTML(b.nls.addToDefinition.format(q.message));
c.publish("setLastFocusNode",!1)}))}else c.publish("setBusyIndicator",!1),b.publishMessage.innerHTML=k.sanitizeHTML(b.nls.unableToCreate.format(b.layerName)),c.publish("setLastFocusNode",!1)}),g.hitch(this,function(I){c.publish("setBusyIndicator",!1);b.publishMessage.innerHTML=k.sanitizeHTML(b.nls.createService.format(I.message));c.publish("setLastFocusNode",!1)}))):(c.publish("setBusyIndicator",!1),b.publishMessage.innerHTML=b.nls.layerNameExists);c.publish("setLastFocusNode",!1)}))}}),g.hitch(this,
function(h){b.publishMessage.innerHTML=h.message;c.publish("setLastFocusNode",!1)}))},getFeatureServiceParams:function(b,h){return{name:b,serviceDescription:"",hasStaticData:!1,maxRecordCount:1E3,supportedQueryFormats:"JSON",capabilities:"Create,Delete,Query,Update,Editing",tags:"ThreatAnalysis",description:"",copyrightText:"",spatialReference:h.spatialReference.toJson(),initialExtent:h.extent.toJson(),allowGeometryUpdates:!0,units:"esriMeters",xssPreventionInfo:{xssPreventionEnabled:!0,xssPreventionRule:"InputOnly",
xssInputRule:"rejectInvalid"}}},getLayerParams:function(b,h,n,d){return{layers:[{adminLayerInfo:{geometryField:{name:"Shape"},xssTrustedFields:""},id:0,name:b,type:"Feature Layer",displayField:"",description:"",tags:"ThreatAnalysis",copyrightText:"",defaultVisibility:!0,ownershipBasedAccessControlForFeatures:{allowOthersToQuery:!1,allowOthersToDelete:!1,allowOthersToUpdate:!1},relationships:[],isDataVersioned:!1,supportsCalculate:!0,supportsAttachmentsByUploadId:!0,supportsRollbackOnFailureParameter:!0,
supportsStatistics:!0,supportsAdvancedQueries:!0,supportsValidateSql:!0,supportsCoordinatesQuantization:!0,supportsApplyEditsWithGlobalIds:!0,advancedQueryCapabilities:{supportsPagination:!0,supportsQueryWithDistance:!0,supportsReturningQueryExtent:!0,supportsStatistics:!0,supportsOrderBy:!0,supportsDistinct:!0,supportsQueryWithResultType:!0,supportsSqlExpression:!0,supportsReturningGeometryCentroid:!0},useStandardizedQueries:!1,geometryType:"esriGeometryPolygon",minScale:0,maxScale:0,extent:h.extent,
drawingInfo:{renderer:n.toJson(),transparency:0},allowGeometryUpdates:!0,hasAttachments:!1,htmlPopupType:"esriServerHTMLPopupTypeNone",hasM:!1,hasZ:!1,objectIdField:"OBJECTID",globalIdField:"",typeIdField:"",fields:[{name:"OBJECTID",type:"esriFieldTypeOID",actualType:"int",alias:"OBJECTID",sqlType:"sqlTypeOther",nullable:!1,editable:!1,domain:null,defaultValue:null},{name:"zone_type",type:"esriFieldTypeString",alias:d.zoneTypeLabel,actualType:"nvarchar",nullable:!0,editable:!0,domain:null,defaultValue:null,
sqlType:"sqlTypeNVarchar",length:256},{name:"threat_type",type:"esriFieldTypeString",alias:d.threatType,actualType:"nvarchar",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeNVarchar",length:256},{name:"mandatory_dist",type:"esriFieldTypeDouble",alias:d.mandatoryLabel,actualType:"float",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeFloat"},{name:"safe_dist",type:"esriFieldTypeDouble",alias:d.safeLabel,actualType:"float",nullable:!0,editable:!0,domain:null,
defaultValue:null,sqlType:"sqlTypeFloat"},{name:"lpg_fireball_dia",type:"esriFieldTypeDouble",alias:d.fireBallDiameterFieldAlias,actualType:"float",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeFloat"},{name:"lpg_safe_dist",type:"esriFieldTypeDouble",alias:d.lpgSafeDistanceFieldAlias,actualType:"float",nullable:!0,editable:!0,domain:null,defaultValue:null,sqlType:"sqlTypeFloat"},{name:"units",type:"esriFieldTypeString",alias:d.unitsLabel,actualType:"nvarchar",nullable:!0,editable:!0,
domain:null,defaultValue:null,sqlType:"sqlTypeNVarchar",length:256}],indexes:[],types:[],templates:[{name:"New Feature",description:"",drawingTool:"esriFeatureEditToolPolygon",prototype:{attributes:{}}}],supportedQueryFormats:"JSON",hasStaticData:!1,maxRecordCount:1E4,standardMaxRecordCount:4E3,tileMaxRecordCount:4E3,maxRecordCountFactor:1,exceedsLimitFactor:1,capabilities:"Query,Editing,Create,Update,Delete"}]}},isNameAvailable:function(b,h,n){return J({url:b,content:{name:n,type:"Feature Service",
token:h,f:"json"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},createFeatureService:function(b,h,n){return J({url:b,content:{f:"json",token:h,typeKeywords:"ArcGIS Server,Data,Feature Access,Feature Service,Service,Hosted Service",createParameters:F.stringify(n),outputType:"featureService"},handleAs:"json",callbackParamName:"callback"},{usePost:!0})},addDefinitionToService:function(b,h,n){return J({url:b,content:{token:h,addToDefinition:F.stringify(n),f:"json"},handleAs:"json",callbackParamName:"callback"},
{usePost:!0})}}})},"widgets/ThreatAnalysis/js/SelectFeaturesTool":function(){define("dojo/_base/declare dojo/_base/array dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/on dojo/Evented dojo/_base/html dojo/_base/lang jimu/symbolUtils jimu/dijit/DrawBox esri/graphic esri/layers/FeatureLayer esri/tasks/query esri/symbols/jsonUtils esri/layers/GraphicsLayer esri/geometry/Circle esri/renderers/SimpleRenderer esri/geometry/geometryEngine".split(" "),function(J,F,c,g,v,w,z,k,
b,h,n,d,p,C,B,I,N,q,r){return J([c,g,v,z],{baseClass:"jimu-select-features-tool",templateString:'\x3cdiv\x3e\x3cdiv data-dojo-attach-point\x3d"drawBoxDiv"\x3e\x3c/div\x3e\x3c/div\x3e',map:null,bufferLayer:null,drawBoxOption:null,nls:null,currentLayerInfo:null,postCreate:function(){this.inherited(arguments);this.map=this.drawBoxOption.map;this.bufferLayer=new I;var x=this._getPolygonSymbol(),y=new q(x);this.bufferLayer.setRenderer(y);this.map.addLayer(this.bufferLayer);this.drawBoxOption.showClear=
this.drawBoxOption.showClear;this.drawBoxOption.keepOneGraphic=!0;this.drawBox=new n(this.drawBoxOption);this.drawBox.setPolygonSymbol(x);x=h.getGreyPinMarkerSymbol();this.drawBox.setPointSymbol(x);this.drawBox.setLineSymbol(B.fromJson({color:[54,93,141,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"}));this.drawBox.placeAt(this.drawBoxDiv);this.own(w(this.drawBox,"user-clear",b.hitch(this,this._onDrawBoxClear)));this.own(w(this.drawBox,"draw-end",b.hitch(this,this._onDrawEnd)));this.drawBox.btnClear?
k.removeClass(this.drawBox.btnClear,"jimu-float-trailing"):k.addClass(this.drawBox.btnClear,"jimu-float-leading")},reset:function(){this.drawBox.reset();this.clearAllGraphics()},clearAllGraphics:function(){this.drawBox.clear();this._clearBufferLayer()},hideTempLayers:function(){this.bufferLayer&&this.bufferLayer.hide();this.drawBox&&this.drawBox.hideLayer()},showTempLayers:function(){this.bufferLayer&&this.bufferLayer.show();this.drawBox&&this.drawBox.showLayer()},deactivate:function(){this.drawBox&&
this.drawBox.deactivate()},execute:function(){var x=!1;if(this.currentLayerInfo){if(null!==this.currentLayerInfo.url)var y=new p(this.currentLayerInfo.url,{outFields:["*"]});else y=this.currentLayerInfo,x=!0;var A=this._getGeometryFromDrawBox();"POINT"===A.geoType&&(A=(new N({center:A,geodesic:!0,radius:25,radiusUnit:"esriFeet"})).getExtent());var K=new C;if(x){F.forEach(y.graphics,function(H){if(r.intersects(H.geometry,A)){var t=null;switch(H.geometry.type){case "point":t=this._getPointSymbol();
break;case "polyline":t=this._getPolylineSymbol();break;case "polygon":t=this._getPolygonSymbol();break;default:t=null}this.bufferLayer.add(new d(H.geometry,t))}},this);this.drawBox.clear();var G=r.union(F.map(this.bufferLayer.graphics,function(H){return H.geometry}));this.emit("selection-complete",{geometry:G})}else K.geometry=A,y.queryFeatures(K,b.hitch(this,function(H){F.forEach(H.features,function(t){var E=null;switch(t.geometry.type){case "point":E=this._getPointSymbol();break;case "polyline":E=
this._getPolylineSymbol();break;case "polygon":E=this._getPolygonSymbol();break;default:E=null}this.bufferLayer.add(new d(t.geometry,E))},this);this.drawBox.clear();G=r.union(F.map(H.features,function(t){return t.geometry}));this.emit("selection-complete",{geometry:G})}))}},setLayerInfo:function(x){this.currentLayerInfo=x},_getPointSymbol:function(){return B.fromJson({color:[36,181,204,175],size:16,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSCircle",outline:{style:"esriSLSSolid",color:[36,181,
204,255],width:2,type:"esriSLS"}})},_getPolylineSymbol:function(){return B.fromJson({style:"esriSFSSolid",width:5,color:[36,181,204,175],type:"esriSLS"})},_getPolygonSymbol:function(){return B.fromJson({style:"esriSFSSolid",color:[36,181,204,175],type:"esriSFS",outline:{style:"esriSLSSolid",color:[36,181,204,255],width:2,type:"esriSLS"}})},_getGeometryFromDrawBox:function(){var x=null,y=this.drawBox.getFirstGraphic();y&&(x=y.geometry);return x},_getGeometryFromBufferLayer:function(){var x=null;0<
this.bufferLayer.graphics.length&&(x=this.bufferLayer.graphics[0].geometry);return x},_onDrawBoxClear:function(){this._clearBufferLayer()},_onDrawEnd:function(){this._updateBuffer()},_clearBufferLayer:function(){this.bufferLayer&&this.bufferLayer.clear()},_updateBuffer:function(){this._clearBufferLayer();this.execute()},destroy:function(){this.bufferLayer&&this.map.removeLayer(this.bufferLayer);this.bufferLayer=null;this.inherited(arguments)}})})},"esri/geometry/Circle":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Point ./Polygon ./geodesicUtils ./webMercatorUtils ../WKIDUnitConversion ../units".split(" "),
function(J,F,c,g,v,w,z,k,b,h){J=J(w,{declaredClass:"esri.geometry.Circle",_unitToMeters:{esriCentimeters:.01,esriDecimeters:.1,esriFeet:.3048,esriInches:.0254,esriKilometers:1E3,esriMeters:1,esriMiles:1609.344,esriMillimeters:.001,esriNauticalMiles:1852,esriYards:.9144,esriDecimalDegrees:111320},constructor:function(n,d){n.center?d=n:(d=d||{},d.center=n);this.center=F.isArray(d.center)?new v(d.center[0],d.center[1]):d.center;this.radius=d.radius||1E3;this.radiusUnit=d.radiusUnit||h.METERS;this.geodesic=
!0===d.geodesic?!0:!1;this.numberOfPoints=d.numberOfPoints||60;this._init()},toJson:function(){return this.inherited(arguments)},_init:function(){this.rings=[];this._ring=0;var n=this.radius*this._unitToMeters[this.radiusUnit],d=this._srType(this.center.spatialReference);if(this.geodesic){switch(d){case "webMercator":var p=k.webMercatorToGeographic(this.center);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");
break;case "geographic":p=this.center}n=this._createGeodesicCircle(p,n,this.numberOfPoints,p.spatialReference);"webMercator"===d&&(n=k.geographicToWebMercator(n))}else{var C;"webMercator"===d||"projected"===d?C=n/this._convert2Meters(1,this.center.spatialReference):"geographic"===d&&(C=n/this._unitToMeters.esriDecimalDegrees);n=this._createPlanarCircle(this.center,C,this.numberOfPoints)}this.spatialReference=n.spatialReference;this.addRing(n.rings[0]);this.verifySR()},_createGeodesicCircle:function(n,
d,p,C){for(var B=0,I=Math.PI/180,N=[],q;B<2*Math.PI;)q=z._directGeodeticSolver(n.y*I,n.x*I,B,d,C),N.push([q.x,q.y]),B+=Math.PI/(p/2);N.push(N[0]);return new w(N)},_createPlanarCircle:function(n,d,p){for(var C=0,B=[],I,N;C<2*Math.PI;)I=n.x+Math.cos(C)*d,N=n.y+Math.sin(C)*d,B.push([I,N]),C+=Math.PI/(p/2);B.push(B[0]);n=new w(n.spatialReference);n.addRing(B);return n},_srType:function(n){return n.isWebMercator()?"webMercator":null!=b[n.wkid]||n.wkt&&0===n.wkt.indexOf("PROJCS")?"projected":"geographic"},
_convert2Meters:function(n,d){if(null!=b[d.wkid])d=b.values[b[d.wkid]];else{d=d.wkt;var p=d.lastIndexOf(",")+1,C=d.lastIndexOf("]]");d=parseFloat(d.substring(p,C))}return n*d}});c("extend-esri")&&F.setObject("geometry.Circle",J,g);return J})},"widgets/ThreatAnalysis/js/jquery.easy-autocomplete":function(){define(["jimu/loaderplugins/jquery-loader! ./libs/jquery/jquery-1-11-1.js"],function(J){var F=function(c){c.Configuration=function(g){function v(k,b){function h(n,d){for(var p in d)void 0===n[p]&&
k.log("Property '"+p+"' does not exist in EasyAutocomplete options API."),"object"===typeof n[p]&&-1===J.inArray(p,z)&&h(n[p],d[p])}h(w,b)}var w={data:"list-required",url:"list-required",dataType:"json",listLocation:function(k){return k},xmlElementName:"",getValue:function(k){return k},autocompleteOff:!0,placeholder:!1,ajaxCallback:function(){},matchResponseProperty:!1,list:{sort:{enabled:!1,method:function(k,b){k=w.getValue(k);b=w.getValue(b);return k<b?-1:k>b?1:0}},maxNumberOfElements:6,hideOnEmptyPhrase:!0,
match:{enabled:!1,caseSensitive:!1,method:function(k,b){return-1<k.search(b)?!0:!1}},showAnimation:{type:"normal",time:400,callback:function(){}},hideAnimation:{type:"normal",time:400,callback:function(){}},onClickEvent:function(){},onSelectItemEvent:function(){},onLoadEvent:function(){},onChooseEvent:function(){},onKeyEnterEvent:function(){},onMouseOverEvent:function(){},onMouseOutEvent:function(){},onShowListEvent:function(){},onHideListEvent:function(){}},highlightPhrase:!0,theme:"",cssClasses:"",
minCharNumber:0,requestDelay:0,adjustWidth:!0,ajaxSettings:{},preparePostData:function(k){return k},loggerEnabled:!0,template:"",categoriesAssigned:!1,categories:[{maxNumberOfElements:4}]},z=["ajaxSettings","template"];this.get=function(k){return w[k]};this.equals=function(k,b){var h=void 0!==w[k]&&null!==w[k]?!0:!1;return h&&w[k]===b?!0:!1};this.checkDataUrlProperties=function(){return"list-required"===w.url&&"list-required"===w.data?!1:!0};this.checkRequiredProperties=function(){for(var k in w)if("required"===
w[k])return!1;return!0};this.printPropertiesThatDoesntExist=function(k,b){v(k,b)};(function(){"xml"===g.dataType&&(g.getValue||(g.getValue=function(p){return J(p).text()}),g.list||(g.list={}),g.list.sort||(g.list.sort={}),g.list.sort.method=function(p,C){p=g.getValue(p);C=g.getValue(C);return p<C?-1:p>C?1:0},g.list.match||(g.list.match={}),g.list.match.method=function(p,C){return-1<p.search(C)?!0:!1});if(void 0!==g.categories&&g.categories instanceof Array){for(var k=[],b=0,h=g.categories.length;b<
h;b+=1){var n=g.categories[b],d;for(d in w.categories[0])void 0===n[d]&&(n[d]=w.categories[0][d]);k.push(n)}g.categories=k}})();(function(){function k(b,h){var n=b||{},d;for(d in b)void 0!==h[d]&&null!==h[d]&&("object"!==typeof h[d]||h[d]instanceof Array?n[d]=h[d]:k(b[d],h[d]));void 0!==h.data&&null!==h.data&&"object"===typeof h.data&&(n.data=h.data);return n}w=k(w,g)})();!0===w.loggerEnabled&&v(console,g);w.ajaxSettings=void 0!==g.ajaxSettings&&"object"===typeof g.ajaxSettings?g.ajaxSettings:{};
(function(){if("list-required"!==w.url&&"function"!==typeof w.url){var k=w.url;w.url=function(){return k}}void 0!==w.ajaxSettings.url&&"function"!==typeof w.ajaxSettings.url&&(k=w.ajaxSettings.url,w.ajaxSettings.url=function(){return k});if("string"===typeof w.listLocation){var b=w.listLocation;"XML"===w.dataType.toUpperCase()?w.listLocation=function(n){return J(n).find(b)}:w.listLocation=function(n){return n[b]}}if("string"===typeof w.getValue){var h=w.getValue;w.getValue=function(n){return n[h]}}void 0!==
g.categories&&(w.categoriesAssigned=!0)})()};return c}(F||{});F=function(c){c.Logger=function(){this.error=function(g){};this.warning=function(g){}};return c}(F||{});F=function(c){c.Constans=function(){var g={CONTAINER_CLASS:"easy-autocomplete-container",CONTAINER_ID:"eac-container-",WRAPPER_CSS_CLASS:"easy-autocomplete"};this.getValue=function(v){return g[v]}};return c}(F||{});F=function(c){c.ListBuilderService=function(g,v){function w(k,b){function h(){var C={},B;void 0!==k.xmlElementName&&(C.xmlElementName=
k.xmlElementName);void 0!==k.listLocation?B=k.listLocation:void 0!==g.get("listLocation")&&(B=g.get("listLocation"));void 0!==B?"string"===typeof B?C.data=J(b).find(B):"function"===typeof B&&(C.data=B(b)):C.data=b;return C}function n(){var C={};void 0!==k.listLocation?"string"===typeof k.listLocation?C.data=b[k.listLocation]:"function"===typeof k.listLocation&&(C.data=k.listLocation(b)):C.data=b;return C}var d={};d="XML"===g.get("dataType").toUpperCase()?h():n();void 0!==k.header&&(d.header=k.header);
void 0!==k.maxNumberOfElements&&(d.maxNumberOfElements=k.maxNumberOfElements);void 0!==g.get("list").maxNumberOfElements&&(d.maxListSize=g.get("list").maxNumberOfElements);if(void 0!==k.getValue)if("string"===typeof k.getValue){var p=k.getValue;d.getValue=function(C){return C[p]}}else"function"===typeof k.getValue&&(d.getValue=k.getValue);else d.getValue=g.get("getValue");return d}function z(k){var b=[];void 0===k.xmlElementName&&(k.xmlElementName=g.get("xmlElementName"));J(k.data).find(k.xmlElementName).each(function(){b.push(this)});
return b}this.init=function(k){var b=[],h={};h.data=g.get("listLocation")(k);h.getValue=g.get("getValue");h.maxListSize=g.get("list").maxNumberOfElements;b.push(h);return b};this.updateCategories=function(k,b){if(g.get("categoriesAssigned")){k=[];for(var h=0;h<g.get("categories").length;h+=1){var n=w(g.get("categories")[h],b);k.push(n)}}return k};this.convertXml=function(k){if("XML"===g.get("dataType").toUpperCase())for(var b=0;b<k.length;b+=1)k[b].data=z(k[b]);return k};this.processData=function(k,
b){for(var h=0,n=k.length;h<n;h+=1)k[h].data=v(g,k[h],b);return k};this.checkIfDataExists=function(k){for(var b=0,h=k.length;b<h;b+=1)if(void 0!==k[b].data&&k[b].data instanceof Array&&0<k[b].data.length)return!0;return!1}};return c}(F||{});F=function(c){c.proccess=function(g,v,w){function z(b,h){g.get("list").match.caseSensitive||("string"===typeof b&&(b=b.toLowerCase()),h=h.toLowerCase());return g.get("list").match.method(b,h)?!0:!1}c.proccess.match=z;var k=v.data;k=function(b,h){var n=[],d="";
if(g.get("list").match.enabled)for(var p=0,C=b.length;p<C;p+=1)d=g.get("getValue")(b[p]),z(d,h)&&n.push(b[p]);else n=b;return n}(k,w);k=function(b){void 0!==v.maxNumberOfElements&&b.length>v.maxNumberOfElements&&(b=b.slice(0,v.maxNumberOfElements));return b}(k);return k=function(b){g.get("list").sort.enabled&&b.sort(g.get("list").sort.method);return b}(k)};return c}(F||{});F=function(c){c.Template=function(g){var v={basic:{type:"basic",method:function(z){return z},cssClass:""},description:{type:"description",
fields:{description:"description"},method:function(z){return z+" - description"},cssClass:"eac-description"},iconLeft:{type:"iconLeft",fields:{icon:""},method:function(z){return z},cssClass:"eac-icon-left"},iconRight:{type:"iconRight",fields:{iconSrc:""},method:function(z){return z},cssClass:"eac-icon-right"},links:{type:"links",fields:{link:""},method:function(z){return z},cssClass:""},custom:{type:"custom",method:function(){},cssClass:""}},w=function(z){var k=z.fields;if("description"===z.type){var b=
v.description.method;"string"===typeof k.description?b=function(h,n){return h+" - \x3cspan\x3e"+n[k.description]+"\x3c/span\x3e"}:"function"===typeof k.description&&(b=function(h,n){return h+" - \x3cspan\x3e"+k.description(n)+"\x3c/span\x3e"});return b}return"iconRight"===z.type?("string"===typeof k.iconSrc?b=function(h,n){return h+"\x3cimg class\x3d'eac-icon' src\x3d'"+n[k.iconSrc]+"' /\x3e"}:"function"===typeof k.iconSrc&&(b=function(h,n){return h+"\x3cimg class\x3d'eac-icon' src\x3d'"+k.iconSrc(n)+
"' /\x3e"}),b):"iconLeft"===z.type?("string"===typeof k.iconSrc?b=function(h,n){return"\x3cimg class\x3d'eac-icon' src\x3d'"+n[k.iconSrc]+"' /\x3e"+h}:"function"===typeof k.iconSrc&&(b=function(h,n){return"\x3cimg class\x3d'eac-icon' src\x3d'"+k.iconSrc(n)+"' /\x3e"+h}),b):"links"===z.type?("string"===typeof k.link?b=function(h,n){return"\x3ca href\x3d'"+n[k.link]+"' \x3e"+h+"\x3c/a\x3e"}:"function"===typeof k.link&&(b=function(h,n){return"\x3ca href\x3d'"+k.link(n)+"' \x3e"+h+"\x3c/a\x3e"}),b):"custom"===
z.type?z.method:v.basic.method};this.getTemplateClass=function(z){var k=function(){return""};return z&&z.type?z.type&&v[z.type]?function(){var b=v[z.type].cssClass;return function(){return b}}():k:k}(g);g=g&&g.type?g.type&&v[g.type]?w(g):v.basic.method:v.basic.method;this.build=g};return c}(F||{});F=function(c){c.main=function(g,v){function w(){function K(G,H){return p.get("highlightPhrase")&&""!==H?(H=H.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26"),(G+"").replace(new RegExp("("+H+")",
"gi"),"\x3cb\x3e$1\x3c/b\x3e")):G}q.parent().hasClass(d.getValue("WRAPPER_CSS_CLASS"))&&(q.next("."+d.getValue("CONTAINER_CLASS")).remove(),q.unwrap());(function(){var G=J("\x3cdiv\x3e"),H=d.getValue("WRAPPER_CSS_CLASS");p.get("theme")&&""!==p.get("theme")&&(H+=" eac-"+p.get("theme"));p.get("cssClasses")&&""!==p.get("cssClasses")&&(H+=" "+p.get("cssClasses"));""!==B.getTemplateClass()&&(H+=" "+B.getTemplateClass());G.addClass(H);q.wrap(G);!0===p.get("adjustWidth")&&q.parent().css("width","100%")})();
(function(){var G=J("\x3cdiv\x3e").addClass(d.getValue("CONTAINER_CLASS"));G.attr("id",z()).prepend(J("\x3cul\x3e"));(function(){G.on("show.eac",function(){switch(p.get("list").showAnimation.type){case "slide":var H=p.get("list").showAnimation.time;var t=p.get("list").showAnimation.callback;G.find("ul").slideDown(H,t);break;case "fade":H=p.get("list").showAnimation.time;t=p.get("list").showAnimation.callback;G.find("ul").fadeIn(H,t);break;default:G.find("ul").show()}p.get("list").onShowListEvent()}).on("hide.eac",
function(){switch(p.get("list").hideAnimation.type){case "slide":var H=p.get("list").hideAnimation.time;var t=p.get("list").hideAnimation.callback;G.find("ul").slideUp(H,t);break;case "fade":H=p.get("list").hideAnimation.time;t=p.get("list").hideAnimation.callback;G.find("ul").fadeOut(H,t);break;default:G.find("ul").hide()}p.get("list").onHideListEvent()}).on("selectElement.eac",function(){G.find("ul li").removeClass("selected");G.find("ul li").eq(y).addClass("selected");p.get("list").onSelectItemEvent()}).on("loadElements.eac",
function(H,t,E){var P="";H=G.find("ul");H.empty().detach();x=[];for(var S=0,L=0,U=t.length;L<U;L+=1){var W=t[L].data;if(0!==W.length){void 0!==t[L].header&&0<t[L].header.length&&H.append("\x3cdiv class\x3d'eac-category' \x3e"+t[L].header+"\x3c/div\x3e");for(var Z=0,fa=W.length;Z<fa&&S<t[L].maxListSize;Z+=1)P=J("\x3cli\x3e\x3cdiv class\x3d'eac-item'\x3e\x3c/div\x3e\x3c/li\x3e"),function(){var ha=Z,ia=S,a=t[L].getValue(W[ha]);P.find(" \x3e div").on("click",function(){q.val(a).trigger("change");y=ia;
n(ia);p.get("list").onClickEvent();p.get("list").onChooseEvent()}).mouseover(function(){y=ia;n(ia);p.get("list").onMouseOverEvent()}).mouseout(function(){p.get("list").onMouseOutEvent()}).html(B.build(K(a,E),W[ha]))}(),H.append(P),x.push(W[Z]),S+=1}}G.append(H);p.get("list").onLoadEvent()})})();q.after(G)})();r=J("#"+z());p.get("placeholder")&&q.attr("placeholder",p.get("placeholder"))}function z(){var K=q.attr("id");return K=d.getValue("CONTAINER_ID")+K}function k(){N("autocompleteOff",!0)&&q.attr("autocomplete",
"off");(function(){q.focusout(function(){var K=q.val();p.get("list").match.caseSensitive||(K=K.toLowerCase());for(var G=0,H=x.length;G<H;G+=1){var t=p.get("getValue")(x[G]);p.get("list").match.caseSensitive||(t=t.toLowerCase());if(t===K){y=G;n(y);break}}})})();(function(){q.off("keyup").keyup(function(K){function G(t){if(!(t.length<p.get("minCharNumber"))){if("list-required"!==p.get("data")){var E=p.get("data"),P=I.init(E);P=I.updateCategories(P,E);P=I.processData(P,t);r.trigger("loadElements.eac",
[P,t]);0<q.parent().find("li").length?b():h()}E=function(){var S={},L=p.get("ajaxSettings")||{},U;for(U in L)S[U]=L[U];return S}();if(void 0===E.url||""===E.url)E.url=p.get("url");if(void 0===E.dataType||""===E.dataType)E.dataType=p.get("dataType");void 0!==E.url&&"list-required"!==E.url&&(E.url=E.url(t),E.data=p.get("preparePostData")(E.data,t),J.ajax(E).done(function(S){var L=I.init(S);L=I.updateCategories(L,S);L=I.convertXml(L);if(!1!==p.get("matchResponseProperty")?"string"===typeof p.get("matchResponseProperty")?
S[p.get("matchResponseProperty")]===t:"function"===typeof p.get("matchResponseProperty")?p.get("matchResponseProperty")(S)===t:1:1)L=I.processData(L,t),r.trigger("loadElements.eac",[L,t]);I.checkIfDataExists(L)&&0<q.parent().find("li").length?b():h();p.get("ajaxCallback")()}).fail(function(){C.warning("Fail to load response data")}).always(function(){}))}}switch(K.keyCode){case 27:h();q.trigger("blur");break;case 38:K.preventDefault();0<x.length&&0<y&&(--y,q.val(p.get("getValue")(x[y])),n(y));break;
case 40:K.preventDefault();0<x.length&&y<x.length-1&&(y+=1,q.val(p.get("getValue")(x[y])),n(y));break;default:if(40<K.keyCode||8===K.keyCode){var H=q.val();!0!==p.get("list").hideOnEmptyPhrase||8!==K.keyCode||""!==H?0<p.get("requestDelay")?(void 0!==A&&clearTimeout(A),A=setTimeout(function(){G(H)},p.get("requestDelay"))):G(H):h()}}})})();(function(){q.on("keydown",function(K){K=K||window.event;if(38===K.keyCode)return!1}).keydown(function(K){13===K.keyCode&&-1<y&&(q.val(p.get("getValue")(x[y])),p.get("list").onKeyEnterEvent(),
p.get("list").onChooseEvent(),y=-1,h(),K.preventDefault())})})();q.off("keypress");(function(){q.focus(function(){""!==q.val()&&0<x.length&&(y=-1,b())})})();(function(){q.blur(function(){setTimeout(function(){y=-1;h()},250)})})()}function b(){r.trigger("show.eac")}function h(){r.trigger("hide.eac")}function n(K){r.trigger("selectElement.eac",K)}var d=new c.Constans,p=new c.Configuration(v),C=new c.Logger,B=new c.Template(v.template),I=new c.ListBuilderService(p,c.proccess),N=p.equals,q=g,r="",x=[],
y=-1,A;c.consts=d;this.getConstants=function(){return d};this.getConfiguration=function(){return p};this.getContainer=function(){return r};this.getSelectedItemIndex=function(){return y};this.getItems=function(){return x};this.getItemData=function(K){return x.length<K||void 0===x[K]?-1:x[K]};this.getSelectedItemData=function(){return this.getItemData(y)};this.build=function(){w()};this.init=function(){0===q.length?C.error("Input field doesn't exist."):p.checkDataUrlProperties()?p.checkRequiredProperties()?
(w(),k()):C.error("Will not work without mentioned properties."):C.error("One of options variables 'data' or 'url' must be defined.")}};c.eacHandles=[];c.getHandle=function(g){return c.eacHandles[g]};c.inputHasId=function(g){return void 0!==J(g).attr("id")&&0<J(g).attr("id").length?!0:!1};c.assignRandomId=function(g){var v="";do v="eac-"+Math.floor(1E4*Math.random());while(0!==J("#"+v).length);J(g).attr("id",v)};c.setHandle=function(g,v){c.eacHandles[v]=g};return c}(F||{});(function(c){c.fn.easyAutocomplete=
function(g){return this.each(function(){var v=c(this),w=new F.main(v,g);F.inputHasId(v)||F.assignRandomId(v);w.init();F.setHandle(w,v.attr("id"))})};c.fn.getSelectedItemIndex=function(){var g=c(this).attr("id");return void 0!==g?F.getHandle(g).getSelectedItemIndex():-1};c.fn.getItems=function(){var g=c(this).attr("id");return void 0!==g?F.getHandle(g).getItems():-1};c.fn.getItemData=function(g){var v=c(this).attr("id");return void 0!==v&&-1<g?F.getHandle(v).getItemData(g):-1};c.fn.getSelectedItemData=
function(){var g=c(this).attr("id");return void 0!==g?F.getHandle(g).getSelectedItemData():-1}})(jQuery)})},"jimu/loaderplugins/jquery-loader":function(){define(["dojo/Deferred","dojo/when"],function(J,F){var c,g={},v=function(b){var h=new J;if(g.locked)return setTimeout(function(){v(b)},50),h;if(g[b])return g.locked=!0,h.resolve(g[b]),h;g.locked=!0;c([b],function(){g[b]=window.jQuery;h.resolve(g[b])});return h},w=function(b,h,n){c([b[h]],function(){h===b.length-1?n.resolve():(h++,w(b,h,n))})},z=
function(b,h){b=new J;h[0]?w(h,0,b):b.resolve();return b},k=function(b,h){var n=new J;v(b).then(function(d){z(b,h).then(function(){g.locked=!1;n.resolve(d)})});return n};return{load:function(b,h,n){b=b.split(",");var d=[];c=h;0===b.length?n(null):(h=b[0],d=b.slice(1),F(k(h,d),n))}}})},"widgets/ThreatAnalysis/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/ThreatAnalysis/models/ThreatTypes.json":'[{\r\n    "ID": 1,\r\n    "Threat": "Pipe Bomb",\r\n    "Capacity": 5,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 70,\r\n    "Outdoor_Dist": 1200,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 2,\r\n    "Threat": "Suicide Bomb",\r\n    "Capacity": 20,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 110,\r\n    "Outdoor_Dist": 1700,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 3,\r\n    "Threat": "Briefcase",\r\n    "Capacity": 50,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 150,\r\n    "Outdoor_Dist": 1850,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 4,\r\n    "Threat": "Car",\r\n    "Capacity": 500,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 320,\r\n    "Outdoor_Dist": 1900,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 5,\r\n    "Threat": "SUV/VAN",\r\n    "Capacity": 1000,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 400,\r\n    "Outdoor_Dist": 2400,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 6,\r\n    "Threat": "Small Delivery Truck",\r\n    "Capacity": 4000,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 640,\r\n    "Outdoor_Dist": 3800,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 7,\r\n    "Threat": "Container/Water Truck",\r\n    "Capacity": 10000,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 860,\r\n    "Outdoor_Dist": 5100,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 8,\r\n    "Threat": "Semi-Trailer",\r\n    "Capacity": 60000,\r\n    "Capacity_Unit": "LBS",\r\n    "Bldg_Dist": 1570,\r\n    "Outdoor_Dist": 9300,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  }\r\n]',
"url:widgets/ThreatAnalysis/models/LpgThreatTypes.json":'[{\r\n    "ID": 1,\r\n    "Threat": "Small LPG Tank",\r\n    "LPG Mass": 20,\r\n    "Capacity_Unit": "LBS",\r\n    "Fireball_Dia": 40,\r\n    "Safe_Dist": 160,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 2,\r\n    "Threat": "Large LPG Tank",\r\n    "LPG Mass": 100,\r\n    "Capacity_Unit": "LBS",\r\n    "Fireball_Dia": 69,\r\n    "Safe_Dist": 276,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 3,\r\n    "Threat": "Commercial/Residential LPG Tank",\r\n    "LPG Mass": 2000,\r\n    "Capacity_Unit": "LBS",\r\n    "Fireball_Dia": 184,\r\n    "Safe_Dist": 736,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 4,\r\n    "Threat": "Small LPG Truck",\r\n    "LPG Mass": 8000,\r\n    "Capacity_Unit": "LBS",\r\n    "Fireball_Dia": 292,\r\n    "Safe_Dist": 1168,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  },\r\n  {\r\n    "ID": 5,\r\n    "Threat": "Semi-Tanker LPG",\r\n    "LPG Mass": 40000,\r\n    "Capacity_Unit": "LBS",\r\n    "Fireball_Dia": 499,\r\n    "Safe_Dist": 1996,\r\n    "Icon_URL": "name.png",\r\n    "Unit": "Feet"\r\n  }\r\n]',
"url:jimu/dijit/templates/CoordinateControl.html":"\x3cdiv class\x3d'coordinateContainer'\x3e\r\n  \x3cdiv class\x3d'coordLabel' data-dojo-attach-point\x3d'coordNameContainer' data-a11y-label-id\x3d'coordLabel'\x3e\r\n    \x3cspan data-dojo-type\x3d'dijit/InlineEditBox' width\x3d'75px' data-dojo-props\x3d\"editor:'dijit/form/TextBox', autoSave:true\"\r\n      data-dojo-attach-point\x3d'coordName'\x3e${type}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d'add-with-icon coordInput'\x3e\r\n    \x3ctextarea data-a11y-label-by\x3d'coordLabel' tabindex\x3d\"0\" aria-multiline\x3d\"true\" role\x3d\"textbox\" id\x3d'${uid}' type\x3d'text' rows\x3d'1' data-dojo-attach-point\x3d'coordtext' spellcheck\x3d'false'\r\n    placeholder\x3d'${nls.coordinateInputLabel}' title\x3d'${nls.coordinateInputLabel}'\x3e\x3c/textarea\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d'coordactions'\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" id\x3d'${uid}_cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'cpbtn' class\x3d'cpbtn'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" title\x3d\"${nls.formatOutput}\" class\x3d'settingBtn' data-dojo-attach-point\x3d'formatButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.zoomLabel}' title\x3d'${nls.zoomLabel}' class\x3d'zoomBtn' data-dojo-attach-point\x3d'zoomButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.addPointLabel}' title\x3d'${nls.addPointLabel}' class\x3d'drawPointBtn' data-dojo-attach-point\x3d'drawPointButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d'${nls.removeCoordinate}' title\x3d'${nls.removeCoordinate}' class\x3d'jimu-icon jimu-icon-close' data-dojo-attach-point\x3d'removeControlBtn'\r\n        data-dojo-attach-event\x3d'onclick: remove'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d'add-with-icon'\x3e\r\n      \x3cspan tabindex\x3d\"0\" role\x3d\"button\" aria-label\x3d\"${nls.expandOutput}\" aria-expanded \x3d \"false\" title\x3d\"${nls.expandOutput}\" class\x3d'expandBtn' data-dojo-attach-point\x3d'expandButton'\x3e\x3c/span\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d'coordcontrols' class\x3d'coordarea' style\x3d\"display: none\"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub1' class\x3d'coordformat'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub1label' data-a11y-label-id\x3d'sub1Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub1Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub1val' class\x3d'jimu-input crds'\x3e\x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub1val~cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal1CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub2' class\x3d'coordformat'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub2label' data-a11y-label-id\x3d'sub2Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub2Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub2val' class\x3d'jimu-input crds'\x3e\x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub2val~cpbtn' aria-label\x3d'${nls.copyToClipboard}' title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal2CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub3' class\x3d'coordformat sub3'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub3label' data-a11y-label-id\x3d'sub3Label'/\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub3Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub3val' class\x3d'jimu-input crds'\x3e\r\n      \x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub3val~cpbtn' aria-label\x3d'$${nls.copyToClipboard}' title\x3d'$${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal3CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'sub4' class\x3d'coordformat sub4'\x3e\r\n      \x3cdiv class\x3d'crdfrmtlabel'\x3e\r\n        \x3cspan data-dojo-attach-point\x3d'sub4label' data-a11y-label-id\x3d'sub4Label' /\x3e\r\n      \x3c/div\x3e\r\n      \x3cinput data-a11y-label-by\x3d'sub4Label' tabindex\x3d\"-1\" role\x3d\"textbox\" readonly data-dojo-attach-point\x3d'${uid}sub4val' class\x3d'jimu-input crds'\x3e\r\n      \x3c/input\x3e\r\n      \x3cdiv class\x3d'add-with-icon'\x3e\r\n        \x3cspan tabindex\x3d\"-1\" role\x3d\"button\" id\x3d'${uid}sub4val~cpbtn' aria-label\x3d'${nls.copyToClipboard} title\x3d'${nls.copyToClipboard}' data-dojo-attach-point\x3d'subVal4CpBtn' class\x3d'jimu-icon cpbtn'\x3e\x3c/span\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d\"line-separator\"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e",
"url:dijit/templates/InlineEditBox.html":'\x3cspan data-dojo-attach-point\x3d"editNode" role\x3d"presentation" class\x3d"dijitReset dijitInline dijitOffScreen"\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"editorPlaceholder"\x3e\x3c/span\r\n\t\x3e\x3cspan data-dojo-attach-point\x3d"buttonContainer"\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button" data-dojo-props\x3d"label: \'${buttonSave}\', \'class\': \'saveButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"saveButton" data-dojo-attach-event\x3d"onClick:save"\x3e\x3c/button\r\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button"  data-dojo-props\x3d"label: \'${buttonCancel}\', \'class\': \'cancelButton\'"\r\n\t\t\tdata-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:cancel"\x3e\x3c/button\r\n\t\x3e\x3c/span\r\n\x3e\x3c/span\x3e\r\n',
"url:widgets/ThreatAnalysis/templates/ColorPickerEditor.html":'\x3cdiv class\x3d"colorPickerEditor"\x3e\r\n  \x3cdiv class\x3d"colorPicker" data-dojo-attach-point\x3d"colorPicker"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"sliderbar" data-dojo-attach-point\x3d"sliderBar"\x3e\r\n    \x3col data-dojo-type\x3d"dijit/form/HorizontalRuleLabels" style\x3d"height:2.5em;" container\x3d"topDecoration"\x3e\r\n      \x3cli\x3e${nls.transparencyLabel}\x3c/li\x3e\r\n      \x3cli\x3e\x3c/li\x3e\r\n    \x3c/ol\x3e\r\n  \x3c/div\x3e\r\n  \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/NumberSpinner" value\x3d"0" data-dojo-attach-point\x3d"spinner"\r\n    data-dojo-props\x3d"smallDelta:10,intermediateChanges:true,constraints: {min:0,max:100}"\x3e\r\n  \x3cdiv class\x3d\'styleSelectSection\'\x3e\r\n    \x3clabel for\x3d"${id}_select"\x3e${nls.style}\x3c/label\x3e\r\n    \x3cselect class\x3d"styleSelect" data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"dropdown"/\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/ThreatAnalysis/templates/ThreatAnalysisSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv style\x3d"margin: 10px 0px 10px 0px;"\x3e\r\n    \x3cdiv\x3e${nls.chemicalThreatLabel}\x3c/div\x3e\r\n    \x3c!-- Mandatory Evacuation Distance DropDown --\x3e\r\n    \x3cdiv class\x3d"SettingsRow"\x3e\r\n      \x3cdiv class\x3d"LabelSettingsRightButton SettingsButtonIcon Pointer" title\x3d"${nls.mandatoryButtonLabel}"\r\n        data-dojo-attach-point\x3d"mandatorySettingsButton" tabindex\x3d"0" aria-expanded\x3d"false" role\x3d"button"\r\n        aria-label\x3d"${nls.mandatoryButtonLabel}"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"InputLabelSettings Ellipsis SubTitle" title\x3d"${nls.mandatoryLabel}"\x3e${nls.mandatoryLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Mandatory Evacuation Distance Color Pickers --\x3e\r\n    \x3cdiv class\x3d"container controlGroupHidden" data-dojo-attach-point\x3d"mandatoryContainer"\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.outline}"\x3e${nls.outline}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Line" id\x3d"mandatoryOutlineColor" data-dojo-attach-point\x3d"mandatoryOutlineColorPicker"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.fill}"\x3e${nls.fill}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Fill" id\x3d"mandatoryFillColor" data-dojo-attach-point\x3d"mandatoryFillColorPicker"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Safe Evacuation Distance DropDown --\x3e\r\n    \x3cdiv class\x3d"SettingsRow"\x3e\r\n      \x3cdiv class\x3d"LabelSettingsRightButton SettingsButtonIcon Pointer" title\x3d"${nls.safeButtonLabel}"\r\n        data-dojo-attach-point\x3d"safeSettingsButton" tabindex\x3d"0" aria-expanded\x3d"false" role\x3d"button"\r\n        aria-label\x3d"${nls.safeButtonLabel}"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"InputLabelSettings Ellipsis SubTitle" title\x3d"${nls.safeLabel}"\x3e${nls.safeLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Safe Evacuation Distance --\x3e\r\n    \x3cdiv class\x3d"container controlGroupHidden" data-dojo-attach-point\x3d"safeContainer"\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.outline}"\x3e${nls.outline}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Line" id\x3d"safeOutlineColor" data-dojo-attach-point\x3d"safeOutlineColorPicker"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.fill}"\x3e${nls.fill}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Fill" id\x3d"safeFillColor" data-dojo-attach-point\x3d"safeFillColorPicker"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n    \x3cdiv\x3e${nls.lpgThreatLabel}\x3c/div\x3e\r\n    \x3cdiv class\x3d"SettingsRow"\x3e\r\n      \x3cdiv class\x3d"LabelSettingsRightButton SettingsButtonIcon Pointer" title\x3d"${nls.fireballButtonLabel}"\r\n        data-dojo-attach-point\x3d"fireballDiaSettingsButton" tabindex\x3d"0" aria-expanded\x3d"false" role\x3d"button"\r\n        aria-label\x3d"${nls.fireballButtonLabel}"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"InputLabelSettings Ellipsis SubTitle" title\x3d"${nls.fireBallDiameterLable}"\x3e\r\n        ${nls.fireBallDiameterLable}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"container controlGroupHidden" data-dojo-attach-point\x3d"fireBallContainer"\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.outline}"\x3e${nls.outline}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Line" id\x3d"fireballDiaOutlineColor" data-dojo-attach-point\x3d"fireballDiaOutlineColorPicker"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.fill}"\x3e${nls.fill}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Fill" id\x3d"fireballDiaFillColor" data-dojo-attach-point\x3d"fireballDiaFillColorPicker"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"SettingsRow"\x3e\r\n      \x3cdiv class\x3d"LabelSettingsRightButton SettingsButtonIcon Pointer" title\x3d"${nls.safeDistanceButtonLabel}"\r\n        data-dojo-attach-point\x3d"safeDistanceSettingsButton" tabindex\x3d"0" aria-expanded\x3d"false" role\x3d"button"\r\n        aria-label\x3d"${nls.safeDistanceButtonLabel}"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"InputLabelSettings Ellipsis SubTitle" title\x3d"${nls.lpgSafeDistanceLable}"\x3e${nls.lpgSafeDistanceLable}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"container controlGroupHidden" data-dojo-attach-point\x3d"safeDistanceContainer"\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.outline}"\x3e${nls.outline}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Line" id\x3d"safeDistanceOutlineColor"\r\n        data-dojo-attach-point\x3d"safeDistanceOutlineColorPicker"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.fill}"\x3e${nls.fill}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Fill" id\x3d"safeDistanceFillColor" data-dojo-attach-point\x3d"safeDistanceFillColorPicker"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/ThreatAnalysis/Widget.html":'\x3cdiv style\x3d"height: 100%" data-dojo-attach-point\x3d"mainNode"\x3e\r\n  \x3cdiv class\x3d"FullHeight FullWidth" data-dojo-attach-point\x3d"widgetMainNode"\x3e\r\n\r\n    \x3c!---------------------\r\n          Threat Analysis Main Page Node\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"FullHeight" data-dojo-attach-point\x3d"threatMainPageNode"\x3e\r\n      \x3cdiv class\x3d"FullWidth NewHeader"\x3e\r\n        \x3c!-- Panel Title --\x3e\r\n        \x3cdiv class\x3d"MainTitleDiv Ellipsis" title\x3d"${nls.threatAnalysisMainPageTitle}"\x3e\r\n          \x3ca href\x3d"${nls.jcatURL}" data-dojo-attach-point\x3d"threatAnalysisTitleUrl" tabinex\x3d"0"\r\n            aria-label\x3d\'${nls.threatAnalysisMainPageTitle}\' role\x3d\'link\'\r\n            target\x3d"_blank"\x3e${nls.threatAnalysisMainPageTitle}\x3c/a\x3e\r\n        \x3c/div\x3e\r\n        \x3c!-- Settings Icon --\x3e\r\n        \x3cdiv class\x3d"SettingsIcon Pointer" title\x3d"${nls.settingsTitle}"\r\n          data-dojo-attach-point\x3d"threatAnalysisSettingsButton" tabindex\x3d"0" aria-label\x3d"${nls.settingsTitle}"\r\n          role\x3d"button"\x3e\x3c/div\x3e\r\n        \x3c!-- Threat Analysis Point Form --\x3e\r\n        \x3cdiv class\x3d"MainPageRow"\x3e\r\n          \x3c!-- Input Location --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingRow"\x3e\r\n            \x3cdiv class\x3d"InputLabel Ellipsis" data-a11y-label-id\x3d"inputLocationLabel" style\x3d"width: 100%"\r\n              title\x3d"${nls.inputLocation}"\x3e${nls.inputLocation}\x3c/div\x3e\r\n            \x3cselect data-dojo-type\x3d"jimu/dijit/formSelect" class\x3d"inputSelectStyle"\r\n              data-dojo-attach-point\x3d"inputTypeSelect" data-a11y-label-by\x3d"inputLocationLabel" tabindex\x3d"0"\x3e\r\n              \x3coption value\x3d"interactive"\x3e${nls.interactive}\x3c/option\x3e\r\n              \x3coption value\x3d"manual_location" selected\x3e${nls.fromCoord}\x3c/option\x3e\r\n              \x3coption value\x3d"existing_features"\x3e${nls.existingFeature}\x3c/option\x3e\r\n            \x3c/select\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Interactive Draw Tools --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingRow" data-dojo-attach-point\x3d"interActiveDiv"\x3e\r\n            \x3cdiv class\x3d"InputLabel Ellipsis" style\x3d"width: 100%" title\x3d"${nls.selectDrawModeLabel}"\r\n              data-a11y-label-id\x3d"selectDrawModeLabel"\x3e${nls.selectDrawModeLabel}\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"drawBox" data-dojo-type\x3d"jimu/dijit/DrawBox"\r\n              data-dojo-props\x3d\'geoTypes:["POINT","POLYLINE","POLYGON"],showClear:false,deactivateAfterDrawing:true\'\r\n              style\x3d"margin-top:5px;" data-a11y-label-by\x3d"selectDrawModeLabel"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Threat Analysis Coordinate Input --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingFirstRow" data-dojo-attach-point\x3d"coordInputDiv"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d\'threatAnalysisCoordContainer\'\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Existing Features --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingRow" data-dojo-attach-point\x3d"existingFeatureDiv"\x3e\r\n            \x3cdiv class\x3d"InputLabel Ellipsis" style\x3d"width: 100%" title\x3d"${nls.selectFeatureLabel}"\r\n              data-a11y-label-id\x3d"selectFeatureLabel"\x3e\r\n              ${nls.selectFeatureLabel}\x3c/div\x3e\r\n            \x3cdiv\x3e\r\n              \x3cselect data-dojo-type\x3d"jimu/dijit/formSelect" class\x3d"inputSelectStyle"\r\n                data-dojo-attach-point\x3d"layerSelect" tabindex\x3d"0" data-a11y-label-by\x3d"selectFeatureLabel"\x3e\x3c/select\x3e\r\n              \x3cdiv class\x3d"drawing-section" data-dojo-attach-point\x3d"drawingSection"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingRow"\x3e\r\n            \x3cdiv class\x3d"InputLabel Ellipsis" style\x3d"width: 100%" title\x3d"${nls.threatTypeCatagoryLabel}"\x3e\r\n              ${nls.threatTypeCatagoryLabel}\x3c/div\x3e\r\n            \x3cdiv class\x3d"inputSelectStyle" data-dojo-attach-point\x3d"threatCatagorySelect"\r\n              data-dojo-type\x3d"dijit/form/Select"\x3e\r\n              \x3coption value\x3d"chemicalThreatCatogory" selected\x3d"selected"\x3e${nls.chemicalThreatCatagoryLabel}\x3c/option\x3e\r\n              \x3coption value\x3d"lpgThreatCatogary"\x3e${nls.lpgThreatCatagoryLabel}\x3c/option\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Threat Type Container --\x3e\r\n          \x3cdiv class\x3d"HalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"HalfWidthLeft SettingRow"\x3e\r\n              \x3c!-- Threat Type Input --\x3e\r\n              \x3cdiv class\x3d"InputLabel Ellipsis" style\x3d"width: 100%" title\x3d"${nls.threatType}"\r\n                data-a11y-label-id\x3d"threatType"\x3e${nls.threatType}\x3c/div\x3e\r\n              \x3cselect data-dojo-type\x3d"jimu/dijit/formSelect" class\x3d"SelectStyle esriCTThreatInputType"\r\n                data-dojo-attach-point\x3d"threatType" tabindex\x3d"0" data-a11y-label-by\x3d"threatType"\x3e\x3c/select\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"HalfWidthRight SettingRow"\x3e\r\n              \x3c!-- Unit type --\x3e\r\n              \x3cdiv class\x3d"InputLabel Ellipsis" style\x3d"width: 100%" title\x3d"${nls.unitsLabel}"\r\n                data-a11y-label-id\x3d"unitsLabel"\x3e${nls.unitsLabel}\x3c/div\x3e\r\n              \x3cselect class\x3d"SelectStyle" data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"unitType"\r\n                tabindex\x3d"0" data-a11y-label-by\x3d"unitsLabel"\x3e\r\n                \x3coption value\x3d"feet" selected\x3e${nls.feetLabel}\x3c/option\x3e\r\n                \x3coption value\x3d"meters"\x3e${nls.metersLabel}\x3c/option\x3e\r\n              \x3c/select\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Evacuation Distances Container --\x3e\r\n          \x3cdiv class\x3d"HalfWidthContainer" data-dojo-attach-point\x3d"evacDistances"\x3e\r\n            \x3cdiv class\x3d"HalfWidthLeft SettingRow"\x3e\r\n              \x3cdiv class\x3d"InputLabel Ellipsis" data-dojo-attach-point\x3d"mandatoryLabel" title\x3d"${nls.mandatoryLabel}"\r\n                data-a11y-label-id\x3d"mandatoryLabel"\x3e\r\n                ${nls.mandatoryLabel}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%;background-color: #d8d8d882"\r\n                data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d\'readOnly:true\'\r\n                data-dojo-attach-point\x3d"mandatoryDist" value\x3d"0" tabindex\x3d"0"\r\n                data-a11y-label-by\x3d"mandatoryLabel"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"HalfWidthRight SettingRow"\x3e\r\n              \x3cdiv class\x3d"InputLabel Ellipsis" data-dojo-attach-point\x3d"safeLabel" title\x3d"${nls.safeLabel}"\r\n                data-a11y-label-id\x3d"safeLabel"\x3e\r\n                ${nls.safeLabel}\x3c/div\x3e\r\n              \x3cinput class\x3d"jimu-input textInput" style\x3d"width: 100%;background-color: #d8d8d882"\r\n                data-dojo-type\x3d"dijit/form/TextBox" data-dojo-props\x3d\'readOnly:true\' data-dojo-attach-point\x3d"safeDist"\r\n                value\x3d"0" tabindex\x3d"0" data-a11y-label-by\x3d"safeLabel"\x3e\x3c/input\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Create \x26 Clear threatAnalysis Buttons --\x3e\r\n          \x3cdiv class\x3d"HalfWidthContainer"\x3e\r\n            \x3cdiv class\x3d"BtnContainer HalfWidthLeft"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'threatCreateButton\' tabindex\x3d"-1"\r\n                aria-label\x3d\'${nls.createBtn}\' role\x3d\'button\'\x3e${nls.createBtn}\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"BtnContainer HalfWidthRight"\x3e\r\n              \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'threatClearButton\' tabindex\x3d"0" aria-label\x3d\'${nls.clearBtn}\'\r\n                role\x3d\'button\'\x3e${nls.clearBtn}\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------\r\n          Settings\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"Hidden FullHeight" data-dojo-attach-point\x3d"threatSettingsPageNode"\x3e\r\n      \x3cdiv class\x3d"FullWidth SettingHeader"\x3e\r\n        \x3cdiv\x3e\r\n          \x3cdiv class\x3d"BackButton Pointer" title\x3d"${nls.common.back}"\r\n            data-dojo-attach-point\x3d"threatSettingsPanelBackButton" tabindex\x3d"0" aria-label\x3d"${nls.common.back}"\r\n            role\x3d"button"\x3e\r\n            \x3cdiv class\x3d"ItemLeftArrow"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"TitleDiv Ellipsis" title\x3d"${nls.settingsTitle}"\x3e\r\n            ${nls.settingsTitle}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"SettingsNode" data-dojo-attach-point\x3d"threatSettingsNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!---------------------\r\n          Publish\r\n        ----------------------\x3e\r\n\r\n    \x3cdiv class\x3d"Hidden FullHeight" data-dojo-attach-point\x3d"threatResultsPageNode"\x3e\r\n      \x3cdiv class\x3d"FullWidth SettingHeader"\x3e\r\n        \x3cdiv\x3e\r\n          \x3cdiv class\x3d"BackButton Pointer" title\x3d"${nls.common.back}"\r\n            data-dojo-attach-point\x3d"threatResultsPanelBackButton" tabindex\x3d"0" aria-label\x3d"${nls.common.back}"\r\n            role\x3d"button"\x3e\r\n            \x3cdiv class\x3d"ItemLeftArrow"\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"TitleDiv Ellipsis" title\x3d"${nls.resultsTitle}"\x3e${nls.resultsTitle}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"MainPageRow"\x3e\r\n          \x3c!-- threatAnalysis Layer Name --\x3e\r\n          \x3cdiv class\x3d"FullWidth SettingRow"\x3e\r\n            \x3cdiv class\x3d"InputLabel Ellipsis" title\x3d"${nls.layerName}" data-a11y-label-id\x3d"layerName"\x3e\r\n              ${nls.layerName}\x3c/div\x3e\r\n            \x3cinput class\x3d"jimu-input textInput controlGroupHidden" style\x3d"width: 100%;"\r\n              data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"addTANameArea"\r\n              data-dojo-props\x3d"regExp:\'[a-zA-Z0-9_ -]*\'" required\x3d"true" data-a11y-label-by\x3d"layerName"\r\n              trim\x3d"true"\x3e\x3c/input\x3e\r\n            \x3cselect class\x3d"publishSelect" data-a11y-label-by\x3d"layerName" style\x3d"width: 100%;"\r\n              data-dojo-type\x3d"jimu/dijit/formSelect" tabindex\x3d"0" data-dojo-attach-point\x3d"featureLayerList"\x3e\x3c/select\x3e\r\n            \x3cdiv class\x3d"TACheckBoxNode" data-dojo-attach-point\x3d"checkBoxParentContainer"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!-- Publish threatAnalysis Button --\x3e\r\n          \x3cdiv class\x3d"BtnContainer"\x3e\r\n            \x3cdiv class\x3d\'jimu-btn\' data-dojo-attach-point\x3d\'threatPublishButton\' tabindex\x3d"0"\r\n              aria-label\x3d"${nls.publishTABtn}" role\x3d"button"\x3e${nls.publishTABtn}\x3c/div\x3e\r\n          \x3c/div\x3e\r\n\r\n          \x3c!-- Publishing Message --\x3e\r\n          \x3cdiv class\x3d"PublishMessage" data-dojo-attach-point\x3d"publishMessage"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/ThreatAnalysis/css/style.css":".jimu-widget-threatAnalysis .MainContainer {min-width: 222px;}.jimu-widget-threatAnalysis .FullHeight {height: 100%;}.jimu-widget-threatAnalysis .FullWidth {width: 100%;}.jimu-widget-threatAnalysis .HalfWidthContainer {display: flex;}.jimu-widget-threatAnalysis .HalfWidthLeft {width: 50%;}.jimu-rtl .jimu-widget-threatAnalysis .HalfWidthLeft {padding-left: 2px;}.jimu-widget-threatAnalysis .HalfWidthRight {padding-left: 10px; width: 50%;}.jimu-rtl .jimu-widget-threatAnalysis .HalfWidthRight {padding: 0px 2px 0px 0px;}.jimu-widget-threatAnalysis .Ellipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-threatAnalysis .Pointer {cursor: pointer;}.jimu-widget-threatAnalysis .MainPageRow {width: calc(100% - 20px); margin: 10px 10px 10px 10px; display: inline-block;}.jimu-widget-threatAnalysis .InputLabel {float: left; line-height: 28px; padding: 5px 0px 0px 0px; width: 100%;}.jimu-widget-threatAnalysis .TACheckBoxNode {padding-top: 10px;}.jimu-rtl .jimu-widget-threatAnalysis .InputLabel {padding: 5px 2px 0px 0px;}.jimu-widget-threatAnalysis .InputLabelSettings {float: left; line-height: 28px; padding: 5px 0px 0px 0px;}.jimu-widget-threatAnalysis .PublishMessage {line-height: 16px; padding: 18px 0px 0px 0; font-weight: bold; display: inline-block; word-break: normal;}.jimu-widget-threatAnalysis .claro .dijitSelect,.claro .dijitTextBox {width: calc(100% - 60px); overflow: hidden; text-overflow: ellipsis; margin-bottom: 8px;}.jimu-widget-threatAnalysis .noResize .dijitSelectLabel,.jimu-widget-threatAnalysis .noResize .dijitTextBox .dijitInputInner,.jimu-widget-threatAnalysis .noResize .dijitValidationTextBox .dijitValidationContainer {text-overflow: ellipsis; overflow: hidden; width: 80px; text-align: left;}.jimu-widget-threatAnalysis .SelectStyle:focus {outline: 2px solid #24B5CC !important; outline-offset: -2px;}.jimu-widget-threatAnalysis .NewHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-widget-threatAnalysis .SettingsIcon {background-image: url('./images/settings_black.png'); height: 16px; width: 16px; background-size: 16px; float: right; background-repeat: no-repeat;}.jimu-rtl .jimu-widget-threatAnalysis .SettingsIcon {float: left;}.jimu-widget-threatAnalysis .SettingsIcon:hover {background-image: url('./images/settings_black_hover_black.png'); background-repeat: no-repeat;}.jimu-widget-threatAnalysis .dijitTextBox .dijitInputInner {font-size: 14px; padding-right: 0px !important;}.claro .jimu-widget-threatAnalysis .dijitTextBox .dijitInputInner {height: 17px !important; line-height: 17px !important;}.jimu-widget-threatAnalysis .dijitTextBoxFocused .dijitInputContainer {background: transparent;}.jimu-widget-threatAnalysis .Hidden {display: none;}.claro .dijitTextBox {width: calc(100% - 45px);}.jimu-widget-threatAnalysis .SettingsRow {width: 100%; display: inline-flex;}.jimu-widget-threatAnalysis .SettingsButtonIcon {margin-top: 13px; height: 16px; width: 16px;}.jimu-rtl .jimu-widget-threatAnalysis .SettingsButtonIcon {margin-top: 9px; margin-left: 2px;}.jimu-widget-threatAnalysis .LabelSettingsDownButton {background: url(\"./images/arrow-down_black.png\") no-repeat; margin-top: 15px;}.jimu-rtl .jimu-widget-threatAnalysis .LabelSettingsDownButton {margin: 15px 0 0 5px; width: 13px;}.jimu-widget-threatAnalysis .LabelSettingsDownButton:hover {background: url(\"./images/arrow-down_black_hover.png\") no-repeat;}.jimu-widget-threatAnalysis .LabelSettingsRightButton {background: url(\"./images/arrow-right_black.png\") no-repeat;}.jimu-rtl .jimu-widget-threatAnalysis .LabelSettingsRightButton {transform: rotate(180deg);}.jimu-widget-threatAnalysis .LabelSettingsRightButton:hover {background: url(\"./images/arrow-right_black_hover.png\") no-repeat;}.jimu-widget-threatAnalysis .SettingsNode {width: 100%; height: calc(100% - 30px); display: inline-block; overflow: hidden;}.jimu-widget-threatAnalysis .SettingsContainer {margin: 10px; display: inline-block; width: calc(100% - 20px);}.jimu-widget-threatAnalysis .SettingFirstRow {padding-top: 12px; padding-bottom: 6px;}.jimu-widget-threatAnalysis .SettingRow {padding-bottom: 6px;}.jimu-widget-threatAnalysis .SelectStyle {height: 30px; color: #7d7d7d; padding-left: 5px; font-size: 13px; width: 100%; font-family: 'Avenir Medium'; margin: 0 0 8px 0; text-align: left;}.jimu-widget-threatAnalysis .inputSelectStyle {height: 30px; color: #7d7d7d; padding-left: 5px; font-size: 13px; width: 100%; font-family: 'Avenir Medium'; margin: 0 0 8px 0;}.jimu-widget-threatAnalysis .inputSelectStyle .dijitSelectLabel {-ms-text-overflow: ellipsis; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; text-align: left; margin-top: 5px;}.jimu-rtl .jimu-widget-threatAnalysis .inputSelectStyle .dijitSelectLabel {text-align: right;}.jimu-widget-threatAnalysis .SelectStyle.SelectStyleMini {width: calc(100% - 45px); float: left;}.jimu-widget-threatAnalysis .SettingRowPaddingTop20 {padding-top: 20px;}.jimu-widget-threatAnalysis .SettingHeader {float: left; height: 30px; border-bottom: 1px solid #464646; padding: 0px 10px;}.jimu-rtl .jimu-widget-threatAnalysis .SettingHeader {float: none; padding: 0px;}.jimu-widget-threatAnalysis .BackButton {width: 20px; float: left;}.jimu-rtl .jimu-widget-threatAnalysis .BackButton {float: right;}.jimu-widget-threatAnalysis .MainTitleDiv {line-height: 10px; font-weight: bold; text-align: left; width: calc(100% - 50px); padding: 5px; display: inline-block;}.jimu-rtl .jimu-widget-threatAnalysis .MainTitleDiv {text-align: right;}.jimu-widget-threatAnalysis .TitleDiv {line-height: 10px; font-weight: bold; text-align: center; width: calc(100% - 50px); padding: 5px; display: inline-block;}.jimu-rtl .jimu-widget-threatAnalysis .TitleDiv {padding-top: 10px;}.jimu-widget-threatAnalysis .ItemLeftArrow {background-image: url('./images/left-arrow_black.png'); float: left; margin: 0px 5px 0px 0px; width: 15px; height: 20px; background-repeat: no-repeat; background-position: center center;}.jimu-rtl .jimu-widget-threatAnalysis .ItemLeftArrow {float: none; margin: 0px; transform: rotate(180deg);}.jimu-widget-threatAnalysis .ItemLeftArrow:hover {background-image: url('./images/left-arrow_black_hover.png');}.jimu-widget-threatAnalysis .dijitSelect .dijitButtonContents {border-style: none none none none; background-color: #ffffff;}.jimu-widget-threatAnalysis .dijitSelect .dijitButtonContentsDartTheme {background-color: inherit;}.jimu-widget-threatAnalysis .dijitSelect .dijitArrowButton {background-color: #ffffff; background-image: none; border-color: #ffffff;}.jimu-widget-threatAnalysis .dijitSelect .dijitArrowButtonDartTheme {background-color: rgba(0, 0, 0, 0.5) !important;}.jimu-widget-threatAnalysis .dijitMenuItem {color: #7989a0;}.jimu-widget-threatAnalysis .dijitSelect .dijitInputField {margin-right: 0px;}.jimu-widget-threatAnalysis .switch-toggle-group {padding: 5px;}.jimu-widget-threatAnalysis .switch-toggle-group .checkbox-inline {padding-left: 36px; vertical-align: top;}.jimu-widget-threatAnalysis .switch-toggle-group .switch-toggle.dijitCheckBox {margin-left: -36px;}.jimu-widget-threatAnalysis .switch-toggle.dijitCheckBox {height: 16px; width: 28px; border: 0 none; background: #adadad; position: relative; display: inline-block; cursor: pointer; -moz-border-radius: 10px; -webkit-border-radius: 10px; border-radius: 10px; margin-top: 6px;}.jimu-widget-threatAnalysis .switch-toggle.dijitCheckBox:before {content: \"\"; background: #f8f8f8; position: absolute; padding: 0; height: 12px; width: 12px; left: auto; right: 14px; top: 2px; z-index: 1; -webkit-transition: right 0.3s; -moz-transition: right 0.3s; -o-transition: right 0.3s; transition: right 0.3s; -moz-border-radius: 50%; -webkit-border-radius: 50%; border-radius: 50%;}.jimu-widget-threatAnalysis .switch-toggle.dijitCheckBox input {width: 100%; height: 100%; position: absolute; left: 0; z-index: 2;}.jimu-widget-threatAnalysis .switch-toggle.dijitCheckBox.dijitCheckBoxChecked {background: #50ad4e;}.jimu-widget-threatAnalysis .switch-toggle.dijitCheckBox.dijitCheckBoxChecked:before {right: 2px;}.jimu-widget-threatAnalysis .dijitTextBox .dijitPlaceHolder {font-size: 12px;}.jimu-widget-threatAnalysis .dijitTextBoxError {border-color: #d9dde0 !important; box-shadow: inset 0 0 0 2px #d46464;}.SubTitle {font-weight: bold;}.jimu-widget-threatAnalysis .editBtn {float: right; background: url(./images/draw_black.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 7px;}.jimu-widget-threatAnalysis .editBtn:hover {background: url('./images/draw_black_hover.png'); background-repeat: no-repeat;}.jimu-widget-threatAnalysis .jimu-edit-active {background: url('./images/draw_black_hover.png'); background-repeat: no-repeat; border: none;}.jimu-widget-threatAnalysis .helpBtn {float: right; background: url(./images/help_black.png); background-repeat: no-repeat; background-color: transparent; width: 16px; height: 16px; margin-top: 6px;}.jimu-widget-threatAnalysis .helpBtn:hover {background: url(./images/help_black_hover.png);}.jimu-widget-threatAnalysis .add-with-icon {height: 30px; padding-left: 2px;}.btnContainer {text-align: right; margin-top: 15px;}.jimu-widget-threatAnalysis .BtnContainer {text-align: right; margin-top: 15px; display: grid;}.jimu-widget-threatAnalysis .controlGroupHidden {display: none;}.jimu-widget-threatAnalysis .controlItem {display: flex;}.jimu-widget-threatAnalysis .jimu-btn {margin-bottom: 6px; width: 100%;}.jimu-widget-threatAnalysis .dijitSlider {width: calc(100% - 268px); margin-left: 5px; margin-right: auto; margin-top: 4px;}.jimu-rtl .jimu-widget-threatAnalysis .dijitSlider {margin-left: auto; margin-right: 10px;}.jimu-widget-threatAnalysis .dijitSlider .dijitSliderImageHandleH {top: -10px; width: 20px; height: 20px;}.jimu-widget-threatAnalysis .colorPickerEditor {padding-top: 5px; padding-bottom: 8px; min-width: 345px;}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none) {.jimu-widget-threatAnalysis .colorPickerEditor {padding-top: 5px; padding-bottom: 8px; width: 100%; display: inline-flex;}}.jimu-widget-threatAnalysis .colorPickerEditor .jimu-color-picker {display: inline-block; width: 25px; height: 25px;}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none) {.jimu-widget-threatAnalysis .colorPickerEditor .jimu-color-picker {display: inline-block; width: 25px; height: 25px; margin-top: 26px;}}.jimu-widget-threatAnalysis .colorPickerEditor .dijitSpinner.dijitNumberTextBox.dijitValidationTextBox {width: 70px; height: 30px; margin: 0 5px;}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none) {.jimu-widget-threatAnalysis .colorPickerEditor .dijitSpinner.dijitNumberTextBox.dijitValidationTextBox {width: 66px; height: 30px; margin-top: 25px;}}.jimu-widget-threatAnalysis .dijitSliderImageHandleH {top: -7px;}.jimu-widget-threatAnalysis .dijitSliderThumbHover {background-image: url(\"../images/sliderball.svg\"); background-position: 0 0;}.jimu-widget-threatAnalysis .dijitSliderImageHandle.dijitSliderImageHandleH {background-image: url(\"../images/sliderball.svg\"); background-position: 0 0;}.jimu-widget-threatAnalysis .dijitSliderImageHandle.dijitSliderImageHandleH.dojoMoveItem {background-image: url(\"../images/sliderball.svg\"); background-position: 0 0;}.jimu-widget-threatAnalysis .dijitSlider .dijitSliderProgressBarH,.jimu-widget-threatAnalysis .dijitSlider .dijitSliderLeftBumper {border-color: #000; background-color: #000; background-image: -webkit-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: -o-linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px); background-image: linear-gradient(top, #000 0px, #000 1px, rgba(255, 255, 255, 0) 2px);}.jimu-widget-threatAnalysis .dijitSlider .dijitSliderRemainingBarH,.jimu-widget-threatAnalysis .dijitSlider .dijitSliderRightBumper {border-color: #d7d7d7; background-color: #d7d7d7;}.jimu-widget-threatAnalysis .colorPickerEditor .trans {font-family: \"Avenir Light\"; font-size: 12px; padding: 0 5px 0 5px; letter-spacing: 0.33px;}.jimu-widget-threatAnalysis .sliderbar {width: 60px;}.jimu-widget-threatAnalysis .styleSelectSection {display: inline-grid; vertical-align: bottom; width: 140px !important;}@supports (-ms-ime-align: auto) {.jimu-widget-threatAnalysis .styleSelectSection {display: -ms-inline-grid; vertical-align: bottom; height: 45px;} .jimu-widget-threatAnalysis .styleSelect {width: 145px !important; margin-top: 15px;}}.jimu-widget-threatAnalysis .styleSelect {width: 80%;}.jimu-widget-threatAnalysis .publishSelect .dijitSelectLabel {-ms-text-overflow: ellipsis; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; text-align: left; margin-top: 5px;}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none) {.jimu-widget-threatAnalysis .styleSelectSection {display: inline-grid; vertical-align: bottom; margin: 8px 10px 0 10px;}}.dijitRuleLabelH {left: -12%;}.easy-autocomplete {position: relative;}.easy-autocomplete input {border-color: #ccc; border-style: solid; border-width: 1px; color: #555; float: none; padding: 6px 12px;}.easy-autocomplete input:hover,.easy-autocomplete input:focus {box-shadow: none;}.easy-autocomplete a {display: inline-flex;}.easy-autocomplete a:hover {cursor: help;}.easy-autocomplete-container ul {background: none repeat scroll 0 0 #ffffff; border-top: 1px dotted #ccc; display: none; margin-top: 0; padding-bottom: 0; padding-left: 0; position: relative; top: -1px;}.easy-autocomplete-container ul li,.easy-autocomplete-container ul .eac-category {background: inherit; border-color: #ccc; border-image: none; border-style: solid; border-width: 0 1px; display: block; font-size: 14px; font-weight: normal; padding: 4px 12px;}.easy-autocomplete-container ul li:last-child {border-radius: 0 0 2px 2px; border-width: 0 1px 1px;}.easy-autocomplete-container ul li.selected {background: none repeat scroll 0 0 #ebebeb; cursor: pointer;}.jimu-widget-threatAnalysis .weatherPanel {overflow-x: auto !important; overflow-y: hidden !important; display: inline-flex; width: 100%; border: 1px solid #d9dde0; padding: 10px; height: 100px;}.jimu-widget-threatAnalysis .Col {float: left; height: 80px; width: 220px; border-left: none; border-right: 1px solid #ffffff; border-right: 1px solid rgba(255, 255, 255, 0.5); margin-left: 0; padding: 0 20px; overflow: hidden; text-overflow: ellipsis;}.jimu-rtl .jimu-widget-threatAnalysis .Col {float: right; border-left: 1px solid #ffffff; border-left: 1px solid rgba(255, 255, 255, 0.5); border-right: none;}.jimu-widget-threatAnalysis .ColSmall,.jimu-widget-threatAnalysis .ColSmallUnknown {float: left; height: 100%; width: calc(100% / 3); border-left: none; border-right: 1px solid #afaeae; margin-left: 0; overflow: hidden; text-overflow: ellipsis; text-align: center;}.jimu-widget-threatAnalysis .ColSmallUnknown {padding: 0;}.jimu-rtl .jimu-widget-threatAnalysis .ColSmall {float: right; border-left: 1px solid #ffffff; border-left: 1px solid rgba(255, 255, 255, 0.5); border-right: none;}.jimu-widget-threatAnalysis .ColLast {border-left: none; border-right: none;}.jimu-widget-threatAnalysis .Col .label,.jimu-widget-threatAnalysis .ColSmall .label {font-size: 13px; padding: 2px 0; overflow: hidden; text-overflow: ellipsis; width: 100%;}.jimu-widget-threatAnalysis .loading {background-image: url('images/loading.gif'); background-repeat: no-repeat; background-position: center 10px;}.jimu-widget-threatAnalysis .jimu-coordinate-control textarea {width: 100%; height: 30px; border: 1px solid #ccc; padding: 7px 0px 5px 14px;}.jimu-rtl .jimu-widget-threatAnalysis .jimu-coordinate-control textarea {padding: 7px 4px 4px 14px;}.jimu-widget-threatAnalysis .coordInput {width: calc(100% - 60px);}.jimu-rtl .jimu-widget-threatAnalysis .coordInput {width: calc(100% - 60px);}.jimu-widget-threatAnalysis .tabsContainer {border: 1px solid #838383;}.jimu-widget-threatAnalysis .jimu-tab3 .tab-item-td {border-bottom: 0px;}.jimu-widget-threatAnalysis .jimu-tab3 .tab-item-td.jimu-state-active {border: 1px solid #24B5CC; background-color: transparent !important;}.LaunchpadTheme .jimu-widget-threatAnalysis .dijitSliderImageHandle.dijitSliderImageHandleH {background-image: none; width: 16px; height: 16px; top: -5px;}.LaunchpadTheme .jimu-widget-threatAnalysis .dijitSliderImageHandle.dijitSliderImageHandleH.dojoMoveItem {background-image: none;}.LaunchpadTheme .jimu-checkbox {display: inline-flex;}.jimu-widget-threatAnalysis .colorPickerEditor .dijitSelectLabel,.jimu-widget-threatAnalysis .esriCTThreatInputType .dijitSelectLabel {text-overflow: ellipsis; -ms-text-overflow: ellipsis; text-align: justify; overflow: hidden; width: 70px; padding: 5px 0px 0px 0px;}.jimu-widget-threatAnalysis .esriCTThreatInputType .dijitSelectLabel {width: 100px;}.jimu-widget-threatAnalysis .colorPickerEditor .dijitReset.dijitInputField.dijitInputContainer {display: flex; align-items: center; justify-content: center;}",
"*now":function(J){J(['dojo/i18n!*preload*widgets/ThreatAnalysis/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare jimu/BaseWidget dojo/_base/lang dojo/_base/array dojo/dom-class dojo/dom-style dojo/dom-construct dojo/json dojo/on dojo/topic dojo/fx dojo/string dojo/dom-attr dojo/query dojo/number dojo/_base/kernel dojo/text!./models/ThreatTypes.json dojo/text!./models/LpgThreatTypes.json dojo/keys dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/focus jimu/dijit/LoadingIndicator jimu/dijit/CoordinateControl jimu/LayerInfos/LayerInfos jimu/LayerStructure jimu/utils jimu/symbolUtils jimu/dijit/CheckBox esri/Color esri/dijit/util/busyIndicator esri/graphic esri/geometry/geometryEngine esri/geometry/Extent esri/geometry/webMercatorUtils esri/layers/FeatureLayer esri/layers/GraphicsLayer esri/symbols/PictureMarkerSymbol esri/renderers/SimpleRenderer esri/renderers/UniqueValueRenderer esri/symbols/jsonUtils esri/InfoTemplate ./js/ThreatAnalysisSettings ./js/portal-utils ./js/SelectFeaturesTool esri/tasks/GeometryService esri/SpatialReference dojo/Deferred dojo/promise/all ./js/jquery.easy-autocomplete dijit/form/NumberTextBox dijit/form/RadioButton dijit/form/NumberSpinner jimu/dijit/formSelect jimu/dijit/DrawBox".split(" "),function(J,
F,c,g,v,w,z,k,b,h,n,d,p,C,B,I,N,q,r,x,y,A,K,G,H,t,E,P,S,L,U,W,Z,fa,ha,ia,a,f,l,e,Q,T,V,aa,X,ba,ca,da,ka){return J([F,x,y],{baseClass:"jimu-widget-threatAnalysis",_selectedThreat:null,_threatData:null,_lastOpenPanel:"threatMainPage",_currentOpenPanel:"threatMainPage",_threatSettingsInstance:null,_renderer:null,_layerList:null,_drawBox:null,_currentGeometry:null,_pointSymbol:null,_polylineSymbol:null,_polygonSymbol:null,_selectedUnitType:null,_addLayerToMap:!0,geometryService:null,postMixInProperties:function(){this.inherited(arguments);
this.nls.common={};c.mixin(this.nls.common,window.jimuNls.common);this.isRenderIdForAttrs=!0},constructor:function(m){J.safeMixin(this,m)},postCreate:function(){H.getInstance(this.map,this.map.itemInfo).then(c.hitch(this,function(D){this._jimuLayerInfos=D}));this.openAtStartAysn=!0;h.subscribe("setBusyIndicator",c.hitch(this,function(D){D?this.busyIndicator.show():this.busyIndicator.hide()}));h.subscribe("clear",c.hitch(this,function(){this._reset();this._moveMap()}));h.subscribe("setLastFocusNode",
c.hitch(this,function(D){D&&this._setFirstLastFocusNodes()}));String.prototype.format||(String.prototype.format=function(){var D=arguments;return this.replace(/{(\d+)}/g,function(M,R){return"undefined"!==typeof D[R]?D[R]:M})});String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)});this.inherited(arguments);var m=this.appConfig.geometryService;m||(m="//utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer");this.geometryService=
new ba(m);this._initGL();this.ThreatArea=new ia({layerDefinition:{geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"threat_type",alias:this.nls.threatType,type:"esriFieldTypeString"},{name:"zone_type",alias:this.nls.zoneTypeLabel,type:"esriFieldTypeString"},{name:"mandatory_dist",alias:this.nls.mandatoryLabel,type:"esriFieldTypeDouble"},{name:"safe_dist",alias:this.nls.safeLabel,type:"esriFieldTypeDouble"},{name:"lpg_fireball_dia",
alias:this.nls.fireBallDiameterFieldAlias,type:"esriFieldTypeDouble"},{name:"lpg_safe_dist",alias:this.nls.lpgSafeDistanceFieldAlias,type:"esriFieldTypeDouble"},{name:"units",alias:this.nls.unitsLabel,type:"esriFieldTypeString"}],extent:this.map.extent}},{id:this.nls.threatGraphicLayer,outFields:["*"]});this.map.addLayer(this.ThreatArea);var u;if(this.ThreatArea.loaded)(u=H.getInstanceSync().getLayerInfoById(this.nls.threatGraphicLayer))&&u.enablePopup();else this.ThreatArea.on("load",c.hitch(this,
function(){(u=H.getInstanceSync().getLayerInfoById(this.nls.threatGraphicLayer))&&u.enablePopup()}));this.threatCoordinateControl=new G({parentWidget:this,label:this.nls.threatAnalysisCoordInputLabel,input:!0,showFormatButton:!0,showDrawPoint:!0,drawButtonLabel:this.nls.threatAddPointToolTip,drawToolTip:this.nls.threatDrawPointToolTip,graphicsLayer:this._threatLocation,"aria-label":this.nls.threatAnalysisCoordInputLabel});this.threatCoordinateControl.placeAt(this.threatAnalysisCoordContainer);this.threatCoordinateControl.startup();
"DartTheme"===this.appConfig.theme.name&&v.add(this.threatCoordinateControl.domNode,"dartThemeClaroDijitTooltipContainerOverride");this._initDefaultSymbols();this._initLoading();this.publishNewLayer=new S({checked:!1,label:this.nls.publishToNewLayer},z.create("div",{},this.checkBoxParentContainer));this._initListeners();this._createSettings();this.config.hasOwnProperty("threatTypes")?(this._threatData=this.config.threatTypes,this._threatData=this._convertDistanceMetersToFeet(this._threatData,!0)):
this._threatData=k.parse(N);this.config.hasOwnProperty("lpgThreatTypes")?(this._lpgThreatData=this.config.lpgThreatTypes,this._lpgThreatData=this._convertDistanceMetersToFeet(this._lpgThreatData,!1)):this._lpgThreatData=k.parse(q);m=this._getAllMapLayers();this._initDrawBox();this._populateSelectList(this.featureLayerList,m,this.config.threatAnalysis.operationalLayer.name,!1);0===this.featureLayerList.options.length&&(this.publishNewLayer.setValue(!0),v.add(this.checkBoxParentContainer,"controlGroupHidden"));
this.inputTypeSelect.selectedIndex=0;document.createEvent("Event").initEvent("change",!1,!0);this.inputTypeSelect.onChange();this._initThreatTypeCtrl(this._threatData);this.mandatoryDist.invalidMessage=this.nls.invalidNumberMessage;this.mandatoryDist.rangeMessage=this.nls.invalidRangeMessage;this.safeDist.invalidMessage=this.nls.invalidNumberMessage;this.safeDist.rangeMessage=this.nls.invalidRangeMessage;this.addTANameArea.invalidMessage=this.nls.invalidLayerName;this.addTANameArea.missingMessage=
this.nls.missingLayerNameMessage;this.unitType.set("value",this.config.threatAnalysis.unit);this._selectedUnitType=this.unitType.get("value");""===this.config.threatAnalysis.operationalLayer.name&&(v.add(this.featureLayerList.domNode,"controlGroupHidden"),this.publishNewLayer.setValue(!0),v.remove(this.addTANameArea.domNode,"controlGroupHidden"));this._setFirstLastFocusNodes()},startup:function(){this.busyIndicator=U.create({target:null!==this.domNode.parentNode.parentNode?this.domNode.parentNode.parentNode:
this.domNode.parentNode,backgroundOpacity:0});this._setTheme();var m=!!window.MSInputMethodContext&&!!document.documentMode,u=/Edge/.test(navigator.userAgent),D=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);(m||u||D)&&setTimeout(c.hitch(this,function(){this._reset()},2E3));this._setFirstLastFocusNodes(!0)},resize:function(){var m=C(".dijitValidationTextBoxLabel",this.featureLayerList.domNode);0<m.length&&w.set(m[0],"width",this.threatPublishButton.clientWidth-44+"px");m=C(".dijitValidationTextBoxLabel",
this.layerSelect.domNode);0<m.length&&w.set(m[0],"width",this.threatCatagorySelect.domNode.clientWidth-44+"px")},_removeStyleFile:function(m,u){var D=null;D="js"===u?"src":"css"===u?"href":"none";u=document.getElementsByTagName("js"===u?"script":"css"===u?"link":"none");for(var M=u.length;0<=M;M--)u[M]&&null!==u[M].getAttribute(D)&&-1!==u[M].getAttribute(D).indexOf(m)&&u[M].parentNode.removeChild(u[M])},_setTheme:function(){"DartTheme"===this.appConfig.theme.name?E.loadStyleLink("darkOverrideCSS",
this.folderUrl+"css/dartTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dartTheme.css","css");"DashboardTheme"===this.appConfig.theme.name&&"default"===this.appConfig.theme.styles[0]?E.loadStyleLink("darkDashboardOverrideCSS",this.folderUrl+"css/dashboardTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dashboardTheme.css","css")},destroy:function(){this._threatLocation&&this.map.removeLayer(this._threatLocation);this.ThreatArea&&this.map.removeLayer(this.ThreatArea);this.drawBox&&
this.drawBox.clear();this.inherited(arguments)},_initGL:function(){this._ptSym=new f(this.folderUrl+"images/CoordinateLocation.png",26,26);this._ptSym.setOffset(0,13);var m=new l(this._ptSym);this._threatLocation=new a;this._threatLocation.spatialReference=this.map.spatialReference;this._threatLocation.setRenderer(m);this._threatLocation.name="Threat Location";this.map.addLayer(this._threatLocation)},_initThreatTypeCtrl:function(m){var u=this,D={"Pipe Bomb":"pipeBombLabel","Suicide Bomb":"suicideBombLabel",
Briefcase:"briefcaseLabel",Car:"carLabel","SUV/VAN":"suvVanLabel","Small Delivery Truck":"smallDeliveryTruckLabel","Container/Water Truck":"containerWaterTruckLabel","Semi-Trailer":"semiTrailerLabel","Small LPG Tank":"smallLPGTank","Large LPG Tank":"largeLPGTank","Commercial/Residential LPG Tank":"commercialResidentialLPGTank","Small LPG Truck":"smallLPGTruck","Semi-Tanker LPG":"semiTankerLPG"},M=function(R){return void 0!==D[R]?u.nls[D[R]]:R};this.threatType.options=[];this.threatType.addOption({value:"",
label:"",defaultSelected:!0,selected:!0,unit:""});g.forEach(m,function(R){this.threatType.addOption({value:R.Threat,label:E.sanitizeHTML(M(R.Threat)),defaultSelected:!1,selected:!1,unit:R.Unit})},u)},_initAutoCompleteCtrl:function(m){m={data:m,placeholder:this.nls.threatPlaceholder,getValue:function(u){return u.Threat},list:{match:{enabled:!0},sort:{enabled:!0},onChooseEvent:c.hitch(this,function(){var u=$(this.threatType).getSelectedItemIndex();this._selectedThreat=$(this.threatType).getSelectedItemData(u);
"chemicalThreatCatogory"===this.threatCatagorySelect.get("value")?this._setDistanceInputControls({mandatoryDistance:this._selectedThreat.Bldg_Dist,safeDistance:this._selectedThreat.Outdoor_Dist}):this._setDistanceInputControls({mandatoryDistance:this._selectedThreat.Fireball_Dia,safeDistance:this._selectedThreat.Safe_Dist});""!==this.threatCoordinateControl.coordtext.value&&this._toggleCreateZoneButton(!1)}),onShowListEvent:c.hitch(this,function(){this._selectedThreat=null;this._setDistanceInputControls({mandatoryDistance:0,
safeDistance:0});this._toggleCreateZoneButton(!0)})}};$(this.threatType).easyAutocomplete(m)},_initLoading:function(){this.loading=new K({hidden:!0});this.loading.placeAt(this.domNode);this.loading.startup()},_initListeners:function(){this.config.threatAnalysis.lockSettings?this.threatAnalysisSettingsButton.title=this.nls.lockSettings:(this.own(b(this.threatAnalysisSettingsButton,"click",c.hitch(this,function(){this._showPanel("threatSettingsPage")}))),this.own(b(this._jimuLayerInfos,"layerInfosChanged",
c.hitch(this,this._onLayerInfosChange))),this.own(b(this.threatAnalysisSettingsButton,"keydown",c.hitch(this,function(m){if(m.keyCode===r.ENTER||m.keyCode===r.SPACE)this._showPanel("threatSettingsPage"),this._setFirstLastFocusNodes()}))));this.own(b(this.threatCreateButton,"click",c.hitch(this,this._threatCreateButtonClicked)));this.own(b(this.threatCreateButton,"keydown",c.hitch(this,function(m){if(m.keyCode===r.ENTER||m.keyCode===r.SPACE)this._threatCreateButtonClicked(),this._setFirstLastFocusNodes()})));
this.own(b(this.threatClearButton,"click",c.hitch(this,function(){this.threatType.set("value","");this._setDistanceInputControls({mandatoryDistance:0,safeDistance:0},"feet");this._setLabelText(this.mandatoryLabel,this.nls.mandatoryLabel);this._setLabelText(this.safeLabel,this.nls.safeLabel);this._selectedThreat=null;this.map.infoWindow.isShowing&&this.map.infoWindow.hide();this._reset();this._setFirstLastFocusNodes()})));this.own(b(this.threatClearButton,"keydown",c.hitch(this,function(m){if(m.keyCode===
r.ENTER||m.keyCode===r.SPACE)this.threatType.set("value",""),this._setDistanceInputControls({mandatoryDistance:0,safeDistance:0},"feet"),this._setLabelText(this.mandatoryLabel,this.nls.mandatoryLabel),this._setLabelText(this.safeLabel,this.nls.safeLabel),this._selectedThreat=null,this.map.infoWindow.isShowing&&this.map.infoWindow.hide(),this._reset(),this._setFirstLastFocusNodes()})));this.own(b(this.threatCoordinateControl.dt,"DrawComplete",c.hitch(this,function(){this.threatCoordinateControl.deactivateDrawTool();
this.threatCoordinateControl.currentClickPointDD&&(this._currentGeometry=this.threatCoordinateControl.currentClickPointDD,null!==this._selectedThreat&&this._toggleCreateZoneButton(!0));A.focus(this.threatType.domNode)})));this.own(b(this.threatCoordinateControl,"coordinates-deleted",c.hitch(this,function(){0===this.threatCoordinateControl.coordtext.value&&this._reset()})));this.own(b(this.threatCoordinateControl,"get-coordinate-complete",c.hitch(this,function(){setTimeout(c.hitch(this,function(){this.threatCoordinateControl.currentClickPointDD&&
(this._currentGeometry=this.threatCoordinateControl.currentClickPointDD,null!==this._selectedThreat&&this._toggleCreateZoneButton(!0))}),1E3)})));this.own(b(this.threatSettingsPanelBackButton,"click",c.hitch(this,function(){this._threatSettingsInstance.validInputs()&&(this._threatSettingsInstance.onClose(),this._showPanel(this._lastOpenPanel))})));this.own(b(this.threatSettingsPanelBackButton,"keydown",c.hitch(this,function(m){m.keyCode!==r.ENTER&&m.keyCode!==r.SPACE||!this._threatSettingsInstance.validInputs()||
(this._threatSettingsInstance.onClose(),this._showPanel(this._lastOpenPanel),setTimeout(c.hitch(this,function(){this._setFirstLastFocusNodes()}),0))})));this.own(b(this.threatResultsPanelBackButton,"click",c.hitch(this,function(){this.publishMessage.innerHTML="";this.addTANameArea.setValue("");this.addTANameArea.reset();this._threatLocation.show();this._showPanel(this._lastOpenPanel)})));this.own(b(this.threatResultsPanelBackButton,"keydown",c.hitch(this,function(m){if(m.keyCode===r.ENTER||m.keyCode===
r.SPACE)this.publishMessage.innerHTML="",this.addTANameArea.setValue(""),this.addTANameArea.reset(),this._threatLocation.show(),this._showPanel(this._lastOpenPanel),setTimeout(c.hitch(this,function(){this._setFirstLastFocusNodes()}),0)})));this.own(b(this.threatPublishButton,"click",c.hitch(this,function(){this._threatPublishButtonClicked()})));this.own(b(this.threatPublishButton,"keydown",c.hitch(this,function(m){m.keyCode!==r.ENTER&&m.keyCode!==r.SPACE||this._threatPublishButtonClicked()})));this.own(b(this.drawBox,
"DrawEnd",c.hitch(this,this._onDrawEnd)));this.selectFeaturesTool=new X({drawBoxOption:{map:this.map,geoTypes:["EXTENT","POLYGON"],showClear:!1},nls:this.nls});this.own(b(this.selectFeaturesTool,"selection-complete",c.hitch(this,function(m){this._toggleCreateZoneButton(this._selectedThreat&&m.geometry?!0:!1);this._currentGeometry=m.geometry;A.focus(this.threatType.domNode)})));this.selectFeaturesTool.placeAt(this.drawingSection);this.own(b(this.inputTypeSelect,"change",c.hitch(this,this._onInputTypeSelectionChanged)));
this.own(b(this.threatType,"change",c.hitch(this,this._onThreatTypeSelectionChanged)));this.own(b(this.unitType,"change",c.hitch(this,this._onUnitTypeSelectionChanged)));this.own(b(this.layerSelect,"change",c.hitch(this,this._onLayerSelectionChanged)));this.own(b(this.publishNewLayer,"click",c.hitch(this,this._onCheckboxClicked)));this.own(b(this.publishNewLayer,"change",c.hitch(this,this._onCheckboxClicked)));this.own(b(this.publishNewLayer,"keydown",c.hitch(this,function(m){m.keyCode!==r.ENTER&&
m.keyCode!==r.SPACE||this._onCheckboxClicked()})));this.own(b(this.featureLayerList,"change",c.hitch(this,function(){this.resize()})));this.own(b(this.threatCatagorySelect,"change",c.hitch(this,function(m){"chemicalThreatCatogory"===m?(this._initThreatTypeCtrl(this._threatData),this.mandatoryLabel.innerHTML=this.nls.mandatoryLabel,this.safeLabel.innerHTML=this.nls.safeLabel):(this._initThreatTypeCtrl(this._lpgThreatData),this.mandatoryLabel.innerHTML=this.nls.fireBallDiameterLable,this.safeLabel.innerHTML=
this.nls.lpgSafeDistanceLable);this._setDistanceInputControls({mandatoryDistance:0,safeDistance:0},"feet");1===this.threatType.options.length&&this._toggleCreateZoneButton(!1)})))},_threatPublishButtonClicked:function(){if(this.publishNewLayer.checked&&!this.addTANameArea.isValid())this.publishMessage.innerHTML=this.nls.missingLayerNameMessage;else{this.publishMessage.innerHTML="";var m={layerName:this.publishNewLayer.checked?this.addTANameArea.value:this.featureLayerList.getValue(),url:"",itemId:"",
serviceItemId:"",map:this.map,appConfig:this.appConfig,renderer:this._renderer,publishMessage:this.publishMessage,nls:this.nls,graphics:this.ThreatArea.graphics};if(!this.publishNewLayer.checked){var u=this._layerList.filter(function(D){return D.name===m.layerName},this);1===u.length&&(m.url=u[0].url,m.itemId=u[0].id,m.serviceItemId=k.parse(u[0]._json).serviceItemId)}aa._layerList=this._layerList;aa.saveToPortal(m)}},_onCheckboxClicked:function(){this.publishNewLayer.checked?(v.add(this.featureLayerList.domNode,
"controlGroupHidden"),v.remove(this.addTANameArea.domNode,"controlGroupHidden"),this.addTANameArea.reset(),this.addTANameArea.focus()):(v.add(this.addTANameArea.domNode,"controlGroupHidden"),v.remove(this.featureLayerList.domNode,"controlGroupHidden"));this._addLayerToMap=this.publishNewLayer.checked},_onInputTypeSelectionChanged:function(){var m=this.inputTypeSelect.get("value");"interactive"===m&&(n.wipeIn({node:this.interActiveDiv}).play(),this.coordInputDiv.style.display=this.existingFeatureDiv.style.display=
"none");"manual_location"===m&&(n.wipeIn({node:this.coordInputDiv}).play(),this.interActiveDiv.style.display=this.existingFeatureDiv.style.display="none");"existing_features"===m&&(n.wipeIn({node:this.existingFeatureDiv}).play(),this.coordInputDiv.style.display=this.interActiveDiv.style.display="none")},_onLayerSelectionChanged:function(){this.selectFeaturesTool.setLayerInfo(this._getSelectedLayerInfo());this.resize()},_onThreatTypeSelectionChanged:function(){var m=this.threatType.get("value"),u=
this.threatCatagorySelect.get("value");g.forEach("chemicalThreatCatogory"===u?this._threatData:this._lpgThreatData,c.hitch(this,function(D){D.Threat===m&&(this._selectedThreat="chemicalThreatCatogory"===u?{threatType:D.Threat,mandatoryDistance:D.Bldg_Dist,safeDistance:D.Outdoor_Dist,unitType:D.Unit}:{threatType:D.Threat,mandatoryDistance:D.Fireball_Dia,safeDistance:D.Safe_Dist,unitType:D.Unit},this._setDistanceInputControls(this._selectedThreat,this._selectedUnitType),this._currentGeometry&&this._toggleCreateZoneButton(!0))}))},
_onUnitTypeSelectionChanged:function(){this._selectedUnitType=this.unitType.get("value");this._selectedThreat&&this._setDistanceInputControls(this._selectedThreat,this._selectedUnitType)},_setLabelText:function(m,u){g.forEach(["title","innerHTML"],c.hitch(this,function(D){p.set(m,D,u)}))},_getNodeByName:function(m){switch(m){case "threatMainPage":var u=this.threatMainPageNode;break;case "threatSettingsPage":u=this.threatSettingsPageNode;break;case "threatResultsPage":u=this.threatResultsPageNode}return u},
_reset:function(){this._clearLayers();this.map.enableMapNavigation()},_clearLayers:function(){this.ThreatArea.clear();this.ThreatArea.refresh();this._toggleCreateZoneButton(!1);this._threatLocation.clear();this.threatCoordinateControl.clear();this.selectFeaturesTool.reset();this._selectedThreat=this._currentGeometry=null;this.drawBox.clear();this.threatType.set("value","");this._setDistanceInputControls({mandatoryDistance:0,safeDistance:0},"feet")},_createSettings:function(){this._threatSettingsInstance=
new V({nls:this.nls,config:this.config,appConfig:this.appConfig,refDomNode:this.domNode},z.create("div",{},this.threatSettingsNode));this.own(this._threatSettingsInstance.on("ThreatSettingsChanged",c.hitch(this,function(m){this._createRenderer(m)})));this._threatSettingsInstance.startup()},_createRenderer:function(m){var u=new L(m.mandatoryFillColor.color),D=255*(1-m.mandatoryFillColor.transparency),M=new L(m.mandatoryOutlineColor.color),R=255*(1-m.mandatoryOutlineColor.transparency),O=new L(m.safeFillColor.color),
Y=255*(1-m.safeFillColor.transparency),la=new L(m.safeOutlineColor.color),oa=255*(1-m.safeOutlineColor.transparency),ma=new L(m.fireballDiaFillColor.color),na=255*(1-m.fireballDiaFillColor.transparency),ja=new L(m.fireballDiaOutlineColor.color),pa=255*(1-m.fireballDiaOutlineColor.transparency),ea=new L(m.safeDistanceFillColor.color),ra=255*(1-m.safeDistanceFillColor.transparency),qa=new L(m.safeDistanceOutlineColor.color);this._renderer=new e({type:"uniqueValue",field1:"zone_type",uniqueValueInfos:[{value:this.nls.mandatoryLabel,
symbol:{color:[u.r,u.g,u.b,D],outline:{color:[M.r,M.g,M.b,R],width:1,type:"esriSLS",style:m.mandatoryOutlineColor.type},type:"esriSFS",style:m.mandatoryFillColor.type}},{value:this.nls.safeLabel,symbol:{color:[O.r,O.g,O.b,Y],outline:{color:[la.r,la.g,la.b,oa],width:1,type:"esriSLS",style:m.safeOutlineColor.type},type:"esriSFS",style:m.safeFillColor.type}},{value:this.nls.fireBallDiameterLable,symbol:{color:[ma.r,ma.g,ma.b,na],outline:{color:[ja.r,ja.g,ja.b,pa],width:1,type:"esriSLS",style:m.fireballDiaOutlineColor.type},
type:"esriSFS",style:m.fireballDiaFillColor.type}},{value:this.nls.lpgSafeDistanceLable,symbol:{color:[ea.r,ea.g,ea.b,ra],outline:{color:[qa.r,qa.g,qa.b,255*(1-m.safeDistanceOutlineColor.transparency)],width:1,type:"esriSLS",style:m.safeDistanceOutlineColor.type},type:"esriSFS",style:m.safeDistanceFillColor.type}}]});this.ThreatArea.setRenderer(this._renderer);this.ThreatArea.refresh()},_showPanel:function(m){if(this._currentOpenPanel){var u=this._getNodeByName(this._currentOpenPanel);v.add(u,"Hidden")}u=
this._getNodeByName(m);v.remove(u,"Hidden");this._lastOpenPanel=this._currentOpenPanel;this._currentOpenPanel=m;this._setFirstLastFocusNodes()},_threatCreateButtonClicked:function(){if(!v.contains(this.threatCreateButton,"jimu-state-disabled")){var m=this.threatCatagorySelect.get("value");this.loading.show();this.getProjectedGeometry(this._currentGeometry,new ca(102100)).then(c.hitch(this,function(u){this.loading.hide();this._createThreatAreas(u,this._selectedThreat,this._selectedUnitType,m)}))}},
getProjectedGeometry:function(m,u){var D=new da;if(ha.canProject(m,u)){var M=ha.project(m,u);D.resolve(M)}else this.geometryService.project([m],u,function(R){M=R[0];D.resolve(M)},function(){D.resolve(null)});return D.promise},_createThreatAreas:function(m,u,D,M){if(m&&u){var R=[],O=null,Y="feet"===D.toLowerCase()?this.nls.feetLabel:this.nls.metersLabel,la=m.spatialReference.isWebMercator()?m:ha.geographicToWebMercator(m),oa="feet"===D.toLowerCase()?9002:9001;O="feet"===D.toLowerCase()?u.mandatoryDistance:
this._convertToMeters(u.mandatoryDistance,!1);m=new W(Z.geodesicBuffer(la,O,oa));"chemicalThreatCatogory"===M?(m.setAttributes({zone_type:this.nls.mandatoryLabel,mandatory_dist:O,threat_type:u.threatType,safe_dist:0,lpg_fireball_dia:0,lpg_safe_dist:0,units:Y}),O=new T,O.setTitle(this.nls._widgetLabel),O.setContent("\x3cb\x3e"+this.nls.threatType+":\x3c/b\x3e ${threat_type}\x3cbr /\x3e\x3cb\x3e"+this.nls.mandatoryLabel+":\x3c/b\x3e ${mandatory_dist:NumberFormat(places:2)} "+Y+"\x3cbr /\x3e")):(m.setAttributes({zone_type:this.nls.fireBallDiameterLable,
lpg_fireball_dia:O,threat_type:u.threatType,lpg_safe_dist:0,mandatory_dist:0,safe_dist:0,units:Y}),O=new T,O.setTitle(this.nls._widgetLabel),O.setContent("\x3cb\x3e"+this.nls.threatType+":\x3c/b\x3e ${threat_type}\x3cbr /\x3e\x3cb\x3e"+this.nls.fireBallDiameterLable+":\x3c/b\x3e ${lpg_fireball_dia:NumberFormat(places:2)} "+Y+"\x3cbr /\x3e"));m.setInfoTemplate(O);R.push(m);O="feet"===D.toLowerCase()?u.safeDistance:this._convertToMeters(u.safeDistance,!1);D=Z.geodesicBuffer(la,O,oa);m=Z.difference(D,
m.geometry);D=new W(m?m:D);"chemicalThreatCatogory"===M?(D.setAttributes({zone_type:this.nls.safeLabel,mandatory_dist:0,safe_dist:O,threat_type:u.threatType,lpg_fireball_dia:0,lpg_safe_dist:0,units:Y}),O=new T,O.setTitle(this.nls._widgetLabel),O.setContent("\x3cb\x3e"+this.nls.threatType+":\x3c/b\x3e ${threat_type}\x3cbr /\x3e\x3cb\x3e"+this.nls.safeLabel+":\x3c/b\x3e ${safe_dist:NumberFormat(places:2)} "+Y+"\x3cbr /\x3e")):(D.setAttributes({zone_type:this.nls.lpgSafeDistanceLable,lpg_fireball_dia:0,
lpg_safe_dist:O,threat_type:u.threatType,mandatory_dist:0,safe_dist:0,units:Y}),O=new T,O.setTitle(this.nls._widgetLabel),O.setContent("\x3cb\x3e"+this.nls.threatType+":\x3c/b\x3e ${threat_type}\x3cbr /\x3e\x3cb\x3e"+this.nls.lpgSafeDistanceLable+":\x3c/b\x3e ${lpg_safe_dist:NumberFormat(places:2)} "+Y+"\x3cbr /\x3e"));D.setInfoTemplate(O);R.push(D);var ma=[];this.loading.show();g.forEach(R,c.hitch(this,function(na){ma.push(this.getProjectedGeometry(na.geometry,this.map.spatialReference))}));ka(ma).then(c.hitch(this,
function(na){var ja=[];g.forEach(R,c.hitch(this,function(pa,ea){na[ea]&&(ea=new W(na[ea]),ea.setInfoTemplate(pa.infoTemplate),ea.setAttributes(pa.attributes),ja.push(ea))}));ja&&0<ja.length&&(this.ThreatArea.applyEdits(ja,null,null),this.map.setExtent(this.ThreatArea.graphics[this.ThreatArea.graphics.length-1].geometry.getExtent().expand(2)),this._showPanel("threatResultsPage"),this.isOnScreen&&this.resize(),this.selectFeaturesTool.reset());this.loading.hide()}))}},_getAllMapLayers:function(){var m=
[];t.getInstance().traversal(c.hitch(this,function(u){"undefined"!==typeof u._layerInfo.layerObject.type&&-1===u._layerInfo.layerObject.type.indexOf("tile")&&"FeatureCollection"!==u._layerInfo.layerObject.type&&"esriGeometryPolygon"===u._layerInfo.layerObject.geometryType&&m.push(u._layerInfo.layerObject)}));return m},_initDrawBox:function(){this.drawBox.setMap(this.map);var m=P.getGreyPinMarkerSymbol();this.drawBox.setPointSymbol(m)},_onDrawEnd:function(m,u){this.drawBox.clear();this._currentGeometry=
m.geometry;var D=null;D="POINT"===u?this._pointSymbol:"POLYLINE"===u?this._polylineSymbol:this._polygonSymbol;"EXTENT"!==u&&(this._threatLocation.clear(),this._threatLocation.add(new W(m.geometry,D,null,null)));this._selectedThreat&&this._currentGeometry&&this._toggleCreateZoneButton(!0);A.focus(this.threatType.domNode)},_toggleCreateZoneButton:function(m){m?(v.remove(this.threatCreateButton,"jimu-state-disabled"),p.set(this.threatCreateButton,"tabindex",0)):(v.add(this.threatCreateButton,"jimu-state-disabled"),
p.set(this.threatCreateButton,"tabindex",-1))},_setDistanceInputControls:function(m,u){if(m&&m.hasOwnProperty("mandatoryDistance")&&m.hasOwnProperty("safeDistance")){var D="meters"===u.toLowerCase()?this._convertToMeters(m.mandatoryDistance,!0):this._formatNumber(m.mandatoryDistance);this.mandatoryDist.set("value",d.substitute("${mandatoryDistance} ${unitType}",{mandatoryDistance:D,unitType:"meters"===u.toLowerCase()?this.nls.metersLabel:this.nls.feetLabel}));D="meters"===u.toLowerCase()?this._convertToMeters(m.safeDistance,
!0):this._formatNumber(m.safeDistance);this.safeDist.set("value",d.substitute("${safeDistance} ${unitType}",{safeDistance:D,unitType:"meters"===u.toLowerCase()?this.nls.metersLabel:this.nls.feetLabel}))}},_convertToMeters:function(m,u){return u?this._formatNumber(m/3.280839895):m/3.280839895},_convertToFeet:function(m,u){return u?this._formatNumber(3.280839895*m):3.280839895*m},_formatNumber:function(m){return B.format(m,{places:2,locale:I.locale})},_containsSupportedCapabilities:function(m){var u=
!0;["create","delete","query","update","editing"].forEach(function(D){-1===m.toLowerCase().split(",").indexOf(D)&&(u=!1)});return u},_populateSelectList:function(m,u,D,M){M&&(m.options=[]);g.forEach(u,c.hitch(this,function(R){if(M){var O=this._jimuLayerInfos.getLayerInfoById(R.id),Y="";O&&(Y=O.title?O.title:O.name);"Feature Layer"===R.type&&m.addOption({value:Y,label:E.sanitizeHTML(R.name)?E.sanitizeHTML(R.name):Y,selected:!1})}else R.url&&"Feature Layer"===R.type&&this._containsSupportedCapabilities(R.capabilities)&&
m.addOption({value:R.name,label:E.sanitizeHTML(R.name),selected:!1})}));""!==D&&m.set("displayedValue",D);M&&0<m.options.length&&this.selectFeaturesTool&&this.selectFeaturesTool.setLayerInfo(this._getSelectedLayerInfo())},_initDefaultSymbols:function(){var m={style:"esriSMSCircle",color:[0,0,128,128],name:"Circle",outline:{color:[0,0,128,255],width:1},type:"esriSMS",size:18},u={style:"esriSLSSolid",color:[79,129,189,255],width:3,name:"Blue 1",type:"esriSLS"},D={style:"esriSFSSolid",color:[79,129,
189,128],type:"esriSFS",outline:{style:"esriSLSSolid",color:[54,93,141,255],width:1.5,type:"esriSLS"}};this._pointSymbol||(this._pointSymbol=Q.fromJson(m));this._polylineSymbol||(this._polylineSymbol=Q.fromJson(u));this._polygonSymbol||(this._polygonSymbol=Q.fromJson(D))},_moveMap:function(){var m=this.map.spatialReference,u=new fa;u.xmin=this.map.extent.xmin+1E-4;u.ymin=this.map.extent.ymin;u.xmax=this.map.extent.xmax;u.ymax=this.map.extent.ymax;u.spatialReference=m;this.map.setExtent(u)},_setFirstLastFocusNodes:function(m){if("threatResultsPage"===
this._currentOpenPanel){E.initFirstFocusNode(this.domNode,this.threatResultsPanelBackButton);E.initLastFocusNode(this.domNode,this.threatPublishButton);var u=C("a",this.publishMessage)[0];""!==this.publishMessage.innerHTML&&u?(E.initLastFocusNode(this.domNode,this.publishMessage),A.focus(u)):""===this.publishMessage.innerHTML&&A.focus(this.threatResultsPanelBackButton)}"threatSettingsPage"===this._currentOpenPanel&&(E.initFirstFocusNode(this.domNode,this.threatSettingsPanelBackButton),A.focus(this.threatSettingsPanelBackButton),
this._threatSettingsInstance._setLastFocusNode());"threatMainPage"===this._currentOpenPanel&&(E.initFirstFocusNode(this.domNode,this.threatAnalysisTitleUrl),E.initLastFocusNode(this.domNode,this.threatClearButton),m?E.isAutoFocusFirstNodeWidget(this)&&A.focus(this.threatAnalysisTitleUrl):A.focus(this.threatAnalysisTitleUrl))},_convertDistanceMetersToFeet:function(m,u){var D=[];g.forEach(m,c.hitch(this,function(M){M.Unit&&"meters"===M.Unit.toLowerCase()&&(u?(M.Bldg_Dist=this._convertToFeet(M.Bldg_Dist),
M.Outdoor_Dist=this._convertToFeet(M.Outdoor_Dist)):(M.Fireball_Dia=this._convertToFeet(M.Fireball_Dia),M.Safe_Dist=this._convertToFeet(M.Safe_Dist)));D.push(M)}));return D},_onLayerInfosChange:function(){this._layerList="";this._layerList=this._getLayers();this._populateSelectList(this.layerSelect,this._layerList,"",!0)},_getLayers:function(){var m=[],u;for(u in this.map._layers)if(this.map._layers.hasOwnProperty(u)){var D=this.map._layers[u];D.hasOwnProperty("type")&&"Feature Layer"===D.type&&m.push(D)}return m},
_getSelectedLayerInfo:function(){var m,u=this.layerSelect.get("value");g.forEach(this._layerList,c.hitch(this,function(D){var M=this._jimuLayerInfos.getLayerInfoById(D.id);u===(M.title?M.title:D.name)&&(m=D)}));return m}})});