// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/ThreatAnalysis/templates/ThreatAnalysisSettings.html":'\x3cdiv\x3e\r\n  \x3cdiv style\x3d"margin: 10px 0px 10px 0px;"\x3e\r\n    \x3cdiv\x3e${nls.chemicalThreatLabel}\x3c/div\x3e\r\n    \x3c!-- Mandatory Evacuation Distance DropDown --\x3e\r\n    \x3cdiv class\x3d"SettingsRow"\x3e\r\n      \x3cdiv class\x3d"LabelSettingsRightButton SettingsButtonIcon Pointer" title\x3d"${nls.mandatoryButtonLabel}"\r\n        data-dojo-attach-point\x3d"mandatorySettingsButton" tabindex\x3d"0" aria-expanded\x3d"false" role\x3d"button"\r\n        aria-label\x3d"${nls.mandatoryButtonLabel}"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"InputLabelSettings Ellipsis SubTitle" title\x3d"${nls.mandatoryLabel}"\x3e${nls.mandatoryLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Mandatory Evacuation Distance Color Pickers --\x3e\r\n    \x3cdiv class\x3d"container controlGroupHidden" data-dojo-attach-point\x3d"mandatoryContainer"\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.outline}"\x3e${nls.outline}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Line" id\x3d"mandatoryOutlineColor" data-dojo-attach-point\x3d"mandatoryOutlineColorPicker"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.fill}"\x3e${nls.fill}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Fill" id\x3d"mandatoryFillColor" data-dojo-attach-point\x3d"mandatoryFillColorPicker"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Safe Evacuation Distance DropDown --\x3e\r\n    \x3cdiv class\x3d"SettingsRow"\x3e\r\n      \x3cdiv class\x3d"LabelSettingsRightButton SettingsButtonIcon Pointer" title\x3d"${nls.safeButtonLabel}"\r\n        data-dojo-attach-point\x3d"safeSettingsButton" tabindex\x3d"0" aria-expanded\x3d"false" role\x3d"button"\r\n        aria-label\x3d"${nls.safeButtonLabel}"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"InputLabelSettings Ellipsis SubTitle" title\x3d"${nls.safeLabel}"\x3e${nls.safeLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3c!-- Safe Evacuation Distance --\x3e\r\n    \x3cdiv class\x3d"container controlGroupHidden" data-dojo-attach-point\x3d"safeContainer"\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.outline}"\x3e${nls.outline}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Line" id\x3d"safeOutlineColor" data-dojo-attach-point\x3d"safeOutlineColorPicker"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.fill}"\x3e${nls.fill}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Fill" id\x3d"safeFillColor" data-dojo-attach-point\x3d"safeFillColorPicker"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n    \x3cdiv\x3e${nls.lpgThreatLabel}\x3c/div\x3e\r\n    \x3cdiv class\x3d"SettingsRow"\x3e\r\n      \x3cdiv class\x3d"LabelSettingsRightButton SettingsButtonIcon Pointer" title\x3d"${nls.fireballButtonLabel}"\r\n        data-dojo-attach-point\x3d"fireballDiaSettingsButton" tabindex\x3d"0" aria-expanded\x3d"false" role\x3d"button"\r\n        aria-label\x3d"${nls.fireballButtonLabel}"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"InputLabelSettings Ellipsis SubTitle" title\x3d"${nls.fireBallDiameterLable}"\x3e\r\n        ${nls.fireBallDiameterLable}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"container controlGroupHidden" data-dojo-attach-point\x3d"fireBallContainer"\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.outline}"\x3e${nls.outline}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Line" id\x3d"fireballDiaOutlineColor" data-dojo-attach-point\x3d"fireballDiaOutlineColorPicker"\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.fill}"\x3e${nls.fill}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Fill" id\x3d"fireballDiaFillColor" data-dojo-attach-point\x3d"fireballDiaFillColorPicker"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"SettingsRow"\x3e\r\n      \x3cdiv class\x3d"LabelSettingsRightButton SettingsButtonIcon Pointer" title\x3d"${nls.safeDistanceButtonLabel}"\r\n        data-dojo-attach-point\x3d"safeDistanceSettingsButton" tabindex\x3d"0" aria-expanded\x3d"false" role\x3d"button"\r\n        aria-label\x3d"${nls.safeDistanceButtonLabel}"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"InputLabelSettings Ellipsis SubTitle" title\x3d"${nls.lpgSafeDistanceLable}"\x3e${nls.lpgSafeDistanceLable}\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"container controlGroupHidden" data-dojo-attach-point\x3d"safeDistanceContainer"\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.outline}"\x3e${nls.outline}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Line" id\x3d"safeDistanceOutlineColor"\r\n        data-dojo-attach-point\x3d"safeDistanceOutlineColorPicker"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"Ellipsis" title\x3d"${nls.fill}"\x3e${nls.fill}\x3c/div\x3e\r\n      \x3cdiv class\x3d"colorPicker Fill" id\x3d"safeDistanceFillColor" data-dojo-attach-point\x3d"safeDistanceFillColorPicker"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dojo/_base/array dojo/_base/html dojo/on dojo/dom dojo/keys ./ColorPickerEditor jimu/BaseWidget dijit/_WidgetsInTemplateMixin dojo/text!../templates/ThreatAnalysisSettings.html dojo/_base/lang dojo/Evented dojo/dom-class dojo/query dojo/dom-attr dijit/registry dijit/focus jimu/utils jimu/dijit/formSelect jimu/dijit/SymbolChooser".split(" "),function(v,h,k,e,w,d,x,y,z,A,c,B,p,l,q,g,r,t){return v([y,z,B],{baseClass:"jimu-widget-threatAnalysisSetting",templateString:A,selectedSettings:{},
colorPickerNodes:[],constructor:function(a){c.mixin(this,a)},startup:function(){var a={fireballDiaOutlineColor:{color:"#d10e40",transparency:0,type:"esriSLSSolid"},fireballDiaFillColor:{color:"#d10e40",transparency:.88,type:"esriSFSSolid"},safeDistanceOutlineColor:{color:"#ffffff",transparency:0,type:"esriSLSNull"},safeDistanceFillColor:{color:"#ffd700",transparency:.78,type:"esriSFSSolid"}};this.colorPickerNodes=l(".colorPicker",this.domNode);h.forEach(this.colorPickerNodes,c.hitch(this,function(b){b=
new x({nls:this.nls,type:p.contains(b,"Line")?"line":"fill"},b);this.own(b.on("ColorPickerEditorChanged",c.hitch(this,function(){this.onSettingsChanged()})));b.setValues({color:this.config.threatAnalysis.symbology[b.id]?this.config.threatAnalysis.symbology[b.id].color:a[b.id].color,transparency:this.config.threatAnalysis.symbology[b.id]?this.config.threatAnalysis.symbology[b.id].transparency:a[b.id].transparency});b.startup();b.dropdown.set("value",this.config.threatAnalysis.symbology[b.id]?this.config.threatAnalysis.symbology[b.id].type:
a[b.id].type)}));var f=l(".jimu-color-pickerPopup",this.domNode);h.forEach(f,c.hitch(this,function(b){this.own(e(b,"keydown",c.hitch(this,function(m){m.keyCode!==d.ENTER&&m.keyCode!==d.SPACE||m.currentTarget.click()})))}));this.onSettingsChanged()},postCreate:function(){this.inherited(arguments);p.add(this.domNode,"SettingsContainer FullWidth");this._handleClickEvents()},_handleClickEvents:function(){this.own(e(this.mandatorySettingsButton,"click",c.hitch(this,function(){this._openCloseNodes(this.mandatorySettingsButton,
this.mandatoryContainer)})));this.own(e(this.mandatorySettingsButton,"keydown",c.hitch(this,function(a){a.keyCode!==d.ENTER&&a.keyCode!==d.SPACE||this._openCloseNodes(this.mandatorySettingsButton,this.mandatoryContainer)})));this.own(e(this.safeSettingsButton,"click",c.hitch(this,function(){this._openCloseNodes(this.safeSettingsButton,this.safeContainer)})));this.own(e(this.safeSettingsButton,"keydown",c.hitch(this,function(a){if(a.keyCode===d.ENTER||a.keyCode===d.SPACE)this._openCloseNodes(this.safeSettingsButton,
this.safeContainer),this._setLastFocusNode()})));this.own(e(this.fireballDiaSettingsButton,"click",c.hitch(this,function(){this._openCloseNodes(this.fireballDiaSettingsButton,this.fireBallContainer)})));this.own(e(this.fireballDiaSettingsButton,"keydown",c.hitch(this,function(a){if(a.keyCode===d.ENTER||a.keyCode===d.SPACE)this._openCloseNodes(this.fireballDiaSettingsButton,this.fireBallContainer),this._setLastFocusNode()})));this.own(e(this.safeDistanceSettingsButton,"click",c.hitch(this,function(){this._openCloseNodes(this.safeDistanceSettingsButton,
this.safeDistanceContainer)})));this.own(e(this.safeDistanceSettingsButton,"keydown",c.hitch(this,function(a){if(a.keyCode===d.ENTER||a.keyCode===d.SPACE)this._openCloseNodes(this.safeDistanceSettingsButton,this.safeDistanceContainer),this._setLastFocusNode()})))},validInputs:function(){var a=!0;h.some(this.colorPickerNodes,function(f){if(!g.byId(f.id).validateSpinner())return a=!1,!0},this);return a},_openCloseNodes:function(a,f){var b=l(".container",this.domNode),m=l(".SettingsButtonIcon",this.domNode),
u=!1;this.validInputs()&&(a&&p.contains(a,"LabelSettingsRightButton")&&(u=!0),h.forEach(b,c.hitch(this,function(n){k.addClass(n,"controlGroupHidden")})),h.forEach(m,c.hitch(this,function(n,C){k.removeClass(n,"LabelSettingsDownButton");k.addClass(n,"LabelSettingsRightButton");q.set(n,"aria-expanded","false");C===m.length-1&&setTimeout(c.hitch(this,function(){this._setLastFocusNode()}),100)})),u?(k.removeClass(f,"controlGroupHidden"),k.removeClass(a,"LabelSettingsRightButton"),k.addClass(a,"LabelSettingsDownButton"),
q.set(a,"aria-expanded","true"),a=l(".jimu-color-picker",f),a.length&&r.focus(a[0])):r.focus(a))},onClose:function(){this.onSettingsChanged();this._openCloseNodes()},onSettingsChanged:function(){h.forEach(this.colorPickerNodes,c.hitch(this,function(a){var f={color:void 0!==g.byId(a.id)?g.byId(a.id).getValues().color:this.config.threatAnalysis.symbology[a.id].color,transparency:void 0!==g.byId(a.id)?g.byId(a.id).getValues().transparency:this.config.threatAnalysis.symbology[a.id].transparency,type:void 0!==
g.byId(a.id)?g.byId(a.id).dropdown.getValue():this.config.threatAnalysis.symbology[a.id].type};this.selectedSettings[a.id]=f}));this.emit("ThreatSettingsChanged",this.selectedSettings)},_setLastFocusNode:function(){if(p.contains(this.safeDistanceSettingsButton,"LabelSettingsDownButton")){var a=l(".dijit",w.byId("safeDistanceFillColor").lastElementChild)[0];t.initLastFocusNode(this.refDomNode,a)}else t.initLastFocusNode(this.refDomNode,this.safeDistanceSettingsButton)}})});