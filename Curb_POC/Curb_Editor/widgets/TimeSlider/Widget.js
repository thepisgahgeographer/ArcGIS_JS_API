// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/TimeSlider":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/kernel dojo/has dojo/dom-class dojo/dom-construct dojo/dom-style dojo/dom-geometry dijit/_Widget dijit/_Templated dijit/form/HorizontalSlider dijit/form/HorizontalRule dijit/form/HorizontalRuleLabels dojox/timing/_base dojox/form/RangeSlider dojo/text!dojox/form/resources/HorizontalRangeSlider.html ../kernel ../lang ../TimeExtent ./_EventedWidget dojo/text!./templates/TimeSlider.html dojo/i18n!../nls/jsapi".split(" "),
function(u,l,f,A,B,y,h,q,m,a,p,k,r,w,z,C,g,v,e,b,t,c,n){m=u([t,a,p],{declaredClass:"esri.dijit.TimeSlider",widgetsInTemplate:!0,templateString:c,intermediateChanges:!1,_slideDuration:1E3,_defaultCount:10,_eventMap:{"time-extent-change":!0,play:!0,pause:!0,next:!0,previous:!0},constructor:function(d,x){l.mixin(this,n.widgets.timeSlider);this._iconClass="tsButton tsPlayButton";this.loop=this.playing=!1;this.thumbCount=1;this.thumbMovingRate=1E3;this._createTimeInstants=!1;this._options=l.mixin({excludeDataAtTrailingThumb:!1,
excludeDataAtLeadingThumb:!1},d.options||{})},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this._timer=new z.Timer;this._timer.setInterval(this.thumbMovingRate);this._timer.onTick=l.hitch(this,"_bumpSlider",1);this._createSlider()},destroy:function(){this._timer.stop();this.timeStops=this._timer=null;this._slider.destroy();this._slider=null;this._hTicks&&(this._hTicks.destroyRecursive(),this._hTicks=null);this._hLabels&&(this._hLabels.destroyRecursive(),
this._hLabels=null);this.inherited(arguments)},onTimeExtentChange:function(){},onPlay:function(){},onPause:function(){},onNext:function(){},onPrevious:function(){},_onHorizontalChange:function(){var d=this._sliderToTimeExtent();this.onTimeExtentChange(d)},_onPlay:function(){this.playing=!this.playing;this._updateUI();this.playing?(this._timer.start(),this.onPlay(this._sliderToTimeExtent())):(this._timer.stop(),this.onPause(this._sliderToTimeExtent()));var d=this._getSliderValue();this._offset=l.isArray(d)?
d[1]-d[0]:0},_onNext:function(){this.playing||(this._bumpSlider(1),this.onNext(this._sliderToTimeExtent()))},_onPrev:function(){this.playing||(this._bumpSlider(-1),this.onPrevious(this._sliderToTimeExtent()))},createTimeStopsByCount:function(d,x){d&&d.startTime&&d.endTime?(x=x||this._defaultCount,this.createTimeStopsByTimeInterval(d,Math.ceil((d.endTime-d.startTime)/(x-1)),"esriTimeUnitsMilliseconds")):console.log(this.NLS_invalidTimeExtent)},createTimeStopsByTimeInterval:function(d,x,E,D){if(d&&
d.startTime&&d.endTime){this.fullTimeExtent=new b(d.startTime,d.endTime);D&&!0===D.resetStartTime&&this._resetStartTime(this.fullTimeExtent,E);this._timeIntervalUnits=E;D=this.fullTimeExtent.startTime;for(var F=[];D<=d.endTime;)F.push(D),D=d._getOffsettedDate(D,x,E);0<F.length&&F[F.length-1]<d.endTime&&F.push(D);this.setTimeStops(F)}else console.log(this.NLS_invalidTimeExtent)},getCurrentTimeExtent:function(){return this._sliderToTimeExtent()},setTimeStops:function(d){this.timeStops=d||[];this._numTicks=
this._numStops=this.timeStops.length;!1===e.isDefined(this.fullTimeExtent)&&(this.fullTimeExtent=new b(d[0],d[d.length-1]))},setLoop:function(d){this.loop=d},setThumbCount:function(d){this.thumbCount=d;this.singleThumbAsTimeInstant(this._createTimeInstants);this._slider&&this._createSlider()},setThumbIndexes:function(d){this.thumbIndexes=l.clone(d)||[0,1];this._initializeThumbs()},setThumbMovingRate:function(d){this.thumbMovingRate=d;this._timer&&this._timer.setInterval(this.thumbMovingRate)},setLabels:function(d){this.labels=
d;this._slider&&this._createSlider()},setTickCount:function(d){this._numTicks=d;this._slider&&this._createSlider()},singleThumbAsTimeInstant:function(d){this._createTimeInstants=d&&1===this.thumbCount},next:function(){this._onNext()},pause:function(){this.playing=!1;this._updateUI();this._timer.stop()},play:function(){!0!==this.playing&&(this.playing=!1,this._onPlay())},previous:function(){this._onPrev()},_setIntermediateChangesAttr:function(d){this.intermediateChanges=!!d;this._slider&&this._slider.set("intermediateChanges",
!!d)},_updateUI:function(){y.remove(this.playPauseBtn.iconNode,this._iconClass);this._iconClass=this.playing?"tsButton tsPauseButton":"tsButton tsPlayButton";y.add(this.playPauseBtn.iconNode,this._iconClass);this.previousBtn.set("disabled",this.playing);this.nextBtn.set("disabled",this.playing)},_createSlider:function(){this._slider&&(this._slider.destroy(),this._slider=null);for(var d=this.domNode;d.parentNode&&!d.dir;)d=d.parentNode;d={onChange:l.hitch(this,"_onHorizontalChange"),showButtons:!1,
discreteValues:this._numStops,slideDuration:this._slideDuration,"class":"ts",dir:"ltr",intermediateChanges:this.intermediateChanges};this._ts=h.create("div",{},A.query(".tsTmp",this.domNode)[0],"first");this._timeSliderTicks=h.create("div",{},this._ts,"first");this._timeSliderLabels=h.create("div",{},this._ts);2===this.thumbCount?this._createRangeSlider(d):this._createSingleSlider(d);this.thumbIndexes=this.thumbIndexes||[0,1];this._createHorizRule();this._createLabels();!0===this._createTimeInstants&&
A.query(".dijitSliderProgressBarH, .dijitSliderLeftBumper, .dijitSliderRightBumper",this._ts).forEach(function(x){q.set(x,{background:"none"})});this._initializeThumbs();f.disconnect(this._onChangeConnect);this._onChangeConnect=f.connect(this._slider,"onChange",l.hitch(this,"_updateThumbIndexes"))},_createRangeSlider:function(d){this._isRangeSlider=!0;this._slider=new (u([k,C],{templateString:g}))(d,this._ts)},_createSingleSlider:function(d){this._isRangeSlider=!1;this._slider=new k(d,this._ts)},
_createHorizRule:function(){this._hTicks&&(this._hTicks.destroyRecursive(),this._hTicks=null);2>this._numTicks||(this._hTicks=new r({container:"topDecoration",ruleStyle:"","class":"tsTicks",count:this._numTicks},this._timeSliderTicks))},_createLabels:function(){this._hLabels&&(this._hLabels.destroyRecursive(),this._hLabels=null);this.labels&&0<this.labels.length&&(this._hLabels=new w({labels:this.labels,labelStyle:"","class":"tsLabels"},this._timeSliderLabels))},_initializeThumbs:function(){if(this._slider){this._offset=
this._toSliderValue(this.thumbIndexes[1])||0;var d=this._toSliderValue(this.thumbIndexes[0]);d=d>this._slider.maximum||d<this._slider.minimum?this._slider.minimum:d;if(!0===this._isRangeSlider){var x=this._toSliderValue(this.thumbIndexes[1]);x=x>this._slider.maximum||x<this._slider.minimum?this._slider.maximum:x;this._setSliderValue([d,x<d?d:x])}else this._setSliderValue(d);this._onHorizontalChange()}},_bumpSlider:function(d){var x=this._getSliderValue(),E=x,D=E,F=d;l.isArray(x)&&(D=x[0],E=x[1],F=
[{change:d,useMaxValue:!0},{change:d,useMaxValue:!1}]);1E-10>Math.abs(D-this._slider.minimum)&&0>d||1E-10>Math.abs(E-this._slider.maximum)&&0<d?this._timer.isRunning&&(this.loop?(this._timer.stop(),this._setSliderValue(this._getSliderMinValue()),d=this._sliderToTimeExtent(),this.onTimeExtentChange(d),this._timer.start(),this.playing=!0):this.pause()):this._slider._bumpValue(F)},_updateThumbIndexes:function(){var d=this._getSliderValue();l.isArray(d)?(this.thumbIndexes[0]=this._toSliderIndex(d[0]),
this.thumbIndexes[1]=this._toSliderIndex(d[1])):this.thumbIndexes[0]=this._toSliderIndex(d)},_sliderToTimeExtent:function(){if(this.timeStops&&0!==this.timeStops.length){var d=new b,x=this._getSliderValue();if(l.isArray(x)){if(x[0]>x[1]){var E=x[0];var D=x[1]}else D=x[0],E=x[1];d.startTime=new Date(this.timeStops[this._toSliderIndex(D)]);d.endTime=new Date(this.timeStops[this._toSliderIndex(E)]);this._adjustTimeExtent(d)}else d.startTime=!0===this._createTimeInstants?new Date(this.timeStops[this._toSliderIndex(x)]):
new Date(this.fullTimeExtent.startTime),d.endTime=!0===this._createTimeInstants?d.startTime:new Date(this.timeStops[this._toSliderIndex(x)]);return d}},_adjustTimeExtent:function(d){if((!1!==this._options.excludeDataAtTrailingThumb||!1!==this._options.excludeDataAtLeadingThumb)&&d.startTime.getTime()!==d.endTime.getTime()){if(this._options.excludeDataAtTrailingThumb){var x=d.startTime;x.setUTCSeconds(x.getUTCSeconds()+1)}this._options.excludeDataAtLeadingThumb&&(d=d.endTime,d.setUTCSeconds(d.getUTCSeconds()-
1))}},_resetStartTime:function(d,x){switch(x){case "esriTimeUnitsSeconds":d.startTime.setUTCMilliseconds(0);break;case "esriTimeUnitsMinutes":d.startTime.setUTCSeconds(0,0,0);break;case "esriTimeUnitsHours":d.startTime.setUTCMinutes(0,0,0);break;case "esriTimeUnitsDays":d.startTime.setUTCHours(0,0,0,0);break;case "esriTimeUnitsWeeks":d.startTime.setUTCDate(d.startTime.getUTCDate()-d.startTime.getUTCDay());break;case "esriTimeUnitsMonths":d.startTime.setUTCDate(1);d.startTime.setUTCHours(0,0,0,0);
break;case "esriTimeUnitsDecades":d.startTime.setUTCFullYear(d.startTime.getUTCFullYear()-d.startTime.getUTCFullYear()%10);break;case "esriTimeUnitsCenturies":d.startTime.setUTCFullYear(d.startTime.getUTCFullYear()-d.startTime.getUTCFullYear()%100)}},_getSliderMinValue:function(){return this._isRangeSlider?[this._slider.minimum,this._slider.minimum+this._offset]:this._slider.minimum},_toSliderIndex:function(d){d=Math.floor((d-this._slider.minimum)*this._numStops/(this._slider.maximum-this._slider.minimum));
0>d&&(d=0);d>=this._numStops&&(d=this._numStops-1);return d},_toSliderValue:function(d){return d*(this._slider.maximum-this._slider.minimum)/(this._numStops-1)+this._slider.minimum},_getSliderValue:function(){return this._slider.get("value")},_setSliderValue:function(d){this._slider._setValueAttr(d,!1,!1)}});B("extend-esri")&&l.setObject("dijit.TimeSlider",m,v);return m})},"dojox/timing/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],function(u){u.experimental("dojox.timing");u.getObject("timing",
!0,dojox);dojox.timing.Timer=function(l){this.timer=null;this.isRunning=!1;this.interval=l;this.onStop=this.onStart=null};u.extend(dojox.timing.Timer,{onTick:function(){},setInterval:function(l){this.isRunning&&window.clearInterval(this.timer);this.interval=l;this.isRunning&&(this.timer=window.setInterval(u.hitch(this,"onTick"),this.interval))},start:function(){if("function"==typeof this.onStart)this.onStart();this.isRunning=!0;this.timer=window.setInterval(u.hitch(this,"onTick"),this.interval)},
stop:function(){if("function"==typeof this.onStop)this.onStop();this.isRunning=!1;window.clearInterval(this.timer)}});return dojox.timing})},"dojox/form/RangeSlider":function(){define(["dojo/_base/kernel","./_RangeSliderMixin","./HorizontalRangeSlider","./VerticalRangeSlider"],function(u,l){u.deprecated("Call require() for HorizontalRangeSlider / VerticalRangeSlider, explicitly rather than 'dojox.form.RangeSlider' itself","","2.0");return l})},"dojox/form/_RangeSliderMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/fx dojo/_base/event dojo/_base/sniff dojo/dom-style dojo/dom-geometry dojo/keys dijit dojo/dnd/Mover dojo/dnd/Moveable dijit/form/_FormValueWidget dijit/focus dojo/fx dojox/fx".split(" "),
function(u,l,f,A,B,y,h,q,m,a,p,k,r,w,z){var C=function(e,b){return e-b};a=u("dojox.form._RangeSliderMixin",null,{_setTabIndexAttr:["sliderHandle","sliderHandleMax"],value:[0,100],postMixInProperties:function(){this.inherited(arguments);this.value=f.map(this.value,function(e){return parseInt(e,10)})},postCreate:function(){this.inherited(arguments);this.value.sort(C);var e=this,b=u(g,{constructor:function(){this.widget=e}});this._movableMax=new k(this.sliderHandleMax,{mover:b});this.sliderHandle.setAttribute("aria-valuemin",
this.minimum);this.sliderHandle.setAttribute("aria-valuemax",this.maximum);this.sliderHandleMax.setAttribute("aria-valuemin",this.minimum);this.sliderHandleMax.setAttribute("aria-valuemax",this.maximum);b=u(v,{constructor:function(){this.widget=e}});this._movableBar=new k(this.progressBar,{mover:b});this.focusNode.removeAttribute("aria-valuemin");this.focusNode.removeAttribute("aria-valuemax");this.focusNode.removeAttribute("aria-valuenow")},destroy:function(){this.inherited(arguments);this._movableMax.destroy();
this._movableBar.destroy()},_onKeyPress:function(e){if(!(this.disabled||this.readOnly||e.altKey||e.ctrlKey)){var b=e.target===this.sliderHandleMax,t=e.target===this.progressBar,c=l.delegate(m,this.isLeftToRight()?{PREV_ARROW:m.LEFT_ARROW,NEXT_ARROW:m.RIGHT_ARROW}:{PREV_ARROW:m.RIGHT_ARROW,NEXT_ARROW:m.LEFT_ARROW}),n=0,d=!1;switch(e.keyCode){case c.HOME:this._setValueAttr(this.minimum,!0,b);B.stop(e);return;case c.END:this._setValueAttr(this.maximum,!0,b);B.stop(e);return;case c.PREV_ARROW:case c.DOWN_ARROW:d=
!0;case c.NEXT_ARROW:case c.UP_ARROW:n=1;break;case c.PAGE_DOWN:d=!0;case c.PAGE_UP:n=this.pageIncrement;break;default:this.inherited(arguments);return}d&&(n=-n);n&&(t?this._bumpValue([{change:n,useMaxValue:!1},{change:n,useMaxValue:!0}]):this._bumpValue(n,b),B.stop(e))}},_onHandleClickMax:function(e){this.disabled||this.readOnly||(y("ie")||w.focus(this.sliderHandleMax),B.stop(e))},_onClkIncBumper:function(){this._setValueAttr(!1===this._descending?this.minimum:this.maximum,!0,!0)},_bumpValue:function(e,
b){e=l.isArray(e)?[this._getBumpValue(e[0].change,e[0].useMaxValue),this._getBumpValue(e[1].change,e[1].useMaxValue)]:this._getBumpValue(e,b);this._setValueAttr(e,!0,b)},_getBumpValue:function(e,b){var t=b?1:0;b=h.getComputedStyle(this.sliderBarContainer);var c=q.getContentBox(this.sliderBarContainer,b);b=this.discreteValues;t=this.value[t];if(1>=b||Infinity==b)b=c[this._pixelCount];b--;e=this.maximum>this.minimum?(t-this.minimum)*b/(this.maximum-this.minimum)+e:0;0>e&&(e=0);e>b&&(e=b);return e*(this.maximum-
this.minimum)/b+this.minimum},_onBarClick:function(e){this.disabled||this.readOnly||(y("ie")||w.focus(this.progressBar),B.stop(e))},_onRemainingBarClick:function(e){if(!this.disabled&&!this.readOnly){y("ie")||w.focus(this.progressBar);var b=q.position(this.sliderBarContainer,!0),t=q.position(this.progressBar,!0),c=e[this._mousePixelCoord],n=t[this._startingPixelCoord];t=n+t[this._pixelCount];n=this._isReversed()?c<=n:c>=t;c=this._isReversed()?b[this._pixelCount]-c+b[this._startingPixelCoord]:c-b[this._startingPixelCoord];
this._setPixelValue(c,b[this._pixelCount],!0,n);B.stop(e)}},_setPixelValue:function(e,b,t,c){this.disabled||this.readOnly||(e=this._getValueByPixelValue(e,b),this._setValueAttr(e,t,c))},_getValueByPixelValue:function(e,b){var t=this.discreteValues;if(1>=t||Infinity==t)t=b;t--;return(this.maximum-this.minimum)*Math.round((0>e?0:b<e?b:e)/(b/t))/t+this.minimum},_setValueAttr:function(e,b,t){var c=l.clone(this.value);l.isArray(e)?c=e:c[t?1:0]=e;this._lastValueReported="";this.valueNode.value=e=c;c.sort(C);
this.sliderHandle.setAttribute("aria-valuenow",c[0]);this.sliderHandleMax.setAttribute("aria-valuenow",c[1]);r.prototype._setValueAttr.apply(this,arguments);this._printSliderBar(b,t)},_printSliderBar:function(e,b){b=this.maximum>this.minimum?(this.value[0]-this.minimum)/(this.maximum-this.minimum):0;var t=this.maximum>this.minimum?(this.value[1]-this.minimum)/(this.maximum-this.minimum):0,c=b;b>t&&(b=t,t=c);var n=this._isReversed()?100*(1-b):100*b,d=this._isReversed()?100*(1-t):100*t,x=this._isReversed()?
100*(1-t):100*b;if(e&&0<this.slideDuration&&this.progressBar.style[this._progressPixelSize]){if(parseFloat(this.progressBar.style[this._handleOffsetCoord]),e=this.slideDuration/10,0!==e){0>e&&(e=0-e);var E={},D={};c={};E[this._handleOffsetCoord]={start:this.sliderHandle.parentNode.style[this._handleOffsetCoord],end:n,units:"%"};D[this._handleOffsetCoord]={start:this.sliderHandleMax.parentNode.style[this._handleOffsetCoord],end:d,units:"%"};c[this._handleOffsetCoord]={start:this.progressBar.style[this._handleOffsetCoord],
end:x,units:"%"};c[this._progressPixelSize]={start:this.progressBar.style[this._progressPixelSize],end:100*(t-b),units:"%"};b=A.animateProperty({node:this.sliderHandle.parentNode,duration:e,properties:E});t=A.animateProperty({node:this.sliderHandleMax.parentNode,duration:e,properties:D});e=A.animateProperty({node:this.progressBar,duration:e,properties:c});z.combine([b,t,e]).play()}}else this.sliderHandle.parentNode.style[this._handleOffsetCoord]=n+"%",this.sliderHandleMax.parentNode.style[this._handleOffsetCoord]=
d+"%",this.progressBar.style[this._handleOffsetCoord]=x+"%",this.progressBar.style[this._progressPixelSize]=100*(t-b)+"%"}});var g=u("dijit.form._SliderMoverMax",p,{onMouseMove:function(e){var b=this.widget,t=b._abspos;t||(t=b._abspos=q.position(b.sliderBarContainer,!0),b._setPixelValue_=l.hitch(b,"_setPixelValue"),b._isReversed_=b._isReversed());e=e[b._mousePixelCoord]-t[b._startingPixelCoord];b._setPixelValue_(b._isReversed_?t[b._pixelCount]-e:e,t[b._pixelCount],!1,!0)},destroy:function(e){p.prototype.destroy.apply(this,
arguments);var b=this.widget;b._abspos=null;b._setValueAttr(b.value,!0)}}),v=u("dijit.form._SliderBarMover",p,{onMouseMove:function(e){var b=this.widget;if(!b.disabled&&!b.readOnly){var t=b._abspos,c=b._bar,n=b._mouseOffset;t||(t=b._abspos=q.position(b.sliderBarContainer,!0),b._setPixelValue_=l.hitch(b,"_setPixelValue"),b._getValueByPixelValue_=l.hitch(b,"_getValueByPixelValue"),b._isReversed_=b._isReversed());c||(c=b._bar=q.position(b.progressBar,!0));n||(n=b._mouseOffset=e[b._mousePixelCoord]-c[b._startingPixelCoord]);
e=e[b._mousePixelCoord]-t[b._startingPixelCoord]-n;pixelValues=[e,e+c[b._pixelCount]];pixelValues.sort(C);0>=pixelValues[0]&&(pixelValues[0]=0,pixelValues[1]=c[b._pixelCount]);pixelValues[1]>=t[b._pixelCount]&&(pixelValues[1]=t[b._pixelCount],pixelValues[0]=t[b._pixelCount]-c[b._pixelCount]);t=[b._getValueByPixelValue(b._isReversed_?t[b._pixelCount]-pixelValues[0]:pixelValues[0],t[b._pixelCount]),b._getValueByPixelValue(b._isReversed_?t[b._pixelCount]-pixelValues[1]:pixelValues[1],t[b._pixelCount])];
b._setValueAttr(t,!1,!1)}},destroy:function(){p.prototype.destroy.apply(this,arguments);var e=this.widget;e._abspos=null;e._bar=null;e._mouseOffset=null;e._setValueAttr(e.value,!0)}});return a})},"dojox/fx":function(){define(["./fx/_base"],function(u){return u})},"dojox/fx/_base":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/fx dojo/fx dojo/dom dojo/dom-style dojo/dom-geometry dojo/_base/connect dojo/_base/html".split(" "),function(u,l,f,A,B,y,h,q,m){u=l.getObject("dojox.fx",!0);
l.mixin(u,{anim:f.anim,animateProperty:f.animateProperty,fadeTo:f._fade,fadeIn:f.fadeIn,fadeOut:f.fadeOut,combine:A.combine,chain:A.chain,slideTo:A.slideTo,wipeIn:A.wipeIn,wipeOut:A.wipeOut});u.sizeTo=function(a){var p=a.node=B.byId(a.node),k=a.method||"chain";a.duration||(a.duration=500);"chain"==k&&(a.duration=Math.floor(a.duration/2));var r,w,z,C,g,v=null,e=function(b){return function(){var t=y.getComputedStyle(b),c=t.position,n=t.width,d=t.height;r="absolute"==c?b.offsetTop:parseInt(t.top)||0;
z="absolute"==c?b.offsetLeft:parseInt(t.left)||0;g="auto"==n?0:parseInt(n);v="auto"==d?0:parseInt(d);C=z-Math.floor((a.width-g)/2);w=r-Math.floor((a.height-v)/2);"absolute"!=c&&"relative"!=c&&(t=y.coords(b,!0),r=t.y,z=t.x,b.style.position="absolute",b.style.top=r+"px",b.style.left=z+"px")}}(p);p=f.animateProperty(l.mixin({properties:{height:function(){e();return{end:a.height||0,start:v}},top:function(){return{start:r,end:w}}}},a));k=f.animateProperty(l.mixin({properties:{width:function(){return{start:g,
end:a.width||0}},left:function(){return{start:z,end:C}}}},a));return A["combine"==a.method?"combine":"chain"]([p,k])};u.slideBy=function(a){var p,k,r=function(w){return function(){var z=y.getComputedStyle(w),C=z.position;p="absolute"==C?w.offsetTop:parseInt(z.top)||0;k="absolute"==C?w.offsetLeft:parseInt(z.left)||0;"absolute"!=C&&"relative"!=C&&(z=h.coords(w,!0),p=z.y,k=z.x,w.style.position="absolute",w.style.top=p+"px",w.style.left=k+"px")}}(a.node=B.byId(a.node));r();a=f.animateProperty(l.mixin({properties:{top:p+
(a.top||0),left:k+(a.left||0)}},a));q.connect(a,"beforeBegin",a,r);return a};u.crossFade=function(a){var p=a.nodes[0]=B.byId(a.nodes[0]),k=m.style(p,"opacity"),r=a.nodes[1]=B.byId(a.nodes[1]);m.style(r,"opacity");return A.combine([f[0==k?"fadeIn":"fadeOut"](l.mixin({node:p},a)),f[0==k?"fadeOut":"fadeIn"](l.mixin({node:r},a))])};u.highlight=function(a){var p=a.node=B.byId(a.node);a.duration=a.duration||400;var k=a.color||"#ffff99",r=m.style(p,"backgroundColor");"rgba(0, 0, 0, 0)"==r&&(r="transparent");
a=f.animateProperty(l.mixin({properties:{backgroundColor:{start:k,end:r}}},a));"transparent"==r&&q.connect(a,"onEnd",a,function(){p.style.backgroundColor=r});return a};u.wipeTo=function(a){a.node=B.byId(a.node);var p=a.node,k=p.style,r=a.width?"width":"height",w={};w[r]={start:function(){k.overflow="hidden";if("hidden"==k.visibility||"none"==k.display)return k[r]="1px",k.display="",k.visibility="",1;var z=m.style(p,r);return Math.max(z,1)},end:a[r]};return f.animateProperty(l.mixin({properties:w},
a))};return u})},"dojox/form/HorizontalRangeSlider":function(){define(["dojo/_base/declare","dojox/form/_RangeSliderMixin","dojo/text!./resources/HorizontalRangeSlider.html","dijit/form/HorizontalSlider"],function(u,l,f,A){return u("dojox.form.HorizontalRangeSlider",[A,l],{templateString:f})})},"dojox/form/VerticalRangeSlider":function(){define(["dojo/_base/declare","dojox/form/_RangeSliderMixin","dojo/text!./resources/VerticalRangeSlider.html","dijit/form/VerticalSlider"],function(u,l,f,A){return u("dojox.form.VerticalRangeSlider",
[A,l],{templateString:f})})},"dijit/form/VerticalSlider":function(){define(["dojo/_base/declare","./HorizontalSlider","dojo/text!./templates/VerticalSlider.html"],function(u,l,f){return u("dijit.form.VerticalSlider",l,{templateString:f,_mousePixelCoord:"pageY",_pixelCount:"h",_startingPixelCoord:"y",_handleOffsetCoord:"top",_progressPixelSize:"height",_descending:!0,_isReversed:function(){return this._descending}})})},"widgets/TimeSlider/SpeedMenu":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./SpeedMenu.html dojo/on dojo/query jimu/utils ./a11y/SpeedMenu".split(" "),
function(u,l,f,A,B,y,h,q,m,a,p,k,r){u=u([y,h,q,B],{baseClass:"speed-container",templateString:m,nls:null,menuBox:{w:75,h:120},_speedList:{x025:.25,x05:.5,x1:1,x15:1.5,x2:2},postCreate:function(){this.inherited(arguments);this._initSpeedMenu()},startup:function(){this.inherited(arguments)},destroy:function(){this.inherited(arguments)},_initSpeedMenu:function(){this.a11y_init();this.a11y_initEvents();Object.keys(this._speedList).forEach(l.hitch(this,function(w){var z=this[w];w=k.localizeNumber(this._speedList[w])+
"x";z.innerText=w;this.a11y_setAriaLabel(z.parentElement||z.parentNode,w)}));this.own(a(this.domNode,"click",l.hitch(this,this._closeSpeedMenu)));this._checks=p(".check",this.speedMenu);this.setSpeed("1")},_onSelectSpeedItem:function(w){A.map(this._checks,l.hitch(this,function(g){f.addClass(g,"hide")}));var z;if(w.target)if(z=f.getAttr(w.target,"data-speed"))var C=w.target;else C=w.target.parentNode,z=f.getAttr(C,"data-speed");C&&((w=p(".check",C)[0])&&f.removeClass(w,"hide"),this.speedLabelNode.innerHTML=
k.sanitizeHTML(C.innerText),this._speed=z,this.emit("selected",z))},getSpeed:function(){return this._speed},setSpeed:function(w){var z=null;switch(w){case "0.25":z=this.item025;break;case "0.5":z=this.item05;break;case "1":z=this.item1;break;case "1.5":z=this.item15;break;case "2":z=this.item2;break;default:z=null}z&&a.emit(z,"click",{cancelable:!1,bubbles:!0})},_setMenuPosition:function(){var w=f.position(this.speedLabelNode);0>w.y-this.menuBox.h-2&&f.setStyle(this.speedMenu,{top:"27px",bottom:"auto"});
var z=f.getMarginBox(this.domNode);window.isRTL?0>w.x-this.menuBox.w&&f.setStyle(this.speedMenu,{left:0}):w.x+this.menuBox.w>z.w&&f.setStyle(this.speedMenu,{right:0})},_onSpeedLabelClick:function(w){w.stopPropagation();w.preventDefault();f.hasClass(this.speedMenu,"hide")?(this._setMenuPosition(),this._showSpeedMenu()):this._closeSpeedMenu()},_showSpeedMenu:function(){f.removeClass(this.speedMenu,"hide");this.emit("open");this.a11y_focusOnSelectedItem()},_closeSpeedMenu:function(){f.addClass(this.speedMenu,
"hide");this.emit("close")}});u.extend(r);return u})},"widgets/TimeSlider/a11y/SpeedMenu":function(){define("dojo/_base/lang dojo/on dojo/query dojo/_base/array dojo/_base/html dojo/keys dijit/a11yclick".split(" "),function(u,l,f,A,B,y,h){return{a11y_init:function(){B.setAttr(this.speedLabelNode,"role","button");B.setAttr(this.speedLabelNode,"aria-label",this.nls.speed)},a11y_setAriaLabel:function(q,m){B.setAttr(q,"aria-label",m)},a11y_focusOnSelectedItem:function(){var q=f(".check:not(.hide)",this.speedMenu)[0],
m;q&&(q.parentElement||q.parentNode)&&(m=q.parentElement||q.parentNode);m&&m.focus&&m.focus()},a11y_initEvents:function(){var q=f('[tabindex $\x3d"0"]',this.speedMenu);q&&(this.a11y_firstNode=q[0],this.a11y_lastNode=q[q.length-1]);this.own(l(this.speedLabelNode,h,u.hitch(this,function(m){this._onSpeedLabelClick(m)})));this.own(l(this.speedMenu,"keydown",u.hitch(this,function(m){m.keyCode===y.ESCAPE&&(m.stopPropagation(),m.preventDefault(),this._closeSpeedMenu(),this.speedLabelNode.focus())})));q&&
q.length&&(this.a11y_firstNode=q[0],this.a11y_lastNode=q[length-1],A.forEach(q,u.hitch(this,function(m,a){var p=0===a?q[q.length-1]:q[a-1];this.own(l(m,"keydown",u.hitch(this,function(r){r.stopPropagation();r.preventDefault();r.keyCode===y.UP_ARROW&&p&&p.focus&&p.focus()})));var k=a===q.length-1?q[0]:q[a+1];this.own(l(m,"keydown",u.hitch(this,function(r){r.stopPropagation();r.preventDefault();(r.keyCode===y.DOWN_ARROW||r.keyCode===y.TAB)&&k&&k.focus&&k.focus()})));this.own(l(m,"keydown",u.hitch(this,
function(r){r.stopPropagation();r.preventDefault();if(r.keyCode===y.ENTER||r.keyCode===y.SPACE)l.emit(m,"click",{cancelable:!1,bubbles:!0}),this.speedLabelNode.focus();r.keyCode===y.ESCAPE&&(this._closeSpeedMenu(),this.speedLabelNode.focus())})))})))}}})},"widgets/TimeSlider/TimeProcesser":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/config dojo/Evented dijit/_WidgetBase dojo/when dojo/promise/all dojo/Deferred esri/request ./utils moment/moment dojo/date/locale dojo/i18n esri/lang esri/TimeExtent".split(" "),
function(u,l,f,A,B,y,h,q,m,a,p,k,r,w,z){var C=u([B,A],{nls:null,config:null,map:null,layerInfosObj:null,_INIT_TIME_STEAMP:null,setLayerInfosObj:function(g){this.layerInfosObj=g},_getUpdatedFullTime:function(){var g=0,v,e=[];g=0;for(v=this.map.layerIds.length;g<v;g++){var b=this.map.layerIds[g];b=this.map.getLayer(b);e.push(this._getUpdatedTime(b))}g=0;for(v=this.map.graphicsLayerIds.length;g<v;g++)b=this.map.graphicsLayerIds[g],b=this.map.getLayer(b),e.push(this._getUpdatedTime(b));return h(e).then(l.hitch(this,
function(t){return this._getFullTimeExtent(t)}))},_getFullTimeExtent:function(g){return a.getFullTimeExtent(g)},_getUpdatedTime:function(g){if(g&&g.url&&a.hasLiveData(g)){var v=null;return m({url:g.url,callbackParamName:"callback",content:{f:"json",returnUpdates:!0}}).then(l.hitch(this,function(e){e.timeExtent&&2===e.timeExtent.length&&(v=new z,v.startTime=new Date(e.timeExtent[0]),v.endTime=new Date(e.timeExtent[1]),g.timeInfo.timeExtent=v)})).always(l.hitch(this,function(){return y(v||l.getObject("timeInfo.timeExtent",
!1,g)||null)}))}return y(l.getObject("timeInfo.timeExtent",!1,g)||null)},getUpdatedFullTime:function(){var g=0,v,e=[];g=0;for(v=this.map.layerIds.length;g<v;g++){var b=this.map.layerIds[g];b=this.map.getLayer(b);e.push(this._getUpdatedTime(b))}g=0;for(v=this.map.graphicsLayerIds.length;g<v;g++)b=this.map.graphicsLayerIds[g],b=this.map.getLayer(b),e.push(this._getUpdatedTime(b));return h(e).then(l.hitch(this,function(t){return this._getFullTimeExtent(t)}))},setTimeSlider:function(g){this.timeSlider=
g;this._INIT_TIME_STEAMP=(new Date).getTime()},_getTimeFormatLabel:function(g){var v=this.nls.timeExtent,e=null,b=null,t="",c="";if(!g&&this.timeSlider)2===this.timeSlider.thumbCount?(e=this.timeSlider.timeStops[this.timeSlider.thumbIndexes[0]],b=this.timeSlider.timeStops[this.timeSlider.thumbIndexes[1]]):e=this.timeSlider.timeStops[this.timeSlider.thumbIndexes[0]];else if(g||this.timeSlider)e=g.startTime,0<g.endTime.getTime()-g.startTime.getTime()&&(b=g.endTime);else return"";if("auto"===this.config.timeFormat||
"Custom"===this.config.timeFormat&&""===this.config.customDateFormat){var n=null,d=g=null,x=!1;t=C.localeDic[f.locale]||C.localeDic.en;b&&e.getFullYear()===b.getFullYear()?(e.getMonth()===b.getMonth()?e.getDate()===b.getDate()?g=e.getHours()===b.getHours()?e.getMinutes()===b.getMinutes()?e.getSeconds()===b.getSeconds()?t.millisecondTimePattern:t.secondTimePattern:t.minuteTimePattern:t.minuteTimePattern:(2>b.getDate()-e.getDate()&&(g=t.minuteTimePattern),x=!0):x=!0,d="long"):b&&10<b.getFullYear()-
e.getFullYear()?(n=t.yearPattern,x=!0):(x=!0,d="long");t=k.format(e,{datePattern:n,formatLength:d,selector:"date"});g&&(e=k.format(e,{timePattern:g,selector:"time"}),t=r.getLocalization("dojo.cldr","gregorian")["dateTimeFormat-medium"].replace(/\{1\}/g,t).replace(/\{0\}/g,e));a.isValidDataStrByDateLocale(t)||(t="");b&&(x&&(c=k.format(b,{datePattern:n,formatLength:d,selector:"date"})),g&&(e=k.format(b,{timePattern:g,selector:"time"}),c=x&&g?r.getLocalization("dojo.cldr","gregorian")["dateTimeFormat-medium"].replace(/\{1\}/g,
c).replace(/\{0\}/g,e):e));a.isValidDataStrByDateLocale(c)||(c="")}else g="Custom"===this.config.timeFormat?this.config.customDateFormat:this.config.timeFormat,t=p(e.getTime()).format(g),b&&(c=p(b.getTime()).format(g));return v=b?w.substitute({FROMTIME:t,ENDTIME:c},v):t+""},findDefaultInterval:function(g){g=(g.endTime.getTime()-g.startTime.getTime())/10;if(31104E8<g){g=Math.round(g/31104E8);var v="esriTimeUnitsCenturies"}else 31104E7<g?(g=Math.round(g/31104E7),v="esriTimeUnitsDecades"):31104E6<g?
(g=Math.round(g/31104E6),v="esriTimeUnitsYears"):2592E6<g?(g=Math.round(g/2592E6),v="esriTimeUnitsMonths"):6048E5<g?(g=Math.round(g/6048E5),v="esriTimeUnitsWeeks"):864E5<g?(g=Math.round(g/864E5),v="esriTimeUnitsDays"):36E5<g?(g=Math.round(g/36E5),v="esriTimeUnitsHours"):6E4<g?(g=Math.round(g/6E4),v="esriTimeUnitsMinutes"):1E3<g?(g=Math.round(g/1E3),v="esriTimeUnitsSeconds"):(g=Math.round(g),v="esriTimeUnitsMilliseconds");0===g&&(g=1);return{interval:g,units:v}},getPropsFromMultiLayerInfos:function(g,
v){var e={};null===v?(e=g,e.thumbCount=2,e.thumbMovingRate=2E3):(e=v,g.timeExtent[0]<e.timeExtent[0]&&(e.timeExtent[0]=g.timeExtent[0]),g.timeExtent[1]>e.timeExtent[1]&&(e.timeExtent[1]=g.timeExtent[1]));return e},getTsPros:function(){var g=new q,v=l.getObject("itemData.widgets.timeSlider.properties",!1,this.map&&this.map.itemInfo),e={};v?(e=l.clone(v),g.resolve(e)):g.resolve(null);return g},findClosestThumbIndex:function(g,v){g=g.timeStops;var e=g[0];if(v<e)return 0;for(var b=1;b<g.length;b++){if(g[b]>=
v)return v-e<g[b]-v?b-1:b;if(b<g.length-1)e=g[b];else return b}},getCurrentTimeStops:function(g){var v=null,e=null;1===this.timeSlider.thumbCount?v=this.timeSlider.timeStops[this.timeSlider.thumbIndexes[0]]:2===this.timeSlider.thumbCount&&(v=this.timeSlider.timeStops[this.timeSlider.thumbIndexes[0]],e=this.timeSlider.timeStops[this.timeSlider.thumbIndexes[1]]);return{timeStamp:g,thumbCount:this.timeSlider.thumbCount,startTime:(new Date(v)).getTime(),endTime:(new Date(e)).getTime()}},setAutoRefreshTimer:function(g){var v=
this.config;if(v&&v.autoRefresh&&!0===v.autoRefresh.isAutoRefresh){if(this._autoRefreshFlag=!0,v=a.getAutoRefreshTime(v))this._autoRefreshTimer=setTimeout(l.hitch(this,function(){var e=this.getCurrentTimeStops(this._INIT_TIME_STEAMP);a.saveToLocalCache(this.widgetId,e);g._closeHanlder();g._openHanlder()}),v)}else this._autoRefreshFlag=!1,this.clearAutoRefreshTimer()},clearAutoRefreshTimer:function(){this._autoRefreshTimer&&clearTimeout(this._autoRefreshTimer)},restoreAutoRefreshTimer:function(g){var v=
a.getCacheByKeys(this.widgetId);if(v&&v.timeStamp&&this._INIT_TIME_STEAMP===v.timeStamp){g.setThumbCount(v.thumbCount);var e=this.findClosestThumbIndex(g,v.startTime);1===g.thumbCount?g.setThumbIndexes([e]):2===g.thumbCount&&(v=this.findClosestThumbIndex(g,v.endTime),g.setThumbIndexes([e,v]))}}});C.localeDic={ar:{datePattern:"dd MMMM, yyyy",yearPattern:"yyyy",hourTimePattern:"h a",minuteTimePattern:"h:mm a",secondTimePattern:"h:mm:ss a",millisecondTimePattern:"h:mm:ss:SSS a"},cs:{datePattern:"MMMM d, yyyy",
yearPattern:"yyyy",hourTimePattern:"H",minuteTimePattern:"h:mm",secondTimePattern:"H:mm:ss",millisecondTimePattern:"H:mm:ss:SSS"},da:{datePattern:"d. MMMM yyyy",yearPattern:"yyyy",hourTimePattern:"H",minuteTimePattern:"H:mm",secondTimePattern:"H:mm:ss",millisecondTimePattern:"H:mm:ss:SSS"},de:{datePattern:"d. MMMM yyyy",yearPattern:"yyyy",hourTimePattern:"H",minuteTimePattern:"H:mm",secondTimePattern:"H:mm:ss",millisecondTimePattern:"H:mm:ss:SSS"},el:{datePattern:"d MMMM yyyy",yearPattern:"yyyy",
hourTimePattern:"h",minuteTimePattern:"hh:mm",secondTimePattern:"hh:mm:ss",millisecondTimePattern:"hh:mm:ss:SSS"},es:{datePattern:"d' de 'MMMM' de 'yyyy",yearPattern:"yyyy",hourTimePattern:"H",minuteTimePattern:"H:mm",secondTimePattern:"H:mm:ss",millisecondTimePattern:"H:mm:ss:SSS"},et:{datePattern:"d. MMMM yyyy",yearPattern:"yyyy",hourTimePattern:"H",minuteTimePattern:"H:mm",secondTimePattern:"H:mm:ss",millisecondTimePattern:"H:mm:ss:SSS"},fi:{datePattern:"d. MMMM yyyy",yearPattern:"yyyy",hourTimePattern:"t",
minuteTimePattern:"t:mm a",secondTimePattern:"t:mm:ss",millisecondTimePattern:"h:mm:ss:SSS"},fr:{datePattern:"d MMMM yyyy",yearPattern:"yyyy",hourTimePattern:"HH",minuteTimePattern:"HH:mm",secondTimePattern:"HH:mm:ss",millisecondTimePattern:"HH:mm:ss:SSS"},he:{datePattern:"d, MMMM ,yyyy",yearPattern:"yyyy",hourTimePattern:"h a",minuteTimePattern:"h:mm a",secondTimePattern:"h:mm:ss a",millisecondTimePattern:"h:mm:ss:SSS a"},it:{datePattern:"d MMMM yyyy",yearPattern:"yyyy",hourTimePattern:"H",minuteTimePattern:"H.mm",
secondTimePattern:"H.mm.ss",millisecondTimePattern:"H.mm.ss.SSS"},ja:{datePattern:"yyyy'\u5e74'M'\u6708'd'\u65e5'",yearPattern:"yyyy'\u5e74'",hourTimePattern:"h a",minuteTimePattern:"h:mm a",secondTimePattern:"h:mm:ss a",millisecondTimePattern:"h:mm:ss:SSS a"},ko:{datePattern:"yyyy\ub144 M\uc6d4 d\uc77c",yearPattern:"yyyy\ub144",hourTimePattern:"a h\uc2dc",minuteTimePattern:"a h:mm",secondTimePattern:"a h:mm:ss",millisecondTimePattern:"a h:mm:ss:SSS"},lt:{datePattern:"yyyy MMMM dd",yearPattern:"yyyy",
hourTimePattern:"H a",minuteTimePattern:"HH:mm",secondTimePattern:"HH:mm:ss",millisecondTimePattern:"HH:mm:ss:SSS"},lv:{datePattern:"dd.MM.yyyy",yearPattern:"yyyy",hourTimePattern:"H a",minuteTimePattern:"HH:mm",secondTimePattern:"HH:mm:ss",millisecondTimePattern:"HH:mm:ss:SSS"},nb:{datePattern:"d. MMMM yyyy",yearPattern:"yyyy",hourTimePattern:"H",minuteTimePattern:"H.mm",secondTimePattern:"H.mm.ss",millisecondTimePattern:"H.mm.ss.SSS"},nl:{datePattern:"d. MMMM yyyy",yearPattern:"yyyy",hourTimePattern:"H",
minuteTimePattern:"H:mm",secondTimePattern:"H:mm:ss",millisecondTimePattern:"H:mm:ss:SSS"},pl:{datePattern:"dd-mm-yyyy",yearPattern:"yyyy",hourTimePattern:"hh",minuteTimePattern:"hh:mm",secondTimePattern:"hh:mm:ss",millisecondTimePattern:"hh:mm:ss:SSS"},"pt-br":{datePattern:"d' de 'MMMM' de 'yyyy",yearPattern:"yyyy",hourTimePattern:"H",minuteTimePattern:"h:mm a",secondTimePattern:"H:mm:ss",millisecondTimePattern:"H:mm:ss:SSS"},"pt-pt":{datePattern:"d' de 'MMMM' de 'yyyy",yearPattern:"yyyy",hourTimePattern:"H",
minuteTimePattern:"H:mm",secondTimePattern:"H:mm:ss",millisecondTimePattern:"H:mm:ss:SSS"},ro:{datePattern:"d. MMMM yyyy",yearPattern:"yyyy",hourTimePattern:"H",minuteTimePattern:"H:mm",secondTimePattern:"H:mm:ss",millisecondTimePattern:"H:mm:ss:SSS"},ru:{datePattern:"MMMM d, yyyy",yearPattern:"yyyy",hourTimePattern:"H",minuteTimePattern:"h:mm",secondTimePattern:"h:mm:ss",millisecondTimePattern:"h:mm:ss:SSS"},sv:{datePattern:"MMMM d, yyyy",yearPattern:"yyyy",hourTimePattern:"h a",minuteTimePattern:"h:mm a",
secondTimePattern:"h:mm:ss a",millisecondTimePattern:"h:mm:ss:SSS a"},th:{datePattern:"d MMMM,yyyy",yearPattern:"yyyy",hourTimePattern:"H a",minuteTimePattern:"h:mm a",secondTimePattern:"h:mm:ss a",millisecondTimePattern:"h:mm:ss:SSS a"},tr:{datePattern:"d MMMM yyyy",yearPattern:"yyyy",hourTimePattern:"h a",minuteTimePattern:"h:mm a",secondTimePattern:"h:mm:ss a",millisecondTimePattern:"h:mm:ss:SSS a"},vi:{datePattern:"d MMMM, yyyy",yearPattern:"yyyy",hourTimePattern:"h a",minuteTimePattern:"h:mm a",
secondTimePattern:"h:mm:ss a",millisecondTimePattern:"h:mm:ss:SSS a"},"zh-cn":{datePattern:"yyyy'\u5e74'M'\u6708'd'\u65e5'",yearPattern:"yyyy'\u5e74'",hourTimePattern:"H",minuteTimePattern:"H:mm",secondTimePattern:"H:mm:ss",millisecondTimePattern:"H:mm:ss:SSS"},"zh-hk":{datePattern:"\u5e74\u6708\u65e5",yearPattern:"yyyy",hourTimePattern:"h a",minuteTimePattern:"h:mm a",secondTimePattern:"h:mm:ss a",millisecondTimePattern:"h:mm:ss:SSS a"},"zh-tw":{datePattern:"\u5e74\u6708\u65e5",yearPattern:"yyyy",
hourTimePattern:"h a",minuteTimePattern:"h:mm a",secondTimePattern:"h:mm:ss a",millisecondTimePattern:"h:mm:ss:SSS a"},en:{datePattern:"MMMM d, yyyy",yearPattern:"yyyy",hourTimePattern:"h a",minuteTimePattern:"h:mm a",secondTimePattern:"h:mm:ss a",millisecondTimePattern:"h:mm:ss:SSS a"}};return C})},"widgets/TimeSlider/utils":function(){define("dojo/_base/html dojo/dom-geometry dojo/_base/array esri/layers/TimeInfo jimu/utils esri/TimeExtent libs/storejs/store moment/moment".split(" "),function(u,
l,f,A,B,y,h,q){var m={};m.intervalUnitOptions=[{label:window.jimuNls.timeUnit.year,value:A.UNIT_YEARS},{label:window.jimuNls.timeUnit.month,value:A.UNIT_MONTHS},{label:window.jimuNls.timeUnit.week,value:A.UNIT_WEEKS},{label:window.jimuNls.timeUnit.day,value:A.UNIT_DAYS},{label:window.jimuNls.timeUnit.hour,value:A.UNIT_HOURS},{label:window.jimuNls.timeUnit.minute,value:A.UNIT_MINUTES},{label:window.jimuNls.timeUnit.second,value:A.UNIT_SECONDS},{label:window.jimuNls.timeUnit.milliSecond,value:A.UNIT_MILLISECONDS}];
m.isLayerEnabledTime=function(a,p,k){k||(k=p.getLayerInfoById(a.id));if(k)return a=k.layerObject,a=a.timeInfo&&a.timeInfo.timeExtent,p=!0,k=k.originOperLayer,k.itemProperties&&"undefined"!==typeof k.itemProperties.timeAnimation&&(p=!1),!1===k.timeAnimation&&(p=!1),!0===k.timeAnimation&&(p=!0),k.itemProperties&&"undefined"!==typeof k.itemProperties.timeAnimation&&"undefined"!==typeof k.timeAnimation&&(p=!0),!(!p||!a)};m.setLayersUseMapTimebyConfig=function(a,p){p=p.customLayersConfig;a=a.getLayerInfoArray();
for(var k=0,r=p.length;k<r;k++)for(var w=p[k],z=0,C=a.length;z<C;z++){var g=a[z];w.id===g.id&&g.layerObject.setUseMapTime&&(!0===w.isTimeEnable?g.layerObject.setUseMapTime(!0):g.layerObject.setUseMapTime(!1))}};m.initPositionForTheme={DartTheme:{bottom:140},LaunchpadTheme:{bottom:120}};m.isRunInMobile=function(){return window.appInfo.isRunInMobile};m.isOutOfScreen=function(a,p){var k=l.getMarginBox(a.root);a=k.w;k=k.h;return p&&(p.top>=k||p.left>=a)?!0:!1};m._MINIMODE_HEIGHT=35;m.getMarginPosition=
function(a,p,k){var r=l.getMarginBox(a.root);a=r.w;r=r.h;p=u.getContentBox(p);k.marginPosition={right:a-(p.w+k.left),bottom:r-(m._MINIMODE_HEIGHT+k.top)}};m.setMarginPosition=function(a,p,k){if(k.marginPosition){var r=l.getMarginBox(a.root);a=r.w;r=r.h;var w=u.getContentBox(p);k.top=r-(m._MINIMODE_HEIGHT+k.marginPosition.bottom);k.left=a-(w.w+k.marginPosition.right);0>k.top&&(k.top=0);0>k.left&&(k.left=0)}u.setStyle(p,"top",k.top+"px");u.setStyle(p,"left",k.left+"px")};m.initPosition=function(a,p,
k){var r=window.getAppConfig();if(r&&r.theme&&r.theme.name)var w=r.theme.name;r=m.getInitTop(a,w);a=m.getInitLeft(a,p);k.top=r;k.left=a;u.setStyle(p,"top",k.top+"px");u.setStyle(p,"left",k.left+"px")};m.getInitTop=function(a,p){var k=0;return k=l.getMarginBox(a.root).h-(m.initPositionForTheme[p]?m.initPositionForTheme[p].bottom:60)-m._MINIMODE_HEIGHT};m.getInitLeft=function(a,p){a=l.getMarginBox(a.root);p=u.getContentBox(p);return a.w/2-p.w/2};m.isValidDate=function(a){return a instanceof Date&&!isNaN(a.getTime())};
m.isValidDataStrByDateLocale=function(a){return"undefined NaN, NaN"===a?!1:!0};m.hasLiveData=function(a){return!!(a&&a.useMapTime&&a.timeInfo&&a.timeInfo.hasLiveData)};m.getCalendarTime=function(a,p){if("time"===a.timeMode||"min"===a.timeMode||"max"===a.timeMode)var k=new Date(a.time);else if("now"===a.timeMode||"today"===a.timeMode)if(k=p?new Date(p):new Date,k="today"===a.timeMode?new Date(k.getFullYear(),k.getMonth(),k.getDate(),0,0,0):k,a=a.calender,p="",a&&a.number&&a.operator&&a.unit){var r=
a.unit;if(-1!==r.indexOf("esriTimeUnits"))(r=r.split("esriTimeUnits"))&&2===r.length&&(p=r[1]);else return console.log("unsupported unit:"+a.unit),new Date(k);"+"===a.operator?k=q(k).add(a.number,p).valueOf():"-"===a.operator&&(k=q(k).subtract(a.number,p).valueOf())}return new Date(k)};m.isConfigLiveMode=function(a){var p=!1,k=!1,r=!1===a.isHonorWebMap;a&&a.customTimeConfig&&a.customTimeConfig.startTime&&a.customTimeConfig.startTime.timeConfig&&a.customTimeConfig.startTime.timeConfig.timeMode&&(p=
m.isLiveTimeMode(a.customTimeConfig.startTime.timeConfig.timeMode));a&&a.customTimeConfig&&a.customTimeConfig.endTime&&a.customTimeConfig.endTime.timeConfig&&a.customTimeConfig.endTime.timeConfig.timeMode&&(k=m.isLiveTimeMode(a.customTimeConfig.endTime.timeConfig.timeMode));return r&&(p||k)};m.isLiveTimeMode=function(a){return!a||"now"!==a&&"today"!==a&&"max"!==a&&"min"!==a?!1:!0};m.timeCalendarForBuilderConfig=function(a){if(!1===a.isHonorWebMap){var p=new Date;var k=m.getCalendarTime(a.customTimeConfig.startTime.timeConfig,
p);p=m.getCalendarTime(a.customTimeConfig.endTime.timeConfig,p);return{startTime:k,endTime:p,interval:null!==a.customTimeConfig.interval?a.customTimeConfig.interval:null,thumbCount:!0===a.customTimeConfig.displayAllData?1:2}}return null};m.getFullTimeExtent=function(a,p){var k=null;f.forEach(a,function(r){r&&(k?(k.startTime>r.startTime&&(k.startTime=new Date(r.startTime.getTime())),k.endTime<r.endTime&&(k.endTime=new Date(r.endTime.getTime()))):k=new y(new Date(r.startTime.getTime()),new Date(r.endTime.getTime())))});
a=1;!0===p&&(a=0);k.startTime=new Date(k.startTime.getFullYear(),k.startTime.getMonth(),k.startTime.getDate(),k.startTime.getHours(),k.startTime.getMinutes(),0,0);k.endTime=new Date(k.endTime.getFullYear(),k.endTime.getMonth(),k.endTime.getDate(),k.endTime.getHours(),k.endTime.getMinutes()+a,0,0);return k};m.getAutoRefreshTime=function(a){var p=0,k="";if(a&&a.autoRefresh&&!0===a.autoRefresh.isAutoRefresh&&a.autoRefresh.interval&&a.autoRefresh.unit){var r=a.autoRefresh.unit;-1!==r.indexOf("esriTimeUnits")&&
(r=r.split("esriTimeUnits"))&&2===r.length&&(k=r[1]);k=k.toUpperCase();"SECONDS"===k?p=a.autoRefresh.interval:"MINUTES"===k?p=60*a.autoRefresh.interval:"HOURS"===k?p=3600*a.autoRefresh.interval:"DAYS"===k&&(p=86400*a.autoRefresh.interval)}return 1E3*p};m.getKey=function(a){return"TimeSlider."+encodeURIComponent(B.getAppIdFromUrl())+"."+a};m.getCacheByKeys=function(a){return h.get(m.getKey(a))};m.saveToLocalCache=function(a,p){m.removeLocalCache(a);h.set(m.getKey(a),p)};m.removeLocalCache=function(a){m.getCacheByKeys(a)&&
h.remove(m.getKey(a))};return m})},"widgets/TimeSlider/LayerProcesser":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented dijit/_WidgetBase ./utils".split(" "),function(u,l,f,A,B,y){return u([B,A],{nls:null,map:null,layerInfosObj:null,setLayerInfosObj:function(h){this.layerInfosObj=h},setTimeSlider:function(h){this.timeSlider=h},processTimeDisableLayer:function(){var h=0,q;h=0;for(q=this.map.layerIds.length;h<q;h++){var m=this.map.layerIds[h];m=this.map.getLayer(m);
this._processTimeUpdate(m)}h=0;for(q=this.map.graphicsLayerIds.length;h<q;h++)m=this.map.graphicsLayerIds[h],m=this.map.getLayer(m),this._processTimeUpdate(m)},_processTimeUpdate:function(h){var q=y.isLayerEnabledTime(h,this.layerInfosObj);h.setUseMapTime&&(!0!==q?h.setUseMapTime(!1):h.setUseMapTime(!0))},processerDisableLayers:function(h){h&&h.disabledLayers&&f.map(h.disabledLayers,l.hitch(this,function(q){!0!==q.isTimeEnabled&&(q=this.layerInfosObj.getLayerInfoById(q.layerId))&&q.layerObject&&q.layerObject.setUseMapTime&&
q.layerObject.setUseMapTime(!1)}))},hasVisibleTemporalLayer:function(){var h=0,q;h=0;for(q=this.map.layerIds.length;h<q;h++){var m=this.map.layerIds[h];m=this.map.getLayer(m);if(this._isTimeTemporalLayer(m,!0))return!0}h=0;for(q=this.map.graphicsLayerIds.length;h<q;h++)if(m=this.map.graphicsLayerIds[h],m=this.map.getLayer(m),this._isTimeTemporalLayer(m,!0))return!0;return!1},_isTimeTemporalLayer:function(h,q){if(!h)return!1;var m=h&&h.timeInfo&&h.useMapTime;!0===q&&(m=m&&h.visible);if(m)if("esri.layers.KMLLayer"===
h.declaredClass){if(h=h.getLayers(),f.some(h,function(a){return a.timeInfo&&a.timeInfo.timeExtent?!0:!1}))return!0}else{if(h.timeInfo&&h.timeInfo.timeExtent)return!0}else return!1},_getVisibleTemporalLayerNames:function(){var h=0,q,m=[];h=0;for(q=this.map.layerIds.length;h<q;h++){var a=this.map.layerIds[h];a=this.map.getLayer(a);this._isTimeTemporalLayer(a,!0)&&m.push(a.id)}h=0;for(q=this.map.graphicsLayerIds.length;h<q;h++)a=this.map.graphicsLayerIds[h],a=this.map.getLayer(a),this._isTimeTemporalLayer(a,
!0)&&m.push(a.id);return f.map(m,l.hitch(this,function(p){return this.layerInfosObj.getLayerInfoById(p).title||""}))},_onLayerInfosIsShowInMapChanged:function(h){f.some(h,l.hitch(this,function(q){for(var m=null;!m;)m=this.map.getLayer(q.id),q=q.parentLayerInfo;return this.layerProcesser._isTimeTemporalLayer(m)}))&&this.layerProcesser._onTimeTemportalLayerChanged(this)},_onLayerInfosChanged:function(h,q,m){"added"===q?(h=this.map.getLayer(m.id),this.layerProcesser._isTimeTemporalLayer(h,!0)&&this.layerProcesser._onTimeTemportalLayerChanged(this)):
"removed"===q&&this.layerProcesser._onTimeTemportalLayerChanged(this)},_onTimeTemportalLayerChanged:function(h){"closed"!==h.state&&(h.layerProcesser.hasVisibleTemporalLayer()?h.timeSlider?h.updateLayerLabel():h.showTimeSlider():h.timeSlider&&h.closeTimeSlider())},hasLiveDataLayer:function(){var h=0,q;h=0;for(q=this.map.layerIds.length;h<q;h++){var m=this.map.layerIds[h];m=this.map.getLayer(m);if(y.hasLiveData(m))return!0}h=0;for(q=this.map.graphicsLayerIds.length;h<q;h++)if(m=this.map.graphicsLayerIds[h],
m=this.map.getLayer(m),y.hasLiveData(m))return!0;return!1}})})},"widgets/TimeSlider/a11y/Widget":function(){define("dojo/_base/lang dojo/on dojo/_base/html ../utils jimu/utils dojo/keys".split(" "),function(u,l,f,A,B,y){return{a11y_init:function(){f.setAttr(this.domNode,"aria-label",this.nls._widgetLabel);f.setAttr(this.closeBtn,"role","button");f.setAttr(this.closeBtn,"aria-label",window.jimuNls.common.close);f.setAttr(this.noTimeContentNode,"tabindex",0);f.setAttr(this.playBtn,"tabindex",0);f.setAttr(this.previousBtn,
"tabindex",0);f.setAttr(this.nextBtn,"tabindex",0);f.setAttr(this.playBtn,"role","button");f.setAttr(this.playBtn,"aria-label",this.nls.pause);f.setAttr(this.previousBtn,"role","button");f.setAttr(this.previousBtn,"aria-label",this.nls.previous);f.setAttr(this.nextBtn,"role","button");f.setAttr(this.nextBtn,"aria-label",this.nls.next);this.a11y_lastNode=this.a11y_firstNode=this.noTimeContentNode;B.initFirstFocusNode(this.domNode,this.a11y_firstNode);B.initLastFocusNode(this.domNode,this.a11y_lastNode);
this.a11y_openForFirstTime=!0},a11y_update:function(){this.a11y_firstNode=this.previousBtn;this.a11y_lastNode=this.speedMenu.speedLabelNode;B.initFirstFocusNode(this.domNode,this.a11y_firstNode);B.initLastFocusNode(this.domNode,this.a11y_lastNode);setTimeout(u.hitch(this,function(){this.a11y_openForFirstTime&&this.openAtStart&&(this.openAtStartAysn=!0);B.isAutoFocusFirstNodeWidget(this)&&this.asyncFocusPlayBtn();this.a11y_openForFirstTime=!1}),50)},asyncFocusPlayBtn:function(){this.playBtn.focus();
this.openAtStartAysn=!1},a11y_open:function(h){this.a11y_openForFirstTime&&this.openAtStart||setTimeout(u.hitch(this,function(){"none"!==f.getStyle(this.noTimeContentNode,"display")&&this.noTimeContentNode.focus()}),50);h||(this.a11y_openForFirstTime=!1);B.isInNavMode()&&!A.isRunInMobile()&&(this._clearMiniModeTimer(),this.a11y_shownBy508=!0)},a11y_initEvents:function(){this.own(l(this.domNode,"focus",u.hitch(this,function(h){f.hasClass(h.target,this.baseClass)&&(A.isRunInMobile()||this._clearMiniModeTimer())})));
this.own(l(this.domNode,"blur",u.hitch(this,function(h){f.hasClass(h.target,this.baseClass)&&!A.isRunInMobile()&&(this._setMiniModeTimer(),f.hasClass(this.domNode,"mini-mode")&&(f.removeClass(this.domNode,"mini-mode"),this._adaptResponsive()))})));this.own(l(this.domNode,"keydown",u.hitch(this,function(h){!f.hasClass(h.target,this.baseClass)||h.keyCode!==y.ENTER&&h.keyCode!==y.SPACE||this.a11y_firstNode&&this.a11y_firstNode.focus&&this.a11y_firstNode.focus();this.a11y_shownBy508=!0})));this.own(l(this.closeBtn,
"keydown",u.hitch(this,function(h){h.keyCode===y.TAB&&this.a11y_firstNode&&this.a11y_firstNode.focus&&(h.stopPropagation(),h.preventDefault(),this.a11y_firstNode.focus());if(h.keyCode===y.ENTER||h.keyCode===y.SPACE||h.keyCode===y.ESCAPE)h.stopPropagation(),l.emit(this.closeBtn,"click",{cancelable:!1,bubbles:!0})})));this.own(l(this.closeBtn,"focus",u.hitch(this,function(h){h.stopPropagation()})));this.own(l(this.timeContentNode,"keydown",u.hitch(this,function(h){h.keyCode===y.ESCAPE&&(h.stopPropagation(),
this.closeBtn.focus())})));this.own(l(this.noTimeContentNode,"keydown",u.hitch(this,function(h){h.keyCode===y.ESCAPE&&(h.stopPropagation(),this.closeBtn.focus())})));this.own(l(this.playBtn,"keydown",u.hitch(this,function(h){if(h.keyCode===y.ENTER||h.keyCode===y.SPACE)h.stopPropagation(),l.emit(this.playBtn,"click",{cancelable:!1,bubbles:!0})})));this.own(l(this.previousBtn,"keydown",u.hitch(this,function(h){if(h.keyCode===y.ENTER||h.keyCode===y.SPACE)h.stopPropagation(),l.emit(this.previousBtn,"click",
{cancelable:!1,bubbles:!0})})));this.own(l(this.nextBtn,"keydown",u.hitch(this,function(h){if(h.keyCode===y.ENTER||h.keyCode===y.SPACE)h.stopPropagation(),l.emit(this.nextBtn,"click",{cancelable:!1,bubbles:!0})})))}}})},"widgets/TimeSlider/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:dojox/form/resources/HorizontalRangeSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderH dojoxRangeSlider" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onkeyup:_onKeyUp" role\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"topDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconH" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" dojoAttachEvent\x3d"onmousedown:_onClkDecBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cinput dojoAttachPoint\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3cdiv role\x3d"presentation" class\x3d"dojoxRangeSliderBarContainer" dojoAttachPoint\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachPoint\x3d"sliderHandle,focusNode" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onmousedown:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" dojoAttachEvent\x3d"onmousedown:_onBarClick"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableH"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleH" dojoAttachPoint\x3d"sliderHandleMax" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onmousedown:_onHandleClickMax" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" dojoAttachEvent\x3d"onmousedown:_onRemainingBarClick"\x3e\x3c/div\r\n\t\t\t\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" dojoAttachEvent\x3d"onmousedown:_onClkIncBumper"\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconH" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"containerNode,bottomDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" colspan\x3d"2"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:dojox/form/resources/VerticalRangeSlider.html":'\x3ctable class\x3d"dijitReset dijitSlider dijitSliderV dojoxRangeSlider" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none"\r\n\trole\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconV" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"decrementButton" dojoAttachEvent\x3d"onclick: increment"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper" dojoAttachEvent\x3d"onclick:_onClkIncBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"leftDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV" style\x3d"text-align:center;height:100%;"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset" style\x3d"height:100%;"\r\n\t\t\t\x3e\x3cinput dojoAttachPoint\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3ccenter role\x3d"presentation" style\x3d"position:relative;height:100%;" dojoAttachPoint\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV" dojoAttachEvent\x3d"onmousedown:_onRemainingBarClick"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableV" style\x3d"vertical-align:top;" role\x3d"slider"\r\n\t\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleV" dojoAttachPoint\x3d"sliderHandle,focusNode" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onmousedown:_onHandleClick"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3cdiv role\x3d"presentation" dojoAttachPoint\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onmousedown:_onBarClick"\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableV" style\x3d"vertical-align:top;" role\x3d"slider"\r\n\t\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderImageHandle dijitSliderImageHandleV" dojoAttachPoint\x3d"sliderHandleMax" tabIndex\x3d"${tabIndex}" dojoAttachEvent\x3d"onkeypress:_onKeyPress,onmousedown:_onHandleClickMax"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd dojoAttachPoint\x3d"containerNode,rightDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV" style\x3d"text-align:center;height:100%;"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper" dojoAttachEvent\x3d"onclick:_onClkDecBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconV" tabIndex\x3d"-1" style\x3d"display:none" dojoAttachPoint\x3d"incrementButton" dojoAttachEvent\x3d"onclick: decrement"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:dijit/form/templates/VerticalSlider.html":'\x3ctable class\x3d"dijit dijitReset dijitSlider dijitSliderV" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0" rules\x3d"none" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeyup:_onKeyUp"\r\n\trole\x3d"presentation"\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderIncrementIconV" style\x3d"display:none" data-dojo-attach-point\x3d"decrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e+\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper" data-dojo-attach-event\x3d"press:_onClkIncBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"leftDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationL dijitSliderDecorationV"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderDecorationC" style\x3d"height:100%;"\r\n\t\t\t\x3e\x3cinput data-dojo-attach-point\x3d"valueNode" type\x3d"hidden" ${!nameAttrSetting}\r\n\t\t\t/\x3e\x3ccenter class\x3d"dijitReset dijitSliderBarContainerV" role\x3d"presentation" data-dojo-attach-point\x3d"sliderBarContainer"\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"remainingBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV" data-dojo-attach-event\x3d"press:_onBarClick"\x3e\x3c!--#5629--\x3e\x3c/div\r\n\t\t\t\t\x3e\x3cdiv role\x3d"presentation" data-dojo-attach-point\x3d"progressBar" class\x3d"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV" data-dojo-attach-event\x3d"press:_onBarClick"\r\n\t\t\t\t\t\x3e\x3cdiv class\x3d"dijitSliderMoveable dijitSliderMoveableV" style\x3d"vertical-align:top;"\r\n\t\t\t\t\t\t\x3e\x3cdiv data-dojo-attach-point\x3d"sliderHandle,focusNode" class\x3d"dijitSliderImageHandle dijitSliderImageHandleV" data-dojo-attach-event\x3d"press:_onHandleClick" role\x3d"slider"\x3e\x3c/div\r\n\t\t\t\t\t\x3e\x3c/div\r\n\t\t\t\t\x3e\x3c/div\r\n\t\t\t\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd data-dojo-attach-point\x3d"containerNode,rightDecoration" class\x3d"dijitReset dijitSliderDecoration dijitSliderDecorationR dijitSliderDecorationV"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\r\n\t\t\t\x3e\x3ccenter\x3e\x3cdiv class\x3d"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper" data-dojo-attach-event\x3d"press:_onClkDecBumper"\x3e\x3c/div\x3e\x3c/center\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\t\x3e\x3ctr class\x3d"dijitReset"\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV"\r\n\t\t\t\x3e\x3cdiv class\x3d"dijitSliderDecrementIconV" style\x3d"display:none" data-dojo-attach-point\x3d"incrementButton"\x3e\x3cspan class\x3d"dijitSliderButtonInner"\x3e-\x3c/span\x3e\x3c/div\r\n\t\t\x3e\x3c/td\r\n\t\t\x3e\x3ctd class\x3d"dijitReset"\x3e\x3c/td\r\n\t\x3e\x3c/tr\r\n\x3e\x3c/table\x3e\r\n',
"url:esri/dijit/templates/TimeSlider.html":'   \x3cdiv class\x3d"esriTimeSlider"\x3e\r\n   \x3ctable width\x3d"100%" cellspacing\x3d"0" cellpadding\x3d"0" border\x3d"0"\x3e\r\n   \x3ctr\x3e\r\n   \x3ctd align\x3d"right" valign\x3d"middle"\x3e\x3cbutton dojoType\x3d"dijit.form.Button" showLabel\x3d"false" iconClass\x3d"tsButton tsPlayButton" dojoAttachEvent\x3d"onClick:_onPlay" dojoAttachPoint\x3d"playPauseBtn" type\x3d"button"\x3e${NLS_play}\x3c/button\x3e\x3c/td\x3e\r\n   \x3ctd align\x3d"center" valign\x3d"middle" width\x3d"80%" class\x3d"tsTmp"\x3e\x3c/td\x3e\r\n   \x3ctd align\x3d"left" valign\x3d"middle" width\x3d"30"\x3e\x3cbutton dojoType\x3d"dijit.form.Button" showLabel\x3d"false" iconClass\x3d"tsButton tsPrevButton" dojoAttachEvent\x3d"onClick:_onPrev" dojoAttachPoint\x3d"previousBtn" type\x3d"button"\x3e${NLS_previous}\x3c/button\x3e\x3c/td\x3e\r\n   \x3ctd align\x3d"left" valign\x3d"middle"\x3e\x3cbutton dojoType\x3d"dijit.form.Button" showLabel\x3d"false" iconClass\x3d"tsButton tsNextButton" dojoAttachEvent\x3d"onClick:_onNext" dojoAttachPoint\x3d"nextBtn" type\x3d"button"\x3e${NLS_next}\x3c/button\x3e\x3c/td\x3e\r\n   \x3c/tr\x3e    \r\n   \x3c/table\x3e\r\n   \x3c/div\x3e',
"url:widgets/TimeSlider/SpeedMenu.html":'\x3cdiv class\x3d"speed-container jimu-float-trailing" data-dojo-attach-point\x3d"speedContainerNode"\x3e\r\n\t\x3cdiv class\x3d"speed-label" data-dojo-attach-point\x3d"speedLabelNode" tabindex\x3d"0" role\x3d"button"\x3e1x\x3c/div\x3e\r\n\t\x3cdiv class\x3d"speed-menu hide" data-dojo-attach-point\x3d"speedMenu" data-dojo-attach-event\x3d"click:_onSelectSpeedItem"\x3e\r\n\t\t\x3c!--\x3cdiv class\x3d"speed-menu-item item-label jimu-ellipsis" title\x3d"${nls.speedLabel}"\x3e${nls.speedLabel}\x3c/div\x3e--\x3e\r\n\t\t\x3cdiv class\x3d"speed-menu-item" data-speed\x3d"0.25" data-dojo-attach-point\x3d"item025" tabindex\x3d"0"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"x025"\x3e\x3c/span\x3e\r\n\t\t\t\x3cdiv class\x3d"jimu-float-trailing check hide"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"speed-menu-item" data-speed\x3d"0.5" data-dojo-attach-point\x3d"item05" tabindex\x3d"0"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"x05"\x3e\x3c/span\x3e\r\n\t\t\t\x3cdiv class\x3d"jimu-float-trailing check hide"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"speed-menu-item" data-speed\x3d"1" data-dojo-attach-point\x3d"item1" tabindex\x3d"0"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"x1"\x3e\x3c/span\x3e\r\n\t\t\t\x3cdiv class\x3d"jimu-float-trailing check hide"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"speed-menu-item" data-speed\x3d"1.5" data-dojo-attach-point\x3d"item15" tabindex\x3d"0"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"x15"\x3e\x3c/span\x3e\r\n\t\t\t\x3cdiv class\x3d"jimu-float-trailing check hide"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"speed-menu-item" data-speed\x3d"2" data-dojo-attach-point\x3d"item2" tabindex\x3d"0"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"x2"\x3e\x3c/span\x3e\r\n\t\t\t\x3cdiv class\x3d"jimu-float-trailing check hide"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/TimeSlider/Widget.html":'\x3cdiv class\x3d"jimu-widget-timeslider mini-mode"\x3e\r\n\t\x3cdiv class\x3d"no-time-content drag-handler" data-dojo-attach-point\x3d"noTimeContentNode" style\x3d"display:none"\x3e${nls.disableTips}\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"time-content" data-dojo-attach-point\x3d"timeContentNode"\x3e\r\n\t\t\x3cdiv class\x3d"label-container drag-handler" data-dojo-attach-point\x3d"labelContainer" data-dojo-attach-event\x3d"onclick:_onHandleClick"\x3e\r\n\t\t\t\x3cdiv class\x3d"time-extent-container"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"live-icon hide" data-dojo-attach-point\x3d"liveIcon" title\x3d"${nls.liveData}"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"jimu-ellipsis" data-dojo-attach-point\x3d"timeExtentLabelNode"\x3e${nls.timeExtent}\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv class\x3d"layer-labels jimu-ellipsis" data-dojo-attach-point\x3d"layerLabelsNode"\x3e${nls.layers}\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"slider-content clearFix jimu-float-leading" data-dojo-attach-point\x3d"sliderContent"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"sliderNodeContainer" class\x3d"slider-node-container jimu-float-leading"\x3e\x3c/div\x3e\r\n\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"btnsContainer" class\x3d"btns-container jimu-float-leading"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"previousBtn" class\x3d"previousBtn btn jimu-float-leading"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"playBtn" class\x3d"playBtn btn jimu-float-leading"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"nextBtn" class\x3d"nextBtn btn jimu-float-leading"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\r\n\t\t\t\x3c!--speedMenuNode--\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"close-btn" data-dojo-attach-point\x3d"closeBtn" tabindex\x3d"0"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/TimeSlider/css/style.css":'.jimu-widget-timeslider{position: absolute; background: rgba(0,0,0,0.55); border-radius: 3px; padding: 0 14px; width: 360px !important; z-index: 102 !important; transition: height 0.5s ease; -moz-transition: height 0.5s ease; -webkit-transition: height 0.5s ease; -o-transition: height 0.5s ease;}.jimu-rtl .jimu-widget-timeslider{right: auto !important;}.jimu-widget-timeslider .esriTimeSlider{z-index: 99;}.jimu-widget-timeslider .no-time-content,.jimu-widget-timeslider .time-content{position: relative; display: none; z-index: 0;}.jimu-widget-timeslider .no-time-content{height: 30px; padding: 0px 10px; line-height: 30px; font-size: 14px; color: #fff;}.jimu-widget-timeslider .time-content{height: 72px;}.jimu-widget-timeslider .label-container{padding: 10px 15px 10px 10px; font-size: 12px;}.jimu-widget-timeslider .drag-handler{cursor: move;}.jimu-widget-timeslider .time-extent-container{display: flex; align-items: center; justify-content: left; color: #fff; font-family: AvenirNext-Medium; color: #FFFFFF; line-height: 20px; margin-bottom: 5px;}.jimu-widget-timeslider .live-icon{height: 10px; width: 22px; background: url("images/live.svg") no-repeat; background-position: 50% 50%; vertical-align: middle; position: relative; left: auto; right: auto;}.jimu-rtl .jimu-widget-timeslider .live-icon{}.jimu-widget-timeslider .layer-labels{opacity: 0.8; font-family: AvenirNext-Regular; color: #FFFFFF;}.jimu-widget-timeslider .slider-content{position: absolute; margin: auto; bottom: 20px; width: 100%; height: 32px; opacity: 1; transition: opacity 0.5s ease; -moz-transition: opacity 0.5s ease; -webkit-transition: opacity 0.5s ease; -o-transition: opacity 0.5s ease;}.jimu-widget-timeslider .slider-content .esriTimeSlider{width: 224px; margin: 5px 8px 0 8px;}.jimu-widget-timeslider .speed-container{position: relative; height: 16px; width: 28px; cursor: pointer; margin: 0 10px; bottom: -2px;}.jimu-widget-timeslider .speed-menu{width: 75px; position: absolute; z-index: 104; bottom: 27px; text-align: left; font-size: 12px; background: #FFFFFF; color: #000000; box-shadow: 0 2px 4px 0;}.jimu-rtl .jimu-widget-timeslider .speed-menu{text-align: right;}.jimu-widget-timeslider .speed-menu-item{width: 100%; display: inline-block; height: 24px; line-height: 24px; padding-left: 10px;}.jimu-rtl .jimu-widget-timeslider .speed-menu-item{padding-left: 0; padding-right: 10px;}.jimu-widget-timeslider .item-label {border-bottom: 1px solid #c9e0f6;}.jimu-widget-timeslider .speed-menu-item:hover{background: #EEEEEE;}.jimu-widget-timeslider .speed-label{width: 28px; height: 16px; font-family: Avenir-Medium; font-size: 12px; color: #000000; text-align: center; opacity: 0.6; background: #FFFFFF; border-radius: 100px; position: absolute;}.jimu-widget-timeslider .speed-label:hover{opacity: 1; background: #FFFFFF;}.jimu-widget-timeslider .esriTimeSlider .tsTicks{display: none;}.jimu-widget-timeslider .esriTimeSlider .ts {padding: 0;}.jimu-widget-timeslider.mobile {width:100% !important; top:auto !important; bottom:0 !important; left:0 !important;}.jimu-widget-timeslider.mobile .esriTimeSlider{width: 100%; margin: 0; margin-bottom: 10px;}.jimu-widget-timeslider.mobile .slider-content{bottom: 9px;}.jimu-widget-timeslider.mobile .slider-node-container{width:100%;}.jimu-widget-timeslider.mobile .label-container .time-extent-container{justify-content: center;}.jimu-widget-timeslider.mobile .label-container .layer-labels{text-align: center;}.jimu-widget-timeslider .hide {display: none !important;}.jimu-widget-timeslider .clearFix {*overflow: hidden; *zoom: 1;}.jimu-widget-timeslider .clearFix:after {display: table; content: ""; width: 0; clear: both;}.jimu-widget-timeslider .close-btn{height: 10px; width: 10px; background: url("images/close.svg") no-repeat; background-position: 50% 50%; cursor: pointer; vertical-align: middle; position: absolute; right:14px; top:14px; z-index: 1;}.jimu-rtl .jimu-widget-timeslider .close-btn{right:auto; left:14px;}.jimu-widget-timeslider .esriTimeSlider .dijitInline.dijitButtonNode{background: transparent; border: none; box-shadow: none}.jimu-widget-timeslider .esriTimeSlider .dijitSliderImageHandleH{top:-8px}.jimu-widget-timeslider .esriTimeSlider .dojoxRangeSlider .dijitSliderImageHandleH{height: 8px; width: 8px; background: url("images/track.svg") no-repeat; background-position: 50% 50%; cursor: pointer;}.jimu-widget-timeslider .esriTimeSlider .dojoxRangeSlider .dijitSliderImageHandleH:hover {background: url("images/track_hover.svg") no-repeat;}.jimu-widget-timeslider .dijitSliderLeftBumper{border-radius: 10px 0 0 10px;}.jimu-widget-timeslider .dijitSliderRightBumper{border-radius: 0 10px 10px 0;}.jimu-widget-timeslider .dijitSlider .dijitSliderProgressBarH,.jimu-widget-timeslider .dijitSlider .dijitSliderLeftBumper{background-image: none; background-color: #24B5CC;}.jimu-widget-timeslider .dijitSlider.dojoxRangeSlider .dijitSliderLeftBumper{background: #FFFFFF !important;}.jimu-widget-timeslider .btns-container{margin-left: auto; margin-bottom: 12px;}.jimu-widget-timeslider .previousBtn {height: 20px; width: 20px; background: url("images/skip-previous.svg") no-repeat; background-position: 50% 50%; cursor: pointer;}.jimu-widget-timeslider .previousBtn:hover {background: url("images/skip-previous_hover.svg") no-repeat;}.jimu-widget-timeslider .nextBtn {height: 20px; width: 20px; background: url("images/skip-next.svg") no-repeat; background-position: 50% 50%; cursor: pointer;}.jimu-widget-timeslider .nextBtn:hover {background: url("images/skip-next_hover.svg") no-repeat;}.jimu-widget-timeslider .playBtn{height: 20px; width: 20px; background: url("images/play.svg") no-repeat; background-position: 50% 50%; cursor: pointer; margin: 0px 6px;}.jimu-widget-timeslider .playBtn:hover {background: url("images/play_hover.svg") no-repeat;}.jimu-widget-timeslider .playBtn.pause{height: 20px; width: 20px; background: url("images/pause.svg") no-repeat; background-position: 50% 50%; cursor: pointer;}.jimu-widget-timeslider .playBtn.pause:hover {background: url("images/pause_hover.svg") no-repeat;}.check{background: url("images/check.svg") no-repeat; width: 18px; height: 12px; display: inline-block; margin: 5px;}.jimu-widget-timeslider.mini-mode {height:35px !important; background: rgba(0,0,0,0.4);}.jimu-widget-timeslider.mini-mode .time-content{height: 35px;}.jimu-widget-timeslider.mini-mode .label-container{padding: 0;}.jimu-widget-timeslider.mini-mode .label-container .layer-labels{display: none !important;}.jimu-widget-timeslider.mini-mode .slider-content{opacity: 0;}.jimu-widget-timeslider.mini-mode .slider-content .esriTimeSlider{margin: 0; bottom: 0;}.jimu-widget-timeslider.mini-mode .slider-content .dijitSlider .dijitSliderRemainingBarH,.jimu-widget-timeslider.mini-mode .slider-content .dijitSlider .dijitSliderRightBumper,.jimu-widget-timeslider.mini-mode .dijitSlider.dojoxRangeSlider .dijitSliderLeftBumper,.jimu-widget-timeslider.mini-mode .dijitSlider.dojoxRangeSlider .dijitSliderBottomBumper{background-color: #333333; border-color: #333333;}.jimu-widget-timeslider.mini-mode .close-btn,.jimu-widget-timeslider.mini-mode .btns-container,.jimu-widget-timeslider.mini-mode .speed-container{display: none;}.jimu-widget-timeslider.mini-mode .esriTimeSlider .dijitSliderImageHandleH{display: none;}.jimu-widget-timeslider.mini-mode .time-extent-container{padding: 6px; justify-content: center;}.jimu-widget-timeslider.mini-mode .live-icon{position: absolute; left: 6px;}.jimu-rtl .jimu-widget-timeslider.mini-mode .live-icon{left: auto; right: 6px;}.jimu-widget-timeslider.mini-mode .slider-content .esriTimeSlider{bottom: -45px !important; width: 100%;}.mini-mode.mobile .slider-content .esriTimeSlider{bottom: -33px;}.jimu-widget-timeslider.mini-mode .slider-node-container{width:100%; overflow: hidden;}.DartTheme .jimu-widget-timeslider .dijitSliderImageHandle:after{display:none;}.LaunchpadTheme .jimu-widget-timeslider{position: absolute;}.LaunchpadTheme .jimu-widget-timeslider .dijitSliderImageHandle:after{display:none;}',
"*now":function(u){u(['dojo/i18n!*preload*widgets/TimeSlider/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/fx jimu/WidgetManager dojo/dnd/move dojo/on dojo/query dojo/Deferred dojo/dom-geometry jimu/LayerInfos/LayerInfos jimu/BaseWidget esri/TimeExtent esri/dijit/TimeSlider ./SpeedMenu jimu/utils ./TimeProcesser ./LayerProcesser ./utils ./a11y/Widget".split(" "),function(u,l,f,A,B,y,h,q,m,a,p,k,r,w,z,C,g,v,e,b,t){u=u([r],{baseClass:"jimu-widget-timeslider",clasName:"esri.widgets.TimeSlider",speedMenu:null,_showed:!1,
_timeHandles:null,layerInfosObj:null,_layerInfosDef:null,_timeSliderPropsDef:null,_miniModeTimer:null,_KEEP_AUTO_RESTART:null,_LAST_SWIPE_TIME:null,_LAST_SPEED_RATE:null,postCreate:function(){this.inherited(arguments);this._timeHandles=[];this.layerProcesser=new e({map:this.map,config:this.config});this.timeProcesser=new v({map:this.map,nls:this.nls,config:this.config,widgetId:this.id});this._initLayerInfosObj().then(l.hitch(this,function(){this.timeProcesser.setLayerInfosObj(this.layerInfosObj);
this.layerProcesser.setLayerInfosObj(this.layerInfosObj);this.layerProcesser.processTimeDisableLayer()}))},startup:function(){this.inherited(arguments);this.own(q(this.map,"resize",l.hitch(this,this._onMapResize)));this.own(q(this.closeBtn,"click",l.hitch(this,this._closeHanlder)));this.own(q(this.domNode,"mouseover",l.hitch(this,function(){b.isRunInMobile()||this._clearMiniModeTimer()})));this.own(q(this.domNode,"mouseout",l.hitch(this,function(){b.isRunInMobile()||this._setMiniModeTimer()})));this.own(q(this.domNode,
"click",l.hitch(this,function(){b.isRunInMobile()&&(this._clearMiniModeTimer(),this._setMiniModeTimer(),f.hasClass(this.domNode,"mini-mode")&&(f.removeClass(this.domNode,"mini-mode"),this._adaptResponsive()))})));!1===this.config.isHonorWebMap&&this.config.customLayersConfig&&b.setLayersUseMapTimebyConfig(this.layerInfosObj,this.config);b.isConfigLiveMode(this.config)&&this.layerProcesser.hasLiveDataLayer()?f.removeClass(this.liveIcon,"hide"):f.addClass(this.liveIcon,"hide");this.a11y_init();this.a11y_initEvents()},
setPosition:function(){if(!this._isSetPosition){var c=this.map.id,n=g.getPositionStyle(this.position);f.place(this.domNode,c);f.setStyle(this.domNode,n);this._isSetPosition=!0}},resize:function(){this._onMapResize()},onOpen:function(){this._isTestSizeFlag||(this._closeOthersTimeSlider(),this._initLayerInfosObj().then(l.hitch(this,function(){var c=this.layerProcesser.hasVisibleTemporalLayer();c?this._showed||this.showTimeSlider():this._showNoTimeLayer();b.initPosition(this.map,this.domNode,this.position);
this._adaptResponsive();this._setPlayBtnStyleTimer();this.a11y_open(c)})))},_closeOthersTimeSlider:function(){var c=y.getInstance().getWidgetsByName("TimeSlider");A.forEach(c,l.hitch(this,function(n){"opened"===n.state&&this.id!==n.id&&y.getInstance().closeWidget(n)}))},_openHanlder:function(){y.getInstance().openWidget(this)},onClose:function(){this._initLayerInfosObj().then(l.hitch(this,function(){this.layerProcesser.hasVisibleTemporalLayer()?this._showed&&(this.timeSlider.pause(),this.closeTimeSlider()):
(f.setStyle(this.noTimeContentNode,"display","none"),this._showed=!1,this.map.removeTimeSlider&&this.map.removeTimeSlider());this._cleanPlayBtnStyleTimer()}))},_closeHanlder:function(){this.a11y_shownBy508=!1;y.getInstance().closeWidget(this)},_showNoTimeLayer:function(){f.setStyle(this.noTimeContentNode,"display","block");f.setStyle(this.timeContentNode,"display","none");this._showed=!0},showTimeSlider:function(){f.setStyle(this.noTimeContentNode,"display","none");this.createTimeSlider().then(l.hitch(this,
function(){"undefined"===typeof this.timeSlider?this._showNoTimeLayer():(this.timeProcesser.setTimeSlider(this.timeSlider),this.layerProcesser.setTimeSlider(this.timeSlider),this._updateTimeSliderUI(),this.playBtn&&f.hasClass(this.playBtn,"pause")&&f.removeClass(this.playBtn,"pause"),f.setStyle(this.domNode,"display","block"),f.setStyle(this.timeContentNode,"display","block"),f.addClass(this.domNode,"show-time-slider"),this._initSpeedMenu(),B.animateProperty({node:this.timeContentNode,properties:{opacity:{start:0,
end:1}},onEnd:l.hitch(this,function(){this._showed=!0;!1!==this.config.autoPlay&&!1===f.hasClass(this.playBtn,"pause")&&q.emit(this.playBtn,"click",{cancelable:!1,bubbles:!0});this._adaptResponsive()}),duration:500}).play(),this.a11y_update())}))},closeTimeSlider:function(){this._showed=this._isSetPosition=this._draged=!1;this._timeSliderPropsDef=null;f.setStyle(this.domNode,"display","none");this.removeTimeSlider();this._destroySpeedMenu();B.animateProperty({node:this.timeContentNode,properties:{opacity:{start:1,
end:0}},onEnd:l.hitch(this,this._onCloseTimeSliderEnd),duration:500}).play()},_onCloseTimeSliderEnd:function(){this._destroyed||(f.removeClass(this.domNode,"show-time-slider"),"closed"===this.state&&(f.removeClass(this.domNode,"mobile-time-slider"),f.removeClass(this.timeContentNode,"mobile")))},getTimeSliderProps:function(){this._timeSliderPropsDef||(this._timeSliderPropsDef=new a,this.own(this._timeSliderPropsDef),this.timeProcesser.getTsPros().then(l.hitch(this,function(c){this.timeProcesser._getUpdatedFullTime().then(l.hitch(this,
function(n){this._timeSliderPropsDef.resolve({prop:c,fulltime:n})}))})));return this._timeSliderPropsDef},createTimeSlider:function(){return this.getTimeSliderProps().then(l.hitch(this,function(c){var n=c.prop,d=c.fulltime;c=null;if(this.timeSlider)return this.timeSlider;this.sliderNode=f.create("div",{},this.sliderNodeContainer);this.timeSlider=new z({},this.sliderNode);this.map.setTimeSlider(this.timeSlider);if(!1===this.config.isHonorWebMap){n=b.timeCalendarForBuilderConfig(this.config);null!==
n&&(n.startTime||n.endTime)||console.log("timeSlider: time param error");c=new w(n.startTime,n.endTime);n.interval.number||n.interval.units||(n.interval=this.timeProcesser.findDefaultInterval(c));this.timeSlider.setThumbCount(n.thumbCount);this.timeSlider.setThumbMovingRate(2E3);if("0"===n.interval.number||0===n.interval.number)n.interval.number=1;this.timeSlider.createTimeStopsByTimeInterval(c,n.interval.number,n.interval.units);this._LAST_SWIPE_TIME&&(this._LAST_SWIPE_TIME=null)}else n?(c=n.startTime&&
n.endTime?new w(new Date(n.startTime),new Date(n.endTime)):n.startTime?new w(new Date(n.startTime),d.endTime):n.endTime?new w(d.startTime,new Date(n.endTime)):new w(d.startTime,d.endTime),c.startTime>c.endTime&&(c=new w(d.startTime,d.endTime)),this.timeSlider.setThumbCount(n.thumbCount),n.numberOfStops?this.timeSlider.createTimeStopsByCount(c,n.numberOfStops+1):this.timeSlider.createTimeStopsByTimeInterval(c,n.timeStopInterval.interval,n.timeStopInterval.units),this.timeSlider.setThumbMovingRate(n.thumbMovingRate),
n.currentTimeExtent?(n.currentTimeExtent[0]||(n.currentTimeExtent[0]=c.startTime.getTime()),n.currentTimeExtent[1]||(n.currentTimeExtent[1]=c.endTime.getTime()),1===n.thumbCount?this.timeSlider.setThumbIndexes([this.timeProcesser.findClosestThumbIndex(this.timeSlider,n.currentTimeExtent[1])]):(c=this.timeProcesser.findClosestThumbIndex(this.timeSlider,n.currentTimeExtent[0]),n.currentTimeExtent[0]===n.currentTimeExtent[1]?this.timeSlider.setThumbIndexes([c,c]):(n=this.timeProcesser.findClosestThumbIndex(this.timeSlider,
n.currentTimeExtent[1]),c<n?this.timeSlider.setThumbIndexes([c,n]):this.timeSlider.setThumbIndexes([c,c+1])))):2===n.thumbCount&&this.timeSlider.setThumbIndexes([0,1])):(n={thumbCount:2},this.timeSlider.setThumbCount(n.thumbCount),this.timeSlider.setThumbIndexes([0,1]),this.timeSlider.setThumbMovingRate(2E3),n.timeStopInterval=this.timeProcesser.findDefaultInterval(d),this.timeSlider.createTimeStopsByTimeInterval(d,n.timeStopInterval.interval,n.timeStopInterval.units));25<this.timeSlider.timeStops.length&&
this.timeSlider.setTickCount(0);n=!0;!1===this.config.loopPlay&&(n=!1);this.timeSlider.setLoop(n);this.timeSlider.startup();this._KEEP_AUTO_RESTART&&(this.timeSlider.play(),this._KEEP_AUTO_RESTART=null);this._timeHandles.push(q(this.timeSlider,"time-extent-change",l.hitch(this,this.onTimeSliderChange)));return this.timeSlider}))},onTimeSliderChange:function(c){this.updateTimeExtentLabel(c);b.isConfigLiveMode(this.config)&&this.timeCalendarDataAutoRefresh(c)},timeCalendarDataAutoRefresh:function(c){if(c&&
c.startTime){var n=1<=this.timeSlider.timeStops.length?this.timeSlider.timeStops.length-1:0,d=this.timeSlider.timeStops[0].getTime();n=this.timeSlider.timeStops[n].getTime();var x=!1,E=c.startTime.getTime();c=c.endTime.getTime();this._LAST_SWIPE_TIME?this.timeSlider.playing&&(1===this.timeSlider.thumbCount?c===d&&this._LAST_SWIPE_TIME.endTime===n&&(x=!0):E===d&&this._LAST_SWIPE_TIME.endTime===n&&(x=!0)):(this._LAST_SWIPE_TIME={},x=!1);this._LAST_SWIPE_TIME.startTime=E;this._LAST_SWIPE_TIME.endTime=
c;x&&(console.log("auto refresh"),this._KEEP_AUTO_RESTART=!0,this._closeHanlder(),this._openHanlder())}},_updateTimeSliderUI:function(){this.updateLayerLabel();this.updateTimeExtentLabel();this._updateBtnsUI()},_updateBtnsUI:function(){var c=m(".esriTimeSlider \x3e table \x3e tbody \x3e tr \x3e td \x3e span \x3e span",this.esriTimeSlider);c&&3===c.length&&(this._rawPlayBtn=c[0],this._rawPreviousBtn=c[1],this._rawNextBtn=c[2]);(c=m(".esriTimeSlider \x3e table \x3e tbody \x3e tr \x3e td",this.esriTimeSlider))&&
4===c.length&&(f.addClass(c[0],"hide"),f.addClass(c[2],"hide"),f.addClass(c[3],"hide"));this._previousBtnHandler||(this._previousBtnHandler=this.own(q(this.previousBtn,"click",l.hitch(this,function(){q.emit(this._rawPreviousBtn,"click",{cancelable:!1,bubbles:!0})}))));this._playBtnHandler||(this._playBtnHandler=this.own(q(this.playBtn,"click",l.hitch(this,function(n){q.emit(this._rawPlayBtn,"click",{cancelable:!1,bubbles:!0});f.hasClass(this.playBtn,"pause")?f.removeClass(this.playBtn,"pause"):(f.addClass(this.playBtn,
"pause"),b.isRunInMobile()&&(f.addClass(this.domNode,"mini-mode"),this._adaptResponsive()));var d=this.timeSlider._slider;var x=l.isArray(d.value)?d.value[1]:d.value;!0!==this.timeSlider.loop&&x===d.maximum&&(this.timeSlider.play(),1<this.timeSlider.thumbCount?this.timeSlider.setThumbIndexes([0,1]):this.timeSlider.setThumbIndexes(0));n.stopPropagation();n.preventDefault()}))));this._nextBtnHandler||(this._nextBtnHandler=this.own(q(this.nextBtn,"click",l.hitch(this,function(){q.emit(this._rawNextBtn,
"click",{cancelable:!1,bubbles:!0})}))));window.isRTL&&(f.place(this.previousBtn,this.playBtn,"after"),f.place(this.nextBtn,this.playBtn,"before"))},removeTimeSlider:function(){A.forEach(this._timeHandles,function(c){c&&c.remove&&c.remove()});this.timeSlider&&!this.timeSlider._destroyed&&(this.timeSlider.destroy(),this.timeSlider=null);this.map&&this.map.setTimeExtent()},updateLayerLabel:function(){if(this.config.showLabels){f.setStyle(this.layerLabelsNode,"display","block");var c=this.nls.layers,
n=this.layerProcesser._getVisibleTemporalLayerNames();c+=n.join(",");this.layerLabelsNode.innerHTML=g.sanitizeHTML(c);f.setAttr(this.layerLabelsNode,"title",c)}else f.setStyle(this.layerLabelsNode,"display","none")},updateTimeExtentLabel:function(c){c=this.timeProcesser._getTimeFormatLabel(c);this.timeExtentLabelNode.innerHTML=g.sanitizeHTML(c);f.setAttr(this.timeExtentLabelNode,"title",c)},_adaptResponsive:function(c){this._showed&&setTimeout(l.hitch(this,function(){b.isRunInMobile()?(this.disableMoveable(),
f.addClass(this.timeContentNode,"mobile"),f.addClass(this.domNode,"mobile")):(c&&"undefined"!==typeof c.refreshMoveable&&!1===c.refreshMoveable||("none"!==f.getStyle(this.noTimeContentNode,"display")?this.dragHandler=this.noTimeContentNode:this.dragHandler=this.labelContainer,this.makeMoveable(this.dragHandler)),f.removeClass(this.timeContentNode,"mobile"),f.removeClass(this.domNode,"mobile"));this._setPopupPosition(b.isRunInMobile())}),10)},_setPopupPosition:function(c){c?this.config.showLabels?
f.setStyle(this.domNode,"height","128px"):f.setStyle(this.domNode,"height","108px"):(this.config.showLabels?f.setStyle(this.domNode,"height","92px"):f.setStyle(this.domNode,"height","72px"),this._draged||b.initPosition(this.map,this.domNode,this.position),!this._moving&&this.position&&this.position.left&&this.position.top&&(f.setStyle(this.domNode,"top",this.position.top+"px"),f.setStyle(this.domNode,"left",this.position.left+"px")));this._setUI(c)},_setUI:function(c){var n=f.getContentBox(this.btnsContainer);
c?(c=window.innerWidth/2-n.w/2,window.isRTL?f.setStyle(this.btnsContainer,"margin-right",c+"px"):f.setStyle(this.btnsContainer,"margin-left",c+"px"),this.config.showLabels&&!f.hasClass(this.domNode,"mini-mode")?f.setStyle(this.sliderContent,"bottom","-12px"):this.config.showLabels&&f.hasClass(this.domNode,"mini-mode")&&f.setStyle(this.sliderContent,"bottom","20px")):(f.setStyle(this.btnsContainer,"margin-left","auto"),f.setStyle(this.btnsContainer,"margin-right","auto"),this.config.showLabels&&!f.hasClass(this.domNode,
"mini-mode")?f.setStyle(this.sliderContent,"bottom","-20px"):this.config.showLabels&&f.hasClass(this.domNode,"mini-mode")?f.setStyle(this.sliderContent,"bottom","20px"):f.setStyle(this.sliderContent,"bottom","0px"))},_onMapResize:function(){"closed"!==this.state&&(b.isRunInMobile()||(b.isOutOfScreen(this.map,this.position)?b.isOutOfScreen(this.map,this.position)&&b.setMarginPosition(this.map,this.domNode,this.position):b.getMarginPosition(this.map,this.domNode,this.position)),this._adaptResponsive())},
destroy:function(){this.map&&this.map.setTimeExtent(null);this.inherited(arguments)},_setPlayBtnStyleTimer:function(){this._playBtnStyleTimer=setInterval(l.hitch(this,function(){this.timeSlider&&this.timeSlider.playing?(f.addClass(this.playBtn,"pause"),f.setAttr(this.playBtn,"aria-label",this.nls.pause)):(f.removeClass(this.playBtn,"pause"),f.setAttr(this.playBtn,"aria-label",this.nls.play))}),200)},_cleanPlayBtnStyleTimer:function(){this._playBtnStyleTimer&&clearTimeout(this._playBtnStyleTimer)},
_initLayerInfosObj:function(){this._layerInfosDef||(this._layerInfosDef=new a,this.own(this._layerInfosDef),k.getInstance(this.map,this.map.itemInfo).then(l.hitch(this,function(c){this.layerInfosObj=c;this.own(q(c,"layerInfosIsShowInMapChanged",l.hitch(this,this.layerProcesser._onLayerInfosIsShowInMapChanged)));this.own(c.on("layerInfosChanged",l.hitch(this,this.layerProcesser._onLayerInfosChanged)));this._layerInfosDef.resolve(this.layerInfosObj)})));return this._layerInfosDef},_clearMiniModeTimer:function(){f.removeClass(this.domNode,
"mini-mode");this._adaptResponsive({refreshMoveable:!1});this._miniModeTimer&&clearTimeout(this._miniModeTimer)},_setMiniModeTimer:function(){var c=b.isRunInMobile()?5E3:2E3;this._miniModeTimer=setTimeout(l.hitch(this,function(){!1===this.a11y_shownBy508&&(f.addClass(this.domNode,"mini-mode"),this._adaptResponsive())}),c)},makeMoveable:function(c){this.disableMoveable();var n=p.getMarginBox(this.map.root);this.moveable=new h.boxConstrainedMoveable(this.domNode,{box:n,handle:c||this.handleNode,within:!0});
this.own(q(this.moveable,"MoveStart",l.hitch(this,this.onMoveStart)));this.own(q(this.moveable,"Moving",l.hitch(this,this.onMoving)));this.own(q(this.moveable,"MoveStop",l.hitch(this,this.onMoveStop)))},disableMoveable:function(){this.moveable&&(this.dragHandler=null,this.moveable.destroy(),this.moveable=null)},onMoveStart:function(c){var n=p.getMarginBox(this.map.root),d=p.getMarginBox(this.domNode);if(window.isRTL){var x=f.getStyle(c.node,"right");f.setStyle(c.node,"left",n.w-d.w-parseInt(x,10)+
"px");f.setStyle(c.node,"right","")}this._draged||(this._draged=!0)},onMoving:function(){this._moving=!0},onMoveStop:function(c){c&&c.node&&(f.setStyle(c.node,"opacity",1),c=p.getMarginBox(c.node),this.position.left=c.l,this.position.top=c.t,b.getMarginPosition(this.map,this.domNode,this.position),setTimeout(l.hitch(this,function(){this._moving=!1}),10))},_onHandleClick:function(c){c.stopPropagation()},_initSpeedMenu:function(){this.speedMenu||(this.speedMenuNode=f.create("div",{"class":"jimu-float-trailing"},
this.sliderContent),this.speedMenu=new C({nls:this.nls},this.speedMenuNode),this.speedMenuSelectedHanlder=this.own(q(this.speedMenu,"selected",l.hitch(this,function(c){this.timeSlider&&c&&(this._LAST_SPEED_RATE=c,c=parseFloat(c),this.timeSlider.setThumbMovingRate(2E3/c))}))),this.speedMenuOpenHanlder=this.own(q(this.speedMenu,"open",l.hitch(this,function(){this._clearMiniModeTimer()}))),this.speedMenuCloseHanlder=this.own(q(this.speedMenu,"close",l.hitch(this,function(){this._setMiniModeTimer()}))),
this._LAST_SPEED_RATE&&this.speedMenu.setSpeed(this._LAST_SPEED_RATE))},_destroySpeedMenu:function(){this.speedMenu&&this.speedMenu.destroy&&this.speedMenu.destroy();this.speedMenuCloseHanlder=this.speedMenuOpenHanlder=this.speedMenuSelectedHanlder=this.speedMenu=null}});u.extend(t);return u});