// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("esri/geometry/Point esri/geometry/Polyline esri/geometry/webMercatorUtils dojo/Deferred dojo/_base/array dojo/_base/lang esri/SpatialReference".split(" "),function(x,y,w,z,A,B,C){var u={getProjectedGeometry:function(a,b,e){var f=new z;if(w.canProject(a,b)){var g=w.project(a,b);f.resolve(g)}else e.project([a],b,function(c){g=c[0];f.resolve(g)});return f.promise},getDestinationPoint:function(a,b,e){var f=a.x*Math.PI/180,g=b*Math.PI/180;b=Math.sin(g);g=Math.cos(g);var c=.9966471893352243*Math.tan(a.y*
Math.PI/180);a=1/Math.sqrt(1+c*c);var k=c*a,m=Math.atan2(c,g);c=a*b;var l=1-c*c,d=2.7233160610984375E11*l/4.040829998465916E13,q=1+d/16384*(4096+d*(-768+d*(320-175*d))),t=d/1024*(256+d*(-128+d*(74-47*d))),n=e/(6356752.314245*q),r=0;do{d=Math.cos(2*m+n);var h=Math.sin(n);var p=Math.cos(n);var v=t*h*(d+t/4*(p*(-1+2*d*d)-t/6*d*(-3+4*h*h)*(-3+4*d*d)));var D=n;n=e/(6356752.314245*q)+v}while(1E-12<Math.abs(n-D)&&200>++r);if(200<=r)return console.log("Formula failed to converge"),null;e=k*h-a*p*g;e=Math.atan2(k*
p+a*h*g,.9966471893352243*Math.sqrt(c*c+e*e));l=2.0955066654848088E-4*l*(4+.003352810664775694*(4-3*l));f=(f+(Math.atan2(h*b,a*p-k*h*g)-.003352810664775694*(1-l)*c*(n+l*h*(d+l*p*(-1+2*d*d))))+3*Math.PI)%(2*Math.PI)-Math.PI;e=180*e/Math.PI;f=180*f/Math.PI;return new x(f,e,new C(4326))},getInverseCalculations:function(a,b){var e=b.x*Math.PI/180-a.x*Math.PI/180,f=.9966471893352243*Math.tan(a.y*Math.PI/180);a=1/Math.sqrt(1+f*f);f*=a;var g=.9966471893352243*Math.tan(b.y*Math.PI/180);b=1/Math.sqrt(1+g*
g);g*=b;var c=e,k=0;do{var m=Math.sin(c);var l=Math.cos(c);var d=b*m*b*m+(a*g-f*b*l)*(a*g-f*b*l);d=Math.sqrt(d);if(0==d)return{distance:0,initialBearing:0,finalBearing:0};var q=f*g+a*b*l;var t=Math.atan2(d,q);var n=a*b*m/d;var r=1-n*n;var h=q-2*f*g/r;isNaN(h)&&(h=0);var p=2.0955066654848088E-4*r*(4+.003352810664775694*(4-3*r));var v=c;c=e+.003352810664775694*(1-p)*n*(t+p*d*(h+p*q*(-1+2*h*h)))}while(1E-12<Math.abs(c-v)&&200>++k);if(200<=k)return null;c=2.7233160610984375E11*r/4.040829998465916E13;
k=c/1024*(256+c*(-128+c*(74-47*c)));e=Math.atan2(b*m,a*g-f*b*l);a=Math.atan2(a*m,-f*b+a*g*l);e=(e+2*Math.PI)%(2*Math.PI);a=(a+2*Math.PI)%(2*Math.PI);f=Number((6356752.314245*(1+c/16384*(4096+c*(-768+c*(320-175*c))))*(t-k*d*(h+k/4*(q*(-1+2*h*h)-k/6*h*(-3+4*d*d)*(-3+4*h*h))))).toFixed(3));e=180*e/Math.PI;a=180*a/Math.PI;return{distance:f,initialBearing:e,finalBearing:a}},getLineBetweenPoints:function(a){var b,e=[];A.forEach(a,B.hitch(this,function(f){e.push([u.removeNegativeExponents(f.x),u.removeNegativeExponents(f.y)])}));
0<e.length&&(b=new y({paths:[e],spatialReference:{wkid:4326}}));return b},getAngleBetweenPoints:function(a,b){a=u.getInverseCalculations(a,b);return null===a?0:a.initialBearing},getDistanceBetweenPoints:function(a,b){a=u.getInverseCalculations(a,b);return null===a?0:a.distance},getPointsForArc:function(a,b,e,f){var g=[];var c=b-a;b=parseInt(c,10);0>=b&&(b=1);var k=Math.abs(c)/Math.abs(b);if(0<k)for(c=0;c<Math.abs(b)+1;c++){var m=a+k*c;(m=u.getDestinationPoint(e,m,Math.abs(f)))&&g.push(m)}return g},
removeNegativeExponents:function(a){return 1<a.toString().toLowerCase().split("e-").length?0:a}};return u});